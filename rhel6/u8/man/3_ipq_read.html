<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:20:09 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IPQ_READ(3) Linux Programmer s Manual IPQ_READ(3)</p>

<p>NAME ipq_read read queue messages from ip_queue and read
into supplied buffer</p>

<p>SYNOPSIS #include &lt;linux/netfilter.h&gt; #include
&lt;libipq.h&gt;</p>

<p>ssize_t ipq_read(const struct ipq_handle *h, unsigned
char *buf, size_t len, int timeout);</p>

<p>DESCRIPTION The ipq_read function reads a queue message
from the kernel and copies it to the memory pointed to by
buf to a maximum length of len.</p>

<p>The h parameter is a context handle which must
previously have been returned successfully from a call to
ipq_create_handle.</p>

<p>The caller is responsible for ensuring that the memory
pointed to by buf is large enough to contain len bytes.</p>

<p>The timeout parameter may be used to set a timeout for
the operation, specified in microseconds. This is
implemented internally by the library via the select system
call. A value of zero provides normal, backwards-compatible
blocking behaviour with no timeout. A negative value causes
the function to return immediately.</p>

<p>Data returned via buf should not be accessed directly.
Use the ipq_message_type, ipq_get_packet, and ipq_get_msgerr
functions to access the queue message in the buffer.</p>

<p>RETURN VALUE On failure, -1 is returned. On success, a
non-zero positive value is returned when no timeout value is
specified. On success with a timeout value specified, zero
is returned if no data was available to read, or if a
non-blocked signal was caught. In the latter case, the
global errno value will be set to EINTR.</p>

<p>ERRORS On error, a descriptive error message will be
available via the ipq_errstr function.</p>

<p>DIAGNOSTICS While the ipq_read function may return
successfully, the queue message copied to the buffer may
itself be an error message from a higher level kernel
component. Use ipq_message_type to determine if it is an
error message, and ipq_get_msgerr to access the value of the
message.</p>

<p>BUGS None known.</p>

<p>AUTHOR James Morris &lt;jmorris@intercode.com.au&gt;</p>

<p>COPYRIGHT Copyright (c) 2000-2001 Netfilter Core
Team.</p>

<p>Distributed under the GNU General Public License.</p>

<p>CREDITS Joost Remijn implemented the timeout feature,
which appeared in the 1.2.4 release of iptables.</p>

<p>SEE ALSO iptables(8), libipq(3), select(2).</p>

<p>Linux iptables 1.2 16 October 2001 IPQ_READ(3)</p>
<hr>
</body>
</html>
