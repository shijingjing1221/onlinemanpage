<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:13:03 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FENCE_AGENT(8) FENCE_AGENT(8)</p>

<p>NAME fence_mpath - Fence agent for multipath persistent
reservation</p>

<p>DESCRIPTION fence_mpath is an I/O fencing agent that
uses SCSI-3 persistent reser- vations to control access
multipath devices. Underlying devices must support SCSI-3
persistent reservations (SPC-3 or greater) as well as the
&quot;preempt-and-abort&quot; subcommand. The fence_mpath
agent works by having an unique key for each pair of node
and device that has to be set also in /etc/multipath.conf.
Once registered, a single node will become the reservation
holder by creating a &quot;write exclusive, regis- trants
only&quot; reservation on the device(s). The result is that
only reg- istered nodes may write to the device(s). When a
node failure occurs, the fence_mpath agent will remove the
key belonging to the failed node from the device(s). The
failed node will no longer be able to write to the
device(s). A manual reboot is required.</p>

<p>fence_mpath accepts options on the command line as well
as from stdin. Fenced sends parameters through stdin when it
execs the agent. fence_mpath can be run by itself with
command line options. This is useful for testing and for
turning outlets on or off from scripts.</p>

<p>Vendor URL: https://www.sourceware.org/dm/</p>

<p>PARAMETERS</p>

<p>-o, --action=[action] Fencing Action (Default Value:
off)</p>

<p>-d, --devices=[devices] List of devices to use for
current operation. Devices can be comma-separated list of
device-mapper multipath devices (eg. /dev/dm-3). Each device
must support SCSI-3 persistent reserva- tions.</p>

<p>-k, --key=[key] Key to use for the current operation.
This key should be unique to a node and have to be written
in /etc/multipath.conf. For the &quot;on&quot; action, the
key specifies the key use to register the local node. For
the &quot;off&quot; action, this key specifies the key to be
removed from the device(s). This parameter is always
required.</p>

<p>-v, --verbose Verbose mode</p>

<p>-D, --debug-file=[debugfile] Write debug information to
given file</p>

<p>-V, --version Display version information and exit</p>

<p>-h, --help Display help and exit</p>

<p>--delay=[seconds] Wait X seconds before fencing is
started (Default Value: 0)</p>

<p>--login-timeout=[seconds] Wait X seconds for cmd prompt
after login (Default Value: 5)</p>

<p>--mpathpersist-path=[path] Path to mpathpersist binary
(Default Value: /sbin/mpathpersist)</p>

<p>--power-timeout=[seconds] Test X seconds for status
change after ON/OFF (Default Value: 20)</p>

<p>--power-wait=[seconds] Wait X seconds after issuing
ON/OFF (Default Value: 0)</p>

<p>--shell-timeout=[seconds] Wait X seconds for cmd prompt
after issuing command (Default Value: 3)</p>

<p>--store-path=[path] Path to directory where fence agent
can store information (Default Value: /var/run/cluster)</p>

<p>--retry-on=[attempts] Count of attempts to retry power
on (Default Value: 1)</p>

<p>--use-sudo Use sudo (without password) when calling 3rd
party sotfware.</p>

<p>--sudo-path=[path] Path to sudo binary (Default Value:
/usr/bin/sudo)</p>

<p>ACTIONS</p>

<p>on Power on machine.</p>

<p>off Power off machine.</p>

<p>status This returns the status of the plug/virtual
machine.</p>

<p>list List available plugs with aliases/virtual machines
if there is support for more then one device. Returns N/A
otherwise.</p>

<p>list-status List available plugs with aliases/virtual
machines and their power state if it can be obtained without
additional commands.</p>

<p>monitor Check the health of fence device</p>

<p>metadata Display the XML metadata describing this
resource.</p>

<p>STDIN PARAMETERS</p>

<p>action Fencing Action (Default Value: off)</p>

<p>devices List of devices to use for current operation.
Devices can be comma-separated list of device-mapper
multipath devices (eg. /dev/dm-3). Each device must support
SCSI-3 persistent reserva- tions.</p>

<p>key Key to use for the current operation. This key
should be unique to a node and have to be written in
/etc/multipath.conf. For the &quot;on&quot; action, the key
specifies the key use to register the local node. For the
&quot;off&quot; action, this key specifies the key to be
removed from the device(s). This parameter is always
required.</p>

<p>verbose Verbose mode</p>

<p>debug Write debug information to given file</p>

<p>version Display version information and exit</p>

<p>help Display help and exit</p>

<p>delay Wait X seconds before fencing is started (Default
Value: 0)</p>

<p>login_timeout Wait X seconds for cmd prompt after login
(Default Value: 5)</p>

<p>mpathpersist_path Path to mpathpersist binary (Default
Value: /sbin/mpathpersist)</p>

<p>power_timeout Test X seconds for status change after
ON/OFF (Default Value: 20)</p>

<p>power_wait Wait X seconds after issuing ON/OFF (Default
Value: 0)</p>

<p>shell_timeout Wait X seconds for cmd prompt after
issuing command (Default Value: 3)</p>

<p>store_path Path to directory where fence agent can store
information (Default Value: /var/run/cluster)</p>

<p>retry_on Count of attempts to retry power on (Default
Value: 1)</p>

<p>sudo Use sudo (without password) when calling 3rd party
sotfware.</p>

<p>sudo_path Path to sudo binary (Default Value:
/usr/bin/sudo)</p>

<p>fence_mpath (Fence Agent) 2009-10-20 FENCE_AGENT(8)</p>
<hr>
</body>
</html>
