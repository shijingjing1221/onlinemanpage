<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:13:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FLOCK(1) H. Peter Anvin FLOCK(1)</p>

<p>NAME flock - Manage locks from shell scripts</p>

<p>SYNOPSIS flock [-sxon] [-w timeout] lockfile [-c]
command...</p>

<p>flock [-sxon] [-w timeout] lockdir [-c] command...</p>

<p>flock [-sxun] [-w timeout] fd</p>

<p>DESCRIPTION This utility manages flock(2) locks from
within shell scripts or the command line.</p>

<p>The first and second forms wraps the lock around the
executing a com- mand, in a manner similar to su(1) or
newgrp(1). It locks a specified file or directory, which is
created (assuming appropriate permissions), if it does not
already exist.</p>

<p>The third form is convenient inside shell scripts, and
is usually used the following manner:</p>

<p>( flock -s 200 # ... commands executed under lock ... )
200&gt;/var/lock/mylockfile</p>

<p>The mode used to open the file doesnt matter to flock;
using &gt; or &gt;&gt; allows the lockfile to be created if
it does not already exist, how- ever, write permission is
required; using &lt; requires that the file already exists
but only read permission is required.</p>

<p>By default, if the lock cannot be immediately acquired,
flock waits until the lock is available.</p>

<p>OPTIONS -s, --shared Obtain a shared lock, sometimes
called a read lock.</p>

<p>-x, -e, --exclusive Obtain an exclusive lock, sometimes
called a write lock. This is the default.</p>

<p>-u, --unlock Drop a lock. This is usually not required,
since a lock is automatically dropped when the file is
closed. However, it may be required in special cases, for
example if the enclosed com- mand group may have forked a
background process which should not be holding the lock.</p>

<p>-n, --nb, --nonblock Fail (with an exit code of 1)
rather than wait if the lock can- not be immediately
acquired.</p>

<p>-w, --wait, --timeout seconds Fail (with an exit code of
1) if the lock cannot be acquired within seconds seconds.
Decimal fractional values are allowed.</p>

<p>-o, --close Close the file descriptor on which the lock
is held before exe- cuting command. This is useful if
command spawns a child pro- cess which should not be hold
ing the lock.</p>

<p>-c, --command command Pass a single command to the shell
with -c.</p>

<p>-h, --help Print a help message.</p>

<p>AUTHOR Written by H. Peter Anvin
&lt;hpa@zytor.com&gt;.</p>

<p>COPYRIGHT Copyright &copy; 2003-2006 H. Peter Anvin.
This is free software; see the source for copying
conditions. There is NO warranty; not even for
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>

<p>SEE ALSO flock(2)</p>

<p>AVAILABILITY The flock command is part of the
util-linux-ng package and is available from
ftp://ftp.kernel.org/pub/linux/utils/util-linux-ng/.</p>

<p>flock utility 4 Feb 2006 FLOCK(1)</p>
<hr>
</body>
</html>
