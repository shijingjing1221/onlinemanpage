<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:28 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IEEE1284_NEGOTIATION(3) Functions
IEEE1284_NEGOTIATION(3)</p>

<p>NAME ieee1284_negotiate, ieee1284_terminate - IEEE 1284
negotiation</p>

<p>SYNOPSIS #include &lt;ieee1284.h&gt;</p>

<p>int ieee1284_negotiate(struct parport *port, int
mode);</p>

<p>void ieee1284_terminate(struct parport *port);</p>

<p>DESCRIPTION These functions are for negotiating to and
terminating from IEEE 1284 data transfer modes. The default
mode is called compatibility mode, or in other words normal
printer protocol. It is a host-to-peripheral mode only.
There are special modes that allow peripheral-to-host
transfer as well, which may be negotiated to using
ieee1284_negotiate. IEEE 1284 negotiation is a process by
which the host requests a transfer mode and the peripheral
accepts or rejects it. An IEEE 1284-compliant device will
require a successful negotiation to a particular mode before
it is used for data transfer (but simpler devices may not if
they only speak one transfer mode).</p>

<p>To terminate the special mode and go back to
compatilibity mode use ieee1284_terminate.</p>

<p>These functions act on the parallel port associated with
port, which must be claimed.</p>

<p>With a device strictly complying to IEEE 1284 you will
need to call ieee1284_terminate in between any two calls to
ieee1284_negotiate for modes other than M1284_COMPAT.</p>

<p>AVAILABLE MODES Uni-directional modes &middot;
M1284_COMPAT: Compatibility mode. Normal printer protocol.
This is not a negotiated mode, but is the default mode in
absence of negotiation. ieee1284_negotiate(port,
M1284_COMPAT) is equivalent to ieee1284_terminate(port).
This host-to-peripheral mode is used for sending data to
printers, and is historically the mode that has been used
for that before IEEE 1284.</p>

<p>&middot; M1284_NIBBLE: Nibble mode. This
peripheral-to-host mode uses the status lines to read data
from the peripheral four bits at a time.</p>

<p>&middot; M1284_BYTE: Byte mode. This peripheral-to-host
mode uses the data lines in reverse mode to read data from
the peripheral a byte at a time.</p>

<p>Bi-directional modes &middot; M1284_ECP: ECP mode. On
entry to ECP mode it is a host-to-peripheral (i.e. forward)
mode, but it may be set to reverse mode using
ieee1284_ecp_fwd_to_rev(3). It is common for PC hardware to
provide assistance with this mode by the use of a FIFO which
the host (or, in reverse mode, the peripheral) may fill, so
that the hardware can do the handshaking itself.</p>

<p>&middot; M1284_EPP: EPP mode. In this bi-directional
mode the direction of data transfer is signalled at each
byte.</p>

<p>Mode variations &middot; M1284_FLAG_DEVICEID: Device ID
retrieval. This flag may be combined with a nibble, byte, or
ECP mode to notify the device that it should send its IEEE
1284 Device ID when asked for data.</p>

<p>&middot; M1284_BECP: Bounded ECP is a modification to
ECP that makes it more robust at the point that the
direction is changed. (Unfortunately it is not yet
implemented in the Linux kernel driver.)</p>

<p>&middot; M1284_ECPRLE: ECP with run length encoding. In
this mode, consecutive data bytes of the same value may be
transferred in only a few cycles.</p>

<p>RETURN VALUE E1284_OK The negotiation was
successful.</p>

<p>E1284_NOTAVAIL Negotiation is not available with this
port type.</p>

<p>E1284_REJECTED Negotiation was rejected by the
peripheral.</p>

<p>E1284_NEGFAILED Negotiation failed for some reason.
Perhaps the device is not IEEE 1284 compliant.</p>

<p>E1284_SYS A system error occured during negotiation.</p>

<p>E1284_INVALIDPORT The port parameter is invalid (for
instance, perhaps the port is not claimed).</p>

<p>AUTHOR Tim Waugh &lt;twaugh@redhat.com&gt; Author.</p>

<p>COPYRIGHT Copyright &copy; 2001-2003 Tim Waugh</p>

<p>[FIXME: source] 06/23/2010 IEEE1284_NEGOTIATION(3)</p>
<hr>
</body>
</html>
