<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:08:03 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>CLUSTER.CONF(5) cluster CLUSTER.CONF(5)</p>

<p>NAME cluster.conf - configuration file for cman and
related daemons</p>

<p>SYNOPSIS /etc/cluster/cluster.conf</p>

<p>DESCRIPTION When cman_tool(8) starts the corosync(8)
daemon, the cluster.conf data is read into the corosync
in-memory database (confdb). The configura- tion is used by
corosync, cman and other related cluster daemons and
programs. When cman configures corosync with cluster.conf,
the corosync.conf(5) file is not used.</p>

<p>A basic cluster configuration is described below.
Configuration options for other daemons/programs are
described in their own man pages. ccs_tool(8) can be used to
do some basic cluster.conf editing.</p>

<p>The cluster.rng schema is used to validate cluster.conf.
Unrecognized items will produce a warning during cluster
startup, and invalid xml structure will cause the cluster
startup to fail. See ccs_config_vali- date(8) and
ccs_config_dump(8).</p>

<p>A list of the valid items for your installed cluster
version is held in the file
/usr/share/doc/cman-&lt;version&gt;/cluster_conf.html .</p>

<p>Cluster The top level cluster section contains all other
sections and has two required attributes:</p>

<p>name The name of the cluster can be up to 15 characters
long (16 including terminating null). It is important that
this name be unique among clusters on the same network.</p>

<p>config_version The config_version specifies the revision
level of the file and should be increased each time the file
is updated.</p>

<p>&lt;cluster name=&quot;alpha&quot;
config_version=&quot;1&quot;&gt; &lt;/cluster&gt;</p>

<p>Cluster Nodes The set of nodes that make up the cluster
are defined in the clustern- odes section which contains
multiple clusternode sections. A clustern- ode has two
required attributes:</p>

<p>name The node name should correspond to the hostname on
the network interface to be used for cluster
communication.</p>

<p>nodeid The node id must be greater than zero and
unique.</p>

<p>&lt;cluster name=&quot;alpha&quot;
config_version=&quot;1&quot;&gt; &lt;clusternodes&gt;
&lt;clusternode name=&quot;node-01&quot;
nodeid=&quot;1&quot;&gt; &lt;/clusternode&gt;</p>

<p>&lt;clusternode name=&quot;node-02&quot;
nodeid=&quot;2&quot;&gt; &lt;/clusternode&gt;</p>

<p>&lt;clusternode name=&quot;node-03&quot;
nodeid=&quot;3&quot;&gt; &lt;/clusternode&gt;
&lt;/clusternodes&gt; &lt;/cluster&gt;</p>

<p>Logging Cluster daemons use a common logging section to
configure their loggging behavior.</p>

<p>&lt;cluster name=&quot;alpha&quot;
config_version=&quot;1&quot;&gt; &lt;logging/&gt;
&lt;/cluster&gt;</p>

<p>Global settings apply to all:</p>

<p>&lt;logging debug=&quot;on&quot;/&gt;</p>

<p>Per-daemon logging_daemon subsections override the
global settings. Daemon names that can be configured
include: corosync, qdiskd, groupd, fenced, dlm_controld,
gfs_controld, rgmanager.</p>

<p>&lt;logging&gt; &lt;logging_daemon
name=&quot;qdiskd&quot; debug=&quot;on&quot;/&gt;
&lt;logging_daemon name=&quot;fenced&quot;
debug=&quot;on&quot;/&gt; &lt;/logging&gt;</p>

<p>Corosync daemon settings apply to all corosync
subsystems by default, but subsystems can also be configured
individually. These include CLM, CPG, MAIN, SERV, CMAN,
TOTEM, QUORUM, CONFDB, CKPT, EVT.</p>

<p>&lt;logging&gt; &lt;logging_daemon
name=&quot;corosync&quot; subsys=&quot;QUORUM&quot;
debug=&quot;on&quot;/&gt; &lt;logging_daemon
name=&quot;corosync&quot; subsys=&quot;CONFDB&quot;
debug=&quot;on&quot;/&gt; &lt;/logging&gt;</p>

<p>The attributes available at global, daemon and subsystem
levels are:</p>

<p>to_syslog enable/disable messages to syslog (yes/no),
default &quot;yes&quot;</p>

<p>to_logfile enable/disable messages to log file (yes/no),
default &quot;yes&quot;</p>

<p>syslog_facility facility used for syslog messages,
default &quot;local4&quot;</p>

<p>syslog_priority messages at this level and up will be
sent to syslog, default &quot;info&quot;</p>

<p>logfile_priority messages at this level and up will be
written to log file, default &quot;info&quot;</p>

<p>logfile the log file name, default
/var/log/cluster/&lt;daemon&gt;.log</p>

<p>debug=&quot;on&quot; a shortcut for
logfile_priority=&quot;debug&quot;</p>

<p>EXAMPLE An explicit configuration for the default
settings would be:</p>

<p>&lt;logging to_syslog=&quot;yes&quot;
to_logfile=&quot;yes&quot;
syslog_facility=&quot;local4&quot;
syslog_priority=&quot;info&quot;
logfile_priority=&quot;info&quot;&gt; &lt;logging_daemon
name=&quot;qdiskd&quot;
logfile=&quot;/var/log/cluster/qdiskd.log&quot;/&gt;
&lt;logging_daemon name=&quot;fenced&quot;
logfile=&quot;/var/log/cluster/fenced.log&quot;/&gt;
&lt;logging_daemon name=&quot;dlm_controld&quot;
logfile=&quot;/var/log/cluster/dlm_controld.log&quot;/&gt;
&lt;logging_daemon name=&quot;gfs_controld&quot;
logfile=&quot;/var/log/cluster/gfs_controld.log&quot;/&gt;
&lt;logging_daemon name=&quot;rgmanager&quot;
logfile=&quot;/var/log/cluster/rgmanager.log&quot;/&gt;
&lt;logging_daemon name=&quot;corosync&quot;
logfile=&quot;/var/log/cluster/corosync.log&quot;/&gt;
&lt;/logging&gt;</p>

<p>To include debug messages (and above) from all daemons
in their default log files, either of the following which
are equivalent:</p>

<p>&lt;logging debug=&quot;on&quot;/&gt; &lt;logging
logfile_priority=&quot;debug&quot;/&gt;</p>

<p>To exclude all log messages from syslog:</p>

<p>&lt;logging to_syslog=&quot;no&quot;/&gt;</p>

<p>To disable logging to all log files:</p>

<p>&lt;logging to_file=&quot;no&quot;/&gt;</p>

<p>To include debug messages (and above) from all daemons
in syslog:</p>

<p>&lt;logging syslog_priority=&quot;debug&quot;/&gt;</p>

<p>To limit syslog messages to error (and above), keeping
info (and above) in log files (this logfile_priority setting
is the default so could be omitted):</p>

<p>&lt;logging syslog_priority=&quot;error&quot;
logfile_priority=&quot;info&quot;/&gt;</p>

<p>FILES /etc/cluster/cluster.conf standard location of
cluster configuration file</p>

<p>/usr/share/cluster/cluster.rng standard location of
cluster.conf schema</p>

<p>SEE ALSO ccs_tool(8), ccs_config_dump(8),
ccs_config_validate(8), cman_tool(8), cman(5), qdisk(5),
fenced(8), fence_node(8), dlm_controld(8), gfs_con-
trold(8), rgmanager(8)</p>

<p>cluster 2010-01-12 CLUSTER.CONF(5)</p>
<hr>
</body>
</html>
