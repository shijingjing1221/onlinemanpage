<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:12:45 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FCOEMON(8) Open-FCoE Tools FCOEMON(8)</p>

<p>NAME fcoemon - Open-FCoE service daemon</p>

<p>SYNOPSIS fcoemon [-f|--foreground] [-l|--legacy]
[-d|--debug] [-s|--syslog]</p>

<p>fcoemon -h|--help</p>

<p>fcoemon -v|--version</p>

<p>DESCRIPTION The fcoemon daemon is the core component of
the Open-FCoE management service.</p>

<p>The primary function of fcoemon is to control FCoE
instances. fcoemon will create, destroy, reset, enable and
disable FCoE instances based on system configuration,
administrative commands, and runtime events.</p>

<p>On startup, fcoemon will create FCoE instances defined
by the configuration files (see FILES section below). Since
FCoE typically relies on the Data Center Bridging (DCB)
capabilities of an Ethernet interface, fcoemon establishes a
connection with the LLDP daemon lldpad to query the status
of the DCB features on relevant Ethernet interfaces and
receive DCB configuration change events.</p>

<p>During runtime, fcoemon will monitor network and lldpad
events for the relevant Ethernet interfaces and perform
appropriate actions (create, destroy, enable, disable) on
the FCoE instances. fcoemon also provides a client interface
via which the fcoeadm utility is able to issue commands.</p>

<p>Installation of the fcoe-utils package will set up an
fcoe service which will control the execution of the fcoemon
daemon.</p>

<p>OPTIONS -f, --foreground Run fcoemon in the
foreground.</p>

<p>-d, --debug Enable debugging messages.</p>

<p>-l, --legacy Force fcoemon to use the legacy
/sys/modlue/libfcoe/parameters/ interface. The default is to
use the newer /sys/bus/fcoe/ interfaces if they are
available.</p>

<p>-s, --syslog Use syslogd for logging. The default
behavior is to log to stdout and stderr.</p>

<p>-h, --help Show help message with basic usage
instructions</p>

<p>-v, --version Show the version of the fcoemon
command.</p>

<p>TERMINOLOGY DCB Data Center Bridging A set of Ethernet
enhancement standards developed by the IEEE 802.1 Working
Group.</p>

<p>See http://www.ieee802.org/1/pages/dcbridges.html for
more information.</p>

<p>DCBX DCB Capabilities Exchange Protocol, implemented by
the DCB module of lldpad. DCBX exchanges DCB capabilities
and configuration with a link partner as a series of values
transferred using the Link Layer Discovery Protocol
(LLDP).</p>

<p>PFC Priority-based Flow Control, a DCB feature.</p>

<p>App:FCoE The FCoE instance of application specific
parameters in DCBX.</p>

<p>CRITERIA USED FOR CONTROLLING THE FCOE INSTANCE fcoemon
uses two information sources for determining when to create
an FCoE instance: the state of the network interface, which
may be a VLAN interface, and, if required for the FCoE
instance, the state of the DCB configuration on the physical
Ethernet interface.</p>

<p>First of all, the network interface must be
&quot;up&quot; for the FCoE instance to be created.
Secondly, if the FCoE configuration indicates that DCB is
required, then the following criteria must be satisfied
before the FCoE interface is created:</p>

<p>&middot; DCB is enabled on the Ethernet interface.</p>

<p>&middot; The PFC DCB feature is enabled and
operational.</p>

<p>&middot; The App:FCoE DCB feature is enabled and
operational.</p>

<p>&middot; The priority indicated by the App:FCoE feature
is also enabled for PFC.</p>

<p>Once the FCoE instance is created by fcoemon, it will
only be destroyed under the following conditions:</p>

<p>&middot; The driver for the Ethernet interface is
unloaded.</p>

<p>&middot; A user administratively destroys the FCoE
instance using fcoeadm.</p>

<p>&middot; The fcoemon daemon is terminated.</p>

<p>If DCB is required for the FCoE instance, and the DCB
settings change after the interface is created, the
following criteria are used to disable the FCoE
instance:</p>

<p>&middot; DCB is disabled on the Ethernet interface.</p>

<p>&middot; The App:FCoE DCB feature is not enabled.</p>

<p>&middot; The App:FCoE and PFC features are operational
AND the priority indicated by App:FCoE is not enabled for
PFC.</p>

<p>Otherwise, the FCoE instance will always remain
enabled.</p>

<p>CONFIGURATION Once the fcoe-utils and lldpad packages
have been installed and the corresponding services are
running, there are a few simple configuration steps required
to get an FCoE instance up and running. The following
assumes that DCB will be required for the interface.</p>

<p>&middot; Ensure that the configuration on the peer
device (e.g. FCoE capable switch) has the necessary
configurations (VLANs, DCB, DCBX).</p>

<p>&middot; Configure any needed VLAN interfaces on the
local system.</p>

<p>&middot; Create and configure
/etc/fcoe/cfg-&lt;ifname&gt; files for the network
interfaces over which FCoE instances need to be created. See
the FILES sections for details. Note that ifname may be for
a VLAN interface.</p>

<p>&middot; Restart the fcoe service (i.e. fcoemon).</p>

<p>&middot; The default DCB configuration of an Ethernet
interface managed by lldpad requires the following
configuration using dcbtool.</p>

<p>dcbtool sc ethX dcb on &lt;-- enable DCB on the
interface dcbtool sc ethX app:fcoe e:1 &lt;-- enable
App:FCoE on the interface</p>

<p>These steps only need to be done one time. Note that if
other DCB configuration changes have been made with dcbtool,
then additional changes may need to be made in order to
satisfy the DCB criteria for creating an FCoE instance.
Consult dcbtool for details.</p>

<p>Once these configuration steps have been performed, use
fcoeadm to query the status of the FCoE instances.</p>

<p>FILES /etc/fcoe/config This is the primary configuration
file for the fcoe system service. The default options in
this file are: DEBUG=&quot;no&quot; and
USE_SYSLOG=&quot;yes&quot;. The former is used to enable
debugging messages from the fcoe service script and fcoemon
(via the --debug option). The latter is to indicate if the
log messages are to be output to the system log (via the
--syslog option). SUPPORTED_DRIVERS is the list of drivers
to automatically load during fcoe service start. Any changes
to this file will require a restart of the fcoe service.</p>

<p>/etc/fcoe/cfg-&lt;ifname&gt; These files are read by
fcoemon on initialization. They are used to indicate which
Ethernet or VLAN interfaces should have FCoE instances
created. The option values in this file normally are:
FCOE_ENABLE=&quot;yes&quot;, DCB_REQUIRED=&quot;yes&quot;,
and AUTO_VLAN=&quot;yes&quot;, though if the variable values
are omitted, they default to &quot;no&quot;.</p>

<p>FCOE_ENABLE is used to enable/disable creation of the
FCoE instance. If FCoE_ENABLE is set to &quot;no&quot;, then
the other configuration values have no effect.</p>

<p>DCB_REQUIRED indicates if the DCB service is required on
the Ethernet interface.</p>

<p>AUTO_VLAN indicates if VLAN discovery should be
performed. If AUTO_VLAN is set to &quot;yes&quot;, then once
the link configuration has been validated, fcoemon will run
run the FIP VLAN discovery protocol on the Ethernet
interface. Network interfaces for any discovered FCoE VLANs
will be automatically created, if they are not already
configured, and FCoE instances will be created on the VLAN
interfaces. If the network interface specified by the
filename is already a VLAN interface, the AUTO_VLAN setting
is ignored.</p>

<p>MODE indicates whether operation will be in fabric or
vn2vn mode. The default is fabric.</p>

<p>FIP_RESP indicates whether a FIP responder should be
activated on this device to support VLAN discovery in a
vn2vn environment. The default is &quot;no&quot;. Often this
will be used on a vn2vn node also serving as a target. When
using this option, the AUTO_VLAN should not be set and the
supported VLANs should have configuration files supplied,
constituting a static VLAN configuration that provides the
information for the FIP responder to return. This should be
set on a base device, which should probably have FCOE_ENABLE
set to &quot;no&quot; since presumably FCoE operation will
be on the configured VLANs.</p>

<p>Note that the attached Ethernet peer device (e.g. FCoE
capable switch port) must have compatible settings For DCB
and FCoE to function properly.</p>

<p>/etc/init.d/fcoe This is the fcoe system service script.
This script is invoked by the init process or by the service
command to start and stop the fcoemon.</p>

<p>VLAN NAMING CONVENTIONS If a new VLAN device is created
(see the description of the AUTO_VLAN setting above), it
will have the name dev.vlan-fcoe; where dev is the name of
the Ethernet parent device and vlan is the discovered VLAN
ID number.</p>

<p>SEE ALSO fcoeadm(8) lldpad(8) lldptool(8) dcbtool(8)</p>

<p>SUPPORT fcoemon is part of the fcoe-utils package,
maintained through the Open-FCoE project. Resources for both
developers and users can be found at the Open-FCoE website
http://open-fcoe.org/</p>

<p>Open-FCoE 02/06/2013 FCOEMON(8)</p>
<hr>
</body>
</html>
