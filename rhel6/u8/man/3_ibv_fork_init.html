<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:15 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IBV_FORK_INIT(3) Libibverbs Programmer s Manual
IBV_FORK_INIT(3)</p>

<p>NAME ibv_fork_init - initialize libibverbs to support
fork()</p>

<p>SYNOPSIS #include &lt;infiniband/verbs.h&gt;</p>

<p>int ibv_fork_init(void);</p>

<p>DESCRIPTION ibv_fork_init() initializes libibverbs s
data structures to handle fork() function calls correctly
and avoid data corruption, whether fork() is called
explicitly or implicitly (such as in system()).</p>

<p>It is not necessary to use this function if all parent
process threads are always blocked until all child processes
end or change address spaces via an exec() operation.</p>

<p>RETURN VALUE ibv_fork_init() returns 0 on success, or
the value of errno on failure (which indicates the failure
reason).</p>

<p>NOTES ibv_fork_init() works on Linux kernels supporting
the MADV_DONTFORK flag for madvise() (2.6.17 and
higher).</p>

<p>Setting the environment variable RDMAV_FORK_SAFE or
IBV_FORK_SAFE has the same effect as calling
ibv_fork_init().</p>

<p>Setting the environment variable RDMAV_HUGEPAGES_SAFE
tells the library to check the underlying page size used by
the kernel for memory regions. This is required if an
application uses huge pages either directly or indirectly
via a library such as libhugetlbfs.</p>

<p>Calling ibv_fork_init() will reduce performance due to
an extra system call for every memory registration, and the
additional memory allocated to track memory regions. The
precise performance impact depends on the workload and
usually will not be significant.</p>

<p>Setting RDMAV_HUGEPAGES_SAFE adds further overhead to
all memory regis- trations.</p>

<p>SEE ALSO fork(2), wait(2), system(3), exec(3),
ibv_get_device_list(3)</p>

<p>AUTHORS Dotan Barak &lt;dotanba@gmail.com&gt;</p>

<p>libibverbs 2006-10-31 IBV_FORK_INIT(3)</p>
<hr>
</body>
</html>
