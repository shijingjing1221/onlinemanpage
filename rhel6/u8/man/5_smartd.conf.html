<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:34:57 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SMARTD.CONF(5) 2012-06-30 SMARTD.CONF(5)</p>

<p>NAME smartd.conf - SMART Disk Monitoring Daemon
Configuration File</p>

<p>FULL PATH /etc/smartd.conf</p>

<p>PACKAGE VERSION smartmontools-5.43 2012-06-30 r3573</p>

<p>DESCRIPTION [This man page is generated for the Linux
version of smartmontools. It does not contain info specific
to other platforms.]</p>

<p>/etc/smartd.conf is the configuration file for the
smartd daemon, which monitors the Self-Monitoring, Analysis
and Reporting Technology (SMART) system built into many
ATA-3 and later ATA, IDE and SCSI-3 hard drives.</p>

<p>If the configuration file /etc/smartd.conf is present,
smartd reads it at startup, before fork(2)ing into the
background. If smartd subse- quently receives a HUP signal,
it will then re-read the configuration file. If smartd is
running in debug mode, then an INT signal will also make it
re-read the configuration file. This signal can be generated
by typing &lt;CONTROL-C&gt; in the terminal window where
smartd is running.</p>

<p>CONFIGURATION FILE /etc/smartd.conf In the absence of a
configuration file smartd will try to open all available
devices. Under linux smartd will try to open the 20 ATA
devices /dev/hd[a-t] and the 26 SCSI devices
/dev/sd[a-z].</p>

<p>This can be annoying if you have an ATA or SCSI device
that hangs or misbehaves when receiving SMART commands. Even
if this causes no prob- lems, you may be annoyed by the
string of error log messages about block-major devices that
can&acute;t be found, and SCSI devices that can&acute;t be
opened.</p>

<p>One can avoid this problem, and gain more control over
the types of events monitored by smartd, by using the
configuration file /etc/smartd.conf. This file contains a
list of devices to monitor, with one device per line. An
example file is included with the smart- montools
distribution. You will find this sample configuration file
in /usr/share/doc/smartmontools/. For security, the
configuration file should not be writable by anyone but
root. The syntax of the file is as follows:</p>

<p>&middot; There should be one device listed per line,
although you may have lines that are entirely comments or
white space.</p>

<p>&middot; Any text following a hash sign &acute;#&acute;
and up to the end of the line is taken to be a comment, and
ignored.</p>

<p>&middot; Lines may be continued by using a backslash
&acute;&acute; as the last non- whitespace or non-comment
item on a line.</p>

<p>&middot; Note: a line whose first character is a hash
sign &acute;#&acute; is treated as a white-space blank line,
not as a non-existent line, and will end a continuation
line.</p>

<p>Here is an example configuration file. It&acute;s for
illustrative purposes only; please don&acute;t copy it onto
your system without reading to the end of the DIRECTIVES
Section below!</p>

<p>################################################ # This
is an example smartd startup config file # /etc/smartd.conf
for monitoring three # ATA disks, three SCSI disks, six ATA
disks # behind two 3ware controllers, three SATA disks #
directly connected to the HighPoint Rocket- # RAID
controller, two SATA disks connected to # the HighPoint
RocketRAID controller via a pmport # device, four SATA disks
connected to an Areca # RAID controller, and one SATA disk.
# # First ATA disk on two different interfaces. On # the
second disk, start a long self-test every # Sunday between 3
and 4 am. # /dev/hda -a -m admin@example.com,root@localhost
/dev/hdc -a -I 194 -I 5 -i 12 -s L/../../7/03 # # SCSI
disks. Send a TEST warning email to admin on # startup. #
/dev/sda /dev/sdb -m admin@example.com -M test # # Strange
device. It&acute;s SCSI. Start a scheduled # long self test
between 5 and 6 am Monday/Thursday /dev/weird -d scsi -s
L/../../(1|4)/05 # # An ATA disk may appear as a SCSI device
to the # OS. If a SCSI to ATA Translation (SAT) layer # is
between the OS and the device then this can be # flagged
with the-d satoption. This situation # may become common
with SATA disks in SAS and FC # environments. /dev/sda -a -d
sat # # Three disks connected to a MegaRAID controller #
Start short self-tests daily between 1-2, 2-3, and # 3-4 am.
/dev/sda -d megaraid,0 -a -s S/../.././01 /dev/sda -d
megaraid,1 -a -s S/../.././02 /dev/sda -d megaraid,2 -a -s
S/../.././03 # # Four ATA disks on a 3ware 6/7/8000
controller. # Start short self-tests daily between midnight
and 1am, # 1-2, 2-3, and 3-4 am. Starting with the Linux 2.6
# kernel series, /dev/sdX is deprecated in favor of #
/dev/tweN. For example replace /dev/sdc by /dev/twe0 # and
/dev/sdd by /dev/twe1. /dev/sdc -d 3ware,0 -a -s
S/../.././00 /dev/sdc -d 3ware,1 -a -s S/../.././01 /dev/sdd
-d 3ware,2 -a -s S/../.././02 /dev/sdd -d 3ware,3 -a -s
S/../.././03 # # Two ATA disks on a 3ware 9000 controller. #
Start long self-tests Sundays between midnight and # 1am and
2-3 am /dev/twa0 -d 3ware,0 -a -s L/../../7/00 /dev/twa0 -d
3ware,1 -a -s L/../../7/02 # # Two SATA (not SAS) disks on a
3ware 9750 controller. # Start long self-tests Sundays
between midnight and # 1am and 2-3 am /dev/twl0 -d 3ware,0
-a -s L/../../7/00 /dev/twl0 -d 3ware,1 -a -s L/../../7/02 #
# Three SATA disks on a HighPoint RocketRAID controller. #
Start short self-tests daily between 1-2, 2-3, and # 3-4 am.
# under Linux /dev/sde -d hpt,1/1 -a -s S/../.././01
/dev/sde -d hpt,1/2 -a -s S/../.././02 /dev/sde -d hpt,1/3
-a -s S/../.././03 # # Two SATA disks connected to a
HighPoint RocketRAID # via a pmport device. Start long
self-tests Sundays # between midnight and 1am and 2-3 am. #
under Linux /dev/sde -d hpt,1/4/1 -a -s L/../../7/00
/dev/sde -d hpt,1/4/2 -a -s L/../../7/02 # Three SATA disks
connected to an Areca # RAID controller. Start long
self-tests Sundays # between midnight and 3 am. /dev/sg2 -d
areca,1 -a -s L/../../7/00 /dev/sg2 -d areca,2 -a -s
L/../../7/01 /dev/sg2 -d areca,3 -a -s L/../../7/02 # # The
following line enables monitoring of the # ATA Error Log and
the Self-Test Error Log. # It also tracks changes in both
Prefailure # and Usage Attributes, apart from Attributes #
9, 194, and 231, and shows continued lines: # /dev/hdd -l
error -l selftest -t # Attributes not tracked: -I 194 #
temperature -I 231 # also temperature -I 9 # power-on hours
# ################################################</p>

<p>CONFIGURATION FILE DIRECTIVES If a non-comment entry in
the configuration file is the text string DEVICESCAN in
capital letters, then smartd will ignore any remaining lines
in the configuration file, and will scan for devices.
DEVICESCAN may optionally be followed by Directives that
will apply to all devices that are found in the scan. Please
see below for additional details.</p>

<p>[NEW EXPERIMENTAL SMARTD FEATURE] If an entry in the
configuration file starts with DEFAULT instead of a device
name, then all directives in this entry are set as defaults
for the next device entries.</p>

<p>This configuration:</p>

<p>DEFAULT -a -R5! -W 2,40,45 -I 194 -s L/../../7/00 -m
admin@example.com /dev/sda /dev/sdb /dev/sdc DEFAULT -H -m
admin@example.com /dev/sdd /dev/sde -d removable</p>

<p>has the same effect as:</p>

<p>/dev/sda -a -R5! -W 2,40,45 -I 194 -s L/../../7/00 -m
admin@example.com /dev/sdb -a -R5! -W 2,40,45 -I 194 -s
L/../../7/00 -m admin@example.com /dev/sdc -a -R5! -W
2,40,45 -I 194 -s L/../../7/00 -m admin@example.com /dev/sdd
-H -m admin@example.com /dev/sde -d removable -H -m
admin@example.com</p>

<p>The following are the Directives that may appear
following the device name or DEVICESCAN or DEFAULT on any
line of the /etc/smartd.conf con- figuration file. Note that
these are NOT command-line options for smartd. The
Directives below may appear in any order, following the
device name.</p>

<p>For an ATA device, if no Directives appear, then the
device will be monitored as if the &acute;-a&acute;
Directive (monitor all SMART properties) had been given.</p>

<p>If a SCSI disk is listed, it will be monitored at the
maximum imple- mented level: roughly equivalent to using the
&acute;-H -l selftest&acute; options for an ATA disk. So
with the exception of &acute;-d&acute;, &acute;-m&acute;,
&acute;-l selftest&acute;, &acute;-s&acute;, and
&acute;-M&acute;, the Directives below are ignored for SCSI
disks. For SCSI disks, the &acute;-m&acute; Directive sends
a warning email if the SMART sta- tus indicates a disk
failure or problem, if the SCSI inquiry about disk status
fails, or if new errors appear in the self-test log.</p>

<p>If a 3ware controller is used then the corresponding
SCSI (/dev/sd?) or character device (/dev/twe?, /dev/twa? or
/dev/twl?) must be listed, along with the &acute;-d
3ware,N&acute; Directive (see below). The individual ATA
disks hosted by the 3ware controller appear to smartd as
normal ATA devices. Hence all the ATA directives can be used
for these disks (but see note below).</p>

<p>If an Areca controller is used then the corresponding
device (SCSI /dev/sg? on Linux or /dev/arcmsr0 on FreeBSD)
must be listed, along with the &acute;-d areca,N&acute;
Directive (see below). The individual SATA disks hosted by
the Areca controller appear to smartd as normal ATA devices.
Hence all the ATA directives can be used for these disks.
Areca firmware version 1.46 or later which supports
smartmontools must be used; Please see the smartctl(8) man
page for further details.</p>

<p>-d TYPE Specifies the type of the device. The valid
arguments to this directive are:</p>

<p>auto - attempt to guess the device type from the device
name or from controller type info provided by the operating
system or from a matching USB ID entry in the drive
database. This is the default.</p>

<p>ata - the device type is ATA. This prevents smartd from
issuing SCSI commands to an ATA device.</p>

<p>scsi - the device type is SCSI. This prevents smartd
from issu- ing ATA commands to a SCSI device.</p>

<p>sat[,auto][,N] - the device type is SCSI to ATA
Translation (SAT). This is for ATA disks that have a SCSI to
ATA Transla- tion (SAT) Layer (SATL) between the disk and
the operating sys- tem. SAT defines two ATA PASS THROUGH
SCSI commands, one 12 bytes long and the other 16 bytes
long. The default is the 16 byte variant which can be
overridden with either &acute;-d sat,12&acute; or &acute;-d
sat,16&acute;.</p>

<p>[NEW EXPERIMENTAL SMARTD FEATURE] If &acute;-d
sat,auto&acute; is specified, device type SAT (for ATA/SATA
disks) is only used if the SCSI INQUIRY data reports a SATL
(VENDOR: &quot;ATA &quot;). Otherwise device type SCSI (for
SCSI/SAS disks) is used.</p>

<p>usbcypress - this device type is for ATA disks that are
behind a Cypress USB to PATA bridge. This will use the ATACB
proprietary scsi pass through command. The default SCSI
operation code is 0x24, but although it can be overridden
with &acute;-d usbcy- press,0xN&acute;, where N is the scsi
operation code, youre running the risk of damage to the
device or filesystems on it.</p>

<p>usbjmicron - this device type is for SATA disks that are
behind a JMicron USB to PATA/SATA bridge. The 48-bit ATA
commands (required e.g. for &acute;-l xerror&acute;, see
below) do not work with all of these bridges and are
therefore disabled by default. These commands can be enabled
by &acute;-d usbjmicron,x&acute;. If two disks are connected
to a bridge with two ports, an error message is printed if
no PORT is specified. The port can be specified by &acute;-d
usbjmicron[,x],PORT&acute; where PORT is 0 (master) or 1
(slave). This is not necessary if the device uses a port
multiplier to connect multiple disks to one port. The disks
appear under sep- arate /dev/ice names then. CAUTION:
Specifying &acute;,x&acute; for a device which does not
support it results in I/O errors and may disconnect the
drive. The same applies if the specified PORT does not exist
or is not connected to a disk.</p>

<p>usbsunplus - this device type is for SATA disks that are
behind a SunplusIT USB to SATA bridge.</p>

<p>marvell - [Linux only] interact with SATA disks behind
Marvell chip-set controllers (using the Marvell rather than
libata driver).</p>

<p>megaraid,N - [Linux only] the device consists of one or
more SCSI/SAS disks connected to a MegaRAID controller. The
non-neg- ative integer N (in the range of 0 to 127
inclusive) denotes which disk on the controller is
monitored. This interface will also work for Dell PERC
controllers. In log files and email messages this disk will
be identified as megaraid_disk_XXX with XXX in the range
from 000 to 127 inclusive. Please see the smartctl(8) man
page for further details.</p>

<p>3ware,N - [FreeBSD and Linux only] the device consists
of one or more ATA disks connected to a 3ware RAID
controller. The non- negative integer N (in the range from 0
to 127 inclusive) denotes which disk on the controller is
monitored. In log files and email messages this disk will be
identified as 3ware_disk_XXX with XXX in the range from 000
to 127 inclusive.</p>

<p>Note that while you may use any of the 3ware SCSI
logical devices /dev/tw* to address any of the physical
disks (3ware ports), error and log messages will make the
most sense if you always list the 3ware SCSI logical device
corresponding to the particular physical disks. Please see
the smartctl(8) man page for further details.</p>

<p>areca,N - [FreeBSD, Linux, Windows and Cygwin only] the
device consists of one or more SATA disks connected to an
Areca SATA RAID controller. The positive integer N (in the
range from 1 to 24 inclusive) denotes which disk on the
controller is monitored. In log files and email messages
this disk will be identifed as areca_disk_XX with XX in the
range from 01 to 24 inclusive. Please see the smartctl(8)
man page for further details.</p>

<p>areca,N/E - [FreeBSD, Linux, Windows and Cygwin only]
[NEW EXPERIMENTAL SMARTD FEATURE] the device consists of one
or more SATA disks connected to an Areca SAS RAID
controller. The inte- ger N (range 1 to 128) denotes the
channel (slot) and E (range 1 to 8) denotes the enclosure.
Important: This requires upcoming Areca SAS controller
firmware version 1.51 or a recent beta ver- sion.</p>

<p>cciss,N - [FreeBSD and Linux only] the device consists
of one or more SCSI/SAS or SATA disks connected to a cciss
RAID con- troller. The non-negative integer N (in the range
from 0 to 15 inclusive) denotes which disk on the controller
is monitored. In log files and email messages this disk will
be identified as cciss_disk_XX with XX in the range from 00
to 15 inclusive. Please see the smartctl(8) man page for
further details.</p>

<p>hpt,L/M/N - [FreeBSD and Linux only] the device consists
of one or more ATA disks connected to a HighPoint RocketRAID
con- troller. The integer L is the controller id, the
integer M is the channel number, and the integer N is the
PMPort number if it is available. The allowed values of L
are from 1 to 4 inclu- sive, M are from 1 to 16 inclusive
and N from 1 to 4 if PMPort available. And also these values
are limited by the model of the HighPoint RocketRAID
controller. In log files and email messages this disk will
be identified as hpt_X/X/X and X/X/X is the same as L/M/N,
note if no N indicated, N set to the default value 1. Please
see the smartctl(8) man page for further details.</p>

<p>removable - the device or its media is removable. This
indi- cates to smartd that it should continue (instead of
exiting, which is the default behavior) if the device does
not appear to be present when smartd is started. This
Directive may be used in conjunction with the other
&acute;-d&acute; Directives.</p>

<p>-n POWERMODE[,N][,q] [ATA only] This
&acute;nocheck&acute; Directive is used to prevent a disk
from being spun-up when it is periodically polled by
smartd.</p>

<p>ATA disks have five different power states. In order of
increas- ing power consumption they are: &acute;OFF&acute;,
&acute;SLEEP&acute;, &acute;STANDBY&acute;,
&acute;IDLE&acute;, and &acute;ACTIVE&acute;. Typically in
the OFF, SLEEP, and STANDBY modes the disk&acute;s platters
are not spinning. But usually, in response to SMART commands
issued by smartd, the disk platters are spun up. So if this
option is not used, then a disk which is in a low-power mode
may be spun up and put into a higher-power mode when it is
periodically polled by smartd.</p>

<p>Note that if the disk is in SLEEP mode when smartd is
started, then it won t respond to smartd commands, and so
the disk wont be registered as a device for smartd to
monitor. If a disk is in any other low-power mode, then the
commands issued by smartd to register the disk will probably
cause it to spin-up.</p>

<p>The &acute;-n&acute; (nocheck) Directive specifies if
smartd&acute;s periodic checks should still be carried out
when the device is in a low-power mode. It may be used to
prevent a disk from being spun-up by periodic smartd
polling. The allowed values of POW- ERMODE are:</p>

<p>never - smartd will poll (check) the device regardless
of its power mode. This may cause a disk which is spun-down
to be spun-up when smartd checks it. This is the default
behavior if the -n Directive is not given.</p>

<p>sleep - check the device unless it is in SLEEP mode.</p>

<p>standby - check the device unless it is in SLEEP or
STANDBY mode. In these modes most disks are not spinning, so
if you want to prevent a laptop disk from spinning up each
time that smartd polls, this is probably what you want.</p>

<p>idle - check the device unless it is in SLEEP, STANDBY
or IDLE mode. In the IDLE state, most disks are still
spinning, so this is probably not what you want.</p>

<p>Maximum number of skipped checks (in a row) can be
specified by appending positive number &acute;,N&acute; to
POWERMODE (like &acute;-n standby,15&acute;). After N checks
are skipped in a row, powermode is ignored and the check is
performed anyway.</p>

<p>When a periodic test is skipped, smartd normally writes
an informal log message. The message can be suppressed by
appending the option &acute;,q&acute; to POWERMODE (like
&acute;-n standby,q&acute;). This pre- vents a laptop disk
from spinning up due to this message.</p>

<p>Both &acute;,N&acute; and &acute;,q&acute; can be
specified together.</p>

<p>-T TYPE Specifies how tolerant smartd should be of SMART
command fail- ures. The valid arguments to this Directive
are:</p>

<p>normal - do not try to monitor the disk if a mandatory
SMART command fails, but continue if an optional SMART
command fails. This is the default.</p>

<p>permissive - try to monitor the disk even if it appears
to lack SMART capabilities. This may be required for some
old disks (prior to ATA-3 revision 4) that implemented SMART
before the SMART standards were incorporated into the
ATA/ATAPI Specifica- tions. This may also be needed for some
Maxtor disks which fail to comply with the ATA
Specifications and dont properly indi- cate support for
error- or self-test logging.</p>

<p>[Please see the smartctl -T command-line option.]</p>

<p>-o VALUE [ATA only] Enables or disables SMART Automatic
Offline Testing when smartd starts up and has no further
effect. The valid arguments to this Directive are on and
off.</p>

<p>The delay between tests is vendor-specific, but is
typically four hours.</p>

<p>Note that SMART Automatic Offline Testing is not part of
the ATA Specification. Please see the smartctl -o
command-line option documentation for further information
about this feature.</p>

<p>-S VALUE Enables or disables Attribute Autosave when
smartd starts up and has no further effect. The valid
arguments to this Directive are on and off. Also affects
SCSI devices. [Please see the smartctl -S command-line
option.]</p>

<p>-H [ATA only] Check the SMART health status of the disk.
If any Prefailure Attributes are less than or equal to their
threshold values, then disk failure is predicted in less
than 24 hours, and a message at loglevel
&acute;LOG_CRIT&acute; will be logged to syslog. [Please see
the smartctl -H command-line option.]</p>

<p>-l TYPE Reports increases in the number of errors in one
of three SMART logs. The valid arguments to this Directive
are:</p>

<p>error - [ATA only] report if the number of ATA errors
reported in the Summary SMART error log has increased since
the last check.</p>

<p>xerror - [ATA only] report if the number of ATA errors
reported in the Extended Comprehensive SMART error log has
increased since the last check.</p>

<p>If both &acute;-l error&acute; and &acute;-l
xerror&acute; are specified, smartd checks the maximum of
both values.</p>

<p>[Please see the smartctl -l xerror command-line
option.]</p>

<p>selftest - report if the number of failed tests reported
in the SMART Self-Test Log has increased since the last
check, or if the timestamp associated with the most recent
failed test has increased. Note that such errors will only
be logged if you run self-tests on the disk (and it fails a
test!). Self-Tests can be run automatically by smartd:
please see the &acute;-s&acute; Directive below. Self-Tests
can also be run manually by using the &acute;-t short&acute;
and &acute;-t long&acute; options of smartctl and the
results of the testing can be observed using the smartctl
&acute;-l selftest&acute; command-line option. [Please see
the smartctl -l and -t com- mand-line options.]</p>

<p>[ATA only] Failed self-tests outdated by a newer
successful extended self-test are ignored. The warning email
counter is reset if the number of failed self tests dropped
to 0. This typically happens when an extended self-test is
run after all bad sectors have been reallocated.</p>

<p>offlinests[,ns] - [ATA only] report if the Offline Data
Collec- tion status has changed since the last check. The
report will be logged as LOG_CRIT if the new status
indicates an error. With some drives the status often
changes, therefore &acute;-l offlinests&acute; is not
enabled by -a&acute; Directive. Appending &acute;,ns&acute;
(no standby) to this directive is not implemented on
Linux.</p>

<p>selfteststs[,ns] - [ATA only] report if the Self-Test
execution status has changed since the last check. The
report will be logged as LOG_CRIT if the new status
indicates an error. Appending &acute;,ns&acute; (no standby)
to this directive is not imple- mented on Linux.</p>

<p>scterc,READTIME,WRITETIME - [ATA only] sets the SCT
Error Recov- ery Control settings to the specified values
(deciseconds) when smartd starts up and has no further
effect. Values of 0 disable the feature, other values less
than 65 are probably not sup- ported. For RAID
configurations, this is typically set to 70,70 deciseconds.
[Please see the smartctl -l scterc command-line option.]</p>

<p>-e NAME[,VALUE] [NEW EXPERIMENTAL SMARTD FEATURE] Sets
non-SMART device settings when smartd starts up and has no
further effect. [Please see the smartctl --set command-line
option.] Valid arguments are:</p>

<p>aam,[N|off] - [ATA only] Sets the Automatic Acoustic
Management (AAM) feature.</p>

<p>apm,[N|off] - [ATA only] Sets the Advanced Power
Management (APM) feature.</p>

<p>lookahead,[on|off] - [ATA only] Sets the read look-ahead
fea- ture.</p>

<p>security-freeze - [ATA only] Sets ATA Security feature
to frozen mode.</p>

<p>standby,[N|off] - [ATA only] Sets the standby (spindown)
timer and places the drive in the IDLE mode.</p>

<p>wcache,[on|off] - [ATA only] Sets the volatile write
cache fea- ture.</p>

<p>-s REGEXP Run Self-Tests or Offline Immediate Tests, at
scheduled times. A Self- or Offline Immediate Test will be
run at the end of periodic device polling, if all 12
characters of the string T/MM/DD/d/HH match the extended
regular expression REGEXP. Here:</p>

<p>T is the type of the test. The values that smartd will
try to match (in turn) are: &acute;L&acute; for a Long
Self-Test, &acute;S&acute; for a Short Self-Test,
&acute;C&acute; for a Conveyance Self-Test (ATA only), and
&acute;O&acute; for an Offline Immediate Test (ATA only). As
soon as a match is found, the test will be started and no
addi- tional matches will be sought for that device and that
polling cycle.</p>

<p>To run scheduled Selective Self-Tests, use
&acute;n&acute; for next span, &acute;r&acute; to redo last
span, or &acute;c&acute; to continue with next span or redo
last span based on status of last test. The LBA range is
based on the first span from the last test. See the smartctl
-t select,[next|redo|cont] options for fur- ther info.</p>

<p>Some disks (e.g. WD) do not preserve the selective self
test log accross power cycles. If state persistence
(&acute;-s&acute; option) is enabled, the last test span is
preserved by smartd and used if (and only if) the selective
self test log is empty.</p>

<p>MM is the month of the year, expressed with two decimal
digits. The range is from 01 (January) to 12 (December)
inclusive. Do not use a single decimal digit or the match
will always fail!</p>

<p>DD is the day of the month, expressed with two decimal
digits. The range is from 01 to 31 inclusive. Do not use a
single decimal digit or the match will always fail!</p>

<p>d is the day of the week, expressed with one decimal
digit. The range is from 1 (Monday) to 7 (Sunday)
inclusive.</p>

<p>HH is the hour of the day, written with two decimal
digits, and given in hours after midnight. The range is 00
(midnight to just before 1am) to 23 (11pm to just before
midnight) inclu- sive. Do not use a single decimal digit or
the match will always fail!</p>

<p>Some examples follow. In reading these, keep in mind
that in extended regular expressions a dot &acute;.&acute;
matches any single char- acter, and a parenthetical
expression such as &acute;(A|B|C)&acute; denotes any one of
the three possibilities A, B, or C.</p>

<p>To schedule a short Self-Test between 2-3am every
morning, use: -s S/../.././02 To schedule a long Self-Test
between 4-5am every Sunday morning, use: -s L/../../7/04 To
schedule a long Self-Test between 10-11pm on the first and
fifteenth day of each month, use: -s L/../(01|15)/./22 To
schedule an Offline Immediate test after every midnight,
6am, noon,and 6pm, plus a Short Self-Test daily at 1-2am and
a Long Self-Test every Saturday at 3-4am, use: -s
(O/../.././(00|06|12|18)|S/../.././01|L/../../6/03) If Long
Self-Tests of a large disks take longer than the system
uptime, a full disk test can be performed by several
Selective Self-Tests. To setup a full test of a 1TB disk
within 20 days (one 50GB span each day), run this command
once: smartctl -t select,0-99999999 /dev/sda To run the next
test spans on Monday-Friday between 12-13am, run smartd with
this directive: -s n/../../[1-5]/12</p>

<p>Scheduled tests are run immediately following the
regularly- scheduled device polling, if the current local
date, time, and test type, match REGEXP. By default the
regularly-scheduled device polling occurs every thirty
minutes after starting smartd. Take caution if you use the
&acute;-i&acute; option to make this polling interval more
than sixty minutes: the poll times may fail to coincide with
any of the testing times that you have specified with
REGEXP. In this case the test will be run fol- lowing the
next device polling.</p>

<p>Before running an offline or self-test, smartd checks to
be sure that a self-test is not already running. If a
self-test is already running, then this running self test
will not be inter- rupted to begin another test.</p>

<p>smartd will not attempt to run any type of test if
another test was already started or run in the same
hour.</p>

<p>To avoid performance problems during system boot, smartd
will not attempt to run any scheduled tests following the
very first device polling (unless &acute;-q onecheck&acute;
is specified).</p>

<p>Each time a test is run, smartd will log an entry to
SYSLOG. You can use these or the -q showtests command-line
option to verify that you constructed REGEXP correctly. The
matching order (L before S before C before O) ensures that
if multiple test types are all scheduled for the same hour,
the longer test type has precedence. This is usually the
desired behavior.</p>

<p>If the scheduled tests are used in conjunction with
state per- sistence (&acute;-s&acute; option), smartd will
also try to match the hours since last shutdown (or 90 days
at most). If any test would have been started during
downtime, the longest (see above) of these tests is run
after second device polling.</p>

<p>If the &acute;-n&acute; directive is used and any test
would have been started during disk standby time, the
longest of these tests is run when the disk is active
again.</p>

<p>Unix users: please beware that the rules for extended
regular expressions [regex(7)] are not the same as the rules
for file-name pattern matching by the shell [glob(7)].
smartd will issue harmless informational warning messages if
it detects characters in REGEXP that appear to indicate that
you have made this mistake.</p>

<p>-m ADD Send a warning email to the email address ADD if
the &acute;-H&acute;, &acute;-l&acute;, &acute;-f&acute;,
&acute;-C&acute;, or &acute;-O&acute; Directives detect a
failure or a new error, or if a SMART command to the disk
fails. This Directive only works in conjunction with these
other Directives (or with the equivalent default
&acute;-a&acute; Directive).</p>

<p>To prevent your email in-box from getting filled up with
warning messages, by default only a single warning will be
sent for each of the enabled alert types, &acute;-H&acute;,
&acute;-l&acute;, &acute;-f&acute;, &acute;-C&acute;, or
&acute;-O&acute; even if more than one failure or error is
detected or if the failure or error persists. [This behavior
can be modified; see the &acute;-M&acute; Directive
below.]</p>

<p>To send email to more than one user, please use the
following &quot;comma separated&quot; form for the address:
user1@add1,user2@add2,...,userN@addN (with no spaces).</p>

<p>To test that email is being sent correctly, use the
&acute;-M test&acute; Directive described below to send one
test email message on smartd startup.</p>

<p>By default, email is sent using the system mail command.
In order that smartd find the mail command (normally
/bin/mail) an executable named &acute;mail&acute; must be in
the path of the shell or environment from which smartd was
started. If you wish to spec- ify an explicit path to the
mail executable (for example /usr/local/bin/mail) or a
custom script to run, please use the &acute;-M exec&acute;
Directive below.</p>

<p>Note also that there is a special argument
&lt;nomailer&gt; which can be given to the &acute;-m&acute;
Directive in conjunction with the &acute;-M exec&acute;
Directive. Please see below for an explanation of its
effect.</p>

<p>If the mailer or the shell running it produces any
STDERR/STDOUT output, then a snippet of that output will be
copied to SYSLOG. The remainder of the output is discarded.
If problems are encountered in sending mail, this should
help you to understand and fix them. If you have mail
problems, we recommend running smartd in debug mode with the
&acute;-d&acute; flag, using the &acute;-M test&acute;
Directive described below.</p>

<p>-M TYPE These Directives modify the behavior of the
smartd email warn- ings enabled with the &acute;-m&acute;
email Directive described above. These &acute;-M&acute;
Directives only work in conjunction with the
&acute;-m&acute; Directive and can not be used without
it.</p>

<p>Multiple -M Directives may be given. If more than one of
the following three -M Directives are given (example: -M
once -M daily) then the final one (in the example, -M daily)
is used.</p>

<p>The valid arguments to the -M Directive are (one of the
follow- ing three):</p>

<p>once - send only one warning email for each type of disk
problem detected. This is the default unless state
persistence (&acute;-s&acute; option) is enabled.</p>

<p>daily - send additional warning reminder emails, once
per day, for each type of disk problem detected. This is the
default if state persistence (&acute;-s&acute; option) is
enabled.</p>

<p>diminishing - send additional warning reminder emails,
after a one-day interval, then a two-day interval, then a
four-day interval, and so on for each type of disk problem
detected. Each interval is twice as long as the previous
interval.</p>

<p>If a disk problem is no longer detected, the internal
email counter is reset. If the problem reappears a new
warning email is sent immediately.</p>

<p>In addition, one may add zero or more of the following
Direc- tives:</p>

<p>test - send a single test email immediately upon smartd
startup. This allows one to verify that email is delivered
correctly. Note that if this Directive is used, smartd will
also send the normal email warnings that were enabled with
the &acute;-m&acute; Directive, in addition to the single
test email!</p>

<p>exec PATH - run the executable PATH instead of the
default mail command, when smartd needs to send email. PATH
must point to an executable binary file or script.</p>

<p>By setting PATH to point to a customized script, you can
make smartd perform useful tricks when a disk problem is
detected (beeping the console, shutting down the machine,
broadcasting warnings to all logged-in users, etc.) But
please be careful. smartd will block until the executable
PATH returns, so if your executable hangs, then smartd will
also hang. Some sample scripts are included in
/usr/share/doc/smartmontools/example- scripts/.</p>

<p>The return status of the executable is recorded by
smartd in SYSLOG. The executable is not expected to write to
STDOUT or STDERR. If it does, then this is interpreted as
indicating that something is going wrong with your
executable, and a fragment of this output is logged to
SYSLOG to help you to understand the problem. Normally, if
you wish to leave some record behind, the executable should
send mail or write to a file or device.</p>

<p>Before running the executable, smartd sets a number of
environ- ment variables. These environment variables may be
used to con- trol the executable&acute;s behavior. The
environment variables exported by smartd are:</p>

<p>SMARTD_MAILER is set to the argument of -M exec, if
present or else to &acute;mail&acute; (examples: /bin/mail,
mail).</p>

<p>SMARTD_DEVICE is set to the device path (examples:
/dev/hda, /dev/sdb).</p>

<p>SMARTD_DEVICETYPE is set to the device type specified by
&acute;-d&acute; directive or &acute;auto&acute; if
none.</p>

<p>SMARTD_DEVICESTRING is set to the device description.
For SMARTD_DEVICETYPE of ata or scsi, this is the same as
SMARTD_DEVICE. For 3ware RAID controllers, the form used is
&acute;/dev/sdc [3ware_disk_01]&acute;. For HighPoint
RocketRAID controller, the form is &acute;/dev/sdd
[hpt_1/1/1]&acute; under Linux or &acute;/dev/hptrr
[hpt_1/1/1]&acute; under FreeBSD. For Areca controllers, the
form is &acute;/dev/sg2 [areca_disk_09]&acute; on Linux or
&acute;/dev/arcmsr0 [areca_disk_09]&acute; on FreeBSD. In
these cases the device string contains a space and is NOT
quoted. So to use $SMARTD_DEVICESTRING in a bash script you
should probably enclose it in double quotes.</p>

<p>SMARTD_FAILTYPE gives the reason for the warning or
message email. The pos- sible values that it takes and their
meanings are: EmailTest: this is an email test message.
Health: the SMART health status indicates imminent failure.
Usage: a usage Attribute has failed. SelfTest: the number of
self-test failures has increased. ErrorCount: the number of
errors in the ATA error log has increased.
CurrentPendingSector: one of more disk sectors could not be
read and are marked to be reallocated (replaced with spare
sectors). OfflineUncorrectableSector: during off-line
testing, or self-testing, one or more disk sectors could not
be read. Temperature: Temperature reached critical limit
(see -W directive). FailedHealthCheck: the SMART health
status command failed. FailedReadSmartData: the command to
read SMART Attribute data failed. FailedReadSmartErrorLog:
the command to read the SMART error log failed.
FailedReadSmartSelfTestLog: the command to read the SMART
self-test log failed. FailedOpenDevice: the open() command
to the device failed.</p>

<p>SMARTD_ADDRESS is determined by the address argument ADD
of the &acute;-m&acute; Direc- tive. If ADD is
&lt;nomailer&gt;, then SMARTD_ADDRESS is not set. Otherwise,
it is set to the comma-separated-list of email addresses
given by the argument ADD, with the commas replaced by
spaces (example:admin@example.com root). If more than one
email address is given, then this string will contain space
characters and is NOT quoted, so to use it in a bash script
you may want to enclose it in double quotes.</p>

<p>SMARTD_MESSAGE is set to the one sentence summary
warning email message string from smartd. This message
string contains space characters and is NOT quoted. So to
use $SMARTD_MESSAGE in a bash script you should probably
enclose it in double quotes.</p>

<p>SMARTD_FULLMESSAGE is set to the contents of the entire
email warning message string from smartd. This message
string contains space and return characters and is NOT
quoted. So to use $SMARTD_FULLMESSAGE in a bash script you
should probably enclose it in double quotes.</p>

<p>SMARTD_TFIRST is a text string giving the time and date
at which the first problem of this type was reported. This
text string contains space characters and no newlines, and
is NOT quoted. For example: Sun Feb 9 14:58:19 2003 CST</p>

<p>SMARTD_TFIRSTEPOCH is an integer, which is the unix
epoch (number of seconds since Jan 1, 1970) for
SMARTD_TFIRST.</p>

<p>The shell which is used to run PATH is system-dependent.
For vanilla Linux/glibc it&acute;s bash. For other systems,
the man page for popen(3) should say what shell is used.</p>

<p>If the &acute;-m ADD&acute; Directive is given with a
normal address argu- ment, then the executable pointed to by
PATH will be run in a shell with STDIN receiving the body of
the email message, and with the same command-line arguments:
-s &quot;$SMARTD_SUBJECT&quot; $SMARTD_ADDRESS that would
normally be provided to &acute;mail&acute;. Examples
include: -m user@home -M exec /bin/mail -m admin@work -M
exec /usr/local/bin/mailto -m root -M exec
/Example_1/bash/script/below</p>

<p>If the &acute;-m ADD&acute; Directive is given with the
special address argument &lt;nomailer&gt; then the
executable pointed to by PATH is run in a shell with no
STDIN and no command-line arguments, for example: -m
&lt;nomailer&gt; -M exec /Example_2/bash/script/below If the
executable produces any STDERR/STDOUT output, then smartd
assumes that something is going wrong, and a snippet of that
output will be copied to SYSLOG. The remainder of the output
is then discarded.</p>

<p>Some EXAMPLES of scripts that can be used with the
&acute;-M exec&acute; Directive are given below. Some sample
scripts are also included in
/usr/share/doc/smartmontools/examplescripts/.</p>

<p>-f [ATA only] Check for &acute;failure&acute; of any
Usage Attributes. If these Attributes are less than or equal
to the threshold, it does NOT indicate imminent disk
failure. It &quot;indicates an advi- sory condition where
the usage or age of the device has exceeded its intended
design life period.&quot; [Please see the smartctl -A
command-line option.]</p>

<p>-p [ATA only] Report anytime that a Prefail Attribute
has changed its value since the last check. [Please see the
smartctl -A com- mand-line option.]</p>

<p>-u [ATA only] Report anytime that a Usage Attribute has
changed its value since the last check. [Please see the
smartctl -A command- line option.]</p>

<p>-t [ATA only] Equivalent to turning on the two previous
flags &acute;-p&acute; and &acute;-u&acute;. Tracks changes
in all device Attributes (both Pre- failure and Usage).
[Please see the smartctl -A command-line option.]</p>

<p>-i ID [ATA only] Ignore device Attribute number ID when
checking for failure of Usage Attributes. ID must be a
decimal integer in the range from 1 to 255. This Directive
modifies the behavior of the &acute;-f&acute; Directive and
has no effect without it.</p>

<p>This is useful, for example, if you have a very old disk
and don&acute;t want to keep getting messages about the
hours-on-lifetime Attribute (usually Attribute 9) failing.
This Directive may appear multiple times for a single
device, if you want to ignore multiple Attributes.</p>

<p>-I ID [ATA only] Ignore device Attribute ID when
tracking changes in the Attribute values. ID must be a
decimal integer in the range from 1 to 255. This Directive
modifies the behavior of the &acute;-p&acute;,
&acute;-u&acute;, and &acute;-t&acute; tracking Directives
and has no effect with- out one of them.</p>

<p>This is useful, for example, if one of the device
Attributes is the disk temperature (usually Attribute 194 or
231). It&acute;s annoy- ing to get reports each time the
temperature changes. This Directive may appear multiple
times for a single device, if you want to ignore multiple
Attributes.</p>

<p>-r ID[!] [ATA only] When tracking, report the Raw value
of Attribute ID along with its (normally reported)
Normalized value. ID must be a decimal integer in the range
from 1 to 255. This Directive modifies the behavior of the
&acute;-p&acute;, &acute;-u&acute;, and &acute;-t&acute;
tracking Directives and has no effect without one of them.
This Direc- tive may be given multiple times.</p>

<p>A common use of this Directive is to track the device
Temperature (often ID=194 or 231).</p>

<p>If the optional flag &acute;!&acute; is appended, a
change of the Normalized value is considered critical. The
report will be logged as LOG_CRIT and a warning email will
be sent if &acute;-m&acute; is specified.</p>

<p>-R ID[!] [ATA only] When tracking, report whenever the
Raw value of Attribute ID changes. (Normally smartd only
tracks/reports changes of the Normalized Attribute values.)
ID must be a deci- mal integer in the range from 1 to 255.
This Directive modifies the behavior of the
&acute;-p&acute;, &acute;-u&acute;, and &acute;-t&acute;
tracking Directives and has no effect without one of them.
This Directive may be given multiple times.</p>

<p>If this Directive is given, it automatically implies the
&acute;-r&acute; Directive for the same Attribute, so that
the Raw value of the Attribute is reported.</p>

<p>A common use of this Directive is to track the device
Tempera- ture (often ID=194 or 231). It is also useful for
understanding how different types of system behavior affects
the values of certain Attributes.</p>

<p>If the optional flag &acute;!&acute; is appended, a
change of the Raw value is considered critical. The report
will be logged as LOG_CRIT and a warning email will be sent
if &acute;-m&acute; is specified. An exam- ple is &acute;-R
5!&acute; to warn when new sectors are reallocated.</p>

<p>-C ID[+] [ATA only] Report if the current number of
pending sectors is non-zero. Here ID is the id number of the
Attribute whose raw value is the Current Pending Sector
count. The allowed range of ID is 0 to 255 inclusive. To
turn off this reporting, use ID = 0. If the -C ID option is
not given, then it defaults to -C 197 (since Attribute 197
is generally used to monitor pending sectors). If the name
of this Attribute is changed by a &acute;-v
197,FORMAT,NAME&acute; directive, the default is changed to
-C 0.</p>

<p>If &acute;+&acute; is specified, a report is only
printed if the number of sectors has increased between two
check cycles. Some disks do not reset this attribute when a
bad sector is reallocated. See also &acute;-v
197,increasing&acute; below.</p>

<p>The warning email counter is reset if the number of
pending sec- tors dropped to 0. This typically happens when
all pending sec- tors have been reallocated or could be read
again.</p>

<p>A pending sector is a disk sector (containing 512 bytes
of your data) which the device would like to mark as
bad&quot; and reallo- cate. Typically this is because your
computer tried to read that sector, and the read failed
because the data on it has been corrupted and has
inconsistent Error Checking and Correction (ECC) codes. This
is important to know, because it means that there is some
unreadable data on the disk. The problem of fig- uring out
what file this data belongs to is operating system and file
system specific. You can typically force the sector to
reallocate by writing to it (translation: make the device
sub- stitute a spare good sector for the bad one) but at the
price of losing the 512 bytes of data stored there.</p>

<p>-U ID[+] [ATA only] Report if the number of offline
uncorrectable sectors is non-zero. Here ID is the id number
of the Attribute whose raw value is the Offline
Uncorrectable Sector count. The allowed range of ID is 0 to
255 inclusive. To turn off this reporting, use ID = 0. If
the -U ID option is not given, then it defaults to -U 198
(since Attribute 198 is generally used to monitor offline
uncorrectable sectors). If the name of this Attribute is
changed by a &acute;-v 198,FORMAT,NAME&acute; (except
&acute;-v 198,FORMAT,Offline_Scan_UNC_SectCt&acute;),
directive, the default is changed to -U 0.</p>

<p>If &acute;+&acute; is specified, a report is only
printed if the number of sectors has increased since the
last check cycle. Some disks do not reset this attribute
when a bad sector is reallocated. See also &acute;-v
198,increasing&acute; below.</p>

<p>The warning email counter is reset if the number of
offline uncorrectable sectors dropped to 0. This typically
happens when all offline uncorrectable sectors have been
reallocated or could be read again.</p>

<p>An offline uncorrectable sector is a disk sector which
was not readable during an off-line scan or a self-test.
This is impor- tant to know, because if you have data stored
in this disk sec- tor, and you need to read it, the read
will fail. Please see the previous &acute;-C&acute; option
for more details.</p>

<p>-W DIFF[,INFO[,CRIT]] Report if the current temperature
had changed by at least DIFF degrees since last report, or
if new min or max temperature is detected. Report or Warn if
the temperature is greater or equal than one of INFO or CRIT
degrees Celsius. If the limit CRIT is reached, a message
with loglevel &acute;LOG_CRIT&acute; will be logged to
syslog and a warning email will be send if -m is specified.
If only the limit INFO is reached, a message with loglevel
&acute;LOG_INFO&acute; will be logged.</p>

<p>The warning email counter is reset if the temperature
dropped below INFO or CRIT-5 if INFO is not specified.</p>

<p>If this directive is used in conjunction with state
persistence (&acute;-s&acute; option), the min and max
temperature values are preserved across boot cycles. The
minimum temperature value is not updated during the first 30
minutes after startup.</p>

<p>To disable any of the 3 reports, set the corresponding
limit to 0. Trailing zero arguments may be omitted. By
default, all tem- perature reports are disabled (&acute;-W
0&acute;).</p>

<p>To track temperature changes of at least 2 degrees, use:
-W 2 To log informal messages on temperatures of at least 40
degrees, use: -W 0,40 For warning messages/mails on
temperatures of at least 45 degrees, use: -W 0,0,45 To
combine all of the above reports, use: -W 2,40,45</p>

<p>For ATA devices, smartd interprets Attribute 194 as
Temperature Celsius by default. This can be changed to
Attribute 9 or 220 by the drive database or by the
&acute;-v&acute; directive, see below.</p>

<p>-F TYPE [ATA only] Modifies the behavior of smartd to
compensate for some known and understood device firmware
bug. The arguments to this Directive are exclusive, so that
only the final Directive given is used. The valid values
are:</p>

<p>none - Assume that the device firmware obeys the ATA
specifica- tions. This is the default, unless the device has
presets for &acute;-F&acute; in the device database.</p>

<p>samsung - In some Samsung disks (example: model SV4012H
Firmware Version: RM100-08) some of the two- and four-byte
quantities in the SMART data structures are byte-swapped
(relative to the ATA specification). Enabling this option
tells smartd to evaluate these quantities in byte-reversed
order. Some signs that your disk needs this option are (1)
no self-test log printed, even though you have run
self-tests; (2) very large numbers of ATA errors reported in
the ATA error log; (3) strange and impossible values for the
ATA error log timestamps.</p>

<p>samsung2 - In some Samsung disks the number of ATA
errors reported is byte swapped. Enabling this option tells
smartd to evaluate this quantity in byte-reversed order.</p>

<p>samsung3 - Some Samsung disks (at least SP2514N with
Firmware VF100-37) report a self-test still in progress with
0% remaining when the test was already completed. If this
directive is speci- fied, smartd will not skip the next
scheduled self-test (see Directive &acute;-s&acute; above)
in this case.</p>

<p>Note that an explicit &acute;-F&acute; Directive will
over-ride any preset values for &acute;-F&acute; (see the
&acute;-P&acute; option below).</p>

<p>[Please see the smartctl -F command-line option.]</p>

<p>-v ID,FORMAT[:BYTEORDER][,NAME] [ATA only] Sets a
vendor-specific raw value print FORMAT, an optional
BYTEORDER and an optional NAME for Attribute ID. This
directive may be used multiple times. Please see smartctl -v
command-line option for further details.</p>

<p>The following arguments affect smartd warning
output:</p>

<p>197,increasing - Raw Attribute number 197 (Current
Pending Sec- tor Count) is not reset if uncorrectable
sectors are reallo- cated. This sets &acute;-C 197+&acute;
if no other &acute;-C&acute; directive is speci- fied.</p>

<p>198,increasing - Raw Attribute number 198 (Offline
Uncorrectable Sector Count) is not reset if uncorrectable
sector are reallo- cated. This sets &acute;-U 198+&acute; if
no other &acute;-U&acute; directive is speci- fied.</p>

<p>-P TYPE [ATA only] Specifies whether smartd should use
any preset options that are available for this drive. The
valid arguments to this Directive are:</p>

<p>use - use any presets that are available for this drive.
This is the default.</p>

<p>ignore - do not use any presets for this drive.</p>

<p>show - show the presets listed for this drive in the
database.</p>

<p>showall - show the presets that are available for all
drives and then exit.</p>

<p>[Please see the smartctl -P command-line option.]</p>

<p>-a Equivalent to turning on all of the following
Directives: &acute;-H&acute; to check the SMART health
status, &acute;-f&acute; to report failures of Usage (rather
than Prefail) Attributes, &acute;-t&acute; to track changes
in both Prefailure and Usage Attributes, &acute;-l
error&acute; to report increases in the number of ATA
errors, &acute;-l selftest&acute; to report increases in the
number of Self-Test Log errors, &acute;-l selftest-
sts&acute; to report changes of Self-Test execution status,
&acute;-C 197&acute; to report nonzero values of the current
pending sector count, and &acute;-U 198&acute; to report
nonzero values of the offline pending sector count.</p>

<p>Note that -a is the default for ATA devices. If none of
these other Directives is given, then -a is assumed.</p>

<p># Comment: ignore the remainder of the line.</p>

<p>Continuation character: if this is the last non-white or
non- comment character on a line, then the following line is
a con- tinuation of the current one.</p>

<p>If you are not sure which Directives to use, I suggest
experimenting for a few minutes with smartctl to see what
SMART functionality your disk(s) support(s). If you do not
like voluminous syslog messages, a good choice of smartd
configuration file Directives might be: -H -l selftest -l
error -f. If you want more frequent information, use:
-a.</p>

<p>ADDITIONAL DETAILS ABOUT DEVICESCAN If a non-comment
entry in the configuration file is the text string
DEVICESCAN in capital letters, then smartd will ignore any
remaining lines in the configuration file, and will scan for
devices.</p>

<p>Configuration entries for devices not found by the
platform-spe- cific device scanning may precede the
DEVICESCAN entry.</p>

<p>If DEVICESCAN is not followed by any Directives, then
smartd will scan for both ATA and SCSI devices, and will
monitor all possible SMART properties of any devices that
are found.</p>

<p>DEVICESCAN may optionally be followed by any valid
Directives, which will be applied to all devices that are
found in the scan. For example DEVICESCAN -m
root@example.com will scan for all devices, and then monitor
them. It will send one email warning per device for any
problems that are found. DEVICESCAN -d ata -m
root@example.com will do the same, but restricts the scan to
ATA devices only. DEVICESCAN -H -d ata -m root@example.com
will do the same, but only monitors the SMART health status
of the devices, (rather than the default -a, which monitors
all SMART properties).</p>

<p>EXAMPLES OF SHELL SCRIPTS FOR &acute;-M exec&acute;
These are two examples of shell scripts that can be used
with the &acute;-M exec PATH&acute; Directive described
previously. The paths to these scripts and similar
executables is the PATH argument to the &acute;-M exec
PATH&acute; Directive.</p>

<p>Example 1: This script is for use with &acute;-m ADDRESS
-M exec PATH&acute;. It appends the output of smartctl -a to
the output of the smartd email warning message and sends it
to ADDRESS.</p>

<p>#! /bin/bash</p>

<p># Save the email message (STDIN) to a file: cat &gt;
/root/msg</p>

<p># Append the output of smartctl -a to the message:
/usr/sbin/smartctl -a -d $SMART_DEVICETYPE $SMARTD_DEVICE
&gt;&gt; /root/msg</p>

<p># Now email the message to the user at address ADD:
/bin/mail -s &quot;$SMARTD_SUBJECT&quot; $SMARTD_ADDRESS
&lt; /root/msg</p>

<p>Example 2: This script is for use with &acute;-m
&lt;nomailer&gt; -M exec PATH&acute;. It warns all users
about a disk problem, waits 30 sec- onds, and then powers
down the machine.</p>

<p>#! /bin/bash</p>

<p># Warn all users of a problem wall &acute;Problem
detected with disk: &acute; &quot;$SMARTD_DEVICESTRING&quot;
wall &acute;Warning message from smartd is: &acute;
&quot;$SMARTD_MESSAGE&quot; wall &acute;Shutting down
machine in 30 seconds... &acute;</p>

<p># Wait half a minute sleep 30</p>

<p># Power down the machine /sbin/shutdown -hf now</p>

<p>Some example scripts are distributed with the
smartmontools package, in
/usr/share/doc/smartmontools/examplescripts/.</p>

<p>Please note that these scripts typically run as root, so
any files that they read/write should not be writable by
ordinary users or reside in directories like /tmp that are
writable by ordinary users and may expose your system to
symlink attacks.</p>

<p>As previously described, if the scripts write to STDOUT
or STDERR, this is interpreted as indicating that there was
an internal error within the script, and a snippet of
STDOUT/STDERR is logged to SYSLOG. The remainder is
flushed.</p>

<p>AUTHOR Bruce Allen
smartmontools-support@lists.sourceforge.net University of
Wisconsin - Milwaukee Physics Department</p>

<p>CONTRIBUTORS The following have made large contributions
to smartmontools: Casper Dik (Solaris SCSI interface)
Christian Franke (Windows interface, C++ redesign, USB
support, ...) Douglas Gilbert (SCSI subsystem) Guido
Guenther (Autoconf/Automake packaging) Geoffrey Keating
(Darwin ATA interface) Eduard Martinescu (FreeBSD interface)
Fr&eacute;d&eacute;ric L. W. Meunier (Web site and Mailing
list) Gabriele Pohl (Web site and Wiki, conversion from CVS
to SVN) Keiji Sawada (Solaris ATA interface) Manfred Schwarb
(Drive database) Sergey Svishchev (NetBSD interface) David
Snyder and Sergey Svishchev (OpenBSD interface) Phil
Williams (User interface and drive database) Shengfeng Zhou
(Linux/FreeBSD HighPoint RocketRAID interface) Many other
individuals have made smaller contributions and
corrections.</p>

<p>CREDITS This code was derived from the smartsuite
package, written by Michael Cornwell, and from the previous
UCSC smartsuite package. It extends these to cover ATA-5
disks. This code was originally developed as a Senior Thesis
by Michael Cornwell at the Concurrent Systems Laboratory
(now part of the Storage Systems Research Center), Jack
Baskin School of Engineering, University of California,
Santa Cruz. http://ssrc.soe.ucsc.edu/ .</p>

<p>HOME PAGE FOR SMARTMONTOOLS: Please see the following
web site for updates, further documentation, bug reports and
patches: http://smartmontools.sourceforge.net/</p>

<p>SEE ALSO: smartd(8), smartctl(8), syslogd(8),
syslog.conf(5), badblocks(8), ide-smart(8), regex(7).</p>

<p>SVN ID OF THIS PAGE: $Id: smartd.conf.5.in 3566
2012-06-19 21:26:28Z chrfranke $</p>

<p>smartmontools-5.43 2012-06-30 SMARTD.CONF(5)</p>
<hr>
</body>
</html>
