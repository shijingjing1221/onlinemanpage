<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:06 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_ORACLE(7) OCF resource agents
OCF_HEARTBEAT_ORACLE(7)</p>

<p>NAME ocf_heartbeat_oracle - Manages an Oracle Database
instance</p>

<p>SYNOPSIS oracle [start | stop | status | monitor |
meta-data | validate-all]</p>

<p>DESCRIPTION Resource script for oracle. Manages an
Oracle Database instance as an HA resource.</p>

<p>SUPPORTED PARAMETERS sid The Oracle SID (aka
ORACLE_SID).</p>

<p>(unique, required, string, no default)</p>

<p>home The Oracle home directory (aka ORACLE_HOME). If not
specified, then the SID along with its home should be listed
in /etc/oratab.</p>

<p>(optional, string, no default)</p>

<p>user The Oracle owner (aka ORACLE_OWNER). If not
specified, then it is set to the owner of file
$ORACLE_HOME/dbs/*${ORACLE_SID}.ora. If this does not work
for you, just set it explicitely.</p>

<p>(optional, string, no default)</p>

<p>monuser Monitoring user name. Every connection as sysdba
is logged in an audit log. This can result in a large number
of new files created. A new user is created (if it
doesn&acute;t exist) in the start action and subsequently
used in monitor. It should have very limited rights. Make
sure that the password for this user does not expire.</p>

<p>(optional, string, default &quot;OCFMON&quot;)</p>

<p>monpassword Password for the monitoring user. Make sure
that the password for this user does not expire.</p>

<p>(optional, string, default &quot;OCFMON&quot;)</p>

<p>monprofile Profile used by the monitoring user. If the
profile does not exist, it will be created with a
non-expiring password.</p>

<p>(optional, string, default
&quot;OCFMONPROFILE&quot;)</p>

<p>ipcrm Sometimes IPC objects (shared memory segments and
semaphores) belonging to an Oracle instance might be left
behind which prevents the instance from starting. It is not
easy to figure out which shared segments belong to which
instance, in particular when more instances are running as
same user.</p>

<p>What we use here is the &quot;oradebug&quot; feature and
its &quot;ipc&quot; trace utility. It is not optimal to
parse the debugging information, but I am not aware of any
other way to find out about the IPC information. In case the
format or wording of the trace report changes, parsing might
fail. There are some precautions, however, to prevent
stepping on other peoples toes. There is also a dumpinstipc
option which will make us print the IPC objects which belong
to the instance. Use it to see if we parse the trace file
correctly.</p>

<p>Three settings are possible:</p>

<p>- none: don&acute;t mess with IPC and hope for the best
(beware: you&acute;ll probably be out of luck, sooner or
later)</p>

<p>- instance: try to figure out the IPC stuff which
belongs to the instance and remove only those (default;
should be safe)</p>

<p>- orauser: remove all IPC belonging to the user which
runs the instance (don&acute;t use this if you run more than
one instance as same user or if other apps running as this
user use IPC)</p>

<p>The default setting &quot;instance&quot; should be safe
to use, but in that case we cannot guarantee that the
instance will start. In case IPC objects were already left
around, because, for instance, someone mercilessly killing
Oracle processes, there is no way any more to find out which
IPC objects should be removed. In that case, human
intervention is necessary, and probably _all_ instances
running as same user will have to be stopped. The third
setting, &quot;orauser&quot;, guarantees IPC objects
removal, but it does that based only on IPC objects
ownership, so you should use that only if every instance
runs as separate user.</p>

<p>Please report any problems. Suggestions/fixes
welcome.</p>

<p>(optional, string, default &quot;instance&quot;)</p>

<p>clear_backupmode The clear of the backup mode of
ORACLE.</p>

<p>(optional, boolean, default false)</p>

<p>shutdown_method How to stop Oracle is a matter of taste
it seems. The default method (&quot;checkpoint/abort&quot;)
is:</p>

<p>alter system checkpoint; shutdown abort;</p>

<p>This should be the fastest safe way bring the instance
down. If you find &quot;shutdown abort&quot; distasteful,
set this attribute to &quot;immediate&quot; in which case we
will</p>

<p>shutdown immediate;</p>

<p>If you still think that there&acute;s even better way to
shutdown an Oracle instance we are willing to listen.</p>

<p>(optional, string, default
&quot;checkpoint/abort&quot;)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
120.</p>

<p>stop Stops the resource. Suggested minimum timeout:
120.</p>

<p>status Performs a status check. Suggested minimum
timeout: 5.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 30. Suggested interval: 120.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 5.</p>

<p>methods Suggested minimum timeout: 5.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5.</p>

<p>EXAMPLE The following is an example configuration for a
oracle resource using the crm(8) shell:</p>

<p>primitive p_oracle ocf:heartbeat:oracle params
sid=string op monitor depth=&quot;0&quot;
timeout=&quot;30&quot; interval=&quot;120&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/oracle_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>resource-agents 3.9.2 02/25/2016
OCF_HEARTBEAT_ORACLE(7)</p>
<hr>
</body>
</html>
