<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:42:38 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>UDEV(7) udev UDEV(7)</p>

<p>NAME udev - dynamic device management</p>

<p>DESCRIPTION udev provides a dynamic device directory
containing only the files for actually present devices. It
creates or removes device node files in the /dev directory,
or it renames network interfaces.</p>

<p>Usually udev runs as udevd(8) and receives uevents
directly from the kernel if a device is added or removed
from the system.</p>

<p>If udev receives a device event, it matches its
configured rules against the available device attributes
provided in sysfs to identify the device. Rules that match
may provide additional device information or specify a
device node name and multiple symlink names and instruct
udev to run additional programs as part of the device event
handling.</p>

<p>CONFIGURATION udev configuration files are placed in
/etc/udev/ and /lib/udev/. All empty lines, or lines
beginning with &acute;#&acute; will be ignored.</p>

<p>Configuration file udev expects its main configuration
file at /etc/udev/udev.conf. It consists of a set of
variables allowing the user to override default udev values.
The following variables can be set:</p>

<p>udev_root Specifies where to place the device nodes in
the filesystem. The default value is /dev.</p>

<p>udev_log The logging priority. Valid values are the
numerical syslog priorities or their textual
representations: err, info and debug.</p>

<p>Rules files The udev rules are read from the files
located in the default rules directory /lib/udev/rules.d/,
the custom rules directory /etc/udev/rules.d/ and the
temporary rules directory /dev/.udev/rules.d/. All rule
files are sorted and processed in lexical order, regardless
in which of these directories they live.</p>

<p>Rule files are required to have a unique name, duplicate
file names are ignored. Files in /etc/udev/rules.d/ have
precedence over files with the same name in
/lib/udev/rules.d/. This can be used to ignore a default
rules file if needed.</p>

<p>Every line in the rules file contains at least one key
value pair. There are two kind of keys, match and assignment
keys. If all match keys are matching against its value, the
rule gets applied and the assign keys get the specified
value assigned.</p>

<p>A matching rule may specify the name of the device node,
add a symlink pointing to the node, or run a specified
program as part of the event handling. If no matching rule
is found, the default device node name is used.</p>

<p>A rule consists of a list of one or more key value pairs
separated by a comma. Each key has a distinct operation,
depending on the used operator. Valid operators are:</p>

<p>== Compare for equality.</p>

<p>!= Compare for inequality.</p>

<p>= Assign a value to a key. Keys that represent a list,
are reset and only this single value is assigned.</p>

<p>+= Add the value to a key that holds a list of
entries.</p>

<p>:= Assign a value to a key finally; disallow any later
changes, which may be used to prevent changes by any later
rules.</p>

<p>The following key names can be used to match against
device properties. Some of the keys also match against
properties of the parent devices in sysfs, not only the
device that has generated the event. If multiple keys that
match a parent device are specified in a single rule, all
these keys must match at one and the same parent device.</p>

<p>ACTION Match the name of the event action.</p>

<p>DEVPATH Match the devpath of the event device.</p>

<p>KERNEL Match the name of the event device.</p>

<p>NAME Match the name of the node or network interface. It
can be used once the NAME key has been set in one of the
preceding rules.</p>

<p>SYMLINK Match the name of a symlink targeting the node.
It can be used once a SYMLINK key has been set in one of the
preceding rules. There may be multiple symlinks; only one
needs to match.</p>

<p>SUBSYSTEM Match the subsystem of the event device.</p>

<p>DRIVER Match the driver name of the event device. Only
set for devices which are bound to a driver at the time the
event is generated.</p>

<p>SECLABEL{module} Applies the specified Linux Security
Module label to the device node. Note that at this time only
selinux is supported.</p>

<p>ATTR{filename} Match sysfs attribute values of the event
device. Trailing whitespace in the attribute values is
ignored, if the specified match value does not contain
trailing whitespace itself.</p>

<p>KERNELS Search the devpath upwards for a matching device
name.</p>

<p>SUBSYSTEMS Search the devpath upwards for a matching
device subsystem name.</p>

<p>DRIVERS Search the devpath upwards for a matching device
driver name.</p>

<p>ATTRS{filename} Search the devpath upwards for a device
with matching sysfs attribute values. If multiple ATTRS
matches are specified, all of them must match on the same
device. Trailing whitespace in the attribute values is
ignored, if the specified match value does not contain
trailing whitespace itself.</p>

<p>ENV{key} Match against a device property value.</p>

<p>TEST{octal mode mask} Test the existence of a file. An
octal mode mask can be specified if needed.</p>

<p>PROGRAM Execute a program. The key is true, if the
program returns successfully. The device properties are made
available to the executed program in the environment. The
program&acute;s output printed to stdout, is available in
the RESULT key.</p>

<p>RESULT Match the returned string of the last PROGRAM
call. This key can be used in the same or in any later rule
after a PROGRAM call.</p>

<p>Most of the fields support a shell style pattern
matching. The following pattern characters are
supported:</p>

<p>* Matches zero, or any number of characters.</p>

<p>? Matches any single character.</p>

<p>[] Matches any single character specified within the
brackets. For example, the pattern string
&acute;tty[SR]&acute; would match either &acute;ttyS&acute;
or &acute;ttyR&acute;. Ranges are also supported within this
match with the &acute;-&acute; character. For example, to
match on the range of all digits, the pattern [0-9] would be
used. If the first character following the &acute;[&acute;
is a &acute;!&acute;, any characters not enclosed are
matched.</p>

<p>The following keys can get values assigned:</p>

<p>NAME The name of the node to be created, or the name the
network interface should be renamed to.</p>

<p>SYMLINK The name of a symlink targeting the node. Every
matching rule adds this value to the list of symlinks to be
created.</p>

<p>The set of characters to name a symlink is limited.
Allowed characters are [0-9A-Za-z#+-.:=@_/], valid utf8
character sequences, and &quot;0&quot; hex encoding. All
other characters are replaced by a _ character.</p>

<p>Multiple symlinks may be specified by separating the
names by the space character. In case multiple devices claim
the same name, the link always points to the device with the
highest link_priority. If the current device goes away, the
links are re-evaluated and the device with the next highest
link_priority becomes the owner of the link. If no
link_priority is specified, the order of the devices (and
which one of them owns the link) is undefined.</p>

<p>Symlink names must never conflict with the kernels
default device node names, as that would result in
unpredictable behavior.</p>

<p>OWNER, GROUP, MODE The permissions for the device node.
Every specified value overwrites the compiled-in default
value.</p>

<p>ATTR{key} The value that should be written to a sysfs
attribute of the event device.</p>

<p>ENV{key} Set a device property value. Property names
with a leading &acute;.&acute; are not stored in the
database or exported to external tool or events.</p>

<p>RUN Add a program to the list of programs to be executed
for a specific device. This can only be used for very short
running tasks. Running an event process for a long period of
time may block all further events for this or a dependent
device. Long running tasks need to be immediately detached
from the event process itself. If the option
RUN{fail_event_on_error} is specified, and the executed
program returns non-zero, the event will be marked as failed
for a possible later handling.</p>

<p>If the specified string starts with socket:path, all
current event values will be passed to the specified socket,
as a message in the same format the kernel sends an uevent.
If the first character of the specified path is an @
character, an abstract namespace socket is used, instead of
an existing socket file.</p>

<p>LABEL Named label where a GOTO can jump to.</p>

<p>GOTO Jumps to the next LABEL with a matching name</p>

<p>IMPORT{type} Import a set of variables as device
properties, depending on type:</p>

<p>program Execute an external program specified as the
assigned value and import its output, which must be in
environment key format.</p>

<p>file Import a text file specified as the assigned value,
which must be in environment key format.</p>

<p>db Import a single property specified as the assigned
value from the current device database. This works only if
the database is already populated by an earlier event.</p>

<p>cmdline Import a single property from the kernel
commandline. For simple flags the value of the property will
be set to &acute;1&acute;.</p>

<p>parent Import the stored keys from the parent device by
reading the database entry of the parent device. The value
assigned to IMPORT{parent} is used as a filter of key names
to import (with the same shell-style pattern matching used
for comparisons).</p>

<p>If no option is given, udev will choose between program
and file based on the executable bit of the file
permissions.</p>

<p>WAIT_FOR Wait for a file to become available.</p>

<p>OPTIONS Rule and device options:</p>

<p>ignore_device Ignore this event completely.</p>

<p>ignore_remove Do not remove the device node when the
device goes away. This may be useful as a workaround for
broken device drivers.</p>

<p>link_priority=value Specify the priority of the created
symlinks. Devices with higher priorities overwrite existing
symlinks of other devices. The default is 0.</p>

<p>all_partitions Create the device nodes for all available
partitions of a block device. This may be useful for
removable media devices where media changes are not
detected.</p>

<p>event_timeout= Number of seconds an event will wait for
operations to finish, before it will terminate itself.</p>

<p>string_escape=none|replace Usually control and other
possibly unsafe characters are replaced in strings used for
device naming. The mode of replacement can be specified with
this option.</p>

<p>watch Watch the device node with inotify, when closed
after being opened for writing, a change uevent will be
synthesised.</p>

<p>nowatch Disable the watching of a device node with
inotify.</p>

<p>The NAME, SYMLINK, PROGRAM, OWNER, GROUP, MODE and RUN
fields support simple printf-like string substitutions. The
RUN format chars gets applied after all rules have been
processed, right before the program is executed. It allows
the use of device properties set by earlier matching rules.
For all other fields, substitutions are applied while the
individual rule is being processed. The available
substitutions are:</p>

<p>$kernel, %k The kernel name for this device.</p>

<p>$number, %n The kernel number for this device. For
example, &acute;sda3&acute; has kernel number of
&acute;3&acute;</p>

<p>$devpath, %p The devpath of the device.</p>

<p>$id, %b The name of the device matched while searching
the devpath upwards for SUBSYSTEMS, KERNELS, DRIVERS and
ATTRS.</p>

<p>$driver The driver name of the device matched while
searching the devpath upwards for SUBSYSTEMS, KERNELS,
DRIVERS and ATTRS.</p>

<p>$attr{file}, %s{file} The value of a sysfs attribute
found at the device, where all keys of the rule have
matched. If the matching device does not have such an
attribute, follow the chain of parent devices and use the
value of the first attribute that matches. If the attribute
is a symlink, the last element of the symlink target is
returned as the value.</p>

<p>$env{key}, %E{key} A device property value.</p>

<p>$major, %M The kernel major number for the device.</p>

<p>$minor, %m The kernel minor number for the device.</p>

<p>$result, %c The string returned by the external program
requested with PROGRAM. A single part of the string,
separated by a space character may be selected by specifying
the part number as an attribute: %c{N}. If the number is
followed by the &acute;+&acute; char this part plus all
remaining parts of the result string are substituted:
%c{N+}</p>

<p>$parent, %P The node name of the parent device.</p>

<p>$name The current name of the device node. If not
changed by a rule, it is the name of the kernel device.</p>

<p>$links The current list of symlinks, separated by a
space character. The value is only set if an earlier rule
assigned a value, or during a remove events.</p>

<p>$root, %r The udev_root value.</p>

<p>$sys, %S The sysfs mount point.</p>

<p>$tempnode, %N The name of a created temporary device
node to provide access to the device from a external program
before the real node is created.</p>

<p>%% The &acute;%&acute; character itself.</p>

<p>$$ The &acute;$&acute; character itself.</p>

<p>AUTHOR Written by Greg Kroah-Hartman greg@kroah.com and
Kay Sievers kay.sievers@vrfy.org. With much help from Dan
Stekloff and many others.</p>

<p>SEE ALSO udevd(8), udevadm(8)</p>

<p>udev 04/08/2016 UDEV(7)</p>
<hr>
</body>
</html>
