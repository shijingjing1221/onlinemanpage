<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:04:33 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>AMTAPETYPE(8) System Administration Commands
AMTAPETYPE(8)</p>

<p>NAME amtapetype - generate a tapetype definition by
testing the device directly</p>

<p>SYNOPSIS amtapetype [-h] [-c] [-f] [-p] [-b blocksize]
[-t typename] [-l label] [-o config_overwrite] [device]</p>

<p>DESCRIPTION amtapetype generates a tapetype entry for
Amanda by testing the device directly</p>

<p>OPTIONS Note The options for amtapetype have changed in
version 2.6.1</p>

<p>-h Display the help message.</p>

<p>-c Run only the hardware compression detection heuristic
test and stop. This takes a few minutes only.</p>

<p>-f Run amtapetype even if the loaded volume is already
in use or compression is enabled.</p>

<p>-p Run only the device property discovery.</p>

<p>-b blocksize block size to use with the device (default:
32k)</p>

<p>-t typename Name to give to the new tapetype
definition.</p>

<p>-l label Label to write on the tape (default is randomly
generated).</p>

<p>-o configoption See the &quot;CONFIGURATION
OVERRIDE&quot; section in amanda(8).</p>

<p>EXAMPLE Generate a tapetype definition for your tape
device:</p>

<p>% amtapetype -f /dev/nst0</p>

<p>NOTES If the device cannot reliably report its
comprssion status (and as of this writing, no devices can do
so), hardware compression is detected by measuring the
writing speed difference of the tape drive when writing an
amount of compressable and uncompresseable data. If your
tape drive has very large buffers or is very fast, the
program could fail to detect hardware compression status
reliably.</p>

<p>Volume capacity is determined by writing one large file
until an error, interpereted as end-of-tape, is encountered.
In the next phase, about 100 files are written to fill the
tape. This second phase will write less data, because each
filemark consumes some tape. With a little arithmetic,
amtapetype calculates the size of these filemarks.</p>

<p>All sorts of things might happen to cause the amount of
data written to vary enough to generate a strange file mark
size guess. A little more &quot;shoe shining&quot; because
of the additional file marks (and flushes), dirt left on the
heads from the first pass of a brand new tape, the
temperature/humidity changed during the multi-hour run, a
different amount of data was written after the last file
mark before EOT was reported, etc.</p>

<p>Note that the file mark size might really be zero for
whatever device this is, and it was just the measured
capacity variation that caused amtapetype to think those
extra file marks in pass 2 actually took up space.</p>

<p>AUTHORS Dustin J. Mitchell &lt;dustin@zmanda.com&gt;
Zmanda, Inc. (http://www.zmanda.com)</p>

<p>Jean-Louis Martineau &lt;martineau@zmanda.com&gt;
Zmanda, Inc. (http://www.zmanda.com)</p>

<p>Amanda 2.6.1p2 11/05/2009 AMTAPETYPE(8)</p>
<hr>
</body>
</html>
