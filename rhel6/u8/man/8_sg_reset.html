<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:34:12 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SG_RESET(8) SG3_UTILS SG_RESET(8)</p>

<p>NAME sg_reset - sends SCSI device, target, bus or host
reset; or checks reset state</p>

<p>SYNOPSIS sg_reset [-b] [-d] [-h] [-t] [-V] DEVICE</p>

<p>DESCRIPTION The sg_reset utility with no options (just a
DEVICE) reports on the reset state (e.g. if a reset is
underway) of DEVICE. When given a -d, -t, -b or -h option it
requests a device, target, bus or host reset
respectively.</p>

<p>The ability to reset a SCSI target (often called a
&quot;hard reset&quot; at the transport level) was added in
linux kernel 2.6.27 . Low level drivers that support target
reset hopefully reset a logical unit only when given the
device reset (i.e. -d) option. This should removed the ambi-
guity of whether &quot;device&quot; meant LU or target that
we have had in the past.</p>

<p>In the linux kernel 2.6 series this utility can be
called on sd, sr (cd/dvd), st or sg device nodes; if the
user has appropriate permis- sions.</p>

<p>In the linux kernel 2.4 series support for this utility
first appeared in lk 2.4.19 and could only be called on sg
device nodes. Various ven- dors made this capability
available in their kernels prior to lk 2.4.19.</p>

<p>OPTIONS -b attempt a SCSI bus reset. This would normally
be tried if the device reset (i.e. option -d) was not
successful.</p>

<p>-d attempt a SCSI device reset. If the device seems
stuck, this is the first reset that should be tried. This
assumes the linux scsi mid level error handler is not
already in the process of resetting DEVICE.</p>

<p>-h attempt a host adapter reset. This would normally be
tried if both device reset (i.e. option -d) and bus reset
(i.e. option -b) were not successful.</p>

<p>-t attempt a SCSI target reset. This assumes the linux
scsi mid level error handler is not already in the process
of resetting the target that contains the given DEVICE.</p>

<p>-V prints the version string then exits.</p>

<p>NOTES The error recovery code within the linux kernel
when faced with a SCSI command timing out and no response
from the device (LU), first tries a device reset and if that
is not successful tries a target reset. If that is not
successful it tries a bus reset. If that is not successful
it tries a host reset. Users of this utility should check
whether such a recovery is already underway before trying to
reset with this util- ity. The
&quot;device,target,bus,host&quot; order is also recommended
(i.e. first start with the smallest hammer). The above is a
generalization and exact details will vary depending on the
transport and the low level driver concerned.</p>

<p>SAM-4 defines a hard reset, a logical unit reset and a
I_T nexus reset. A hard reset is defined to be a power on
condition, a microcode change or a transport reset event. A
LU reset and an I_T nexus reset can be requested via task
management function (and support for LU reset is mandatory).
In Linux the SCSI subsystem leaves it up to the low level
drivers as to whether a &quot;device reset&quot; is only for
the addressed LU or all the LUs in the device that contains
the addressed LU (i.e. a target reset). The additional of
the target reset (i.e. option -t) should give more control
in this area. The &quot;bus reset&quot; is a transport reset
and may be a dummy operation, depending on the transport. A
&quot;host reset&quot; attempts to re-initialize the HBA
that the request passes through en route to the DEVICE. Note
that a &quot;host reset&quot; and a &quot;bus reset&quot;
may cause collateral damage.</p>

<p>This utility does not allow individual SCSI commands (or
tasks as they are called in SAM-4) to be aborted. SAM-4
defines ABORT TASK and ABORT TASK SET task management
functions for that.</p>

<p>Prior to SAM-3 there was a TARGET RESET task management
function. Sev- eral transports still support that function
and many associated linux low level drivers map the -t
option to it.</p>

<p>AUTHORS Written by Douglas Gilbert.</p>

<p>COPYRIGHT Copyright &copy; 1999-2009 Douglas Gilbert
This software is distributed under the GPL version 2. There
is NO war- ranty; not even for MERCHANTABILITY or FITNESS
FOR A PARTICULAR PUR- POSE.</p>

<p>sg3_utils-1.28 July 2009 SG_RESET(8)</p>
<hr>
</body>
</html>
