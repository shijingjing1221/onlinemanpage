<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:43:52 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>virt-format(1) Virtualization Support virt-format(1)</p>

<p>NAME virt-format - Erase and make a blank disk</p>

<p>SYNOPSIS virt-format [--options] -a disk.img [-a
disk.img ...]</p>

<p>DESCRIPTION Virt-format takes an existing disk file (or
it can be a host partition, LV etc), erases all data on it,
and formats it as a blank disk. It can optionally create
partition tables, empty filesystems, logical volumes and
more.</p>

<p>To create a disk containing data, you may be better to
use virt-make-fs(1). If you are creating a blank disk to use
in guestfish(1), you should instead use the guestfish -N
option.</p>

<p>Normal usage would be something like this:</p>

<p>virt-format -a disk.qcow</p>

<p>or this:</p>

<p>virt-format -a /dev/VG/LV</p>

<p>&quot;disk.qcow&quot; or &quot;/dev/VG/LV&quot; must
exist already. Any data on these disks will be erased by
these commands. These commands will create a single empty
partition covering the whole disk, with no filesystem inside
it.</p>

<p>Additional parameters can be used to control the
creation of partitions, filesystems, etc. The most commonly
used options are:</p>

<p>--filesystem=[ext3|ntfs|vfat|...] Create an empty
filesystem (&quot;ext3&quot;, &quot;ntfs&quot; etc) inside
the partition.</p>

<p>--lvm[=/dev/VG/LV] Create a Linux LVM2 logical volume on
the disk. When used with --filesystem, the filesystem is
created inside the LV.</p>

<p>For more information about these and other options, see
&quot;OPTIONS&quot; below.</p>

<p>The format of the disk is normally auto-detected, but
you can also force it by using the --format option (q.v.).
In situations where you do not trust the existing content of
the disk, then it is advisable to use this option to avoid
possible exploits.</p>

<p>OPTIONS --help Display brief help.</p>

<p>-a file --add file Add file, a disk image, host
partition, LV, external USB disk, etc.</p>

<p>The format of the disk image is auto-detected. To
override this and force a particular format use the
--format=.. option.</p>

<p>Any existing data on the disk is erased.</p>

<p>--filesystem=ext3|ntfs|vfat|... Create an empty
filesystem of the specified type. Many filesystem types are
supported by libguestfs.</p>

<p>--filesystem=none Create no filesystem. This is the
default.</p>

<p>--format=raw|qcow2|.. --format The default for the -a
option is to auto-detect the format of the disk image. Using
this forces the disk format for -a options which follow on
the command line. Using --format with no argument switches
back to auto-detection for subsequent -a options.</p>

<p>For example:</p>

<p>virt-format --format=raw -a disk.img</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot;.</p>

<p>virt-format --format=raw -a disk.img --format -a
another.img</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot; and reverts to auto-detection for
&quot;another.img&quot;.</p>

<p>If you have untrusted raw-format guest disk images, you
should use this option to specify the disk format. This
avoids a possible security problem with malicious guests
(CVE-2010-3851).</p>

<p>--lvm=/dev/VG/LV Create a Linux LVM2 logical volume
called &quot;/dev/VG/LV&quot;. You can change the name of
the volume group and logical volume.</p>

<p>--lvm Create a Linux LVM2 logical volume with the
default name (&quot;/dev/VG/LV&quot;).</p>

<p>--lvm=none Create no logical volume. This is the
default.</p>

<p>--partition Create either an MBR or GPT partition
covering the whole disk. MBR is chosen if the disk size is
&lt; 2 TB, GPT if 2 TB.</p>

<p>This is the default.</p>

<p>--partition=gpt Create a GPT partition.</p>

<p>--partition=mbr Create an MBR partition.</p>

<p>--partition=none Create no partition table. Note that
Windows may not be able to see these disks.</p>

<p>-v --verbose Enable verbose messages for debugging.</p>

<p>-V --version Display version number and exit.</p>

<p>--wipe Normally virt-format does not wipe data from the
disk (because that takes a long time). Thus if there is data
on the disk, it is only hidden and partially overwritten by
virt-format, and it might be recovered by disk editing
tools.</p>

<p>If you use this option, virt-format writes zeroes over
the whole disk so that previous data is not recoverable.</p>

<p>-x Enable tracing of libguestfs API calls.</p>

<p>EXIT STATUS This program returns 0 on success, or 1 on
failure.</p>

<p>SEE ALSO guestfs(3), guestfish(1), virt-filesystems(1),
virt-make-fs(1), virt-rescue(1), virt-resize(1),
http://libguestfs.org/.</p>

<p>AUTHOR Richard W.M. Jones
http://people.redhat.com/~rjones/</p>

<p>COPYRIGHT Copyright (C) 2012 Red Hat Inc.</p>

<p>LICENSE This program is free software; you can
redistribute it and/or modify it under the terms of the GNU
General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your
option) any later version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth
Floor, Boston, MA 02110-1301 USA.</p>

<p>BUGS To get a list of bugs against libguestfs, use this
link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>When reporting a bug, please supply:</p>

<p>&middot; The version of libguestfs.</p>

<p>&middot; Where you got libguestfs (eg. which Linux
distro, compiled from source, etc)</p>

<p>&middot; Describe the bug accurately and give a way to
reproduce it.</p>

<p>&middot; Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.</p>

<p>libguestfs-1.20.11 2013-08-27 virt-format(1)</p>
<hr>
</body>
</html>
