<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:27:23 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERF-SCRIPT(1) perf Manual PERF-SCRIPT(1)</p>

<p>NAME perf-script - Read perf.data (created by perf
record) and display trace output</p>

<p>SYNOPSIS perf script [&lt;options&gt;] perf script
[&lt;options&gt;] record &lt;script&gt;
[&lt;record-options&gt;] &lt;command&gt; perf script
[&lt;options&gt;] report &lt;script&gt; [script-args] perf
script [&lt;options&gt;] &lt;script&gt;
&lt;required-script-args&gt; [&lt;record-options&gt;]
&lt;command&gt; perf script [&lt;options&gt;]
&lt;top-script&gt; [script-args]</p>

<p>DESCRIPTION This command reads the input file and
displays the trace recorded.</p>

<p>There are several variants of perf script:</p>

<p>&acute;perf script&acute; to see a detailed trace of the
workload that was recorded.</p>

<p>You can also run a set of pre-canned scripts that
aggregate and summarize the raw trace data in various ways
(the list of scripts is available via &acute;perf script
-l&acute;). The following variants allow you to record and
run those scripts:</p>

<p>&acute;perf script record &lt;script&gt;
&lt;command&gt;&acute; to record the events required for
&acute;perf script report&acute;. &lt;script&gt; is the name
displayed in the output of &acute;perf script --list&acute;
i.e. the actual script name minus any language extension. If
&lt;command&gt; is not specified, the events are recorded
using the -a (system-wide) &acute;perf record&acute;
option.</p>

<p>&acute;perf script report &lt;script&gt; [args]&acute;
to run and display the results of &lt;script&gt;.
&lt;script&gt; is the name displayed in the output of
&acute;perf trace --list&acute; i.e. the actual script name
minus any language extension. The perf.data output from a
previous run of &acute;perf script record
&lt;script&gt;&acute; is used and should be present for this
command to succeed. [args] refers to the (mainly optional)
args expected by the script.</p>

<p>&acute;perf script &lt;script&gt;
&lt;required-script-args&gt; &lt;command&gt;&acute; to both
record the events required for &lt;script&gt; and to run the
&lt;script&gt; using &acute;live-mode&acute; i.e. without
writing anything to disk. &lt;script&gt; is the name
displayed in the output of &acute;perf script --list&acute;
i.e. the actual script name minus any language extension. If
&lt;command&gt; is not specified, the events are recorded
using the -a (system-wide) &acute;perf record&acute; option.
If &lt;script&gt; has any required args, they should be
specified before &lt;command&gt;. This mode doesn&acute;t
allow for optional script args to be specified; if optional
script args are desired, they can be specified using
separate &acute;perf script record&acute; and &acute;perf
script report&acute; commands, with the stdout of the record
step piped to the stdin of the report script, using the
&acute;-o -&acute; and &acute;-i -&acute; options of the
corresponding commands.</p>

<p>&acute;perf script &lt;top-script&gt;&acute; to both
record the events required for &lt;top-script&gt; and to run
the &lt;top-script&gt; using &acute;live-mode&acute; i.e.
without writing anything to disk. &lt;top-script&gt; is the
name displayed in the output of &acute;perf script
--list&acute; i.e. the actual script name minus any language
extension; a &lt;top-script&gt; is defined as any script
name ending with the string &acute;top&acute;.</p>

<p>[&lt;record-options&gt;] can be passed to the record
steps of &acute;perf script record&acute; and
&acute;live-mode&acute; variants; this isn&acute;t possible
however for &lt;top-script&gt; &acute;live-mode&acute; or
&acute;perf script report&acute; variants.</p>

<p>See the &acute;SEE ALSO&acute; section for links to
language-specific information on how to write and run your
own trace scripts.</p>

<p>OPTIONS &lt;command&gt;... Any command you can specify
in a shell.</p>

<p>-D, --dump-raw-script= Display verbose dump of the trace
data.</p>

<p>-L, --Latency= Show latency attributes (irqs/preemption
disabled, etc).</p>

<p>-l, --list= Display a list of available trace
scripts.</p>

<p>-s [lang], --script= Process trace data with the given
script ([lang]:script[.ext]). If the string lang is
specified in place of a script name, a list of supported
languages will be displayed instead.</p>

<p>-g, --gen-script= Generate perf-script.[ext] starter
script for given language, using current perf.data.</p>

<p>-a Force system-wide collection. Scripts run without a
&lt;command&gt; normally use -a by default, while scripts
run with a &lt;command&gt; normally don t - this option
allows the latter to be run in system-wide mode.</p>

<p>-i, --input= Input file name. (default: perf.data unless
stdin is a fifo)</p>

<p>-d, --debug-mode Do various checks like samples ordering
and lost events.</p>

<p>-f, --fields Comma separated list of fields to print.
Options are: comm, tid, pid, time, cpu, event, trace, ip,
sym, dso, addr, symoff, srcline, period. Field list can be
prepended with the type, trace, sw or hw, to indicate to
which event type the field list applies. e.g., -f
sw:comm,tid,time,ip,sym and -f trace:time,cpu,trace</p>

<p>perf script -f &lt;fields&gt;</p>

<p>is equivalent to:</p>

<p>perf script -f trace:&lt;fields&gt; -f sw:&lt;fields&gt;
-f hw:&lt;fields&gt;</p>

<p>i.e., the specified fields apply to all event types if
the type string is not given.</p>

<p>The arguments are processed in the order received. A
later usage can reset a prior request. e.g.:</p>

<p>-f trace: -f comm,tid,time,ip,sym</p>

<p>The first -f suppresses trace events (field list is
&quot;&quot;), but then the second invocation sets the
fields to comm,tid,time,ip,sym. In this case a warning is
given to the user:</p>

<p>&quot;Overriding previous field request for all
events.&quot;</p>

<p>Alternatively, consider the order:</p>

<p>-f comm,tid,time,ip,sym -f trace:</p>

<p>The first -f sets the fields for all events and the
second -f suppresses trace events. The user is given a
warning message about the override, and the result of the
above is that only S/W and H/W events are displayed with the
given fields.</p>

<p>For the &acute;wildcard&acute; option if a user selected
field is invalid for an event type, a message is displayed
to the user that the option is ignored for that type. For
example:</p>

<p>$ perf script -f comm,tid,trace &acute;trace&acute; not
valid for hardware events. Ignoring. &acute;trace&acute; not
valid for software events. Ignoring.</p>

<p>Alternatively, if the type is given an invalid field is
specified it is an error. For example:</p>

<p>perf script -v -f sw:comm,tid,trace &acute;trace&acute;
not valid for software events.</p>

<p>At this point usage is displayed, and perf-script
exits.</p>

<p>Finally, a user may not set fields to none for all event
types. i.e., -f &quot;&quot; is not allowed.</p>

<p>-k, --vmlinux=&lt;file&gt; vmlinux pathname</p>

<p>--kallsyms=&lt;file&gt; kallsyms pathname</p>

<p>--symfs=&lt;directory&gt; Look for files with symbols
relative to this directory.</p>

<p>-G, --hide-call-graph When printing symbols do not
display call chain.</p>

<p>-C, --cpu Only report samples for the list of CPUs
provided. Multiple CPUs can be provided as a comma-separated
list with no space: 0,1. Ranges of CPUs are specified with
-: 0-2. Default is to report samples on all CPUs.</p>

<p>-c, --comms= Only display events for these comms. CSV
that understands file://filename entries.</p>

<p>--pid= Only show events for given process ID (comma
separated list).</p>

<p>--tid= Only show events for given thread ID (comma
separated list).</p>

<p>-I, --show-info Display extended information about the
perf.data file. This adds information which may be very
large and thus may clutter the display. It currently
includes: cpu and numa topology of the host system. It can
only be used with the perf script report mode.</p>

<p>--show-kernel-path Try to resolve the path of
[kernel.kallsyms]</p>

<p>--show-task-events Display task related events (e.g.
FORK, COMM, EXIT).</p>

<p>--show-mmap-events Display mmap related events (e.g.
MMAP, MMAP2).</p>

<p>--header Show perf.data header.</p>

<p>--header-only Show only perf.data header.</p>

<p>--full-source-path Show the full path for source files
for srcline output.</p>

<p>SEE ALSO perf-record(1), perf-script-perl(1),
perf-script-python(1)</p>

<p>perf 04/13/2016 PERF-SCRIPT(1)</p>
<hr>
</body>
</html>
