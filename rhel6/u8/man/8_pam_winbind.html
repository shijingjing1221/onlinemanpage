<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:42 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PAM_WINBIND(8) 8 PAM_WINBIND(8)</p>

<p>NAME pam_winbind - PAM module for Winbind</p>

<p>DESCRIPTION This tool is part of the samba(7) suite.</p>

<p>pam_winbind is a PAM module that can authenticate users
against the local domain by talking to the Winbind
daemon.</p>

<p>SYNOPSIS Edit the PAM system config /etc/pam.d/service
and modify it as the following example shows:</p>

<p>... auth required pam_env.so auth sufficient
pam_unix2.so +++ auth required pam_winbind.so use_first_pass
account requisite pam_unix2.so +++ account required
pam_winbind.so use_first_pass +++ password sufficient
pam_winbind.so password requisite pam_pwcheck.so cracklib
password required pam_unix2.so use_authtok session required
pam_unix2.so +++ session required pam_winbind.so ...</p>

<p>Make sure that pam_winbind is one of the first modules
in the session part. It may retrieve kerberos tickets which
are needed by other modules.</p>

<p>OPTIONS pam_winbind supports several options which can
either be set in the PAM configuration files or in the
pam_winbind configuration file situated at
/etc/security/pam_winbind.conf. Options from the PAM
configuration file take precedence to those from the
configuration file. See pam_winbind.conf(5) for further
details.</p>

<p>debug Gives debugging output to syslog.</p>

<p>debug_state Gives detailed PAM state debugging output to
syslog.</p>

<p>require_membership_of=[SID or NAME] If this option is
set, pam_winbind will only succeed if the user is a member
of the given SID or NAME. A SID can be either a group-SID,
an alias-SID or even an user-SID. It is also possible to
give a NAME instead of the SID. That name must have the
form: MYDOMAINmygroup or MYDOMAINmyuser. pam_winbind will,
in that case, lookup the SID internally. Note that NAME may
not contain any spaces. It is thus recommended to only use
SIDs. You can verify the list of SIDs a user is a member of
with wbinfo --user-sids=SID.</p>

<p>use_first_pass By default, pam_winbind tries to get the
authentication token from a previous module. If no token is
available it asks the user for the old password. With this
option, pam_winbind aborts with an error if no
authentication token from a previous module is
available.</p>

<p>try_first_pass Same as the use_first_pass option
(previous item), except that if the primary password is not
valid, PAM will prompt for a password.</p>

<p>use_authtok Set the new password to the one provided by
the previously stacked password module. If this option is
not set pam_winbind will ask the user for the new
password.</p>

<p>krb5_auth pam_winbind can authenticate using Kerberos
when winbindd is talking to an Active Directory domain
controller. Kerberos authentication must be enabled with
this parameter. When Kerberos authentication can not succeed
(e.g. due to clock skew), winbindd will fallback to samlogon
authentication over MSRPC. When this parameter is used in
conjunction with winbind refresh tickets, winbind will keep
your Ticket Granting Ticket (TGT) uptodate by refreshing it
whenever necessary.</p>

<p>krb5_ccache_type=[type] When pam_winbind is configured
to try kerberos authentication by enabling the krb5_auth
option, it can store the retrieved Ticket Granting Ticket
(TGT) in a credential cache. The type of credential cache
can be set with this option. Currently the only supported
value is: FILE. In that case a credential cache in the form
of /tmp/krb5cc_UID will be created, where UID is replaced
with the numeric user id. Leave empty to just do kerberos
authentication without having a ticket cache after the logon
has succeeded.</p>

<p>cached_login Winbind allows to logon using cached
credentials when winbind offline logon is enabled. To use
this feature from the PAM module this option must be
set.</p>

<p>silent Do not emit any messages.</p>

<p>mkhomedir Create homedirectory for a user on-the-fly,
option is valid in PAM session block.</p>

<p>warn_pwd_expire Defines number of days before
pam_winbind starts to warn about passwords that are going to
expire. Defaults to 14 days.</p>

<p>PAM DATA EXPORTS This section describes the data
exported in the PAM stack which could be used in other PAM
modules.</p>

<p>PAM_WINBIND_HOMEDIR This is the Windows Home Directory
set in the profile tab in the user settings on the Active
Directory Server. This could be a local path or a directory
on a share mapped to a drive.</p>

<p>PAM_WINBIND_LOGONSCRIPT The path to the logon script
which should be executed if a user logs in. This is normally
a relative path to the script stored on the server.</p>

<p>PAM_WINBIND_LOGONSERVER This exports the Active
Directory server we are authenticating against. This can be
used as a variable later.</p>

<p>PAM_WINBIND_PROFILEPATH This is the profile path set in
the profile tab in the user settings. Normally the home
directory is synced with this directory on a share.</p>

<p>SEE ALSO pam_winbind.conf(5), wbinfo(1), winbindd(8),
smb.conf(5)</p>

<p>VERSION This man page is correct for version 3 of
Samba.</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>This manpage was written by Jelmer Vernooij and Guenther
Deschner.</p>

<p>Samba 3.6 04/11/2016 PAM_WINBIND(8)</p>
<hr>
</body>
</html>
