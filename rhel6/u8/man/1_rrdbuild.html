<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:32:08 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RRDBUILD(1) rrdtool RRDBUILD(1)</p>

<p>NAME rrdbuild - Instructions for building RRDtool</p>

<p>OVERVIEW If you downloaded the source of rrdtool you
have to compile it. This document will give some information
on how this is done.</p>

<p>RRDtool relies on services of third part libraries. Some
of these libraries may already be installed on your system.
You have to compile copies of the other ones before you can
build RRDtool.</p>

<p>This document will tell you about all the necessary
steps to get going.</p>

<p>These instructions assume you are using a bash shell. If
you use csh/tcsh, then you can either type bash to switch to
bash for the compilation or if you know what you are doing
just replace the export bits with setenv.</p>

<p>We further assume that your copies of tar and make are
actually GNU tar and GNU make respectively. It could be that
they are installed as gtar and gmake on your system.</p>

<p>OPTIMISTIC BUILD Before you start to build RRDtool, you
have to decide two things:</p>

<p>1. In which directory you want to build the
software.</p>

<p>2. Where you want to install the software.</p>

<p>Once you have decided. Save the two locations into
environment variables.</p>

<p>BUILD_DIR=/tmp/rrdbuild
INSTALL_DIR=/usr/local/rrdtool-1.3.8</p>

<p>If your /tmp is mounted with the option noexec (RHEL
seems todo that) you have to choose a different
directory!</p>

<p>Now make sure the BUILD_DIR exists and go there:</p>

<p>mkdir -p $BUILD_DIR cd $BUILD_DIR</p>

<p>Lets first assume you already have all the necessary
libraries pre- installed.</p>

<p>wget
http://oss.oetiker.ch/rrdtool/pub/rrdtool-1.3.8.tar.gz
gunzip -c rrdtool-1.3.8.tar.gz | tar xf - cd rrdtool-1.3.8
./configure --prefix=$INSTALL_DIR &amp;&amp; make &amp;&amp;
make install</p>

<p>Ok, this was very optimistic. This try will probably
have ended with configure complaining about several missing
libraries.</p>

<p>INSTALLING DEPENDENCIES If your OS lets you install
additional packages from a software repository, you may get
away with installing the missing packages. When the packages
are installed, run configure again and try to compile again.
Below you find some hints on getting your OS ready for the
rrdtool compilation.</p>

<p>Additions to this list are welcome. In general rrdtool
should work with the latest versions of the libraries. The
versions listed here are just what was current when I tested
this.</p>

<p>OpenSolaris 2008.05 Just add a compiler and the gnome
development package:</p>

<p>pkg install sunstudioexpress pkg install
SUNWgnome-common-devel</p>

<p>There is a problem with cairo.pc on OpenSolaris. It
suggests that xrender is required for compilation with
cairo. This is not true and also bad since OpenSolaris does
not include an xrender.pc file. Use Perl to fix this:</p>

<p>perl -i~ -p -e
&rsquo;s/(Requires.*?)xrender.*/$1/&rsquo;
/usr/lib/pkgconfig/cairo.pc</p>

<p>Make sure rrdtool finds your new compiler</p>

<p>export PATH=/opt/SunStudioExpress/bin</p>

<p>Since there does not seem to be a viable msgfmt tool on
OpenSolaris (short of installing it yourself). You have to
call configure with the</p>

<p>--disable-libintl</p>

<p>option.</p>

<p>Debian / Ubuntu Use apt-get to make sure you have all
that is required. A number of packages will get added
through dependencies.</p>

<p>apt-get install libpango1.0-dev libxml2-dev</p>

<p>Gentoo In Gentoo installing rrdtool is really simple you
just need to emerge rrdtool. All dependencies will be
handled automatically by the portage system. The only thing
you should care about are USE flags, which allow you fine
tune features rrdtool will be built with. Currently the
following USE flags are available:</p>

<p>doc - install .html and .txt documentation into
/usr/share/doc/rrdtool-1.x.xx/ perl - build and install perl
language bindings python - build and install python language
bindings ruby - build and install ruby language bindings tcl
- build and install tcl language bindings rrdcgi - build and
install rrdcgi</p>

<p>After you ve decided which USE flags you need, set them
either in make.conf or /etc/portage/package.use and finally
run:</p>

<p># emerge -va rrdtool</p>

<p>Take a look at Gentoo handbook for further details on
how to manage USE flags:
http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=2</p>

<p>BUILDING DEPENDENCIES But again this may have been too
optimistic still, and you actually have to compile your own
copies of some of the required libraries. Things like libpng
and zlib are pretty standard so you will probably have them
on your system anyway. Freetype, Fontinst, Cairo, Pango may
be installed, but it is possible that they are pretty old
and thus don t live up to our expectations, so you may want
to compile their latest versions.</p>

<p>General build tips for AIX If you are working with AIX,
you may find the --disable-shared option will cause things
to break for you. In that case you may have to install the
shared libraries into the rrdtool PREFIX and work with
--disable-static instead.</p>

<p>Another hint to get rrdtool working on AIX is to use the
IBM XL C Compiler:</p>

<p>export CC=/usr/vac/bin/cc export PERLCC=$CC</p>

<p>(Better instructions for AIX welcome!)</p>

<p>Build Instructions Some libraries want to know where
other libraries are. For this to work, set the following
environment variable</p>

<p>export PKG_CONFIG_PATH=${INSTALL_DIR}/lib/pkgconfig
export PATH=$INSTALL_DIR/bin:$PATH</p>

<p>The above relies on the presence of the pkgconfig
program. Below you find instructions on how to compile
pkgconfig.</p>

<p>Since we are compiling libraries dynamically, they must
know where to find each other. This is done by setting an
appropriate LDFLAGS. Unfortunately, the syntax again differs
from system to system:</p>

<p>Solaris export LDFLAGS=-R${INSTALL_DIR}/lib</p>

<p>if you are using the Sun Studio/Forte compiler, you may
also want to set</p>

<p>export CFLAGS=&quot;-xO3 -xcode=pic13&quot; (SPARC)
export CFLAGS=&quot;-xO3 -Kpic&quot; (x86)</p>

<p>Linux export CFLAGS=&quot;-O3 -fPIC&quot; export
LDFLAGS=&quot;-Wl,--rpath -Wl,${INSTALL_DIR}/lib&quot;</p>

<p>HPUX export LDFLAGS=&quot;+b${INSTALL_DIR}/lib&quot;</p>

<p>AIX export
LDFLAGS=&quot;-Wl,-blibpath:${INSTALL_DIR}/lib&quot;</p>

<p>If you have GNU make installed and it is not called make
, then do</p>

<p>export MAKE=gmake export GNUMAKE=gmake</p>

<p>otherwise just do</p>

<p>export MAKE=make</p>

<p>Building pkgconfig</p>

<p>As mentioned above, without pkgconfig the whole build
process will be lots of pain and suffering, so make sure you
have a copy on your system. If it is not available natively,
here is how to compile it.</p>

<p>wget
http://pkgconfig.freedesktop.org/releases/pkg-config-0.23.tar.gz
gunzip -c pkg-config-0.23.tar.gz | tar xf - cd
pkg-config-0.23 ./configure --prefix=$INSTALL_DIR $MAKE
$MAKE install</p>

<p>After installing pkgconfig in a custom directory,
setting up the corresponding environment variable will be
helpful.</p>

<p>export PKG_CONFIG=$INSTALL_DIR/bin/pkg-config</p>

<p>Building zlib</p>

<p>Chances are very high that you already have that on your
system ...</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/zlib-1.2.3.tar.gz
gunzip -c zlib-1.2.3.tar.gz | tar xf - cd zlib-1.2.3
./configure --prefix=$INSTALL_DIR --shared $MAKE $MAKE
install</p>

<p>Building libpng</p>

<p>Libpng itself requires zlib to build, so we need to help
a bit. If you already have a copy of zlib on your system
(which is very likely) you can drop the settings of LDFLAGS
and CPPFLAGS. Note that the backslash ( at the end of line 4
means that line 4 and line 5 are on one line.</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/libpng-1.2.18.tar.gz
gunzip -c libpng-1.2.18.tar.gz | tar xf - cd libpng-1.2.18
./configure --prefix=$INSTALL_DIR $MAKE $MAKE install</p>

<p>Building freetype</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/freetype-2.3.5.tar.gz
gunzip -c freetype-2.3.5.tar.gz | tar xf - cd freetype-2.3.5
./configure --prefix=$INSTALL_DIR CFLAGS=&quot;-O3
-fPIC&quot; $MAKE $MAKE install</p>

<p>If you run into problems building freetype on Solaris,
you may want to try to add the following at the start the
configure line:</p>

<p>env EGREP=egrep</p>

<p>Building LibXML2</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/libxml2-2.6.32.tar.gz
gunzip -c libxml2-2.6.32.tar.gz | tar xf - cd libxml2-2.6.32
./configure --prefix=$INSTALL_DIR $MAKE $MAKE install</p>

<p>Building fontconfig</p>

<p>Note that fontconfig has a run time configuration file
in INSTALL_DIR/etc you may want to adjust that so that
fontconfig finds the fonts on your system. Run the fc-cache
program to build the fontconfig cache after changing the
config file.</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/fontconfig-2.4.2.tar.gz
gunzip -c fontconfig-2.4.2.tar.gz | tar xf - cd
fontconfig-2.4.2 ./configure --prefix=$INSTALL_DIR
--with-freetype-config=$INSTALL_DIR/bin/freetype-config
$MAKE $MAKE install</p>

<p>Building Pixman</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/pixman-0.10.0.tar.gz
gunzip -c pixman-0.10.0.tar.gz | tar xf - cd pixman-0.10.0
./configure --prefix=$INSTALL_DIR $MAKE $MAKE install</p>

<p>Building Cairo</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/cairo-1.6.4.tar.gz
gunzip -c cairo-1.6.4.tar.gz | tar xf - cd cairo-1.6.4
./configure --prefix=$INSTALL_DIR --enable-xlib=no
--enable-xlib-render=no --enable-win32=no $MAKE $MAKE
install</p>

<p>Building Glib</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/glib-2.15.4.tar.gz
gunzip -c glib-2.15.4.tar.gz | tar xf - cd glib-2.15.4
./configure --prefix=$INSTALL_DIR $MAKE $MAKE install</p>

<p>Building Pango</p>

<p>cd $BUILD_DIR wget
http://oss.oetiker.ch/rrdtool/pub/libs/pango-1.21.1.tar.bz2
bunzip2 -c pango-1.21.1.tar.bz2 | tar xf - cd pango-1.21.1
./configure --prefix=$INSTALL_DIR --without-x $MAKE $MAKE
install</p>

<p>Building rrdtool (second try) Now all the dependent
libraries are built and you can try again. This time you
tell configure where it should be looking for libraries and
include files. This is done via environment variables.
Depending on the shell you are running, the syntax for
setting environment variables is different.</p>

<p>And finally try building again. We disable the python
and tcl bindings because it seems that a fair number of
people have ill configured python and tcl setups that would
prevent rrdtool from building if they are included in their
current state.</p>

<p>cd $BUILD_DIR/rrdtool-1.3.8 ./configure
--prefix=$INSTALL_DIR --disable-tcl --disable-python $MAKE
clean $MAKE $MAKE install</p>

<p>SOLARIS HINT: if you want to build the Perl module for
the native Perl (the one shipping with Solaris) you will
need the Sun Forte compiler installed on your box or you
have to hand-tune bindings/perl-shared/Makefile while
building!</p>

<p>Now go to $INSTALL_DIR/share/rrdtool/examples/ and run
them to see if your build has been successful.</p>

<p>AUTHOR Tobias Oetiker &lt;tobi@oetiker.ch&gt;</p>

<p>1.3.8 2009-05-19 RRDBUILD(1)</p>
<hr>
</body>
</html>
