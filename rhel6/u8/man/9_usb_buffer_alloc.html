<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:43:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>USB_BUFFER_ALLOC(9) USB Core APIs
USB_BUFFER_ALLOC(9)</p>

<p>NAME usb_buffer_alloc - allocate dma-consistent buffer
for URB_NO_xxx_DMA_MAP</p>

<p>SYNOPSIS void * usb_buffer_alloc(struct usb_device *
dev, size_t size, gfp_t mem_flags, dma_addr_t * dma);</p>

<p>ARGUMENTS dev device the buffer will be used with</p>

<p>size requested buffer size</p>

<p>mem_flags affect whether allocation may block</p>

<p>dma used to return DMA address of buffer</p>

<p>DESCRIPTION Return value is either null (indicating no
buffer could be allocated), or the cpu-space pointer to a
buffer that may be used to perform DMA to the specified
device. Such cpu-space buffers are returned along with the
DMA address (through the pointer provided).</p>

<p>These buffers are used with URB_NO_xxx_DMA_MAP set in
urb-&gt;transfer_flags to avoid behaviors like using DMA
bounce buffers, or thrashing IOMMU hardware during URB
completion/resubmit. The implementation varies between
platforms, depending on details of how DMA will work to this
device. Using these buffers also eliminates cacheline
sharing problems on architectures where CPU caches are not
DMA-coherent. On systems without bus-snooping caches, these
buffers are uncached.</p>

<p>When the buffer is no longer used, free it with
usb_buffer_free.</p>

<p>COPYRIGHT Kernel Hackers Manual 2.6. April 2016
USB_BUFFER_ALLOC(9)</p>
<hr>
</body>
</html>
