<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:20 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ICMP(7) Linux Programmer s Manual ICMP(7)</p>

<p>NAME icmp, IPPROTO_ICMP - Linux IPv4 ICMP kernel
module.</p>

<p>DESCRIPTION This kernel protocol module implements the
Internet Control Message Protocol defined in RFC 792. It is
used to signal error conditions and for diagnosis. The user
doesnt interact directly with this module; instead it
communicates with the other protocols in the kernel and
these pass the ICMP errors to the application layers. The
kernel ICMP module also answers ICMP requests.</p>

<p>A user protocol may receive ICMP packets for all local
sockets by open- ing a raw socket with the protocol
IPPROTO_ICMP. See raw(7) for more information. The types of
ICMP packets passed to the socket can be filtered using the
ICMP_FILTER socket option. ICMP packets are always processed
by the kernel too, even when passed to a user socket.</p>

<p>Linux limits the rate of ICMP error packets to each
destination. ICMP_REDIRECT and ICMP_DEST_UNREACH are also
limited by the destination route of the incoming
packets.</p>

<p>/proc interfaces ICMP supports a set of /proc interfaces
to configure some global IP parameters. The parameters can
be accessed by reading or writing files in the directory
/proc/sys/net/ipv4/. Most of these parameters are rate
limitations for specific ICMP types. Linux 2.2 uses a token
bucket filter to limit ICMPs. The value is the timeout in
jiffies until the token bucket filter is cleared after a
burst. A jiffy is a system dependent unit, usually 10ms on
i386 and about 1ms on alpha and ia64.</p>

<p>icmp_destunreach_rate (Linux 2.2 to 2.4.9) Maximum rate
to send ICMP Destination Unreachable packets. This limits
the rate at which packets are sent to any individual route
or destination. The limit does not affect sending of
ICMP_FRAG_NEEDED packets needed for path MTU discovery.</p>

<p>icmp_echo_ignore_all (since Linux 2.2) If this value is
non-zero, Linux will ignore all ICMP_ECHO requests.</p>

<p>icmp_echo_ignore_broadcasts (since Linux 2.2) If this
value is non-zero, Linux will ignore all ICMP_ECHO pack- ets
sent to broadcast addresses.</p>

<p>icmp_echoreply_rate (Linux 2.2 to 2.4.9) Maximum rate
for sending ICMP_ECHOREPLY packets in response to
ICMP_ECHOREQUEST packets.</p>

<p>icmp_errors_use_inbound_ifaddr (Boolean; default:
disabled; since Linux 2.6.12) If disabled, ICMP error
messages are sent with the primary address of the exiting
interface.</p>

<p>If enabled, the message will be sent with the primary
address of the interface that received the packet that
caused the ICMP error. This is the behavior that many
network administrators will expect from a router. And it can
make debugging compli- cated network layouts much
easier.</p>

<p>Note that if no primary address exists for the interface
selected, then the primary address of the first non-loopback
interface that has one will be used regardless of this
setting.</p>

<p>icmp_ignore_bogus_error_responses (Boolean; default:
disabled; since Linux 2.2) Some routers violate RFC1122 by
sending bogus responses to broadcast frames. Such violations
are normally logged via a kernel warning. If this parameter
is enabled, the kernel will not give such warnings, which
will avoid log file clutter.</p>

<p>icmp_paramprob_rate (Linux 2.2 to 2.4.9) Maximum rate
for sending ICMP_PARAMETERPROB packets. These packets are
sent when a packet arrives with an invalid IP header.</p>

<p>icmp_ratelimit (integer; default: 1000; since Linux
2.4.10) Limit the maximum rates for sending ICMP packets
whose type matches icmp_ratemask (see below) to specific
targets. 0 to disable any limiting, otherwise the minimum
space between responses in milliseconds.</p>

<p>icmp_ratemask (integer; default: see below; since Linux
2.4.10) Mask made of ICMP types for which rates are being
limited.</p>

<p>Significant bits: IHGFEDCBA9876543210 Default mask:
0000001100000011000 (0x1818)</p>

<p>Bit definitions (see the kernel source file
include/linux/icmp.h):</p>

<p>0 Echo Reply 3 Destination Unreachable * 4 Source Quench
* 5 Redirect 8 Echo Request B Time Exceeded * C Parameter
Problem * D Timestamp Request E Timestamp Reply F Info
Request G Info Reply H Address Mask Request I Address Mask
Reply</p>

<p>The bits marked with an asterisk are rate limited by
default (see the default mask above).</p>

<p>icmp_timeexceed_rate (Linux 2.2 to 2.4.9) Maximum rate
for sending ICMP_TIME_EXCEEDED packets. These packets are
sent to prevent loops when a packet has crossed too many
hops.</p>

<p>VERSIONS Support for the ICMP_ADDRESS request was
removed in 2.2.</p>

<p>Support for ICMP_SOURCE_QUENCH was removed in Linux
2.2.</p>

<p>NOTES As many other implementations dont support
IPPROTO_ICMP raw sockets, this feature should not be relied
on in portable programs.</p>

<p>ICMP_REDIRECT packets are not sent when Linux is not
acting as a router. They are also only accepted from the old
gateway defined in the routing table and the redirect routes
are expired after some time.</p>

<p>The 64-bit timestamp returned by ICMP_TIMESTAMP is in
milliseconds since January 1, 1970.</p>

<p>Linux ICMP internally uses a raw socket to send ICMPs.
This raw socket may appear in netstat(8) output with a zero
inode.</p>

<p>SEE ALSO ip(7)</p>

<p>RFC 792 for a description of the ICMP protocol.</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-11-24 ICMP(7)</p>
<hr>
</body>
</html>
