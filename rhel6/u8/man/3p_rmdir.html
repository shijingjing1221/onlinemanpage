<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:31:57 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RMDIR(3P) POSIX Programmer s Manual RMDIR(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME rmdir - remove a directory</p>

<p>SYNOPSIS #include &lt;unistd.h&gt;</p>

<p>int rmdir(const char *path);</p>

<p>DESCRIPTION The rmdir() function shall remove a
directory whose name is given by path. The directory shall
be removed only if it is an empty directory.</p>

<p>If the directory is the root directory or the current
working directory of any process, it is unspecified whether
the function succeeds, or whether it shall fail and set
errno to [EBUSY].</p>

<p>If path names a symbolic link, then rmdir() shall fail
and set errno to [ENOTDIR].</p>

<p>If the path argument refers to a path whose final
component is either dot or dot-dot, rmdir() shall fail.</p>

<p>If the directorys link count becomes 0 and no process
has the direc- tory open, the space occupied by the
directory shall be freed and the directory shall no longer
be accessible. If one or more processes have the directory
open when the last link is removed, the dot and dot-dot
entries, if present, shall be removed before rmdir() returns
and no new entries may be created in the directory, but the
directory shall not be removed until all references to the
directory are closed.</p>

<p>If the directory is not an empty directory, rmdir()
shall fail and set errno to [EEXIST] or [ENOTEMPTY].</p>

<p>Upon successful completion, the rmdir() function shall
mark for update the st_ctime and st_mtime fields of the
parent directory.</p>

<p>RETURN VALUE Upon successful completion, the function
rmdir() shall return 0. Other- wise, -1 shall be returned,
and errno set to indicate the error. If -1 is returned, the
named directory shall not be changed.</p>

<p>ERRORS The rmdir() function shall fail if:</p>

<p>EACCES Search permission is denied on a component of the
path prefix, or write permission is denied on the parent
directory of the directory to be removed.</p>

<p>EBUSY The directory to be removed is currently in use by
the system or some process and the implementation considers
this to be an error.</p>

<p>EEXIST or ENOTEMPTY The path argument names a directory
that is not an empty direc- tory, or there are hard links to
the directory other than dot or a single entry in
dot-dot.</p>

<p>EINVAL The path argument contains a last component that
is dot.</p>

<p>EIO A physical I/O error has occurred.</p>

<p>ELOOP A loop exists in symbolic links encountered during
resolution of the path argument.</p>

<p>ENAMETOOLONG The length of the path argument exceeds
{PATH_MAX} or a pathname component is longer than
{NAME_MAX}.</p>

<p>ENOENT A component of path does not name an existing
file, or the path argument names a nonexistent directory or
points to an empty string.</p>

<p>ENOTDIR A component of path is not a directory.</p>

<p>EPERM or EACCES</p>

<p>The S_ISVTX flag is set on the parent directory of the
directory to be removed and the caller is not the owner of
the directory to be removed, nor is the caller the owner of
the parent direc- tory, nor does the caller have the
appropriate privileges.</p>

<p>EROFS The directory entry to be removed resides on a
read-only file system.</p>

<p>The rmdir() function may fail if:</p>

<p>ELOOP More than {SYMLOOP_MAX} symbolic links were
encountered during resolution of the path argument.</p>

<p>ENAMETOOLONG As a result of encountering a symbolic link
in resolution of the path argument, the length of the
substituted pathname string exceeded {PATH_MAX}.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Removing a Directory The following example
shows how to remove a directory named /home/cnd/mod1.</p>

<p>#include &lt;unistd.h&gt;</p>

<p>int status; ... status =
rmdir(&quot;/home/cnd/mod1&quot;);</p>

<p>APPLICATION USAGE None.</p>

<p>RATIONALE The rmdir() and rename() functions originated
in 4.2 BSD, and they used [ENOTEMPTY] for the condition when
the directory to be removed does not exist or new already
exists. When the 1984 /usr/group standard was pub- lished,
it contained [EEXIST] instead. When these functions were
adopted into System V, the 1984 /usr/group standard was used
as a reference. Therefore, several existing applications and
implementations support/use both forms, and no agreement
could be reached on either value. All implementations are
required to supply both [EEXIST] and [ENOTEMPTY] in
&lt;errno.h&gt; with distinct values, so that applications
can use both values in C-language case statements.</p>

<p>The meaning of deleting pathname /dot is unclear,
because the name of the file (directory) in the parent
directory to be removed is not clear, particularly in the
presence of multiple links to a directory.</p>

<p>The POSIX.1-1990 standard was silent with regard to the
behavior of rmdir() when there are multiple hard links to
the directory being removed. The requirement to set errno to
[EEXIST] or [ENOTEMPTY] clari- fies the behavior in this
case.</p>

<p>If the process current working directory is being
removed, that should be an allowed error.</p>

<p>Virtually all existing implementations detect
[ENOTEMPTY] or the case of dot-dot. The text in Error
Numbers about returning any one of the possible errors
permits that behavior to continue. The [ELOOP] error may be
returned if more than {SYMLOOP_MAX} symbolic links are
encoun- tered during resolution of the path argument.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO Error Numbers, mkdir(), remove(), unlink(), the
Base Definitions volume of IEEE Std 1003.1-2001,
&lt;unistd.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 RMDIR(3P)</p>
<hr>
</body>
</html>
