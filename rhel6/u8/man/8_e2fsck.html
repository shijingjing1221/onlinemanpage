<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:10:49 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>E2FSCK(8) E2FSCK(8)</p>

<p>NAME e2fsck - check a Linux ext2/ext3/ext4 file
system</p>

<p>SYNOPSIS e2fsck [ -pacnyrdfkvtDFV ] [ -b superblock ] [
-B blocksize ] [ -l|-L bad_blocks_file ] [ -C fd ] [ -j
external-journal ] [ -E extended_options ] device</p>

<p>DESCRIPTION e2fsck is used to check the ext2/ext3/ext4
family of file systems. For ext3 and ext4 filesystems that
use a journal, if the system has been shut down uncleanly
without any errors, normally, after replaying the committed
transactions in the journal, the file system should be
marked as clean. Hence, for filesystems that use
journalling, e2fsck will normally replay the journal and
exit, unless its superblock indi- cates that further
checking is required.</p>

<p>device is the device file where the filesystem is stored
(e.g. /dev/hdc1).</p>

<p>Note that in general it is not safe to run e2fsck on
mounted filesys- tems. The only exception is if the -n
option is specified, and -c, -l, or -L options are not
specified. However, even if it is safe to do so, the results
printed by e2fsck are not valid if the filesystem is
mounted. If e2fsck asks whether or not you should check a
filesystem which is mounted, the only correct answer is no .
Only experts who really know what they are doing should
consider answering this question in any other way.</p>

<p>OPTIONS -a This option does the same thing as the -p
option. It is pro- vided for backwards compatibility only;
it is suggested that people use -p option whenever
possible.</p>

<p>-b superblock Instead of using the normal superblock,
use an alternative superblock specified by superblock. This
option is normally used when the primary superblock has been
corrupted. The loca- tion of the backup superblock is
dependent on the filesystems blocksize. For filesystems with
1k blocksizes, a backup superblock can be found at block
8193; for filesystems with 2k blocksizes, at block 16384;
and for 4k blocksizes, at block 32768.</p>

<p>Additional backup superblocks can be determined by using
the mke2fs program using the -n option to print out where
the superblocks were created. The -b option to mke2fs, which
spec- ifies blocksize of the filesystem must be specified in
order for the superblock locations that are printed out to
be accurate.</p>

<p>If an alternative superblock is specified and the
filesystem is not opened read-only, e2fsck will make sure
that the primary superblock is updated appropriately upon
completion of the filesystem check.</p>

<p>-B blocksize Normally, e2fsck will search for the
superblock at various dif- ferent block sizes in an attempt
to find the appropriate block size. This search can be
fooled in some cases. This option forces e2fsck to only try
locating the superblock at a particu- lar blocksize. If the
superblock is not found, e2fsck will ter- minate with a
fatal error.</p>

<p>-c This option causes e2fsck to use badblocks(8) program
to do a read-only scan of the device in order to find any
bad blocks. If any bad blocks are found, they are added to
the bad block inode to prevent them from being allocated to
a file or direc- tory. If this option is specified twice,
then the bad block scan will be done using a non-destructive
read-write test.</p>

<p>-C fd This option causes e2fsck to write completion
information to the specified file descriptor so that the
progress of the filesystem check can be monitored. This
option is typically used by pro- grams which are running
e2fsck. If the file descriptor number is negative, then
absolute value of the file descriptor will be used, and the
progress information will be suppressed initially. It can
later be enabled by sending the e2fsck process a SIGUSR1
signal. If the file descriptor specified is 0, e2fsck will
print a completion bar as it goes about its business. This
requires that e2fsck is running on a video console or
terminal.</p>

<p>-d Print debugging output (useless unless you are
debugging e2fsck).</p>

<p>-D Optimize directories in filesystem. This option
causes e2fsck to try to optimize all directories, either by
reindexing them if the filesystem supports directory
indexing, or by sorting and compressing directories for
smaller directories, or for filesys- tems using traditional
linear directories.</p>

<p>Even without the -D option, e2fsck may sometimes
optimize a few directories --- for example, if directory
indexing is enabled and a directory is not indexed and would
benefit from being indexed, or if the index structures are
corrupted and need to be rebuilt. The -D option forces all
directories in the filesystem to be optimized. This can
sometimes make them a little smaller and slightly faster to
search, but in practice, you should rarely need to use this
option.</p>

<p>The -D option will detect directory entries with
duplicate names in a single directory, which e2fsck normally
does not enforce for performance reasons.</p>

<p>-E extended_options Set e2fsck extended options.
Extended options are comma sepa- rated, and may take an
argument using the equals (=) sign. The following options
are supported:</p>

<p>ea_ver=extended_attribute_version Set the version of the
extended attribute blocks which e2fsck will require while
checking the filesystem. The version number may be 1 or 2.
The default extended attribute version format is 2.</p>

<p>fragcheck During pass 1, print a detailed report of any
dis- contiguous blocks for files in the filesystem.</p>

<p>discard Attempt to discard free blocks and unused inode
blocks after the full filesystem check (discarding blocks is
useful on solid state devices and sparse / thin-provisioned
storage). Note that discard is done in pass 5 AFTER the
filesystem has been fully checked and only if it does not
contain recognizable errors. However there might be cases
where e2fsck does not fully recognise a problem and hence in
this case this option may prevent you from further manual
data recovery.</p>

<p>nodiscard Do not attempt to discard free blocks and
unused inode blocks. This option is exacly the opposite of
discard option. This is set as default.</p>

<p>-f Force checking even if the file system seems
clean.</p>

<p>-F Flush the filesystem devices buffer caches before
beginning. Only really useful for doing e2fsck time
trials.</p>

<p>-j external-journal Set the pathname where the
external-journal for this filesystem can be found.</p>

<p>-k When combined with the -c option, any existing bad
blocks in the bad blocks list are preserved, and any new bad
blocks found by running badblocks(8) will be added to the
existing bad blocks list.</p>

<p>-l filename Add the block numbers listed in the file
specified by filename to the list of bad blocks. The format
of this file is the same as the one generated by the
badblocks(8) program. Note that the block numbers are based
on the blocksize of the filesystem. Hence, badblocks(8) must
be given the blocksize of the filesys- tem in order to
obtain correct results. As a result, it is much simpler and
safer to use the -c option to e2fsck, since it will assure
that the correct parameters are passed to the badblocks
program.</p>

<p>-L filename Set the bad blocks list to be the list of
blocks specified by filename. (This option is the same as
the -l option, except the bad blocks list is cleared before
the blocks listed in the file are added to the bad blocks
list.)</p>

<p>-n Open the filesystem read-only, and assume an answer
of no to all questions. Allows e2fsck to be used
non-interactively. This option may not be specified at the
same time as the -p or -y options.</p>

<p>-p Automatically repair (&quot;preen&quot;) the file
system. This option will cause e2fsck to automatically fix
any filesystem problems that can be safely fixed without
human intervention. If e2fsck discovers a problem which may
require the system administrator to take additional
corrective action, e2fsck will print a description of the
problem and then exit with the value 4 logi- cally ored into
the exit code. (See the EXIT CODE section.) This option is
normally used by the systems boot scripts. It may not be
specified at the same time as the -n or -y options.</p>

<p>-r This option does nothing at all; it is provided only
for back- wards compatibility.</p>

<p>-t Print timing statistics for e2fsck. If this option is
used twice, additional timing statistics are printed on a
pass by pass basis.</p>

<p>-v Verbose mode.</p>

<p>-V Print version information and exit.</p>

<p>-y Assume an answer of yes to all questions; allows
e2fsck to be used non-interactively. This option may not be
specified at the same time as the -n or -p options.</p>

<p>EXIT CODE The exit code returned by e2fsck is the sum of
the following condi- tions: 0 - No errors 1 - File system
errors corrected 2 - File system errors corrected, system
should be rebooted 4 - File system errors left uncorrected 8
- Operational error 16 - Usage or syntax error 32 - E2fsck
canceled by user request 128 - Shared library error</p>

<p>SIGNALS The following signals have the following effect
when sent to e2fsck.</p>

<p>SIGUSR1 This signal causes e2fsck to start displaying a
completion bar or emitting progress information. (See
discussion of the -C option.)</p>

<p>SIGUSR2 This signal causes e2fsck to stop displaying a
completion bar or emitting progress information.</p>

<p>REPORTING BUGS Almost any piece of software will have
bugs. If you manage to find a filesystem which causes e2fsck
to crash, or which e2fsck is unable to repair, please report
it to the author.</p>

<p>Please include as much information as possible in your
bug report. Ideally, include a complete transcript of the
e2fsck run, so I can see exactly what error messages are
displayed. (Make sure the messages printed by e2fsck are in
English; if your system has been configured so that e2fsck s
messages have been translated into another language, please
set the the LC_ALL environment variable to C so that the
tran- script of e2fscks output will be useful to me.) If you
have a writable filesystem where the transcript can be
stored, the script(1) program is a handy way to save the
output of e2fsck to a file.</p>

<p>It is also useful to send the output of dumpe2fs(8). If
a specific inode or inodes seems to be giving e2fsck
trouble, try running the debugfs(8) command and send the
output of the stat(1u) command run on the relevant inode(s).
If the inode is a directory, the debugfs dump command will
allow you to extract the contents of the directory inode,
which can sent to me after being first run through
uuencode(1). The most useful data you can send to help
reproduce the bug is a compressed raw image dump of the
filesystem, generated using e2image(8). See the e2image(8)
man page for more details.</p>

<p>Always include the full version string which e2fsck
displays when it is run, so I know which version you are
running.</p>

<p>AUTHOR This version of e2fsck was written by Theodore
Tso &lt;tytso@mit.edu&gt;.</p>

<p>SEE ALSO e2fsck.conf(5), badblocks(8), dumpe2fs(8),
debugfs(8), e2image(8), mke2fs(8), tune2fs(8)</p>

<p>E2fsprogs version 1.41.12 May 2010 E2FSCK(8)</p>
<hr>
</body>
</html>
