<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:18:49 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>HWLOC-DISTRIB(1) hwloc HWLOC-DISTRIB(1)</p>

<p>NAME hwloc-distrib - Build a number of cpu masks
distributed on the system</p>

<p>SYNOPSIS hwloc-distrib [options] &lt;integer&gt;</p>

<p>OPTIONS --single Singlify each output to a single
CPU.</p>

<p>--taskset Show CPU set strings in the format recognized
by the taskset command-line program instead of
hwloc-specific CPU set string format.</p>

<p>-v Verbose messages.</p>

<p>-i &lt;file&gt;, --input &lt;file&gt; Read topology from
XML file &lt;file&gt; (instead of discovering the topology
on the local machine). If &lt;file&gt; is &quot;-&quot;, the
standard input is used. XML support must have been compiled
in to hwloc for this option to be usable.</p>

<p>-i &lt;directory&gt;, --input &lt;directory&gt; Read
topology from the chroot specified by &lt;directory&gt;
(instead of discovering the topology on the local machine).
This option is generally only available on Linux. The chroot
was usually created by gathering another machine topology
with hwloc-gather- topology.</p>

<p>-i &lt;specification&gt;, --input &lt;specification&gt;
Simulate a fake hierarchy (instead of discovering the
topology on the local machine). If &lt;specification&gt; is
&quot;node:2 pu:3&quot;, the topology will contain two NUMA
nodes with 3 processing units in each of them. The
&lt;specification&gt; string must end with a number of
PUs.</p>

<p>--if &lt;format&gt;, --input-format &lt;format&gt;
Enforce the input in the given format, among xml, fsroot and
synthetic.</p>

<p>--ignore &lt;type&gt; Ignore all objects of type
&lt;type&gt; in the topology.</p>

<p>--from &lt;type&gt; Distribute starting from objects of
the given type instead of from the top of the topology
hierarchy, i.e. ignoring the struc- ture given by objects
above.</p>

<p>--top &lt;type&gt; Distribute down to objects of the
given type instead of down to the bottom of the topology
hierarchy, i.e. ignoring the struc- ture given by objects
below. This may be useful if some lati- tude is desired for
the binding, e.g. just bind on sockets and not to precise
cores or caches.</p>

<p>--at &lt;type&gt; Distribute among objects of the given
type. This is equivalent to specifying both --from and --to
at the same time.</p>

<p>--restrict &lt;cpuset&gt; Restrict the topology to the
given cpuset.</p>

<p>--version Report version and exit.</p>

<p>DESCRIPTION hwloc-distrib generates a series of CPU
masks corresponding to a dis- tribution of a given number of
elements over the topology of the machine. The distribution
is done recursively from the top of the hier- archy (or from
the level specified by option --from) down to the bottom of
the hierarchy (or down to the level specified by option
--to, or until only one element remains), splitting the
number of elements at each encountered hierarchy level not
ignored by options --ignore.</p>

<p>This can e.g. be used to distribute a set of processes
hierarchically according to the topology of a machine. These
masks can be used with hwloc-bind(1).</p>

<p>NOTE: It is highly recommended that you read the
hwloc(7) overview page before reading this man page. Most of
the concepts described in hwloc(7) directly apply to the
hwloc-bind utility.</p>

<p>EXAMPLES hwloc-distribs operation is best described
through several examples.</p>

<p>If 4 processes have to be distributed across a machine,
their CPU masks may be obtained with:</p>

<p>$ hwloc-distrib 4 0x0000000f 0x00000f00 0x000000f0
0x0000f000</p>

<p>To distribute only among the second socket, the topology
should be restricted:</p>

<p>$ hwloc-distrib --restrict $(hwloc-calc socket:1) 4
0x00000010 0x00000020 0x00000040 0x00000080</p>

<p>To get a single processor of each CPU masks (prevent
migration in case of binding)</p>

<p>$ hwloc-distrib 4 --single 0x00000001 0x00000100
0x00000010 0x00001000</p>

<p>Each output line may be converted independently with
hwloc-calc:</p>

<p>$ hwloc-distrib 4 --single | hwloc-calc --taskset 0x1
0x100 0x10 0x1000</p>

<p>To convert the output into a list of processors that may
be passed to dplace -c inside a mpirun command line:</p>

<p>$ hwloc-distrib 4 --single | xargs hwloc-calc --pulist
0,8,4,16</p>

<p>RETURN VALUE Upon successful execution, hwloc-distrib
displays one or more CPU mask strings. The return value is
0.</p>

<p>hwloc-distrib will return nonzero if any kind of error
occurs, such as (but not limited to) failure to parse the
command line.</p>

<p>SEE ALSO hwloc(7), hwloc-gather-topology(1)</p>

<p>1.5 Jul 30, 2012 HWLOC-DISTRIB(1)</p>
<hr>
</body>
</html>
