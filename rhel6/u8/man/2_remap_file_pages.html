<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:31:27 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>REMAP_FILE_PAGES(2) Linux Programmer s Manual
REMAP_FILE_PAGES(2)</p>

<p>NAME remap_file_pages - create a non-linear file
mapping</p>

<p>SYNOPSIS #define _GNU_SOURCE #include
&lt;sys/mman.h&gt;</p>

<p>int remap_file_pages(void *addr, size_t size, int prot,
ssize_t pgoff, int flags);</p>

<p>DESCRIPTION The remap_file_pages() system call is used
to create a non-linear map- ping, that is, a mapping in
which the pages of the file are mapped into a non-sequential
order in memory. The advantage of using remap_file_pages()
over using repeated calls to mmap(2) is that the former
approach does not require the kernel to create additional
VMA (Virtual Memory Area) data structures.</p>

<p>To create a non-linear mapping we perform the following
steps:</p>

<p>1. Use mmap(2) to create a mapping (which is initially
linear). This mapping must be created with the MAP_SHARED
flag.</p>

<p>2. Use one or more calls to remap_file_pages() to
rearrange the corre- spondence between the pages of the
mapping and the pages of the file. It is possible to map the
same page of a file into multiple locations within the
mapped region.</p>

<p>The pgoff and size arguments specify the region of the
file that is to be relocated within the mapping: pgoff is a
file offset in units of the system page size; size is the
length of the region in bytes.</p>

<p>The addr argument serves two purposes. First, it
identifies the map- ping whose pages we want to rearrange.
Thus, addr must be an address that falls within a region
previously mapped by a call to mmap(2). Second, addr
specifies the address at which the file pages identified by
pgoff and size will be placed.</p>

<p>The values specified in addr and size should be
multiples of the system page size. If they are not, then the
kernel rounds both values down to the nearest multiple of
the page size.</p>

<p>The prot argument must be specified as 0.</p>

<p>The flags argument has the same meaning as for mmap(2),
but all flags other than MAP_NONBLOCK are ignored.</p>

<p>RETURN VALUE On success, remap_file_pages() returns 0.
On error, -1 is returned, and errno is set
appropriately.</p>

<p>ERRORS EINVAL addr does not refer to a valid mapping
created with the MAP_SHARED flag.</p>

<p>EINVAL addr, size, prot, or pgoff is invalid.</p>

<p>VERSIONS The remap_file_pages() system call appeared in
Linux 2.5.46; glibc sup- port was added in version
2.3.3.</p>

<p>CONFORMING TO The remap_file_pages() system call is
Linux-specific.</p>

<p>SEE ALSO getpagesize(2), mmap(2), mmap2(2), mprotect(2),
mremap(2), msync(2), feature_test_macros(7)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-04-22 REMAP_FILE_PAGES(2)</p>
<hr>
</body>
</html>
