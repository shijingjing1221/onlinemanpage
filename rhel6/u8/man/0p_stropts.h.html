<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:36:26 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>&lt;stropts.h&gt;(0P) POSIX Programmer s Manual
&lt;stropts.h&gt;(0P)</p>

<p>NAME stropts.h - STREAMS interface (STREAMS)</p>

<p>SYNOPSIS #include &lt;stropts.h&gt;</p>

<p>DESCRIPTION The &lt;stropts.h&gt; header shall define
the bandinfo structure that includes at least the following
members:</p>

<p>unsigned char bi_pri Priority band. int bi_flag Flushing
type.</p>

<p>The &lt;stropts.h&gt; header shall define the strpeek
structure that includes at least the following members:</p>

<p>struct strbuf ctlbuf The control portion of the message.
struct strbuf databuf The data portion of the message.
t_uscalar_t flags RS_HIPRI or 0.</p>

<p>The &lt;stropts.h&gt; header shall define the strbuf
structure that includes at least the following members:</p>

<p>int maxlen Maximum buffer length. int len Length of
data. char *buf Pointer to buffer.</p>

<p>The &lt;stropts.h&gt; header shall define the
strfdinsert structure that includes at least the following
members:</p>

<p>struct strbuf ctlbuf The control portion of the message.
struct strbuf databuf The data portion of the message.
t_uscalar_t flags RS_HIPRI or 0. int fildes File descriptor
of the other STREAM. int offset Relative location of the
stored value.</p>

<p>The &lt;stropts.h&gt; header shall define the strioctl
structure that includes at least the following members:</p>

<p>int ic_cmd ioctl() command. int ic_timout Timeout for
response. int ic_len Length of data. char *ic_dp Pointer to
buffer.</p>

<p>The &lt;stropts.h&gt; header shall define the strrecvfd
structure that includes at least the following members:</p>

<p>int fda Received file descriptor. uid_t uid UID of
sender. gid_t gid GID of sender.</p>

<p>The uid_t and gid_t types shall be defined through
typedef as described in &lt;sys/types.h&gt; .</p>

<p>The &lt;stropts.h&gt; header shall define the t_scalar_t
and t_uscalar_t types, respectively, as signed and unsigned
opaque types of equal length of at least 32 bits.</p>

<p>The &lt;stropts.h&gt; header shall define the str_list
structure that includes at least the following members:</p>

<p>int sl_nmods Number of STREAMS module names. struct
str_mlist *sl_modlist STREAMS module names.</p>

<p>The &lt;stropts.h&gt; header shall define the str_mlist
structure that includes at least the following member:</p>

<p>char l_name[FMNAMESZ+1] A STREAMS module name.</p>

<p>At least the following macros shall be defined for use
as the request argument to ioctl():</p>

<p>I_PUSH Push a STREAMS module.</p>

<p>I_POP Pop a STREAMS module.</p>

<p>I_LOOK Get the top module name.</p>

<p>I_FLUSH Flush a STREAM.</p>

<p>I_FLUSHBAND Flush one band of a STREAM.</p>

<p>I_SETSIG Ask for notification signals.</p>

<p>I_GETSIG Retrieve current notification signals.</p>

<p>I_FIND Look for a STREAMS module.</p>

<p>I_PEEK Peek at the top message on a STREAM.</p>

<p>I_SRDOPT Set the read mode.</p>

<p>I_GRDOPT Get the read mode.</p>

<p>I_NREAD Size the top message.</p>

<p>I_FDINSERT Send implementation-defined information about
another STREAM.</p>

<p>I_STR Send a STREAMS ioctl().</p>

<p>I_SWROPT Set the write mode.</p>

<p>I_GWROPT Get the write mode.</p>

<p>I_SENDFD Pass a file descriptor through a STREAMS
pipe.</p>

<p>I_RECVFD Get a file descriptor sent via I_SENDFD.</p>

<p>I_LIST Get all the module names on a STREAM.</p>

<p>I_ATMARK Is the top message &quot;marked?</p>

<p>I_CKBAND See if any messages exist in a band.</p>

<p>I_GETBAND Get the band of the top message on a
STREAM.</p>

<p>I_CANPUT Is a band writable?</p>

<p>I_SETCLTIME Set close time delay.</p>

<p>I_GETCLTIME Get close time delay.</p>

<p>I_LINK Connect two STREAMs.</p>

<p>I_UNLINK Disconnect two STREAMs.</p>

<p>I_PLINK Persistently connect two STREAMs.</p>

<p>I_PUNLINK Dismantle a persistent STREAMS link.</p>

<p>At least the following macros shall be defined for use
with I_LOOK:</p>

<p>FMNAMESZ The minimum size in bytes of the buffer
referred to by the arg argument.</p>

<p>At least the following macros shall be defined for use
with I_FLUSH:</p>

<p>FLUSHR Flush read queues.</p>

<p>FLUSHW Flush write queues.</p>

<p>FLUSHRW Flush read and write queues.</p>

<p>At least the following macros shall be defined for use
with I_SETSIG:</p>

<p>S_RDNORM A normal (priority band set to 0) message has
arrived at the head of a STREAM head read queue.</p>

<p>S_RDBAND A message with a non-zero priority band has
arrived at the head of a STREAM head read queue.</p>

<p>S_INPUT A message, other than a high-priority message,
has arrived at the head of a STREAM head read queue.</p>

<p>S_HIPRI A high-priority message is present on a STREAM
head read queue.</p>

<p>S_OUTPUT The write queue for normal data (priority band
0) just below the STREAM head is no longer full. This
notifies the process that there is room on the queue for
sending (or writing) normal data downstream.</p>

<p>S_WRNORM Equivalent to S_OUTPUT.</p>

<p>S_WRBAND The write queue for a non-zero priority band
just below the STREAM head is no longer full.</p>

<p>S_MSG A STREAMS signal message that contains the SIGPOLL
signal reaches the front of the STREAM head read queue.</p>

<p>S_ERROR Notification of an error condition reaches the
STREAM head.</p>

<p>S_HANGUP Notification of a hangup reaches the STREAM
head.</p>

<p>S_BANDURG When used in conjunction with S_RDBAND, SIGURG
is generated instead of SIGPOLL when a priority message
reaches the front of the STREAM head read queue.</p>

<p>At least the following macros shall be defined for use
with I_PEEK:</p>

<p>RS_HIPRI Only look for high-priority messages.</p>

<p>At least the following macros shall be defined for use
with I_SRDOPT:</p>

<p>RNORM Byte-STREAM mode, the default.</p>

<p>RMSGD Message-discard mode.</p>

<p>RMSGN Message-non-discard mode.</p>

<p>RPROTNORM Fail read() with [EBADMSG] if a message
containing a control part is at the front of the STREAM head
read queue.</p>

<p>RPROTDAT Deliver the control part of a message as data
when a process issues a read().</p>

<p>RPROTDIS Discard the control part of a message,
delivering any data part, when a process issues a
read().</p>

<p>At least the following macros shall be defined for use
with I_SWOPT:</p>

<p>SNDZERO Send a zero-length message downstream when a
write() of 0 bytes occurs.</p>

<p>At least the following macros shall be defined for use
with I_ATMARK:</p>

<p>ANYMARK Check if the message is marked.</p>

<p>LASTMARK Check if the message is the last one marked on
the queue.</p>

<p>At least the following macros shall be defined for use
with I_UNLINK:</p>

<p>MUXID_ALL Unlink all STREAMs linked to the STREAM
associated with fildes.</p>

<p>The following macros shall be defined for getmsg(),
getpmsg(), putmsg(), and putpmsg():</p>

<p>MSG_ANY Receive any message.</p>

<p>MSG_BAND Receive message from specified band.</p>

<p>MSG_HIPRI Send/receive high-priority message.</p>

<p>MORECTL More control information is left in message.</p>

<p>MOREDATA More data is left in message.</p>

<p>The &lt;stropts.h&gt; header may make visible all of the
symbols from &lt;unistd.h&gt;.</p>

<p>The following shall be declared as functions and may
also be defined as macros. Function prototypes shall be
provided.</p>

<p>int isastream(int); int getmsg(int, struct strbuf
*restrict, struct strbuf *restrict, int *restrict); int
getpmsg(int, struct strbuf *restrict, struct strbuf
*restrict, int *restrict, int *restrict); int ioctl(int,
int, ... ); int putmsg(int, const struct strbuf *, const
struct strbuf *, int); int putpmsg(int, const struct strbuf
*, const struct strbuf *, int, int); int fattach(int, const
char *); int fdetach(const char *);</p>

<p>The following sections are informative.</p>

<p>APPLICATION USAGE None.</p>

<p>RATIONALE None.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO &lt;sys/types.h&gt;, &lt;unistd.h&gt;, the
System Interfaces volume of IEEE Std 1003.1-2001, close(),
fcntl(), getmsg(), ioctl(), open(), pipe(), read(), poll(),
putmsg(), signal(), write()</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 &lt;stropts.h&gt;(0P)</p>
<hr>
</body>
</html>
