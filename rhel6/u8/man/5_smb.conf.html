<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:34:59 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SMB.CONF(5) File Formats and Conventions SMB.CONF(5)</p>

<p>NAME smb.conf - The configuration file for the Samba
suite</p>

<p>SYNOPSIS The smb.conf file is a configuration file for
the Samba suite. smb.conf contains runtime configuration
information for the Samba programs. The smb.conf file is
designed to be configured and administered by the swat(8)
program. The complete description of the file format and
possible parameters held within are here for reference
purposes.</p>

<p>FILE FORMAT The file consists of sections and
parameters. A section begins with the name of the section in
square brackets and continues until the next section begins.
Sections contain parameters of the form:</p>

<p>name = value</p>

<p>The file is line-based - that is, each
newline-terminated line represents either a comment, a
section name or a parameter.</p>

<p>Section and parameter names are not case sensitive.</p>

<p>Only the first equals sign in a parameter is
significant. Whitespace before or after the first equals
sign is discarded. Leading, trailing and internal whitespace
in section and parameter names is irrelevant. Leading and
trailing whitespace in a parameter value is discarded.
Internal whitespace within a parameter value is retained
verbatim.</p>

<p>Any line beginning with a semicolon (;) or a hash ( # )
character is ignored, as are lines containing only
whitespace.</p>

<p>Any line ending in a is continued on the next line in
the customary UNIX fashion.</p>

<p>The values following the equals sign in parameters are
all either a string (no quotes needed) or a boolean, which
may be given as yes/no, 1/0 or true/false. Case is not
significant in boolean values, but is preserved in string
values. Some items such as create masks are numeric.</p>

<p>SECTION DESCRIPTIONS Each section in the configuration
file (except for the [global] section) describes a shared
resource (known as a share). The section name is the name of
the shared resource and the parameters within the section
define the shares attributes.</p>

<p>There are three special sections, [global], [homes] and
[printers], which are described under special sections. The
following notes apply to ordinary section descriptions.</p>

<p>A share consists of a directory to which access is being
given plus a description of the access rights which are
granted to the user of the service. Some housekeeping
options are also specifiable.</p>

<p>Sections are either file share services (used by the
client as an extension of their native file systems) or
printable services (used by the client to access print
services on the host running the server).</p>

<p>Sections may be designated guest services, in which case
no password is required to access them. A specified UNIX
guest account is used to define access privileges in this
case.</p>

<p>Sections other than guest services will require a
password to access them. The client provides the username.
As older clients only provide passwords and not usernames,
you may specify a list of usernames to check against the
password using the user = option in the share definition.
For modern clients such as Windows 95/98/ME/NT/2000, this
should not be necessary.</p>

<p>The access rights granted by the server are masked by
the access rights granted to the specified or guest UNIX
user by the host system. The server does not grant more
access than the host system grants.</p>

<p>The following sample section defines a file space share.
The user has write access to the path /home/bar. The share
is accessed via the share name foo:</p>

<p>[foo] path = /home/bar read only = no</p>

<p>The following sample section defines a printable share.
The share is read-only, but printable. That is, the only
write access permitted is via calls to open, write to and
close a spool file. The guest ok parameter means access will
be permitted as the default guest user (specified
elsewhere):</p>

<p>[aprinter] path = /usr/spool/public read only = yes
printable = yes guest ok = yes</p>

<p>SPECIAL SECTIONS The [global] section Parameters in this
section apply to the server as a whole, or are defaults for
sections that do not specifically define certain items. See
the notes under PARAMETERS for more information.</p>

<p>The [homes] section If a section called [homes] is
included in the configuration file, services connecting
clients to their home directories can be created on the fly
by the server.</p>

<p>When the connection request is made, the existing
sections are scanned. If a match is found, it is used. If no
match is found, the requested section name is treated as a
username and looked up in the local password file. If the
name exists and the correct password has been given, a share
is created by cloning the [homes] section.</p>

<p>Some modifications are then made to the newly created
share:</p>

<p>&middot; The share name is changed from homes to the
located username.</p>

<p>&middot; If no path was given, the path is set to the
user&rsquo;s home directory.</p>

<p>If you decide to use a path = line in your [homes]
section, it may be useful to use the %S macro. For
example:</p>

<p>path = /data/pchome/%S</p>

<p>is useful if you have different home directories for
your PCs than for UNIX access.</p>

<p>This is a fast and simple way to give a large number of
clients access to their home directories with a minimum of
fuss.</p>

<p>A similar process occurs if the requested section name
is homes, except that the share name is not changed to that
of the requesting user. This method of using the [homes]
section works well if different users share a client PC.</p>

<p>The [homes] section can specify all the parameters a
normal service section can specify, though some make more
sense than others. The following is a typical and suitable
[homes] section:</p>

<p>[homes] read only = no</p>

<p>An important point is that if guest access is specified
in the [homes] section, all home directories will be visible
to all clients without a password. In the very unlikely
event that this is actually desirable, it is wise to also
specify read only access.</p>

<p>The browseable flag for auto home directories will be
inherited from the global browseable flag, not the [homes]
browseable flag. This is useful as it means setting
browseable = no in the [homes] section will hide the [homes]
share but make any auto home directories visible.</p>

<p>The [printers] section This section works like [homes],
but for printers.</p>

<p>If a [printers] section occurs in the configuration
file, users are able to connect to any printer specified in
the local host&rsquo;s printcap file.</p>

<p>When a connection request is made, the existing sections
are scanned. If a match is found, it is used. If no match is
found, but a [homes] section exists, it is used as described
above. Otherwise, the requested section name is treated as a
printer name and the appropriate printcap file is scanned to
see if the requested section name is a valid printer share
name. If a match is found, a new printer share is created by
cloning the [printers] section.</p>

<p>A few modifications are then made to the newly created
share:</p>

<p>&middot; The share name is set to the located printer
name</p>

<p>&middot; If no printer name was given, the printer name
is set to the located printer name</p>

<p>&middot; If the share does not permit guest access and
no username was given, the username is set to the located
printer name.</p>

<p>The [printers] service MUST be printable - if you
specify otherwise, the server will refuse to load the
configuration file.</p>

<p>Typically the path specified is that of a
world-writeable spool directory with the sticky bit set on
it. A typical [printers] entry looks like this:</p>

<p>[printers] path = /usr/spool/public guest ok = yes
printable = yes</p>

<p>All aliases given for a printer in the printcap file are
legitimate printer names as far as the server is concerned.
If your printing subsystem doesn&rsquo;t work like that, you
will have to set up a pseudo-printcap. This is a file
consisting of one or more lines like this:</p>

<p>alias|alias|alias|alias...</p>

<p>Each alias should be an acceptable printer name for your
printing subsystem. In the [global] section, specify the new
file as your printcap. The server will only recognize names
found in your pseudo-printcap, which of course can contain
whatever aliases you like. The same technique could be used
simply to limit access to a subset of your local
printers.</p>

<p>An alias, by the way, is defined as any component of the
first entry of a printcap record. Records are separated by
newlines, components (if there are more than one) are
separated by vertical bar symbols (|).</p>

<p>Note On SYSV systems which use lpstat to determine what
printers are defined on the system you may be able to use
printcap name = lpstat to automatically obtain a list of
printers. See the printcap name option for more details.</p>

<p>USERSHARES Starting with Samba version 3.0.23 the
capability for non-root users to add, modify, and delete
their own share definitions has been added. This capability
is called usershares and is controlled by a set of
parameters in the [global] section of the smb.conf. The
relevant parameters are :</p>

<p>usershare allow guests Controls if usershares can permit
guest access.</p>

<p>usershare max shares Maximum number of user defined
shares allowed.</p>

<p>usershare owner only If set only directories owned by
the sharing user can be shared.</p>

<p>usershare path Points to the directory containing the
user defined share definitions. The filesystem permissions
on this directory control who can create user defined
shares.</p>

<p>usershare prefix allow list Comma-separated list of
absolute pathnames restricting what directories can be
shared. Only directories below the pathnames in this list
are permitted.</p>

<p>usershare prefix deny list Comma-separated list of
absolute pathnames restricting what directories can be
shared. Directories below the pathnames in this list are
prohibited.</p>

<p>usershare template share Names a pre-existing share used
as a template for creating new usershares. All other share
parameters not specified in the user defined share
definition are copied from this named share.</p>

<p>To allow members of the UNIX group foo to create user
defined shares, create the directory to contain the share
definitions as follows:</p>

<p>Become root:</p>

<p>mkdir /usr/local/samba/lib/usershares chgrp foo
/usr/local/samba/lib/usershares chmod 1770
/usr/local/samba/lib/usershares</p>

<p>Then add the parameters</p>

<p>usershare path = /usr/local/samba/lib/usershares
usershare max shares = 10 # (or the desired number of
shares)</p>

<p>to the global section of your smb.conf. Members of the
group foo may then manipulate the user defined shares using
the following commands.</p>

<p>net usershare add sharename path [comment] [acl]
[guest_ok=[y|n]] To create or modify (overwrite) a user
defined share.</p>

<p>net usershare delete sharename To delete a user defined
share.</p>

<p>net usershare list wildcard-sharename To list user
defined shares.</p>

<p>net usershare info wildcard-sharename To print
information about user defined shares.</p>

<p>PARAMETERS Parameters define the specific attributes of
sections.</p>

<p>Some parameters are specific to the [global] section
(e.g., security). Some parameters are usable in all sections
(e.g., create mask). All others are permissible only in
normal sections. For the purposes of the following
descriptions the [homes] and [printers] sections will be
considered normal. The letter G in parentheses indicates
that a parameter is specific to the [global] section. The
letter S indicates that a parameter can be specified in a
service specific section. All S parameters can also be
specified in the [global] section - in which case they will
define the default behavior for all services.</p>

<p>Parameters are arranged here in alphabetical order -
this may not create best bedfellows, but at least you can
find them! Where there are synonyms, the preferred synonym
is described, others refer to the preferred synonym.</p>

<p>VARIABLE SUBSTITUTIONS Many of the strings that are
settable in the config file can take substitutions. For
example the option path = /tmp/%u is interpreted as path =
/tmp/john if the user connected with the username john.</p>

<p>These substitutions are mostly noted in the descriptions
below, but there are some general substitutions which apply
whenever they might be relevant. These are:</p>

<p>%U session username (the username that the client
wanted, not necessarily the same as the one they got).</p>

<p>%G primary group name of %U.</p>

<p>%h the Internet hostname that Samba is running on.</p>

<p>%m the NetBIOS name of the client machine (very
useful).</p>

<p>This parameter is not available when Samba listens on
port 445, as clients no longer send this information. If you
use this macro in an include statement on a domain that has
a Samba domain controller be sure to set in the [global]
section smb ports = 139. This will cause Samba to not listen
on port 445 and will permit include functionality to
function as it did with Samba 2.x.</p>

<p>%L the NetBIOS name of the server. This allows you to
change your config based on what the client calls you. Your
server can have a dual personality.</p>

<p>%M the Internet name of the client machine.</p>

<p>%R the selected protocol level after protocol
negotiation. It can be one of CORE, COREPLUS, LANMAN1,
LANMAN2 or NT1.</p>

<p>%d the process id of the current server process.</p>

<p>%a The architecture of the remote machine. It currently
recognizes Samba (Samba), the Linux CIFS file system
(CIFSFS), OS/2, (OS2), Mac OS X (OSX), Windows for
Workgroups (WfWg), Windows 9x/ME (Win95), Windows NT
(WinNT), Windows 2000 (Win2K), Windows XP (WinXP), Windows
XP 64-bit(WinXP64), Windows 2003 including 2003R2 (Win2K3),
and Windows Vista (Vista). Anything else will be known as
UNKNOWN.</p>

<p>%I the IP address of the client machine.</p>

<p>Before 3.6.0 it could contain IPv4 mapped IPv6
addresses, now it only contains IPv4 or IPv6 addresses.</p>

<p>%i the local IP address to which a client connected.</p>

<p>Before 3.6.0 it could contain IPv4 mapped IPv6
addresses, now it only contains IPv4 or IPv6 addresses.</p>

<p>%T the current date and time.</p>

<p>%D name of the domain or workgroup of the current
user.</p>

<p>%w the winbind separator.</p>

<p>%$(envvar) the value of the environment variable
envar.</p>

<p>The following substitutes apply only to some
configuration options (only those that are used when a
connection has been established):</p>

<p>%S the name of the current service, if any.</p>

<p>%P the root directory of the current service, if
any.</p>

<p>%u username of the current service, if any.</p>

<p>%g primary group name of %u.</p>

<p>%H the home directory of the user given by %u.</p>

<p>%N the name of your NIS home directory server. This is
obtained from your NIS auto.map entry. If you have not
compiled Samba with the --with-automount option, this value
will be the same as %L.</p>

<p>%p the path of the service&rsquo;s home directory,
obtained from your NIS auto.map entry. The NIS auto.map
entry is split up as %N:%p.</p>

<p>There are some quite creative things that can be done
with these substitutions and other smb.conf options.</p>

<p>NAME MANGLING Samba supports name mangling so that DOS
and Windows clients can use files that don&rsquo;t conform
to the 8.3 format. It can also be set to adjust the case of
8.3 format filenames.</p>

<p>There are several options that control the way mangling
is performed, and they are grouped here rather than listed
separately. For the defaults look at the output of the
testparm program.</p>

<p>These options can be set separately for each
service.</p>

<p>The options are:</p>

<p>case sensitive = yes/no/auto controls whether filenames
are case sensitive. If they aren&rsquo;t, Samba must do a
filename search and match on passed names. The default
setting of auto allows clients that support case sensitive
filenames (Linux CIFSVFS and smbclient 3.0.5 and above
currently) to tell the Samba server on a per-packet basis
that they wish to access the file system in a case-sensitive
manner (to support UNIX case sensitive semantics). No
Windows or DOS system supports case-sensitive filename so
setting this option to auto is that same as setting it to no
for them. Default auto.</p>

<p>default case = upper/lower controls what the default
case is for new filenames (ie. files that don&rsquo;t
currently exist in the filesystem). Default lower. IMPORTANT
NOTE: As part of the optimizations for directories
containing large numbers of files, the following special
case applies. If the options case sensitive = yes, preserve
case = No, and short preserve case = No are set, then the
case of all incoming client filenames, not just new
filenames, will be modified. See additional notes below.</p>

<p>preserve case = yes/no controls whether new files (ie.
files that don&rsquo;t currently exist in the filesystem)
are created with the case that the client passes, or if they
are forced to be the default case. Default yes.</p>

<p>short preserve case = yes/no controls if new files (ie.
files that don&rsquo;t currently exist in the filesystem)
which conform to 8.3 syntax, that is all in upper case and
of suitable length, are created upper case, or if they are
forced to be the default case. This option can be used with
preserve case = yes to permit long filenames to retain their
case, while short names are lowercased. Default yes.</p>

<p>By default, Samba 3.0 has the same semantics as a
Windows NT server, in that it is case insensitive but case
preserving. As a special case for directories with large
numbers of files, if the case options are set as follows,
&quot;case sensitive = yes&quot;, &quot;case preserve =
no&quot;, &quot;short preserve case = no&quot; then the
&quot;default case&quot; option will be applied and will
modify all filenames sent from the client when accessing
this share.</p>

<p>NOTE ABOUT USERNAME/PASSWORD VALIDATION There are a
number of ways in which a user can connect to a service. The
server uses the following steps in determining if it will
allow a connection to a specified service. If all the steps
fail, the connection request is rejected. However, if one of
the steps succeeds, the following steps are not checked.</p>

<p>If the service is marked guest only = yes and the server
is running with share-level security (security = share,
steps 1 to 5 are skipped.</p>

<p>1. If the client has passed a username/password pair and
that username/password pair is validated by the UNIX
system&rsquo;s password programs, the connection is made as
that username. This includes the \servervice%username method
of passing a username.</p>

<p>2. If the client has previously registered a username
with the system and now supplies a correct password for that
username, the connection is allowed.</p>

<p>3. The client&rsquo;s NetBIOS name and any previously
used usernames are checked against the supplied password. If
they match, the connection is allowed as the corresponding
user.</p>

<p>4. If the client has previously validated a
username/password pair with the server and the client has
passed the validation token, that username is used.</p>

<p>5. If a user = field is given in the smb.conf file for
the service and the client has supplied a password, and that
password matches (according to the UNIX system&rsquo;s
password checking) with one of the usernames from the user =
field, the connection is made as the username in the user =
line. If one of the usernames in the user = list begins with
a @, that name expands to a list of names in the group of
the same name.</p>

<p>6. If the service is a guest service, a connection is
made as the username given in the guest account = for the
service, irrespective of the supplied password.</p>

<p>REGISTRY-BASED CONFIGURATION Starting with Samba version
3.2.0, the capability to store Samba configuration in the
registry is available. The configuration is stored in the
registry key HKLMSoftwareSambasmbconf. There are two levels
of registry configuration:</p>

<p>1. Share definitions stored in registry are used. This
is triggered by setting the global parameter registry shares
to yes in smb.conf.</p>

<p>The registry shares are loaded not at startup but on
demand at runtime by smbd. Shares defined in smb.conf take
priority over shares of the same name defined in
registry.</p>

<p>2. Global smb.conf options stored in registry are used.
This can be activated in two different ways:</p>

<p>Firstly, a registry only configuration is triggered by
setting config backend = registry in the [global] section of
smb.conf. This resets everything that has been read from
config files to this point and reads the content of the
global configuration section from the registry. This is the
recommended method of using registry based
configuration.</p>

<p>Secondly, a mixed configuration can be activated by a
special new meaning of the parameter include = registry in
the [global] section of smb.conf. This reads the global
options from registry with the same priorities as for an
include of a text file. This may be especially useful in
cases where an initial configuration is needed to access the
registry.</p>

<p>Activation of global registry options automatically
activates registry shares. So in the registry only case,
shares are loaded on demand only.</p>

<p>Note: To make registry-based configurations foolproof at
least to a certain extent, the use of lock directory and
config backend inside the registry configuration has been
disabled: Especially by changing the lock directory inside
the registry configuration, one would create a broken setup
where the daemons do not see the configuration they loaded
once it is active.</p>

<p>The registry configuration can be accessed with tools
like regedit or net (rpc) registry in the key
HKLMSoftwareSambasmbconf. More conveniently, the conf
subcommand of the net(8) utility offers a dedicated
interface to read and write the registry based configuration
locally, i.e. directly accessing the database file,
circumventing the server.</p>

<p>EXPLANATION OF EACH PARAMETER abort shutdown script
(G)</p>

<p>This a full path name to a script called by smbd(8) that
should stop a shutdown procedure issued by the shutdown
script.</p>

<p>If the connected user posseses the
SeRemoteShutdownPrivilege, right, this command will be run
as root.</p>

<p>Default: abort shutdown script = &quot;&quot;</p>

<p>Example: abort shutdown script = /sbin/shutdown -c</p>

<p>access based share enum (S)</p>

<p>If this parameter is yes for a service, then the share
hosted by the service will only be visible to users who have
read or write access to the share during share enumeration
(for example net view \sambaserver). The share ACLs which
allow or deny the access to the share can be modified using
for example the sharesec command or using the appropriate
Windows tools. This has parallels to access based
enumeration, the main difference being that only share
permissions are evaluated, and security descriptors on files
contained on the share are not used in computing enumeration
access rights.</p>

<p>Default: access based share enum = no</p>

<p>acl check permissions (S)</p>

<p>This boolean parameter controls what smbd(8)does on
receiving a protocol request of &quot;open for delete&quot;
from a Windows client. If a Windows client doesn&rsquo;t
have permissions to delete a file then they expect this to
be denied at open time. POSIX systems normally only detect
restrictions on delete by actually attempting to delete the
file or directory. As Windows clients can (and do)
&quot;back out&quot; a delete request by unsetting the
&quot;delete on close&quot; bit Samba cannot delete the file
immediately on &quot;open for delete&quot; request as we
cannot restore such a deleted file. With this parameter set
to true (the default) then smbd checks the file system
permissions directly on &quot;open for delete&quot; and
denies the request without actually deleting the file if the
file system permissions would seem to deny it. This is not
perfect, as it&rsquo;s possible a user could have deleted a
file without Samba being able to check the permissions
correctly, but it is close enough to Windows semantics for
mostly correct behaviour. Samba will correctly check POSIX
ACL semantics in this case.</p>

<p>If this parameter is set to &quot;false&quot; Samba
doesn&rsquo;t check permissions on &quot;open for
delete&quot; and allows the open. If the user doesn&rsquo;t
have permission to delete the file this will only be
discovered at close time, which is too late for the Windows
user tools to display an error message to the user. The
symptom of this is files that appear to have been deleted
&quot;magically&quot; re-appearing on a Windows explorer
refresh. This is an extremely advanced protocol option which
should not need to be changed. This parameter was introduced
in its final form in 3.0.21, an earlier version with
slightly different semantics was introduced in 3.0.20. That
older version is not documented here.</p>

<p>Default: acl check permissions = True</p>

<p>acl compatibility (G)</p>

<p>This parameter specifies what OS ACL semantics should be
compatible with. Possible values are winnt for Windows NT 4,
win2k for Windows 2000 and above and auto. If you specify
auto, the value for this parameter will be based upon the
version of the client. There should be no reason to change
this parameter from the default.</p>

<p>Default: acl compatibility = Auto</p>

<p>Example: acl compatibility = win2k</p>

<p>acl group control (S)</p>

<p>In a POSIX filesystem, only the owner of a file or
directory and the superuser can modify the permissions and
ACLs on a file. If this parameter is set, then Samba
overrides this restriction, and also allows the primary
group owner of a file or directory to modify the permissions
and ACLs on that file.</p>

<p>On a Windows server, groups may be the owner of a file
or directory - thus allowing anyone in that group to modify
the permissions on it. This allows the delegation of
security controls on a point in the filesystem to the group
owner of a directory and anything below it also owned by
that group. This means there are multiple people with
permissions to modify ACLs on a file or directory, easing
managability.</p>

<p>This parameter allows Samba to also permit delegation of
the control over a point in the exported directory hierarchy
in much the same way as Windows. This allows all members of
a UNIX group to control the permissions on a file or
directory they have group ownership on.</p>

<p>This parameter is best used with the inherit owner
option and also on on a share containing directories with
the UNIX setgid bit set on them, which causes new files and
directories created within it to inherit the group ownership
from the containing directory.</p>

<p>This is parameter has been was deprecated in Samba
3.0.23, but re-activated in Samba 3.0.31 and above, as it
now only controls permission changes if the user is in the
owning primary group. It is now no longer equivalent to the
dos filemode option.</p>

<p>Default: acl group control = no</p>

<p>acl map full control (S)</p>

<p>This boolean parameter controls whether smbd(8) maps a
POSIX ACE entry of &quot;rwx&quot; (read/write/execute), the
maximum allowed POSIX permission set, into a Windows ACL of
&quot;FULL CONTROL&quot;. If this parameter is set to true
any POSIX ACE entry of &quot;rwx&quot; will be returned in a
Windows ACL as &quot;FULL CONTROL&quot;, is this parameter
is set to false any POSIX ACE entry of &quot;rwx&quot; will
be returned as the specific Windows ACL bits representing
read, write and execute.</p>

<p>Default: acl map full control = True</p>

<p>add group script (G)</p>

<p>This is the full pathname to a script that will be run
AS ROOT by smbd(8) when a new group is requested. It will
expand any %g to the group name passed. This script is only
useful for installations using the Windows NT domain
administration tools. The script is free to create a group
with an arbitrary name to circumvent unix group name
restrictions. In that case the script must print the numeric
gid of the created group on stdout.</p>

<p>Default: add group script =</p>

<p>Example: add group script = /usr/sbin/groupadd %g</p>

<p>add machine script (G)</p>

<p>This is the full pathname to a script that will be run
by smbd(8) when a machine is added to Samba&rsquo;s domain
and a Unix account matching the machine&rsquo;s name
appended with a &quot;$&quot; does not already exist.</p>

<p>This option is very similar to the add user script, and
likewise uses the %u substitution for the account name. Do
not use the %m substitution.</p>

<p>Default: add machine script =</p>

<p>Example: add machine script = /usr/sbin/adduser -n -g
machines -c Machine -d /var/lib/nobody -s /bin/false %u</p>

<p>add port command (G)</p>

<p>Samba 3.0.23 introduced support for adding printer ports
remotely using the Windows &quot;Add Standard TCP/IP Port
Wizard&quot;. This option defines an external program to be
executed when smbd receives a request to add a new Port to
the system. The script is passed two parameters:</p>

<p>&middot; port name</p>

<p>&middot; device URI</p>

<p>The deviceURI is in the format of
socket://&lt;hostname&gt;[:&lt;portnumber&gt;] or
lpd://&lt;hostname&gt;/&lt;queuename&gt;.</p>

<p>Default: add port command =</p>

<p>Example: add port command =
/etc/samba/scripts/addport.sh</p>

<p>addprinter command (G)</p>

<p>With the introduction of MS-RPC based printing support
for Windows NT/2000 clients in Samba 2.2, The MS Add Printer
Wizard (APW) icon is now also available in the
&quot;Printers...&quot; folder displayed a share listing.
The APW allows for printers to be add remotely to a Samba or
Windows NT/2000 print server.</p>

<p>For a Samba host this means that the printer must be
physically added to the underlying printing system. The
addprinter command defines a script to be run which will
perform the necessary operations for adding the printer to
the print system and to add the appropriate service
definition to the smb.conf file in order that it can be
shared by smbd(8).</p>

<p>The addprinter command is automatically invoked with the
following parameter (in order):</p>

<p>&middot; printer name</p>

<p>&middot; share name</p>

<p>&middot; port name</p>

<p>&middot; driver name</p>

<p>&middot; location</p>

<p>&middot; Windows 9x driver location</p>

<p>All parameters are filled in from the PRINTER_INFO_2
structure sent by the Windows NT/2000 client with one
exception. The &quot;Windows 9x driver location&quot;
parameter is included for backwards compatibility only. The
remaining fields in the structure are generated from answers
to the APW questions.</p>

<p>Once the addprinter command has been executed, smbd will
reparse the smb.conf to determine if the share defined by
the APW exists. If the sharename is still invalid, then smbd
will return an ACCESS_DENIED error to the client.</p>

<p>The addprinter command program can output a single line
of text, which Samba will set as the port the new printer is
connected to. If this line isn&rsquo;t output, Samba
won&rsquo;t reload its printer shares.</p>

<p>Default: addprinter command =</p>

<p>Example: addprinter command = /usr/bin/addprinter</p>

<p>add share command (G)</p>

<p>Samba 2.2.0 introduced the ability to dynamically add
and delete shares via the Windows NT 4.0 Server Manager. The
add share command is used to define an external program or
script which will add a new service definition to
smb.conf.</p>

<p>In order to successfully execute the add share command,
smbd requires that the administrator connects using a root
account (i.e. uid == 0) or has the SeDiskOperatorPrivilege.
Scripts defined in the add share command parameter are
executed as root.</p>

<p>When executed, smbd will automatically invoke the add
share command with five parameters.</p>

<p>&middot; configFile - the location of the global
smb.conf file.</p>

<p>&middot; shareName - the name of the new share.</p>

<p>&middot; pathName - path to an **existing** directory on
disk.</p>

<p>&middot; comment - comment string to associate with the
new share.</p>

<p>&middot; max connections Number of maximum simultaneous
connections to this share.</p>

<p>This parameter is only used to add file shares. To add
printer shares, see the addprinter command.</p>

<p>Default: add share command =</p>

<p>Example: add share command = /usr/local/bin/addshare</p>

<p>add user script (G)</p>

<p>This is the full pathname to a script that will be run
AS ROOT by smbd(8) under special circumstances described
below.</p>

<p>Normally, a Samba server requires that UNIX users are
created for all users accessing files on this server. For
sites that use Windows NT account databases as their primary
user database creating these users and keeping the user list
in sync with the Windows NT PDC is an onerous task. This
option allows smbd to create the required UNIX users ON
DEMAND when a user accesses the Samba server.</p>

<p>In order to use this option, smbd(8) must NOT be set to
security = share and add user script must be set to a full
pathname for a script that will create a UNIX user given one
argument of %u, which expands into the UNIX user name to
create.</p>

<p>When the Windows user attempts to access the Samba
server, at login (session setup in the SMB protocol) time,
smbd(8) contacts the password server and attempts to
authenticate the given user with the given password. If the
authentication succeeds then smbd attempts to find a UNIX
user in the UNIX password database to map the Windows user
into. If this lookup fails, and add user script is set then
smbd will call the specified script AS ROOT, expanding any
%u argument to be the user name to create.</p>

<p>If this script successfully creates the user then smbd
will continue on as though the UNIX user already existed. In
this way, UNIX users are dynamically created to match
existing Windows NT accounts.</p>

<p>See also security, password server, delete user
script.</p>

<p>Default: add user script =</p>

<p>Example: add user script = /usr/local/samba/bin/add_user
%u</p>

<p>add user to group script (G)</p>

<p>Full path to the script that will be called when a user
is added to a group using the Windows NT domain
administration tools. It will be run by smbd(8)AS ROOT. Any
%g will be replaced with the group name and any %u will be
replaced with the user name.</p>

<p>Note that the adduser command used in the example below
does not support the used syntax on all systems.</p>

<p>Default: add user to group script =</p>

<p>Example: add user to group script = /usr/sbin/adduser %u
%g</p>

<p>administrative share (S)</p>

<p>If this parameter is set to yes for a share, then the
share will be an administrative share. The Administrative
Shares are the default network shares created by all Windows
NT-based operating systems. These are shares like C$, D$ or
ADMIN$. The type of these shares is
STYPE_DISKTREE_HIDDEN.</p>

<p>See the section below on security for more information
about this option.</p>

<p>Default: administrative share = no</p>

<p>admin users (S)</p>

<p>This is a list of users who will be granted
administrative privileges on the share. This means that they
will do all file operations as the super-user (root).</p>

<p>You should use this option very carefully, as any user
in this list will be able to do anything they like on the
share, irrespective of file permissions.</p>

<p>This parameter will not work with the security = share
in Samba 3.0. This is by design.</p>

<p>Default: admin users =</p>

<p>Example: admin users = jason</p>

<p>afs share (S)</p>

<p>This parameter controls whether special AFS features are
enabled for this share. If enabled, it assumes that the
directory exported via the path parameter is a local AFS
import. The special AFS features include the attempt to
hand-craft an AFS token if you enabled --with-fake-kaserver
in configure.</p>

<p>Default: afs share = no</p>

<p>afs username map (G)</p>

<p>If you are using the fake kaserver AFS feature, you
might want to hand-craft the usernames you are creating
tokens for. For example this is necessary if you have users
from several domain in your AFS Protection Database. One
possible scheme to code users as DOMAIN+User as it is done
by winbind with the + as a separator.</p>

<p>The mapped user name must contain the cell name to log
into, so without setting this parameter there will be no
token.</p>

<p>Default: afs username map =</p>

<p>Example: afs username map = %u@afs.samba.org</p>

<p>aio read size (S)</p>

<p>If Samba has been built with asynchronous I/O support
and this integer parameter is set to non-zero value, Samba
will read from file asynchronously when size of request is
bigger than this value. Note that it happens only for
non-chained and non-chaining reads and when not using write
cache.</p>

<p>Current implementation of asynchronous I/O in Samba 3.0
does support only up to 10 outstanding asynchronous
requests, read and write combined.</p>

<p>Related command: write cache size</p>

<p>Related command: aio write size</p>

<p>Default: aio read size = 0</p>

<p>Example: aio read size = 16384 # Use asynchronous I/O
for reads bigger than 16KB request size</p>

<p>aio write behind (S)</p>

<p>If Samba has been built with asynchronous I/O support,
Samba will not wait until write requests are finished before
returning the result to the client for files listed in this
parameter. Instead, Samba will immediately return that the
write request has been finished successfully, no matter if
the operation will succeed or not. This might speed up
clients without aio support, but is really dangerous,
because data could be lost and files could be damaged.</p>

<p>The syntax is identical to the veto files parameter.</p>

<p>Default: aio write behind =</p>

<p>Example: aio write behind = /*.tmp/</p>

<p>aio write size (S)</p>

<p>If Samba has been built with asynchronous I/O support
and this integer parameter is set to non-zero value, Samba
will write to file asynchronously when size of request is
bigger than this value. Note that it happens only for
non-chained and non-chaining reads and when not using write
cache.</p>

<p>Current implementation of asynchronous I/O in Samba 3.0
does support only up to 10 outstanding asynchronous
requests, read and write combined.</p>

<p>Related command: write cache size</p>

<p>Related command: aio read size</p>

<p>Default: aio write size = 0</p>

<p>Example: aio write size = 16384 # Use asynchronous I/O
for writes bigger than 16KB request size</p>

<p>algorithmic rid base (G)</p>

<p>This determines how Samba will use its algorithmic
mapping from uids/gid to the RIDs needed to construct NT
Security Identifiers.</p>

<p>Setting this option to a larger value could be useful to
sites transitioning from WinNT and Win2k, as existing user
and group rids would otherwise clash with sytem users
etc.</p>

<p>All UIDs and GIDs must be able to be resolved into SIDs
for the correct operation of ACLs on the server. As such the
algorithmic mapping can&rsquo;t be &rsquo;turned off&rsquo;,
but pushing it &rsquo;out of the way&rsquo; should resolve
the issues. Users and groups can then be assigned
&rsquo;low&rsquo; RIDs in arbitrary-rid supporting
backends.</p>

<p>Default: algorithmic rid base = 1000</p>

<p>Example: algorithmic rid base = 100000</p>

<p>allocation roundup size (S)</p>

<p>This parameter allows an administrator to tune the
allocation size reported to Windows clients. The default
size of 1Mb generally results in improved Windows client
performance. However, rounding the allocation size may cause
difficulties for some applications, e.g. MS Visual Studio.
If the MS Visual Studio compiler starts to crash with an
internal error, set this parameter to zero for this
share.</p>

<p>The integer parameter specifies the roundup size in
bytes.</p>

<p>Default: allocation roundup size = 1048576</p>

<p>Example: allocation roundup size = 0 # (to disable
roundups)</p>

<p>allow dcerpc auth level connect (G)</p>

<p>This option controls whether DCERPC services are allowed
to be used with DCERPC_AUTH_LEVEL_CONNECT, which provides
authentication, but no per message integrity nor privacy
protection.</p>

<p>The behavior can be controlled per interface name (e.g.
lsarpc, netlogon, samr, srvsvc, winreg, wkssvc ...) by using
&rsquo;allow dcerpc auth level connect:interface = no&rsquo;
as option.</p>

<p>This option yields precedence to the implentation
specific restrictions. E.g. the drsuapi and backupkey
protocols require DCERPC_AUTH_LEVEL_PRIVACY. While others
like samr and lsarpc have a hardcoded default of no.</p>

<p>Default: allow dcerpc auth level connect = no</p>

<p>Example: allow dcerpc auth level connect = yes</p>

<p>allow insecure wide links (G)</p>

<p>In normal operation the option wide links which allows
the server to follow symlinks outside of a share path is
automatically disabled when unix extensions are enabled on a
Samba server. This is done for security purposes to prevent
UNIX clients creating symlinks to areas of the server file
system that the administrator does not wish to export.</p>

<p>Setting allow insecure wide links to true disables the
link between these two parameters, removing this protection
and allowing a site to configure the server to follow
symlinks (by setting wide links to &quot;true&quot;) even
when unix extensions is turned on.</p>

<p>If is not recommended to enable this option unless you
fully understand the implications of allowing the server to
follow symbolic links created by UNIX clients. For most
normal Samba configurations this would be considered a
security hole and setting this parameter is not
recommended.</p>

<p>This option was added at the request of sites who had
deliberately set Samba up in this way and needed to continue
supporting this functionality without having to patch the
Samba code.</p>

<p>Default: allow insecure wide links = no</p>

<p>allow trusted domains (G)</p>

<p>This option only takes effect when the security option
is set to server, domain or ads. If it is set to no, then
attempts to connect to a resource from a domain or workgroup
other than the one which smbd is running in will fail, even
if that domain is trusted by the remote server doing the
authentication.</p>

<p>This is useful if you only want your Samba server to
serve resources to users in the domain it is a member of. As
an example, suppose that there are two domains DOMA and
DOMB. DOMB is trusted by DOMA, which contains the Samba
server. Under normal circumstances, a user with an account
in DOMB can then access the resources of a UNIX account with
the same account name on the Samba server even if they do
not have an account in DOMA. This can make implementing a
security boundary difficult.</p>

<p>Default: allow trusted domains = yes</p>

<p>announce as (G)</p>

<p>This specifies what type of server nmbd(8) will announce
itself as, to a network neighborhood browse list. By default
this is set to Windows NT. The valid options are : &quot;NT
Server&quot; (which can also be written as &quot;NT&quot;),
&quot;NT Workstation&quot;, &quot;Win95&quot; or
&quot;WfW&quot; meaning Windows NT Server, Windows NT
Workstation, Windows 95 and Windows for Workgroups
respectively. Do not change this parameter unless you have a
specific need to stop Samba appearing as an NT server as
this may prevent Samba servers from participating as browser
servers correctly.</p>

<p>Default: announce as = NT Server</p>

<p>Example: announce as = Win95</p>

<p>announce version (G)</p>

<p>This specifies the major and minor version numbers that
nmbd will use when announcing itself as a server. The
default is 4.9. Do not change this parameter unless you have
a specific need to set a Samba server to be a downlevel
server.</p>

<p>Default: announce version = 4.9</p>

<p>Example: announce version = 2.0</p>

<p>async smb echo handler (G)</p>

<p>This parameter specifies whether Samba should fork the
async smb echo handler. It can be beneficial if your file
system can block syscalls for a very long time. In some
circumstances, it prolongs the timeout that Windows uses to
determine whether a connection is dead.</p>

<p>Default: async smb echo handler = no</p>

<p>auth methods (G)</p>

<p>This option allows the administrator to chose what
authentication methods smbd will use when authenticating a
user. This option defaults to sensible values based on
security. This should be considered a developer option and
used only in rare circumstances. In the majority (if not
all) of production servers, the default setting should be
adequate.</p>

<p>Each entry in the list attempts to authenticate the user
in turn, until the user authenticates. In practice only one
method will ever actually be able to complete the
authentication.</p>

<p>Possible options include guest (anonymous access), sam
(lookups in local list of accounts based on netbios name or
domain name), winbind (relay authentication requests for
remote users through winbindd), ntdomain (pre-winbindd
method of authentication for remote domain users; deprecated
in favour of winbind method), trustdomain (authenticate
trusted users by contacting the remote DC directly from
smbd; deprecated in favour of winbind method).</p>

<p>Default: auth methods =</p>

<p>Example: auth methods = guest sam winbind</p>

<p>available (S)</p>

<p>This parameter lets you &quot;turn off&quot; a service.
If available = no, then ALL attempts to connect to the
service will fail. Such failures are logged.</p>

<p>Default: available = yes</p>

<p>bind interfaces only (G)</p>

<p>This global parameter allows the Samba admin to limit
what interfaces on a machine will serve SMB requests. It
affects file service smbd(8) and name service nmbd(8) in a
slightly different ways.</p>

<p>For name service it causes nmbd to bind to ports 137 and
138 on the interfaces listed in the interfaces parameter.
nmbd also binds to the &quot;all addresses&quot; interface
(0.0.0.0) on ports 137 and 138 for the purposes of reading
broadcast messages. If this option is not set then nmbd will
service name requests on all of these sockets. If bind
interfaces only is set then nmbd will check the source
address of any packets coming in on the broadcast sockets
and discard any that don&rsquo;t match the broadcast
addresses of the interfaces in the interfaces parameter
list. As unicast packets are received on the other sockets
it allows nmbd to refuse to serve names to machines that
send packets that arrive through any interfaces not listed
in the interfaces list. IP Source address spoofing does
defeat this simple check, however, so it must not be used
seriously as a security feature for nmbd.</p>

<p>For file service it causes smbd(8) to bind only to the
interface list given in the interfaces parameter. This
restricts the networks that smbd will serve, to packets
coming in on those interfaces. Note that you should not use
this parameter for machines that are serving PPP or other
intermittent or non-broadcast network interfaces as it will
not cope with non-permanent interfaces.</p>

<p>If bind interfaces only is set and the network address
127.0.0.1 is not added to the interfaces parameter list
smbpasswd(8) and swat(8) may not work as expected due to the
reasons covered below.</p>

<p>To change a users SMB password, the smbpasswd by default
connects to the localhost - 127.0.0.1 address as an SMB
client to issue the password change request. If bind
interfaces only is set then unless the network address
127.0.0.1 is added to the interfaces parameter list then
smbpasswd will fail to connect in it&rsquo;s default mode.
smbpasswd can be forced to use the primary IP interface of
the local host by using its smbpasswd(8)-r remote machine
parameter, with remote machine set to the IP name of the
primary interface of the local host.</p>

<p>The swat status page tries to connect with smbd and nmbd
at the address 127.0.0.1 to determine if they are running.
Not adding 127.0.0.1 will cause smbd and nmbd to always show
&quot;not running&quot; even if they really are. This can
prevent swat from starting/stopping/restarting smbd and
nmbd.</p>

<p>Default: bind interfaces only = no</p>

<p>blocking locks (S)</p>

<p>This parameter controls the behavior of smbd(8) when
given a request by a client to obtain a byte range lock on a
region of an open file, and the request has a time limit
associated with it.</p>

<p>If this parameter is set and the lock range requested
cannot be immediately satisfied, samba will internally queue
the lock request, and periodically attempt to obtain the
lock until the timeout period expires.</p>

<p>If this parameter is set to no, then samba will behave
as previous versions of Samba would and will fail the lock
request immediately if the lock range cannot be
obtained.</p>

<p>Default: blocking locks = yes</p>

<p>block size (S)</p>

<p>This parameter controls the behavior of smbd(8) when
reporting disk free sizes. By default, this reports a disk
block size of 1024 bytes.</p>

<p>Changing this parameter may have some effect on the
efficiency of client writes, this is not yet confirmed. This
parameter was added to allow advanced administrators to
change it (usually to a higher value) and test the effect it
has on client write performance without re-compiling the
code. As this is an experimental option it may be removed in
a future release.</p>

<p>Changing this option does not change the disk free
reporting size, just the block size unit reported to the
client.</p>

<p>Default: block size = 1024</p>

<p>Example: block size = 4096</p>

<p>browsable</p>

<p>This parameter is a synonym for browseable.</p>

<p>browseable (S)</p>

<p>This controls whether this share is seen in the list of
available shares in a net view and in the browse list.</p>

<p>Default: browseable = yes</p>

<p>browse list (G)</p>

<p>This controls whether smbd(8) will serve a browse list
to a client doing a NetServerEnum call. Normally set to yes.
You should never need to change this.</p>

<p>Default: browse list = yes</p>

<p>cache directory (G)</p>

<p>Usually, most of the TDB files are stored in the lock
directory. Since Samba 3.4.0, it is possible to
differentiate between TDB files with persistent data and TDB
files with non-persistent data using the state directory and
the cache directory options.</p>

<p>This option specifies the directory where TDB files
containing non-persistent data will be stored.</p>

<p>Default: cache directory = ${prefix}/var/locks</p>

<p>Example: cache directory =
/var/run/samba/locks/cache</p>

<p>casesignames</p>

<p>This parameter is a synonym for case sensitive.</p>

<p>case sensitive (S)</p>

<p>See the discussion in the section name mangling.</p>

<p>Default: case sensitive = auto</p>

<p>change notify (S)</p>

<p>This parameter specifies whether Samba should reply to a
client&rsquo;s file change notify requests.</p>

<p>You should never need to change this parameter</p>

<p>Default: change notify = yes</p>

<p>change share command (G)</p>

<p>Samba 2.2.0 introduced the ability to dynamically add
and delete shares via the Windows NT 4.0 Server Manager. The
change share command is used to define an external program
or script which will modify an existing service definition
in smb.conf.</p>

<p>In order to successfully execute the change share
command, smbd requires that the administrator connects using
a root account (i.e. uid == 0) or has the
SeDiskOperatorPrivilege. Scripts defined in the change share
command parameter are executed as root.</p>

<p>When executed, smbd will automatically invoke the change
share command with five parameters.</p>

<p>&middot; configFile - the location of the global
smb.conf file.</p>

<p>&middot; shareName - the name of the new share.</p>

<p>&middot; pathName - path to an **existing** directory on
disk.</p>

<p>&middot; comment - comment string to associate with the
new share.</p>

<p>&middot; max connections Number of maximum simultaneous
connections to this share.</p>

<p>This parameter is only used to modify existing file
share definitions. To modify printer shares, use the
&quot;Printers...&quot; folder as seen when browsing the
Samba host.</p>

<p>Default: change share command =</p>

<p>Example: change share command =
/usr/local/bin/changeshare</p>

<p>check password script (G)</p>

<p>The name of a program that can be used to check password
complexity. The password is sent to the program&rsquo;s
standard input.</p>

<p>The program must return 0 on a good password, or any
other value if the password is bad. In case the password is
considered weak (the program does not return 0) the user
will be notified and the password change will fail.</p>

<p>Note: In the example directory is a sample program
called crackcheck that uses cracklib to check the password
quality.</p>

<p>Default: check password script = Disabled</p>

<p>Example: check password script =
/usr/local/sbin/crackcheck</p>

<p>client ipc signing (G)</p>

<p>This controls whether the client is allowed or required
to use SMB signing for IPC$ connections as DCERPC transport
inside of winbind. Possible values are auto, mandatory and
disabled.</p>

<p>When set to auto, SMB signing is offered, but not
enforced and if set to disabled, SMB signing is not offered
either.</p>

<p>Connections from winbindd to Active Directory Domain
Controllers always enforce signing.</p>

<p>Default: client ipc signing = mandatory</p>

<p>client lanman auth (G)</p>

<p>This parameter determines whether or not smbclient(8)
and other samba client tools will attempt to authenticate
itself to servers using the weaker LANMAN password hash. If
disabled, only server which support NT password hashes (e.g.
Windows NT/2000, Samba, etc... but not Windows 95/98) will
be able to be connected from the Samba client.</p>

<p>The LANMAN encrypted response is easily broken, due to
its case-insensitive nature, and the choice of algorithm.
Clients without Windows 95/98 servers are advised to disable
this option.</p>

<p>Disabling this option will also disable the client
plaintext auth option.</p>

<p>Likewise, if the client ntlmv2 auth parameter is
enabled, then only NTLMv2 logins will be attempted.</p>

<p>Default: client lanman auth = no</p>

<p>client ldap sasl wrapping (G)</p>

<p>The client ldap sasl wrapping defines whether ldap
traffic will be signed or signed and encrypted (sealed).
Possible values are plain, sign and seal.</p>

<p>The values sign and seal are only available if Samba has
been compiled against a modern OpenLDAP version (2.3.x or
higher).</p>

<p>This option is needed in the case of Domain Controllers
enforcing the usage of signed LDAP connections (e.g. Windows
2000 SP3 or higher). LDAP sign and seal can be controlled
with the registry key &quot;HKLMtem on the Windows server
side.</p>

<p>Depending on the used KRB5 library (MIT and older
Heimdal versions) it is possible that the message
&quot;integrity only&quot; is not supported. In this case,
sign is just an alias for seal.</p>

<p>The default value is sign. That implies synchronizing
the time with the KDC in the case of using Kerberos.</p>

<p>Default: client ldap sasl wrapping = sign</p>

<p>client ntlmv2 auth (G)</p>

<p>This parameter determines whether or not smbclient(8)
will attempt to authenticate itself to servers using the
NTLMv2 encrypted password response.</p>

<p>If enabled, only an NTLMv2 and LMv2 response (both much
more secure than earlier versions) will be sent. Older
servers (including NT4 &lt; SP4, Win9x and Samba 2.2) are
not compatible with NTLMv2 when not in an NTLMv2 supporting
domain</p>

<p>Similarly, if enabled, NTLMv1, client lanman auth and
client plaintext auth authentication will be disabled. This
also disables share-level authentication.</p>

<p>If disabled, an NTLM response (and possibly a LANMAN
response) will be sent by the client, depending on the value
of client lanman auth.</p>

<p>Note that Windows Vista and later versions already use
NTLMv2 by default, and some sites (particularly those
following &rsquo;best practice&rsquo; security polices) only
allow NTLMv2 responses, and not the weaker LM or NTLM.</p>

<p>When client use spnego is also set to yes extended
security (SPNEGO) is required in order to use NTLMv2 only
within NTLMSSP. This behavior was introduced with the
patches for CVE-2016-2111.</p>

<p>Default: client ntlmv2 auth = yes</p>

<p>client plaintext auth (G)</p>

<p>Specifies whether a client should send a plaintext
password if the server does not support encrypted
passwords.</p>

<p>Default: client plaintext auth = no</p>

<p>client schannel (G)</p>

<p>This controls whether the client offers or even demands
the use of the netlogon schannel. client schannel = no does
not offer the schannel, client schannel = auto offers the
schannel but does not enforce it, and client schannel = yes
denies access if the server is not able to speak netlogon
schannel.</p>

<p>Default: client schannel = auto</p>

<p>Example: client schannel = yes</p>

<p>client signing (G)</p>

<p>This controls whether the client is allowed or required
to use SMB signing. Possible values are auto, mandatory and
disabled.</p>

<p>When set to auto, SMB signing is offered, but not
enforced. When set to mandatory, SMB signing is required and
if set to disabled, SMB signing is not offered either. IPC$
connections for DCERPC e.g. in winbindd, are handled by the
client ipc signing option.</p>

<p>Default: client signing = auto</p>

<p>client use spnego principal (G)</p>

<p>This parameter determines whether or not smbclient(8)
and other samba components acting as a client will attempt
to use the server-supplied principal sometimes given in the
SPNEGO exchange.</p>

<p>If enabled, Samba can attempt to use Kerberos to contact
servers known only by IP address. Kerberos relies on names,
so ordinarily cannot function in this situation.</p>

<p>If disabled, Samba will use the name used to look up the
server when asking the KDC for a ticket. This avoids
situations where a server may impersonate another,
soliciting authentication as one principal while being known
on the network as another.</p>

<p>Note that Windows XP SP2 and later versions already
follow this behaviour, and Windows Vista and later servers
no longer supply this &rsquo;rfc4178 hint&rsquo; principal
on the server side.</p>

<p>Default: client use spnego principal = no</p>

<p>client use spnego (G)</p>

<p>This variable controls whether Samba clients will try to
use Simple and Protected NEGOciation (as specified by
rfc2478) with supporting servers (including WindowsXP,
Windows2000 and Samba 3.0) to agree upon an authentication
mechanism. This enables Kerberos authentication in
particular.</p>

<p>When client NTLMv2 auth is also set to yes extended
security (SPNEGO) is required in order to use NTLMv2 only
within NTLMSSP. This behavior was introduced with the
patches for CVE-2016-2111.</p>

<p>Default: client use spnego = yes</p>

<p>cluster addresses (G)</p>

<p>With this parameter you can add additional addresses
nmbd will register with a WINS server. These addresses are
not necessarily present on all nodes simultaneously, but
they will be registered with the WINS server so that clients
can contact any of the nodes.</p>

<p>Default: cluster addresses =</p>

<p>Example: cluster addresses = 10.0.0.1 10.0.0.2
10.0.0.3</p>

<p>clustering (G)</p>

<p>This parameter specifies whether Samba should contact
ctdb for accessing its tdb files and use ctdb as a backend
for its messaging backend.</p>

<p>Set this parameter to yes only if you have a cluster
setup with ctdb running.</p>

<p>Default: clustering = no</p>

<p>comment (S)</p>

<p>This is a text field that is seen next to a share when a
client does a queries the server, either via the network
neighborhood or via net view to list what shares are
available.</p>

<p>If you want to set the string that is displayed next to
the machine name then see the server string parameter.</p>

<p>Default: comment = # No comment</p>

<p>Example: comment = Fred&rsquo;s Files</p>

<p>config backend (G)</p>

<p>This controls the backend for storing the configuration.
Possible values are file (the default) and registry. When
config backend = registry is encountered while loading
smb.conf, the configuration read so far is dropped and the
global options are read from registry instead. So this
triggers a registry only configuration. Share definitions
are not read immediately but instead registry shares is set
to yes.</p>

<p>Note: This option can not be set inside the registry
configuration itself.</p>

<p>Default: config backend = file</p>

<p>Example: config backend = registry</p>

<p>config file (G)</p>

<p>This allows you to override the config file to use,
instead of the default (usually smb.conf). There is a
chicken and egg problem here as this option is set in the
config file!</p>

<p>For this reason, if the name of the config file has
changed when the parameters are loaded then it will reload
them from the new config file.</p>

<p>This option takes the usual substitutions, which can be
very useful.</p>

<p>If the config file doesn&rsquo;t exist then it
won&rsquo;t be loaded (allowing you to special case the
config files of just a few clients).</p>

<p>No default</p>

<p>Example: config file =
/usr/local/samba/lib/smb.conf.%m</p>

<p>copy (S)</p>

<p>This parameter allows you to &quot;clone&quot; service
entries. The specified service is simply duplicated under
the current service&rsquo;s name. Any parameters specified
in the current section will override those in the section
being copied.</p>

<p>This feature lets you set up a &rsquo;template&rsquo;
service and create similar services easily. Note that the
service being copied must occur earlier in the configuration
file than the service doing the copying.</p>

<p>Default: copy =</p>

<p>Example: copy = otherservice</p>

<p>create krb5 conf (G)</p>

<p>Setting this paramter to no prevents winbind from
creating custom krb5.conf files. Winbind normally does this
because the krb5 libraries are not AD-site-aware and thus
would pick any domain controller out of potentially very
many. Winbind is site-aware and makes the krb5 libraries use
a local DC by creating its own krb5.conf files.</p>

<p>Preventing winbind from doing this might become
necessary if you have to add special options into your
system-krb5.conf that winbind does not see.</p>

<p>Default: create krb5 conf = yes</p>

<p>create mode</p>

<p>This parameter is a synonym for create mask.</p>

<p>create mask (S)</p>

<p>When a file is created, the necessary permissions are
calculated according to the mapping from DOS modes to UNIX
permissions, and the resulting UNIX mode is then bit-wise
&rsquo;AND&rsquo;ed with this parameter. This parameter may
be thought of as a bit-wise MASK for the UNIX modes of a
file. Any bit not set here will be removed from the modes
set on a file when it is created.</p>

<p>The default value of this parameter removes the group
and other write and execute bits from the UNIX modes.</p>

<p>Following this Samba will bit-wise &rsquo;OR&rsquo; the
UNIX mode created from this parameter with the value of the
force create mode parameter which is set to 000 by
default.</p>

<p>This parameter does not affect directory masks. See the
parameter directory mask for details.</p>

<p>Note that this parameter does not apply to permissions
set by Windows NT/2000 ACL editors. If the administrator
wishes to enforce a mask on access control lists also, they
need to set the security mask.</p>

<p>Default: create mask = 0744</p>

<p>Example: create mask = 0775</p>

<p>csc policy (S)</p>

<p>This stands for client-side caching policy, and
specifies how clients capable of offline caching will cache
the files in the share. The valid values are: manual,
documents, programs, disable.</p>

<p>These values correspond to those used on Windows
servers.</p>

<p>For example, shares containing roaming profiles can have
offline caching disabled using csc policy = disable.</p>

<p>Default: csc policy = manual</p>

<p>Example: csc policy = programs</p>

<p>ctdbd socket (G)</p>

<p>If you set clustering=yes, you need to tell Samba where
ctdbd listens on its unix domain socket. The default path as
of ctdb 1.0 is /tmp/ctdb.socket which you have to explicitly
set for Samba in smb.conf.</p>

<p>Default: ctdbd socket =</p>

<p>Example: ctdbd socket = /tmp/ctdb.socket</p>

<p>ctdb locktime warn threshold (G)</p>

<p>In a cluster environment using Samba and ctdb it is
critical that locks on central ctdb-hosted databases like
locking.tdb are not held for long. With the current Samba
architecture it happens that Samba takes a lock and while
holding that lock makes file system calls into the shared
cluster file system. This option makes Samba warn if it
detects that it has held locks for the specified number of
milliseconds. If this happens, smbd will emit a debug level
0 message into its logs and potentially into syslog. The
most likely reason for such a log message is that an
operation of the cluster file system Samba exports is taking
longer than expected. The messages are meant as a debugging
aid for potential cluster problems.</p>

<p>The default value of 0 disables this logging.</p>

<p>Default: ctdb locktime warn threshold = 0</p>

<p>ctdb timeout (G)</p>

<p>This parameter specifies a timeout in seconds for the
connection between Samba and ctdb. It is only valid if you
have compiled Samba with clustering and if you have set
clustering=yes.</p>

<p>When something in the cluster blocks, it can happen that
we wait indefinitely long for ctdb, just adding to the
blocking condition. In a well-running cluster this should
never happen, but there are too many components in a cluster
that might have hickups. Choosing the right balance for this
value is very tricky, because on a busy cluster long service
times to transfer something across the cluster might be
valid. Setting it too short will degrade the service your
cluster presents, setting it too long might make the cluster
itself not recover from something severely broken for too
long.</p>

<p>Be aware that if you set this parameter, this needs to
be in the file smb.conf, it is not really helpful to put
this into a registry configuration (typical on a cluster),
because to access the registry contact to ctdb is
requred.</p>

<p>Setting ctdb timeout to n makes any process waiting
longer than n seconds for a reply by the cluster panic.
Setting it to 0 (the default) makes Samba block forever,
which is the highly recommended default.</p>

<p>Default: ctdb timeout = 0</p>

<p>cups connection timeout (G)</p>

<p>This parameter is only applicable if printing is set to
cups.</p>

<p>If set, this option specifies the number of seconds that
smbd will wait whilst trying to contact to the CUPS server.
The connection will fail if it takes longer than this number
of seconds.</p>

<p>Default: cups connection timeout = 30</p>

<p>Example: cups connection timeout = 60</p>

<p>cups encrypt (G)</p>

<p>This parameter is only applicable if printing is set to
cups and if you use CUPS newer than 1.0.x.It is used to
define whether or not Samba should use encryption when
talking to the CUPS server. Possible values are auto, yes
and no</p>

<p>When set to auto we will try to do a TLS handshake on
each CUPS connection setup. If that fails, we will fall back
to unencrypted operation.</p>

<p>Default: cups encrypt = &quot;no&quot;</p>

<p>cups options (S)</p>

<p>This parameter is only applicable if printing is set to
cups. Its value is a free form string of options passed
directly to the cups library.</p>

<p>You can pass any generic print option known to CUPS (as
listed in the CUPS &quot;Software Users&rsquo;
Manual&quot;). You can also pass any printer specific option
(as listed in &quot;lpoptions -d printername -l&quot;) valid
for the target queue. Multiple parameters should be
space-delimited name/value pairs according to the PAPI text
option ABNF specification. Collection values
(&quot;name={a=... b=... c=...}&quot;) are stored with the
curley brackets intact.</p>

<p>You should set this parameter to raw if your CUPS server
error_log file contains messages such as &quot;Unsupported
format &rsquo;application/octet-stream&rsquo;&quot; when
printing from a Windows client through Samba. It is no
longer necessary to enable system wide raw printing in
/etc/cups/mime.{convs,types}.</p>

<p>Default: cups options = &quot;&quot;</p>

<p>Example: cups options = &quot;raw media=a4&quot;</p>

<p>cups server (G)</p>

<p>This parameter is only applicable if printing is set to
cups.</p>

<p>If set, this option overrides the ServerName option in
the CUPS client.conf. This is necessary if you have virtual
samba servers that connect to different CUPS daemons.</p>

<p>Optionally, a port can be specified by separating the
server name and port number with a colon. If no port was
specified, the default port for IPP (631) will be used.</p>

<p>Default: cups server = &quot;&quot;</p>

<p>Example: cups server = mycupsserver</p>

<p>Example: cups server = mycupsserver:1631</p>

<p>deadtime (G)</p>

<p>The value of the parameter (a decimal integer)
represents the number of minutes of inactivity before a
connection is considered dead, and it is disconnected. The
deadtime only takes effect if the number of open files is
zero.</p>

<p>This is useful to stop a server&rsquo;s resources being
exhausted by a large number of inactive connections.</p>

<p>Most clients have an auto-reconnect feature when a
connection is broken so in most cases this parameter should
be transparent to users.</p>

<p>Using this parameter with a timeout of a few minutes is
recommended for most systems.</p>

<p>A deadtime of zero indicates that no auto-disconnection
should be performed.</p>

<p>Default: deadtime = 0</p>

<p>Example: deadtime = 15</p>

<p>debug class (G)</p>

<p>With this boolean parameter enabled, the debug class
(DBGC_CLASS) will be displayed in the debug header.</p>

<p>For more information about currently available debug
classes, see section about log level.</p>

<p>Default: debug class = no</p>

<p>debug hires timestamp (G)</p>

<p>Sometimes the timestamps in the log messages are needed
with a resolution of higher that seconds, this boolean
parameter adds microsecond resolution to the timestamp
message header when turned on.</p>

<p>Note that the parameter debug timestamp must be on for
this to have an effect.</p>

<p>Default: debug hires timestamp = yes</p>

<p>debug pid (G)</p>

<p>When using only one log file for more then one forked
smbd(8)-process there may be hard to follow which process
outputs which message. This boolean parameter is adds the
process-id to the timestamp message headers in the logfile
when turned on.</p>

<p>Note that the parameter debug timestamp must be on for
this to have an effect.</p>

<p>Default: debug pid = no</p>

<p>debug prefix timestamp (G)</p>

<p>With this option enabled, the timestamp message header
is prefixed to the debug message without the filename and
function information that is included with the debug
timestamp parameter. This gives timestamps to the messages
without adding an additional line.</p>

<p>Note that this parameter overrides the debug timestamp
parameter.</p>

<p>Default: debug prefix timestamp = no</p>

<p>timestamp logs</p>

<p>This parameter is a synonym for debug timestamp.</p>

<p>debug timestamp (G)</p>

<p>Samba debug log messages are timestamped by default. If
you are running at a high debug level these timestamps can
be distracting. This boolean parameter allows timestamping
to be turned off.</p>

<p>Default: debug timestamp = yes</p>

<p>debug uid (G)</p>

<p>Samba is sometimes run as root and sometime run as the
connected user, this boolean parameter inserts the current
euid, egid, uid and gid to the timestamp message headers in
the log file if turned on.</p>

<p>Note that the parameter debug timestamp must be on for
this to have an effect.</p>

<p>Default: debug uid = no</p>

<p>dedicated keytab file (G)</p>

<p>Specifies the path to the kerberos keytab file when
kerberos method is set to &quot;dedicated keytab&quot;.</p>

<p>Default: dedicated keytab file =</p>

<p>Example: dedicated keytab file =
/usr/local/etc/krb5.keytab</p>

<p>default case (S)</p>

<p>See the section on name mangling. Also note the short
preserve case parameter.</p>

<p>Default: default case = lower</p>

<p>default devmode (S)</p>

<p>This parameter is only applicable to printable services.
When smbd is serving Printer Drivers to Windows NT/2k/XP
clients, each printer on the Samba server has a Device Mode
which defines things such as paper size and orientation and
duplex settings. The device mode can only correctly be
generated by the printer driver itself (which can only be
executed on a Win32 platform). Because smbd is unable to
execute the driver code to generate the device mode, the
default behavior is to set this field to NULL.</p>

<p>Most problems with serving printer drivers to Windows
NT/2k/XP clients can be traced to a problem with the
generated device mode. Certain drivers will do things such
as crashing the client&rsquo;s Explorer.exe with a NULL
devmode. However, other printer drivers can cause the
client&rsquo;s spooler service (spoolsv.exe) to die if the
devmode was not created by the driver itself (i.e. smbd
generates a default devmode).</p>

<p>This parameter should be used with care and tested with
the printer driver in question. It is better to leave the
device mode to NULL and let the Windows client set the
correct values. Because drivers do not do this all the time,
setting default devmode = yes will instruct smbd to generate
a default one.</p>

<p>For more information on Windows NT/2k printing and
Device Modes, see the MSDN documentation.</p>

<p>Default: default devmode = yes</p>

<p>default</p>

<p>This parameter is a synonym for default service.</p>

<p>default service (G)</p>

<p>This parameter specifies the name of a service which
will be connected to if the service actually requested
cannot be found. Note that the square brackets are NOT given
in the parameter value (see example below).</p>

<p>There is no default value for this parameter. If this
parameter is not given, attempting to connect to a
nonexistent service results in an error.</p>

<p>Typically the default service would be a guest ok,
read-only service.</p>

<p>Also note that the apparent service name will be changed
to equal that of the requested service, this is very useful
as it allows you to use macros like %S to make a wildcard
service.</p>

<p>Note also that any &quot;_&quot; characters in the name
of the service used in the default service will get mapped
to a &quot;/&quot;. This allows for interesting things.</p>

<p>Default: default service =</p>

<p>Example: default service = pub</p>

<p>defer sharing violations (G)</p>

<p>Windows allows specifying how a file will be shared with
other processes when it is opened. Sharing violations occur
when a file is opened by a different process using options
that violate the share settings specified by other
processes. This parameter causes smbd to act as a Windows
server does, and defer returning a &quot;sharing
violation&quot; error message for up to one second, allowing
the client to close the file causing the violation in the
meantime.</p>

<p>UNIX by default does not have this behaviour.</p>

<p>There should be no reason to turn off this parameter, as
it is designed to enable Samba to more correctly emulate
Windows.</p>

<p>Default: defer sharing violations = True</p>

<p>delete group script (G)</p>

<p>This is the full pathname to a script that will be run
AS ROOTsmbd(8) when a group is requested to be deleted. It
will expand any %g to the group name passed. This script is
only useful for installations using the Windows NT domain
administration tools.</p>

<p>Default: delete group script =</p>

<p>deleteprinter command (G)</p>

<p>With the introduction of MS-RPC based printer support
for Windows NT/2000 clients in Samba 2.2, it is now possible
to delete a printer at run time by issuing the
DeletePrinter() RPC call.</p>

<p>For a Samba host this means that the printer must be
physically deleted from the underlying printing system. The
deleteprinter command defines a script to be run which will
perform the necessary operations for removing the printer
from the print system and from smb.conf.</p>

<p>The deleteprinter command is automatically called with
only one parameter: printer name.</p>

<p>Once the deleteprinter command has been executed, smbd
will reparse the smb.conf to check that the associated
printer no longer exists. If the sharename is still valid,
then smbd will return an ACCESS_DENIED error to the
client.</p>

<p>Default: deleteprinter command =</p>

<p>Example: deleteprinter command =
/usr/bin/removeprinter</p>

<p>delete readonly (S)</p>

<p>This parameter allows readonly files to be deleted. This
is not normal DOS semantics, but is allowed by UNIX.</p>

<p>This option may be useful for running applications such
as rcs, where UNIX file ownership prevents changing file
permissions, and DOS semantics prevent deletion of a read
only file.</p>

<p>Default: delete readonly = no</p>

<p>delete share command (G)</p>

<p>Samba 2.2.0 introduced the ability to dynamically add
and delete shares via the Windows NT 4.0 Server Manager. The
delete share command is used to define an external program
or script which will remove an existing service definition
from smb.conf.</p>

<p>In order to successfully execute the delete share
command, smbd requires that the administrator connects using
a root account (i.e. uid == 0) or has the
SeDiskOperatorPrivilege. Scripts defined in the delete share
command parameter are executed as root.</p>

<p>When executed, smbd will automatically invoke the delete
share command with two parameters.</p>

<p>&middot; configFile - the location of the global
smb.conf file.</p>

<p>&middot; shareName - the name of the existing
service.</p>

<p>This parameter is only used to remove file shares. To
delete printer shares, see the deleteprinter command.</p>

<p>Default: delete share command =</p>

<p>Example: delete share command =
/usr/local/bin/delshare</p>

<p>delete user from group script (G)</p>

<p>Full path to the script that will be called when a user
is removed from a group using the Windows NT domain
administration tools. It will be run by smbd(8)AS ROOT. Any
%g will be replaced with the group name and any %u will be
replaced with the user name.</p>

<p>Default: delete user from group script =</p>

<p>Example: delete user from group script =
/usr/sbin/deluser %u %g</p>

<p>delete user script (G)</p>

<p>This is the full pathname to a script that will be run
by smbd(8) when managing users with remote RPC (NT)
tools.</p>

<p>This script is called when a remote client removes a
user from the server, normally using &rsquo;User Manager for
Domains&rsquo; or rpcclient.</p>

<p>This script should delete the given UNIX username.</p>

<p>Default: delete user script =</p>

<p>Example: delete user script =
/usr/local/samba/bin/del_user %u</p>

<p>delete veto files (S)</p>

<p>This option is used when Samba is attempting to delete a
directory that contains one or more vetoed directories (see
the veto files option). If this option is set to no (the
default) then if a vetoed directory contains any non-vetoed
files or directories then the directory delete will fail.
This is usually what you want.</p>

<p>If this option is set to yes, then Samba will attempt to
recursively delete any files and directories within the
vetoed directory. This can be useful for integration with
file serving systems such as NetAtalk which create
meta-files within directories you might normally veto
DOS/Windows users from seeing (e.g. .AppleDouble)</p>

<p>Setting delete veto files = yes allows these directories
to be transparently deleted when the parent directory is
deleted (so long as the user has permissions to do so).</p>

<p>Default: delete veto files = no</p>

<p>dfree cache time (S)</p>

<p>The dfree cache time should only be used on systems
where a problem occurs with the internal disk space
calculations. This has been known to happen with Ultrix, but
may occur with other operating systems. The symptom that was
seen was an error of &quot;Abort Retry Ignore&quot; at the
end of each directory listing.</p>

<p>This is a new parameter introduced in Samba version
3.0.21. It specifies in seconds the time that smbd will
cache the output of a disk free query. If set to zero (the
default) no caching is done. This allows a heavily loaded
server to prevent rapid spawning of dfree command scripts
increasing the load.</p>

<p>By default this parameter is zero, meaning no caching
will be done.</p>

<p>No default</p>

<p>Example: dfree cache time = dfree cache time = 60</p>

<p>dfree command (S)</p>

<p>The dfree command setting should only be used on systems
where a problem occurs with the internal disk space
calculations. This has been known to happen with Ultrix, but
may occur with other operating systems. The symptom that was
seen was an error of &quot;Abort Retry Ignore&quot; at the
end of each directory listing.</p>

<p>This setting allows the replacement of the internal
routines to calculate the total disk space and amount
available with an external routine. The example below gives
a possible script that might fulfill this function.</p>

<p>In Samba version 3.0.21 this parameter has been changed
to be a per-share parameter, and in addition the parameter
dfree cache time was added to allow the output of this
script to be cached for systems under heavy load.</p>

<p>The external program will be passed a single parameter
indicating a directory in the filesystem being queried. This
will typically consist of the string ./. The script should
return two integers in ASCII. The first should be the total
disk space in blocks, and the second should be the number of
available blocks. An optional third return value can give
the block size in bytes. The default blocksize is 1024
bytes.</p>

<p>Note: Your script should NOT be setuid or setgid and
should be owned by (and writeable only by) root!</p>

<p>Where the script dfree (which must be made executable)
could be:</p>

<p>#!/bin/sh df $1 | tail -1 | awk &rsquo;{print
$(NF-4),$(NF-2)}&rsquo;</p>

<p>or perhaps (on Sys V based systems):</p>

<p>#!/bin/sh /usr/bin/df -k $1 | tail -1 | awk
&rsquo;{print $3&quot; &quot;$5}&rsquo;</p>

<p>Note that you may have to replace the command names with
full path names on some systems.</p>

<p>By default internal routines for determining the disk
capacity and remaining space will be used.</p>

<p>No default</p>

<p>Example: dfree command = /usr/local/samba/bin/dfree</p>

<p>directory mode</p>

<p>This parameter is a synonym for directory mask.</p>

<p>directory mask (S)</p>

<p>This parameter is the octal modes which are used when
converting DOS modes to UNIX modes when creating UNIX
directories.</p>

<p>When a directory is created, the necessary permissions
are calculated according to the mapping from DOS modes to
UNIX permissions, and the resulting UNIX mode is then
bit-wise &rsquo;AND&rsquo;ed with this parameter. This
parameter may be thought of as a bit-wise MASK for the UNIX
modes of a directory. Any bit not set here will be removed
from the modes set on a directory when it is created.</p>

<p>The default value of this parameter removes the
&rsquo;group&rsquo; and &rsquo;other&rsquo; write bits from
the UNIX mode, allowing only the user who owns the directory
to modify it.</p>

<p>Following this Samba will bit-wise &rsquo;OR&rsquo; the
UNIX mode created from this parameter with the value of the
force directory mode parameter. This parameter is set to 000
by default (i.e. no extra mode bits are added).</p>

<p>Note that this parameter does not apply to permissions
set by Windows NT/2000 ACL editors. If the administrator
wishes to enforce a mask on access control lists also, they
need to set the directory security mask.</p>

<p>Default: directory mask = 0755</p>

<p>Example: directory mask = 0775</p>

<p>directory name cache size (S)</p>

<p>This parameter specifies the the size of the directory
name cache. It will be needed to turn this off for *BSD
systems.</p>

<p>Default: directory name cache size = 100</p>

<p>directory security mask (S)</p>

<p>This parameter controls what UNIX permission bits will
be set when a Windows NT client is manipulating the UNIX
permission on a directory using the native NT security
dialog box.</p>

<p>This parameter is applied as a mask (AND&rsquo;ed with)
to the incoming permission bits, thus resetting any bits not
in this mask. Make sure not to mix up this parameter with
force directory security mode, which works similar like this
one but uses logical OR instead of AND. Essentially, zero
bits in this mask are a set of bits that will always be set
to zero.</p>

<p>Essentially, all bits set to zero in this mask will
result in setting to zero the corresponding bits on the file
permissions regardless of the previous status of this bits
on the file.</p>

<p>If not set explicitly this parameter is set to 0777
meaning a user is allowed to set all the user/group/world
permissions on a directory.</p>

<p>Note that users who can access the Samba server through
other means can easily bypass this restriction, so it is
primarily useful for standalone &quot;appliance&quot;
systems. Administrators of most normal systems will probably
want to leave it as the default of 0777.</p>

<p>Default: directory security mask = 0777</p>

<p>Example: directory security mask = 0700</p>

<p>disable netbios (G)</p>

<p>Enabling this parameter will disable netbios support in
Samba. Netbios is the only available form of browsing in all
windows versions except for 2000 and XP.</p>

<p>Note Clients that only support netbios won&rsquo;t be
able to see your samba server when netbios support is
disabled. Default: disable netbios = no</p>

<p>disable spoolss (G)</p>

<p>Enabling this parameter will disable Samba&rsquo;s
support for the SPOOLSS set of MS-RPC&rsquo;s and will yield
identical behavior as Samba 2.0.x. Windows NT/2000 clients
will downgrade to using Lanman style printing commands.
Windows 9x/ME will be unaffected by the parameter. However,
this will also disable the ability to upload printer drivers
to a Samba server via the Windows NT Add Printer Wizard or
by using the NT printer properties dialog window. It will
also disable the capability of Windows NT/2000 clients to
download print drivers from the Samba host upon demand. Be
very careful about enabling this parameter.</p>

<p>Default: disable spoolss = no</p>

<p>display charset (G)</p>

<p>Specifies the charset that samba will use to print
messages to stdout and stderr. The default value is
&quot;LOCALE&quot;, which means automatically set, depending
on the current locale. The value should generally be the
same as the value of the parameter unix charset.</p>

<p>Default: display charset = &quot;LOCALE&quot; or
&quot;ASCII&quot; (depending on the system)</p>

<p>Example: display charset = UTF8</p>

<p>dmapi support (S)</p>

<p>This parameter specifies whether Samba should use DMAPI
to determine whether a file is offline or not. This would
typically be used in conjunction with a hierarchical storage
system that automatically migrates files to tape.</p>

<p>Note that Samba infers the status of a file by examining
the events that a DMAPI application has registered interest
in. This heuristic is satisfactory for a number of
hierarchical storage systems, but there may be system for
which it will fail. In this case, Samba may erroneously
report files to be offline.</p>

<p>This parameter is only available if a supported DMAPI
implementation was found at compilation time. It will only
be used if DMAPI is found to enabled on the system at run
time.</p>

<p>Default: dmapi support = no</p>

<p>dns proxy (G)</p>

<p>Specifies that nmbd(8) when acting as a WINS server and
finding that a NetBIOS name has not been registered, should
treat the NetBIOS name word-for-word as a DNS name and do a
lookup with the DNS server for that name on behalf of the
name-querying client.</p>

<p>Note that the maximum length for a NetBIOS name is 15
characters, so the DNS name (or DNS alias) can likewise only
be 15 characters, maximum.</p>

<p>nmbd spawns a second copy of itself to do the DNS name
lookup requests, as doing a name lookup is a blocking
action.</p>

<p>Default: dns proxy = yes</p>

<p>domain logons (G)</p>

<p>If set to yes, the Samba server will provide the
netlogon service for Windows 9X network logons for the
workgroup it is in. This will also cause the Samba server to
act as a domain controller for NT4 style domain services.
For more details on setting up this feature see the Domain
Control chapter of the Samba HOWTO Collection.</p>

<p>Default: domain logons = no</p>

<p>domain master (G)</p>

<p>Tell smbd(8) to enable WAN-wide browse list collation.
Setting this option causes nmbd to claim a special domain
specific NetBIOS name that identifies it as a domain master
browser for its given workgroup. Local master browsers in
the same workgroup on broadcast-isolated subnets will give
this nmbd their local browse lists, and then ask smbd(8) for
a complete copy of the browse list for the whole wide area
network. Browser clients will then contact their local
master browser, and will receive the domain-wide browse
list, instead of just the list for their broadcast-isolated
subnet.</p>

<p>Note that Windows NT Primary Domain Controllers expect
to be able to claim this workgroup specific special NetBIOS
name that identifies them as domain master browsers for that
workgroup by default (i.e. there is no way to prevent a
Windows NT PDC from attempting to do this). This means that
if this parameter is set and nmbd claims the special name
for a workgroup before a Windows NT PDC is able to do so
then cross subnet browsing will behave strangely and may
fail.</p>

<p>If domain logons = yes, then the default behavior is to
enable the domain master parameter. If domain logons is not
enabled (the default setting), then neither will domain
master be enabled by default.</p>

<p>When domain logons = Yes the default setting for this
parameter is Yes, with the result that Samba will be a PDC.
If domain master = No, Samba will function as a BDC. In
general, this parameter should be set to &rsquo;No&rsquo;
only on a BDC.</p>

<p>Default: domain master = auto</p>

<p>dont descend (S)</p>

<p>There are certain directories on some systems (e.g., the
/proc tree under Linux) that are either not of interest to
clients or are infinitely deep (recursive). This parameter
allows you to specify a comma-delimited list of directories
that the server should always show as empty.</p>

<p>Note that Samba can be very fussy about the exact format
of the &quot;dont descend&quot; entries. For example you may
need ./proc instead of just /proc. Experimentation is the
best policy :-)</p>

<p>Default: dont descend =</p>

<p>Example: dont descend = /proc,/dev</p>

<p>dos charset (G)</p>

<p>DOS SMB clients assume the server has the same charset
as they do. This option specifies which charset Samba should
talk to DOS clients.</p>

<p>The default depends on which charsets you have
installed. Samba tries to use charset 850 but falls back to
ASCII in case it is not available. Run testparm(1) to check
the default on your system.</p>

<p>No default</p>

<p>dos filemode (S)</p>

<p>The default behavior in Samba is to provide UNIX-like
behavior where only the owner of a file/directory is able to
change the permissions on it. However, this behavior is
often confusing to DOS/Windows users. Enabling this
parameter allows a user who has write access to the file (by
whatever means, including an ACL permission) to modify the
permissions (including ACL) on it. Note that a user
belonging to the group owning the file will not be allowed
to change permissions if the group is only granted read
access. Ownership of the file/directory may also be changed.
Note that using the VFS modules acl_xattr or acl_tdb which
store native Windows as meta-data will automatically turn
this option on for any share for which they are loaded, as
they require this option to emulate Windows ACLs
correctly.</p>

<p>Default: dos filemode = no</p>

<p>dos filetime resolution (S)</p>

<p>Under the DOS and Windows FAT filesystem, the finest
granularity on time resolution is two seconds. Setting this
parameter for a share causes Samba to round the reported
time down to the nearest two second boundary when a query
call that requires one second resolution is made to
smbd(8).</p>

<p>This option is mainly used as a compatibility option for
Visual C++ when used against Samba shares. If oplocks are
enabled on a share, Visual C++ uses two different time
reading calls to check if a file has changed since it was
last read. One of these calls uses a one-second granularity,
the other uses a two second granularity. As the two second
call rounds any odd second down, then if the file has a
timestamp of an odd number of seconds then the two
timestamps will not match and Visual C++ will keep reporting
the file has changed. Setting this option causes the two
timestamps to match, and Visual C++ is happy.</p>

<p>Default: dos filetime resolution = no</p>

<p>dos filetimes (S)</p>

<p>Under DOS and Windows, if a user can write to a file
they can change the timestamp on it. Under POSIX semantics,
only the owner of the file or root may change the timestamp.
By default, Samba emulates the DOS semantics and allows to
change the timestamp on a file if the user smbd is acting on
behalf has write permissions. Due to changes in Microsoft
Office 2000 and beyond, the default for this parameter has
been changed from &quot;no&quot; to &quot;yes&quot; in Samba
3.0.14 and above. Microsoft Excel will display dialog box
warnings about the file being changed by another user if
this parameter is not set to &quot;yes&quot; and files are
being shared between users.</p>

<p>Default: dos filetimes = yes</p>

<p>ea support (S)</p>

<p>This boolean parameter controls whether smbd(8) will
allow clients to attempt to store OS/2 style Extended
attributes on a share. In order to enable this parameter the
underlying filesystem exported by the share must support
extended attributes (such as provided on XFS and EXT3 on
Linux, with the correct kernel patches). On Linux the
filesystem must have been mounted with the mount option
user_xattr in order for extended attributes to work, also
extended attributes must be compiled into the Linux
kernel.</p>

<p>Default: ea support = no</p>

<p>enable asu support (G)</p>

<p>Hosts running the &quot;Advanced Server for Unix
(ASU)&quot; product require some special accomodations such
as creating a builtin [ADMIN$] share that only supports IPC
connections. The has been the default behavior in smbd for
many years. However, certain Microsoft applications such as
the Print Migrator tool require that the remote server
support an [ADMIN$} file share. Disabling this parameter
allows for creating an [ADMIN$] file share in smb.conf.</p>

<p>Default: enable asu support = no</p>

<p>enable core files (G)</p>

<p>This parameter specifies whether core dumps should be
written on internal exits. Normally set to yes. You should
never need to change this.</p>

<p>Default: enable core files = yes</p>

<p>Example: enable core files = no</p>

<p>enable privileges (G)</p>

<p>This deprecated parameter controls whether or not smbd
will honor privileges assigned to specific SIDs via either
net rpc rights or one of the Windows user and group manager
tools. This parameter is enabled by default. It can be
disabled to prevent members of the Domain Admins group from
being able to assign privileges to users or groups which can
then result in certain smbd operations running as root that
would normally run under the context of the connected
user.</p>

<p>An example of how privileges can be used is to assign
the right to join clients to a Samba controlled domain
without providing root access to the server via smbd.</p>

<p>Please read the extended description provided in the
Samba HOWTO documentation.</p>

<p>Default: enable privileges = yes</p>

<p>enable spoolss (G)</p>

<p>Inverted synonym for disable spoolss.</p>

<p>Default: enable spoolss = yes</p>

<p>encrypt passwords (G)</p>

<p>This boolean controls whether encrypted passwords will
be negotiated with the client. Note that Windows NT 4.0 SP3
and above and also Windows 98 will by default expect
encrypted passwords unless a registry entry is changed. To
use encrypted passwords in Samba see the chapter &quot;User
Database&quot; in the Samba HOWTO Collection.</p>

<p>MS Windows clients that expect Microsoft encrypted
passwords and that do not have plain text password support
enabled will be able to connect only to a Samba server that
has encrypted password support enabled and for which the
user accounts have a valid encrypted password. Refer to the
smbpasswd command man page for information regarding the
creation of encrypted passwords for user accounts.</p>

<p>The use of plain text passwords is NOT advised as
support for this feature is no longer maintained in
Microsoft Windows products. If you want to use plain text
passwords you must set this parameter to no.</p>

<p>In order for encrypted passwords to work correctly
smbd(8) must either have access to a local smbpasswd(5) file
(see the smbpasswd(8) program for information on how to set
up and maintain this file), or set the security =
[server|domain|ads] parameter which causes smbd to
authenticate against another server.</p>

<p>Default: encrypt passwords = yes</p>

<p>enhanced browsing (G)</p>

<p>This option enables a couple of enhancements to
cross-subnet browse propagation that have been added in
Samba but which are not standard in Microsoft
implementations.</p>

<p>The first enhancement to browse propagation consists of
a regular wildcard query to a Samba WINS server for all
Domain Master Browsers, followed by a browse synchronization
with each of the returned DMBs. The second enhancement
consists of a regular randomised browse synchronization with
all currently known DMBs.</p>

<p>You may wish to disable this option if you have a
problem with empty workgroups not disappearing from browse
lists. Due to the restrictions of the browse protocols,
these enhancements can cause a empty workgroup to stay
around forever which can be annoying.</p>

<p>In general you should leave this option enabled as it
makes cross-subnet browse propagation much more
reliable.</p>

<p>Default: enhanced browsing = yes</p>

<p>enumports command (G)</p>

<p>The concept of a &quot;port&quot; is fairly foreign to
UNIX hosts. Under Windows NT/2000 print servers, a port is
associated with a port monitor and generally takes the form
of a local port (i.e. LPT1:, COM1:, FILE:) or a remote port
(i.e. LPD Port Monitor, etc...). By default, Samba has only
one port defined--&quot;Samba Printer Port&quot;. Under
Windows NT/2000, all printers must have a valid port name.
If you wish to have a list of ports displayed (smbd does not
use a port name for anything) other than the default
&quot;Samba Printer Port&quot;, you can define enumports
command to point to a program which should generate a list
of ports, one per line, to standard output. This listing
will then be used in response to the level 1 and 2
EnumPorts() RPC.</p>

<p>Default: enumports command =</p>

<p>Example: enumports command = /usr/bin/listports</p>

<p>eventlog list (G)</p>

<p>This option defines a list of log names that Samba will
report to the Microsoft EventViewer utility. The listed
eventlogs will be associated with tdb file on disk in the
$(lockdir)/eventlog.</p>

<p>The administrator must use an external process to parse
the normal Unix logs such as /var/log/messages and write
then entries to the eventlog tdb files. Refer to the
eventlogadm(8) utility for how to write eventlog
entries.</p>

<p>Default: eventlog list =</p>

<p>Example: eventlog list = Security Application Syslog
Apache</p>

<p>fake directory create times (S)</p>

<p>NTFS and Windows VFAT file systems keep a create time
for all files and directories. This is not the same as the
ctime - status change time - that Unix keeps, so Samba by
default reports the earliest of the various times Unix does
keep. Setting this parameter for a share causes Samba to
always report midnight 1-1-1980 as the create time for
directories.</p>

<p>This option is mainly used as a compatibility option for
Visual C++ when used against Samba shares. Visual C++
generated makefiles have the object directory as a
dependency for each object file, and a make rule to create
the directory. Also, when NMAKE compares timestamps it uses
the creation time when examining a directory. Thus the
object directory will be created if it does not exist, but
once it does exist it will always have an earlier timestamp
than the object files it contains.</p>

<p>However, Unix time semantics mean that the create time
reported by Samba will be updated whenever a file is created
or or deleted in the directory. NMAKE finds all object files
in the object directory. The timestamp of the last one built
is then compared to the timestamp of the object directory.
If the directory&rsquo;s timestamp if newer, then all object
files will be rebuilt. Enabling this option ensures
directories always predate their contents and an NMAKE build
will proceed as expected.</p>

<p>Default: fake directory create times = no</p>

<p>fake oplocks (S)</p>

<p>Oplocks are the way that SMB clients get permission from
a server to locally cache file operations. If a server
grants an oplock (opportunistic lock) then the client is
free to assume that it is the only one accessing the file
and it will aggressively cache file data. With some oplock
types the client may even cache file open/close operations.
This can give enormous performance benefits.</p>

<p>When you set fake oplocks = yes, smbd(8) will always
grant oplock requests no matter how many clients are using
the file.</p>

<p>It is generally much better to use the real oplocks
support rather than this parameter.</p>

<p>If you enable this option on all read-only shares or
shares that you know will only be accessed from one client
at a time such as physically read-only media like CDROMs,
you will see a big performance improvement on many
operations. If you enable this option on shares where
multiple clients may be accessing the files read-write at
the same time you can get data corruption. Use this option
carefully!</p>

<p>Default: fake oplocks = no</p>

<p>follow symlinks (S)</p>

<p>This parameter allows the Samba administrator to stop
smbd(8) from following symbolic links in a particular share.
Setting this parameter to no prevents any file or directory
that is a symbolic link from being followed (the user will
get an error). This option is very useful to stop users from
adding a symbolic link to /etc/passwd in their home
directory for instance. However it will slow filename
lookups down slightly.</p>

<p>This option is enabled (i.e. smbd will follow symbolic
links) by default.</p>

<p>Default: follow symlinks = yes</p>

<p>force create mode (S)</p>

<p>This parameter specifies a set of UNIX mode bit
permissions that will always be set on a file created by
Samba. This is done by bitwise &rsquo;OR&rsquo;ing these
bits onto the mode bits of a file that is being created. The
default for this parameter is (in octal) 000. The modes in
this parameter are bitwise &rsquo;OR&rsquo;ed onto the file
mode after the mask set in the create mask parameter is
applied.</p>

<p>The example below would force all newly created files to
have read and execute permissions set for
&rsquo;group&rsquo; and &rsquo;other&rsquo; as well as the
read/write/execute bits set for the &rsquo;user&rsquo;.</p>

<p>Default: force create mode = 000</p>

<p>Example: force create mode = 0755</p>

<p>force directory mode (S)</p>

<p>This parameter specifies a set of UNIX mode bit
permissions that will always be set on a directory created
by Samba. This is done by bitwise &rsquo;OR&rsquo;ing these
bits onto the mode bits of a directory that is being
created. The default for this parameter is (in octal) 0000
which will not add any extra permission bits to a created
directory. This operation is done after the mode mask in the
parameter directory mask is applied.</p>

<p>The example below would force all created directories to
have read and execute permissions set for
&rsquo;group&rsquo; and &rsquo;other&rsquo; as well as the
read/write/execute bits set for the &rsquo;user&rsquo;.</p>

<p>Default: force directory mode = 000</p>

<p>Example: force directory mode = 0755</p>

<p>force directory security mode (S)</p>

<p>This parameter controls what UNIX permission bits can be
modified when a Windows NT client is manipulating the UNIX
permission on a directory using the native NT security
dialog box.</p>

<p>This parameter is applied as a mask (OR&rsquo;ed with)
to the changed permission bits, thus forcing any bits in
this mask that the user may have modified to be on. Make
sure not to mix up this parameter with directory security
mask, which works in a similar manner to this one, but uses
a logical AND instead of an OR.</p>

<p>Essentially, this mask may be treated as a set of bits
that, when modifying security on a directory, to will enable
(1) any flags that are off (0) but which the mask has set to
on (1).</p>

<p>If not set explicitly this parameter is 0000, which
allows a user to modify all the user/group/world permissions
on a directory without restrictions.</p>

<p>Note Users who can access the Samba server through other
means can easily bypass this restriction, so it is primarily
useful for standalone &quot;appliance&quot; systems.
Administrators of most normal systems will probably want to
leave it set as 0000. Default: force directory security mode
= 0</p>

<p>Example: force directory security mode = 700</p>

<p>group</p>

<p>This parameter is a synonym for force group.</p>

<p>force group (S)</p>

<p>This specifies a UNIX group name that will be assigned
as the default primary group for all users connecting to
this service. This is useful for sharing files by ensuring
that all access to files on service will use the named group
for their permissions checking. Thus, by assigning
permissions for this group to the files and directories
within this service the Samba administrator can restrict or
allow sharing of these files.</p>

<p>In Samba 2.0.5 and above this parameter has extended
functionality in the following way. If the group name listed
here has a &rsquo;+&rsquo; character prepended to it then
the current user accessing the share only has the primary
group default assigned to this group if they are already
assigned as a member of that group. This allows an
administrator to decide that only users who are already in a
particular group will create files with group ownership set
to that group. This gives a finer granularity of ownership
assignment. For example, the setting force group = +sys
means that only users who are already in group sys will have
their default primary group assigned to sys when accessing
this Samba share. All other users will retain their ordinary
primary group.</p>

<p>If the force user parameter is also set the group
specified in force group will override the primary group set
in force user.</p>

<p>Default: force group =</p>

<p>Example: force group = agroup</p>

<p>force printername (S)</p>

<p>When printing from Windows NT (or later), each printer
in smb.conf has two associated names which can be used by
the client. The first is the sharename (or shortname)
defined in smb.conf. This is the only printername available
for use by Windows 9x clients. The second name associated
with a printer can be seen when browsing to the
&quot;Printers&quot; (or &quot;Printers and Faxes&quot;)
folder on the Samba server. This is referred to simply as
the printername (not to be confused with the printer name
option).</p>

<p>When assigning a new driver to a printer on a remote
Windows compatible print server such as Samba, the Windows
client will rename the printer to match the driver name just
uploaded. This can result in confusion for users when
multiple printers are bound to the same driver. To prevent
Samba from allowing the printer&rsquo;s printername to
differ from the sharename defined in smb.conf, set force
printername = yes.</p>

<p>Be aware that enabling this parameter may affect
migrating printers from a Windows server to Samba since
Windows has no way to force the sharename and printername to
match.</p>

<p>It is recommended that this parameter&rsquo;s value not
be changed once the printer is in use by clients as this
could cause a user not be able to delete printer connections
from their local Printers folder.</p>

<p>Default: force printername = no</p>

<p>force security mode (S)</p>

<p>This parameter controls what UNIX permission bits can be
modified when a Windows NT client is manipulating the UNIX
permission on a file using the native NT security dialog
box.</p>

<p>This parameter is applied as a mask (OR&rsquo;ed with)
to the changed permission bits, thus forcing any bits in
this mask that the user may have modified to be on. Make
sure not to mix up this parameter with security mask, which
works similar like this one but uses logical AND instead of
OR.</p>

<p>Essentially, one bits in this mask may be treated as a
set of bits that, when modifying security on a file, the
user has always set to be on.</p>

<p>If not set explicitly this parameter is set to 0, and
allows a user to modify all the user/group/world permissions
on a file, with no restrictions.</p>

<p>Note that users who can access the Samba server through
other means can easily bypass this restriction, so it is
primarily useful for standalone &quot;appliance&quot;
systems. Administrators of most normal systems will probably
want to leave this set to 0000.</p>

<p>Default: force security mode = 0</p>

<p>Example: force security mode = 700</p>

<p>force unknown acl user (S)</p>

<p>If this parameter is set, a Windows NT ACL that contains
an unknown SID (security descriptor, or representation of a
user or group id) as the owner or group owner of the file
will be silently mapped into the current UNIX uid or gid of
the currently connected user.</p>

<p>This is designed to allow Windows NT clients to copy
files and folders containing ACLs that were created locally
on the client machine and contain users local to that
machine only (no domain users) to be copied to a Samba
server (usually with XCOPY /O) and have the unknown userid
and groupid of the file owner map to the current connected
user. This can only be fixed correctly when winbindd allows
arbitrary mapping from any Windows NT SID to a UNIX uid or
gid.</p>

<p>Try using this parameter when XCOPY /O gives an
ACCESS_DENIED error.</p>

<p>Default: force unknown acl user = no</p>

<p>force user (S)</p>

<p>This specifies a UNIX user name that will be assigned as
the default user for all users connecting to this service.
This is useful for sharing files. You should also use it
carefully as using it incorrectly can cause security
problems.</p>

<p>This user name only gets used once a connection is
established. Thus clients still need to connect as a valid
user and supply a valid password. Once connected, all file
operations will be performed as the &quot;forced user&quot;,
no matter what username the client connected as. This can be
very useful.</p>

<p>In Samba 2.0.5 and above this parameter also causes the
primary group of the forced user to be used as the primary
group for all file activity. Prior to 2.0.5 the primary
group was left as the primary group of the connecting user
(this was a bug).</p>

<p>Default: force user =</p>

<p>Example: force user = auser</p>

<p>fstype (S)</p>

<p>This parameter allows the administrator to configure the
string that specifies the type of filesystem a share is
using that is reported by smbd(8) when a client queries the
filesystem type for a share. The default type is NTFS for
compatibility with Windows NT but this can be changed to
other strings such as Samba or FAT if required.</p>

<p>Default: fstype = NTFS</p>

<p>Example: fstype = Samba</p>

<p>get quota command (G)</p>

<p>The get quota command should only be used whenever there
is no operating system API available from the OS that samba
can use.</p>

<p>This option is only available you have compiled Samba
with the --with-sys-quotas option or on Linux with
--with-quotas and a working quota api was found in the
system.</p>

<p>This parameter should specify the path to a script that
queries the quota information for the specified user/group
for the partition that the specified directory is on.</p>

<p>Such a script should take 3 arguments:</p>

<p>&middot; directory</p>

<p>&middot; type of query</p>

<p>&middot; uid of user or gid of group</p>

<p>The type of query can be one of :</p>

<p>&middot; 1 - user quotas</p>

<p>&middot; 2 - user default quotas (uid = -1)</p>

<p>&middot; 3 - group quotas</p>

<p>&middot; 4 - group default quotas (gid = -1)</p>

<p>This script should print one line as output with spaces
between the arguments. The arguments are:</p>

<p>&middot; Arg 1 - quota flags (0 = no quotas, 1 = quotas
enabled, 2 = quotas enabled and enforced)</p>

<p>&middot; Arg 2 - number of currently used blocks</p>

<p>&middot; Arg 3 - the softlimit number of blocks</p>

<p>&middot; Arg 4 - the hardlimit number of blocks</p>

<p>&middot; Arg 5 - currently used number of inodes</p>

<p>&middot; Arg 6 - the softlimit number of inodes</p>

<p>&middot; Arg 7 - the hardlimit number of inodes</p>

<p>&middot; Arg 8(optional) - the number of bytes in a
block(default is 1024)</p>

<p>Default: get quota command =</p>

<p>Example: get quota command =
/usr/local/sbin/query_quota</p>

<p>getwd cache (G)</p>

<p>This is a tuning option. When this is enabled a caching
algorithm will be used to reduce the time taken for getwd()
calls. This can have a significant impact on performance,
especially when the wide smbconfoptions parameter is set to
no.</p>

<p>Default: getwd cache = yes</p>

<p>guest account (G)</p>

<p>This is a username which will be used for access to
services which are specified as guest ok (see below).
Whatever privileges this user has will be available to any
client connecting to the guest service. This user must exist
in the password file, but does not require a valid login.
The user account &quot;ftp&quot; is often a good choice for
this parameter.</p>

<p>On some systems the default guest account
&quot;nobody&quot; may not be able to print. Use another
account in this case. You should test this by trying to log
in as your guest user (perhaps by using the su - command)
and trying to print using the system print command such as
lpr(1) or lp(1).</p>

<p>This parameter does not accept % macros, because many
parts of the system require this value to be constant for
correct operation.</p>

<p>Default: guest account = nobody # default can be changed
at compile-time</p>

<p>Example: guest account = ftp</p>

<p>public</p>

<p>This parameter is a synonym for guest ok.</p>

<p>guest ok (S)</p>

<p>If this parameter is yes for a service, then no password
is required to connect to the service. Privileges will be
those of the guest account.</p>

<p>This parameter nullifies the benefits of setting
restrict anonymous = 2</p>

<p>See the section below on security for more information
about this option.</p>

<p>Default: guest ok = no</p>

<p>only guest</p>

<p>This parameter is a synonym for guest only.</p>

<p>guest only (S)</p>

<p>If this parameter is yes for a service, then only guest
connections to the service are permitted. This parameter
will have no effect if guest ok is not set for the
service.</p>

<p>See the section below on security for more information
about this option.</p>

<p>Default: guest only = no</p>

<p>hide dot files (S)</p>

<p>This is a boolean parameter that controls whether files
starting with a dot appear as hidden files.</p>

<p>Default: hide dot files = yes</p>

<p>hide files (S)</p>

<p>This is a list of files or directories that are not
visible but are accessible. The DOS &rsquo;hidden&rsquo;
attribute is applied to any files or directories that
match.</p>

<p>Each entry in the list must be separated by a
&rsquo;/&rsquo;, which allows spaces to be included in the
entry. &rsquo;*&rsquo; and &rsquo;?&rsquo; can be used to
specify multiple files or directories as in DOS
wildcards.</p>

<p>Each entry must be a Unix path, not a DOS path and must
not include the Unix directory separator
&rsquo;/&rsquo;.</p>

<p>Note that the case sensitivity option is applicable in
hiding files.</p>

<p>Setting this parameter will affect the performance of
Samba, as it will be forced to check all files and
directories for a match as they are scanned.</p>

<p>The example shown above is based on files that the
Macintosh SMB client (DAVE) available from Thursby creates
for internal use, and also still hides all files beginning
with a dot.</p>

<p>An example of us of this parameter is:</p>

<p>hide files =
/.*/DesktopFolderDB/TrashFor%m/resource.frk/</p>

<p>Default: hide files = # no file are hidden</p>

<p>hide special files (S)</p>

<p>This parameter prevents clients from seeing special
files such as sockets, devices and fifo&rsquo;s in directory
listings.</p>

<p>Default: hide special files = no</p>

<p>hide unreadable (S)</p>

<p>This parameter prevents clients from seeing the
existance of files that cannot be read. Defaults to off.</p>

<p>Default: hide unreadable = no</p>

<p>hide unwriteable files (S)</p>

<p>This parameter prevents clients from seeing the
existance of files that cannot be written to. Defaults to
off. Note that unwriteable directories are shown as
usual.</p>

<p>Default: hide unwriteable files = no</p>

<p>homedir map (G)</p>

<p>If nis homedir is yes, and smbd(8) is also acting as a
Win95/98 logon server then this parameter specifies the NIS
(or YP) map from which the server for the user&rsquo;s home
directory should be extracted. At present, only the Sun
auto.home map format is understood. The form of the map
is:</p>

<p>username server:/some/file/system</p>

<p>and the program will extract the servername from before
the first &rsquo;:&rsquo;. There should probably be a better
parsing system that copes with different map formats and
also Amd (another automounter) maps.</p>

<p>Note A working NIS client is required on the system for
this option to work. Default: homedir map =</p>

<p>Example: homedir map = amd.homedir</p>

<p>host msdfs (G)</p>

<p>If set to yes, Samba will act as a Dfs server, and allow
Dfs-aware clients to browse Dfs trees hosted on the
server.</p>

<p>See also the msdfs root share level parameter. For more
information on setting up a Dfs tree on Samba, refer to the
MSFDS chapter in the book Samba3-HOWTO.</p>

<p>Default: host msdfs = yes</p>

<p>hostname lookups (G)</p>

<p>Specifies whether samba should use (expensive) hostname
lookups or use the ip addresses instead. An example place
where hostname lookups are currently used is when checking
the hosts deny and hosts allow.</p>

<p>Default: hostname lookups = no</p>

<p>Example: hostname lookups = yes</p>

<p>allow hosts</p>

<p>This parameter is a synonym for hosts allow.</p>

<p>hosts allow (S)</p>

<p>A synonym for this parameter is allow hosts.</p>

<p>This parameter is a comma, space, or tab delimited set
of hosts which are permitted to access a service.</p>

<p>If specified in the [global] section then it will apply
to all services, regardless of whether the individual
service has a different setting.</p>

<p>You can specify the hosts by name or IP number. For
example, you could restrict access to only the hosts on a
Class C subnet with something like allow hosts = 150.203.5..
The full syntax of the list is described in the man page
hosts_access(5). Note that this man page may not be present
on your system, so a brief description will be given here
also.</p>

<p>Note that the localhost address 127.0.0.1 will always be
allowed access unless specifically denied by a hosts deny
option.</p>

<p>You can also specify hosts by network/netmask pairs and
by netgroup names if your system supports netgroups. The
EXCEPT keyword can also be used to limit a wildcard list.
The following examples may provide some help:</p>

<p>Example 1: allow all IPs in 150.203.*.*; except one</p>

<p>hosts allow = 150.203. EXCEPT 150.203.6.66</p>

<p>Example 2: allow hosts that match the given
network/netmask</p>

<p>hosts allow = 150.203.15.0/255.255.255.0</p>

<p>Example 3: allow a couple of hosts</p>

<p>hosts allow = lapland, arvidsjaur</p>

<p>Example 4: allow only hosts in NIS netgroup
&quot;foonet&quot;, but deny access from one particular
host</p>

<p>hosts allow = @foonet</p>

<p>hosts deny = pirate</p>

<p>Note Note that access still requires suitable user-level
passwords. See testparm(1) for a way of testing your host
access to see if it does what you expect.</p>

<p>Default: hosts allow = # none (i.e., all hosts permitted
access)</p>

<p>Example: hosts allow = 150.203.5.
myhost.mynet.edu.au</p>

<p>deny hosts</p>

<p>This parameter is a synonym for hosts deny.</p>

<p>hosts deny (S)</p>

<p>The opposite of hosts allow - hosts listed here are NOT
permitted access to services unless the specific services
have their own lists to override this one. Where the lists
conflict, the allow list takes precedence.</p>

<p>In the event that it is necessary to deny all by
default, use the keyword ALL (or the netmask 0.0.0.0/0) and
then explicitly specify to the hosts allow = hosts allow
parameter those hosts that should be permitted access.</p>

<p>Default: hosts deny = # none (i.e., no hosts
specifically excluded)</p>

<p>Example: hosts deny = 150.203.4.
badhost.mynet.edu.au</p>

<p>idmap backend (G)</p>

<p>The idmap backend provides a plugin interface for
Winbind to use varying backends to store SID/uid/gid mapping
tables.</p>

<p>This option specifies the default backend that is used
when no special configuration set, but it is now deprecated
in favour of the new spelling idmap config * : backend.</p>

<p>Default: idmap backend = tdb</p>

<p>idmap cache time (G)</p>

<p>This parameter specifies the number of seconds that
Winbind&rsquo;s idmap interface will cache positive
SID/uid/gid query results.</p>

<p>Default: idmap cache time = 604800 (one week)</p>

<p>idmap config (G)</p>

<p>ID mapping in Samba is the mapping between Windows SIDs
and Unix user and group IDs. This is performed by Winbindd
with a configurable plugin interface. Samba&rsquo;s ID
mapping is configured by options starting with the idmap
config prefix. An idmap option consists of the idmap config
prefix, followed by a domain name or the asterisk character
(*), a colon, and the name of an idmap setting for the
chosen domain.</p>

<p>The idmap configuration is hence divided into groups,
one group for each domain to be configured, and one group
with the the asterisk instead of a proper domain name, which
speifies the default configuration that is used to catch all
domains that do not have an explicit idmap configuration of
their own.</p>

<p>There are three general options available:</p>

<p>backend = backend_name This specifies the name of the
idmap plugin to use as the SID/uid/gid backend for this
domain. The standard backends are tdb (idmap_tdb(8)), tdb2
(idmap_tdb2(8)), ldap (idmap_ldap(8)), , rid (idmap_rid(8)),
, hash (idmap_hash(8)), , autorid (idmap_autorid(8)), , ad
(idmap_ad(8)), , adex (idmap_adex(8)), , and nss.
(idmap_nss(8)), The corresponding manual pages contain the
details, but here is a summary.</p>

<p>The first three of these create mappings of their own
using internal unixid counters and store the mappings in a
database. These are suitable for use in the default idmap
configuration. The rid and hash backends use a pure
algorithmic calculation to determine the unixid for a SID.
The autorid module is a mixture of the tdb and rid backend.
It creates ranges for each domain encountered and then uses
the rid algorithm for each of these automatically configured
domains individually. The ad and adex backends both use unix
IDs stored in Active Directory via the standard schema
extensions. The nss backend reverses the standard winbindd
setup and gets the unixids via names from nsswitch which can
be useful in an ldap setup.</p>

<p>range = low - high Defines the available matching uid
and gid range for which the backend is authoritative. For
allocating backends, this also defines the start and the end
of the range for allocating new unid IDs.</p>

<p>winbind uses this parameter to find the backend that is
authoritative for a unix ID to SID mapping, so it must be
set for each individually configured domain and for the
default configuration. The configured ranges must be
mutually disjoint.</p>

<p>read only = yes|no This option can be used to turn the
writing backends tdb, tdb2, and ldap into read only mode.
This can be useful e.g. in cases where a pre-filled database
exists that should not be extended automatically.</p>

<p>The following example illustrates how to configure the
idmap_ad(8) backend for the CORP domain and the idmap_tdb(8)
backend for all other domains. This configuration assumes
that the admin of CORP assigns unix ids below 1000000 via
the SFU extensions, and winbind is supposed to use the next
million entries for its own mappings from trusted domains
and for local groups for example.</p>

<p>idmap config * : backend = tdb idmap config * : range =
1000000-1999999</p>

<p>idmap config CORP : backend = ad idmap config CORP :
range = 1000-999999</p>

<p>No default</p>

<p>winbind gid</p>

<p>This parameter is a synonym for idmap gid.</p>

<p>idmap gid (G)</p>

<p>The idmap gid parameter specifies the range of group ids
for the default idmap configuration. It is now deprecated in
favour of idmap config * : range.</p>

<p>See the idmap config option.</p>

<p>Default: idmap gid =</p>

<p>Example: idmap gid = 10000-20000</p>

<p>idmap negative cache time (G)</p>

<p>This parameter specifies the number of seconds that
Winbind&rsquo;s idmap interface will cache negative
SID/uid/gid query results.</p>

<p>Default: idmap negative cache time = 120</p>

<p>winbind uid</p>

<p>This parameter is a synonym for idmap uid.</p>

<p>idmap uid (G)</p>

<p>The idmap uid parameter specifies the range of user ids
for the default idmap configuration. It is now deprecated in
favour of idmap config * : range.</p>

<p>See the idmap config option.</p>

<p>Default: idmap uid =</p>

<p>Example: idmap uid = 10000-20000</p>

<p>include (G)</p>

<p>This allows you to include one config file inside
another. The file is included literally, as though typed in
place.</p>

<p>It takes the standard substitutions, except %u, %P and
%S.</p>

<p>The parameter include = registry has a special meaning:
It does not include a file named registry from the current
working directory, but instead reads the global
configuration options from the registry. See the section on
registry-based configuration for details. Note that this
option automatically activates registry shares.</p>

<p>Default: include =</p>

<p>Example: include =
/usr/local/samba/lib/admin_smb.conf</p>

<p>inherit acls (S)</p>

<p>This parameter can be used to ensure that if default
acls exist on parent directories, they are always honored
when creating a new file or subdirectory in these parent
directories. The default behavior is to use the unix mode
specified when creating the directory. Enabling this option
sets the unix mode to 0777, thus guaranteeing that default
directory acls are propagated. Note that using the VFS
modules acl_xattr or acl_tdb which store native Windows as
meta-data will automatically turn this option on for any
share for which they are loaded, as they require this option
to emulate Windows ACLs correctly.</p>

<p>Default: inherit acls = no</p>

<p>inherit owner (S)</p>

<p>The ownership of new files and directories is normally
governed by effective uid of the connected user. This option
allows the Samba administrator to specify that the ownership
for new files and directories should be controlled by the
ownership of the parent directory.</p>

<p>Common scenarios where this behavior is useful is in
implementing drop-boxes where users can create and edit
files but not delete them and to ensure that newly create
files in a user&rsquo;s roaming profile directory are
actually owner by the user.</p>

<p>Default: inherit owner = no</p>

<p>inherit permissions (S)</p>

<p>The permissions on new files and directories are
normally governed by create mask, directory mask, force
create mode and force directory mode but the boolean inherit
permissions parameter overrides this.</p>

<p>New directories inherit the mode of the parent
directory, including bits such as setgid.</p>

<p>New files inherit their read/write bits from the parent
directory. Their execute bits continue to be determined by
map archive, map hidden and map system as usual.</p>

<p>Note that the setuid bit is never set via inheritance
(the code explicitly prohibits this).</p>

<p>This can be particularly useful on large systems with
many users, perhaps several thousand, to allow a single
[homes] share to be used flexibly by each user.</p>

<p>Default: inherit permissions = no</p>

<p>init logon delayed hosts (G)</p>

<p>This parameter takes a list of host names, addresses or
networks for which the initial samlogon reply should be
delayed (so other DCs get preferred by XP workstations if
there are any).</p>

<p>The length of the delay can be specified with the init
logon delay parameter.</p>

<p>Default: init logon delayed hosts =</p>

<p>Example: init logon delayed hosts = 150.203.5.
myhost.mynet.de</p>

<p>init logon delay (G)</p>

<p>This parameter specifies a delay in milliseconds for the
hosts configured for delayed initial samlogon with init
logon delayed hosts.</p>

<p>Default: init logon delay = 100</p>

<p>interfaces (G)</p>

<p>This option allows you to override the default network
interfaces list that Samba will use for browsing, name
registration and other NetBIOS over TCP/IP (NBT) traffic. By
default Samba will query the kernel for the list of all
active interfaces and use any interfaces except 127.0.0.1
that are broadcast capable.</p>

<p>The option takes a list of interface strings. Each
string can be in any of the following forms:</p>

<p>&middot; a network interface name (such as eth0). This
may include shell-like wildcards so eth* will match any
interface starting with the substring &quot;eth&quot;</p>

<p>&middot; an IP address. In this case the netmask is
determined from the list of interfaces obtained from the
kernel</p>

<p>&middot; an IP/mask pair.</p>

<p>&middot; a broadcast/mask pair.</p>

<p>The &quot;mask&quot; parameters can either be a bit
length (such as 24 for a C class network) or a full netmask
in dotted decimal form.</p>

<p>The &quot;IP&quot; parameters above can either be a full
dotted decimal IP address or a hostname which will be looked
up via the OS&rsquo;s normal hostname resolution
mechanisms.</p>

<p>By default Samba enables all active interfaces that are
broadcast capable except the loopback adaptor (IP address
127.0.0.1).</p>

<p>The example below configures three network interfaces
corresponding to the eth0 device and IP addresses
192.168.2.10 and 192.168.3.10. The netmasks of the latter
two interfaces would be set to 255.255.255.0.</p>

<p>Default: interfaces =</p>

<p>Example: interfaces = eth0 192.168.2.10/24
192.168.3.10/255.255.255.0</p>

<p>invalid users (S)</p>

<p>This is a list of users that should not be allowed to
login to this service. This is really a paranoid check to
absolutely ensure an improper setting does not breach your
security.</p>

<p>A name starting with a &rsquo;@&rsquo; is interpreted as
an NIS netgroup first (if your system supports NIS), and
then as a UNIX group if the name was not found in the NIS
netgroup database.</p>

<p>A name starting with &rsquo;+&rsquo; is interpreted only
by looking in the UNIX group database via the NSS getgrnam()
interface. A name starting with &rsquo;&amp;&rsquo; is
interpreted only by looking in the NIS netgroup database
(this requires NIS to be working on your system). The
characters &rsquo;+&rsquo; and &rsquo;&amp;&rsquo; may be
used at the start of the name in either order so the value
+&amp;group means check the UNIX group database, followed by
the NIS netgroup database, and the value &amp;+group means
check the NIS netgroup database, followed by the UNIX group
database (the same as the &rsquo;@&rsquo; prefix).</p>

<p>The current servicename is substituted for %S. This is
useful in the [homes] section.</p>

<p>Default: invalid users = # no invalid users</p>

<p>Example: invalid users = root fred admin @wheel</p>

<p>iprint server (G)</p>

<p>This parameter is only applicable if printing is set to
iprint.</p>

<p>If set, this option overrides the ServerName option in
the CUPS client.conf. This is necessary if you have virtual
samba servers that connect to different CUPS daemons.</p>

<p>Default: iprint server = &quot;&quot;</p>

<p>Example: iprint server = MYCUPSSERVER</p>

<p>keepalive (G)</p>

<p>The value of the parameter (an integer) represents the
number of seconds between keepalive packets. If this
parameter is zero, no keepalive packets will be sent.
Keepalive packets, if sent, allow the server to tell whether
a client is still present and responding.</p>

<p>Keepalives should, in general, not be needed if the
socket has the SO_KEEPALIVE attribute set on it by default.
(see socket options). Basically you should only use this
option if you strike difficulties.</p>

<p>Default: keepalive = 300</p>

<p>Example: keepalive = 600</p>

<p>kerberos method (G)</p>

<p>Controls how kerberos tickets are verified.</p>

<p>Valid options are:</p>

<p>&middot; secrets only - use only the secrets.tdb for
ticket verification (default)</p>

<p>&middot; system keytab - use only the system keytab for
ticket verification</p>

<p>&middot; dedicated keytab - use a dedicated keytab for
ticket verification</p>

<p>&middot; secrets and keytab - use the secrets.tdb first,
then the system keytab</p>

<p>The major difference between &quot;system keytab&quot;
and &quot;dedicated keytab&quot; is that the latter method
relies on kerberos to find the correct keytab entry instead
of filtering based on expected principals.</p>

<p>When the kerberos method is in &quot;dedicated
keytab&quot; mode, dedicated keytab file must be set to
specify the location of the keytab file.</p>

<p>Default: kerberos method = secrets only</p>

<p>kernel change notify (S)</p>

<p>This parameter specifies whether Samba should ask the
kernel for change notifications in directories so that SMB
clients can refresh whenever the data on the server
changes.</p>

<p>This parameter is only used when your kernel supports
change notification to user programs using the inotify
interface.</p>

<p>Default: kernel change notify = yes</p>

<p>kernel oplocks (G)</p>

<p>For UNIXes that support kernel based oplocks (currently
only IRIX and the Linux 2.4 kernel), this parameter allows
the use of them to be turned on or off.</p>

<p>Kernel oplocks support allows Samba oplocks to be broken
whenever a local UNIX process or NFS operation accesses a
file that smbd(8) has oplocked. This allows complete data
consistency between SMB/CIFS, NFS and local file access (and
is a very cool feature :-).</p>

<p>This parameter defaults to on, but is translated to a
no-op on systems that no not have the necessary kernel
support. You should never need to touch this parameter.</p>

<p>Default: kernel oplocks = yes</p>

<p>lanman auth (G)</p>

<p>This parameter determines whether or not smbd(8) will
attempt to authenticate users or permit password changes
using the LANMAN password hash. If disabled, only clients
which support NT password hashes (e.g. Windows NT/2000
clients, smbclient, but not Windows 95/98 or the MS DOS
network client) will be able to connect to the Samba
host.</p>

<p>The LANMAN encrypted response is easily broken, due to
its case-insensitive nature, and the choice of algorithm.
Servers without Windows 95/98/ME or MS DOS clients are
advised to disable this option.</p>

<p>When this parameter is set to no this will also result
in sambaLMPassword in Samba&rsquo;s passdb being blanked
after the next password change. As a result of that lanman
clients won&rsquo;t be able to authenticate, even if lanman
auth is reenabled later on.</p>

<p>Unlike the encrypt passwords option, this parameter
cannot alter client behaviour, and the LANMAN response will
still be sent over the network. See the client lanman auth
to disable this for Samba&rsquo;s clients (such as
smbclient)</p>

<p>If this option, and ntlm auth are both disabled, then
only NTLMv2 logins will be permited. Not all clients support
NTLMv2, and most will require special configuration to use
it.</p>

<p>Default: lanman auth = no</p>

<p>large readwrite (G)</p>

<p>This parameter determines whether or not smbd(8)
supports the new 64k streaming read and write variant SMB
requests introduced with Windows 2000. Note that due to
Windows 2000 client redirector bugs this requires Samba to
be running on a 64-bit capable operating system such as
IRIX, Solaris or a Linux 2.4 kernel. Can improve performance
by 10% with Windows 2000 clients. Defaults to on. Not as
tested as some other Samba code paths.</p>

<p>Default: large readwrite = yes</p>

<p>ldap admin dn (G)</p>

<p>The ldap admin dn defines the Distinguished Name (DN)
name used by Samba to contact the ldap server when
retreiving user account information. The ldap admin dn is
used in conjunction with the admin dn password stored in the
private/secrets.tdb file. See the smbpasswd(8) man page for
more information on how to accomplish this.</p>

<p>The ldap admin dn requires a fully specified DN. The
ldap suffix is not appended to the ldap admin dn.</p>

<p>No default</p>

<p>ldap connection timeout (G)</p>

<p>This parameter tells the LDAP library calls which
timeout in seconds they should honor during initial
connection establishments to LDAP servers. It is very useful
in failover scenarios in particular. If one or more LDAP
servers are not reachable at all, we do not have to wait
until TCP timeouts are over. This feature must be supported
by your LDAP library.</p>

<p>This parameter is different from ldap timeout which
affects operations on LDAP servers using an existing
connection and not establishing an initial connection.</p>

<p>Default: ldap connection timeout = 2</p>

<p>ldap debug level (G)</p>

<p>This parameter controls the debug level of the LDAP
library calls. In the case of OpenLDAP, it is the same
bit-field as understood by the server and documented in the
slapd.conf(5) manpage. A typical useful value will be 1 for
tracing function calls.</p>

<p>The debug ouput from the LDAP libraries appears with the
prefix [LDAP] in Samba&rsquo;s logging output. The level at
which LDAP logging is printed is controlled by the parameter
ldap debug threshold.</p>

<p>Default: ldap debug level = 0</p>

<p>Example: ldap debug level = 1</p>

<p>ldap debug threshold (G)</p>

<p>This parameter controls the Samba debug level at which
the ldap library debug output is printed in the Samba logs.
See the description of ldap debug level for details.</p>

<p>Default: ldap debug threshold = 10</p>

<p>Example: ldap debug threshold = 5</p>

<p>ldap delete dn (G)</p>

<p>This parameter specifies whether a delete operation in
the ldapsam deletes the complete entry or only the
attributes specific to Samba.</p>

<p>Default: ldap delete dn = no</p>

<p>ldap deref (G)</p>

<p>This option controls whether Samba should tell the LDAP
library to use a certain alias dereferencing method. The
default is auto, which means that the default setting of the
ldap client library will be kept. Other possible values are
never, finding, searching and always. Grab your LDAP manual
for more information.</p>

<p>Default: ldap deref = auto</p>

<p>Example: ldap deref = searching</p>

<p>ldap follow referral (G)</p>

<p>This option controls whether to follow LDAP referrals or
not when searching for entries in the LDAP database.
Possible values are on to enable following referrals, off to
disable this, and auto, to use the libldap default settings.
libldap&rsquo;s choice of following referrals or not is set
in /etc/openldap/ldap.conf with the REFERRALS parameter as
documented in ldap.conf(5).</p>

<p>Default: ldap follow referral = auto</p>

<p>Example: ldap follow referral = off</p>

<p>ldap group suffix (G)</p>

<p>This parameter specifies the suffix that is used for
groups when these are added to the LDAP directory. If this
parameter is unset, the value of ldap suffix will be used
instead. The suffix string is pre-pended to the ldap suffix
string so use a partial DN.</p>

<p>Default: ldap group suffix =</p>

<p>Example: ldap group suffix = ou=Groups</p>

<p>ldap idmap suffix (G)</p>

<p>This parameters specifies the suffix that is used when
storing idmap mappings. If this parameter is unset, the
value of ldap suffix will be used instead. The suffix string
is pre-pended to the ldap suffix string so use a partial
DN.</p>

<p>Default: ldap idmap suffix =</p>

<p>Example: ldap idmap suffix = ou=Idmap</p>

<p>ldap machine suffix (G)</p>

<p>It specifies where machines should be added to the ldap
tree. If this parameter is unset, the value of ldap suffix
will be used instead. The suffix string is pre-pended to the
ldap suffix string so use a partial DN.</p>

<p>Default: ldap machine suffix =</p>

<p>Example: ldap machine suffix = ou=Computers</p>

<p>ldap page size (G)</p>

<p>This parameter specifies the number of entries per
page.</p>

<p>If the LDAP server supports paged results, clients can
request subsets of search results (pages) instead of the
entire list. This parameter specifies the size of these
pages.</p>

<p>Default: ldap page size = 1024</p>

<p>Example: ldap page size = 512</p>

<p>ldap passwd sync (G)</p>

<p>This option is used to define whether or not Samba
should sync the LDAP password with the NT and LM hashes for
normal accounts (NOT for workstation, server or domain
trusts) on a password change via SAMBA.</p>

<p>The ldap passwd sync can be set to one of three
values:</p>

<p>&middot; Yes = Try to update the LDAP, NT and LM
passwords and update the pwdLastSet time.</p>

<p>&middot; No = Update NT and LM passwords and update the
pwdLastSet time.</p>

<p>&middot; Only = Only update the LDAP password and let
the LDAP server do the rest.</p>

<p>Default: ldap passwd sync = no</p>

<p>ldap replication sleep (G)</p>

<p>When Samba is asked to write to a read-only LDAP
replica, we are redirected to talk to the read-write master
server. This server then replicates our changes back to the
&rsquo;local&rsquo; server, however the replication might
take some seconds, especially over slow links. Certain
client activities, particularly domain joins, can become
confused by the &rsquo;success&rsquo; that does not
immediately change the LDAP back-end&rsquo;s data.</p>

<p>This option simply causes Samba to wait a short time, to
allow the LDAP server to catch up. If you have a
particularly high-latency network, you may wish to time the
LDAP replication with a network sniffer, and increase this
value accordingly. Be aware that no checking is performed
that the data has actually replicated.</p>

<p>The value is specified in milliseconds, the maximum
value is 5000 (5 seconds).</p>

<p>Default: ldap replication sleep = 1000</p>

<p>ldapsam:editposix (G)</p>

<p>Editposix is an option that leverages ldapsam:trusted to
make it simpler to manage a domain controller eliminating
the need to set up custom scripts to add and manage the
posix users and groups. This option will instead directly
manipulate the ldap tree to create, remove and modify user
and group entries. This option also requires a running
winbindd as it is used to allocate new uids/gids on
user/group creation. The allocation range must be therefore
configured.</p>

<p>To use this option, a basic ldap tree must be provided
and the ldap suffix parameters must be properly configured.
On virgin servers the default users and groups
(Administrator, Guest, Domain Users, Domain Admins, Domain
Guests) can be precreated with the command net sam
provision. To run this command the ldap server must be
running, Winindd must be running and the smb.conf ldap
options must be properly configured. The typical ldap setup
used with the ldapsam:trusted = yes option is usually
sufficient to use ldapsam:editposix = yes as well.</p>

<p>An example configuration can be the following:</p>

<p>encrypt passwords = true passdb backend = ldapsam</p>

<p>ldapsam:trusted=yes ldapsam:editposix=yes</p>

<p>ldap admin dn = cn=admin,dc=samba,dc=org ldap delete dn
= yes ldap group suffix = ou=groups ldap idmap suffix =
ou=idmap ldap machine suffix = ou=computers ldap user suffix
= ou=users ldap suffix = dc=samba,dc=org</p>

<p>idmap backend = ldap:&quot;ldap://localhost&quot;</p>

<p>idmap uid = 5000-50000 idmap gid = 5000-50000</p>

<p>This configuration assumes a directory layout like
described in the following ldif:</p>

<p>dn: dc=samba,dc=org objectClass: top objectClass:
dcObject objectClass: organization o: samba.org dc:
samba</p>

<p>dn: cn=admin,dc=samba,dc=org objectClass:
simpleSecurityObject objectClass: organizationalRole cn:
admin description: LDAP administrator userPassword:
secret</p>

<p>dn: ou=users,dc=samba,dc=org objectClass: top
objectClass: organizationalUnit ou: users</p>

<p>dn: ou=groups,dc=samba,dc=org objectClass: top
objectClass: organizationalUnit ou: groups</p>

<p>dn: ou=idmap,dc=samba,dc=org objectClass: top
objectClass: organizationalUnit ou: idmap</p>

<p>dn: ou=computers,dc=samba,dc=org objectClass: top
objectClass: organizationalUnit ou: computers</p>

<p>Default: ldapsam:editposix = no</p>

<p>ldapsam:trusted (G)</p>

<p>By default, Samba as a Domain Controller with an LDAP
backend needs to use the Unix-style NSS subsystem to access
user and group information. Due to the way Unix stores user
information in /etc/passwd and /etc/group this inevitably
leads to inefficiencies. One important question a user needs
to know is the list of groups he is member of. The plain
UNIX model involves a complete enumeration of the file
/etc/group and its NSS counterparts in LDAP. UNIX has
optimized functions to enumerate group membership. Sadly,
other functions that are used to deal with user and group
attributes lack such optimization.</p>

<p>To make Samba scale well in large environments, the
ldapsam:trusted = yes option assumes that the complete user
and group database that is relevant to Samba is stored in
LDAP with the standard posixAccount/posixGroup attributes.
It further assumes that the Samba auxiliary object classes
are stored together with the POSIX data in the same LDAP
object. If these assumptions are met, ldapsam:trusted = yes
can be activated and Samba can bypass the NSS system to
query user group memberships. Optimized LDAP queries can
greatly speed up domain logon and administration tasks.
Depending on the size of the LDAP database a factor of 100
or more for common queries is easily achieved.</p>

<p>Default: ldapsam:trusted = no</p>

<p>ldap ssl ads (G)</p>

<p>This option is used to define whether or not Samba
should use SSL when connecting to the ldap server using ads
methods. Rpc methods are not affected by this parameter.
Please note, that this parameter won&rsquo;t have any effect
if ldap ssl is set to no.</p>

<p>See smb.conf(5) for more information on ldap ssl.</p>

<p>Default: ldap ssl ads = no</p>

<p>ldap ssl (G)</p>

<p>This option is used to define whether or not Samba
should use SSL when connecting to the ldap server This is
NOT related to Samba&rsquo;s previous SSL support which was
enabled by specifying the --with-ssl option to the configure
script.</p>

<p>LDAP connections should be secured where possible. This
may be done setting either this parameter to Start_tlsor by
specifying ldaps:// in the URL argument of passdb
backend.</p>

<p>The ldap ssl can be set to one of two values:</p>

<p>&middot; Off = Never use SSL when querying the
directory.</p>

<p>&middot; start tls = Use the LDAPv3 StartTLS extended
operation (RFC2830) for communicating with the directory
server.</p>

<p>Please note that this parameter does only affect rpc
methods. To enable the LDAPv3 StartTLS extended operation
(RFC2830) for ads, set ldap ssl = yesandldap ssl ads = yes.
See smb.conf(5) for more information on ldap ssl ads.</p>

<p>Default: ldap ssl = start tls</p>

<p>ldap suffix (G)</p>

<p>Specifies the base for all ldap suffixes and for storing
the sambaDomain object.</p>

<p>The ldap suffix will be appended to the values specified
for the ldap user suffix, ldap group suffix, ldap machine
suffix, and the ldap idmap suffix. Each of these should be
given only a DN relative to the ldap suffix.</p>

<p>Default: ldap suffix =</p>

<p>Example: ldap suffix = dc=samba,dc=org</p>

<p>ldap timeout (G)</p>

<p>This parameter defines the number of seconds that Samba
should use as timeout for LDAP operations.</p>

<p>Default: ldap timeout = 15</p>

<p>ldap user suffix (G)</p>

<p>This parameter specifies where users are added to the
tree. If this parameter is unset, the value of ldap suffix
will be used instead. The suffix string is pre-pended to the
ldap suffix string so use a partial DN.</p>

<p>Default: ldap user suffix =</p>

<p>Example: ldap user suffix = ou=people</p>

<p>level2 oplocks (S)</p>

<p>This parameter controls whether Samba supports level2
(read-only) oplocks on a share.</p>

<p>Level2, or read-only oplocks allow Windows NT clients
that have an oplock on a file to downgrade from a read-write
oplock to a read-only oplock once a second client opens the
file (instead of releasing all oplocks on a second open, as
in traditional, exclusive oplocks). This allows all openers
of the file that support level2 oplocks to cache the file
for read-ahead only (ie. they may not cache writes or lock
requests) and increases performance for many accesses of
files that are not commonly written (such as application
.EXE files).</p>

<p>Once one of the clients which have a read-only oplock
writes to the file all clients are notified (no reply is
needed or waited for) and told to break their oplocks to
&quot;none&quot; and delete any read-ahead caches.</p>

<p>It is recommended that this parameter be turned on to
speed access to shared executables.</p>

<p>For more discussions on level2 oplocks see the CIFS
spec.</p>

<p>Currently, if kernel oplocks are supported then level2
oplocks are not granted (even if this parameter is set to
yes). Note also, the oplocks parameter must be set to yes on
this share in order for this parameter to have any
effect.</p>

<p>Default: level2 oplocks = yes</p>

<p>lm announce (G)</p>

<p>This parameter determines if nmbd(8) will produce Lanman
announce broadcasts that are needed by OS/2 clients in order
for them to see the Samba server in their browse list. This
parameter can have three values, yes, no, or auto. The
default is auto. If set to no Samba will never produce these
broadcasts. If set to yes Samba will produce Lanman announce
broadcasts at a frequency set by the parameter lm interval.
If set to auto Samba will not send Lanman announce
broadcasts by default but will listen for them. If it hears
such a broadcast on the wire it will then start sending them
at a frequency set by the parameter lm interval.</p>

<p>Default: lm announce = auto</p>

<p>Example: lm announce = yes</p>

<p>lm interval (G)</p>

<p>If Samba is set to produce Lanman announce broadcasts
needed by OS/2 clients (see the lm announce parameter) then
this parameter defines the frequency in seconds with which
they will be made. If this is set to zero then no Lanman
announcements will be made despite the setting of the lm
announce parameter.</p>

<p>Default: lm interval = 60</p>

<p>Example: lm interval = 120</p>

<p>load printers (G)</p>

<p>A boolean variable that controls whether all printers in
the printcap will be loaded for browsing by default. See the
printers section for more details.</p>

<p>Default: load printers = yes</p>

<p>local master (G)</p>

<p>This option allows nmbd(8) to try and become a local
master browser on a subnet. If set to no then nmbd will not
attempt to become a local master browser on a subnet and
will also lose in all browsing elections. By default this
value is set to yes. Setting this value to yes doesn&rsquo;t
mean that Samba will become the local master browser on a
subnet, just that nmbd will participate in elections for
local master browser.</p>

<p>Setting this value to no will cause nmbdnever to become
a local master browser.</p>

<p>Default: local master = yes</p>

<p>lock dir</p>

<p>This parameter is a synonym for lock directory.</p>

<p>lock directory (G)</p>

<p>This option specifies the directory where lock files
will be placed. The lock files are used to implement the max
connections option.</p>

<p>Note: This option can not be set inside registry
configurations.</p>

<p>Default: lock directory = ${prefix}/var/locks</p>

<p>Example: lock directory = /var/run/samba/locks</p>

<p>locking (S)</p>

<p>This controls whether or not locking will be performed
by the server in response to lock requests from the
client.</p>

<p>If locking = no, all lock and unlock requests will
appear to succeed and all lock queries will report that the
file in question is available for locking.</p>

<p>If locking = yes, real locking will be performed by the
server.</p>

<p>This option may be useful for read-only filesystems
which may not need locking (such as CDROM drives), although
setting this parameter of no is not really recommended even
in this case.</p>

<p>Be careful about disabling locking either globally or in
a specific service, as lack of locking may result in data
corruption. You should never need to set this parameter.</p>

<p>No default</p>

<p>lock spin count (G)</p>

<p>This parameter has been made inoperative in Samba
3.0.24. The functionality it contolled is now controlled by
the parameter lock spin time.</p>

<p>Default: lock spin count = 0</p>

<p>lock spin time (G)</p>

<p>The time in milliseconds that smbd should keep waiting
to see if a failed lock request can be granted. This
parameter has changed in default value from Samba 3.0.23
from 10 to 200. The associated lock spin count parameter is
no longer used in Samba 3.0.24. You should not need to
change the value of this parameter.</p>

<p>Default: lock spin time = 200</p>

<p>log file (G)</p>

<p>This option allows you to override the name of the Samba
log file (also known as the debug file).</p>

<p>This option takes the standard substitutions, allowing
you to have separate log files for each user or machine.</p>

<p>No default</p>

<p>Example: log file = /usr/local/samba/var/log.%m</p>

<p>debuglevel</p>

<p>This parameter is a synonym for log level.</p>

<p>log level (G)</p>

<p>The value of the parameter (a astring) allows the debug
level (logging level) to be specified in the smb.conf
file.</p>

<p>This parameter has been extended since the 2.2.x series,
now it allows to specify the debug level for multiple debug
classes. This is to give greater flexibility in the
configuration of the system. The following debug classes are
currently implemented:</p>

<p>&middot; all</p>

<p>&middot; tdb</p>

<p>&middot; printdrivers</p>

<p>&middot; lanman</p>

<p>&middot; smb</p>

<p>&middot; rpc_parse</p>

<p>&middot; rpc_srv</p>

<p>&middot; rpc_cli</p>

<p>&middot; passdb</p>

<p>&middot; sam</p>

<p>&middot; auth</p>

<p>&middot; winbind</p>

<p>&middot; vfs</p>

<p>&middot; idmap</p>

<p>&middot; quota</p>

<p>&middot; acls</p>

<p>&middot; locking</p>

<p>&middot; msdfs</p>

<p>&middot; dmapi</p>

<p>&middot; registry</p>

<p>Default: log level = 0</p>

<p>Example: log level = 3 passdb:5 auth:10 winbind:2</p>

<p>logon drive (G)</p>

<p>This parameter specifies the local path to which the
home directory will be connected (see logon home) and is
only used by NT Workstations.</p>

<p>Note that this option is only useful if Samba is set up
as a logon server.</p>

<p>Default: logon drive =</p>

<p>Example: logon drive = h:</p>

<p>logon home (G)</p>

<p>This parameter specifies the home directory location
when a Win95/98 or NT Workstation logs into a Samba PDC. It
allows you to do</p>

<p>C:&gt;NET USE H: /HOME</p>

<p>from a command prompt, for example.</p>

<p>This option takes the standard substitutions, allowing
you to have separate logon scripts for each user or
machine.</p>

<p>This parameter can be used with Win9X workstations to
ensure that roaming profiles are stored in a subdirectory of
the user&rsquo;s home directory. This is done in the
following way:</p>

<p>logon home = \%NUrofile</p>

<p>This tells Samba to return the above string, with
substitutions made when a client requests the info,
generally in a NetUserGetInfo request. Win9X clients
truncate the info to \serverre when a user does net use
/home but use the whole string when dealing with
profiles.</p>

<p>Note that in prior versions of Samba, the logon path was
returned rather than logon home. This broke net use /home
but allowed profiles outside the home directory. The current
implementation is correct, and can be used for profiles if
you use the above trick.</p>

<p>Disable this feature by setting logon home =
&quot;&quot; - using the empty string.</p>

<p>This option is only useful if Samba is set up as a logon
server.</p>

<p>Default: logon home = %N%U</p>

<p>Example: logon home = remote_smb_server%U</p>

<p>logon path (G)</p>

<p>This parameter specifies the directory where roaming
profiles (Desktop, NTuser.dat, etc) are stored. Contrary to
previous versions of these manual pages, it has nothing to
do with Win 9X roaming profiles. To find out how to handle
roaming profiles for Win 9X system, see the logon home
parameter.</p>

<p>This option takes the standard substitutions, allowing
you to have separate logon scripts for each user or machine.
It also specifies the directory from which the
&quot;Application Data&quot;, desktop, start menu, network
neighborhood, programs and other folders, and their
contents, are loaded and displayed on your Windows NT
client.</p>

<p>The share and the path must be readable by the user for
the preferences and directories to be loaded onto the
Windows NT client. The share must be writeable when the user
logs in for the first time, in order that the Windows NT
client can create the NTuser.dat and other directories.
Thereafter, the directories and any of the contents can, if
required, be made read-only. It is not advisable that the
NTuser.dat file be made read-only - rename it to NTuser.man
to achieve the desired effect (a MANdatory profile).</p>

<p>Windows clients can sometimes maintain a connection to
the [homes] share, even though there is no user logged in.
Therefore, it is vital that the logon path does not include
a reference to the homes share (i.e. setting this parameter
to \%Nesrofile_path will cause problems).</p>

<p>This option takes the standard substitutions, allowing
you to have separate logon scripts for each user or
machine.</p>

<p>Warning Do not quote the value. Setting this as
\%NrofileU will break profile handling. Where the tdbsam or
ldapsam passdb backend is used, at the time the user account
is created the value configured for this parameter is
written to the passdb backend and that value will over-ride
the parameter value present in the smb.conf file. Any error
present in the passdb backend account record must be editted
using the appropriate tool (pdbedit on the command-line, or
any other locally provided system tool). Note that this
option is only useful if Samba is set up as a domain
controller.</p>

<p>Disable the use of roaming profiles by setting the value
of this parameter to the empty string. For example, logon
path = &quot;&quot;. Take note that even if the default
setting in the smb.conf file is the empty string, any value
specified in the user account settings in the passdb backend
will over-ride the effect of setting this parameter to null.
Disabling of all roaming profile use requires that the user
account settings must also be blank.</p>

<p>An example of use is:</p>

<p>logon path = \PROFILESERVERPROFILEU</p>

<p>Default: logon path = %N%Uprofile</p>

<p>logon script (G)</p>

<p>This parameter specifies the batch file (.bat) or NT
command file (.cmd) to be downloaded and run on a machine
when a user successfully logs in. The file must contain the
DOS style CR/LF line endings. Using a DOS-style editor to
create the file is recommended.</p>

<p>The script must be a relative path to the [netlogon]
service. If the [netlogon] service specifies a path of
/usr/local/samba/netlogon, and logon script = STARTUP.BAT,
then the file that will be downloaded is:</p>

<p>/usr/local/samba/netlogon/STARTUP.BAT</p>

<p>The contents of the batch file are entirely your choice.
A suggested command would be to add NET TIME \SERVER /SET
/YES, to force every machine to synchronize clocks with the
same time server. Another use would be to add NET USE U:
\SERVERUTILS for commonly used utilities, or</p>

<p>NET USE Q:ERVEISO9001_QA</p>

<p>for example.</p>

<p>Note that it is particularly important not to allow
write access to the [netlogon] share, or to grant users
write permission on the batch files in a secure environment,
as this would allow the batch files to be arbitrarily
modified and security to be breached.</p>

<p>This option takes the standard substitutions, allowing
you to have separate logon scripts for each user or
machine.</p>

<p>This option is only useful if Samba is set up as a logon
server.</p>

<p>Default: logon script =</p>

<p>Example: logon script = scripts%U.bat</p>

<p>log writeable files on exit (G)</p>

<p>When the network connection between a CIFS client and
Samba dies, Samba has no option but to simply shut down the
server side of the network connection. If this happens,
there is a risk of data corruption because the Windows
client did not complete all write operations that the
Windows application requested. Setting this option to
&quot;yes&quot; makes smbd log with a level 0 message a list
of all files that have been opened for writing when the
network connection died. Those are the files that are
potentially corrupted. It is meant as an aid for the
administrator to give him a list of files to do consistency
checks on.</p>

<p>Default: log writeable files on exit = no</p>

<p>lppause command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to stop printing or spooling a
specific print job.</p>

<p>This command should be a program or script which takes a
printer name and job number to pause the print job. One way
of implementing this is by using job priorities, where jobs
having a too low priority won&rsquo;t be sent to the
printer.</p>

<p>If a %p is given then the printer name is put in its
place. A %j is replaced with the job number (an integer). On
HPUX (see printing=hpux ), if the -p%p option is added to
the lpq command, the job will show up with the correct
status, i.e. if the job priority is lower than the set fence
priority it will have the PAUSED status, whereas if the
priority is equal or higher it will have the SPOOLED or
PRINTING status.</p>

<p>Note that it is good practice to include the absolute
path in the lppause command as the PATH may not be available
to the server.</p>

<p>Default: lppause command = # Currently no default value
is given to this string, unless the value of the printing
parameter is SYSV, in which case the default is : lp -i
%p-%j -H hold or if the value of the printing parameter is
SOFTQ, then the default is: qstat -s -j%j -h.</p>

<p>Example: lppause command = /usr/bin/lpalt %p-%j -p0</p>

<p>lpq cache time (G)</p>

<p>This controls how long lpq info will be cached for to
prevent the lpq command being called too often. A separate
cache is kept for each variation of the lpq command used by
the system, so if you use different lpq commands for
different users then they won&rsquo;t share cache
information.</p>

<p>The cache files are stored in /tmp/lpq.xxxx where xxxx
is a hash of the lpq command in use.</p>

<p>The default is 30 seconds, meaning that the cached
results of a previous identical lpq command will be used if
the cached data is less than 30 seconds old. A large value
may be advisable if your lpq command is very slow.</p>

<p>A value of 0 will disable caching completely.</p>

<p>Default: lpq cache time = 30</p>

<p>Example: lpq cache time = 10</p>

<p>lpq command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to obtain lpq-style printer status
information.</p>

<p>This command should be a program or script which takes a
printer name as its only parameter and outputs printer
status information.</p>

<p>Currently nine styles of printer status information are
supported; BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, CUPS, and
SOFTQ. This covers most UNIX systems. You control which type
is expected using the printing = option.</p>

<p>Some clients (notably Windows for Workgroups) may not
correctly send the connection number for the printer they
are requesting status information about. To get around this,
the server reports on the first printer service connected to
by the client. This only happens if the connection number
sent is invalid.</p>

<p>If a %p is given then the printer name is put in its
place. Otherwise it is placed at the end of the command.</p>

<p>Note that it is good practice to include the absolute
path in the lpq command as the $PATH may not be available to
the server. When compiled with the CUPS libraries, no lpq
command is needed because smbd will make a library call to
obtain the print queue listing.</p>

<p>Default: lpq command =</p>

<p>Example: lpq command = /usr/bin/lpq -P%p</p>

<p>lpresume command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to restart or continue printing or
spooling a specific print job.</p>

<p>This command should be a program or script which takes a
printer name and job number to resume the print job. See
also the lppause command parameter.</p>

<p>If a %p is given then the printer name is put in its
place. A %j is replaced with the job number (an
integer).</p>

<p>Note that it is good practice to include the absolute
path in the lpresume command as the PATH may not be
available to the server.</p>

<p>See also the printing parameter.</p>

<p>Default: Currently no default value is given to this
string, unless the value of the printing parameter is SYSV,
in which case the default is:</p>

<p>lp -i %p-%j -H resume</p>

<p>or if the value of the printing parameter is SOFTQ, then
the default is:</p>

<p>qstat -s -j%j -r</p>

<p>No default</p>

<p>Example: lpresume command = /usr/bin/lpalt %p-%j -p2</p>

<p>lprm command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to delete a print job.</p>

<p>This command should be a program or script which takes a
printer name and job number, and deletes the print job.</p>

<p>If a %p is given then the printer name is put in its
place. A %j is replaced with the job number (an
integer).</p>

<p>Note that it is good practice to include the absolute
path in the lprm command as the PATH may not be available to
the server.</p>

<p>Examples of use are:</p>

<p>lprm command = /usr/bin/lprm -P%p %j</p>

<p>or</p>

<p>lprm command = /usr/bin/cancel %p-%j</p>

<p>Default: lprm command = determined by printing
parameter</p>

<p>machine password timeout (G)</p>

<p>If a Samba server is a member of a Windows NT Domain
(see the security = domain parameter) then periodically a
running smbd process will try and change the MACHINE ACCOUNT
PASSWORD stored in the TDB called private/secrets.tdb. This
parameter specifies how often this password will be changed,
in seconds. The default is one week (expressed in seconds),
the same as a Windows NT Domain member server.</p>

<p>See also smbpasswd(8), and the security = domain
parameter.</p>

<p>Default: machine password timeout = 604800</p>

<p>magic output (S)</p>

<p>This parameter specifies the name of a file which will
contain output created by a magic script (see the magic
script parameter below).</p>

<p>Warning If two clients use the same magic script in the
same directory the output file content is undefined.
Default: magic output = &lt;magic script name&gt;.out</p>

<p>Example: magic output = myfile.txt</p>

<p>magic script (S)</p>

<p>This parameter specifies the name of a file which, if
opened, will be executed by the server when the file is
closed. This allows a UNIX script to be sent to the Samba
host and executed on behalf of the connected user.</p>

<p>Scripts executed in this way will be deleted upon
completion assuming that the user has the appropriate level
of privilege and the file permissions allow the
deletion.</p>

<p>If the script generates output, output will be sent to
the file specified by the magic output parameter (see
above).</p>

<p>Note that some shells are unable to interpret scripts
containing CR/LF instead of CR as the end-of-line marker.
Magic scripts must be executable as is on the host, which
for some hosts and some shells will require filtering at the
DOS end.</p>

<p>Magic scripts are EXPERIMENTAL and should NOT be relied
upon.</p>

<p>Default: magic script =</p>

<p>Example: magic script = user.csh</p>

<p>mangled names (S)</p>

<p>This controls whether non-DOS names under UNIX should be
mapped to DOS-compatible names (&quot;mangled&quot;) and
made visible, or whether non-DOS names should simply be
ignored.</p>

<p>See the section on name mangling for details on how to
control the mangling process.</p>

<p>If mangling is used then the mangling method is as
follows:</p>

<p>&middot; The first (up to) five alphanumeric characters
before the rightmost dot of the filename are preserved,
forced to upper case, and appear as the first (up to) five
characters of the mangled name.</p>

<p>&middot; A tilde &quot;~&quot; is appended to the first
part of the mangled name, followed by a two-character unique
sequence, based on the original root name (i.e., the
original filename minus its final extension). The final
extension is included in the hash calculation only if it
contains any upper case characters or is longer than three
characters.</p>

<p>Note that the character to use may be specified using
the mangling char option, if you don&rsquo;t like
&rsquo;~&rsquo;.</p>

<p>&middot; Files whose UNIX name begins with a dot will be
presented as DOS hidden files. The mangled name will be
created as for other filenames, but with the leading dot
removed and &quot;___&quot; as its extension regardless of
actual original extension (that&rsquo;s three
underscores).</p>

<p>The two-digit hash value consists of upper case
alphanumeric characters.</p>

<p>This algorithm can cause name collisions only if files
in a directory share the same first five alphanumeric
characters. The probability of such a clash is 1/1300.</p>

<p>The name mangling (if enabled) allows a file to be
copied between UNIX directories from Windows/DOS while
retaining the long UNIX filename. UNIX files can be renamed
to a new extension from Windows/DOS and will retain the same
basename. Mangled names do not change between sessions.</p>

<p>Default: mangled names = yes</p>

<p>mangle prefix (G)</p>

<p>controls the number of prefix characters from the
original name used when generating the mangled names. A
larger value will give a weaker hash and therefore more name
collisions. The minimum value is 1 and the maximum value is
6.</p>

<p>mangle prefix is effective only when mangling method is
hash2.</p>

<p>Default: mangle prefix = 1</p>

<p>Example: mangle prefix = 4</p>

<p>mangling char (S)</p>

<p>This controls what character is used as the magic
character in name mangling. The default is a &rsquo;~&rsquo;
but this may interfere with some software. Use this option
to set it to whatever you prefer. This is effective only
when mangling method is hash.</p>

<p>Default: mangling char = ~</p>

<p>Example: mangling char = ^</p>

<p>mangling method (G)</p>

<p>controls the algorithm used for the generating the
mangled names. Can take two different values,
&quot;hash&quot; and &quot;hash2&quot;. &quot;hash&quot; is
the algorithm that was used used in Samba for many years and
was the default in Samba 2.2.x &quot;hash2&quot; is now the
default and is newer and considered a better algorithm
(generates less collisions) in the names. Many Win32
applications store the mangled names and so changing to
algorithms must not be done lightly as these applications
may break unless reinstalled.</p>

<p>Default: mangling method = hash2</p>

<p>Example: mangling method = hash</p>

<p>map acl inherit (S)</p>

<p>This boolean parameter controls whether smbd(8) will
attempt to map the &rsquo;inherit&rsquo; and
&rsquo;protected&rsquo; access control entry flags stored in
Windows ACLs into an extended attribute called
user.SAMBA_PAI. This parameter only takes effect if Samba is
being run on a platform that supports extended attributes
(Linux and IRIX so far) and allows the Windows 2000 ACL
editor to correctly use inheritance with the Samba POSIX ACL
mapping code.</p>

<p>Default: map acl inherit = no</p>

<p>map archive (S)</p>

<p>This controls whether the DOS archive attribute should
be mapped to the UNIX owner execute bit. The DOS archive bit
is set when a file has been modified since its last backup.
One motivation for this option is to keep Samba/your PC from
making any file it touches from becoming executable under
UNIX. This can be quite annoying for shared source code,
documents, etc...</p>

<p>Note that this requires the create mask parameter to be
set such that owner execute bit is not masked out (i.e. it
must include 100). See the parameter create mask for
details.</p>

<p>Default: map archive = yes</p>

<p>map hidden (S)</p>

<p>This controls whether DOS style hidden files should be
mapped to the UNIX world execute bit.</p>

<p>Note that this requires the create mask to be set such
that the world execute bit is not masked out (i.e. it must
include 001). See the parameter create mask for details.</p>

<p>No default</p>

<p>map readonly (S)</p>

<p>This controls how the DOS read only attribute should be
mapped from a UNIX filesystem.</p>

<p>This parameter can take three different values, which
tell smbd(8) how to display the read only attribute on
files, where either store dos attributes is set to No, or no
extended attribute is present. If store dos attributes is
set to yes then this parameter is ignored. This is a new
parameter introduced in Samba version 3.0.21.</p>

<p>The three settings are :</p>

<p>&middot; Yes - The read only DOS attribute is mapped to
the inverse of the user or owner write bit in the unix
permission mode set. If the owner write bit is not set, the
read only attribute is reported as being set on the file. If
the read only DOS attribute is set, Samba sets the owner,
group and others write bits to zero. Write bits set in an
ACL are ignored by Samba. If the read only DOS attribute is
unset, Samba simply sets the write bit of the owner to
one.</p>

<p>&middot; Permissions - The read only DOS attribute is
mapped to the effective permissions of the connecting user,
as evaluated by smbd(8) by reading the unix permissions and
POSIX ACL (if present). If the connecting user does not have
permission to modify the file, the read only attribute is
reported as being set on the file.</p>

<p>&middot; No - The read only DOS attribute is unaffected
by permissions, and can only be set by the store dos
attributes method. This may be useful for exporting mounted
CDs.</p>

<p>Default: map readonly = yes</p>

<p>map system (S)</p>

<p>This controls whether DOS style system files should be
mapped to the UNIX group execute bit.</p>

<p>Note that this requires the create mask to be set such
that the group execute bit is not masked out (i.e. it must
include 010). See the parameter create mask for details.</p>

<p>Default: map system = no</p>

<p>map to guest (G)</p>

<p>This parameter is only useful in SECURITY = security
modes other than security = share and security = server -
i.e. user, and domain.</p>

<p>This parameter can take four different values, which
tell smbd(8) what to do with user login requests that
don&rsquo;t match a valid UNIX user in some way.</p>

<p>The four settings are :</p>

<p>&middot; Never - Means user login requests with an
invalid password are rejected. This is the default.</p>

<p>&middot; Bad User - Means user logins with an invalid
password are rejected, unless the username does not exist,
in which case it is treated as a guest login and mapped into
the guest account.</p>

<p>&middot; Bad Password - Means user logins with an
invalid password are treated as a guest login and mapped
into the guest account. Note that this can cause problems as
it means that any user incorrectly typing their password
will be silently logged on as &quot;guest&quot; - and will
not know the reason they cannot access files they think they
should - there will have been no message given to them that
they got their password wrong. Helpdesk services will hate
you if you set the map to guest parameter this way :-).</p>

<p>&middot; Bad Uid - Is only applicable when Samba is
configured in some type of domain mode security (security =
{domain|ads}) and means that user logins which are
successfully authenticated but which have no valid Unix user
account (and smbd is unable to create one) should be mapped
to the defined guest account. This was the default behavior
of Samba 2.x releases. Note that if a member server is
running winbindd, this option should never be required
because the nss_winbind library will export the Windows
domain users and groups to the underlying OS via the Name
Service Switch interface.</p>

<p>Note that this parameter is needed to set up
&quot;Guest&quot; share services when using security modes
other than share and server. This is because in these modes
the name of the resource being requested is not sent to the
server until after the server has successfully authenticated
the client so the server cannot make authentication
decisions at the correct time (connection to the share) for
&quot;Guest&quot; shares. This parameter is not useful with
security = server as in this security mode no information is
returned about whether a user logon failed due to a bad
username or bad password, the same error is returned from a
modern server in both cases.</p>

<p>For people familiar with the older Samba releases, this
parameter maps to the old compile-time setting of the
GUEST_SESSSETUP value in local.h.</p>

<p>Default: map to guest = Never</p>

<p>Example: map to guest = Bad User</p>

<p>map untrusted to domain (G)</p>

<p>If a client connects to smbd using an untrusted domain
name, such as BOGUSser, smbd replaces the BOGUS domain with
it&rsquo;s SAM name before attempting to authenticate that
user. In the case where smbd is acting as a PDC this will be
DOMAINser. In the case where smbd is acting as a domain
member server or a standalone server this will be
WORKSTATIONser.</p>

<p>In previous versions of Samba (pre 3.4), if smbd was
acting as a domain member server, the BOGUS domain name
would instead be replaced by the primary domain which smbd
was a member of. In this case authentication would be
deferred off to a DC using the credentials DOMAINser.</p>

<p>When this parameter is set to yes smbd provides the
legacy behavior of mapping untrusted domain names to the
primary domain. When smbd is not acting as a domain member
server, this parameter has no effect.</p>

<p>Default: map untrusted to domain = no</p>

<p>max connections (S)</p>

<p>This option allows the number of simultaneous
connections to a service to be limited. If max connections
is greater than 0 then connections will be refused if this
number of connections to the service are already open. A
value of zero mean an unlimited number of connections may be
made.</p>

<p>Record lock files are used to implement this feature.
The lock files will be stored in the directory specified by
the lock directory option.</p>

<p>Default: max connections = 0</p>

<p>Example: max connections = 10</p>

<p>max disk size (G)</p>

<p>This option allows you to put an upper limit on the
apparent size of disks. If you set this option to 100 then
all shares will appear to be not larger than 100 MB in
size.</p>

<p>Note that this option does not limit the amount of data
you can put on the disk. In the above case you could still
store much more than 100 MB on the disk, but if a client
ever asks for the amount of free disk space or the total
disk size then the result will be bounded by the amount
specified in max disk size.</p>

<p>This option is primarily useful to work around bugs in
some pieces of software that can&rsquo;t handle very large
disks, particularly disks over 1GB in size.</p>

<p>A max disk size of 0 means no limit.</p>

<p>Default: max disk size = 0</p>

<p>Example: max disk size = 1000</p>

<p>max log size (G)</p>

<p>This option (an integer in kilobytes) specifies the max
size the log file should grow to. Samba periodically checks
the size and if it is exceeded it will rename the file,
adding a .old extension.</p>

<p>A size of 0 means no limit.</p>

<p>Default: max log size = 5000</p>

<p>Example: max log size = 1000</p>

<p>max mux (G)</p>

<p>This option controls the maximum number of outstanding
simultaneous SMB operations that Samba tells the client it
will allow. You should never need to set this parameter.</p>

<p>Default: max mux = 50</p>

<p>max open files (G)</p>

<p>This parameter limits the maximum number of open files
that one smbd(8) file serving process may have open for a
client at any one time. The This parameter can be set very
high (16404) as Samba uses only one bit per unopened file.
Setting this parameter lower than 16404 will cause Samba to
complain and set this value back to the minimum of 16404, as
Windows 7 depends on this number of open file handles being
available.</p>

<p>The limit of the number of open files is usually set by
the UNIX per-process file descriptor limit rather than this
parameter so you should never need to touch this
parameter.</p>

<p>Default: max open files = 16404</p>

<p>max print jobs (S)</p>

<p>This parameter limits the maximum number of jobs
allowable in a Samba printer queue at any given moment. If
this number is exceeded, smbd(8) will remote &quot;Out of
Space&quot; to the client.</p>

<p>Default: max print jobs = 1000</p>

<p>Example: max print jobs = 5000</p>

<p>protocol</p>

<p>This parameter is a synonym for max protocol.</p>

<p>max protocol (G)</p>

<p>The value of the parameter (a string) is the highest
protocol level that will be supported by the server.</p>

<p>Possible values are :</p>

<p>&middot; CORE: Earliest version. No concept of user
names.</p>

<p>&middot; COREPLUS: Slight improvements on CORE for
efficiency.</p>

<p>&middot; LANMAN1: First modern version of the protocol.
Long filename support.</p>

<p>&middot; LANMAN2: Updates to Lanman1 protocol.</p>

<p>&middot; NT1: Current up to date version of the
protocol. Used by Windows NT. Known as CIFS.</p>

<p>&middot; SMB2: Re-implementation of the SMB protocol.
Used by Windows Vista and newer.</p>

<p>Normally this option should not be set as the automatic
negotiation phase in the SMB protocol takes care of choosing
the appropriate protocol.</p>

<p>Default: max protocol = NT1</p>

<p>Example: max protocol = LANMAN1</p>

<p>max reported print jobs (S)</p>

<p>This parameter limits the maximum number of jobs
displayed in a port monitor for Samba printer queue at any
given moment. If this number is exceeded, the excess jobs
will not be shown. A value of zero means there is no limit
on the number of print jobs reported.</p>

<p>Default: max reported print jobs = 0</p>

<p>Example: max reported print jobs = 1000</p>

<p>max smbd processes (G)</p>

<p>This parameter limits the maximum number of smbd(8)
processes concurrently running on a system and is intended
as a stopgap to prevent degrading service to clients in the
event that the server has insufficient resources to handle
more than this number of connections. Remember that under
normal operating conditions, each user will have an smbd(8)
associated with him or her to handle connections to all
shares from a given host.</p>

<p>Default: max smbd processes = 0</p>

<p>Example: max smbd processes = 1000</p>

<p>max stat cache size (G)</p>

<p>This parameter limits the size in memory of any stat
cache being used to speed up case insensitive name mappings.
It represents the number of kilobyte (1024) units the stat
cache can use. A value of zero, meaning unlimited, is not
advisable due to increased memory usage. You should not need
to change this parameter.</p>

<p>Default: max stat cache size = 256</p>

<p>Example: max stat cache size = 100</p>

<p>max ttl (G)</p>

<p>This option tells nmbd(8) what the default &rsquo;time
to live&rsquo; of NetBIOS names should be (in seconds) when
nmbd is requesting a name using either a broadcast packet or
from a WINS server. You should never need to change this
parameter. The default is 3 days.</p>

<p>Default: max ttl = 259200</p>

<p>max wins ttl (G)</p>

<p>This option tells smbd(8) when acting as a WINS server
(wins support = yes) what the maximum &rsquo;time to
live&rsquo; of NetBIOS names that nmbd will grant will be
(in seconds). You should never need to change this
parameter. The default is 6 days (518400 seconds).</p>

<p>Default: max wins ttl = 518400</p>

<p>max xmit (G)</p>

<p>This option controls the maximum packet size that will
be negotiated by Samba. The default is 16644, which matches
the behavior of Windows 2000. A value below 2048 is likely
to cause problems. You should never need to change this
parameter from its default value.</p>

<p>Default: max xmit = 16644</p>

<p>Example: max xmit = 8192</p>

<p>message command (G)</p>

<p>This specifies what command to run when the server
receives a WinPopup style message.</p>

<p>This would normally be a command that would deliver the
message somehow. How this is to be done is up to your
imagination.</p>

<p>An example is:</p>

<p>message command = csh -c &rsquo;xedit %s;rm %s&rsquo;
&amp;</p>

<p>This delivers the message using xedit, then removes it
afterwards. NOTE THAT IT IS VERY IMPORTANT THAT THIS COMMAND
RETURN IMMEDIATELY. That&rsquo;s why I have the
&rsquo;&amp;&rsquo; on the end. If it doesn&rsquo;t return
immediately then your PCs may freeze when sending messages
(they should recover after 30 seconds, hopefully).</p>

<p>All messages are delivered as the global guest user. The
command takes the standard substitutions, although %u
won&rsquo;t work (%U may be better in this case).</p>

<p>Apart from the standard substitutions, some additional
ones apply. In particular:</p>

<p>&middot; %s = the filename containing the message.</p>

<p>&middot; %t = the destination that the message was sent
to (probably the server name).</p>

<p>&middot; %f = who the message is from.</p>

<p>You could make this command send mail, or whatever else
takes your fancy. Please let us know of any really
interesting ideas you have.</p>

<p>Here&rsquo;s a way of sending the messages as mail to
root:</p>

<p>message command = /bin/mail -s &rsquo;message from %f on
%m&rsquo; root &lt; %s; rm %s</p>

<p>If you don&rsquo;t have a message command then the
message won&rsquo;t be delivered and Samba will tell the
sender there was an error. Unfortunately WfWg totally
ignores the error code and carries on regardless, saying
that the message was delivered.</p>

<p>If you want to silently delete it then try:</p>

<p>message command = rm %s</p>

<p>Default: message command =</p>

<p>Example: message command = csh -c &rsquo;xedit %s; rm
%s&rsquo; &amp;</p>

<p>min print space (S)</p>

<p>This sets the minimum amount of free disk space that
must be available before a user will be able to spool a
print job. It is specified in kilobytes. The default is 0,
which means a user can always spool a print job.</p>

<p>Default: min print space = 0</p>

<p>Example: min print space = 2000</p>

<p>min protocol (G)</p>

<p>The value of the parameter (a string) is the lowest SMB
protocol dialect than Samba will support. Please refer to
the max protocol parameter for a list of valid protocol
names and a brief description of each. You may also wish to
refer to the C source code in source/smbd/negprot.c for a
listing of known protocol dialects supported by clients.</p>

<p>If you are viewing this parameter as a security measure,
you should also refer to the lanman auth parameter.
Otherwise, you should never need to change this
parameter.</p>

<p>Default: min protocol = CORE</p>

<p>Example: min protocol = NT1</p>

<p>min receivefile size (G)</p>

<p>This option changes the behavior of smbd(8) when
processing SMBwriteX calls. Any incoming SMBwriteX call on a
non-signed SMB/CIFS connection greater than this value will
not be processed in the normal way but will be passed to any
underlying kernel recvfile or splice system call (if there
is no such call Samba will emulate in user space). This
allows zero-copy writes directly from network socket buffers
into the filesystem buffer cache, if available. It may
improve performance but user testing is recommended. If set
to zero Samba processes SMBwriteX calls in the normal way.
To enable POSIX large write support (SMB/CIFS writes up to
16Mb) this option must be nonzero. The maximum value is
128k. Values greater than 128k will be silently set to
128k.</p>

<p>Note this option will have NO EFFECT if set on a SMB
signed connection.</p>

<p>The default is zero, which diables this option.</p>

<p>Default: min receivefile size = 0</p>

<p>min wins ttl (G)</p>

<p>This option tells nmbd(8) when acting as a WINS server
(wins support = yes) what the minimum &rsquo;time to
live&rsquo; of NetBIOS names that nmbd will grant will be
(in seconds). You should never need to change this
parameter. The default is 6 hours (21600 seconds).</p>

<p>Default: min wins ttl = 21600</p>

<p>msdfs proxy (S)</p>

<p>This parameter indicates that the share is a stand-in
for another CIFS share whose location is specified by the
value of the parameter. When clients attempt to connect to
this share, they are redirected to the proxied share using
the SMB-Dfs protocol.</p>

<p>Only Dfs roots can act as proxy shares. Take a look at
the msdfs root and host msdfs options to find out how to set
up a Dfs root share.</p>

<p>No default</p>

<p>Example: msdfs proxy = otherserversomeshare</p>

<p>msdfs root (S)</p>

<p>If set to yes, Samba treats the share as a Dfs root and
allows clients to browse the distributed file system tree
rooted at the share directory. Dfs links are specified in
the share directory by symbolic links of the form
msdfs:serverA\shareA,serverB\shareB and so on. For more
information on setting up a Dfs tree on Samba, refer to the
MSDFS chapter in the Samba3-HOWTO book.</p>

<p>Default: msdfs root = no</p>

<p>multicast dns register (G)</p>

<p>If compiled with proper support for it, Samba will
announce itself with multicast DNS services like for example
provided by the Avahi daemon.</p>

<p>This parameter allows disabling Samba to register
itself.</p>

<p>Default: multicast dns register = yes</p>

<p>name cache timeout (G)</p>

<p>Specifies the number of seconds it takes before entries
in samba&rsquo;s hostname resolve cache time out. If the
timeout is set to 0. the caching is disabled.</p>

<p>Default: name cache timeout = 660</p>

<p>Example: name cache timeout = 0</p>

<p>name resolve order (G)</p>

<p>This option is used by the programs in the Samba suite
to determine what naming services to use and in what order
to resolve host names to IP addresses. Its main purpose to
is to control how netbios name resolution is performed. The
option takes a space separated string of name resolution
options.</p>

<p>The options are: &quot;lmhosts&quot;, &quot;host&quot;,
&quot;wins&quot; and &quot;bcast&quot;. They cause names to
be resolved as follows:</p>

<p>&middot; lmhosts : Lookup an IP address in the Samba
lmhosts file. If the line in lmhosts has no name type
attached to the NetBIOS name (see the manpage for lmhosts
for details) then any name type matches for lookup.</p>

<p>&middot; host : Do a standard host name to IP address
resolution, using the system /etc/hosts, NIS, or DNS
lookups. This method of name resolution is operating system
depended for instance on IRIX or Solaris this may be
controlled by the /etc/nsswitch.conf file. Note that this
method is used only if the NetBIOS name type being queried
is the 0x20 (server) name type or 0x1c (domain controllers).
The latter case is only useful for active directory domains
and results in a DNS query for the SRV RR entry matching
_ldap._tcp.domain.</p>

<p>&middot; wins : Query a name with the IP address listed
in the WINSSERVER parameter. If no WINS server has been
specified this method will be ignored.</p>

<p>&middot; bcast : Do a broadcast on each of the known
local interfaces listed in the interfaces parameter. This is
the least reliable of the name resolution methods as it
depends on the target host being on a locally connected
subnet.</p>

<p>The example below will cause the local lmhosts file to
be examined first, followed by a broadcast attempt, followed
by a normal system hostname lookup.</p>

<p>When Samba is functioning in ADS security mode (security
= ads) it is advised to use following settings for name
resolve order:</p>

<p>name resolve order = wins bcast</p>

<p>DC lookups will still be done via DNS, but fallbacks to
netbios names will not inundate your DNS servers with
needless querys for DOMAIN&lt;0x1c&gt; lookups.</p>

<p>Default: name resolve order = lmhosts wins host
bcast</p>

<p>Example: name resolve order = lmhosts bcast host</p>

<p>ncalrpc dir (G)</p>

<p>This directory will hold a series of named pipes to
allow RPC over inter-process communication.</p>

<p>. This will allow Samba and other unix processes to
interact over DCE/RPC without using TCP/IP. Additionally a
sub-directory &rsquo;np&rsquo; has restricted permissions,
and allows a trusted communication channel between Samba
processes</p>

<p>Default: ncalrpc dir = ${prefix}/var/ncalrpc</p>

<p>Example: ncalrpc dir = /var/run/samba/ncalrpc</p>

<p>netbios aliases (G)</p>

<p>This is a list of NetBIOS names that nmbd will advertise
as additional names by which the Samba server is known. This
allows one machine to appear in browse lists under multiple
names. If a machine is acting as a browse server or logon
server none of these names will be advertised as either
browse server or logon servers, only the primary name of the
machine will be advertised with these capabilities.</p>

<p>Default: netbios aliases = # empty string (no additional
names)</p>

<p>Example: netbios aliases = TEST TEST1 TEST2</p>

<p>netbios name (G)</p>

<p>This sets the NetBIOS name by which a Samba server is
known. By default it is the same as the first component of
the host&rsquo;s DNS name. If a machine is a browse server
or logon server this name (or the first component of the
hosts DNS name) will be the name that these services are
advertised under.</p>

<p>Note that the maximum length for a NetBIOS name is 15
charactars.</p>

<p>There is a bug in Samba-3 that breaks operation of
browsing and access to shares if the netbios name is set to
the literal name PIPE. To avoid this problem, do not name
your Samba-3 server PIPE.</p>

<p>Default: netbios name = # machine DNS name</p>

<p>Example: netbios name = MYNAME</p>

<p>netbios scope (G)</p>

<p>This sets the NetBIOS scope that Samba will operate
under. This should not be set unless every machine on your
LAN also sets this value.</p>

<p>Default: netbios scope =</p>

<p>nis homedir (G)</p>

<p>Get the home share server from a NIS map. For UNIX
systems that use an automounter, the user&rsquo;s home
directory will often be mounted on a workstation on demand
from a remote server.</p>

<p>When the Samba logon server is not the actual home
directory server, but is mounting the home directories via
NFS then two network hops would be required to access the
users home directory if the logon server told the client to
use itself as the SMB server for home directories (one over
SMB and one over NFS). This can be very slow.</p>

<p>This option allows Samba to return the home share as
being on a different server to the logon server and as long
as a Samba daemon is running on the home directory server,
it will be mounted on the Samba client directly from the
directory server. When Samba is returning the home share to
the client, it will consult the NIS map specified in homedir
map and return the server listed there.</p>

<p>Note that for this option to work there must be a
working NIS system and the Samba server with this option
must also be a logon server.</p>

<p>Default: nis homedir = no</p>

<p>nmbd bind explicit broadcast (G)</p>

<p>This option causes nmbd(8) to explicitly bind to the
broadcast address of the local subnets. This is needed to
make nmbd work correctly in combination with the socket
address option. You should not need to unset this
option.</p>

<p>Default: nmbd bind explicit broadcast = yes</p>

<p>nt acl support (S)</p>

<p>This boolean parameter controls whether smbd(8) will
attempt to map UNIX permissions into Windows NT access
control lists. The UNIX permissions considered are the the
traditional UNIX owner and group permissions, as well as
POSIX ACLs set on any files or directories. This parameter
was formally a global parameter in releases prior to
2.2.2.</p>

<p>Default: nt acl support = yes</p>

<p>ntlm auth (G)</p>

<p>This parameter determines whether or not smbd(8) will
attempt to authenticate users using the NTLM encrypted
password response. If disabled, either the lanman password
hash or an NTLMv2 response will need to be sent by the
client.</p>

<p>If this option, and lanman auth are both disabled, then
only NTLMv2 logins will be permited. Not all clients support
NTLMv2, and most will require special configuration to use
it.</p>

<p>Default: ntlm auth = yes</p>

<p>nt pipe support (G)</p>

<p>This boolean parameter controls whether smbd(8) will
allow Windows NT clients to connect to the NT SMB specific
IPC$ pipes. This is a developer debugging option and can be
left alone.</p>

<p>Default: nt pipe support = yes</p>

<p>nt status support (G)</p>

<p>This boolean parameter controls whether smbd(8) will
negotiate NT specific status support with Windows NT/2k/XP
clients. This is a developer debugging option and should be
left alone. If this option is set to no then Samba offers
exactly the same DOS error codes that versions prior to
Samba 2.2.3 reported.</p>

<p>You should not need to ever disable this parameter.</p>

<p>Default: nt status support = yes</p>

<p>null passwords (G)</p>

<p>Allow or disallow client access to accounts that have
null passwords.</p>

<p>See also smbpasswd(5).</p>

<p>Default: null passwords = no</p>

<p>obey pam restrictions (G)</p>

<p>When Samba 3.0 is configured to enable PAM support (i.e.
--with-pam), this parameter will control whether or not
Samba should obey PAM&rsquo;s account and session management
directives. The default behavior is to use PAM for clear
text authentication only and to ignore any account or
session management. Note that Samba always ignores PAM for
authentication in the case of encrypt passwords = yes. The
reason is that PAM modules cannot support the
challenge/response authentication mechanism needed in the
presence of SMB password encryption.</p>

<p>Default: obey pam restrictions = no</p>

<p>only user (S)</p>

<p>This is a boolean option that controls whether
connections with usernames not in the user list will be
allowed. By default this option is disabled so that a client
can supply a username to be used by the server. Enabling
this parameter will force the server to only use the login
names from the user list and is only really useful in
security = share level security.</p>

<p>Note that this also means Samba won&rsquo;t try to
deduce usernames from the service name. This can be annoying
for the [homes] section. To get around this you could use
user = %S which means your user list will be just the
service name, which for home directories is the name of the
user.</p>

<p>Default: only user = no</p>

<p>oplock break wait time (G)</p>

<p>This is a tuning parameter added due to bugs in both
Windows 9x and WinNT. If Samba responds to a client too
quickly when that client issues an SMB that can cause an
oplock break request, then the network client can fail and
not respond to the break request. This tuning parameter
(which is set in milliseconds) is the amount of time Samba
will wait before sending an oplock break request to such
(broken) clients.</p>

<p>Warning DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE
READ AND UNDERSTOOD THE SAMBA OPLOCK CODE. Default: oplock
break wait time = 0</p>

<p>oplock contention limit (S)</p>

<p>This is a very advanced smbd(8) tuning option to improve
the efficiency of the granting of oplocks under multiple
client contention for the same file.</p>

<p>In brief it specifies a number, which causes smbd(8)not
to grant an oplock even when requested if the approximate
number of clients contending for an oplock on the same file
goes over this limit. This causes smbd to behave in a
similar way to Windows NT.</p>

<p>Warning DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE
READ AND UNDERSTOOD THE SAMBA OPLOCK CODE. Default: oplock
contention limit = 2</p>

<p>oplocks (S)</p>

<p>This boolean option tells smbd whether to issue oplocks
(opportunistic locks) to file open requests on this share.
The oplock code can dramatically (approx. 30% or more)
improve the speed of access to files on Samba servers. It
allows the clients to aggressively cache files locally and
you may want to disable this option for unreliable network
environments (it is turned on by default in Windows NT
Servers).</p>

<p>Oplocks may be selectively turned off on certain files
with a share. See the veto oplock files parameter. On some
systems oplocks are recognized by the underlying operating
system. This allows data synchronization between all access
to oplocked files, whether it be via Samba or NFS or a local
UNIX process. See the kernel oplocks parameter for
details.</p>

<p>Default: oplocks = yes</p>

<p>os2 driver map (G)</p>

<p>The parameter is used to define the absolute path to a
file containing a mapping of Windows NT printer driver names
to OS/2 printer driver names. The format is:</p>

<p>&lt;nt driver name&gt; = &lt;os2 driver
name&gt;.&lt;device name&gt;</p>

<p>For example, a valid entry using the HP LaserJet 5
printer driver would appear as HP LaserJet 5L = LASERJET.HP
LaserJet 5L.</p>

<p>The need for the file is due to the printer driver
namespace problem described in the chapter on Classical
Printing in the Samba3-HOWTO book. For more details on OS/2
clients, please refer to chapter on other clients in the
Samba3-HOWTO book.</p>

<p>Default: os2 driver map =</p>

<p>os level (G)</p>

<p>This integer value controls what level Samba advertises
itself as for browse elections. The value of this parameter
determines whether nmbd(8) has a chance of becoming a local
master browser for the workgroup in the local broadcast
area.</p>

<p>Note: By default, Samba will win a local master browsing
election over all Microsoft operating systems except a
Windows NT 4.0/2000 Domain Controller. This means that a
misconfigured Samba host can effectively isolate a subnet
for browsing purposes. This parameter is largely
auto-configured in the Samba-3 release series and it is
seldom necessary to manually override the default setting.
Please refer to the chapter on Network Browsing in the
Samba-3 HOWTO document for further information regarding the
use of this parameter. Note: The maximum value for this
parameter is 255. If you use higher values, counting will
start at 0!</p>

<p>Default: os level = 20</p>

<p>Example: os level = 65</p>

<p>pam password change (G)</p>

<p>With the addition of better PAM support in Samba 2.2,
this parameter, it is possible to use PAM&rsquo;s password
change control flag for Samba. If enabled, then PAM will be
used for password changes when requested by an SMB client
instead of the program listed in passwd program. It should
be possible to enable this without changing your passwd chat
parameter for most setups.</p>

<p>Default: pam password change = no</p>

<p>panic action (G)</p>

<p>This is a Samba developer option that allows a system
command to be called when either smbd(8) or nmbd(8) crashes.
This is usually used to draw attention to the fact that a
problem occurred.</p>

<p>Default: panic action =</p>

<p>Example: panic action = &quot;/bin/sleep 90000&quot;</p>

<p>paranoid server security (G)</p>

<p>Some version of NT 4.x allow non-guest users with a bad
passowrd. When this option is enabled, samba will not use a
broken NT 4.x server as password server, but instead
complain to the logs and exit.</p>

<p>Disabling this option prevents Samba from making this
check, which involves deliberatly attempting a bad logon to
the remote server.</p>

<p>Default: paranoid server security = yes</p>

<p>passdb backend (G)</p>

<p>This option allows the administrator to chose which
backend will be used for storing user and possibly group
information. This allows you to swap between different
storage mechanisms without recompile.</p>

<p>The parameter value is divided into two parts, the
backend&rsquo;s name, and a &rsquo;location&rsquo; string
that has meaning only to that particular backed. These are
separated by a : character.</p>

<p>Available backends can include:</p>

<p>&middot; smbpasswd - The old plaintext passdb backend.
Some Samba features will not work if this passdb backend is
used. Takes a path to the smbpasswd file as an optional
argument.</p>

<p>&middot; tdbsam - The TDB based password storage
backend. Takes a path to the TDB as an optional argument
(defaults to passdb.tdb in the private dir directory.</p>

<p>&middot; ldapsam - The LDAP based passdb backend. Takes
an LDAP URL as an optional argument (defaults to
ldap://localhost)</p>

<p>LDAP connections should be secured where possible. This
may be done using either Start-TLS (see ldap ssl) or by
specifying ldaps:// in the URL argument.</p>

<p>Multiple servers may also be specified in double-quotes.
Whether multiple servers are supported or not and the exact
syntax depends on the LDAP library you use.</p>

<p>Examples of use are:</p>

<p>passdb backend =
tdbsam:/etc/samba/private/passdb.tdb</p>

<p>or multi server LDAP URL with OpenLDAP library:</p>

<p>passdb backend = ldapsam:&quot;ldap://ldap-1.example.com
ldap://ldap-2.example.com&quot;</p>

<p>or multi server LDAP URL with Netscape based LDAP
library:</p>

<p>passdb backend = ldapsam:&quot;ldap://ldap-1.example.com
ldap-2.example.com&quot;</p>

<p>Default: passdb backend = tdbsam</p>

<p>passdb expand explicit (G)</p>

<p>This parameter controls whether Samba substitutes
%-macros in the passdb fields if they are explicitly set. We
used to expand macros here, but this turned out to be a bug
because the Windows client can expand a variable %G_osver%
in which %G would have been substituted by the user&rsquo;s
primary group.</p>

<p>Default: passdb expand explicit = no</p>

<p>passwd chat debug (G)</p>

<p>This boolean specifies if the passwd chat script
parameter is run in debug mode. In this mode the strings
passed to and received from the passwd chat are printed in
the smbd(8) log with a debug level of 100. This is a
dangerous option as it will allow plaintext passwords to be
seen in the smbd log. It is available to help Samba admins
debug their passwd chat scripts when calling the passwd
program and should be turned off after this has been done.
This option has no effect if the pam password change
parameter is set. This parameter is off by default.</p>

<p>Default: passwd chat debug = no</p>

<p>passwd chat timeout (G)</p>

<p>This integer specifies the number of seconds smbd will
wait for an initial answer from a passwd chat script being
run. Once the initial answer is received the subsequent
answers must be received in one tenth of this time. The
default it two seconds.</p>

<p>Default: passwd chat timeout = 2</p>

<p>passwd chat (G)</p>

<p>This string controls the &quot;chat&quot; conversation
that takes places between smbd(8) and the local password
changing program to change the user&rsquo;s password. The
string describes a sequence of response-receive pairs that
smbd(8) uses to determine what to send to the passwd program
and what to expect back. If the expected output is not
received then the password is not changed.</p>

<p>This chat sequence is often quite site specific,
depending on what local methods are used for password
control (such as NIS etc).</p>

<p>Note that this parameter only is used if the unix
password sync parameter is set to yes. This sequence is then
called AS ROOT when the SMB password in the smbpasswd file
is being changed, without access to the old password
cleartext. This means that root must be able to reset the
user&rsquo;s password without knowing the text of the
previous password. In the presence of NIS/YP, this means
that the passwd program must be executed on the NIS
master.</p>

<p>The string can contain the macro %n which is substituted
for the new password. The old passsword (%o) is only
available when encrypt passwords has been disabled. The chat
sequence can also contain the , and to give line-feed,
standard macros 0 carriage-return, tab and space. The chat
sequence string can also contain a &rsquo;*&rsquo; which
matches any sequence of characters. Double quotes can be
used to collect strings with spaces in them into a single
string.</p>

<p>If the send string in any part of the chat sequence is a
full stop &quot;.&quot;, then no string is sent. Similarly,
if the expect string is a full stop then no string is
expected.</p>

<p>If the pam password change parameter is set to yes, the
chat pairs may be matched in any order, and success is
determined by the PAM result, not any particular output. The
macro is ignored for PAM conversions.</p>

<p>Default: passwd chat = *new*password* %nn*new*password*
%nn *changed*</p>

<p>Example: passwd chat = &quot;*Enter NEW password*&quot;
%nn &quot;*Reenter NEW password*&quot; %nn &quot;*Password
changed*&quot;</p>

<p>passwd program (G)</p>

<p>The name of a program that can be used to set UNIX user
passwords. Any occurrences of %u will be replaced with the
user name. The user name is checked for existence before
calling the password changing program.</p>

<p>Also note that many passwd programs insist in reasonable
passwords, such as a minimum length, or the inclusion of
mixed case chars and digits. This can pose a problem as some
clients (such as Windows for Workgroups) uppercase the
password before sending it.</p>

<p>Note that if the unix password sync parameter is set to
yes then this program is called AS ROOT before the SMB
password in the smbpasswd file is changed. If this UNIX
password change fails, then smbd will fail to change the SMB
password also (this is by design).</p>

<p>If the unix password sync parameter is set this
parameter MUST USE ABSOLUTE PATHS for ALL programs called,
and must be examined for security implications. Note that by
default unix password sync is set to no.</p>

<p>Default: passwd program =</p>

<p>Example: passwd program = /bin/passwd %u</p>

<p>password level (G)</p>

<p>Some client/server combinations have difficulty with
mixed-case passwords. One offending client is Windows for
Workgroups, which for some reason forces passwords to upper
case when using the LANMAN1 protocol, but leaves them alone
when using COREPLUS! Another problem child is the Windows
95/98 family of operating systems. These clients upper case
clear text passwords even when NT LM 0.12 selected by the
protocol negotiation request/response.</p>

<p>This deprecated parameter defines the maximum number of
characters that may be upper case in passwords.</p>

<p>For example, say the password given was
&quot;FRED&quot;. If password level is set to 1, the
following combinations would be tried if &quot;FRED&quot;
failed:</p>

<p>&quot;Fred&quot;, &quot;fred&quot;, &quot;fRed&quot;,
&quot;frEd&quot;,&quot;freD&quot;</p>

<p>If password level was set to 2, the following
combinations would also be tried:</p>

<p>&quot;FRed&quot;, &quot;FrEd&quot;, &quot;FreD&quot;,
&quot;fREd&quot;, &quot;fReD&quot;, &quot;frED&quot;, ..</p>

<p>And so on.</p>

<p>The higher value this parameter is set to the more
likely it is that a mixed case password will be matched
against a single case password. However, you should be aware
that use of this parameter reduces security and increases
the time taken to process a new connection.</p>

<p>A value of zero will cause only two attempts to be made
- the password as is and the password in all-lower case.</p>

<p>This parameter is used only when using plain-text
passwords. It is not at all used when encrypted passwords as
in use (that is the default since samba-3.0.0). Use this
only when encrypt passwords = No.</p>

<p>Default: password level = 0</p>

<p>Example: password level = 4</p>

<p>password server (G)</p>

<p>By specifying the name of another SMB server or Active
Directory domain controller with this option, and using
security = [ads|domain|server] it is possible to get Samba
to do all its username/password validation using a specific
remote server.</p>

<p>If the security parameter is set to domain or ads, then
this option should not be used, as the default
&rsquo;*&rsquo; indicates to Samba to determine the best DC
to contact dynamically, just as all other hosts in an AD
domain do. This allows the domain to be maintained without
modification to the smb.conf file. The cryptograpic
protection on the authenticated RPC calls used to verify
passwords ensures that this default is safe.</p>

<p>It is strongly recommended that you use the default of
&rsquo;*&rsquo;, however if in your particular environment
you have reason to specify a particular DC list, then the
list of machines in this option must be a list of names or
IP addresses of Domain controllers for the Domain. If you
use the default of &rsquo;*&rsquo;, or list several hosts in
the password server option then smbd will try each in turn
till it finds one that responds. This is useful in case your
primary server goes down.</p>

<p>If the list of servers contains both names/IP&rsquo;s
and the &rsquo;*&rsquo; character, the list is treated as a
list of preferred domain controllers, but an auto lookup of
all remaining DC&rsquo;s will be added to the list as well.
Samba will not attempt to optimize this list by locating the
closest DC.</p>

<p>If parameter is a name, it is looked up using the
parameter name resolve order and so may resolved by any
method and order described in that parameter.</p>

<p>If the security parameter is set to server, these
additional restrictions apply:</p>

<p>&middot; You may list several password servers in the
password server parameter, however if an smbd makes a
connection to a password server, and then the password
server fails, no more users will be able to be authenticated
from this smbd. This is a restriction of the SMB/CIFS
protocol when in security = server mode and cannot be fixed
in Samba.</p>

<p>&middot; You will have to ensure that your users are
able to login from the Samba server, as when in security =
server mode the network logon will appear to come from the
Samba server rather than from the users workstation.</p>

<p>&middot; The client must not select NTLMv2
authentication.</p>

<p>&middot; The password server must be a machine capable
of using the &quot;LM1.2X002&quot; or the &quot;NT LM
0.12&quot; protocol, and it must be in user level security
mode.</p>

<p>&middot; Using a password server means your UNIX box
(running Samba) is only as secure as (a host masqurading as)
your password server. DO NOT CHOOSE A PASSWORD SERVER THAT
YOU DON&rsquo;T COMPLETELY TRUST.</p>

<p>&middot; Never point a Samba server at itself for
password serving. This will cause a loop and could lock up
your Samba server!</p>

<p>&middot; The name of the password server takes the
standard substitutions, but probably the only useful one is
%m , which means the Samba server will use the incoming
client as the password server. If you use this then you
better trust your clients, and you had better restrict them
with hosts allow!</p>

<p>Default: password server = *</p>

<p>Example: password server = NT-PDC, NT-BDC1, NT-BDC2,
*</p>

<p>Example: password server = windc.mydomain.com:389
192.168.1.101 *</p>

<p>directory</p>

<p>This parameter is a synonym for path.</p>

<p>path (S)</p>

<p>This parameter specifies a directory to which the user
of the service is to be given access. In the case of
printable services, this is where print data will spool
prior to being submitted to the host for printing.</p>

<p>For a printable service offering guest access, the
service should be readonly and the path should be
world-writeable and have the sticky bit set. This is not
mandatory of course, but you probably won&rsquo;t get the
results you expect if you do otherwise.</p>

<p>Any occurrences of %u in the path will be replaced with
the UNIX username that the client is using on this
connection. Any occurrences of %m will be replaced by the
NetBIOS name of the machine they are connecting from. These
replacements are very useful for setting up pseudo home
directories for users.</p>

<p>Note that this path will be based on root dir if one was
specified.</p>

<p>Default: path =</p>

<p>Example: path = /home/fred</p>

<p>perfcount module (G)</p>

<p>This parameter specifies the perfcount backend to be
used when monitoring SMB operations. Only one perfcount
module may be used, and it must implement all of the apis
contained in the smb_perfcount_handler structure defined in
smb.h.</p>

<p>No default</p>

<p>pid directory (G)</p>

<p>This option specifies the directory where pid files will
be placed.</p>

<p>Default: pid directory = ${prefix}/var/locks</p>

<p>Example: pid directory = pid directory = /var/run/</p>

<p>posix locking (S)</p>

<p>The smbd(8) daemon maintains an database of file locks
obtained by SMB clients. The default behavior is to map this
internal database to POSIX locks. This means that file locks
obtained by SMB clients are consistent with those seen by
POSIX compliant applications accessing the files via a
non-SMB method (e.g. NFS or local file access). It is very
unlikely that you need to set this parameter to
&quot;no&quot;, unless you are sharing from an NFS mount,
which is not a good idea in the first place.</p>

<p>Default: posix locking = yes</p>

<p>postexec (S)</p>

<p>This option specifies a command to be run whenever the
service is disconnected. It takes the usual substitutions.
The command may be run as the root on some systems.</p>

<p>An interesting example may be to unmount server
resources:</p>

<p>postexec = /etc/umount /cdrom</p>

<p>Default: postexec =</p>

<p>Example: postexec = echo &quot;%u disconnected from %S
from %m (%I)&quot; &gt;&gt; /tmp/log</p>

<p>preexec close (S)</p>

<p>This boolean option controls whether a non-zero return
code from preexec should close the service being connected
to.</p>

<p>Default: preexec close = no</p>

<p>exec</p>

<p>This parameter is a synonym for preexec.</p>

<p>preexec (S)</p>

<p>This option specifies a command to be run whenever the
service is connected to. It takes the usual
substitutions.</p>

<p>An interesting example is to send the users a welcome
message every time they log in. Maybe a message of the day?
Here is an example:</p>

<p>preexec = csh -c &rsquo;echo
/usr/local/samba/bin/smbclient -M %m -I %I&rsquo; &amp;</p>

<p>Of course, this could get annoying after a while :-)</p>

<p>See also preexec close and postexec.</p>

<p>Default: preexec =</p>

<p>Example: preexec = echo &quot;%u connected to %S from %m
(%I)&quot; &gt;&gt; /tmp/log</p>

<p>prefered master</p>

<p>This parameter is a synonym for preferred master.</p>

<p>preferred master (G)</p>

<p>This boolean parameter controls if nmbd(8) is a
preferred master browser for its workgroup.</p>

<p>If this is set to yes, on startup, nmbd will force an
election, and it will have a slight advantage in winning the
election. It is recommended that this parameter is used in
conjunction with domain master = yes, so that nmbd can
guarantee becoming a domain master.</p>

<p>Use this option with caution, because if there are
several hosts (whether Samba servers, Windows 95 or NT) that
are preferred master browsers on the same subnet, they will
each periodically and continuously attempt to become the
local master browser. This will result in unnecessary
broadcast traffic and reduced browsing capabilities.</p>

<p>Default: preferred master = auto</p>

<p>preload modules (G)</p>

<p>This is a list of paths to modules that should be loaded
into smbd before a client connects. This improves the speed
of smbd when reacting to new connections somewhat.</p>

<p>Default: preload modules =</p>

<p>Example: preload modules =
/usr/lib/samba/passdb/mysql.so</p>

<p>auto services</p>

<p>This parameter is a synonym for preload.</p>

<p>preload (G)</p>

<p>This is a list of services that you want to be
automatically added to the browse lists. This is most useful
for homes and printers services that would otherwise not be
visible.</p>

<p>Note that if you just want all printers in your printcap
file loaded then the load printers option is easier.</p>

<p>Default: preload =</p>

<p>Example: preload = fred lp colorlp</p>

<p>preserve case (S)</p>

<p>This controls if new filenames are created with the case
that the client passes, or if they are forced to be the
default case.</p>

<p>See the section on NAME MANGLING for a fuller
discussion.</p>

<p>Default: preserve case = yes</p>

<p>print ok</p>

<p>This parameter is a synonym for printable.</p>

<p>printable (S)</p>

<p>If this parameter is yes, then clients may open, write
to and submit spool files on the directory specified for the
service.</p>

<p>Note that a printable service will ALWAYS allow writing
to the service path (user privileges permitting) via the
spooling of print data. The read only parameter controls
only non-printing access to the resource.</p>

<p>Default: printable = no</p>

<p>printcap cache time (G)</p>

<p>This option specifies the number of seconds before the
printing subsystem is again asked for the known
printers.</p>

<p>Setting this parameter to 0 disables any rescanning for
new or removed printers after the initial startup.</p>

<p>Default: printcap cache time = 750</p>

<p>Example: printcap cache time = 600</p>

<p>printcap</p>

<p>This parameter is a synonym for printcap name.</p>

<p>printcap name (G)</p>

<p>This parameter may be used to override the compiled-in
default printcap name used by the server (usually
/etc/printcap). See the discussion of the [printers] section
above for reasons why you might want to do this.</p>

<p>To use the CUPS printing interface set printcap name =
cups. This should be supplemented by an addtional setting
printing = cups in the [global] section. printcap name =
cups will use the &quot;dummy&quot; printcap created by
CUPS, as specified in your CUPS configuration file.</p>

<p>On System V systems that use lpstat to list available
printers you can use printcap name = lpstat to automatically
obtain lists of available printers. This is the default for
systems that define SYSV at configure time in Samba (this
includes most System V based systems). If printcap name is
set to lpstat on these systems then Samba will launch lpstat
-v and attempt to parse the output to obtain a printer
list.</p>

<p>A minimal printcap file would look something like
this:</p>

<p>print1|My Printer 1 print2|My Printer 2 print3|My
Printer 3 print4|My Printer 4 print5|My Printer 5</p>

<p>where the &rsquo;|&rsquo; separates aliases of a
printer. The fact that the second alias has a space in it
gives a hint to Samba that it&rsquo;s a comment.</p>

<p>Note Under AIX the default printcap name is
/etc/qconfig. Samba will assume the file is in AIX qconfig
format if the string qconfig appears in the printcap
filename. Default: printcap name = /etc/printcap</p>

<p>Example: printcap name = /etc/myprintcap</p>

<p>print command (S)</p>

<p>After a print job has finished spooling to a service,
this command will be used via a system() call to process the
spool file. Typically the command specified will submit the
spool file to the host&rsquo;s printing subsystem, but there
is no requirement that this be the case. The server will not
remove the spool file, so whatever command you specify
should remove the spool file when it has been processed,
otherwise you will need to manually remove old spool
files.</p>

<p>The print command is simply a text string. It will be
used verbatim after macro substitutions have been made:</p>

<p>%s, %f - the path to the spool file name</p>

<p>%p - the appropriate printer name</p>

<p>%J - the job name as transmitted by the client.</p>

<p>%c - The number of printed pages of the spooled job (if
known).</p>

<p>%z - the size of the spooled print job (in bytes)</p>

<p>The print command MUST contain at least one occurrence
of %s or %f - the %p is optional. At the time a job is
submitted, if no printer name is supplied the %p will be
silently removed from the printer command.</p>

<p>If specified in the [global] section, the print command
given will be used for any printable service that does not
have its own print command specified.</p>

<p>If there is neither a specified print command for a
printable service nor a global print command, spool files
will be created but not processed and (most importantly) not
removed.</p>

<p>Note that printing may fail on some UNIXes from the
nobody account. If this happens then create an alternative
guest account that can print and set the guest account in
the [global] section.</p>

<p>You can form quite complex print commands by realizing
that they are just passed to a shell. For example the
following will log a print job, print the file, then remove
it. Note that &rsquo;;&rsquo; is the usual separator for
command in shell scripts.</p>

<p>print command = echo Printing %s &gt;&gt;
/tmp/print.log; lpr -P %p %s; rm %s</p>

<p>You may have to vary this command considerably depending
on how you normally print files on your system. The default
for the parameter varies depending on the setting of the
printing parameter.</p>

<p>Default: For printing = BSD, AIX, QNX, LPRNG or PLP
:</p>

<p>print command = lpr -r -P%p %s</p>

<p>For printing = SYSV or HPUX :</p>

<p>print command = lp -c -d%p %s; rm %s</p>

<p>For printing = SOFTQ :</p>

<p>print command = lp -d%p -s %s; rm %s</p>

<p>For printing = CUPS : If SAMBA is compiled against
libcups, then printcap = cups uses the CUPS API to submit
jobs, etc. Otherwise it maps to the System V commands with
the -oraw option for printing, i.e. it uses lp -c -d%p
-oraw; rm %s. With printing = cups, and if SAMBA is compiled
against libcups, any manually set print command will be
ignored.</p>

<p>No default</p>

<p>Example: print command =
/usr/local/samba/bin/myprintscript %p %s</p>

<p>printer admin (S)</p>

<p>This lists users who can do anything to printers via the
remote administration interfaces offered by MS-RPC (usually
using a NT workstation). This parameter can be set per-share
or globally. Note: The root user always has admin rights.
Use caution with use in the global stanza as this can cause
side effects.</p>

<p>This parameter has been marked deprecated in favor of
using the SePrintOperatorPrivilege and individual print
security descriptors. It will be removed in a future
release.</p>

<p>Default: printer admin =</p>

<p>Example: printer admin = admin, @staff</p>

<p>printer</p>

<p>This parameter is a synonym for printer name.</p>

<p>printer name (S)</p>

<p>This parameter specifies the name of the printer to
which print jobs spooled through a printable service will be
sent.</p>

<p>If specified in the [global] section, the printer name
given will be used for any printable service that does not
have its own printer name specified.</p>

<p>The default value of the printer name may be lp on many
systems.</p>

<p>Default: printer name = none</p>

<p>Example: printer name = laserwriter</p>

<p>printing (S)</p>

<p>This parameters controls how printer status information
is interpreted on your system. It also affects the default
values for the print command, lpq command, lppause command ,
lpresume command, and lprm command if specified in the
[global] section.</p>

<p>Currently nine printing styles are supported. They are
BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, SOFTQ, and CUPS.</p>

<p>To see what the defaults are for the other print
commands when using the various options use the testparm(1)
program.</p>

<p>This option can be set on a per printer basis. Please be
aware however, that you must place any of the various
printing commands (e.g. print command, lpq command, etc...)
after defining the value for the printing option since it
will reset the printing commands to default values.</p>

<p>See also the discussion in the [printers] section.</p>

<p>Default: printing = Depends on the operating system, see
testparm -v.</p>

<p>printjob username (S)</p>

<p>This parameter specifies which user information will be
passed to the printing system. Usually, the username is
sent, but in some cases, e.g. the domain prefix is useful,
too.</p>

<p>Default: printjob username = %U</p>

<p>Example: printjob username = %D%U</p>

<p>print notify backchannel (S)</p>

<p>Windows print clients can update print queue status by
expecting the server to open a backchannel SMB connection to
them. Due to client firewall settings this can cause
considerable timeouts and will often fail, as there is no
guarantee the client is even running an SMB server. By
setting this parameter to no the Samba print server will not
try to connect back to clients and treat corresponding
requests as if the connection back to the client failed. The
default setting of yes causes smbd to attempt this
connection.</p>

<p>Default: print notify backchannel = yes</p>

<p>private dir (G)</p>

<p>This parameters defines the directory smbd will use for
storing such files as smbpasswd and secrets.tdb.</p>

<p>Default: private dir = ${prefix}/private</p>

<p>profile acls (S)</p>

<p>This boolean parameter was added to fix the problems
that people have been having with storing user profiles on
Samba shares from Windows 2000 or Windows XP clients. New
versions of Windows 2000 or Windows XP service packs do
security ACL checking on the owner and ability to write of
the profile directory stored on a local workstation when
copied from a Samba share.</p>

<p>When not in domain mode with winbindd then the security
info copied onto the local workstation has no meaning to the
logged in user (SID) on that workstation so the profile
storing fails. Adding this parameter onto a share used for
profile storage changes two things about the returned
Windows ACL. Firstly it changes the owner and group owner of
all reported files and directories to be
BUILTIN\Administrators, BUILTIN\Users respectively (SIDs
S-1-5-32-544, S-1-5-32-545). Secondly it adds an ACE entry
of &quot;Full Control&quot; to the SID BUILTIN\Users to
every returned ACL. This will allow any Windows 2000 or XP
workstation user to access the profile.</p>

<p>Note that if you have multiple users logging on to a
workstation then in order to prevent them from being able to
access each others profiles you must remove the &quot;Bypass
traverse checking&quot; advanced user right. This will
prevent access to other users profile directories as the top
level profile directory (named after the user) is created by
the workstation profile code and has an ACL restricting
entry to the directory tree to the owning user.</p>

<p>Note that this parameter should be set to yes on
dedicated profile shares only. On other shares, it might
cause incorrect file ownerships.</p>

<p>Default: profile acls = no</p>

<p>queuepause command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to pause the printer queue.</p>

<p>This command should be a program or script which takes a
printer name as its only parameter and stops the printer
queue, such that no longer jobs are submitted to the
printer.</p>

<p>This command is not supported by Windows for Workgroups,
but can be issued from the Printers window under Windows 95
and NT.</p>

<p>If a %p is given then the printer name is put in its
place. Otherwise it is placed at the end of the command.</p>

<p>Note that it is good practice to include the absolute
path in the command as the PATH may not be available to the
server.</p>

<p>No default</p>

<p>Example: queuepause command = disable %p</p>

<p>queueresume command (S)</p>

<p>This parameter specifies the command to be executed on
the server host in order to resume the printer queue. It is
the command to undo the behavior that is caused by the
previous parameter (queuepause command).</p>

<p>This command should be a program or script which takes a
printer name as its only parameter and resumes the printer
queue, such that queued jobs are resubmitted to the
printer.</p>

<p>This command is not supported by Windows for Workgroups,
but can be issued from the Printers window under Windows 95
and NT.</p>

<p>If a %p is given then the printer name is put in its
place. Otherwise it is placed at the end of the command.</p>

<p>Note that it is good practice to include the absolute
path in the command as the PATH may not be available to the
server.</p>

<p>Default: queueresume command =</p>

<p>Example: queueresume command = enable %p</p>

<p>raw NTLMv2 auth (G)</p>

<p>This parameter determines whether or not smbd(8) will
allow SMB1 clients without extended security (without
SPNEGO) to use NTLMv2 authentication.</p>

<p>If this option, lanman auth and ntlm auth are all
disabled, then only clients with SPNEGO support will be
permitted. That means NTLMv2 is only supported within
NTLMSSP.</p>

<p>Default: raw NTLMv2 auth = no</p>

<p>read list (S)</p>

<p>This is a list of users that are given read-only access
to a service. If the connecting user is in this list then
they will not be given write access, no matter what the read
only option is set to. The list can include group names
using the syntax described in the invalid users
parameter.</p>

<p>This parameter will not work with the security = share
in Samba 3.0. This is by design.</p>

<p>Default: read list =</p>

<p>Example: read list = mary, @students</p>

<p>read only (S)</p>

<p>An inverted synonym is writeable.</p>

<p>If this parameter is yes, then users of a service may
not create or modify files in the service&rsquo;s
directory.</p>

<p>Note that a printable service (printable = yes) will
ALWAYS allow writing to the directory (user privileges
permitting), but only via spooling operations.</p>

<p>Default: read only = yes</p>

<p>read raw (G)</p>

<p>This parameter controls whether or not the server will
support the raw read SMB requests when transferring data to
clients.</p>

<p>If enabled, raw reads allow reads of 65535 bytes in one
packet. This typically provides a major performance
benefit.</p>

<p>However, some clients either negotiate the allowable
block size incorrectly or are incapable of supporting larger
block sizes, and for these clients you may need to disable
raw reads.</p>

<p>In general this parameter should be viewed as a system
tuning tool and left severely alone.</p>

<p>Default: read raw = yes</p>

<p>realm (G)</p>

<p>This option specifies the kerberos realm to use. The
realm is used as the ADS equivalent of the NT4 domain. It is
usually set to the DNS name of the kerberos server.</p>

<p>Default: realm =</p>

<p>Example: realm = mysambabox.mycompany.com</p>

<p>registry shares (G)</p>

<p>This turns on or off support for share definitions read
from registry. Shares defined in smb.conf take precedence
over shares with the same name defined in registry. See the
section on registry-based configuration for details.</p>

<p>Note that this parameter defaults to no, but it is set
to yes when config backend is set to registry.</p>

<p>Default: registry shares = no</p>

<p>Example: registry shares = yes</p>

<p>remote announce (G)</p>

<p>This option allows you to setup nmbd(8) to periodically
announce itself to arbitrary IP addresses with an arbitrary
workgroup name.</p>

<p>This is useful if you want your Samba server to appear
in a remote workgroup for which the normal browse
propagation rules don&rsquo;t work. The remote workgroup can
be anywhere that you can send IP packets to.</p>

<p>For example:</p>

<p>remote announce = 192.168.2.255/SERVERS
192.168.4.255/STAFF</p>

<p>the above line would cause nmbd to announce itself to
the two given IP addresses using the given workgroup names.
If you leave out the workgroup name, then the one given in
the workgroup parameter is used instead.</p>

<p>The IP addresses you choose would normally be the
broadcast addresses of the remote networks, but can also be
the IP addresses of known browse masters if your network
config is that stable.</p>

<p>See the chapter on Network Browsing in the Samba-HOWTO
book.</p>

<p>Default: remote announce =</p>

<p>remote browse sync (G)</p>

<p>This option allows you to setup nmbd(8) to periodically
request synchronization of browse lists with the master
browser of a Samba server that is on a remote segment. This
option will allow you to gain browse lists for multiple
workgroups across routed networks. This is done in a manner
that does not work with any non-Samba servers.</p>

<p>This is useful if you want your Samba server and all
local clients to appear in a remote workgroup for which the
normal browse propagation rules don&rsquo;t work. The remote
workgroup can be anywhere that you can send IP packets
to.</p>

<p>For example:</p>

<p>remote browse sync = 192.168.2.255 192.168.4.255</p>

<p>the above line would cause nmbd to request the master
browser on the specified subnets or addresses to synchronize
their browse lists with the local server.</p>

<p>The IP addresses you choose would normally be the
broadcast addresses of the remote networks, but can also be
the IP addresses of known browse masters if your network
config is that stable. If a machine IP address is given
Samba makes NO attempt to validate that the remote machine
is available, is listening, nor that it is in fact the
browse master on its segment.</p>

<p>The remote browse sync may be used on networks where
there is no WINS server, and may be used on disjoint
networks where each network has its own WINS server.</p>

<p>Default: remote browse sync =</p>

<p>rename user script (G)</p>

<p>This is the full pathname to a script that will be run
as root by smbd(8) under special circumstances described
below.</p>

<p>When a user with admin authority or SeAddUserPrivilege
rights renames a user (e.g.: from the NT4 User Manager for
Domains), this script will be run to rename the POSIX user.
Two variables, %uold and %unew, will be substituted with the
old and new usernames, respectively. The script should
return 0 upon successful completion, and nonzero
otherwise.</p>

<p>Note The script has all responsibility to rename all the
necessary data that is accessible in this posix method. This
can mean different requirements for different backends. The
tdbsam and smbpasswd backends will take care of the contents
of their respective files, so the script is responsible only
for changing the POSIX username, and other data that may
required for your circumstances, such as home directory.
Please also consider whether or not you need to rename the
actual home directories themselves. The ldapsam backend will
not make any changes, because of the potential issues with
renaming the LDAP naming attribute. In this case the script
is responsible for changing the attribute that samba uses
(uid) for locating users, as well as any data that needs to
change for other applications using the same directory.
Default: rename user script = no</p>

<p>reset on zero vc (G)</p>

<p>This boolean option controls whether an incoming session
setup should kill other connections coming from the same IP.
This matches the default Windows 2003 behaviour. Setting
this parameter to yes becomes necessary when you have a
flaky network and windows decides to reconnect while the old
connection still has files with share modes open. These
files become inaccessible over the new connection. The
client sends a zero VC on the new connection, and Windows
2003 kills all other connections coming from the same IP.
This way the locked files are accessible again. Please be
aware that enabling this option will kill connections behind
a masquerading router.</p>

<p>Default: reset on zero vc = no</p>

<p>restrict anonymous (G)</p>

<p>The setting of this parameter determines whether user
and group list information is returned for an anonymous
connection. and mirrors the effects of the</p>

<p>HKEY_LOCAL_MACHINETEM Control registry key in Windows
2000 and Windows NT. When set to 0, user and group list
information is returned to anyone who asks. When set to 1,
only an authenticated user can retrive user and group list
information. For the value 2, supported by Windows 2000/XP
and Samba, no anonymous connections are allowed at all. This
can break third party and Microsoft applications which
expect to be allowed to perform operations anonymously.</p>

<p>The security advantage of using restrict anonymous = 1
is dubious, as user and group list information can be
obtained using other means.</p>

<p>Note The security advantage of using restrict anonymous
= 2 is removed by setting guest ok = yes on any share.
Default: restrict anonymous = 0</p>

<p>root</p>

<p>This parameter is a synonym for root directory.</p>

<p>root dir</p>

<p>This parameter is a synonym for root directory.</p>

<p>root directory (G)</p>

<p>The server will chroot() (i.e. Change its root
directory) to this directory on startup. This is not
strictly necessary for secure operation. Even without it the
server will deny access to files not in one of the service
entries. It may also check for, and deny access to, soft
links to other parts of the filesystem, or attempts to use
&quot;..&quot; in file names to access other directories
(depending on the setting of the wide smbconfoptions
parameter).</p>

<p>Adding a root directory entry other than &quot;/&quot;
adds an extra level of security, but at a price. It
absolutely ensures that no access is given to files not in
the sub-tree specified in the root directory option,
including some files needed for complete operation of the
server. To maintain full operability of the server you will
need to mirror some system files into the root directory
tree. In particular you will need to mirror /etc/passwd (or
a subset of it), and any binaries or configuration files
needed for printing (if required). The set of files that
must be mirrored is operating system dependent.</p>

<p>Default: root directory = /</p>

<p>Example: root directory = /homes/smb</p>

<p>root postexec (S)</p>

<p>This is the same as the postexec parameter except that
the command is run as root. This is useful for unmounting
filesystems (such as CDROMs) after a connection is
closed.</p>

<p>Default: root postexec =</p>

<p>root preexec close (S)</p>

<p>This is the same as the preexec close parameter except
that the command is run as root.</p>

<p>Default: root preexec close = no</p>

<p>root preexec (S)</p>

<p>This is the same as the preexec parameter except that
the command is run as root. This is useful for mounting
filesystems (such as CDROMs) when a connection is
opened.</p>

<p>Default: root preexec =</p>

<p>rpc_server (G)</p>

<p>Defines what kind of rpc server to use for a named pipe.
The rpc_server prefix must be followed by the pipe name, and
a value.</p>

<p>Three possible values are currently supported:
embeddeddaemonexternal</p>

<p>The classic method is to run every pipe as an internal
function embedded in smbd.</p>

<p>An alternative method is to fork a daemon early on at
smbd startup time. This is supported only for selected
pipes.</p>

<p>Choosing the external option allows to run a completely
independent (3rd party) server capable of interfacing with
samba via the MS-RPC interface over named pipes.</p>

<p>Currently only the spoolss pipe can be configured in
daemon mode like this:</p>

<p>rpc_server:spoolss = daemon</p>

<p>Default: rpc_server = none</p>

<p>security mask (S)</p>

<p>This parameter controls what UNIX permission bits will
be set when a Windows NT client is manipulating the UNIX
permission on a file using the native NT security dialog
box.</p>

<p>This parameter is applied as a mask (AND&rsquo;ed with)
to the incoming permission bits, thus resetting any bits not
in this mask. Make sure not to mix up this parameter with
force security mode, which works in a manner similar to this
one but uses a logical OR instead of an AND.</p>

<p>Essentially, all bits set to zero in this mask will
result in setting to zero the corresponding bits on the file
permissions regardless of the previous status of this bits
on the file.</p>

<p>If not set explicitly this parameter is 0777, allowing a
user to set all the user/group/world permissions on a
file.</p>

<p>Note that users who can access the Samba server through
other means can easily bypass this restriction, so it is
primarily useful for standalone &quot;appliance&quot;
systems. Administrators of most normal systems will probably
want to leave it set to 0777.</p>

<p>Default: security mask = 0777</p>

<p>Example: security mask = 0770</p>

<p>security (G)</p>

<p>This option affects how clients respond to Samba and is
one of the most important settings in the smb.conf file.</p>

<p>The option sets the &quot;security mode bit&quot; in
replies to protocol negotiations with smbd(8) to turn share
level security on or off. Clients decide based on this bit
whether (and how) to transfer user and password information
to the server.</p>

<p>The default is security = user, as this is the most
common setting needed when talking to Windows 98 and Windows
NT.</p>

<p>The alternatives are security = ads or security =
domain, which support joining Samba to a Windows domain,
along with security = share and security = server, both of
which are deprecated.</p>

<p>In versions of Samba prior to 2.0.0, the default was
security = share mainly because that was the only option at
one stage.</p>

<p>You should use security = user and map to guest if you
want to mainly setup shares without a password (guest
shares). This is commonly used for a shared printer
server.</p>

<p>It is possible to use smbd in a hybrid mode where it is
offers both user and share level security under different
NetBIOS aliases.</p>

<p>The different settings will now be explained.</p>

<p>SECURITY = USER</p>

<p>This is the default security setting in Samba. With
user-level security a client must first &quot;log-on&quot;
with a valid username and password (which can be mapped
using the username map parameter). Encrypted passwords (see
the encrypted passwords parameter) can also be used in this
security mode. Parameters such as user and guest only if set
are then applied and may change the UNIX user to use on this
connection, but only after the user has been successfully
authenticated.</p>

<p>Note that the name of the resource being requested is
not sent to the server until after the server has
successfully authenticated the client. This is why guest
shares don&rsquo;t work in user level security without
allowing the server to automatically map unknown users into
the guest account. See the map to guest parameter for
details on doing this.</p>

<p>See also the section NOTE ABOUT USERNAME/PASSWORD
VALIDATION.</p>

<p>SECURITY = DOMAIN</p>

<p>This mode will only work correctly if net(8) has been
used to add this machine into a Windows NT Domain. It
expects the encrypted passwords parameter to be set to yes.
In this mode Samba will try to validate the
username/password by passing it to a Windows NT Primary or
Backup Domain Controller, in exactly the same way that a
Windows NT Server would do.</p>

<p>Note that a valid UNIX user must still exist as well as
the account on the Domain Controller to allow Samba to have
a valid UNIX account to map file access to.</p>

<p>Note that from the client&rsquo;s point of view security
= domain is the same as security = user. It only affects how
the server deals with the authentication, it does not in any
way affect what the client sees.</p>

<p>Note that the name of the resource being requested is
not sent to the server until after the server has
successfully authenticated the client. This is why guest
shares don&rsquo;t work in user level security without
allowing the server to automatically map unknown users into
the guest account. See the map to guest parameter for
details on doing this.</p>

<p>See also the section NOTE ABOUT USERNAME/PASSWORD
VALIDATION.</p>

<p>See also the password server parameter and the encrypted
passwords parameter.</p>

<p>SECURITY = SHARE</p>

<p>Note This option is deprecated as it is incompatible
with SMB2 When clients connect to a share level security
server, they need not log onto the server with a valid
username and password before attempting to connect to a
shared resource (although modern clients such as Windows
95/98 and Windows NT will send a logon request with a
username but no password when talking to a security = share
server). Instead, the clients send authentication
information (passwords) on a per-share basis, at the time
they attempt to connect to that share.</p>

<p>Note that smbdALWAYS uses a valid UNIX user to act on
behalf of the client, even in security = share level
security.</p>

<p>As clients are not required to send a username to the
server in share level security, smbd uses several techniques
to determine the correct UNIX user to use on behalf of the
client.</p>

<p>A list of possible UNIX usernames to match with the
given client password is constructed using the following
methods :</p>

<p>&middot; If the guest only parameter is set, then all
the other stages are missed and only the guest account
username is checked.</p>

<p>&middot; Is a username is sent with the share connection
request, then this username (after mapping - see username
map), is added as a potential username.</p>

<p>&middot; If the client did a previous logon request (the
SessionSetup SMB call) then the username sent in this SMB
will be added as a potential username.</p>

<p>&middot; The name of the service the client requested is
added as a potential username.</p>

<p>&middot; The NetBIOS name of the client is added to the
list as a potential username.</p>

<p>&middot; Any users on the user list are added as
potential usernames.</p>

<p>If the guest only parameter is not set, then this list
is then tried with the supplied password. The first user for
whom the password matches will be used as the UNIX user.</p>

<p>If the guest only parameter is set, or no username can
be determined then if the share is marked as available to
the guest account, then this guest user will be used,
otherwise access is denied.</p>

<p>Note that it can be very confusing in share-level
security as to which UNIX username will eventually be used
in granting access.</p>

<p>See also the section NOTE ABOUT USERNAME/PASSWORD
VALIDATION.</p>

<p>SECURITY = SERVER</p>

<p>In this depicted mode Samba will try to validate the
username/password by passing it to another SMB server, such
as an NT box. If this fails it will revert to security =
user. It expects the encrypted passwords parameter to be set
to yes, unless the remote server does not support them.
However note that if encrypted passwords have been
negotiated then Samba cannot revert back to checking the
UNIX password file, it must have a valid smbpasswd file to
check users against. See the chapter about the User Database
in the Samba HOWTO Collection for details on how to set this
up.</p>

<p>Note This mode of operation has significant pitfalls
since it is more vulnerable to man-in-the-middle attacks and
server impersonation. In particular, this mode of operation
can cause significant resource consumption on the PDC, as it
must maintain an active connection for the duration of the
user&rsquo;s session. Furthermore, if this connection is
lost, there is no way to reestablish it, and further
authentications to the Samba server may fail (from a single
client, till it disconnects).</p>

<p>Note If the client selects NTLMv2 authentication, then
this mode of operation will fail</p>

<p>Note From the client&rsquo;s point of view, security =
server is the same as security = user. It only affects how
the server deals with the authentication, it does not in any
way affect what the client sees.</p>

<p>Note This option is deprecated, and may be removed in
future Note that the name of the resource being requested is
not sent to the server until after the server has
successfully authenticated the client. This is why guest
shares don&rsquo;t work in user level security without
allowing the server to automatically map unknown users into
the guest account. See the map to guest parameter for
details on doing this.</p>

<p>See also the section NOTE ABOUT USERNAME/PASSWORD
VALIDATION.</p>

<p>See also the password server parameter and the encrypted
passwords parameter.</p>

<p>SECURITY = ADS</p>

<p>In this mode, Samba will act as a domain member in an
ADS realm. To operate in this mode, the machine running
Samba will need to have Kerberos installed and configured
and Samba will need to be joined to the ADS realm using the
net utility.</p>

<p>Note that this mode does NOT make Samba operate as a
Active Directory Domain Controller.</p>

<p>Read the chapter about Domain Membership in the HOWTO
for details.</p>

<p>Default: security = USER</p>

<p>Example: security = DOMAIN</p>

<p>send spnego principal (G)</p>

<p>This parameter determines whether or not smbd(8) will
send the server-supplied principal sometimes given in the
SPNEGO exchange.</p>

<p>If enabled, Samba can attempt to help clients to use
Kerberos to contact it, even when known only by IP address
or a name not registered with our KDC as a service principal
name. Kerberos relies on names, so ordinarily cannot
function in this situation.</p>

<p>If disabled, Samba will send the string
not_defined_in_RFC4178@please_ignore as the &rsquo;rfc4178
hint&rsquo;, following the updated RFC and Windows 2008
behaviour in this area.</p>

<p>Note that Windows XP SP2 and later versions already
ignored this value in all circumstances.</p>

<p>Default: send spnego principal = no</p>

<p>server schannel (G)</p>

<p>This controls whether the server offers or even demands
the use of the netlogon schannel. server schannel = no does
not offer the schannel, server schannel = auto offers the
schannel but does not enforce it, and server schannel = yes
denies access if the client is not able to speak netlogon
schannel. This is only the case for Windows NT4 before
SP4.</p>

<p>Please note that with this set to no, you will have to
apply the WindowsXP WinXP_SignOrSeal.reg registry patch
found in the docs/registry subdirectory of the Samba
distribution tarball.</p>

<p>Default: server schannel = auto</p>

<p>Example: server schannel = yes</p>

<p>server signing (G)</p>

<p>This controls whether the client is allowed or required
to use SMB1 and SMB2 signing. Possible values are auto,
mandatory and disabled.</p>

<p>When set to auto, SMB1 signing is offered, but not
enforced. When set to mandatory, SMB1 signing is required
and if set to disabled, SMB signing is not offered
either.</p>

<p>For the SMB2 protocol, by design, signing cannot be
disabled. In the case where SMB2 is negotiated, if this
parameter is set to disabled, it will be treated as auto.
Setting it to mandatory will still require SMB2 clients to
use signing.</p>

<p>Default: server signing = Disabled</p>

<p>server string (G)</p>

<p>This controls what string will show up in the printer
comment box in print manager and next to the IPC connection
in net view. It can be any string that you wish to show to
your users.</p>

<p>It also sets what will appear in browse lists next to
the machine name.</p>

<p>A %v will be replaced with the Samba version number.</p>

<p>A %h will be replaced with the hostname.</p>

<p>Default: server string = Samba %v</p>

<p>Example: server string = University of GNUs Samba
Server</p>

<p>set directory (S)</p>

<p>If set directory = no, then users of the service may not
use the setdir command to change directory.</p>

<p>The setdir command is only implemented in the Digital
Pathworks client. See the Pathworks documentation for
details.</p>

<p>Default: set directory = no</p>

<p>set primary group script (G)</p>

<p>Thanks to the Posix subsystem in NT a Windows User has a
primary group in addition to the auxiliary groups. This
script sets the primary group in the unix userdatase when an
administrator sets the primary group from the windows user
manager or when fetching a SAM with net rpc vampire. %u will
be replaced with the user whose primary group is to be set.
%g will be replaced with the group to set.</p>

<p>Default: set primary group script =</p>

<p>Example: set primary group script = /usr/sbin/usermod -g
&rsquo;%g&rsquo; &rsquo;%u&rsquo;</p>

<p>set quota command (G)</p>

<p>The set quota command should only be used whenever there
is no operating system API available from the OS that samba
can use.</p>

<p>This option is only available if Samba was configured
with the argument --with-sys-quotas or on linux when
./configure --with-quotas was used and a working quota api
was found in the system. Most packages are configured with
these options already.</p>

<p>This parameter should specify the path to a script that
can set quota for the specified arguments.</p>

<p>The specified script should take the following
arguments:</p>

<p>&middot; 1 - quota type</p>

<p>&middot; 1 - user quotas</p>

<p>&middot; 2 - user default quotas (uid = -1)</p>

<p>&middot; 3 - group quotas</p>

<p>&middot; 4 - group default quotas (gid = -1)</p>

<p>&middot; 2 - id (uid for user, gid for group, -1 if
N/A)</p>

<p>&middot; 3 - quota state (0 = disable, 1 = enable, 2 =
enable and enforce)</p>

<p>&middot; 4 - block softlimit</p>

<p>&middot; 5 - block hardlimit</p>

<p>&middot; 6 - inode softlimit</p>

<p>&middot; 7 - inode hardlimit</p>

<p>&middot; 8(optional) - block size, defaults to 1024</p>

<p>The script should output at least one line of data on
success. And nothing on failure.</p>

<p>Default: set quota command =</p>

<p>Example: set quota command =
/usr/local/sbin/set_quota</p>

<p>share:fake_fscaps (G)</p>

<p>This is needed to support some special application that
makes QFSINFO calls to check whether we set the SPARSE_FILES
bit (0x40). If this bit is not set that particular
application refuses to work against Samba. With
share:fake_fscaps = 64 the SPARSE_FILES file system
capability flag is set. Use other decimal values to specify
the bitmask you need to fake.</p>

<p>Default: share:fake_fscaps = 0</p>

<p>share modes (S)</p>

<p>This enables or disables the honoring of the share modes
during a file open. These modes are used by clients to gain
exclusive read or write access to a file.</p>

<p>This is a deprecated option from old versions of Samba,
and will be removed in the next major release.</p>

<p>These open modes are not directly supported by UNIX, so
they are simulated using shared memory.</p>

<p>The share modes that are enabled by this option are the
standard Windows share modes.</p>

<p>This option gives full share compatibility and is
enabled by default.</p>

<p>You should NEVER turn this parameter off as many Windows
applications will break if you do so.</p>

<p>Default: share modes = yes</p>

<p>short preserve case (S)</p>

<p>This boolean parameter controls if new files which
conform to 8.3 syntax, that is all in upper case and of
suitable length, are created upper case, or if they are
forced to be the default case. This option can be use with
preserve case = yes to permit long filenames to retain their
case, while short names are lowered.</p>

<p>See the section on NAME MANGLING.</p>

<p>Default: short preserve case = yes</p>

<p>show add printer wizard (G)</p>

<p>With the introduction of MS-RPC based printing support
for Windows NT/2000 client in Samba 2.2, a
&quot;Printers...&quot; folder will appear on Samba hosts in
the share listing. Normally this folder will contain an icon
for the MS Add Printer Wizard (APW). However, it is possible
to disable this feature regardless of the level of privilege
of the connected user.</p>

<p>Under normal circumstances, the Windows NT/2000 client
will open a handle on the printer server with
OpenPrinterEx() asking for Administrator privileges. If the
user does not have administrative access on the print server
(i.e is not root or a member of the printer admin group),
the OpenPrinterEx() call fails and the client makes another
open call with a request for a lower privilege level. This
should succeed, however the APW icon will not be
displayed.</p>

<p>Disabling the show add printer wizard parameter will
always cause the OpenPrinterEx() on the server to fail. Thus
the APW icon will never be displayed.</p>

<p>Note This does not prevent the same user from having
administrative privilege on an individual printer. Default:
show add printer wizard = yes</p>

<p>shutdown script (G)</p>

<p>This a full path name to a script called by smbd(8) that
should start a shutdown procedure.</p>

<p>If the connected user posseses the
SeRemoteShutdownPrivilege, right, this command will be run
as root.</p>

<p>The %z %t %r %f variables are expanded as follows:</p>

<p>&middot; %z will be substituted with the shutdown
message sent to the server.</p>

<p>&middot; %t will be substituted with the number of
seconds to wait before effectively starting the shutdown
procedure.</p>

<p>&middot; %r will be substituted with the switch -r. It
means reboot after shutdown for NT.</p>

<p>&middot; %f will be substituted with the switch -f. It
means force the shutdown even if applications do not respond
for NT.</p>

<p>Shutdown script example:</p>

<p>#!/bin/bash</p>

<p>time=$2 let time=&quot;${time} / 60&quot; let
time=&quot;${time} + 1&quot;</p>

<p>/sbin/shutdown $3 $4 +$time $1 &amp;</p>

<p>Shutdown does not return so we need to launch it in
background.</p>

<p>Default: shutdown script =</p>

<p>Example: shutdown script =
/usr/local/samba/sbin/shutdown %m %t %r %f</p>

<p>smb2 max credits (G)</p>

<p>This option controls the maximum number of outstanding
simultaneous SMB2 operations that Samba tells the client it
will allow. This is similar to the max mux parameter for
SMB1. You should never need to set this parameter.</p>

<p>The default is 8192 credits, which is the same as a
Windows 2008R2 SMB2 server.</p>

<p>Default: smb2 max credits = 8192</p>

<p>smb2 max read (G)</p>

<p>This option specifies the protocol value that smbd(8)
will return to a client, informing the client of the largest
size that may be returned by a single SMB2 read call.</p>

<p>The maximum is 65536 bytes (64KB), which is the same as
a Windows Vista SMB2 server.</p>

<p>Default: smb2 max read = 65536</p>

<p>smb2 max trans (G)</p>

<p>This option specifies the protocol value that smbd(8)
will return to a client, informing the client of the largest
size of buffer that may be used in querying file meta-data
via QUERY_INFO and related SMB2 calls.</p>

<p>The maximum is 65536 bytes (64KB), which is the same as
a Windows Vista SMB2 server.</p>

<p>Default: smb2 max trans = 65536</p>

<p>smb2 max write (G)</p>

<p>This option specifies the protocol value that smbd(8)
will return to a client, informing the client of the largest
size that may be sent to the server by a single SMB2 write
call.</p>

<p>The maximum is 65536 bytes (64KB), which is the same as
a Windows Vista SMB2 server.</p>

<p>Default: smb2 max write = 65536</p>

<p>smb encrypt (S)</p>

<p>This is a new feature introduced with Samba 3.2 and
above. It is an extension to the SMB/CIFS protocol
negotiated as part of the UNIX extensions. SMB encryption
uses the GSSAPI (SSPI on Windows) ability to encrypt and
sign every request/response in a SMB protocol stream. When
enabled it provides a secure method of SMB/CIFS
communication, similar to an ssh protected session, but
using SMB/CIFS authentication to negotiate encryption and
signing keys. Currently this is only supported by Samba 3.2
smbclient, and hopefully soon Linux CIFSFS and MacOS/X
clients. Windows clients do not support this feature.</p>

<p>This controls whether the remote client is allowed or
required to use SMB encryption. Possible values are auto,
mandatory and disabled. This may be set on a per-share
basis, but clients may chose to encrypt the entire session,
not just traffic to a specific share. If this is set to
mandatory then all traffic to a share must must be encrypted
once the connection has been made to the share. The server
would return &quot;access denied&quot; to all non-encrypted
requests on such a share. Selecting encrypted traffic
reduces throughput as smaller packet sizes must be used (no
huge UNIX style read/writes allowed) as well as the overhead
of encrypting and signing all the data.</p>

<p>If SMB encryption is selected, Windows style SMB signing
(see the server signing option) is no longer necessary, as
the GSSAPI flags use select both signing and sealing of the
data.</p>

<p>When set to auto, SMB encryption is offered, but not
enforced. When set to mandatory, SMB encryption is required
and if set to disabled, SMB encryption can not be
negotiated.</p>

<p>Default: smb encrypt = auto</p>

<p>smb passwd file (G)</p>

<p>This option sets the path to the encrypted smbpasswd
file. By default the path to the smbpasswd file is compiled
into Samba.</p>

<p>An example of use is:</p>

<p>smb passwd file = /etc/samba/smbpasswd</p>

<p>Default: smb passwd file =
${prefix}/private/smbpasswd</p>

<p>smb ports (G)</p>

<p>Specifies which ports the server should listen on for
SMB traffic.</p>

<p>Default: smb ports = 445 139</p>

<p>socket address (G)</p>

<p>This option allows you to control what address Samba
will listen for connections on. This is used to support
multiple virtual interfaces on the one server, each with a
different configuration.</p>

<p>Setting this option should never be necessary on usual
Samba servers running only one nmbd.</p>

<p>By default Samba will accept connections on any
address.</p>

<p>Default: socket address =</p>

<p>Example: socket address = 192.168.2.20</p>

<p>socket options (G)</p>

<p>This option allows you to set socket options to be used
when talking with the client.</p>

<p>Socket options are controls on the networking layer of
the operating systems which allow the connection to be
tuned.</p>

<p>This option will typically be used to tune your Samba
server for optimal performance for your local network. There
is no way that Samba can know what the optimal parameters
are for your net, so you must experiment and choose them
yourself. We strongly suggest you read the appropriate
documentation for your operating system first (perhaps man
setsockopt will help).</p>

<p>You may find that on some systems Samba will say
&quot;Unknown socket option&quot; when you supply an option.
This means you either incorrectly typed it or you need to
add an include file to includes.h for your OS. If the latter
is the case please send the patch to
samba-technical@samba.org.</p>

<p>Any of the supported socket options may be combined in
any way you like, as long as your OS allows it.</p>

<p>This is the list of socket options currently settable
using this option:</p>

<p>&middot; SO_KEEPALIVE</p>

<p>&middot; SO_REUSEADDR</p>

<p>&middot; SO_BROADCAST</p>

<p>&middot; TCP_NODELAY</p>

<p>&middot; IPTOS_LOWDELAY</p>

<p>&middot; IPTOS_THROUGHPUT</p>

<p>&middot; SO_SNDBUF *</p>

<p>&middot; SO_RCVBUF *</p>

<p>&middot; SO_SNDLOWAT *</p>

<p>&middot; SO_RCVLOWAT *</p>

<p>Those marked with a &rsquo;*&rsquo; take an integer
argument. The others can optionally take a 1 or 0 argument
to enable or disable the option, by default they will be
enabled if you don&rsquo;t specify 1 or 0.</p>

<p>To specify an argument use the syntax SOME_OPTION =
VALUE for example SO_SNDBUF = 8192. Note that you must not
have any spaces before or after the = sign.</p>

<p>If you are on a local network then a sensible option
might be:</p>

<p>socket options = IPTOS_LOWDELAY</p>

<p>If you have a local network then you could try:</p>

<p>socket options = IPTOS_LOWDELAY TCP_NODELAY</p>

<p>If you are on a wide area network then perhaps try
setting IPTOS_THROUGHPUT.</p>

<p>Note that several of the options may cause your Samba
server to fail completely. Use these options with
caution!</p>

<p>Default: socket options = TCP_NODELAY</p>

<p>Example: socket options = IPTOS_LOWDELAY</p>

<p>stat cache (G)</p>

<p>This parameter determines if smbd(8) will use a cache in
order to speed up case insensitive name mappings. You should
never need to change this parameter.</p>

<p>Default: stat cache = yes</p>

<p>state directory (G)</p>

<p>Usually, most of the TDB files are stored in the lock
directory. Since Samba 3.4.0, it is possible to
differentiate between TDB files with persistent data and TDB
files with non-persistent data using the state directory and
the cache directory options.</p>

<p>This option specifies the directory where TDB files
containing persistent data will be stored.</p>

<p>Default: state directory = ${prefix}/var/locks</p>

<p>Example: state directory =
/var/run/samba/locks/state</p>

<p>store dos attributes (S)</p>

<p>If this parameter is set Samba attempts to first read
DOS attributes (SYSTEM, HIDDEN, ARCHIVE or READ-ONLY) from a
filesystem extended attribute, before mapping DOS attributes
to UNIX permission bits (such as occurs with map hidden and
map readonly). When set, DOS attributes will be stored onto
an extended attribute in the UNIX filesystem, associated
with the file or directory. For no other mapping to occur as
a fall-back, the parameters map hidden, map system, map
archive and map readonly must be set to off. This parameter
writes the DOS attributes as a string into the extended
attribute named &quot;user.DOSATTRIB&quot;. This extended
attribute is explicitly hidden from smbd clients requesting
an EA list. On Linux the filesystem must have been mounted
with the mount option user_xattr in order for extended
attributes to work, also extended attributes must be
compiled into the Linux kernel. In Samba 3.5.0 and above the
&quot;user.DOSATTRIB&quot; extended attribute has been
extended to store the create time for a file as well as the
DOS attributes. This is done in a backwards compatible way
so files created by Samba 3.5.0 and above can still have the
DOS attribute read from this extended attribute by earlier
versions of Samba, but they will not be able to read the
create time stored there. Storing the create time separately
from the normal filesystem meta-data allows Samba to
faithfully reproduce NTFS semantics on top of a POSIX
filesystem.</p>

<p>Default: store dos attributes = no</p>

<p>strict allocate (S)</p>

<p>This is a boolean that controls the handling of disk
space allocation in the server. When this is set to yes the
server will change from UNIX behaviour of not committing
real disk storage blocks when a file is extended to the
Windows behaviour of actually forcing the disk system to
allocate real storage blocks when a file is created or
extended to be a given size. In UNIX terminology this means
that Samba will stop creating sparse files.</p>

<p>This option is really desgined for file systems that
support fast allocation of large numbers of blocks such as
extent-based file systems. On file systems that don&rsquo;t
support extents (most notably ext3) this can make Samba
slower. When you work with large files over &gt;100MB on
file systems without extents you may even run into problems
with clients running into timeouts.</p>

<p>When you have an extent based filesystem it&rsquo;s
likely that we can make use of unwritten extents which
allows Samba to allocate even large amounts of space very
fast and you will not see any timeout problems caused by
strict allocate. With strict allocate in use you will also
get much better out of quota messages in case you use
quotas. Another advantage of activating this setting is that
it will help to reduce file fragmentation.</p>

<p>To give you an idea on which filesystems this setting
might currently be a good option for you: XFS, ext4, btrfs,
ocfs2 on Linux and JFS2 on AIX support unwritten extents. On
Filesystems that do not support it, preallocation is
probably an expensive operation where you will see reduced
performance and risk to let clients run into timeouts when
creating large files. Examples are ext3, ZFS, HFS+ and most
others, so be aware if you activate this setting on those
filesystems.</p>

<p>Default: strict allocate = no</p>

<p>strict locking (S)</p>

<p>This is an enumerated type that controls the handling of
file locking in the server. When this is set to yes, the
server will check every read and write access for file
locks, and deny access if locks exist. This can be slow on
some systems.</p>

<p>When strict locking is set to Auto (the default), the
server performs file lock checks only on non-oplocked files.
As most Windows redirectors perform file locking checks
locally on oplocked files this is a good trade off for
improved performance.</p>

<p>When strict locking is disabled, the server performs
file lock checks only when the client explicitly asks for
them.</p>

<p>Well-behaved clients always ask for lock checks when it
is important. So in the vast majority of cases, strict
locking = Auto or strict locking = no is acceptable.</p>

<p>Default: strict locking = Auto</p>

<p>strict sync (S)</p>

<p>Many Windows applications (including the Windows 98
explorer shell) seem to confuse flushing buffer contents to
disk with doing a sync to disk. Under UNIX, a sync call
forces the process to be suspended until the kernel has
ensured that all outstanding data in kernel disk buffers has
been safely stored onto stable storage. This is very slow
and should only be done rarely. Setting this parameter to no
(the default) means that smbd(8) ignores the Windows
applications requests for a sync call. There is only a
possibility of losing data if the operating system itself
that Samba is running on crashes, so there is little danger
in this default setting. In addition, this fixes many
performance problems that people have reported with the new
Windows98 explorer shell file copies.</p>

<p>Default: strict sync = no</p>

<p>svcctl list (G)</p>

<p>This option defines a list of init scripts that smbd
will use for starting and stopping Unix services via the
Win32 ServiceControl API. This allows Windows administrators
to utilize the MS Management Console plug-ins to manage a
Unix server running Samba.</p>

<p>The administrator must create a directory name svcctl in
Samba&rsquo;s $(libdir) and create symbolic links to the
init scripts in /etc/init.d/. The name of the links must
match the names given as part of the svcctl list.</p>

<p>Default: svcctl list =</p>

<p>Example: svcctl list = cups postfix portmap httpd</p>

<p>sync always (S)</p>

<p>This is a boolean parameter that controls whether writes
will always be written to stable storage before the write
call returns. If this is no then the server will be guided
by the client&rsquo;s request in each write call (clients
can set a bit indicating that a particular write should be
synchronous). If this is yes then every write will be
followed by a fsync() call to ensure the data is written to
disk. Note that the strict sync parameter must be set to yes
in order for this parameter to have any effect.</p>

<p>Default: sync always = no</p>

<p>syslog only (G)</p>

<p>If this parameter is set then Samba debug messages are
logged into the system syslog only, and not to the debug log
files. There still will be some logging to log.[sn]mbd even
if syslog only is enabled.</p>

<p>Default: syslog only = no</p>

<p>syslog (G)</p>

<p>This parameter maps how Samba debug messages are logged
onto the system syslog logging levels. Samba debug level
zero maps onto syslog LOG_ERR, debug level one maps onto
LOG_WARNING, debug level two maps onto LOG_NOTICE, debug
level three maps onto LOG_INFO. All higher levels are mapped
to LOG_DEBUG.</p>

<p>This parameter sets the threshold for sending messages
to syslog. Only messages with debug level less than this
value will be sent to syslog. There still will be some
logging to log.[sn]mbd even if syslog only is enabled.</p>

<p>Default: syslog = 1</p>

<p>template homedir (G)</p>

<p>When filling out the user information for a Windows NT
user, the winbindd(8) daemon uses this parameter to fill in
the home directory for that user. If the string %D is
present it is substituted with the user&rsquo;s Windows NT
domain name. If the string %U is present it is substituted
with the user&rsquo;s Windows NT user name.</p>

<p>Default: template homedir = /home/%D/%U</p>

<p>template shell (G)</p>

<p>When filling out the user information for a Windows NT
user, the winbindd(8) daemon uses this parameter to fill in
the login shell for that user.</p>

<p>No default</p>

<p>time offset (G)</p>

<p>This deprecated parameter is a setting in minutes to add
to the normal GMT to local time conversion. This is useful
if you are serving a lot of PCs that have incorrect daylight
saving time handling.</p>

<p>Note This option is deprecated, and will be removed in
the next major release Default: time offset = 0</p>

<p>Example: time offset = 60</p>

<p>time server (G)</p>

<p>This parameter determines if nmbd(8) advertises itself
as a time server to Windows clients.</p>

<p>Default: time server = no</p>

<p>unix charset (G)</p>

<p>Specifies the charset the unix machine Samba runs on
uses. Samba needs to know this in order to be able to
convert text to the charsets other SMB clients use.</p>

<p>This is also the charset Samba will use when specifying
arguments to scripts that it invokes.</p>

<p>Default: unix charset = UTF8</p>

<p>Example: unix charset = ASCII</p>

<p>unix extensions (G)</p>

<p>This boolean parameter controls whether Samba implements
the CIFS UNIX extensions, as defined by HP. These extensions
enable Samba to better serve UNIX CIFS clients by supporting
features such as symbolic links, hard links, etc... These
extensions require a similarly enabled client, and are of no
current use to Windows clients.</p>

<p>Note if this parameter is turned on, the wide links
parameter will automatically be disabled.</p>

<p>See the parameter allow insecure wide links if you wish
to change this coupling between the two parameters.</p>

<p>Default: unix extensions = yes</p>

<p>unix password sync (G)</p>

<p>This boolean parameter controls whether Samba attempts
to synchronize the UNIX password with the SMB password when
the encrypted SMB password in the smbpasswd file is changed.
If this is set to yes the program specified in the passwd
program parameter is called AS ROOT - to allow the new UNIX
password to be set without access to the old UNIX password
(as the SMB password change code has no access to the old
password cleartext, only the new).</p>

<p>Default: unix password sync = no</p>

<p>use client driver (S)</p>

<p>This parameter applies only to Windows NT/2000 clients.
It has no effect on Windows 95/98/ME clients. When serving a
printer to Windows NT/2000 clients without first installing
a valid printer driver on the Samba host, the client will be
required to install a local printer driver. From this point
on, the client will treat the print as a local printer and
not a network printer connection. This is much the same
behavior that will occur when disable spoolss = yes.</p>

<p>The differentiating factor is that under normal
circumstances, the NT/2000 client will attempt to open the
network printer using MS-RPC. The problem is that because
the client considers the printer to be local, it will
attempt to issue the OpenPrinterEx() call requesting access
rights associated with the logged on user. If the user
possesses local administator rights but not root privilege
on the Samba host (often the case), the OpenPrinterEx() call
will fail. The result is that the client will now display an
&quot;Access Denied; Unable to connect&quot; message in the
printer queue window (even though jobs may successfully be
printed).</p>

<p>If this parameter is enabled for a printer, then any
attempt to open the printer with the
PRINTER_ACCESS_ADMINISTER right is mapped to
PRINTER_ACCESS_USE instead. Thus allowing the
OpenPrinterEx() call to succeed. This parameter MUST not be
enabled on a print share which has valid print driver
installed on the Samba server.</p>

<p>Default: use client driver = no</p>

<p>use mmap (G)</p>

<p>This global parameter determines if the tdb internals of
Samba can depend on mmap working correctly on the running
system. Samba requires a coherent mmap/read-write system
memory cache. Currently only HPUX does not have such a
coherent cache, and so this parameter is set to no by
default on HPUX. On all other systems this parameter should
be left alone. This parameter is provided to help the Samba
developers track down problems with the tdb internal
code.</p>

<p>Default: use mmap = yes</p>

<p>username level (G)</p>

<p>This option helps Samba to try and &rsquo;guess&rsquo;
at the real UNIX username, as many DOS clients send an
all-uppercase username. By default Samba tries all
lowercase, followed by the username with the first letter
capitalized, and fails if the username is not found on the
UNIX machine.</p>

<p>If this parameter is set to non-zero the behavior
changes. This parameter is a number that specifies the
number of uppercase combinations to try while trying to
determine the UNIX user name. The higher the number the more
combinations will be tried, but the slower the discovery of
usernames will be. Use this parameter when you have strange
usernames on your UNIX machine, such as AstrangeUser .</p>

<p>This parameter is needed only on UNIX systems that have
case sensitive usernames.</p>

<p>Default: username level = 0</p>

<p>Example: username level = 5</p>

<p>username map cache time (G)</p>

<p>Mapping usernames with the username map or username map
script features of Samba can be relatively expensive. During
login of a user, the mapping is done several times. In
particular, calling the username map script can slow down
logins if external databases have to be queried from the
script being called.</p>

<p>The parameter username map cache time controls a mapping
cache. It specifies the number of seconds a mapping from the
username map file or script is to be efficiently cached. The
default of 0 means no caching is done.</p>

<p>Default: username map cache time = 0</p>

<p>Example: username map cache time = 60</p>

<p>username map script (G)</p>

<p>This script is a mutually exclusive alternative to the
username map parameter. This parameter specifies and
external program or script that must accept a single command
line option (the username transmitted in the authentication
request) and return a line line on standard output (the name
to which the account should mapped). In this way, it is
possible to store username map tables in an LDAP or NIS
directory services.</p>

<p>Default: username map script =</p>

<p>Example: username map script =
/etc/samba/scripts/mapusers.sh</p>

<p>username map (G)</p>

<p>This option allows you to specify a file containing a
mapping of usernames from the clients to the server. This
can be used for several purposes. The most common is to map
usernames that users use on DOS or Windows machines to those
that the UNIX box uses. The other is to map multiple users
to a single username so that they can more easily share
files.</p>

<p>Please note that for user or share mode security, the
username map is applied prior to validating the user
credentials. Domain member servers (domain or ads) apply the
username map after the user has been successfully
authenticated by the domain controller and require fully
qualified enties in the map table (e.g. biddle =
DOMAINo).</p>

<p>The map file is parsed line by line. Each line should
contain a single UNIX username on the left then a
&rsquo;=&rsquo; followed by a list of usernames on the
right. The list of usernames on the right may contain names
of the form @group in which case they will match any UNIX
username in that group. The special client name
&rsquo;*&rsquo; is a wildcard and matches any name. Each
line of the map file may be up to 1023 characters long.</p>

<p>The file is processed on each line by taking the
supplied username and comparing it with each username on the
right hand side of the &rsquo;=&rsquo; signs. If the
supplied name matches any of the names on the right hand
side then it is replaced with the name on the left.
Processing then continues with the next line.</p>

<p>If any line begins with a &rsquo;#&rsquo; or a
&rsquo;;&rsquo; then it is ignored.</p>

<p>If any line begins with an &rsquo;!&rsquo; then the
processing will stop after that line if a mapping was done
by the line. Otherwise mapping continues with every line
being processed. Using &rsquo;!&rsquo; is most useful when
you have a wildcard mapping line later in the file.</p>

<p>For example to map from the name admin or administrator
to the UNIX name root you would use:</p>

<p>root = admin administrator</p>

<p>Or to map anyone in the UNIX group system to the UNIX
name sys you would use:</p>

<p>sys = @system</p>

<p>You can have as many mappings as you like in a username
map file.</p>

<p>If your system supports the NIS NETGROUP option then the
netgroup database is checked before the /etc/group database
for matching groups.</p>

<p>You can map Windows usernames that have spaces in them
by using double quotes around the name. For example:</p>

<p>tridge = &quot;Andrew Tridgell&quot;</p>

<p>would map the windows username &quot;Andrew
Tridgell&quot; to the unix username &quot;tridge&quot;.</p>

<p>The following example would map mary and fred to the
unix user sys, and map the rest to guest. Note the use of
the &rsquo;!&rsquo; to tell Samba to stop processing if it
gets a match on that line:</p>

<p>!sys = mary fred guest = *</p>

<p>Note that the remapping is applied to all occurrences of
usernames. Thus if you connect to \servered and fred is
remapped to mary then you will actually be connecting to
\serverry and will need to supply a password suitable for
mary not fred. The only exception to this is the username
passed to the password server (if you have one). The
password server will receive whatever username the client
supplies without modification.</p>

<p>Also note that no reverse mapping is done. The main
effect this has is with printing. Users who have been mapped
may have trouble deleting print jobs as PrintManager under
WfWg will think they don&rsquo;t own the print job.</p>

<p>Samba versions prior to 3.0.8 would only support reading
the fully qualified username (e.g.: DOMAINser) from the
username map when performing a kerberos login from a client.
However, when looking up a map entry for a user
authenticated by NTLM[SSP], only the login name would be
used for matches. This resulted in inconsistent behavior
sometimes even on the same server.</p>

<p>The following functionality is obeyed in version 3.0.8
and later:</p>

<p>When performing local authentication, the username map
is applied to the login name before attempting to
authenticate the connection.</p>

<p>When relying upon a external domain controller for
validating authentication requests, smbd will apply the
username map to the fully qualified username (i.e.
DOMAINser) only after the user has been successfully
authenticated.</p>

<p>An example of use is:</p>

<p>username map = /usr/local/samba/lib/users.map</p>

<p>Default: username map = # no username map</p>

<p>user</p>

<p>This parameter is a synonym for username.</p>

<p>users</p>

<p>This parameter is a synonym for username.</p>

<p>username (S)</p>

<p>Multiple users may be specified in a comma-delimited
list, in which case the supplied password will be tested
against each username in turn (left to right).</p>

<p>The deprecated username line is needed only when the PC
is unable to supply its own username. This is the case for
the COREPLUS protocol or where your users have different
WfWg usernames to UNIX usernames. In both these cases you
may also be better using the \serverre%user syntax
instead.</p>

<p>The username line is not a great solution in many cases
as it means Samba will try to validate the supplied password
against each of the usernames in the username line in turn.
This is slow and a bad idea for lots of users in case of
duplicate passwords. You may get timeouts or security
breaches using this parameter unwisely.</p>

<p>Samba relies on the underlying UNIX security. This
parameter does not restrict who can login, it just offers
hints to the Samba server as to what usernames might
correspond to the supplied password. Users can login as
whoever they please and they will be able to do no more
damage than if they started a telnet session. The daemon
runs as the user that they log in as, so they cannot do
anything that user cannot do.</p>

<p>To restrict a service to a particular set of users you
can use the valid users parameter.</p>

<p>If any of the usernames begin with a &rsquo;@&rsquo;
then the name will be looked up first in the NIS netgroups
list (if Samba is compiled with netgroup support), followed
by a lookup in the UNIX groups database and will expand to a
list of all users in the group of that name.</p>

<p>If any of the usernames begin with a &rsquo;+&rsquo;
then the name will be looked up only in the UNIX groups
database and will expand to a list of all users in the group
of that name.</p>

<p>If any of the usernames begin with a &rsquo;&amp;&rsquo;
then the name will be looked up only in the NIS netgroups
database (if Samba is compiled with netgroup support) and
will expand to a list of all users in the netgroup group of
that name.</p>

<p>Note that searching though a groups database can take
quite some time, and some clients may time out during the
search.</p>

<p>See the section NOTE ABOUT USERNAME/PASSWORD VALIDATION
for more information on how this parameter determines access
to the services.</p>

<p>Default: username = # The guest account if a guest
service, else &lt;empty string&gt;.</p>

<p>Example: username = fred, mary, jack, jane, @users,
@pcgroup</p>

<p>usershare allow guests (G)</p>

<p>This parameter controls whether user defined shares are
allowed to be accessed by non-authenticated users or not. It
is the equivalent of allowing people who can create a share
the option of setting guest ok = yes in a share definition.
Due to its security sensitive nature, the default is set to
off.</p>

<p>Default: usershare allow guests = no</p>

<p>usershare max shares (G)</p>

<p>This parameter specifies the number of user defined
shares that are allowed to be created by users belonging to
the group owning the usershare directory. If set to zero
(the default) user defined shares are ignored.</p>

<p>Default: usershare max shares = 0</p>

<p>usershare owner only (G)</p>

<p>This parameter controls whether the pathname exported by
a user defined shares must be owned by the user creating the
user defined share or not. If set to True (the default) then
smbd checks that the directory path being shared is owned by
the user who owns the usershare file defining this share and
refuses to create the share if not. If set to False then no
such check is performed and any directory path may be
exported regardless of who owns it.</p>

<p>Default: usershare owner only = True</p>

<p>usershare path (G)</p>

<p>This parameter specifies the absolute path of the
directory on the filesystem used to store the user defined
share definition files. This directory must be owned by
root, and have no access for other, and be writable only by
the group owner. In addition the &quot;sticky&quot; bit must
also be set, restricting rename and delete to owners of a
file (in the same way the /tmp directory is usually
configured). Members of the group owner of this directory
are the users allowed to create usershares. If this
parameter is undefined then no user defined shares are
allowed.</p>

<p>For example, a valid usershare directory might be
/usr/local/samba/lib/usershares, set up as follows.</p>

<p>ls -ld /usr/local/samba/lib/usershares/ drwxrwx--T 2
root power_users 4096 2006-05-05 12:27
/usr/local/samba/lib/usershares/</p>

<p>In this case, only members of the group
&quot;power_users&quot; can create user defined shares.</p>

<p>Default: usershare path = NULL</p>

<p>usershare prefix allow list (G)</p>

<p>This parameter specifies a list of absolute pathnames
the root of which are allowed to be exported by user defined
share definitions. If the pathname to be exported
doesn&rsquo;t start with one of the strings in this list,
the user defined share will not be allowed. This allows the
Samba administrator to restrict the directories on the
system that can be exported by user defined shares.</p>

<p>If there is a &quot;usershare prefix deny list&quot; and
also a &quot;usershare prefix allow list&quot; the deny list
is processed first, followed by the allow list, thus leading
to the most restrictive interpretation.</p>

<p>Default: usershare prefix allow list = NULL</p>

<p>Example: usershare prefix allow list = /home /data
/space</p>

<p>usershare prefix deny list (G)</p>

<p>This parameter specifies a list of absolute pathnames
the root of which are NOT allowed to be exported by user
defined share definitions. If the pathname exported starts
with one of the strings in this list the user defined share
will not be allowed. Any pathname not starting with one of
these strings will be allowed to be exported as a usershare.
This allows the Samba administrator to restrict the
directories on the system that can be exported by user
defined shares.</p>

<p>If there is a &quot;usershare prefix deny list&quot; and
also a &quot;usershare prefix allow list&quot; the deny list
is processed first, followed by the allow list, thus leading
to the most restrictive interpretation.</p>

<p>Default: usershare prefix deny list = NULL</p>

<p>Example: usershare prefix deny list = /etc /dev
/private</p>

<p>usershare template share (G)</p>

<p>User defined shares only have limited possible
parameters such as path, guest ok, etc. This parameter
allows usershares to &quot;cloned&quot; from an existing
share. If &quot;usershare template share&quot; is set to the
name of an existing share, then all usershares created have
their defaults set from the parameters set on this
share.</p>

<p>The target share may be set to be invalid for real file
sharing by setting the parameter &quot;-valid = False&quot;
on the template share definition. This causes it not to be
seen as a real exported share but to be able to be used as a
template for usershares.</p>

<p>Default: usershare template share = NULL</p>

<p>Example: usershare template share = template_share</p>

<p>use sendfile (S)</p>

<p>If this parameter is yes, and the sendfile() system call
is supported by the underlying operating system, then some
SMB read calls (mainly ReadAndX and ReadRaw) will use the
more efficient sendfile system call for files that are
exclusively oplocked. This may make more efficient use of
the system CPU&rsquo;s and cause Samba to be faster. Samba
automatically turns this off for clients that use protocol
levels lower than NT LM 0.12 and when it detects a client is
Windows 9x (using sendfile from Linux will cause these
clients to fail).</p>

<p>Default: use sendfile = false</p>

<p>use spnego (G)</p>

<p>This deprecated variable controls controls whether samba
will try to use Simple and Protected NEGOciation (as
specified by rfc2478) with WindowsXP and Windows2000 clients
to agree upon an authentication mechanism.</p>

<p>Unless further issues are discovered with our SPNEGO
implementation, there is no reason this should ever be
disabled.</p>

<p>Default: use spnego = yes</p>

<p>utmp directory (G)</p>

<p>This parameter is only available if Samba has been
configured and compiled with the option --with-utmp. It
specifies a directory pathname that is used to store the
utmp or utmpx files (depending on the UNIX system) that
record user connections to a Samba server. By default this
is not set, meaning the system will use whatever utmp file
the native system is set to use (usually /var/run/utmp on
Linux).</p>

<p>Default: utmp directory = # Determined automatically</p>

<p>Example: utmp directory = /var/run/utmp</p>

<p>utmp (G)</p>

<p>This boolean parameter is only available if Samba has
been configured and compiled with the option --with-utmp. If
set to yes then Samba will attempt to add utmp or utmpx
records (depending on the UNIX system) whenever a connection
is made to a Samba server. Sites may use this to record the
user connecting to a Samba share.</p>

<p>Due to the requirements of the utmp record, we are
required to create a unique identifier for the incoming
user. Enabling this option creates an n^2 algorithm to find
this number. This may impede performance on large
installations.</p>

<p>Default: utmp = no</p>

<p>valid users (S)</p>

<p>This is a list of users that should be allowed to login
to this service. Names starting with &rsquo;@&rsquo;,
&rsquo;+&rsquo; and &rsquo;&amp;&rsquo; are interpreted
using the same rules as described in the invalid users
parameter.</p>

<p>If this is empty (the default) then any user can login.
If a username is in both this list and the invalid users
list then access is denied for that user.</p>

<p>The current servicename is substituted for %S. This is
useful in the [homes] section.</p>

<p>Note: When used in the [global] section this parameter
may have unwanted side effects. For example: If samba is
configured as a MASTER BROWSER (see local master, os level,
domain master, preferred master) this option will prevent
workstations from being able to browse the network.</p>

<p>Default: valid users = # No valid users list (anyone can
login)</p>

<p>Example: valid users = greg, @pcusers</p>

<p>-valid (S)</p>

<p>This parameter indicates whether a share is valid and
thus can be used. When this parameter is set to false, the
share will be in no way visible nor accessible.</p>

<p>This option should not be used by regular users but
might be of help to developers. Samba uses this option
internally to mark shares as deleted.</p>

<p>Default: -valid = yes</p>

<p>veto files (S)</p>

<p>This is a list of files and directories that are neither
visible nor accessible. Each entry in the list must be
separated by a &rsquo;/&rsquo;, which allows spaces to be
included in the entry. &rsquo;*&rsquo; and &rsquo;?&rsquo;
can be used to specify multiple files or directories as in
DOS wildcards.</p>

<p>Each entry must be a unix path, not a DOS path and must
not include the unix directory separator
&rsquo;/&rsquo;.</p>

<p>Note that the case sensitive option is applicable in
vetoing files.</p>

<p>One feature of the veto files parameter that it is
important to be aware of is Samba&rsquo;s behaviour when
trying to delete a directory. If a directory that is to be
deleted contains nothing but veto files this deletion will
fail unless you also set the delete veto files parameter to
yes.</p>

<p>Setting this parameter will affect the performance of
Samba, as it will be forced to check all files and
directories for a match as they are scanned.</p>

<p>Examples of use include:</p>

<p>; Veto any files containing the word Security, ; any
ending in .tmp, and any directory containing the ; word
root. veto files = /*Security*/*.tmp/*root*/</p>

<p>; Veto the Apple specific files that a NetAtalk server ;
creates. veto files =
/.AppleDouble/.bin/.AppleDesktop/Network Trash Folder/</p>

<p>Default: veto files = No files or directories are
vetoed.</p>

<p>veto oplock files (S)</p>

<p>This parameter is only valid when the oplocks parameter
is turned on for a share. It allows the Samba administrator
to selectively turn off the granting of oplocks on selected
files that match a wildcarded list, similar to the
wildcarded list used in the veto files parameter.</p>

<p>You might want to do this on files that you know will be
heavily contended for by clients. A good example of this is
in the NetBench SMB benchmark program, which causes heavy
client contention for files ending in .SEM. To cause Samba
not to grant oplocks on these files you would use the line
(either in the [global] section or in the section for the
particular NetBench share.</p>

<p>An example of use is:</p>

<p>veto oplock files = /.*SEM/</p>

<p>Default: veto oplock files = # No files are vetoed for
oplock grants</p>

<p>vfs object</p>

<p>This parameter is a synonym for vfs objects.</p>

<p>vfs objects (S)</p>

<p>This parameter specifies the backend names which are
used for Samba VFS I/O operations. By default, normal disk
I/O operations are used but these can be overloaded with one
or more VFS objects.</p>

<p>Default: vfs objects =</p>

<p>Example: vfs objects = extd_audit recycle</p>

<p>volume (S)</p>

<p>This allows you to override the volume label returned
for a share. Useful for CDROMs with installation programs
that insist on a particular volume label.</p>

<p>Default: volume = # the name of the share</p>

<p>wide links (S)</p>

<p>This parameter controls whether or not links in the UNIX
file system may be followed by the server. Links that point
to areas within the directory tree exported by the server
are always allowed; this parameter controls access only to
areas that are outside the directory tree being
exported.</p>

<p>Note: Turning this parameter on when UNIX extensions are
enabled will allow UNIX clients to create symbolic links on
the share that can point to files or directories outside
restricted path exported by the share definition. This can
cause access to areas outside of the share. Due to this
problem, this parameter will be automatically disabled (with
a message in the log file) if the unix extensions option is
on.</p>

<p>See the parameter allow insecure wide links if you wish
to change this coupling between the two parameters.</p>

<p>Default: wide links = no</p>

<p>winbind cache time (G)</p>

<p>This parameter specifies the number of seconds the
winbindd(8) daemon will cache user and group information
before querying a Windows NT server again.</p>

<p>This does not apply to authentication requests, these
are always evaluated in real time unless the winbind offline
logon option has been enabled.</p>

<p>Default: winbind cache time = 300</p>

<p>winbind enum groups (G)</p>

<p>On large installations using winbindd(8) it may be
necessary to suppress the enumeration of groups through the
setgrent(), getgrent() and endgrent() group of system calls.
If the winbind enum groups parameter is no, calls to the
getgrent() system call will not return any data.</p>

<p>Warning Turning off group enumeration may cause some
programs to behave oddly. Default: winbind enum groups =
no</p>

<p>winbind enum users (G)</p>

<p>On large installations using winbindd(8) it may be
necessary to suppress the enumeration of users through the
setpwent(), getpwent() and endpwent() group of system calls.
If the winbind enum users parameter is no, calls to the
getpwent system call will not return any data.</p>

<p>Warning Turning off user enumeration may cause some
programs to behave oddly. For example, the finger program
relies on having access to the full user list when searching
for matching usernames. Default: winbind enum users = no</p>

<p>winbind expand groups (G)</p>

<p>This option controls the maximum depth that winbindd
will traverse when flattening nested group memberships of
Windows domain groups. This is different from the winbind
nested groups option which implements the Windows NT4 model
of local group nesting. The &quot;winbind expand
groups&quot; parameter specifically applies to the
membership of domain groups.</p>

<p>Be aware that a high value for this parameter can result
in system slowdown as the main parent winbindd daemon must
perform the group unrolling and will be unable to answer
incoming NSS or authentication requests during this
time.</p>

<p>Default: winbind expand groups = 1</p>

<p>winbind max clients (G)</p>

<p>This parameter specifies the maximum number of clients
the winbindd(8) daemon can connect with.</p>

<p>Default: winbind max clients = 200</p>

<p>winbind max domain connections (G)</p>

<p>This parameter specifies the maximum number of
simultaneous connections that the winbindd(8) daemon should
open to the domain controller of one domain. Setting this
parameter to a value greater than 1 can improve scalability
with many simultaneous winbind requests, some of which might
be slow.</p>

<p>Note that if winbind offline logon is set to Yes, then
only one DC connection is allowed per domain, regardless of
this setting.</p>

<p>Default: winbind max domain connections = 1</p>

<p>Example: winbind max domain connections = 10</p>

<p>winbind nested groups (G)</p>

<p>If set to yes, this parameter activates the support for
nested groups. Nested groups are also called local groups or
aliases. They work like their counterparts in Windows:
Nested groups are defined locally on any machine (they are
shared between DC&rsquo;s through their SAM) and can contain
users and global groups from any trusted SAM. To be able to
use nested groups, you need to run nss_winbind.</p>

<p>Default: winbind nested groups = yes</p>

<p>winbind normalize names (G)</p>

<p>This parameter controls whether winbindd will replace
whitespace in user and group names with an underscore (_)
character. For example, whether the name &quot;Space
Kadet&quot; should be replaced with the string
&quot;space_kadet&quot;. Frequently Unix shell scripts will
have difficulty with usernames contains whitespace due to
the default field separator in the shell. If your domain
possesses names containing the underscore character, this
option may cause problems unless the name aliasing feature
is supported by your nss_info plugin.</p>

<p>This feature also enables the name aliasing API which
can be used to make domain user and group names to a
non-qualified version. Please refer to the manpage for the
configured idmap and nss_info plugin for the specifics on
how to configure name aliasing for a specific configuration.
Name aliasing takes precedence (and is mutually exclusive)
over the whitespace replacement mechanism discussed
previsouly.</p>

<p>Default: winbind normalize names = no</p>

<p>Example: winbind normalize names = yes</p>

<p>winbind nss info (G)</p>

<p>This parameter is designed to control how Winbind
retrieves Name Service Information to construct a
user&rsquo;s home directory and login shell. Currently the
following settings are available:</p>

<p>&middot; template - The default, using the parameters of
template shell and template homedir)</p>

<p>&middot; &lt;sfu | sfu20 | rfc2307 &gt; - When Samba is
running in security = ads and your Active Directory Domain
Controller does support the Microsoft &quot;Services for
Unix&quot; (SFU) LDAP schema, winbind can retrieve the login
shell and the home directory attributes directly from your
Directory Server. For SFU 3.0 or 3.5 simply choose
&quot;sfu&quot;, if you use SFU 2.0 please choose
&quot;sfu20&quot;. Note that retrieving UID and GID from
your ADS-Server requires to use idmap config DOMAIN:backend
= ad as well. The primary group membership is currently
always calculated via the &quot;primaryGroupID&quot; LDAP
attribute.</p>

<p>Default: winbind nss info = template</p>

<p>Example: winbind nss info = sfu</p>

<p>winbind offline logon (G)</p>

<p>This parameter is designed to control whether Winbind
should allow to login with the pam_winbind module using
Cached Credentials. If enabled, winbindd will store user
credentials from successful logins encrypted in a local
cache.</p>

<p>Default: winbind offline logon = false</p>

<p>Example: winbind offline logon = true</p>

<p>winbind reconnect delay (G)</p>

<p>This parameter specifies the number of seconds the
winbindd(8) daemon will wait between attempts to contact a
Domain controller for a domain that is determined to be down
or not contactable.</p>

<p>Default: winbind reconnect delay = 30</p>

<p>winbind refresh tickets (G)</p>

<p>This parameter is designed to control whether Winbind
should refresh Kerberos Tickets retrieved using the
pam_winbind module.</p>

<p>Default: winbind refresh tickets = false</p>

<p>Example: winbind refresh tickets = true</p>

<p>winbind rpc only (G)</p>

<p>Setting this parameter to yes forces winbindd to use RPC
instead of LDAP to retrieve information from Domain
Controllers.</p>

<p>Default: winbind rpc only = no</p>

<p>winbind sealed pipes (G)</p>

<p>This option controls whether any requests from winbindd
to domain controllers pipe will be sealed. Disabling sealing
can be useful for debugging purposes.</p>

<p>The behavior can be controlled per netbios domain by
using &rsquo;winbind sealed pipes:NETBIOSDOMAIN = no&rsquo;
as option.</p>

<p>Default: winbind sealed pipes = yes</p>

<p>winbind separator (G)</p>

<p>This parameter allows an admin to define the character
used when listing a username of the form of DOMAIN user.
This parameter is only applicable when using the
pam_winbind.so and nss_winbind.so modules for UNIX
services.</p>

<p>Please note that setting this parameter to + causes
problems with group membership at least on glibc systems, as
the character + is used as a special character for NIS in
/etc/group.</p>

<p>Default: winbind separator = &rsquo;&rsquo;</p>

<p>Example: winbind separator = +</p>

<p>winbind trusted domains only (G)</p>

<p>This parameter is designed to allow Samba servers that
are members of a Samba controlled domain to use UNIX
accounts distributed via NIS, rsync, or LDAP as the
uid&rsquo;s for winbindd users in the hosts primary domain.
Therefore, the user DOMAINser1 would be mapped to the
account user1 in /etc/passwd instead of allocating a new uid
for him or her.</p>

<p>This parameter is now deprecated in favor of the newer
idmap_nss backend. Refer to the idmap_nss(8) man page for
more information.</p>

<p>Default: winbind trusted domains only = no</p>

<p>winbind use default domain (G)</p>

<p>This parameter specifies whether the winbindd(8) daemon
should operate on users without domain component in their
username. Users without a domain component are treated as is
part of the winbindd server&rsquo;s own domain. While this
does not benefit Windows users, it makes SSH, FTP and e-mail
function in a way much closer to the way they would in a
native unix system.</p>

<p>This option should be avoided if possible. It can cause
confusion about responsibilities for a user or group. In
many situations it is not clear whether winbind or
/etc/passwd should be seen as authoritative for a user,
likewise for groups.</p>

<p>Default: winbind use default domain = no</p>

<p>Example: winbind use default domain = yes</p>

<p>wins hook (G)</p>

<p>When Samba is running as a WINS server this allows you
to call an external program for all changes to the WINS
database. The primary use for this option is to allow the
dynamic update of external name resolution databases such as
dynamic DNS.</p>

<p>The wins hook parameter specifies the name of a script
or executable that will be called as follows:</p>

<p>wins_hook operation name nametype ttl IP_list</p>

<p>&middot; The first argument is the operation and is one
of &quot;add&quot;, &quot;delete&quot;, or
&quot;refresh&quot;. In most cases the operation can be
ignored as the rest of the parameters provide sufficient
information. Note that &quot;refresh&quot; may sometimes be
called when the name has not previously been added, in that
case it should be treated as an add.</p>

<p>&middot; The second argument is the NetBIOS name. If the
name is not a legal name then the wins hook is not called.
Legal names contain only letters, digits, hyphens,
underscores and periods.</p>

<p>&middot; The third argument is the NetBIOS name type as
a 2 digit hexadecimal number.</p>

<p>&middot; The fourth argument is the TTL (time to live)
for the name in seconds.</p>

<p>&middot; The fifth and subsequent arguments are the IP
addresses currently registered for that name. If this list
is empty then the name should be deleted.</p>

<p>An example script that calls the BIND dynamic DNS update
program nsupdate is provided in the examples directory of
the Samba source code.</p>

<p>No default</p>

<p>wins proxy (G)</p>

<p>This is a boolean that controls if nmbd(8) will respond
to broadcast name queries on behalf of other hosts. You may
need to set this to yes for some older clients.</p>

<p>Default: wins proxy = no</p>

<p>wins server (G)</p>

<p>This specifies the IP address (or DNS name: IP address
for preference) of the WINS server that nmbd(8) should
register with. If you have a WINS server on your network
then you should set this to the WINS server&rsquo;s IP.</p>

<p>You should point this at your WINS server if you have a
multi-subnetted network.</p>

<p>If you want to work in multiple namespaces, you can give
every wins server a &rsquo;tag&rsquo;. For each tag, only
one (working) server will be queried for a name. The tag
should be separated from the ip address by a colon.</p>

<p>Note You need to set up Samba to point to a WINS server
if you have multiple subnets and wish cross-subnet browsing
to work correctly. See the chapter in the Samba3-HOWTO on
Network Browsing.</p>

<p>Default: wins server =</p>

<p>Example: wins server = mary:192.9.200.1
fred:192.168.3.199 mary:192.168.2.61 # For this example when
querying a certain name, 192.19.200.1 will be asked first
and if that doesn&rsquo;t respond 192.168.2.61. If either of
those doesn&rsquo;t know the name 192.168.3.199 will be
queried.</p>

<p>Example: wins server = 192.9.200.1 192.168.2.61</p>

<p>wins support (G)</p>

<p>This boolean controls if the nmbd(8) process in Samba
will act as a WINS server. You should not set this to yes
unless you have a multi-subnetted network and you wish a
particular nmbd to be your WINS server. Note that you should
NEVER set this to yes on more than one machine in your
network.</p>

<p>Default: wins support = no</p>

<p>workgroup (G)</p>

<p>This controls what workgroup your server will appear to
be in when queried by clients. Note that this parameter also
controls the Domain name used with the security = domain
setting.</p>

<p>Default: workgroup = WORKGROUP</p>

<p>Example: workgroup = MYGROUP</p>

<p>writable</p>

<p>This parameter is a synonym for writeable.</p>

<p>writeable (S)</p>

<p>Inverted synonym for read only.</p>

<p>Default: writeable = no</p>

<p>write cache size (S)</p>

<p>If this integer parameter is set to non-zero value,
Samba will create an in-memory cache for each oplocked file
(it does not do this for non-oplocked files). All writes
that the client does not request to be flushed directly to
disk will be stored in this cache if possible. The cache is
flushed onto disk when a write comes in whose offset would
not fit into the cache or when the file is closed by the
client. Reads for the file are also served from this cache
if the data is stored within it.</p>

<p>This cache allows Samba to batch client writes into a
more efficient write size for RAID disks (i.e. writes may be
tuned to be the RAID stripe size) and can improve
performance on systems where the disk subsystem is a
bottleneck but there is free memory for userspace
programs.</p>

<p>The integer parameter specifies the size of this cache
(per oplocked file) in bytes.</p>

<p>Default: write cache size = 0</p>

<p>Example: write cache size = 262144 # for a 256k cache
size per file</p>

<p>write list (S)</p>

<p>This is a list of users that are given read-write access
to a service. If the connecting user is in this list then
they will be given write access, no matter what the read
only option is set to. The list can include group names
using the @group syntax.</p>

<p>Note that if a user is in both the read list and the
write list then they will be given write access.</p>

<p>By design, this parameter will not work with the
security = share in Samba 3.0.</p>

<p>Default: write list =</p>

<p>Example: write list = admin, root, @staff</p>

<p>write raw (G)</p>

<p>This parameter controls whether or not the server will
support raw write SMB&rsquo;s when transferring data from
clients. You should never need to change this parameter.</p>

<p>Default: write raw = yes</p>

<p>wtmp directory (G)</p>

<p>This parameter is only available if Samba has been
configured and compiled with the option --with-utmp. It
specifies a directory pathname that is used to store the
wtmp or wtmpx files (depending on the UNIX system) that
record user connections to a Samba server. The difference
with the utmp directory is the fact that user info is kept
after a user has logged out.</p>

<p>By default this is not set, meaning the system will use
whatever utmp file the native system is set to use (usually
/var/run/wtmp on Linux).</p>

<p>Default: wtmp directory =</p>

<p>Example: wtmp directory = /var/log/wtmp</p>

<p>WARNINGS Although the configuration file permits service
names to contain spaces, your client software may not.
Spaces will be ignored in comparisons anyway, so it
shouldn&rsquo;t be a problem - but be aware of the
possibility.</p>

<p>On a similar note, many clients - especially DOS clients
- limit service names to eight characters. smbd(8) has no
such limitation, but attempts to connect from such clients
will fail if they truncate the service names. For this
reason you should probably keep your service names down to
eight characters in length.</p>

<p>Use of the [homes] and [printers] special sections make
life for an administrator easy, but the various combinations
of default attributes can be tricky. Take extreme care when
designing these sections. In particular, ensure that the
permissions on spool directories are correct.</p>

<p>VERSION This man page is correct for version 3 of the
Samba suite.</p>

<p>SEE ALSO samba(7), smbpasswd(8), swat(8), smbd(8),
nmbd(8), smbclient(1), nmblookup(1), testparm(1),
testprns(1).</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>The original Samba man pages were written by Karl Auer.
The man page sources were converted to YODL format (another
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba
2.0 release by Jeremy Allison. The conversion to DocBook for
Samba 2.2 was done by Gerald Carter. The conversion to
DocBook XML 4.2 for Samba 3.0 was done by Alexander
Bokovoy.</p>

<p>Samba 3.6 04/11/2016 SMB.CONF(5)</p>
<hr>
</body>
</html>
