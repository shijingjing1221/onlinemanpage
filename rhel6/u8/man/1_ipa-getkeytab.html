<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:59 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipa-getkeytab(1) FreeIPA Manual Pages
ipa-getkeytab(1)</p>

<p>NAME ipa-getkeytab - Get a keytab for a Kerberos
principal</p>

<p>SYNOPSIS ipa-getkeytab -s ipaserver -p principal-name -k
keytab-file [ -e encryption-types ] [ -q ] [ -D|--binddn
BINDDN ] [ -w|--bindpw ] [ -P|--password PASSWORD ]</p>

<p>DESCRIPTION Retrieves a Kerberos keytab.</p>

<p>Kerberos keytabs are used for services (like sshd) to
perform Kerberos authentication. A keytab is a file with one
or more secrets (or keys) for a Kerberos principal.</p>

<p>A Kerberos service principal is a Kerberos identity that
can be used for authentication. Service principals contain
the name of the service, the hostname of the server, and the
realm name. For example, the fol- lowing is an example
principal for an ldap server:</p>

<p>ldap/foo.example.com@EXAMPLE.COM</p>

<p>When using ipa-getkeytab the realm name is already
provided, so the principal name is just the service name and
hostname (ldap/foo.exam- ple.com from the example
above).</p>

<p>WARNING: retrieving the keytab resets the secret for the
Kerberos prin- cipal. This renders all other keytabs for
that principal invalid.</p>

<p>This is used during IPA client enrollment to retrieve a
host service principal and store it in /etc/krb5.keytab. It
is possible to retrieve the keytab without Kerberos
credentials if the host was pre-created with a one-time
password. The keytab can be retrieved by binding as the host
and authenticating with this one-time password. The
-D|--binddn and -w|--bindpw options are used for this
authentication.</p>

<p>OPTIONS -s ipaserver The IPA server to retrieve the
keytab from (FQDN).</p>

<p>-p principal-name The non-realm part of the full
principal name.</p>

<p>-k keytab-file The keytab file where to append the new
key (will be created if it does not exist).</p>

<p>-e encryption-types The list of encryption types to use
to generate keys. ipa-getkeytab will use local client
defaults if not provided. Valid values depend on the
Kerberos library version and configu- ration. Common values
are: aes256-cts aes128-cts des3-hmac-sha1 arcfour-hmac
des-hmac-sha1 des-cbc-md5 des-cbc-crc</p>

<p>-q Quiet mode. Only errors are displayed.</p>

<p>--permitted-enctypes This options returns a description
of the permitted encryption types, like this: Supported
encryption types: AES-256 CTS mode with 96-bit SHA-1 HMAC
AES-128 CTS mode with 96-bit SHA-1 HMAC Triple DES cbc mode
with HMAC/sha1 ArcFour with HMAC/md5 DES cbc mode with
CRC-32 DES cbc mode with RSA-MD5 DES cbc mode with
RSA-MD4</p>

<p>-P, --password Use this password for the key instead of
one randomly generated.</p>

<p>-D, --binddn The LDAP DN to bind as when retrieving a
keytab without Kerberos credentials. Generally used with the
-w option.</p>

<p>-w, --bindpw The LDAP password to use when not binding
with Kerberos.</p>

<p>EXAMPLES Add and retrieve a keytab for the NFS service
principal on the host foo.example.com and save it in the
file /tmp/nfs.keytab and retrieve just the des-cbc-crc
key.</p>

<p># ipa-getkeytab -s ipaserver.example.com -p
nfs/foo.example.com -k /tmp/nfs.keytab -e des-cbc-crc</p>

<p>Add and retrieve a keytab for the ldap service principal
on the host foo.example.com and save it in the file
/tmp/ldap.keytab.</p>

<p># ipa-getkeytab -s ipaserver.example.com -p
ldap/foo.example.com -k /tmp/ldap.keytab</p>

<p>Retrieve a keytab using LDAP credentials (this will
typically be done by ipa-join(1) when enrolling a client
using the ipa-client-install(1) command:</p>

<p># ipa-getkeytab -s ipaserver.example.com -p
host/foo.example.com -k /etc/krb5.keytab -D
fqdn=foo.example.com,cn=comput-
ers,cn=accounts,dc=example,dc=com -w password</p>

<p>EXIT STATUS The exit status is 0 on success, nonzero on
error.</p>

<p>0 Success</p>

<p>1 Kerberos context initialization failed</p>

<p>2 Incorrect usage</p>

<p>3 Out of memory</p>

<p>4 Invalid service principal name</p>

<p>5 No Kerberos credentials cache</p>

<p>6 No Kerberos principal and no bind DN and password</p>

<p>7 Failed to open keytab</p>

<p>8 Failed to create key material</p>

<p>9 Setting keytab failed</p>

<p>10 Bind password required when using a bind DN</p>

<p>11 Failed to add key to keytab</p>

<p>12 Failed to close keytab</p>

<p>FreeIPA Oct 10 2007 ipa-getkeytab(1)</p>
<hr>
</body>
</html>
