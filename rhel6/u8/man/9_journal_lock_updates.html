<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:20:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>JOURNAL_LOCK_UPDATES(9) The Linux Journalling API
JOURNAL_LOCK_UPDATES(9)</p>

<p>NAME journal_lock_updates - establish a transaction
barrier.</p>

<p>SYNOPSIS void journal_lock_updates(journal_t *
journal);</p>

<p>ARGUMENTS journal Journal to establish a barrier on.</p>

<p>DESCRIPTION This locks out any further updates from
being started, and blocks until all existing updates have
completed, returning only once the journal is in a quiescent
state with no updates running.</p>

<p>We do not use simple mutex for synchronization as there
are syscalls which want to return with filesystem locked and
that trips up lockdep. Also hibernate needs to lock
filesystem but locked mutex then blocks hibernation. Since
locking filesystem is rare operation, we use simple counter
and waitqueue for locking.</p>

<p>AUTHORS Roger Gammans
&lt;rgammans@computer-surgery.co.uk&gt; Author.</p>

<p>Stephen Tweedie &lt;sct@redhat.com&gt; Author.</p>

<p>COPYRIGHT Kernel Hackers Manual 2.6. April 2016
JOURNAL_LOCK_UPDATES(9)</p>
<hr>
</body>
</html>
