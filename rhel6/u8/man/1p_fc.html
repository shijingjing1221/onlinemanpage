<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:12:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FC(1P) POSIX Programmer s Manual FC(1P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME fc - process the command history list</p>

<p>SYNOPSIS fc [-r][-e editor] [first[last]]</p>

<p>fc -l[-nr] [first[last]]</p>

<p>fc -s[old=new][first]</p>

<p>DESCRIPTION The fc utility shall list, or shall edit and
re-execute, commands pre- viously entered to an interactive
sh.</p>

<p>The command history list shall reference commands by
number. The first number in the list is selected
arbitrarily. The relationship of a num- ber to its command
shall not change except when the user logs in and no other
process is accessing the list, at which time the system may
reset the numbering to start the oldest retained command at
another number (usually 1). When the number reaches an
implementation-defined upper limit, which shall be no
smaller than the value in HISTSIZE or 32767 (whichever is
greater), the shell may wrap the numbers, starting the next
command with a lower number (usually 1). However, despite
this optional wrapping of numbers, fc shall maintain the
time-ordering sequence of the commands. For example, if four
commands in sequence are given the numbers 32766, 32767, 1
(wrapped), and 2 as they are exe- cuted, command 32767 is
considered the command previous to 1, even though its number
is higher.</p>

<p>When commands are edited (when the -l option is not
specified), the resulting lines shall be entered at the end
of the history list and then re-executed by sh. The fc
command that caused the editing shall not be entered into
the history list. If the editor returns a non-zero exit
status, this shall suppress the entry into the history list
and the command re-execution. Any command line variable
assignments or redirection operators used with fc shall
affect both the fc command itself as well as the command
that results; for example:</p>

<p>fc -s -- -1 2&gt;/dev/null</p>

<p>reinvokes the previous command, suppressing standard
error for both fc and the previous command.</p>

<p>OPTIONS The fc utility shall conform to the Base
Definitions volume of IEEE Std 1003.1-2001, Section 12.2,
Utility Syntax Guidelines.</p>

<p>The following options shall be supported:</p>

<p>-e editor Use the editor named by editor to edit the
commands. The editor string is a utility name, subject to
search via the PATH vari- able (see the Base Definitions
volume of IEEE Std 1003.1-2001, Chapter 8, Environment
Variables). The value in the FCEDIT variable shall be used
as a default when -e is not specified. If FCEDIT is null or
unset, ed shall be used as the editor.</p>

<p>-l (The letter ell.) List the commands rather than
invoking an edi- tor on them. The commands shall be written
in the sequence indi- cated by the first and last operands,
as affected by -r, with each command preceded by the command
number.</p>

<p>-n Suppress command numbers when listing with -l.</p>

<p>-r Reverse the order of the commands listed (with -l) or
edited (with neither -l nor -s).</p>

<p>-s Re-execute the command without invoking an
editor.</p>

<p>OPERANDS The following operands shall be supported:</p>

<p>first, last Select the commands to list or edit. The
number of previous com- mands that can be accessed shall be
determined by the value of the HISTSIZE variable. The value
of first or last or both shall be one of the following:</p>

<p>[+]number A positive number representing a command
number; command numbers can be displayed with the -l
option.</p>

<p>-number A negative decimal number representing the
command that was exe- cuted number of commands previously.
For example, -1 is the immediately previous command.</p>

<p>string A string indicating the most recently entered
command that begins with that string. If the old= new
operand is not also specified with -s, the string form of
the first operand cannot contain an embedded equal sign.</p>

<p>When the synopsis form with -s is used:</p>

<p>* If first is omitted, the previous command shall be
used.</p>

<p>For the synopsis forms without -s:</p>

<p>* If last is omitted, last shall default to the previous
com- mand when -l is specified; otherwise, it shall default
to first.</p>

<p>* If first and last are both omitted, the previous 16
commands shall be listed or the previous single command
shall be edited (based on the -l option).</p>

<p>* If first and last are both present, all of the
commands from first to last shall be edited (without -l) or
listed (with -l). Editing multiple commands shall be
accomplished by pre- senting to the editor all of the
commands at one time, each command starting on a new line.
If first represents a newer command than last, the commands
shall be listed or edited in reverse sequence, equivalent to
using -r. For example, the following commands on the first
line are equivalent to the corresponding commands on the
second:</p>

<p>fc -r 10 20 fc 30 40 fc 20 10 fc -r 40 30</p>

<p>* When a range of commands is used, it shall not be an
error to specify first or last values that are not in the
history list; fc shall substitute the value representing the
oldest or newest command in the list, as appropriate. For
example, if there are only ten commands in the history list,
numbered 1 to 10:</p>

<p>fc -l fc 1 99</p>

<p>shall list and edit, respectively, all ten commands.</p>

<p>old=new Replace the first occurrence of string old in
the commands to be re-executed by the string new.</p>

<p>STDIN Not used.</p>

<p>INPUT FILES None.</p>

<p>ENVIRONMENT VARIABLES The following environment
variables shall affect the execution of fc:</p>

<p>FCEDIT This variable, when expanded by the shell, shall
determine the default value for the -e editor options editor
option-argument. If FCEDIT is null or unset, ed shall be
used as the editor.</p>

<p>HISTFILE Determine a pathname naming a command history
file. If the HIST- FILE variable is not set, the shell may
attempt to access or create a file .sh_history in the
directory referred to by the HOME environment variable. If
the shell cannot obtain both read and write access to, or
create, the history file, it shall use an unspecified
mechanism that allows the history to operate properly.
(References to history &quot;file&quot; in this section
shall be understood to mean this unspecified mechanism in
such cases.) An implementation may choose to access this
variable only when ini- tializing the history file; this
initialization shall occur when fc or sh first attempt to
retrieve entries from, or add entries to, the file, as the
result of commands issued by the user, the file named by the
ENV variable, or implementation-defined system start-up
files. In some historical shells, the history file is
initialized just after the ENV file has been processed.
There- fore, it is implementation-defined whether changes
made to HIST- FILE after the history file has been
initialized are effective. Implementations may choose to
disable the history list mechanism for users with
appropriate privileges who do not set HISTFILE ; the
specific circumstances under which this occurs are implemen-
tation-defined. If more than one instance of the shell is
using the same history file, it is unspecified how updates
to the his- tory file from those shells interact. As entries
are deleted from the history file, they shall be deleted
oldest first. It is unspecified when history file entries
are physically removed from the history file.</p>

<p>HISTSIZE Determine a decimal number representing the
limit to the number of previous commands that are
accessible. If this variable is unset, an unspecified
default greater than or equal to 128 shall be used. The
maximum number of commands in the history list is
unspecified, but shall be at least 128. An implementation
may choose to access this variable only when initializing
the his- tory file, as described under HISTFILE. Therefore,
it is unspecified whether changes made to HISTSIZE after the
history file has been initialized are effective.</p>

<p>LANG Provide a default value for the
internationalization variables that are unset or null. (See
the Base Definitions volume of IEEE Std 1003.1-2001, Section
8.2, Internationalization Vari- ables for the precedence of
internationalization variables used to determine the values
of locale categories.)</p>

<p>LC_ALL If set to a non-empty string value, override the
values of all the other internationalization variables.</p>

<p>LC_CTYPE Determine the locale for the interpretation of
sequences of bytes of text data as characters (for example,
single-byte as opposed to multi-byte characters in arguments
and input files).</p>

<p>LC_MESSAGES Determine the locale that should be used to
affect the format and contents of diagnostic messages
written to standard error.</p>

<p>NLSPATH Determine the location of message catalogs for
the processing of LC_MESSAGES .</p>

<p>ASYNCHRONOUS EVENTS Default.</p>

<p>STDOUT When the -l option is used to list commands, the
format of each command in the list shall be as follows:</p>

<p>&quot;%t%n&quot;, &lt;line number&gt;,
&lt;command&gt;</p>

<p>If both the -l and -n options are specified, the format
of each command shall be:</p>

<p>t%n&quot;, &lt;command&gt;</p>

<p>If the &lt;command&gt; consists of more than one line,
the lines after the first shall be displayed as:</p>

<p>t%n&quot;, &lt;continued-command&gt;</p>

<p>STDERR The standard error shall be used only for
diagnostic messages.</p>

<p>OUTPUT FILES None.</p>

<p>EXTENDED DESCRIPTION None.</p>

<p>EXIT STATUS The following exit values shall be
returned:</p>

<p>0 Successful completion of the listing.</p>

<p>&gt;0 An error occurred.</p>

<p>Otherwise, the exit status shall be that of the commands
executed by fc.</p>

<p>CONSEQUENCES OF ERRORS Default.</p>

<p>The following sections are informative.</p>

<p>APPLICATION USAGE Since editors sometimes use file
descriptors as integral parts of their editing, redirecting
their file descriptors as part of the fc command can produce
unexpected results. For example, if vi is the FCEDIT edi-
tor, the command:</p>

<p>fc -s | more</p>

<p>does not work correctly on many systems.</p>

<p>Users on windowing systems may want to have separate
history files for each window by setting HISTFILE as
follows:</p>

<p>HISTFILE=$HOME/.sh_hist$$</p>

<p>EXAMPLES None.</p>

<p>RATIONALE This utility is based on the fc built-in of
the KornShell.</p>

<p>An early proposal specified the -e option as [-e editor
[ old = new ]], which is not historical practice. Historical
practice in fc of either [-e editor ] or [-e - [ old = new
]] is acceptable, but not both together. To clarify this, a
new option -s was introduced replacing the [-e -]. This
resolves the conflict and makes fc conform to the Utility
Syntax Guidelines.</p>

<p>HISTFILE Some implementations of the KornShell check for
the superuser and do not create a history file unless
HISTFILE is set. This is done primarily to avoid creating
unlinked files in the root file system when logging in
during single-user mode. HISTFILE must be set for the
superuser to have history.</p>

<p>HISTSIZE Needed to limit the size of history files. It
is the intent of the standard developers that when two
shells share the same his- tory file, commands that are
entered in one shell shall be accessible by the other shell.
Because of the difficulties of synchronization over a
network, the exact nature of the interac- tion is
unspecified.</p>

<p>The initialization process for the history file can be
dependent on the system start-up files, in that they may
contain commands that effec- tively preempt the settings the
user has for HISTFILE and HISTSIZE. For example, function
definition commands are recorded in the history file. If the
system administrator includes function definitions in some
system start-up file called before the ENV file, the history
file is initialized before the user can influence its
characteristics. In some historical shells, the history file
is initialized just after the ENV file has been processed.
Because of these situations, the text requires the
initialization process to be implementation-defined.</p>

<p>Consideration was given to omitting the fc utility in
favor of the com- mand line editing feature in sh. For
example, in vi editing mode, typ- ing &quot;&lt;ESC&gt;
v&quot; is equivalent to:</p>

<p>EDITOR=vi fc</p>

<p>However, the fc utility allows the user the flexibility
to edit multi- ple commands simultaneously (such as fc 10
20) and to use editors other than those supported by sh for
command line editing.</p>

<p>In the KornShell, the alias r (re-do&quot;) is preset to
fc -e - (equiva- lent to the POSIX fc -s). This is probably
an easier command name to remember than fc (fix
command&quot;), but it does not meet the Utility Syntax
Guidelines. Renaming fc to hist or redo was considered, but
since this description closely matches historical KornShell
practice already, such a renaming was seen as gratuitous.
Users are free to cre- ate aliases whenever odd historical
names such as fc, awk, cat, grep, or yacc are standardized
by POSIX.</p>

<p>Command numbers have no ordering effects; they are like
serial numbers. The -r option and -number operand address
the sequence of command exe- cution, regardless of serial
numbers. So, for example, if the command number wrapped back
to 1 at some arbitrary point, there would be no ambiguity
associated with traversing the wrap point. For example, if
the command history were:</p>

<p>32766: echo 1 32767: echo 2 1: echo 3</p>

<p>the number -2 refers to command 32767 because it is the
second previous command, regardless of serial number.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO sh</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 FC(1P)</p>
<hr>
</body>
</html>
