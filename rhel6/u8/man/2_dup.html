<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:10:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>DUP(2) Linux Programmer s Manual DUP(2)</p>

<p>NAME dup, dup2, dup3 - duplicate a file descriptor</p>

<p>SYNOPSIS #include &lt;unistd.h&gt;</p>

<p>int dup(int oldfd); int dup2(int oldfd, int newfd);</p>

<p>#define _GNU_SOURCE #include &lt;unistd.h&gt;</p>

<p>int dup3(int oldfd, int newfd, int flags);</p>

<p>DESCRIPTION These system calls create a copy of the file
descriptor oldfd.</p>

<p>dup() uses the lowest-numbered unused descriptor for the
new descrip- tor.</p>

<p>dup2() makes newfd be the copy of oldfd, closing newfd
first if neces- sary, but note the following:</p>

<p>* If oldfd is not a valid file descriptor, then the call
fails, and newfd is not closed.</p>

<p>* If oldfd is a valid file descriptor, and newfd has the
same value as oldfd, then dup2() does nothing, and returns
newfd.</p>

<p>After a successful return from one of these system
calls, the old and new file descriptors may be used
interchangeably. They refer to the same open file
description (see open(2)) and thus share file offset and
file status flags; for example, if the file offset is
modified by using lseek(2) on one of the descriptors, the
offset is also changed for the other.</p>

<p>The two descriptors do not share file descriptor flags
(the close-on- exec flag). The close-on-exec flag
(FD_CLOEXEC; see fcntl(2)) for the duplicate descriptor is
off.</p>

<p>dup3() is the same as dup2(), except that:</p>

<p>* The caller can force the close-on-exec flag to be set
for the new file descriptor by specifying O_CLOEXEC in
flags. See the descrip- tion of the same flag in open(2) for
reasons why this may be useful.</p>

<p>* If oldfd equals newfd, then dup3() fails with the
error EINVAL.</p>

<p>RETURN VALUE On success, these system calls return the
new descriptor. On error, -1 is returned, and errno is set
appropriately.</p>

<p>ERRORS EBADF oldfd isnt an open file descriptor, or
newfd is out of the allowed range for file descriptors.</p>

<p>EBUSY (Linux only) This may be returned by dup2() or
dup3() during a race condition with open(2) and dup().</p>

<p>EINTR The dup2() or dup3() call was interrupted by a
signal; see sig- nal(7).</p>

<p>EINVAL (dup3()) flags contain an invalid value. Or,
oldfd was equal to newfd.</p>

<p>EMFILE The process already has the maximum number of
file descriptors open and tried to open a new one.</p>

<p>VERSIONS dup3() was added to Linux in version 2.6.27;
glibc support is available starting with version 2.9.</p>

<p>CONFORMING TO dup(), dup2(): SVr4, 4.3BSD,
POSIX.1-2001.</p>

<p>dup3() is Linux-specific.</p>

<p>NOTES The error returned by dup2() is different from
that returned by fcntl(..., F_DUPFD, ...) when newfd is out
of range. On some systems dup2() also sometimes returns
EINVAL like F_DUPFD.</p>

<p>If newfd was open, any errors that would have been
reported at close(2) time are lost. A careful programmer
will not use dup2() or dup3() without closing newfd
first.</p>

<p>SEE ALSO close(2), fcntl(2), open(2)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-10-09 DUP(2)</p>
<hr>
</body>
</html>
