<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:04:28 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>AMANDA(8) System Administration Commands AMANDA(8)</p>

<p>NAME amanda - The Open Source Backup Platform</p>

<p>DESCRIPTION This manual page gives an overview of the
Amanda commands and configuration files for quick
reference.</p>

<p>COMMANDS Here are all the Amanda commands. Each one has
its own manual page. See them for all the gory details.</p>

<p>&middot; amaddclient(8),</p>

<p>&middot; amadmin(8),</p>

<p>&middot; amaespipe(8),</p>

<p>&middot; amcheck(8),</p>

<p>&middot; amcheckdb(8),</p>

<p>&middot; amcheckdump(8),</p>

<p>&middot; amcleanup(8),</p>

<p>&middot; amcrypt-ossl-asym(8),</p>

<p>&middot; amcrypt-ossl(8),</p>

<p>&middot; amcrypt(8),</p>

<p>&middot; amcryptsimple(8),</p>

<p>&middot; amdd(8),</p>

<p>&middot; amdevcheck(8),</p>

<p>&middot; amdump(8),</p>

<p>&middot; amfetchdump(8),</p>

<p>&middot; amflush(8),</p>

<p>&middot; amgetconf(8),</p>

<p>&middot; amgpgcrypt(8),</p>

<p>&middot; amgtar(8),</p>

<p>&middot; amlabel(8),</p>

<p>&middot; ammt(8),</p>

<p>&middot; amoverview(8),</p>

<p>&middot; amplot(8),</p>

<p>&middot; amrecover(8),</p>

<p>&middot; amreport(8),</p>

<p>&middot; amrestore(8),</p>

<p>&middot; amrmtape(8),</p>

<p>&middot; amsamba(8),</p>

<p>&middot; amserverconfig(8),</p>

<p>&middot; amservice(8),</p>

<p>&middot; amstar(8),</p>

<p>&middot; amstatus(8),</p>

<p>&middot; amtape(8),</p>

<p>&middot; amtapetype(8),</p>

<p>&middot; amtoc(8),</p>

<p>&middot; amvault(8),</p>

<p>&middot; amzfs-sendrecv(8),</p>

<p>&middot; amzfs-snapshot(8),</p>

<p>&middot; script-email(8),</p>

<p>CONFIGURATION FILES &middot; amanda.conf(5),</p>

<p>&middot; amanda-client.conf(5),</p>

<p>&middot; disklist(5),</p>

<p>&middot; tapelist(5),</p>

<p>DATA FORMATS &middot; amanda-archive-format(5),</p>

<p>CONCEPTS &middot; amanda-applications(7),</p>

<p>&middot; amanda-auth(7),</p>

<p>&middot; amanda-changers(7),</p>

<p>&middot; amanda-devices(7),</p>

<p>&middot; amanda-scripts(7),</p>

<p>CONFIGURATION There are four user-editable files that
control the behavior of Amanda.</p>

<p>The first two are amanda.conf(5) and
amanda-client.conf(5), the main configuration files for the
server and client, respectively. They contain parameters to
customize Amanda for the site.</p>

<p>Next is the disklist(5) file, which lists hosts and disk
partitions to back up.</p>

<p>Last is the seldom-edited tapelist(5) file, which lists
tapes that are currently active. These files are described
in more detail in the following sections.</p>

<p>All files are stored in individual configuration
directories, usually under /etc/amanda/. A site will often
have more than one configuration. For example, it might have
a normal configuration for everyday backups and an archive
configuration for infrequent full archival backups. The
configuration files would be stored under directories
/etc/amanda/normal/ and /etc/amanda/archive/, respectively.
Part of the job of an Amanda administrator is to create,
populate and maintain these directories.</p>

<p>LOG FILES All log and database files generated by Amanda
go in corresponding directories somewhere. The exact
location is controlled by entries in amanda.conf(5). A
typical location would be under /var/adm/amanda. For the
above example, the files might go in /var/adm/amanda/normal/
and /var/adm/amanda/archive/.</p>

<p>As log files are no longer needed (no longer contain
relevant information), Amanda cycles them out in various
ways, depending on the type of file.</p>

<p>Detailed information about amdump runs are stored in
dump logs -- files named amdump.NN where NN is a sequence
number, with 1 being the most recent file. Amdump rotates
these files each run, keeping roughly the last tapecycle
(see below) worth of them.</p>

<p>The file used by amreport to generate the mail summary
is the trace log. This file constitutes the
&quot;catalog&quot; describing the data on the tapes written
in a run. It is named log.YYYYMMDDHHMMSS.NN where
YYYYMMDDHHMMSS is the datestamp of the start of the amdump
or amflush run and NN is a sequence number started at 0. At
the end of each amdump run, log files for runs whose tapes
have been reused are renamed into a subdirectory of the main
log directory (see the logdir parameter below) named oldlog.
It is up to the Amanda administrator to remove them from
this directory when desired.</p>

<p>Index (backup image catalogue) files older than the full
dump matching the oldest backup image for a given client and
disk are removed by amdump at the end of each run.</p>

<p>USING SAMBA For Samba access, Amanda needs a file on the
Samba server (which may or may not also be the tape server)
named /etc/amandapass with share names, (clear text)
passwords and (optional) domain names, in that order, one
per line, whitespace separated. By default, the user used to
connect to the PC is the same for all PC&acute;s and is
compiled into Amanda. It may be changed on a host by host
basis by listing it first in the password field followed by
a percent sign and then the password. For instance:
//some-pc/home normalpw //another-pc/disk
otheruser%otherpw</p>

<p>With clear text passwords, this file should obviously be
tightly protected. It only needs to be readable by the
Amanda-user on the Samba server.</p>

<p>HOST &amp; DISK EXPRESSION All host and disk arguments
to programs are special expressions. The command applies to
all disks that match your arguments. This section describes
the matcher.</p>

<p>The matcher matches by word, each word is a glob
expression, words are separated by the separator
&acute;.&acute; for host and &acute;/&acute; for disk. You
can anchor the expression at left with a &acute;^&acute;.
You can anchor the expression at right with a
&acute;$&acute;. The matcher is case insensitive for host
but is case sensitive for disk. A match succeeds if all
words in your expression match contiguous words in the host
or disk.</p>

<p>dot (.) word separator for a host</p>

<p>/ word separator for a disk</p>

<p>^ anchor at left</p>

<p>$ anchor at right</p>

<p>? match exactly one character except the separator</p>

<p>* match zero or more characters except the separator</p>

<p>** match zero or more characters including the
separator</p>

<p>Some examples:</p>

<p>hosta Will match hosta, foo.hosta.org, and
hoSTA.dOMAIna.ORG but not hostb.</p>

<p>host Will match host but not hosta.</p>

<p>host? Will match hosta and hostb, but not host.</p>

<p>ho*na Will match hoina but not ho.aina.org.</p>

<p>ho**na Will match hoina and ho.aina.org.</p>

<p>^hosta Will match hosta but not foo.hosta.org.</p>

<p>sda* Will match /dev/sda1 and /dev/sda12.</p>

<p>/opt Will match the disk opt but not the host opt.</p>

<p>(note dots:) .opt. Will match the host opt but not the
disk opt.</p>

<p>/ Will match the disk / but no other disk.</p>

<p>/usr Will match the disks /usr and /usr/local.</p>

<p>/usr$ Will match the disks /usr but not /usr/local.</p>

<p>DATESTAMP EXPRESSION A datestamp expression is a range
expression where we only match the prefix. Leading ^ is
removed. Trailing $ forces an exact match.</p>

<p>20001212-14 match all dates beginning with 20001212,
20001213 or 20001214</p>

<p>20001212-4 same as previous</p>

<p>20001212-24 match all dates between 20001212 and
20001224</p>

<p>2000121 match all dates that start with 2000121
(20001210-20001219)</p>

<p>2 match all dates that start with 2
(20000101-29991231)</p>

<p>2000-10 match all dates between 20000101-20101231</p>

<p>200010$ match only 200010</p>

<p>DUMP SPECIFICATIONS A dump specification selects one or
more dumps. It has the form [host][:disk][@datestamp], where
each component is a pattern as described above. If a
component is missing, it is treated as a wildcard. The
characters &acute;:&acute;, &acute;@&acute;, and
&acute;&acute; may be escaped within any component by
preceding them with a &acute;&acute;.</p>

<p>Some examples:</p>

<p>client17 all dumps of client17</p>

<p>@20080615 All dumps on with datestamps matching
20080615</p>

<p>webserver:/var/www All dumps of /var/www on host
webserver</p>

<p>webserver:/var/www@200806150317 The dump of webserver
with datestamp 200806150317</p>

<p>:/var/www All dumps of /var/www on any host</p>

<p>CONFIGURATION OVERRIDE Most commands allow the override
of specific configuration options on the command line, using
the -o option. This option has the form -oname=value. An
optional space is allowed after the -o. Each configuration
option should be specified in a separate command-line
option.</p>

<p>For global options, name is simply the name of the
option, e.g.,</p>

<p>amdump -oruntapes=2 For options in a named section of
the configuration, name has the form
SECTION:section_name:name, where SECTION is one of TAPETYPE,
DUMPTYPE, HOLDINGDISK, or INTERFACE, and section_name is the
name of the tapetype, dumptype, holdingdisk, or interface.
Examples:</p>

<p>amdump -o TAPETYPE:HP-DAT:length=2000m amdump -o
DUMPTYPE:no-compress:compress=&quot;server fast&quot; amdump
-o HOLDINGDISK:hd1:use=&quot;-100 mb&quot; amdump -o
INTERFACE:local:use=&quot;2000 kbps&quot;</p>

<p>When overriding device properties, one must carefully
quote the command line to simulate the syntax of real
configuration files. The following example should serve as a
guide:</p>

<p>amdump -o
&acute;device-property=&quot;PROPERTY_MAX_VOLUME_USAGE&quot;
&quot;100000&quot;&acute;</p>

<p>Note that configuration overrides are not effective for
tape changers, which supply a tapedev based on their own
configuration. In order to override tapedev, you must also
disable any changer:</p>

<p>amdump -otapedev=/dev/nst1
-otpchanger=&acute;&acute;</p>

<p>AUTHORS James da Silva &lt;jds@amanda.org&gt;</p>

<p>Stefan G. Weichinger &lt;sgw@amanda.org&gt;</p>

<p>Amanda 2.6.1p2 11/05/2009 AMANDA(8)</p>
<hr>
</body>
</html>
