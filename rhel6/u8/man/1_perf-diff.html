<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:27:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERF-DIFF(1) perf Manual PERF-DIFF(1)</p>

<p>NAME perf-diff - Read perf.data files and display the
differential profile</p>

<p>SYNOPSIS perf diff [baseline file] [data file1] [[data
file2] ... ]</p>

<p>DESCRIPTION This command displays the performance
difference amongst two or more perf.data files captured via
perf record.</p>

<p>If no parameters are passed it will assume perf.data.old
and perf.data.</p>

<p>The differential profile is displayed only for events
matching both specified perf.data files.</p>

<p>If no parameters are passed the samples will be sorted
by dso and symbol. As the perf.data files could come from
different binaries, the symbols addresses could vary. So
perf diff is based on the comparison of the files and
symbols name.</p>

<p>OPTIONS -D, --dump-raw-trace Dump raw trace in
ASCII.</p>

<p>--kallsyms=&lt;file&gt; kallsyms pathname</p>

<p>-m, --modules Load module symbols. WARNING: use only
with -k and LIVE kernel</p>

<p>-d, --dsos= Only consider symbols in these dsos. CSV
that understands file://filename entries. This option will
affect the percentage of the Baseline/Delta column. See
--percentage for more info.</p>

<p>-C, --comms= Only consider symbols in these comms. CSV
that understands file://filename entries. This option will
affect the percentage of the Baseline/Delta column. See
--percentage for more info.</p>

<p>-S, --symbols= Only consider these symbols. CSV that
understands file://filename entries. This option will affect
the percentage of the Baseline/Delta column. See
--percentage for more info.</p>

<p>-s, --sort= Sort by key(s): pid, comm, dso, symbol, cpu,
parent, srcline. Please see description of --sort in the
perf-report man page.</p>

<p>-t, --field-separator= Use a special separator character
and don t pad with spaces, replacing all occurrences of this
separator in symbol names (and other output) with a .
character, that thus it s the only non valid separator.</p>

<p>-v, --verbose Be verbose, for instance, show the raw
counts in addition to the diff.</p>

<p>-f, --force Dont complain, do it.</p>

<p>--symfs=&lt;directory&gt; Look for files with symbols
relative to this directory.</p>

<p>-b, --baseline-only Show only items with match in
baseline.</p>

<p>-c, --compute Differential computation selection -
delta,ratio,wdiff (default is delta). See COMPARISON METHODS
section for more info.</p>

<p>-p, --period Show period values for both compared hist
entries.</p>

<p>-F, --formula Show formula for given computation.</p>

<p>-o, --order Specify compute sorting column number.</p>

<p>--percentage Determine how to display the overhead
percentage of filtered entries. Filters can be applied by
--comms, --dsos and/or --symbols options.</p>

<p>&quot;relative&quot; means it&acute;s relative to
filtered entries only so that the sum of shown entries will
be always 100%. &quot;absolute&quot; means it retains the
original value before and after the filter is applied.</p>

<p>COMPARISON The comparison is governed by the baseline
file. The baseline perf.data file is iterated for samples.
All other perf.data files specified on the command line are
searched for the baseline sample pair. If the pair is found,
specified computation is made and result is displayed.</p>

<p>All samples from non-baseline perf.data files, that do
not match any baseline entry, are displayed with empty space
within baseline column and possible computation results
(delta) in their related column.</p>

<p>Example files samples: - file A with samples f1, f2, f3,
f4, f6 - file B with samples f2, f4, f5 - file C with
samples f1, f2, f5</p>

<p>Example output: x - computation takes place for pair b -
baseline sample percentage</p>

<p>&middot; perf diff A B C</p>

<p>baseline/A compute/B compute/C samples
--------------------------------------- b x f1 b x x f2 b f3
b x f4 b f6 x x f5</p>

<p>&middot; perf diff B A C</p>

<p>baseline/B compute/A compute/C samples
--------------------------------------- b x x f2 b x f4 b x
f5 x x f1 x f3 x f6</p>

<p>&middot; perf diff C B A</p>

<p>baseline/C compute/B compute/A samples
--------------------------------------- b x f1 b x x f2 b x
f5 x f3 x x f4 x f6</p>

<p>COMPARISON METHODS delta If specified the Delta column
is displayed with value d computed as:</p>

<p>d = A-&gt;period_percent - B-&gt;period_percent</p>

<p>with: - A/B being matching hist entry from data/baseline
file specified (or perf.data/perf.data.old)
respectively.</p>

<p>&middot; period_percent being the % of the hist entry
period value within single data file</p>

<p>&middot; with filtering by -C, -d and/or -S,
period_percent might be changed relative to how entries are
filtered. Use --percentage=absolute to prevent such
fluctuation.</p>

<p>ratio If specified the Ratio column is displayed with
value r computed as:</p>

<p>r = A-&gt;period / B-&gt;period</p>

<p>with: - A/B being matching hist entry from data/baseline
file specified (or perf.data/perf.data.old)
respectively.</p>

<p>&middot; period being the hist entry period value</p>

<p>wdiff:WEIGHT-B,WEIGHT-A If specified the Weighted diff
column is displayed with value d computed as:</p>

<p>d = B-&gt;period * WEIGHT-A - A-&gt;period *
WEIGHT-B</p>

<p>&middot; A/B being matching hist entry from
data/baseline file specified (or perf.data/perf.data.old)
respectively.</p>

<p>&middot; period being the hist entry period value</p>

<p>&middot; WEIGHT-A/WEIGHT-B being user supplied weights
in the the -c option behind : separator like -c
wdiff:1,2.</p>

<p>&middot; WEIGHT-A being the weight of the data file</p>

<p>&middot; WEIGHT-B being the weight of the baseline data
file</p>

<p>SEE ALSO perf-record(1), perf-report(1)</p>

<p>perf 04/13/2016 PERF-DIFF(1)</p>
<hr>
</body>
</html>
