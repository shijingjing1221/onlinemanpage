<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:20:07 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipmipower(8) System Commands ipmipower(8)</p>

<p>NAME ipmipower - IPMI power control utility</p>

<p>SYNOPSIS ipmipower [OPTION...]</p>

<p>DESCRIPTION ipmipower allows users to remotely power on,
off, cycle, hard reset, get a power status query, perform a
pulse diagnostic interrupt, or ini- tiate a soft-shutdown of
the OS via ACPI through the IPMI over LAN pro- tocol.</p>

<p>When a power command (--on, --off, --cycle, --reset,
--stat, --pulse, or --soft) is specified on the command
line, ipmipower will attempt to run the power command on all
hostnames listed on the command line then exit.</p>

<p>If no power commands are specified on the command line,
ipmipower will run in interactive mode. Interactive mode
gives the user a command line interface to enter various
commands. Details of the interactive command line interface
can be found below under INTERACTIVE COMMANDS.</p>

<p>Listed below are general IPMI options, tool specific
options, trouble shooting information, workaround
information, examples, and known issues. For a general
introduction to FreeIPMI please see freeipmi(7).</p>

<p>GENERAL OPTIONS The following options are general
options for configuring IPMI communi- cation and executing
general tool commands.</p>

<p>-D IPMIDRIVER, --driver-type=IPMIDRIVER Specify the
driver type to use instead of doing an auto selec- tion. The
currently available outofband drivers are LAN and LAN_2_0,
which perform IPMI 1.5 and IPMI 2.0 respectively.</p>

<p>-h IPMIHOST1,IPMIHOST2,...,
--hostname=IPMIHOST1[:PORT],IPMI- HOST2[:PORT],... Specify
the remote host(s) to communicate with. Multiple host- names
may be separated by comma or may be specified in a range
format; see HOSTRANGED SUPPORT below. An optional port can
be specified with each host, which may be useful in port
forwarding or similar situations.</p>

<p>-u USERNAME, --username=USERNAME Specify the username to
use when authenticating with the remote host. If not
specified, a null (i.e. anonymous) username is assumed. The
user must have atleast OPERATOR privileges to run the --on,
--off, --reset, --cycle, --pulse, or --soft power con- trol
commands. The user must have atleast USER privileges to
determine the power status of the machine through
--stat.</p>

<p>-p PASSWORD, --password=PASSWORD Specify the password to
use when authenticationg with the remote host. If not
specified, a null password is assumed. Maximum password
length is 16 for IPMI 1.5 and 20 for IPMI 2.0.</p>

<p>-P, --password-prompt Prompt for password to avoid
possibility of listing it in pro- cess lists.</p>

<p>-k K_G, --k-g=K_G Specify the K_g BMC key to use when
authenticating with the remote host for IPMI 2.0. If not
specified, a null key is assumed. To input the key in
hexadecimal form, prefix the string with 0x. E.g., the key
abc can be entered with the either the string abc or the
string 0x616263</p>

<p>-K, --k-g-prompt Prompt for k-g to avoid possibility of
listing it in process lists.</p>

<p>--session-timeout=MILLISECONDS Specify the session
timeout in milliseconds. Defaults to 20000 milliseconds (20
seconds) if not specified.</p>

<p>--retransmission-timeout=MILLISECONDS Specify the packet
retransmission timeout in milliseconds. Defaults to 400
milliseconds (0.4 seconds) if not specified.</p>

<p>-a AUTHENTICATION-TYPE,
--authentication-type=AUTHENTICATION-TYPE Specify the IPMI
1.5 authentication type to use. The currently available
authentication types are NONE, STRAIGHT_PASSWORD_KEY, MD2,
and MD5. Defaults to MD5 if not specified.</p>

<p>-I CIPHER-SUITE-ID, --cipher-suite-id=CIPHER-SUITE-ID
Specify the IPMI 2.0 cipher suite ID to use. The Cipher
Suite ID identifies a set of authentication, integrity, and
confidential- ity algorithms to use for IPMI 2.0
communication. The authenti- cation algorithm identifies the
algorithm to use for session setup, the integrity algorithm
identifies the algorithm to use for session packet
signatures, and the confidentiality algorithm identifies the
algorithm to use for payload encryption. Defaults to cipher
suite ID 3 if not specified. The following cipher suite ids
are currently supported:</p>

<p>0 - Authentication Algorithm = None; Integrity Algorithm
= None; Confidentiality Algorithm = None</p>

<p>1 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = None; Confidentiality Algorithm = None</p>

<p>2 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = HMAC-SHA1-96; Confidentiality Algorithm =
None</p>

<p>3 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = HMAC-SHA1-96; Confidentiality Algorithm =
AES-CBC-128</p>

<p>6 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = None; Confidentiality Algorithm = None</p>

<p>7 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = HMAC-MD5-128; Confidentiality Algorithm =
None</p>

<p>8 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = HMAC-MD5-128; Confidentiality Algorithm =
AES-CBC-128</p>

<p>11 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = MD5-128; Confidentiality Algorithm = None</p>

<p>12 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = MD5-128; Confidentiality Algorithm =
AES-CBC-128</p>

<p>15 - Authentication Algorithm = HMAC-SHA256; Integrity
Algorithm = None; Confidentiality Algorithm = None</p>

<p>16 - Authentication Algorithm = HMAC-SHA256; Integrity
Algorithm = HMAC_SHA256_128; Confidentiality Algorithm =
None</p>

<p>17 - Authentication Algorithm = HMAC-SHA256; Integrity
Algorithm = HMAC_SHA256_128; Confidentiality Algorithm =
AES-CBC-128</p>

<p>-l PRIVILEGE-LEVEL, --privilege-level=PRIVILEGE-LEVEL
Specify the privilege level to be used. The currently
available privilege levels are USER, OPERATOR, and ADMIN.
Defaults to OPERATOR if not specified.</p>

<p>--config-file=FILE Specify an alternate configuration
file.</p>

<p>-W WORKAROUNDS, --workaround-flags=WORKAROUNDS Specify
workarounds to vendor compliance issues. Multiple
workarounds can be specified separated by commas. A special
com- mand line flag of &quot;none&quot;, will indicate no
workarounds (may be useful for overriding configured
defaults). See WORKAROUNDS below for a list of available
workarounds.</p>

<p>--debug Turn on debugging.</p>

<p>-?, --help Output a help list and exit.</p>

<p>--usage Output a usage message and exit.</p>

<p>-V, --version Output the program version and exit.</p>

<p>IPMIPOWER OPTIONS The following options are specific to
ipmipower.</p>

<p>-n, --on Power on the target hosts.</p>

<p>-f, --off Power off the target hosts.</p>

<p>-c, --cycle Power cycle the target hosts.</p>

<p>-r, --reset Reset the target hosts.</p>

<p>-s, --stat Get power status of the target hosts.</p>

<p>-j, --pulse Send power diagnostic interrupt to target
hosts.</p>

<p>-m, --soft Initiate a soft-shutdown of the OS via
ACPI.</p>

<p>-g, --on-if-off The IPMI specification does not require
the power cycle or hard reset commands to turn on a machine
that is currently powered off. This option will force
ipmipower to issue a power on com- mand instead of a power
cycle or hard reset command if the remote machines power is
currently off.</p>

<p>-A, --wait-until-on The IPMI specification allows power
on commands to return prior to the power on actually taking
place. This option will force ipmipower to regularly query
the remote BMC and return only after the machine has powered
on.</p>

<p>-G, --wait-until-off The IPMI specification allows power
off commands to return prior the power off actually taking
place. This option will force ipmipower to regularly query
the remote BMC and return only after the machine has powered
off.</p>

<p>--oem-power-type=OEM-POWER-TYPE This option informs
ipmipower to initiate power control opera- tions via an IPMI
OEM specific power control extension. The cur- rently
available POWERTYPEs are NONE and C410X. Please see OEM
POWER EXTENSIONS below for additional information.</p>

<p>IPMIPOWER ADVANCED NETWORK OPTIONS The following options
are used to change the networking behavior of ipmipower.</p>

<p>-q, --retransmission-wait-timeout=MILLISECONDS Specify
the retransmission wait timeout length in milliseconds. The
retransmission wait timeout is similar to the retransmission
timeout above, but is used specifically for power completion
verification with the --wait-until-on and --wait-until-off
options. Defaults to 500 milliseconds (0.5 seconds).</p>

<p>-b, --retransmission-backoff-count=COUNT Specify the
retransmission backoff count for retransmissions. After ever
COUNT retransmissions, the retransmission timeout length
will be increased by another factor. Defaults to 8.</p>

<p>-i, --ping-interval=MILLISECONDS Specify the ping
interval length in milliseconds. When running in interactive
mode, RMCP (Remote Management Control Protocol) discovery
messages will be sent to all configured remote hosts every
MILLISECONDS to confirm their support of IPMI. Power com-
mands cannot be sent to a host until it is discovered (or
re- discovered if previously lost). Defaults to 5000
milliseconds (5 seconds). Ping discovery messages can be
disabled by setting this valu to 0. RMCP ping discovery
messages are automatically disabled in non-interactive
mode.</p>

<p>-z, --ping-timeout=MILLISECONDS Specify the ping timeout
length in milliseconds. When running in interactive mode,
RMCP (Remote Management Control Protocol) mes- sages
discovery will be sent to all configured remote hosts to
confirm their support of IPMI. A remote host is considered
undiscovered if the host does not respond in MILLISECONDS
time. Defaults to 30000 milliseconds (30 seconds). The ping
timeout cannot be larger than the ping interval.</p>

<p>-v, --ping-packet-count=COUNT Specify the ping packet
count size. Defaults to 10. See the --ping-percent-fR option
below for more information on this option.</p>

<p>-w, --ping-percent=PERCENT Specify the ping percent
value. Defaults to 50. Since IPMI is based on UDP, it is
difficult for ipmipower to distinguish between a missing
machine and a bad (or heavily loaded) network connection in
interactive mode. when running in interactive mode. For
example, suppose a link consistently drops 80% of the
packets to a particular machine. The power control operation
may have difficulty completing, although a recent pong
response from RMCP makes ipmipower believe the machine is up
and functioning properly. The ping packet acount and percent
options are used to alleviate this problem. Ipmipower will
monitor RMCP ping packets in packet count chunks. If
ipmipower does not receive a response to greater than ping
percent of those packets, ipmipower will assume the link to
this node is bad and will not send power control operations
to that node until the connection is determined to be
reliable. This heuristic can be disabled by setting either
the ping packet count or ping percent to 0. This feature is
not used if ping interval is set to 0.</p>

<p>-x, --ping-consec-count=COUNT Specify the ping
consecutive count. This is another heuristic used to
determine if a node should be considered discovered,
undiscovered, or with a bad connection. If a valid RMCP pong
response was received for the last COUNT ping packets, a
node will be considered discovered, regardless of other
heuristics listed above. Defaults to 5. This heuristic can
be disabled by setting this value to 0. This feature is not
used if other ping features described above are
disabled.</p>

<p>HOSTRANGED OPTIONS The following options manipulate
hostranged output. See HOSTRANGED SUP- PORT below for
additional information on hostranges.</p>

<p>-B, --buffer-output Buffer hostranged output. For each
node, buffer standard output until the node has completed
its IPMI operation. When specifying this option, data may
appear to output slower to the user since the the entire
IPMI operation must complete before any data can be output.
See HOSTRANGED SUPPORT below for additional informa-
tion.</p>

<p>-C, --consolidate-output Consolidate hostranged output.
The complete standard output from every node specified will
be consolidated so that nodes with identical output are not
output twice. A header will list those nodes with the
consolidated output. When this option is speci- fied, no
output can be seen until the IPMI operations to all nodes
has completed. If the user breaks out of the program early,
all currently consolidated output will be dumped. See
HOSTRANGED SUPPORT below for additional information.</p>

<p>-F NUM, --fanout=NUM Specify multiple host fanout.
Indicates the maximum number of power control operations
that can be executed in parallel.</p>

<p>-E, --eliminate Eliminate hosts determined as undetected
by ipmidetect. This attempts to remove the common issue of
hostranged execution tim- ing out due to several nodes being
removed from service in a large cluster. The ipmidetectd
daemon must be running on the node executing the
command.</p>

<p>--always-prefix Always prefix output, even if only one
host is specified or com- municating in-band. This option is
primarily useful for script- ing purposes. Option will be
ignored if specified with the -C option.</p>

<p>INTERACTIVE COMMANDS ipmipower provides the following
interactive commands at the ipmipower&gt; prompt. Before any
power commands (on, off, cycle, reset, stat, pulse, or soft)
can be used, hostnames must be configured into ipmipower,
either through the command prompt or the hostname command
below. The parameters and options to the commands below
mirror their appropriate command line options.</p>

<p>hostname [IPMIHOST(s)] Specify a new set of hosts. No
input to unconfigure all hosts.</p>

<p>username [USERNAME] Specify a new username. No input for
null username.</p>

<p>password [PASSWORD] Specify a new password. No input for
null password.</p>

<p>k_g [K_G] Specify a new K_g BMC Key. No input for null
key. Prefix with 0x to enter a key in hexadecimal</p>

<p>ipmi-version IPMIVERSION Specify the ipmi version to
use.</p>

<p>session-timeout MILLISECONDS Specify a new session
timeout length.</p>

<p>retransmission-timeout MILLISECONDS Specify a new
retransmiision timeout length.</p>

<p>authentication-type AUTHENTICATION-TYPE Specify the
authentication type to use.</p>

<p>cipher-suite-id CIPHER-SUITE-ID Specify the cipher suite
id to use.</p>

<p>privilege-level PRIVILEGE-LEVEL Specify the privilege
level to use.</p>

<p>workaround-flags WORKAROUNDS Specify workaround
flags.</p>

<p>debug [on|off] Toggle debug output.</p>

<p>on [IPMIHOST(s)] Turn on all configured hosts or
specified hosts.</p>

<p>off [IPMIHOST(s)] Turn off all configured hosts or
specified hosts.</p>

<p>cycle [IPMIHOST(s)] Power cycle all configured hosts or
specified hosts.</p>

<p>reset [IPMIHOST(s)] Reset all configured hosts or
specified hosts.</p>

<p>stat [IPMIHOST(s)] Query power status for all configured
hosts or specified hosts.</p>

<p>pulse [IPMIHOST(s)] Pulse diagnostic interrupt all
configured hosts or specified hosts.</p>

<p>soft [IPMIHOST(s)] Initiate a soft-shutdown for all
configured hosts or specified hosts.</p>

<p>identify-on [IPMIHOST(s)] Turn on physical system
identification.</p>

<p>identify-off [IPMIHOST(s)] Turn off physical system
identification.</p>

<p>identify-status [IPMIHOST(s)] Query physical system
identification status.</p>

<p>on-if-off [on|off] Toggle on-if-off functionality.</p>

<p>wait-until-on [on|off] Toggle wait-until-on
functionality.</p>

<p>wait-until-off [on|off] Toggle wait-until-off
functionality.</p>

<p>retransmission-wait-timeout MILLISECONDS Specify a new
retransmission wait timeout length.</p>

<p>retransmission-backoff-count COUNT Specify a new
retransmission backoff count.</p>

<p>ping-interval MILLISECONDS Specify a new ping interval
length.</p>

<p>ping-timeout MILLISECONDS Specify a new ping timeout
length.</p>

<p>ping-packet-count COUNT Specify a new ping packet
count.</p>

<p>ping-percent PERCENT Specify a new ping percent.</p>

<p>ping-consec-count COUNT Specify a new ping consec
count.</p>

<p>buffer-output [on|off] Toggle buffer-output
functionality.</p>

<p>consolidate-output [on|off] Toggle consolidate-output
functionality.</p>

<p>fanout COUNT Specify a fanout.</p>

<p>always-prefix [on|off] Toggle always-prefix
functionality.</p>

<p>help Output help menu.</p>

<p>version Output version.</p>

<p>config Output the current configuration.</p>

<p>quit Quit program. ipmipower.</p>

<p>OEM POWER EXTENSIONS Some motherboards include IPMI OEM
extensions for alternate power con- trol mechanisms. For
example, these power control mechanisms may allow you to
power control a sub-device within the system rather than the
entire system itself.</p>

<p>By specifying an OEM power type via --oem-power-type on
the command line or freeipmi.conf(5), you can instruct
ipmipower to execute alter- nate power control
implementations over the standard ones. Depending on the OEM
extension, some power control commands may no longer be
avail- able. For example, an OEM extension may allow on but
not cycle. Spe- cific ipmipower options may not longer
function either.</p>

<p>Some OEM extensions may require additional arguments for
their power control action, such as a sub-device identifier.
Additional arguments can be provided by appending a plus
sign (+) and the extra informa- tion to the end of the
hostname. This can be done on the command line or in
interactive mode. For example, the hostname mynode+18 would
indi- cate the power control operation should be sent to the
host mynode, and 18 is the identifier of a possible
sub-device to be power controlled. The --consolidate-output
option is commonly disabled when using an OEM power control
that requires extra arguments.</p>

<p>Because OEM power control may involve subtypes, it is
possible a user may wish to power control multiple
sub-devices on the same host. For example, you might specify
the hosts mynode+1,mynode+2, indicating to power control
subdevice 1 and 2 on mynode. Because many BMCs cannot handle
multiple IPMI sessions, power control operations to the same
host will be serialized internally by ipmipower.</p>

<p>The following are the current OEM power types available,
along with information on the systems they work with and the
power control opera- tions available.</p>

<p>C410X This OEM power type supports the power control of
PCIe slots on Dell Poweredge C410x systems. It supports on,
off, and stat. The PCIe slot number ranges from 1-16 and
must always be specified when attempting to power control
with this extension. For exam- ple, the hostname mynode+2
would inform ipmipower to operate on slot number 2 on
mynode. The C410x appears to have difficulty handling new
slot power control requests until prior ones have completed.
Users may wish to strongly consider using the
--wait-until-on and --wait-until-off options if multiple
slots will be power controlled in short succession.</p>

<p>NONE This informs ipmipower that no OEM power type
extension is to be used and standard IPMI power control is
used. This is the default.</p>

<p>HOSTRANGED SUPPORT Multiple hosts can be input either as
an explicit comma separated lists of hosts or a range of
hostnames in the general form: prefix[n-m,l- k,...], where n
&lt; m and l &lt; k, etc. The later form should not be con-
fused with regular expression character classes (also
denoted by []). For example, foo[19] does not represent foo1
or foo9, but rather repre- sents a degenerate range:
foo19.</p>

<p>This range syntax is meant only as a convenience on
clusters with a prefixNN naming convention and specification
of ranges should not be considered necessary -- the list
foo1,foo9 could be specified as such, or by the range
foo[1,9].</p>

<p>Some examples of range usage follow: foo[01-05] instead
of foo01,foo02,foo03,foo04,foo05 foo[7,9-10] instead of
foo7,foo9,foo10 foo[0-3] instead of foo0,foo1,foo2,foo3</p>

<p>As a reminder to the reader, some shells will interpret
brackets ([ and ]) for pattern matching. Depending on your
shell, it may be necessary to enclose ranged lists within
quotes.</p>

<p>When multiple hosts are specified by the user, a socket
will be created for each host and polled on, effectively
allowing communication to all hosts in parallel. This will
allow communication to large numbers of nodes far more
quickly than if done in serial. The -F option can con-
figure the number of nodes that can be communicated with in
parallel at the same time.</p>

<p>By default, standard output from each node specified
will be output with the hostname prepended to each line.
Although this output is read- able in many situations, it
may be difficult to read in other situa- tions. For example,
output from multiple nodes may be mixed together. The -B and
-C options can be used to change this default.</p>

<p>EXAMPLES Determine the power status of foo[0-2] with
null username and password ipmipower -h foo[0-2] --stat</p>

<p>Determine the power status of foo[0-2] with non-null
username and pass- word ipmipower -h foo[0-2] -u foo -p bar
--stat</p>

<p>Hard reset nodes foo[0-2] with non-null username and
password ipmipower -h foo[0-2] -u foo -p bar --reset</p>

<p>GENERAL TROUBLESHOOTING Most often, IPMI problems are
due to configuration problems.</p>

<p>IPMI over LAN problems involve a misconfiguration of the
remote machines BMC. Double check to make sure the following
are configured properly in the remote machine s BMC: IP
address, MAC address, subnet mask, username, user
enablement, user privilege, password, LAN privi- lege, LAN
enablement, and allowed authentication type(s). For IPMI 2.0
connections, double check to make sure the cipher suite
privilege(s) and K_g key are configured properly. The
bmc-config(8) tool can be used to check and/or change these
configuration settings.</p>

<p>In addition to the troubleshooting tips below, please
see WORKAROUNDS below to also if there are any vendor
specific bugs that have been dis- covered and worked
around.</p>

<p>Listed below are many of the common issues for error
messages. For additional support, please e-mail the
&lt;freeipmi-users@gnu.org&gt; mailing list.</p>

<p>&quot;username invalid&quot; - The username entered (or
a NULL username if none was entered) is not available on the
remote machine. It may also be possible the remote BMC s
username configuration is incorrect.</p>

<p>&quot;password invalid&quot; - The password entered (or
a NULL password if none was entered) is not correct. It may
also be possible the password for the user is not correctly
configured on the remote BMC.</p>

<p>&quot;password verification timeout&quot; - Password
verification has timed out. A &quot;password invalid&quot;
error (described above) or a generic &quot;session
timeout&quot; (described below) occurred. During this point
in the protocol it cannot be differentiated which
occurred.</p>

<p>&quot;k_g invalid&quot; - The K_g key entered (or a NULL
K_g key if none was entered) is not correct. It may also be
possible the K_g key is not correctly configured on the
remote BMC.</p>

<p>&quot;privilege level insufficient&quot; - An IPMI
command requires a higher user privilege than the one
authenticated with. Please try to authenticate with a higher
privilege. This may require authenticating to a different
user which has a higher maximum privilege.</p>

<p>&quot;privilege level cannot be obtained for this
user&quot; - The privilege level you are attempting to
authenticate with is higher than the maxi- mum allowed for
this user. Please try again with a lower privilege. It may
also be possible the maximum privilege level allowed for a
user is not configured properly on the remote BMC.</p>

<p>&quot;authentication type unavailable for attempted
privilege level&quot; - The authentication type you wish to
authenticate with is not available for this privilege level.
Please try again with an alternate authentication type or
alternate privilege level. It may also be possible the
avail- able authentication types you can authenticate with
are not correctly configured on the remote BMC.</p>

<p>&quot;cipher suite id unavailable&quot; - The cipher
suite id you wish to authen- ticate with is not available on
the remote BMC. Please try again with an alternate cipher
suite id. It may also be possible the available cipher suite
ids are not correctly configured on the remote BMC.</p>

<p>&quot;ipmi 2.0 unavailable&quot; - IPMI 2.0 was not
discovered on the remote machine. Please try to use IPMI 1.5
instead.</p>

<p>&quot;connection timeout&quot; - Initial IPMI
communication failed. A number of potential errors are
possible, including an invalid hostname specified, an IPMI
IP address cannot be resolved, IPMI is not enabled on the
remote server, the network connection is bad, etc. Please
verify con- figuration and connectivity.</p>

<p>&quot;session timeout&quot; - The IPMI session has timed
out. Please reconnect. If this error occurs often, you may
wish to increase the retransmission timeout. Some remote
BMCs are considerably slower than others.</p>

<p>IPMIPOWER TROUBLESHOOTING When powering on a powered off
machine, the client must have a means by which to resolve
the MAC address of the remote machines ethernet card. While
most modern IPMI solutions support the ability to ARP and
resolve addresses when the machine is powered off, some
older machines do not. This is typically solved in one of
two ways:</p>

<p>1) Enable gratuitous ARPs on the remote machine. The
remote machine will send out a gratuitous ARP, which
advertises the ethernet IP and MAC address so that other
machines on the network this information their local ARP
cache. For large clusters, this method is not recom- mended
since gratuitous ARPs can flood the network with unnecessary
traffic.</p>

<p>2) Permanently store the remote machines MAC address in
the local ARP cache. This is the more common approach on
large clusters.</p>

<p>Other methods are listed in the IPMI specification.</p>

<p>WORKAROUNDS With so many different vendors implementing
their own IPMI solutions, different vendors may implement
their IPMI protocols incorrectly. The following describes a
number of workarounds currently available to han- dle
discovered compliance issues. When possible, workarounds
have been implemented so they will be transparent to the
user. However, some will require the user to specify a
workaround be used via the -W option.</p>

<p>The hardware listed below may only indicate the hardware
that a problem was discovered on. Newer versions of hardware
may fix the problems indicated below. Similar machines from
vendors may or may not exhibit the same problems. Different
vendors may license their firmware from the same IPMI
firmware developer, so it may be worthwhile to try
workarounds listed below even if your motherboard is not
listed.</p>

<p>If you believe your hardware has an additional
compliance issue that needs a workaround to be implemented,
please contact the FreeIPMI main- tainers on
&lt;freeipmi-users@gnu.org&gt; or
&lt;freeipmi-devel@gnu.org&gt;.</p>

<p>authcap - This workaround flag will skip early checks
for username capabilities, authentication capabilities, and
K_g support and allow IPMI authentication to succeed. It
works around multiple issues in which the remote system does
not properly report username capabilities, authentication
capabilities, or K_g status. Those hitting this issue may
see &quot;username invalid&quot;, &quot;authentication type
unavailable for attempted privilege level&quot;, or
&quot;k_g invalid&quot; errors. Issue observed on Asus
P5M2/P5MT-R/RS162-E4/RX4, Intel SR1520ML/X38ML, and Sun Fire
2200/4150/4450 with ELOM.</p>

<p>idzero - This workaround flag will allow empty session
IDs to be accepted by the client. It works around IPMI
sessions that report empty session IDs to the client. Those
hitting this issue may see &quot;session timeout&quot;
errors. Issue observed on Tyan S2882 with M3289 BMC.</p>

<p>unexpectedauth - This workaround flag will allow
unexpected non-null authcodes to be checked as though they
were expected. It works around an issue when packets contain
non-null authentication data when they should be null due to
disabled per-message authentication. Those hit- ting this
issue may see &quot;session timeout&quot; errors. Issue
observed on Dell PowerEdge 2850,SC1425. Confirmed fixed on
newer firmware.</p>

<p>forcepermsg - This workaround flag will force
per-message authentica- tion to be used no matter what is
advertised by the remote system. It works around an issue
when per-message authentication is advertised as disabled on
the remote system, but it is actually required for the pro-
tocol. Those hitting this issue may see &quot;session
timeout&quot; errors. Issue observed on IBM eServer 325.</p>

<p>endianseq - This workaround flag will flip the endian of
the session sequence numbers to allow the session to
continue properly. It works around IPMI 1.5 session sequence
numbers that are the wrong endian. Those hitting this issue
may see &quot;session timeout&quot; errors. Issue observed
on some Sun ILOM 1.0/2.0 (depends on service processor
endian).</p>

<p>noauthcodecheck - This workaround flag will tell
FreeIPMI to not check the authentication codes returned from
IPMI 1.5 command responses. It works around systems to
return invalid authentication codes due to hashing or
implementation errors. Users are cautioned on the use of
this option, as it removes an authentication check verifying
the valid- ity of a packet. However, in most organizations,
this is unlikely to be a security issue. Those hitting this
issue may see &quot;connection time- out&quot;,
&quot;session timeout&quot;, or &quot;password verification
timeout&quot; errors. Issue observed on Xyratex
FB-H8-SRAY.</p>

<p>intel20 - This workaround flag will work around several
Intel IPMI 2.0 authentication issues. The issues covered
include padding of usernames, and password truncation if the
authentication algorithm is HMAC- MD5-128. Those hitting
this issue may see &quot;username invalid&quot;,
&quot;password invalid&quot;, or &quot;k_g invalid&quot;
errors. Issue observed on Intel SE7520AF2 with Intel Server
Management Module (Professional Edition).</p>

<p>supermicro20 - This workaround flag will work around
several Supermicro IPMI 2.0 authentication issues on
motherboards w/ Peppercon IPMI firmware. The issues covered
include handling invalid length authenti- cation codes.
Those hitting this issue may see &quot;password
invalid&quot; errors. Issue observed on Supermicro H8QME
with SIMSO daughter card. Confirmed fixed on newerver
firmware.</p>

<p>sun20 - This workaround flag will work work around
several Sun IPMI 2.0 authentication issues. The issues
covered include invalid lengthed hash keys, improperly
hashed keys, and invalid cipher suite records. Those hitting
this issue may see &quot;password invalid&quot; or &quot;bmc
error&quot; errors. Issue observed on Sun Fire
4100/4200/4500 with ILOM. This workaround automatically
includes the &quot;opensesspriv&quot; workaround.</p>

<p>opensesspriv - This workaround flag will slightly alter
FreeIPMIs IPMI 2.0 connection protocol to workaround an
invalid hashing algorithm used by the remote system. The
privilege level sent during the Open Session stage of an
IPMI 2.0 connection is used for hashing keys instead of the
privilege level sent during the RAKP1 connection stage.
Those hitting this issue may see &quot;password
invalid&quot;, &quot;k_g invalid&quot;, or &quot;bad
rmcpplus status code&quot; errors. Issue observed on Sun
Fire 4100/4200/4500 with ILOM, Inventec 5441/Dell Xanadu II,
Supermicro X8DTH, Supermicro X8DTG, Intel S5500WBV/Penguin
Relion 700, Intel S2600JF/Appro 512X, and Quanta
QSSC-S4R//Appro GB812X-CN. This workaround is automatically
triggered with the &quot;sun20&quot; workaround.</p>

<p>integritycheckvalue - This workaround flag will work
around an invalid integrity check value during an IPMI 2.0
session establishment when using Cipher Suite ID 0. The
integrity check value should be 0 length, however the remote
motherboard responds with a non-empty field. Those hitting
this issue may see &quot;k_g invalid&quot; errors. Issue
observed on Supermicro X8DTG, Supermicro X8DTU, and Intel
S5500WBV/Penguin Relion 700, and Intel S2600JF/Appro
512X.</p>

<p>No IPMI 1.5 Support - Some motherboards that support
IPMI 2.0 have been found to not support IPMI 1.5. Those
hitting this issue may see &quot;ipmi 2.0 unavailable&quot;
or &quot;connection timeout&quot; errors. This issue can be
worked around by using IPMI 2.0 instead of IPMI 1.5 by
specifying --driver-address=LAN_2_0. Issue observed on HP
Proliant DL 145.</p>

<p>DIAGNOSTICS Upon successful execution, exit status is 0.
On error, exit status is 1.</p>

<p>If multiple hosts are specified for communication, the
exit status is 0 if and only if all targets successfully
execute. Otherwise the exit status is 1.</p>

<p>When operating in interactive mode, the exit value will
be based on the last power operation executed.</p>

<p>KNOWN ISSUES On older operating systems, if you input
your username, password, and other potentially security
relevant information on the command line, this information
may be discovered by other users when using tools like the
ps(1) command or looking in the /proc file system. It is
generally more secure to input password information with
options like the -P or -K options. Configuring security
relevant information in the FreeIPMI configuration file
would also be an appropriate way to hide this infor-
mation.</p>

<p>In order to prevent brute force attacks, some BMCs will
temporarily &quot;lock up&quot; after a number of remote
authentication errors. You may need to wait awhile in order
to this temporary &quot;lock up&quot; to pass before you may
authenticate again.</p>

<p>IPMI specifications do not require BMCs to perform a
power control operation before returning a completion code
to the caller. Therefore, it is possible for ipmipower to
return power status queries opposite of what you are
expecting. For example, if a &quot;power off&quot; operation
is performed, a BMC may return a successful completion code
to ipmipower before the &quot;power off&quot; operation is
actually performed. Subsequent power status queries may
return &quot;on&quot; for several seconds, until the BMC
actually performs the &quot;power off&quot; operation.</p>

<p>REPORTING BUGS Report bugs to
&lt;freeipmi-users@gnu.org&gt; or
&lt;freeipmi-devel@gnu.org&gt;.</p>

<p>COPYRIGHT Copyright (C) 2007-2012 Lawrence Livermore
National Security, LLC. Copyright (C) 2003-2007 The Regents
of the University of California.</p>

<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 3 of the License, or (at your option) any later
version.</p>

<p>SEE ALSO freeipmi.conf(5), freeipmi(7), bmc-config(8),
ipmi-oem(8)</p>

<p>http://www.gnu.org/software/freeipmi/</p>

<p>ipmipower 1.2.1 2015-12-03 ipmipower(8)</p>
<hr>
</body>
</html>
