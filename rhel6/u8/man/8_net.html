<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:24:33 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>NET(8) System Administration tools NET(8)</p>

<p>NAME net - Tool for administration of Samba and remote
CIFS servers.</p>

<p>SYNOPSIS net {&lt;ads|rap|rpc&gt;} [-h] [-w workgroup]
[-W myworkgroup] [-U user] [-I ip-address] [-p port] [-n
myname] [-s conffile] [-S server] [-l] [-P] [-d debuglevel]
[-V] [--request-timeout seconds]</p>

<p>DESCRIPTION This tool is part of the samba(7) suite.</p>

<p>The Samba net utility is meant to work just like the net
utility available for windows and DOS. The first argument
should be used to specify the protocol to use when executing
a certain command. ADS is used for ActiveDirectory, RAP is
using for old (Win9x/NT3) clients and RPC can be used for
NT4 and Windows 2000. If this argument is omitted, net will
try to determine it automatically. Not all commands are
available on all protocols.</p>

<p>OPTIONS -?|--help Print a summary of command line
options.</p>

<p>-k|--kerberos Try to authenticate with kerberos. Only
useful in an Active Directory environment.</p>

<p>-w target-workgroup Sets target workgroup or domain. You
have to specify either this option or the IP address or the
name of a server.</p>

<p>-W workgroup Sets client workgroup or domain</p>

<p>-U user User name to use</p>

<p>-I ip-address IP address of target server to use. You
have to specify either this option or a target workgroup or
a target server.</p>

<p>-p port Port on the target server to connect to (usually
139 or 445). Defaults to trying 445 first, then 139.</p>

<p>-n|--netbiosname &lt;primary NetBIOS name&gt; This
option allows you to override the NetBIOS name that Samba
uses for itself. This is identical to setting the netbios
name parameter in the smb.conf file. However, a command line
setting will take precedence over settings in smb.conf.</p>

<p>-s|--configfile &lt;configuration file&gt; The file
specified contains the configuration details required by the
server. The information in this file includes
server-specific information such as what printcap file to
use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at compile
time.</p>

<p>-S server Name of target server. You should specify
either this option or a target workgroup or a target IP
address.</p>

<p>-l When listing data, give more information on each
item.</p>

<p>-P Make queries to the external server using the machine
account of the local server.</p>

<p>--request-timeout 30 Let client requests timeout after
30 seconds the default is 10 seconds.</p>

<p>--no-dns-updates Do not perform DNS updates as part of
&quot;net ads join&quot;.</p>

<p>-d|--debuglevel=level level is an integer from 0 to 10.
The default value if this parameter is not specified is
0.</p>

<p>The higher this value, the more detail will be logged to
the log files about the activities of the server. At level
0, only critical errors and serious warnings will be logged.
Level 1 is a reasonable level for day-to-day running - it
generates a small amount of information about operations
carried out.</p>

<p>Levels above 1 will generate considerable amounts of log
data, and should only be used when investigating a problem.
Levels above 3 are designed for use only by developers and
generate HUGE amounts of log data, most of which is
extremely cryptic.</p>

<p>Note that specifying this parameter here will override
the log level parameter in the smb.conf file.</p>

<p>COMMANDS CHANGESECRETPW This command allows the Samba
machine account password to be set from an external
application to a machine account password that has already
been stored in Active Directory. DO NOT USE this command
unless you know exactly what you are doing. The use of this
command requires that the force flag (-f) be used also.
There will be NO command prompt. Whatever information is
piped into stdin, either by typing at the command line or
otherwise, will be stored as the literal machine password.
Do NOT use this without care and attention as it will
overwrite a legitimate machine password without warning. YOU
HAVE BEEN WARNED.</p>

<p>TIME The NET TIME command allows you to view the time on
a remote server or synchronise the time on the local server
with the time on the remote server.</p>

<p>TIME Without any options, the NET TIME command displays
the time on the remote server.</p>

<p>TIME SYSTEM Displays the time on the remote server in a
format ready for /bin/date.</p>

<p>TIME SET Tries to set the date and time of the local
server to that on the remote server using /bin/date.</p>

<p>TIME ZONE Displays the timezone in hours from GMT on the
remote computer.</p>

<p>[RPC|ADS] JOIN [TYPE] [--no-dns-updates] [-U
username[%password]] [createupn=UPN] [createcomputer=OU]
[options] Join a domain. If the account already exists on
the server, and [TYPE] is MEMBER, the machine will attempt
to join automatically. (Assuming that the machine has been
created in server manager) Otherwise, a password will be
prompted for, and a new account may be created.</p>

<p>[TYPE] may be PDC, BDC or MEMBER to specify the type of
server joining the domain.</p>

<p>[UPN] (ADS only) set the principalname attribute during
the join. The default format is host/netbiosname@REALM.</p>

<p>[OU] (ADS only) Precreate the computer account in a
specific OU. The OU string reads from top to bottom without
RDNs, and is delimited by a &rsquo;/&rsquo;. Please note
that &rsquo;&acute; is used for escape by both the shell and
ldap, so it may need to be doubled or quadrupled to pass
through, and it is not used as a delimiter.</p>

<p>[RPC] OLDJOIN [options] Join a domain. Use the OLDJOIN
option to join the domain using the old style of domain
joining - you need to create a trust account in server
manager first.</p>

<p>[RPC|ADS] USER [RPC|ADS] USER List all users</p>

<p>[RPC|ADS] USER DELETE target Delete specified user</p>

<p>[RPC|ADS] USER INFO target List the domain groups of the
specified user.</p>

<p>[RPC|ADS] USER RENAME oldname newname Rename specified
user.</p>

<p>[RPC|ADS] USER ADD name [password] [-F user flags] [-C
comment] Add specified user.</p>

<p>[RPC|ADS] GROUP [RPC|ADS] GROUP [misc options] [targets]
List user groups.</p>

<p>[RPC|ADS] GROUP DELETE name [misc. options] Delete
specified group.</p>

<p>[RPC|ADS] GROUP ADD name [-C comment] Create specified
group.</p>

<p>[RAP|RPC] SHARE [RAP|RPC] SHARE [misc. options]
[targets] Enumerates all exported resources (network shares)
on target server.</p>

<p>[RAP|RPC] SHARE ADD name=serverpath [-C comment] [-M
maxusers] [targets] Adds a share from a server (makes the
export active). Maxusers specifies the number of users that
can be connected to the share simultaneously.</p>

<p>SHARE DELETE sharename Delete specified share.</p>

<p>[RPC|RAP] FILE [RPC|RAP] FILE List all open files on
remote server.</p>

<p>[RPC|RAP] FILE CLOSE fileid Close file with specified
fileid on remote server.</p>

<p>[RPC|RAP] FILE INFO fileid Print information on
specified fileid. Currently listed are: file-id, username,
locks, path, permissions.</p>

<p>[RAP|RPC] FILE USER user List files opened by specified
user. Please note that net rap file user does not work
against Samba servers.</p>

<p>SESSION RAP SESSION Without any other options, SESSION
enumerates all active SMB/CIFS sessions on the target
server.</p>

<p>RAP SESSION DELETE|CLOSE CLIENT_NAME Close the specified
sessions.</p>

<p>RAP SESSION INFO CLIENT_NAME Give a list with all the
open files in specified session.</p>

<p>RAP SERVER DOMAIN List all servers in specified domain
or workgroup. Defaults to local domain.</p>

<p>RAP DOMAIN Lists all domains and workgroups visible on
the current network.</p>

<p>RAP PRINTQ RAP PRINTQ INFO QUEUE_NAME Lists the
specified print queue and print jobs on the server. If the
QUEUE_NAME is omitted, all queues are listed.</p>

<p>RAP PRINTQ DELETE JOBID Delete job with specified
id.</p>

<p>RAP VALIDATE user [password] Validate whether the
specified user can log in to the remote server. If the
password is not specified on the commandline, it will be
prompted.</p>

<p>Note Currently NOT implemented.</p>

<p>RAP GROUPMEMBER RAP GROUPMEMBER LIST GROUP List all
members of the specified group.</p>

<p>RAP GROUPMEMBER DELETE GROUP USER Delete member from
group.</p>

<p>RAP GROUPMEMBER ADD GROUP USER Add member to group.</p>

<p>RAP ADMIN command Execute the specified command on the
remote server. Only works with OS/2 servers.</p>

<p>Note Currently NOT implemented.</p>

<p>RAP SERVICE RAP SERVICE START NAME [arguments...] Start
the specified service on the remote server. Not implemented
yet.</p>

<p>Note Currently NOT implemented.</p>

<p>RAP SERVICE STOP Stop the specified service on the
remote server.</p>

<p>Note Currently NOT implemented.</p>

<p>RAP PASSWORD USER OLDPASS NEWPASS Change password of
USER from OLDPASS to NEWPASS.</p>

<p>LOOKUP LOOKUP HOST HOSTNAME [TYPE] Lookup the IP address
of the given host with the specified type (netbios suffix).
The type defaults to 0x20 (workstation).</p>

<p>LOOKUP LDAP [DOMAIN] Give IP address of LDAP server of
specified DOMAIN. Defaults to local domain.</p>

<p>LOOKUP KDC [REALM] Give IP address of KDC for the
specified REALM. Defaults to local realm.</p>

<p>LOOKUP DC [DOMAIN] Give IP&rsquo;s of Domain Controllers
for specified DOMAIN. Defaults to local domain.</p>

<p>LOOKUP MASTER DOMAIN Give IP of master browser for
specified DOMAIN or workgroup. Defaults to local domain.</p>

<p>CACHE Samba uses a general caching interface called
&rsquo;gencache&rsquo;. It can be controlled using
&rsquo;NET CACHE&rsquo;.</p>

<p>All the timeout parameters support the suffixes: s -
Seconds m - Minutes h - Hours d - Days w - Weeks</p>

<p>CACHE ADD key data time-out Add specified key+data to
the cache with the given timeout.</p>

<p>CACHE DEL key Delete key from the cache.</p>

<p>CACHE SET key data time-out Update data of existing
cache entry.</p>

<p>CACHE SEARCH PATTERN Search for the specified pattern in
the cache data.</p>

<p>CACHE LIST List all current items in the cache.</p>

<p>CACHE FLUSH Remove all the current items from the
cache.</p>

<p>GETLOCALSID [DOMAIN] Prints the SID of the specified
domain, or if the parameter is omitted, the SID of the local
server.</p>

<p>SETLOCALSID S-1-5-21-x-y-z Sets SID for the local server
to the specified SID.</p>

<p>GETDOMAINSID Prints the local machine SID and the SID of
the current domain.</p>

<p>SETDOMAINSID Sets the SID of the current domain.</p>

<p>GROUPMAP Manage the mappings between Windows group SIDs
and UNIX groups. Common options include:</p>

<p>&middot; unixgroup - Name of the UNIX group</p>

<p>&middot; ntgroup - Name of the Windows NT group (must be
resolvable to a SID</p>

<p>&middot; rid - Unsigned 32-bit integer</p>

<p>&middot; sid - Full SID in the form of
&quot;S-1-...&quot;</p>

<p>&middot; type - Type of the group; either
&rsquo;domain&rsquo;, &rsquo;local&rsquo;, or
&rsquo;builtin&rsquo;</p>

<p>&middot; comment - Freeform text description of the
group</p>

<p>GROUPMAP ADD Add a new group mapping entry:</p>

<p>net groupmap add {rid=int|sid=string} unixgroup=string
[type={domain|local}] [ntgroup=string] [comment=string]</p>

<p>GROUPMAP DELETE Delete a group mapping entry. If more
than one group name matches, the first entry found is
deleted.</p>

<p>net groupmap delete {ntgroup=string|sid=SID}</p>

<p>GROUPMAP MODIFY Update en existing group entry.</p>

<p>net groupmap modify {ntgroup=string|sid=SID}
[unixgroup=string] [comment=string]
[type={domain|local}]</p>

<p>GROUPMAP LIST List existing group mapping entries.</p>

<p>net groupmap list [verbose] [ntgroup=string]
[sid=SID]</p>

<p>MAXRID Prints out the highest RID currently in use on
the local server (by the active &rsquo;passdb
backend&rsquo;).</p>

<p>RPC INFO Print information about the domain of the
remote server, such as domain name, domain sid and number of
users and groups.</p>

<p>[RPC|ADS] TESTJOIN Check whether participation in a
domain is still valid.</p>

<p>[RPC|ADS] CHANGETRUSTPW Force change of domain trust
password.</p>

<p>RPC TRUSTDOM RPC TRUSTDOM ADD DOMAIN Add a interdomain
trust account for DOMAIN. This is in fact a Samba account
named DOMAIN$ with the account flag &rsquo;I&rsquo;
(interdomain trust account). This is required for incoming
trusts to work. It makes Samba be a trusted domain of the
foreign (trusting) domain. Users of the Samba domain will be
made available in the foreign domain. If the command is used
against localhost it has the same effect as smbpasswd -a -i
DOMAIN. Please note that both commands expect a appropriate
UNIX account.</p>

<p>RPC TRUSTDOM DEL DOMAIN Remove interdomain trust account
for DOMAIN. If it is used against localhost it has the same
effect as smbpasswd -x DOMAIN$.</p>

<p>RPC TRUSTDOM ESTABLISH DOMAIN Establish a trust
relationship to a trusted domain. Interdomain account must
already be created on the remote PDC. This is required for
outgoing trusts to work. It makes Samba be a trusting domain
of a foreign (trusted) domain. Users of the foreign domain
will be made available in our domain. You&rsquo;ll need
winbind and a working idmap config to make them appear in
your system.</p>

<p>RPC TRUSTDOM REVOKE DOMAIN Abandon relationship to
trusted domain</p>

<p>RPC TRUSTDOM LIST List all interdomain trust
relationships.</p>

<p>RPC TRUSTDOM LIST List all interdomain trust
relationships.</p>

<p>RPC TRUST RPC TRUST CREATE Create a trust trust object
by calling lsaCreateTrustedDomainEx2. The can be done on a
single server or on two servers at once with the possibility
to use a random trust password.</p>

<p>Options:</p>

<p>otherserver Domain controller of the second domain</p>

<p>otheruser Admin user in the second domain</p>

<p>otherdomainsid SID of the second domain</p>

<p>other_netbios_domain NetBIOS (short) name of the second
domain</p>

<p>otherdomain DNS (full) name of the second domain</p>

<p>trustpw Trust password</p>

<p>Examples:</p>

<p>Create a trust object on srv1.dom1.dom for the domain
dom2</p>

<p>net rpc trust create
otherdomainsid=S-x-x-xx-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxx
other_netbios_domain=dom2 otherdomain=dom2.dom
trustpw=12345678 -S srv1.dom1.dom</p>

<p>Create a trust relationship between dom1 and dom2</p>

<p>net rpc trust create otherserver=srv2.dom2.test
otheruser=dom2adm -S srv1.dom1.dom</p>

<p>RPC TRUST DELETE Delete a trust trust object by calling
lsaDeleteTrustedDomain. The can be done on a single server
or on two servers at once.</p>

<p>Options:</p>

<p>otherserver Domain controller of the second domain</p>

<p>otheruser Admin user in the second domain</p>

<p>otherdomainsid SID of the second domain</p>

<p>Examples:</p>

<p>Delete a trust object on srv1.dom1.dom for the domain
dom2</p>

<p>net rpc trust delete
otherdomainsid=S-x-x-xx-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxx -S
srv1.dom1.dom</p>

<p>Delete a trust relationship between dom1 and dom2</p>

<p>net rpc trust delete otherserver=srv2.dom2.test
otheruser=dom2adm -S srv1.dom1.dom</p>

<p>RPC RIGHTS This subcommand is used to view and manage
Samba&rsquo;s rights assignments (also referred to as
privileges). There are three options currently available:
list, grant, and revoke. More details on Samba&rsquo;s
privilege model and its use can be found in the
Samba-HOWTO-Collection.</p>

<p>RPC ABORTSHUTDOWN Abort the shutdown of a remote
server.</p>

<p>RPC SHUTDOWN [-t timeout] [-r] [-f] [-C message] Shut
down the remote server.</p>

<p>-r Reboot after shutdown.</p>

<p>-f Force shutting down all applications.</p>

<p>-t timeout Timeout before system will be shut down. An
interactive user of the system can use this time to cancel
the shutdown.</p>

<p>-C message Display the specified message on the screen
to announce the shutdown.</p>

<p>RPC SAMDUMP Print out sam database of remote server. You
need to run this against the PDC, from a Samba machine
joined as a BDC.</p>

<p>RPC VAMPIRE Export users, aliases and groups from remote
server to local server. You need to run this against the
PDC, from a Samba machine joined as a BDC.</p>

<p>RPC VAMPIRE KEYTAB Dump remote SAM database to local
Kerberos keytab file.</p>

<p>RPC VAMPIRE LDIF Dump remote SAM database to local LDIF
file or standard output.</p>

<p>RPC GETSID Fetch domain SID and store it in the local
secrets.tdb.</p>

<p>ADS LEAVE Make the remote host leave the domain it is
part of.</p>

<p>ADS STATUS Print out status of machine account of the
local machine in ADS. Prints out quite some debug info.
Aimed at developers, regular users should use NET ADS
TESTJOIN.</p>

<p>ADS PRINTER ADS PRINTER INFO [PRINTER] [SERVER] Lookup
info for PRINTER on SERVER. The printer name defaults to
&quot;*&quot;, the server name defaults to the local
host.</p>

<p>ADS PRINTER PUBLISH PRINTER Publish specified printer
using ADS.</p>

<p>ADS PRINTER REMOVE PRINTER Remove specified printer from
ADS directory.</p>

<p>ADS SEARCH EXPRESSION ATTRIBUTES... Perform a raw LDAP
search on a ADS server and dump the results. The expression
is a standard LDAP search expression, and the attributes are
a list of LDAP fields to show in the results.</p>

<p>Example: net ads search
&rsquo;(objectCategory=group)&rsquo; sAMAccountName</p>

<p>ADS DN DN (attributes) Perform a raw LDAP search on a
ADS server and dump the results. The DN standard LDAP DN,
and the attributes are a list of LDAP fields to show in the
result.</p>

<p>Example: net ads dn
&rsquo;CN=administrator,CN=Users,DC=my,DC=domain&rsquo;
SAMAccountName</p>

<p>ADS WORKGROUP Print out workgroup name for specified
kerberos realm.</p>

<p>SAM CREATEBUILTINGROUP &lt;NAME&gt; (Re)Create a BUILTIN
group. Only a wellknown set of BUILTIN groups can be created
with this command. This is the list of currently recognized
group names: Administrators, Users, Guests, Power Users,
Account Operators, Server Operators, Print Operators, Backup
Operators, Replicator, RAS Servers, Pre-Windows 2000
compatible Access. This command requires a running Winbindd
with idmap allocation properly configured. The group gid
will be allocated out of the winbindd range.</p>

<p>SAM CREATELOCALGROUP &lt;NAME&gt; Create a LOCAL group
(also known as Alias). This command requires a running
Winbindd with idmap allocation properly configured. The
group gid will be allocated out of the winbindd range.</p>

<p>SAM DELETELOCALGROUP &lt;NAME&gt; Delete an existing
LOCAL group (also known as Alias).</p>

<p>SAM MAPUNIXGROUP &lt;NAME&gt; Map an existing Unix group
and make it a Domain Group, the domain group will have the
same name.</p>

<p>SAM UNMAPUNIXGROUP &lt;NAME&gt; Remove an existing group
mapping entry.</p>

<p>SAM ADDMEM &lt;GROUP&gt; &lt;MEMBER&gt; Add a member to
a Local group. The group can be specified only by name, the
member can be specified by name or SID.</p>

<p>SAM DELMEM &lt;GROUP&gt; &lt;MEMBER&gt; Remove a member
from a Local group. The group and the member must be
specified by name.</p>

<p>SAM LISTMEM &lt;GROUP&gt; List Local group members. The
group must be specified by name.</p>

<p>SAM LIST
&lt;users|groups|localgroups|builtin|workstations&gt;
[verbose] List the specified set of accounts by name. If
verbose is specified, the rid and description is also
provided for each account.</p>

<p>SAM RIGHTS LIST List all available privileges.</p>

<p>SAM RIGHTS GRANT &lt;NAME&gt; &lt;PRIVILEGE&gt; Grant
one or more privileges to a user.</p>

<p>SAM RIGHTS REVOKE &lt;NAME&gt; &lt;PRIVILEGE&gt; Revoke
one or more privileges from a user.</p>

<p>SAM SHOW &lt;NAME&gt; Show the full DOMAIN\NAME the SID
and the type for the corresponding account.</p>

<p>SAM SET HOMEDIR &lt;NAME&gt; &lt;DIRECTORY&gt; Set the
home directory for a user account.</p>

<p>SAM SET PROFILEPATH &lt;NAME&gt; &lt;PATH&gt; Set the
profile path for a user account.</p>

<p>SAM SET COMMENT &lt;NAME&gt; &lt;COMMENT&gt; Set the
comment for a user or group account.</p>

<p>SAM SET FULLNAME &lt;NAME&gt; &lt;FULL NAME&gt; Set the
full name for a user account.</p>

<p>SAM SET LOGONSCRIPT &lt;NAME&gt; &lt;SCRIPT&gt; Set the
logon script for a user account.</p>

<p>SAM SET HOMEDRIVE &lt;NAME&gt; &lt;DRIVE&gt; Set the
home drive for a user account.</p>

<p>SAM SET WORKSTATIONS &lt;NAME&gt; &lt;WORKSTATIONS&gt;
Set the workstations a user account is allowed to log in
from.</p>

<p>SAM SET DISABLE &lt;NAME&gt; Set the
&quot;disabled&quot; flag for a user account.</p>

<p>SAM SET PWNOTREQ &lt;NAME&gt; Set the &quot;password not
required&quot; flag for a user account.</p>

<p>SAM SET AUTOLOCK &lt;NAME&gt; Set the
&quot;autolock&quot; flag for a user account.</p>

<p>SAM SET PWNOEXP &lt;NAME&gt; Set the &quot;password do
not expire&quot; flag for a user account.</p>

<p>SAM SET PWDMUSTCHANGENOW &lt;NAME&gt; [yes|no] Set or
unset the &quot;password must change&quot; flag for a user
account.</p>

<p>SAM POLICY LIST List the available account policies.</p>

<p>SAM POLICY SHOW &lt;account policy&gt; Show the account
policy value.</p>

<p>SAM POLICY SET &lt;account policy&gt; &lt;value&gt; Set
a value for the account policy. Valid values can be:
&quot;forever&quot;, &quot;never&quot;, &quot;off&quot;, or
a number.</p>

<p>SAM PROVISION Only available if ldapsam:editposix is set
and winbindd is running. Properly populates the ldap tree
with the basic accounts (Administrator) and groups (Domain
Users, Domain Admins, Domain Guests) on the ldap tree.</p>

<p>IDMAP DUMP &lt;local tdb file name&gt; Dumps the
mappings contained in the local tdb file specified. This
command is useful to dump only the mappings produced by the
idmap_tdb backend.</p>

<p>IDMAP RESTORE [input file] Restore the mappings from the
specified file or stdin.</p>

<p>IDMAP SECRET &lt;DOMAIN&gt; &lt;secret&gt; Store a
secret for the specified domain, used primarily for domains
that use idmap_ldap as a backend. In this case the secret is
used as the password for the user DN used to bind to the
ldap server.</p>

<p>IDMAP DELETE [-f] [--db=&lt;DB&gt;] &lt;ID&gt; Delete a
mapping sid &lt;-&gt; gid or sid &lt;-&gt; uid from the
IDMAP database. The mapping is given by &lt;ID&gt; which may
either be a sid: S-x-..., a gid: &quot;GID number&quot; or a
uid: &quot;UID number&quot;. Use -f to delete an invalid
partial mapping &lt;ID&gt; -&gt; xx</p>

<p>Use &quot;smbcontrol all idmap ...&quot; to notify
running smbd instances. See the smbcontrol(1) manpage for
details.</p>

<p>IDMAP CHECK [-v] [-r] [-a] [-T] [-f] [-l]
[--db=&lt;DB&gt;] Check and repair the IDMAP database. If no
option is given a read only check of the database is done.
Among others an interactive or automatic repair mode may be
chosen with one of the following options:</p>

<p>-r|--repair Interactive repair mode, ask a lot of
questions.</p>

<p>-a|--auto Noninteractive repair mode, use default
answers.</p>

<p>-v|--verbose Produce more output.</p>

<p>-f|--force Try to apply changes, even if they do not
apply cleanly.</p>

<p>-T|--test Dry run, show what changes would be made but
don&rsquo;t touch anything.</p>

<p>-l|--lock Lock the database while doing the check.</p>

<p>--db &lt;DB&gt; Check the specified database.</p>

<p>It reports about the finding of the following
errors:</p>

<p>Missing reverse mapping: A record with mapping A-&gt;B
where there is no B-&gt;A. Default action in repair mode is
to &quot;fix&quot; this by adding the reverse mapping.</p>

<p>Invalid mapping: A record with mapping A-&gt;B where
B-&gt;C. Default action is to &quot;delete&quot; this
record.</p>

<p>Missing or invalid HWM: A high water mark is not at
least equal to the largest ID in the database. Default
action is to &quot;fix&quot; this by setting it to the
largest ID found +1.</p>

<p>Invalid record: Something we failed to parse. Default
action is to &quot;edit&quot; it in interactive and
&quot;delete&quot; it in automatic mode.</p>

<p>USERSHARE Starting with version 3.0.23, a Samba server
now supports the ability for non-root users to add user
defined shares to be exported using the &quot;net
usershare&quot; commands.</p>

<p>To set this up, first set up your smb.conf by adding to
the [global] section: usershare path =
/usr/local/samba/lib/usershares Next create the directory
/usr/local/samba/lib/usershares, change the owner to root
and set the group owner to the UNIX group who should have
the ability to create usershares, for example a group called
&quot;serverops&quot;. Set the permissions on
/usr/local/samba/lib/usershares to 01770. (Owner and group
all access, no access for others, plus the sticky bit, which
means that a file in that directory can be renamed or
deleted only by the owner of the file). Finally, tell smbd
how many usershares you will allow by adding to the [global]
section of smb.conf a line such as : usershare max shares =
100. To allow 100 usershare definitions. Now, members of the
UNIX group &quot;serverops&quot; can create user defined
shares on demand using the commands below.</p>

<p>The usershare commands are: net usershare add sharename
path [comment [acl] [guest_ok=[y|n]]] - to add or change a
user defined share. net usershare delete sharename - to
delete a user defined share. net usershare info [-l|--long]
[wildcard sharename] - to print info about a user defined
share. net usershare list [-l|--long] [wildcard sharename] -
to list user defined shares.</p>

<p>USERSHARE ADD sharename path [comment] [acl]
[guest_ok=[y|n]] Add or replace a new user defined share,
with name &quot;sharename&quot;.</p>

<p>&quot;path&quot; specifies the absolute pathname on the
system to be exported. Restrictions may be put on this, see
the global smb.conf parameters: &quot;usershare owner
only&quot;, &quot;usershare prefix allow list&quot;, and
&quot;usershare prefix deny list&quot;.</p>

<p>The optional &quot;comment&quot; parameter is the
comment that will appear on the share when browsed to by a
client.</p>

<p>The optional &quot;acl&quot; field specifies which users
have read and write access to the entire share. Note that
guest connections are not allowed unless the smb.conf
parameter &quot;usershare allow guests&quot; has been set.
The definition of a user defined share acl is:
&quot;user:permission&quot;, where user is a valid username
on the system and permission can be &quot;F&quot;,
&quot;R&quot;, or &quot;D&quot;. &quot;F&quot; stands for
&quot;full permissions&quot;, ie. read and write
permissions. &quot;D&quot; stands for &quot;deny&quot; for a
user, ie. prevent this user from accessing this share.
&quot;R&quot; stands for &quot;read only&quot;, ie. only
allow read access to this share (no creation of new files or
directories or writing to files).</p>

<p>The default if no &quot;acl&quot; is given is
&quot;Everyone:R&quot;, which means any authenticated user
has read-only access.</p>

<p>The optional &quot;guest_ok&quot; has the same effect as
the parameter of the same name in smb.conf, in that it
allows guest access to this user defined share. This
parameter is only allowed if the global parameter
&quot;usershare allow guests&quot; has been set to true in
the smb.conf.</p>

<p>There is no separate command to modify an existing user
defined share, just use the &quot;net usershare add
[sharename]&quot; command using the same sharename as the
one you wish to modify and specify the new options you wish.
The Samba smbd daemon notices user defined share
modifications at connect time so will see the change
immediately, there is no need to restart smbd on adding,
deleting or changing a user defined share.</p>

<p>USERSHARE DELETE sharename Deletes the user defined
share by name. The Samba smbd daemon immediately notices
this change, although it will not disconnect any users
currently connected to the deleted share.</p>

<p>USERSHARE INFO [-l|--long] [wildcard sharename] Get info
on user defined shares owned by the current user matching
the given pattern, or all users.</p>

<p>net usershare info on its own dumps out info on the user
defined shares that were created by the current user, or
restricts them to share names that match the given wildcard
pattern (&rsquo;*&rsquo; matches one or more characters,
&rsquo;?&rsquo; matches only one character). If the
&rsquo;-l&rsquo; or &rsquo;--long&rsquo; option is also
given, it prints out info on user defined shares created by
other users.</p>

<p>The information given about a share looks like: [foobar]
path=/home/jeremy comment=testme usershare_acl=Everyone:F
guest_ok=n And is a list of the current settings of the user
defined share that can be modified by the &quot;net
usershare add&quot; command.</p>

<p>USERSHARE LIST [-l|--long] wildcard sharename List all
the user defined shares owned by the current user matching
the given pattern, or all users.</p>

<p>net usershare list on its own list out the names of the
user defined shares that were created by the current user,
or restricts the list to share names that match the given
wildcard pattern (&rsquo;*&rsquo; matches one or more
characters, &rsquo;?&rsquo; matches only one character). If
the &rsquo;-l&rsquo; or &rsquo;--long&rsquo; option is also
given, it includes the names of user defined shares created
by other users.</p>

<p>CONF Starting with version 3.2.0, a Samba server can be
configured by data stored in registry. This configuration
data can be edited with the new &quot;net conf&quot;
commands.</p>

<p>The deployment of this configuration data can be
activated in two levels from the smb.conf file: Share
definitions from registry are activated by setting registry
shares to yes in the [global] section and global
configuration options are activated by setting include =
registry in the [global] section for a mixed configuration
or by setting config backend = registry in the [global]
section for a registry-only configuration. See the
smb.conf(5) manpage for details.</p>

<p>The conf commands are: net conf list - Dump the complete
configuration in smb.conf like format. net conf import -
Import configuration from file in smb.conf format. net conf
listshares - List the registry shares. net conf drop -
Delete the complete configuration from registry. net conf
showshare - Show the definition of a registry share. net
conf addshare - Create a new registry share. net conf
delshare - Delete a registry share. net conf setparm - Store
a parameter. net conf getparm - Retrieve the value of a
parameter. net conf delparm - Delete a parameter. net conf
getincludes - Show the includes of a share definition. net
conf setincludes - Set includes for a share. net conf
delincludes - Delete includes from a share definition.</p>

<p>CONF LIST Print the configuration data stored in the
registry in a smb.conf-like format to standard output.</p>

<p>CONF IMPORT [--test|-T] filename [section] This command
imports configuration from a file in smb.conf format. If a
section encountered in the input file is present in
registry, its contents is replaced. Sections of registry
configuration that have no counterpart in the input file are
not affected. If you want to delete these, you will have to
use the &quot;net conf drop&quot; or &quot;net conf
delshare&quot; commands. Optionally, a section may be
specified to restrict the effect of the import command to
that specific section. A test mode is enabled by specifying
the parameter &quot;-T&quot; on the commandline. In test
mode, no changes are made to the registry, and the resulting
configuration is printed to standard output instead.</p>

<p>CONF LISTSHARES List the names of the shares defined in
registry.</p>

<p>CONF DROP Delete the complete configuration data from
registry.</p>

<p>CONF SHOWSHARE sharename Show the definition of the
share or section specified. It is valid to specify
&quot;global&quot; as sharename to retrieve the global
configuration options from registry.</p>

<p>CONF ADDSHARE sharename path [writeable={y|N}
[guest_ok={y|N} [comment]]] Create a new share definition in
registry. The sharename and path have to be given. The share
name may not be &quot;global&quot;. Optionally, values for
the very common options &quot;writeable&quot;, &quot;guest
ok&quot; and a &quot;comment&quot; may be specified. The
same result may be obtained by a sequence of &quot;net conf
setparm&quot; commands.</p>

<p>CONF DELSHARE sharename Delete a share definition from
registry.</p>

<p>CONF SETPARM section parameter value Store a parameter
in registry. The section may be global or a sharename. The
section is created if it does not exist yet.</p>

<p>CONF GETPARM section parameter Show a parameter stored
in registry.</p>

<p>CONF DELPARM section parameter Delete a parameter stored
in registry.</p>

<p>CONF GETINCLUDES section Get the list of includes for
the provided section (global or share).</p>

<p>Note that due to the nature of the registry database and
the nature of include directives, the includes need special
treatment: Parameters are stored in registry by the
parameter name as valuename, so there is only ever one
instance of a parameter per share. Also, a specific order
like in a text file is not guaranteed. For all real
parameters, this is perfectly ok, but the include directive
is rather a meta parameter, for which, in the smb.conf text
file, the place where it is specified between the other
parameters is very important. This can not be achieved by
the simple registry smbconf data model, so there is one
ordered list of includes per share, and this list is
evaluated after all the parameters of the share.</p>

<p>Further note that currently, only files can be included
from registry configuration. In the future, there will be
the ability to include configuration data from other
registry keys.</p>

<p>CONF SETINCLUDES section [filename]+ Set the list of
includes for the provided section (global or share) to the
given list of one or more filenames. The filenames may
contain the usual smb.conf macros like %I.</p>

<p>CONF DELINCLUDES section Delete the list of includes
from the provided section (global or share).</p>

<p>REGISTRY Manipulate Samba&rsquo;s registry.</p>

<p>The registry commands are: net registry enumerate -
Enumerate registry keys and values. net registry
enumerate_recursive - Enumerate registry key and its
subkeys. net registry createkey - Create a new registry key.
net registry deletekey - Delete a registry key. net registry
deletekey_recursive - Delete a registry key with subkeys.
net registry getvalue - Print a registry value. net registry
getvalueraw - Print a registry value (raw format). net
registry setvalue - Set a new registry value. net registry
increment - Increment a DWORD registry value under a lock.
net registry deletevalue - Delete a registry value. net
registry getsd - Get security descriptor. net registry
getsd_sdd1 - Get security descriptor in sddl format. net
registry setsd_sdd1 - Set security descriptor from sddl
format string. net registry import - Import a registration
entries (.reg) file. net registry export - Export a
registration entries (.reg) file. net registry convert -
Convert a registration entries (.reg) file.</p>

<p>REGISTRY ENUMERATE key Enumerate subkeys and values of
key.</p>

<p>REGISTRY ENUMERATE_RECURSIVE key Enumerate values of key
and its subkeys.</p>

<p>REGISTRY CREATEKEY key Create a new key if not yet
existing.</p>

<p>REGISTRY DELETEKEY key Delete the given key and its
values from the registry, if it has no subkeys.</p>

<p>REGISTRY DELETEKEY_RECURSIVE key Delete the given key
and all of its subkeys and values from the registry.</p>

<p>REGISTRY GETVALUE key name Output type and actual value
of the value name of the given key.</p>

<p>REGISTRY GETVALUERAW key name Output the actual value of
the value name of the given key.</p>

<p>REGISTRY SETVALUE key name type value ... Set the value
name of an existing key. type may be one of sz, multi_sz or
dword. In case of multi_szvalue may be given multiple
times.</p>

<p>REGISTRY INCREMENT key name [inc] Increment the DWORD
value name of key by inc while holding a g_lock. inc
defaults to 1.</p>

<p>REGISTRY DELETEVALUE key name Delete the value name of
the given key.</p>

<p>REGISTRY GETSD key Get the security descriptor of the
given key.</p>

<p>REGISTRY GETSD_SDDL key Get the security descriptor of
the given key as a Security Descriptor Definition Language
(SDDL) string.</p>

<p>REGISTRY SETSD_SDDL keysd Set the security descriptor of
the given key from a Security Descriptor Definition Language
(SDDL) string sd.</p>

<p>REGISTRY IMPORT file[opt] Import a registration entries
(.reg) file.</p>

<p>REGISTRY EXPORT keyfile[opt] Export a key to a
registration entries (.reg) file.</p>

<p>REGISTRY CONVERT in out [[inopt] outopt] Convert a
registration entries (.reg) file in.</p>

<p>EVENTLOG Starting with version 3.4.0 net can read, dump,
import and export native win32 eventlog files (usually
*.evt). evt files are used by the native Windows eventviewer
tools.</p>

<p>The import and export of evt files can only succeed when
eventlog list is used in smb.conf file. See the smb.conf(5)
manpage for details.</p>

<p>The eventlog commands are: net eventlog dump - Dump a
eventlog *.evt file on the screen. net eventlog import -
Import a eventlog *.evt into the samba internal tdb based
representation of eventlogs. net eventlog export - Export
the samba internal tdb based representation of eventlogs
into an eventlog *.evt file.</p>

<p>EVENTLOG DUMP filename Prints a eventlog *.evt file to
standard output.</p>

<p>EVENTLOG IMPORT filename eventlog Imports a eventlog
*.evt file defined by filename into the samba internal tdb
representation of eventlog defined by eventlog. eventlog
needs to part of the eventlog list defined in smb.conf. See
the smb.conf(5) manpage for details.</p>

<p>EVENTLOG EXPORT filename eventlog Exports the samba
internal tdb representation of eventlog defined by eventlog
to a eventlog *.evt file defined by filename. eventlog needs
to part of the eventlog list defined in smb.conf. See the
smb.conf(5) manpage for details.</p>

<p>DOM Starting with version 3.2.0 Samba has support for
remote join and unjoin APIs, both client and server-side.
Windows supports remote join capabilities since Windows
2000.</p>

<p>In order for Samba to be joined or unjoined remotely an
account must be used that is either member of the Domain
Admins group, a member of the local Administrators group or
a user that is granted the SeMachineAccountPrivilege
privilege.</p>

<p>The client side support for remote join is implemented
in the net dom commands which are: net dom join - Join a
remote computer into a domain. net dom unjoin - Unjoin a
remote computer from a domain. net dom renamecomputer -
Renames a remote computer joined to a domain.</p>

<p>DOM JOIN domain=DOMAIN ou=OU account=ACCOUNT
password=PASSWORD reboot Joins a computer into a domain.
This command supports the following additional
parameters:</p>

<p>&middot; DOMAIN can be a NetBIOS domain name (also known
as short domain name) or a DNS domain name for Active
Directory Domains. As in Windows, it is also possible to
control which Domain Controller to use. This can be achieved
by appending the DC name using the separator character.
Example: MYDOMDC. The DOMAIN parameter cannot be NULL.</p>

<p>&middot; OU can be set to a RFC 1779 LDAP DN, like
ou=mymachines,cn=Users,dc=example,dc=com in order to create
the machine account in a non-default LDAP container. This
optional parameter is only supported when joining Active
Directory Domains.</p>

<p>&middot; ACCOUNT defines a domain account that will be
used to join the machine to the domain. This domain account
needs to have sufficient privileges to join machines.</p>

<p>&middot; PASSWORD defines the password for the domain
account defined with ACCOUNT.</p>

<p>&middot; REBOOT is an optional parameter that can be set
to reboot the remote machine after successful join to the
domain.</p>

<p>Note that you also need to use standard net parameters
to connect and authenticate to the remote machine that you
want to join. These additional parameters include: -S
computer and -U user.</p>

<p>Example: net dom join -S xp -U XP\administrator%secret
domain=MYDOM account=MYDOM\administrator password=topsecret
reboot.</p>

<p>This example would connect to a computer named XP as the
local administrator using password secret, and join the
computer into a domain called MYDOM using the MYDOM domain
administrator account and password topsecret. After
successful join, the computer would reboot.</p>

<p>DOM UNJOIN account=ACCOUNT password=PASSWORD reboot
Unjoins a computer from a domain. This command supports the
following additional parameters:</p>

<p>&middot; ACCOUNT defines a domain account that will be
used to unjoin the machine from the domain. This domain
account needs to have sufficient privileges to unjoin
machines.</p>

<p>&middot; PASSWORD defines the password for the domain
account defined with ACCOUNT.</p>

<p>&middot; REBOOT is an optional parameter that can be set
to reboot the remote machine after successful unjoin from
the domain.</p>

<p>Note that you also need to use standard net parameters
to connect and authenticate to the remote machine that you
want to unjoin. These additional parameters include: -S
computer and -U user.</p>

<p>Example: net dom unjoin -S xp -U XP\administrator%secret
account=MYDOM\administrator password=topsecret reboot.</p>

<p>This example would connect to a computer named XP as the
local administrator using password secret, and unjoin the
computer from the domain using the MYDOM domain
administrator account and password topsecret. After
successful unjoin, the computer would reboot.</p>

<p>DOM RENAMECOMPUTER newname=NEWNAME account=ACCOUNT
password=PASSWORD reboot Renames a computer that is joined
to a domain. This command supports the following additional
parameters:</p>

<p>&middot; NEWNAME defines the new name of the machine in
the domain.</p>

<p>&middot; ACCOUNT defines a domain account that will be
used to rename the machine in the domain. This domain
account needs to have sufficient privileges to rename
machines.</p>

<p>&middot; PASSWORD defines the password for the domain
account defined with ACCOUNT.</p>

<p>&middot; REBOOT is an optional parameter that can be set
to reboot the remote machine after successful rename in the
domain.</p>

<p>Note that you also need to use standard net parameters
to connect and authenticate to the remote machine that you
want to rename in the domain. These additional parameters
include: -S computer and -U user.</p>

<p>Example: net dom renamecomputer -S xp -U
XP\administrator%secret newname=XPNEW
account=MYDOM\administrator password=topsecret reboot.</p>

<p>This example would connect to a computer named XP as the
local administrator using password secret, and rename the
joined computer to XPNEW using the MYDOM domain
administrator account and password topsecret. After
successful rename, the computer would reboot.</p>

<p>G_LOCK Manage global locks.</p>

<p>G_LOCK DO lockname timeout command Execute a shell
command under a global lock. This might be useful to define
the order in which several shell commands will be executed.
The locking information is stored in a file called
g_lock.tdb. In setups with CTDB running, the locking
information will be available on all cluster nodes.</p>

<p>&middot; LOCKNAME defines the name of the global
lock.</p>

<p>&middot; TIMEOUT defines the timeout.</p>

<p>&middot; COMMAND defines the shell command to
execute.</p>

<p>G_LOCK LOCKS Print a list of all currently existing
locknames.</p>

<p>G_LOCK DUMP lockname Dump the locking table of a certain
global lock.</p>

<p>HELP [COMMAND] Gives usage information for the specified
command.</p>

<p>VERSION This man page is complete for version 3 of the
Samba suite.</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>The net manpage was written by Jelmer Vernooij.</p>

<p>Samba 3.6 04/11/2016 NET(8)</p>
<hr>
</body>
</html>
