<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:31 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>pam_ldap(5) pam_ldap(5)</p>

<p>NAME pam_ldap - LDAP pluggable authentication module</p>

<p>DESCRIPTION The pam_ldap module is a Pluggable
Authentication Module (PAM) which provides for
authentication, authorization and password changing against
LDAP servers.</p>

<p>Features of the PADL pam_ldap module include support for
transport layer security, SASL authentication, directory
server-enforced password policy, and host- and group- based
logon authorization.</p>

<p>The present version of pam_ldap supports AIX 5L, FreeBSD
3.x and above, HP-UX 11i, IRIX 6.x, Linux, Mac OS X 10.2 and
above, and Solaris 2.6 and above. Many vendors provide their
own LDAP authentication providers, often also called
pam_ldap. This manual page applies to the PADL pam_ldap
module only. If you are using a vendor provided module,
consult the relevant documentation instead.</p>

<p>When authenticating or authorizing a user, pam_ldap
first maps the users login name to a distinguished name by
searching the directory server. This must be possible using
the local systems identity, speci- fied in pam_ldap.conf.
(Note that presently only simple authentication is supported
for authenticating in this initial step.)</p>

<p>To authenticate a user, pam_ldap attempts to bind to the
directory server using the distinguished name of the user
(retrieved previously). Both simple and SASL authentication
mechanisms are supported; in the former case, one should
take care to use transport security to prevent the users
password being transmitted in the clear.</p>

<p>A variety of authorization primitives are supported by
pam_ldap, dis- cussed in the configuration section
below.</p>

<p>Finally, pam_ldap supports a number of password change
protocols used by directory servers from various vendors.
(Some directory servers sup- port more than one password
change protocol.)</p>

<p>Whilst pam_ldap is generally configured in the system
LDAP naming con- figuration file (pam_ldap.conf), some
options can be configured in the PAM configuration file, to
allow for per-service granularity. These options include the
path to the LDAP naming configuration file to use, so in
effect all options can be configured on a per-service basis.
Options are listed below under PAM Configuration.</p>

<p>CONFIGURATION pam_ldap stores its configuration in the
pam_ldap.conf file. (It should be noted that some LDAP
client libraries, such as OpenLDAP, also use a configuration
file of the same name. pam_ldap supports many of the same
configuration file options as OpenLDAP, but it adds several
that are specific to the functionality it provides. It is
not guaranteed that pam_ldap will continue to match the
configuration file semantics of OpenLDAP. You may wish to
use different files.)</p>

<p>Configuration file options consist of a keyword followed
by a space and any arguments. The following options are
supported by both pam_ldap and the PADL nss_ldap module:</p>

<p>host &lt;name:port ...&gt; Specifies the name(s) or IP
address(es) of the LDAP server(s) to connect to. In the case
that nss_ldap is used for host name res- olution, each
server should be specified as an IP address or name that can
be resolved without using LDAP. Multiple servers may be
specified, each separated by a space. The failover time
depends on whether the LDAP client library supports
configurable network or connect timeouts (see bind_timelimit
below).</p>

<p>base &lt;base&gt; Specifies the default base
distinguished name (DN) to use for searches.</p>

<p>uri &lt;ldap[is]://[name[:port]] ...&gt; For LDAP client
libraries that support it, specifies the URI(s) of the LDAP
server(s) to connect to. The URI scheme may be ldap, ldapi,
or ldaps, specifying LDAP over TCP, IPC and SSL respec-
tively. If applicable, a port number can be specified; the
default port number for the selected protocol is used if
omit- ted. This option takes precedence over the host
option; it is not possible to combine the two.</p>

<p>ldap_version &lt;version&gt; Specifies the version of
the LDAP protocol to use. Presently version must be 2 or 3.
The default is to use the maximum ver- sion supported by the
client library.</p>

<p>binddn &lt;binddn&gt; Specifies the distinguished name
with which to bind to the directory server(s). This option
is optional; the default is to bind anonymously.</p>

<p>bindpw &lt;bindpw&gt; Specifies the cleartext
credentials with which to bind. This option is only
applicable when used with binddn above. The default is no
credential (anonymous bind). When binding to the directory
using SASL or other authentication mechanisms apart from
simple binds, this option is not used.</p>

<p>rootbinddn &lt;binddn&gt; This option has the same
syntax and effect as the binddn option above, except it
applies when the effective user ID is zero. If not
specified, then the identity specified in binddn is used
instead. Because the configuration file may be readable by
many users, the root bind DN credentials are stored in the
pam_ldap.secret file instead. This file is usually in the
same directory as the configuration file.</p>

<p>port &lt;port&gt; Specifies the port to connect to; this
option is used with the host option, and is ignored with the
uri option.</p>

<p>scope &lt;sub|one|base&gt; Specifies the search scope
(subtree, one level or base object). The default scope is
subtree; base scope is almost never useful for nameservice
lookups.</p>

<p>deref &lt;never|searching|finding|always&gt; Specifies
the policy for dereferencing aliases. The default pol- icy
is to never dereference aliases.</p>

<p>timelimit &lt;timelimit&gt; Specifies the time limit (in
seconds) to use when performing searches. A value of zero
(0), which is the default, is to wait indefinitely for
searches to be completed.</p>

<p>bind_timelimit &lt;timelimit&gt; Specifies the time
limit (in seconds) to use when connecting to the directory
server. This is distinct from the time limit spec- ified in
timelimit and affects the initial server connection only.
(Server connections are otherwise cached.) Only some LDAP
client libraries have the underlying functionality necessary
to support this option. The default bind timelimit is 30
seconds.</p>

<p>referrals &lt;yes|no&gt; Specifies whether automatic
referral chasing should be enabled. The default behaviour is
specifed by the LDAP client library.</p>

<p>restart &lt;yes|no&gt; Specifies whether the LDAP client
library should restart the select(2) system call when
interrupted. This feature is not sup- ported by all client
libraries.</p>

<p>logdir &lt;directory&gt; Specifies the directory used
for logging by the LDAP client library. This feature is not
supported by all client libraries.</p>

<p>debug &lt;level&gt; Specifies the debug level used for
logging by the LDAP client library. This feature is not
supported by all client libraries, and does not apply to the
nss_ldap and pam_ldap modules them- selves (debugging, if
any, is configured separately and usually at compile
time).</p>

<p>ssl &lt;on|off|start_tls&gt; Specifies whether to use
SSL/TLS or not (the default is not to). If start_tls is
specified then StartTLS is used rather than raw LDAP over
SSL. Not all LDAP client libraries support both SSL and
StartTLS, and all related configuration options.</p>

<p>sslpath &lt;cert7_path&gt; For the Netscape and Mozilla
LDAP client libraries only, this specifies the path to the
X.509 certificate database.</p>

<p>tls_checkpeer &lt;yes|no&gt; Specifies whether to
require and verify the server certificate or not, when using
SSL/TLS with the OpenLDAP client library. The default is to
use the default behaviour of the client library; for
OpenLDAP 2.0 and earlier it is &quot;no&quot;, for OpenLDAP
2.1 and later it is &quot;yes&quot;. At least one of
tls_cacertdir and tls_cacertfile is required if peer
verification is enabled.</p>

<p>tls_cacertdir &lt;certificate_dir&gt; Specifies the
directory containing X.509 certificates for peer
authentication.</p>

<p>tls_cacertfile &lt;certificate_file&gt; Specifies the
path to the X.509 certificate for peer authentica- tion.</p>

<p>tls_randfile &lt;entropy_file&gt; Specifies the path to
an entropy source.</p>

<p>tls_ciphers &lt;ciphers&gt; Specifies the ciphers to use
for TLS. See your TLS implementa- tions documentation for
further information.</p>

<p>tls_cert &lt;certificate_file&gt; Specifies the path to
the file containing the local certificate for client TLS
authentication.</p>

<p>tls_key &lt;key_file&gt; Specifies the path to the file
containing the private key for client TLS
authentication.</p>

<p>The following configuration options apply to pam_ldap
only:</p>

<p>pam_login_attribute &lt;attribute&gt; Specifies the
attribute to use when constructing the attribute value
assertion for retrieving a directory entry for a users login
name. The default is &quot;uid&quot;, for compatibility with
RFC 2307.</p>

<p>pam_filter &lt;filter&gt; Specifies a filter to use when
retrieving user information. The user entry must match the
attribute value assertion of
(pam_login_attribute=login_name) as well as any filter
specified here. There is no default for this option.</p>

<p>pam_lookup_policy &lt;yes|no&gt; Specifies whether to
search the root DSE for password policy. The default is
&quot;no&quot;.</p>

<p>pam_check_host_attr &lt;yes|no&gt; Specifies whether the
&quot;host&quot; attribute should be checked for logon
authorization (&quot;account&quot; in the PAM stack). The
default is not to. If set to &quot;yes&quot; and a user has
no value for the &quot;host&quot; attribute, then the user
will be unable to login.</p>

<p>pam_check_service_attr &lt;yes|no&gt; Specifies whether
the &quot;authorizedService&quot; attribute should be
checked for logon authorization (&quot;account&quot; in the
PAM stack). The default is not to. If set to &quot;yes&quot;
and a user has no value for the
&quot;authorizedService&quot; attribute, then the user will
be unable to login.</p>

<p>pam_groupdn &lt;groupdn&gt; Specifies the distinguished
name of a group to which a user must belong for logon
authorization to succeed. pam_member_attribute
&lt;attribute&gt; Specifies the attribute to use when
testing a users membership of a group specified in the
pam_groupdn option.</p>

<p>pam_nsrole &lt;role&gt; Specifies a value which the
users entrys &quot;nsRole&quot; attribute must match for
logon authorization to succeed.</p>

<p>pam_min_uid &lt;uid&gt; If specified, a user must have a
POSIX user ID of at least uid in order for logon
authorization to succeed.</p>

<p>pam_max_uid &lt;uid&gt; If specified, a user must have a
POSIX user ID of no greater than uid in order for logon
authorization to succeed.</p>

<p>pam_template_login_attribute &lt;attribute&gt; When
using template users (not supported by all PAM applica-
tions), specifies the attribute containing the users actual
login name. The pam_ldap module will set PAM_USER to the
value of this attribute if present in the user s entry,
otherwise it defaults to the user specified in the
pam_template_login option.</p>

<p>pam_template_login &lt;user&gt; When using template
users (not supported by all PAM applica- tions), pam_ldap
will set PAM_USER to the value of this option if the user
does not contain a template login attribute.</p>

<p>pam_password &lt;protocol&gt; Specifies the password
change protocol to use. The following protocols are
supported:</p>

<p>clear Change password using an LDAPModify request,
replacing the userPassword value with the new cleartext
password.</p>

<p>clear_remove_old Change password using an LDAPModify
request, first remov- ing the userPassword value containing
the old cleartext password, and then adding the userPassword
value with the new cleartext password. This protocol is
necessary for use with Novell NDS and IBM RACF.</p>

<p>crypt Change password using an LDAPModify request, first
gener- ating a one way hash of the new password using
crypt(3) and then replacing userPassword value with the new
hashed password.</p>

<p>md5 Change password using an LDAPModify request, first
gener- ating a one way hash of the new password using MD5
and then replacing userPassword value with the new hashed
password.</p>

<p>nds This is an alias for clear_remove_old.</p>

<p>racf This is an alias for clear_remove_old.</p>

<p>ad Change password using an LDAPModify request, using
the Active Directory Services Interface (ADSI) password
change protocol.</p>

<p>exop Change password using the RFC 3062 password modify
extended operation (only the new password is sent).</p>

<p>exop_send_old Change password using the RFC 3062
password modify extended operation (both the old and new
passwords are sent).</p>

<p>pam_password_prohibit_message &lt;message&gt; Specifies
a message to send to users indicating that passwords cannot
be changed. This could be used to redirect users to another
means of changing passwords.</p>

<p>pam_sasl_mech &lt;mechanism&gt; Specifies the SASL
mechanism to use for PAM authentication. This requires SASL
libraries be installed. Support for this function- ality
presently experimental and does not support password pol-
icy controls.</p>

<p>PAM CONFIGURATION It is possible to configure some
aspects of pam_ldap on a per-service basis, in the PAM
configuration file (this is usually /etc/pam.conf; for PAM
implementations based on Linux-PAM, per-service files in
/etc/pam.d are also supported).</p>

<p>The following options may be specified as arguments to
the pam_ldap module:</p>

<p>config=&lt;path&gt; Specifies that pam_ldap should use
the configuration file in path instead of pam_ldap.conf to
retrieve its global configura- tion. Configuring multiple
instances of pam_ldap for the same service with different
configuration files is not supported, because the
configuration information is cached.</p>

<p>use_first_pass Specifies that pam_ldap should always use
the first password provided in the authentication stack.</p>

<p>try_first_pass Specifies that pam_ldap should first try
the first password pro- vided in the authentication stack,
and then prompt the user for their LDAP password if
authentication fails.</p>

<p>ignore_unknown_user Specifies that pam_ldap should
return PAM_IGNORE for users that are not present in LDAP.
This forces the PAM framework to ignore the pam_ldap module.
This option is useful where certain accounts do not reside
in LDAP, but one wishes to make pam_ldap
&quot;required&quot; for all accounts in the directory. In
this case one would make both pam_ldap and the other module
(for example, pam_unix) &quot;required&quot; and enable the
ignore_unknown_user option. (For this to work, the other
module must behave similarly for users in the directory; in
the case of a module such as pam_unix that uses the system
accounts database, using nss_ldap(5) should be sufficient to
meet this requirement.)</p>

<p>ignore_authinfo_unavail Specifies that pam_ldap should
return PAM_IGNORE if it cannot contact the LDAP server. This
option forces the PAM framework to ignore the pam_ldap
module in this case.</p>

<p>no_warn Specifies that warning messages should not be
propagated to the PAM application.</p>

<p>use_authtok Analogous to use_first_pass for password
changing only.</p>

<p>debug This option is recognized by pam_ldap but is
presently ignored.</p>

<p>AUTHOR The pam_ldap module was developed by PADL
Software Pty Ltd (www.padl.com).</p>

<p>FILES /etc/pam_ldap.conf, /etc/pam_ldap.secret,
/etc/pam.conf</p>

<p>SEE ALSO pam(8)</p>

<p>pam_ldap(5)</p>
<hr>
</body>
</html>
