<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:42:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TRAP(1P) POSIX Programmer s Manual TRAP(1P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME trap - trap signals</p>

<p>SYNOPSIS trap [action condition ...]</p>

<p>DESCRIPTION If action is, the shell shall reset each
condition to the default value. If action is null (
&quot;&quot; ), the shell shall ignore each specified
condition if it arises. Otherwise, the argument action shall
be read and executed by the shell when one of the
corresponding conditions arises. The action of trap shall
override a previous action (either default action or one
explicitly set). The value of &quot;$?&quot; after the trap
action completes shall be the value it had before trap was
invoked.</p>

<p>The condition can be EXIT, 0 (equivalent to EXIT), or a
signal speci- fied using a symbolic name, without the SIG
prefix, as listed in the tables of signal names in the
&lt;signal.h&gt; header defined in the Base Definitions
volume of IEEE Std 1003.1-2001, Chapter 13, Headers; for
example, HUP, INT, QUIT, TERM. Implementations may permit
names with the SIG prefix or ignore case in signal names as
an extension. Setting a trap for SIGKILL or SIGSTOP produces
undefined results.</p>

<p>The environment in which the shell executes a trap on
EXIT shall be identical to the environment immediately after
the last command exe- cuted before the trap on EXIT was
taken.</p>

<p>Each time trap is invoked, the action argument shall be
processed in a manner equivalent to:</p>

<p>eval action</p>

<p>Signals that were ignored on entry to a non-interactive
shell cannot be trapped or reset, although no error need be
reported when attempting to do so. An interactive shell may
reset or catch signals ignored on entry. Traps shall remain
in place for a given shell until explicitly changed with
another trap command.</p>

<p>When a subshell is entered, traps that are not being
ignored are set to the default actions. This does not imply
that the trap command cannot be used within the subshell to
set new traps.</p>

<p>The trap command with no arguments shall write to
standard output a list of commands associated with each
condition. The format shall be:</p>

<p>&quot;trap -- %s %s ..n&quot;, &lt;action&gt;,
&lt;condition&gt; ...</p>

<p>The shell shall format the output, including the proper
use of quoting, so that it is suitable for reinput to the
shell as commands that achieve the same trapping results.
For example:</p>

<p>save_traps=$(trap) ... eval &quot;$save_traps&quot;</p>

<p>XSI-conformant systems also allow numeric signal numbers
for the condi- tions corresponding to the following signal
names:</p>

<p>Signal Number Signal Name 1 SIGHUP 2 SIGINT 3 SIGQUIT 6
SIGABRT 9 SIGKILL 14 SIGALRM 15 SIGTERM</p>

<p>The trap special built-in shall conform to the Base
Definitions volume of IEEE Std 1003.1-2001, Section 12.2,
Utility Syntax Guidelines.</p>

<p>OPTIONS None.</p>

<p>OPERANDS See the DESCRIPTION.</p>

<p>STDIN Not used.</p>

<p>INPUT FILES None.</p>

<p>ENVIRONMENT VARIABLES None.</p>

<p>ASYNCHRONOUS EVENTS Default.</p>

<p>STDOUT See the DESCRIPTION.</p>

<p>STDERR The standard error shall be used only for
diagnostic messages.</p>

<p>OUTPUT FILES None.</p>

<p>EXTENDED DESCRIPTION None.</p>

<p>EXIT STATUS If the trap name or number is invalid, a
non-zero exit status shall be returned; otherwise, zero
shall be returned. For both interactive and non-interactive
shells, invalid signal names or numbers shall not be
considered a syntax error and do not cause the shell to
abort.</p>

<p>CONSEQUENCES OF ERRORS Default.</p>

<p>The following sections are informative.</p>

<p>APPLICATION USAGE None.</p>

<p>EXAMPLES Write out a list of all traps and actions:</p>

<p>trap</p>

<p>Set a trap so the logout utility in the directory
referred to by the HOME environment variable executes when
the shell terminates:</p>

<p>trap$HOME/logoutEXIT</p>

<p>or:</p>

<p>trap$HOME/logout0</p>

<p>Unset traps on INT, QUIT, TERM, and EXIT:</p>

<p>trap - INT QUIT TERM EXIT</p>

<p>RATIONALE Implementations may permit lowercase signal
names as an extension. Implementations may also accept the
names with the SIG prefix; no known historical shell does
so. The trap and kill utilities in this volume of IEEE Std
1003.1-2001 are now consistent in their omission of the SIG
prefix for signal names. Some kill implementations do not
allow the prefix, and kill -l lists the signals without
prefixes.</p>

<p>Trapping SIGKILL or SIGSTOP is syntactically accepted by
some histori- cal implementations, but it has no effect.
Portable POSIX applications cannot attempt to trap these
signals.</p>

<p>The output format is not historical practice. Since the
output of his- torical trap commands is not portable
(because numeric signal values are not portable) and had to
change to become so, an opportunity was taken to format the
output in a way that a shell script could use to save and
then later reuse a trap if it wanted.</p>

<p>The KornShell uses an ERR trap that is triggered
whenever set -e would cause an exit. This is allowable as an
extension, but was not mandated, as other shells have not
used it.</p>

<p>The text about the environment for the EXIT trap
invalidates the behav- ior of some historical versions of
interactive shells which, for exam- ple, close the standard
input before executing a trap on 0. For exam- ple, in some
historical interactive shell sessions the following trap on
0 would always print &quot;--&quot; :</p>

<p>trapread foo; echo &quot;-$foo-&quot;0</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO Special Built-In Utilities</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 TRAP(1P)</p>
<hr>
</body>
</html>
