<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:36:15 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>stopping(7) stopping(7)</p>

<p>NAME stopping - event signalling that a job is
stopping</p>

<p>SYNOPSIS stopping JOB=JOB INSTANCE=INSTANCE
RESULT=RESULT [PROCESS=PROCESS] [EXIT_STATUS=STATUS]
[EXIT_SIGNAL=SIGNAL] [ENV]...</p>

<p>DESCRIPTION The stopping event is generated by the
Upstart init(8) daemon when an instance of a job begins
stopping. The JOB environment variable con- tains the job
name, and the INSTANCE environment variable contains the
instance name which will be empty for single-instance
jobs.</p>

<p>If the job is stopping normally, the RESULT environment
variable will be ok, otherwise if the job is stopping
because it has failed it will be failed.</p>

<p>When the job has failed, the process that failed will be
given in the PROCESS environment variable. This may be
pre-start, post-start, main, pre-stop or post-stop; it may
also be the special value respawn to indicate that the job
is stopping because it hit the respawn limit.</p>

<p>Finally in the case of a failed job, one of either
EXIT_STATUS or EXIT_SIGNAL may be given to indicate the
cause of the stop. Either EXIT_STATUS will contain the exit
status code of the process, or EXIT_SIGNAL will contain the
name of the signal that the process received. The normal
exit job configuration stanza can be used to pre- vent
particular exit status values or signals resulting in a
failed job, see init(5) for more information.</p>

<p>If neither EXIT_STATUS or EXIT_SIGNAL is given for a
failed process, it is because the process failed to spawn
(for example, file not found). See the system logs for the
error.</p>

<p>init(8) will wait for all services started by this event
to be running, all tasks started by this event to have
finished and all jobs stopped by this event to be stopped
before allowing the job to continue stop- ping.</p>

<p>This allows jobs to depend on other jobs, safely
stopping themselves before their dependency goes away. This
event is typically combined with the started(7) event by
services.</p>

<p>Job configuration files may use the export stanza to
export environment variables from their own environment into
the stopping event. See init(5) for more details.</p>

<p>EXAMPLE A service that wishes to depend on another
service might use:</p>

<p>start on started apache stop on stopping apache</p>

<p>A task that must be run before another task or service
is stopped might use:</p>

<p>start on stopping postgresql RESULT=ok</p>

<p>SEE ALSO starting(7) started(7) stopped(7) init(5)</p>

<p>Upstart 2009-07-09 stopping(7)</p>
<hr>
</body>
</html>
