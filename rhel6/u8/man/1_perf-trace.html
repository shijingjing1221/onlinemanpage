<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:27:24 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERF-TRACE(1) perf Manual PERF-TRACE(1)</p>

<p>NAME perf-trace - strace inspired tool</p>

<p>SYNOPSIS perf trace perf trace record</p>

<p>DESCRIPTION This command will show the events associated
with the target, initially syscalls, but other system events
like pagefaults, task lifetime events, scheduling events,
etc.</p>

<p>This is a live mode tool in addition to working with
perf.data files like the other perf tools. Files can be
generated using the perf record command but the session
needs to include the raw_syscalls events (-e syscalls:*).
Alternatively, perf trace record can be used as a shortcut
to automatically include the raw_syscalls events when
writing events to a file.</p>

<p>The following options apply to perf trace; options to
perf trace record are found in the perf record man page.</p>

<p>OPTIONS -a, --all-cpus System-wide collection from all
CPUs.</p>

<p>-e, --expr List of events to show, currently only
syscall names. Prefixing with ! shows all syscalls but the
ones specified. You may need to escape it.</p>

<p>-o, --output= Output file name.</p>

<p>-p, --pid= Record events on existing process ID (comma
separated list).</p>

<p>-t, --tid= Record events on existing thread ID (comma
separated list).</p>

<p>-u, --uid= Record events in threads owned by uid. Name
or number.</p>

<p>--filter-pids= Filter out events for these pids and for
trace itself (comma separated list).</p>

<p>-v, --verbose= Verbosity level.</p>

<p>-i, --no-inherit Child tasks do not inherit
counters.</p>

<p>-m, --mmap-pages= Number of mmap data pages (must be a
power of two) or size specification with appended unit
character - B/K/M/G. The size is rounded up to have nearest
pages power of two value.</p>

<p>-C, --cpu Collect samples only on the list of CPUs
provided. Multiple CPUs can be provided as a comma-separated
list with no space: 0,1. Ranges of CPUs are specified with
-: 0-2. In per-thread mode with inheritance mode on
(default), Events are captured only when the thread executes
on the designated CPUs. Default is to monitor all CPUs.</p>

<p>--duration: Show only events that had a duration greater
than N.M ms.</p>

<p>--sched: Accrue thread runtime and provide a summary at
the end of the session.</p>

<p>-i --input Process events from a given perf data
file.</p>

<p>-T --time Print full timestamp rather time relative to
first sample.</p>

<p>--comm Show process COMM right beside its ID, on by
default, disable with --no-comm.</p>

<p>-s, --summary Show only a summary of syscalls by thread
with min, max, and average times (in msec) and relative
stddev.</p>

<p>-S, --with-summary Show all syscalls followed by a
summary by thread with min, max, and average times (in msec)
and relative stddev.</p>

<p>--tool_stats Show tool stats such as number of times
fdpathname was discovered thru hooking the open syscall
return + vfs_getname or via reading /proc/pid/fd, etc.</p>

<p>-F=[all|min|maj], --pf=[all|min|maj] Trace pagefaults.
Optionally, you can specify whether you want minor, major or
all pagefaults. Default value is maj.</p>

<p>--syscalls Trace system calls. This options is enabled
by default.</p>

<p>--event Trace other events, see perf list for a complete
list.</p>

<p>PAGEFAULTS When tracing pagefaults, the format of the
trace is as follows:</p>

<p>&lt;min|maj&gt;fault
[&lt;ip.symbol&gt;+&lt;ip.offset&gt;]
&lt;addr.dso@addr.offset[1]&gt; (&lt;map type&gt;&lt;addr
level&gt;).</p>

<p>&middot; min/maj indicates whether fault event is minor
or major;</p>

<p>&middot; ip.symbol shows symbol for instruction pointer
(the code that generated the fault); if no debug symbols
available, perf trace will print raw IP;</p>

<p>&middot; addr.dso shows DSO for the faulted address;</p>

<p>&middot; map type is either d for non-executable maps or
x for executable maps;</p>

<p>&middot; addr level is either k for kernel dso or . for
user dso.</p>

<p>For symbols resolution you may need to install debugging
symbols.</p>

<p>Please be aware that duration is currently always 0 and
doesnt reflect actual time it took for fault to be
handled!</p>

<p>When --verbose specified, perf trace tries to print all
available information for both IP and fault address in the
form of dso@symbol[2]+offset.</p>

<p>EXAMPLES Trace only major pagefaults:</p>

<p>$ perf trace --no-syscalls -F</p>

<p>Trace syscalls, major and minor pagefaults:</p>

<p>$ perf trace -F all</p>

<p>1416.547 ( 0.000 ms): python/20235 majfault
[CRYPTO_push_info_+0x0] =&gt;
/lib/x86_64-linux-gnu/libcrypto.so.1.0.0@0x61be0 (x.)</p>

<p>As you can see, there was major pagefault in python
process, from CRYPTO_push_info_ routine which faulted
somewhere in libcrypto.so.</p>

<p>SEE ALSO perf-record(1), perf-script(1)</p>

<p>NOTES 1. addr.dso@addr.offset
mailto:addr.dso@addr.offset</p>

<p>2. dso@symbol mailto:dso@symbol</p>

<p>perf 04/13/2016 PERF-TRACE(1)</p>
<hr>
</body>
</html>
