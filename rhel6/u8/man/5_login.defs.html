<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:22:24 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>LOGIN.DEFS(5) File Formats and Conversions
LOGIN.DEFS(5)</p>

<p>NAME login.defs - shadow password suite
configuration</p>

<p>DESCRIPTION The /etc/login.defs file defines the
site-specific configuration for the shadow password suite.
This file is required. Absence of this file will not prevent
system operation, but will probably result in undesirable
operation.</p>

<p>This file is a readable text file, each line of the file
describing one configuration parameter. The lines consist of
a configuration name and value, separated by whitespace.
Blank lines and comment lines are ignored. Comments are
introduced with a &quot;#&quot; pound sign and the pound
sign must be the first non-white character of the line.</p>

<p>Parameter values may be of four types: strings,
booleans, numbers, and long numbers. A string is comprised
of any printable characters. A boolean should be either the
value yes or no. An undefined boolean parameter or one with
a value other than these will be given a no value. Numbers
(both regular and long) may be either decimal values, octal
values (precede the value with 0) or hexadecimal values
(precede the value with 0x). The maximum value of the
regular and long numeric parameters is
machine-dependent.</p>

<p>Please note that the parameters in this configuration
file control the behavior of the tools from the shadow-utils
component. None of these tools uses the PAM mechanism, and
the utilities that use PAM (such as the passwd command)
should be configured elsewhere. The only values that affect
PAM modules are FAIL_DELAY for pam_faildelay module, and
UMASK for pam_umask module. Refer to pam(8) for more
information.</p>

<p>The following configuration items are provided:</p>

<p>CHFN_AUTH (boolean) If yes, the chfn program will
require authentication before making any changes, unless run
by the superuser.</p>

<p>CHFN_RESTRICT (string) This parameter specifies which
values in the gecos field of the /etc/passwd file may be
changed by regular users using the chfn program. It can be
any combination of letters f, r, w, h, for Full name, Room
number, Work phone, and Home phone, respectively. For
backward compatibility, yes is equivalent to rwh and no is
equivalent to frwh. If not specified, only the superuser can
make any changes. The most restrictive setting is better
achieved by not installing chfn SUID.</p>

<p>CHSH_AUTH (boolean) If yes, the chsh program will
require authentication before making any changes, unless run
by the superuser.</p>

<p>CONSOLE (string) If defined, either full pathname of a
file containing device names (one per line) or a
&quot;:&quot; delimited list of device names. Root logins
will be allowed only upon these devices.</p>

<p>If not defined, root will be allowed on any device.</p>

<p>The device should be specified without the /dev/
prefix.</p>

<p>CONSOLE_GROUPS (string) List of groups to add to the
user&acute;s supplementary groups set when logging in on the
console (as determined by the CONSOLE setting). Default is
none.</p>

<p>Use with caution - it is possible for users to gain
permanent access to these groups, even when not logged in on
the console.</p>

<p>CREATE_HOME (boolean) Indicate if a home directory
should be created by default for new users.</p>

<p>This setting does not apply to system users, and can be
overridden on the command line.</p>

<p>DEFAULT_HOME (boolean) Indicate if login is allowed if
we can&acute;t cd to the home directory. Default is no.</p>

<p>If set to yes, the user will login in the root (/)
directory if it is not possible to cd to her home
directory.</p>

<p>ENCRYPT_METHOD (string) This defines the system default
encryption algorithm for encrypting passwords (if no
algorithm are specified on the command line).</p>

<p>It can take one of these values: DES (default), MD5,
SHA256, SHA512.</p>

<p>Note: this parameter overrides the MD5_CRYPT_ENAB
variable.</p>

<p>ENV_HZ (string) If set, it will be used to define the HZ
environment variable when a user login. The value must be
preceded by HZ=. A common value on Linux is HZ=100.</p>

<p>ENV_PATH (string) If set, it will be used to define the
PATH environment variable when a regular user login. The
value is a colon separated list of paths (for example
/bin:/usr/bin) and can be preceded by PATH=. The default
value is PATH=/bin:/usr/bin.</p>

<p>ENV_SUPATH (string) If set, it will be used to define
the PATH environment variable when the superuser login. The
value is a colon separated list of paths (for example
/sbin:/bin:/usr/sbin:/usr/bin) and can be preceded by PATH=.
The default value is PATH=/sbin:/bin:/usr/sbin:/usr/bin.</p>

<p>ENV_TZ (string) If set, it will be used to define the TZ
environment variable when a user login. The value can be the
name of a timezone preceded by TZ= (for example TZ=CST6CDT),
or the full path to the file containing the timezone
specification (for example /etc/tzname).</p>

<p>If a full path is specified but the file does not exist
or cannot be read, the default is to use TZ=CST6CDT.</p>

<p>ENVIRON_FILE (string) If this file exists and is
readable, login environment will be read from it. Every line
should be in the form name=value.</p>

<p>Lines starting with a # are treated as comment lines and
ignored.</p>

<p>ERASECHAR (number) Terminal ERASE character (010 =
backspace, 0177 = DEL).</p>

<p>The value can be prefixed &quot;0&quot; for an octal
value, or &quot;0x&quot; for an hexadecimal value.</p>

<p>FAIL_DELAY (number) Delay in seconds before being
allowed another attempt after a login failure.</p>

<p>FAILLOG_ENAB (boolean) Enable logging and display of
/var/log/faillog login failure info.</p>

<p>FAKE_SHELL (string) If set, login will execute this
shell instead of the users&acute; shell specified in
/etc/passwd.</p>

<p>FTMP_FILE (string) If defined, login failures will be
logged in this file in a utmp format.</p>

<p>GID_MAX (number), GID_MIN (number) Range of group IDs
used for the creation of regular groups by useradd,
groupadd, or newusers.</p>

<p>The default value for GID_MIN (resp. GID_MAX) is 500
(resp. 60000).</p>

<p>HUSHLOGIN_FILE (string) If defined, this file can
inhibit all the usual chatter during the login sequence. If
a full pathname is specified, then hushed mode will be
enabled if the user&acute;s name or shell are found in the
file. If not a full pathname, then hushed mode will be
enabled if the file exists in the user&acute;s home
directory.</p>

<p>ISSUE_FILE (string) If defined, this file will be
displayed before each login prompt.</p>

<p>KILLCHAR (number) Terminal KILL character (025 =
CTRL/U).</p>

<p>The value can be prefixed &quot;0&quot; for an octal
value, or &quot;0x&quot; for an hexadecimal value.</p>

<p>LASTLOG_ENAB (boolean) Enable logging and display of
/var/log/lastlog login time info.</p>

<p>LOG_OK_LOGINS (boolean) Enable logging of successful
logins.</p>

<p>LOG_UNKFAIL_ENAB (boolean) Enable display of unknown
usernames when login failures are recorded.</p>

<p>Note: logging unknown usernames may be a security issue
if an user enter her password instead of her login name.</p>

<p>LOGIN_RETRIES (number) Maximum number of login retries
in case of bad password.</p>

<p>LOGIN_STRING (string) The string used for prompting a
password. The default is to use &quot;Password: &quot;, or a
translation of that string. If you set this variable, the
prompt will not be translated.</p>

<p>If the string contains %s, this will be replaced by the
user&acute;s name.</p>

<p>LOGIN_TIMEOUT (number) Max time in seconds for
login.</p>

<p>MAIL_CHECK_ENAB (boolean) Enable checking and display of
mailbox status upon login.</p>

<p>You should disable it if the shell startup files already
check for mail (&quot;mailx -e&quot; or equivalent).</p>

<p>MAIL_DIR (string) The mail spool directory. This is
needed to manipulate the mailbox when its corresponding user
account is modified or deleted. If not specified, a
compile-time default is used.</p>

<p>MAIL_FILE (string) Defines the location of the users
mail spool files relatively to their home directory.</p>

<p>The MAIL_DIR and MAIL_FILE variables are used by
useradd, usermod, and userdel to create, move, or delete the
user&acute;s mail spool.</p>

<p>If MAIL_CHECK_ENAB is set to yes, they are also used to
define the MAIL environment variable.</p>

<p>MAX_MEMBERS_PER_GROUP (number) Maximum members per group
entry. When the maximum is reached, a new group entry (line)
is started in /etc/group (with the same name, same password,
and same GID).</p>

<p>The default value is 0, meaning that there are no limits
in the number of members in a group.</p>

<p>This feature (split group) permits to limit the length
of lines in the group file. This is useful to make sure that
lines for NIS groups are not larger than 1024
characters.</p>

<p>If you need to enforce such limit, you can use 25.</p>

<p>Note: split groups may not be supported by all tools
(even in the Shadow toolsuite). You should not use this
variable unless you really need it.</p>

<p>MD5_CRYPT_ENAB (boolean) Indicate if passwords must be
encrypted using the MD5-based algorithm. If set to yes, new
passwords will be encrypted using the MD5-based algorithm
compatible with the one used by recent releases of FreeBSD.
It supports passwords of unlimited length and longer salt
strings. Set to no if you need to copy encrypted passwords
to other systems which don&acute;t understand the new
algorithm. Default is no.</p>

<p>This variable is superseded by the ENCRYPT_METHOD
variable or by any command line option used to configure the
encryption algorithm.</p>

<p>This variable is deprecated. You should use
ENCRYPT_METHOD.</p>

<p>MOTD_FILE (string) If defined, &quot;:&quot; delimited
list of &quot;message of the day&quot; files to be displayed
upon login.</p>

<p>NOLOGINS_FILE (string) If defined, name of file whose
presence will inhibit non-root logins. The contents of this
file should be a message indicating why logins are
inhibited.</p>

<p>OBSCURE_CHECKS_ENAB (boolean) Enable additional checks
upon password changes.</p>

<p>PASS_ALWAYS_WARN (boolean) Warn about weak passwords
(but still allow them) if you are root.</p>

<p>PASS_CHANGE_TRIES (number) Maximum number of attempts to
change password if rejected (too easy).</p>

<p>PASS_MAX_DAYS (number) The maximum number of days a
password may be used. If the password is older than this, a
password change will be forced. If not specified, -1 will be
assumed (which disables the restriction).</p>

<p>PASS_MIN_DAYS (number) The minimum number of days
allowed between password changes. Any password changes
attempted sooner than this will be rejected. If not
specified, -1 will be assumed (which disables the
restriction).</p>

<p>PASS_WARN_AGE (number) The number of days warning given
before a password expires. A zero means warning is given
only upon the day of expiration, a negative value means no
warning is given. If not specified, no warning will be
provided.</p>

<p>PASS_MAX_DAYS, PASS_MIN_DAYS and PASS_WARN_AGE are only
used at the time of account creation. Any changes to these
settings won&acute;t affect existing accounts.</p>

<p>PASS_MAX_LEN (number), PASS_MIN_LEN (number) Number of
significant characters in the password for crypt().
PASS_MAX_LEN is 8 by default. Don&acute;t change unless your
crypt() is better. This is ignored if MD5_CRYPT_ENAB set to
yes.</p>

<p>PORTTIME_CHECKS_ENAB (boolean) Enable checking of time
restrictions specified in /etc/porttime.</p>

<p>QUOTAS_ENAB (boolean) Enable setting of resource limits
from /etc/limits and ulimit, umask, and niceness from the
user&acute;s passwd gecos field.</p>

<p>SHA_CRYPT_MIN_ROUNDS (number), SHA_CRYPT_MAX_ROUNDS
(number) When ENCRYPT_METHOD is set to SHA256 or SHA512,
this defines the number of SHA rounds used by the encryption
algorithm by default (when the number of rounds is not
specified on the command line).</p>

<p>With a lot of rounds, it is more difficult to brute
forcing the password. But note also that more CPU resources
will be needed to authenticate users.</p>

<p>If not specified, the libc will choose the default
number of rounds (5000).</p>

<p>The values must be inside the 1000-999,999,999
range.</p>

<p>If only one of the SHA_CRYPT_MIN_ROUNDS or
SHA_CRYPT_MAX_ROUNDS values is set, then this value will be
used.</p>

<p>If SHA_CRYPT_MIN_ROUNDS &gt; SHA_CRYPT_MAX_ROUNDS, the
highest value will be used.</p>

<p>SULOG_FILE (string) If defined, all su activity is
logged to this file.</p>

<p>SU_NAME (string) If defined, the command name to display
when running &quot;su -&quot;. For example, if this is
defined as &quot;su&quot; then a &quot;ps&quot; will display
the command is &quot;-su&quot;. If not defined, then
&quot;ps&quot; would display the name of the shell actually
being run, e.g. something like &quot;-sh&quot;.</p>

<p>SU_WHEEL_ONLY (boolean) If yes, the user must be listed
as a member of the first gid 0 group in /etc/group (called
root on most Linux systems) to be able to su to uid 0
accounts. If the group doesn&acute;t exist or is empty, no
one will be able to su to uid 0.</p>

<p>SYS_GID_MAX (number), SYS_GID_MIN (number) Range of
group IDs used for the creation of system groups by useradd,
groupadd, or newusers.</p>

<p>The default value for SYS_GID_MIN (resp. SYS_GID_MAX) is
201 (resp. GID_MIN-1).</p>

<p>SYS_UID_MAX (number), SYS_UID_MIN (number) Range of user
IDs used for the creation of system users by useradd or
newusers.</p>

<p>The default value for SYS_UID_MIN (resp. SYS_UID_MAX) is
201 (resp. UID_MIN-1).</p>

<p>SYSLOG_SG_ENAB (boolean) Enable &quot;syslog&quot;
logging of sg activity.</p>

<p>SYSLOG_SU_ENAB (boolean) Enable &quot;syslog&quot;
logging of su activity - in addition to sulog file
logging.</p>

<p>TTYGROUP (string), TTYPERM (string) The terminal
permissions: the login tty will be owned by the TTYGROUP
group, and the permissions will be set to TTYPERM.</p>

<p>By default, the ownership of the terminal is set to the
user&acute;s primary group and the permissions are set to
0600.</p>

<p>TTYGROUP can be either the name of a group or a numeric
group identifier.</p>

<p>If you have a write program which is &quot;setgid&quot;
to a special group which owns the terminals, define TTYGROUP
to the group number and TTYPERM to 0620. Otherwise leave
TTYGROUP commented out and assign TTYPERM to either 622 or
600.</p>

<p>TTYTYPE_FILE (string) If defined, file which maps tty
line to TERM environment parameter. Each line of the file is
in a format something like &quot;vt100 tty01&quot;.</p>

<p>UID_MAX (number), UID_MIN (number) Range of user IDs
used for the creation of regular users by useradd or
newusers.</p>

<p>The default value for UID_MIN (resp. UID_MAX) is 500
(resp. 60000).</p>

<p>ULIMIT (number) Default ulimit value.</p>

<p>UMASK (number) The file mode creation mask is
initialized to this value. If not specified, the mask will
be initialized to 022.</p>

<p>useradd and newusers use this mask to set the mode of
the home directory they create</p>

<p>It is also used by login to define users&acute; initial
umask. Note that this mask can be overridden by the
user&acute;s GECOS line (if QUOTAS_ENAB is set) or by the
specification of a limit with the K identifier in
limits(5).</p>

<p>USERDEL_CMD (string) If defined, this command is run
when removing a user. It should remove any at/cron/print
jobs etc. owned by the user to be removed (passed as the
first argument).</p>

<p>The return code of the script is not taken into
account.</p>

<p>Here is an example script, which removes the
user&acute;s cron, at and print jobs:</p>

<p>#! /bin/sh</p>

<p># Check for the required argument. if [ $# != 1 ]; then
echo &quot;Usage: $0 username&quot; exit 1 fi</p>

<p># Remove cron jobs. crontab -r -u $1</p>

<p># Remove at jobs. # Note that it will remove any jobs
owned by the same UID, # even if it was shared by a
different username. AT_SPOOL_DIR=/var/spool/cron/atjobs find
$AT_SPOOL_DIR -name &quot;[^.]*&quot; -type f -user $1
-delete ;</p>

<p># Remove print jobs. lprm $1</p>

<p># All done. exit 0</p>

<p>USERGROUPS_ENAB (boolean) Enable setting of the umask
group bits to be the same as owner bits (examples: 022 -&gt;
002, 077 -&gt; 007) for non-root users, if the uid is the
same as gid, and username is the same as the primary group
name.</p>

<p>If set to yes, userdel will remove the user&acute;s
group if it contains no more members, and useradd will
create by default a group with the name of the user.</p>

<p>CROSS REFERENCES The following cross references show
which programs in the shadow password suite use which
parameters.</p>

<p>chpasswd</p>

<p>ENCRYPT_METHOD MD5_CRYPT_ENAB SHA_CRYPT_MAX_ROUNDS
SHA_CRYPT_MIN_ROUNDS</p>

<p>gpasswd ENCRYPT_METHOD MAX_MEMBERS_PER_GROUP
MD5_CRYPT_ENAB SHA_CRYPT_MAX_ROUNDS SHA_CRYPT_MIN_ROUNDS</p>

<p>groupadd GID_MAX GID_MIN MAX_MEMBERS_PER_GROUP
SYS_GID_MAX SYS_GID_MIN</p>

<p>groupdel MAX_MEMBERS_PER_GROUP</p>

<p>groupmems MAX_MEMBERS_PER_GROUP</p>

<p>groupmod MAX_MEMBERS_PER_GROUP</p>

<p>grpck MAX_MEMBERS_PER_GROUP</p>

<p>grpconv MAX_MEMBERS_PER_GROUP</p>

<p>grpunconv MAX_MEMBERS_PER_GROUP</p>

<p>newgrp / sg SYSLOG_SG_ENAB</p>

<p>newusers ENCRYPT_METHOD GID_MAX GID_MIN
MAX_MEMBERS_PER_GROUP MD5_CRYPT_ENAB PASS_MAX_DAYS
PASS_MIN_DAYS PASS_WARN_AGE SHA_CRYPT_MAX_ROUNDS
SHA_CRYPT_MIN_ROUNDS SYS_GID_MAX SYS_GID_MIN SYS_UID_MAX
SYS_UID_MIN UID_MAX UID_MIN UMASK</p>

<p>pwck PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE</p>

<p>pwconv PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE</p>

<p>useradd CREATE_HOME GID_MAX GID_MIN MAIL_DIR
MAX_MEMBERS_PER_GROUP PASS_MAX_DAYS PASS_MIN_DAYS
PASS_WARN_AGE SYS_GID_MAX SYS_GID_MIN SYS_UID_MAX
SYS_UID_MIN UID_MAX UID_MIN UMASK</p>

<p>userdel MAIL_DIR MAIL_FILE MAX_MEMBERS_PER_GROUP
USERDEL_CMD USERGROUPS_ENAB</p>

<p>usermod MAIL_DIR MAIL_FILE MAX_MEMBERS_PER_GROUP</p>

<p>SEE ALSO login(1), passwd(1), su(1), passwd(5),
shadow(5), pam(8).</p>

<p>shadow-utils 4.1.5.1 02/09/2016 LOGIN.DEFS(5)</p>
<hr>
</body>
</html>
