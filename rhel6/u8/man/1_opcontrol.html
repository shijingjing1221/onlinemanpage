<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OPCONTROL(1) OPCONTROL(1)</p>

<p>NAME opcontrol - control OProfile profiling</p>

<p>SYNOPSIS opcontrol [ options ]</p>

<p>DESCRIPTION opcontrol can be used to start profiling,
end a profiling session, dump profile data, and set up the
profiling parameters.</p>

<p>OPTIONS --help / -? Show help message.</p>

<p>--version / -v Show version.</p>

<p>--list-events / -l Shows the monitorable events.</p>

<p>--init Load the OProfile module if required and make the
OProfile driver interface available.</p>

<p>--setup Followed by list options for profiling setup.
Store setup in ~root/.oprofile/daemonrc. Optional.</p>

<p>--status Show configuration information.</p>

<p>--start-daemon Start the oprofile daemon without
starting profiling.</p>

<p>--start / -s Start data collection with either arguments
provided by --setup or with information saved in
~root/.oprofile/daemonrc.</p>

<p>--dump / -d Force a flush of the collected profiling
data to the daemon.</p>

<p>--stop / -t Stop data collection.</p>

<p>--shutdown / -h Stop data collection and kill the
daemon.</p>

<p>--reset Clear out data from current session, but leaves
saved sessions.</p>

<p>--save=sessionname Save data from current session to
sessionname.</p>

<p>--deinit Shut down daemon. Unload the oprofile module
and oprofilefs.</p>

<p>--session-dir=dir_path Use sample database out of
directory dir_path instead of the default location
(/var/lib/oprofile).</p>

<p>--buffer-size=num Set kernel buffer to num samples. The
buffer watershed needs to be tweaked when changing this
value. Rules: A non-zero value goes into effect after a
--shutdown/start sequence. A value of zero sets this
parameter back to default value, but does not go into effect
until after --deinit/init sequence.</p>

<p>--buffer-watershed=num Set kernel buffer watershed to
num samples. When buffer-size - buffer-watershed free
entries remain in the kernel buffer, data will be flushed to
the daemon. Most useful values are in the range [0.25 - 0.5]
* buffer-size. Same rules as defined for buffer-size.</p>

<p>--cpu-buffer-size=num Set kernel per-cpu buffer to num
samples. If you profile at high rate it can help to increase
this if the log file show excessive count of sample lost cpu
buffer overflow. Same rules as defined for buffer-size.</p>

<p>--event / -e [event|&quot;default&quot;] Specify an
event to measure for the hardware performance coun- ters, or
&quot;default&quot; for the default event. The event is of
the form &quot;CPU_CLK_UNHALTED:30000:0:1:1&quot; where the
numeric values are count, unit mask, kernel-space counting,
user-space counting, respectively. Note that this over-rides
all previous events selected; if you want to profile with
two or more events simul- taneously, you must specify them
on the same opcontrol invoca- tion. You can specify unit
mask values using either a numerical value (hex values must
begin with &quot;0x&quot;) or a symbolic name (if the
name=&lt;um_name&gt; field is shown in the ophelp output).
For some named unit masks, the hex value is not unique;
thus, OPro- file tools enforce specifying such unit masks
value by name.</p>

<p>--separate / -p [none,lib,kernel,thread,cpu,all]
Separate samples based on the given separator. lib separates
dynamically linked library samples per application. kernel
separates kernel and kernel module samples per application;
kernel implies library . thread gives separation for each
thread and task. cpu separates for each CPU. all implies all
of the above options and none turns off separation.</p>

<p>--callgraph / -c [#depth] Enable callgraph sample
collection with a maximum depth. Use 0 to disable callgraph
profiling. This option is available on x86 using a 2.6+
kernel with callgraph support enabled. It is also available
on PowerPC using a 2.6.17+ kernel.</p>

<p>--image / -i [name,name...|&quot;all&quot;] Only profile
the given absolute paths to binaries, or &quot;all&quot; to
profile everything (the default).</p>

<p>--vmlinux=file vmlinux kernel image.</p>

<p>--no-vmlinux Use this when you don t have a kernel
vmlinux file, and you dont want to profile the kernel.</p>

<p>--verbose / -V [options] Be verbose in the daemon log.
This has a high overhead.</p>

<p>--kernel-range=start,end Set kernel range vma address in
hexadecimal.</p>

<p>OPTIONS (specific to Xen) --xen=file Xen image</p>

<p>--active-domains=&lt;list&gt; List of domain ids
participating in a multi-domain profiling session. Each of
the specified domains must run an instance of oprofile. The
sequence of opcontrol commands in each domain must follow a
given order which is specified in the oprofile user manual.
If more than one domain is specified in &lt;list&gt; they
should be separated using commas. This option can only be
used in domain 0 which is the only domain that can
coordinate a multi-domain profiling session. Including
domain 0 in the list of active domains is optional. (e.g.
--active-domains=2,5,6 and --active-domains=0,2,5,6 are
equivalent). This option can only be specified if
--start-daemon is also specified and it is only valid for
the current run of the oprofile daemon; e.g. the list of
active domains is not persistent.</p>

<p>--passive-domains=&lt;list&gt;or--domains=&lt;list&gt;
List of domain ids to be profiled, separated by commas. As
opposed to the --active-domains option, the domains
specified with this option do not need to run oprofile. This
makes profil- ing multiple domains easier. However, with the
passive-domains option, samples in user level processes and
kernel modules can- not be mapped to specific symbols and
are aggregated under a generic class. Both --active-domains
and --passive-domains options can be specified in the same
command, but the same domain cannot be specified in both
options. This option can only be specified if either --start
or --start-daemon is specified on the same command and it is
only valid for the current run of the oprofile daemon; e.g.
the list of passive domains is not persis- tent.</p>


<p>--passive-images=&lt;list&gt;or--domains-images=&lt;list&gt;
List of kernel images associated with the domains specified
in the --passive-domains option, also separated by commas.
The association between the images and domains is based on
the order they are specified in both options.</p>

<p>OPTIONS (specific to System z) --s390hwsampbufsize=num
Number of 2MB areas used per CPU for storing sample data.
The best size for the sample memory depends on the
particular system and the workload to be measured. Providing
the sampler with too little memory results in lost samples.
Reserving too much system memory for the sampler impacts the
overall performance and, hence, also the workload to be
measured.</p>

<p>ENVIRONMENT No special environment variables are
recognised by opcontrol.</p>

<p>FILES /root/.oprofile/daemonrc Configuration file for
opcontrol</p>

<p>/var/lib/oprofile/samples/ The location of the generated
sample files.</p>

<p>VERSION This man page is current for oprofile-0.9.9.</p>

<p>SEE ALSO /usr/share/doc/oprofile-0.9.9/, oprofile(1)</p>

<p>4th Berkeley Distribution Thu 04 February 2016
OPCONTROL(1)</p>
<hr>
</body>
</html>
