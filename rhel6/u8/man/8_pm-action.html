<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:28:24 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PM-ACTION(8) pm-utils User Manual PM-ACTION(8)</p>

<p>NAME pm-action - Suspend or Hibernate your computer</p>

<p>SYNOPSIS pm-hibernate [--help]</p>

<p>pm-suspend [--quirk-*--help]</p>

<p>pm-suspend-hybrid [--quirk-*--help]</p>

<p>DESCRIPTION This manual page documents briefly the
pm-action, pm-hibernate, pm-suspend and pm-suspend-hybrid
commands. This manual page was originally written for the
Debian(TM) distribution and has been adopted by the pm-utils
project.</p>

<p>These commands can be used to put the machine in a sleep
state. The precise way how this is done can be influenced by
installing executables and configuration snippets. For some
options external programs are needed.</p>

<p>These commands will usually be called by hald when
triggered to do so by a program in a desktop session such as
gnome-power-manager. Calling them from the command line is
also possible, but it is not guaranteed that all programs in
your desktop session keep working as expected.</p>

<p>pm-suspend During suspend most devices are shutdown, and
system state is saved in RAM. The system still requires
power in this state. Most modern systems require 3 to 5
seconds to enter and leave suspend, and most laptops can
stay in suspend mode for 1 to 3 days before exhausting their
battery.</p>

<p>pm-hibernate During hibernate the system is fully
powered off, and system state is saved to disk. The system
does not require power, and can stay in hibernate mode
indefinitely. Most modern systems require 15 to 45 seconds
to enter and leave hibernate, and entering and leaving
hibernate takes longer when you have more memory.</p>

<p>pm-suspend-hybrid Hybrid-suspend is the process where
the system does everything it needs to hibernate, suspends
instead of shutting down. This means that your computer can
wake up quicker than for normal hibernation if you do not
run out of power, and you can resume even if you run out of
power. s2both(8) is an hybrid-suspend implementation.</p>

<p>OPTIONS Om most hardware putting the video card in the
suspend state and recovering from it needs some special
quirk handling. With the --quirk-* options of the pm-suspend
and pm-suspend-hybrid commands you can select which quirks
should be used.</p>

<p>If pm-suspend, pm-hibernate, or pm-suspend-hybrid is
invoked without any commandline parameters, they will try to
grab the correct quirks from HAL if it is installed.</p>

<p>--auto-quirks This option will try to grab the correct
quirks for this system from HAL. If HAL is not present on
the system and this parameter is passed, suspending or
hibernating the system will fail.</p>

<p>--quirk-dpms-on This option forces the video hardware to
turn on the screen during resume. Most video adapters turn
on the screen themselves, but if you get a blank screen on
resume that can be turned back on by moving the mouse or
typing then this option may be useful.</p>

<p>--quirk-dpms-suspend This option forces the video
hardware to turn off the screen when suspending. Most video
adapters seem to do this correctly, but some do not, which
wastes lits of power. If your screen is still on after
successfully suspending you may need to use this option.</p>

<p>--quirk-radeon-off This option forces Radeon hardware to
turn off the display during suspend and turn it back on
during resume. You only need to do this on some old
ThinkPads of the &acute;30 series (T30, X31, R32,... ) with
Radeon video hardware.</p>

<p>--quirk-s3-bios This option calls the video BIOS during
S3 resume. Unfortunately, it is not always allowed to call
the video BIOS at this point, so sometimes adding this
option can actually break resume on some systems.</p>

<p>--quirk-s3-mode This option initializes the video card
into a VGA text mode, and then uses the BIOS to set the
video mode. On some systems S3 BIOS only initializes the
video bios to text mode, and so both S3 BIOS and S3 MODE are
needed.</p>

<p>--quirk-vbe-post This option will attempt to
reinitialize the video card when resuming from suspend,
using the same code the system BIOS uses at boot in order to
initialize the video hardware. Not all video cards need
this, and using this option on systems where it is not
needed can cause a system to lock up when resuming.</p>

<p>--quirk-vbemode-restore This option will save and
restore the current VESA mode which may be necessary to
avoid X screen corruption. Using this feature on Intel
graphics hardware is probably a bad idea.</p>

<p>--quirk-vbestate-restore This option saves and restores
some low level hardware state which may be invalid after
suspend.</p>

<p>--quirk-vga-mode3 This option will try to force the
video card into a standard text mode on resume.</p>

<p>--quirk-save-pci Save the PCI config space for the VGA
card.</p>

<p>--store-quirks-as-fdi Save the quirks passed to
pm-suspend or pm-suspend-hybrid as an .fdi file that is
specific to this system. The file will be saved in
/etc/hal/fdi/information/99local-pm-utils-quirks.fdi. This
parameter will only save the actual quirks that were used to
sucessfully suspend/resume a system -- if you are running
proprietary video drivers or kernel modesetting video
drivers, you will generate a potentially incorrect .fdi
file.</p>

<p>FILES /etc/pm/config.d The files in this directory are
evaluated in C sort order. These files can be provided by
individual packages outside of pm-utils. If a global
configuration variable is set, the value set to will be
appended to the previous value. If any other variable is
set, it will be ignored. The syntax is simply: VAR_NAME =
value. See the CONFIGURATION VARIABLES section for valid
variables defined by pm-utils. External packages can define
others, see their respective documentation for more
information.</p>

<p>/etc/pm/sleep.d, /usr/lib/pm-utils/sleep.d Programs in
these directories (we call them hooks) are combined and
executed in C sort order before suspend and hibernate with
as argument &acute;suspend&acute; or
&acute;hibernate&acute;. Afterwards they are called in
reverse order with argument &acute;resume&acute; and
&acute;thaw&acute; respectively. If both directories contain
a similar named file, the one in /etc/pm/sleep.d will get
preference. It is possible to disable a hook in the
distribution directory by putting a non-executable file in
/etc/pm/sleep.d, or by adding it to the HOOK_BLACKLIST
configuration variable.</p>

<p>/var/log/pm-suspend.log The log file shows what was done
on the last suspend/hibernate and resume/thaw.</p>

<p>SLEEP HOOK ORDERING CONVENTION 00 - 49 User and most
package supplied hooks. If a hook assumes that all of the
usual services and userspace infrastructure is still
running, it should be here.</p>

<p>50 - 74 Service handling hooks. Hooks that start or stop
a service belong in this range. At or before 50, hooks can
assume that all services are still enabled.</p>

<p>75 - 89 Module and non-core hardware handling. If a hook
needs to load/unload a module, or if it needs to place
non-video hardware that would otherwise break suspend or
hibernate into a safe state, it belongs in this range. At or
before 75, hooks can assume all modules are still
loaded.</p>

<p>90 - 99 Reserved for critical suspend hooks.</p>

<p>CONFIGURATION VARIABLES Configuration variables defined
by pm-utils. These can be set in any file in
/etc/pm/config.d</p>

<p>SLEEP_MODULE [=kernel] The default suspend backend to
use. Valid values are:</p>

<p>kernel The built-in kernel suspend/resume support. Use
this if nothing else is supported on your system. The kernel
backend is always used if nothing else is available.</p>

<p>uswsusp If your system has support for the userspace
suspend programs (s2ram/s2disk/s2both), then use this.</p>

<p>tuxonice If your system has support for
tuxonice/suspend2, use this.</p>

<p>HIBERNATE_RESUME_POST_VIDEO [=no] If video should be
posted after hibernate, just like after suspend. You should
not normally need to set this.</p>

<p>SUSPEND_MODULES Space separated list of modules to
unload before suspend.</p>

<p>HOOK_BLACKLIST Space separated list of hooks that should
be disabled.</p>

<p>HIBERNATE_MODE Default method to power down the system
when hibernating. If not set, the system will use the kernel
default as a default value. Check /sys/power/disk for valid
values. The default value will be surrounded by [square
brackets].</p>

<p>NEED_CLOCK_SYNC If your system clock drifts across a
suspend/resume or hiberante/thaw cycle, you should set this
to true. This will cause pm-utils to synchronize the system
clock whenever we go through a sleep/wake cycle at the
expense of making suspend/resume take longer.</p>

<p>BUGS The upstream BTS can be found at
https://bugs.freedesktop.org/. Select &acute;pm-utils&acute;
as product.</p>

<p>SEE ALSO s2ram(8), s2disk(8), s2both(8),
pm-is-supported(1), pm-powersave(8), vbetool(8),
radeontool(8)</p>

<p>AUTHOR Tim Dijkstra &lt;tim@famdijkstra.org&gt; Manpage
author.</p>

<p>COPYRIGHT Copyright &copy; 2007 Tim Dijkstra</p>

<p>This manual page was originally written for the
Debian(TM) system, and has been adopted by the pm-utils
project.</p>

<p>Permission is granted to copy, distribute and/or modify
this document under the terms of the GNU General Public
License, Version 2 or (at your option) any later version
published by the Free Software Foundation.</p>

<p>pm-action Apr 25, 2007 PM-ACTION(8)</p>
<hr>
</body>
</html>
