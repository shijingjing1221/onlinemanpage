<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:04:17 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ADCLI(8) System Commands ADCLI(8)</p>

<p>NAME adcli - Tool for performing actions on an Active
Directory domain</p>

<p>SYNOPSIS adcli info domain.example.com</p>

<p>adcli join domain.example.com</p>

<p>adcli update</p>

<p>adcli create-user [--domain=domain.example.com] user</p>

<p>adcli delete-user [--domain=domain.example.com] user</p>

<p>adcli create-group [--domain=domain.example.com]
user</p>

<p>adcli delete-group [--domain=domain.example.com]
user</p>

<p>adcli add-member [--domain=domain.example.com] group
user...</p>

<p>adcli remove-member [--domain=domain.example.com] group
user...</p>

<p>adcli preset-computer [--domain=domain.example.com]
computer...</p>

<p>adcli reset-computer [--domain=domain.example.com]
computer</p>

<p>adcli delete-computer [--domain=domain.example.com]
computer</p>

<p>GENERAL OVERVIEW adcli is a command line tool that can
perform actions in an Active Directory domain. Among other
things it can be used to join a computer to a domain.</p>

<p>See the various sub commands below. The following global
options can be used:</p>

<p>-D, --domain=domain The domain to connect to. If a
domain is not specified then the domain part of the local
computer&acute;s host name is used.</p>

<p>-R, --domain-realm=REALM Kerberos realm for the domain.
If not specified then the upper cased domain name is
used.</p>

<p>-S, --domain-controller=server Connect to a specific
domain controller. If not specified then an appropriate
domain controller is automatically discovered.</p>

<p>-C, --login-ccache=/path/to/file Use the specified
kerberos credential cache to authenticate with the
domain.</p>

<p>-U, --login-user=User Use the specified user account to
authenticate with the domain. If not specified then the name
&acute;Administrator&acute; will be used.</p>

<p>--no-password Don&acute;t show prompts for or read a
password from input.</p>

<p>-W, --prompt-password Prompt for a password if
necessary. This is the default.</p>

<p>--stdin-password Read a password from stdin input
instead of prompting for a password.</p>

<p>-v, --verbose Run in verbose mode with debug output.</p>

<p>QUERYING DOMAIN INFORMATION adcli info displays
discovered information about an Active Directory domain or
an Active Directory domain controller.</p>

<p>$ adcli info domain.example.com ...</p>

<p>$ adcli info --domain-controller=dc.domain.example.com
...</p>

<p>adcli info will output as much information as it can
about the domain. The information is designed to be both
machine and human readable. The command will exit with a
non-zero exit code if the domain does note exist or cannot
be reached.</p>

<p>To show domain info for a specific domain controller use
the --domain-controller option to specify which domain
controller to query.</p>

<p>Use the --verbose option to show details of how the
domain is discovered and queried. Many of the global
options, in particular authentication options, are not
usable with the adcli info command.</p>

<p>JOINING THE LOCAL MACHINE TO A DOMAIN adcli join creates
a computer account in the domain for the local machine, and
sets up a keytab for the machine. It does not configure an
authentication service (such as sssd).</p>

<p>$ adcli join domain.example.com Password for
Administrator:</p>

<p>In addition to the global options, you can specify the
following options to control how this operation is done.</p>

<p>-N, --computer-name=computer The short non-dotted name
of the computer account that will be created in the domain.
If not specified then the first portion of the --host-fqdn
is used.</p>

<p>-O, --domain-ou=OU=xxx The full distinguished name of
the OU in which to create the computer account. If not
specified then the computer account will be created in a
default location.</p>

<p>-H, --host-fqdn=host Override the local machine&acute;s
fully qualified domain name. If not specified the local
machine&acute;s hostname will be retrieved via
gethostname().</p>

<p>-K, --host-keytab=/path/to/keytab Specify the path to
the host keytab where host credentials will be written after
a successful join operation. If not specified the default
location will be used, usually /etc/krb5.keytab.</p>

<p>--login-type={computer|user} Specify the type of
authentication that will be performed before creating the
machine account in the domain. If set to
&acute;computer&acute; then the computer must already have a
preset account in the domain. If not specified and none of
the other --login-xxx arguments have been specified, then
will try both &acute;computer&acute; and &acute;user&acute;
authentication.</p>

<p>--os-name=name Set the operating system name on the
computer account. The default depends on where adcli was
built, but is usually something like
&acute;linux-gnu&acute;.</p>

<p>--os-service-pack=pack Set the operating system service
pack on the computer account. Not set by default.</p>

<p>--os-version=version Set the operating system version on
the computer account. Not set by default.</p>

<p>--service-name=service Additional service name for a
kerberos principal to be created on the computer account.
This option may be specified multiple times.</p>

<p>--user-principal=host/name@REALM Set the
userPrincipalName field of the computer account to this
kerberos principal. If you omit the value for this option,
then a principal will be set in the form of
host/host.example.com@REALM</p>

<p>--one-time-password Specify a one time password for a
preset computer account. This is equivalent to using
--login-type=computer and providing a password as input.</p>

<p>--show-details After a successful join print out
information about join operation. This is output in a format
that should be both human and machine readable.</p>

<p>--show-password After a successful join print out the
computer machine account password. This is output in a
format that should be both human and machine readable.</p>

<p>UPDATING THE MACHINE ACCOUNT PASSWORD AND OTHER
ATTRIBUTES adcli update updates the password of the computer
account on the domain controller for the local machine,
write the new keys to the keytab and removes older keys. It
keeps the previous key on purpose because AD will need some
time to replicate the new key to all DCs hence the previous
key might still be used.</p>

<p>$ adcli update</p>

<p>If used with a credential cache other attributes of the
computer account can be changed as well if the principal has
sufficient privileges.</p>

<p>$ kinit Administrator $ adcli update
--login-ccache=/tmp/krbcc_123</p>

<p>In addition to the global options, you can specify the
following options to control how this operation is done.</p>

<p>-N, --computer-name=computer The short non-dotted name
of the computer account that will be created in the domain.
If not specified it will be retrieved from the keytab
entries.</p>

<p>-H, --host-fqdn=host The local machine&acute;s fully
qualified domain name. If not specified the local
machine&acute;s hostname will be retrieved from the keytab
entries.</p>

<p>-K, --host-keytab=/path/to/keytab Specify the path to
the host keytab where current host credentials are stored
and the new ones will be written to. If not specified the
default location will be used, usually /etc/krb5.keytab.</p>

<p>--os-name=name Set the operating system name on the
computer account. Not set by default.</p>

<p>--os-service-pack=pack Set the operating system service
pack on the computer account. Not set by default.</p>

<p>--os-version=version Set the operating system version on
the computer account. Not set by default.</p>

<p>--service-name=service Additional service name for a
Kerberos principal to be created on the computer account.
This option may be specified multiple times.</p>

<p>--user-principal=host/name@REALM Set the
userPrincipalName field of the computer account to this
Kerberos principal.</p>

<p>--computer-password-lifetime=lifetime Only update the
password of the computer account if it is older than the
lifetime given in days. By default the password is updated
if it is older than 30 days.</p>

<p>--show-details After a successful join print out
information about join operation. This is output in a format
that should be both human and machine readable.</p>

<p>CREATING A USER adcli create-user creates a new user
account in the domain.</p>

<p>$ adcli create-user Fry --domain=domain.example.com
--display-name=&quot;Philip J. Fry&quot;
--mail=fry@domain.example.com</p>

<p>In addition to the global options, you can specify the
following options to control how the user is created.</p>

<p>--display-name=&quot;Name&quot; Set the displayName
attribute of the new created user account.</p>

<p>-O, --domain-ou=OU=xxx The full distinguished name of
the OU in which to create the user account. If not specified
then the computer account will be created in a default
location.</p>

<p>--mail=email@domain.com Set the mail attribute of the
new created user account. This attribute may be specified
multiple times.</p>

<p>--unix-home=/home/user Set the unixHomeDirectory
attribute of the new created user account, which should be
an absolute path to the user&acute;s home directory.</p>

<p>--unix-gid=111 Set the gidNumber attribute of the new
created user account, which should be the user&acute;s
numeric primary group id.</p>

<p>--unix-shell=/bin/shell Set the loginShell attribute of
the new created user account, which should be the
user&acute;s numeric primary user id.</p>

<p>--unix-uid=111 Set the uidNumber attribute of the new
created user account, which should be a path to a valid
shell.</p>

<p>DELETING A USER adcli delete-user deletes a user account
from the domain.</p>

<p>$ adcli delete-user Fry --domain=domain.example.com</p>

<p>The various global options can be used.</p>

<p>CREATING A GROUP adcli create-group creates a new group
in the domain.</p>

<p>$ adcli create-group Pilots --domain=domain.example.com
--description=&quot;Group for all pilots&quot;</p>

<p>In addition to the global options, you can specify the
following options to control how the group is created.</p>

<p>--description=&quot;text&quot; Set the description
attribute of the new created group.</p>

<p>-O, --domain-ou=OU=xxx The full distinguished name of
the OU in which to create the group. If not specified then
the group will be created in a default location.</p>

<p>DELETING A GROUP adcli delete-group deletes a group from
the domain.</p>

<p>$ adcli delete-group Pilots
--domain=domain.example.com</p>

<p>The various global options can be used.</p>

<p>ADDING A MEMBER TO A GROUP adcli add-member adds one or
more users to a group in the domain. The group is specified
first, and then the various users to be added.</p>

<p>$ adcli add-member --domain=domain.example.com Pilots
Leela Scruffy</p>

<p>The various global options can be used.</p>

<p>REMOVING A MEMBER FROM A GROUP adcli remove-member
removes a user from a group in the domain. The group is
specified first, and then the various users to be
removed.</p>

<p>$ adcli remove-member --domain=domain.example.com Pilots
Scruffy</p>

<p>The various global options can be used.</p>

<p>PRESET COMPUTER ACCOUNTS adcli preset-computer
pre-creates one or more computer accounts in the domain for
machines to later use when joining the domain. By doing this
machines can join using a one time password or automatically
without a password.</p>

<p>$ adcli preset-computer --domain=domain.example.com
host1.example.com host2 Password for Administrator:</p>

<p>If the computer names specified contain dots, then they
are treated as fully qualified host names, otherwise they
are treated as short computer names. The computer accounts
must not already exist.</p>

<p>In addition to the global options, you can specify the
following options to control how this operation is done.</p>

<p>-O, --domain-ou=OU=xxx The full distinguished name of
the OU in which to create the computer accounts. If not
specified then the computer account will be created in a
default location.</p>

<p>--one-time-password Specify a one time password to use
when presetting the computer accounts. If not specified then
a default password will be used, which allows for later
automatic joins.</p>

<p>--os-name=name Set the operating system name on the
computer account. The default depends on where adcli was
built, but is usually something like
&acute;linux-gnu&acute;.</p>

<p>--os-service-pack=pack Set the operating system service
pack on the computer account. Not set by default.</p>

<p>--os-version=version Set the operating system version on
the computer account. Not set by default.</p>

<p>--service-name=service Additional service name for a
kerberos principal to be created on the computer account.
This option may be specified multiple times.</p>

<p>--user-principal Set the userPrincipalName field of the
computer account to this kerberos principal in the form of
host/host.example.com@REALM</p>

<p>RESET COMPUTER ACCOUNT adcli reset-computer resets a
computer account in the domain. If a the appropriate machine
is currently joined to the domain, then its membership will
be broken. The account must already exist.</p>

<p>$ adcli reset-computer --domain=domain.example.com
host2</p>

<p>If the computer names specified contain dots, then they
are treated as fully qualified host names, otherwise they
are treated as short computer names.</p>

<p>In addition to the global options, you can specify the
following options to control how this operation is done.</p>

<p>--login-type={computer|user} Specify the type of
authentication that will be performed before creating the
machine account in the domain. If set to
&acute;computer&acute; then the computer must already have a
preset account in the domain. If not specified and none of
the other --login-xxx arguments have been specified, then
will try both &acute;computer&acute; and &acute;user&acute;
authentication.</p>

<p>DELETE COMPUTER ACCOUNT adcli delete-computer deletes a
computer account in the domain. The account must already
exist.</p>

<p>$ adcli delete-computer --domain=domain.example.com
host2 Password for Administrator:</p>

<p>If the computer name contains a dot, then it is treated
as fully qualified host name, otherwise it is treated as
short computer name.</p>

<p>If no computer name is specified, then the host name of
the computer adcli is running on is used, as returned by
gethostname().</p>

<p>The various global options can be used.</p>

<p>BUGS Please send bug reports to either the distribution
bug tracker or the upstream bug tracker at
https://bugs.freedesktop.org/enter_bug.cgi?product=realmd&amp;component=adcli</p>

<p>SEE ALSO realmd(8), net(8), sssd(8)</p>

<p>Further details available in the realmd online
documentation at
http://www.freedesktop.org/software/realmd/</p>

<p>realmd ADCLI(8)</p>
<hr>
</body>
</html>
