<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:15:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GETDATE(3) Linux Programmer s Manual GETDATE(3)</p>

<p>NAME getdate, getdate_r - convert a date-plus-time
string to broken-down time</p>

<p>SYNOPSIS #define _XOPEN_SOURCE 500 #include
&lt;time.h&gt;</p>

<p>struct tm *getdate(const char *string);</p>

<p>extern int getdate_err;</p>

<p>#define _GNU_SOURCE #include &lt;time.h&gt;</p>

<p>int getdate_r(const char *string, struct tm *res);</p>

<p>DESCRIPTION The function getdate() converts a string
representation of a date and time, contained in the buffer
pointed to by string, into a broken-down time. The
broken-down time is stored in a tm structure, and a pointer
to this structure is returned as the function result. This
tm struc- ture is allocated in static storage, and
consequently it will be over- written by further calls to
getdate().</p>

<p>In contrast to strptime(3), (which has a format
argument), getdate() uses the formats found in the file
whose full pathname is given in the environment variable
DATEMSK. The first line in the file that matches the given
input string is used for the conversion.</p>

<p>The matching is done case insensitively. Superfluous
whitespace, either in the pattern or in the string to be
converted, is ignored.</p>

<p>The conversion specifications that a pattern can contain
are those given for strptime(3). One more conversion
specification is specified in POSIX.1-2001:</p>

<p>%Z Timezone name. This is not implemented in glibc.</p>

<p>When %Z is given, the structure containing the
broken-down time is ini- tialized with values corresponding
to the current time in the given timezone. Otherwise, the
structure is initialized to the broken-down time
corresponding to the current local time (as by a call to
local- time(3)).</p>

<p>When only the weekday is given, the day is taken to be
the first such day on or after today.</p>

<p>When only the month is given (and no year), the month is
taken to be the first such month equal to or after the
current month. If no day is given, it is the first day of
the month.</p>

<p>When no hour, minute and second are given, the current
hour, minute and second are taken.</p>

<p>If no date is given, but we know the hour, then that
hour is taken to be the first such hour equal to or after
the current hour.</p>

<p>getdate_r() is a GNU extension that provides a reentrant
version of getdate(). Rather than using a global variable to
report errors and a static buffer to return the broken down
time, it returns errors via the function result value, and
returns the resulting broken-down time in the
caller-allocated buffer pointed to by the argument res.</p>

<p>RETURN VALUE When successful, getdate() returns a
pointer to a struct tm. Other- wise, it returns NULL and
sets the global variable getdate_err to one of the error
numbers shown below. Changes to errno are unspecified.</p>

<p>On success getdate_r() returns 0; on error it returns
one of the error numbers shown below.</p>

<p>ERRORS The following errors are returned via getdate_err
(for getdate()) or as the function result (for
getdate_r()):</p>

<p>1 The DATEMSK environment variable is not defined, or
its value is an empty string.</p>

<p>2 The template file specified by DATEMSK cannot be
opened for read- ing.</p>

<p>3 Failed to get file status information.</p>

<p>4 The template file is not a regular file.</p>

<p>5 An error was encountered while reading the template
file.</p>

<p>6 Memory allocation failed (not enough memory
available).</p>

<p>7 There is no line in the file that matches the
input.</p>

<p>8 Invalid input specification.</p>

<p>ENVIRONMENT DATEMSK File containing format patterns.</p>

<p>TZ, LC_TIME Variables used by strptime(3).</p>

<p>CONFORMING TO POSIX.1-2001.</p>

<p>NOTES The POSIX.1-2001 specification for strptime(3)
contains conversion specifications using the %E or %O
modifier, while such specifications are not given for
getdate(). In glibc, getdate() is implemented using
strptime(3), so that precisely the same conversions are
supported by both.</p>

<p>EXAMPLE The program below calls getdate() for each of
its command-line argu- ments, and for each call displays the
values in the fields of the returned tm structure. The
following shell session demonstrates the operation of the
program:</p>

<p>$ TFILE=$PWD/tfile $ echo &rsquo;%A&rsquo; &gt; $TFILE #
Full weekday name $ echo &rsquo;%T&rsquo; &gt;&gt; $TFILE #
ISO date (YYYY-MM-DD) $ echo &rsquo;%F&rsquo; &gt;&gt;
$TFILE # Time (HH:MM:SS) $ date $ export DATEMSK=$TFILE $
./a.out Tuesday &rsquo;2009-12-28&rsquo;
&rsquo;12:22:33&rsquo; Sun Sep 7 06:03:36 CEST 2008 Call 1
(&quot;Tuesday&quot;) succeeded: tm_sec = 36 tm_min = 3
tm_hour = 6 tm_mday = 9 tm_mon = 8 tm_year = 108 tm_wday = 2
tm_yday = 252 tm_isdst = 1 Call 2 (&quot;2009-12-28&quot;)
succeeded: tm_sec = 36 tm_min = 3 tm_hour = 6 tm_mday = 28
tm_mon = 11 tm_year = 109 tm_wday = 1 tm_yday = 361 tm_isdst
= 0 Call 3 (&quot;12:22:33&quot;) succeeded: tm_sec = 33
tm_min = 22 tm_hour = 12 tm_mday = 7 tm_mon = 8 tm_year =
108 tm_wday = 0 tm_yday = 250 tm_isdst = 1</p>

<p>Program source</p>

<p>#define _GNU_SOURCE 500 #include &lt;time.h&gt; #include
&lt;stdio.h&gt; #include &lt;stdlib.h&gt;</p>

<p>int main(int argc, char *argv[]) { struct tm *tmp; int
j;</p>

<p>for (j = 1; j &lt; argc; j++) { tmp =
getdate(argv[j]);</p>

<p>if (tmp == NULL) { printf(&quot;Call %d failed;
getdate_err = %d0, j, getdate_err); continue; }</p>

<p>printf(&quot;Call %d ( printf(&quot; tm_sec = %d0,
tmp-&gt;tm_sec); printf(&quot; tm_min = %d0,
tmp-&gt;tm_min); printf(&quot; tm_hour = %d0,
tmp-&gt;tm_hour); printf(&quot; tm_mday = %d0,
tmp-&gt;tm_mday); printf(&quot; tm_mon = %d0,
tmp-&gt;tm_mon); printf(&quot; tm_year = %d0,
tmp-&gt;tm_year); printf(&quot; tm_wday = %d0,
tmp-&gt;tm_wday); printf(&quot; tm_yday = %d0,
tmp-&gt;tm_yday); printf(&quot; tm_isdst = %d0,
tmp-&gt;tm_isdst); }</p>

<p>exit(EXIT_SUCCESS); }</p>

<p>SEE ALSO time(2), localtime(3), setlocale(3),
strftime(3), strptime(3), fea- ture_test_macros(7)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>2008-09-07 GETDATE(3)</p>
<hr>
</body>
</html>
