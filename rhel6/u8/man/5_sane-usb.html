<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:32:32 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>sane-usb(5) SANE Scanner Access Now Easy sane-usb(5)</p>

<p>NAME sane-usb - USB configuration tips for SANE</p>

<p>DESCRIPTION This manual page contains information on how
to access scanners with a USB interface. It focusses on two
main topics: getting the scanner detected by the operating
system kernel and using it with SANE.</p>

<p>This page applies to USB most backends and scanners, as
they use the generic sanei_usb interface. However, there is
one exceptions: USB Scanners supported by the microtek2
backend need a special USB kernel driver, see
sane-microtek2(5) for details.</p>

<p>QUICK START This is a short HOWTO-like section. For the
full details, read the fol- lowing sections. The goal of
this section is to get the scanner detected by
sane-find-scanner(1).</p>

<p>Run sane-find-scanner. If it lists your scanner with the
correct vendor and product ids, you are done. See section
SANE ISSUES for details on how to go on.</p>

<p>sane-find-scanner doesnt list your scanner? Does it work
as root? If yes, there is a permission issue. See the LIBUSB
section for details.</p>

<p>Nothing is found even as root? Check that your kernel
supports USB and that libusb is installed (see section
LIBUSB).</p>

<p>USB ACCESS METHODS For accessing USB devices, the USB
library libusb is used. There used to exist another method
to access USB devices: the kernel scanner driver. The kernel
scanner driver method is deprecated and shouldnt be used
anymore. It may be removed from SANE at any time. In Linux,
the kernel scanner driver has been removed in the 2.6.*
kernel series. Only libusb access is documented in this
manual page.</p>

<p>LIBUSB SANE can only use libusb 0.1.6 or newer. It needs
to be installed at build-time. Modern Linux distributions
and other operating systems come with libusb.</p>

<p>Libusb can only access your scanner if its not claimed
by the kernel scanner driver. If you want to use libusb,
unload the kernel driver (e.g. rmmod scanner under Linux) or
disable the driver when compiling a new kernel. For Linux,
your kernel needs support for the USB filesystem (usbfs).
For kernels older than 2.4.19, replace &quot;usbfs&quot;
with &quot;usbdevfs&quot; because the name has changed. This
filesystem must be mounted. Thats done automatically at boot
time, if /etc/fstab contains a line like this:</p>

<p>none /proc/bus/usb usbfs defaults 0 0</p>

<p>The permissions for the device files used by libusb must
be adjusted for user access. Otherwise only root can use
SANE devices. For Linux, the devices are located in
/proc/bus/usb/ or in /dev/bus/usb, if you use udev. There
are directories named e.g. &quot;001&quot; (the bus name)
con- taining files &quot;001&quot;, &quot;002&quot; etc.
(the device files). The right device files can be found out
by running scanimage -L as root. Setting permis- sions with
&quot;chmod&quot; is not permanent, however. They will be
reset after reboot or replugging the scanner.</p>

<p>Usually udev or for older distributions the hotplug
utilities are used, which support dynamic setting of access
permissions. SANE comes with udev and hotplug scripts in the
directory tools/udev and tools/hotplug. They can be used for
setting permissions, see /usr/share/doc/sane-back-
ends-1.0.21/README.linux, tools/README and the README in the
tools/hot- plug directory for more details.</p>

<p>For the BSDs, the device files used by libusb are named
/dev/ugen*. Use chmod to apply appropriate permissions.</p>

<p>SANE ISSUES This section assumes that your scanner is
detected by sane-find-scan- ner. It doesnt make sense to go
on, if this is not the case. While sane-find-scanner is able
to detect any USB scanner, actual scanning will only work if
the scanner is supported by a SANE backend. Informa- tion on
the level of support can be found on the SANE webpage
(http://www.sane-project.org/), and the individual backend
manpages.</p>

<p>Most backends can detect USB scanners automatically
using &quot;usb&quot; config- uration file lines. This
method allows to identify scanners by the USB vendor and
product numbers. The syntax for specifying a scanner this
way is:</p>

<p>usb VENDOR PRODUCT</p>

<p>where VENDOR is the USB vendor id, and PRODUCT is the
USB product id of the scanner. Both ids are non-negative
integer numbers in decimal or hexadecimal format. The
correct values for these fields can be found by running
sane-find-scanner, looking into the syslog (e.g.,
/var/log/mes- sages) or under Linux by issuing the command
&quot;cat /proc/bus/usb/devices&quot;. This is an example of
a config file line:</p>

<p>usb 0x055f 0x0006</p>

<p>would have the effect that all USB devices in the system
with a vendor id of 0x55f and a product id of 0x0006 would
be probed and recognized by the backend.</p>

<p>If your scanner is not detected automatically, it may be
necessary to edit the appropriate backend configuration file
before using SANE for the first time. For a detailed
description of each backends configu- ration file, please
refer to the relevant backend manual page (e.g.
sane-mustek_usb(5) for Mustek USB scanners).</p>

<p>Do not create a symlink from /dev/scanner to the USB
device because this link is used by the SCSI backends. The
scanner may be confused if it receives SCSI commands.</p>

<p>ENVIRONMENT SANE_DEBUG_SANEI_USB If the library was
compiled with debug support enabled, this environment
variable controls the debug level for the USB I/O subsystem.
E.g., a value of 128 requests all debug output to be
printed. Smaller levels reduce verbosity. Values greater
than 4 enable libusb debugging (if available). Example:
export SANE_DEBUG_SANEI_USB=4.</p>

<p>SEE ALSO sane(7), sane-find-scanner(1),
sane-&quot;backendname&quot;(5), sane-scsi(5)</p>

<p>AUTHOR Henning Meier-Geinitz
&lt;henning@meier-geinitz.de&gt;</p>

<p>14 Jul 2008 sane-usb(5)</p>
<hr>
</body>
</html>
