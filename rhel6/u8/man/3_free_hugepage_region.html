<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:13:38 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GET_HUGEPAGE_REGION(3) GET_HUGEPAGE_REGION(3)</p>

<p>NAME get_hugepage_region, free_hugepage_region -
Allocate and free regions of memory that use hugepages where
possible</p>

<p>SYNOPSIS #include &lt;hugetlbfs.h&gt;</p>

<p>void *get_hugepage_region(size_t len, ghr_t flags); void
free_hugepage_region(void *ptr);</p>

<p>DESCRIPTION get_hugepage_region() allocates a memory
region len bytes in size backed by hugepages. Hugepages may
be of benefit to applications that use large amounts of
address space and suffer a performance hit due to TLB
misses. Wall-clock time or oprofile can be used to determine
if there is a performance benefit from using hugepages or
not.</p>

<p>Unlike get_huge_pages(), len does not have to be
hugepage-aligned although memory may be wasted due to
alignment. The caller may also specify that base pages be
used in the event there are no hugepages available.</p>

<p>The flags argument changes the behaviour of the
function. Flags may be ord together.</p>

<p>GHR_FALLBACK Use base pages if there are an insufficient
number of huge pages.</p>

<p>GHR_STRICT Use hugepages or return NULL.</p>

<p>GHR_COLOR When specified, bytes that would be wasted due
to alignment are used to color the buffer by offsetting it
by a random cacheline within the hugepage. This avoids a
performance problem whereby multiple buffers use the same
cache lines at the same offsets. If it is not important that
the start of the buffer be page- aligned, specify this
flag.</p>

<p>GHR_DEFAULT The library chooses a sensible combination
of flags for allocat- ing a region of memory. The current
default is: GHR_FALL- BACK | GHR_COLOR</p>

<p>free_hugepage_region() frees a region of memory
allocated by get_hugepage_region(). The behaviour of the
function if another pointer is used, valid or otherwise, is
undefined.</p>

<p>RETURN VALUE On success, a pointer is returned for to
the allocated memory. On error, NULL is returned. errno will
be set based on what the failure of mmap() was due to.</p>

<p>SEE ALSO oprofile(1) , gethugepagesize(3) ,
get_huge_pages(3) , libhugetlbfs(7)</p>

<p>AUTHORS libhugetlbfs was written by various people on
the libhugetlbfs-devel mailing list.</p>

<p>November 7, 2008 GET_HUGEPAGE_REGION(3)</p>
<hr>
</body>
</html>
