<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:05:15 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ATTR_SET(3) XFS Compatibility API ATTR_SET(3)</p>

<p>NAME attr_set, attr_setf - set the value of a user
attribute of a filesystem object</p>

<p>C SYNOPSIS #include &lt;attr/attributes.h&gt;</p>

<p>int attr_set (const char *path, const char *attrname,
const char *attrvalue, const int valuelength, int
flags);</p>

<p>int attr_setf (int fd, const char *attrname, const char
*attrvalue, const int valuelength, int flags);</p>

<p>DESCRIPTION The attr_set and attr_setf functions provide
a way to create attributes and set/change their values.</p>

<p>Path points to a path name for a filesystem object, and
fd refers to the file descriptor associated with a file. If
the attribute attrname does not exist, an attribute with the
given name and value will be cre- ated and associated with
that indicated filesystem object. If an attribute with that
name already exists on that filesystem object, the existing
value is replaced with the new value given in this call. The
new attribute value is copied from the attrvalue buffer for
a total of valuelength bytes. The flags argument can contain
the following sym- bols bitwise ORed together:</p>

<p>ATTR_ROOT Look for attrname in the root address space,
not in the user address space. (limited to use by super-user
only)</p>

<p>ATTR_DONTFOLLOW Do not follow symbolic links when
resolving a path on an attr_set function call. The default
is to follow symbolic links.</p>

<p>ATTR_CREATE Return an error (EEXIST) if an attribute of
the given name already exists on the indicated filesystem
object, otherwise create an attribute with the given name
and value. This flag is used to implement a pure create
operation, without this flag attr_set will create the
attribute if it does not already exist. An error (EINVAL)
will be returned if both ATTR_CREATE and ATTR_REPLACE are
set in the same call.</p>

<p>ATTR_REPLACE Return an error (ENOATTR) if an attribute
of the given name does not already exist on the indicated
filesystem object, otherwise replace the existing
attribute&acute;s value with the given value. This flag is
used to implement a pure replacement operation, without this
flag attr_set will create the attribute if it does not
already exist. An error (EINVAL) will be returned if both
ATTR_CREATE and ATTR_REPLACE are set in the same call.</p>

<p>attr_set will fail if one or more of the following are
true:</p>

<p>[ENOATTR] The attribute name given is not associated
with the indicated filesystem object and the ATTR_REPLACE
flag bit was set.</p>

<p>[E2BIG] The value of the given attribute is too large,
it exceeds the maximum allowable size of an attribute
value.</p>

<p>[EEXIST] The attribute name given is already associated
with the indicated filesystem object and the ATTR_CREATE
flag bit was set.</p>

<p>[ENOENT] The named file does not exist.</p>

<p>[EPERM] The effective user ID does not match the owner
of the file and the effective user ID is not super-user.</p>

<p>[ENOTDIR] A component of the path prefix is not a
directory.</p>

<p>[EACCES] Search permission is denied on a component of
the path prefix.</p>

<p>[EINVAL] A bit was set in the flag argument that is not
defined for this system call, or both the ATTR_CREATE and
ATTR_REPLACE flags bits were set.</p>

<p>[EFAULT] Path, attrname, or attrvalue points outside the
allo- cated address space of the process.</p>

<p>[ELOOP] A path name lookup involved too many symbolic
links.</p>

<p>[ENAMETOOLONG] The length of path exceeds {MAXPATHLEN},
or a pathname component is longer than {MAXNAMELEN}.</p>

<p>attr_setf will fail if:</p>

<p>[ENOATTR] The attribute name given is not associated
with the indicated filesystem object and the ATTR_REPLACE
flag bit was set.</p>

<p>[E2BIG] The value of the given attribute is too large,
it exceeds the maximum allowable size of an attribute
value.</p>

<p>[EEXIST] The attribute name given is already associated
with the indicated filesystem object and the ATTR_CREATE
flag bit was set.</p>

<p>[EINVAL] A bit was set in the flag argument that is not
defined for this system call, or both the ATTR_CREATE and
ATTR_REPLACE flags bits were set, or fd refers to a socket,
not a file.</p>

<p>[EFAULT] Attrname, or attrvalue points outside the
allocated address space of the process.</p>

<p>[EBADF] Fd does not refer to a valid descriptor.</p>

<p>DIAGNOSTICS On success, zero is returned. On error, -1
is returned, and errno is set appropriately.</p>

<p>SEE ALSO attr(1), attr_get(3), attr_list(3),
attr_multi(3), and attr_remove(3).</p>

<p>Dec 2001 Extended Attributes ATTR_SET(3)</p>
<hr>
</body>
</html>
