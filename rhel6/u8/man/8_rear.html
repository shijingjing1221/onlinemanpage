<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:31:12 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>REAR(8) [FIXME: manual] REAR(8)</p>

<p>NAME rear - bare metal disaster recovery and system
migration tool</p>

<p>SYNOPSIS rear [-dDsSvV] [-r KERNEL] COMMAND [--
ARGS...]</p>

<p>DESCRIPTION Relax-and-Recover is the leading Open Source
disaster recovery solution. It is a modular framework with
many ready-to-go workflows for common situations.</p>

<p>Relax-and-Recover produces a bootable image. This image
can repartition the system. Once that is done it initiates a
restore from backup. Restores to different hardware are
possible. Relax-and-Recover can therefore be used as a
migration tool as well.</p>

<p>Currently Relax-and-Recover supports various boot media
(incl. ISO, PXE, OBDR tape, USB or eSATA storage), a variety
of network protocols (incl. sftp, ftp, http, nfs, cifs) for
storage and backup as well as a multitude of backup
strategies (incl. IBM Tivoli Storage Manager, HP
DataProtector, Symantec NetBackup, EMC NetWorker, Bareos,
Bacula, rsync, rbme). This results in a bootable image that
os capable of booting via PXE, DVD/CD, bootable tape or
virtual provisioning.</p>

<p>Relax-and-Recover was designed to be easy to set up,
requires no maintenance and is there to assist when disaster
strikes. Its setup-and-forget nature removes any excuses for
not having a disaster recovery solution implemented.</p>

<p>Recovering from disaster is made very straight-forward
by a 2-step recovery process so that it can be executed by
operational teams when required. When used interactively
(e.g. when used for migrating systems), menus help make
decisions to restore to a new (hardware) environment.</p>

<p>Extending Relax-and-Recover is made possible by its
modular framework. Consistent logging and optionally
extended output help understand the concepts behind
Relax-and-Recover and help debug during development.</p>

<p>Relax-and-Recover comes with ABSOLUTELY NO WARRANTY; for
details see the GNU General Public License at:
http://www.gnu.org/licenses/gpl.html</p>

<p>OPTIONS GLOBAL OPTIONS -d</p>

<p>debug mode (log debug messages to log file)</p>

<p>-D</p>

<p>debugscript mode (log every function call)</p>

<p>-r KERNEL kernel version to use (by default use running
kernel)</p>

<p>-s</p>

<p>simulation mode (show what scripts rear would
include)</p>

<p>-S</p>

<p>step-by-step mode (acknowledge each script
individually)</p>

<p>-v</p>

<p>verbose mode (show progress output)</p>

<p>-V version information</p>

<p>COMMANDS checklayout check if the disk layout has
changed since the last run of mkbackup/mkrescue</p>

<p>dump dump configuration and system information; please
run this to verify your setup</p>

<p>format format and label USB or tape media to be used
with rear;</p>

<p>first argument is the USB or tape device to use, eg.
/dev/sdX or /dev/stX</p>

<p>help print full list of commands and options</p>

<p>mkbackup create rescue media and backup the system (only
for internal backup methods)</p>

<p>mkbackuponly backup the system (only for internal backup
methods) without creating rescue media</p>

<p>mkrescue create rescue media only</p>

<p>recover recover the system; can be used only when
running from the rescue media</p>

<p>validate submit validation information</p>

<p>Use rear -v help for more advanced commands.</p>

<p>BACKGROUND INFORMATION The process of bare metal
disaster recovery consists of two parts:</p>

<p>&middot; Recreate the system layout</p>

<p>&middot; Restore the data to the system</p>

<p>Most backup software solutions are very good at
restoring data but do not support recreating the system
layout. Relax-and-Recover is very good at recreating the
system layout but works best when used together with
supported backup software.</p>

<p>In this combination Relax-and-Recover recreates the
system layout and calls the backup software to restore the
actual data. Thus there is no unnessecary duplicate data
storage and the Relax-and-Recover rescue media can be very
small.</p>

<p>For demonstration and special use purposes
Relax-and-Recover also includes an internal backup method,
NETFS, which can be used to create a simple tar.gz archive
of the system. For all permanent setups we recommend using
something more professional for backup, either a traditional
backup software (open source or commercial) or rsync with
hardlink based solutions, e.g. RSYNC BACKUP MADE EASY.</p>

<p>RESCUE IMAGE CONFIGURATION The OUTPUT variable defines
how from where our rescue image will be booted and the
OUTPUT_URL variable defines where the rescue image should be
send to. Possible OUTPUT setting are:</p>

<p>OUTPUT=RAMDISK Create only the Relax-and-Recover
initramfs.</p>

<p>OUTPUT=ISO</p>

<p>(Default) Create a bootable ISO9660 image on disk as
rear-$(hostname).iso</p>

<p>OUTPUT=PXE Create on a remote PXE/NFS server the
required files (such as configuration file, kernel and
initrd image</p>

<p>OUTPUT=OBDR Create a bootable OBDR tape (optionally
including the backup archive). Specify the OBDR tape device
by using TAPE_DEVICE.</p>

<p>OUTPUT=USB Create a bootable USB disk (using extlinux).
Specify the USB storage device by using USB_DEVICE.</p>

<p>When using OUTPUT=ISO, RAMDISK, OBDR or USB you should
provide the backup target location through the OUTPUT_URL
variable. Possible OUTPUT_URL settings are:</p>

<p>OUTPUT_URL=file:// Write the image to disk. The default
is in /var/lib/rear/output/.</p>

<p>OUTPUT_URL=fish:// Write the image using lftp and the
FISH protocol.</p>

<p>OUTPUT_URL=ftp:// Write the image using lftp and the FTP
protocol.</p>

<p>OUTPUT_URL=ftps:// Write the image using lftp and the
FTPS protocol.</p>

<p>OUTPUT_URL=hftp:// Write the image using lftp and the
HFTP protocol.</p>

<p>OUTPUT_URL=http:// Write the image using lftp and the
HTTP (PUT) procotol.</p>

<p>OUTPUT_URL=https:// Write the image using lftp and the
HTTPS (PUT) protocol.</p>

<p>OUTPUT_URL=sftp:// Write the image using lftp and the
secure FTP (SFTP) protocol.</p>

<p>OUTPUT_URL=rsync:// Write the image using rsync and the
RSYNC protocol (SSH only).</p>

<p>OUTPUT_URL=sshfs:// Write the image using sshfs and the
SSH protocol.</p>

<p>OUTPUT_URL=null Do not copy the ISO image from
/var/lib/rear/output/ to an external destination. Useful in
combination with an external backup program, or when
BACKUP_URL=iso://backup</p>

<p>BACKUP SOFTWARE INTEGRATION Currently Relax-and-Recover
supports the following backup methods. Please distinguish
carefully between Relax-and-Recover support for 3rd party
backup software and Relax-and-Recover internal backup
methods. The latter also creates a backup of your data while
the former will only integrate Relax-and-Recover with the
backup software to restore the data with the help of the
backup software without actually creating backups. This
means that for all non-internal backup software you must
take care of creating backups yourself.</p>

<p>Especially the rear mkbackup command can be confusing as
it is only useful for the internal backup methods and has no
function at all with the other (external) backup
methods.</p>

<p>The following backup methods need to be set in
Relax-and-Recover with the BACKUP option. As mentioned we
have two types of BACKUP methods - internal and
external.</p>

<p>The following BACKUP methods are external of
Relax-and-Recover meaning that you are responsible of
backups being made:</p>

<p>BACKUP=REQUESTRESTORE</p>

<p>(default) Not really a backup method at all,
Relax-and-Recover simply halts the recovery and requests
that somebody will restore the data to the appropriate
location (e.g. via SSH). This method works especially well
with an rsync bases backup that is pushed back to the backup
client.</p>

<p>BACKUP=EXTERNAL Internal backup method that uses an
arbitrary external command to create a backup and restore
the data.</p>

<p>BACKUP=DP Use HP Data Protector to restore the data.</p>

<p>BACKUP=GALAXY Use CommVault Galaxy 5 to restore the
data.</p>

<p>BACKUP=GALAXY7 Use CommVault Galaxy 7 to restore the
data.</p>

<p>BACKUP=GALAXY10 Use CommVault Galaxy 10 (or Simpana 10)
to restore the data.</p>

<p>BACKUP=NBU Use Symantec NetBackup to restore the
data.</p>

<p>BACKUP=TSM Use IBM Tivoli Storage Manager to restore the
data. The Relax-and-Recover result files (e.g. ISO image)
are also saved into TSM.</p>

<p>BACKUP=NSR Using EMC NetWorker (Legato) to restore the
data.</p>

<p>BACKUP=SESAM Using SEP Sesam to restore the data.</p>

<p>BACKUP=RBME Use Rsync Backup Made Easy (rbme) to restore
the data.</p>

<p>BACKUP=BAREOS Use Open Source backup solution BAREOS (a
fork a BUCULA) to restore the data.</p>

<p>BACKUP=BACULA Use Open Source backup solution BACULA to
restore the data.</p>

<p>BACKUP=DUPLICITY Use encrypted bandwidth-efficient
backup solution using the rsync algorithm to restore the
data.</p>

<p>The following BACKUP methods are internal of
Relax-and-Recover:</p>

<p>BACKUP=NETFS Internal backup method which can be used to
create a simple backup (tar archive).</p>

<p>BACKUP=RSYNC Use rsync to restore data.</p>

<p>If your favourite backup software is missing from this
list, please submit a patch or ask us to implement it for
you.</p>

<p>When using BACKUP=NETFS you should provide the backup
target location through the BACKUP_URL variable. Possible
BACKUP_URL settings are:</p>

<p>BACKUP_URL=file:// To backup to local disk, use
BACKUP_URL=file:///directory/path/</p>

<p>BACKUP_URL=nfs:// To backup to NFS disk, use
BACKUP_URL=nfs://nfs-server-name/share/path</p>

<p>BACKUP_URL=tape:// To backup to tape device, use
BACKUP_URL=tape:///dev/nst0 or alternatively, simply define
TAPE_DEVICE=/dev/nst0</p>

<p>BACKUP_URL=cifs:// To backup to a Samba share (CIFS),
use BACKUP_URL=cifs://cifs-server-name/share/path. To
provide credentials for CIFS mounting use a /etc/rear/.cifs
credentials file and define
BACKUP_OPTIONS=&quot;cred=/etc/rear/.cifs&quot; and pass
along:</p>

<p>username=_username_ password=_secret password_
domain=_domain_</p>

<p>BACKUP_URL=usb:// To backup to USB storage device, use
BACKUP_URL=usb:///dev/disk/by-path/REAR-000 or use a real
device node or a specific filesystem label. Alternatively,
you can specify the device using
USB_DEVICE=/dev/disk/by-path/REAR-000.</p>

<p>If you combine this with OUTPUT=USB you will end up with
a bootable USB device.</p>

<p>BACKUP_URL=sshfs:// To backup to a remote server via
sshfs (SSH protocol), use
BACKUP_URL=sshfs://user@remote-system.domain.org/home/user/backup-dir/</p>

<p>It is advisable to add ServerAliveInterval 15 in the
/root/.ssh/config file for the remote system
(remote-system.domain.org).</p>

<p>BACKUP_URL=iso:// To include the backup within the ISO
image. It is important that the BACKUP_URL and OUTPUT_URL
variables are different. E.g.</p>

<p>BACKUP_URL=iso:///backup/
OUTPUT_URL=nfs://server/path/</p>

<p>When using BACKUP=NETFS there is an option to select a
BACKUP_TYPE=incremental to have rear make incrementals until
the next FULLBACKUPDAY=&quot;Mon&quot; has reached.</p>

<p>CONFIGURATION To configure Relax-and-Recover you have to
edit the configuration files in /etc/rear/. All *.conf files
there are part of the configuration, but only site.conf and
local.conf are intended for the user configuration. All
other configuration files hold defaults for various
distributions and should not be changed.</p>

<p>In /etc/rear/templates/ there are also some template
files which are used by Relax-and-Recover to create
configuration files (mostly for the boot environment).
Modify the templates to adjust the information contained in
the emails produced by Relax-and-Recover. You can use these
templates to prepend your own configurations to the
configuration files created by Relax-and-recover, for
example you can edit PXE_pxelinux.cfg to add some general
pxelinux configuration you use.</p>

<p>In almost all circumstances you have to configure two
main settings and their parameters: The backup method and
the output method.</p>

<p>The backup method defines, how your data was saved and
wether Relax-and-Recover should backup your data as part of
the mkrescue process or wether you use an external
application, e.g. backup software to archive your data.</p>

<p>The output method defines how the rescue system is
written to disk and how you plan to boot the failed computer
from the rescue system.</p>

<p>See the default configuration file
/usr/share/rear/conf/default.conf for an overview of the
possible methods and their options.</p>

<p>An example to use TSM for backup and ISO for output
would be to add these lines to /etc/rear/local.conf (no need
to define a BACKUP_URL when using an external backup
solution):</p>

<p>BACKUP=TSM OUTPUT=ISO</p>

<p>And if all your systems use NTP for time
synchronisation, you can also add these lines to
/etc/rear/site.conf</p>

<p>TIMESYNC=NTP</p>

<p>Do not forget to distribute the site.conf to all your
systems.</p>

<p>The resulting ISO image will be created in
/var/lib/rear/output/. You can now modify the behaviour by
copying the appropriate configuration variables from
default.conf to local.conf and changing them to suit your
environment.</p>

<p>EXIT STATUS 0 Successful program execution.</p>

<p>&gt;0 Usage, syntax or execution errors. Check the log
file in /var/log/rear/ for more information.</p>

<p>EXAMPLES To print out the current settings for BACKUP
and OUTPUT methods and some system information. This command
can be used to see the supported features for the given
release and platform.</p>

<p># rear dump</p>

<p>To create a new rescue environment. Do not forget to
copy the resulting rescue system away so that you can use it
in the case of a system failure.</p>

<p># rear -v mkrescue</p>

<p>To create a new rescue image together with a complete
archive of your local system run the command:</p>

<p># rear -v mkbackup</p>

<p>FILES /usr/sbin/rear The program itself.</p>

<p>/etc/rear/local.conf System specific configuration can
be set here.</p>

<p>/etc/rear/site.conf Site specific configuration can be
set here (not created by default).</p>

<p>/var/log/rear/ Directory holding the log files.</p>

<p>/tmp/rear.#### Relax-and-Recover working directory. If
Relax-and-Recover exits with an error, you must remove this
directory manually.</p>

<p>/usr/share/rear Relax-and-Recover script components.</p>

<p>/usr/share/rear/conf/default.conf Relax-and-Recover
default values. Contains a complete set of parameters and
its explanation. Please do not edit or modify. Copy values
to local.conf or site.conf instead.</p>

<p>BUGS Feedback is welcome, please report any issues or
improvements to our issue-tracker at:
http://github.com/rear/issues/</p>

<p>Furthermore, we welcome pull requests via GitHub.</p>

<p>SEE ALSO Relax-and-Recover comes with extensive
documentation located in /usr/share/doc.</p>

<p>AUTHORS Gratien Dhaese, Schlomo Schapiro, Jeroen Hoekx
and Dag Wieers.</p>

<p>Lars Pinne (original man page).</p>

<p>Relax-and-Recover is a collaborative process using
Github at: http://github.com/rear/</p>

<p>The Relax-and-Recover website is located at:
http://relax-and-recover.org/</p>

<p>COPYRIGHT (c) 2006-2015</p>

<p>Schlomo Schapiro</p>

<p>Gratien Dhaese, IT3 Consultants</p>

<p>Jeroen Hoekx</p>

<p>Dag Wieers, Dagit Linux Solutions</p>

<p>Relax-and-Recover comes with ABSOLUTELY NO WARRANTY; for
details see the GNU General Public License at
http://www.gnu.org/licenses/gpl.html</p>

<p>[FIXME: source] 08/31/2015 REAR(8)</p>
<hr>
</body>
</html>
