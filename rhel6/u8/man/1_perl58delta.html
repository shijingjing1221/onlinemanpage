<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:27:28 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERL58DELTA(1) Perl Programmers Reference Guide
PERL58DELTA(1)</p>

<p>NAME perl58delta - what is new for perl v5.8.0</p>

<p>DESCRIPTION This document describes differences between
the 5.6.0 release and the 5.8.0 release.</p>

<p>Many of the bug fixes in 5.8.0 were already seen in the
5.6.1 maintenance release since the two releases were kept
closely coordinated (while 5.8.0 was still called
5.7.something).</p>

<p>Changes that were integrated into the 5.6.1 release are
marked &quot;[561]&quot;. Many of these changes have been
further developed since 5.6.1 was released, those are marked
&quot;[561+]&quot;.</p>

<p>You can see the list of changes in the 5.6.1 release
(both from the 5.005_03 release and the 5.6.0 release) by
reading perl561delta.</p>

<p>Highlights In 5.8.0 &middot; Better Unicode support</p>

<p>&middot; New IO Implementation</p>

<p>&middot; New Thread Implementation</p>

<p>&middot; Better Numeric Accuracy</p>

<p>&middot; Safe Signals</p>

<p>&middot; Many New Modules</p>

<p>&middot; More Extensive Regression Testing</p>

<p>Incompatible Changes Binary Incompatibility Perl 5.8 is
not binary compatible with earlier releases of Perl.</p>

<p>You have to recompile your XS modules.</p>

<p>(Pure Perl modules should continue to work.)</p>

<p>The major reason for the discontinuity is the new IO
architecture called PerlIO. PerlIO is the default
configuration because without it many new features of Perl
5.8 cannot be used. In other words: you just have to
recompile your modules containing XS code, sorry about
that.</p>

<p>In future releases of Perl, non-PerlIO aware XS modules
may become completely unsupported. This shouldnt be too
difficult for module authors, however: PerlIO has been
designed as a drop-in replacement (at the source code level)
for the stdio interface.</p>

<p>Depending on your platform, there are also other reasons
why we decided to break binary compatibility, please read
on.</p>

<p>64-bit platforms and malloc If your pointers are 64 bits
wide, the Perl malloc is no longer being used because it
does not work well with 8-byte pointers. Also, usually the
system mallocs on such platforms are much better optimized
for such large memory models than the Perl malloc. Some
memory-hungry Perl applications like the PDL don t work well
with Perls malloc. Finally, other applications than Perl
(such as mod_perl) tend to prefer the system malloc. Such
platforms include Alpha and 64-bit HPPA, MIPS, PPC, and
Sparc.</p>

<p>AIX Dynaloading The AIX dynaloading now uses in AIX
releases 4.3 and newer the native dlopen interface of AIX
instead of the old emulated interface. This change will
probably break backward compatibility with compiled modules.
The change was made to make Perl more compliant with other
applications like mod_perl which are using the AIX native
interface.</p>

<p>Attributes for &quot;my&quot; variables now handled at
run-time The &quot;my EXPR : ATTRS&quot; syntax now applies
variable attributes at run- time. (Subroutine and
&quot;our&quot; variables still get attributes applied at
compile-time.) See attributes for additional details. In
particular, however, this allows variable attributes to be
useful for &quot;tie&quot; interfaces, which was a
deficiency of earlier releases. Note that the new semantics
doesnt work with the Attribute::Handlers module (as of
version 0.76).</p>

<p>Socket Extension Dynamic in VMS The Socket extension is
now dynamically loaded instead of being statically built in.
This may or may not be a problem with ancient TCP/IP stacks
of VMS: we do not know since we werent able to test Perl in
such configurations.</p>

<p>IEEE-format Floating Point Default on OpenVMS Alpha Perl
now uses IEEE format (T_FLOAT) as the default internal
floating point format on OpenVMS Alpha, potentially breaking
binary compatibility with external libraries or existing
data. G_FLOAT is still available as a configuration option.
The default on VAX (D_FLOAT) has not changed.</p>

<p>New Unicode Semantics (no more &quot;use utf8&quot;,
almost) Previously in Perl 5.6 to use Unicode one would say
&quot;use utf8&quot; and then the operations (like string
concatenation) were Unicode-aware in that lexical scope.</p>

<p>This was found to be an inconvenient interface, and in
Perl 5.8 the Unicode model has completely changed: now the
&quot;Unicodeness&quot; is bound to the data itself, and for
most of the time &quot;use utf8&quot; is not needed at all.
The only remaining use of &quot;use utf8&quot; is when the
Perl script itself has been written in the UTF-8 encoding of
Unicode. (UTF-8 has not been made the default since there
are many Perl scripts out there that are using various
national eight-bit character sets, which would be illegal in
UTF-8.)</p>

<p>See perluniintro for the explanation of the current
model, and utf8 for the current use of the utf8 pragma.</p>

<p>New Unicode Properties Unicode scripts are now
supported. Scripts are similar to (and superior to) Unicode
blocks. The difference between scripts and blocks is that
scripts are the glyphs used by a language or a group of
languages, while the blocks are more artificial groupings of
(mostly) 256 characters based on the Unicode numbering.</p>

<p>In general, scripts are more inclusive, but not
universally so. For example, while the script
&quot;Latin&quot; includes all the Latin characters and
their various diacritic-adorned versions, it does not
include the various punctuation or digits (since they are
not solely &quot;Latin&quot;).</p>

<p>A number of other properties are now supported,
including &quot;{L&amp;}&quot;, &quot;{Any}&quot;
&quot;{Assigned}&quot;, &quot;{Unassigned}&quot;,
&quot;{Blank}&quot; [561] and &quot;{SpacePerl}&quot; [561]
(along with their &quot;P{...}&quot; versions, of course).
See perlunicode for details, and more additions.</p>

<p>The &quot;In&quot; or &quot;Is&quot; prefix to names
used with the &quot;{...}&quot; and &quot;P{...}&quot; are
now almost always optional. The only exception is that a
&quot;In&quot; prefix is required to signify a Unicode block
when a block name conflicts with a script name. For example,
&quot;{Tibetan}&quot; refers to the script, while
&quot;{InTibetan}&quot; refers to the block. When there is
no name conflict, you can omit the &quot;In&quot; from the
block name (e.g. &quot;{BraillePatterns}&quot;), but to be
safe, its probably best to always use the
&quot;In&quot;).</p>

<p>REF(...) Instead Of SCALAR(...) A reference to a
reference now stringifies as &quot;REF(0x81485ec)&quot;
instead of &quot;SCALAR(0x81485ec)&quot; in order to be more
consistent with the return value of ref().</p>

<p>pack/unpack D/F recycled The undocumented pack/unpack
template letters D/F have been recycled for better use: now
they stand for long double (if supported by the platform)
and NV (Perl internal floating point type). (They used to be
aliases for d/f, but you never knew that.)</p>

<p>glob() now returns filenames in alphabetical order The
list of filenames from glob() (or &lt;...&gt;) is now by
default sorted alphabetically to be csh-compliant (which is
what happened before in most UNIX platforms). (bsd_glob()
does still sort platform natively, ASCII or EBCDIC, unless
GLOB_ALPHASORT is specified.) [561]</p>

<p>Deprecations &middot; The semantics of bless(REF, REF)
were unclear and until someone proves it to make some sense,
it is forbidden.</p>

<p>&middot; The obsolete chat2 library that should never
have been allowed to escape the laboratory has been
decommissioned.</p>

<p>&middot; Using chdir(&quot;&quot;) or chdir(undef)
instead of explicit chdir() is doubtful. A failure (think
chdir(some_function()) can lead into unintended chdir() to
the home directory, therefore this behaviour is
deprecated.</p>

<p>&middot; The builtin dump() function has probably
outlived most of its usefulness. The core-dumping
functionality will remain in future available as an explicit
call to &quot;CORE::dump()&quot;, but in future releases the
behaviour of an unqualified &quot;dump()&quot; call may
change.</p>

<p>&middot; The very dusty examples in the eg/ directory
have been removed. Suggestions for new shiny examples
welcome but the main issue is that the examples need to be
documented, tested and (most importantly) maintained.</p>

<p>&middot; The (bogus) escape sequences 8 and 9 now give
an optional warning (&quot;Unrecognized escape passed
through&quot;). There is no need to &minus;escape any
&quot;264</p>

<p>&middot; The *glob{FILEHANDLE} is deprecated, use
*glob{IO} instead.</p>

<p>&middot; The &quot;package;&quot; syntax
(&quot;package&quot; without an argument) has been
deprecated. Its semantics were never that clear and its
implementation even less so. If you have used that feature
to disallow all but fully qualified variables, &quot;use
strict;&quot; instead.</p>

<p>&middot; The unimplemented POSIX regex features [[.cc.]]
and [[=c=]] are still recognised but now cause fatal errors.
The previous behaviour of ignoring them by default and
warning if requested was unacceptable since it, in a way,
falsely promised that the features could be used.</p>

<p>&middot; In future releases, non-PerlIO aware XS modules
may become completely unsupported. Since PerlIO is a drop-in
replacement for stdio at the source code level, this
shouldnt be that drastic a change.</p>

<p>&middot; Previous versions of perl and some readings of
some sections of Camel III implied that the &quot;:raw&quot;
&quot;discipline&quot; was the inverse of &quot;:crlf&quot;.
Turning off &quot;clrfness&quot; is no longer enough to make
a stream truly binary. So the PerlIO &quot;:raw&quot; layer
(or &quot;discipline&quot;, to use the Camel book s older
terminology) is now formally defined as being equivalent to
binmode(FH) - which is in turn defined as doing whatever is
necessary to pass each byte as-is without any translation.
In particular binmode(FH) - and hence &quot;:raw&quot; -
will now turn off both CRLF and UTF-8 translation and remove
other layers (e.g. :encoding()) which would modify byte
stream.</p>

<p>&middot; The current user-visible implementation of
pseudo-hashes (the weird use of the first array element) is
deprecated starting from Perl 5.8.0 and will be removed in
Perl 5.10.0, and the feature will be implemented
differently. Not only is the current interface rather ugly,
but the current implementation slows down normal array and
hash use quite noticeably. The &quot;fields&quot; pragma
interface will remain available. The restricted hashes
interface is expected to be the replacement interface (see
Hash::Util). If your existing programs depends on the
underlying implementation, consider using Class::PseudoHash
from CPAN.</p>

<p>&middot; The syntaxes &quot;@a-&gt;[...]&quot; and
&quot;%h-&gt;{...}&quot; have now been deprecated.</p>

<p>&middot; After years of trying, suidperl is considered
to be too complex to ever be considered truly secure. The
suidperl functionality is likely to be removed in a future
release.</p>

<p>&middot; The 5.005 threads model (module
&quot;Thread&quot;) is deprecated and expected to be removed
in Perl 5.10. Multithreaded code should be migrated to the
new ithreads model (see threads, threads::shared and
perlthrtut).</p>

<p>&middot; The long deprecated uppercase aliases for the
string comparison operators (EQ, NE, LT, LE, GE, GT) have
now been removed.</p>

<p>&middot; The tr///C and tr///U features have been
removed and will not return; the interface was a mistake.
Sorry about that. For similar functionality, see pack(U0,
...) and pack(C0 , ...). [561]</p>

<p>&middot; Earlier Perls treated &quot;sub foo
(@bar)&quot; as equivalent to &quot;sub foo (@)&quot;. The
prototypes are now checked better at compile-time for
invalid syntax. An optional warning is generated
(&quot;Illegal character in prototype...&quot;) but this may
be upgraded to a fatal error in a future release.</p>

<p>&middot; The &quot;exec LIST&quot; and &quot;system
LIST&quot; operations now produce warnings on tainted data
and in some future release they will produce fatal
errors.</p>

<p>&middot; The existing behaviour when localising tied
arrays and hashes is wrong, and will be changed in a future
release, so do not rely on the existing behaviour. See
&quot;Localising Tied Arrays and Hashes Is Broken&quot;.</p>

<p>Core Enhancements Unicode Overhaul Unicode in general
should be now much more usable than in Perl 5.6.0 (or even
in 5.6.1). Unicode can be used in hash keys, Unicode in
regular expressions should work now, Unicode in tr/// should
work now, Unicode in I/O should work now. See perluniintro
for introduction and perlunicode for details.</p>

<p>&middot; The Unicode Character Database coming with Perl
has been upgraded to Unicode 3.2.0. For more information,
see http://www.unicode.org/ . [561+] (5.6.1 has UCD
3.0.1.)</p>

<p>&middot; For developers interested in enhancing Perl s
Unicode capabilities: almost all the UCD files are included
with the Perl distribution in the lib/unicore subdirectory.
The most notable omission, for space considerations, is the
Unihan database.</p>

<p>&middot; The properties {Blank} and {SpacePerl} have
been added. &quot;Blank&quot; is like C isblank(), that is,
it contains only &quot;horizontal whitespace&quot; (the
space character is, the newline isn t), and the
&quot;SpacePerl&quot; is the Unicode equivalent of
&quot;{Space} isn t, since that includes the vertical
tabulator character, whereas &quot; doesnt.)</p>

<p>See &quot;New Unicode Properties&quot; earlier in this
document for additional information on changes with Unicode
properties.</p>

<p>PerlIO is Now The Default &middot; IO is now by default
done via PerlIO rather than systems &quot;stdio&quot;.
PerlIO allows &quot;layers&quot; to be &quot;pushed&quot;
onto a file handle to alter the handle s behaviour. Layers
can be specified at open time via 3-arg form of open:</p>

<p>open($fh,&rsquo;&gt;:crlf :utf8&rsquo;, $path) ||
...</p>

<p>or on already opened handles via extended
&quot;binmode&quot;:</p>

<p>binmode($fh,&rsquo;:encoding(iso-8859-7)&rsquo;);</p>

<p>The built-in layers are: unix (low level read/write),
stdio (as in previous Perls), perlio (re-implementation of
stdio buffering in a portable manner), crlf (does CRLF
&lt;=&gt; &quot;0 translation as on Win32, but available on
any platform). A mmap layer may be available if platform
supports it (mostly UNIXes).</p>

<p>Layers to be applied by default may be specified via the
open pragma.</p>

<p>See &quot;Installation and Configuration
Improvements&quot; for the effects of PerlIO on your
architecture name.</p>

<p>&middot; If your platform supports fork(), you can use
the list form of &quot;open&quot; for pipes. For
example:</p>

<p>open KID_PS, &quot;-|&quot;, &quot;ps&quot;,
&quot;aux&quot; or die $!;</p>

<p>forks the ps(1) command (without spawning a shell, as
there are more than three arguments to open()), and reads
its standard output via the &quot;KID_PS&quot; filehandle.
See perlipc.</p>

<p>&middot; File handles can be marked as accepting Perls
internal encoding of Unicode (UTF-8 or UTF-EBCDIC depending
on platform) by a pseudo layer &quot;:utf8&quot; :</p>


<p>open($fh,&quot;&gt;:utf8&quot;,&quot;Uni.txt&quot;);</p>

<p>Note for EBCDIC users: the pseudo layer
&quot;:utf8&quot; is erroneously named for you since its not
UTF-8 what you will be getting but instead UTF-EBCDIC. See
perlunicode, utf8, and
http://www.unicode.org/unicode/reports/tr16/ for more
information. In future releases this naming may change. See
perluniintro for more information about UTF-8.</p>

<p>&middot; If your environment variables (LC_ALL,
LC_CTYPE, LANG) look like you want to use UTF-8 (any of the
variables match &quot;/utf-?8/i&quot;), your STDIN, STDOUT,
STDERR handles and the default open layer (see open) are
marked as UTF-8. (This feature, like other new features that
combine Unicode and I/O, work only if you are using PerlIO,
but thats the default.)</p>

<p>Note that after this Perl really does assume that
everything is UTF-8: for example if some input handle is
not, Perl will probably very soon complain about the input
data like this &quot;Malformed UTF-8 ...&quot; since any old
eight-bit data is not legal UTF-8.</p>

<p>Note for code authors: if you want to enable your users
to use UTF-8 as their default encoding but in your code
still have eight- bit I/O streams (such as images or zip
files), you need to explicitly open() or binmode() with
&quot;:bytes&quot; (see &quot;open&quot; in perlfunc and
&quot;binmode&quot; in perlfunc), or you can just use
&quot;binmode(FH)&quot; (nice for pre-5.8.0 backward
compatibility).</p>

<p>&middot; File handles can translate character encodings
from/to Perls internal Unicode form on read/write via the
&quot;:encoding()&quot; layer.</p>

<p>&middot; File handles can be opened to &quot;in
memory&quot; files held in Perl scalars via:</p>

<p>open($fh,&rsquo;&gt;&rsquo;, ariable) || ...</p>

<p>&middot; Anonymous temporary files are available without
need to use FileHandle or other module via</p>

<p>open($fh,&quot;+&gt;&quot;, undef) || ...</p>

<p>That is a literal undef, not an undefined value.</p>

<p>ithreads The new interpreter threads
(&quot;ithreads&quot; for short) implementation of
multithreading, by Arthur Bergman, replaces the old
&quot;5.005 threads&quot; implementation. In the ithreads
model any data sharing between threads must be explicit, as
opposed to the model where data sharing was implicit. See
threads and threads::shared, and perlthrtut.</p>

<p>As a part of the ithreads implementation Perl will also
use any necessary and detectable reentrant libc
interfaces.</p>

<p>Restricted Hashes A restricted hash is restricted to a
certain set of keys, no keys outside the set can be added.
Also individual keys can be restricted so that the key
cannot be deleted and the value cannot be changed. No new
syntax is involved: the Hash::Util module is the
interface.</p>

<p>Safe Signals Perl used to be fragile in that signals
arriving at inopportune moments could corrupt Perl s
internal state. Now Perl postpones handling of signals until
its safe (between opcodes).</p>

<p>This change may have surprising side effects because
signals no longer interrupt Perl instantly. Perl will now
first finish whatever it was doing, like finishing an
internal operation (like sort()) or an external operation
(like an I/O operation), and only then look at any arrived
signals (and before starting the next operation). No more
corrupt internal state since the current operation is always
finished first, but the signal may take more time to get
heard. Note that breaking out from potentially blocking
operations should still work, though.</p>

<p>Understanding of Numbers In general a lot of fixing has
happened in the area of Perls understanding of numbers, both
integer and floating point. Since in many systems the
standard number parsing functions like &quot;strtoul()&quot;
and &quot;atof()&quot; seem to have bugs, Perl tries to work
around their deficiencies. This results hopefully in more
accurate numbers.</p>

<p>Perl now tries internally to use integer values in
numeric conversions and basic arithmetics (+ - * /) if the
arguments are integers, and tries also to keep the results
stored internally as integers. This change leads to often
slightly faster and always less lossy arithmetics.
(Previously Perl always preferred floating point numbers in
its math.)</p>

<p>Arrays now always interpolate into double-quoted strings
[561] In double-quoted strings, arrays now interpolate, no
matter what. The behavior in earlier versions of perl 5 was
that arrays would interpolate into strings if the array had
been mentioned before the string was compiled, and otherwise
Perl would raise a fatal compile- time error. In versions
5.000 through 5.003, the error was</p>

<p>Literal @example now requires backslash</p>

<p>In versions 5.004_01 through 5.6.0, the error was</p>

<p>In string, @example now must be written as @example</p>

<p>The idea here was to get people into the habit of
writing &quot;fred@example.com&quot; when they wanted a
literal &quot;@&quot; sign, just as they have always written
&quot;Give me back my &quot; when they wanted a literal
&quot;$&quot; sign.</p>

<p>Starting with 5.6.1, when Perl now sees an &quot;@&quot;
sign in a double-quoted string, it always attempts to
interpolate an array, regardless of whether or not the array
has been used or declared already. The fatal error has been
downgraded to an optional warning:</p>

<p>Possible unintended interpolation of @example in
string</p>

<p>This warns you that &quot;fred@example.com&quot; is
going to turn into &quot;fred.com&quot; if you dont
backslash the &quot;@&quot;. See
http://www.plover.com/~mjd/perl/at-error.html for more
details about the history here.</p>

<p>Miscellaneous Changes &middot; AUTOLOAD is now
lvaluable, meaning that you can add the :lvalue attribute to
AUTOLOAD subroutines and you can assign to the AUTOLOAD
return value.</p>

<p>&middot; The $Config{byteorder} (and corresponding
BYTEORDER in config.h) was previously wrong in platforms if
sizeof(long) was 4, but sizeof(IV) was 8. The byteorder was
only sizeof(long) bytes long (1234 or 4321), but now it is
correctly sizeof(IV) bytes long, (12345678 or 87654321).
(This problem didnt affect Windows platforms.)</p>

<p>Also, $Config{byteorder} is now computed
dynamically--this is more robust with &quot;fat
binaries&quot; where an executable image contains binaries
for more than one binary platform, and when cross-
compiling.</p>

<p>&middot; &quot;perl -d:Module=arg,arg,arg&quot; now
works (previously one couldnt pass in multiple
arguments.)</p>

<p>&middot; &quot;do&quot; followed by a bareword now
ensures that this bareword isnt a keyword (to avoid a bug
where &quot;do q(foo.pl)&quot; tried to call a subroutine
called &quot;q&quot;). This means that for example instead
of &quot;do format()&quot; you must write &quot;do
&amp;format()&quot;.</p>

<p>&middot; The builtin dump() now gives an optional
warning &quot;dump() better written as CORE::dump()&quot;,
meaning that by default &quot;dump(...)&quot; is resolved as
the builtin dump() which dumps core and aborts, not as
(possibly) user-defined &quot;sub dump&quot;. To call the
latter, qualify the call as &quot;&amp;dump(...)&quot;. (The
whole dump() feature is to considered deprecated, and
possibly removed/changed in future releases.)</p>

<p>&middot; chomp() and chop() are now overridable. Note,
however, that their prototype (as given by
&quot;prototype(&quot;CORE::chomp&quot;)&quot; is undefined,
because it cannot be expressed and therefore one cannot
really write replacements to override these builtins.</p>

<p>&middot; END blocks are now run even if you exit/die in
a BEGIN block. Internally, the execution of END blocks is
now controlled by PL_exit_flags &amp;
PERL_EXIT_DESTRUCT_END. This enables the new behaviour for
Perl embedders. This will default in 5.10. See
perlembed.</p>

<p>&middot; Formats now support zero-padded decimal
fields.</p>

<p>&middot; Although &quot;you shouldnt do that&quot;, it
was possible to write code that depends on Perls hashed key
order (Data::Dumper does this). The new algorithm
&quot;One-at-a-Time&quot; produces a different hashed key
order. More details are in &quot;Performance
Enhancements&quot;.</p>

<p>&middot; lstat(FILEHANDLE) now gives a warning because
the operation makes no sense. In future releases this may
become a fatal error.</p>

<p>&middot; Spurious syntax errors generated in certain
situations, when glob() caused File::Glob to be loaded for
the first time, have been fixed. [561]</p>

<p>&middot; Lvalue subroutines can now return
&quot;undef&quot; in list context. However, the lvalue
subroutine feature still remains experimental. [561+]</p>

<p>&middot; A lost warning &quot;Cant declare ...
dereference in my&quot; has been restored (Perl had it
earlier but it became lost in later releases.)</p>

<p>&middot; A new special regular expression variable has
been introduced: $^N, which contains the most-recently
closed group (submatch).</p>

<p>&middot; &quot;no Module;&quot; does not produce an
error even if Module does not have an unimport() method.
This parallels the behavior of &quot;use&quot; vis-a- vis
&quot;import&quot;. [561]</p>

<p>&middot; The numerical comparison operators return
&quot;undef&quot; if either operand is a NaN. Previously the
behaviour was unspecified.</p>

<p>&middot; &quot;our&quot; can now have an experimental
optional attribute &quot;unique&quot; that affects how
global variables are shared among multiple interpreters, see
&quot;our&quot; in perlfunc.</p>

<p>&middot; The following builtin functions are now
overridable: each(), keys(), pop(), push(), shift(),
splice(), unshift(). [561]</p>

<p>&middot; &quot;pack() / unpack()&quot; can now group
template letters with &quot;()&quot; and then apply
repetition/count modifiers on the groups.</p>

<p>&middot; &quot;pack() / unpack()&quot; can now process
the Perl internal numeric types: IVs, UVs, NVs-- and also
long doubles, if supported by the platform. The template
letters are &quot;j&quot;, &quot;J&quot;, &quot;F&quot;, and
&quot;D&quot;.</p>

<p>&middot; &quot;pack(&rsquo;U0a*&rsquo;, ...)&quot; can
now be used to force a string to UTF-8.</p>

<p>&middot; my __PACKAGE__ $obj now works. [561]</p>

<p>&middot; POSIX::sleep() now returns the number of
unslept seconds (as the POSIX standard says), as opposed to
CORE::sleep() which returns the number of slept seconds.</p>

<p>&middot; printf() and sprintf() now support parameter
reordering using the &quot;%+ and &quot;*+ syntaxes. For
example</p>

<p>printf &quot;%2 %10, &quot;foo&quot;,
&quot;bar&quot;;</p>

<p>will print &quot;bar foo0. This feature helps in writing
internationalised software, and in general when the order of
the parameters can vary.</p>

<p>&middot; The () prototype now works properly. [561]</p>

<p>&middot; prototype() is now available to implicitly
create references (useful for example if you want to emulate
the tie() interface).</p>

<p>&middot; A new command-line option, &quot;-t&quot; is
available. It is the little brother of &quot;-T&quot;:
instead of dying on taint violations, lexical warnings are
given. This is only meant as a temporary debugging aid while
securing the code of old legacy applications. This is not a
substitute for -T.</p>

<p>&middot; In other taint news, the &quot;exec LIST&quot;
and &quot;system LIST&quot; have now been considered too
risky (think &quot;exec @ARGV&quot;: it can start any
program with any arguments), and now the said forms cause a
warning under lexical warnings. You should carefully launder
the arguments to guarantee their validity. In future
releases of Perl the forms will become fatal errors so
consider starting laundering now.</p>

<p>&middot; Tied hash interfaces are now required to have
the EXISTS and DELETE methods (either own or inherited).</p>

<p>&middot; If tr/// is just counting characters, it doesnt
attempt to modify its target.</p>

<p>&middot; untie() will now call an UNTIE() hook if it
exists. See perltie for details. [561]</p>

<p>&middot; utime now supports &quot;utime undef, undef,
@files&quot; to change the file timestamps to the current
time.</p>

<p>&middot; The rules for allowing underscores (underbars)
in numeric constants have been relaxed and simplified: now
you can have an underscore simply between digits.</p>

<p>&middot; Rather than relying on C s argv[0] (which may
not contain a full pathname) where possible $^X is now set
by asking the operating system. (eg by reading
/proc/self/exe on Linux, /proc/curproc/file on FreeBSD)</p>

<p>&middot; A new variable, &quot;${^TAINT}&quot;,
indicates whether taint mode is enabled.</p>

<p>&middot; You can now override the readline() builtin,
and this overrides also the &lt;FILEHANDLE&gt; angle bracket
operator.</p>

<p>&middot; The command-line options -s and -F are now
recognized on the shebang (#!) line.</p>

<p>&middot; Use of the &quot;/c&quot; match modifier
without an accompanying &quot;/g&quot; modifier elicits a
new warning: &quot;Use of /c modifier is meaningless without
/g&quot;.</p>

<p>Use of &quot;/c&quot; in substitutions, even with
&quot;/g&quot;, elicits &quot;Use of /c modifier is
meaningless in s///&quot;.</p>

<p>Use of &quot;/g&quot; with &quot;split&quot; elicits
&quot;Use of /g modifier is meaningless in split&quot;.</p>

<p>&middot; Support for the &quot;CLONE&quot; special
subroutine had been added. With ithreads, when a new thread
is created, all Perl data is cloned, however non-Perl data
cannot be cloned automatically. In &quot;CLONE&quot; you can
do whatever you need to do, like for example handle the
cloning of non-Perl data, if necessary. &quot;CLONE&quot;
will be executed once for every package that has it defined
or inherited. It will be called in the context of the new
thread, so all modifications are made in the new area.</p>

<p>See perlmod</p>

<p>Modules and Pragmata New Modules and Pragmata &middot;
&quot;Attribute::Handlers&quot;, originally by Damian Conway
and now maintained by Arthur Bergman, allows a class to
define attribute handlers.</p>

<p>package MyPack; use Attribute::Handlers; sub Wolf
:ATTR(SCALAR) { print &quot;howl!0 }</p>

<p># later, in some package using or inheriting from
MyPack...</p>

<p>my MyPack $Fluffy : Wolf; # the attribute handler Wolf
will be called</p>

<p>Both variables and routines can have attribute handlers.
Handlers can be specific to type (SCALAR, ARRAY, HASH, or
CODE), or specific to the exact compilation phase (BEGIN,
CHECK, INIT, or END). See Attribute::Handlers.</p>

<p>&middot; &quot;B::Concise&quot;, by Stephen McCamant, is
a new compiler backend for walking the Perl syntax tree,
printing concise info about ops. The output is highly
customisable. See B::Concise. [561+]</p>

<p>&middot; The new bignum, bigint, and bigrat pragmas, by
Tels, implement transparent bignum support (using the
Math::BigInt, Math::BigFloat, and Math::BigRat
backends).</p>

<p>&middot; &quot;Class::ISA&quot;, by Sean Burke, is a
module for reporting the search path for a classs ISA tree.
See Class::ISA.</p>

<p>&middot; &quot;Cwd&quot; now has a split personality: if
possible, an XS extension is used, (this will hopefully be
faster, more secure, and more robust) but if not possible,
the familiar Perl implementation is used.</p>

<p>&middot; &quot;Devel::PPPort&quot;, originally by
Kenneth Albanowski and now maintained by Paul Marquess, has
been added. It is primarily used by &quot;h2xs&quot; to
enhance portability of XS modules between different versions
of Perl. See Devel::PPPort.</p>

<p>&middot; &quot;Digest&quot;, frontend module for
calculating digests (checksums), from Gisle Aas, has been
added. See Digest.</p>

<p>&middot; &quot;Digest::MD5&quot; for calculating MD5
digests (checksums) as defined in RFC 1321, from Gisle Aas,
has been added. See Digest::MD5.</p>

<p>use Digest::MD5 &rsquo;md5_hex&rsquo;;</p>

<p>$digest = md5_hex(&quot;Thirsty Camel&quot;);</p>

<p>print $digest, &quot;0; #
01d19d9d2045e005c3f1b80e8b164de1</p>

<p>NOTE: the &quot;MD5&quot; backward compatibility module
is deliberately not included since its further use is
discouraged.</p>

<p>See also PerlIO::via::QuotedPrint.</p>

<p>&middot; &quot;Encode&quot;, originally by Nick
Ing-Simmons and now maintained by Dan Kogai, provides a
mechanism to translate between different character
encodings. Support for Unicode, ISO-8859-1, and ASCII are
compiled in to the module. Several other encodings (like the
rest of the ISO-8859, CP*/Win*, Mac, KOI8-R, three variants
EBCDIC, Chinese, Japanese, and Korean encodings) are
included and can be loaded at runtime. (For space
considerations, the largest Chinese encodings have been
separated into their own CPAN module, Encode::HanExtra,
which Encode will use if available). See Encode.</p>

<p>Any encoding supported by Encode module is also
available to the &quot;:encoding()&quot; layer if PerlIO is
used.</p>

<p>&middot; &quot;Hash::Util&quot; is the interface to the
new restricted hashes feature. (Implemented by Jeffrey
Friedl, Nick Ing-Simmons, and Michael Schwern.) See
Hash::Util.</p>

<p>&middot; &quot;I18N::Langinfo&quot; can be used to query
locale information. See I18N::Langinfo.</p>

<p>&middot; &quot;I18N::LangTags&quot;, by Sean Burke, has
functions for dealing with RFC3066-style language tags. See
I18N::LangTags.</p>

<p>&middot; &quot;ExtUtils::Constant&quot;, by Nicholas
Clark, is a new tool for extension writers for generating XS
code to import C header constants. See
ExtUtils::Constant.</p>

<p>&middot; &quot;Filter::Simple&quot;, by Damian Conway,
is an easy-to-use frontend to Filter::Util::Call. See
Filter::Simple.</p>

<p># in MyFilter.pm:</p>

<p>package MyFilter;</p>

<p>use Filter::Simple sub { while (my ($from, $to) = splice
@_, 0, 2) { s/$from/$to/g; } };</p>

<p>1;</p>

<p># in user&rsquo;s code:</p>

<p>use MyFilter qr/red/ =&gt; &rsquo;green&rsquo;;</p>

<p>print &quot;red0; # this code is filtered, will print
&quot;green0 print &quot;bored0; # this code is filtered,
will print &quot;bogreen0</p>

<p>no MyFilter;</p>

<p>print &quot;red0; # this code is not filtered, will
print &quot;red0</p>

<p>&middot; &quot;File::Temp&quot;, by Tim Jenness, allows
one to create temporary files and directories in an easy,
portable, and secure way. See File::Temp. [561+]</p>

<p>&middot; &quot;Filter::Util::Call&quot;, by Paul
Marquess, provides you with the framework to write source
filters in Perl. For most uses, the frontend Filter::Simple
is to be preferred. See Filter::Util::Call.</p>

<p>&middot; &quot;if&quot;, by Ilya Zakharevich, is a new
pragma for conditional inclusion of modules.</p>

<p>&middot; libnet, by Graham Barr, is a collection of
perl5 modules related to network programming. See Net::FTP,
Net::NNTP, Net::Ping (not part of libnet, but related),
Net::POP3, Net::SMTP, and Net::Time.</p>

<p>Perl installation leaves libnet unconfigured; use
libnetcfg to configure it.</p>

<p>&middot; &quot;List::Util&quot;, by Graham Barr, is a
selection of general-utility list subroutines, such as
sum(), min(), first(), and shuffle(). See List::Util.</p>

<p>&middot; &quot;Locale::Constants&quot;,
&quot;Locale::Country&quot;, &quot;Locale::Currency&quot;
&quot;Locale::Language&quot;, and Locale::Script, by Neil
Bowers, have been added. They provide the codes for various
locale standards, such as &quot;fr&quot; for France,
&quot;usd&quot; for US Dollar, and &quot;ja&quot; for
Japanese.</p>

<p>use Locale::Country;</p>

<p>$country = code2country(&rsquo;jp&rsquo;); # $country
gets &rsquo;Japan&rsquo; $code =
country2code(&rsquo;Norway&rsquo;); # $code gets
&rsquo;no&rsquo;</p>

<p>See Locale::Constants, Locale::Country,
Locale::Currency, and Locale::Language.</p>

<p>&middot; &quot;Locale::Maketext&quot;, by Sean Burke, is
a localization framework. See Locale::Maketext, and
Locale::Maketext::TPJ13. The latter is an article about
software localization, originally published in The Perl
Journal #13, and republished here with kind permission.</p>

<p>&middot; &quot;Math::BigRat&quot; for big rational
numbers, to accompany Math::BigInt and Math::BigFloat, from
Tels. See Math::BigRat.</p>

<p>&middot; &quot;Memoize&quot; can make your functions
faster by trading space for time, from Mark-Jason Dominus.
See Memoize.</p>

<p>&middot; &quot;MIME::Base64&quot;, by Gisle Aas, allows
you to encode data in base64, as defined in RFC 2045 - MIME
(Multipurpose Internet Mail Extensions).</p>

<p>use MIME::Base64;</p>

<p>$encoded = encode_base64(&rsquo;Aladdin:open
sesame&rsquo;); $decoded = decode_base64($encoded);</p>

<p>print $encoded, &quot;0; #
&quot;QWxhZGRpbjpvcGVuIHNlc2FtZQ==&quot;</p>

<p>See MIME::Base64.</p>

<p>&middot; &quot;MIME::QuotedPrint&quot;, by Gisle Aas,
allows you to encode data in quoted-printable encoding, as
defined in RFC 2045 - MIME (Multipurpose Internet Mail
Extensions).</p>

<p>use MIME::QuotedPrint;</p>

<p>$encoded = encode_qp(&quot;&quot;); $decoded =
decode_qp($encoded);</p>

<p>print $encoded, &quot;0; # &quot;=DE=AD=BE=EF0 print
$decoded, &quot;0; # &quot;0</p>

<p>See also PerlIO::via::QuotedPrint.</p>

<p>&middot; &quot;NEXT&quot;, by Damian Conway, is a
pseudo-class for method redispatch. See NEXT.</p>

<p>&middot; &quot;open&quot; is a new pragma for setting
the default I/O layers for open().</p>

<p>&middot; &quot;PerlIO::scalar&quot;, by Nick
Ing-Simmons, provides the implementation of IO to &quot;in
memory&quot; Perl scalars as discussed above. It also serves
as an example of a loadable PerlIO layer. Other future
possibilities include PerlIO::Array and PerlIO::Code. See
PerlIO::scalar.</p>

<p>&middot; &quot;PerlIO::via&quot;, by Nick Ing-Simmons,
acts as a PerlIO layer and wraps PerlIO layer functionality
provided by a class (typically implemented in Perl
code).</p>

<p>&middot; &quot;PerlIO::via::QuotedPrint&quot;, by
Elizabeth Mattijsen, is an example of a
&quot;PerlIO::via&quot; class:</p>

<p>use PerlIO::via::QuotedPrint;
open($fh,&quot;&gt;:via(QuotedPrint)&quot;,$path);</p>

<p>This will automatically convert everything output to $fh
to Quoted- Printable. See PerlIO::via and
PerlIO::via::QuotedPrint.</p>

<p>&middot; &quot;Pod::ParseLink&quot;, by Russ Allbery,
has been added, to parse L&lt;&gt; links in pods as
described in the new perlpodspec.</p>

<p>&middot; &quot;Pod::Text::Overstrike&quot;, by Joe
Smith, has been added. It converts POD data to formatted
overstrike text. See Pod::Text::Overstrike. [561+]</p>

<p>&middot; &quot;Scalar::Util&quot; is a selection of
general-utility scalar subroutines, such as blessed(),
reftype(), and tainted(). See Scalar::Util.</p>

<p>&middot; &quot;sort&quot; is a new pragma for
controlling the behaviour of sort().</p>

<p>&middot; &quot;Storable&quot; gives persistence to Perl
data structures by allowing the storage and retrieval of
Perl data to and from files in a fast and compact binary
format. Because in effect Storable does serialisation of
Perl data structures, with it you can also clone deep,
hierarchical datastructures. Storable was originally created
by Raphael Manfredi, but it is now maintained by Abhijit
Menon-Sen. Storable has been enhanced to understand the two
new hash features, Unicode keys and restricted hashes. See
Storable.</p>

<p>&middot; &quot;Switch&quot;, by Damian Conway, has been
added. Just by saying</p>

<p>use Switch;</p>

<p>you have &quot;switch&quot; and &quot;case&quot;
available in Perl.</p>

<p>use Switch;</p>

<p>switch ($val) {</p>

<p>case 1 { print &quot;number 1&quot; } case &quot;a&quot;
{ print &quot;string a&quot; } case [1..10,42] { print
&quot;number in list&quot; } case (@array) { print
&quot;number in list&quot; } case /624 case qr/576 case
(%hash) { print &quot;entry in hash&quot; } case (hash) {
print &quot;entry in hash&quot; } case (sub) { print
&quot;arg to subroutine&quot; } else { print &quot;previous
case not true&quot; } }</p>

<p>See Switch.</p>

<p>&middot; &quot;Test::More&quot;, by Michael Schwern, is
yet another framework for writing test scripts, more
extensive than Test::Simple. See Test::More.</p>

<p>&middot; &quot;Test::Simple&quot;, by Michael Schwern,
has basic utilities for writing tests. See Test::Simple.</p>

<p>&middot; &quot;Text::Balanced&quot;, by Damian Conway,
has been added, for extracting delimited text sequences from
strings.</p>

<p>use Text::Balanced &rsquo;extract_delimited&rsquo;;</p>

<p>($a, $b) = extract_delimited(&quot;&rsquo;never say
never&rsquo;, he never said&quot;, &quot;&rsquo;&quot;,
&rsquo;&rsquo;);</p>

<p>$a will be &quot;never say never&quot;, $b will be , he
never said.</p>

<p>In addition to extract_delimited(), there are also
extract_bracketed(), extract_quotelike(),
extract_codeblock(), extract_variable(), extract_tagged(),
extract_multiple(), gen_delimited_pat(), and
gen_extract_tagged(). With these, you can implement rather
advanced parsing algorithms. See Text::Balanced.</p>

<p>&middot; &quot;threads&quot;, by Arthur Bergman, is an
interface to interpreter threads. Interpreter threads
(ithreads) is the new thread model introduced in Perl 5.6
but only available as an internal interface for extension
writers (and for Win32 Perl for &quot;fork()&quot;
emulation). See threads, threads::shared, and
perlthrtut.</p>

<p>&middot; &quot;threads::shared&quot;, by Arthur Bergman,
allows data sharing for interpreter threads. See
threads::shared.</p>

<p>&middot; &quot;Tie::File&quot;, by Mark-Jason Dominus,
associates a Perl array with the lines of a file. See
Tie::File.</p>

<p>&middot; &quot;Tie::Memoize&quot;, by Ilya Zakharevich,
provides on-demand loaded hashes. See Tie::Memoize.</p>

<p>&middot; &quot;Tie::RefHash::Nestable&quot;, by Edward
Avis, allows storing hash references (unlike the standard
Tie::RefHash) The module is contained within Tie::RefHash.
See Tie::RefHash.</p>

<p>&middot; &quot;Time::HiRes&quot;, by Douglas E.
Wegscheid, provides high resolution timing (ualarm, usleep,
and gettimeofday). See Time::HiRes.</p>

<p>&middot; &quot;Unicode::UCD&quot; offers a querying
interface to the Unicode Character Database. See
Unicode::UCD.</p>

<p>&middot; &quot;Unicode::Collate&quot;, by SADAHIRO
Tomoyuki, implements the UCA (Unicode Collation Algorithm)
for sorting Unicode strings. See Unicode::Collate.</p>

<p>&middot; &quot;Unicode::Normalize&quot;, by SADAHIRO
Tomoyuki, implements the various Unicode normalization
forms. See Unicode::Normalize.</p>

<p>&middot; &quot;XS::APItest&quot;, by Tim Jenness, is a
test extension that exercises XS APIs. Currently only
&quot;printf()&quot; is tested: how to output various basic
data types from XS.</p>

<p>&middot; &quot;XS::Typemap&quot;, by Tim Jenness, is a
test extension that exercises XS typemaps. Nothing gets
installed, but the code is worth studying for extension
writers.</p>

<p>Updated And Improved Modules and Pragmata &middot; The
following independently supported modules have been updated
to the newest versions from CPAN: CGI, CPAN, DB_File,
File::Spec, File::Temp, Getopt::Long, Math::BigFloat,
Math::BigInt, the podlators bundle (Pod::Man, Pod::Text),
Pod::LaTeX [561+], Pod::Parser, Storable, Term::ANSIColor,
Test, Text-Tabs+Wrap.</p>

<p>&middot; attributes::reftype() now works on tied
arguments.</p>

<p>&middot; AutoLoader can now be disabled with &quot;no
AutoLoader;&quot;.</p>

<p>&middot; B::Deparse has been significantly enhanced by
Robin Houston. It can now deparse almost all of the standard
test suite (so that the tests still succeed). There is a
make target &quot;test.deparse&quot; for trying this
out.</p>

<p>&middot; Carp now has better interface documentation,
and the @CARP_NOT interface has been added to get optional
control over where errors are reported independently of
@ISA, by Ben Tilly.</p>

<p>&middot; Class::Struct can now define the classes in
compile time.</p>

<p>&middot; Class::Struct now assigns the array/hash
element if the accessor is called with an array/hash element
as the sole argument.</p>

<p>&middot; The return value of Cwd::fastcwd() is now
tainted.</p>

<p>&middot; Data::Dumper now has an option to sort
hashes.</p>

<p>&middot; Data::Dumper now has an option to dump code
references using B::Deparse.</p>

<p>&middot; DB_File now supports newer Berkeley DB
versions, among other improvements.</p>

<p>&middot; Devel::Peek now has an interface for the Perl
memory statistics (this works only if you are using perls
malloc, and if you have compiled with debugging).</p>

<p>&middot; The English module can now be used without the
infamous performance hit by saying</p>

<p>use English &rsquo;-no_match_vars&rsquo;;</p>

<p>(Assuming, of course, that you don t need the
troublesome variables &quot;$&lsquo;&quot;, $&amp;, or
&quot;$&rsquo;&quot;.) Also, introduced @LAST_MATCH_START
and @LAST_MATCH_END English aliases for &quot;@-&quot; and
&quot;@+&quot;.</p>

<p>&middot; ExtUtils::MakeMaker has been significantly
cleaned up and fixed. The enhanced version has also been
backported to earlier releases of Perl and submitted to CPAN
so that the earlier releases can enjoy the fixes.</p>

<p>&middot; The arguments of WriteMakefile() in Makefile.PL
are now checked for sanity much more carefully than before.
This may cause new warnings when modules are being
installed. See ExtUtils::MakeMaker for more details.</p>

<p>&middot; ExtUtils::MakeMaker now uses File::Spec
internally, which hopefully leads to better portability.</p>

<p>&middot; Fcntl, Socket, and Sys::Syslog have been
rewritten by Nicholas Clark to use the new-style constant
dispatch section (see ExtUtils::Constant). This means that
they will be more robust and hopefully faster.</p>

<p>&middot; File::Find now chdir()s correctly when chasing
symbolic links. [561]</p>

<p>&middot; File::Find now has pre- and post-processing
callbacks. It also correctly changes directories when
chasing symbolic links. Callbacks (naughtily) exiting with
&quot;next;&quot; instead of &quot;return;&quot; now
work.</p>

<p>&middot; File::Find is now (again) reentrant. It also
has been made more portable.</p>

<p>&middot; The warnings issued by File::Find now belong to
their own category. You can enable/disable them with
&quot;use/no warnings &rsquo;File::Find&rsquo;;&quot;.</p>

<p>&middot; File::Glob::glob() has been renamed to
File::Glob::bsd_glob() because the name clashes with the
builtin glob(). The older name is still available for
compatibility, but is deprecated. [561]</p>

<p>&middot; File::Glob now supports &quot;GLOB_LIMIT&quot;
constant to limit the size of the returned list of
filenames.</p>

<p>&middot; IPC::Open3 now allows the use of numeric file
descriptors.</p>

<p>&middot; IO::Socket now has an atmark() method, which
returns true if the socket is positioned at the out-of-band
mark. The method is also exportable as a sockatmark()
function.</p>

<p>&middot; IO::Socket::INET failed to open the specified
port if the service name was not known. It now correctly
uses the supplied port number as is. [561]</p>

<p>&middot; IO::Socket::INET has support for the ReusePort
option (if your platform supports it). The Reuse option now
has an alias, ReuseAddr. For clarity, you may want to prefer
ReuseAddr.</p>

<p>&middot; IO::Socket::INET now supports a value of zero
for &quot;LocalPort&quot; (usually meaning that the
operating system will make one up.)</p>

<p>&middot; use lib now works identically to @INC. Removing
directories with no lib now works.</p>

<p>&middot; Math::BigFloat and Math::BigInt have undergone
a full rewrite by Tels. They are now magnitudes faster, and
they support various bignum libraries such as GMP and PARI
as their backends.</p>

<p>&middot; Math::Complex handles inf, NaN etc.,
better.</p>

<p>&middot; Net::Ping has been considerably enhanced by Rob
Brown: multihoming is now supported, Win32 functionality is
better, there is now time measuring functionality
(optionally high-resolution using Time::HiRes), and there is
now &quot;external&quot; protocol which uses
Net::Ping::External module which runs your external ping
utility and parses the output. A version of
Net::Ping::External is available in CPAN.</p>

<p>Note that some of the Net::Ping tests are disabled when
running under the Perl distribution since one cannot assume
one or more of the following: enabled echo port at
localhost, full Internet connectivity, or sympathetic
firewalls. You can set the environment variable
PERL_TEST_Net_Ping to &quot;1&quot; (one) before running the
Perl test suite to enable all the Net::Ping tests.</p>

<p>&middot; POSIX::sigaction() is now much more flexible
and robust. You can now install coderef handlers, DEFAULT ,
and IGNORE handlers, installing new handlers was not
atomic.</p>

<p>&middot; In Safe, %INC is now localised in a Safe
compartment so that use/require work.</p>

<p>&middot; In SDBM_File on dosish platforms, some keys
went missing because of lack of support for files with
&quot;holes&quot;. A workaround for the problem has been
added.</p>

<p>&middot; In Search::Dict one can now have a
pre-processing hook for the lines being searched.</p>

<p>&middot; The Shell module now has an OO interface.</p>

<p>&middot; In Sys::Syslog there is now a failover
mechanism that will go through alternative connection
mechanisms until the message is successfully logged.</p>

<p>&middot; The Test module has been significantly
enhanced.</p>

<p>&middot; Time::Local::timelocal() does not handle
fractional seconds anymore. The rationale is that neither
does localtime(), and timelocal() and localtime() are
supposed to be inverses of each other.</p>

<p>&middot; The vars pragma now supports declaring fully
qualified variables. (Something that &quot;our()&quot; does
not and will not support.)</p>

<p>&middot; The &quot;utf8::&quot; name space (as in the
pragma) provides various Perl- callable functions to provide
low level access to Perl s internal Unicode representation.
At the moment only length() has been implemented.</p>

<p>Utility Changes &middot; Emacs perl mode
(emacs/cperl-mode.el) has been updated to version 4.31.</p>

<p>&middot; emacs/e2ctags.pl is now much faster.</p>

<p>&middot; &quot;enc2xs&quot; is a tool for people adding
their own encodings to the Encode module.</p>

<p>&middot; &quot;h2ph&quot; now supports C trigraphs.</p>

<p>&middot; &quot;h2xs&quot; now produces a template
README.</p>

<p>&middot; &quot;h2xs&quot; now uses
&quot;Devel::PPPort&quot; for better portability between
different versions of Perl.</p>

<p>&middot; &quot;h2xs&quot; uses the new
ExtUtils::Constant module which will affect newly created
extensions that define constants. Since the new code is more
correct (if you have two constants where the first one is a
prefix of the second one, the first constant never got
defined), less lossy (it uses integers for integer constant,
as opposed to the old code that used floating point numbers
even for integer constants), and slightly faster, you might
want to consider regenerating your extension code (the new
scheme makes regenerating easy). h2xs now also supports C
trigraphs.</p>

<p>&middot; &quot;libnetcfg&quot; has been added to
configure libnet.</p>

<p>&middot; &quot;perlbug&quot; is now much more robust. It
also sends the bug report to perl.org, not perl.com.</p>

<p>&middot; &quot;perlcc&quot; has been rewritten and its
user interface (that is, command line) is much more like
that of the UNIX C compiler, cc. (The perlbc tools has been
removed. Use &quot;perlcc -B&quot; instead.) Note that
perlcc is still considered very experimental and
unsupported. [561]</p>

<p>&middot; &quot;perlivp&quot; is a new Installation
Verification Procedure utility for running any time after
installing Perl.</p>

<p>&middot; &quot;piconv&quot; is an implementation of the
character conversion utility &quot;iconv&quot;,
demonstrating the new Encode module.</p>

<p>&middot; &quot;pod2html&quot; now allows specifying a
cache directory.</p>

<p>&middot; &quot;pod2html&quot; now produces XHTML
1.0.</p>

<p>&middot; &quot;pod2html&quot; now understands POD
written using different line endings (PC-like CRLF versus
UNIX-like LF versus MacClassic-like CR).</p>

<p>&middot; &quot;s2p&quot; has been completely rewritten
in Perl. (It is in fact a full implementation of sed in
Perl: you can use the sed functionality by using the
&quot;psed&quot; utility.)</p>

<p>&middot; &quot;xsubpp&quot; now understands POD
documentation embedded in the *.xs files. [561]</p>

<p>&middot; &quot;xsubpp&quot; now supports the OUT
keyword.</p>

<p>New Documentation &middot; perl56delta details the
changes between the 5.005 release and the 5.6.0 release.</p>

<p>&middot; perlclib documents the internal replacements
for standard C library functions. (Interesting only for
extension writers and Perl core hackers.) [561+]</p>

<p>&middot; perldebtut is a Perl debugging tutorial.
[561+]</p>

<p>&middot; perlebcdic contains considerations for running
Perl on EBCDIC platforms. [561+]</p>

<p>&middot; perlintro is a gentle introduction to Perl.</p>

<p>&middot; perliol documents the internals of PerlIO with
layers.</p>

<p>&middot; perlmodstyle is a style guide for writing
modules.</p>

<p>&middot; perlnewmod tells about writing and submitting a
new module. [561+]</p>

<p>&middot; perlpacktut is a pack() tutorial.</p>

<p>&middot; perlpod has been rewritten to be clearer and to
record the best practices gathered over the years.</p>

<p>&middot; perlpodspec is a more formal specification of
the pod format, mainly of interest for writers of pod
applications, not to people writing in pod.</p>

<p>&middot; perlretut is a regular expression tutorial.
[561+]</p>

<p>&middot; perlrequick is a regular expressions
quick-start guide. Yes, much quicker than perlretut.
[561]</p>

<p>&middot; perltodo has been updated.</p>

<p>&middot; perltootc has been renamed as perltooc (to not
to conflict with perltoot in filesystems restricted to
&quot;8.3&quot; names).</p>

<p>&middot; perluniintro is an introduction to using
Unicode in Perl. (perlunicode is more of a detailed
reference and background information)</p>

<p>&middot; perlutil explains the command line utilities
packaged with the Perl distribution. [561+]</p>

<p>The following platform-specific documents are available
before the installation as README.platform, and after the
installation as perlplatform:</p>

<p>perlaix perlamiga perlapollo perlbeos perlbs2000 perlce
perlcygwin perldgux perldos perlepoc perlfreebsd perlhpux
perlhurd perlirix perlmachten perlmacos perlmint perlmpeix
perlnetware perlos2 perlos390 perlplan9 perlqnx perlsolaris
perltru64 perluts perlvmesa perlvms perlvos perlwin32</p>

<p>These documents usually detail one or more of the
following subjects: configuring, building, testing,
installing, and sometimes also using Perl on the said
platform.</p>

<p>Eastern Asian Perl users are now welcomed in their own
languages: README.jp (Japanese), README.ko (Korean),
README.cn (simplified Chinese) and README.tw (traditional
Chinese), which are written in normal pod but encoded in
EUC-JP, EUC-KR, EUC-CN and Big5. These will get installed
as</p>

<p>perljp perlko perlcn perltw</p>

<p>&middot; The documentation for the POSIX-BC platform is
called &quot;BS2000&quot;, to avoid confusion with the Perl
POSIX module.</p>

<p>&middot; The documentation for the WinCE platform is
called perlce (README.ce in the source code kit), to avoid
confusion with the perlwin32 documentation on 8.3-restricted
filesystems.</p>

<p>Performance Enhancements &middot; map() could get
pathologically slow when the result list it generates is
larger than the source list. The performance has been
improved for common scenarios. [561]</p>

<p>&middot; sort() is also fully reentrant, in the sense
that the sort function can itself call sort(). This did not
work reliably in previous releases. [561]</p>

<p>&middot; sort() has been changed to use primarily
mergesort internally as opposed to the earlier quicksort.
For very small lists this may result in slightly slower
sorting times, but in general the speedup should be at least
20%. Additional bonuses are that the worst case behaviour of
sort() is now better (in computer science terms it now runs
in time O(N log N), as opposed to quicksort s Theta(N**2)
worst-case run time behaviour), and that sort() is now
stable (meaning that elements with identical keys will stay
ordered as they were before the sort). See the
&quot;sort&quot; pragma for information.</p>

<p>The story in more detail: suppose you want to serve
yourself a little slice of Pi.</p>

<p>@digits = ( 3,1,4,1,5,9 );</p>

<p>A numerical sort of the digits will yield (1,1,3,4,5,9),
as expected. Which 1 comes first is hard to know, since one
1 looks pretty much like any other. You can regard this as
totally trivial, or somewhat profound. However, if you just
want to sort the even digits ahead of the odd ones, then
what will</p>

<p>sort { ($a % 2) &lt;=&gt; ($b % 2) } @digits;</p>

<p>yield? The only even digit, 4, will come first. But how
about the odd numbers, which all compare equal? With the
quicksort algorithm used to implement Perl 5.6 and earlier,
the order of ties is left up to the sort. So, as you add
more and more digits of Pi, the order in which the sorted
even and odd digits appear will change. and, for
sufficiently large slices of Pi, the quicksort algorithm in
Perl 5.8 won t return the same results even if reinvoked
with the same input. The justification for this rests with
quicksorts worst case behavior. If you run</p>

<p>sort { $a &lt;=&gt; $b } ( 1 .. $N , 1 .. $N );</p>

<p>(something you might approximate if you wanted to merge
two sorted arrays using sort), doubling $N doesnt just
double the quicksort time, it quadruples it. Quicksort has a
worst case run time that can grow like N**2, so-called
quadratic behaviour, and it can happen on patterns that may
well arise in normal use. You wont notice this for small
arrays, but you will notice it with larger arrays, and you
may not live long enough for the sort to complete on arrays
of a million elements. So the 5.8 quicksort scrambles large
arrays before sorting them, as a statistical defence against
quadratic behaviour. But that means if you sort the same
large array twice, ties may be broken in different ways.</p>

<p>Because of the unpredictability of tie-breaking order,
and the quadratic worst-case behaviour, quicksort was almost
replaced completely with a stable mergesort. Stable means
that ties are broken to preserve the original order of
appearance in the input array. So</p>

<p>sort { ($a % 2) &lt;=&gt; ($b % 2) } (3,1,4,1,5,9);</p>

<p>will yield (4,3,1,1,5,9), guaranteed. The even and odd
numbers appear in the output in the same order they appeared
in the input. Mergesort has worst case O(N log N) behaviour,
the best value attainable. And, ironically, this mergesort
does particularly well where quicksort goes quadratic:
mergesort sorts (1..$N, 1..$N) in O(N) time. But quicksort
was rescued at the last moment because it is faster than
mergesort on certain inputs and platforms. For example, if
you really dont care about the order of even and odd digits,
quicksort will run in O(N) time; its very good at sorting
many repetitions of a small number of distinct elements. The
quicksort divide and conquer strategy works well on
platforms with relatively small, very fast, caches.
Eventually, the problem gets whittled down to one that fits
in the cache, from which point it benefits from the
increased memory speed.</p>

<p>Quicksort was rescued by implementing a sort pragma to
control aspects of the sort. The stable subpragma forces
stable behaviour, regardless of algorithm. The _quicksort
and _mergesort subpragmas are heavy-handed ways to select
the underlying implementation. The leading &quot;_&quot; is
a reminder that these subpragmas may not survive beyond 5.8.
More appropriate mechanisms for selecting the implementation
exist, but they wouldnt have arrived in time to save
quicksort.</p>

<p>&middot; Hashes now use Bob Jenkins
&quot;One-at-a-Time&quot; hashing key algorithm (
http://burtleburtle.net/bob/hash/doobs.html ). This
algorithm is reasonably fast while producing a much better
spread of values than the old hashing algorithm (originally
by Chris Torek, later tweaked by Ilya Zakharevich). Hash
values output from the algorithm on a hash of all 3-char
printable ASCII keys comes much closer to passing the
DIEHARD random number generation tests. According to
perlbench, this change has not affected the overall speed of
Perl.</p>

<p>&middot; unshift() should now be noticeably faster.</p>

<p>Installation and Configuration Improvements Generic
Improvements &middot; INSTALL now explains how you can
configure Perl to use 64-bit integers even on non-64-bit
platforms.</p>

<p>&middot; Policy.sh policy change: if you are reusing a
Policy.sh file (see INSTALL) and you use Configure
-Dprefix=/foo/bar and in the old Policy $prefix eq
$siteprefix and $prefix eq $vendorprefix, all of them will
now be changed to the new prefix, /foo/bar. (Previously only
$prefix changed.) If you do not like this new behaviour,
specify prefix, siteprefix, and vendorprefix explicitly.</p>

<p>&middot; A new optional location for Perl libraries,
otherlibdirs, is available. It can be used for example for
vendor add-ons without disturbing Perls own library
directories.</p>

<p>&middot; In many platforms, the vendor-supplied cc is
too stripped-down to build Perl (basically, cc doesnt do
ANSI C). If this seems to be the case and cc does not seem
to be the GNU C compiler gcc, an automatic attempt is made
to find and use gcc instead.</p>

<p>&middot; gcc needs to closely track the operating system
release to avoid build problems. If Configure finds that gcc
was built for a different operating system release than is
running, it now gives a clearly visible warning that there
may be trouble ahead.</p>

<p>&middot; Since Perl 5.8 is not binary-compatible with
previous releases of Perl, Configure no longer suggests
including the 5.005 modules in @INC.</p>

<p>&middot; Configure &quot;-S&quot; can now run
non-interactively. [561]</p>

<p>&middot; Configure support for pdp11-style memory models
has been removed due to obsolescence. [561]</p>

<p>&middot; configure.gnu now works with options with
whitespace in them.</p>

<p>&middot; installperl now outputs everything to
STDERR.</p>

<p>&middot; Because PerlIO is now the default on most
platforms, &quot;-perlio&quot; doesn t get appended to the
$Config{archname} (also known as $^O) anymore. Instead, if
you explicitly choose not to use perlio (Configure command
line option -Uuseperlio), you will get &quot;-stdio&quot;
appended.</p>

<p>&middot; Another change related to the architecture name
is that &quot;-64all&quot; (-Duse64bitall, or
&quot;maximally 64-bit&quot;) is appended only if your
pointers are 64 bits wide. (To be exact, the use64bitall is
ignored.)</p>

<p>&middot; In AFS installations, one can configure the
root of the AFS to be somewhere else than the default /afs
by using the Configure parameter
&quot;-Dafsroot=/some/where/else&quot;.</p>

<p>&middot; APPLLIB_EXP, a lesser-known configuration-time
definition, has been documented. It can be used to prepend
site-specific directories to Perl s default search path
(@INC); see INSTALL for information.</p>

<p>&middot; The version of Berkeley DB used when the Perl
(and, presumably, the DB_File extension) was built is now
available as @Config{qw(db_version_major db_version_minor
db_version_patch)} from Perl and as
&quot;DB_VERSION_MAJOR_CFG DB_VERSION_MINOR_CFG
DB_VERSION_PATCH_CFG&quot; from C.</p>

<p>&middot; Building Berkeley DB3 for compatibility modes
for DB, NDBM, and ODBM has been documented in INSTALL.</p>

<p>&middot; If you have CPAN access (either network or a
local copy such as a CD-ROM) you can during specify extra
modules to Configure to build and install with Perl using
the -Dextras=... option. See INSTALL for more details.</p>

<p>&middot; In addition to config.over, a new override
file, config.arch, is available. This file is supposed to be
used by hints file writers for architecture-wide changes (as
opposed to config.over which is for site-wide changes).</p>

<p>&middot; If your file system supports symbolic links,
you can build Perl outside of the source directory by</p>

<p>mkdir perl/build/directory cd perl/build/directory sh
/path/to/perl/source/Configure -Dmksymlinks ...</p>

<p>This will create in perl/build/directory a tree of
symbolic links pointing to files in /path/to/perl/source.
The original files are left unaffected. After Configure has
finished, you can just say</p>

<p>make all test</p>

<p>and Perl will be built and tested, all in
perl/build/directory. [561]</p>

<p>&middot; For Perl developers, several new make targets
for profiling and debugging have been added; see
perlhack.</p>

<p>&middot; Use of the gprof tool to profile Perl has been
documented in perlhack. There is a make target called
&quot;perl.gprof&quot; for generating a gprofiled Perl
executable.</p>

<p>&middot; If you have GCC 3, there is a make target
called &quot;perl.gcov&quot; for creating a gcoved Perl
executable for coverage analysis. See perlhack.</p>

<p>&middot; If you are on IRIX or Tru64 platforms, new
profiling/debugging options have been added; see perlhack
for more information about pixie and Third Degree.</p>

<p>&middot; Guidelines of how to construct minimal Perl
installations have been added to INSTALL.</p>

<p>&middot; The Thread extension is now not built at all
under ithreads (&quot;Configure -Duseithreads&quot;) because
it wouldnt work anyway (the Thread extension requires being
Configured with &quot;-Duse5005threads&quot;).</p>

<p>Note that the 5.005 threads are unsupported and
deprecated: if you have code written for the old threads you
should migrate it to the new ithreads model.</p>

<p>&middot; The Gconvert macro ($Config{d_Gconvert}) used
by perl for stringifying floating-point numbers is now more
picky about using sprintf %.*g rules for the conversion.
Some platforms that used to use gcvt may now resort to the
slower sprintf.</p>

<p>&middot; The obsolete method of making a special (e.g.,
debugging) flavor of perl by saying</p>

<p>make LIBPERL=libperld.a</p>

<p>has been removed. Use -DDEBUGGING instead.</p>

<p>New Or Improved Platforms For the list of platforms
known to support Perl, see &quot;Supported Platforms&quot;
in perlport.</p>

<p>&middot; AIX dynamic loading should be now better
supported.</p>

<p>&middot; AIX should now work better with gcc, threads,
and 64-bitness. Also the long doubles support in AIX should
be better now. See perlaix.</p>

<p>&middot; AtheOS ( http://www.atheos.cx/ ) is a new
platform.</p>

<p>&middot; BeOS has been reclaimed.</p>

<p>&middot; The DG/UX platform now supports 5.005-style
threads. See perldgux.</p>

<p>&middot; The DYNIX/ptx platform (also known as dynixptx)
is supported at or near osvers 4.5.2.</p>

<p>&middot; EBCDIC platforms (z/OS (also known as OS/390),
POSIX-BC, and VM/ESA) have been regained. Many test suite
tests still fail and the co-existence of Unicode and EBCDIC
isnt quite settled, but the situation is much better than
with Perl 5.6. See perlos390, perlbs2000 (for POSIX-BC), and
perlvmesa for more information.</p>

<p>&middot; Building perl with -Duseithreads or
-Duse5005threads now works under HP-UX 10.20 (previously it
only worked under 10.30 or later). You will need a thread
library package installed. See README.hpux. [561]</p>

<p>&middot; Mac OS Classic is now supported in the
mainstream source package (MacPerl has of course been
available since perl 5.004 but now the source code bases of
standard Perl and MacPerl have been synchronised) [561]</p>

<p>&middot; Mac OS X (or Darwin) should now be able to
build Perl even on HFS+ filesystems. (The case-insensitivity
used to confuse the Perl build process.)</p>

<p>&middot; NCR MP-RAS is now supported. [561]</p>

<p>&middot; All the NetBSD specific patches (except for the
installation specific ones) have been merged back to the
main distribution.</p>

<p>&middot; NetWare from Novell is now supported. See
perlnetware.</p>

<p>&middot; NonStop-UX is now supported. [561]</p>

<p>&middot; NEC SUPER-UX is now supported.</p>

<p>&middot; All the OpenBSD specific patches (except for
the installation specific ones) have been merged back to the
main distribution.</p>

<p>&middot; Perl has been tested with the GNU pth userlevel
thread package ( http://www.gnu.org/software/pth/pth.html ).
All thread tests of Perl now work, but not without adding
some yield()s to the tests, so while pth (and other
userlevel thread implementations) can be considered to be
&quot;working&quot; with Perl ithreads, keep in mind the
possible non-preemptability of the underlying thread
implementation.</p>

<p>&middot; Stratus VOS is now supported using Perls native
build method (Configure). This is the recommended method to
build Perl on VOS. The older methods, which build miniperl,
are still available. See perlvos. [561+]</p>

<p>&middot; The Amdahl UTS UNIX mainframe platform is now
supported. [561]</p>

<p>&middot; WinCE is now supported. See perlce.</p>

<p>&middot; z/OS (formerly known as OS/390, formerly known
as MVS OE) now has support for dynamic loading. This is not
selected by default, however, you must specify -Dusedl in
the arguments of Configure. [561]</p>

<p>Selected Bug Fixes Numerous memory leaks and
uninitialized memory accesses have been hunted down. Most
importantly, anonymous subs used to leak quite a bit.
[561]</p>

<p>&middot; The autouse pragma didn t work for
Multi::Part::Function::Names.</p>

<p>&middot; caller() could cause core dumps in certain
situations. Carp was sometimes affected by this problem. In
particular, caller() now returns a subroutine name of
&quot;(unknown)&quot; for subroutines that have been removed
from the symbol table.</p>

<p>&middot; chop(@list) in list context returned the
characters chopped in reverse order. This has been reversed
to be in the right order. [561]</p>

<p>&middot; Configure no longer includes the DBM libraries
(dbm, gdbm, db, ndbm) when building the Perl binary. The
only exception to this is SunOS 4.x, which needs them.
[561]</p>

<p>&middot; The behaviour of non-decimal but numeric string
constants such as &quot;0x23&quot; was platform-dependent:
in some platforms that was seen as 35, in some as 0, in some
as a floating point number (dont ask). This was caused by
Perls using the operating system libraries in a situation
where the result of the string to number conversion is
undefined: now Perl consistently handles such strings as
zero in numeric contexts.</p>

<p>&middot; Several debugger fixes: exit code now reflects
the script exit code, condition &quot;0&quot; now treated
correctly, the &quot;d&quot; command now checks line number,
$. no longer gets corrupted, and all debugger output now
goes correctly to the socket if RemotePort is set. [561]</p>

<p>&middot; The debugger (perl5db.pl) has been modified to
present a more consistent commands interface, via
(CommandSet=580). perl5db.t was also added to test the
changes, and as a placeholder for further tests.</p>

<p>See perldebug.</p>

<p>&middot; The debugger has a new &quot;dumpDepth&quot;
option to control the maximum depth to which nested
structures are dumped. The &quot;x&quot; command has been
extended so that &quot;x N EXPR&quot; dumps out the value of
EXPR to a depth of at most N levels.</p>

<p>&middot; The debugger can now show lexical variables if
you have the CPAN module PadWalker installed.</p>

<p>&middot; The order of DESTROYs has been made more
predictable.</p>

<p>&middot; Perl 5.6.0 could emit spurious warnings about
redefinition of dl_error() when statically building
extensions into perl. This has been corrected. [561]</p>

<p>&middot; dprofpp -R didnt work.</p>

<p>&middot; *foo{FORMAT} now works.</p>

<p>&middot; Infinity is now recognized as a number.</p>

<p>&middot; UNIVERSAL::isa no longer caches methods
incorrectly. (This broke the Tk extension with 5.6.0.)
[561]</p>

<p>&middot; Lexicals I: lexicals outside an eval
&quot;&quot; weren t resolved correctly inside a subroutine
definition inside the eval &quot;&quot; if they were not
already referenced in the top level of the
eval&quot;&quot;ed code.</p>

<p>&middot; Lexicals II: lexicals leaked at file scope into
subroutines that were declared before the lexicals.</p>

<p>&middot; Lexical warnings now propagating correctly
between scopes and into &quot;eval
&quot;...&quot;&quot;.</p>

<p>&middot; &quot;use warnings qw(FATAL all)&quot; did not
work as intended. This has been corrected. [561]</p>

<p>&middot; warnings::enabled() now reports the state of
$^W correctly if the caller isnt using lexical warnings.
[561]</p>

<p>&middot; Line renumbering with eval and
&quot;#line&quot; now works. [561]</p>

<p>&middot; Fixed numerous memory leaks, especially in eval
&quot;&quot;.</p>

<p>&middot; Localised tied variables no longer leak
memory</p>

<p>use Tie::Hash; tie my %tied_hash =&gt;
&rsquo;Tie::StdHash&rsquo;;</p>

<p>...</p>

<p># Used to leak memory every time local() was called; #
in a loop, this added up. local($tied_hash{Foo}) = 1;</p>

<p>&middot; Localised hash elements (and %ENV) are
correctly unlocalised to not exist, if they didnt before
they were localised.</p>

<p>use Tie::Hash; tie my %tied_hash =&gt;
&rsquo;Tie::StdHash&rsquo;;</p>

<p>...</p>

<p># Nothing has set the FOO element so far</p>

<p>{ local $tied_hash{FOO} = &rsquo;Bar&rsquo; }</p>

<p># This used to print, but not now. print &quot;exists!0
if exists $tied_hash{FOO};</p>

<p>As a side effect of this fix, tied hash interfaces must
define the EXISTS and DELETE methods.</p>

<p>&middot; mkdir() now ignores trailing slashes in the
directory name, as mandated by POSIX.</p>

<p>&middot; Some versions of glibc have a broken modfl().
This affects builds with &quot;-Duselongdouble&quot;. This
version of Perl detects this brokenness and has a workaround
for it. The glibc release 2.2.2 is known to have fixed the
modfl() bug.</p>

<p>&middot; Modulus of unsigned numbers now works
(4063328477 % 65535 used to return 27406, instead of 27047).
[561]</p>

<p>&middot; Some &quot;not a number&quot; warnings
introduced in 5.6.0 eliminated to be more compatible with
5.005. Infinity is now recognised as a number. [561]</p>

<p>&middot; Numeric conversions did not recognize changes
in the string value properly in certain circumstances.
[561]</p>

<p>&middot; Attributes (such as :shared) didnt work with
our().</p>

<p>&middot; our() variables will not cause bogus
&quot;Variable will not stay shared&quot; warnings.
[561]</p>

<p>&middot; &quot;our&quot; variables of the same name
declared in two sibling blocks resulted in bogus warnings
about &quot;redeclaration&quot; of the variables. The
problem has been corrected. [561]</p>

<p>&middot; pack &quot;Z&quot; now correctly terminates the
string with &quot; &quot;.</p>

<p>&middot; Fix password routines which in some shadow
password platforms (e.g. HP-UX) caused getpwent() to return
every other entry.</p>

<p>&middot; The PERL5OPT environment variable (for passing
command line arguments to Perl) didnt work for more than a
single group of options. [561]</p>

<p>&middot; PERL5OPT with embedded spaces didnt work.</p>

<p>&middot; printf() no longer resets the numeric locale to
&quot;C&quot;.</p>

<p>&middot; &quot;qw(a\b)&quot; now parses correctly as
&rsquo;a\b&rsquo;: that is, as three characters, not four.
[561]</p>

<p>&middot; pos() did not return the correct value within
s///ge in earlier versions. This is now handled correctly.
[561]</p>

<p>&middot; Printing quads (64-bit integers) with
printf/sprintf now works without the q L ll prefixes
(assuming you are on a quad-capable platform).</p>

<p>&middot; Regular expressions on references and
overloaded scalars now work. [561+]</p>

<p>&middot; Right-hand side magic (GMAGIC) could in many
cases such as string concatenation be invoked too many
times.</p>

<p>&middot; scalar() now forces scalar context even when
used in void context.</p>

<p>&middot; SOCKS support is now much more robust.</p>

<p>&middot; sort() arguments are now compiled in the right
wantarray context (they were accidentally using the context
of the sort() itself). The comparison block is now run in
scalar context, and the arguments to be sorted are always
provided list context. [561]</p>

<p>&middot; Changed the POSIX character class
&quot;[[:space:]]&quot; to include the (very rarely used)
vertical tab character. Added a new POSIX-ish character
class &quot;[[:blank:]]&quot; which stands for horizontal
whitespace (currently, the space and the tab).</p>

<p>&middot; The tainting behaviour of sprintf() has been
rationalized. It does not taint the result of floating point
formats anymore, making the behaviour consistent with that
of string interpolation. [561]</p>

<p>&middot; Some cases of inconsistent taint propagation
(such as within hash values) have been fixed.</p>

<p>&middot; The RE engine found in Perl 5.6.0 accidentally
pessimised certain kinds of simple pattern matches. These
are now handled better. [561]</p>

<p>&middot; Regular expression debug output (whether
through &quot;use re &rsquo;debug&rsquo;&quot; or via
&quot;-Dr&quot;) now looks better. [561]</p>

<p>&middot; Multi-line matches like &quot;&quot;a0b0 =~
/(?!0 bug has been fixed. [561]</p>

<p>&middot; Use of $&amp; could trigger a core dump under
some situations. This is now avoided. [561]</p>

<p>&middot; The regular expression captured submatches ($1,
$2, ...) are now more consistently unset if the match fails,
instead of leaving false data lying around in them.
[561]</p>

<p>&middot; readline() on files opened in &quot;slurp&quot;
mode could return an extra &quot;&quot; (blank line) at the
end in certain situations. This has been corrected.
[561]</p>

<p>&middot; Autovivification of symbolic references of
special variables described in perlvar (as in
&quot;${$num}&quot;) was accidentally disabled. This works
again now. [561]</p>

<p>&middot; Sys::Syslog ignored the &quot;LOG_AUTH&quot;
constant.</p>

<p>&middot; $AUTOLOAD, sort(), lock(), and spawning
subprocesses in multiple threads simultaneously are now
thread-safe.</p>

<p>&middot; Tie::Arrays SPLICE method was broken.</p>

<p>&middot; Allow a read-only string on the left-hand side
of a non-modifying tr///.</p>

<p>&middot; If &quot;STDERR&quot; is tied, warnings caused
by &quot;warn&quot; and &quot;die&quot; now correctly pass
to it.</p>

<p>&middot; Several Unicode fixes.</p>

<p>&middot; BOMs (byte order marks) at the beginning of
Perl files (scripts, modules) should now be transparently
skipped. UTF-16 and UCS-2 encoded Perl files should now be
read correctly.</p>

<p>&middot; The character tables have been updated to
Unicode 3.2.0.</p>

<p>&middot; Comparing with utf8 data does not magically
upgrade non-utf8 data into utf8. (This was a problem for
example if you were mixing data from I/O and Unicode data:
your output might have got magically encoded as UTF-8.)</p>

<p>&middot; Generating illegal Unicode code points such as
U+FFFE, or the UTF-16 surrogates, now also generates an
optional warning.</p>

<p>&middot; &quot;IsAlnum&quot;, &quot;IsAlpha&quot;, and
&quot;IsWord&quot; now match titlecase.</p>

<p>&middot; Concatenation with the &quot;.&quot; operator
or via variable interpolation, &quot;eq&quot;,
&quot;substr&quot;, &quot;reverse&quot;,
&quot;quotemeta&quot;, the &quot;x&quot; operator,
substitution with &quot;s///&quot;, single-quoted UTF-8,
should now work.</p>

<p>&middot; The &quot;tr///&quot; operator now works. Note
that the &quot;tr///CU&quot; functionality has been removed
(but see pack( U0, ...)).</p>

<p>&middot; &quot;eval &quot;v200&quot;&quot; now
works.</p>

<p>&middot; Perl 5.6.0 parsed m/b}/ incorrectly, leading to
spurious warnings. This has been corrected. [561]</p>

<p>&middot; Zero entries were missing from the Unicode
classes such as &quot;IsDigit&quot;.</p>

<p>&middot; Large unsigned numbers (those above 2**31)
could sometimes lose their unsignedness, causing bogus
results in arithmetic operations. [561]</p>

<p>&middot; The Perl parser has been stress tested using
both random input and Markov chain input and the few found
crashes and lockups have been fixed.</p>

<p>Platform Specific Changes and Fixes &middot; BSDI
4.*</p>

<p>Perl now works on post-4.0 BSD/OSes.</p>

<p>&middot; All BSDs</p>

<p>Setting $0 now works (as much as possible; see perlvar
for details).</p>

<p>&middot; Cygwin</p>

<p>Numerous updates; currently synchronised with Cygwin
1.3.10.</p>

<p>&middot; Previously DYNIX/ptx had problems in its
Configure probe for non- blocking I/O.</p>

<p>&middot; EPOC</p>

<p>EPOC now better supported. See README.epoc. [561]</p>

<p>&middot; FreeBSD 3.*</p>

<p>Perl now works on post-3.0 FreeBSDs.</p>

<p>&middot; HP-UX</p>

<p>README.hpux updated; &quot;Configure -Duse64bitall&quot;
now works; now uses HP-UX malloc instead of Perl malloc.</p>

<p>&middot; IRIX</p>

<p>Numerous compilation flag and hint enhancements;
accidental mixing of 32-bit and 64-bit libraries (a doomed
attempt) made much harder.</p>

<p>&middot; Linux</p>

<p>&middot; Long doubles should now work (see INSTALL).
[561]</p>

<p>&middot; Linux previously had problems related to
sockaddrlen when using accept(), recvfrom() (in Perl:
recv()), getpeername(), and getsockname().</p>

<p>&middot; Mac OS Classic</p>

<p>Compilation of the standard Perl distribution in Mac OS
Classic should now work if you have the Metrowerks
development environment and the missing Mac-specific toolkit
bits. Contact the macperl mailing list for details.</p>

<p>&middot; MPE/iX</p>

<p>MPE/iX update after Perl 5.6.0. See README.mpeix.
[561]</p>

<p>&middot; NetBSD/threads: try installing the GNU pth
(should be in the packages collection, or
http://www.gnu.org/software/pth/), and Configure with
-Duseithreads.</p>

<p>&middot; NetBSD/sparc</p>

<p>Perl now works on NetBSD/sparc.</p>

<p>&middot; OS/2</p>

<p>Now works with usethreads (see INSTALL). [561]</p>

<p>&middot; Solaris</p>

<p>64-bitness using the Sun Workshop compiler now
works.</p>

<p>&middot; Stratus VOS</p>

<p>The native build method requires at least VOS Release
14.5.0 and GNU C++/GNU Tools 2.0.1 or later. The Perl pack
function now maps overflowed values to +infinity and
underflowed values to -infinity.</p>

<p>&middot; Tru64 (aka Digital UNIX, aka DEC OSF/1)</p>

<p>The operating system version letter now recorded in
$Config{osvers}. Allow compiling with gcc (previously
explicitly forbidden). Compiling with gcc still not
recommended because buggy code results, even with gcc
2.95.2.</p>

<p>&middot; Unicos</p>

<p>Fixed various alignment problems that lead into core
dumps either during build or later; no longer dies on math
errors at runtime; now using full quad integers (64 bits),
previously was using only 46 bit integers for speed.</p>

<p>&middot; VMS</p>

<p>See &quot;Socket Extension Dynamic in VMS&quot; and
&quot;IEEE-format Floating Point Default on OpenVMS
Alpha&quot; for important changes not otherwise listed
here.</p>

<p>chdir() now works better despite a CRT bug; now works
with MULTIPLICITY (see INSTALL); now works with Perl s
malloc.</p>

<p>The tainting of %ENV elements via &quot;keys&quot; or
&quot;values&quot; was previously unimplemented. It now
works as documented.</p>

<p>The &quot;waitpid&quot; emulation has been improved. The
worst bug (now fixed) was that a pid of -1 would cause a
wildcard search of all processes on the system.</p>

<p>POSIX-style signals are now emulated much better on VMS
versions prior to 7.0.</p>

<p>The &quot;system&quot; function and backticks operator
have improved functionality and better error handling.
[561]</p>

<p>File access tests now use current process privileges
rather than the user s default privileges, which could
sometimes result in a mismatch between reported access and
actual access. This improvement is only available on VMS
v6.0 and later.</p>

<p>There is a new &quot;kill&quot; implementation based on
&quot;sys$sigprc&quot; that allows older VMS systems
(pre-7.0) to use &quot;kill&quot; to send signals rather
than simply force exit. This implementation also allows
later systems to call &quot;kill&quot; from within a signal
handler.</p>

<p>Iterative logical name translations are now limited to
10 iterations in imitation of SHOW LOGICAL and other OpenVMS
facilities.</p>

<p>&middot; Windows</p>

<p>&middot; Signal handling now works better than it used
to. It is now implemented using a Windows message loop, and
is therefore less prone to random crashes.</p>

<p>&middot; fork() emulation is now more robust, but still
continues to have a few esoteric bugs and caveats. See
perlfork for details. [561+]</p>

<p>&middot; A failed (pseudo)fork now returns undef and
sets errno to EAGAIN. [561]</p>

<p>&middot; The following modules now work on Windows:</p>

<p>ExtUtils::Embed [561] IO::Pipe IO::Poll Net::Ping</p>

<p>&middot; IO::File::new_tmpfile() is no longer limited to
32767 invocations per-process.</p>

<p>&middot; Better chdir() return value for a non-existent
directory.</p>

<p>&middot; Compiling perl using the 64-bit Platform SDK
tools is now supported.</p>

<p>&middot; The Win32::SetChildShowWindow() builtin can be
used to control the visibility of windows created by child
processes. See Win32 for details.</p>

<p>&middot; Non-blocking waits for child processes (or
pseudo- processes) are supported via &quot;waitpid($pid,
&amp;POSIX::WNOHANG)&quot;.</p>

<p>&middot; The behavior of system() with multiple
arguments has been rationalized. Each unquoted argument will
be automatically quoted to protect whitespace, and any
existing whitespace in the arguments will be preserved. This
improves the portability of system(@args) by avoiding the
need for Windows &quot;cmd&quot; shell specific quoting in
perl programs.</p>

<p>Note that this means that some scripts that may have
relied on earlier buggy behavior may no longer work
correctly. For example, &quot;system(&quot;nmake
/nologo&quot;, @args)&quot; will now attempt to run the file
&quot;nmake /nologo&quot; and will fail when such a file
isnt found. On the other hand, perl will now execute code
such as &quot;system(&quot;c:/Program
Files/MyApp/foo.exe&quot;, @args)&quot; correctly.</p>

<p>&middot; The perl header files no longer suppress common
warnings from the Microsoft Visual C++ compiler. This means
that additional warnings may now show up when compiling XS
code.</p>

<p>&middot; Borland C++ v5.5 is now a supported compiler
that can build Perl. However, the generated binaries
continue to be incompatible with those generated by the
other supported compilers (GCC and Visual C++). [561]</p>

<p>&middot; Duping socket handles with open(F,
&quot;&gt;&amp;MYSOCK&quot;) now works under Windows 9x.
[561]</p>

<p>&middot; Current directory entries in %ENV are now
correctly propagated to child processes. [561]</p>

<p>&middot; New %ENV entries now propagate to subprocesses.
[561]</p>

<p>&middot; Win32::GetCwd() correctly returns C: instead of
C: when at the drive root. Other bugs in chdir() and
Cwd::cwd() have also been fixed. [561]</p>

<p>&middot; The makefiles now default to the features
enabled in ActiveState ActivePerl (a popular Win32 binary
distribution). [561]</p>

<p>&middot; HTML files will now be installed in c:erll
instead of c:erlodl</p>

<p>&middot; REG_EXPAND_SZ keys are now allowed in registry
settings used by perl. [561]</p>

<p>&middot; Can now send() from all threads, not just the
first one. [561]</p>

<p>&middot; ExtUtils::MakeMaker now uses $ENV{LIB} to
search for libraries. [561]</p>

<p>&middot; Less stack reserved per thread so that more
threads can run concurrently. (Still 16M per thread.)
[561]</p>

<p>&middot; &quot;File::Spec-&gt;tmpdir()&quot; now prefers
C:/temp over /tmp (works better when perl is running as
service).</p>

<p>&middot; Better UNC path handling under ithreads.
[561]</p>

<p>&middot; wait(), waitpid(), and backticks now return the
correct exit status under Windows 9x. [561]</p>

<p>&middot; A socket handle leak in accept() has been
fixed. [561]</p>

<p>New or Changed Diagnostics Please see perldiag for more
details.</p>

<p>&middot; Ambiguous range in the transliteration operator
(like a-z-9) now gives a warning.</p>

<p>&middot; chdir(&quot;&quot;) and chdir(undef) now give a
deprecation warning because they cause a possible
unintentional chdir to the home directory. Say chdir() if
you really mean that.</p>

<p>&middot; Two new debugging options have been added: if
you have compiled your Perl with debugging, you can use the
-DT [561] and -DR options to trace tokenising and to add
reference counts to displaying variables, respectively.</p>

<p>&middot; The lexical warnings category
&quot;deprecated&quot; is no longer a sub- category of the
&quot;syntax&quot; category. It is now a top-level category
in its own right.</p>

<p>&middot; Unadorned dump() will now give a warning
suggesting to use explicit CORE::dump() if thats what really
is meant.</p>

<p>&middot; The &quot;Unrecognized escape&quot; warning has
been extended to include &quot;8&quot;, &quot;9&quot;, and
&quot;_&quot;. There is no need to escape any of the &quot;0
characters.</p>

<p>&middot; All regular expression compilation error
messages are now hopefully easier to understand both because
the error message now comes before the failed regex and
because the point of failure is now clearly marked by a
&quot;&lt;-- HERE&quot; marker.</p>

<p>&middot; Various I/O (and socket) functions like
binmode(), close(), and so forth now more consistently warn
if they are used illogically either on a yet unopened or on
an already closed filehandle (or socket).</p>

<p>&middot; Using lstat() on a filehandle now gives a
warning. (Its a non- sensical thing to do.)</p>

<p>&middot; The &quot;-M&quot; and &quot;-m&quot; options
now warn if you didnt supply the module name.</p>

<p>&middot; If you in &quot;use&quot; specify a required
minimum version, modules matching the name and but not
defining a $VERSION will cause a fatal failure.</p>

<p>&middot; Using negative offset for vec() in lvalue
context is now a warnable offense.</p>

<p>&middot; Odd number of arguments to overload::constant
now elicits a warning.</p>

<p>&middot; Odd number of elements in anonymous hash now
elicits a warning.</p>

<p>&middot; The various &quot;opened only for&quot;,
&quot;on closed&quot;, &quot;never opened&quot; warnings
drop the &quot;main::&quot; prefix for filehandles in the
&quot;main&quot; package, for example &quot;STDIN&quot;
instead of &quot;main::STDIN&quot;.</p>

<p>&middot; Subroutine prototypes are now checked more
carefully, you may get warnings for example if you have used
non-prototype characters.</p>

<p>&middot; If an attempt to use a (non-blessed) reference
as an array index is made, a warning is given.</p>

<p>&middot; &quot;push @a;&quot; and &quot;unshift
@a;&quot; (with no values to push or unshift) now give a
warning. This may be a problem for generated and evaled
code.</p>

<p>&middot; If you try to &quot;pack&quot; in perlfunc a
number less than 0 or larger than 255 using the
&quot;C&quot; format you will get an optional warning.
Similarly for the &quot;c&quot; format and a number less
than -128 or more than 127.</p>

<p>&middot; pack &quot;P&quot; format now demands an
explicit size.</p>

<p>&middot; unpack &quot;w&quot; now warns of unterminated
compressed integers.</p>

<p>&middot; Warnings relating to the use of PerlIO have
been added.</p>

<p>&middot; Certain regex modifiers such as
&quot;(?o)&quot; make sense only if applied to the entire
regex. You will get an optional warning if you try to do
otherwise.</p>

<p>&middot; Variable length lookbehind has not yet been
implemented, trying to use it will tell that.</p>

<p>&middot; Using arrays or hashes as references (e.g.
&quot;%foo-&gt;{bar}&quot; has been deprecated for a while.
Now you will get an optional warning.</p>

<p>&middot; Warnings relating to the use of the new
restricted hashes feature have been added.</p>

<p>&middot; Self-ties of arrays and hashes are not
supported and fatal errors will happen even at an attempt to
do so.</p>

<p>&middot; Using &quot;sort&quot; in scalar context now
issues an optional warning. This didnt do anything useful,
as the sort was not performed.</p>

<p>&middot; Using the /g modifier in split() is meaningless
and will cause a warning.</p>

<p>&middot; Using splice() past the end of an array now
causes a warning.</p>

<p>&middot; Malformed Unicode encodings (UTF-8 and UTF-16)
cause a lot of warnings, as does trying to use UTF-16
surrogates (which are unimplemented).</p>

<p>&middot; Trying to use Unicode characters on an I/O
stream without marking the streams encoding (using open() or
binmode()) will cause &quot;Wide character&quot;
warnings.</p>

<p>&middot; Use of v-strings in use/require causes a
(backward) portability warning.</p>

<p>&middot; Warnings relating to the use interpreter
threads and their shared data have been added.</p>

<p>Changed Internals &middot; PerlIO is now the
default.</p>

<p>&middot; perlapi.pod (a companion to perlguts) now
attempts to document the internal API.</p>

<p>&middot; You can now build a really minimal perl called
microperl. Building microperl does not require even running
Configure; &quot;make -f Makefile.micro&quot; should be
enough. Beware: microperl makes many assumptions, some of
which may be too bold; the resulting executable may crash or
otherwise misbehave in wondrous ways. For careful hackers
only.</p>

<p>&middot; Added rsignal(), whichsig(), do_join(),
op_clear, op_null, ptr_table_clear(), ptr_table_free(),
sv_setref_uv(), and several UTF-8 interfaces to the
publicised API. For the full list of the available APIs see
perlapi.</p>

<p>&middot; Made possible to propagate customised
exceptions via croak()ing.</p>

<p>&middot; Now xsubs can have attributes just like subs.
(Well, at least the built-in attributes.)</p>

<p>&middot; dTHR and djSP have been obsoleted; the former
removed (because its a no-op) and the latter replaced with
dSP.</p>

<p>&middot; PERL_OBJECT has been completely removed.</p>

<p>&middot; The MAGIC constants (e.g. &rsquo;P&rsquo;) have
been macrofied (e.g. &quot;PERL_MAGIC_TIED&quot;) for better
source code readability and maintainability.</p>

<p>&middot; The regex compiler now maintains a structure
that identifies nodes in the compiled bytecode with the
corresponding syntactic features of the original regex
expression. The information is attached to the new
&quot;offsets&quot; member of the &quot;struct regexp&quot;.
See perldebguts for more complete information.</p>

<p>&middot; The C code has been made much more &quot;gcc
-Wall&quot; clean. Some warning messages still remain in
some platforms, so if you are compiling with gcc you may see
some warnings about dubious practices. The warnings are
being worked on.</p>

<p>&middot; perly.c, sv.c, and sv.h have now been
extensively commented.</p>

<p>&middot; Documentation on how to use the Perl source
repository has been added to Porting/repository.pod.</p>

<p>&middot; There are now several profiling make
targets.</p>

<p>Security Vulnerability Closed [561] (This change was
already made in 5.7.0 but bears repeating here.) (5.7.0 came
out before 5.6.1: the development branch 5.7 released
earlier than the maintenance branch 5.6)</p>

<p>A potential security vulnerability in the optional
suidperl component of Perl was identified in August 2000.
suidperl is neither built nor installed by default. As of
November 2001 the only known vulnerable platform is Linux,
most likely all Linux distributions. CERT and various
vendors and distributors have been alerted about the
vulnerability. See
http://www.cpan.org/src/5.0/sperl-2000-08-05/sperl-2000-08-05.txt
for more information.</p>

<p>The problem was caused by Perl trying to report a
suspected security exploit attempt using an external
program, /bin/mail. On Linux platforms the /bin/mail program
had an undocumented feature which when combined with
suidperl gave access to a root shell, resulting in a serious
compromise instead of reporting the exploit attempt. If you
don t have /bin/mail, or if you have safe setuid scripts, or
if suidperl is not installed, you are safe.</p>

<p>The exploit attempt reporting feature has been
completely removed from Perl 5.8.0 (and the maintenance
release 5.6.1, and it was removed also from all the Perl 5.7
releases), so that particular vulnerability isnt there
anymore. However, further security vulnerabilities are,
unfortunately, always possible. The suidperl functionality
is most probably going to be removed in Perl 5.10. In any
case, suidperl should only be used by security experts who
know exactly what they are doing and why they are using
suidperl instead of some other solution such as sudo ( see
http://www.courtesan.com/sudo/ ).</p>

<p>New Tests Several new tests have been added, especially
for the lib and ext subsections. There are now about 69 000
individual tests (spread over about 700 test scripts), in
the regression suite (5.6.1 has about 11 700 tests, in 258
test scripts) The exact numbers depend on the platform and
Perl configuration used. Many of the new tests are of course
introduced by the new modules, but still in general Perl is
now more thoroughly tested.</p>

<p>Because of the large number of tests, running the
regression suite will take considerably longer time than it
used to: expect the suite to take up to 4-5 times longer to
run than in perl 5.6. On a really fast machine you can hope
to finish the suite in about 6-8 minutes (wallclock
time).</p>

<p>The tests are now reported in a different order than in
earlier Perls. (This happens because the test scripts from
under t/lib have been moved to be closer to the
library/extension they are testing.)</p>

<p>Known Problems The Compiler Suite Is Still Very
Experimental The compiler suite is slowly getting better but
it continues to be highly experimental. Use in production
environments is discouraged.</p>

<p>Localising Tied Arrays and Hashes Is Broken local
%tied_array;</p>

<p>doesnt work as one would expect: the old value is
restored incorrectly. This will be changed in a future
release, but we dont know yet what the new semantics will
exactly be. In any case, the change will break existing code
that relies on the current (ill- defined) semantics, so just
avoid doing this in general.</p>

<p>Building Extensions Can Fail Because Of Largefiles Some
extensions like mod_perl are known to have issues with
largefiles , a change brought by Perl 5.6.0 in which file
offsets default to 64 bits wide, where supported. Modules
may fail to compile at all, or they may compile and work
incorrectly. Currently, there is no good solution for the
problem, but Configure now provides appropriate
non-largefile ccflags, ldflags, libswanted, and libs in the
%Config hash (e.g., $Config{ccflags_nolargefiles}) so the
extensions that are having problems can try configuring
themselves without the largefileness. This is admittedly not
a clean solution, and the solution may not even work at all.
One potential failure is whether one can (or, if one can,
whether its a good idea to) link together at all binaries
with different ideas about file offsets; all this is
platform-dependent.</p>

<p>Modifying $_ Inside for(..) for (1..5) { $_++ }</p>

<p>works without complaint. It shouldn t. (You should be
able to modify only lvalue elements inside the loops.) You
can see the correct behaviour by replacing the 1..5 with 1,
2, 3, 4, 5.</p>

<p>mod_perl 1.26 Doest Build With Threaded Perl Use
mod_perl 1.27 or higher.</p>

<p>lib/ftmp-security tests warnsystem possibly insecure
Dont panic. Read the make test section of INSTALL
instead.</p>

<p>libwww-perl (LWP) fails base/date #51 Use libwww-perl
5.65 or later.</p>

<p>PDL failing some tests Use PDL 2.3.4 or later.</p>

<p>Perl_get_sv You may get errors like Undefined symbol
&quot;Perl_get_sv&quot; or &quot;cant resolve symbol
Perl_get_sv &quot;, or the symbol may be
&quot;Perl_sv_2pv&quot;. This probably means that you are
trying to use an older shared Perl library (or extensions
linked with such) with Perl 5.8.0 executable. Perl used to
have such a subroutine, but that is no more the case. Check
your shared library path, and any shared Perl libraries in
those directories.</p>

<p>Sometimes this problem may also indicate a partial Perl
5.8.0 installation, see &quot;Mac OS X dyld undefined
symbols&quot; for an example and how to deal with it.</p>

<p>Self-tying Problems Self-tying of arrays and hashes is
broken in rather deep and hard-to- fix ways. As a stop-gap
measure to avoid people from getting frustrated at the
mysterious results (core dumps, most often), it is forbidden
for now (you will get a fatal error even from an
attempt).</p>

<p>A change to self-tying of globs has caused them to be
recursively referenced (see: &quot;Two-Phased Garbage
Collection&quot; in perlobj). You will now need an explicit
untie to destroy a self-tied glob. This behaviour may be
fixed at a later date.</p>

<p>Self-tying of scalars and IO thingies works.</p>

<p>ext/threads/t/libc If this test fails, it indicates that
your libc (C library) is not threadsafe. This particular
test stress tests the localtime() call to find out whether
it is threadsafe. See perlthrtut for more information.</p>

<p>Failure of Thread (5.005-style) tests Note that support
for 5.005-style threading is deprecated, experimental and
practically unsupported. In 5.10, it is expected to be
removed. You should migrate your code to ithreads.</p>

<p>The following tests are known to fail due to fundamental
problems in the 5.005 threading implementation. These are
not new failures--Perl 5.005_0x has the same bugs, but didnt
have these tests.</p>

<p>../ext/B/t/xref.t 255 65280 14 12 85.71% 3-14
../ext/List/Util/t/first.t 255 65280 7 4 57.14% 2 5-7
../lib/English.t 2 512 54 2 3.70% 2-3 ../lib/FileCache.t 5 1
20.00% 5 ../lib/Filter/Simple/t/data.t 6 3 50.00% 1-3
../lib/Filter/Simple/t/filter_only. 9 3 33.33% 1-2 5
../lib/Math/BigInt/t/bare_mbf.t 1627 4 0.25% 8 11 1626-1627
../lib/Math/BigInt/t/bigfltpm.t 1629 4 0.25% 10 13 1628-
1629 ../lib/Math/BigInt/t/sub_mbf.t 1633 4 0.24% 8 11
1632-1633 ../lib/Math/BigInt/t/with_sub.t 1628 4 0.25% 9 12
1627-1628 ../lib/Tie/File/t/31_autodefer.t 255 65280 65 32
49.23% 34-65 ../lib/autouse.t 10 1 10.00% 4 op/flip.t 15 1
6.67% 15</p>

<p>These failures are unlikely to get fixed as 5.005-style
threads are considered fundamentally broken. (Basically what
happens is that competing threads can corrupt shared global
state, one good example being regular expression engines
state.)</p>

<p>Timing problems The following tests may fail
intermittently because of timing problems, for example if
the system is heavily loaded.</p>

<p>t/op/alarm.t ext/Time/HiRes/HiRes.t lib/Benchmark.t
lib/Memoize/t/expmod_t.t lib/Memoize/t/speed.t</p>

<p>In case of failure please try running them manually, for
example</p>

<p>./perl -Ilib ext/Time/HiRes/HiRes.t</p>

<p>Tied/Magical Array/Hash Elements Do Not Autovivify For
normal arrays &quot;$foo = ar[1]&quot; will assign
&quot;undef&quot; to $bar[1] (assuming that it didn t exist
before), but for tied/magical arrays and hashes such
autovivification does not happen because there is currently
no way to catch the reference creation. The same problem
affects slicing over non-existent indices/keys of a
tied/magical array/hash.</p>

<p>Unicode in package/class and subroutine names does not
work One can have Unicode in identifier names, but not in
package/class or subroutine names. While some limited
functionality towards this does exist as of Perl 5.8.0, that
is more accidental than designed; use of Unicode for the
said purposes is unsupported.</p>

<p>One reason of this unfinishedness is its (currently)
inherent unportability: since both package names and
subroutine names may need to be mapped to file and directory
names, the Unicode capability of the filesystem becomes
important-- and there unfortunately arent portable
answers.</p>

<p>Platform Specific Problems AIX &middot; If using the AIX
native make command, instead of just &quot;make&quot; issue
&quot;make all&quot;. In some setups the former has been
known to spuriously also try to run &quot;make
install&quot;. Alternatively, you may want to use GNU
make.</p>

<p>&middot; In AIX 4.2, Perl extensions that use C++
functions that use statics may have problems in that the
statics are not getting initialized. In newer AIX releases,
this has been solved by linking Perl with the libC_r
library, but unfortunately in AIX 4.2 the said library has
an obscure bug where the various functions related to time
(such as time() and gettimeofday()) return broken values,
and therefore in AIX 4.2 Perl is not linked against
libC_r.</p>

<p>&middot; vac 5.0.0.0 May Produce Buggy Code For Perl</p>

<p>The AIX C compiler vac version 5.0.0.0 may produce buggy
code, resulting in a few random tests failing when run as
part of &quot;make test&quot;, but when the failing tests
are run by hand, they succeed. We suggest upgrading to at
least vac version 5.0.1.0, that has been known to compile
Perl correctly. &quot;lslpp -L|grep vac.C&quot; will tell
you the vac version. See README.aix.</p>

<p>&middot; If building threaded Perl, you may get
compilation warning from pp_sys.c:</p>

<p>&quot;pp_sys.c&quot;, line 4651.39: 1506-280 (W)
Function argument assignment between types &quot;unsigned
char*&quot; and &quot;const void*&quot; is not allowed.</p>

<p>This is harmless; it is caused by the getnetbyaddr() and
getnetbyaddr_r() having slightly different types for their
first argument.</p>

<p>Alpha systems with old gccs fail several tests If you
see op/pack, op/pat, op/regexp, or ext/Storable tests
failing in a Linux/alpha or *BSD/Alpha, its probably time to
upgrade your gcc. gccs prior to 2.95.3 are definitely not
good enough, and gcc 3.1 may be even better. (RedHat
Linux/alpha with gcc 3.1 reported no problems, as did Linux
2.4.18 with gcc 2.95.4.) (In Tru64, it is preferable to use
the bundled C compiler.)</p>

<p>AmigaOS Perl 5.8.0 doesn t build in AmigaOS. It broke at
some point during the ithreads work and we could not find
Amiga experts to unbreak the problems. Perl 5.6.1 still
works for AmigaOS (as does the 5.7.2 development
release).</p>

<p>BeOS The following tests fail on 5.8.0 Perl in BeOS
Personal 5.03:</p>

<p>t/op/lfs............................FAILED at test 17
t/op/magic..........................FAILED at test 24
ext/Fcntl/t/syslfs..................FAILED at test 17
ext/File/Glob/t/basic...............FAILED at test 3
ext/POSIX/t/sigaction...............FAILED at test 13
ext/POSIX/t/waitpid.................FAILED at test 1</p>

<p>See perlbeos (README.beos) for more details.</p>

<p>Cygwin &quot;unable to remap&quot; For example when
building the Tk extension for Cygwin, you may get an error
message saying &quot;unable to remap&quot;. This is known
problem with Cygwin, and a workaround is detailed in here:
http://sources.redhat.com/ml/cygwin/2001-12/msg00894.html</p>

<p>Cygwin ndbm tests fail on FAT One can build but not
install (or test the build of) the NDBM_File on FAT
filesystems. Installation (or build) on NTFS works fine. If
one attempts the test on a FAT install (or build) the
following failures are expected:</p>

<p>../ext/NDBM_File/ndbm.t 13 3328 71 59 83.10% 1-2 4 16-71
../ext/ODBM_File/odbm.t 255 65280 ?? ?? % ??
../lib/AnyDBM_File.t 2 512 12 2 16.67% 1 4
../lib/Memoize/t/errors.t 0 139 11 5 45.45% 7-11
../lib/Memoize/t/tie_ndbm.t 13 3328 4 4 100.00% 1-4
run/fresh_perl.t 97 1 1.03% 91</p>

<p>NDBM_File fails and ODBM_File just coredumps.</p>

<p>If you intend to run only on FAT (or if using
AnyDBM_File on FAT), run Configure with the -Ui_ndbm and
-Ui_dbm options to prevent NDBM_File and ODBM_File being
built.</p>

<p>DJGPP Failures
t/op/stat............................FAILED at test 29
lib/File/Find/t/find.................FAILED at test 1
lib/File/Find/t/taint................FAILED at test 1
lib/h2xs.............................FAILED at test 15
lib/Pod/t/eol........................FAILED at test 1
lib/Test/Harness/t/strap-analyze.....FAILED at test 8
lib/Test/Harness/t/test-harness......FAILED at test 23
lib/Test/Simple/t/exit...............FAILED at test 1</p>

<p>The above failures are known as of 5.8.0 with native
builds with long filenames, but there are a few more if
running under dosemu because of limitations (and maybe bugs)
of dosemu:</p>

<p>t/comp/cpp...........................FAILED at test 3
t/op/inccode.........................(crash)</p>

<p>and a few lib/ExtUtils tests, and several hundred
Encode/t/Aliases.t failures that work fine with long
filenames. So you really might prefer native builds and long
filenames.</p>

<p>FreeBSD built with ithreads coredumps reading large
directories This is a known bug in FreeBSD 4.5s readdir_r(),
it has been fixed in FreeBSD 4.6 (see perlfreebsd
(README.freebsd)).</p>

<p>FreeBSD Failing locale Test 117 For ISO 8859-15 Locales
The ISO 8859-15 locales may fail the locale test 117 in
FreeBSD. This is caused by the characters (y with diaeresis)
and (Y with diaeresis) not behaving correctly when being
matched case- insensitively. Apparently this problem has
been fixed in the latest FreeBSD releases. (
http://www.freebsd.org/cgi/query-pr.cgi?pr=34308 )</p>

<p>IRIX fails ext/List/Util/t/shuffle.t or Digest::MD5 IRIX
with MIPSpro 7.3.1.2m or 7.3.1.3m compiler may fail the
List::Util test ext/List/Util/t/shuffle.t by dumping core.
This seems to be a compiler error since if compiled with gcc
no core dump ensues, and no failures have been seen on the
said test on any other platform.</p>

<p>Similarly, building the Digest::MD5 extension has been
known to fail with &quot;*** Termination code 139
(bu21)&quot;.</p>

<p>The cure is to drop optimization level (Configure
-Doptimize=-O2).</p>

<p>HP-UX lib/posix Subtest 9 Fails When LP64-Configured If
perl is configured with -Duse64bitall, the successful result
of the subtest 10 of lib/posix may arrive before the
successful result of the subtest 9, which confuses the test
harness so much that it thinks the subtest 9 failed.</p>

<p>Linux with glibc 2.2.5 fails t/op/int subtest #6 with
-Duse64bitint This is a known bug in the glibc 2.2.5 with
long long integers. (
http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=65612
)</p>

<p>Linux With Sfio Fails op/misc Test 48 No known fix.</p>

<p>Mac OS X Please remember to set your environment
variable LC_ALL to &quot;C&quot; (setenv LC_ALL C) before
running &quot;make test&quot; to avoid a lot of warnings
about the broken locales of Mac OS X.</p>

<p>The following tests are known to fail in Mac OS X 10.1.5
because of buggy (old) implementations of Berkeley DB
included in Mac OS X:</p>

<p>Failed Test Stat Wstat Total Fail Failed List of Failed
-------------------------------------------------------------------------
../ext/DB_File/t/db-btree.t 0 11 ?? ?? % ??
../ext/DB_File/t/db-recno.t 149 3 2.01% 61 63 65</p>

<p>If you are building on a UFS partition, you will also
probably see t/op/stat.t subtest #9 fail. This is caused by
Darwin s UFS not supporting inode change time.</p>

<p>Also the ext/POSIX/t/posix.t subtest #10 fails but it is
skipped for now because the failure is Apple s fault, not
Perl s (blocked signals are lost).</p>

<p>If you Configure with ithreads, ext/threads/t/libc.t
will fail. Again, this is not Perls fault-- the libc of Mac
OS X is not threadsafe (in this particular test, the
localtime() call is found to be threadunsafe.)</p>

<p>Mac OS X dyld undefined symbols If after installing Perl
5.8.0 you are getting warnings about missing symbols, for
example</p>

<p>dyld: perl Undefined symbols _perl_sv_2pv
_perl_get_sv</p>

<p>you probably have an old pre-Perl-5.8.0 installation (or
parts of one) in /Library/Perl (the undefined symbols used
to exist in pre-5.8.0 Perls). It seems that for some reason
&quot;make install&quot; doesnt always completely overwrite
the files in /Library/Perl. You can move the old Perl shared
library out of the way like this:</p>

<p>cd /Library/Perl/darwin/CORE mv libperl.dylib
libperlold.dylib</p>

<p>and then reissue &quot;make install&quot;. Note that the
above of course is extremely disruptive for anything using
the /usr/local/bin/perl. If that doesnt help, you may have
to try removing all the .bundle files from beneath
/Library/Perl, and again &quot;make install&quot;-ing.</p>

<p>OS/2 Test Failures The following tests are known to fail
on OS/2 (for clarity only the failures are shown, not the
full error messages):</p>

<p>../lib/ExtUtils/t/Mkbootstrap.t 1 256 18 1 5.56% 8
../lib/ExtUtils/t/Packlist.t 1 256 34 1 2.94% 17
../lib/ExtUtils/t/basic.t 1 256 17 1 5.88% 14
lib/os2_process.t 2 512 227 2 0.88% 174 209
lib/os2_process_kid.t 227 2 0.88% 174 209 lib/rx_cmprt.t 255
65280 18 3 16.67% 16-18</p>

<p>op/sprintf tests 91, 129, and 130 The op/sprintf tests
91, 129, and 130 are known to fail on some platforms.
Examples include any platform using sfio, and Compaq/Tandems
NonStop-UX.</p>

<p>Test 91 is known to fail on QNX6 (nto), because
&quot;sprintf &rsquo;%e&rsquo;,0&quot; incorrectly produces
0.000000e+0 instead of 0.000000e+00.</p>

<p>For tests 129 and 130, the failing platforms do not
comply with the ANSI C Standard: lines 19ff on page 134 of
ANSI X3.159 1989, to be exact. (They produce something other
than &quot;1&quot; and &quot;-1&quot; when formatting 0.6
and -0.6 using the printf format &quot;%.0f&quot;; most
often, they produce &quot;0&quot; and &quot;-0&quot;.)</p>

<p>SCO The socketpair tests are known to be unhappy in SCO
3.2v5.0.4:</p>

<p>ext/Socket/socketpair.t...............FAILED tests
15-45</p>

<p>Solaris 2.5 In case you are still using Solaris 2.5 (aka
SunOS 5.5), you may experience failures (the test core
dumping) in lib/locale.t. The suggested cure is to upgrade
your Solaris.</p>

<p>Solaris x86 Fails Tests With -Duse64bitint The following
tests are known to fail in Solaris x86 with Perl configured
to use 64 bit integers:</p>

<p>ext/Data/Dumper/t/dumper.............FAILED at test 268
ext/Devel/Peek/Peek..................FAILED at test 7</p>

<p>SUPER-UX (NEC SX) The following tests are known to fail
on SUPER-UX:</p>

<p>op/64bitint...........................FAILED tests
29-30, 32-33, 35-36
op/arith..............................FAILED tests 128-130
op/pack...............................FAILED tests 25-5625
op/pow................................
op/taint..............................# msgsnd failed
../ext/IO/lib/IO/t/io_poll............FAILED tests 3-4
../ext/IPC/SysV/ipcsysv...............FAILED tests 2, 5-6
../ext/IPC/SysV/t/msg.................FAILED tests 2, 4-6
../ext/Socket/socketpair..............FAILED tests 12
../lib/IPC/SysV.......................FAILED tests 2, 5-6
../lib/warnings.......................FAILED tests 115-116,
118-119</p>

<p>The op/pack failure (&quot;Cannot compress negative
numbers at op/pack.t line 126&quot;) is serious but as of
yet unsolved. It points at some problems with the signedness
handling of the C compiler, as do the 64bitint, arith, and
pow failures. Most of the rest point at problems with SysV
IPC.</p>

<p>Term::ReadKey not working on Win32 Use Term::ReadKey
2.20 or later.</p>

<p>UNICOS/mk &middot; During Configure, the test</p>

<p>Guessing which symbols your C compiler and preprocessor
define...</p>

<p>will probably fail with error messages like</p>

<p>CC-20 cc: ERROR File = try.c, Line = 3 The identifier
&quot;bad&quot; is undefined.</p>

<p>bad switch yylook 79bad switch yylook 79bad switch
yylook 79bad switch yylook 79#ifdef A29K ^</p>

<p>CC-65 cc: ERROR File = try.c, Line = 3 A semicolon is
expected at this point.</p>

<p>This is caused by a bug in the awk utility of UNICOS/mk.
You can ignore the error, but it does cause a slight
problem: you cannot fully benefit from the h2ph utility (see
h2ph) that can be used to convert C headers to Perl
libraries, mainly used to be able to access from Perl the
constants defined using C preprocessor, cpp. Because of the
above error, parts of the converted headers will be
invisible. Luckily, these days the need for h2ph is
rare.</p>

<p>&middot; If building Perl with interpreter threads
(ithreads), the getgrent(), getgrnam(), and getgrgid()
functions cannot return the list of the group members due to
a bug in the multithreaded support of UNICOS/mk. What this
means is that in list context the functions will return only
three values, not four.</p>

<p>UTS There are a few known test failures, see perluts
(README.uts).</p>

<p>VOS (Stratus) When Perl is built using the native build
process on VOS Release 14.5.0 and GNU C++/GNU Tools 2.0.1,
all attempted tests either pass or result in TODO (ignored)
failures.</p>

<p>VMS There should be no reported test failures with a
default configuration, though there are a number of tests
marked TODO that point to areas needing further debugging
and/or porting work.</p>

<p>Win32 In multi-CPU boxes, there are some problems with
the I/O buffering: some output may appear twice.</p>

<p>XML::Parser not working Use XML::Parser 2.31 or
later.</p>

<p>z/OS (OS/390) z/OS has rather many test failures but the
situation is actually much better than it was in 5.6.0; its
just that so many new modules and tests have been added.</p>

<p>Failed Test Stat Wstat Total Fail Failed List of Failed
---------------------------------------------------------------------------
../ext/Data/Dumper/t/dumper.t 357 8 2.24% 311 314 325 327
331 333 337 339 ../ext/IO/lib/IO/t/io_unix.t 5 4 80.00% 2-5
../ext/Storable/t/downgrade.t 12 3072 169 12 7.10% 14-15
46-47 78-79 110-111 150 161 ../lib/ExtUtils/t/Constant.t 121
30976 48 48 100.00% 1-48 ../lib/ExtUtils/t/Embed.t 9 9
100.00% 1-9 op/pat.t 922 7 0.76% 665 776 785 832- 834 845
op/sprintf.t 224 3 1.34% 98 100 136 op/tr.t 97 5 5.15% 63
71-74 uni/fold.t 780 6 0.77% 61 169 196 661 710-711</p>

<p>The failures in dumper.t and downgrade.t are problems in
the tests, those in io_unix and sprintf are problems in the
USS (UDP sockets and printf formats). The pat, tr, and fold
failures are genuine Perl problems caused by EBCDIC (and in
the pat and fold cases, combining that with Unicode). The
Constant and Embed are probably problems in the tests (since
they test Perl s ability to build extensions, and that seems
to be working reasonably well.)</p>

<p>Unicode Support on EBCDIC Still Spotty Though mostly
working, Unicode support still has problem spots on EBCDIC
platforms. One such known spot are the &quot;{}&quot; and
&quot;P{}&quot; regular expression constructs for code
points less than 256: the &quot;pP&quot; are testing for
Unicode code points, not knowing about EBCDIC.</p>

<p>Seen In Perl 5.7 But Gone Now &quot;Time::Piece&quot;
(previously known as &quot;Time::Object&quot;) was removed
because it was felt that it didnt have enough value in it to
be a core module. It is still a useful module, though, and
is available from the CPAN.</p>

<p>Perl 5.8 unfortunately does not build anymore on
AmigaOS; this broke accidentally at some point. Since there
are not that many Amiga developers available, we could not
get this fixed and tested in time for 5.8.0. Perl 5.6.1
still works for AmigaOS (as does the 5.7.2 development
release).</p>

<p>The &quot;PerlIO::Scalar&quot; and
&quot;PerlIO::Via&quot; (capitalised) were renamed as
&quot;PerlIO::scalar&quot; and &quot;PerlIO::via&quot; (all
lowercase) just before 5.8.0. The main rationale was to have
all core PerlIO layers to have all lowercase names. The
&quot;plugins&quot; are named as usual, for example
&quot;PerlIO::via::QuotedPrint&quot;.</p>

<p>The &quot;threads::shared::queue&quot; and
&quot;threads::shared::semaphore&quot; were renamed as
&quot;Thread::Queue&quot; and &quot;Thread::Semaphore&quot;
just before 5.8.0. The main rationale was to have thread
modules to obey normal naming, &quot;Thread::&quot; (the
&quot;threads&quot; and &quot;threads::shared&quot;
themselves are more pragma-like, they affect compile-time,
so they stay lowercase).</p>

<p>Reporting Bugs If you find what you think is a bug, you
might check the articles recently posted to the
comp.lang.perl.misc newsgroup and the perl bug database at
http://bugs.perl.org/ . There may also be information at
http://www.perl.com/ , the Perl Home Page.</p>

<p>If you believe you have an unreported bug, please run
the perlbug program included with your release. Be sure to
trim your bug down to a tiny but sufficient test case. Your
bug report, along with the output of &quot;perl -V&quot;,
will be sent off to perlbug@perl.org to be analysed by the
Perl porting team.</p>

<p>SEE ALSO The Changes file for exhaustive details on what
changed.</p>

<p>The INSTALL file for how to build Perl.</p>

<p>The README file for general stuff.</p>

<p>The Artistic and Copying files for copyright
information.</p>

<p>HISTORY Written by Jarkko Hietaniemi
&lt;jhi@iki.fi&gt;.</p>

<p>perl v5.10.1 2009-02-12 PERL58DELTA(1)</p>
<hr>
</body>
</html>
