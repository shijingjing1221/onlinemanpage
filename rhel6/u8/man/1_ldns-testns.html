<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:21:46 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ldns-testns(1) ldns-testns(1)</p>

<p>NAME ldns-testns - simple fake nameserver tool</p>

<p>SYNOPSYS ldns-testns [ OPTION ] datafile</p>

<p>DESCRIPTION ldns-testns can be used to provide answers
to DNS queries for testing. The answers are premade, and can
be tailored to testing needs. The answers can be wildly
invalid or unparseable.</p>

<p>This program is a debugging aid. It is not efficient,
especially with a long config file, but it can give any
reply to any query. This can help the developer pre-script
replies for queries.</p>

<p>It listens to IP4 UDP and TCP by default. You can
specify a packet RR by RR with header flags to return.</p>

<p>ldns-testns is not meant for production use.</p>

<p>OPTIONS -r Listens to a random port. The port number is
printed to stdout.</p>

<p>-p port Listens to the specified port.</p>

<p>-f num Forks this number of additional instances that
serve the same ports and same datafile. They do not exit;
printed is forked pid: &lt;num&gt; and you have to kill them
yourself.</p>

<p>-v Outputs more debug information. It is possible to
give this option multiple times to increase verbosity
level.</p>

<p>-6 Bind to IP6 address instead of IP4. Use together with
-p.</p>

<p>datafile The data file is read on start up. It contains
queries and the packets that should be sent in answer to
those queries. The data file format is explained below.</p>

<p>DATA FILE FORMAT The data file format has ; to denote
comment. A number of entries are processed first to last.
The first matching entry is used to answer the query with.
This is a line based format. DNS resource records are
entered in zone-file format.</p>

<p>You can use $ORIGIN and $TTL directives. Zone file ( and
) to span multiple lines are not allowed.</p>

<p>$ORIGIN origin $TTL default_ttl</p>

<p>ENTRY_BEGIN</p>

<p>; first give MATCH lines, that say what queries are
matched ; by this entry. ; opcode makes the query match the
opcode from the reply ; if you leave it out, any opcode
matches this entry. ; qtype makes the query match the qtype
from the reply ; qname makes the query match the qname from
the reply ; serial=1023 makes the query match if ixfr serial
is 1023.</p>

<p>MATCH [opcode] [qtype] [qname] [serial=&lt;value&gt;]
MATCH [UDP|TCP] MATCH ...</p>

<p>; Then the REPLY header is specified.</p>

<p>REPLY opcode, rcode or flags. (opcode) QUERY IQUERY
STATUS NOTIFY UPDATE (rcode) NOERROR FORMERR SERVFAIL
NXDOMAIN NOTIMPL YXDOMAIN YXRRSET NXRRSET NOTAUTH NOTZONE
(flags) QR AA TC RD CD RA AD</p>

<p>REPLY ...</p>

<p>; any additional actions to do.</p>

<p>ADJUST copy_id ; copy_id copies the ID from the query to
the answer.</p>

<p>; sleep=10 sleeps for 10 seconds before giving the
answer (TCP is open)</p>

<p>ADJUST [sleep=&lt;num&gt;] ; sleep before giving any
reply ADJUST [packet_sleep=&lt;num&gt;] ; sleep before this
packet in sequence</p>

<p>SECTION QUESTION &lt;RRs, one per line&gt; ; the RRcount
is determined automatically.</p>

<p>SECTION ANSWER &lt;RRs, one per line&gt;</p>

<p>SECTION AUTHORITY &lt;RRs, one per line&gt;</p>

<p>SECTION ADDITIONAL &lt;RRs, one per line&gt;</p>

<p>EXTRA_PACKET ; follow with SECTION, REPLY for more
packets. HEX_ANSWER_BEGIN ; follow with hex data ; this
replaces any answer packet constructed ; with the SECTION
keywords (only SECTION QUERY ; is used to match queries). If
the data cannot ; be parsed, ADJUST rules for the answer
packet ; are ignored</p>

<p>HEX_ANSWER_END</p>

<p>ENTRY_END</p>

<p>AUTHOR Written by the ldns team as an example for ldns
usage, and for testing purposes.</p>

<p>REPORTING BUGS Report bugs to
&lt;ldns-team@nlnetlabs.nl&gt;.</p>

<p>COPYRIGHT Copyright (C) 2006-2008 NLnet Labs. This is
free software. There is NO warranty; not even for
MERCHANTABILITY or FITNESS FOR A PARTICULAR PUR- POSE.</p>

<p>14 Dec 2006 ldns-testns(1)</p>
<hr>
</body>
</html>
