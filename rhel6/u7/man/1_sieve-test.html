<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:34:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SIEVE-TEST(1) Pigeonhole SIEVE-TEST(1)</p>

<p>NAME sieve-test - Pigeonhole&rsquo;s Sieve script
tester</p>

<p>SYNOPSIS sieve-test [options] script-file mail-file</p>

<p>DESCRIPTION The sieve-test command is part of the
Pigeonhole Project (pigeon- hole(7)), which adds Sieve (RFC
5228) support to the Dovecot secure IMAP and POP3 server
(dovecot(1)).</p>

<p>Using the sieve-test command, the execution of Sieve
scripts can be tested. This evaluates the script for the
provided message, yielding a set of Sieve actions. Unless
the -e option is specified, it does not actually execute
these actions, meaning that it does not store or for- ward
the message anywere. In stead, it prints a detailed list of
what actions would normally take place. Note that, even when
-e is speci- fied, no messages are ever transmitted to
remote SMTP recipients. The outgoing messages are always
printed to stdout in stead.</p>

<p>This is a very useful tool to debug the execution of
Sieve scripts. It can be used to verify newly installed
scripts for the intended behaviour and it can provide more
detailed information about script execution problems that
are reported by the Sieve plugin, for example by tracing the
execution and evaluation of commands and tests respec-
tively.</p>

<p>OPTIONS -c config-file Alternative Dovecot configuration
file path.</p>

<p>-C Force compilation. By default, the compiled binary is
stored on disk. When this binary is found during the next
execution of sieve-test and its modification time is more
recent than the script file, it is used and the script is
not compiled again. This option forces the script to be
compiled, thus ignoring any present binary. Refer to
sievec(1) for more information about Sieve compilation.</p>

<p>-D Enable Sieve debugging.</p>

<p>-d dump-file Causes a dump of the generated code to be
written to the speci- fied file. This is identical to the
dump produced by sieve-dump(1). Using &rsquo;-&rsquo; as
filename causes the dump to be writ- ten to stdout.</p>

<p>-e Enables true execution of the set of actions that
results from running the script. In combination with the -l
parameter, the actual delivery of messages can be tested.
Note that this will not transmit any messages to remote SMTP
recipients. Such actions only print the outgoing message to
stdout.</p>

<p>-f envelope-sender The envelope sender or return path.
This is what Sieve&rsquo;s enve- lope test will compare to
when the &quot;from&quot; envelope part is requested. Also,
this is where response messages are sent to.</p>

<p>-l mail-location The location of the user&rsquo;s mail
store. The syntax of this option&rsquo;s mail-location
parameter is identical to what is used for the mail_location
setting in the Dovecot config file. This parameter is
typically used in combination with -e to test the actual
delivery of messages. If -l is omitted when -e is speci-
fied, mail store actions like fileinto and keep are
skipped.</p>

<p>-m default-mailbox The mailbox where the keep action
stores the message. This is &quot;INBOX&quot; by
default.</p>

<p>-r recipient-address The envelope recipient address.
This is what Sieve&rsquo;s envelope test will compare to
when the &quot;to&quot; envelope part is requested. Some
tests and actions will also use this as the owner&rsquo;s
e-mail address.</p>

<p>-s script-file Specify additional scripts to be executed
before the main script. Multiple -s arguments are allowed
and the specified scripts are executed sequentially in the
order specified at the command line.</p>

<p>-t trace-file Enables runtime trace debugging. Trace
debugging provides detailed insight in the operations
performed by the Sieve script. Refer to the runtime trace
debugging section below. The trace information is written to
the specified file. Using - as filename causes the trace
data to be written to stdout.</p>

<p>-T trace-option Configures runtime trace debugging,
which is enabled with the -t option. Refer to the runtime
trace debugging section below.</p>

<p>-x extensions Set the available extensions. The
parameter is a space-separated list of the active
extensions. By prepending the extension iden- tifiers with +
or -, extensions can be included or excluded rel- ative to
the default set of extensions. If no extensions have a + or
- prefix, only those extensions that are explicitly listed
will be enabled. Unknown extensions are ignored and a
warning is produced. By default, all supported extensions
are available, except for deprecated extensions or those
that are still under development.</p>

<p>For example -x &quot;+imapflags -enotify&quot; will
enable the deprecated imapflags extension along with all
extensions that are available by default, except for the
enotify extension.</p>

<p>ARGUMENTS script-file Specifies the script to (compile
and) execute.</p>

<p>Note that this tool looks for a pre-compiled binary file
with a .svbin extension and with basename and path identical
to the specified script. Use the -C option to disable this
behavior by forcing the script to be compiled into a new
binary.</p>

<p>mail-file Specifies the file containing the e-mail
message to test with.</p>

<p>USAGE RUNTIME TRACE DEBUGGING Using the -t option, the
sieve-test tool can be configured to print detailed trace
information on the Sieve script execution to a file or
standard output. For example, the encountered commands, the
performed tests and the matched values can be printed.</p>

<p>The runtime trace can be configured using the -T option,
which can be specified multiple times. It can be used as
follows:</p>

<p>-Tlevel=... Set the detail level of the trace debugging.
One of the following values can be supplied:</p>

<p>actions (default) Only print executed action commands,
like keep, fileinto, reject and redirect.</p>

<p>commands Print any executed command, excluding test
commands.</p>

<p>tests Print all executed commands and performed
tests.</p>

<p>matching Print all executed commands, performed tests
and the values matched in those tests.</p>

<p>-Tdebug Print debug messages as well. This is usually
only useful for devel- opers and is likely to produce messy
output.</p>

<p>-Taddresses Print byte code addresses for the current
trace output. Normally, only the current Sieve source code
position (line number) is printed. The byte code addresses
are equal to those listed in a binary dump produced using
the -d option or by the sieve-dump(1) command.</p>

<p>DEBUG SIEVE EXTENSION To improve script debugging, the
Sieve command line tools such as sieve-test support a custom
Sieve language extension called &rsquo;vnd.dove-
cot.debug&rsquo;. It adds the debug_print command that
allows printing debug messages to stdout.</p>

<p>Example:</p>

<p>require &quot;vnd.dovecot.debug&quot;;</p>

<p>if header :contains &quot;subject&quot;
&quot;hello&quot; {</p>

<p>debug_print &quot;Subject header contains
hello!&quot;;</p>

<p>}</p>

<p>Other tools like sievec and sieve-dump also recognize
the vnd.dove- cot.debug extension. In contrast, the actual
Sieve plugin for the Dove- cot LDA (dovecot-lda(1)) does not
allow the use of the debug extension. So, keep in mind that
scripts and compiled binaries that refer to de debug
extension will fail to be run by the Sieve plugin
itself.</p>

<p>Note that it is not necessary to enable nor possible to
disable the availability of the debug extension with the -x
option.</p>

<p>EXIT STATUS sieve-test will exit with one of the
following values:</p>

<p>0 Delivery was successful. (EX_OK, EXIT_SUCCES)</p>

<p>1 Operation failed. This is returned for almost all
failures. (EXIT_FAILURE)</p>

<p>64 Invalid parameter given. (EX_USAGE)</p>

<p>FILES /usr/local/etc/dovecot/dovecot.conf
Dovecot&rsquo;s main configuration file.</p>

<p>/usr/local/etc/dovecot/conf.d/90-sieve.conf Sieve
interpreter settings (included from Dovecot&rsquo;s main
config- uration file)</p>

<p>REPORTING BUGS Report bugs, including doveconf -n
output, to the Dovecot Mailing List
&lt;dovecot@dovecot.org&gt;. Information about reporting
Dovecot and Pigeon- hole bugs is available at:
http://dovecot.org/bugreport.html</p>

<p>SEE ALSO dovecot(1), dovecot-lda(1), sieve-dump(1),
sievec(1), pigeonhole(7)</p>

<p>Pigeonhole for Dovecot v2.0 2010-08-23 SIEVE-TEST(1)</p>
<hr>
</body>
</html>
