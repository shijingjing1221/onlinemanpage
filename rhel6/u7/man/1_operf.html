<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:24:48 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OPERF(1) OPERF(1)</p>

<p>NAME operf - Performance profiler tool for Linux</p>

<p>SYNOPSIS operf [ options ] [ --system-wide | --pid
&lt;pid&gt; | [ command [ args ] ] ]</p>

<p>DESCRIPTION Operf is an OProfile tool that can be used
in place of opcontrol for profiling. Operf uses the Linux
Performance Events Subsystem, and hence, does not require
the use of the opcontrol daemon -- in fact, operf and
opcontrol usage are mutually exclusive.</p>

<p>By default, operf uses &lt;current_dir&gt;/oprofile_data
as the session-dir and stores profiling data there. You can
change this by way of the --session-dir option.</p>

<p>The usual post-profiling analysis tools such as
opreport(1) and opanno- tate(1) can be used to generate
profile reports. The post-processing analysis tools will
search for samples in &lt;current_dir&gt;/oprofile_data
first. If that directory does not exist, the post-processing
tools use the standard session-dir of /var/lib/oprofile.</p>

<p>Statistics, such as total samples received and lost
samples, are writ- ten to the operf.log file that can be
found in the &lt;session_dir&gt;/sam- ples directory.</p>

<p>OPTIONS command[args] The command or application to be
profiled. args are the input arguments that the command or
application requires. One (and only one) of either command ,
--pid or --system-wide is required.</p>

<p>--pid / -p PID This option enables operf to profile a
running application. PID should be the process ID of the
process you wish to profile. When finished profiling (e.g.,
when the profiled process ends), press Ctrl-c to stop operf.
If you run operf --pid as a back- ground job (i.e., with the
&amp;), you must stop it in a controlled manner in order for
it to process the profile data it has col- lected. Use kill
-SIGINT &lt;operf-PID&gt; for this purpose.</p>

<p>--system-wide / -s This option is for performing a
system-wide profile. You must have root authority to run
operf in this mode. When finished profiling, Ctrl-c to stop
operf. If you run operf --system-wide as a background job
(i.e., with the &amp;), you must stop it in a controlled
manner in order for it to process the profile data it has
collected. Use kill -SIGINT &lt;operf-PID&gt; for this
purpose. It is recommended that when running operf with this
option, the users current working directory should be /root
or a subdirec- tory of /root to avoid storing sample data
files in locations accessible by regular users.</p>

<p>--vmlinux / k vmlinux_path A vmlinux file that matches
the running kernel that has symbol and/or debuginfo. Kernel
samples will be attributed to this binary, allowing
post-processing tools (like opreport) to attribute samples
to the appropriate kernel symbols.</p>

<p>--events / -e event1[,event2[,...]] This option is for
passing a comma-separated list of event spec- ifications for
profiling. Each event spec is of the form:
name:count[:unitmask[:kernel[:user]]] You can specify unit
mask values using either a numerical value (hex values must
begin with &quot;0x&quot;) or a symbolic name (if the
name=&lt;um_name&gt; field is shown in the ophelp output).
For some named unit masks, the hex value is not unique;
thus, OProfile tools enforce specifying such unit masks
value by name.</p>

<p>Event names for some IBM PowerPC systems include a
_GRP&lt;n&gt; (group number) suffix. You can pass either the
full event name or the base event name (i.e., without the
suffix) to operf. If the base event name is passed, operf
will automatically choose an appropriate group number suffix
for the event; thus, OProfile post-processing tools will
always show real event names that include the group number
suffix.</p>

<p>When no event specification is given, the default event
for the running processor type will be used for profiling.
Use ophelp to list the available events for your processor
type.</p>

<p>--callgraph / -g This option enables the callgraph to be
saved during profiling. NOTE: The full callchain is
recorded, so there is no depth limit.</p>

<p>--separate-thread / -t This option categorizes samples
by thread group ID (tgid) and thread ID (tid). The
--separate-thread option is useful for seeing per-thread
samples in multi-threaded applications. When used in
conjunction with the --system-wide option, the --sep-
arate-thread option is also useful for seeing per-process
(i.e., per-thread group) samples for the case where multiple
processes are executing the same program during a profiling
run.</p>

<p>--separate-cpu / -c This option categorizes samples by
cpu.</p>

<p>--session-dir / -d path This option specifies the
session path to hold the sample data. If not specified, the
data is saved in the oprofile_data direc- tory on the
current path.</p>

<p>--lazy-conversion / -l Use this option to reduce the
overhead of operf during profil- ing. Normally, profile data
received from the kernel is con- verted to OProfile format
during profiling time. This is typi- cally not an issue when
profiling a single application. But when using the
--system-wide option, this on-the-fly conversion pro- cess
can cause noticeable overhead, particularly on busy multi-
processor systems. The --lazy-conversion option directs
operf to wait until profiling is completed to do the
conversion of pro- file data.</p>

<p>--append / -a By default, operf moves old profile data
from &lt;session_dir&gt;/sam- ples/current to
&lt;session_dir&gt;/samples/previous. If a previous profile
already existed, it will be replaced. If the --append option
is passed, old profile data is left in place and new pro-
file data will be added to it, and the previous profile (if
one existed) will remain untouched. To access the previous
profile, simply add a session specification to the normal
invo- cation of oprofile post-processing tools. For example:
opreport session:previous</p>

<p>--verbose / -V level A comma-separated list of debugging
control values, used to increase the verbosity of the
output. Valid values are: debug, record, convert, misc,
sfile, arcs, or the special value, all.</p>

<p>--version / -v Show operf version.</p>

<p>--help / -h Display brief usage message.</p>

<p>--usage / -u Display brief usage message.</p>

<p>EXAMPLE $ operf make</p>

<p>VERSION This man page is current for oprofile-0.9.9.</p>

<p>SEE ALSO opreport(1), opannotate(1).</p>

<p>oprofile 0.9.9 Thu 26 March 2015 OPERF(1)</p>
<hr>
</body>
</html>
