<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:36 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipa-ldap-updater(1) FreeIPA Manual Pages
ipa-ldap-updater(1)</p>

<p>NAME ipa-ldap-updater - Update the IPA LDAP
configuration</p>

<p>SYNOPSIS ipa-ldap-updater [options] input_file(s)
ipa-ldap-updater [options]</p>

<p>DESCRIPTION ipa-ldap-updater is used to apply updates to
the IPA LDAP server when the IPA packages are being updated.
It is not intended to be executed by end-users.</p>

<p>When run with no file arguments, ipa-ldap-updater will
process all files with the extension .update in
/usr/share/ipa/updates.</p>

<p>An update file describes an LDAP entry and a set of
operations to be performed on that entry. It can be used to
add new entries or modify existing entries.</p>

<p>Blank lines and lines beginning with # are ignored.</p>

<p>There are 7 keywords:</p>

<p>* default: the starting value * add: add a value (or
values) to an attribute * remove: remove a value (or values)
from an attribute * only: set an attribute to this *
deleteentry: remove the entry * replace: replace an existing
value, format is old: new * addifnew: add a new attribute
and value only if the attribute doesn t already exist. Only
works with single-value attributes. * addifexist: add a new
attribute and value only if the entry exists. This is used
to update optional entries.</p>

<p>Values is a comma-separated field so multi-values may be
added at one time. Double or single quotes may be put around
individual values that contain embedded commas.</p>

<p>The difference between the default and add keywords is
if the DN of the entry exists then default is ignored. So
for updating something like schema, which will be under
cn=schema, you must always use add (because cn=schema is
guaranteed to exist). It will not re-add the same informa-
tion again and again.</p>

<p>It alsos provide some things that can be templated such
as architecture (for plugin paths), realm and domain
name.</p>

<p>The available template variables are:</p>

<p>* $REALM - the kerberos realm (EXAMPLE.COM) * $FQDN -
the fully-qualified domain name of the IPA server being
updated (ipa.example.com) * $DOMAIN - the domain name
(example.com) * $SUFFIX - the IPA LDAP suffix
(dc=example,dc=com) * $ESCAPED_SUFFIX - the ldap-escaped IPA
LDAP suffix * $LIBARCH - set to 64 on x86_64 systems to be
used for plugin paths * $TIME - an integer representation of
current time</p>

<p>A few rules:</p>

<p>1. Only one rule per line 2. Each line stands alone
(e.g. an only followed by an only results in the last only
being used) 3. adding a value that exists is ok. The request
is ignored, dupli- cate values are not added 4. removing a
value that doesnt exist is ok. It is simply ignored. 5. If a
DN doesnt exist it is created from the default entry and all
updates are applied 6. If a DN does exist the default values
are skipped 7. Only the first rule on a line is
respected</p>

<p>Adds and updates are applied from shortest to longest
length of DN. Deletes are done from longest to shortest.</p>

<p>OPTIONS -d, --debug Enable debug logging when more
verbose output is needed</p>

<p>-t, --test Run through the update without changing
anything. If changes are available then the command returns
2. If no updates are avail- able it returns 0.</p>

<p>-y File containing the Directory Manager password</p>

<p>-l, --ldapi Connect to the LDAP server using the ldapi
socket</p>

<p>-p, ---plugins Execute update plugins as well as any
update files. There is no way to execute only the
plugins.</p>

<p>-u, ---upgrade Upgrade an installed server in offline
mode (implies --ldapi and --plugins)</p>

<p>-W, ---password Prompt for the Directory Manager
password</p>

<p>EXIT STATUS 0 if the command was successful</p>

<p>1 if an error occurred</p>

<p>2 if run with in test mode (-t) and updates are
available</p>

<p>FreeIPA Sep 12 2008 ipa-ldap-updater(1)</p>
<hr>
</body>
</html>
