<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:20:30 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>KDUMP.CONF(5) KDUMP.CONF(5)</p>

<p>NAME kdump.conf - configuration file for kdump
kernel.</p>

<p>DESCRIPTION kdump.conf is a configuration file for the
kdump kernel crash collec- tion service.</p>

<p>kdump.conf provides post-kexec instructions to the kdump
kernel. It is stored in the initrd file managed by the kdump
service. If you change this file and do not want to restart
before it takes effect, restart the kdump service to rebuild
to initrd.</p>

<p>For most configurations, you can simply review the
examples provided in the stock /etc/kdump.conf.</p>

<p>NOTE: kdump.conf only affects the behavior of the
initramfs. Please read the kdump operational flow section of
kexec-kdump-howto.txt in the docs to better understand how
this configuration file affects the behavior of kdump.</p>

<p>OPTIONS path &lt;path&gt; Append path to the filesystem
device which you are dumping to. Ignored for raw device
dumps. If unset, will default to /var/crash.</p>

<p>core_collector &lt;command&gt; &lt;options&gt; This
allows you to specify the command to copy the vmcore. You
could use the dump filtering program makedumpfile, the
default one, to retrieve your core, which on some arches can
drastically reduce core file size. See
/usr/sbin/makedumpfile --help for a list of options. Note
that the -i and -g options are not needed here, as the
initrd will automatically be populated with a con- fig file
appropriate for the running kernel.</p>

<p>If you use other command as a core_collector, probably
you also need to provide its full path in extra_bins. Note,
for ssh dump, scp should be used instead of cp.</p>

<p>raw &lt;partition&gt; Will write /proc/vmcore into raw
&lt;partition&gt;.</p>

<p>nfs &lt;nfs mount&gt; | nfs4 &lt;nfs mount&gt; | net
&lt;nfs mount&gt; Will mount fs and copy /proc/vmcore to
&lt;mnt&gt;/&lt;path&gt;/%HOST-%DATE/, supports DNS. Note
that a fqdn should be used as the server name in the mount
point. By default, NFSv3 is used, nfs4 will use NFSv4.
&quot;net&quot; is deprecated by &quot;nfs&quot;</p>

<p>ssh &lt;user@server&gt; | net &lt;user@server&gt; Will
copy /proc/vmcore to
&lt;user@server&gt;:&lt;path&gt;/%HOST-%DATE/ via SSH,
supports DNS. If makedumpfile is the core_collector, it is
piped to an &quot;ssh&quot; shell, otherwise use the
specified core_col- lector like scp. NOTE: make sure user
has necessary write per- missions on server and that a fqdn
is used as the server name. &quot;net&quot; is deprecated by
&quot;ssh&quot;</p>

<p>&lt;fs type&gt; &lt;partition&gt; Will mount -t &lt;fs
type&gt; &lt;partition&gt; /mnt and copy /proc/vmcore to
/mnt/&lt;path&gt;/127.0.0.1-%DATE/. Currently, the supported
fs types are: ext4, ext3, ext2, minix, btrfs and xfs, other
fs types like &quot;auto&quot; are not supported. NOTE:
&lt;partition&gt; can be a device node, label or uuid.</p>

<p>disk_timeout &lt;seconds&gt; Number of seconds to wait
for disks to appear prior to continue to save dump. By
default kdump waits 180 seconds for the disks to show up it
needs. This can be useful in some cases if disk never shows
up (Either because disk was removed or because kdump is
waiting on wrong disk).</p>

<p>link_delay &lt;seconds&gt; Some network cards take a
long time to initialize, and some spanning tree enabled
networks do not transmit user traffic for long periods after
a link state changes. This optional parame- ter defines a
wait period after a link is activated in which the initramfs
will wait before attempting to transmit user data.</p>

<p>kdump_post &lt;binary | script&gt; This directive allows
you to run a specified executable just after the memory dump
process terminates. The exit status from the dump process is
fed to the kdump_post executable, which can be used to
trigger different actions for success or failure.</p>

<p>Note that scripts written for use with this directive
must use the /bin/hush interpreter</p>

<p>kdump_pre &lt;binary | script&gt; Works just like the
kdump_post directive, but instead of running after the dump
process, runs immediately before. Exit status of this binary
is interpreted as follows:</p>

<p>0 - continue with dump process as usual</p>

<p>non 0 - reboot/halt the system</p>

<p>Note that scripts written for this directive must use
the /bin/hush interpreter</p>

<p>extra_bins &lt;binaries | shell scripts&gt; This
directive allows you to specify additional binaries or shell
scripts you d like to include in your kdump initrd. Gener-
ally only useful in conjunction with a kdump_post binary or
script that relies on other binaries or scripts.</p>

<p>extra_modules &lt;module(s)&gt; This directive allows
you to specify extra kernel modules that you want to be
loaded in the kdump initrd, typically used to set up access
to non-boot-path dump targets that might otherwise not be
accessible in the kdump environment. Multiple modules can be
listed, separated by a space, and any dependent modules will
automatically be included. Module name should be specified
without &quot;.ko&quot; suffix.</p>

<p>options &lt;module&gt; &lt;option list&gt; This
directive allows you to specify options to apply to modules
in the initramfs. This directive overrides options specified
in /etc/modprobe.conf. Module name should be specified
without &quot;.ko&quot; suffix.</p>

<p>blacklist &lt;module&gt; The blacklist keyword indicates
that all of that particular mod- ules are to be ignored in
the initramfs. General terminology for blacklist has been
that module is present in initramfs but it is not actually
loaded in kernel. This directive can be specified multiple
times or as a space separated list. Module name should be
specified without &quot;.ko&quot; suffix.</p>

<p>sshkey &lt;path&gt; Specifies the path of the ssh key
you want to use when do ssh dump, the default value is
/root/.ssh/kdump_id_rsa.</p>

<p>default &lt;reboot | halt | poweroff | shell |
mount_root_run_init&gt; Action to perform in case dumping to
intended target fails. If no default action is specified,
&quot;reboot&quot; is assumed default.</p>

<p>reboot: If the default action is reboot simply reboot
the system (this is what most people will want, as it
returns the system to a nominal state).</p>

<p>halt: bring the system to a halt, requiring manual
reset.</p>

<p>poweroff: The system will be powered down.</p>

<p>shell: If the default action is shell, then drop to an
hush ses- sion inside the initramfs from where you can
manually perform additional recovery actions. Exiting this
shell reboots the system.</p>

<p>mount_root_run_init: Mount root filesystem and run init.
Kdump initscript will try to save dump to root filesystem in
/var/crash dir. This will likely require a lot more memory
to be reserved for kdump kernel.</p>

<p>debug_mem_level &lt;0-3&gt; Turns on debug/verbose
output of kdump scripts regarding free/used memory at
various points of execution. Higher level means more
debugging output.</p>

<p>0 - no output</p>

<p>1 - partial /proc/meminfo</p>

<p>2 - /proc/meminfo</p>

<p>3 - /proc/meminfo + /proc/slabinfo</p>

<p>force_rebuild &lt;0 | 1&gt; By default, kdump initrd
only will be rebuilt when necessary. Specify 1 here to force
rebuilding kdump initrd every time when kdump service
starts.</p>

<p>fence_kdump_args &lt;arg(s)&gt; Command line arguments
for fence_kdump_send (it can contain all valid arguments
except hosts to send notification to).</p>

<p>fence_kdump_nodes &lt;node(s)&gt; List of cluster
node(s) separated by space to send fence_kdump notification
to (this option is mandatory to enable fence_kdump).</p>

<p>EXAMPLES see /etc/kdump.conf</p>

<p>SEE ALSO kexec(8) mkdumprd(8)</p>

<p>kexec-tools 07/23/2008 KDUMP.CONF(5)</p>
<hr>
</body>
</html>
