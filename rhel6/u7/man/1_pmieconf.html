<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:28:09 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PMIECONF(1) PMIECONF(1)</p>

<p>PMIECONF(1) PMIECONF(1)</p>

<p>NAME pmieconf - display and set configurable pmie rule
variables</p>

<p>SYNOPSIS pmieconf [-cFv] [-f file] [-r rulepath]
[command [args...]]</p>

<p>DESCRIPTION pmieconf is a utility for viewing and
configuring variables from gener- alized pmie(1) rules. The
set of generalized rules is read in from rulepath, and the
output file produced by pmieconf is a valid input file for
pmie.</p>

<p>A brief description of the pmieconf command line options
follows:</p>

<p>-c When run from automated pmie setup processes, this
option is used to add a specific message and timestamp
indicating that this is the case. It is not appropriate when
using the tool interactively.</p>

<p>-f file Any rule modifications resulting from pmieconf
manipulation of variable values will be written to file. The
default value of file is dependent on the user ID - for the
root user, the file $PCP_VAR_DIR/config/pmieconf/config.pmie
is used, for other users the default is
$HOME/.pcp/pmie/config.pmie.</p>

<p>-F Forces the pmieconf output file to be created (or
updated), after which pmieconf immediately exits.</p>

<p>-r rulepath Allows the source of generalized pmie rules
to be changed - rulepath is a colon-delimited list of
pmieconf(5) rule files and/or subdirectories. The default
value for rulepath is $PCP_VAR_DIR/config/pmieconf. Use of
this option overrides the PMIECONF_PATH environment variable
which has a similar func- tion.</p>

<p>-v Verbose mode. Additional information associated with
each rule and its associated variables will be displayed.
This is the complete list of variables which affects any
given rule (by default, global variables are not displayed
with the rule).</p>

<p>The pmieconf commands allow information related to the
various rules and configurable variables to be displayed or
modified. If no pmieconf commands are presented on the
command line, pmieconf prompts for com- mands
interactively.</p>

<p>The pmieconf command language is described here:</p>

<p>help [ { . | all | global | &lt;rule&gt; | &lt;group&gt;
} [&lt;variable&gt;] ] Without arguments, the help command
displays the syntax for all of the available pmieconf
commands. With one argument, a description of one or more of
the generalized rules is dis- played. With two arguments, a
description of a specific vari- able relating to one or more
of the generalized rules is dis- played.</p>

<p>rules [ enabled | disabled ] Display the name and short
summary for all of the generalized rules found on rulepath.
Each of the rule names can be used in place of the keyword
&lt;rule&gt; in this command syntax description. The enabled
and disabled options can be used to filter the set of rules
displayed to just those which are enabled or disabled
respectfully.</p>

<p>groups Display the name of all of the rule groups that
were found on rulepath. Each of the group names can be used
in place of the keyword &lt;group&gt; in this command syntax
description, which applies the command to all rules within
the rule group.</p>

<p>status Display status information relating to the
current pmieconf session, including a list of running pmie
processes which are currently using file.</p>

<p>enable { . | all | &lt;rule&gt; | &lt;group&gt; }
Enables the specified rule or group of rules. An enabled
rule is one which will be included in the pmie configuration
file generated by pmieconf. Any enabled &quot;actions&quot;
will be appended to the rules &quot;predicate&quot;, in a
manner conforming to the pmie syntax (&quot;actions&quot;
can be viewed using the list global command, described
below).</p>

<p>disable { . | all | &lt;rule&gt; | &lt;group&gt; }
Disables the specified rule or group of rules. If the rule
was previously enabled, it will be removed from the pmie
configura- tion file generated by pmieconf, and hence no
longer evaluated when pmie is restarted (using pmieconf does
not affect any existing pmie processes using file).</p>

<p>list { . | all | global | &lt;rule&gt; | &lt;group&gt; }
[&lt;variable&gt;] Display the values for a specific rule
variable; or for all variables of a rule, a rule group, all
rules, or the global variables.</p>

<p>modify { . | all | global | &lt;rule&gt; | &lt;group&gt;
} &lt;variable&gt; &lt;value&gt; Enable, disable, or
otherwise change the value for one or more rule variables.
This value must be consistent with the type of the variable,
which can be inferred from the format of the printed value -
e.g. strings will be enclosed in double-quotes, percentages
have the % symbol appended, etc. Note that certain rule
variables cannot be modified through pmieconf -
&quot;predicate&quot; and &quot;help&quot;, for example.</p>

<p>undo { . | all | global | &lt;rule&gt; | &lt;group&gt; }
[&lt;variable&gt;] Applicable only to a variable whose value
has been modified - this command simply reverts to the
default value for the given variable.</p>

<p>quit Save any changes made to file and then exit
pmieconf.</p>

<p>abort Exit pmieconf immediately without saving any
changes to file.</p>

<p>Each of the commands above can be shortened by simply
using the first character of the command name, and also ?
for help.</p>

<p>Use of the all keyword causes the command to be applied
to all of the rules. The global keyword refers to those
variables which are applied to every rule. Such variables
can be changed either globally or locally, for example:</p>

<p>pmieconf&gt; modify global delta &quot;5 minutes&quot;
pmieconf&gt; modify memory delta &quot;1 minute&quot;</p>

<p>causes all rules to now be evaluated once every five
minutes, except for rules in the &quot;memory&quot; group
which are to be evaluated once per minute.</p>

<p>The . character is special to pmieconf - it refers to
the last suc- cessfully used value of all, global,
&lt;rule&gt; or &lt;group&gt;.</p>

<p>EXAMPLES Specify that all of the rules in the
&quot;memory&quot; group should be evalu- ated:</p>

<p>pmieconf&gt; modify memory enabled yes</p>

<p>Change your mind, and revert to using only the
&quot;memory&quot; rules which were enabled by default:</p>

<p>pmieconf&gt; undo memory enabled</p>

<p>Specify that notification of rules which evaluate to
true should be sent to syslogd(1):</p>

<p>pmieconf&gt; modify global syslog_action yes</p>

<p>Specify that rules in the &quot;per_cpu&quot; group
should use a different hold- off value to other rules:</p>

<p>pmieconf&gt; help global holdoff rule: global [generic
parameters applied to all rules] var: holdoff help: Once the
predicate is true and the action is executed, this variable
allows suppression of further action execution until the
specified interval has elapsed. A value of zero enables
execution of the action if the rule predicate is true at the
next sample. Default units are seconds and common units are
&quot;second&quot;, &quot;sec&quot;, &quot;minute&quot;,
&quot;min&quot; and &quot;hour&quot;.</p>

<p>pmieconf&gt; modify per_cpu holdoff &quot;1
hour&quot;</p>

<p>Lower the threshold associated with a particular
variable for a speci- fied rule:</p>

<p>pmieconf&gt; l cpu.syscall predicate rule: cpu.syscall
[High aggregate system call rate] predicate = some_host ( (
kernel.all.syscall $hosts$ ) &gt; $threshold$ count/sec *
hinv.ncpu $hosts$ )</p>

<p>pmieconf&gt; m . threshold 7000</p>

<p>pmieconf&gt; l . threshold rule: cpu.syscall [High
aggregate system call rate] threshold = 7000</p>

<p>ENVIRONMENT The environment variable PMIECONF_PATH has a
similar function to the -r option described above, and if
set will be used provided no -r option is presented.</p>

<p>FILES $PCP_VAR_DIR/config/pmieconf/*/* generalized
system resource monitoring rules
$PCP_VAR_DIR/config/pmieconf/config.pmie default super-user
settings for system resource monitoring rules
$HOME/.pcp/pmie/config.pmie default user settings for system
resource monitoring rules</p>

<p>PCP ENVIRONMENT Environment variables with the prefix
PCP_ are used to parameterize the file and directory names
used by PCP. On each installation, the file /etc/pcp.conf
contains the local values for these variables. The $PCP_CONF
variable may be used to specify an alternative configuration
file, as described in pcp.conf(5).</p>

<p>SEE ALSO PCPIntro(1), pmie(1), pmie_check(1) and
pmieconf(5).</p>

<p>Performance Co-Pilot PCP PMIECONF(1)</p>
<hr>
</body>
</html>
