<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:15:33 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GIT-FSCK(1) Git Manual GIT-FSCK(1)</p>

<p>NAME git-fsck - Verifies the connectivity and validity
of the objects in the database</p>

<p>SYNOPSIS git fsck [--tags] [--root] [--unreachable]
[--cache] [--no-reflogs] [--[no-]full] [--strict]
[--verbose] [--lost-found] [&lt;object&gt;*]</p>

<p>DESCRIPTION Verifies the connectivity and validity of
the objects in the database.</p>

<p>OPTIONS &lt;object&gt; An object to treat as the head of
an unreachability trace.</p>

<p>If no objects are given, git fsck defaults to using the
index file, all SHA1 references in .git/refs/*, and all
reflogs (unless --no-reflogs is given) as heads.</p>

<p>--unreachable Print out objects that exist but that
arent readable from any of the reference nodes.</p>

<p>--root Report root nodes.</p>

<p>--tags Report tags.</p>

<p>--cache Consider any object recorded in the index also
as a head node for an unreachability trace.</p>

<p>--no-reflogs Do not consider commits that are referenced
only by an entry in a reflog to be reachable. This option is
meant only to search for commits that used to be in a ref,
but now arent, but are still in that corresponding
reflog.</p>

<p>--full Check not just objects in GIT_OBJECT_DIRECTORY
($GIT_DIR/objects), but also the ones found in alternate
object pools listed in GIT_ALTERNATE_OBJECT_DIRECTORIES or
$GIT_DIR/objects/info/alternates, and in packed git archives
found in $GIT_DIR/objects/pack and corresponding pack
subdirectories in alternate object pools. This is now
default; you can turn it off with --no-full.</p>

<p>--strict Enable more strict checking, namely to catch a
file mode recorded with g+w bit set, which was created by
older versions of git. Existing repositories, including the
Linux kernel, git itself, and sparse repository have old
objects that triggers this check, but it is recommended to
check new projects with this flag.</p>

<p>--verbose Be chatty.</p>

<p>--lost-found Write dangling objects into
.git/lost-found/commit/ or .git/lost-found/other/, depending
on type. If the object is a blob, the contents are written
into the file, rather than its object name.</p>

<p>It tests SHA1 and general object sanity, and it does
full tracking of the resulting reachability and everything
else. It prints out any corruption it finds (missing or bad
objects), and if you use the --unreachable flag it will also
print out objects that exist but that arent readable from
any of the specified head nodes.</p>

<p>So for example</p>

<p>git fsck --unreachable HEAD $(git for-each-ref
--format=&quot;%(objectname)&quot; refs/heads)</p>

<p>will do quite a lot of verification on the tree. There
are a few extra validity tests to be added (make sure that
tree objects are sorted properly etc), but on the whole if
git fsck is happy, you do have a valid tree.</p>

<p>Any corrupt objects you will have to find in backups or
other archives (i.e., you can just remove them and do an
rsync with some other site in the hopes that somebody else
has the object you have corrupted).</p>

<p>Of course, &quot;valid tree&quot; doesn t mean that it
wasnt generated by some evil person, and the end result
might be crap. git is a revision tracking system, not a
quality assurance system ;)</p>

<p>EXTRACTED DIAGNOSTICS expect dangling commits -
potential heads - due to lack of head information You havent
specified any nodes as heads so it wont be possible to
differentiate between un-parented commits and root
nodes.</p>

<p>missing sha1 directory &lt;dir&gt; The directory holding
the sha1 objects is missing.</p>

<p>unreachable &lt;type&gt; &lt;object&gt; The &lt;type&gt;
object &lt;object&gt;, isnt actually referred to directly or
indirectly in any of the trees or commits seen. This can
mean that theres another root node that youre not specifying
or that the tree is corrupt. If you havent missed a root
node then you might as well delete unreachable nodes since
they can t be used.</p>

<p>missing &lt;type&gt; &lt;object&gt; The &lt;type&gt;
object &lt;object&gt;, is referred to but isnt present in
the database.</p>

<p>dangling &lt;type&gt; &lt;object&gt; The &lt;type&gt;
object &lt;object&gt;, is present in the database but never
directly used. A dangling commit could be a root node.</p>

<p>warning: git-fsck: tree &lt;tree&gt; has full pathnames
in it And it shouldnt...</p>

<p>sha1 mismatch &lt;object&gt; The database has an object
whos sha1 doesnt match the database value. This indicates a
serious data integrity problem.</p>

<p>ENVIRONMENT VARIABLES GIT_OBJECT_DIRECTORY used to
specify the object database root (usually
$GIT_DIR/objects)</p>

<p>GIT_INDEX_FILE used to specify the index file of the
index</p>

<p>GIT_ALTERNATE_OBJECT_DIRECTORIES used to specify
additional object database roots (usually unset)</p>

<p>AUTHOR Written by Linus Torvalds
&lt;torvalds@osdl.org[1]&gt;</p>

<p>DOCUMENTATION Documentation by David Greaves, Junio C
Hamano and the git-list &lt;git@vger.kernel.org[2]&gt;.</p>

<p>GIT Part of the git(1) suite</p>

<p>NOTES 1. torvalds@osdl.org mailto:torvalds@osdl.org</p>

<p>2. git@vger.kernel.org mailto:git@vger.kernel.org</p>

<p>Git 1.7.1 02/26/2013 GIT-FSCK(1)</p>
<hr>
</body>
</html>
