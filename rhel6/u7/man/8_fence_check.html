<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:12:37 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>fence_check(8) fence configuration check
fence_check(8)</p>

<p>NAME fence_check - fence configuration check utility</p>

<p>SYNOPSIS fence_check [-h] [-V] [-d] [-v] [-e]</p>

<p>DESCRIPTION The fence_check utility can be used to
actively test the fence configu- ration for each node in the
cluster, by issuing status commands instead of
&quot;reboot&quot; &quot;on&quot; &quot;off&quot; commands
on the configured fence methods/devices in cluster.conf.</p>

<p>fence_check can also be very useful when executed via a
cron job for regular monitoring of fence devices and to
detect issues after clus- ter.conf changes.</p>

<p>OPTIONS -h Print help message, then exit.</p>

<p>-V Print program version information, then exit.</p>

<p>-d Disable output to logfile (default /var/log/clus-
ter/fence_check.log). Useful in combination with -e that
could record sensitive data from cluster.conf.</p>

<p>-v Enable verbose output of all actions taken during
execution. Useful to debug issues with fence_check
execution. Use of -v does not include -e.</p>

<p>-e Produce detailed output, in case of failure, of the
command used to test the fence device. Use of -e does not
include -v. ATTEN- TION: IT MIGHT SHOW FENCE PASSWORDS IN
LOG FILES! USE WITH CARE!</p>

<p>-f Override checks and force execution. DO NOT USE ON
PRODUCTION CLUSTERS!</p>

<p>NOTES fence_check can only be executed when the
following conditions are met:</p>

<p>- cman is running on the node</p>

<p>- the node is quorate</p>

<p>- the node has joined the fence domain</p>

<p>- the node is in charge of fencing for the whole
cluster</p>

<p>- no real fencing action is in progress</p>

<p>- no other fence_check operations are in progress.</p>

<p>fence_check will perform all those checks prior starting
a cluster wide fence status check. When used in combination
with -f, cman must be run- ning on the node and no other
processes must be performing a check at the same time.</p>

<p>By default every run of fence_check is logged to logfile
and to stdout.</p>

<p>fence_check returns:</p>

<p>0 - if execution completes 1 - on generic execution
errors (fatal) 2 - if cman is not running (fatal) 3 - node
is not quorate/node is not part of fence domain/if node is
not in charge of fencing/a real fencing operation is in
progress (can be overridden) 4 - if another fence_check is
in progress (fatal) 5 - if any of the fence status tests
failed</p>

<p>September 2012 fence_check(8)</p>
<hr>
</body>
</html>
