<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:35 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipa-client-install(1) FreeIPA Manual Pages
ipa-client-install(1)</p>

<p>NAME ipa-client-install - Configure an IPA client</p>

<p>SYNOPSIS ipa-client-install [OPTION]...</p>

<p>DESCRIPTION Configures a client machine to use IPA for
authentication and identity services.</p>

<p>By default this configures SSSD to connect to an IPA
server for authen- tication and authorization. Optionally
one can instead configure PAM and NSS (Name Switching
Service) to work with an IPA server over Ker- beros and
LDAP.</p>

<p>An authorized user is required to join a client machine
to IPA. This can take the form of a kerberos principal or a
one-time password asso- ciated with the machine.</p>

<p>This same tool is used to unconfigure IPA and attempts
to return the machine to its previous state. Part of this
process is to unenroll the host from the IPA server.
Unenrollment consists of disabling the prinicipal key on the
IPA server so that it may be re-enrolled. The machine
principal in /etc/krb5.keytab (host/&lt;fqdn&gt;@REALM) is
used to authenticate to the IPA server to unenroll itself.
If this principal does not exist then unenrollment will fail
and an administrator will need to disable the host principal
(ipa host-disable &lt;fqdn&gt;).</p>

<p>HOSTNAME REQUIREMENTS Client must use a static hostname.
If the machine hostname changes for example due to a dynamic
hostname assignment by a DHCP server, client enrollment to
IPA server breaks and user then would not be able to per-
form Kerberos authentication.</p>

<p>--hostname option may be used to specify a static
hostname that per- sists over reboot.</p>

<p>OPTIONS BASIC OPTIONS --domain=DOMAIN Set the domain
name to DOMAIN</p>

<p>--server=SERVER Set the IPA server to connect to. May be
specified multiple times to add multiple servers to
ipa_server value in sssd.conf. Only the first value is
considered when used with --no-sssd.</p>

<p>--realm=REALM_NAME Set the IPA realm name to
REALM_NAME</p>

<p>--fixed-primary Configure sssd to use a fixed server as
the primary IPA server. The default is to use DNS SRV
records to determine the primary server to use and fall back
to the server the client is enrolled with. When used in
conjunction with --server then no _srv_ value is set in the
ipa_server option in sssd.conf.</p>

<p>-p, --principal Authorized kerberos principal to use to
join the IPA realm.</p>

<p>-w PASSWORD, --password=PASSWORD Password for joining a
machine to the IPA realm. Assumes bulk password unless
principal is also set.</p>

<p>-W Prompt for the password for joining a machine to the
IPA realm.</p>

<p>--mkhomedir Configure PAM to create a users home
directory if it does not exist.</p>

<p>--hostname The hostname of this machine (FQDN). If
specified, the hostname will be set and the system
configuration will be updated to per- sist over reboot. By
default a nodename result from uname(2) is used.</p>

<p>--force-join Join the host even if it is already
enrolled.</p>

<p>--ntp-server=NTP_SERVER Configure ntpd to use this NTP
server.</p>

<p>-N, --no-ntp Do not configure or enable NTP.</p>

<p>--nisdomain=NIS_DOMAIN Set the NIS domain name as
specified. By default, this is set to the IPA domain
name.</p>

<p>--no-nisdomain Do not configure NIS domain name.</p>

<p>--ssh-trust-dns Configure OpenSSH client to trust DNS
SSHFP records.</p>

<p>--no-ssh Do not configure OpenSSH client.</p>

<p>--no-sshd Do not configure OpenSSH server.</p>

<p>--no-sudo Do not configure SSSD as a data source for
sudo.</p>

<p>--no-dns-sshfp Do not automatically create DNS SSHFP
records.</p>

<p>--noac Do not use Authconfig to modify the nsswitch.conf
and PAM con- figuration.</p>

<p>-f, --force Force the settings even if errors occur</p>

<p>--kinit-attempts=KINIT_ATTEMPTS Number of unsuccessful
attempts to obtain host TGT that will be performed before
aborting client installation. KINIT_ATTEMPTS should be a
number greater than zero. By default 5 attempts to get TGT
are performed.</p>

<p>-d, --debug Print debugging information to stdout</p>

<p>-U, --unattended Unattended installation. The user will
not be prompted.</p>

<p>--ca-cert-file=CA_FILE Do not attempt to acquire the IPA
CA certificate via automated means, instead use the CA
certificate found locally in in CA_FILE. The CA_FILE must be
an absolute path to a PEM format- ted certificate file. The
CA certificate found in CA_FILE is considered authoritative
and will be installed without checking to see if its valid
for the IPA domain.</p>

<p>SSSD OPTIONS --permit Configure SSSD to permit all
access. Otherwise the machine will be controlled by the
Host-based Access Controls (HBAC) on the IPA server.</p>

<p>--enable-dns-updates This option tells SSSD to
automatically update DNS with the IP address of this
client.</p>

<p>--no-krb5-offline-passwords Configure SSSD not to store
user password when the server is offline.</p>

<p>-S, --no-sssd Do not configure the client to use SSSD
for authentication, use nss_ldap instead.</p>

<p>--preserve-sssd Disabled by default. When enabled,
preserves old SSSD configura- tion if it is not possible to
merge it with a new one. Effec- tively, if the merge is not
possible due to SSSDConfig reader encountering unsupported
options, ipa-client-install will not run further and ask to
fix SSSD config first. When this option is not specified,
ipa-client-install will back up SSSD config and create new
one. The back up version will be restored during
uninstall.</p>

<p>UNINSTALL OPTIONS --uninstall Remove the IPA client
software and restore the configuration to the pre-IPA
state.</p>

<p>-U, --unattended Unattended uninstallation. The user
will not be prompted.</p>

<p>FILES Files that will be replaced if SSSD is configured
(default):</p>

<p>/etc/sssd/sssd.conf</p>

<p>Files that will be replaced if they exist and SSSD is
not configured (--no-sssd):</p>

<p>/etc/ldap.conf /etc/nss_ldap.conf /etc/libnss-ldap.conf
/etc/pam_ldap.conf /etc/nslcd.conf</p>

<p>Files replaced if NTP is enabled:</p>

<p>/etc/ntp.conf /etc/sysconfig/ntpd
/etc/ntp/step-tickers</p>

<p>Files always created (replacing existing content):</p>

<p>/etc/krb5.conf /etc/ipa/ca.crt /etc/ipa/default.conf
/etc/openldap/ldap.conf</p>

<p>Files updated, existing content is maintained:</p>

<p>/etc/pki/nssdb /etc/krb5.keytab
/etc/sysconfig/network</p>

<p>EXIT STATUS 0 if the installation was successful</p>

<p>1 if an error occurred</p>

<p>2 if uninstalling and the client is not configured</p>

<p>3 if installing and the client is already configured</p>

<p>4 if an uninstall error occurred</p>

<p>FreeIPA Sep 5 2011 ipa-client-install(1)</p>
<hr>
</body>
</html>
