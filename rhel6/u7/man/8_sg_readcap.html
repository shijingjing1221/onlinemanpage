<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:33:59 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SG_READCAP(8) SG3_UTILS SG_READCAP(8)</p>

<p>NAME sg_readcap - sends a SCSI READ CAPACITY command</p>

<p>SYNOPSIS sg_readcap [--16] [--brief] [--help] [--hex]
[--lba=LBA] [--long] [--pmi] [--raw] [--verbose] [--version]
DEVICE</p>

<p>sg_readcap [-16] [-b] [-h] [-H] [-lba=LBA] [-pmi] [-r]
[-v] [-V] DEVICE</p>

<p>DESCRIPTION The normal action of the SCSI READ CAPACITY
command is to fetch the number of blocks (and block size)
from the DEVICE.</p>

<p>The SCSI READ CAPACITY command (both 10 and 16 byte
cdbs) actually yield the block address of the last block and
the block size. The num- ber of blocks is thus one plus the
block address of the last block (as blocks are counted
origin zero (i.e. starting at block zero)). This is the
source of many &quot;off by one&quot; errors.</p>

<p>The READ CAPACITY(16) response provides additional
information not found in the READ CAPACITY(10) response.
This includes protection and thin provisioning information,
plus the number of logical blocks per physical block. So
even though the media size may not exceed what READ
CAPACITY(10) can show, it may still be useful to examine the
response to READ CAPACITY(16). Sadly there are horrible SCSI
command set imple- mentations in the wild that crash when
the READ CAPACITY(16) command is sent to them.</p>

<p>Device capacity is the product of the number of blocks
by the block size. This utility outputs this figure in
bytes, MiB (1048576 bytes per MiB) and GB (1000000000 bytes
per GB).</p>

<p>If sg_readcap is called without the --long option then
the 10 byte cdb version (i.e. READ CAPACITY (10)) is sent to
the DEVICE. If the number of blocks in the response is
reported as 0xffffffff (i.e. (2**32 - 1) ) and the --hex
option has not been given, then READ CAPACITY (16) is called
and its response is output.</p>

<p>This utility supports two command line syntaxes, the
preferred one is shown first in the synopsis and explained
in this section. A later sec- tion on the old command line
syntax outlines the second group of options.</p>

<p>OPTIONS Arguments to long options are mandatory for
short options as well.</p>

<p>-b, --brief outputs two hex numbers (prefixed with 0x
and space separated) to stdout. The first number is the
maximum number of blocks on the device (which is one plus
the lba of the last accessible block). The second number is
the size in bytes of each block. If the operation fails then
&quot;0x0 0x0&quot; is written to stdout.</p>

<p>-h, --help print out the usage message then exit.</p>

<p>-H, --hex output the response to the READ CAPACITY
command (either the 10 or 16 byte cdb variant) in ASCII
hexadecimal on stdout.</p>

<p>-L, --lba=LBA used in conjunction with --pmi option.
This variant of READ CAPACITY will yield the last block
address after LBA prior to a delay. For a disk, given a LBA
it yields the highest numbered block on the same cylinder
(i.e. before the heads need to move). LBA is assumed to be
decimal unless prefixed by &quot;0x&quot; or it has a
trailing &quot;h&quot;. Defaults to 0.</p>

<p>-l, --long Use the 16 byte cdb variant of the READ
CAPACITY command. The default action is to use the 10 byte
cdb variant which limits the maximum block address to (2**32
- 2). When a 10 byte cdb READ CAPACITY command is used on a
device whose size is too large then a last block address of
0xffffffff is returned (if the device complies with
SBC-2).</p>

<p>--16 Use the 16 byte cdb variant of the READ CAPACITY
command. See the --long option.</p>

<p>-O, --old switch to older style options.</p>

<p>-p, --pmi partial medium indicator: for finding the next
block address prior to some delay (e.g. head movement). In
the absence of this option, the total number of blocks and
the block size of the device are output. Used in conjunction
with the --lba=LBA option.</p>

<p>-r, --raw output response in binary to stdout.</p>

<p>-v, --verbose increase level of verbosity. Can be used
multiple times.</p>

<p>-V, --version outputs version string then exits.</p>

<p>NOTES In the 2.4 series of Linux kernels the DEVICE must
be a SCSI generic (sg) device. In the 2.6 series block
devices (e.g. SCSI disks and DVD drives) can also be
specified. For example &quot;sg_readcap /dev/sda&quot; and
&quot;sg_readcap /dev/hdd&quot; (if /dev/hdd is a ATAPI
CD/DVD device) will work in the 2.6 series kernels.</p>

<p>EXIT STATUS The exit status of sg_readcap is 0 when it
is successful. Otherwise see the sg3_utils(8) man page.</p>

<p>OLDER COMMAND LINE OPTIONS The options in this section
were the only ones available prior to sg3_utils version 1.23
. In sg3_utils version 1.23 and later these older options
can be selected by either setting the SG3_UTILS_OLD_OPTS
environment variable or using --old (or -O) as the first
option.</p>

<p>-16 Use the 16 byte cdb variant of the READ CAPACITY
command. Equivalent to --long in the main description.</p>

<p>-b utility outputs two hex numbers (prefixed with 0x and
space separated) to stdout. The first number is the maximum
number of blocks on the device (which is one plus the lba of
the last accessible block). The second number is the size of
each block. If the operation fails then &quot;0x0 0x0&quot;
is written to stdout. Equivalent to --brief in the main
description.</p>

<p>-h output the usage message then exit. Giving the -?
option also outputs the usage message then exits.</p>

<p>-H output the response to the READ CAPACITY command
(either the 10 or 16 byte cdb variant) in ASCII hexadecimal
on stdout.</p>

<p>-lba=LBA used in conjunction with -pmi option. This
variant of READ CAPACITY will yield the last block address
after LBA prior to a delay. Equivalent to --lba=LBA in the
main description.</p>

<p>-N switch to the newer style options.</p>

<p>-pmi partial medium indicator: for finding the next
block address prior to some delay (e.g. head movement). In
the absence of this switch, the total number of blocks and
the block size of the device are output. Equivalent to --pmi
in the main description.</p>

<p>-r output response in binary (to stdout).</p>

<p>-v verbose: print out cdb of issued commands prior to
execution. -vv and -vvv are also accepted yielding greater
verbosity.</p>

<p>-V outputs version string then exits.</p>

<p>AUTHORS Written by Douglas Gilbert</p>

<p>COPYRIGHT Copyright &copy; 1999-2009 Douglas Gilbert
This software is distributed under the GPL version 2. There
is NO war- ranty; not even for MERCHANTABILITY or FITNESS
FOR A PARTICULAR PUR- POSE.</p>

<p>SEE ALSO sg_inq(sg3_utils)</p>

<p>sg3_utils-1.28 September 2009 SG_READCAP(8)</p>
<hr>
</body>
</html>
