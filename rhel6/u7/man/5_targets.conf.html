<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:37:48 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TARGETS.CONF(5) [FIXME: manual] TARGETS.CONF(5)</p>

<p>NAME targets.conf - Linux SCSI Target Configuration
File</p>

<p>DESCRIPTION tgt-admin uses /etc/tgt/targets.conf to
initialize tgtd configuration, by default. Its layout uses a
HTML-like structure, with a hierarchy of nested tags to
define targets and LUNs.</p>

<p>CONFIGURATION FILE SYNTAX Global directives configure
options that are global to tgtd&acute;s configuration, as
well as defining exported targets, via target sections.</p>

<p>Target sections contain directives specific to one
target device. They define each target&acute;s exported LUNs
via &quot;backing-store&quot; and &quot;direct-store&quot;
directives, as well as other target-wide options.</p>

<p>LUN directives (&quot;backing-store&quot; and
&quot;direct-store&quot;) may contain options specific to a
single exported logical unit.</p>

<p>GLOBAL DIRECTIVES With the exception of target
directives, each of these should occur at most once.</p>

<p>&lt;target &lt;IQN&gt;&gt; Defines a the start of a
target definition. IQN is an ISCSI Qualified Name such as
&quot;iqn.2001-04.com.example:storage1&quot;. See
&quot;ISCSI&quot; on Wikipedia for more information on
IQNs.</p>

<p>Within this block should be target-level directives, as
documented below.</p>

<p>The target definition ends with
&quot;&lt;/target&gt;&quot;</p>

<p>default-driver &lt;lld&gt; Instead of specifying a
driver type for each target, default-driver defines a
default low-level driver for all exported targets. It may be
overriden on a per-target basis. Valid lld values are
&quot;iscsi&quot; or &quot;iser&quot;. Since iscsi is
assumed if this directive is not present, it is only
generally needed if iser is the desired default.</p>

<p>include &lt;path&gt; Include the configuration from
another configuration file. Wildcards are allowed, so an
example like &quot;include /etc/tgt/xen/*.conf&quot; is
allowed.</p>

<p>ignore-errors yes Errors from tgtadm will be ignored.
Default is no.</p>

<p>control-port &lt;port&gt; Define a different local
socket key for communicating with tgtd. Defaults to 0. This
is only generally useful if multiple instances of tgtd are
in use.</p>

<p>iSNSServerIP &lt;addr&gt; Define the address of the iSNS
server in IPv4 dotted-quad address format. Required when
using iSNS, otherwise ignored.</p>

<p>iSNSAccessControl &lt;value&gt; Set iSNS access control.
Valid values are &quot;On&quot; or &quot;Off&quot;. Required
when using iSNS, otherwise ignored.</p>

<p>iSNSServerPort &lt;port&gt; Set a different iSNS server
port. Default is 3205. Optional when using iSNS, otherwise
ignored.</p>

<p>iSNS On Enable iSNS. Only valid value is &quot;On&quot;.
Default is off.</p>

<p>incomingdiscoveryuser &lt;user&gt; &lt;userpassword&gt;
Define iscsi incoming discovery authentication setting. If
no value is given, no authentication is performed.</p>

<p>outgoingdiscoveryuser &lt;user&gt; &lt;userpassword&gt;
Define iscsi outgoing discovery authentication setting. If
no value is given, no authentication is performed.</p>

<p>TARGET-LEVEL DIRECTIVES Each target may export multiple
block devices, or logical units (LUNs). For the purposes of
LUN numbering, backing-store directives are processed before
direct-store directives.</p>

<p>backing-store &lt;path&gt; Defines a logical unit (LUN)
exported by the target. This may specify either a regular
file, or a block device.</p>

<p>direct-store &lt;path&gt; Defines a direct mapped
logical unit (LUN) with the same properties as the physical
device (such as VENDOR_ID, SERIAL_NUM, etc.)</p>

<p>driver &lt;lld&gt; Define the low-level driver to use
for this target, either &quot;iscsi&quot; or
&quot;iser&quot; (without quotes). This overrides the
&quot;default-driver&quot; global directive.</p>

<p>initiator-address &lt;addr&gt; Allows connections only
from the specified IP address. Defaults to ALL if no
initiator-address directive is specified.</p>

<p>initiator-name &lt;addr&gt; Allows connections only from
the specified initiator name.</p>

<p>incominguser &lt;user&gt; &lt;userpassword&gt; Define
iscsi incoming authentication setting. If no
&quot;incominguser&quot; is specified, it is not used. This
directive may be used multiple times per target.</p>

<p>outgoinguser &lt;user&gt; &lt;userpassword&gt; Define
iscsi outgoing authentication setting. If no
&quot;outgoinguser&quot; is specified, it is not used. This
directive may be used multiple times per target.</p>

<p>controller_tid &lt;val&gt; Define the tid of the
controller. Default is next available integer.</p>

<p>LUN-LEVEL DIRECTIVES All of these may be listed at the
target level (and apply to all LUNs) or within an individual
LUN&acute;s definition, if it is defined using the
container-style, multi-line definition, rather than
single-line definition format:</p>

<p>&lt;backing-store /dev/sdb1&gt; # LUN directives go here
&lt;/backing-store&gt;</p>

<p>&lt;direct-store /dev/sdb1&gt; # LUN directives go here
&lt;/direct-store&gt;</p>

<p>It is recommended to use either single-line or
container-style LUN definitions within a target. Mixing
styles can cause parser errors.</p>

<p>write-cache &lt;val&gt; &quot;on&quot; or
&quot;off&quot;, default on.</p>

<p>scsi_id &lt;val&gt;</p>

<p>scsi_sn &lt;val&gt;</p>

<p>vendor_id &lt;val&gt;</p>

<p>product_id &lt;val&gt;</p>

<p>product_rev &lt;val&gt;</p>

<p>sense_format &lt;val&gt;</p>

<p>removable &lt;val&gt;</p>

<p>path &lt;val&gt;</p>

<p>mode_page &lt;val&gt;</p>

<p>readonly &lt;val&gt;</p>

<p>device-type &lt;val&gt;</p>

<p>bs-type &lt;val&gt;</p>

<p>allow-in-use &lt;val&gt;</p>

<p>block-size &lt;val&gt; Specify the block size for this
LUN.</p>

<p>lbppbe &lt;val&gt; Specify the Logical blocks per
physical block exponent. This is an internal option that
should not be set directly.</p>

<p>la_lba &lt;val&gt; Specify the lowest aligned logical
block address. This is an internal option that should not be
set directly.</p>

<p>optimal_xfer_gran &lt;val&gt; Specify the optimal
transfer granularity, to be reflected in the Block Limits
VPD. This is an internal option that should not be set
directly.</p>

<p>optimal_xfer_len &lt;val&gt; Specify the optimal
transfer length, to be reflected in the Block Limits VPD.
This is an internal option that should not be set
directly.</p>

<p>params &lt;vals&gt; Pass additional parameters to
tgtadm.</p>

<p>CONFIGURATION FILE EXAMPLE Example configuration
file:</p>

<p>&lt;target iqn.2007-04.com.example:san.monitoring&gt;
backing-store /dev/san/monitoring</p>

<p># if no &quot;incominguser&quot; is specified, it is not
used incominguser backup secretpass12</p>

<p># defaults to ALL if no &quot;initiator-address&quot; is
specified initiator-address 192.168.1.2 &lt;/target&gt;</p>

<p>&lt;target iqn.2007-02.com.example:san.xen1&gt;
backing-store /dev/san/xen1-disk1 # LUN1 direct-store
/dev/san/xen1-disk2 # LUN2</p>

<p>initiator-address 192.168.1.2 # Allowed IP
initiator-address 192.168.5.6 # Allowed IP</p>

<p>incominguser user1 secretpass12 incominguser user2
secretpass23</p>

<p>outgoinguser userA secretpassA &lt;/target&gt;</p>

<p>&lt;target iqn.2007-02.com.example:san.xen2&gt;
backing-store /dev/san/xen2 &lt;/target&gt;</p>

<p>&lt;target iqn.2007-06.com.example:san.vmware1&gt;
backing-store /dev/san/vmware1 &lt;/target&gt;</p>

<p>FILES /etc/tgt/targets.conf Configuration file for
tgt-admin.</p>

<p>/usr/share/doc/tgt/targets.conf.example Example
configuration file for tgt-admin.</p>

<p>SEE ALSO tgtd(8), tgtadm(8), tgtimg(8),
tgt-setup-lun(8). http://stgt.sourceforge.net/</p>

<p>REPORTING BUGS Report bugs to
&lt;stgt@vger.kernel.org&gt;</p>

<p>[FIXME: source] 07/25/2014 TARGETS.CONF(5)</p>
<hr>
</body>
</html>
