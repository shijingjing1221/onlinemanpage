<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:44:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>virt-filesystems(1) Virtualization Support
virt-filesystems(1)</p>

<p>NAME virt-filesystems - List filesystems, partitions,
block devices, LVM in a virtual machine or disk image</p>

<p>SYNOPSIS virt-filesystems [--options] -d domname</p>

<p>virt-filesystems [--options] -a disk.img [-a disk.img
...]</p>

<p>DESCRIPTION This tool allows you to discover
filesystems, partitions, logical volumes, and their sizes in
a disk image or virtual machine. It is a replacement for
virt-list-filesystems(1) and virt-list-partitions(1).</p>

<p>One use for this tool is from shell scripts to iterate
over all filesystems from a disk image:</p>

<p>for fs in $(virt-filesystems -a disk.img); do # ...
done</p>

<p>Another use is to list partitions before using another
tool to modify those partitions (such as virt-resize(1)). If
you are curious about what an unknown disk image contains,
use this tool along with virt-inspector(1).</p>

<p>Various command line options control what this program
displays. You need to give either -a or -d options to
specify the disk image or libvirt guest respectively. If you
just specify that then the program shows filesystems found,
one per line, like this:</p>

<p>$ virt-filesystems -a disk.img /dev/sda1
/dev/vg_guest/lv_root</p>

<p>If you add -l or --long then the output includes extra
information:</p>

<p>$ virt-filesystems -a disk.img -l Name Type VFS Label
Size /dev/sda1 filesystem ext4 boot 524288000
/dev/vg_guest/lv_root filesystem ext4 root 10212081664</p>

<p>If you add --extra then non-mountable (swap, unknown)
filesystems are shown as well:</p>

<p>$ virt-filesystems -a disk.img --extra /dev/sda1
/dev/vg_guest/lv_root /dev/vg_guest/lv_swap
/dev/vg_guest/lv_data</p>

<p>If you add --partitions then partitions are shown
instead of filesystems:</p>

<p>$ virt-filesystems -a disk.img --partitions /dev/sda1
/dev/sda2</p>

<p>Similarly you can use --logical-volumes,
--volume-groups, --physical-volumes, --block-devices to list
those items.</p>

<p>You can use these options in combination as well (if you
want a combination including filesystems, you have to add
--filesystems). Notice that some items fall into several
categories (eg. &quot;/dev/sda1&quot; might be both a
partition and a filesystem). These items are listed several
times. To get a list which includes absolutely everything
that virt-filesystems knows about, use the --all option.</p>

<p>UUIDs (because they are quite long) are not shown by
default. Add the --uuid option to display device and
filesystem UUIDs in the long output.</p>

<p>--all --long --uuid is a useful combination to display
all possible information about everything.</p>

<p>$ virt-filesystems -a win.img --all --long --uuid -h
Name Type VFS Label Size Parent UUID /dev/sda1 filesystem
ntfs System Reserved 100M - F81C92571C92112C /dev/sda2
filesystem ntfs - 20G - F2E8996AE8992E3B /dev/sda1 partition
- - 100M /dev/sda - /dev/sda2 partition - - 20G /dev/sda -
/dev/sda device - - 20G - -</p>

<p>For machine-readable output, use --csv to get
Comma-Separated Values.</p>

<p>OPTIONS --help Display brief help.</p>

<p>-a file --add file Add file which should be a disk image
from a virtual machine. If the virtual machine has multiple
block devices, you must supply all of them with separate -a
options.</p>

<p>The format of the disk image is auto-detected. To
override this and force a particular format use the
--format=.. option.</p>

<p>--all Display everything. This is currently the same as
specifying these options: --filesystems, --extra,
--partitions, --block-devices, --logical-volumes,
--volume-groups, --physical-volumes. (More may be added to
this list in future).</p>

<p>See also --long.</p>

<p>--blkdevs --block-devices Display block devices.</p>

<p>-c URI --connect URI If using libvirt, connect to the
given URI. If omitted, then we connect to the default
libvirt hypervisor.</p>

<p>If you specify guest block devices directly (-a), then
libvirt is not used at all.</p>

<p>--csv Write out the results in CSV format
(comma-separated values). This format can be imported easily
into databases and spreadsheets, but read &quot;NOTE ABOUT
CSV FORMAT&quot; below.</p>

<p>-d guest --domain guest Add all the disks from the named
libvirt guest. Domain UUIDs can be used instead of
names.</p>

<p>--echo-keys When prompting for keys and passphrases,
virt-filesystems normally turns echoing off so you cannot
see what you are typing. If you are not worried about
Tempest attacks and there is no one else in the room you can
specify this flag to see what you are typing.</p>

<p>--extra This causes filesystems that are not ordinary,
mountable filesystems to be displayed. This category
includes swapspace, and filesystems that are empty or
contain unknown data.</p>

<p>This option implies --filesystems.</p>

<p>--filesystems Display mountable filesystems. If no
display option was selected then this option is implied.</p>

<p>With --extra, non-mountable filesystems are shown
too.</p>

<p>--format=raw|qcow2|.. --format The default for the -a
option is to auto-detect the format of the disk image. Using
this forces the disk format for -a options which follow on
the command line. Using --format with no argument switches
back to auto-detection for subsequent -a options.</p>

<p>For example:</p>

<p>virt-filesystems --format=raw -a disk.img</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot;.</p>

<p>virt-filesystems --format=raw -a disk.img --format -a
another.img</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot; and reverts to auto-detection for
&quot;another.img&quot;.</p>

<p>If you have untrusted raw-format guest disk images, you
should use this option to specify the disk format. This
avoids a possible security problem with malicious guests
(CVE-2010-3851).</p>

<p>-h --human-readable In --long mode, display sizes in
human-readable format.</p>

<p>--keys-from-stdin Read key or passphrase parameters from
stdin. The default is to try to read passphrases from the
user by opening &quot;/dev/tty&quot;.</p>

<p>-l --long Display extra columns of data (&quot;long
format&quot;).</p>

<p>A title row is added unless you also specify
--no-title.</p>

<p>The extra columns displayed depend on what output you
select, and the ordering of columns may change in future
versions. Use the title row, --csv output and/or csvtool(1)
to match columns to data in external programs.</p>

<p>Use -h if you want sizes to be displayed in
human-readable format. The default is to show raw numbers of
bytes.</p>

<p>Use --uuid to display UUIDs too.</p>

<p>--lvs --logvols --logical-volumes Display LVM logical
volumes. In this mode, these are displayed irrespective of
whether the LVs contain filesystems.</p>

<p>--no-title In --long mode, dont add a title row.</p>

<p>Note that the order of the columns is not fixed, and may
change in future versions of virt-filesystems, so using this
option may give you unexpected surprises.</p>

<p>--parts --partitions Display partitions. In this mode,
these are displayed irrespective of whether the partitions
contain filesystems.</p>

<p>--pvs --physvols --physical-volumes Display LVM physical
volumes.</p>

<p>--uuid --uuids In --long mode, display UUIDs as
well.</p>

<p>-v --verbose Enable verbose messages for debugging.</p>

<p>-V --version Display version number and exit.</p>

<p>--vgs --volgroups --volume-groups Display LVM volume
groups.</p>

<p>-x Enable tracing of libguestfs API calls.</p>

<p>COLUMNS Note that columns in the output are subject to
reordering and change in future versions of this tool.</p>

<p>Name The filesystem, partition, block device or LVM
name.</p>

<p>For device and partition names these are displayed as
canonical libguestfs names, so that for example
&quot;/dev/sda2&quot; is the second partition on the first
device.</p>

<p>If the --long option is not specified, then only the
name column is shown in the output.</p>

<p>Type The object type, for example
&quot;filesystem&quot;, &quot;lv&quot;, &quot;device&quot;
etc.</p>

<p>VFS If there is a filesystem, then this column displays
the filesystem type if one could be detected, eg.
&quot;ext4&quot;.</p>

<p>Label If the object has a label (used for identifying
and mounting filesystems) then this column contains the
label.</p>

<p>MBR The partition type byte, displayed as a two digit
hexadecimal number. A comprehensive list of partition types
can be found here:
http://www.win.tue.nl/~aeb/partitions/partition_types-1.html</p>

<p>This is only applicable for DOS (MBR) partitions.</p>

<p>Size The size of the object in bytes. If the --human
option is used then the size is displayed in a
human-readable form.</p>

<p>Parent The parent column records the parent relationship
between objects.</p>

<p>For example, if the object is a partition, then this
column contains the name of the containing device. If the
object is a logical volume, then this column is the name of
the volume group.</p>

<p>If there is more than one parent, then this column is
(internal to the column) a comma-separated list, eg.
&quot;/dev/sda,/dev/sdb&quot;.</p>

<p>UUID If the object has a UUID (used for identifying and
mounting filesystems and block devices) then this column
contains the UUID as a string.</p>

<p>The UUID is only displayed if the --uuid option is
given.</p>

<p>NOTE ABOUT CSV FORMAT Comma-separated values (CSV) is a
deceptive format. It seems like it should be easy to parse,
but it is definitely not easy to parse.</p>

<p>Myth: Just split fields at commas. Reality: This does
not work reliably. This example has two columns:</p>

<p>&quot;foo,bar&quot;,baz</p>

<p>Myth: Read the file one line at a time. Reality: This
does not work reliably. This example has one row:</p>

<p>&quot;foo bar&quot;,baz</p>

<p>For shell scripts, use &quot;csvtool&quot;
(http://merjis.com/developers/csv also packaged in major
Linux distributions).</p>

<p>For other languages, use a CSV processing library (eg.
&quot;Text::CSV&quot; for Perl or Pythons built-in csv
library).</p>

<p>Most spreadsheets and databases can import CSV
directly.</p>

<p>SHELL QUOTING Libvirt guest names can contain arbitrary
characters, some of which have meaning to the shell such as
&quot;#&quot; and space. You may need to quote or escape
these characters on the command line. See the shell manual
page sh(1) for details.</p>

<p>EXIT STATUS This program returns 0 if successful, or
non-zero if there was an error.</p>

<p>SEE ALSO guestfs(3), guestfish(1), virt-cat(1),
virt-df(1), virt-list-filesystems(1),
virt-list-partitions(1), csvtool(1),
http://libguestfs.org/.</p>

<p>AUTHOR Richard W.M. Jones
http://people.redhat.com/~rjones/</p>

<p>COPYRIGHT Copyright (C) 2010-2012 Red Hat Inc.</p>

<p>LICENSE This program is free software; you can
redistribute it and/or modify it under the terms of the GNU
General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your
option) any later version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth
Floor, Boston, MA 02110-1301 USA.</p>

<p>BUGS To get a list of bugs against libguestfs, use this
link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>When reporting a bug, please supply:</p>

<p>&middot; The version of libguestfs.</p>

<p>&middot; Where you got libguestfs (eg. which Linux
distro, compiled from source, etc)</p>

<p>&middot; Describe the bug accurately and give a way to
reproduce it.</p>

<p>&middot; Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.</p>

<p>libguestfs-1.20.11 2013-08-27 virt-filesystems(1)</p>
<hr>
</body>
</html>
