<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:24:37 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_APACHE(7) OCF resource agents
OCF_HEARTBEAT_APACHE(7)</p>

<p>NAME ocf_heartbeat_apache - Manages an Apache Web server
instance</p>

<p>SYNOPSIS apache [start | stop | status | monitor |
meta-data | validate-all]</p>

<p>DESCRIPTION This is the resource agent for the Apache
Web server. This resource agent operates both version 1.x
and version 2.x Apache servers.</p>

<p>The start operation ends with a loop in which monitor is
repeatedly called to make sure that the server started and
that it is operational. Hence, if the monitor operation does
not succeed within the start operation timeout, the apache
resource will end with an error status.</p>

<p>The monitor operation by default loads the server status
page which depends on the mod_status module and the
corresponding configuration file (usually
/etc/apache2/mod_status.conf). Make sure that the server
status page works and that the access is allowed *only* from
localhost (address 127.0.0.1). See the statusurl and
testregex attributes for more details.</p>

<p>See also http://httpd.apache.org/</p>

<p>SUPPORTED PARAMETERS configfile The full pathname of the
Apache configuration file. This file is parsed to provide
defaults for various other resource agent parameters.</p>

<p>(unique, optional, string, default
&quot;/etc/httpd/conf/httpd.conf&quot;)</p>

<p>httpd The full pathname of the httpd binary
(optional).</p>

<p>(optional, string, default
&quot;/usr/sbin/httpd&quot;)</p>

<p>port A port number that we can probe for status
information using the statusurl. This will default to the
port number found in the configuration file, or 80, if none
can be found in the configuration file.</p>

<p>(optional, integer, no default)</p>

<p>statusurl The URL to monitor (the apache server status
page by default). If left unspecified, it will be inferred
from the apache configuration file.</p>

<p>If you set this, make sure that it succeeds *only* from
the localhost (127.0.0.1). Otherwise, it may happen that the
cluster complains about the resource being active on
multiple nodes.</p>

<p>(optional, string, no default)</p>

<p>testregex Regular expression to match in the output of
statusurl. Case insensitive.</p>

<p>(optional, string, default &quot;exists, but impossible
to show in a human readable format (try grep
testregex)&quot;)</p>

<p>client Client to use to query to Apache. If not
specified, the RA will try to find one on the system.
Currently, wget and curl are supported. For example, you can
set this parameter to &quot;curl&quot; if you prefer that to
wget.</p>

<p>(optional, string, no default)</p>

<p>testurl URL to test. If it does not start with
&quot;http&quot;, then it&acute;s considered to be relative
to the Listen address.</p>

<p>(optional, string, no default)</p>

<p>testregex10 Regular expression to match in the output of
testurl. Case insensitive.</p>

<p>(optional, string, no default)</p>

<p>testconffile A file which contains test configuration.
Could be useful if you have to check more than one web
application or in case sensitive info should be passed as
arguments (passwords). Furthermore, using a config file is
the only way to specify certain parameters.</p>

<p>Please see README.webapps for examples and file
description.</p>

<p>(optional, string, no default)</p>

<p>testname Name of the test within the test configuration
file.</p>

<p>(optional, string, no default)</p>

<p>options Extra options to apply when starting apache. See
man httpd(8).</p>

<p>(optional, string, no default)</p>

<p>envfiles Files (one or more) which contain extra
environment variables. If you want to prevent script from
reading the default file, set this parameter to empty
string.</p>

<p>(optional, string, default
&quot;/etc/apache2/envvars&quot;)</p>

<p>use_ipv6 We will try to detect if the URL (for monitor)
is IPv6, but if that doesn&acute;t work set this to true to
enforce IPv6.</p>

<p>(optional, boolean, default false)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
40s.</p>

<p>stop Stops the resource. Suggested minimum timeout:
60s.</p>

<p>status Performs a status check. Suggested minimum
timeout: 30s.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 20s. Suggested interval: 10.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 5.</p>

<p>EXAMPLE The following is an example configuration for a
apache resource using the crm(8) shell:</p>

<p>primitive p_apache ocf:heartbeat:apache op monitor
depth=&quot;0&quot; timeout=&quot;20s&quot;
interval=&quot;10&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/apache_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>resource-agents 3.9.2 05/07/2015
OCF_HEARTBEAT_APACHE(7)</p>
<hr>
</body>
</html>
