<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:07:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>CCS(8) CCS(8)</p>

<p>NAME ccs - Cluster Configuration System</p>

<p>SYNOPSIS ccs [-h hostname | -f filename] [options]</p>

<p>DESCRIPTION ccs allows an administrator to create,
modify and view a cluster con- figuration file on a remote
node through ricci or on a local file sys- tem. Using ccs an
administrator can also start and stop the cluster services
on one or all of the nodes in a configured cluster.</p>

<p>OPTIONS Generally all command lines must specify either
a hostname or filename to act upon.</p>

<p>MAIN OPTIONS --help Display this help and exit</p>

<p>-h, --host host Cluster node to perform actions on</p>

<p>-f, --file file File to perform actions on</p>

<p>-i, --ignore Ignore validation errors in cluster.conf
file</p>

<p>-p, --password Ricci user password for node running
ricci</p>

<p>--getconf Print current cluster.conf file</p>

<p>--setconf Use the file specified by -f to send to the
host specified with -h</p>

<p>--checkconf If file is specified, verify that all the
nodes in the file have the same cluster.conf as the file. If
a host is specified then verify that all nodes in the host s
cluster.conf file have the identical</p>

<p>--getschema Print current cluster schema file (if using
-h use schema from network, if using -f use local
schema)</p>

<p>--sync Sync config file to all nodes and optionally
activating that configuration on all nodes</p>

<p>--activate Activate config on node (use this option with
--sync to activate config on all nodes)</p>

<p>-d, --debug Display debugging information to help
troubleshoot connection issues with ricci</p>

<p>--exp tag [location] [options] Expert mode to add
elements not currently defined in ccs</p>

<p>--exprm location Expert mode to remove elements not
currently defined in ccs</p>

<p>CLUSTER OPERATIONS --createcluster cluster Create a new
cluster.conf (removing old one if it exists)</p>

<p>--getversion Get the current cluster.conf version</p>

<p>--setversion &lt;n&gt; Set the cluster.conf version</p>

<p>--incversion Increment the cluster.conf version by 1</p>

<p>--startall [--noenable|--nodisable] Start *AND* enable
cluster services on reboot on all nodes (if --noenable or
--nodisable is specified cluster services will only be
started)</p>

<p>--stopall [--noenable|--nodisable] Stop *AND* disable
cluster services on reboot for all nodes (if --noenable or
--nodisable is specified cluster services will only be
stopped)</p>

<p>--start [--noenable|--nodisable] Start *AND* enable
cluster services on reboot for host specified with -h or
localhost if no host is provided (if --noenable or
--nodisable is specified cluster services will only be
started)</p>

<p>--stop [--noenable|--nodisable] Stop *AND* disable
cluster services on reboot for host specified with -h or
localhost if no host is provided (if --noenable or
--nodisable is specified cluster services will only be
stopped)</p>

<p>NODE OPERATIONS --lsnodes List all nodes in the
cluster</p>

<p>--addnode &lt;node&gt; Add node &lt;node&gt; to the
cluster</p>

<p>--rmnode &lt;node&gt; Remove a node from the cluster</p>

<p>--nodeid &lt;nodeid&gt; Specify nodeid when adding a
node</p>

<p>--votes &lt;votes&gt; Specify number of votes when
adding a node</p>

<p>--addalt &lt;node name&gt; &lt;alt name&gt; [alt
options] Add an altname to a node for RRP</p>

<p>--rmalt &lt;node name&gt; Remove an altname from a node
for RRP</p>

<p>FENCING OPERATIONS --lsfenceopts [fence type] List
available fence devices. If a fence type is specified, then
list options for the specified fence type</p>

<p>--lsfencedev List all of the fence devices
configured</p>

<p>--lsfenceinst [&lt;node&gt;] List all of the fence
methods and instances on the specified node or all nodes if
no node is specified</p>

<p>--addmethod &lt;method&gt; &lt;node&gt; Add a fence
method to a specific node</p>

<p>--rmmethod &lt;method&gt; &lt;node&gt; Remove a fence
method from a specific node</p>

<p>--addfencedev &lt;device name&gt; [fence device options]
Add fence device. Fence devices and parameters can be found
in online documentation in Fence Device Parameters</p>

<p>--rmfencedev &lt;fence device name&gt; Remove fence
device</p>

<p>--addfenceinst &lt;fence device name&gt; &lt;node&gt;
&lt;method&gt; [options] [--noun- fence] Add fence instance.
Fence instance parameters can be found in online
documentation in Fence Device Parameters. Using --nounfence
prevents ccs from automatically including an unfenc- ing
section for agents that require unfencing (ie. fence_scsi,
fence_sanlock, etc.)</p>

<p>--rmfenceinst &lt;fence device name&gt; &lt;node&gt;
&lt;method&gt; Remove all instances of the fence device
listed from the given method and node</p>

<p>--addunfenceinst &lt;fence device name&gt; &lt;node&gt;
[options] Add an unfence instance</p>

<p>--rmunfenceinst &lt;fence device name&gt; &lt;node&gt;
Remove all instances of the fence device listed from the
unfence section of the node</p>

<p>FAILOVER DOMAIN OPERATIONS --lsfailoverdomain Lists all
of the failover domains and failover domain nodes con-
figured in the cluster</p>

<p>--addfailoverdomain &lt;name&gt; [restricted] [ordered]
[nofailback] Add failover domain</p>

<p>--rmfailoverdomain &lt;name&gt; Remove failover
domain</p>

<p>--addfailoverdomainnode &lt;failover domain&gt;
&lt;node&gt; [priority] Add node to given failover
domain</p>

<p>--rmfailoverdomainnode &lt;failover domain&gt;
&lt;node&gt; Remove node from failover domain</p>

<p>SERVICE OPERATIONS --lsserviceopts [service type] List
available services. If a service type is specified, then
list options for the specified service type</p>

<p>--lsresourceopts [service type] An alias to
--lsserviceopts</p>

<p>--lsservices List currently configured services and
resources in the cluster</p>

<p>--addresource &lt;resource type&gt; [resource options]
... Add global cluster resources to the cluster Resource
types and variables can be found in the online documentation
under HA Resource Parameters</p>

<p>--rmresource &lt;resource type&gt; [resource options]
Remove specified resource with resource options</p>

<p>--addservice &lt;servicename&gt; [service options] ...
Add service to cluster</p>

<p>--rmservice &lt;servicename&gt; Removes a service and
all of its subservices</p>

<p>--addaction &lt;resource/name&gt; &lt;action_name&gt;
&lt;action_option=val&gt; Add an action to the specified
resource.</p>

<p>--rmaction &lt;resource name&gt; [&lt;action_name&gt;
[action options]] Remove all actions from resource, or
actions matching action name and options specified</p>

<p>--addvm &lt;virtual machine name&gt; [vm options] ...
Adds a virtual machine to the cluster</p>

<p>--rmvm &lt;virtual machine name&gt; Removes named
virtual machine from the cluster</p>

<p>--addsubservice &lt;servicename&gt; &lt;subservice&gt;
[service options] ... Add individual subservices, if adding
child services, use : to separate parent and child
subservices and brackets to identify subservices of the same
type Subservice types and variables can be found in the
online docu- mentation under HA Resource Parameters To add a
nfsclient subservice as a child of the 2nd nfsclient
subservice in the service_a service use the following
example: ccs &lt;...&gt; --addsubservice service_a
nfsclient[1]:nfsclient ref=/test</p>

<p>--rmsubservice &lt;servicename&gt; &lt;subservice&gt;
Removes a specific subservice specified by the subservice,
using : to separate elements and brackets to identify
between sub- services of the same type. To remove the 1st
nfsclient child subservice of the 2nd nfsclient subservice
in the service_a service, use the follow- ing example: ccs
&lt;...&gt; --rmsubservice service_a
nfsclient[1]:nfsclient</p>

<p>QUORUM OPERATIONS --lsquorum List quorum options and
heuristics</p>

<p>--setquorumd [quorumd options] ... Add quorumd
options</p>

<p>--addheuristic [heuristic options] ... Add heuristics to
quorumd</p>

<p>--rmheuristic [heuristic options] ... Remove heuristic
specified by heurstic options</p>

<p>MISC OPTIONS --lsmisc List all of the misc options</p>

<p>--settotem [totem options] Set totem options</p>

<p>--setuidgid uid=&lt;uid&gt; gid=&lt;gid&gt; Set uidgid
options</p>

<p>--rmuidgid uid=&lt;uid&gt; gid=&lt;gid&gt; Remove uidgid
entry matching specified uid/gid</p>

<p>--setdlm [dlm options] Set dlm options</p>

<p>--setrm [resource manager options] Set resource manager
options</p>

<p>--setcman [cman options] Set cman options</p>

<p>--setmulticast [multicast address] [multicast options]
Sets the multicast address to use (or removes it if no
multicast address is given)</p>

<p>--setaltmulticast [alt multicast address] [alt multicast
options] Sets the alt multicast address to use (or removes
it if no alt multicast address is given)</p>

<p>--setfencedaemon [fence daemon options] Set fence daemon
options</p>

<p>--setlogging [logging options] Set logging options</p>

<p>--addlogging [logging daemon options] Add a logging
daemon (see cluster.conf for options)</p>

<p>--rmlogging [logging daemon options] Remove the logging
daemon with the specified options</p>

<p>FILES ~/.ccs/cacert.config ~/.ccs/cacert.pem
~/.ccs/privkey.pem Automatically generated certificate files
used to authenticate with ricci.</p>

<p>EXAMPLES Create and start a 3 node cluster with apc
fencing: ccs -h host1 --createcluster mycluster ccs -h host1
--addnode host1 ccs -h host1 --addnode host2 ccs -h host1
--addnode host3 ccs -h host1 --addmethod primary host1 ccs
-h host1 --addmethod primary host2 ccs -h host1 --addmethod
primary host3 ccs -h host1 --addfencedev myfence
agent=fence_apc ipaddr=192.168.0.200 login=apc passwd=apc
ccs -h host1 --addfenceinst myfence host1 primary port=1 ccs
-h host1 --addfenceinst myfence host2 primary port=2 ccs -h
host1 --addfenceinst myfence host3 primary port=3 ccs -h
host1 --sync --activate ccs -h host1 --startall</p>

<p>AUTHOR Chris Feist &lt;cfeist@redhat.com&gt;</p>

<p>SEE ALSO ricci(8), cluster.conf(5), ccs_tool(8)</p>

<p>NOTES Fence Device Parameters
http://docs.redhat.com/docs/en-
US/Red_Hat_Enterprise_Linux/6/html/Cluster_Administration/ap-fence-
device-param-CA.html HA Resource Parameters
http://docs.redhat.com/docs/en-US/Red_Hat_Enter-
prise_Linux/6/html/Cluster_Administration/ap-ha-resource-params-CA.html</p>

<p>CCS(8)</p>
<hr>
</body>
</html>
