<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:30:40 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>radrelay.conf(5) FreeRADIUS configuration file
radrelay.conf(5)</p>

<p>NAME radrelay.conf - configuration file for the
FreeRADIUS server &quot;radrelay&quot; personality</p>

<p>DESCRIPTION The radrelay.conf file resides in the radius
database directory, by default /etc/raddb. It defines the
global configuration for the FreeRADIUS server, when the
server is operating as &quot;radrelay&quot;.</p>

<p>FILE FORMAT For a detailed description of the file
format, see &quot;man radiusd.conf&quot;. The configuration
entries are much the same for radrelay.conf, with a few
differences as noted here.</p>

<p>REPLICATION FOR BACKUPS Many sites run multiple radius
servers; at least one primary and one backup server. When
the primary goes down, most NASes detect that and switch to
the backup server.</p>

<p>That will cause your accounting packets to go the the
backup server - and some NASes dont even switch back to the
primary server when it comes back up.</p>

<p>The result is that accounting records are missed, and/or
the adminis- trator must jump through hoops in order to
combine the different detail files from multiple servers. It
also means that the session database (&quot;radutmp&quot;,
used for radwho and simultaneous use detection) gets out of
sync.</p>

<p>radrelay solves this issue by &quot;relaying&quot;
packets from one server to another, so they both have the
same set of accounting data.</p>

<p>BUFFERING FOR HIGH-LOAD SERVERS If the RADIUS server
suddenly receives a many accounting packets, there may be
insufficient CPU power to process them all in a timely
manner. This problem is especially noticable when the
accounting packets are going to a back-end database.</p>

<p>Similarly, you may have one database that tracks
&quot;live&quot; sessions, and another that tracks
historical accounting data. In that case, access- ing the
first database is fast, as it is small. Accessing the second
database many be slower, as it may contain multiple
gigabytes of data. In addition, writing to the first
database in a timely manner is impor- tant, while data may
be written to the second database with a few min- utes
delay, without any harm being done.</p>

<p>RELAYING OF ACCOUNTING PACKETS The radrelay.conf file
controls the &quot;radrelay&quot; personality of the server,
which can perform both of the functions above at the same
time.</p>

<p>USAGE First, you should configure the main radius server
to log to an extra, single detail file. This may be done by
adding an extra instance of the detail module to
radiusd.conf:</p>

<p>For example:</p>

<p>detail radrelay-detail { detailfile =
${radacctdir}/radrelay/detail detailperm = 0600 dirperm =
0755 locking = yes } ... accounting { ... radrelay-detail
... }</p>

<p>This configuration will cause accounting packets to be
logged to the ${radacctdir}/radrelay/detail file. This file
should not be rotated by standard log rotation scripts, as
the radrelay program will read and rotate it.</p>

<p>RADRELAY.CONF EXAMPLE See the radrelay.conf file for
detailed instructions on configuration entries, what they
mean, and how to use them.</p>

<p>To have the &quot;radrelay&quot; portion of the server
read the above detail file, configure radrelay.conf with the
following section:</p>

<p>listen { type = detail detail =
${radacctdir}/radrelay/detail max_outstanding = 100 identity
= radrelay }</p>

<p>The server will read the accounting packets from the
detail file, and process them just as if it had received
them from the NAS. Therefore, you should configure the
&quot;accounting&quot; section of radrelay.conf to write the
accounting records to an &quot;sql&quot; module, or to proxy
them to another RADIUS server.</p>

<p>Then, start the server via the following command:</p>

<p>$ radiusd -n radrelay</p>

<p>The server should start up, read the detail file, and
process account- ing packets from it.</p>

<p>NOTES The radiusd.conf file is not read at all when the
server is running as radrelay. Please edit
radrelay.conf.</p>

<p>CREDITS The original &quot;radrelay&quot; program was
written by Miquel van Smoorenburg for the Cistron radius
project, and ported to FreeRADIUS by Simon Ekstrand. The
&quot;radsqlrelay&quot; was written by Kostas Kalavras. It
was never released as part of an offical FreeRADIUS release,
but served as a basis for the design of this
implementation.</p>

<p>FILES /etc/raddb/radrelay.conf</p>

<p>SEE ALSO radiusd(8), radiusd.conf(5)</p>

<p>AUTHOR Alan DeKok &lt;aland@ox.org&gt;</p>

<p>27 May 2005 radrelay.conf(5)</p>
<hr>
</body>
</html>
