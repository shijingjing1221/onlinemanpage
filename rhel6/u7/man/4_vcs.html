<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:43:57 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>VCS(4) Linux Programmer s Manual VCS(4)</p>

<p>NAME vcs, vcsa - virtual console memory</p>

<p>DESCRIPTION /dev/vcs0 is a character device with major
number 7 and minor number 0, usually of mode 0644 and owner
root.tty. It refers to the memory of the currently displayed
virtual console terminal.</p>

<p>/dev/vcs[1-63] are character devices for virtual console
terminals, they have major number 7 and minor number 1 to
63, usually mode 0644 and owner root.tty. /dev/vcsa[0-63]
are the same, but using unsigned shorts (in host byte order)
that include attributes, and prefixed with four bytes giving
the screen dimensions and cursor position: lines, columns,
x, y. (x = y = 0 at the top left corner of the screen.)</p>

<p>When a 512-character font is loaded, the 9th bit
position can be fetched by applying the ioctl(2)
VT_GETHIFONTMASK operation (available in Linux kernels
2.6.18 and above) on /dev/tty[1-63]; the value is returned
in the unsigned short pointed to by the third ioctl(2) argu-
ment.</p>

<p>These devices replace the screendump ioctl(2) operations
of console(4), so the system administrator can control
access using file system per- missions.</p>

<p>The devices for the first eight virtual consoles may be
created by:</p>

<p>for x in 0 1 2 3 4 5 6 7 8; do mknod -m 644 /dev/vcs$x c
7 $x; mknod -m 644 /dev/vcsa$x c 7 $[$x+128]; done chown
root:tty /dev/vcs*</p>

<p>No ioctl(2) requests are supported.</p>

<p>FILES /dev/vcs[0-63] /dev/vcsa[0-63]</p>

<p>VERSIONS Introduced with version 1.1.92 of the Linux
kernel.</p>

<p>EXAMPLE You may do a screendump on vt3 by switching to
vt1 and typing cat /dev/vcs3 &gt;foo. Note that the output
does not contain newline charac- ters, so some processing
may be required, like in fold -w 81 /dev/vcs3 | lpr or
(horrors) setterm -dump 3 -file /proc/self/fd/1.</p>

<p>The /dev/vcsa0 device is used for Braille support.</p>

<p>This program displays the character and screen
attributes under the cursor of the second virtual console,
then changes the background color there:</p>

<p>#include &lt;unistd.h&gt; #include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt; #include &lt;fcntl.h&gt; #include
&lt;sys/ioctl.h&gt; #include &lt;linux/vt.h&gt;</p>

<p>int main(void) { int fd; char *device =
&quot;/dev/vcsa2&quot;; char *console =
&quot;/dev/tty2&quot;; struct {unsigned char lines, cols, x,
y;} scrn; unsigned short s; unsigned short mask; unsigned
char ch, attrib;</p>

<p>fd = open(console, O_RDWR); if (fd &lt; 0) {
perror(console); exit(EXIT_FAILURE); } if (ioctl(fd,
VT_GETHIFONTMASK, &amp;mask) &lt; 0) {
perror(&quot;VT_GETHIFONTMASK&quot;); exit(EXIT_FAILURE); }
(void) close(fd); fd = open(device, O_RDWR); if (fd &lt; 0)
{ perror(device); exit(EXIT_FAILURE); } (void) read(fd,
&amp;scrn, 4); (void) lseek(fd, 4 + 2*(scrn.y*scrn.cols +
scrn.x), 0); (void) read(fd, &amp;s, 2); ch = s &amp; 0xff;
if (attrib &amp; mask) ch |= 0x100; attrib = ((s &amp;
~mask) &gt;&gt; 8); printf(&quot;ch=&rsquo;%c&rsquo;
attrib=0x%02x0, ch, attrib); attrib ^= 0x10; (void)
lseek(fd, -1, 1); (void) write(fd, &amp;attrib, 1);
exit(EXIT_SUCCESS); }</p>

<p>SEE ALSO console(4), tty(4), ttyS(4), gpm(8)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2007-12-17 VCS(4)</p>
<hr>
</body>
</html>
