<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:17:56 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>guestfs-release-notes(1) Virtualization Support
guestfs-release-notes(1)</p>

<p>NAME guestfs-release-notes - libguestfs Release
Notes</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.20 These release notes
only cover the differences from the previous stable/dev
branch split (1.18.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features libvirt and sVirt (SELinux confinement)</p>

<p>You can optionally use libvirt to launch and manage the
backend appliance by:</p>

<p>&middot; setting
&quot;LIBGUESTFS_ATTACH_METHOD=libvirt[:URI]&quot;</p>

<p>&middot; using &quot;./configure
--with-default-attach-method=libvirt[:URI]&quot;</p>

<p>&middot; or calling the API method
&quot;guestfs_set_attach_method&quot;</p>

<p>SVirt (SELinux confinement) is used to secure the
libguestfs appliance, if the libvirt backend is
selected.</p>

<p>virtio-scsi, larger number of drives, hotplugging</p>

<p>Virtio-scsi is now used by default, if it is available.
This greatly increases the number of drives that can be
added to a single libguestfs handle (up to 255).</p>

<p>You can now hotplug drives (add and remove drives after
launch).</p>

<p>Libguestfs can now handle &gt; 25 disks, in all APIs,
tools and tests.</p>

<p>You can label drives when adding them, then refer to
them by label (&quot;/dev/disk/guestfs/LABEL&quot;) instead
of having to use device names (&quot;/dev/sda&quot;).</p>

<p>new library features</p>

<p>POSIX Access Control Lists (ACLs) and Linux filesystem
capabilities can now be read and written through the
API.</p>

<p>Windows Dynamic Disks are now supported. The metadata
can only be read (volumes cannot be modified or created).
However the data/filesystems in the volumes themselves can
be mounted, read and written (Matthew Booth).</p>

<p>Hivex (Windows Registry editing) is now directly
supported through the API, making reading or editing the
Windows Registry much more efficient.</p>

<p>Several libguestfs APIs were reimplemented so they no
longer have any limits on output. The reimplemented APIs
are: &quot;guestfs_cat&quot;, &quot;guestfs_find&quot;,
&quot;guestfs_read_file&quot;,
&quot;guestfs_read_lines&quot;, &quot;guestfs_write&quot;,
&quot;guestfs_write_append&quot;,
&quot;guestfs_lstatlist&quot;,
&quot;guestfs_lxattrlist&quot;,
&quot;guestfs_readlinklist&quot;,
&quot;guestfs_ls&quot;.</p>

<p>virt tools</p>

<p>&quot;guestfish touch &rsquo;win:c:0w_file&rsquo;&quot;
now works as expected.</p>

<p>&quot;guestfish&quot; has a new --network option, which
enables the user network in libguestfs.</p>

<p>You can set &quot;GUESTFISH_PS1&quot; to use fancy
prompts in &quot;guestfish&quot;.</p>

<p>&quot;rsync&quot;, &quot;ssh&quot;, &quot;less&quot; and
&quot;lrzip&quot; commands are now available in virt-
rescue. In addition, &quot;rsync&quot; can be used through
the API for doing incremental copies.</p>

<p>&quot;virt-sparsify&quot; uses qcow2 v3 for increased
efficiency.</p>

<p>&quot;virt-sysprep&quot; enhancements:</p>

<p>&middot; generate new UUIDs for PVs and VGs</p>

<p>&middot; remove the local machine ID (Wanlong Gao)</p>

<p>&middot; remove ABRT data (Wanlong Gao)</p>

<p>&middot; remove puppet keys and log files (Wanlong
Gao)</p>

<p>&middot; remove process accounting files (Wanlong
Gao)</p>

<p>&middot; new --firstboot parameter allowing firstboot
scripts for customizing guests</p>

<p>&middot; remove HOSTNAME field from
&quot;ifcfg-eth*&quot; files (Wanlong Gao)</p>

<p>&middot; miscellaneous improvements for SuSE (Olaf
Hering)</p>

<p>&middot; remove man pages cache (Wanlong Gao)</p>

<p>&middot; remove crash data generated by kexec-tools
(Wanlong Gao)</p>

<p>&quot;virt-make-fs&quot; can now create virtual floppy
disks (VFDs).</p>

<p>&quot;guestmount&quot; has a --pid-file option, which
can be used to avoid a race condition between unmounting the
filesystem and using the underlying disk image.</p>

<p>language bindings</p>

<p>Full-featured Lua bindings have been added in this
release (thanks to Jerome Vuarand for many suggestions).</p>

<p>In Ruby, optional arguments hash is optional.</p>

<p>In Python, optional arguments now don t use special
&quot;sentinel&quot; values, so any integer can be passed as
an optional argument.</p>

<p>Erlang bindings now come with examples and tests.</p>

<p>Erlang bindings now handle 64 bit integer parameters
correctly.</p>

<p>The automated bindtests now test for 64 bit cleanliness
in parameter passing. Several bugs in the bindings were
found and fixed as a result.</p>

<p>Better handling of blocking and non-blocking functions
should make libguestfs calls more efficient.</p>

<p>inspection</p>

<p>Windows guests with unlimited-sized Registries are now
supported. By adding the hivex API to the libguestfs API, it
is much more efficient and easier to inspect and modify the
Windows Registry in guests.</p>

<p>Better support for SuSE guests (Olaf Hering).</p>

<p>Return the architecture of installed applications (John
Eckersberg).</p>

<p>Windows 8 is now supported.</p>

<p>Fedora 18 is now supported.</p>

<p>Inspection of ISOs/CDs/DVDs can now use the libosinfo
database.</p>

<p>ports</p>

<p>Libguestfs without the appliance can be compiled on Mac
OS X (Masami HIRATA).</p>

<p>RHEL 5 is now explicitly supported through the oldlinux
branch in upstream git.</p>

<p>PowerPC 64 bit is now supported. Also libguestfs has
been examined for endianness bugs and these have been
fixed.</p>

<p>daemon</p>

<p>A man page for the daemon (guestfsd(8)) is included.</p>

<p>Security guestfish history file</p>

<p>The &quot;$HOME/.guestfish&quot; history file is now
created with 0600 permissions (instead of 0644 before) so it
is no longer world readable.</p>

<p>CVE-2012-2690</p>

<p>Old versions of both &quot;virt-edit&quot; and the
&quot;guestfish&quot; &quot;edit&quot; command created a new
file containing the changes but did not set the permissions,
etc of the new file to match the old one. The result of this
was that if you edited a security sensitive file such as
&quot;/etc/shadow&quot; then it would be left world-readable
after the edit.</p>

<p>This issue was assigned CVE-2012-2690, and is fixed in
libguestfs 1.16.</p>

<p>For further information, see
https://bugzilla.redhat.com/show_bug.cgi?id=788642</p>

<p>New APIs acl-delete-def-file acl-get-file acl-set-file
canonical-device-name cap-get-file cap-set-file create-flags
device-index disk-has-backing-file disk-format
disk-virtual-size filesystem-available fill-dir fstrim
get-cachedir get-libvirt-requested-credentials
get-libvirt-requested-credential-prompt
get-libvirt-requested-credential-challenge
get-libvirt-requested-credential-defresult get-tmpdir
hivex-close hivex-commit hivex-node-add-child
hivex-node-children hivex-node-delete-child
hivex-node-get-child hivex-node-get-value hivex-node-name
hivex-node-parent hivex-node-set-value hivex-node-values
hivex-open hivex-root hivex-value-key hivex-value-type
hivex-value-utf8 hivex-value-value
inspect-list-applications2 (John Eckersberg)
list-ldm-volumes list-ldm-partitions ldmtool-create-all
ldmtool-diskgroup-disks ldmtool-diskgroup-name
ldmtool-diskgroup-volumes ldmtool-remove-all ldmtool-scan
ldmtool-scan-devices ldmtool-volume-hint
ldmtool-volume-partitions ldmtool-volume-type ls0 max-disks
mke2fs (Wanlong Gao) mklost-and-found mkswap [added label
and uuid optional arguments] mktemp (Wanlong Gao) nr-devices
parse-environment parse-environment-list rm-f rsync rsync-in
rsync-out set-cachedir set-libvirt-supported-credentials
set-libvirt-requested-credential set-tmpdir shutdown
[backported to 1.16 and 1.18] tar-in [added compress flag]
tar-out [added compress, numericowner, excludes flags]
umount [added force and lazy optional arguments] utsname
xfs-admin (Wanlong Gao) xfs-growfs (Wanlong Gao) xfs-info
(Wanlong Gao) xfs-repair (Wanlong Gao)</p>

<p>In the C API only:</p>

<p>guestfs_push_error_handler guestfs_pop_error_handler</p>

<p>Internals qemu 1.1 is required ( 1.2 preferred).</p>

<p>febootstrap 3.20 is required.</p>

<p>libvirt is optional, but if you want to use the new
libvirt backend for launching the appliance then libvirt
0.10.2 would be required.</p>

<p>Coverity has been run over the complete codebase, and
many issues fixed (thanks Ondrej Vasik, Kamil Dudka).</p>

<p>Functions which previously had no optargs can now be
converted to ones with optargs, making extending the API
much more flexible. Source and binary backwards
compatibility is preserved for users of the API.</p>

<p>The way that libguestfs APIs and structures are
represented in the generator has changed to use an OCaml
struct instead of a tuple. This makes generator descriptions
more flexible and easier to understand. For details see
commits 39d1a7db and eb185eef.</p>

<p>Separation of the library code into more files:</p>

<p>&middot; Launch backends are now located in separate
files eg. &quot;src/launch-appliance.c&quot;,
&quot;src/launch-libvirt.c&quot;.</p>

<p>&middot; Generated action code is now split over several
&quot;src/action*.c&quot; files, for faster compilation.</p>

<p>&middot; The huge &quot;src/guestfs.c&quot; file is now
split into smaller logical units.</p>

<p>POD (documentation) is now generated using a rewritten
Perl program instead of pod2* + shell scripts.</p>

<p>Man pages now contain stable dates (Hilko Bengen).</p>

<p>Skipped tests now exit with code 77, so they appear as
&quot;SKIP:&quot; in &quot;make check&quot; output.</p>

<p>The parallel mount-local test has been rewritten in C
(RHBZ#838081).</p>

<p>Ruby 1.8.5 is now supported (though Ruby 1.9 is
preferred).</p>

<p>Perl bindings can be disabled via &quot;./configure
--disable-perl&quot; (Wulf C. Krueger). Note that Perl is
still required in order to build libguestfs.</p>

<p>Java bindings are now enabled/disabled using
&quot;./configure --with-java&quot; or &quot;./configure
--without-java&quot; (Wulf C. Krueger).</p>

<p>New configure options &quot;./configure
--enable-code-profiling&quot; and &quot;./configure
--enable-code-coverage&quot;.</p>

<p>Multiple fixes to use of 64 bit integers in language
bindings.</p>

<p>The appliance backend now uses sgabios instead of
vgabios (Dan Berrange).</p>

<p>The &quot;./run&quot; script now sets enough environment
variables that you can run OCaml, Python, Ruby, Java, GJS,
Erlang, Lua programs.</p>

<p>&quot;./run --test&quot; flag for running tests with
minimal output. It also prints the time taken to run each
test.</p>

<p>The &quot;./run&quot; script now builds up paths
cumulatively, meaning that you can use &quot;./run&quot;
twice, or use the libguestfs and libvirt &quot;./run&quot;
scripts together.</p>

<p>You can extract a list of external commands required by
the daemon, making building the appliance on certain distros
easier (Olaf Hering).</p>

<p>The &quot;virt-rescue&quot; command is now tested during
&quot;make check&quot;.</p>

<p>The generator now removes unused generated files. This
helps when going back and forth with git rebase, git bisect,
etc.</p>

<p>Tests now run in a separate toplevel &quot;tmp/&quot;
directory in the source. This allows the directory to be
labelled for SELinux (sVirt), and also makes it easier to
clean up.</p>

<p>&quot;make syntax-check&quot; now works to a greater
extent, and many problems in the main code that were found
by syntax-check have been fixed (thanks Jim Meyering).</p>

<p>Emacs mode (-*- foo -*-) has been added to generated
files.</p>

<p>Progress bar output is now sent to &quot;/dev/tty&quot;
so it doesnt end up in the regular output of the program.
virt-resize and virt-sparsify now suppress progress bars if
stdout is not a tty.</p>

<p>There is now a &quot;./configure --without-libvirt&quot;
option. This is useful for testing that the code still
compiles without libvirt.</p>

<p>There is now an internal mini-library for running
commands. This allows us to redirect errors from external
commands into events.</p>

<p>Code for handling temporary directories and the
appliance cache was completely overhauled.</p>

<p>Code for temporarily ignoring/disabling errors now looks
like this:</p>

<p>guestfs_push_error_handler (g, NULL, NULL);
guestfs_mkdir (g, &quot;/foo&quot;); /* We don&rsquo;t care
if this fails. */ guestfs_pop_error_handler (g);</p>

<p>The &quot;tests/extra&quot; directory has gone. The
&quot;extra tests&quot; are now split into separately
runnable targets, such as &quot;make check-valgrind&quot;.
Use &quot;make help&quot; to get a summary of the
targets.</p>

<p>The &quot;lpj&quot; option is passed to the appliance
kernel when using TCG. This should improve clock stability
(thanks Marcelo Tosatti, Olaf Hering).</p>

<p>Bugs fixed https://bugzilla.redhat.com/882417 libguestfs
tools fail with odd error messages if TMPDIR is not an
absolute path</p>

<p>https://bugzilla.redhat.com/882299 Windows 8 guest disks
can t be mounted: &quot;The NTFS partition is in an unsafe
state. Please resume and shutdown Windows fully (no
hibernation or fast restarting), or mount the volume
read-only with the ro mount option.&quot;</p>

<p>https://bugzilla.redhat.com/881953 libguestfs: migration
to /etc/hostname, /etc/vconsole.conf, /etc/locale.conf</p>

<p>https://bugzilla.redhat.com/880801 virt-df with two -a
options displays incorrect disk image name</p>

<p>https://bugzilla.redhat.com/879416 libguestfs-test-tool
pauses when you use --help option</p>

<p>https://bugzilla.redhat.com/876579 mke2fs API does not
apply block device naming translation to journaldevice
optarg</p>

<p>https://bugzilla.redhat.com/860235 SELinux policy ought
to allow qemu to write to
unconfined_u:object_r:user_tmp_t:s0</p>

<p>https://bugzilla.redhat.com/859949 RFE:
inspect-list-applications does not return the architecture
of RPM packages</p>

<p>https://bugzilla.redhat.com/859885
inspect-list-applications does not list all installed RPM
packages with same name and different versions</p>

<p>https://bugzilla.redhat.com/859876 guestfish printed
paths are not canonicalized</p>

<p>https://bugzilla.redhat.com/859875 Progress bar output
should go to tty(?) stderr(?)</p>

<p>https://bugzilla.redhat.com/858696 virt-sysprep reports
Guestfs.Error(&quot;read_lines: fopen:
/etc/sysconfig/network: No such file or directory&quot;) on
some Fedora guests</p>

<p>https://bugzilla.redhat.com/858128 libguestfs fail to
list devices added by add-drive-ro-with-if twice</p>

<p>https://bugzilla.redhat.com/858126 virt-inspector fail
to work with some windows guests</p>

<p>https://bugzilla.redhat.com/853762 virt-sparsify should
use a more robust method to detect the input format</p>

<p>https://bugzilla.redhat.com/853393 libvirt doesnt label
console, serial sockets</p>

<p>https://bugzilla.redhat.com/853159 virt-rescue in Fedora
18 is completely broken</p>

<p>https://bugzilla.redhat.com/852394 libguestfs inspection
limits registries to 100 MiB</p>

<p>https://bugzilla.redhat.com/852194 virt-sparsify
--compress fails if output is raw format</p>

<p>https://bugzilla.redhat.com/847881 RFE: allow extra
arguments (like --exclude) to tar-out</p>

<p>https://bugzilla.redhat.com/847880 tar-out should allow
(or force) --numeric-owner</p>

<p>https://bugzilla.redhat.com/845522 guestfish
&quot;copy-out / localdir&quot; command fails with &quot;No
such file or directory&quot;</p>

<p>https://bugzilla.redhat.com/845488 Long filenames on
NTFS cause tar-out, copy-out etc to fail with error
&quot;Cannot open: File name too long&quot;</p>

<p>https://bugzilla.redhat.com/842307 RFE: Need help
designing and implementing selinux policy for
libguestfs/sVirt</p>

<p>https://bugzilla.redhat.com/840572 virt-make-fs / tar-in
should support vfat properly</p>

<p>https://bugzilla.redhat.com/840115 guestfish touch
problem - case_sensitive_path API expects the file to
exist</p>

<p>https://bugzilla.redhat.com/836710 Data loss when
writing to qcow2-format disk files</p>

<p>https://bugzilla.redhat.com/834712 lvresize,
lvresize-free fail unnecessarily if you dont change the size
of the LV: &quot;New size (nn extents) matches existing size
(nn extents)&quot;</p>

<p>https://bugzilla.redhat.com/824716 compress-device-out
didnt support bzip2</p>

<p>https://bugzilla.redhat.com/824043 guestfish
unrecognized mount option gives confusing error message</p>

<p>https://bugzilla.redhat.com/823887 Filenames containing
Chinese characters can t be created on vfat filesystems</p>

<p>https://bugzilla.redhat.com/823885 virt-make-fs cannot
create vfat filesystem containing filesystems with Chinese
characters</p>

<p>https://bugzilla.redhat.com/823883 virt-make-fs -t fat
fails with an obscure error message</p>

<p>https://bugzilla.redhat.com/823821 Inspection fails when
/etc/HOSTNAME is empty</p>

<p>https://bugzilla.redhat.com/801117 libguestfs cannot get
icon for Windows 8</p>

<p>https://bugzilla.redhat.com/798979 Ubuntu install CDs
from oneiric onwards are not recognized: &quot;multi- boot
operating systems are not supported&quot;</p>

<p>https://bugzilla.redhat.com/782167 libguestfs doesn t
recognize Windows Dynamic disks in some configurations, eg.
spanned</p>

<p>https://bugzilla.redhat.com/713678 Not all febootstrap
messages are redirected to log callbacks</p>

<p>https://bugzilla.redhat.com/627675 libguestfs inspector
code cannot handle /dev/disk/by-id/* paths</p>

<p>https://bugzilla.redhat.com/602997 part-get-bootable
gives wrong result with an unordered part layout</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.18 These release notes
only cover the differences from the previous stable/dev
branch split (1.16.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features virt tools</p>

<p>- virt-sysprep has been rewritten and expanded (thanks
Wanlong Gao) http://libguestfs.org/virt-sysprep.1.html</p>

<p>- virt-sparsify --zero is a new option that zeroes the
named partition or filesystem</p>

<p>- virt-sparsify can now safely sparsify Linux swap
partitions</p>

<p>- virt-sparsify fixed so it cleans up after ^C
http://libguestfs.org/virt-sparsify.1.html</p>

<p>- a new tool
&rsquo;libguestfs-make-fixed-appliance&rsquo; is provided to
build fixed appliances that can be copied to other machines
that don&rsquo;t have febootstrap support
http://libguestfs.org/libguestfs-make-fixed-appliance.1.html</p>

<p>- virt-filesystems now displays the parents (containers)
of MD devices and volume groups</p>

<p>- virt-alignment-scan, run with no args, displays
alignment information for all libvirt domains</p>

<p>- virt-df and virt-alignment-scan will display
information from all guests even when a disk is
inaccessible</p>

<p>- virt-rescue new --scratch option to make scratch disks
https://rwmj.wordpress.com/2012/04/26/virt-rescue-scratch/#content</p>

<p>- virt-make-fs can now be used to create btrfs</p>

<p>- virt-edit preserves permissions, UID, GID and SELinux
context when editing files</p>

<p>- guestfish passes the close event over stdout and
remote correctly</p>

<p>- guestfish new &rsquo;--pipe-error&rsquo; option lets
you detect errors in pipe commands</p>

<p>- guestfish globs now expand device names</p>

<p>- comma and colon characters in filenames now handled
correctly by all virt tools</p>

<p>inspection</p>

<p>- added support for Fedora 17+</p>

<p>- added support for FreeDOS</p>

<p>- added support for Buildroot and Cirros</p>

<p>- inspection is now compatible with Windows guests that
have been sysprepped (thanks Grant Williamson).</p>

<p>API</p>

<p>- broad support for btrfs added, including adding
multiple devices, fsck, snapshots (thanks Wanlong Gao)</p>

<p>- the new &rsquo;mount-local&rsquo; API brings FUSE
support directly into the core libguestfs API
https://rwmj.wordpress.com/2012/05/14/tip-using-mount-local-api-from-c/#content</p>

<p>- new man page: guestfs-performance(1), which contains
performance tuning tips
http://libguestfs.org/guestfs-performance.1.html</p>

<p>- new man page: guestfs-faq(1), Frequently Asked
Questions http://libguestfs.org/guestfs-faq.1.html</p>

<p>- ENOTSUP (from guestfs_last_errno) is now returned for
APIs that are not supported</p>

<p>examples</p>

<p>- &rsquo;copy_over&rsquo; example showing how to copy
between two handles</p>

<p>- &rsquo;display_icon&rsquo; program displays the icon
associated with a guest</p>

<p>- &rsquo;mount_local.c&rsquo; example shows how to use
the mount-local API</p>

<p>Security (no security problems were found or fixed in
this release)</p>

<p>New APIs btrfs-device-add: Add devices to a btrfs
filesystem. btrfs-device-delete: Remove devices from a btrfs
filesystem. btrfs-filesystem-sync: Sync a btrfs filesystem.
btrfs-filesystem-balance: Balance a btrfs filesystem.
btrfs-fsck: Check btrfs filesystem. btrfs-set-seeding:
Enable or disable seeding. btrfs-subvolume-create: Create a
btrfs snapshot. btrfs-subvolume-delete: Delete a btrfs
snapshot. btrfs-subvolume-list: List btrfs snapshots and
subvolumes. btrfs-subvolume-set-default: Set default btrfs
subvolume. btrfs-subvolume-snapshot: Create a writable btrfs
snapshot. get-e2attrs: List ext2 file attributes of a file.
get-e2generation: Get ext2 file generation of a file.
isoinfo, isoinfo-device: Get information from the header of
ISO files. llz: List files with SELinux information.
lvcreate-free: Create an LVM logical volume in % remaining
free space. md-stat: Return underlying devices from an MD
device. mkfs-brtfs: Make btrfs filesystem, with all
tunables. mount-local, mount-local-run, umount-local: FUSE
support in the API. ntfsclone-in, ntfsclone-out: Save,
restore NTFS from backup. ntfsfix: Fix common errors and
force Windows to check NTFS. set-e2attrs: Set or clear ext2
file attributes of a file. set-e2generation: Set ext2 file
generation of a file. set-label: Unified interface for
setting filesystem label. vgmeta: Get volume group metadata.
wipefs: Wipe filesystem signatures from a device.
zero-free-space: Zero free space in a filesystem.</p>

<p>Internals - The debian/ subdirectory has been removed.
We recommend you use the official Debian packages made by
Hilko Bengen. http://people.debian.org/~bengen/libguestfs/
http://packages.debian.org/search?keywords=libguestfs</p>

<p>- O_CLOEXEC / SOCK_CLOEXEC is now used for almost all
file descriptors that the library opens.</p>

<p>- posix_fadvise is called when sequentially reading or
writing large files.</p>

<p>- close all file descriptors and remove all signal
handlers in the recovery process</p>

<p>- multiple gcc warnings and Coverity bugs have been
fixed; many strict-overflow bugs have also been fixed</p>

<p>- use ./configure --enable-valgrind-daemon to use
valgrind on the daemon; many errors have been fixed</p>

<p>- use ./configure --with-qemu-options to pass extra
options to qemu</p>

<p>- the daemon now has a growable strings buffer type
(DECLARE_STRINGSBUF)</p>

<p>- the &lt;guestfs.h&gt; header file works with C++ and
we have a regression test for this</p>

<p>- multiple APIs which should only be called in the
CONFIG state now give an error if they are not</p>

<p>- .gitignore fixed to use absolute paths</p>

<p>- gobject bindings have been expanded, including mapping
libguestfs events to gobject signals (thanks Matt Booth)</p>

<p>- gobject documentation is generated properly (thanks
Matt Booth)</p>

<p>- gobject header files now live in a subdirectory</p>

<p>- CompareWithString test in the generator now works</p>

<p>- FUInt32, FUInt64 struct field types now use the
correct XDR type</p>

<p>- OCaml tests are now run on bytecode and native
code.</p>

<p>- java -Xlint:all is used, and all warnings have been
fixed</p>

<p>- bmptopng, wrestool (etc) missing or failure no longer
prints warning messages</p>

<p>- ruby: Use RbConfig instead of Config.</p>

<p>- PYTHONPATH is set by the ./run script.</p>

<p>- appliance building is now thread-safe.</p>

<p>- appliance now uses &rsquo;ip&rsquo; instead of
&rsquo;ifconfig&rsquo; and &rsquo;netstat&rsquo;
commands</p>

<p>- several fixes to make parallel builds work
properly</p>

<p>- guestfish --listen now cleans up properly</p>

<p>- the BUSY state has been removed</p>

<p>- gettextize has been removed, replaced by a simple
Makefile.am</p>

<p>- gettext support now covers virt-resize, virt-sparsify
and virt-sysprep</p>

<p>- better support for the arm architecture</p>

<p>Bugs fixed - 822490 virt-ls error: &quot;libguestfs:
error: checksum: path: parameter cannot be NULL&quot; -
816839 data overflow error when debug progress -1 - 816098
virt-make-fs fails to make a btrfs filesystem because it
doesn&rsquo;t allocate enough space - 811872 inspection
fails on ubuntu 10.04 guest with encrypted swap - 811650
guestfs_last_error not set when qemu fails early during
launch - 811649 libguestfs cannot open disk images which are
symlinks to files that contain &rsquo;:&rsquo; (colon)
character - 811117 [RFE][virt-sysprep] net-hwaddr not
removed from &quot;ifcfg-*&quot; files on rhel - 811112
[RFE][virt-sysprep] hostname can not be changed on rhel
system - 809361 inspection doesn&rsquo;t recognize Fedora 18
(grub2 + GPT) - 807905 mkfs blocksize option breaks when
creating btrfs - 805070 virt-filesystems should show
&rsquo;parents&rsquo; of LV and RAID devices - 804464
libguestfs cannot be built when LINGUAS is different then ja
or uk - 803664 libguestfs inspection fails on Windows XP:
libguestfs: error: hivex: could not locate
HKLMTEMuntedDevices - 803533 guestfish: write error - 802389
event handlers for &rsquo;close&rsquo; event doesn&rsquo;t
work in remote mode - 802109 libguestfs uses putc on stderr,
results in many individual 1 byte writes of debug messages -
801640 [RFE] the error reported by resize2fs-M need to be
more clear - 801298 Possible null dereference and resource
leaks - 801273 Document for set-pgroup need to be updated -
798196 virt-resize confuses format and output_format
variables; using --output-format sets the input format -
797986 virt-resize on Windows XP in sysprep state causes
&quot;UNMOUNTABLE_BOOT_VOLUME&quot; BSOD - 796520 [RFE]
Prevent user from running some appliance configure commands
after appliance boot up - 790721 multiprovider build error:
RuntimeError: link: /tmp/.guestfs-0/kernel
/tmp/.guestfs-0/kernel.10139: File exists - 789960 guestfsd
crash when try to mount non-exist disk - 789504 virt-df
(other tools?) should not give up if a guest disk is missing
- 788641 virt-edit doesn&rsquo;t preserve file permissions -
786215 libguestfs inspection does not recognize FreeDOS
operating system - 786188 libguestfs inspection does not
recognize FreeDOS install CD - 785668 aug-defnode: daemon
crash - 784647 Libguestfs uses deprecated net-tools - 769304
virt-resize on RHEL 6 kernel fails to re-read the partition
table - 755729 Error message for resize2fs-M needs tweaking
- 701814 virt-win-reg fails on a libvirt guest that has no
defined disk format: &quot;format parameter is empty or
contains disallowed characters&quot; - 679737 libguestfs:
improve error message when zerofree is not available in the
appliance - 635971 glob mkfs ext2 /dev/vd[b-t]1 does not
expand</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.16 These release notes
only cover the differences from the previous stable/dev
branch split (1.14.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features libguestfs</p>

<p>- allow XFS filesystems to be created over an existing
filesystem (Wanlong Gao)</p>

<p>- the (unspecified) default alignment for part-disk has
been changed to 64K for better support of high-end
network-attached storage</p>

<p>- new guestfs-testing(1) man page</p>

<p>- list-filesystems returns MD devices containing
filesystems (Matthew Booth)</p>

<p>- support for GCC &gt;= 4.7 (Jim Meyering)</p>

<p>- check user does not add the same drive twice (Wanlong
Gao).</p>

<p>language bindings</p>

<p>- Experimental GObject bindings, with support for
GObject Introspection. You can now use libguestfs from
Javascript. Please note these are not stable and final in
this release. (Matthew Booth).</p>

<p>- support for Ruby &gt;= 1.9</p>

<p>- Ruby bindings can be disabled individually (Hilko
Bengen)</p>

<p>- support for Python 2.6, 3.x (Richard Jones, Hilko
Bengen)</p>

<p>- support for PHP &gt;= 5.4</p>

<p>- new %guestfs_introspection hash is available in Perl
bindings so you can query which optional arguments are
available</p>

<p>inspection</p>

<p>- guests with MD devices can be inspected (Matthew
Booth)</p>

<p>- support for GNU/Hurd guests</p>

<p>guestfish</p>

<p>- libguestfs events (such as progress bar events and log
messages) can be trapped and processed by user-defined shell
scripts.</p>

<p>- MD devices are tab-completed (Matthew Booth)</p>

<p>virt tools</p>

<p>- New tool virt-format for erasing and making blank
disks</p>

<p>- virt-sparsify new --compress and -o options to allow
for compressed and different format output</p>

<p>- virt-sparsify can now detect and sparsify .vdi
files</p>

<p>- virt-sysprep no longer requires xmlstarlet; a new
virt-inspector --xpath option has been added to replace this
functionality</p>

<p>- virt-rescue has a new --suggest option which suggests
mount commands for the guest</p>

<p>- virt-resize no longer requires OCaml pcre library</p>

<p>libguestfs live</p>

<p>- daemon will no longer try to edit your live /etc/lvm
configuration</p>

<p>- fix a potential security problem with predictable /tmp
names (Steve Kemp)</p>

<p>Security CVE-2011-4127, RHBZ#757071 Mitigate possible
privilege escalation via SG_IO ioctl For more information,
see:
https://github.com/libguestfs/libguestfs/commit/9a5f784d511a8f00a8386f316eab41fe660430db</p>

<p>New APIs blkid: print all attributes of a device known
to blkid (Wanlong Gao) e2fsck: access to more features of
e2fsck (Wanlong Gao) list-md-devices: list of Linux MD
devices (Matthew Booth) md-create: create an MD device
md-detail: returns metadata for an MD device (Matthew Booth)
md-stop: stop an MD device (Wanlong Gao) tune2fs: allow
ext2/3/4 filesystems to be tuned</p>

<p>Internals Git hosting has moved to
http://github.com/libguestfs</p>

<p>The various test directories have been rearranged
logically, and now all appear under
&rsquo;tests/&rsquo;.</p>

<p>There is a &rsquo;make extra-tests&rsquo; rule which
runs ordinary tests and additional tests, using valgrind to
check for memory problems.</p>

<p>Multiple memory leaks and other problems found by
valgrind and fixed.</p>

<p>Support for optional arguments in the generator has been
rewritten to provide more features and safety (Matthew
Booth).</p>

<p>With gcc -fvisibility=hidden is used for internal
symbols, avoiding call indirection via the PLT.</p>

<p>RHashtable functions can be tested in the generator.</p>

<p>ADD_ARG macro in daemon allows arg lists to be
constructed without risk of stack smashing.</p>

<p>Fix generation of OCaml functions that have more than 10
arguments.</p>

<p>psmisc has been added to the appliance, allowing use of
&rsquo;fuser&rsquo;, &rsquo;killall&rsquo; and
&rsquo;pstree&rsquo; for debugging.</p>

<p>bindtests now cover RBufferOut and optional arguments
(Matthew Booth).</p>

<p>Bugs fixed - 769680 temporary directories created during
appliance builds are not cleaned up on error - 761460
guestfs_utimens hangs on named pipes - 761451
guestfs_utimens cannot set times on a directory - 760775
&quot;guestfish: multi-boot operating systems are not
supported by the -i option&quot; should be more explanatory
- 760669 guestfish copy-in and &lt;! (inline execution)
don&rsquo;t mix well: pclose: No child processes - 760000
libguestfs fails to compile with Ruby &gt;= 1.9 - 755729
Error message for resize2fs-M needs tweaking - 750889 Python
code incompatible with Python v3. - 596761 Ctrl- causes
guestfish to abort</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.14 These release notes
only cover the differences from the previous stable/dev
branch split (1.12.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features Erlang bindings.</p>

<p>virt-alignment-scan is a new tool to check the alignment
of partitions within virtual machines or disk images.</p>

<p>virt-sparsify is a new tool to make virtual machine disk
images sparse.</p>

<p>virt-sysprep is a new tool to make cloning guests from a
template simpler.</p>

<p>guestfish</p>

<p>- New commands setenv, unsetenv, to set environment
variables.</p>

<p>- The input file and line number is printed in error
messages.</p>

<p>- guestfish progress bars are now a
&quot;mini-library&quot; used by other tools too.</p>

<p>guestmount</p>

<p>- the --live option (for access to live VMs) now
works.</p>

<p>virt-cat</p>

<p>- virt-cat can now handle Windows paths and drive
letters (RHBZ#693359).</p>

<p>virt-filesystems</p>

<p>- the MBR partition type byte is displayed in --long
output.</p>

<p>virt-make-fs</p>

<p>- virt-make-fs now sets the MBR partition type byte
correctly, improving compatibility with Windows
(RHBZ#746295).</p>

<p>virt-resize</p>

<p>- virt-resize can now work with guests using extended
and logical partitions, in particular Ubuntu guests.</p>

<p>- virt-resize can now align the first partition of
Windows guests, improving performance. The new virt-resize
--align-first option controls this behaviour.</p>

<p>- The virt-resize --machine-readable flag makes it
possible to use virt-resize from other programs.</p>

<p>- Partitions are now aligned to 128 sectors (usually
64K) by default. This improves efficiency on high-end
storage. The new virt-resize --alignment option allows the
alignment to be adjusted.</p>

<p>virt-win-reg</p>

<p>- The syntax for deleting registry keys and values is
documented in the man page (RHBZ#737944).</p>

<p>library</p>

<p>- non-printing characters are escaped correctly in debug
output.</p>

<p>- GUESTFS_EVENT_ENTER is a new event type generated
whenever a libguestfs function is called.</p>

<p>- the library contains systemtap/DTrace probes.</p>

<p>- the library can now be compiled without hivex
(RHBZ#723474).</p>

<p>inspection</p>

<p>- Improve detection of Windows disks.</p>

<p>- Adds support for: ttylinux - a minimal Linux Mageia
(thanks Michael Scherer) OpenSUSE and zypper (thanks Michael
Scherer, Vincent Untz) Ubuntu logos (thanks Michael Scherer)
NetBSD and pkgsrc (thanks Michael Scherer)</p>

<p>- Handle some guest types that use /dev/root in
/etc/fstab.</p>

<p>- Fix handling of guests with &gt; 26 disks (thanks
Matthew Booth)</p>

<p>- Add support for guests with HP Smart Array disks
(thanks Matthew Booth)</p>

<p>febootstrap</p>

<p>- FEBOOTSTRAP_KERNEL, FEBOOTSTRAP_MODULES environment
variables can be set in order to choose which kernel to use
for the appliance.</p>

<p>misc</p>

<p>- ArchLinux support now working with Linux 3.0 (thanks
Erik Nolte)</p>

<p>- libvirt disks marked &lt;readonly/&gt; are now added
readonly when using the virt-tools &rsquo;-d&rsquo;
option.</p>

<p>Security (no security problems were found or fixed in
this release)</p>

<p>New APIs compress-out, compress-device-out,
copy-device-to-device, copy-device-to-file,
copy-file-to-device, copy-file-to-file, get-smp,
part-to-partnum, set-smp.</p>

<p>The mount API no longer implicitly adds -o sync,noatime
options.</p>

<p>add-domain has a new &rsquo;readonlydisk&rsquo; optional
parameter to control how &lt;readonly/&gt; disks are
handled.</p>

<p>Internals - Coverity was run on the source and more bugs
were identified and fixed.</p>

<p>- PCRE library is now required to build libguestfs.</p>

<p>- APIC is now the default for the appliance. You can
also enable SMP support in the appliance.</p>

<p>- OCaml bindings now correctly acquire GC lock during
callbacks.</p>

<p>- Out of tree builds should now work correctly (thanks
Hilko Bengen).</p>

<p>- ./configure --with-extra=&quot;...&quot; can be used
by packagers to set the extra version string.</p>

<p>- zero, zero-device APIs: if the blocks already contain
zeroes, don&rsquo;t write zeroes, so that we don&rsquo;t
unnecessarily make the underlying storage non-sparse.</p>

<p>- is-zero, is-zero-device APIs: optimize these so zero
detection is faster.</p>

<p>Bugs fixed - 748266 libguestfs should detect versions of
qemu which require -machine pc option - 747290 libguestfs
ignores &lt;readonly/&gt; in libvirt XML - 747287 Misleading
error message when permission denied opening a disk image -
746295 virt-make-fs doesn&rsquo;t set partition ID - 744795
guestmount --live is not usable - 737944 virt-win-reg hyphen
(delete key) syntax may be wrong, and is not documented -
733297 ruby event handlers fail with &quot;exception in
callback: wrong argument type Proc (expected Data)&quot; -
731744 libguestfs should escape special/non-printing
characters in debug output - 729887 appliance crashes
running aug_init with flags=4 - 729075 libguestfs confuses
Hp_recovery partition with Windows root filesystem - 727178
error: luks_open: cryptsetup: error while loading shared
libraries: libfipscheck.so.1: cannot open shared object
file: No such file or directory - 726739 libguestfs: error:
aug_get: no matching node, trying to find hostname - 723474
If hivex and/or pcre not installed, libguestfs fails to
compile - 693359 virt-cat and virt-edit don&rsquo;t handle
case sensitive NTFS paths properly - 678231 virt-inspector
reports unknown filesystem UUID - 671082 libguestfs does not
work with kernel-rt - 666578 libguestfs: unknown filesystem
label SWAP-sda2 - 642821 virt-resize falls over on a disk
image with a logical swap partition</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.12 These release notes
only cover the differences from the previous stable/dev
branch split (1.10.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features guestfish</p>

<p>- guestfish strings can use escapes, eg. &gt;&lt;fs&gt;
write /foo &quot;line 10ine 20</p>

<p>- guestfish write-append command can be used to append
to files.</p>

<p>- Long-running file uploads and downloads can be
cancelled through the API or by hitting ^C in guestfish.</p>

<p>- New guestfish &quot;display&quot; command for
displaying graphical files inside guests.</p>

<p>- In guestfish, tab completion now works on /dev/mapper
devices.</p>

<p>virt-inspector</p>

<p>- Inspection API can get an icon or logo for certain
guests.</p>

<p>- virt-inspector includes the logo and hostname for
certain guests.</p>

<p>- virt-inspector can now get the version and release
numbers for RPM packages.</p>

<p>- CentOS and Scientific Linux are now treated as
separate distros by the inspection API.</p>

<p>virt-resize</p>

<p>- virt-resize can now handle btrfs.</p>

<p>- New virt-resize --ntfsresize-force option allows
Windows VMs to be resized multiple times.</p>

<p>other virt tools</p>

<p>- guestfish, guestmount, virt-cat, virt-df, virt-edit,
virt-filesystems, virt-inspector, virt-ls and virt-rescue
now allow you to use &quot;-d UUID&quot; option to specify a
guest by UUID. This makes them more robust to use from other
programs.</p>

<p>- virt-ls -lR option allows complex file iteration and
guest analysis.</p>

<p>- virt-win-reg supports HKEY_USERS&lt;SID&gt; and
HKEY_USERS&lt;username&gt;.</p>

<p>- virt-win-reg new option --unsafe-printable-strings
allows printable strings to be displayed in the output
(unsafely: read the documentation before using).</p>

<p>- virt-edit has been rewritten in C.</p>

<p>API and language bindings</p>

<p>- Java is now completely supported. See
http://libguestfs.org/guestfs-java.3.html</p>

<p>- JRuby is supported via the Java bindings.</p>

<p>- guestfs_close now appears in trace messages.</p>

<p>- Python binding adds explicit g.close() method.</p>

<p>- Python programs can now use the new event API.</p>

<p>- Python GIL is released during libguestfs calls,
allowing multithreaded Python programs to work properly.</p>

<p>- 9pfs (Plan 9 filesystems exported from the host) are
now supported.</p>

<p>- Add -DGUESTFS_WARN_DEPRECATED=1 to warn about use of
deprecated API functions in C programs.</p>

<p>- New manual page guestfs-recipes(1) with recipes.</p>

<p>- mkfs-opts can now set inode size and sector size on
created filesystems (thanks Nikita Menkovich).</p>

<p>- guestfs_last_errno is now accessible from OCaml (as
g#last_errno ()).</p>

<p>Security - optargs_bitmask is checked even for calls
that have no optional arguments. This closes a possible
exploit in the daemon from untrusted callers.</p>

<p>New APIs btrfs-filesystem-resize, get-pgroup,
inspect-get-icon, is-zero, is-zero-device, list-9p,
list-dm-devices, mount-9p, ntfsresize-opts, set-pgroup,
write-append</p>

<p>Internals - Coverity (a static analysis tool) was run
across the codebase and many fixes were made.</p>

<p>- Generator can handle functions that return RBufferOut
and have optional arguments.</p>

<p>- Compatible with Perl 5.14.</p>

<p>- Compatible with gcc 4.6.</p>

<p>- Perform safety checks on QEMU.</p>

<p>- C API tests can now fully test calls that have
optional arguments.</p>

<p>- Use ./configure --enable-install-daemon to install
/usr/sbin/guestfsd.</p>

<p>- po-docs directory now covers all man pages.</p>

<p>- stderr from qemu process is now captured by the event
subsystem.</p>

<p>Bugs fixed - 602997 part-get-bootable gives wrong result
with an unordered part layout - 661280 virt-rescue: panic
when shutting down: &quot;/sbin/reboot: No such file or
directory&quot; - 700369 qemu-system-x86_64 says &rsquo;KVM
not supported for this target&rsquo; - 705200 guestmount
attempt results in access denied - 714981
&rsquo;list-filesystems&rsquo; does not know about virtio 9p
filesystems or detect existing mounts - 717786 libguestfs
python bindings should have an explicit close call - 721275
virt-resize in F16 should support btrfs</p>

<p>Release notes for libguestfs 1.10.0 These release notes
only cover the differences from the previous stable/dev
branch split (1.8.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features - libguestfs and tools can be used against
live virtual machines. See the &rsquo;guestfish
--live&rsquo; and &rsquo;guestmount --live&rsquo; options,
and (for the low-level interface) the new APIs
set-attach-method and get-attach-method.</p>

<p>- New virt tools: virt-copy-in, virt-copy-out,
virt-tar-in, virt-tar-out.</p>

<p>- libguestfs can get the drive letter mappings for
Windows guests.</p>

<p>- virt-inspector displays drive letter mappings for
Windows guests.</p>

<p>- Drive letters can now be used in virt-edit and
guestfish programs when operating on Windows guests.</p>

<p>- virt-resize now works on 32 bit hosts.</p>

<p>- You can now inspect the install disks and live CDs of
many different operating systems.</p>

<p>- guestfish &lt;! cmd which executes a shell cmd and
inlines the result.</p>

<p>- guestfish, guestmount, virt-rescue now all support
--ro and --rw options, and the default for this can be
chosen via a configuration file
(/etc/libguestfs-tools.conf).</p>

<p>- New event API allows more than one callback to be
registered for each event, makes it possible to call the API
from other languages, and allows nearly all log, debug and
trace messages to be rerouted from stderr.</p>

<p>- Greater FHS compliance for temporary files, including
using /var/tmp for large cached files that should survive
reboot (instead of /tmp).</p>

<p>- guestfish, guestmount -m option allows mount options
to be passed through to the underlying filesystem.</p>

<p>- mkfs-opts allows filesystem features to be
specified.</p>

<p>- More intelligent handling of mountpoints, allowing
mkmountpoint, mount and umount-all commands to work together
properly.</p>

<p>- Trace messages are prefixed with a distinct string,
allowing them to be easily &rsquo;grepped&rsquo; out from
debug output.</p>

<p>- guestfs_launch (guestfish &rsquo;run&rsquo; command)
now produces progress messages (a guestfish progress bar) if
it takes longer than 5 seconds to run.</p>

<p>- Several long-running commands where we are unable to
estimate time to completion generate &quot;pulse mode&quot;
progress events. Progress bar in guestfish has been updated
to display these.</p>

<p>- Publish new example code in: C, Perl, Python, OCaml,
Ruby.</p>

<p>- New virt-dhcp-address example program.</p>

<p>- The Java and Ruby bindings have been improved
greatly.</p>

<p>- Perl includes a way to get the errno of the last
error.</p>

<p>- Python bindings now compatible with rpyc (thanks Erez
Shinan).</p>

<p>- Transifex is now being used to manage translations.
http://www.transifex.net/projects/p/libguestfs/</p>

<p>- Inspection now supports Red Hat Desktop, Slackware
distributions.</p>

<p>- Inspection no longer fails for Windows guests that
have two or more disks.</p>

<p>- Inspection can now tell the difference between Windows
2008 Server and Windows 7.</p>

<p>- Inspection can detect 32 bit applications installed in
64 bit Windows, running on the WOW64 emulator.</p>

<p>- A series of protocol fixes has fixed the old bug
RHBZ#576879 which used to cause errors during the upload
command to lose protocol synchronization.</p>

<p>- New logo!</p>

<p>Security [none]</p>

<p>New APIs first-private, get-attach-method,
inspect-get-drive-mappings, inspect-get-product-variant,
inspect-get-windows-current-control-set, next-private,
resize2fs-M, set-attach-method.</p>

<p>Internals - The &rsquo;HACKING&rsquo; file is obsolete.
The contents have been moved into a section of the
guestfs(3) manual page.</p>

<p>- libguestfs-test-tool simplified. It no longer needs
the static binary or tries to construct an ISO.</p>

<p>- rpcgen-generated files are compiled with
-fno-strict-aliasing which should be safer (thanks Matt
Booth).</p>

<p>- virt-resize was rewritten in OCaml.</p>

<p>- guestfish and other tools tested with valgrind; some
memory leaks were fixed.</p>

<p>Bugs fixed - 502533 Updated Polish translation of
libguestfs - 576879 libguestfs protocol loses
synchronization if you &rsquo;upload&rsquo; before mounting
disks - 599503 document that mkmountpoint and umount-all
cannot be mixed - 617440 guestfish: fails to tilde expand
&rsquo;~&rsquo; when the $HOME env is unset - 664558 RFE:
Allow to set log callback in Ruby bindings - 665358 Punjabi
Translation Completed (pa_IN) - 666577 libguestfs: unknown
filesystem /dev/fd0 - 667610 Multiple bugs, memory leaks in
libguestfs ruby bindings - 668112 virt-filesystems command
fails on guest with corrupt filesystem label - 668574
guestfish -i is trying to mount all mounts from /etc/fstab
and fails with an error when device doesn&rsquo;t exists -
673479 Add a grep-friendly string to LIBGUESTFS_TRACE output
- 674130 Inspection code fails for Windows guest with two
disks - 682756 libguestfs trace segfaults when
list-filesystems returns error - 682979 libguestfs
incorrectly detects Red Hat desktop as
&rsquo;redhat-based&rsquo; instead of &rsquo;redhat&rsquo; -
690819 mkfs fails creating a filesystem on a disk device
when using a disk with &rsquo;ide&rsquo; interface - 691389
Extended attributes don&rsquo;t work over guestmount (FUSE)
- 691724 virt-inspector reports unknown filesystem /dev/vda1
- 692545 inspect-list-applications fails to detect 32 bit
apps installed under WOW64 emulator on 64 bit Windows -
693324 sfdisk&rsquo;s python interface only accepts lists of
type &rsquo;list&rsquo; for the lines parameter</p>

<p>Release notes for libguestfs 1.8 These release notes
only cover the differences from the previous stable/dev
branch split (1.6.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features - Support and packages for Debian and
Ubuntu.</p>

<p>- Daily builds from git repository on Debian and Ubuntu
to reduce risk of regressions.</p>

<p>- Port to ArchLinux &rsquo;pacman&rsquo; (thanks Thomas
S Hatch).</p>

<p>- The following tools have been rewritten in C
(originally in Perl):</p>

<p>. virt-cat . virt-df . virt-inspector . virt-ls .
virt-rescue</p>

<p>- Some C tools support encrypted guests automatically.
This is supported in: guestfish, guestmount, virt-cat,
virt-inspector, virt-ls.</p>

<p>- New tool virt-filesystems (in C) which is a
replacement for virt-list-filesystems and
virt-list-partitions, and has a superset of the
functionality of those tools.</p>

<p>- guestfish, guestmount and the C tools use unified
command line option parsing, so they support many common
options such as &rsquo;-a disk.img&rsquo;, &rsquo;-d
libvirt-domain&rsquo;, &rsquo;-x&rsquo;, &rsquo;-v&rsquo;.
The old command line option parsing is preserved for
compatibility in scripts etc.</p>

<p>- guestfish no longer has any dependencies on Perl</p>

<p>- New man pages containing programming examples:
guestfs-examples(3) (C/C++), guestfs-ocaml(3),
guestfs-python(3), guestfs-ruby(3).</p>

<p>- Trace mode prints return values from API
functions.</p>

<p>- virt-inspector can list applications installed in
Windows guests, along with a great deal of information about
those applications.</p>

<p>- Add support for inspecting: Linux Mint, Mandriva,
FreeBSD.</p>

<p>- guestfish --rw option (with no effect currently) to
make potentially dangerous write access explicit.</p>

<p>- guestfish --listen --csh for compatibility with csh,
tcsh (thanks Eric Blake).</p>

<p>- The first upstream version that introduced each API
function is now documented in guestfs(3).</p>

<p>- guestfs_last_errno allows you to retrieve the errno
from the daemon, correctly translated to the local operating
system.</p>

<p>- Functions can now have optional parameters.</p>

<p>- Progress bars and progress notifications can now
happen for upload commands.</p>

<p>- Appliance builder more careful about not leaving
temporary files around in /tmp.</p>

<p>- getfattr/setfattr commands added to virt-rescue.</p>

<p>- ROADMAP file covers roadmap and goals for future
releases.</p>

<p>Security - New SECURITY section in guestfs(3) API
documentation.</p>

<p>- virt-inspector no longer runs any guest commands.</p>

<p>- Inspection code is more careful about avoiding very
large files from guests which might previously have caused a
denial of service.</p>

<p>- FUSE calls into guestmount are now traced when using
guestmount -x.</p>

<p>New APIs - add-domain - add-drive-opts - getxattr -
inspect-get-hostname - inspect-get-package-format -
inspect-get-package-management - inspect-get-roots -
inspect-list-applications - lgetxattr - mkfs-opts</p>

<p>Internals - C programs now only link precisely with the
libraries that they use.</p>

<p>- PCRE, libmagic, hivex and libvirt libraries are now
completely optional for building.</p>

<p>- Multiple memory leaks and file descriptor leaks
fixed.</p>

<p>- Add a POD wrapper to unify generation of man pages and
HTML files across all programs.</p>

<p>- Source includes phony images of Fedora, Debian, Ubuntu
and Windows guests.</p>

<p>- Ruby bindings have &rsquo;make install&rsquo;
rule.</p>

<p>- &lt;guestfs.h&gt; is now a single file.</p>

<p>- &lt;guestfs.h&gt; does not require XDR headers.</p>

<p>- ocaml xml-light library is no longer required to build
(thanks Maxim Koltsov).</p>

<p>- ./configure --disable-[...] for each language binding
(thanks Maxim Koltsov).</p>

<p>- Old ocaml-viewer program removed (use guestfs-browser
instead).</p>

<p>- New C API test type &rsquo;InitScratchFS&rsquo; makes
the tests run a little more quickly.</p>

<p>- Excluded packages in the appliance are now listed in a
separate file appliance/excludelist.in, and can be
customized per-distro.</p>

<p>Bugs fixed - 663407 readlink and readlinklist returns
/sysroot/ in some paths - 661280 virt-rescue: panic when
shutting down: &quot;/sbin/reboot: No such file or
directory&quot; - 657499 checksum: wrong check sum type
causes umount to fail - 655554 Whole disk paths are not made
canonical by virt-inspector - 654638 openssl updated to
1.0.0b libguestfs depends on exact file names - 652796 ruby
bindings not installed by &rsquo;make install&rsquo;, hence
omitted from the binary distribution</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.6 These release notes
only cover the differences from the previous stable/dev
branch split (1.4.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features - Use a new method for creating and caching
the appliance. This greatly improves the performance of
libguestfs, often by a factor of x 4 to x 5.</p>

<p>- Support for guest inspection (like virt-inspector) via
the ordinary API and all language bindings. &rsquo;guestfish
-i&rsquo; option is as a side- effect much quicker.</p>

<p>- virt-inspector and core inspection API can now detect
guests running: Fedora, Debian, Ubuntu, Windows, Red Hat
Enterprise Linux, CentOS, Scientific Linux, Gentoo, Pardus,
Arch Linux, MeeGo.</p>

<p>- Support for LUKS whole-disk encryption in guests.</p>

<p>- PHP bindings.</p>

<p>- Progress messages (and progress bars in guestfish and
virt-resize) for certain long-running operations.</p>

<p>- virt-df is now much more efficient. Use
&rsquo;--one-per-guest&rsquo; to restore the old per-guest
isolation behaviour.</p>

<p>- guestfish &rsquo;copy-in&rsquo; and
&rsquo;copy-out&rsquo; commands for copying files and
directories recursively in and out of the guest.</p>

<p>- guestfish &rsquo;hexedit&rsquo; command for doing
binary edits to devices and files.</p>

<p>- Change guestfish -i syntax to allow commands to be
specified on the command line (retaining backwards
compatibility).</p>

<p>- guestfish &rsquo;-d &lt;domain&gt;&rsquo; for adding
disks from libvirt domains.</p>

<p>- guestfish &rsquo;-N&rsquo; option supports several new
prepared disk image types: lvfs : disk with LV formatted
with filesystem lv : disk with LV bootroot : boot+root
bootrootlv : boot and root on LV</p>

<p>- guestfish &rsquo;more&rsquo; and &rsquo;edit&rsquo;
commands now work with arbitrary files.</p>

<p>- guestfish &rsquo;--echo-keys&rsquo; option allows you
to echo keys/passphrases while typing them.</p>

<p>- guestmount now supports -a / -d / -i options, like
guestfish.</p>

<p>- Use virtio-serial for communications with the
appliance. This also has a major performance benefit.</p>

<p>- virt-edit &rsquo;-b&rsquo; option to create a backup
of edited files.</p>

<p>- virt-edit &rsquo;-e&rsquo; option for non-interactive
edits to files.</p>

<p>- Ability to capture core dumps from the appliance
(thanks Matthew Booth).</p>

<p>- virt-rescue now shuts down cleanly (thanks Matthew
Booth).</p>

<p>- virt-rescue now has a --network option to enable
network access.</p>

<p>- virt-resize can now handle guests which use GPT
partition table format.</p>

<p>- virt-resize has better support for shrinking
guests.</p>

<p>- virt-resize supports qcow2-format guests.</p>

<p>- $TMPDIR can be used to override almost all temporary
directory usage.</p>

<p>- OCaml users can use an alternate OO-style of coding,
eg. g#launch ()</p>

<p>- The API supports calls which take optional parameters,
eg. $g-&gt;add_drive_opts (&quot;disk&quot;, readonly =&gt;
1);</p>

<p>- Trace output now escapes and shortens large strings
(thanks Matthew Booth).</p>

<p>- Autosync is now on by default, resulting in more
reliable behaviour when the handle is closed.</p>

<p>- virt-df --uuid option allows you to follow a domain
across migration and renaming.</p>

<p>- Translations of manual pages.</p>

<p>Security - CVE-2010-3851 libguestfs: missing disk format
specifier when adding a disk
https://www.redhat.com/archives/libguestfs/2010-October/msg00036.html
This is comprehensively fixed in this release, and the fix
will be backported to the other stable branches after more
testing.</p>

<p>- virt-inspector no longer relies on untrusted guest
code to list applications in some guests.</p>

<p>New APIs download-offset, file-architecture,
findfs-label, findfs-uuid, inspect-os, inspect-get-arch,
inspect-get-distro, inspect-get-filesystems,
inspect-get-major-version, inspect-get-minor-version,
inspect-get-mountpoints, inspect-get-product-name,
inspect-get-type, is-blockdev, is-chardev, is-fifo, is-lv,
is-socket, is-symlink, list-filesystems, luks-add-key,
luks-close, luks-format, luks-format-cipher, luks-kill-slot,
luks-open, luks-open-ro, lvm-clear-filter,
lvm-canonical-lv-name, lvm-set-filter, part-to-dev,
pread-device, pwrite-device, upload-offset</p>

<p>Internals - Use size_t for loop iterators. - Refactor
the library code into separate files. - Refactor the
generator code into separate files. - Generate guestfish
commands. - guestfish &amp; guestmount options processing is
unified. - Protocol changes: error message size increased to
64K send errno to library - Add &rsquo;make bindist&rsquo;
to make a binary distribution. - Cleaner behaviour under
valgrind. - More testing of the guestfish command line
options and libvirt integration. - The Perl inspection code
is no longer used by any of the tools.</p>

<p>Bugs fixed - 646822 libguestfs trace mode should not
print long binary strings - 646821 virt-df should have
--uuid option - 646432 /dev/mapper paths should not be
returned from guestfs_mountpoints - 643624 libguestfs tools
documentation should describe how to quote guest domain
names from shell - 642934 No way to specify disk format when
adding a disk to libguestfs - 642933
guestfs_list_filesystems should be used in all possible
places - 642932 guestmount options should match guestfish
options - 642930 virt-inspector (Sys::Guestfs::Lib) should
use C inspection APIs - 642929 C inspection code should
ignore /dev/fd* in /etc/fstab - 642826 virt-resize converts
any other image format to raw without notifying user,
instructions do not account for this - 640961 Document that
grub-install might be needed for old Linux guests after
virt-resize - 639986 virt-df --csv does not properly quote
&quot; in libvirt domain names - 639405 Interrupted cached
appliance creation leaves libguestfs unusable - 638901
Appliance filename should not contain repository name -
638899 /dev/mapper paths should not be returned from C
inspection APIs - 636918 Updates to Spanish translation -
636061 [abrt] guestfish-1.2.11-1.fc12: malloc_consolidate:
Process /usr/bin/guestfish was killed by signal 11 (SIGSEGV)
- 635969 glob echo mkfs ext2 /dev/vd[b-t]1 prints garbage -
634246 guestfs_part_get_parttype returns &quot;loop&quot;
when run against a partition, LV or filesystem - 633766
virt-resize --shrink fails - 633357 Updates to Spanish
translation - 633096 virt-resize calculates block device
size incorrectly, doesn&rsquo;t work with qcow2 target -
629593 Dutch translation added - 627556 Updates to Spanish
translations of libguestfs - 626843 Updates to Spanish
translations - 619793 [RFE] Need a way to determine if a
particular block device is a logical volume - 618556
virt-rescue return none zero value when exit - 617200 mount
operation failed and hung on some images which running in
read-only mode - 610880 libguestfs should set broader read
perms on tmpdir, so works in some situations when executed
with umask 077 - 599503 document that mkmountpoint and
umount-all cannot be mixed - 571714 Running virt-df on disk
image relabels it, so qemu can no longer write to it. -
502533 Updated Polish translation of libguestfs</p>

<p>RELEASE NOTES FOR LIBGUESTFS 1.4 These release notes
only cover the differences from the previous stable/dev
branch split (1.2.0). For detailed changelogs, please see
the git repository, or the ChangeLog file distributed in the
tarball.</p>

<p>New features - guestfish lets you choose a prepared disk
image, eg: guestfish -N fs:ext4</p>

<p>- Add write support to guestmount (FUSE) module.</p>

<p>- virt-resize can now resize the content of partitions
and logical volumes in the guest, and we have better support
for shrinking guests.</p>

<p>- Bash tab-completion script for guestfish.</p>

<p>- Add ZFS support to virt-rescue.</p>

<p>- New tool &rsquo;virt-make-fs&rsquo; for creating
filesystems with content.</p>

<p>- Allow suffixes on any guestfish number parameter, eg.
&quot;1M&quot;.</p>

<p>- guestfish &rsquo;man&rsquo; command opens the manual
page.</p>

<p>- guestfish supports a &quot;heredoc&quot; syntax for
uploading files: upload -&lt;&lt;_end_ /foo content
_end_</p>

<p>- Some guestfish commands now print their output in
octal or hex where appropriate (RHBZ#583242).</p>

<p>- Allow dash prefix on guestfish command line. This
ignores any error from the second command: (RHBZ#578407)
guestfish -- cmd1 : -cmd2 : cmd3</p>

<p>- guestfish -h / help command now returns an error for
non-existent commands (RHBZ#597145).</p>

<p>- New &rsquo;supported&rsquo; command in guestfish to
list optional groups of commands which are supported by the
daemon / configuration.</p>

<p>- virt-inspector and guestfish -i now work for filenames
which contain spaces (RHBZ#507810).</p>

<p>- Change the protocol to use link-local addresses, to
avoid conflicting with any address that the host might be
using (RHBZ#588763).</p>

<p>- libguestfs now sets the correct time and timezone on
filesystem modifications.</p>

<p>- Sort the domains into alphabetical order in
virt-df.</p>

<p>- Make mkfs-b command work for FAT and NTFS by mapping
the blocksize parameter to the cluster size
(RHBZ#599464).</p>

<p>- Add version numbers to Perl modules (RHBZ#521674).</p>

<p>- Localization now works for all the libguestfs tools
(RHBZ#559963).</p>

<p>- Tools now support filesystem-on-image VMs
(RHBZ#590167).</p>

<p>- virt-list-partitions has a &rsquo;-t&rsquo; option to
show the total size of disks.</p>

<p>- Include extra Augeas lenses in the supermin appliance
(Matthew Booth).</p>

<p>- Add error and close callbacks.</p>

<p>- Add explicit close method in the Perl API.</p>

<p>- Multiple fixes for RHEL 5 compatibility.</p>

<p>- Multiple fixes for Debian/Ubuntu compatibility.</p>

<p>- Multiple revisions to improve the documentation.</p>

<p>Security - Fix a potential DoS in virt-inspector and
virt-v2v if a specially crafted disk image contained a char
device in place of one of the configuration files that we
read under /etc (RHBZ#582484).</p>

<p>New APIs - aug-clear - clear Augeas path -
available-all-groups - return a list of all optional groups
- base64-in - upload base64-encoded data to file -
base64-out - download file and encode as base64 -
checksum-device - compute checksums on the contents of a
device - checksums-out - compute checksums of multiple files
in a directory - debug-upload - upload a file to the
appliance - fallocate64 - preallocate a file in the guest
filesystem - fill-pattern - fill a file with a repeating
pattern of bytes - get-umask - get the current umask -
lvresize-free - expand an LV to fill free space - ntfsresize
- resize an NTFS filesystem - ntfsresize-size - resize an
NTFS filesystem (with size) - part-del - delete a partition
- part-get-bootable - get the bootable flag of a partition -
part-get-mbr-id - get the MBR type byte of a partition -
part-set-mbr-id - set the MBR type byte of a partition -
pvresize-size - resize a physical volume (with size) -
pwrite - write to part of a file - resize2fs-size - resize
an ext2/3/4 filesystem (with size) - txz-in - unpack
compressed tarball to directory (RHBZ#580556) - txz-out -
pack directory into compressed tarball (RHBZ#580556) -
vfs-label - get the filesystem label - vfs-uuid - get the
filesystem UUID - vgscan - rescan for LVM physical volumes,
volume groups and logical volumes - write - create a new
file - zero-device - write zeroes to an entire device</p>

<p>Internals - Extend the generator to support testing
optional features. - Stricter checks on input parameters to
many calls (RHBZ#501893 RHBZ#501894) - Extend the protocol
to support sending arbitrary 8 bit data buffers. - Ship
&rsquo;BUGS&rsquo; file with releases. This is a summary of
the bugs in the Red Hat Bugzilla database. - Ship
&rsquo;RELEASE-NOTES&rsquo; file with releases, containing
release notes. - Unify supermin appliance building into one
place, in febootstrap 2.7. - Fix the protocol code to handle
the case where both ends send cancel messages at the same
time.</p>

<p>Bugs fixed - 612178 guestfish: using -m option in
conjunction with --listen option causes appliance to die -
610880 libguestfs should set broader read perms on tmpdir,
so works in some situations when executed with umask 077 -
604691 OCaml bindings are not thread safe - 603870 Updates
to Spanish translation - 602592 [RFE] expose guestfs_close
in perl bindings - 600977 virt-df -h --csv &quot;Argument ..
isn&rsquo;t numeric in printf&quot; - 599464 mkfs-b does not
support vfat/ntfs - 598807 add_cdrom does not work in RHEL 6
- 598309 part-list and several other cmd failed on
libguestfs on RHEL5 - 597145 guestfish &rsquo;help&rsquo;
command should indicate error in exit status with an unknown
command - 597135 guestfish write-file cmd does not check
&quot;size&quot; parameter - 597118 A warning should be
given in the help of mke2journal-L for the length of label -
597112 get-e2uuid should use blkid instead of &quot;tune2fs
-l&quot; to get filesystem UUID - 596776 virt-inspector
doesn&rsquo;t discover modprobe aliases on RHEL 3 guests -
596763 Updates to Spanish translation - 593292 Updates to
Spanish translation - 592883 can not edit files on images
mounted with guestmount cmd - 592360 Updates to Spanish
translation - 591250 virt-tar prints &quot;tar_in: tar
subcommand failed on directory&quot; if the archive is
compressed or not in the right format - 591155 virt-tar
prints &quot;tar_in: tar subcommand failed on
directory&quot; if a disk image is not writable - 591142
virt-inspector should give an error for unrecognized disk
images - 590167 virt-inspector and other virt tools should
be able to handle filesystem-on-image VMs - 589039 guestfish
read-file cmd will cause daemon hang when read large files -
588851 guestfs_launch() returns -1, but guestfs_last_error()
== NULL - 588763 libguestfs should use non-public or
link-local addresses for appliance network - 588733 Updates
to Spanish translation - 588651 guestfish
&rsquo;strings-e&rsquo; cmd does not give proper error
message or hint - 587484 lvresize can&rsquo;t reduce size of
a volumn - 585961 Updates to Spanish translation - 585223
ntfsresize should support shrinking filesystems - 585222
pvresize should support shrinking PVs - 585221 resize2fs
should support shrinking filesystems - 584038 Updates to
Spanish translation - 583554 [FEAT] mknod-mode command is
needed to set mode explicitly - 583242 [RFE] guestfish
should print outputs in a suitable base (eg. octal for
modes) - 582993 guestfish eats words when tab completing
case (in)sensitive paths - 582953 Misleading help
information about lvcreate command - 582948 mknod command
doesn&rsquo;t make block, character or FIFO devices - 582929
mknod doesn&rsquo;t check for invalid mode - 582901
guestfish chmod/umask commands do not check invalid mode
value - 582899 guestfish:sparse is missed from command
autocomplete list - 582891 [Feature Request] behavior and
return value of guestfish umask cmd should be changed -
582548 [mknod] umask shouldn&rsquo;t take effect when mode
is set explicitly - 582484 some guestfish sub commands can
not handle special files properly - 582252 Updates to
Spanish translation - 581501 Updates to Spanish translation
- 580650 virt-inspector warns &quot;No grub default
specified at /usr/lib/perl5/Sys/Guestfs/Lib.pm at
[...]&quot; - 580556 request for libguestfs to support .txz
tarballs - 580246 tar-in command hangs if uploading more
than available space - 580016 aug-ls in guestfish does not
take augeas variable as argument - 579664 guestfish
doesn&rsquo;t report error when there is not enough space
for image allocation - 579608 multiple commands in guestfish
can not work for symbol links - 579155 libguestfs hangs if
qemu doesn&rsquo;t start (in null vmchannel mode) - 578407
the prefix &rsquo;-&rsquo; in sub-command isn&rsquo;t
handled by guestfish in remote control mode - 576879
libguestfs protocol loses synchronization if you
&rsquo;upload&rsquo; before mounting disks - 559963
libguestfs Perl programs do set locale, but still
localization doesn&rsquo;t work - 521674 Perl modules are
unversioned, but should carry version numbers - 516096 Race
condition in test_swapon_label_0: /sbin/blockdev: BLKRRPART:
Device or resource busy - 507810 guestfish -i /
virt-inspector cannot handle spaces in filenames - 502533
Updated Polish translation of libguestfs - 501894 Some
String parameters should be OptString - 501893 String
parameters should be checked for != NULL - 501889 write-file
does not support strings containing ASCII NUL - 484986
grub-install fails on virtio disk</p>

<p>RELEASE NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS
Before 2010 libguestfs did not have official release notes
or a formalized version numbering system. However these are
links to historically significant versions.</p>

<p>2009-11-10 (1.0.78)
https://www.redhat.com/archives/libguestfs/2009-November/msg00095.html</p>

<p>2009-09-13 (1.0.67)
https://www.redhat.com/archives/libguestfs/2009-August/msg00281.html</p>

<p>2009-07-23 (1.0.64)
https://www.redhat.com/archives/libguestfs/2009-July/msg00059.html</p>

<p>2009-07-14 (1.0.59)
https://www.redhat.com/archives/libguestfs/2009-July/msg00023.html</p>

<p>2009-04-01 (the initial announcement)
http://rwmj.wordpress.com/2009/04/01/libguestfs-access-and-modify-virtual-machine-disk-images/</p>

<p>SEE ALSO guestfs-examples(1), guestfs-faq(1),
guestfs-performance(1), guestfs-recipes(1),
guestfs-testing(1), guestfs(3), guestfish(1),
http://libguestfs.org/</p>

<p>AUTHOR Richard W.M. Jones</p>

<p>COPYRIGHT Copyright (C) 2009-2013 Red Hat Inc.</p>

<p>LICENSE This program is free software; you can
redistribute it and/or modify it under the terms of the GNU
General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your
option) any later version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth
Floor, Boston, MA 02110-1301 USA.</p>

<p>BUGS To get a list of bugs against libguestfs, use this
link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p>When reporting a bug, please supply:</p>

<p>&middot; The version of libguestfs.</p>

<p>&middot; Where you got libguestfs (eg. which Linux
distro, compiled from source, etc)</p>

<p>&middot; Describe the bug accurately and give a way to
reproduce it.</p>

<p>&middot; Run libguestfs-test-tool(1) and paste the
complete, unedited output into the bug report.</p>

<p>libguestfs-1.20.11 2013-08-27
guestfs-release-notes(1)</p>
<hr>
</body>
</html>
