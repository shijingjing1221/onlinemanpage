<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:43:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>UMAD_RECV(3) OpenIB Programmer&acute;s Manual
UMAD_RECV(3)</p>

<p>NAME umad_recv - receive umad</p>

<p>SYNOPSIS #include &lt;infiniband/umad.h&gt;</p>

<p>int umad_recv(int portid, void *umad, int *length, int
timeout_ms);</p>

<p>DESCRIPTION umad_recv() waits up to timeout_ms
milliseconds for an incoming MAD message to be received from
the port specified by portid.</p>

<p>A MAD &quot;message&quot; consists of a single MAD
packet or a coalesced multi- packet RMPP transmission. In
the RMPP case the header of the first RMPP packet is
returned as the header of the buffer and the buffer data
contains the coalesced data section of each subsequent RMPP
MAD packet within the transmission. Thus all the RMPP
headers except the first are not copied to user space from
the kernel.</p>

<p>The message is copied to the umad buffer if there is
sufficient room and the received length is indicated. If the
buffer is not large enough, the size of the umad buffer
needed is returned in length. A negative timeout_ms makes
the function block until a packet is received. A timeout_ms
parameter of zero indicates a non blocking read.</p>

<p>Note length is a pointer to the length of the data
portion of the umad buffer. This means that umad must point
to a buffer at least umad_size() + *length bytes long.</p>

<p>Note also that *length must be &gt;= 256 bytes. This
length allows for at least a single MAD packet to be
returned.</p>

<p>RETURN VALUE umad_recv() on success return the agentid;
on error, errno is set and a negative value is returned as
follows: -EINVAL invalid port handle or agentid or *length
is less than the minimum supported -EIO receive operation
failed -EWOULDBLOCK non blocking read cant be fulfilled
-ENOSPC The provided buffer is not long enough for the
complete message.</p>

<p>SEE ALSO umad_poll(3)</p>

<p>AUTHOR Hal Rosenstock &lt;halr@voltaire.com&gt;</p>

<p>OpenIB May 11, 2007 UMAD_RECV(3)</p>
<hr>
</body>
</html>
