<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:23:51 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MYSQL_UPGRADE(1) MySQL Database System
MYSQL_UPGRADE(1)</p>

<p>NAME mysql_upgrade - check and upgrade MySQL tables</p>

<p>SYNOPSIS mysql_upgrade [options]</p>

<p>DESCRIPTION mysql_upgrade examines all tables in all
databases for incompatibilities with the current version of
MySQL Server. mysql_upgrade also upgrades the system tables
so that you can take advantage of new privileges or
capabilities that might have been added.</p>

<p>mysql_upgrade should be executed each time you upgrade
MySQL. It supersedes the older mysql_fix_privilege_tables
script, which should no longer be used.</p>

<p>If mysql_upgrade finds that a table has a possible
incompatibility, it performs a table check and, if problems
are found, attempts a table repair. If the table cannot be
repaired, see Section 2.13.4, Rebuilding or Repairing Tables
or Indexes for manual table repair strategies.</p>

<p>Note On Windows Server 2008, Vista, and newer, you must
run mysql_upgrade with administrator privileges. You can do
this by running a Command Prompt as Administrator and
running the command. Failure to do so may result in the
upgrade failing to execute correctly.</p>

<p>Caution You should always back up your current MySQL
installation before performing an upgrade. See Section 7.2,
Database Backup Methods.</p>

<p>Some upgrade incompatibilities may require special
handling before you upgrade your MySQL installation and run
mysql_upgrade. See Section 2.13.1, Upgrading MySQL, for
instructions on determining whether any such
incompatibilities apply to your installation and how to
handle them.</p>

<p>To use mysql_upgrade, make sure that the server is
running, and then invoke it like this:</p>

<p>shell&gt; mysql_upgrade [options]</p>

<p>After running mysql_upgrade, stop the server and restart
it so that any changes made to the system tables take
effect.</p>

<p>mysql_upgrade executes the following commands to check
and repair tables and to upgrade the system tables:</p>

<p>mysqlcheck --all-databases --check-upgrade --auto-repair
mysql &lt; fix_priv_tables mysqlcheck --all-databases
--check-upgrade --fix-db-names --fix-table-names</p>

<p>Notes about the preceding commands:</p>

<p>&middot; Because mysql_upgrade invokes mysqlcheck with
the --all-databases option, it processes all tables in all
databases, which might take a long time to complete. Each
table is locked and therefore unavailable to other sessions
while it is being processed. Check and repair operations can
be time-consuming, particularly for large tables.</p>

<p>&middot; For details about what checks the
--check-upgrade option entails, see the description of the
FOR UPGRADE option of the CHECK TABLE statement (see Section
13.7.2.3, CHECK TABLE Syntax).</p>

<p>&middot; fix_priv_tables represents a script generated
internally by mysql_upgrade that contains SQL statements to
upgrade the tables in the mysql database.</p>

<p>&middot; Prior to MySQL 5.1.31, mysql_upgrade does not
run the second mysqlcheck command, which is necessary to
re-encode database or table names that contain
nonalphanumeric characters. (They still appear after the
upgrade with the #mysql50# prefix described in Section
9.2.3, Mapping of Identifiers to File Names .) If you have
such database or table names, execute the second mysqlcheck
command manually after executing mysql_upgrade.</p>

<p>All checked and repaired tables are marked with the
current MySQL version number. This ensures that next time
you run mysql_upgrade with the same version of the server,
it can tell whether there is any need to check or repair the
table again.</p>

<p>mysql_upgrade also saves the MySQL version number in a
file named mysql_upgrade_info in the data directory. This is
used to quickly check whether all tables have been checked
for this release so that table-checking can be skipped. To
ignore this file and perform the check regardless, use the
--force option.</p>

<p>If you install MySQL from RPM packages on Linux, you
must install the server and client RPMs. mysql_upgrade is
included in the server RPM but requires the client RPM
because the latter includes mysqlcheck. (See Section 2.5.1,
Installing MySQL on Linux Using RPM Packages.)</p>

<p>In MySQL 5.1.7, mysql_upgrade was added as a shell
script and worked only for Unix systems. As of MySQL 5.1.10,
mysql_upgrade is an executable binary and is available on
all systems.</p>

<p>mysql_upgrade does not upgrade the contents of the help
tables. For upgrade instructions, see Section 5.1.9,
Server-Side Help.</p>

<p>mysql_upgrade supports the following options, which can
be specified on the command line or in the [mysql_upgrade]
and [client] groups of an option file. Other options are
passed to mysqlcheck. For example, it might be necessary to
specify the --password[=password] option. mysql_upgrade also
supports the options for processing option files described
at Section 4.2.3.4, Command-Line Options that Affect Option-
File Handling.</p>

<p>&middot; --help</p>

<p>Display a short help message and exit.</p>

<p>&middot; --basedir=path</p>

<p>The path to the MySQL installation directory. This
option is accepted for backward compatibility but
ignored.</p>

<p>&middot; --datadir=path</p>

<p>The path to the data directory. This option is accepted
for backward compatibility but ignored.</p>

<p>&middot; --debug-check</p>

<p>Print some debugging information when the program exits.
This option was added in MySQL 5.1.21.</p>

<p>&middot; --debug-info, -T</p>

<p>Print debugging information and memory and CPU usage
statistics when the program exits. This option was added in
MySQL 5.1.21.</p>

<p>&middot; --force</p>

<p>Ignore the mysql_upgrade_info file and force execution
of mysqlcheck even if mysql_upgrade has already been
executed for the current version of MySQL.</p>

<p>&middot; --tmpdir=path, -t path</p>

<p>The path name of the directory to use for creating
temporary files. This option was added in MySQL 5.1.25.</p>

<p>&middot; --user=user_name, -u user_name</p>

<p>The MySQL user name to use when connecting to the
server. The default user name is root.</p>

<p>&middot; --verbose</p>

<p>Verbose mode. Print more information about what the
program does.</p>

<p>&middot; --write-binlog</p>

<p>Cause binary logging to be enabled while mysql_upgrade
runs. This is the default behavior; to disable binary
logging during the upgrade, use the inverse of this option
(that is, start the program with --skip-write-binlog).</p>

<p>This option was introduced in MySQL 5.1.40.</p>

<p>COPYRIGHT Copyright &copy; 1997, 2013, Oracle and/or its
affiliates. All rights reserved.</p>

<p>This documentation is free software; you can
redistribute it and/or modify it only under the terms of the
GNU General Public License as published by the Free Software
Foundation; version 2 of the License.</p>

<p>This documentation is distributed in the hope that it
will be useful, but WITHOUT ANY WARRANTY; without even the
implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for
more details.</p>

<p>You should have received a copy of the GNU General
Public License along with the program; if not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth
Floor, Boston, MA 02110-1301 USA or see
http://www.gnu.org/licenses/.</p>

<p>SEE ALSO For more information, please refer to the MySQL
Reference Manual, which may already be installed locally and
which is also available online at
http://dev.mysql.com/doc/.</p>

<p>AUTHOR Oracle Corporation (http://dev.mysql.com/).</p>

<p>MySQL 5.1 11/04/2013 MYSQL_UPGRADE(1)</p>
<hr>
</body>
</html>
