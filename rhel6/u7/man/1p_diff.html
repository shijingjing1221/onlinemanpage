<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:09:49 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>DIFF(1P) POSIX Programmer s Manual DIFF(1P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME diff - compare two files</p>

<p>SYNOPSIS diff [-c| -e| -f| -C n][-br] file1 file2</p>

<p>DESCRIPTION The diff utility shall compare the contents
of file1 and file2 and write to standard output a list of
changes necessary to convert file1 into file2. This list
should be minimal. No output shall be produced if the files
are identical.</p>

<p>OPTIONS The diff utility shall conform to the Base
Definitions volume of IEEE Std 1003.1-2001, Section 12.2,
Utility Syntax Guidelines.</p>

<p>The following options shall be supported:</p>

<p>-b Cause any amount of white space at the end of a line
to be treated as a single &lt;newline&gt; (that is, the
white-space charac- ters preceding the &lt;newline&gt; are
ignored) and other strings of white-space characters, not
including &lt;newline&gt;s, to compare equal.</p>

<p>-c Produce output in a form that provides three lines of
context.</p>

<p>-C n Produce output in a form that provides n lines of
context (where n shall be interpreted as a positive decimal
integer).</p>

<p>-e Produce output in a form suitable as input for the ed
utility, which can then be used to convert file1 into
file2.</p>

<p>-f Produce output in an alternative form, similar in
format to -e, but not intended to be suitable as input for
the ed utility, and in the opposite order.</p>

<p>-r Apply diff recursively to files and directories of
the same name when file1 and file2 are both directories.</p>

<p>OPERANDS The following operands shall be supported:</p>

<p>file1, file2 A pathname of a file to be compared. If
either the file1 or file2 operand is, the standard input
shall be used in its place.</p>

<p>If both file1 and file2 are directories, diff shall not
compare block special files, character special files, or
FIFO special files to any files and shall not compare
regular files to directories. Further details are as
specified in Diff Directory Comparison Format . The behavior
of diff on other file types is implementation-defined when
found in directories.</p>

<p>If only one of file1 and file2 is a directory, diff
shall be applied to the non-directory file and the file
contained in the directory file with a filename that is the
same as the last component of the non- directory file.</p>

<p>STDIN The standard input shall be used only if one of
the file1 or file2 operands references standard input. See
the INPUT FILES section.</p>

<p>INPUT FILES The input files may be of any type.</p>

<p>ENVIRONMENT VARIABLES The following environment
variables shall affect the execution of diff:</p>

<p>LANG Provide a default value for the
internationalization variables that are unset or null. (See
the Base Definitions volume of IEEE Std 1003.1-2001, Section
8.2, Internationalization Vari- ables for the precedence of
internationalization variables used to determine the values
of locale categories.)</p>

<p>LC_ALL If set to a non-empty string value, override the
values of all the other internationalization variables.</p>

<p>LC_CTYPE Determine the locale for the interpretation of
sequences of bytes of text data as characters (for example,
single-byte as opposed to multi-byte characters in arguments
and input files).</p>

<p>LC_MESSAGES Determine the locale that should be used to
affect the format and contents of diagnostic messages
written to standard error and informative messages written
to standard output.</p>

<p>LC_TIME Determine the locale for affecting the format of
file timestamps written with the -C and -c options.</p>

<p>NLSPATH Determine the location of message catalogs for
the processing of LC_MESSAGES .</p>

<p>TZ Determine the timezone used for calculating file
timestamps written with the -C and -c options. If TZ is
unset or null, an unspecified default timezone shall be
used.</p>

<p>ASYNCHRONOUS EVENTS Default.</p>

<p>STDOUT Diff Directory Comparison Format If both file1
and file2 are directories, the following output formats
shall be used.</p>

<p>In the POSIX locale, each file that is present in only
one directory shall be reported using the following
format:</p>

<p>&quot;Only in %s: %n&quot;, &lt;directory pathname&gt;,
&lt;filename&gt;</p>

<p>In the POSIX locale, subdirectories that are common to
the two directo- ries may be reported with the following
format:</p>

<p>&quot;Common subdirectories: %s and %n&quot;,
&lt;directory1 pathname&gt;, &lt;directory2 pathname&gt;</p>

<p>For each file common to the two directories if the two
files are not to be compared, the following format shall be
used in the POSIX locale:</p>

<p>&quot;File %s is a %s while file %s is a %n&quot;,
&lt;directory1 pathname&gt;, &lt;file type of directory1
pathname&gt;, &lt;directory2 pathname&gt;, &lt;file type of
directory2 pathname&gt;</p>

<p>For each file common to the two directories, if the
files are compared and are identical, no output shall be
written. If the two files differ, the following format is
written:</p>

<p>&quot;diff %s %s %n&quot;, &lt;diff_options&gt;,
&lt;filename1&gt;, &lt;filename2&gt;</p>

<p>where &lt;diff_options&gt; are the options as specified
on the command line.</p>

<p>All directory pathnames listed in this section shall be
relative to the original command line arguments. All other
names of files listed in this section shall be filenames
(pathname components).</p>

<p>Diff Binary Output Format In the POSIX locale, if one or
both of the files being compared are not text files, an
unspecified format shall be used that contains the path-
names of two files being compared and the string
&quot;differ&quot; .</p>

<p>If both files being compared are text files, depending
on the options specified, one of the following formats shall
be used to write the dif- ferences.</p>

<p>Diff Default Output Format The default (without -e, -f,
-c, or -C options) diff utility output shall contain lines
of these forms:</p>

<p>&quot;%da%n&quot;, &lt;num1&gt;, &lt;num2&gt;</p>

<p>&quot;%da%d,%n&quot;, &lt;num1&gt;, &lt;num2&gt;,
&lt;num3&gt;</p>

<p>&quot;%dd%n&quot;, &lt;num1&gt;, &lt;num2&gt;</p>

<p>&quot;%d,%dd%n&quot;, &lt;num1&gt;, &lt;num2&gt;,
&lt;num3&gt;</p>

<p>&quot;%dc%n&quot;, &lt;num1&gt;, &lt;num2&gt;</p>

<p>&quot;%d,%dc%n&quot;, &lt;num1&gt;, &lt;num2&gt;,
&lt;num3&gt;</p>

<p>&quot;%dc%d,%n&quot;, &lt;num1&gt;, &lt;num2&gt;,
&lt;num3&gt;</p>

<p>&quot;%d,%dc%d,%n&quot;, &lt;num1&gt;, &lt;num2&gt;,
&lt;num3&gt;, &lt;num4&gt;</p>

<p>These lines resemble ed subcommands to convert file1
into file2. The line numbers before the action letters shall
pertain to file1; those after shall pertain to file2. Thus,
by exchanging a for d and reading the line in reverse order,
one can also determine how to convert file2 into file1. As
in ed, identical pairs (where num1= num2) are abbrevi- ated
as a single number.</p>

<p>Following each of these lines, diff shall write to
standard output all lines affected in the first file using
the format:</p>

<p>&quot;&lt; %s&quot;, &lt;line&gt;</p>

<p>and all lines affected in the second file using the
format:</p>

<p>&quot;&gt; %s&quot;, &lt;line&gt;</p>

<p>If there are lines affected in both file1 and file2 (as
with the c sub- command), the changes are separated with a
line consisting of three hyphens:</p>

<p>&quot;--n&quot;</p>

<p>Diff -e Output Format With the -e option, a script shall
be produced that shall, when pro- vided as input to ed,
along with an appended w (write) command, convert file1 into
file2. Only the a (append), c (change), d (delete), i
(insert), and s (substitute) commands of ed shall be used in
this script. Text lines, except those consisting of the
single character period (.), shall be output as they appear
in the file.</p>

<p>Diff -f Output Format With the -f option, an alternative
format of script shall be produced. It is similar to that
produced by -e, with the following differences:</p>

<p>1. It is expressed in reverse sequence; the output of -e
orders changes from the end of the file to the beginning;
the -f from beginning to end.</p>

<p>2. The command form &lt;lines&gt; &lt;command-letter&gt;
used by -e is reversed. For example, 10c with -e would be
c10 with -f.</p>

<p>3. The form used for ranges of line numbers is
&lt;space&gt;-separated, rather than comma-separated.</p>

<p>Diff -c or -C Output Format With the -c or -C option,
the output format shall consist of affected lines along with
surrounding lines of context. The affected lines shall show
which ones need to be deleted or changed in file1, and those
added from file2. With the -c option, three lines of
context, if available, shall be written before and after the
affected lines. With the -C option, the user can specify how
many lines of context are written. The exact format
follows.</p>

<p>The name and last modification time of each file shall
be output in the following format:</p>

<p>&quot;*** %s %n&quot;, file1, &lt;file1 timestamp&gt;
&quot;--- %s %n&quot;, file2, &lt;file2 timestamp&gt;</p>

<p>Each &lt;file&gt; field shall be the pathname of the
corresponding file being compared. The pathname written for
standard input is unspecified.</p>

<p>In the POSIX locale, each &lt;timestamp&gt; field shall
be equivalent to the output from the following command:</p>

<p>date &quot;+%a %b %e %T %Y&quot;</p>

<p>without the trailing &lt;newline&gt;, executed at the
time of last modifica- tion of the corresponding file (or
the current time, if the file is standard input).</p>

<p>Then, the following output formats shall be applied for
every set of changes.</p>

<p>First, a line shall be written in the following
format:</p>

<p>&quot;**************n&quot;</p>

<p>Next, the range of lines in file1 shall be written in
the following format if the range contains two or more
lines:</p>

<p>&quot;*** %d,%d ***n&quot;, &lt;beginning line
number&gt;, &lt;ending line number&gt;</p>

<p>and the following format otherwise:</p>

<p>&quot;*** %d ***n&quot;, &lt;ending line number&gt;</p>

<p>The ending line number of an empty range shall be the
number of the preceding line, or 0 if the range is at the
start of the file.</p>

<p>Next, the affected lines along with lines of context
(unaffected lines) shall be written. Unaffected lines shall
be written in the following format:</p>

<p>&quot; %s&quot;, &lt;unaffected_line&gt;</p>

<p>Deleted lines shall be written as:</p>

<p>&quot;- %s&quot;, &lt;deleted_line&gt;</p>

<p>Changed lines shall be written as:</p>

<p>&quot;! %s&quot;, &lt;changed_line&gt;</p>

<p>Next, the range of lines in file2 shall be written in
the following format if the range contains two or more
lines:</p>

<p>&quot;--- %d,%d ---n&quot;, &lt;beginning line
number&gt;, &lt;ending line number&gt;</p>

<p>and the following format otherwise:</p>

<p>&quot;--- %d ---n&quot;, &lt;ending line number&gt;</p>

<p>Then, lines of context and changed lines shall be
written as described in the previous formats. Lines added
from file2 shall be written in the following format:</p>

<p>&quot;+ %s&quot;, &lt;added_line&gt;</p>

<p>STDERR The standard error shall be used only for
diagnostic messages.</p>

<p>OUTPUT FILES None.</p>

<p>EXTENDED DESCRIPTION None.</p>

<p>EXIT STATUS The following exit values shall be
returned:</p>

<p>0 No differences were found.</p>

<p>1 Differences were found.</p>

<p>&gt;1 An error occurred.</p>

<p>CONSEQUENCES OF ERRORS Default.</p>

<p>The following sections are informative.</p>

<p>APPLICATION USAGE If lines at the end of a file are
changed and other lines are added, diff output may show this
as a delete and add, as a change, or as a change and add;
diff is not expected to know which happened and users should
not care about the difference in output as long as it
clearly shows the differences between the files.</p>

<p>EXAMPLES If dir1 is a directory containing a directory
named x, dir2 is a direc- tory containing a directory named
x, dir1/x and dir2/x both contain files named date.out, and
dir2/x contains a file named y, the command:</p>

<p>diff -r dir1 dir2</p>

<p>could produce output similar to:</p>

<p>Common subdirectories: dir1/x and dir2/x Only in dir2/x:
y diff -r dir1/x/date.out dir2/x/date.out 1c1 &lt; Mon Jul 2
13:12:16 PDT 1990 --- &gt; Tue Jun 19 21:41:39 PDT 1990</p>

<p>RATIONALE The -h option was omitted because it was
insufficiently specified and does not add to applications
portability.</p>

<p>Historical implementations employ algorithms that do not
always produce a minimum list of differences; the current
language about making every effort is the best this volume
of IEEE Std 1003.1-2001 can do, as there is no metric that
could be employed to judge the quality of implementa- tions
against any and all file contents. The statement &quot;This
list should be minimal clearly implies that implementations
are not expected to provide the following output when
comparing two 100-line files that differ in only one
character on a single line:</p>

<p>1,100c1,100 all 100 lines from file1 preceded with
&quot;&lt; &quot; --- all 100 lines from file2 preceded with
&quot;&gt; &quot;</p>

<p>The &quot;Only in&quot; messages required when the -r
option is specified are not used by most historical
implementations if the -e option is also speci- fied. It is
required here because it provides useful information that
must be provided to update a target directory hierarchy to
match a source hierarchy. The &quot;Common
subdirectories&quot; messages are written by System V and
4.3 BSD when the -r option is specified. They are allowed
here but are not required because they are reporting on
something that is the same, not reporting a difference, and
are not needed to update a target hierarchy.</p>

<p>The -c option, which writes output in a format using
lines of context, has been included. The format is useful
for a variety of reasons, among them being much improved
readability and the ability to understand dif- ference
changes when the target file has line numbers that differ
from another similar, but slightly different, copy. The
patch utility is most valuable when working with difference
listings using the context format. The BSD version of -c
takes an optional argument specifying the amount of context.
Rather than overloading -c and breaking the Utility Syntax
Guidelines for diff, the standard developers decided to add
a separate option for specifying a context diff with a
specified amount of context ( -C). Also, the format for
context diffs was extended slightly in 4.3 BSD to allow
multiple changes that are within context lines from each
other to be merged together. The output format contains an
additional four asterisks after the range of affected lines
in the first filename. This was to provide a flag for old
programs (like old versions of patch) that only understand
the old context for- mat. The version of context described
here does not require that multi- ple changes within context
lines be merged, but it does not prohibit it either. The
extension is upwards-compatible, so any vendors that wish to
retain the old version of diff can do so by adding the extra
four asterisks (that is, utilities that currently use diff
and understand the new merged format will also understand
the old unmerged format, but not vice versa).</p>

<p>The substitute command was added as an additional format
for the -e option. This was added to provide implementations
with a way to fix the classic &quot;dot alone on a
line&quot; bug present in many versions of diff. Since many
implementations have fixed this bug, the standard developers
decided not to standardize broken behavior, but rather to
provide the necessary tool for fixing the bug. One way to
fix this bug is to output two periods whenever a lone period
is needed, then terminate the append command with a period,
and then use the substitute command to convert the two
periods into one period.</p>

<p>The BSD-derived -r option was added to provide a
mechanism for using diff to compare two file system trees.
This behavior is useful, is standard practice on all
BSD-derived systems, and is not easily repro- ducible with
the find utility.</p>

<p>The requirement that diff not compare files in some
circumstances, even though they have the same name, is based
on the actual output of his- torical implementations. The
message specified here is already in use when a directory is
being compared to a non-directory. It is extended here to
preclude the problems arising from running into FIFOs and
other files that would cause diff to hang waiting for input
with no indica- tion to the user that diff was hung. In most
common usage, diff -r should indicate differences in the
file hierarchies, not the difference of contents of devices
pointed to by the hierarchies.</p>

<p>Many early implementations of diff require seekable
files. Since the System Interfaces volume of IEEE Std
1003.1-2001 supports named pipes, the standard developers
decided that such a restriction was unreason- able. Note
also that the allowed filename - almost always refers to a
pipe.</p>

<p>No directory search order is specified for diff. The
historical order- ing is, in fact, not optimal, in that it
prints out all of the differ- ences at the current level,
including the statements about all common subdirectories
before recursing into those subdirectories.</p>

<p>The message:</p>

<p>&quot;diff %s %s %n&quot;, &lt;diff_options&gt;,
&lt;filename1&gt;, &lt;filename2&gt;</p>

<p>does not vary by locale because it is the representation
of a command, not an English sentence.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO cmp, comm, ed, find</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 DIFF(1P)</p>
<hr>
</body>
</html>
