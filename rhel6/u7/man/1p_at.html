<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:04:32 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>AT(1P) POSIX Programmer s Manual AT(1P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME at - execute commands at a later time</p>

<p>SYNOPSIS at [-m][-f file][-q queuename] -t time_arg</p>

<p>at [-m][-f file][-q queuename] timespec ...</p>

<p>at -r at_job_id ...</p>

<p>at -l -q queuename</p>

<p>at -l [at_job_id ...]</p>

<p>DESCRIPTION The at utility shall read commands from
standard input and group them together as an at-job, to be
executed at a later time.</p>

<p>The at-job shall be executed in a separate invocation of
the shell, running in a separate process group with no
controlling terminal, except that the environment variables,
current working directory, file creation mask, and other
implementation-defined execution-time attributes in effect
when the at utility is executed shall be retained and used
when the at-job is executed.</p>

<p>When the at-job is submitted, the at_job_id and
scheduled time shall be written to standard error. The
at_job_id is an identifier that shall be a string consisting
solely of alphanumeric characters and the period character.
The at_job_id shall be assigned by the system when the job
is scheduled such that it uniquely identifies a particular
job.</p>

<p>User notification and the processing of the jobs
standard output and standard error are described under the
-m option.</p>

<p>Users shall be permitted to use at if their name appears
in the file /usr/lib/cron/at.allow. If that file does not
exist, the file /usr/lib/cron/at.deny shall be checked to
determine whether the user shall be denied access to at. If
neither file exists, only a process with the appropriate
privileges shall be allowed to submit a job. If only at.deny
exists and is empty, global usage shall be permitted. The
at.allow and at.deny files shall consist of one user name
per line.</p>

<p>OPTIONS The at utility shall conform to the Base
Definitions volume of IEEE Std 1003.1-2001, Section 12.2,
Utility Syntax Guidelines.</p>

<p>The following options shall be supported:</p>

<p>-f file Specify the pathname of a file to be used as the
source of the at-job, instead of standard input.</p>

<p>-l (The letter ell.) Report all jobs scheduled for the
invoking user if no at_job_id operands are specified. If
at_job_ids are specified, report only information for these
jobs. The output shall be written to standard output.</p>

<p>-m Send mail to the invoking user after the at-job has
run, announcing its completion. Standard output and standard
error produced by the at-job shall be mailed to the user as
well, unless redirected elsewhere. Mail shall be sent even
if the job produces no output.</p>

<p>If -m is not used, the jobs standard output and standard
error shall be provided to the user by means of mail, unless
they are redirected elsewhere; if there is no such output to
provide, the implementation need not notify the user of the
jobs completion.</p>

<p>-q queuename</p>

<p>Specify in which queue to schedule a job for submission.
When used with the -l option, limit the search to that
particular queue. By default, at-jobs shall be scheduled in
queue a. In contrast, queue b shall be reserved for batch
jobs; see batch. The meanings of all other queuenames are
implementation-defined. If -q is specified along with either
of the -t time_arg or time- spec arguments, the results are
unspecified.</p>

<p>-r Remove the jobs with the specified at_job_id operands
that were previously scheduled by the at utility.</p>

<p>-t time_arg Submit the job to be run at the time
specified by the time option-argument, which the application
shall ensure has the for- mat as specified by the touch -t
time utility.</p>

<p>OPERANDS The following operands shall be supported:</p>

<p>at_job_id The name reported by a previous invocation of
the at utility at the time the job was scheduled.</p>

<p>timespec Submit the job to be run at the date and time
specified. All of the timespec operands are interpreted as
if they were separated by &lt;space&gt;s and concatenated,
and shall be parsed as described in the grammar at the end
of this section. The date and time shall be interpreted as
being in the timezone of the user (as determined by the TZ
variable), unless a timezone name appears as part of time,
below.</p>

<p>In the POSIX locale, the following describes the three
parts of the time specification string. All of the values
from the LC_TIME cate- gories in the POSIX locale shall be
recognized in a case-insensitive manner.</p>

<p>time The time can be specified as one, two, or four
digits. One-digit and two-digit numbers shall be taken to be
hours; four-digit numbers to be hours and minutes. The time
can alternatively be specified as two numbers separated by a
colon, meaning hour:minute. An AM/PM indication (one of the
values from the am_pm keywords in the LC_TIME locale
category) can follow the time; otherwise, a 24-hour clock
time shall be understood. A timezone name can also follow to
further qualify the time. The acceptable timezone names are
implementation-defined, except that they shall be
case-insensitive and the string utc is sup- ported to
indicate the time is in Coordinated Universal Time. In the
POSIX locale, the time field can also be one of the
following tokens:</p>

<p>midnight Indicates the time 12:00 am (00:00).</p>

<p>noon Indicates the time 12:00 pm.</p>

<p>now Indicates the current day and time. Invoking at
&lt;now&gt; shall submit an at-job for potentially immediate
execu- tion (that is, subject only to unspecified scheduling
delays).</p>

<p>date An optional date can be specified as either a month
name (one of the values from the mon or abmon keywords in
the LC_TIME locale category) followed by a day number (and
possibly year number preceded by a comma), or a day of the
week (one of the values from the day or abday keywords in
the LC_TIME locale category). In the POSIX locale, two
special days shall be recognized:</p>

<p>today Indicates the current day.</p>

<p>tomorrow Indicates the day following the current
day.</p>

<p>If no date is given, today shall be assumed if the given
time is greater than the current time, and tomorrow shall be
assumed if it is less. If the given month is less than the
current month (and no year is given), next year shall be
assumed.</p>

<p>increment The optional increment shall be a number
preceded by a plus sign ( + ) and suffixed by one of the
following: minutes, hours, days, weeks, months, or years.
(The singular forms shall also be accepted.) The keyword
next shall be equivalent to an increment number of +1. For
example, the following are equivalent com- mands:</p>

<p>at 2pm + 1 week at 2pm next week</p>

<p>The following grammar describes the precise format of
timespec in the POSIX locale. The general conventions for
this style of grammar are described in Grammar Conventions .
This formal syntax shall take prece- dence over the
preceding text syntax description. The longest possible
token or delimiter shall be recognized at a given point.
When used in a timespec, white space shall also delimit
tokens.</p>

<p>%token hr24clock_hr_min %token hr24clock_hour /* An
hr24clock_hr_min is a one, two, or four-digit number. A
one-digit or two-digit number constitutes an hr24clock_hour.
An hr24clock_hour may be any of the single digits [0,9], or
may be double digits, ranging from [00,23]. If an
hr24clock_hr_min is a four-digit number, the first two
digits shall be a valid hr24clock_hour, while the last two
represent the number of minutes, from [00,59]. */</p>

<p>%token wallclock_hr_min %token wallclock_hour /* A
wallclock_hr_min is a one, two-digit, or four-digit number.
A one-digit or two-digit number constitutes a
wallclock_hour. A wallclock_hour may be any of the single
digits [1,9], or may be double digits, ranging from [01,12].
If a wallclock_hr_min is a four-digit number, the first two
digits shall be a valid wallclock_hour, while the last two
represent the number of minutes, from [00,59]. */</p>

<p>%token minute /* A minute is a one or two-digit number
whose value can be [0,9] or [00,59]. */</p>

<p>%token day_number /* A day_number is a number in the
range appropriate for the particular month and year
specified by month_name and year_number, respectively. If no
year_number is given, the current year is assumed if the
given date and time are later this year. If no year_number
is given and the date and time have already occurred this
year and the month is not the current month, next year is
the assumed year. */</p>

<p>%token year_number /* A year_number is a four-digit
number representing the year A.D., in which the at_job is to
be run. */</p>

<p>%token inc_number /* The inc_number is the number of
times the succeeding increment period is to be added to the
specified date and time. */</p>

<p>%token timezone_name /* The name of an optional timezone
suffix to the time field, in an implementation-defined
format. */</p>

<p>%token month_name /* One of the values from the mon or
abmon keywords in the LC_TIME locale category. */</p>

<p>%token day_of_week /* One of the values from the day or
abday keywords in the LC_TIME locale category. */</p>

<p>%token am_pm /* One of the values from the am_pm keyword
in the LC_TIME locale category. */</p>

<p>%start timespec %% timespec : time | time date | time
increment | time date increment | nowspec ;</p>

<p>nowspec : &quot;now&quot; | &quot;now&quot; increment
;</p>

<p>time : hr24clock_hr_min | hr24clock_hr_min timezone_name
| hr24clock_hour &quot;:&quot; minute | hr24clock_hour
&quot;:&quot; minute timezone_name | wallclock_hr_min am_pm
| wallclock_hr_min am_pm timezone_name | wallclock_hour
&quot;:&quot; minute am_pm | wallclock_hour &quot;:&quot;
minute am_pm timezone_name | &quot;noon&quot; |
&quot;midnight&quot; ;</p>

<p>date : month_name day_number | month_name day_number
&quot;,&quot; year_number | day_of_week | &quot;today&quot;
| &quot;tomorrow&quot; ;</p>

<p>increment : &quot;+&quot; inc_number inc_period |
&quot;next&quot; inc_period ;</p>

<p>inc_period : &quot;minute&quot; | &quot;minutes&quot; |
&quot;hour&quot; | &quot;hours&quot; | &quot;day&quot; |
&quot;days&quot; | &quot;week&quot; | &quot;weeks&quot; |
&quot;month&quot; | &quot;months&quot; | &quot;year&quot; |
&quot;years&quot; ;</p>

<p>STDIN The standard input shall be a text file consisting
of commands accept- able to the shell command language
described in Shell Command Language . The standard input
shall only be used if no -f file option is speci- fied.</p>

<p>INPUT FILES See the STDIN section.</p>

<p>The text files /usr/lib/cron/at.allow and
/usr/lib/cron/at.deny shall contain zero or more user names,
one per line, of users who are, respectively, authorized or
denied access to the at and batch utili- ties.</p>

<p>ENVIRONMENT VARIABLES The following environment
variables shall affect the execution of at:</p>

<p>LANG Provide a default value for the
internationalization variables that are unset or null. (See
the Base Definitions volume of IEEE Std 1003.1-2001, Section
8.2, Internationalization Vari- ables for the precedence of
internationalization variables used to determine the values
of locale categories.)</p>

<p>LC_ALL If set to a non-empty string value, override the
values of all the other internationalization variables.</p>

<p>LC_CTYPE Determine the locale for the interpretation of
sequences of bytes of text data as characters (for example,
single-byte as opposed to multi-byte characters in arguments
and input files).</p>

<p>LC_MESSAGES Determine the locale that should be used to
affect the format and contents of diagnostic messages
written to standard error and informative messages written
to standard output.</p>

<p>NLSPATH Determine the location of message catalogs for
the processing of LC_MESSAGES .</p>

<p>LC_TIME Determine the format and contents for date and
time strings written and accepted by at.</p>

<p>SHELL Determine a name of a command interpreter to be
used to invoke the at-job. If the variable is unset or null,
sh shall be used. If it is set to a value other than a name
for sh, the implemen- tation shall do one of the following:
use that shell; use sh; use the login shell from the user
database; or any of the pre- ceding accompanied by a warning
diagnostic about which was cho- sen.</p>

<p>TZ Determine the timezone. The job shall be submitted
for execution at the time specified by timespec or -t time
relative to the timezone specified by the TZ variable. If
timespec specifies a timezone, it shall override TZ. If
timespec does not specify a timezone and TZ is unset or
null, an unspecified default time- zone shall be used.</p>

<p>ASYNCHRONOUS EVENTS Default.</p>

<p>STDOUT When standard input is a terminal, prompts of
unspecified format for each line of the user input described
in the STDIN section may be writ- ten to standard
output.</p>

<p>In the POSIX locale, the following shall be written to
the standard output for each job when jobs are listed in
response to the -l option:</p>

<p>&quot;%t%n&quot;, at_job_id, &lt;date&gt;</p>

<p>where date shall be equivalent in format to the output
of:</p>

<p>date +&quot;%a %b %e %T %Y&quot;</p>

<p>The date and time written shall be adjusted so that they
appear in the timezone of the user (as determined by the TZ
variable).</p>

<p>STDERR In the POSIX locale, the following shall be
written to standard error when a job has been successfully
submitted:</p>

<p>&quot;job %s at %n&quot;, at_job_id, &lt;date&gt;</p>

<p>where date has the same format as that described in the
STDOUT section. Neither this, nor warning messages
concerning the selection of the com- mand interpreter, shall
be considered a diagnostic that changes the exit status.</p>

<p>Diagnostic messages, if any, shall be written to
standard error.</p>

<p>OUTPUT FILES None.</p>

<p>EXTENDED DESCRIPTION None.</p>

<p>EXIT STATUS The following exit values shall be
returned:</p>

<p>0 The at utility successfully submitted, removed, or
listed a job or jobs.</p>

<p>&gt;0 An error occurred.</p>

<p>CONSEQUENCES OF ERRORS The job shall not be scheduled,
removed, or listed.</p>

<p>The following sections are informative.</p>

<p>APPLICATION USAGE The format of the at command line
shown here is guaranteed only for the POSIX locale. Other
cultures may be supported with substantially dif- ferent
interfaces, although implementations are encouraged to
provide comparable levels of functionality.</p>

<p>Since the commands run in a separate shell invocation,
running in a separate process group with no controlling
terminal, open file descrip- tors, traps, and priority
inherited from the invoking environment are lost.</p>

<p>Some implementations do not allow substitution of
different shells using SHELL. System V systems, for example,
have used the login shell value for the user in /etc/passwd.
To select reliably another command interpreter, the user
must include it as part of the script, such as:</p>

<p>$ at 1800 myshell myscript EOT job ... at ... $</p>

<p>EXAMPLES 1. This sequence can be used at a terminal:</p>

<p>at -m 0730 tomorrow sort &lt; file &gt;outfile EOT</p>

<p>2. This sequence, which demonstrates redirecting
standard error to a pipe, is useful in a command procedure
(the sequence of output redirection specifications is
significant):</p>

<p>at now + 1 hour &lt;&lt;! diff file1 file2 2&gt;&amp;1
&gt;outfile | mailx mygroup !</p>

<p>3. To have a job reschedule itself, at can be invoked
from within the at-job. For example, this daily processing
script named my.daily runs every day (although crontab is a
more appropriate vehicle for such work):</p>

<p># my.daily runs every day daily processingat now
tomorrow &lt; my.daily</p>

<p>4. The spacing of the three portions of the POSIX locale
timespec is quite flexible as long as there are no
ambiguities. Examples of various times and operand
presentation include:</p>

<p>at 0815am Jan 24 at 8 :15amjan24 at now &quot;+
1day&quot; at 5 pm FRIday at17 utc+ 30minutes</p>

<p>RATIONALE The at utility reads from standard input the
commands to be executed at a later time. It may be useful to
redirect standard output and standard error within the
specified commands.</p>

<p>The -t time option was added as a new capability to
support an interna- tionalized way of specifying a time for
execution of the submitted job.</p>

<p>Early proposals added a &quot;jobname&quot; concept as a
way of giving submitted jobs names that are meaningful to
the user submitting them. The histor- ical, system-specified
at_job_id gives no indication of what the job is. Upon
further reflection, it was decided that the benefit of this
was not worth the change in historical interface. The at
functionality is useful in simple environments, but in large
or complex situations, the functionality provided by the
Batch Services option is more suit- able.</p>

<p>The -q option historically has been an undocumented
option, used mainly by the batch utility.</p>

<p>The System V -m option was added to provide a method for
informing users that an at-job had completed. Otherwise,
users are only informed when output to standard error or
standard output are not redirected.</p>

<p>The behavior of at &lt;now&gt; was changed in an early
proposal from being unspecified to submitting a job for
potentially immediate execution. Historical BSD at
implementations support this. Historical System V
implementations give an error in that case, but a change to
the System V versions should have no backwards-compatibility
ramifications.</p>

<p>On BSD-based systems, a -u user option has allowed those
with appropriate privileges to access the work of other
users. Since this is primarily a system administration
feature and is not universally imple- mented, it has been
omitted. Similarly, a specification for the output format
for a user with appropriate privileges viewing the queues of
other users has been omitted.</p>

<p>The -f file option from System V is used instead of the
BSD method of using the last operand as the pathname. The
BSD method is ambiguous- does:</p>

<p>at 1200 friday</p>

<p>mean the same thing if there is a file named friday in
the current directory?</p>

<p>The at_job_id is composed of a limited character set in
historical practice, and it is mandated here to invalidate
systems that might try using characters that require shell
quoting or that could not be easily parsed by shell
scripts.</p>

<p>The at utility varies between System V and BSD systems
in the way time- zones are used. On System V systems, the TZ
variable affects the at-job submission times and the times
displayed for the user. On BSD systems, TZ is not taken into
account. The BSD behavior is easily achieved with the
current specification. If the user wishes to have the
timezone default to that of the system, they merely need to
issue the at command immediately following an unsetting or
null assignment to TZ . For exam- ple:</p>

<p>TZ= at noon ...</p>

<p>gives the desired BSD result.</p>

<p>While the yacc-like grammar specified in the OPERANDS
section is lexi- cally unambiguous with respect to the digit
strings, a lexical analyzer would probably be written to
look for and return digit strings in those cases. The parser
could then check whether the digit string returned is a
valid day_number, year_number, and so on, based on the
context.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO batch, crontab</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 AT(1P)</p>
<hr>
</body>
</html>
