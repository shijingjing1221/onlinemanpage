<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:09:10 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>dbus-launch(1) dbus-launch(1)</p>

<p>NAME dbus-launch - Utility to start a message bus from a
shell script</p>

<p>SYNOPSIS dbus-launch [--version] [--sh-syntax]
[--csh-syntax] [--auto-syntax] [--exit-with-session]
[--autolaunch=MACHINEID] [--config-file=FILENAME] [PROGRAM]
[ARGS...]</p>

<p>DESCRIPTION The dbus-launch command is used to start a
session bus instance of dbus-daemon from a shell script. It
would normally be called from a user s login scripts. Unlike
the daemon itself, dbus-launch exits, so backticks or the
$() construct can be used to read information from
dbus-launch.</p>

<p>With no arguments, dbus-launch will launch a session bus
instance and print the address and pid of that instance to
standard output.</p>

<p>You may specify a program to be run; in this case,
dbus-launch will launch a session bus instance, set the
appropriate environment vari- ables so the specified program
can find the bus, and then execute the specified program,
with the specified arguments. See below for exam- ples.</p>

<p>If you launch a program, dbus-launch will not print the
information about the new bus to standard output.</p>

<p>When dbus-launch prints bus information to standard
output, by default it is in a simple key-value pairs format.
However, you may request sev- eral alternate syntaxes using
the --sh-syntax, --csh-syntax, --binary- syntax, or
--auto-syntax options. Several of these cause dbus-launch to
emit shell code to set up the environment.</p>

<p>With the --auto-syntax option, dbus-launch looks at the
value of the SHELL environment variable to determine which
shell syntax should be used. If SHELL ends in
&quot;csh&quot;, then csh-compatible code is emitted;
otherwise Bourne shell code is emitted. Instead of passing
--auto-syn- tax, you may explicity specify a particular one
by using --sh-syntax for Bourne syntax, or --csh-syntax for
csh syntax. In scripts, its more robust to avoid
--auto-syntax and you hopefully know which shell your script
is written in.</p>

<p>See http://www.freedesktop.org/software/dbus/ for more
information about D-Bus. See also the man page for
dbus-daemon.</p>

<p>Here is an example of how to use dbus-launch with an
sh-compatible shell to start the per-session bus daemon:</p>

<p>## test for an existing bus daemon, just to be safe if
test -z &quot;$DBUS_SESSION_BUS_ADDRESS&quot; ; then ## if
not found, launch a new one eval dbus-launch --sh-syntax
--exit-with-session echo &quot;D-Bus per-session daemon
address is: $DBUS_SESSION_BUS_ADDRESS&quot; fi</p>

<p>You might run something like that in your login
scripts.</p>

<p>Another way to use dbus-launch is to run your main
session program, like so:</p>

<p>dbus-launch gnome-session</p>

<p>The above would likely be appropriate for ~/.xsession or
~/.Xclients.</p>

<p>AUTOMATIC LAUNCHING If DBUS_SESSION_BUS_ADDRESS is not
set for a process that tries to use D-Bus, by default the
process will attempt to invoke dbus-launch with the
--autolaunch option to start up a new session bus or find
the existing bus address on the X display or in a file in
~/.dbus/session- bus/</p>

<p>Whenever an autolaunch occurs, the application that had
to start a new bus will be in its own little world; it can
effectively end up starting a whole new session if it tries
to use a lot of bus services. This can be suboptimal or even
totally broken, depending on the app and what it tries to
do.</p>

<p>There are two common reasons for autolaunch. One is ssh
to a remote machine. The ideal fix for that would be
forwarding of DBUS_SES- SION_BUS_ADDRESS in the same way
that DISPLAY is forwarded. In the meantime, you can edit the
session.conf config file to have your ses- sion bus listen
on TCP, and manually set DBUS_SESSION_BUS_ADDRESS, if you
like.</p>

<p>The second common reason for autolaunch is an su to
another user, and display of X applications running as the
second user on the display belonging to the first user.
Perhaps the ideal fix in this case would be to allow the
second user to connect to the session bus of the first user,
just as they can connect to the first users display.
However, a mechanism for that has not been coded.</p>

<p>You can always avoid autolaunch by manually setting
DBUS_SES- SION_BUS_ADDRESS. Autolaunch happens because the
default address if none is set is &quot;autolaunch:&quot;,
so if any other address is set there will be no autolaunch.
You can however include autolaunch in an explicit session
bus address as a fallback, for example DBUS_SES-
SION_BUS_ADDRESS=&quot;something:,autolaunch:&quot; - in
that case if the first address doesnt work, processes will
autolaunch. (The bus address vari- able contains a
comma-separated list of addresses to try.)</p>

<p>The --autolaunch option is considered an internal
implementation detail of libdbus, and in fact there are
plans to change it. Theres no real reason to use it outside
of the libdbus implementation anyhow.</p>

<p>OPTIONS The following options are supported:</p>

<p>--auto-syntax Choose --csh-syntax or --sh-syntax based
on the SHELL environ- ment variable.</p>

<p>--binary-syntax Write to stdout a nul-terminated bus
address, then the bus PID as a binary integer of size
sizeof(pid_t), then the bus X window ID as a binary integer
of size sizeof(long). Integers are in the machine s byte
order, not network byte order or any other canonical byte
order.</p>

<p>--close-stderr Close the standard error output stream
before starting the D-Bus daemon. This is useful if you want
to capture dbus-launch error messages but you dont want
dbus-daemon to keep the stream open to your application.</p>

<p>--config-file=FILENAME Pass --config-file=FILENAME to
the bus daemon, instead of pass- ing it the --session
argument. See the man page for dbus-daemon</p>

<p>--csh-syntax Emit csh compatible code to set up
environment variables.</p>

<p>--exit-with-session If this option is provided, a
persistent &quot;babysitter&quot; process will be created
that watches stdin for HUP and tries to connect to the X
server. If this process gets a HUP on stdin or loses its X
connection, it kills the message bus daemon.</p>

<p>--autolaunch=MACHINEID This option implies that
dbus-launch should scan for a previ- ously-started session
and reuse the values found there. If no session is found, it
will start a new session. The --exit-with- session option is
implied if --autolaunch is given. This option is for the
exclusive use of libdbus, you do not want to use it
manually. It may change in the future.</p>

<p>--sh-syntax Emit Bourne-shell compatible code to set up
environment vari- ables.</p>

<p>--version Print the version of dbus-launch</p>

<p>AUTHOR See
http://www.freedesktop.org/software/dbus/doc/AUTHORS</p>

<p>BUGS Please send bug reports to the D-Bus mailing list
or bug tracker, see
http://www.freedesktop.org/software/dbus/</p>

<p>dbus-launch(1)</p>
<hr>
</body>
</html>
