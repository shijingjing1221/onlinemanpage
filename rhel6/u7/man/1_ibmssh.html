<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:18:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IBMSSH(1) IB MANAGEMENT SIMULATOR IBMSSH(1)</p>

<p>NAME ibmssh IB MANAGEMENT SIMULATOR - Extentended TCL
shell</p>

<p>DESCRIPTION ibmssh is a TCL shell extended with
interface for the IB Management Simulator facilities.
Normally you will not run this shell directly - but instead
it will be invoked by the IBMgtSim utility. However, in
order to write simulation flows that interacts closely with
the simu- lated model, a simulation flow should be provided.
This flow is loaded by IBMgtSim and excersize the API
provided by this shell.</p>

<p>The following sub sections provide detailed definition
for those objects and API.</p>

<p>IBMgtSim Constants These constants are provided by
IBMgtSim</p>

<p>Massage Manager Log Verbosity Flags</p>

<p>[ Constant : int ] $MsgShowFatal = 0x01 [ Constant : int
] $MsgShowError = 0x02 [ Constant : int ] $MsgShowWarning =
0x04 [ Constant : int ] $MsgShowInfo = 0x08 [ Constant : int
] $MsgShowVerbose = 0x10 [ Constant : int ] $MsgShowContext
= 0x20 [ Constant : int ] $MsgShowSource = 0x40 [ Constant :
int ] $MsgShowTime = 0x80 [ Constant : int ] $MsgShowModule
= 0x100 [ Constant : int ] $MsgShowMads = 0x200 [ Constant :
int ] $MsgShowFrames = 0x400 [ Constant : int ] $MsgShowAll
= 0xffff [ Constant : int ] $MsgDefault = 0x62f</p>

<p>Message Manager Objects class msgManager</p>

<p>This is the Message Manager class</p>

<p>[ Member : returns int ] getVerbLevel ?module? [ Member
: returns int ] clrVerbLevel ?module? [ Member : returns
void ] setVerbLevel vl ?module? [ Member : returns int ]
outstandingMsgCount ?vl? [ Member : returns string ]
outstandingMsgs ?vl? [ Member : returns string ]
getNextMessage [ Member : returns void ] nullOutstandingMsgs
[ Member : returns int ] setLogFile fileName</p>

<p>Random Manager Functions [ returns float ] rmRand obtain
a random number in the range 0.0 - 1.0</p>

<p>[ returns int ] rmSeed seed initialize the seed for the
random manager</p>

<p>class ib_node_info_t</p>

<p>[ Member data: returns uint8_t * ] -base_version [
Member data: returns uint8_t * ] -class_version [ Member
data: returns uint8_t * ] -node_type [ Member data: returns
uint8_t * ] -num_ports [ Member data: returns ib_net64_t * ]
-sys_guid [ Member data: returns ib_net64_t * ] -node_guid [
Member data: returns ib_net64_t * ] -port_guid [ Member
data: returns ib_net16_t * ] -partition_cap [ Member data:
returns ib_net16_t * ] -device_id [ Member data: returns
ib_net32_t * ] -revision [ Member data: returns ib_net32_t *
] -port_num_vendor_id</p>

<p>class ib_switch_info_t</p>

<p>[ Member data: returns ib_net16_t * ] -lin_cap [ Member
data: returns ib_net16_t * ] -rand_cap [ Member data:
returns ib_net16_t * ] -mcast_cap [ Member data: returns
ib_net16_t * ] -lin_top [ Member data: returns uint8_t * ]
-def_port [ Member data: returns uint8_t * ]
-def_mcast_pri_port [ Member data: returns uint8_t * ]
-def_mcast_not_port [ Member data: returns uint8_t * ]
-life_state [ Member data: returns ib_net16_t * ]
-lids_per_port [ Member data: returns ib_net16_t * ]
-enforce_cap [ Member data: returns uint8_t * ] -flags</p>

<p>class ib_port_info_t</p>

<p>[ Member data: returns ib_net64_t * ] -m_key [ Member
data: returns ib_net64_t * ] -subnet_prefix [ Member data:
returns ib_net16_t * ] -base_lid [ Member data: returns
ib_net16_t * ] -master_sm_base_lid [ Member data: returns
ib_net32_t * ] -capability_mask [ Member data: returns
ib_net16_t * ] -diag_code [ Member data: returns ib_net16_t
* ] -m_key_lease_period [ Member data: returns uint8_t * ]
-local_port_num [ Member data: returns uint8_t * ]
-link_width_enabled [ Member data: returns uint8_t * ]
-link_width_supported [ Member data: returns uint8_t * ]
-link_width_active [ Member data: returns uint8_t * ]
-state_info1 [ Member data: returns uint8_t * ] -state_info2
LinkSpeedSupported and PortState</p>

<p>[ Member data: returns uint8_t * ] -mkey_lmc
PortPhysState and LinkDownDefaultState</p>

<p>[ Member data: returns uint8_t * ] -link_speed [ Member
data: returns uint8_t * ] -mtu_smsl LinkSpeedEnabled and
LinkSpeedActive</p>

<p>[ Member data: returns uint8_t * ] -vl_cap [ Member
data: returns uint8_t * ] -vl_high_limit VlCap and
InitType</p>

<p>[ Member data: returns uint8_t * ] -vl_arb_high_cap [
Member data: returns uint8_t * ] -vl_arb_low_cap [ Member
data: returns uint8_t * ] -mtu_cap [ Member data: returns
uint8_t * ] -vl_stall_life [ Member data: returns uint8_t *
] -vl_enforce [ Member data: returns ib_net16_t * ]
-m_key_violations [ Member data: returns ib_net16_t * ]
-p_key_violations [ Member data: returns ib_net16_t * ]
-q_key_violations [ Member data: returns uint8_t * ]
-guid_cap [ Member data: returns uint8_t * ] -subnet_timeout
[ Member data: returns uint8_t * ] -resp_time_value [ Member
data: returns uint8_t * ] -error_threshold</p>

<p>class ib_node_desc_t</p>

<p>[ Member data: returns uint8_array_t * ] -description
Node String is an array of UTF-8 character that describes
the node in text format Note that this string is NOT NULL
TERMINATED!</p>

<p>class ib_lft_record_t</p>

<p>[ Member data: returns ib_net16_t * ] -lid [ Member
data: returns ib_net16_t * ] -block_num [ Member data:
returns uint32_t * ] -resv0 [ Member data: returns
uint8_array_t * ] -lft</p>

<p>class ib_pm_counters_t</p>

<p>[ Member data: returns ib_mad_t * ] -mad_header [ Member
data: returns uint32_array_t * ] -reserved0 [ Member data:
returns uint8_t * ] -reserved1 [ Member data: returns
uint8_t * ] -port_select [ Member data: returns ib_net16_t *
] -counter_select [ Member data: returns ib_net16_t * ]
-symbol_error_counter [ Member data: returns uint8_t * ]
-link_error_recovery_counter [ Member data: returns uint8_t
* ] -link_down_counter [ Member data: returns ib_net16_t * ]
-port_rcv_errors [ Member data: returns ib_net16_t * ]
-port_rcv_remote_physical_errors [ Member data: returns
ib_net16_t * ] -port_rcv_switch_relay_errors [ Member data:
returns ib_net16_t * ] -port_xmit_discard [ Member data:
returns uint8_t * ] -port_xmit_constraint_errors [ Member
data: returns uint8_t * ] -port_rcv_constraint_errors [
Member data: returns uint8_t * ] -reserved2 [ Member data:
returns uint8_t * ] -lli_errors_exc_buf_errors [ Member
data: returns ib_net16_t * ] -reserved3 [ Member data:
returns ib_net16_t * ] -vl15_dropped [ Member data: returns
ib_net32_t * ] -port_xmit_data [ Member data: returns
ib_net32_t * ] -port_rcv_data [ Member data: returns
ib_net32_t * ] -port_xmit_pkts [ Member data: returns
ib_net32_t * ] -port_rcv_pkts [ Member data: returns
uint32_array_t * ] -reserved5</p>

<p>IBMgtSim Simulator Objects class IBMgtSim</p>

<p>[ Member : returns IBFabric * ] getFabric [ Member :
returns IBMSServer * ] getServer [ Member : returns
IBMSDispatcher * ] getDispatcher [ Member : returns int ]
init topoFileName serverPortNum numWorkers</p>

<p>class IBMSNode</p>

<p>[ Member : returns IBNode * ] getIBNode get the IBNode
of the IBMSNode</p>

<p>[ Member : returns int ] getLinkStatus outPortNum get
the link status of the given port</p>

<p>[ Member : returns int ] setPhyPortErrProfile portNum
errProfileIn set a particular port err profile</p>

<p>[ Member : returns int ] getPhyPortErrProfile portNum
get a particular port err profile</p>

<p>[ Member : returns int ] setPhyPortPMCounter portNum
counterSelect countersVal set a specific port counter</p>

<p>[ Member : returns ib_pm_counters_t * ]
getPhyPortPMCounter portNum counterSelect get a specific
port counter [ Member : returns ib_port_info_t * ]
getPortInfo portNum get a specific port info</p>

<p>[ Member : returns int ] setLinkStatus portNum newState
set the Link status including sending trap128</p>

<p>[ Member : returns ib_node_info_t * ] getNodeInfo get
the node info</p>

<p>[ Member : returns ib_switch_info_t * ] getSwitchInfo
get the switch info</p>

<p>[ Member : returns ib_pkey_table_t * ] getPKeyTblBlock
portNum blockNum get pkey table block</p>

<p>[ Member : returns int ] setPKeyTblBlock portNum
blockNum tbl set pkey table block</p>

<p>[ Member : returns int ] setCrSpace startAddr length
data set CR Space Value</p>

<p>[ Member : returns int ] getCrSpace startAddr length
data get CR Space Value</p>

<p>[ Member : returns int ] getMFTBlock blockIdx portIdx
get MFT block</p>

<p>[ Member : returns int ] setMFTBlock blockIdx portIdx
inMftBlock set MFT block</p>

<p>class madMcMemberRec</p>

<p>[ Constructor: returns madMcMemberRec * ] madMcMemberRec
name [ Destructor: returns void ] rename obj {} [ Member
data: returns ib_gid_t * ] -mgid [ Member data: returns
ib_gid_t * ] -port_gid [ Member data: returns ib_net32_t * ]
-qkey [ Member data: returns ib_net16_t * ] -mlid [ Member
data: returns uint8_t * ] -mtu [ Member data: returns
uint8_t * ] -tclass [ Member data: returns ib_net16_t * ]
-pkey [ Member data: returns uint8_t * ] -rate [ Member
data: returns uint8_t * ] -pkt_life [ Member data: returns
ib_net32_t * ] -sl_flow_hop [ Member data: returns uint8_t *
] -scope_state [ Member : returns int ] send_set pFromNode
fromPort destLid comp_mask [ Member : returns int ] send_get
pFromNode fromPort destLid comp_mask [ Member : returns int
] send_del pFromNode fromPort destLid comp_mask</p>

<p>class madPathRec</p>

<p>[ Constructor: returns madPathRec * ] madPathRec name [
Destructor: returns void ] rename obj {} [ Member data:
returns uint8_array_t * ] -resv0 [ Member data: returns
ib_gid_t * ] -dgid [ Member data: returns ib_gid_t * ] -sgid
[ Member data: returns ib_net16_t * ] -dlid [ Member data:
returns ib_net16_t * ] -slid [ Member data: returns
ib_net32_t * ] -hop_flow_raw [ Member data: returns uint8_t
* ] -tclass [ Member data: returns uint8_t * ] -num_path [
Member data: returns ib_net16_t * ] -pkey [ Member data:
returns ib_net16_t * ] -sl [ Member data: returns uint8_t *
] -mtu [ Member data: returns uint8_t * ] -rate [ Member
data: returns uint8_t * ] -pkt_life [ Member data: returns
uint8_t * ] -preference [ Member data: returns uint8_array_t
* ] -resv2 [ Member : returns int ] send_get pFromNode
fromPort destLid comp_mask</p>

<p>class madServiceRec</p>

<p>[ Constructor: returns madServiceRec * ] madServiceRec
name [ Destructor: returns void ] rename obj {} [ Member
data: returns ib_net64_t * ] -service_id [ Member data:
returns ib_gid_t * ] -service_gid [ Member data: returns
ib_net16_t * ] -service_pkey [ Member data: returns
ib_net16_t * ] -resv [ Member data: returns ib_net32_t * ]
-service_lease [ Member data: returns uint8_array_t * ]
-service_key [ Member data: returns uint8_array_t * ]
-service_name [ Member data: returns uint8_array_t * ]
-service_data8 [ Member data: returns uint16_array_t * ]
-service_data16 [ Member data: returns uint32_array_t * ]
-service_data32 [ Member data: returns uint64_array_t * ]
-service_data64 [ Member : returns int ] send_set pFromNode
fromPort destLid comp_mask [ Member : returns int ] send_get
pFromNode fromPort destLid comp_mask [ Member : returns int
] send_del pFromNode fromPort destLid comp_mask</p>

<p>class madNotice128</p>

<p>[ Constructor: returns madNotice128 * ] madNotice128
name [ Destructor: returns void ] rename obj {} [ Member
data: returns uint8_t * ] -generic_type [ Member data:
returns uint8_t * ] -prod_type_msb [ Member data: returns
ib_net16_t * ] -prod_type_lsb [ Member data: returns
ib_net16_t * ] -trap_num [ Member data: returns ib_net16_t *
] -issuer_lid [ Member data: returns ib_net16_t * ]
-toggle_count [ Member data: returns ib_net16_t * ] -sw_lid
the sw lid of which link state changed - for 128 only</p>

<p>[ Member data: returns ib_gid_t * ] -issuer_gid [ Member
: returns int ] send_trap pFromNode fromPort destLid</p>

<p>class madNotice129</p>

<p>[ Constructor: returns madNotice129 * ] madNotice129
name [ Destructor: returns void ] rename obj {} [ Member
data: returns uint8_t * ] -generic_type [ Member data:
returns uint8_t * ] -prod_type_msb [ Member data: returns
ib_net16_t * ] -prod_type_lsb [ Member data: returns
ib_net16_t * ] -trap_num [ Member data: returns ib_net16_t *
] -issuer_lid [ Member data: returns ib_net16_t * ]
-toggle_count [ Member data: returns ib_net16_t * ] -pad [
Member data: returns ib_net16_t * ] -lid lid and port number
of the violation</p>

<p>[ Member data: returns uint8_t * ] -port_num [ Member
data: returns ib_gid_t * ] -issuer_gid [ Member : returns
int ] send_trap pFromNode fromPort destLid</p>

<p>class madNotice144</p>

<p>[ Constructor: returns madNotice144 * ] madNotice144
name [ Destructor: returns void ] rename obj {} [ Member
data: returns uint8_t * ] -generic_type [ Member data:
returns uint8_t * ] -prod_type_msb [ Member data: returns
ib_net16_t * ] -prod_type_lsb [ Member data: returns
ib_net16_t * ] -trap_num [ Member data: returns ib_net16_t *
] -issuer_lid [ Member data: returns ib_net16_t * ]
-toggle_count [ Member data: returns ib_net16_t * ] -pad1 [
Member data: returns ib_net16_t * ] -lid lid where
capability mask changed</p>

<p>[ Member data: returns ib_net16_t * ] -pad2 [ Member
data: returns ib_net32_t * ] -new_cap_mask new capability
mask</p>

<p>[ Member data: returns ib_gid_t * ] -issuer_gid [ Member
: returns int ] send_trap pFromNode fromPort destLid</p>

<p>AUTHOR Eitan Zahavi, Mellanox Technologies LTD,
eitan@mellanox.co.il</p>

<p>IBMGTSIM 1.0 2008-06-16 IBMSSH(1)</p>
<hr>
</body>
</html>
