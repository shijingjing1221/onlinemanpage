<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:32:05 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RUNSCRIPT(1) RUNSCRIPT(1)</p>

<p>NAME runscript - script interpreter for minicom</p>

<p>SYNOPSIS runscript scriptname [logfile [homedir]]</p>

<p>DESCRIPTION runscript is a simple script interpreter
that can be called from within the minicom communications
program to automate tasks like logging in to a unix system
or your favorite bbs.</p>

<p>INVOCATION The program expects a script name and
optionally a filename and the users home directory as
arguments, and it expects that its input and output are
connected to the &quot;remote end&quot;, the system you are
connecting to. All messages from runscript meant for the
local screen are directed to the stderr output. All this is
automatically taken care of if you run it from minicom. The
logfile and home directory parameters are only used to tell
the log command the name of the logfile and where to write
it. If the homedir is omitted, runscript uses the directory
found in the $HOME environment variable. If also the logfile
name is omitted, the log commands are ignored.</p>

<p>KEYWORDS Runscript recognizes the following
commands:</p>

<p>expect send goto gosub return ! exit print set inc dec
if timeout verbose sleep break call log</p>

<p>OVERVIEW OF KEYWORDS send &lt;string&gt; .
&lt;string&gt; is sent to the modem. It is followed by a
&lt;string&gt; can be: - regular text, e.g. send hello -
text enclosed in quotes, e.g. send &quot;hello
world&quot;</p>

<p>Within &lt;string&gt; the following sequences are
recognized: - newline- carriage return - bell -backspace -
formfeed - the ^ character -send character o (o is an octal
number)</p>

<p>Control characters can be used in the string with the ^
prefix (^A to ^Z, ^[, ^ ^], ^^ and ^_). If you need to send
the ^ character, you must prefix it with the escape
character. Also $(environment_variable) can be used, for
example $(TERM). Minicom passes three special environment
variables: $(LOGIN), which is the username, $(PASS), which
is the password, as defined in the proper entry of the
dialing directory, and $(TERMLIN) which is the number of
actual terminal lines on your screen (that is, the
statusline excluded).</p>

<p>print &lt;string&gt; Prints &lt;string&gt; to the local
screen. Default followed . 0 See the description of send
above. by</p>

<p>label: Declares a label (with the name label) to use
with goto or gosub.</p>

<p>goto &lt;label&gt; Jump to another place in the
program.</p>

<p>gosub &lt;label&gt; Jumps to another place in the
program. When the statement return is encountered, control
returns to the statement after the gosub. Gosubs can be
nested.</p>

<p>return Return from a gosub.</p>

<p>! &lt;command&gt; Runs a shell for you in which command
is executed. On return, the variable $? is set to the exit
status of this command, so you can subsequently test it
using if.</p>

<p>exit [value] Exit from &quot;runscript&quot; with an
optional exit status. (default 1)</p>

<p>set &lt;variable&gt; &lt;value&gt; Sets the value of
&lt;variable&gt; (which is a single letter a-z) to the value
&lt;value&gt;. If &lt;variable&gt; does not exist, it will
be created. &lt;value&gt; can be a integer value or another
variable.</p>

<p>inc &lt;variable&gt; Increments the value of
&lt;variable&gt; by one.</p>

<p>dec &lt;variable&gt; Decrements the value of
&lt;variable&gt; by one.</p>

<p>if &lt;value&gt; &lt;operator&gt; &lt;value&gt;
&lt;statement&gt; Conditional execution of
&lt;statement&gt;. &lt;operator&gt; can be &lt;, &gt;, != or
=. Eg, if a &gt; 3 goto exitlabel.</p>

<p>timeout &lt;value&gt; Sets the global timeout. By
default, runscript will exit after 120 seconds. This can be
changed with this command. Warning: this command acts
differently within an expect statement, but more about that
later.</p>

<p>verbose &lt;on|off&gt; By default, this is on. That
means that anything that is being read from the modem by
runscript, gets echoed to the screen. This is so that you
can see what runscript is doing.</p>

<p>sleep &lt;value&gt; Suspend execution for &lt;value&gt;
seconds.</p>

<p>expect expect { pattern [statement] pattern [statement]
[timeout &lt;value&gt; [statement] ] .... } The most
important command of all. Expect keeps reading from the
input until it reads a pattern that matches one of the
specified ones. If expect encounters an optional statement
after that pat- tern, it will execute it. Otherwise the
default is to just break out of the expect. pattern is a
string, just as in send (see above). Normally, expect will
timeout in 60 seconds and just exit, but this can be changed
with the timeout command.</p>

<p>break Break out of an expect statement. This is normally
only useful as argument to timeout within an expect, because
the default action of timeout is to exit immediately.</p>

<p>call &lt;scriptname&gt; Transfers control to another
scriptfile. When that scriptfile fin- ishes without errors,
the original script will continue.</p>

<p>log &lt;text&gt; Write text to the logfile.</p>

<p>NOTES If you want to make your script to exit minicom
(for example when you use minicom to dial up your ISP, and
then start a ppp or slip session from a script), try the
command &quot;! killall -9 minicom&quot; as the last script
command. The -9 option should prevent minicom from hanging
up the line and resetting the modem before exiting. Well, I
don t think this is enough information to make you an
experi- enced programmer in runscript , but together with
the examples it shouldn t be too hard to write some useful
script files. Things will be easier if you have experience
with BASIC. The minicom source code comes together with two
example scripts, scriptdemo and unixlogin. Especially the
last one is a good base to build on for your own
scripts.</p>

<p>SEE ALSO minicom(1)</p>

<p>BUGS Runscript should be built in to minicom.</p>

<p>AUTHOR Miquel van Smoorenburg,
&lt;miquels@drinkel.ow.org&gt; Jukka Lahtinen,
&lt;walker@netsonic.fi&gt;</p>

<p>User s Manual $Date: 2007-10-07 18:13:51 $
RUNSCRIPT(1)</p>
<hr>
</body>
</html>
