<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:13:30 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FTW(3P) POSIX Programmer s Manual FTW(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME ftw - traverse (walk) a file tree</p>

<p>SYNOPSIS #include &lt;ftw.h&gt;</p>

<p>int ftw(const char *path, int (*fn)(const char *, const
struct stat *ptr, int flag), int ndirs);</p>

<p>DESCRIPTION The ftw() function shall recursively descend
the directory hierarchy rooted in path. For each object in
the hierarchy, ftw() shall call the function pointed to by
fn, passing it a pointer to a null-terminated character
string containing the name of the object, a pointer to a
stat structure containing information about the object, and
an integer. Possible values of the integer, defined in the
&lt;ftw.h&gt; header, are:</p>

<p>FTW_D For a directory.</p>

<p>FTW_DNR For a directory that cannot be read.</p>

<p>FTW_F For a file.</p>

<p>FTW_SL For a symbolic link (but see also FTW_NS
below).</p>

<p>FTW_NS For an object other than a symbolic link on which
stat() could not successfully be executed. If the object is
a symbolic link and stat() failed, it is unspecified whether
ftw() passes FTW_SL or FTW_NS to the user-supplied
function.</p>

<p>If the integer is FTW_DNR, descendants of that directory
shall not be processed. If the integer is FTW_NS, the stat
structure contains unde- fined values. An example of an
object that would cause FTW_NS to be passed to the function
pointed to by fn would be a file in a directory with read
but without execute (search) permission.</p>

<p>The ftw() function shall visit a directory before
visiting any of its descendants.</p>

<p>The ftw() function shall use at most one file descriptor
for each level in the tree.</p>

<p>The argument ndirs should be in the range [1,
{OPEN_MAX}].</p>

<p>The tree traversal shall continue until either the tree
is exhausted, an invocation of fn returns a non-zero value,
or some error, other than [EACCES], is detected within
ftw().</p>

<p>The ndirs argument shall specify the maximum number of
directory streams or file descriptors or both available for
use by ftw() while traversing the tree. When ftw() returns
it shall close any directory streams and file descriptors it
uses not counting any opened by the application-supplied fn
function.</p>

<p>The results are unspecified if the application-supplied
fn function does not preserve the current working
directory.</p>

<p>The ftw() function need not be reentrant. A function
that is not required to be reentrant is not required to be
thread-safe.</p>

<p>RETURN VALUE If the tree is exhausted, ftw() shall
return 0. If the function pointed to by fn returns a
non-zero value, ftw() shall stop its tree traversal and
return whatever value was returned by the function pointed
to by fn. If ftw() detects an error, it shall return -1 and
set errno to indicate the error.</p>

<p>If ftw() encounters an error other than [EACCES] (see
FTW_DNR and FTW_NS above), it shall return -1 and set errno
to indicate the error. The external variable errno may
contain any error value that is possi- ble when a directory
is opened or when one of the stat functions is executed on a
directory or file.</p>

<p>ERRORS The ftw() function shall fail if:</p>

<p>EACCES Search permission is denied for any component of
path or read permission is denied for path.</p>

<p>ELOOP A loop exists in symbolic links encountered during
resolution of the path argument.</p>

<p>ENAMETOOLONG The length of the path argument exceeds
{PATH_MAX} or a pathname component is longer than
{NAME_MAX}.</p>

<p>ENOENT A component of path does not name an existing
file or path is an empty string.</p>

<p>ENOTDIR A component of path is not a directory.</p>

<p>EOVERFLOW A field in the stat structure cannot be
represented correctly in the current programming environment
for one or more files found in the file hierarchy.</p>

<p>The ftw() function may fail if:</p>

<p>EINVAL The value of the ndirs argument is invalid.</p>

<p>ELOOP More than {SYMLOOP_MAX} symbolic links were
encountered during resolution of the path argument.</p>

<p>ENAMETOOLONG Pathname resolution of a symbolic link
produced an intermediate result whose length exceeds
{PATH_MAX}.</p>

<p>In addition, if the function pointed to by fn encounters
system errors, errno may be set accordingly.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Walking a Directory Structure The following
example walks the current directory structure, calling the
fn function for every directory entry, using at most 10 file
descriptors:</p>

<p>#include &lt;ftw.h&gt; ... if (ftw(&quot;.&quot;, fn,
10) != 0) { perror(&quot;ftw&quot;); exit(2); }</p>

<p>APPLICATION USAGE The ftw() function may allocate
dynamic storage during its operation. If ftw() is forcibly
terminated, such as by longjmp() or siglongjmp() being
executed by the function pointed to by fn or an interrupt
rou- tine, ftw() does not have a chance to free that
storage, so it remains permanently allocated. A safe way to
handle interrupts is to store the fact that an interrupt has
occurred, and arrange to have the function pointed to by fn
return a non-zero value at its next invocation.</p>

<p>RATIONALE None.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO longjmp(), lstat(), malloc(), nftw(),
opendir(), siglongjmp(), stat(), the Base Definitions volume
of IEEE Std 1003.1-2001, &lt;ftw.h&gt;,
&lt;sys/stat.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 FTW(3P)</p>
<hr>
</body>
</html>
