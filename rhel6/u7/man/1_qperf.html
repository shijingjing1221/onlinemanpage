<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:30:35 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>QPERF(1) User Commands QPERF(1)</p>

<p>NAME qperf - Measure RDMA and IP performance</p>

<p>SYNOPSIS qperf qperf SERVERNODE [OPTIONS] TESTS</p>

<p>DESCRIPTION qperf measures bandwidth and latency between
two nodes. It can work over TCP/IP as well as the RDMA
transports. On one of the nodes, qperf is typically run with
no arguments designating it the server node. One may then
run qperf on a client node to obtain measurements such as
bandwidth, latency and cpu utilization.</p>

<p>In its most basic form, qperf is run on one node in
server mode by invoking it with no arguments. On the other
node, it is run with two arguments: the name of the server
node followed by the name of the test. A list of tests can
be found in the section, TESTS. A variety of options may
also be specified.</p>

<p>One can get more detailed information on qperf by using
the --help option. Below are examples of using the --help
option:</p>

<p>qperf --help examples Some examples of using qperf qperf
--help opts Summary of options qperf --help options
Description of options qperf --help tests Short summary and
description of tests qperf --help TESTNAME More information
on test TESTNAME</p>

<p>EXAMPLES In these examples, we first run qperf on a node
called myserver in server mode by invoking it with no
arguments. In all the subsequent examples, we run qperf on
another node and connect to the server which we assume has a
hostname of myserver.</p>

<p>To run a TCP bandwidth and latency test: qperf myserver
tcp_bw tcp_lat</p>

<p>To run a SDP bandwidth test for 10 seconds: qperf
myserver -t 10 sdp_bw</p>

<p>To run a UDP latency test and then cause the server to
terminate: qperf myserver udp_lat quit</p>

<p>To measure the RDMA UD latency and bandwidth: qperf
myserver ud_lat ud_bw</p>

<p>To measure RDMA UC bi-directional bandwidth: qperf
myserver rc_bi_bw</p>

<p>To get a range of TCP latencies with a message size from
1 to 64K qperf myserver -oo msg_size:1:64K:*2 -vu
tcp_lat</p>

<p>OPTIONS -ar, --access_recv OnOff If OnOff is non-zero,
data is accessed once received. Other- wise, data is
ignored. By default, OnOff is 0. This can help to mimic some
applications.</p>

<p>-ar1 Cause received data to be accessed.</p>

<p>-ap, --alt_port Port Set alternate path port. This
enables automatic path failover.</p>

<p>-lap, --loc_alt_port Port Set local alternate path port.
This enables automatic path failover.</p>

<p>-rap, --rem_alt_port Port Set remote alternate path
port. This enables automatic path failover.</p>

<p>-ca, --cpu_affinity PN Set cpu affinity to PN. CPUs are
numbered sequentially from 0. If PN is &quot;any&quot;, any
cpu is allowed otherwise the cpu is limited to the one
specified.</p>

<p>-lca, --loc_cpu_affinity PN Set local processor affinity
to PN.</p>

<p>-rca, --rem_cpu_affinity PN Set remote processor
affinity to PN.</p>

<p>-f, --flip OnOff If non-zero, cause sender and receiver
to play opposite roles.</p>

<p>-f1 Cause sender and receiver to play opposite
roles.</p>

<p>-h, --help Topic Print out information about Topic. To
see the list of topics, type qperf --help</p>

<p>-H, --host Host Run test between the current node and
the qperf running on node Host. This can also be specified
as the first non-option argu- ment.</p>

<p>-i, --id Device:Port Use RDMA Device and Port.</p>

<p>-li, --loc_id Device:Port Use local RDMA Device and
Port.</p>

<p>-ri, --rem_id Device:Port Use remote RDMA Device and
Port.</p>

<p>-lp, --listen_port Port Set the port we listen on to
ListenPort. This must be set to the same port on both the
server and client machines. The default value is 19765.</p>

<p>-oo, --loop Var:Init:Last:Incr Run a test multiple times
sequencing through a series of values. Var is the loop
variable; Init is the initial value; Last is the value it
must not exceed and Incr is the increment. It is use- ful to
set the --verbose_used (-vu) option in conjunction with this
option.</p>

<p>-m, --msg_size Size Set the message size to Size. The
default value varies by test. It is assumed that the value
is specified in bytes however, a trailing kib or K, mib or
M, or gib or G indicates that the size is being specified in
kibibytes, mebibytes or gibibytes respec- tively while a
trailing kb or k, mb or m, or gb or g indicates kilobytes,
megabytes or gigabytes respectively.</p>

<p>-mt, --mtu_size Size Set the MTU size. Only relevant to
the RDMA UC/RC tests. Units are specified in the same manner
as the --msg_size option.</p>

<p>-n, --no_msgs N Set test duration by number of messages
sent instead of time.</p>

<p>-cp, --cq_poll OnOff Turn polling mode on or off. This
is only relevant to the RDMA tests and determines whether
they poll or wait on the completion queues. If OnOff is 0,
they wait; otherwise they poll.</p>

<p>-lcp, --loc_cq_poll OnOff Locally turn polling mode on
or off.</p>

<p>-rcp, --rem_cq_poll OnOff Remotely turn polling mode on
or off.</p>

<p>-cp1 Turn polling mode on.</p>

<p>-lcp1 Turn local polling mode on.</p>

<p>-rcp1 Turn remote polling mode on.</p>

<p>-ip, --ip_port Port Use Port to run the socket tests.
This is different from --lis- ten_port which is used for
synchronization. This is only rele- vant for the socket
tests and refers to the TCP/UDP/SDP/RDS/SCTP port that the
test is run on.</p>

<p>-e, --precision Digits Set the number of significant
digits that are used to report results.</p>

<p>-nr, --rd_atomic Max Set the number of in-flight
operations that can be handled for a RDMA read or atomic
operation to Max. This is only relevant to the RDMA Read and
Atomic tests.</p>

<p>-lnr, --loc_rd_atomic Max Set local read/atomic
count.</p>

<p>-rnr, --rem_rd_atomic Max Set remote read/atomic
count.</p>

<p>-sl, --service_level SL Set RDMA service level to SL.
This is only used by the RDMA tests. The service level must
be between 0 and 15. The default service level is 0.</p>

<p>-lsl, --loc_service_level SL Set local service
level.</p>

<p>-rsl, --rem_service_level SL Set remote service
level.</p>

<p>-sb, --sock_buf_size Size Set the socket buffer size.
This is only relevant to the socket tests.</p>

<p>-lsb, --loc_sock_buf_size Size Set local socket buffer
size.</p>

<p>-rsb, --rem_sock_buf_size Size Set remote socket buffer
size.</p>

<p>-sp, --src_path_bits N Set source path bits. If the LMC
is not zero, this will cause the connection to use a LID
with the low order LMC bits set to N.</p>

<p>-lsp, --loc_src_path_bits N Set local source path
bits.</p>

<p>-rsp, --rem_src_path_bits N Set remote source path
bits.</p>

<p>-sr, --static_rate Rate Force InfiniBand static rate.
Rate can be one of: 2.5, 5, 10, 20, 30, 40, 60, 80, 120,
1xSDR (2.5 Gbps), 1xDDR (5 Gbps), 1xQDR (10 Gbps), 4xSDR
(2.5 Gbps), 4xDDR (5 Gbps), 4xQDR (10 Gbps), 8xSDR (2.5
Gbps), 8xDDR (5 Gbps), 8xQDR (10 Gbps).</p>

<p>-lsr, --loc_static_rate Force local InfiniBand static
rate</p>

<p>-rsr, --rem_static_rate Force remote InfiniBand static
rate</p>

<p>-t, --time Time Set test duration to Time. Specified in
seconds however a trailing m, h or d indicates that the time
is specified in min- utes, hours or days respectively.</p>

<p>-to, --timeout Time Set timeout to Time. This is the
timeout used for various things such as exchanging messages.
The default is 5 seconds.</p>

<p>-lto, --loc_timeout Time Set local timeout to Time. This
may be used on the server to set the timeout when initially
exchanging data with each client. However, as soon as we
receive the client s parameters, the client s remote timeout
will override this parameter.</p>

<p>-rto, --rem_timeout Time Set remote timeout to Time.</p>

<p>-un, --unify_nodes Unify the nodes. Describe them in
terms of local and remote rather than send and receive.</p>

<p>-uu, --unify_units Unify the units that results are
shown in. Uses the lowest com- mon denominator. Helpful for
scripts.</p>

<p>-ub, --use_bits_per_sec Use bits/sec rather than
bytes/sec when displaying networking speed.</p>

<p>-cm, --use_cm OnOff Use the RDMA Connection Manager (CM)
if OnOff is non-zero. It is necessary to use the CM for
iWARP devices. The default is to establish the connection
without using the CM. This only works for the tests that use
the RC transport.</p>

<p>-cm1 Use RDMA Connection Manager.</p>

<p>-v, --verbose Provide more detailed output. Turns on
-vc, -vs, -vt and -vu.</p>

<p>-vc, --verbose_conf Provide information on
configuration.</p>

<p>-vs, --verbose_stat Provide information on
statistics.</p>

<p>-vt, --verbose_time Provide information on timing.</p>

<p>-vu, --verbose_used Provide information on parameters
used.</p>

<p>-vv, --verbose_more Provide even more detailed output.
Turns on -vvc, -vvs, -vvt and -vvu.</p>

<p>-vvc, --verbose_more_conf Provide more information on
configuration.</p>

<p>-vvs, --verbose_more_stat Provide more information on
statistics.</p>

<p>-vvt, --verbose_more_time Provide more information on
timing.</p>

<p>-vvu, --verbose_more_used Provide more information on
parameters used.</p>

<p>-V, --version The current version of qperf is
printed.</p>

<p>-ws, --wait_server Time If the server is not ready,
continue to try connecting for Time seconds before giving
up. The default is 5 seconds.</p>

<p>TESTS conf Show configuration</p>

<p>quit Cause the server to quit</p>

<p>rds_bw RDS streaming one way bandwidth</p>

<p>rds_lat RDS one way latency</p>

<p>sctp_bw SCTP streaming one way bandwidth</p>

<p>sctp_lat SCTP one way latency</p>

<p>sdp_bw SDP streaming one way bandwidth</p>

<p>sdp_lat SDP one way latency</p>

<p>tcp_bw TCP streaming one way bandwidth</p>

<p>tcp_lat TCP one way latency</p>

<p>udp_bw UDP streaming one way bandwidth</p>

<p>udp_lat UDP one way latency</p>

<p>rc_bi_bw RC streaming two way bandwidth</p>

<p>rc_bw RC streaming one way bandwidth</p>

<p>rc_lat RC one way latency</p>

<p>uc_bi_bw UC streaming two way bandwidth</p>

<p>uc_bw UC streaming one way bandwidth</p>

<p>uc_lat UC one way latency</p>

<p>ud_bi_bw UD streaming two way bandwidth</p>

<p>ud_bw UD streaming one way bandwidth</p>

<p>ud_lat UD one way latency</p>

<p>xrc_bi_bw XRC streaming two way bandwidth</p>

<p>xrc_bw XRC streaming one way bandwidth</p>

<p>xrc_lat XRC one way latency</p>

<p>rc_rdma_read_bw RC RDMA read streaming one way
bandwidth</p>

<p>rc_rdma_read_lat RC RDMA read one way latency</p>

<p>rc_rdma_write_bw RC RDMA write streaming one way
bandwidth</p>

<p>rc_rdma_write_lat RC RDMA write one way latency</p>

<p>rc_rdma_write_poll_lat RC RDMA write one way polling
latency</p>

<p>uc_rdma_write_bw UC RDMA write streaming one way
bandwidth</p>

<p>uc_rdma_write_lat UC RDMA write one way latency</p>

<p>uc_rdma_write_poll_lat UC RDMA write one way polling
latency</p>

<p>rc_compare_swap_mr RC compare and swap messaging
rate</p>

<p>rc_fetch_add_mr RC fetch and add messaging rate</p>

<p>ver_rc_compare_swap Verify RC compare and swap</p>

<p>ver_rc_fetch_add Verify RC fetch and add</p>

<p>AUTHOR Written by Johann George.</p>

<p>BUGS None of the RDMA tests are available if qperf is
compiled without the RDMA libraries. None of the XRC tests
are available if qperf is com- piled without the XRC
extensions. The -f option is not yet implemented in many of
the tests.</p>

<p>qperf November 2012 QPERF(1)</p>
<hr>
</body>
</html>
