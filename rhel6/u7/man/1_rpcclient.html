<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:31:49 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RPCCLIENT(1) User Commands RPCCLIENT(1)</p>

<p>NAME rpcclient - tool for executing client side MS-RPC
functions</p>

<p>SYNOPSIS rpcclient [-A authfile] [-c &lt;command
string&gt;] [-d debuglevel] [-h] [-l logdir] [-N] [-s
&lt;smb config file&gt;] [-U username[%password]] [-W
workgroup] [-I destinationIP] {server}</p>

<p>DESCRIPTION This tool is part of the samba(7) suite.</p>

<p>rpcclient is a utility initially developed to test
MS-RPC functionality in Samba itself. It has undergone
several stages of development and stability. Many system
administrators have now written scripts around it to manage
Windows NT clients from their UNIX workstation.</p>

<p>OPTIONS server NetBIOS name of Server to which to
connect. The server can be any SMB/CIFS server. The name is
resolved using the name resolve order line from
smb.conf(5).</p>

<p>-c|--command=&lt;command string&gt; Execute semicolon
separated commands (listed below)</p>

<p>-I|--dest-ip IP-address IP address is the address of the
server to connect to. It should be specified in standard
&quot;a.b.c.d&quot; notation.</p>

<p>Normally the client would attempt to locate a named
SMB/CIFS server by looking it up via the NetBIOS name
resolution mechanism described above in the name resolve
order parameter above. Using this parameter will force the
client to assume that the server is on the machine with the
specified IP address and the NetBIOS name component of the
resource being connected to will be ignored.</p>

<p>There is no default for this parameter. If not supplied,
it will be determined automatically by the client as
described above.</p>

<p>-p|--port port This number is the TCP port number that
will be used when making connections to the server. The
standard (well-known) TCP port number for an SMB/CIFS server
is 139, which is the default.</p>

<p>-d|--debuglevel=level level is an integer from 0 to 10.
The default value if this parameter is not specified is
0.</p>

<p>The higher this value, the more detail will be logged to
the log files about the activities of the server. At level
0, only critical errors and serious warnings will be logged.
Level 1 is a reasonable level for day-to-day running - it
generates a small amount of information about operations
carried out.</p>

<p>Levels above 1 will generate considerable amounts of log
data, and should only be used when investigating a problem.
Levels above 3 are designed for use only by developers and
generate HUGE amounts of log data, most of which is
extremely cryptic.</p>

<p>Note that specifying this parameter here will override
the log level parameter in the smb.conf file.</p>

<p>-V|--version Prints the program version number.</p>

<p>-s|--configfile &lt;configuration file&gt; The file
specified contains the configuration details required by the
server. The information in this file includes
server-specific information such as what printcap file to
use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at compile
time.</p>

<p>-l|--log-basename=logdirectory Base directory name for
log/debug files. The extension &quot;.progname&quot; will be
appended (e.g. log.smbclient, log.smbd, etc...). The log
file is never removed by the client.</p>

<p>-N|--no-pass If specified, this parameter suppresses the
normal password prompt from the client to the user. This is
useful when accessing a service that does not require a
password.</p>

<p>Unless a password is specified on the command line or
this parameter is specified, the client will request a
password.</p>

<p>If a password is specified on the command line and this
option is also defined the password on the command line will
be silently ingnored and no password will be used.</p>

<p>-k|--kerberos Try to authenticate with kerberos. Only
useful in an Active Directory environment.</p>

<p>-C|--use-ccache Try to use the credentials cached by
winbind.</p>

<p>-A|--authentication-file=filename This option allows you
to specify a file from which to read the username and
password used in the connection. The format of the file
is</p>

<p>username = &lt;value&gt; password = &lt;value&gt; domain
= &lt;value&gt;</p>

<p>Make certain that the permissions on the file restrict
access from unwanted users.</p>

<p>-U|--user=username[%password] Sets the SMB username or
username and password.</p>

<p>If %password is not specified, the user will be
prompted. The client will first check the USER environment
variable, then the LOGNAME variable and if either exists,
the string is uppercased. If these environmental variables
are not found, the username GUEST is used.</p>

<p>A third option is to use a credentials file which
contains the plaintext of the username and password. This
option is mainly provided for scripts where the admin does
not wish to pass the credentials on the command line or via
environment variables. If this method is used, make certain
that the permissions on the file restrict access from
unwanted users. See the -A for more details.</p>

<p>Be cautious about including passwords in scripts. Also,
on many systems the command line of a running process may be
seen via the ps command. To be safe always allow rpcclient
to prompt for a password and type it in directly.</p>

<p>-n|--netbiosname &lt;primary NetBIOS name&gt; This
option allows you to override the NetBIOS name that Samba
uses for itself. This is identical to setting the netbios
name parameter in the smb.conf file. However, a command line
setting will take precedence over settings in smb.conf.</p>

<p>-i|--scope &lt;scope&gt; This specifies a NetBIOS scope
that nmblookup will use to communicate with when generating
NetBIOS names. For details on the use of NetBIOS scopes, see
rfc1001.txt and rfc1002.txt. NetBIOS scopes are very rarely
used, only set this parameter if you are the system
administrator in charge of all the NetBIOS systems you
communicate with.</p>

<p>-W|--workgroup=domain Set the SMB domain of the
username. This overrides the default domain which is the
domain defined in smb.conf. If the domain specified is the
same as the servers NetBIOS name, it causes the client to
log on using the servers local SAM (as opposed to the Domain
SAM).</p>

<p>-O|--socket-options socket options TCP socket options to
set on the client socket. See the socket options parameter
in the smb.conf manual page for the list of valid
options.</p>

<p>-h|--help Print a summary of command line options.</p>

<p>COMMANDS LSARPC lsaquery Query info policy</p>

<p>lookupsids Resolve a list of SIDs to usernames.</p>

<p>lookupnames Resolve a list of usernames to SIDs.</p>

<p>enumtrusts Enumerate trusted domains</p>

<p>enumprivs Enumerate privileges</p>

<p>getdispname Get the privilege name</p>

<p>lsaenumsid Enumerate the LSA SIDS</p>

<p>lsaenumprivsaccount Enumerate the privileges of an
SID</p>

<p>lsaenumacctrights Enumerate the rights of an SID</p>

<p>lsaenumacctwithright Enumerate accounts with a right</p>

<p>lsaaddacctrights Add rights to an account</p>

<p>lsaremoveacctrights Remove rights from an account</p>

<p>lsalookupprivvalue Get a privilege value given its
name</p>

<p>lsaquerysecobj Query LSA security object</p>

<p>LSARPC-DS dsroledominfo Get Primary Domain
Information</p>

<p>DFS</p>

<p>dfsexist Query DFS support</p>

<p>dfsadd Add a DFS share</p>

<p>dfsremove Remove a DFS share</p>

<p>dfsgetinfo Query DFS share info</p>

<p>dfsenum Enumerate dfs shares</p>

<p>REG shutdown Remote Shutdown</p>

<p>abortshutdown Abort Shutdown</p>

<p>SRVSVC srvinfo Server query info</p>

<p>netshareenum Enumerate shares</p>

<p>netfileenum Enumerate open files</p>

<p>netremotetod Fetch remote time of day</p>

<p>SAMR queryuser Query user info</p>

<p>querygroup Query group info</p>

<p>queryusergroups Query user groups</p>

<p>querygroupmem Query group membership</p>

<p>queryaliasmem Query alias membership</p>

<p>querydispinfo Query display info</p>

<p>querydominfo Query domain info</p>

<p>enumdomusers Enumerate domain users</p>

<p>enumdomgroups Enumerate domain groups</p>

<p>enumalsgroups Enumerate alias groups</p>

<p>createdomuser Create domain user</p>

<p>samlookupnames Look up names</p>

<p>samlookuprids Look up names</p>

<p>deletedomuser Delete domain user</p>

<p>samquerysecobj Query SAMR security object</p>

<p>getdompwinfo Retrieve domain password info</p>

<p>lookupdomain Look up domain</p>

<p>SPOOLSS adddriver &lt;arch&gt; &lt;config&gt;
[&lt;version&gt;] Execute an AddPrinterDriver() RPC to
install the printer driver information on the server. Note
that the driver files should already exist in the directory
returned by getdriverdir. Possible values for arch are the
same as those for the getdriverdir command. The config
parameter is defined as follows:</p>

<p>Long Printer Name: Driver File Name: Data File Name:
Config File Name: Help File Name: Language Monitor Name:
Default Data Type: Comma Separated list of Files</p>

<p>Any empty fields should be enter as the string
&quot;NULL&quot;.</p>

<p>Samba does not need to support the concept of Print
Monitors since these only apply to local printers whose
driver can make use of a bi-directional link for
communication. This field should be &quot;NULL&quot;. On a
remote NT print server, the Print Monitor for a driver must
already be installed prior to adding the driver or else the
RPC will fail.</p>

<p>The version parameter lets you specify the printer
driver version number. If omitted, the default driver
version for the specified architecture will be used. This
option can be used to upload Windows 2000 (version 3)
printer drivers.</p>

<p>addprinter &lt;printername&gt; &lt;sharename&gt;
&lt;drivername&gt; &lt;port&gt; Add a printer on the remote
server. This printer will be automatically shared. Be aware
that the printer driver must already be installed on the
server (see adddriver) and the portmust be a valid port name
(see enumports.</p>

<p>deldriver &lt;driver&gt; Delete the specified printer
driver for all architectures. This does not delete the
actual driver files from the server, only the entry from the
server&rsquo;s list of drivers.</p>

<p>deldriverex &lt;driver&gt; [architecture] [version]
Delete the specified printer driver including driver files.
You can limit this action to a specific architecture and a
specific version. If no architecure is given, all driver
files of that driver will be deleted.</p>

<p>enumdata Enumerate all printer setting data stored on
the server. On Windows NT clients, these values are stored
in the registry, while Samba servers store them in the
printers TDB. This command corresponds to the MS Platform
SDK GetPrinterData() function (* This command is currently
unimplemented).</p>

<p>enumdataex Enumerate printer data for a key</p>

<p>enumjobs &lt;printer&gt; List the jobs and status of a
given printer. This command corresponds to the MS Platform
SDK EnumJobs() function</p>

<p>enumkey Enumerate printer keys</p>

<p>enumports [level] Executes an EnumPorts() call using the
specified info level. Currently only info levels 1 and 2 are
supported.</p>

<p>enumdrivers [level] Execute an EnumPrinterDrivers()
call. This lists the various installed printer drivers for
all architectures. Refer to the MS Platform SDK
documentation for more details of the various flags and
calling options. Currently supported info levels are 1, 2,
and 3.</p>

<p>enumprinters [level] Execute an EnumPrinters() call.
This lists the various installed and share printers. Refer
to the MS Platform SDK documentation for more details of the
various flags and calling options. Currently supported info
levels are 1, 2 and 5.</p>

<p>getdata &lt;printername&gt; &lt;valuename;&gt; Retrieve
the data for a given printer setting. See the enumdata
command for more information. This command corresponds to
the GetPrinterData() MS Platform SDK function.</p>

<p>getdataex Get printer driver data with keyname</p>

<p>getdriver &lt;printername&gt; Retrieve the printer
driver information (such as driver file, config file,
dependent files, etc...) for the given printer. This command
corresponds to the GetPrinterDriver() MS Platform SDK
function. Currently info level 1, 2, and 3 are
supported.</p>

<p>getdriverdir &lt;arch&gt; Execute a
GetPrinterDriverDirectory() RPC to retrieve the SMB share
name and subdirectory for storing printer driver files for a
given architecture. Possible values for arch are
&quot;Windows 4.0&quot; (for Windows 95/98), &quot;Windows
NT x86&quot;, &quot;Windows NT PowerPC&quot;, &quot;Windows
Alpha_AXP&quot;, and &quot;Windows NT R4000&quot;.</p>

<p>getprinter &lt;printername&gt; Retrieve the current
printer information. This command corresponds to the
GetPrinter() MS Platform SDK function.</p>

<p>getprintprocdir Get print processor directory</p>

<p>openprinter &lt;printername&gt; Execute an
OpenPrinterEx() and ClosePrinter() RPC against a given
printer.</p>

<p>setdriver &lt;printername&gt; &lt;drivername&gt; Execute
a SetPrinter() command to update the printer driver
associated with an installed printer. The printer driver
must already be correctly installed on the print server.</p>

<p>See also the enumprinters and enumdrivers commands for
obtaining a list of of installed printers and drivers.</p>

<p>addform Add form</p>

<p>setform Set form</p>

<p>getform Get form</p>

<p>deleteform Delete form</p>

<p>enumforms Enumerate form</p>

<p>setprinter Set printer comment</p>

<p>setprinterdata Set REG_SZ printer data</p>

<p>setprintername &lt;printername&gt;
&lt;newprintername&gt; Set printer name</p>

<p>rffpcnex Rffpcnex test</p>

<p>NETLOGON logonctrl2 Logon Control 2</p>

<p>logonctrl Logon Control</p>

<p>samsync Sam Synchronisation</p>

<p>samdeltas Query Sam Deltas</p>

<p>samlogon Sam Logon</p>

<p>GENERAL COMMANDS debuglevel Set the current debug level
used to log information.</p>

<p>help (?) Print a listing of all known commands or
extended help on a particular command.</p>

<p>quit (exit) Exit rpcclient.</p>

<p>BUGS rpcclient is designed as a developer testing tool
and may not be robust in certain areas (such as command line
parsing). It has been known to generate a core dump upon
failures when invalid parameters where passed to the
interpreter.</p>

<p>From Luke Leighton&rsquo;s original rpcclient man
page:</p>

<p>WARNING! The MSRPC over SMB code has been developed from
examining Network traces. No documentation is available from
the original creators (Microsoft) on how MSRPC over SMB
works, or how the individual MSRPC services work.
Microsoft&rsquo;s implementation of these services has been
demonstrated (and reported) to be... a bit flaky in
places.</p>

<p>The development of Samba&rsquo;s implementation is also
a bit rough, and as more of the services are understood, it
can even result in versions of smbd(8) and rpcclient(1) that
are incompatible for some commands or services.
Additionally, the developers are sending reports to
Microsoft, and problems found or reported to Microsoft are
fixed in Service Packs, which may result in
incompatibilities.</p>

<p>VERSION This man page is correct for version 3 of the
Samba suite.</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>The original rpcclient man page was written by Matthew
Geddes, Luke Kenneth Casson Leighton, and rewritten by
Gerald Carter. The conversion to DocBook for Samba 2.2 was
done by Gerald Carter. The conversion to DocBook XML 4.2 for
Samba 3.0 was done by Alexander Bokovoy.</p>

<p>Samba 3.6 09/18/2013 RPCCLIENT(1)</p>
<hr>
</body>
</html>
