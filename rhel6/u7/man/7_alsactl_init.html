<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:04:09 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ALSACTL_INIT(7) alsactl init ALSACTL_INIT(7)</p>

<p>NAME alsactl_init - alsa control management -
initialization</p>

<p>DESCRIPTION &quot;alsactl init&quot; provides soundcard
specific initialization.</p>

<p>CONFIGURATION All &quot;alsactl init&quot; configuration
files are placed in /usr/share/alsa/init/ directory. The top
level configuration file is /usr/share/alsa/init/00main. The
default top-level file can be also specified using -i or
--initfile parameter for the alsactl tool. Every file
consists of a set of lines of text. All empty lines or lines
beginning with &acute;#&acute; will be ignored.</p>

<p>Rules files The &quot;alsactl init&quot; rules are read
from the files located in the /usr/share/alsa/init/*. The
top level configuration file is /usr/share/alsa/init/00main.
Every line in the rules file contains at least one key value
pair. There are two kind of keys, match and assignment keys.
If all match keys are matching against its value, the rule
gets applied and the assign keys get the specified value
assigned.</p>

<p>A rule may consists of a list of one or more key value
pairs separated by a comma. Each key has a distinct
operation, depending on the used operator. Valid operators
are:</p>

<p>== Compare for equality.</p>

<p>!= Compare for non-equality.</p>

<p>= Assign a value to a key. Keys that represent a list,
are reset and only this single value is assigned.</p>

<p>+= Add the value to a key that holds a list of
entries.</p>

<p>:= Assign a value to a key finally; disallow any later
changes, which may be used to prevent changes by any later
rules.</p>

<p>The following key names can be used to match against
device properties:</p>

<p>CARDINDEX Match the card index of the ALSA driver.</p>

<p>CTL{attribute} Set or test universal control attribute.
Possible attributes:</p>

<p>numid Numeric control identification.</p>

<p>iface, interface Control interface name (CARD, HWEDEP,
MIXER, PCM, RAWMIDI, TIMER, SEQUENCER)</p>

<p>subdev, subdevice Subdevice number.</p>

<p>name Control name</p>

<p>index Control index</p>

<p>type Control type (BOOLEAN, INTEGER, INTEGER64,
ENUMERATED, BYTES, IEC958)</p>

<p>attr, attribute Attributes (stored in a string - use
match characters * and ?):</p>

<p>r control is readable</p>

<p>w control is writable</p>

<p>v control is volatile</p>

<p>i control is inactive</p>

<p>l control is locked</p>

<p>R control is TLV readable</p>

<p>W control is TLV writable</p>

<p>C control is TLV commandable</p>

<p>o process is owner of this control</p>

<p>u control created in user space</p>

<p>owner Control owner process PID number</p>

<p>count Control count of values</p>

<p>min Value range - minimum value</p>

<p>max Value range - maximum value</p>

<p>step Value range - step value</p>

<p>dBmin Value range - minimum dB value</p>

<p>dBmax Value range - maximum dB value</p>

<p>items Enumerated value - number of text items</p>

<p>enums Enumerated value - list of text names stored
between &acute;|&acute; character</p>

<p>value Value of control stored to a string delimited by
comma (,).</p>

<p>do_search Search for a control. Value &quot;1&quot; is
returned if a control was found. The CTL{name} key might
contain match characters * and ?. An control index might be
specified as first argument starting from zero (e.g.
CTL{do_search 2}=&quot;1&quot;).</p>

<p>do_count Search for a controls and return total count of
matched ones. The CTL{name} key might contain match
characters * and ?.</p>

<p>CONFIG{sysfs_device} The relative path to sysfs
subsystem specifying the root directory of a soundcard
device. Usually, it should be set to
&quot;/class/sound/card$cardinfo{card}/device&quot;.</p>

<p>ATTR{filename} Match sysfs attribute values of the
soundcard device. The relative path to sysfs tree must be
defined by CONFIG{sysfs_device} key. Trailing whitespace in
the attribute values is ignored, if the specified match
value does not contain trailing whitespace itself. Depending
on the type of operator, this key is also used to set the
value of a sysfs attribute.</p>

<p>ENV{key} Match against the value of an environment
variable. Up to five ENV keys can be specified per rule.
Depending on the type of operator, this key is also used to
export a variable to the environment.</p>

<p>PROGRAM Execute external program. The key is true, if
the program returns without exit code zero. The whole event
environment is available to the executed program. The
program&acute;s output printed to stdout is available for
the RESULT key.</p>

<p>Several buildin commands are available:</p>

<p>__ctl_search Search for a control. The CTL{name} key
might contain match characters * and ?. An control index
might be specified as first argument starting from zero
(e.g. PROGRAM=&quot;__ctl_search 2&quot;).</p>

<p>__ctl_count Search for a controls and return total count
of matched ones. The CTL{name} key might contain match
characters * and ?.</p>

<p>RESULT Match the returned string of the last PROGRAM
call. This key can be used in the same or in any later rule
after a PROGRAM call.</p>

<p>Most of the fields support a shell style pattern
matching. The following pattern characters are
supported:</p>

<p>* Matches zero, or any number of characters.</p>

<p>? Matches any single character.</p>

<p>[] Matches any single character specified within the
brackets. For example, the pattern string
&acute;tty[SR]&acute; would match either &acute;ttyS&acute;
or &acute;ttyR&acute;. Ranges are also supported within this
match with the &acute;-&acute; character. For example, to
match on the range of all digits, the pattern [0-9] would be
used. If the first character following the &acute;[&acute;
is a &acute;!&acute;, any characters not enclosed are
matched.</p>

<p>The following keys can get values assigned:</p>

<p>CTL{numid}, CTL{iface}, CTL{device}, CTL{subdev},
CTL{name}, CTL{index}, Select universal control element.</p>

<p>CTL{value} Value is set (written) also to
soundcard&acute;s control device and RESULT key is set to
errno code. The result of set operation is always true (it
means continue with next key on line).</p>

<p>CTL{values} Value is set (written) also to
soundcard&acute;s control device (all control values are set
to specified value) and RESULT key is set to errno code. The
result of set operation is always true (it means continue
with next key on line).</p>

<p>CTL{write} Value is set (written) also to
soundcard&acute;s control device (all control values are set
to specified value). The result of set operation is true
when operation succeed (it means continue with next key on
line).</p>

<p>ENV{key} Export a variable to the environment. Depending
on the type of operator, this key is also to match against
an environment variable.</p>

<p>RESULT Set RESULT variable. Note that PROGRAM also sets
this variable, but setting this variable manually might be
useful to change code execution order (included files).</p>

<p>LABEL Named label where a GOTO can jump to.</p>

<p>GOTO Jumps to the next LABEL with a matching name. The
goto cannot jump backward.</p>

<p>INCLUDE Include the specified filename or files in
specified directory.</p>

<p>When a directory is specified, only the files with the
extension &quot;.conf&quot; are read. Also they are read in
the alphabetical order. Thus it&acute;s highly recommended
to use some number prefix (e.g.
&quot;01-something.conf&quot;) to assure the order of
execucions.</p>

<p>ACCESS Check if specified file or directory exists</p>

<p>CONFIG{sysfs_device} The relative path to sysfs
subsystem specifying the root directory of a soundcard
device. Usually, it should be set to
&quot;/class/sound/card$cardinfo{card}/device&quot;.</p>

<p>PRINT PRINT value to stdout.</p>

<p>ERROR PRINT value to stderr.</p>

<p>EXIT Exit immediately and set program exit code to value
(should be integer). If value is &quot;return&quot; string,
parser leaves current included file and returns to parent
configuration file.</p>

<p>The PROGRAM, RESULT, CTL{value}, PRINT, ERROR, EXIT,
CONFIG{} fields support simple printf-like string
substitutions. It allows the use of the complete environment
set by earlier matching rules. For all other fields,
substitutions are applied while the individual rule is being
processed. The available substitutions are:</p>

<p>$cardinfo{attribute}, %i{attribute} See CARDINFO{} for
more details.</p>

<p>$ctl{attribute}, %C{attribute} See CTL{} for more
details.</p>

<p>$attr{file}, %s{file} The value of a sysfs attribute
found at the device, where all keys of the rule have
matched. If the attribute is a symlink, the last element of
the symlink target is returned as the value.</p>

<p>$env{key}, %E{key} The value of an environment
variable.</p>

<p>$result, %c The string returned by the external program
requested with PROGRAM. A single part of the string,
separated by a space character may be selected by specifying
the part number as an attribute: %c{N}. If the number is
followed by the &acute;+&acute; char this part plus all
remaining parts of the result string are substituted:
%c{N+}</p>

<p>$sysfsroot, %r Root directory where sysfs file-system is
mounted. Ususally, this value is just &quot;/sys&quot;.</p>

<p>$config{key}, %g{key} The value of a configuration
variable. See CONFIG{} for more details.</p>

<p>%% The &acute;%&acute; character itself.</p>

<p>$$ The &acute;$&acute; character itself.</p>

<p>The count of characters to be substituted may be limited
by specifying the format length value. For example,
&acute;%3s{file}&acute; will only insert the first three
characters of the sysfs attribute</p>

<p>AUTHOR Written by Jaroslav Kysela perex@perex.cz</p>

<p>Some portions are written by Greg Kroah-Hartman
greg@kroah.com and Kay Sievers kay.sievers@vrfy.org.</p>

<p>SEE ALSO alsactl(1)</p>

<p>alsactl July 2008 ALSACTL_INIT(7)</p>
<hr>
</body>
</html>
