<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:47:46 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>XmResolvePartOffsets(library call)
XmResolvePartOffsets(library call)</p>

<p>NAME XmResolvePartOffsets A function that allows writing
of upward-compat- ible applications and widgets</p>

<p>SYNOPSIS #include &lt;Xm/Xm.h&gt; void
XmResolvePartOffsets( WidgetClass widget_class, XmOffsetPtr
* offset);</p>

<p>DESCRIPTION The use of offset records requires one extra
global variable per widget class. The variable consists of a
pointer to an array of offsets into the widget record for
each part of the widget structure. The XmRe-
solvePartOffsets function allocates the offset records
needed by an application to guarantee upward-compatible
access to widget instance records by applications and
widgets. These offset records are used by the widget to
access all of the widgets variables. A widget needs to take
the steps described in the following paragraphs.</p>

<p>Instead of creating a resource list, the widget creates
an offset resource list. To accomplish this, use the
XmPartResource structure and the XmPartOffset macro. The
XmPartResource data structure looks just like a resource
list, but instead of having one integer for its offset, it
has two shorts. This structure is put into the class record
as if it were a normal resource list. Instead of using
XtOffset for the offset, the widget uses XmPartOffset.</p>

<p>XmPartResource resources[] = { { BarNxyz, BarCXyz,
XmRBoolean, sizeof(Boolean), XmPartOffset(Bar,xyz),
XmRImmediate, (XtPointer)False } };</p>

<p>Instead of putting the widget size in the class record,
the widget puts the widget part size in the same field.</p>

<p>Instead of putting XtVersion in the class record, the
widget puts XtVersionDontCheck in the class record.</p>

<p>The widget defines a variable, of type XmOffsetPtr, to
point to the offset record. This can be part of the widgets
class record or a sep- arate global variable.</p>

<p>In class initialization, the widget calls
XmResolvePartOffsets, passing it a pointer to contain the
address of the offset record and the class record. This does
several things:</p>

<p>&middot; Adds the superclass (which, by definition, has
already been ini- tialized) size field to the part size
field</p>

<p>&middot; Allocates an array based upon the number of
superclasses</p>

<p>&middot; Fills in the offsets of all the widget parts
with the appropriate values, determined by examining the
size fields of all superclass records</p>

<p>&middot; Uses the part offset array to modify the offset
entries in the resource list to be real offsets, in
place</p>

<p>The widget defines a constant that will be the index to
its part structure in the offsets array. The value should be
1 greater than the index of the widgets superclass.
Constants defined for all Xm widgets can be found in
XmP.h.</p>

<p>#define BarIndex (XmBulletinBIndex + 1)</p>

<p>Instead of accessing fields directly, the widget must
always go through the offset table. The XmField macro helps
you access these fields. Because the XmPartOffset and
XmField macros concatenate things together, you must ensure
that there is no space after the part argu- ment. For
example, the following macros do not work because of the
space after the part (Label) argument:</p>

<p>XmField(w, offset, Label, text, char *)
XmPartOffset(Label, text)</p>

<p>Therefore, you must not have any spaces after the part
(Label) argu- ment, as illustrated here:</p>

<p>XmField(w, offset, Label, text, char *)</p>

<p>You can define macros for each field to make this
easier. Assume an integer field xyz:</p>

<p>#define BarXyz(w) (*(int *)(((char *) w) +
offset[BarIndex] + XtOffset(BarPart,xyz)))</p>

<p>The parameters for XmResolvePartOffsets are</p>

<p>widget_class Specifies the widget class pointer for the
created widget</p>

<p>offset Returns the offset record</p>

<p>RELATED INFORMATION XmResolveAllPartOffsets(3).</p>

<p>XmResolvePartOffsets(library call)</p>
<hr>
</body>
</html>
