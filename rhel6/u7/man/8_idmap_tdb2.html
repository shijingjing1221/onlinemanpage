<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:18:59 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IDMAP_TDB2(8) System Administration tools
IDMAP_TDB2(8)</p>

<p>NAME idmap_tdb2 - Samba&rsquo;s idmap_tdb2 Backend for
Winbind</p>

<p>DESCRIPTION The idmap_tdb2 plugin is a substitute for
the default idmap_tdb backend used by winbindd for storing
SID/uid/gid mapping tables in clustered environments with
Samba and CTDB.</p>

<p>In contrast to read only backends like idmap_rid, it is
an allocating backend: This means that it needs to allocate
new user and group IDs in order to create new mappings.</p>

<p>IDMAP OPTIONS range = low - high Defines the available
matching uid and gid range for which the backend is
authoritative.</p>

<p>script This option can be used to configure an external
program for performing id mappings instead of using the tdb
counter. The mappings are then stored int tdb2 idmap
database. For details see the section on IDMAP SCRIPT
below.</p>

<p>IDMAP SCRIPT The tdb2 idmap backend supports an external
program for performing id mappings through the smb.conf
option idmap config * : script or its deprecated legacy form
idmap : script.</p>

<p>The mappings obtained by the script are then stored in
the idmap tdb2 database instead of mappings created by the
incrementing id counters. It is therefore important that the
script covers the complete range of SIDs that can be passed
in for SID to Unix ID mapping, since otherwise SIDs unmapped
by the script might get mapped to IDs that had previously
been mapped by the script.</p>

<p>The script should accept the following command line
options.</p>

<p>SIDTOID S-1-xxxx IDTOSID UID xxxx IDTOSID GID xxxx</p>

<p>And it should return one of the following responses as a
single line of text.</p>

<p>UID:yyyy GID:yyyy SID:yyyy ERR:yyyy</p>

<p>EXAMPLES This example shows how tdb2 is used as a the
default idmap backend.</p>

<p>[global] idmap config * : backend = tdb2 idmap config *
: range = 1000000-2000000</p>

<p>This example shows how tdb2 is used as a the default
idmap backend using an external program via the script
parameter:</p>

<p>[global] idmap config * : backend = tdb2 idmap config *
: range = 1000000-2000000 idmap config * : script =
/usr/local/samba/bin/idmap_script.sh</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>Samba 3.6 09/18/2013 IDMAP_TDB2(8)</p>
<hr>
</body>
</html>
