<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:45:59 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>xfsinvutil(8) xfsinvutil(8)</p>

<p>NAME xfsinvutil - xfsdump inventory database checking
and pruning utility</p>

<p>SYNOPSIS xfsinvutil [-F|-i] [-m media_label] -M
mount_point mm/dd/yyyy xfsinvutil [-F|-i] [-m media_label]
-u UUID mm/dd/yyyy xfsinvutil -i xfsinvutil -C</p>

<p>DESCRIPTION xfsdump maintains an online dump inventory
in /var/lib/xfsdump/inven- tory. The -I option of xfsdump
displays the inventory contents hierar- chically. The levels
of the hierarchy are: filesystem, dump session, stream, and
media file.</p>

<p>xfsinvutil is a utility to check this inventory database
for consis- tency, to remove entries of dump sessions which
may no longer be of relevance, and to browse the contents of
the inventory.</p>

<p>The following command line options are available:</p>

<p>-F Dont prompt the operator. When xfsinvutil encounters
a matching dump session, xfsinvutil will normally ask the
operator for per- mission to delete the entry. With this
option the deletion is per- formed, no questions asked.</p>

<p>-i Interactive mode. Causes xfsinvutil to run in a mode
that will allow the operator to browse and modify the
contents of the inven- tory. Please refer to the Interactive
Mode section below for more information.</p>

<p>-M mount_point mm/dd/yyyy Prunes dump sessions
identified by the given mount point which were created prior
to the specified date. Optionally -m may be be specified to
further limit the matching dump sessions by media label.
xfsinvutil will prompt the operator prior to pruning a dump
session unless the -F or -i options are given.</p>

<p>-u UUID mm/dd/yyyy Like -M, except the matching
filesystem is specified using its universally unique
identifier (UUID) instead of its mount point.</p>

<p>-m media_label If specified, only sessions with at least
one media file whose label matches this value will be
eligible for pruning. This restriction is in addition to
those imposed by the date and the -M or -u options. This
option allows the pruning of all inventory references to
media which may have been overwritten or lost. Note that
this option does not apply to sessions with no media
files.</p>

<p>-C With this option, xfsinvutil performs consistency
checks for all entries in the inventory database. It fixes
any problems found. If no consistent entries are found , the
corresponding inventory database file is removed.</p>

<p>Interactive Mode When run with -i, xfsinvutil will
present the operator with a hierar- chical representation of
the xfsdump inventory. In this mode, the operator can use
the arrow keys (or the h j k l keys) to navigate the
inventory and also use the following keys and
functionality:</p>

<p>+ Expand a branch of the tree.</p>

<p>- Collapse a branch of the tree.</p>

<p>* Fully expand a branch of the tree.</p>

<p>% Fully collapse a branch of the tree.</p>

<p>h Move selection to the parent entry.</p>

<p>l Move selection to the child entry.</p>

<p>j Move selection to next entry.</p>

<p>k Move selection to previous entry.</p>

<p>d Mark the current record, and all sub-records, to be
deleted.</p>

<p>u Clear the current record and all parent records from
being deleted.</p>

<p>i Import another xfsdump inventory.</p>

<p>? Show help window.</p>

<p>x Commit any changes made to the inventory, and exit the
program.</p>

<p>q Exit the program without committing any changes to the
inventory.</p>

<p>Inventories from other hosts can be imported to create a
larger common inventory. It is recommended that the contents
of /var/lib/xfs- dump/inventory on the remote host be copied
to a temporary local direc- tory prior to running
xfsinvutil. When xfsinvutil is run in interac- tive mode,
and the operator hits i, they will be prompted for the path
to the inventory to be imported. xfsinvutil will then add
the contents of the imported inventory to the main window,
and all entries will be marked as imported. The operator can
then delete any of these entries that are not to be
imported. When the operator commits the changes, xfsinvutil
will import any entries which were not marked as deleted.
Deleted entries are not actually deleted from the original
imported inventory.</p>

<p>NOTES Inventory Each dump session updates an inventory
database in /var/lib/xfs- dump/inventory. xfsdump uses the
inventory to determine the base of incremental and resumed
dumps.</p>

<p>This database can be displayed by invoking xfsdump with
the -I option. The display uses tabbed indentation to
present the inventory hierarchi- cally. The first level is
filesystem. The second level is session. The third level is
media stream (currently only one stream is sup- ported). The
fourth level lists the media files sequentially composing
the stream.</p>

<p>FILES /var/lib/xfsdump/inventory dump inventory
database</p>

<p>SEE ALSO xfsdump(8), xfsrestore(8).</p>

<p>xfsinvutil(8)</p>
<hr>
</body>
</html>
