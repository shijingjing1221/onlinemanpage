<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:15:03 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GETNAMEINFO(3P) POSIX Programmer s Manual
GETNAMEINFO(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME getnameinfo - get name information</p>

<p>SYNOPSIS #include &lt;sys/socket.h&gt; #include
&lt;netdb.h&gt;</p>

<p>int getnameinfo(const struct sockaddr *restrict sa,
socklen_t salen, char *restrict node, socklen_t nodelen,
char *restrict service, socklen_t servicelen, int
flags);</p>

<p>DESCRIPTION The getnameinfo() function shall translate a
socket address to a node name and service location, all of
which are defined as in getad- drinfo().</p>

<p>The sa argument points to a socket address structure to
be translated.</p>

<p>If the socket address structure contains an IPv4-mapped
IPv6 address or an IPv4-compatible IPv6 address, the
implementation shall extract the embedded IPv4 address and
lookup the node name for that IPv4 address.</p>

<p>Note: The IPv6 unspecified address ( &quot;::&quot; )
and the IPv6 loopback address ( &quot;::1&quot; ) are not
IPv4-compatible addresses. If the address is the IPv6
unspecified address ( &quot;::&quot; ), a lookup is not
performed, and the [EAI_NONAME] error is returned.</p>

<p>If the node argument is non-NULL and the nodelen
argument is non-zero, then the node argument points to a
buffer able to contain up to nodelen characters that
receives the node name as a null-terminated string. If the
node argument is NULL or the nodelen argument is zero, the
node name shall not be returned. If the nodes name cannot be
located, the numeric form of the address contained in the
socket address structure pointed to by the sa argument is
returned instead of its name.</p>

<p>If the service argument is non-NULL and the servicelen
argument is non- zero, then the service argument points to a
buffer able to contain up to servicelen bytes that receives
the service name as a null-terminated string. If the service
argument is NULL or the servicelen argument is zero, the
service name shall not be returned. If the services name
cannot be located, the numeric form of the service address
(for exam- ple, its port number) shall be returned instead
of its name.</p>

<p>The flags argument is a flag that changes the default
actions of the function. By default the fully-qualified
domain name (FQDN) for the host shall be returned, but:</p>

<p>* If the flag bit NI_NOFQDN is set, only the node name
portion of the FQDN shall be returned for local hosts.</p>

<p>* If the flag bit NI_NUMERICHOST is set, the numeric
form of the address contained in the socket address
structure pointed to by the sa argument shall be returned
instead of its name, under all circumstances.</p>

<p>* If the flag bit NI_NAMEREQD is set, an error shall be
returned if the hosts name cannot be located.</p>

<p>* If the flag bit NI_NUMERICSERV is set, the numeric
form of the ser- vice address shall be returned (for
example, its port number) instead of its name, under all
circumstances.</p>

<p>* If the flag bit NI_NUMERICSCOPE is set, the numeric
form of the scope identifier shall be returned (for example,
interface index) instead of its name. This flag shall be
ignored if the sa argument is not an IPv6 address.</p>

<p>* If the flag bit NI_DGRAM is set, this indicates that
the service is a datagram service (SOCK_DGRAM). The default
behavior shall assume that the service is a stream service
(SOCK_STREAM).</p>

<p>Notes:</p>

<p>1. The two NI_NUMERICxxx flags are required to support
the -n flag that many commands provide.</p>

<p>2. The NI_DGRAM flag is required for the few AF_INET and
AF_INET6 port numbers (for example, [512,514]) that repre-
sent different services for UDP and TCP.</p>

<p>The getnameinfo() function shall be thread-safe.</p>

<p>RETURN VALUE A zero return value for getnameinfo()
indicates successful completion; a non-zero return value
indicates failure. The possible values for the failures are
listed in the ERRORS section.</p>

<p>Upon successful completion, getnameinfo() shall return
the node and service names, if requested, in the buffers
provided. The returned names are always null-terminated
strings.</p>

<p>ERRORS The getnameinfo() function shall fail and return
the corresponding value if:</p>

<p>EAI_AGAIN The name could not be resolved at this time.
Future attempts may succeed.</p>

<p>EAI_BADFLAGS</p>

<p>The flags had an invalid value.</p>

<p>EAI_FAIL A non-recoverable error occurred.</p>

<p>EAI_FAMILY The address family was not recognized or the
address length was invalid for the specified family.</p>

<p>EAI_MEMORY There was a memory allocation failure.</p>

<p>EAI_NONAME The name does not resolve for the supplied
parameters.</p>

<p>NI_NAMEREQD is set and the hosts name cannot be located,
or both node- name and servname were null.</p>

<p>EAI_OVERFLOW</p>

<p>An argument buffer overflowed. The buffer pointed to by
the node argument or the service argument was too small.</p>

<p>EAI_SYSTEM A system error occurred. The error code can
be found in errno.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES None.</p>

<p>APPLICATION USAGE If the returned values are to be used
as part of any further name reso- lution (for example,
passed to getaddrinfo()), applications should pro- vide
buffers large enough to store any result possible on the
system.</p>

<p>Given the IPv4-mapped IPv6 address
&quot;::ffff:1.2.3.4&quot;, the implementation performs a
lookup as if the socket address structure contains the IPv4
address &quot;1.2.3.4&quot; .</p>

<p>RATIONALE None.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO gai_strerror(), getaddrinfo(), getservbyname(),
inet_ntop(), socket(), the Base Definitions volume of IEEE
Std 1003.1-2001, &lt;netdb.h&gt;, &lt;sys/socket.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 GETNAMEINFO(3P)</p>
<hr>
</body>
</html>
