<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:20 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PAPI_get_opt(3) PAPI PAPI_get_opt(3)</p>

<p>NAME PAPI_get_opt - get PAPI library or event set
options PAPI_get_cmp_opt - get component specific PAPI
options PAPI_set_opt - set PAPI library or event set options
PAPIF_get_clockrate - get the clockrate (Fortran only)
PAPIF_get_domain - get the counting domain (Fortran only)
PAPIF_get_granularity - get the counting granularity
(Fortran only) PAPIF_get_preload - get the library preload
setting (Fortran only)</p>

<p>SYNOPSIS C Interface #include &lt;papi.h&gt; int
PAPI_get_opt(int option, PAPI_option_t *ptr); int
PAPI_get_cmp_opt(int option, PAPI_option_t *ptr, int cidx);
int PAPI_set_opt(int option, PAPI_option_t *ptr); Fortran
Interface #include fpapi.h PAPIF_get_clockrate(C_INT
clockrate) PAPIF_get_domain(C_INT EventSet, C_INT domain,
C_INT mode, C_INT check) PAPIF_get_granularity(C_INT
EventSet, C_INT granularity, C_INT mode, C_INT check)
PAPIF_get_preload(C_STRING preload, C_INT check)</p>

<p>DESCRIPTION PAPI_get_opt() and PAPI_set_opt() query or
change the options of the PAPI library or a specific event
set created by PAPI_cre-
ate_eventset(3).Someoptionsmayrequirethattheeventsetbe bound
to a com- ponent before they can execute successfully. This
can be done either by adding an event or by explicitly
calling PAPI_assign_eventset_compo- nent(3).</p>

<p>The C interface for these functions passes a pointer to
the PAPI_option_t structure. Not all options require or
return information in this structure, and not all options
are implemented for both get and set. Some options require a
component index to be provided. These options are handled
explicitly by the PAPI_get_cmp_opt() call for get and
implicitly through the option structure for set.</p>

<p>The Fortran interface is a series of calls implementing
various subsets of the C interface. Not all options in C are
available in Fortran.</p>

<p>NOTE: Some options, such as PAPI_DOMAIN and
PAPI_MULTIPLEX, are also available as separate entry points
in both C and Fortran.</p>

<p>The reader is urged to see the example code in the PAPI
distribution for usage of PAPI_get_opt. The file papi.h
contains definitions for the structures unioned in the
PAPI_option_t structure.</p>

<p>ARGUMENTS option -- is an input parameter describing the
course of action. Possi- ble values are defined in papi.h
and briefly described in the table below. The Fortran calls
are implementations of specific options.</p>

<p>ptr -- is a pointer to a structure that acts as both an
input and out- put parameter. It is defined in papi.h and
below.</p>

<p>cidx -- An integer identifier for a component. By
convention, component 0 is always the cpu component.</p>

<p>EventSet -- input; a reference to an EventSetInfo
structure</p>

<p>clockrate -- output; cycle time of this CPU in MHz;
*may* be an esti- mate generated at init time with a quick
timing routine</p>

<p>domain -- output; execution domain for which events are
counted</p>

<p>granularity -- output; execution granularity for which
events are counted</p>

<p>mode -- input; determines if domain or granularity are
default or for the current event set</p>

<p>preload -- output; environment variable string for
preloading libraries</p>

<p>OPTIONS TABLE
+--------------------+-----------------------------------------------+
() | | () | | | | | | | | | | Predefined name | Explanation
|
+--------------------+-----------------------------------------------+
| General information requests |
+--------------------+-----------------------------------------------+
|PAPI_CLOCKRATE | Get clockrate in MHz. |
+--------------------+-----------------------------------------------+
|PAPI_MAX_CPUS | Get number of CPUs. |
+--------------------+-----------------------------------------------+
|PAPI_MAX_HWCTRS | Get number of counters. Requires a
component | | | index. |
+--------------------+-----------------------------------------------+
|PAPI_EXEINFO | Get Executable addresses for text/data/bss.
|
+--------------------+-----------------------------------------------+
|PAPI_HWINFO | Get information about the hardware. |
+--------------------+-----------------------------------------------+
|PAPI_SHLIBINFO | Get shared library information used by the
| | | program. |
+--------------------+-----------------------------------------------+
|PAPI_COMPONENTINFO | Get the PAPI features the specified
component | | | supports. Requires a component index. |
+--------------------+-----------------------------------------------+
|PAPI_LIB_VERSION | Get the full PAPI version of the library
|
+--------------------+-----------------------------------------------+
|PAPI_PRELOAD | Get LD_PRELOAD environment equivalent. |
+--------------------+-----------------------------------------------+
| Defaults for the global library |
+--------------------+-----------------------------------------------+
|PAPI_DEFDOM | Get/Set default counting domain for newly | |
| created event sets. Requires a component | | | index. |
+--------------------+-----------------------------------------------+
|PAPI_DEFGRN | Get/Set default counting granularity. | | |
Requires a component index. |
+--------------------+-----------------------------------------------+
|PAPI_DEBUG | Get/Set the PAPI debug state and the debug | |
| handler. The available debug states are | | | defined in
papi.h. The debug state is avail- | | | able in
ptr-&gt;debug.level. The debug handler | | | is available in
ptr-&gt;debug.handler. For | | | information regarding the
behavior of the | | | handler, please see the man page for |
| | PAPI_set_debug. |
+--------------------+-----------------------------------------------+
| Multiplexing control |
+--------------------+-----------------------------------------------+
|PAPI_MULTIPLEX | Get/Set options for multiplexing. |
+--------------------+-----------------------------------------------+
|PAPI_MAX_MPX_CTRS | Get maximum number of multiplexing
counters. | | | Requires a component index. |
+--------------------+-----------------------------------------------+
|PAPI_DEF_MPX_USEC | Get/Set the sampling time slice in
microsec- | | | onds for multiplexing. |
+--------------------+-----------------------------------------------+
| Manipulating individual event sets |
+--------------------+-----------------------------------------------+
|PAPI_ATTACH | Get thread or process id to which event set |
| | is attached. Returns TRUE if currently | | | attached.
Set event set specified in | | |
ptr-&gt;ptr-&gt;attach.eventset to be attached to | | |
thread or process id specified in in | | |
ptr-&gt;attach.tid |
+--------------------+-----------------------------------------------+
|PAPI_DETACH | Get thread or process id to which event set |
| | is attached. Returns TRUE if currently | | | detached.
Set event set specified in | | |
ptr-&gt;ptr-&gt;attach.eventset to be detached from | | |
any thread or process id. |
+--------------------+-----------------------------------------------+
|PAPI_DOMAIN | Get/Set domain for a single event set. The |
| | event set is specified in | | | ptr-&gt;domain.eventset.
Will error if eventset | | | is not bound to a component. |
+--------------------+-----------------------------------------------+
|PAPI_GRANUL | Get/Set granularity for a single event set. |
| | The event set is specified in ptr-&gt;granular- | | |
ity.eventset. Will error if eventset is not | | | bound to a
component. |
+--------------------+-----------------------------------------------+
| Platform specific options |
+--------------------+-----------------------------------------------+
|PAPI_DATA_ADDRESS | Set data address range to restrict
event | | | counting for event set specified in | | |
ptr-&gt;addr.eventset. Starting and ending | | | addresses
are specified in ptr-&gt;addr.start | | | and
ptr-&gt;addr.end, respectively. If exact | | | addresses
cannot be instantiated, offsets are | | | returned in
ptr-&gt;addr.start_off and | | | ptr-&gt;addr.end_off.
Currently implemented on | | | Itanium only. |
+--------------------+-----------------------------------------------+
|PAPI_INSTR_ADDRESS | Set instruction address range as
described | | | above. Itanium only. |
+--------------------+-----------------------------------------------+</p>

<p>The option_t *ptr structure is defined in papi.h and
looks something like the following example from the source
tree. Users should use the definition in papi.h which is in
synch with the library used.</p>

<p>typedef union { PAPI_preload_option_t preload;
PAPI_debug_option_t debug; PAPI_granularity_option_t
granularity; PAPI_granularity_option_t defgranularity;
PAPI_domain_option_t domain; PAPI_domain_option_t defdomain;
PAPI_attach_option_t attach; PAPI_multiplex_option_t
multiplex; PAPI_hw_info_t *hw_info; PAPI_shlib_info_t
*shlib_info; PAPI_exe_info_t *exe_info;
PAPI_component_info_t *sub_info; PAPI_overflow_option_t
ovf_info; PAPI_addr_range_option_t addr; }
PAPI_option_t;</p>

<p>RETURN VALUES On success, these functions return
PAPI_OK. On error, a non-zero error code is returned.</p>

<p>ERRORS PAPI_EINVAL One or more of the arguments is
invalid.</p>

<p>PAPI_ENOEVST The event set specified does not exist.</p>

<p>PAPI_ENOCMP The argument cidx is not a valid
component.</p>

<p>PAPI_EISRUN The event set is currently counting
events.</p>

<p>EXAMPLES PAPI_option_t options;</p>

<p>if ((num = PAPI_get_cmp_opt(PAPI_MAX_HWCTRS,NULL,0))
&lt;= 0) handle_error();</p>

<p>printf(&quot;This component has %d counters.0,num);</p>

<p>/* Set the domain of this EventSet to counter user and
kernel modes for this process */</p>

<p>memset(&amp;options,0x0,sizeof(options));
options.domain.eventset = EventSet; options.domain.domain =
PAPI_DOM_ALL; if (PAPI_set_opt(PAPI_DOMAIN, &amp;options) !=
PAPI_OK) handle_error();</p>

<p>BUGS The granularity and domain functions are only
implemented on some com- ponents. There are no known bugs in
these functions.</p>

<p>SEE ALSO
PAPI_set_debug(3),PAPI_set_multiplex(3),PAPI_set_domain(3)</p>

<p>()</p>
<hr>
</body>
</html>
