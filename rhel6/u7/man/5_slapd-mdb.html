<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:34:34 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SLAPD-MDB(5) SLAPD-MDB(5)</p>

<p>NAME slapd-mdb - Memory-Mapped DB backend to slapd</p>

<p>SYNOPSIS /etc/openldap/slapd.conf</p>

<p>DESCRIPTION The mdb backend to slapd(8) uses OpenLDAP s
Lightning Memory-Mapped DB (LMDB) library to store data. It
relies completely on the underlying operating system for
memory management and does no caching of its own. It is the
recommended primary database backend.</p>

<p>The mdb backend is similar to the hdb backend in that it
uses a hierar- chical database layout which supports subtree
renames. It is both more space-efficient and more
execution-efficient than the bdb backend, while being
overall much simpler to manage.</p>

<p>CONFIGURATION These slapd.conf options apply to the mdb
backend database. That is, they must follow a &quot;database
mdb&quot; line and come before any subsequent
&quot;backend&quot; or &quot;database&quot; lines. Other
database options are described in the slapd.conf(5) manual
page.</p>

<p>checkpoint &lt;kbyte&gt; &lt;min&gt; Specify the
frequency for flushing the database disk buffers. This
setting is only needed if the dbnosync option is used. The
checkpoint will occur if either &lt;kbyte&gt; data has been
written or &lt;min&gt; minutes have passed since the last
checkpoint. Both argu- ments default to zero, in which case
they are ignored. When the &lt;min&gt; argument is non-zero,
an internal task will run every &lt;min&gt; minutes to
perform the checkpoint. Note: currently the &lt;kbyte&gt;
setting is unimplemented.</p>

<p>dbnosync Specify that on-disk database contents should
not be immediately synchronized with in memory changes.
Enabling this option may improve performance at the expense
of data security. In particu- lar, if the operating system
crashes before changes are flushed, some number of
transactions may be lost. By default, a full data flush/sync
is performed when each transaction is committed.</p>

<p>directory &lt;directory&gt; Specify the directory where
the LMDB files containing this database and associated
indexes live. A separate directory must be specified for
each database. The default is /var/openl- dap-data.</p>

<p>envflags {nosync,nometasync,writemap,mapasync,nordahead}
Specify flags for finer-grained control of the LMDB librarys
operation.</p>

<p>nosync This is exactly the same as the dbnosync
directive.</p>

<p>nometasync Flush the data on a commit, but skip the sync
of the meta page. This mode is slightly faster than doing a
full sync, but can potentially lose the last committed
trans- action if the operating system crashes. If both
nometa- sync and nosync are set, the nosync flag takes
prece- dence.</p>

<p>writemap Use a writable memory map instead of just
read-only. This speeds up write operations but makes the
database vulnerable to corruption in case any bugs in slapd
cause stray writes into the mmap region.</p>

<p>mapasync When using a writable memory map and performing
flushes on each commit, use an asynchronous flush instead of
a synchronous flush (the default). This option has no effect
if writemap has not been set. It also has no effect if
nosync is set.</p>

<p>nordahead Turn off file readahead. Usually the OS
performs reada- head on every read request. This usually
boosts read per- formance but can be harmful to random
access read perfor- mance if the systems memory is full and
the DB is larger than RAM. This option is not implemented on
Windows.</p>

<p>index {&lt;attrlist&gt;|default}
[pres,eq,approx,sub,&lt;special&gt;] Specify the indexes to
maintain for the given attribute (or list of attributes).
Some attributes only support a subset of indexes. If only an
&lt;attr&gt; is given, the indices specified for default are
maintained. Note that setting a default does not imply that
all attributes will be indexed. Also, for best per-
formance, an eq index should always be configured for the
objectClass attribute.</p>

<p>A number of special index parameters may be specified.
The index type sub can be decomposed into subinitial,
subany, and subfinal indices. The special type nolang may be
specified to disallow use of this index by language
subtypes. The special type nosubtypes may be specified to
disallow use of this index by named subtypes. Note: changing
index settings in slapd.conf(5) requires rebuilding indices,
see slapindex(8); changing index settings dynamically by
LDAPModifying &quot;cn=config&quot; automatically causes
rebuilding of the indices online in a back- ground task.</p>

<p>maxreaders &lt;integer&gt; Specify the maximum number of
threads that may have concurrent read access to the
database. Tools such as slapcat count as a single thread, in
addition to threads in any active slapd pro- cesses. The
default is 126.</p>

<p>maxsize &lt;bytes&gt; Specify the maximum size of the
database in bytes. A memory map of this size is allocated at
startup time and the database will not be allowed to grow
beyond this size. The default is 10485760 bytes. This
setting may be changed upward if the configured limit needs
to be increased.</p>

<p>Note: It is important to set this to as large a value as
possi- ble, (relative to anticipated growth of the actual
data over time) since growing the size later may not be
practical when the system is under heavy load.</p>

<p>mode &lt;integer&gt; Specify the file protection mode
that newly created database files should have. The default
is 0600.</p>

<p>searchstack &lt;depth&gt; Specify the depth of the stack
used for search filter evalua- tion. Search filters are
evaluated on a stack to accommodate nested AND / OR clauses.
An individual stack is assigned to each server thread. The
depth of the stack determines how complex a filter can be
evaluated without requiring any additional memory
allocation. Filters that are nested deeper than the search
stack depth will cause a separate stack to be allocated for
that particular search operation. These allocations can have
a major negative impact on server performance, but
specifying too much stack will also consume a great deal of
memory. Each search stack uses 512K bytes per level. The
default stack depth is 16, thus 8MB per thread is used.</p>

<p>ACCESS CONTROL The mdb backend honors access control
semantics as indicated in slapd.access(5).</p>

<p>FILES /etc/openldap/slapd.conf default slapd
configuration file</p>

<p>SEE ALSO slapd.conf(5), slapd-config(5), slapd(8),
slapadd(8), slapcat(8), slapindex(8), OpenLDAP LMDB
documentation.</p>

<p>ACKNOWLEDGEMENTS OpenLDAP Software is developed and
maintained by The OpenLDAP Project
&lt;http://www.openldap.org/&gt;. OpenLDAP Software is
derived from Univer- sity of Michigan LDAP 3.3 Release.
Written by Howard Chu.</p>

<p>OpenLDAP 2.4.40 2014/09/20 SLAPD-MDB(5)</p>
<hr>
</body>
</html>
