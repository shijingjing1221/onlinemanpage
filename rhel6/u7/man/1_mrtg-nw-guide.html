<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:23:27 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MRTG-NW-GUIDE(1) mrtg MRTG-NW-GUIDE(1)</p>

<p>NAME mrtg-nw-guide - MRTG for NetWare</p>

<p>SYNOPSIS This guide is intended to aid in the
installation and configuration of MRTG on a NetWare
server.</p>

<p>OVERVIEW MRTG is a relative newcomer to the NetWare
platform. Earlier versions of NetWare could not run MRTG
natively for several reasons:</p>

<p>&middot; Absence of NetWare OS support in the MRTG
package.</p>

<p>&middot; A NetWare server commandline length
limitation.</p>

<p>&middot; Absence of the Rateup executable
(Rateup.nlm).</p>

<p>&middot; A standard installation method.</p>

<p>&middot; Problems with NetWares implementation of
Perl.</p>

<p>Support for the NetWare OS has now been fully added into
MRTG, begin- ning with MRTG release 2.12.2.</p>

<p>Liberallly minded operating systems support a
commandline length approaching 1000 characters. In such
environments it was an easy matter to pass the sometimes
high number of parameters used by MRTGs Rateup executable
directly on the commandline. Until NetWare 6.5, NetWare had
a commandline limit of 512 characters. This limitation was
also removed for NetWare 6.0 by Service Pack 5. For other
NetWare versions and ear- lier Service Packs, this
limitation remains. To permit a standard interface for
NetWare, the Rateup executable has been modified to also
read its parameters from a file, and the MRTG script has
been modified to support this method on a NetWare platform.
(See New Rateup Switch)</p>

<p>A Rateup NLM is now available, along with the necessary
scripts to build it if required. See the NetWare Support
section of this document for further details. Additionally,
mrtg.pl has been revised because of the unique (to NetWare)
name of executables (NLM).</p>

<p>The absence of a specific installation procedure has
caused MRTG to fail in the past because the Perl script
could not find or load the Rateup executable. The
installation method supplied here will solve this problem
for now.</p>

<p>The MRTG.pl script in the 2.12.2 (or later) version of
MRTG has been configured to suit all likely versions of
NetWare able to use Perl5, and bypasses all of the known
problems with NetWare Perl running MRTG.</p>

<p>PREREQUISITES You will need the following:</p>

<p>&middot; Perl 5.8.0 for NetWare with latest Perl Updates
(February, 2005 or later; previous versions MAY work)</p>

<p>&middot; NetWare 5.1 w/ SP8, NetWare 6.0 w/ SP5 or
NetWare 6.5 w/ SP2.</p>

<p>&middot; A copy of the MRTG Package (v2.12.2 at time of
writting)</p>

<p>&middot; Three .ncf files to execute the Perl scripts at
the NetWare server console.</p>

<p>&middot; A copy of the Rateup NLM (Pre-built or
compiled)</p>

<p>&middot; Optionally, any NetWare supported Web Server
(Netscape, Apache 1.3 or 2.0)</p>

<p>For copies of the .ncf files and Rateup NLM, see NetWare
Support in this document.</p>

<p>INSTALLING MRTG 1. Install the latest Perl 5.8.x release
on your server. See the Perl documentation for details.</p>

<p>2. Create the following directories:</p>

<p>SYS:/Mrtg SYS:/Mrtg/bin SYS:/Mrtg/contrib (Optional for
this document) SYS:/Mrtg/doc (Optional for this document)
SYS:/Mrtg/html SYS:/Mrtg/html/images SYS:/Mrtg/html/work
SYS:/Mrtg/lib SYS:/Mrtg/logs SYS:/Mrtg/translate</p>

<p>3. Copy from the MRTG package the following files:</p>

<p>n t o S Y S : /n All files. See Note 1. M r t g / b</p>

<p>Note 1: Add a .pl extension to the mrtg, cfgmaker and
indexmaker files. The rateup.exe will NOT be needed on the
NetWare server.</p>

<p>oc to SYS:/Mrtg/doc/ All files images to
SYS:/Mrtg/html/images/ All files ranslate to
SYS:/Mrtg/translate/ All files. See Note 2.</p>

<p>Note 2: For English-only language support, all ranslate
files EXCEPT Locales_mrtg may be deleted.</p>

<p>to SYS:/Mrtg/lib Include sub-directories. See Note
3.</p>

<p>Note 3: This will create the SYS:/Mrtg/lib/mrtg2 and
./pod directo- ries.</p>

<p>4. Create copies of the three .ncf files and install
them:</p>

<p>*.ncf to SYS:/Mrtg/bin</p>

<p>See NetWare Support in this document for details on how
to create copies of these files.</p>

<p>5. See Compiling Rateup.nlm&quot;&gt; in this document
for details on compil- ing the Rateup NLM yourself if
desired. A prebuit verion is avail- n able in the
.tgdrectory where it must remain.</p>

<p>CONFIGURING MRTG &middot; Refer to Novell documentation
on configuring and loading SNMP sup- port on your server if
this is the device to be monitored.</p>

<p>&middot; Edit sys:/mrtg/bin/MakeMrtgCfg.ncf:</p>

<p>replace ccccc with the GET community name for the SNMP
device (typ- ically public),</p>

<p>replace ddddd with the DNS name or IP address of the
device to be monitored. e.g public@www.myserver.com,
public@10.202.65.180</p>

<p>Note 1: These are NOT mail addresses, they just look
like one!</p>

<p>Note 2: If multiple devices are to be monitored, add
their entries to the same line:</p>

<p>e.g perl cfgmaker.pl public@www.myserver.com
public@10.202.65.180 &gt; sys:/mrtg/bin/mrtg.cfg</p>

<p>In this &quot;Getting Started&quot;, it is suggested to
only monitor a sin- gle device.</p>

<p>&middot; At the server console, run:</p>

<p>sys:/mrtg/bin/MakeMrtgCfg.ncf</p>

<p>This will create Mrtg.cfg in sys:/mrtg/bin.</p>

<p>&middot; Edit the Mrtg.cfg configuration file created in
the previous step. Note the following:</p>

<p>It was found, when testing MRTG on a NetWare 6.5 server
using a NIC Interface, that mrtg.cfg contained the following
message:</p>

<p>### Interface 1 &gt;&gt; Descr:
Intel(R)-8255x-based-Network-Connection... ### The following
interface is commented out because: ### * has a speed of 0
which makes no sense # ...</p>

<p>If this occurs, edit MakeMrtgCfg.ncf and add the
following parame- ter as shown:</p>

<p>n f g m a k e r . p l - - n z t e g perl
sys:tgrc@10.202.65.180 &gt; sys:tg. o c - f s g p e e d = n
n n p u b l</p>

<p>where nnn is the interface speed in bits per second. For
a 100 Megabit LAN NIC, nnn = 10000000. It will be necessary
to re-execute the MakeMrtgCfg.ncf script before continuing
with this section.</p>

<p>Below line 16 (*** Global Defaults), add:</p>

<p>HtmlDir: &lt;a path&gt; e.g HtmlDir: sys:/mrtg/html
ImageDir: &lt;a path&gt; e.g ImageDir: sys:/mrtg/html/work
LogDir: &lt;a path&gt; e.g LogDir: sys:/mrtg/logs IconDir:
&lt;a path&gt; e.g IconDir: ./images</p>

<p>Note 1. The HtmlDir entry specifies where MRTG will
create its HTML pages.</p>

<p>Note 2. The ImageDir entry specifies where the created
graphic icons are placed.</p>

<p>Note 3. The IconDir entry specifies where the supplied
MRTG icons are located. It MUST be a relative path from
HtmlDir or absolute URL. The value shown is recommended.</p>

<p>&middot; At the server console run:</p>

<p>sys:/mrtg/bin/RunMrtg.ncf</p>

<p>several times. By the third time it should run without
showing error messages on the console screen.</p>

<p>This should create.</p>

<p>- A HTML page in the (HtmlDir) directory for each
monitored device,</p>

<p>- A .dat file in the (ImageDir) directory for each
monitored device,</p>

<p>- Several .png icons in the (ImageDir) directory,</p>

<p>- Some log file entries in the (LogDir) directory.</p>

<p>Note: If you experience a &quot;Use of uninitialised
value in split&quot; error, it will be necessary to create a
Path environment variable at the server console; use the
following example</p>

<p>env path=&quot;SYS:</p>

<p>&middot; Edit sys:/mrtg/bin/MakeMrtgIndex.ncf. Change
the indicated &lt;path&gt; shown in the following example to
match the value entered for (HtmlDir).</p>

<p>perl --noscreen sys:/mrtg/bin/indexmaker.pl
sys:/mrtg/bin/Mrtg.cfg &gt; &lt;path&gt;/index.html</p>

<p>&middot; Create an index.html page linking the seperate
device HTML page(s). At the server console, run:</p>

<p>sys:/mrtg/bin/MakeMrtgIndex.ncf</p>

<p>This will create index.html in the (HtmlDir)
directory.</p>

<p>&middot; Optionally, configure a Web Server to permit
access to the direc- tory specified in (HtmlDir) to view the
MRTG graphs remotely, at, for example:</p>

<p>http://ip_or_dns/mrtg/index.html</p>

<p>A sample configuration for an Apache Webserver is
shown:</p>

<p>Alias /mrtg/ &quot;SYS:/mrtg/html/&quot; &lt;Directory
&quot;SYS:/mrtg/html&quot;&gt; AllowOverride None Order
allow,deny Allow from all &lt;/Directory&gt;</p>

<p>&middot; Set the property of the directory pointed to by
(ImageDir), to Purge Immediate.</p>

<p>&middot; Finally, read the MRTG documentation for much
more detailed config- uration/usage information.</p>

<p>Welcome to MRTG!!</p>

<p>MAKE MRTG RUN ALL THE TIME MRTG can be made to run
periodically by at least two means:</p>

<p>&middot; Using CRON Scheduling</p>

<p>&middot; Running MRTG in Daemon Mode</p>

<p>CRON Scheduling</p>

<p>To use CRON scheduling, create a CRON Scheduler entry to
execute the RunMrtg.ncf file on a frequency appropriate for
the server environment and information desired. The
following entry in the sys:\tc file will execute MRTG every
five minutes:</p>

<p>n u n m r 0,5,10,15,20,25,30,35,40,45,50,55 * * * *
sys:tgt g . n c f</p>

<p>The CRON Scheduler (cron.nlm) can be started
automatically by adding it in AUTOEXEC.ncf or, manually
loading it at the server console.</p>

<p>MRTG in Daemon Mode</p>

<p>Refer to the MRTG-Reference document for information
about the RunAs- Daemon option. Its use is outside the scope
of this document.</p>

<p>TROUBLESHOOTING Read the MRTG documents, Perl documents
or, finally, submit questions to the MRTG User forums.</p>

<p>For NetWare specific issues, submit questions to the
Perl forum at
news://developer-forums.novell.com/novell.devsup.perl
(Novell Developer Forums).</p>

<p>COMPILING RATEUP.NLM In addition to the rateup.c and
Makefile.Netware supplied with the MRTG release, you will
also need:</p>

<p>&middot; Metrowerks CodeWarrior with NetWare Support OR
GCC Compiler (v3.0.3 or later) with NlmConv Utility</p>

<p>&middot; Novell LibC NDK (February 2004 or later)</p>

<p>&middot; GD Graphics Library (v2.0.33 or later)</p>

<p>&middot; LibPNG Graphics Library (v1.2.8 or later)</p>

<p>&middot; ZLib Library (v1.2.3 or later)</p>

<p>&middot; The get_ver.awk script</p>

<p>&middot; A copy of the GNU build tools. (See
http://source- forge.net/projects/gnuwin32/)</p>

<p>The auxiliary libraries can be obtained from:</p>

<p>GD Graphics Library. (See http://www.boutell.com/gd/
)</p>

<p>PNG Graphics Library. (See
http://libpng.sourceforge.net/ )</p>

<p>zLib Compression Library. (See http://www.gzip.org/zlib/
)</p>

<p>Edit the Makefile.Netware file as required to match your
installation paths; search the file for the key word
Edit.</p>

<p>NETWARE SUPPORT For copies of the NCF and get_ver.awk
scripts, see Appendix.</p>

<p>For NetWare specific issues, submit questions to the
Perl forum at
news://developer-forums.novell.com/novell.devsup.perl
(Novell Developer Forums).</p>

<p>To move the MRTG application to a volume other than SYS:
you will need to edit the NCF scripts provided plus the
MRTG[.pl] script itself in two places.</p>

<p>NEW RATEUP SWITCH The MRTG[.pl] script, when used on a
NetWare platform, uses Rateup[.nlm] with the new commandline
switch:</p>

<p>RATEUP -f filename</p>

<p>where the filename parameter can include a leading path
element.</p>

<p>The file format is exactly the same as that used on the
commandline by other operating systems, including the
leading path and name of the Rateup NLM.</p>

<p>APPENDIX The Appendix includes copies of the following
files:</p>

<p>&middot; The NCF files used during MRTG
configuration,</p>

<p>To create copies of these files, simply cut and paste
into your favourite text editor and save under their
respective names. You should remove the leading space from
each line.</p>

<p>MakeMrtgCfg.NCF</p>

<p># MakeMrtgCfg.NCF # Purpose : Create the MRTG
Configuration File # Changed : 5/05/2005 New # Located :
SYS:MRTG0 # Set For : # Params :</p>

<p># Edit this file and:</p>

<p># Replace ccccc with your device GET SNMP Community Name
- If unsure try public. # Replace ddddd with your device IP
(n.n.n.n) or domain name.</p>

<p>n f g m a k e r . p l c c c perl --noscreen sys:tgc c @
d d d d d &gt; s y s : t g</p>

<p># # End of MakeMrtgCfg.NCF</p>

<p>RunMrtg.NCF</p>

<p># RunMrtg.NCF # Purpose : Run the MRTG Application #
Changed : 5/05/2005 New # Located : SYS:MRTG0 # Set For : #
Params :</p>

<p># The paths are as per the examples recommended in
&quot;Getting Started&quot;.</p>

<p>n t g . p l perl --noscreen sys:tgs y s : t g</p>

<p># # End of RunMrtg.NCF</p>

<p>MakeMrtgIndex.NCF</p>

<p># MakeMrtgIndex.NCF # Purpose : Create the HTML Index
File for MRTG HTML data pages # Changed : 5/05/2005 New #
Located : SYS:MRTG0 # Set For : # Params :</p>

<p># Note: Edit this file and change the redirected output
to the location # specified for HtmlDir or WorkDir. The
sys:pache2ocstgindex.html # is based on the examples in
&quot;Getting Started&quot;.</p>

<p>n t g . c f g perl --noscreen sys:tgnndexmaker.pl
sys:tg&gt;ndex.html s y s : t g l</p>

<p># # End of MakeMrtgIndex.NCF</p>

<p>LICENSE GNU General Public License</p>

<p>CREDITS The MRTG for NetWare exists largely through the
efforts of Guenter Knauf and feedback from beta testers.</p>

<p>AUTHOR Norm W..</p>

<p>2.16.2 2008-05-16 MRTG-NW-GUIDE(1)</p>
<hr>
</body>
</html>
