<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:19:46 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IPSEC_AUTO(8) [FIXME: manual] IPSEC_AUTO(8)</p>

<p>NAME ipsec_auto - control automatically-keyed IPsec
connections</p>

<p>SYNOPSIS ipsec auto [--show] [--showonly]
[--asynchronous] [--config configfile] [--verbose] operation
connection</p>

<p>ipsec auto [--show] [--showonly] [--asynchronous]
[--config configfile] [--verbose] operation connection</p>

<p>EXAMPLES ipsec auto { --add | --delete | --replace |
--up | --down } connection</p>

<p>ipsec auto { --status | --ready }</p>

<p>ipsec auto { --route | --unroute } connection</p>

<p>ipsec auto [--utc] [--listall | --rereadall]
[--rereadsecrets] [--listcerts] [--listpubkeys]
[--listcacerts | --rereadcacerts] [--listcrls |
--rereadcrls] [[--listocspcerts | --rereadocspcerts ]
[--listocsp | --purgeocsp ]] [--listgroups |
--rereadgroups]</p>

<p>DESCRIPTION Auto manipulates automatically-keyed
Openswan IPsec connections, setting them up and shutting
them down based on the information in the IPsec
configuration file. In the normal usage, connection is the
name of a connection specification in the configuration
file; operation is --add, --delete, --replace, --up, --down,
--route, or --unroute. The --ready, --rereadsecrets,
--rereadgroups, and --statusoperations do not take a
connection name. Auto generates suitable commands and feeds
them to a shell for execution.</p>

<p>The --add operation adds a connection specification to
the internal database within pluto; it will fail if pluto
already has a specification by that name. The --delete
operation deletes a connection specification from
pluto&rsquo;s internal database (also tearing down any
connections based on it); it will fail if the specification
does not exist. The --replace operation is equivalent to
--delete (if there is already a specification by the given
name) followed by --add, and is a convenience for updating
pluto&rsquo;s internal specification to match an external
one. (Note that a --rereadsecrets may also be needed.) The
--rereadgroups operation causes any changes to the policy
group files to take effect (this is currently a synonym for
--ready, but that may change). None of the other operations
alters the internal database.</p>

<p>The --up operation asks pluto to establish a connection
based on an entry in its internal database. The --down
operation tells pluto to tear down such a connection.</p>

<p>Normally, pluto establishes a route to the destination
specified for a connection as part of the --up operation.
However, the route and only the route can be established
with the --route operation. Until and unless an actual
connection is established, this discards any packets sent
there, which may be preferable to having them sent elsewhere
based on a more general route (e.g., a default route).</p>

<p>Normally, pluto&rsquo;s route to a destination remains
in place when a --down operation is used to take the
connection down (or if connection setup, or later automatic
rekeying, fails). This permits establishing a new connection
(perhaps using a different specification; the route is
altered as necessary) without having a window in which
packets might go elsewhere based on a more general route.
Such a route can be removed using the --unroute operation
(and is implicitly removed by --delete).</p>

<p>The --ready operation tells pluto to listen for
connection-setup requests from other hosts. Doing an --up
operation before doing --ready on both ends is futile and
will not work, although this is now automated as part of
IPsec startup and should not normally be an issue.</p>

<p>The --status operation asks pluto for current connection
status. The output format is ad-hoc and likely to
change.</p>

<p>The --rereadsecrets operation tells pluto to re-read the
/etc/ipsec.secrets secret-keys file, which it normally reads
only at startup time. (This is currently a synonym for
--ready, but that may change.)</p>

<p>The --rereadsecrets operation tells pluto to re-read the
/etc/ipsec.secrets secret-keys file, which it normally reads
only at startup time. (This is currently a synonym for
--ready, but that may change.)</p>

<p>The --rereadcacerts operation reads all certificate
files contained in the /etc/ipsec.d/cacerts directory and
adds them to pluto&rsquo;s list of Certification Authority
(CA) certificates. This does not affect CA certificates in
the NSS database.</p>

<p>The --rereadocspcerts operation reads all certificate
files contained in the /etc/ipsec.d/ocspcerts directory and
adds them to pluto&rsquo;s list of OCSP signer
certificates.</p>

<p>The --rereadcrls operation reads all certificate
revocation list (CRL) files contained in the
/etc/ipsec.d/crls directory and adds them to pluto&rsquo;s
list of CRLs. This does not affect CRLs in the NSS
database.</p>

<p>The --rereadall operation is equivalent to the execution
of --rereadse- crets, --rereadcacerts, --rereadocspcerts and
--rereadcrls.</p>

<p>The --listpubkeys operation lists all RSA public keys
either received from peers via the IKE protocol embedded in
authenticated certificate payloads or loaded locally using
the rightcert / leftcert or rightr- sasigkey / leftrsasigkey
parameters in ipsec.conf(5).</p>

<p>The --listcerts operation lists all X.509 and OpenPGP
certificates loaded locally using the rightcert and leftcert
parameters in ipsec.conf(5).</p>

<p>The --listcacerts operation lists all X.509 CA
certificates either loaded locally from the
/etc/ipsec.d/cacerts directory or received in PKCS#7-wrapped
certificate payloads via the IKE protocol.</p>

<p>The --listocspcerts operation lists all OCSP signer
certificates either loaded locally from the
/etc/ipsec.d/ocspcerts directory or received via the Online
Certificate Status Protocol from an OCSP server.</p>

<p>The --listgroups operation lists all groups that are
either used in connection definitions in ipsec.conf(5) or
are embedded in loaded X.509 attributes certificates.</p>

<p>The --listcrls operation lists all Certificate
Revocation Lists (CRLs) either loaded locally from the
/etc/ipsec.d/crls directory or fetched dynamically from an
HTTP or LDAP server.</p>

<p>The --listocsp operation lists the certicates status
information fetched from OCSP servers.</p>

<p>The --purgeocsp operation deletes any cached certificate
status infor- mation and pending OCSP fetch requests.</p>

<p>The --listall operation is equivalent to the execution
of --listpubkeys, --listcerts, --listcacerts,
--listocspcerts, --listgroups, --listcrls, --listocsp.</p>

<p>The --showonly option causes auto to show the commands
it would run, on standard output, and not run them.</p>

<p>The --asynchronous option, applicable only to the up
operation, tells pluto to attempt to establish the
connection, but does not delay to report results. This is
especially useful to start multiple connections in parallel
when network links are slow.</p>

<p>The --verbose option instructs auto to pass through all
output from ipsec_whack(8), including log output that is
normally filtered out as uninteresting.</p>

<p>The --show option turns on the -x option of the shell
used to execute the commands, so each command is shown as it
is executed.</p>

<p>The --config option specifies a non-standard location
for the IPsec configuration file (default
/etc/ipsec.conf).</p>

<p>See ipsec.conf(5) for details of the configuration
file.</p>

<p>FILES /etc/ipsec.conf default IPSEC configuration file
/etc/ipsec.d/ X.509 and Opportunistic Encryption files
/var/run/pluto/ipsec.info %defaultroute information
/var/run/pluto/pluto.ctl Pluto command socket</p>

<p>SEE ALSO ipsec.conf(5), ipsec(8), ipsec_pluto(8),
ipsec_whack(8), ipsec_manual(8)</p>

<p>HISTORY Originally written for the FreeS/WAN project
&lt;http://www.freeswan.org&gt; by Henry Spencer.</p>

<p>BUGS Although an --up operation does connection setup on
both ends, --down tears only one end of the connection down
(although the orphaned end will eventually time out).</p>

<p>There is no support for passthrough connections.</p>

<p>A connection description which uses %defaultroute for
one of its nexthop parameters but not the other may be
falsely rejected as erroneous in some circumstances.</p>

<p>The exit status of --showonly does not always reflect
errors discovered during processing of the request. (This is
fine for human inspection, but not so good for use in
scripts.)</p>

<p>[FIXME: source] 06/05/2014 IPSEC_AUTO(8)</p>
<hr>
</body>
</html>
