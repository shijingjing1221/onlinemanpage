<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:24:44 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OPENDIR(3P) POSIX Programmer s Manual OPENDIR(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME opendir - open a directory</p>

<p>SYNOPSIS #include &lt;dirent.h&gt;</p>

<p>DIR *opendir(const char *dirname);</p>

<p>DESCRIPTION The opendir() function shall open a
directory stream corresponding to the directory named by the
dirname argument. The directory stream is positioned at the
first entry. If the type DIR is implemented using a file
descriptor, applications shall only be able to open up to a
total of {OPEN_MAX} files and directories.</p>

<p>RETURN VALUE Upon successful completion, opendir() shall
return a pointer to an object of type DIR. Otherwise, a null
pointer shall be returned and errno set to indicate the
error.</p>

<p>ERRORS The opendir() function shall fail if:</p>

<p>EACCES Search permission is denied for the component of
the path prefix of dirname or read permission is denied for
dirname.</p>

<p>ELOOP A loop exists in symbolic links encountered during
resolution of the dirname argument.</p>

<p>ENAMETOOLONG The length of the dirname argument exceeds
{PATH_MAX} or a path- name component is longer than
{NAME_MAX}.</p>

<p>ENOENT A component of dirname does not name an existing
directory or dirname is an empty string.</p>

<p>ENOTDIR A component of dirname is not a directory.</p>

<p>The opendir() function may fail if:</p>

<p>ELOOP More than {SYMLOOP_MAX} symbolic links were
encountered during resolution of the dirname argument.</p>

<p>EMFILE {OPEN_MAX} file descriptors are currently open in
the calling process.</p>

<p>ENAMETOOLONG As a result of encountering a symbolic link
in resolution of the dirname argument, the length of the
substituted pathname string exceeded {PATH_MAX}.</p>

<p>ENFILE Too many files are currently open in the
system.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Open a Directory Stream The following program
fragment demonstrates how the opendir() function is
used.</p>

<p>#include &lt;sys/types.h&gt; #include &lt;dirent.h&gt;
#include &lt;libgen.h&gt; ... DIR *dir; struct dirent *dp;
... if ((dir = opendir (&quot;.&quot;)) == NULL) { perror
(&quot;Cannot open .&quot;); exit (1); }</p>

<p>while ((dp = readdir (dir)) != NULL) { ...</p>

<p>APPLICATION USAGE The opendir() function should be used
in conjunction with readdir(), closedir(), and rewinddir()
to examine the contents of the directory (see the EXAMPLES
section in readdir()). This method is recommended for
portability.</p>

<p>RATIONALE Based on historical implementations, the rules
about file descriptors apply to directory streams as well.
However, this volume of IEEE Std 1003.1-2001 does not
mandate that the directory stream be implemented using file
descriptors. The description of closedir() clar- ifies that
if a file descriptor is used for the directory stream, it is
mandatory that closedir() deallocate the file descriptor.
When a file descriptor is used to implement the directory
stream, it behaves as if the FD_CLOEXEC had been set for the
file descriptor.</p>

<p>The directory entries for dot and dot-dot are optional.
This volume of IEEE Std 1003.1-2001 does not provide a way
to test a priori for their existence because an application
that is portable must be written to look for (and usually
ignore) those entries. Writing code that presumes that they
are the first two entries does not always work, as many
implementations permit them to be other than the first two
entries, with a &quot;normal&quot; entry preceding them.
There is negligible value in pro- viding a way to determine
what the implementation does because the code to deal with
dot and dot-dot must be written in any case and because such
a flag would add to the list of those flags (which has
proven in itself to be objectionable) and might be
abused.</p>

<p>Since the structure and buffer allocation, if any, for
directory opera- tions are defined by the implementation,
this volume of IEEE Std 1003.1-2001 imposes no portability
requirements for erroneous program constructs, erroneous
data, or the use of unspecified values such as the use or
referencing of a dirp value or a dirent structure value
after a directory stream has been closed or after a fork()
or one of the exec function calls.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO closedir(), lstat(), readdir(), rewinddir(),
symlink(), the Base Defi- nitions volume of IEEE Std
1003.1-2001, &lt;dirent.h&gt;, &lt;limits.h&gt;,
&lt;sys/types.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 OPENDIR(3P)</p>
<hr>
</body>
</html>
