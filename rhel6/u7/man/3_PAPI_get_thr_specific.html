<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:25:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PAPI_get_thr_specific(3) PAPI
PAPI_get_thr_specific(3)</p>

<p>NAME PAPI_get_thr_specific, PAPI_set_thr_specific -
Store or retrieve a pointer to a thread specific data
structure</p>

<p>SYNOPSIS #include &lt;papi.h&gt; int
PAPI_get_thr_specific(int tag, void **ptr); int
PAPI_set_thr_specific(int tag, void *ptr);</p>

<p>DESCRIPTION In C, PAPI_set_thr_specific will save ptr
into an array indexed by tag. PAPI_get_thr_specific will
retrieve the pointer from the array with index tag. There
are 2 user available locations and tag can be either
PAPI_USR1_TLS or PAPI_USR2_TLS. The array mentioned above is
managed by PAPI and allocated to each thread which has
called PAPI_thread_init. There are no Fortran equivalent
functions.</p>

<p>ARGUMENTS tag -- An identifier, the value of which is
either PAPI_USR1_TLS or PAPI_USR2_TLS. This identifier
indicates which of several data struc- tures associated with
this thread is to be accessed.</p>

<p>ptr -- A pointer to the memory containing the data
structure.</p>

<p>RETURN VALUES On success, this function returns PAPI_OK.
On error, a negative error value is returned.</p>

<p>ERRORS PAPI_EINVAL The tag argument is out of range.</p>

<p>EXAMPLE HighLevelInfo *state = NULL;</p>

<p>if (retval = PAPI_thread_init(pthread_self) != PAPI_OK)
handle_error(retval);</p>

<p>/* * Do we have the thread specific data setup yet? */
if ((retval = PAPI_get_thr_specific(PAPI_USR1_TLS, (void *)
&amp;state)) != PAPI_OK || state == NULL) { state =
(HighLevelInfo *) malloc(sizeof(HighLevelInfo)); if (state
== NULL) return (PAPI_ESYS);</p>

<p>memset(state, 0, sizeof(HighLevelInfo));
state-&gt;EventSet = PAPI_NULL;</p>

<p>if ((retval =
PAPI_create_eventset(&amp;state-&gt;EventSet)) != PAPI_OK)
return (PAPI_ESYS);</p>

<p>if ((retval=PAPI_set_thr_specific(PAPI_USR1_TLS,
state))!=PAPI_OK) return (retval); }</p>

<p>BUGS There are no known bugs in these functions.</p>

<p>SEE ALSO PAPI_thread_init(3), .BR PAPI_thread_id (3),
PAPI_register_thread(3)</p>

<p>PAPI Programmer s Reference September, 2004
PAPI_get_thr_specific(3)</p>
<hr>
</body>
</html>
