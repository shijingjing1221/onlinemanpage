<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:23:28 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MRTG-RRD(1) mrtg MRTG-RRD(1)</p>

<p>NAME mrtg-rrd - How to use RRDtool with MRTG</p>

<p>SYNOPSIS After using MRTG for some time you may find
some limitations, mostly in the areas of performance and
graphing flexibility. These are exactly the areas addressed
by RRDtool. To learn more about RRDtool check out its
website on</p>

<p>http://oss.oetiker.ch/rrdtool</p>

<p>RRDTOOL INTEGRATION When using mrtg with RRDtool you are
replacing rateup with the RRDtool perl module RRDs.pm. To
enable RRDtool support in mrtg you have to add the line</p>

<p>LogFormat: rrdtool</p>

<p>to your mrtg config file.</p>

<p>MRTG needs access to both the RRDtool perl module
RRDs.pm and to the rrdtool executable.</p>

<p>If these two items are not installed in locations where
perl can find them on its own, then you can use the
following two parameters to sup- ply the appropriate
directories.</p>

<p>For the location of the rrdtool executable you put</p>

<p>PathAdd: /usr/local/rrdtool/bin/</p>

<p>or</p>

<p>rdtooln PathAdd: c:</p>

<p>For the location of the perl module it would be:</p>

<p>LibAdd: /usr/local/rrdtool/lib/perl/</p>

<p>or</p>

<p>n e rdtoolr LibAdd: c: l</p>

<p>When you have made this modification to the
configuration file, several things will happen when you run
mrtg again with the new config file:</p>

<p>1. mrtg will take all your old &quot;.log&quot; files
and convert them to &quot;.rrd&quot; format. (The
&quot;.log&quot; files don t get touched in the process, so
if things dont work out they are still there.)</p>

<p>2. mrtg will use rrdtool to update its databases. These
will have a new format called rrd which is totally different
than the native log format of the classic mrtg.</p>

<p>3. mrtg will not create any webpages of graphs anymore.
It will only query the routers for traffic information and
update its rrd databases.</p>

<p>The advantage of whole thing is that the mrtg will
become much faster. Expect the runtime to drop to 20% of the
previous value. (I would like to get some feedback on this
from folks with large installations.)</p>

<p>Mind you, though, while the logging process of RRDtool
is very fast, you are also gaining some time by neither
creating graphs nor updating webpages. The idea behind this
is that it is more efficient to create graphs and webpages
on demand by using a cgi script.</p>

<p>At the moment there is no official script to do this,
but two con- tributers have created such scripts:</p>

<p>One4All aka 14all.cgi This was the first program to take
over the webpage creation and graphing task. It has been
developed by Rainer Bawidamann rainer.bawidamann@web.de. You
can find a copy on Rainers website:
http://my14all.sourceforge.net/ The program comes with its
own doc- umentation</p>

<p>routers.cgi, servers.cgi and generic.cgi These are other
cgi frontends to mrtg running with rrdtool. The main
difference between this and 14all is that the web pages it
creates are much more stylish than the ones from mrtg. These
tools have been written by Steve Shipway
steve@steveshipway.org. You can find a copy in
http://www.steveshipway.org/software/ The programs come with
their own installation instructions.</p>

<p>mrtg-rrd The mrtg-rrd script is a CGI/FastCGI
application by Jan &quot;Yenya&quot; Kasprzak for displaying
MRTG graphs from data in the RRDtool for- mat. It is an
intended replacement for the 14all.cgi script. It can make
your monitoring system faster because MRTG does not have to
generate all the PNG files with graphs every 5 minutes or
so. Instead of this the graphs are generated on-demand when
the user wants to see them.
http://www.fi.muni.cz/~kas/mrtg-rrd/</p>

<p>Paul C. Williamson has written a more in-depth page on
how the whole process works, including some performance
figures. You can find his page on
http://www.geocities.com/paulcwilliamson/mrtg/rateup2rrd.html</p>

<p>FUTURE Just as a side note: MRTG-3 will be based
entirely on rrdtool technol- ogy. But dont wait for it ...
get going now!</p>

<p>AUTHOR Tobias Oetiker &lt;tobi@oetiker.ch&gt;</p>

<p>2.16.2 2008-05-16 MRTG-RRD(1)</p>
<hr>
</body>
</html>
