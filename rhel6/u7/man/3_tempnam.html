<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 06:40:57 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TEMPNAM(3) Linux Programmer s Manual TEMPNAM(3)</p>

<p>NAME tempnam - create a name for a temporary file</p>

<p>SYNOPSIS #include &lt;stdio.h&gt;</p>

<p>char *tempnam(const char *dir, const char *pfx);</p>

<p>Feature Test Macro Requirements for glibc (see
feature_test_macros(7)):</p>

<p>tempnam(): _BSD_SOURCE || _SVID_SOURCE</p>

<p>DESCRIPTION The tempnam() function returns a pointer to
a string that is a valid filename, and such that a file with
this name did not exist when temp- nam() checked. The
filename suffix of the pathname generated will start with
pfx in case pfx is a non-NULL string of at most five bytes.
The directory prefix part of the pathname generated is
required to be &quot;appropriate&quot; (often that at least
implies writable).</p>

<p>Attempts to find an appropriate directory go through the
following steps:</p>

<p>a) In case the environment variable TMPDIR exists and
contains the name of an appropriate directory, that is
used.</p>

<p>b) Otherwise, if the dir argument is non-NULL and
appropriate, it is used.</p>

<p>c) Otherwise, P_tmpdir (as defined in &lt;stdio.h&gt;)
is used when appropri- ate.</p>

<p>d) Finally an implementation-defined directory may be
used.</p>

<p>The string returned by tempnam() is allocated using
malloc(3) and hence should be freed by free(3).</p>

<p>RETURN VALUE The tempnam() function returns a pointer to
a unique temporary file- name, or NULL if a unique name
cannot be generated.</p>

<p>ERRORS ENOMEM Allocation of storage failed.</p>

<p>CONFORMING TO SVr4, 4.3BSD, POSIX.1-2001. POSIX.1-2008
marks tempnam() as obsolete.</p>

<p>NOTES Although tempnam() generates names that are
difficult to guess, it is nevertheless possible that between
the time that tempnam() returns a pathname, and the time
that the program opens it, another program might create that
pathname using open(2), or create it as a symbolic link.
This can lead to security holes. To avoid such
possibilities, use the open(2) O_EXCL flag to open the
pathname. Or better yet, use mkstemp(3) or tmpfile(3).</p>

<p>SUSv2 does not mention the use of TMPDIR; glibc will use
it only when the program is not set-user-ID. On SVr4, the
directory used under d) is /tmp (and this is what glibc
does).</p>

<p>Because it dynamically allocates memory used to return
the pathname, tempnam() is reentrant, and thus thread safe,
unlike tmpnam(3).</p>

<p>The tempnam() function generates a different string each
time it is called, up to TMP_MAX (defined in
&lt;stdio.h&gt;) times. If it is called more than TMP_MAX
times, the behavior is implementation defined.</p>

<p>tempnam() uses at most the first five bytes from
pfx.</p>

<p>The glibc implementation of tempnam() will fail with the
error EEXIST upon failure to find a unique name.</p>

<p>BUGS The precise meaning of &quot;appropriate&quot; is
undefined; it is unspecified how accessibility of a
directory is determined.</p>

<p>Never use this function. Use mkstemp(3) or tmpfile(3)
instead.</p>

<p>SEE ALSO mkstemp(3), mktemp(3), tmpfile(3),
tmpnam(3)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>2008-08-06 TEMPNAM(3)</p>
<hr>
</body>
</html>
