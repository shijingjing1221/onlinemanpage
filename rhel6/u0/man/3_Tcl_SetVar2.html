<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:21:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>Tcl_SetVar(3) Tcl Library Procedures Tcl_SetVar(3)</p>


<p>______________________________________________________________________________</p>

<p>NAME Tcl_SetVar2Ex, Tcl_SetVar, Tcl_SetVar2,
Tcl_ObjSetVar2, Tcl_GetVar2Ex, Tcl_GetVar, Tcl_GetVar2,
Tcl_ObjGetVar2, Tcl_UnsetVar, Tcl_UnsetVar2 - manipulate Tcl
variables</p>

<p>SYNOPSIS #include &lt;tcl.h&gt;</p>

<p>Tcl_Obj * Tcl_SetVar2Ex(interp, name1, name2,
newValuePtr, flags)</p>

<p>const char * Tcl_SetVar(interp, varName, newValue,
flags)</p>

<p>const char * Tcl_SetVar2(interp, name1, name2, newValue,
flags)</p>

<p>Tcl_Obj * Tcl_ObjSetVar2(interp, part1Ptr, part2Ptr,
newValuePtr, flags)</p>

<p>Tcl_Obj * Tcl_GetVar2Ex(interp, name1, name2, flags)</p>

<p>const char * Tcl_GetVar(interp, varName, flags)</p>

<p>const char * Tcl_GetVar2(interp, name1, name2,
flags)</p>

<p>Tcl_Obj * Tcl_ObjGetVar2(interp, part1Ptr, part2Ptr,
flags)</p>

<p>int Tcl_UnsetVar(interp, varName, flags)</p>

<p>int Tcl_UnsetVar2(interp, name1, name2, flags)</p>

<p>ARGUMENTS Tcl_Interp *interp (in) Interpreter containing
variable.</p>

<p>const char *name1 (in) Contains the name of an array
variable (if name2 is non-NULL) or (if name2 is NULL) either
the name of a scalar variable or a complete name including
both variable name and index. May include :: namespace
qualifiers to specify a variable in a par- ticular
namespace.</p>

<p>const char *name2 (in) If non-NULL, gives name of ele-
ment within array; in this case name1 must refer to an array
variable.</p>

<p>Tcl_Obj *newValuePtr (in) Points to a Tcl object
containing the new value for the variable.</p>

<p>int flags (in) OR-ed combination of bits provid- ing
additional information. See below for valid values.</p>

<p>const char *varName (in) Name of variable. May include
:: namespace qualifiers to specify a variable in a
particular names- pace. May refer to a scalar variable or an
element of an array.</p>

<p>const char *newValue (in) New value for variable,
specified as a null-terminated string. A copy of this value
is stored in the variable.</p>

<p>Tcl_Obj *part1Ptr (in) Points to a Tcl object containing
the variable s name. The name may include a series of ::
names- pace qualifiers to specify a variable in a particular
names- pace. May refer to a scalar variable or an element of
an array variable.</p>

<p>Tcl_Obj *part2Ptr (in) If non-NULL, points to an object
containing the name of an element within an array and
part1Ptr must refer to an array variable.
_________________________________________________________________</p>

<p>DESCRIPTION These procedures are used to create, modify,
read, and delete Tcl vari- ables from C code.</p>

<p>Tcl_SetVar2Ex, Tcl_SetVar, Tcl_SetVar2, and
Tcl_ObjSetVar2 will create a new variable or modify an
existing one. These procedures set the given variable to the
value given by newValuePtr or newValue and return a pointer
to the variables new value, which is stored in Tcls vari-
able structure. Tcl_SetVar2Ex and Tcl_ObjSetVar2 take the
new value as a Tcl_Obj and return a pointer to a Tcl_Obj.
Tcl_SetVar and Tcl_Set- Var2 take the new value as a string
and return a string; they are usu- ally less efficient than
Tcl_ObjSetVar2. Note that the return value may be different
than the newValuePtr or newValue argument, due to mod-
ifications made by write traces. If an error occurs in
setting the variable (e.g. an array variable is referenced
without giving an index into the array) NULL is returned and
an error message is left in interps result if the
TCL_LEAVE_ERR_MSG flag bit is set.</p>

<p>Tcl_GetVar2Ex, Tcl_GetVar, Tcl_GetVar2, and
Tcl_ObjGetVar2 return the current value of a variable. The
arguments to these procedures are treated in the same way as
the arguments to the procedures described above. Under
normal circumstances, the return value is a pointer to the
variable s value. For Tcl_GetVar2Ex and Tcl_ObjGetVar2 the
value is returned as a pointer to a Tcl_Obj. For Tcl_GetVar
and Tcl_GetVar2 the value is returned as a string; this is
usually less efficient, so Tcl_GetVar2Ex or Tcl_ObjGetVar2
are preferred. If an error occurs while reading the variable
(e.g. the variable does not exist or an array element is
specified for a scalar variable), then NULL is returned and
an error message is left in interps result if the
TCL_LEAVE_ERR_MSG flag bit is set.</p>

<p>Tcl_UnsetVar and Tcl_UnsetVar2 may be used to remove a
variable, so that future attempts to read the variable will
return an error. The arguments to these procedures are
treated in the same way as the argu- ments to the procedures
above. If the variable is successfully removed then TCL_OK
is returned. If the variable cannot be removed because it
does not exist then TCL_ERROR is returned and an error
message is left in interps result if the TCL_LEAVE_ERR_MSG
flag bit is set. If an array element is specified, the given
element is removed but the array remains. If an array name
is specified without an index, then the entire array is
removed.</p>

<p>The name of a variable may be specified to these
procedures in four ways:</p>

<p>[1] If Tcl_SetVar, Tcl_GetVar, or Tcl_UnsetVar is
invoked, the vari- able name is given as a single string,
varName. If varName con- tains an open parenthesis and ends
with a close parenthesis, then the value between the
parentheses is treated as an index (which can have any
string value) and the characters before the first open
parenthesis are treated as the name of an array vari- able.
If varName does not have parentheses as described above,
then the entire string is treated as the name of a scalar
vari- able.</p>

<p>[2] If the name1 and name2 arguments are provided and
name2 is non- NULL, then an array element is specified and
the array name and index have already been separated by the
caller: name1 contains the name and name2 contains the
index. An error is generated if name1 contains an open
parenthesis and ends with a close paren- thesis (array
element) and name2 is non-NULL.</p>

<p>[3] If name2 is NULL, name1 is treated just like varName
in case [1] above (it can be either a scalar or an array
element variable name).</p>

<p>The flags argument may be used to specify any of several
options to the procedures. It consists of an OR-ed
combination of the following bits.</p>

<p>TCL_GLOBAL_ONLY Under normal circumstances the
procedures look up variables as follows. If a procedure call
is active in interp, the variable is looked up at the
current level of procedure call. Otherwise, the variable is
looked up first in the current namespace, then in the global
namespace. However, if this bit is set in flags then the
variable is looked up only in the global namespace even if
there is a procedure call active. If both TCL_GLOBAL_ONLY
and TCL_NAMESPACE_ONLY are given, TCL_GLOBAL_ONLY is
ignored.</p>

<p>TCL_NAMESPACE_ONLY If this bit is set in flags then the
variable is looked up only in the current namespace; if a
procedure is active its variables are ignored, and the
global namespace is also ignored unless it is the current
namespace.</p>

<p>TCL_LEAVE_ERR_MSG If an error is returned and this bit
is set in flags, then an error message will be left in the
interpreters result, where it can be retrieved with
Tcl_GetObjResult or Tcl_GetStringResult. If this flag bit is
not set then no error message is left and the interpreters
result will not be modified.</p>

<p>TCL_APPEND_VALUE If this bit is set then newValuePtr or
newValue is appended to the current value instead of
replacing it. If the variable is currently undefined, then
the bit is ignored. This bit is only used by the Tcl_Set*
procedures.</p>

<p>TCL_LIST_ELEMENT If this bit is set, then newValue is
converted to a valid Tcl list element before setting (or
appending to) the variable. A separator space is appended
before the new list element unless the list element is going
to be the first element in a list or sublist (i.e. the
variables current value is empty, or contains the single
character {, or ends in } ). When appending, the original
value of the variable must also be a valid list, so that the
operation is the appending of a new list element onto a
list.</p>

<p>Tcl_GetVar and Tcl_GetVar2 return the current value of a
variable. The arguments to these procedures are treated in
the same way as the argu- ments to Tcl_SetVar and
Tcl_SetVar2. Under normal circumstances, the return value is
a pointer to the variables value (which is stored in Tcl s
variable structure and will not change before the next call
to Tcl_SetVar or Tcl_SetVar2). Tcl_GetVar and Tcl_GetVar2
use the flag bits TCL_GLOBAL_ONLY and TCL_LEAVE_ERR_MSG,
both of which have the same meaning as for Tcl_SetVar. If an
error occurs in reading the variable (e.g. the variable does
not exist or an array element is specified for a scalar
variable), then NULL is returned.</p>

<p>Tcl_UnsetVar and Tcl_UnsetVar2 may be used to remove a
variable, so that future calls to Tcl_GetVar or Tcl_GetVar2
for the variable will return an error. The arguments to
these procedures are treated in the same way as the
arguments to Tcl_GetVar and Tcl_GetVar2. If the vari- able
is successfully removed then TCL_OK is returned. If the
variable cannot be removed because it does not exist then
TCL_ERROR is returned. If an array element is specified, the
given element is removed but the array remains. If an array
name is specified without an index, then the entire array is
removed.</p>

<p>SEE ALSO Tcl_GetObjResult, Tcl_GetStringResult,
Tcl_TraceVar</p>

<p>KEYWORDS array, get variable, interpreter, object,
scalar, set, unset, variable</p>

<p>Tcl 8.1 Tcl_SetVar(3)</p>
<hr>
</body>
</html>
