<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:07:55 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MULTIPATH.CONF(5) MULTIPATH.CONF(5)</p>

<p>NAME multipath.conf - multipath daemon configuration
file</p>

<p>DESCRIPTION multipath.conf is the configuration file for
the multipath daemon. It is used to overwrite the built-in
configuration table of multipathd. Any line whose first
non-white-space character is a # is considered a comment
line. Empty lines are ignored.</p>

<p>SYNTAX The configuration file contains entries of the
form:</p>

<p>&lt;section&gt; { &lt;attribute&gt; &lt;value&gt; ...
&lt;subsection&gt; { &lt;attribute&gt; &lt;value&gt; ... }
}</p>

<p>Each section contains one or more attributes or
subsections. The recog- nized keywords for attributes or
subsections depend on the section in which they occor.</p>

<p>The following section keywords are recognized:</p>

<p>defaults This section defines default values for
attributes which are used whenever no specific setting is
given.</p>

<p>blacklist This section defines which devices should be
excluded from the multipath topology discovery.</p>

<p>blacklist_exceptions This section defines which devices
should be included in the multipath topology discovery,
despite being listed in the blacklist section.</p>

<p>multipaths This section defines the multipath
topologies. They are indexed by a World Wide
Identifier(wwid), which is the result of the getuid_callout
program.</p>

<p>devices This section defines the device-specific
settings.</p>

<p>defaults section The defaults section recognizes the
following keywords:</p>

<p>polling_interval interval between two path checks in
seconds For prop- erly functioning paths, the interval
between checks will gradually increase to (4 *
polling_interval); default is 5</p>

<p>udev_dir directory where udev creates its device nodes;
default is /dev</p>

<p>multipath_dir directory where the dynamic shared objects
are stored; default is system dependent, commonly
/lib/multipath</p>

<p>find_multipaths If set to yes , instead of trying to
create a multi- path device for every non-blacklisted path,
multipath will only create a device if one of three
condidions are met. 1 There are at least two non-blacklisted
paths with the same wwid, 2 the user manually forces the
creation, by specifying a device with the multi- path
command, or 3 a path has the same WWID as a mul- tipath
device that was previously created while find_multipaths was
set (even if that multipath device doesn t currently exist).
Whenever a multipath device is created with find_multipaths
set, multipath will remeber the WWID of the device, so that
it will auto- matically create the device again, as soon as
it sees a path with that WWID. This should allow most users
to have multipath automatically choose the correct paths to
make into multipath devices, without having to edit the
blacklist; Default is no</p>

<p>verbosity default verbosity. Higher values increase the
ver- bosity level. Valid levels are between 0 and 6; default
is 2</p>

<p>path_selector The default path selector algorithm to
use; they are offered by the kernel multipath target. There
are three selector algorithms.</p>

<p>round-robin 0 Loop through every path in the path group,
sending the same amount of IO to each.</p>

<p>queue-length 0 Send the next bunch of IO down the path
with the least amount of outstanding IO.</p>

<p>service-time 0 Choose the path for the next bunch of IO
based on the amount of outstanding IO to the path and its
relative throughput.</p>

<p>path_grouping_policy The default path grouping policy to
apply to unspeci- fied multipaths. Possible values are</p>

<p>failover 1 path per priority group</p>

<p>multibus all paths in 1 priority group</p>

<p>group_by_serial 1 priority group per serial number</p>

<p>group_by_prio 1 priority group per priority value. Pri-
orities are determined by callout programs specified as a
global, per-controller or per-multipath option in the
configuration file.</p>

<p>group_by_node_name 1 priority group per target node
name. Target node names are fetched in
/sys/class/fc_transport/target*/node_name.</p>

<p>Default value is multibus.</p>

<p>getuid_callout The default program and args to callout
to obtain a unique path identifier. Should be specified with
an absolute path. Default value is /lib/udev/scsi_id
--whitelisted --device=/dev/%n</p>

<p>prio The default method used to obtain a path priority
value. Possible values are</p>

<p>const Set a priority of one to all paths</p>

<p>emc Generate the path priority for EMC arrays</p>

<p>alua Generate the path priority based on the SCSI-3 ALUA
settings.</p>

<p>tpg_pref Generate the path prority based on the SCSI-3
ALUA settings, using the preferred port bit.</p>

<p>ontap Generate the path priority for NetApp arrays.</p>

<p>rdac Generate the path priority for LSI/Engenio RDAC
controller.</p>

<p>hp_sw Generate the path priority for Compaq/HP
controller in active/standby mode.</p>

<p>hds Generate the path priority for Hitachi HDS Modular
storage arrays.</p>

<p>Default value is const.</p>

<p>features Specify any device-mapper features to be used.
The most common of these features is 1 queue_if_no_path Note
that this can also be set via the no_path_retry keyword.</p>

<p>path_checker The default method used to determine the
paths state. Possible values are</p>

<p>readsector0 Read the first sector of the device</p>

<p>tur Issue a TEST UNIT READY command to the device.</p>

<p>emc_clariion Query the EMC Clariion specific EVPD page
0xC0 to determine the path state.</p>

<p>hp_sw Check the path state for HP storage arrays with
Active/Standby firmware.</p>

<p>rdac Check the path state for LSI/Engenio RDAC storage
controller.</p>

<p>directio Read the first sector with direct I/O.</p>

<p>Default value is readsector0.</p>

<p>failback Tell multipathd how to manage path group
failback.</p>

<p>immediate Immediately failback to the highest prior- ity
pathgroup that contains active paths.</p>

<p>manual Do not perform automatic failback.</p>

<p>followover Only perform automatic failback when the
first path of a pathgroup becomes active. This keeps a node
from automatically fail- ing back when another node
requested the failover.</p>

<p>values &gt; 0 deferred failback (time to defer in sec-
onds)</p>

<p>Default value is manual.</p>

<p>rr_min_io The number of IO to route to a path before
switching to the next in the same path group. Default is
1000</p>

<p>rr_weight If set to priorities the multipath
configurator will assign path weights as &quot;path prio *
rr_min_io&quot;. Possi- ble values are priorities or uniform
uniform</p>

<p>no_path_retry Specify the number of retries until
disable queueing, or fail for immediate failure (no
queueing), queue for never stop queueing. Default is 0.</p>

<p>user_friendly_names If set to yes , using the bindings
file /etc/multi- path/bindings to assign a persistent and
unique alias to the multipath, in the form of
mpath&lt;n&gt;. If set to no use the WWID as the alias. In
either case this be will be overriden by any specific
aliases in the mul- tipaths section. Default is no</p>

<p>queue_without_daemon If set to no , multipathd will
disable queueing for all devices when it is shut down.
Default is yes</p>

<p>flush_on_last_del If set to yes , multipathd will
disable queueing when the last path to a device has been
deleted. Default is no</p>

<p>max_fds Specify the maximum number of file descriptors
that can be opened by multipath and multipathd. This is
equivalent to ulimit -n. A value of max will set this to the
system limit from /proc/sys/fs/nr_open. If this is not set,
the maximum number of open fds is taken from the calling
process. It is usually 1024. To be safe, this should be set
to the maximum number of paths plus 32, if that number is
greated than 1024.</p>

<p>checker_timeout Specify the timeout to user for path
checkers that issue scsi commands with an explict timeout,
in sec- onds; default taken from
/sys/block/sd&lt;x&gt;/device/time- out</p>

<p>fast_io_fail_tmo Specify the number of seconds the scsi
layer will wait after a problem has been detected on a FC
remote port before failing IO to devices on that remote
port. This should be smaller than dev_loss_tmo. Setting this
to off will disable the timeout.</p>

<p>dev_loss_tmo Specify the number of seconds the scsi
layer will wait after a problem has been detected on a FC
remote port before removing it from the system.</p>

<p>mode The mode to use for the multipath device nodes, in
octal; default determined by the process</p>

<p>uid The user id to use for the multipath device nodes.
You may use either the numeric or symbolic uid; default
determined by the process.</p>

<p>gid The group id to use for the mutipath device nodes.
You may use either the numeric or symbolic gid; default
determined by the process.</p>

<p>blacklist section The blacklist section is used to
exclude specific device from inclusion in the multipath
topology. It is most commonly used to exclude local disks or
LUNs for the array controller.</p>

<p>The following keywords are recognized:</p>

<p>wwid The World Wide Identification of a device.</p>

<p>devnode Regular expression of the device nodes to be
excluded.</p>

<p>device Subsection for the device description. This
subsection recognizes the vendor and product keywords. For a
full description of these keywords please see the devices
section description.</p>

<p>blacklist_exceptions section The blacklist_exceptions
section is used to revert the actions of the blacklist
section, ie to include specific device in the multipath
topology. This allows to selectively include devices which
would nor- mally be excluded via the blacklist section.</p>

<p>The following keywords are recognized:</p>

<p>wwid The World Wide Identification of a device.</p>

<p>devnode Regular expression of the device nodes to be
excluded.</p>

<p>device Subsection for the device description. This
subsection recognizes the vendor and product keywords. For a
full description of these keywords please see the devices
section description.</p>

<p>multipaths section The only recognized attribute for the
multipaths section is the multi- path subsection.</p>

<p>The multipath subsection recognizes the following
attributes:</p>

<p>wwid Index of the container. Mandatory for this
subsection.</p>

<p>alias (Optional) symbolic name for the multipath
map.</p>

<p>The following attributes are optional; if not set the
default values are taken from the defaults section:</p>

<p>path_grouping_policy path_selector failback prio
no_path_retry rr_min_io rr_weight flush_on_last_del mode uid
gid</p>

<p>devices section The only recognized attribute for the
devices section is the device subsection.</p>

<p>The device subsection recognizes the following
attributes:</p>

<p>vendor (Mandatory) Vendor identifier</p>

<p>product (Mandatory) Product identifier</p>

<p>revision Revision identifier</p>

<p>product_blacklist Product strings to blacklist for this
vendor</p>

<p>hardware_handler (Optional) The hardware handler to use
for this device type. The following hardware handler are
implemented:</p>

<p>1 emc Hardware handler for EMC storage arrays.</p>

<p>1 alua Hardware handler for SCSI-3 ALUA arrays.</p>

<p>1 hp_sw Hardware handler for Compaq/HP con-
trollers.</p>

<p>1 rdac Hardware handler for the LSI/Engenio RDAC
controllers.</p>

<p>The following attributes are optional; if not set the
default values are taken from the defaults section:</p>

<p>path_grouping_policy getuid_callout path_selector
path_checker features prio failback rr_weight no_path_retry
rr_min_io fast_io_fail_tmo dev_loss_tmo
flush_on_last_del</p>

<p>KNOWN ISSUES The usage of queue_if_no_path option can
lead to D state processes being hung and not killable in
situations where all the paths to the LUN go offline. It is
advisable to use the no_path_retry option instead.</p>

<p>SEE ALSO udev(8), dmsetup(8) multipath(8)
multipathd(8)</p>

<p>AUTHORS multipath was developed by Christophe Varoqui,
&lt;christophe.varo- qui@free.fr&gt; and others.</p>

<p>30 November 2006 MULTIPATH.CONF(5)</p>
<hr>
</body>
</html>
