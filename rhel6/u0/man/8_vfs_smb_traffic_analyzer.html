<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:24:51 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SMB_TRAFFIC_ANALYZER(8) System Administration tools
SMB_TRAFFIC_ANALYZER(8)</p>

<p>NAME vfs_smb_traffic_analyzer - log Samba VFS read and
write operations through a socket to a helper
application</p>

<p>SYNOPSIS vfs objects = smb_traffic_analyzer</p>

<p>DESCRIPTION This VFS module is part of the samba(7)
suite.</p>

<p>The vfs_smb_traffic_analyzer VFS module logs client
write and read operations on a Samba server and sends this
data over a socket to a helper program, which feeds a SQL
database. More information on the helper programs can be
obtained from the homepage of the project at:
http://holger123.wordpress.com/smb-traffic-analyzer/</p>

<p>vfs_smb_traffic_analyzer currently is aware of the
following VFS operations: write pwrite read pread</p>

<p>vfs_smb_traffic_analyzer sends the following data in a
fixed format seperated by a comma through either an internet
or a unix domain socket:</p>


<p>BYTES|USER|DOMAIN|READ/WRITE|SHARE|FILENAME|TIMESTAMP</p>

<p>Description of the records:</p>

<p>&middot; BYTES - the length in bytes of the VFS
operation</p>

<p>&middot; USER - the user who initiated the operation</p>

<p>&middot; DOMAIN - the domain of the user</p>

<p>&middot; READ/WRITE - either &quot;W&quot; for a write
operation or &quot;R&quot; for read</p>

<p>&middot; SHARE - the name of the share on which the VFS
operation occured</p>

<p>&middot; FILENAME - the name of the file that was used
by the VFS operation</p>

<p>&middot; TIMESTAMP - a timestamp, formatted as
&quot;yyyy-mm-dd hh-mm-ss.ms&quot; indicating when the VFS
operation occured</p>

<p>This module is stackable.</p>

<p>OPTIONS smb_traffic_analyzer:mode = STRING If STRING
matches to &quot;unix_domain_socket&quot;, the module will
use a unix domain socket located at /var/tmp/stadsocket, if
STRING contains an different string or is not defined, the
module will use an internet domain socket for data
transfer.</p>

<p>smb_traffic_analyzer:host = STRING The module will send
the data to the system named with the hostname STRING.</p>

<p>smb_traffic_analyzer:port = STRING The module will send
the data using the TCP port given in STRING.</p>

<p>smb_traffic_analyzer:anonymize_prefix = STRING The
module will replace the user names with a prefix given by
STRING and a simple hash number.</p>

<p>smb_traffic_analyzer:total_anonymization = STRING If
STRING matches to &acute;yes&acute;, the module will replace
any user name with the string given by the option
smb_traffic_analyzer:anonymize_prefix, without generating an
additional hash number. This means that any transfer data
will be mapped to a single user, leading to a total
anonymization of user related data.</p>

<p>EXAMPLES The module running on share
&quot;example_share&quot;, using a unix domain socket</p>

<p>[example_share] path = /data/example vfs objects =
smb_traffic_analyzer smb_traffic_analyzer:mode =
unix_domain_socket</p>

<p>The module running on share &quot;example_share&quot;,
using an internet socket, connecting to host
&quot;examplehost&quot; on port 3491.</p>

<p>[example_share] path = /data/example vfs objects =
smb_traffic_analyzer smb_traffic_analyzer:host = examplehost
smb_traffic_analyzer:port = 3491</p>

<p>The module running on share &quot;example_share&quot;,
using an internet socket, connecting to host
&quot;examplehost&quot; on port 3491, anonymizing user names
with the prefix &quot;User&quot;.</p>

<p>[example_share] path = /data/example vfs objects =
smb_traffic_analyzer smb_traffic_analyzer:host = examplehost
smb_traffic_analyzer:port = 3491
smb_traffic_analyzer:anonymize_prefix = User</p>

<p>VERSION This man page is correct for version 3.3 of the
Samba suite.</p>

<p>AUTHOR The original Samba software and related utilities
were created by Andrew Tridgell. Samba is now developed by
the Samba Team as an Open Source project similar to the way
the Linux kernel is developed.</p>

<p>The original version of the VFS module and the helper
tools were created by Holger Hetterich.</p>

<p>Samba 3.5 06/18/2010 SMB_TRAFFIC_ANALYZER(8)</p>
<hr>
</body>
</html>
