<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:14:58 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SENDFILE(2) Linux Programmer s Manual SENDFILE(2)</p>

<p>NAME sendfile - transfer data between file
descriptors</p>

<p>SYNOPSIS #include &lt;sys/sendfile.h&gt;</p>

<p>ssize_t sendfile(int out_fd, int in_fd, off_t *offset,
size_t count);</p>

<p>DESCRIPTION sendfile() copies data between one file
descriptor and another. Because this copying is done within
the kernel, sendfile() is more efficient than the
combination of read(2) and write(2), which would require
transferring data to and from user space.</p>

<p>in_fd should be a file descriptor opened for reading and
out_fd should be a descriptor opened for writing.</p>

<p>If offset is not NULL, then it points to a variable
holding the file offset from which sendfile() will start
reading data from in_fd. When sendfile() returns, this
variable will be set to the offset of the byte following the
last byte that was read. If offset is not NULL, then
sendfile() does not modify the current file offset of in_fd;
otherwise the current file offset is adjusted to reflect the
number of bytes read from in_fd.</p>

<p>count is the number of bytes to copy between the file
descriptors.</p>

<p>Presently (Linux 2.6.9): in_fd, must correspond to a
file which sup- ports mmap(2)-like operations (i.e., it
cannot be a socket); and out_fd must refer to a socket.</p>

<p>Applications may wish to fall back to read(2)/write(2)
in the case where sendfile() fails with EINVAL or
ENOSYS.</p>

<p>RETURN VALUE If the transfer was successful, the number
of bytes written to out_fd is returned. On error, -1 is
returned, and errno is set appropriately.</p>

<p>ERRORS EAGAIN Non-blocking I/O has been selected using
O_NONBLOCK and the write would block.</p>

<p>EBADF The input file was not opened for reading or the
output file was not opened for writing.</p>

<p>EFAULT Bad address.</p>

<p>EINVAL Descriptor is not valid or locked, or an
mmap(2)-like operation is not available for in_fd.</p>

<p>EIO Unspecified error while reading from in_fd.</p>

<p>ENOMEM Insufficient memory to read from in_fd.</p>

<p>VERSIONS sendfile() is a new feature in Linux 2.2. The
include file &lt;sys/send- file.h&gt; is present since glibc
2.1.</p>

<p>CONFORMING TO Not specified in POSIX.1-2001, or other
standards.</p>

<p>Other Unix systems implement sendfile() with different
semantics and prototypes. It should not be used in portable
programs.</p>

<p>NOTES If you plan to use sendfile() for sending files to
a TCP socket, but need to send some header data in front of
the file contents, you will find it useful to employ the
TCP_CORK option, described in tcp(7), to minimize the number
of packets and to tune performance.</p>

<p>In Linux 2.4 and earlier, out_fd could refer to a
regular file, and sendfile() changed the current offset of
that file.</p>

<p>SEE ALSO mmap(2), open(2), socket(2), splice(2)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2004-12-17 SENDFILE(2)</p>
<hr>
</body>
</html>
