<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:08:32 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ntp_misc(5) ntp_misc(5)</p>

<p>NAME ntp_misc - Miscellaneous Options</p>

<p>broadcastdelay seconds The broadcast and multicast modes
require a special calibration to determine the network delay
between the local and remote servers. Ordinarily, this is
done automatically by the initial protocol exchanges between
the client and server. In some cases, the calibration
procedure may fail due to network or server access controls,
for example. This command specifies the default delay to be
used under these circumstances. Typically (for Ethernet), a
number between 0.003 and 0.007 seconds is appropriate. The
default when this command is not used is 0.004 seconds.</p>

<p>calldelay delay This option controls the delay in
seconds between the first and second packets sent in burst
or iburst mode to allow additional time for a modem or ISDN
call to complete.</p>

<p>driftfile driftfile [ minutes [ tolerance ] ] This
command specifies the complete path and name of the file
used to record the frequency of the local clock oscillator.
This is the same operation as the -f command linke option.
If the file exists, it is read at startup in order to set
the ini- tial frequency and then updated once per hour with
the current frequency computed by the daemon. If the file
name is speci- fied, but the file itself does not exist, the
starts with an initial frequency of zero and creates the
file when writing it for the first time. If this command is
not given, the daemon will always start with an initial
frequency of zero. The file format consists of a single line
containing a single floating point number, which records the
frequency offset measured in parts-per-million (PPM). The
file is updated by first writing the current drift value
into a temporary file and then renaming this file to replace
the old version. This implies that ntpd must have write
permission for the directory the drift file is located in,
and that file system links, symbolic or otherwise, should be
avoided.</p>

<p>The two optional values determine how often the file is
writ- ten, and are particuarly useful when is it desirable
to avoid spinning up the disk unnecessarily. The parameter
minutes is how often the file will be written. If omitted or
less than 1, the interval will be 60 minutes (one hour). The
parameter tol- erance is the threshold to skip writing the
new value. If the new value is within tolerance percent of
the last value written (compared out to 3 decimal places),
the write will be skipped. The default is 0.0, which means
that the write will occur unless the current and previous
values are the same. A toler- ance of .1 equates roughly to
a difference in the 2nd decimal place.</p>

<p>enable [ auth | bclient | calibrate | kernel | monitor |
ntp | pps | stats]</p>

<p>disable [ auth | bclient | calibrate | kernel | monitor
| ntp | pps | stats ] Provides a way to enable or disable
various system options. Flags not mentioned are unaffected.
Note that all of these flags can be controlled remotely
using the ntpdc utility pro- gram.</p>

<p>auth Enables the server to synchronize with unconfigured
peers only if the peer has been correctly authenticated
using either public key or private key cryptography. The
default for this flag is enable.</p>

<p>bclient Enables the server to listen for a message from
a broadcast or multicast server, as in the multicast- client
command with default address. The default for this flag is
disable.</p>

<p>calibrate Enables the calibrate feature for reference
clocks. The default for this flag is disable.</p>

<p>kernel Enables the kernel time discipline, if available.
The default for this flag is enable if support is avail-
able, otherwise disable.</p>

<p>monitor Enables the monitoring facility. See the ntpdc
program and the monlist command or further information. The
default for this flag is enable.</p>

<p>ntp Enables time and frequency discipline. In effect,
this switch opens and closes the feedback loop, which is
useful for testing. The default for this flag is enable.</p>

<p>pps Enables the pulse-per-second (PPS) signal when fre-
quency and time is disciplined by the precision time kernel
modifications. See the A Kernel Model for Preci- sion
Timekeeping page for further information. The default for
this flag is disable.</p>

<p>stats Enables the statistics facility. See the
Monitoring Options page for further information. The default
for this flag is disable</p>

<p>includefile includefile This command allows additional
configuration commands to be included from a separate file.
Include files may be nested to a depth of five; upon
reaching the end of any include file, com- mand processing
resumes in the previous configuration file. This option is
useful for sites that run ntpd on multiple hosts, with
(mostly) common options (e.g., a restriction list).</p>

<p>logconfig configkeyword This command controls the amount
and type of output written to the system syslog facility or
the alternate logfile log file. All configkeyword keywords
can be prefixed with =, + and -, where = sets the
syslogmask, + adds and - removes messages. syslog messages
can be controlled in four classes (clock, peer, sys and
sync). Within these classes four types of messages can be
controlled: informational messages (info), event messages
(events), statistics messages (statistics) and status
messages (status). Configuration keywords are formed by
concatenating the message class with the event class. The
all prefix can be used instead of a message class. A message
class may also be followed by the all keyword to
enable/disable all messages of the respective message class.
By default, logconfig output is set to allsync. Thus, a
minimal log configuration could look like this:</p>

<p>logconfig=syncstatus +sysevents</p>

<p>This would just list the synchronizations state of ntpd
and the major system events. For a simple reference server,
the follow- ing minimum message configuration could be
useful:</p>

<p>logconfig=allsync +allclock</p>

<p>This configuration will list all clock information and
synchro- nization information. All other events and messages
about peers, system events and so on is suppressed.</p>

<p>logfile logfile</p>

<p>This command specifies the location of an alternate log
file to be used instead of the default system syslog
facility. This is the same operation as the -l command line
option.</p>

<p>phone dial1 dial2 ... This command is used in
conjunction with the ACTS modem driver (type 18). The
arguments consist of a maximum of 10 telephone numbers used
to dial USNO, NIST or European time services. The Hayes
command ATDT is normally prepended to the number, which can
contain other modem control codes as well.</p>

<p>setvar variable [default] This command adds an
additional system variable. These vari- ables can be used to
distribute additional information such as the access policy.
If the variable of the form name = value is followed by the
default keyword, the variable will be listed as part of the
default system variables (ntpq rv command). These additional
variables serve informational purposes only. They are not
related to the protocol other that they can be listed. The
known protocol variables will always override any variables
defined via the setvar mechanism. There are three special
vari- ables that contain the names of all variable of the
same group. The sys_var_list holds the names of all system
variables. The peer_var_list holds the names of all peer
variables and the clock_var_list holds the names of the
reference clock vari- ables.</p>

<p>tinker [ allan allan | dispersion dispersion | freq freq
| huffpuff huffpuff | panic panic | step step | stepout
stepout ] This command can be used to alter several system
variables in very exceptional circumstances. It should occur
in the configu- ration file before any other configuration
options. The default values of these variables have been
carefully optimized for a wide range of network speeds and
reliability expectations. In general, they interact in
intricate ways that are hard to pre- dict and some
combinations can result in some very nasty behav- ior. Very
rarely is it necessary to change the default values; but,
some folks cant resist twisting the knobs anyway and this
command is for them. Emphasis added: twisters are on their
own and can expect no help from the support group. The
variables operate as follows:</p>

<p>allan allan The argument becomes the new value for the
Allan inter- cept, which is a parameter of the PLL/FLL clock
discipline algorithm. The value is in seconds with default
1500 s, which is appropriate for most computer clocks.</p>

<p>dispersion dispersion The argument becomes the new value
for the dispersion increase rate, normally .000015 s/s.</p>

<p>freq freq The argument becomes the initial value of the
frequency offset in parts-per-million. This overrides the
value in the frequency file, if present, and avoids the ini-
tial training state if it is not.</p>

<p>huffpuff huffpuff The argument becomes the new value for
the experimental huff-n -puff filter span, which determines
the most recent interval the algorithm will search for a
minimum delay. The lower limit is 900 s (15 m), but a more
rea- sonable value is 7200 (2 hours). There is no default,
since the filter is not enabled unless this command is
given.</p>

<p>panic panic The argument is the panic threshold, by
default 1000 s. If set to zero, the panic sanity check is
disabled and a clock offset of any value will be
accepted.</p>

<p>step step The argument is the step threshold, by default
0.128 s. It can be set to any positive number in seconds. If
set to zero, step adjustments will never occur. Note: The
kernel time discipline is disabled if the step thresh- old
is set to zero or greater than the default.</p>

<p>stepout stepout The argument is the stepout timeout, by
default 900 s. It can be set to any positive number in
seconds. If set to zero, the stepout pulses will not be
suppressed.</p>

<p>trap host_address [port port_number] [interface
interface_address] This command configures a trap receiver
at the given host address and port number for sending
messages with the specified local interface address. If the
port number is unspecified, a value of 18447 is used. If the
interface address is not speci- fied, the message is sent
with a source address of the local interface the message is
sent through. Note that on a multi- homed host the interface
used may vary from time to time with routing changes. The
trap receiver will generally log event messages and other
information from the server in a log file. While such
monitor programs may also request their own trap
dynamically, configuring a trap receiver will ensure that no
messages are lost when the server is started.</p>

<p>ttl hop ... This command specifies a list of TTL values
in increasing order. up to 8 values can be specified. In
manycast mode these values are used in turn in an
expanding-ring search. The default is eight multiples of 32
starting at 31.</p>

<p>FILES ntp.drift frequency compensation (PPM)</p>

<p>SEE ALSO ntp.conf(5)</p>

<p>Primary source of documentation:
/usr/share/doc/ntp-*</p>

<p>This file was automatically generated from HTML
source.</p>

<p>ntp_misc(5)</p>
<hr>
</body>
</html>
