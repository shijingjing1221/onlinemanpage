<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:24:02 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>UMOUNT(2) Linux Programmer s Manual UMOUNT(2)</p>

<p>NAME umount, umount2 - unmount file system</p>

<p>SYNOPSIS #include &lt;sys/mount.h&gt;</p>

<p>int umount(const char *target);</p>

<p>int umount2(const char *target, int flags);</p>

<p>DESCRIPTION umount() and umount2() remove the attachment
of the (topmost) file sys- tem mounted on target.</p>

<p>Appropriate privilege (Linux: the CAP_SYS_ADMIN
capability) is required to unmount file systems.</p>

<p>Linux 2.1.116 added the umount2() system call, which,
like umount(), unmounts a target, but allows additional
flags controlling the behavior of the operation:</p>

<p>MNT_FORCE (since Linux 2.1.116) Force unmount even if
busy. This can cause data loss. (Only for NFS mounts.)</p>

<p>MNT_DETACH (since Linux 2.4.11) Perform a lazy unmount:
make the mount point unavailable for new accesses, and
actually perform the unmount when the mount point ceases to
be busy.</p>

<p>MNT_EXPIRE (since Linux 2.6.8) Mark the mount point as
expired. If a mount point is not cur- rently in use, then an
initial call to umount2() with this flag fails with the
error EAGAIN, but marks the mount point as expired. The
mount point remains expired as long as it isnt accessed by
any process. A second umount2() call specifying MNT_EXPIRE
unmounts an expired mount point. This flag cannot be
specified with either MNT_FORCE or MNT_DETACH.</p>

<p>RETURN VALUE On success, zero is returned. On error, -1
is returned, and errno is set appropriately.</p>

<p>ERRORS The error values given below result from
filesystem type independent errors. Each filesystem type may
have its own special errors and its own special behavior.
See the kernel source code for details.</p>

<p>EAGAIN A call to umount2() specifying MNT_EXPIRE
successfully marked an unbusy file system as expired.</p>

<p>EBUSY target could not be unmounted because it is
busy.</p>

<p>EFAULT target points outside the user address space.</p>

<p>EINVAL target is not a mount point. Or, umount2() was
called with MNT_EXPIRE and either MNT_DETACH or
MNT_FORCE.</p>

<p>ENAMETOOLONG A pathname was longer than MAXPATHLEN.</p>

<p>ENOENT A pathname was empty or had a nonexistent
component.</p>

<p>ENOMEM The kernel could not allocate a free page to copy
filenames or data into.</p>

<p>EPERM The caller does not have the required
privileges.</p>

<p>CONFORMING TO These functions are Linux-specific and
should not be used in programs intended to be portable.</p>

<p>NOTES The original umount() function was called as
umount(device) and would return ENOTBLK when called with
something other than a block device. In Linux 0.98p4 a call
umount(dir) was added, in order to support anonymous
devices. In Linux 2.3.99-pre7 the call umount(device) was
removed, leaving only umount(dir) (since now devices can be
mounted in more than one place, so specifying the device
does not suffice).</p>

<p>SEE ALSO mount(2), path_resolution(7), mount(8),
umount(8)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-10-06 UMOUNT(2)</p>
<hr>
</body>
</html>
