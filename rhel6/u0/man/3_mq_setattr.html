<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:07:45 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MQ_GETATTR(3) Linux Programmer s Manual
MQ_GETATTR(3)</p>

<p>NAME mq_getattr, mq_setattr - get/set message queue
attributes</p>

<p>SYNOPSIS #include &lt;mqueue.h&gt;</p>

<p>mqd_t mq_getattr(mqd_t mqdes, struct mq_attr *attr);</p>

<p>mqd_t mq_setattr(mqd_t mqdes, struct mq_attr *newattr,
struct mq_attr *oldattr);</p>

<p>Link with -lrt.</p>

<p>DESCRIPTION mq_getattr() and mq_setattr() respectively
retrieve and modify attributes of the message queue referred
to by the descriptor mqdes.</p>

<p>mq_getattr() returns an mq_attr structure in the buffer
pointed by attr. This structure is defined as:</p>

<p>struct mq_attr { long mq_flags; /* Flags: 0 or
O_NONBLOCK */ long mq_maxmsg; /* Max. # of messages on queue
*/ long mq_msgsize; /* Max. message size (bytes) */ long
mq_curmsgs; /* # of messages currently in queue */ };</p>

<p>The mq_flags field contains flags associated with the
open message queue description. This field is initialized
when the queue is created by mq_open(3). The only flag that
can appear in this field is O_NON- BLOCK.</p>

<p>The mq_maxmsg and mq_msgsize fields are set when the
message queue is created by mq_open(3). The mq_maxmsg field
is an upper limit on the number of messages that may be
placed on the queue using mq_send(3). The mq_msgsize field
is an upper limit on the size of messages that may be placed
on the queue. Both of these fields must have a value greater
than zero. Two /proc files that place ceilings on the values
for these fields are described in mq_open(3).</p>

<p>The mq_curmsgs field returns the number of messages
currently held in the queue.</p>

<p>mq_setattr() sets message queue attributes using
information supplied in the mq_attr structure pointed to by
newattr. The only attribute that can be modified is the
setting of the O_NONBLOCK flag in mq_flags. The other fields
in newattr are ignored. If the oldattr field is not NULL,
then the buffer that it points to is used to return an
mq_attr structure that contains the same information that is
returned by mq_getattr().</p>

<p>RETURN VALUE On success mq_getattr() and mq_setattr()
return 0; on error, -1 is returned, with errno set to
indicate the error.</p>

<p>ERRORS EBADF The descriptor specified in mqdes is
invalid.</p>

<p>EINVAL newattr-&gt;mq_flags contained set bits other
than O_NONBLOCK.</p>

<p>CONFORMING TO POSIX.1-2001.</p>

<p>NOTES On Linux, mq_getattr() and mq_setattr() are
library functions layered on top of the mq_getsetattr(2)
system call.</p>

<p>SEE ALSO mq_close(3), mq_notify(3), mq_open(3),
mq_receive(3), mq_send(3), mq_unlink(3), mq_overview(7)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-09-29 MQ_GETATTR(3)</p>
<hr>
</body>
</html>
