<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:16:16 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SMP_PHY_TEST(8) SMP_UTILS SMP_PHY_TEST(8)</p>

<p>NAME smp_phy_test - invoke PHY TEST FUNTION SMP
function</p>

<p>SYNOPSIS smp_phy_test [--control=CO] [--dwords=DW]
[--expected=EX] [--func- tion=FN] [--help] [--hex]
[--interface=PARAMS] [--linkrate=LR] [--pat- tern=PA]
[--phy=ID] [--raw] [--sa=SAS_ADDR] [--verbose] [--version]
SMP_DEVICE[,N]</p>

<p>DESCRIPTION Sends a SAS Management Protocol (SMP) PHY
TEST FUNCTION request to a SMP target. The SMP target is
identified by the SMP_DEVICE and the SAS_ADDR. Depending on
the interface, the SAS_ADDR may be deduced from the
SMP_DEVICE. With one interface there is one SMP_DEVICE per
machine so the SMP_DEVICE,N syntax is needed to
differentiate between HBAs if there are multiple
present.</p>

<p>The PHY TEST FUNCTION function can be used to start and
stop test pat- tern transmission. When a phy associated with
a SMP target (most likely an expander) starts test pattern
transmission then the attached phy (if there is one) sees a
link down.</p>

<p>SAS phys associated with SSP targets (e.g. a SAS disk)
can generate similar test patterns by using the SEND
DIAGNOSTIC SCSI command with page code 3fh . See the
sg_senddiag utility.</p>

<p>OPTIONS Mandatory arguments to long options are
mandatory for short options as well.</p>

<p>-c, --control=CO set the phy test pattern dwords control
field. The argument CO can be from 0 to 255 inclusive, the
default is 0 (each byte in dwords sent as data byte (Dxx.y)
without scrambling). Only active when pattern is set to 40h
(i.e. &quot;two_dwords&quot;).</p>

<p>-d, --dwords=DW set the phy test pattern dwords field
which is 8 bytes long. The argument DW would normally be
entered in hex with a leading 0x or a trailing h (otherwise
it would be interpreted as decimal). Due to a quirk in the
command line parser, the argu- ment value ffffffffffffffffh
(i.e. all bits sets) needs to be entered as -1.</p>

<p>-E, --expected=EX set the expected expander change count
field in the SMP request. The value EX is from 0 to 65535
inclusive with 0 being the default value. When EX is greater
than zero then if the value doesnt match the expander change
count of the SMP target (i.e. the expander) when the request
arrives then the target ignores the request and sets a
function result of &quot;invalid expander change count&quot;
in the response.</p>

<p>-f, --function=FN set the phy test function field in the
SMP request. Values between 0 and 255 are accepted with the
default being 0. The value 0 stops the selected phy
performing a phy test function. The value 1 starts the
selected phy transmitting the test pat- tern (and anything
that the phy receives is discarded).</p>

<p>-h, --help output the usage message then exit.</p>

<p>-H, --hex output the response in hexadecimal.</p>

<p>-I, --interface=PARAMS interface specific parameters. In
this case &quot;interface&quot; refers to the path through
the operating system to the SMP initiator. See the smp_utils
man page for more information.</p>

<p>-l, --linkrate=LR transmits the test pattern at the
specified physical link rate: 8 -&gt; 1.5 Gbps, 9 -&gt; 3
Gbps, 10 -&gt; 6 Gbps. Default value is 9.</p>

<p>-P, --pattern=PA specifies the type of test pattern to
transmit. SAS-2 (rev15) values are: 1 -&gt; JTPAT, 2 -&gt;
CJTPAT, 10h -&gt; TRAIN, 11h -&gt; TRAIN_DONE, 12h -&gt;
IDLE, 13h -&gt; SCRAMBLED_0, 40h -&gt;
&quot;two_dwords&quot;. Default value is 2.</p>

<p>-p, --phy=ID phy identifier. ID is a value between 0 and
127. Default is 0.</p>

<p>-r, --raw send the response to stdout in binary. All
error messages are sent to stderr.</p>

<p>-s, --sa=SAS_ADDR specifies the SAS address of the SMP
target device. Typically this is an expander. This option
may not be needed if the SMP_DEVICE has the targets SAS
address within it. The SAS_ADDR is in decimal but most SAS
addresses are shown in hexadecimal. To give a number in
hexadecimal either prefix it with 0x or put a trailing h on
it.</p>

<p>-v, --verbose increase the verbosity of the output. Can
be used multiple times</p>

<p>-V, --version print the version string and then
exit.</p>

<p>CONFORMING TO The SMP PHY TEST function was introduced
in SAS-1.1 and enhanced in SAS-2 .</p>

<p>AUTHORS Written by Douglas Gilbert.</p>

<p>REPORTING BUGS Report bugs to &lt;dgilbert at interlog
dot com&gt;.</p>

<p>COPYRIGHT Copyright &copy; 2006-2008 Douglas Gilbert
This software is distributed under a FreeBSD license. There
is NO war- ranty; not even for MERCHANTABILITY or FITNESS
FOR A PARTICULAR PUR- POSE.</p>

<p>SEE ALSO smp_utils, sg_senddiag(sg3_utils)</p>

<p>smp_utils-0.93 December 2008 SMP_PHY_TEST(8)</p>
<hr>
</body>
</html>
