<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:59:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FALLOCATE(2) Linux Programmer s Manual FALLOCATE(2)</p>

<p>NAME fallocate - manipulate file space</p>

<p>SYNOPSIS #define _GNU_SOURCE #include
&lt;fcntl.h&gt;</p>

<p>int fallocate(int fd, int mode, off_t offset, off_t
len);</p>

<p>DESCRIPTION This is a non-portable, Linux-specific
system call. For the portable, POSIX.1-specified method of
ensuring that space is allocated for a file, see
posix_fallocate().</p>

<p>fallocate() allows the caller to directly manipulate the
allocated disk space for the file referred to by fd for the
byte range starting at offset and continuing for len
bytes.</p>

<p>The mode argument determines the operation to be
performed on the given range. Currently only one flag is
supported for mode:</p>

<p>FALLOC_FL_KEEP_SIZE This flag allocates and initializes
to zero the disk space within the range specified by offset
and len. After a success- ful call, subsequent writes into
this range are guaranteed not to fail because of lack of
disk space. Preallocating zeroed blocks beyond the end of
the file is useful for optimizing append workloads.
Preallocating blocks does not change the file size (as
reported by stat(2)) even if it is less than off-
set+len.</p>

<p>If FALLOC_FL_KEEP_SIZE flag is not specified in mode,
the default behavior is almost same as when this flag is
specified. The only dif- ference is that on success, the
file size will be changed if offset + len is greater than
the file size. This default behavior closely resembles the
behavior of the posix_fallocate(3) library function, and is
intended as a method of optimally implementing that
function.</p>

<p>Because allocation is done in block size chunks,
fallocate() may allo- cate a larger range than that which
was specified.</p>

<p>RETURN VALUE fallocate() returns zero on success, and -1
on failure.</p>

<p>ERRORS EBADF fd is not a valid file descriptor, or is
not opened for writing.</p>

<p>EFBIG offset+len exceeds the maximum file size.</p>

<p>EINTR A signal was caught during execution.</p>

<p>EINVAL offset was less than 0, or len was less than or
equal to 0.</p>

<p>EIO An I/O error occurred while reading from or writing
to a file system.</p>

<p>ENODEV fd does not refer to a regular file or a
directory. (If fd is a pipe or FIFO, a different error
results.)</p>

<p>ENOSPC There is not enough space left on the device
containing the file referred to by fd.</p>

<p>ENOSYS The file system containing the file referred to
by fd does not support this operation.</p>

<p>EOPNOTSUPP The mode is not supported by the file system
containing the file referred to by fd.</p>

<p>VERSIONS fallocate() is available on Linux since kernel
2.6.23. Support is pro- vided by glibc since version
2.10.</p>

<p>CONFORMING TO fallocate() is Linux-specific.</p>

<p>SEE ALSO ftruncate(2), posix_fadvise(3),
posix_fallocate(3)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2009-03-13 FALLOCATE(2)</p>
<hr>
</body>
</html>
