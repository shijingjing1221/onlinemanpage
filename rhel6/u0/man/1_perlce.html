<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:10:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERLCE(1) Perl Programmers Reference Guide PERLCE(1)</p>

<p>NAME perlce - Perl for WinCE</p>

<p>Building Perl for WinCE DESCRIPTION This file gives the
instructions for building Perl5.8 and above for WinCE.
Please read and understand the terms under which this
software is distributed.</p>

<p>General explanations on cross-compiling WinCE &middot;
&quot;miniperl&quot; is built. This is a single executable
(without DLL), intended to run on Win32, and it will
facilitate remaining build process; all binaries built after
it are foreign and should not run locally.</p>

<p>&quot;miniperl&quot; is built using
&quot;./win32/Makefile&quot;; this is part of normal build
process invoked as dependency from wince/Makefile.ce</p>

<p>&middot; After &quot;miniperl&quot; is built,
&quot;configpm&quot; is invoked to create right
&quot;Config.pm&quot; in right place and its corresponding
Cross.pm.</p>

<p>Unlike Win32 build, miniperl will not have
&quot;Config.pm&quot; of host within reach; it rather will
use &quot;Config.pm&quot; from within cross- compilation
directories.</p>

<p>File &quot;Cross.pm&quot; is dead simple: for given
cross-architecture places in @INC a path where perl modules
are, and right &quot;Config.pm&quot; in that place.</p>

<p>That said, &quot;miniperl -Ilib -MConfig -we 1&quot;
should report an error, because it can not find
&quot;Config.pm&quot;. If it does not give an error -- wrong
&quot;Config.pm&quot; is substituted, and resulting binaries
will be a mess.</p>

<p>&quot;miniperl -MCross -MConfig -we 1&quot; should run
okay, and it will provide right &quot;Config.pm&quot; for
further compilations.</p>

<p>&middot; During extensions build phase, a script
&quot;./win32/buldext.pl&quot; is invoked, which in turn
steps in &quot;./ext&quot; subdirectories and performs a
build of each extension in turn.</p>

<p>All invokes of &quot;Makefile.PL&quot; are provided with
&quot;-MCross&quot; so to enable cross- compile.</p>

<p>BUILD This section describes the steps to be performed
to build PerlCE. You may find additional information about
building perl for WinCE at
&lt;http://perlce.sourceforge.net&gt; and some pre-built
binaries.</p>

<p>Tools &amp; SDK</p>

<p>For compiling, you need following:</p>

<p>&middot; Microsoft Embedded Visual Tools</p>

<p>&middot; Microsoft Visual C++</p>

<p>&middot; Rainer Keuchels celib-sources</p>

<p>&middot; Rainer Keuchels console-sources</p>

<p>Needed source files can be downloaded at
&lt;http://www.rainer-keuchel.de/wince/dirlist.html&gt;</p>

<p>Make</p>

<p>Normally you only need to edit
&quot;./win32/ce-helpers/compile.bat&quot; to reflect your
system and run it.</p>

<p>File &quot;./win32/ce-helpers/compile.bat&quot; is
actually a wrapper to call &quot;nmake -f makefile.ce&quot;
with appropriate parameters and it accepts extra parameters
and forwards them to &quot;nmake&quot; command as additional
arguments. You should pass target this way.</p>

<p>To prepare distribution you need to do following:</p>

<p>&middot; go to &quot;./win32&quot; subdirectory</p>

<p>&middot; edit file
&quot;./win32/ce-helpers/compile.bat&quot;</p>

<p>&middot; run compile.bat</p>

<p>&middot; run compile.bat dist</p>

<p>&quot;Makefile.ce&quot; has &quot;CROSS_NAME&quot;
macro, and it is used further to refer to your
cross-compilation scheme. You could assign a name to it, but
this is not necessary, because by default it is assigned
after your machine configuration name, such as
&quot;wince-sh3-hpc-wce211&quot;, and this is enough to
distinguish different builds at the same time. This option
could be handy for several different builds on same platform
to perform, say, threaded build. In a following example we
assume that all required environment variables are set
properly for C cross-compiler (a special *.bat file could
fit perfectly to this purpose) and your
&quot;compile.bat&quot; has proper &quot;MACHINE&quot;
parameter set, to, say,
&quot;wince-mips-pocket-wce300&quot;.</p>

<p>compile.bat compile.bat dist compile.bat
CROSS_NAME=mips-wce300-thr &quot;USE_ITHREADS=define&quot;
&quot;USE_IMP_SYS=define&quot; &quot;USE_MULTI=define&quot;
compile.bat CROSS_NAME=mips-wce300-thr
&quot;USE_ITHREADS=define&quot;
&quot;USE_IMP_SYS=define&quot; &quot;USE_MULTI=define&quot;
dist</p>

<p>If all goes okay and no errors during a build, you ll
get two independent distributions:
&quot;wince-mips-pocket-wce300&quot; and
&quot;mips-wce300-thr&quot;.</p>

<p>Target &quot;dist&quot; prepares distribution file set.
Target &quot;zipdist&quot; performs same as &quot;dist&quot;
but additionally compresses distribution files into zip
archive.</p>

<p>NOTE: during a build there could be created a number (or
one) of &quot;Config.pm&quot; for cross-compilation
(&quot;foreign&quot; &quot;Config.pm&quot;) and those are
hidden inside &quot;../xlib/$(CROSS_NAME)&quot; with other
auxilary files, but, and this is important to note, there
should be no &quot;Config.pm&quot; for host miniperl. If
youll get an error that perl could not find Config.pm
somewhere in building process this means something went
wrong. Most probably you forgot to specify a
cross-compilation when invoking miniperl.exe to Makefile.PL
When building an extension for cross- compilation your
command line should look like</p>

<p>..niperl.exe -I.. -MCross=mips-wce300-thr
Makefile.PL</p>

<p>or just</p>

<p>..niperl.exe -I.. -MCross Makefile.PL</p>

<p>to refer a cross-compilation that was created last
time.</p>

<p>All questions related to building for WinCE devices
could be asked in perlce-user@lists.sourceforge.net mailing
list.</p>

<p>Using Perl on WinCE DESCRIPTION PerlCE is currently
linked with a simple console window, so it also works on
non-hpc devices.</p>

<p>The simple stdio implementation creates the files
&quot;stdin.txt&quot;, &quot;stdout.txt&quot; and
&quot;stderr.txt&quot;, so you might examine them if your
console has only a liminted number of cols.</p>

<p>When exitcode is non-zero, a message box appears,
otherwise the console closes, so you might have to catch an
exit with status 0 in your program to see any output.</p>

<p>stdout/stderr now go into the files
&quot;/perl-stdout.txt&quot; and
&quot;/perl-stderr.txt.&quot;</p>

<p>PerlIDE is handy to deal with perlce.</p>

<p>LIMITATIONS No fork(), pipe(), popen() etc.</p>

<p>ENVIRONMENT All environment vars must be stored in
HKLM0ironment as strings. They are read at process
startup.</p>

<p>PERL5LIB Usual perl lib path (semi-list).</p>

<p>PATH Semi-list for executables.</p>

<p>TMP - Tempdir.</p>

<p>UNIXROOTPATH - Root for accessing some special files,
i.e. &quot;/dev/null&quot;, &quot;/etc/services&quot;.</p>

<p>ROWS/COLS - Rows/cols for console.</p>

<p>HOME - Home directory.</p>

<p>CONSOLEFONTSIZE - Size for console font.</p>

<p>You can set these with cereg.exe, a (remote) registry
editor or via the PerlIDE.</p>

<p>REGISTRY To start perl by clicking on a perl source
file, you have to make the according entries in HKCR (see
&quot;ce-helpers/wince-reg.bat&quot;). cereg.exe (which must
be executed on a desktop pc with ActiveSync) is reported not
to work on some devices. You have to create the registry
entries by hand using a registry editor.</p>

<p>XS The following Win32-Methods are built-in:</p>

<p>newXS(&quot;Win32::GetCwd&quot;, w32_GetCwd, file);
newXS(&quot;Win32::SetCwd&quot;, w32_SetCwd, file);
newXS(&quot;Win32::GetTickCount&quot;, w32_GetTickCount,
file); newXS(&quot;Win32::GetOSVersion&quot;,
w32_GetOSVersion, file); newXS(&quot;Win32::IsWinNT&quot;,
w32_IsWinNT, file); newXS(&quot;Win32::IsWin95&quot;,
w32_IsWin95, file); newXS(&quot;Win32::IsWinCE&quot;,
w32_IsWinCE, file); newXS(&quot;Win32::CopyFile&quot;,
w32_CopyFile, file); newXS(&quot;Win32::Sleep&quot;,
w32_Sleep, file); newXS(&quot;Win32::MessageBox&quot;,
w32_MessageBox, file);
newXS(&quot;Win32::GetPowerStatus&quot;, w32_GetPowerStatus,
file); newXS(&quot;Win32::GetOemInfo&quot;, w32_GetOemInfo,
file); newXS(&quot;Win32::ShellEx&quot;, w32_ShellEx,
file);</p>

<p>BUGS Opening files for read-write is currently not
supported if they use stdio (normal perl file handles).</p>

<p>If you find bugs or if it does not work at all on your
device, send mail to the address below. Please report the
details of your device (processor, ceversion, devicetype
(hpc/palm/pocket)) and the date of the downloaded files.</p>

<p>INSTALLATION Currently installation instructions are at
&lt;http://perlce.sourceforge.net/&gt;.</p>

<p>After installation &amp; testing processes will
stabilize, information will be more precise.</p>

<p>ACKNOWLEDGEMENTS The port for Win32 was used as a
reference.</p>

<p>History of WinCE port 5.6.0 Initial port of perl to
WinCE. It was performed in separate directory named
&quot;wince&quot;. This port was based on contents of
&quot;./win32&quot; directory. &quot;miniperl&quot; was not
built, user must have HOST perl and properly edit
&quot;makefile.ce&quot; to reflect this.</p>

<p>5.8.0 wince port was kept in the same
&quot;./wince&quot; directory, and
&quot;wince/Makefile.ce&quot; was used to invoke native
compiler to create HOST miniperl, which then facilitates
cross-compiling process. Extension building support was
added.</p>

<p>5.9.4 Two directories &quot;./win32&quot; and
&quot;./wince&quot; were merged, so perlce build process
comes in &quot;./win32&quot; directory.</p>

<p>AUTHORS Rainer Keuchel &lt;coyxc@rainer-keuchel.de&gt;
provided initial port of Perl, which appears to be most
essential work, as it was a breakthrough on having Perl
ported at all. Many thanks and obligations to Rainer!</p>

<p>Vadim Konovalov made further support of WinCE port.</p>

<p>perl v5.10.1 2009-08-22 PERLCE(1)</p>
<hr>
</body>
</html>
