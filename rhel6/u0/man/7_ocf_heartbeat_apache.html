<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:08:35 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_APACHE(7) OCF resource agents
OCF_HEARTBEAT_APACHE(7)</p>

<p>NAME ocf_heartbeat_apache - Manages an Apache web server
instance</p>

<p>SYNOPSIS apache [start | stop | status | monitor |
meta-data | validate-all]</p>

<p>DESCRIPTION This is the resource agent for the Apache
web server. Thie resource agent operates both version 1.x
and version 2.x Apache servers. The start operation ends
with a loop in which monitor is repeatedly called to make
sure that the server started and that it is operational.
Hence, if the monitor operation does not succeed within the
start operation timeout, the apache resource will end with
an error status. The monitor operation by default loads the
server status page which depends on the mod_status module
and the corresponding configuration file (usually
/etc/apache2/mod_status.conf). Make sure that the server
status page works and that the access is allowed *only* from
localhost (address 127.0.0.1). See the statusurl and
testregex attributes for more details. See also
http://httpd.apache.org/</p>

<p>SUPPORTED PARAMETERS configfile The full pathname of the
Apache configuration file. This file is parsed to provide
defaults for various other resource agent parameters.
(optional, string, default /etc/apache2/httpd.conf)</p>

<p>httpd The full pathname of the httpd binary (optional).
(optional, string, default /usr/sbin/httpd)</p>

<p>port A port number that we can probe for status
information using the statusurl. This will default to the
port number found in the configuration file, or 80, if none
can be found in the configuration file. (optional, integer,
no default)</p>

<p>statusurl The URL to monitor (the apache server status
page by default). If left unspecified, it will be inferred
from the apache configuration file. If you set this, make
sure that it succeeds *only* from the localhost (127.0.0.1).
Otherwise, it may happen that the cluster complains about
the resource being active on multiple nodes. (optional,
string, no default)</p>

<p>testregex Regular expression to match in the output of
statusurl. Case insensitive. (optional, string, default
exists, but impossible to show in a human readable format
(try grep testregex))</p>

<p>client Client to use to query to Apache. If not
specified, the RA will try to find one on the system.
Currently, wget and curl are supported. For example, you can
set this paramter to &quot;curl&quot; if you prefer that to
wget. (optional, string, no default)</p>

<p>testurl URL to test. If it does not start with
&quot;http&quot;, then it&acute;s considered to be relative
to the Listen address. (optional, string, no default)</p>

<p>testregex10 Regular expression to match in the output of
testurl. Case insensitive. (optional, string, no
default)</p>

<p>testconffile A file which contains test configuration.
Could be useful if you have to check more than one web
application or in case sensitive info should be passed as
arguments (passwords). Furthermore, using a config file is
the only way to specify certain parameters. Please see
README.webapps for examples and file description. (optional,
string, no default)</p>

<p>testname Name of the test within the test configuration
file. (optional, string, no default)</p>

<p>options Extra options to apply when starting apache. See
man httpd(8). (optional, string, no default)</p>

<p>envfiles Files (one or more) which contain extra
environment variables. If you want to prevent script from
reading the default file, set this parameter to empty
string. (optional, string, default /etc/apache2/envvars)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
40s.</p>

<p>stop Stops the resource. Suggested minimum timeout:
60s.</p>

<p>status Performs a status check. Suggested minimum
timeout: 30s.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 20s. Suggested interval: 10.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 5.</p>

<p>EXAMPLE The following is an example configuration for a
apache resource using the crm(8) shell:</p>

<p>primitive example_apache ocf:heartbeat:apache op monitor
depth=&quot;0&quot; timeout=&quot;20s&quot;
interval=&quot;10&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/apache_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>resource-agents 1.0.3 07/21/2010
OCF_HEARTBEAT_APACHE(7)</p>
<hr>
</body>
</html>
