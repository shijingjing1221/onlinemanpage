<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:16:16 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SMPQUERY(8) OpenIB Diagnostics SMPQUERY(8)</p>

<p>NAME smpquery - query InfiniBand subnet management
attributes</p>

<p>SYNOPSIS smpquery [-d(ebug)] [-e(rr_show)] [-v(erbose)]
[-D(irect)] [-G(uid)] [-C ca_name] [-P ca_port] [-t(imeout)
timeout_ms] [--node-name-map node-name-map] [-V(ersion)]
[-h(elp)] &lt;op&gt; &lt;dest dr_path|lid|guid&gt; [op
params]</p>

<p>DESCRIPTION smpquery allows a basic subset of standard
SMP queries including the following: node info, node
description, switch info, port info. Fields are displayed in
human readable format.</p>

<p>OPTIONS Current supported operations and their
parameters: nodeinfo &lt;addr&gt; nodedesc &lt;addr&gt;
portinfo &lt;addr&gt; [&lt;portnum&gt;] # default port is
zero switchinfo &lt;addr&gt; pkeys &lt;addr&gt;
[&lt;portnum&gt;] sl2vl &lt;addr&gt; [&lt;portnum&gt;] vlarb
&lt;addr&gt; [&lt;portnum&gt;] guids &lt;addr&gt;</p>

<p>--node-name-map &lt;node-name-map&gt; Specify a node
name map. The node name map file maps GUIDs to more user
friendly names. See ibnetdiscover(8) for node name map file
format.</p>

<p>COMMON OPTIONS Most OpenIB diagnostics take the
following common flags. The exact list of supported flags
per utility can be found in the usage message and can be
shown using the util_name -h syntax.</p>

<p># Debugging flags</p>

<p>-d raise the IB debugging level. May be used several
times (-ddd or -d -d -d).</p>

<p>-e show send and receive errors (timeouts and
others)</p>

<p>-h show the usage message</p>

<p>-v increase the application verbosity level. May be used
several times (-vv or -v -v -v)</p>

<p>-V show the version info.</p>

<p># Addressing flags</p>

<p>-D use directed path address arguments. The path is a
comma separated list of out ports. Examples: &quot;0&quot; #
self port &quot;0,1,2,1,4&quot; # out via port 1, then 2,
...</p>

<p>-c use combined route address arguments. The address is
a combination of a LID and a direct route path. The LID
specified is the DLID and the local LID is used as the
DrSLID.</p>

<p>-G use GUID address argument. In most cases, it is the
Port GUID. Example: &quot;0x08f1040023&quot;</p>

<p>-s &lt;smlid&gt; use smlid as the target lid for SM/SA
queries.</p>

<p># Other common flags:</p>

<p>-C &lt;ca_name&gt; use the specified ca_name.</p>

<p>-P &lt;ca_port&gt; use the specified ca_port.</p>

<p>-t &lt;timeout_ms&gt; override the default timeout for
the solicited mads.</p>

<p>Multiple CA/Multiple Port Support</p>

<p>When no IB device or port is specified, the port to use
is selected by the following criteria:</p>

<p>1. the first port that is ACTIVE.</p>

<p>2. if not found, the first port that is UP (physical
link up).</p>

<p>If a port and/or CA name is specified, the user request
is attempted to be fulfilled, and will fail if it is not
possible.</p>

<p>EXAMPLES smpquery portinfo 3 1 # portinfo by lid, with
port modifier</p>

<p>smpquery -G switchinfo 0x2C9000100D051 1 # switchinfo by
guid</p>

<p>smpquery -D nodeinfo 0 # nodeinfo by direct route</p>

<p>smpquery -c nodeinfo 6 0,12 # nodeinfo by combined
route</p>

<p>SEE ALSO smpdump(8)</p>

<p>AUTHOR Hal Rosenstock &lt;halr@voltaire.com&gt;</p>

<p>OpenIB March 14, 2007 SMPQUERY(8)</p>
<hr>
</body>
</html>
