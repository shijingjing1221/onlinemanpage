<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:03:30 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>hivexregedit(1) Windows Registry hivexregedit(1)</p>

<p>NAME hivexregedit - Merge and export Registry changes
from regedit-format files.</p>

<p>SYNOPSIS hivexregedit --merge [--prefix prefix]
[--encoding enc] hivefile [regfile]</p>

<p>hivexregedit --export [--prefix prefix] hivefile key
&gt; regfile</p>

<p>DESCRIPTION Please note hivexregedit is a low-level tool
for manipulating hive files directly. To merge or export
registry changes to Windows virtual machines its better to
use virt-win-reg(1).</p>

<p>Given a local binary (&quot;hive&quot;) file, there are
two modes. &quot;--merge&quot; imports (merges) changes from
a regedit-format file into the hive. It is similar to using
the &quot;/s&quot; switch in Windows regedit.exe.</p>

<p>&quot;--export&quot; exports a Registry key
(recursively) into the regedit format.</p>

<p>ENCODING &quot;hivexregedit&quot; expects that regedit
files have already been re-encoded in the local encoding.
Usually on Linux hosts, this means UTF-8 with Unix-style
line endings. Since Windows regedit files are often in
UTF-16LE with Windows-style line endings, you may need to
re-encode the whole file before or after processing.</p>

<p>To re-encode a file from Windows format to Linux (before
processing it with the &quot;--merge&quot; option), you
would do something like this:</p>

<p>iconv -f utf-16le -t utf-8 &lt; win.reg | dos2unix &gt;
linux.reg</p>

<p>To go in the opposite direction, after using
&quot;--export&quot; and before sending the file to a
Windows user, do something like this:</p>

<p>unix2dos linux.reg | iconv -f utf-8 -t utf-16le &gt;
win.reg</p>

<p>For more information about encoding, see
Win::Hivex::Regedit(3).</p>

<p>If you are unsure about the current encoding, use the
file(1) command. Recent versions of Windows regedit.exe
produce a UTF-16LE file with Windows-style (CRLF) line
endings, like this:</p>

<p>$ file software.reg software.reg: Little-endian UTF-16
Unicode text, with very long lines, with CRLF line
terminators</p>

<p>This file would need conversion before you could
&quot;--merge&quot; it.</p>

<p>SHELL QUOTING Be careful when passing parameters
containing &quot; shell. Usually you will have to use single
quotes or double backslashes (but not both) to protect them
from the shell.</p>

<p>CurrentControlSet etc. Registry keys like
&quot;CurrentControlSet&quot; dont really exist in the
Windows Registry at the level of the hive file, and
therefore you cannot modify these. Replace this with
&quot;ControlSet001&quot;, and similarly for other
&quot;Current...&quot; keys.</p>

<p>EXAMPLE $ virt-cat WindowsGuest
/Windows/System32/config/software &gt; software.hive $
hivexregedit --export --prefix
&rsquo;HKEY_LOCAL_MACHINETWARE&rsquo; software.hive
&rsquo;crosoft&rsquo; &gt; ms-keys.reg</p>

<p>$ hivexregedit --merge system.hive --prefix
&rsquo;HKEY_LOCAL_MACHINETEM&rsquo; additions.reg</p>

<p>OPTIONS --help Display help.</p>

<p>--debug Enable debugging in the hivex library. This is
useful for diagnosing bugs and also malformed hive
files.</p>

<p>--merge hivexregedit --merge [--prefix prefix]
[--encoding enc] hivefile [regfile]</p>

<p>Merge &quot;regfile&quot; (a regedit-format text file)
into the hive &quot;hivefile&quot;. If &quot;regfile&quot;
is omitted, then the program reads from standard input.
(Also you can give multiple input files).</p>

<p>&quot;--prefix&quot; specifies the Windows Registry
prefix. It is almost always necessary to use this when
dealing with real hive files.</p>

<p>&quot;--encoding&quot; specifies the encoding for
unmarked strings in the input. It defaults to
&quot;UTF-16LE&quot; which should work for recent versions
of Windows. Another possibility is to use
&quot;ASCII&quot;.</p>

<p>--export hivexregedit --export [--prefix prefix]
hivefile key &gt; regfile</p>

<p>&quot;key&quot; is a path within the hive
&quot;hivefile&quot;. (The key should not contain any prefix
and should be quoted to defend backslashes from the shell).
The key is exported, recursively, to standard output in the
textual regedit format.</p>

<p>&quot;--prefix&quot; specifies the Windows Registry
prefix. It is almost always necessary to use this when
dealing with real hive files.</p>

<p>--prefix prefix Hive files and Windows Registry key
names are indirectly related. For example, inside the
software hive, all keys are stored relative to
&quot;HKEY_LOCAL_MACHINETWARE&quot;. Thus
&quot;HKEY_LOCAL_MACHINETWAREcrosoft&quot; appears in the
hive file as &quot;crosoft&quot;.</p>

<p>The hive format itself does not store this prefix, so
you have to supply it based on outside knowledge.
(virt-win-reg(1), amongst other things, already knows about
this).</p>

<p>Usually it is sufficient to pass the parameter
&quot;--prefix &rsquo;HKEY_LOCAL_MACHINETWARE&rsquo;&quot;
or similar when doing merges and exports.</p>

<p>--encoding UTF-16LE|ASCII When merging (only), you may
need to specify the encoding for strings to be used in the
hive file. This is explained in detail in &quot;ENCODING
STRINGS&quot; in Win::Hivex::Regedit(3).</p>

<p>The default is to use UTF-16LE, which should work with
recent versions of Windows.</p>

<p>SEE ALSO virt-win-reg(1), Win::Hivex::Regedit(3),
Win::Hivex(3), hivexsh(1), dos2unix(1), unix2dos(1),
iconv(1), &lt;http://libguestfs.org/&gt;.</p>

<p>AUTHOR Richard W.M. Jones
&lt;http://people.redhat.com/~rjones/&gt;</p>

<p>COPYRIGHT Copyright (C) 2010 Red Hat Inc.</p>

<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
02139, USA.</p>

<p>hivex-1.2.2 2010-04-03 hivexregedit(1)</p>
<hr>
</body>
</html>
