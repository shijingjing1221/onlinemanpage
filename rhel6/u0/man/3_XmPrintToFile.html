<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:28:17 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>XmPrintToFile(library call) XmPrintToFile(library
call)</p>

<p>NAME XmPrintToFile Retrieves and saves data that would
normally be printed by the X Print Server.</p>

<p>SYNOPSIS #include &lt;Xm/Print.h&gt;
XtEnumXmPrintToFile( Display*dpy, Stringfilename,
XPFinishProcfinish_proc, XtPointerclient_data);</p>

<p>DESCRIPTION XmPrintToFile hides the details of X display
connection and XpGetDocu- mentData to the Motif application
programmer.</p>

<p>This function is a convenience routine that hides the
details of the X and Xp internals to the application
programmer by calling the XpGetDoc- umentData function with
appropriate save and finish callbacks.</p>

<p>This is used in the context of X Printing when the user
has specified the &quot;print-to-file&quot; option from a
regular Print Setup Dialog box.</p>

<p>XmPrintToFile first tries to open the given filename for
writing and returns False if it can t. Else, it uses
XpGetDocumentData, giving it a save proc that writes the
data received in the file and a finish proc that closes the
file or removes it on an unsuccessful termination. It calls
finish_proc at that point, passing it the argument received
from the Xp layer (status == XPGetDocFinished means the file
is valid and was closed, otherwise the file was
removed).</p>

<p>XmPrintToFile is non-blocking; if it returns
successfully, it just means the file was opened
successfully, not that all the data was received.</p>

<p>dpy Print display connection.</p>

<p>filename Name of the file to put the print data in.</p>

<p>finish_proc Called when all the data has been
received.</p>

<p>client_data Passed with the finish_proc.</p>

<p>RETURN VALUE Returns False if the filename could not be
created or opened for writ- ing, True otherwise.</p>

<p>ERRORS/WARNINGS Not applicable</p>

<p>EXAMPLES A typical OK callback from a
DtPrintSetupBox:</p>

<p>PrintOKCallback(widget...) /*-------------*/ { int
save_data = XPSpool;</p>

<p>pshell = XmPrintSetup (widget, pbs-&gt;print_screen,
&quot;Print&quot;, NULL, 0);</p>

<p>XtAddCallback(pshell, XmNstartJobCallback, startJobCB,
data);</p>

<p>if (pbs-&gt;destination == DtPRINT_TO_FILE) save_data =
XPGetData;</p>

<p>/* start job must precede XpGetDocumentData in
XmPrintToFile */ XpStartJob(XtDisplay(pshell), save_data);
XFlush(XtDisplay(pshell)); /* maintain the sequence between
startjob and getdocument */</p>

<p>/* setup print to file */ if (pbs-&gt;destination ==
DtPRINT_TO_FILE) XmPrintToFile(XtDisplay(pshell),
pbs-&gt;dest_info, FinishPrintToFile, NULL); }</p>

<p>}</p>

<p>static void startJobCB(Widget, XtPointer call_data,
XtPointer client_data) { print(p); /* rendering happens here
*/</p>

<p>XpEndJob(XtDisplay(p-&gt;print_shell));</p>

<p>/* clean up */ XtDestroyWidget(p-&gt;print_shell);
XtCloseDisplay(XtDisplay(p-&gt;print_shell)); }</p>

<p>SEE ALSO XmPrintSetup(3), XmPrintShell(3),
XmRedisplayWidget(3), XmPrintPopup- PDM(3)</p>

<p>XmPrintToFile(library call)</p>
<hr>
</body>
</html>
