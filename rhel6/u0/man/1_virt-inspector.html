<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:24:56 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>VIRT-INSPECTOR(1) Virtualization Support
VIRT-INSPECTOR(1)</p>

<p>NAME virt-inspector - Display OS version, kernel,
drivers, mount points, applications, etc. in a virtual
machine</p>

<p>SYNOPSIS virt-inspector [--connect URI] domname</p>

<p>virt-inspector guest.img [guest.img ...]</p>

<p>DESCRIPTION virt-inspector examines a virtual machine
and tries to determine the version of the OS, the kernel
version, what drivers are installed, whether the virtual
machine is fully virtualized (FV) or para- virtualized (PV),
what applications are installed and more.</p>

<p>Virt-inspector can produce output in several formats,
including a readable text report, and XML for feeding into
other programs.</p>

<p>In the normal usage, use &quot;virt-inspector
domname&quot; where &quot;domname&quot; is the libvirt
domain (see: &quot;virsh list --all&quot;).</p>

<p>You can also run virt-inspector directly on disk images
from a single virtual machine. Use &quot;virt-inspector
guest.img&quot;. In rare cases a domain has several block
devices, in which case you should list them one after
another, with the first corresponding to the guests
&quot;/dev/sda&quot;, the second to the guests
&quot;/dev/sdb&quot; and so on.</p>

<p>Virt-inspector can only inspect and report upon one
domain at a time. To inspect several virtual machines, you
have to run virt-inspector several times (for example, from
a shell script for-loop).</p>

<p>Because virt-inspector needs direct access to guest
images, it wont normally work over remote libvirt
connections.</p>

<p>OPTIONS --help Display brief help.</p>

<p>--version Display version number and exit.</p>

<p>--connect URI | -c URI If using libvirt, connect to the
given URI. If omitted, then we connect to the default
libvirt hypervisor.</p>

<p>Libvirt is only used if you specify a
&quot;domname&quot; on the command line. If you specify
guest block devices directly, then libvirt is not used at
all.</p>

<p>The following options select the output format. Use only
one of them. The default is a readable text report.</p>

<p>--text (default) Plain text report.</p>

<p>--none Produce no output at all.</p>

<p>--xml If you select --xml then you get XML output which
can be fed to other programs.</p>

<p>--yaml If you select --yaml then you get YAML output
which can be fed to other programs.</p>

<p>--perl If you select --perl then you get Perl structures
output which can be used directly in another Perl
program.</p>

<p>--fish --ro-fish If you select --fish then we print a
guestfish(1) command line which will automatically mount up
the filesystems on the correct mount points. Try this for
example:</p>

<p>guestfish $(virt-inspector --fish guest.img)</p>

<p>--ro-fish is the same, but the --ro option is passed to
guestfish so that the filesystems are mounted read-only.</p>

<p>--query In &quot;query mode&quot; we answer common
questions about the guest, such as whether it is fullvirt or
needs a Xen hypervisor to run.</p>

<p>See section QUERY MODE below.</p>

<p>--windows-registry This flag is ignored for
compatibility with earlier releases of the software.</p>

<p>In this version, if Win::Hivex(3) is available, then we
attempt to parse information out of the Registry for any
Windows guest.</p>

<p>OUTPUT FORMAT Operating system(s) -------------------
Linux (distro + version) Windows (version) | | +---
Filesystems ---------- Installed apps --- Kernel &amp;
drivers ----------- -------------- ---------------- mount
point =&gt; device List of apps Extra information mount
point =&gt; device and versions about kernel(s) ... and
drivers swap =&gt; swap device (plus lots of extra
information about each filesystem)</p>

<p>The output of virt-inspector is a complex two-level data
structure.</p>

<p>At the top level is a list of the operating systems
installed on the guest. (For the vast majority of guests,
only a single OS is installed.) The data returned for the OS
includes the name (Linux, Windows), the distribution and
version.</p>

<p>The diagram above shows what we return for each OS.</p>

<p>With the --xml option the output is mapped into an XML
document. There is a RELAX-NG schema for this XML in the
file virt-inspector.rng which normally ships with
virt-inspector, or can be found in the source.</p>

<p>With the --fish or --ro-fish option the mount points are
mapped to guestfish(1) command line parameters, so that you
can go in afterwards and inspect the guest with everything
mounted in the right place. For example:</p>

<p>guestfish $(virt-inspector --ro-fish guest.img) ==&gt;
guestfish --ro -a guest.img -m /dev/VG/LV:/ -m
/dev/sda1:/boot</p>

<p>QUERY MODE When you use &quot;virt-inspector
--query&quot;, the output is a series of lines of the
form:</p>

<p>windows=no linux=yes fullvirt=yes xen_pv_drivers=no</p>

<p>(each answer is usually &quot;yes&quot; or
&quot;no&quot;, or the line is completely missing if we
could not determine the answer at all).</p>

<p>If the guest is multiboot, you can get apparently
conflicting answers (eg. &quot;windows=yes&quot; and
&quot;linux=yes&quot;, or a guest which is both fullvirt and
has a Xen PV kernel). This is normal, and just means that
the guest can do both things, although it might require
operator intervention such as selecting a boot option when
the guest is booting.</p>

<p>This section describes the full range of answers
possible.</p>

<p>windows=(yes|no) Answer &quot;yes&quot; if Microsoft
Windows is installed in the guest.</p>

<p>linux=(yes|no) Answer &quot;yes&quot; if a Linux kernel
is installed in the guest.</p>

<p>rhel=(yes|no) Answer &quot;yes&quot; if the guest
contains Red Hat Enterprise Linux.</p>

<p>fedora=(yes|no) Answer &quot;yes&quot; if the guest
contains the Fedora Linux distribution.</p>

<p>debian=(yes|no) Answer &quot;yes&quot; if the guest
contains the Debian Linux distribution.</p>

<p>fullvirt=(yes|no) Answer &quot;yes&quot; if there is at
least one operating system kernel installed in the guest
which runs fully virtualized. Such a guest would require a
hypervisor which supports full system virtualization.</p>

<p>xen_domU_kernel=(yes|no) Answer &quot;yes&quot; if there
is at least one Linux kernel installed in the guest which is
compiled as a Xen DomU (a Xen paravirtualized guest).</p>

<p>xen_pv_drivers=(yes|no) Answer &quot;yes&quot; if the
guest has Xen paravirtualized drivers installed (usually the
kernel itself will be fully virtualized, but the PV drivers
have been installed by the administrator for performance
reasons).</p>

<p>virtio_drivers=(yes|no) Answer &quot;yes&quot; if the
guest has virtio paravirtualized drivers installed. Virtio
drivers are commonly used to improve the performance of
KVM.</p>

<p>userspace_arch=(x86_64|...) Print the architecture of
userspace.</p>

<p>NB. For multi-boot VMs this can print several lines.</p>

<p>kernel_arch=(x86_64|...) Print the architecture of the
kernel.</p>

<p>NB. For multi-boot VMs this can print several lines.</p>

<p>SEE ALSO guestfs(3), guestfish(1), Sys::Guestfs(3),
Sys::Guestfs::Lib(3), Sys::Virt(3),
&lt;http://libguestfs.org/&gt;.</p>

<p>AUTHORS Richard W.M. Jones
&lt;http://people.redhat.com/~rjones/&gt;</p>

<p>Matthew Booth mbooth@redhat.com</p>

<p>COPYRIGHT Copyright (C) 2009 Red Hat Inc.</p>

<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
02139, USA.</p>

<p>libguestfs-1.2.7 2010-04-12 VIRT-INSPECTOR(1)</p>
<hr>
</body>
</html>
