<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:09:02 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>pam_krb5(5) System Administrator s Manual
pam_krb5(5)</p>

<p>NAME pam_krb5 - Kerberos 5 authentication</p>

<p>DESCRIPTION pam_krb5.so reads its configuration
information from the appdefaults section of krb5.conf(5).
You should read the krb5.conf(5) man page before continuing
here. The module expects its configuration informa- tion to
be in the pam subsection of the appdefaults section.</p>

<p>DIRECTIVES Directives which take a true, false, or a PAM
service name can also be selectively disabled for specific
PAM services using the related &quot;no_&quot; option
(exceptions to &quot;debug = true&quot; can be made using
&quot;no_debug&quot;, for example).</p>

<p>debug = true|false|service [...] turns on debugging via
syslog(3). Debug messages are logged with priority
LOG_DEBUG.</p>

<p>debug_sensitive = true|false|service [...] turns on
debugging of sensitive information via syslog(3). Debug
messages are logged with priority LOG_DEBUG.</p>

<p>addressless = true|false|service [...] if set, requests
a TGT with no address information. This can be necessary if
you are using Kerberos through a NAT, or on systems whose IP
addresses change regularly. This directive is depre- cated
in favor of the libdefaults noaddresses directive.</p>

<p>afs_cells = cell.example.com [...] tells pam_krb5.so to
obtain tokens for the listed cells, in addition to the local
cell and the cell which contains the users home directory,
for the user. The module will guess the principal name of
the AFS service for the listed cells, or it can be specified
by listing cells in the form cellname=princi- palname.</p>

<p>banner = Kerberos 5 specifies what sort of password the
module claims to be changing whenever it is called upon to
change passwords. The default is Kerberos 5.</p>

<p>ccache_dir = /var/tmp specifies the directory in which
to place credential cache files. The default is /tmp.</p>

<p>ccname_template = KEYRING:krb5cc_%U_%P</p>

<p>ccname_template = FILE:%d/krb5cc_%U_XXXXXX specifies the
location in which to place the user s session-spe- cific
credential cache. This value is treated as a template, and
these sequences are substituted: %u login name %U login UID
%p principal name %r realm name %h home directory %d the
default ccache directory (as set with ccache_dir) %P the
current process ID %% literal %</p>

<p>The default is FILE:%d/krb5cc_%U_XXXXXX&quot;.</p>

<p>chpw_prompt = true|false|service [...] tells pam_krb5.so
to allow expired passwords to be changed dur- ing
authentication attempts. While this is the traditional
behavior exhibited by &quot;kinit&quot;, it is inconsistent
with the behavior expected by PAM, which expects
authentication to (appear to) succeed, only to have password
expiration be flagged by a subsequent call to the account
management function. Some applications which don t handle
password expiration correctly will fail unconditionally if
the users password is expired, and this flag can be used to
attempt to work around this bug in those applications. The
default is false.</p>

<p>existing_ticket = true|false|service [...] tells
pam_krb5.so to accept the presence of pre-existing Ker-
beros credentials provided by the calling application in the
default credential cache as sufficient to authenticate the
user, and to skip any account management checks. The default
is false.</p>

<p>DANGER! Unless validation is also in use, it is
relatively easy to produce a credential cache which looks
&quot;good enough&quot; to fool pam_krb5.so.</p>

<p>external = true|false|sshd ftp [...] tells pam_krb5.so
to use Kerberos credentials provided by the calling
application during session setup. This is most often useful
for obtaining AFS tokens. The default is
&quot;sshd&quot;.</p>

<p>forwardable = true|false|service [...] controls whether
or not credentials are forwardable. This directive is
deprecated in favor of the libdefaults forwardable
directive.</p>

<p>hosts = hostname [...] specifies which other hosts
credentials obtained by pam_krb5 will be good on. If your
host is behind a firewall, you should add the IP address or
name that the KDC sees it as to this list. This directive is
deprecated in favor of the libdefaults extra_addresses
directive.</p>

<p>ignore_afs=true|false|service [...] tells pam_krb5.so to
completely ignore the presence of AFS, pre- venting any
attempts to obtain new tokens on behalf of the call- ing
application.</p>

<p>ignore_unknown_principals=true|false|service [...]</p>

<p>ignore_unknown_spn=true|false|service [...]</p>

<p>ignore_unknown_upn=true|false|service [...] specifies
which other not pam_krb5 should return a PAM_IGNORE code to
libpam instead of PAM_USER_UNKNOWN for users for whom the
determined principal name is expired or does not exist.</p>

<p>initial_prompt=true|false|service [...] tells
pam_krb5.so whether or not to ask for a password before
attempting authentication. If one is needed and pam_krb5.so
has not prompted for it, the Kerberos library should trigger
a request for a password.</p>

<p>keytab = FILE:/etc/krb5.keytab</p>

<p>keytab = FILE:/etc/krb5.keytab
imap=FILE:/etc/imap.keytab specifies the name of a keytab
file to search for a service key for use in validating TGTs.
The location can be specified on a per-service basis by
specifying a list of locations in the form
pam_service=location. The default is
FILE:/etc/krb5.keytab.</p>

<p>mappings = regex1 regex2 [...] specifies that pam_krb5
should derive the users principal name from the Unix user
name by first checking if the user name matches regex1, and
formulating a principal name using regex2. For example,
&quot;mappings = EXAMPL(.*) $1@EXAMPLE.COM&quot; would map
any user with a name of the form &quot;EXAMPLE480 pal name
of &quot;whatever@EXAMPLE.COM&quot;. This is primarily
targeted at allowing pam_krb5 to be used to authenticate
users whose user information is provided by winbindd(8).
This will frequently require the reverse to be configured by
setting up an auth_to_local rule elsewhere in
krb5.conf(5).</p>

<p>minimum_uid = 0 specifies the minimum UID of users being
authenticated. If a user with a UID less than this value
attempts authentication, the request will be ignored.</p>

<p>multiple_ccaches=true|false|service [...] specifies that
pam_krb5 should maintain multiple credential caches for
applications that both set credentials and open a PAM
session, but which set the KRB5CCNAME variable after doing
only one of the two. This option is usually not necessary
for most services.</p>

<p>preauth_options = controls the preauthentication options
which pam_krb5 passes to libkrb5, if the system-defaults
need to be overridden. The list is treated as a template,
and these sequences are substituted: %u login name %U login
UID %p principal name %r realm name %h home directory %d the
default ccache directory (as set with ccache_dir) %P the
current process ID %% literal %</p>

<p>proxiable = true|false|service [...] controls whether or
not credentials are proxiable. If not spec- ified, they are.
This directive is deprecated in favor of the libdefaults
proxiable directive.</p>

<p>null_afs=true|false|service [...] tells pam_krb5.so,
when it attempts to set tokens, to try to get credentials
for services with names which resemble afs@REALM before
attempting to get credentials for services with names
resembling afs/cell@REALM. The default is to assume that the
cell s name is the instance in the AFS services Kerberos
prin- cipal name.</p>

<p>pwhelp = filename specifies the name of a text file
whose contents will be dis- played to clients who attempt to
change their passwords. There is no default.</p>

<p>renew_lifetime = 36000 default renewable lifetime, in
seconds. This specifies how much time you have after getting
credentials to renew them. This directive is deprecated in
favor of the libdefaults renew_life- time directive.</p>

<p>subsequent_prompt = true|false|service [...] controls
whether or not pam_krb5.so will allow the Kerberos library
to ask the user for a password or other information, if the
previously-entered password is somehow insufficient for
authenticating the user. This is commonly needed to allow a
user to log in when that users password has expired. The
default is true.</p>

<p>If the calling application does not properly support PAM
conver- sations (possibly due to limitations of a network
protocol which it is serving), this may be need to be
disabled for that appli- cation to prevent it from supplying
the users current password in a password-changing situations
when a new password is called for.</p>

<p>ticket_lifetime = 36000 default credential lifetime, in
seconds.</p>

<p>tokens = true|false|service [...] signals that
pam_krb5.so should create an AFS PAG and obtain tokens
during authentication in addition to session setup. This is
primarily useful in server applications which need to access
a users files but which do not open PAM sessions before
doing so. For correctly-written applications, this flag is
not neces- sary.</p>

<p>token_strategy = rxk5,2b[,...] controls how, and using
which format, pam_krb5.so should attept to set AFS tokens
for the user s session. By default, the mod- ule is
configured with &quot;token_strategy = v4,524,2b,rxk5&quot;.
Rec- ognized strategy names include: rxk5 rxk5 (requires
OpenAFS 1.6 or later) 2b rxkad &quot;2b&quot; (requires
OpenAFS 1.2.8 or later)</p>

<p>use_shmem = true|false|service [...] tells pam_krb5.so
to pass credentials from the authentication service function
to the session management service function using shared
memory for specific services. By default, the mod- ule is
configured with &quot;use_shmem = sshd&quot;.</p>

<p>validate = true|false|service [...] specifies whether or
not to attempt validation of the TGT. The default is
false.</p>

<p>EXAMPLE [appdefaults] pam = { ticket_lifetime = 36000
renew_lifetime = 36000 forwardable = true validate = true
ccache_dir = /var/tmp external = sshd tokens = imap ftpd
TEST.EXAMPLE.COM = { debug = true afs_cells =
testcell.example.com othercell.example.com keytab =
FILE:/etc/krb5.keytab httpd=FILE:/etc/httpd.keytab } }</p>

<p>FILES /etc/krb5.conf</p>

<p>SEE ALSO pam_krb5(8)</p>

<p>BUGS Probably, but lets hope not. If you find any,
please file them in the bug database at
http://bugzilla.redhat.com/ against the &quot;pam_krb5&quot;
com- ponent.</p>

<p>AUTHOR Nalin Dahyabhai &lt;nalin@redhat.com&gt;</p>

<p>Red Hat Linux 2009/12/11 pam_krb5(5)</p>
<hr>
</body>
</html>
