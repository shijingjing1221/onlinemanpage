<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:59:25 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FcPatternFormat(3) FcPatternFormat(3)</p>

<p>NAME FcPatternFormat - Format a pattern into a string
according to a format specifier</p>

<p>SYNOPSIS #include &lt;fontconfig.h&gt;</p>

<p>FcChar8 * FcPatternFormat(FcPattern *pat); (const
FcChar8 *format); .fi</p>

<p>DESCRIPTION Converts given pattern pat into text
described by the format specifier format. The return value
refers to newly allocated memory which should be freed by
the caller using free(), or NULL if format is invalid.</p>

<p>The format is loosely modelled after printf-style format
string. The format string is composed of zero or more
directives: ordinary charac- ters (not &quot;%&quot;), which
are copied unchanged to the output stream; and tags which
are interpreted to construct text from the pattern in a
variety of ways (explained below). Special characters can be
escaped using backslash. C-string style special characters
likeare and also supported (this is useful when the format
string is not a C string literal). It is advisable to always
escape curly braces that are meant to be copied to the
output as ordinary characters.</p>

<p>Each tags is introduced by the character &quot;%&quot;,
followed by an optional minimum field width, followed by tag
contents in curly braces ({}). If the minimum field width
value is provided the tag will be expanded and the result
padded to achieve the minimum width. If the minimum field
width is positive, the padding will right-align the text.
Negative field width will left-align. The rest of this
section describes vari- ous supported tag contents and their
expansion.</p>

<p>A simple tag is one where the content is an identifier.
When simple tags are expanded, the named identifier will be
looked up in pattern and the resulting list of values
returned, joined together using comma. For example, to print
the family name and style the pattern, use the format
&quot;%{family} %{style}0. To extend the family column to
forty characters use &quot;%-40{family}%{style}0.</p>

<p>Simple tags expand to list of all values for an element.
To only choose one of the values, one can index using the
syntax &quot;%{elt[idx]}&quot;. For example, to get the
first family name only, use &quot;%{family[0]}&quot;.</p>

<p>If a simple tag ends with &quot;=&quot; and the element
is found in the pattern, the name of the element followed by
&quot;=&quot; will be output before the list of values. For
example, &quot;%{weight=}&quot; may expand to the string
&quot;weight=80&quot;. Or to the empty string if pattern
does not have weight set.</p>

<p>If a simple tag starts with &quot;:&quot; and the
element is found in the pat- tern, &quot;:&quot; will be
printed first. For example, combining this with the =, the
format &quot;%{:weight=}&quot; may expand to
&quot;:weight=80&quot; or to the empty string if pattern
does not have weight set.</p>

<p>If a simple tag contains the string &quot;:-&quot;, the
rest of the the tag con- tents will be used as a default
string. The default string is output if the element is not
found in the pattern. For example, the format
&quot;%{:weight=:-123}&quot; may expand to
&quot;:weight=80&quot; or to the string
&quot;:weight=123&quot; if pattern does not have weight
set.</p>

<p>A count tag is one that starts with the character
&quot;#&quot; followed by an element name, and expands to
the number of values for the element in the pattern. For
example, &quot;%{#family}&quot; expands to the number of
family names pattern has set, which may be zero.</p>

<p>A sub-expression tag is one that expands a
sub-expression. The tag con- tents are the sub-expression to
expand placed inside another set of curly braces.
Sub-expression tags are useful for aligning an entire
sub-expression, or to apply converters (explained later) on
an entire sub-expression. For example, the format
&quot;%40{{%{family} %{style}}}&quot; expands the
sub-expression to construct the family name followed by the
style, then takes the entire string and pads it on the left
to be at least forty characters.</p>

<p>A filter-out tag is one starting with the character
&quot;-&quot; followed by a comma-separated list of element
names, followed by a sub-expression enclosed in curly
braces. The sub-expression will be expanded but with a
pattern that has the listed elements removed from it. For
example, the format &quot;%{-size,pixelsize{sub-expr}}&quot;
will expand &quot;sub-expr&quot; with pattern sans the size
and pixelsize elements.</p>

<p>A filter-in tag is one starting with the character
&quot;+&quot; followed by a comma-separated list of element
names, followed by a sub-expression enclosed in curly
braces. The sub-expression will be expanded but with a
pattern that only has the listed elements from the
surrounding pat- tern. For example, the format
&quot;%{+family,familylang{sub-expr}}&quot; will expand
&quot;sub-expr&quot; with a sub-pattern consisting only the
family and family lang elements of pattern.</p>

<p>A conditional tag is one starting with the character
&quot;?&quot; followed by a comma-separated list of element
conditions, followed by two sub-expres- sion enclosed in
curly braces. An element condition can be an element name,
in which case it tests whether the element is defined in
pattern, or the character &quot;!&quot; followed by an
element name, in which case the test is negated. The
conditional passes if all the element conditions pass. The
tag expands the first sub-expression if the conditional
passes, and expands the second sub-expression otherwise. For
example, the format
&quot;%{?size,dpi,!pixelsize{pass}{fail}}&quot; will expand
to &quot;pass&quot; if pattern has size and dpi elements but
no pixelsize element, and to &quot;fail&quot; otherwise.</p>

<p>An enumerate tag is one starting with the string
&quot;[]&quot; followed by a comma-separated list of element
names, followed by a sub-expression enclosed in curly
braces. The list of values for the named elements are walked
in parallel and the sub-expression expanded each time with a
pattern just having a single value for those elements,
starting from the first value and continuing as long as any
of those elements has a value. For example, the format
&quot;%{[]family,familylang{%{family}
(%{familylang})0}&quot; will expand the pattern
&quot;%{family} (%{family- lang})0 with a pattern having
only the first value of the family and familylang elemtns,
then expands it with the second values, then the third,
etc.</p>

<p>As a special case, if an enumerate tag has only one
element, and that element has only one value in the pattern,
and that value is of type FcLangSet, the individual
languages in the language set are enumerated.</p>

<p>A builtin tag is one starting with the character
&quot;=&quot; followed by a builtin name. The following
builtins are defined:</p>

<p>unparse Expands to the result of calling FcNameUnparse()
on the pattern.</p>

<p>fcmatch Expands to the output of the default output
format of the fc- match command on the pattern, without the
final newline.</p>

<p>fclist Expands to the output of the default output
format of the fc- list command on the pattern, without the
final newline.</p>

<p>pkgkit Expands to the list of PackageKit font() tags for
the pattern. Currently this includes tags for each family
name, and each lan- guage from the pattern, enumerated and
sanitized into a set of tags terminated by newline. Package
management systems can use these tags to tag their packages
accordingly.</p>

<p>For example, the format
&quot;%{+family,style{%{=unparse}}}0 will expand to an
unparsed name containing only the family and style element
values from pattern.</p>

<p>The contents of any tag can be followed by a set of zero
or more con- verters. A converter is specified by the
character &quot;|&quot; followed by the converter name and
arguments. The following converters are defined:</p>

<p>basename Replaces text with the results of calling
FcStrBasename() on it.</p>

<p>dirname Replaces text with the results of calling
FcStrDirname() on it.</p>

<p>downcase Replaces text with the results of calling
FcStrDowncase() on it.</p>

<p>shescape Escapes text for one level of shell expansion.
(Escapes single- quotes, also encloses text in
single-quotes.)</p>

<p>cescape Escapes text such that it can be used as part of
a C string lit- eral. (Escapes backslash and
double-quotes.)</p>

<p>xmlescape Escapes text such that it can be used in XML
and HTML. (Escapes less-than, greater-than, and
ampersand.)</p>

<p>delete(chars) Deletes all occurrences of each of the
characters in chars from the text. FIXME: This converter is
not UTF-8 aware yet.</p>

<p>escape(chars) Escapes all occurrences of each of the
characters in chars by prepending it by the first character
in chars. FIXME: This con- verter is not UTF-8 aware
yet.</p>

<p>translate(from,to) Translates all occurrences of each of
the characters in from by replacing them with their
corresponding character in to. If to has fewer characters
than from, it will be extended by repeating its last
character. FIXME: This converter is not UTF-8 aware yet.</p>

<p>For example, the format &quot;%{family|downcase|delete(
)}0 will expand to the values of the family element in
pattern, lower-cased and with spaces removed.</p>

<p>VERSION Fontconfig version 2.8.0</p>

<p>18 November 2009 FcPatternFormat(3)</p>
<hr>
</body>
</html>
