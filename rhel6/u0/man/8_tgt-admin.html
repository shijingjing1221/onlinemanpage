<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:21:55 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TGT-ADMIN(8) TGT-ADMIN(8)</p>

<p>NAME tgt-admin - Linux SCSI Target Configuration
Tool</p>

<p>SYNOPSIS tgtadm [-e --execute] [--delete &lt;value&gt;]
[--offline &lt;value&gt;] [--ready &lt;value&gt;] [-s
--show] [-c --conf &lt;file&gt;] [--ignore-errors] [-f
--force] [-p --pretend] [--dump] [-v --verbose] [-h
--help]</p>

<p>DESCRIPTION tgt-admin is a utility which allows a
persistent configuration of targets and luns. It uses tgtadm
commands to create, delete and show targets.</p>

<p>OPTIONS -e, --execute Read /etc/tgt/targets.conf and
execute tgtadm commands. If the target already exists, it
won&acute;t be processed. See --update.</p>

<p>-d, --delete &lt;value&gt; Delete all or selected
targets. The target will be deleted only if it&acute;s not
used (no initiator is connected to it).</p>

<p>If you want to delete targets which are in use, you have
to add the &quot;--force&quot; flag.</p>

<p>Example usage: --delete ALL - delete all targets
--delete tid=4 - delete target 4 (target with tid 4)
--delete iqn.2008-08.com.example:some.target - delete this
target</p>

<p>--offline Put all or selected targets in offline
state.</p>

<p>Example usage: --offline ALL - offline all targets
--offline tid=4 - offline target 4 (target with tid 4)
--offline iqn.2008-08.com.example:some.target - offline this
target</p>

<p>--ready Put all or selected targets in ready state.</p>

<p>Example usage: --ready ALL - ready all targets --ready
tid=4 - ready target 4 (target with tid 4) --ready
iqn.2008-08.com.example:some.target - ready this target</p>

<p>--update &lt;value&gt; Update all or selected targets.
The target will be updated only if it&acute;s not used (no
initiator is connected to it).</p>

<p>If you want to update targets which are in use, you have
to add &quot;--force&quot; flag.</p>

<p>Example usage: --update ALL - ready all targets --update
tid=4 - ready target 4 (target with tid 4) --update
iqn.2008-08.com.example:some.target - update this target</p>

<p>-s, --show Show all the targets.</p>

<p>-c, --conf &lt;configuration file&gt; Specify an
alternative configuration file instead of
/etc/tgt/target.conf, which is the default.</p>

<p>--ignore-errors Continue even if tgtadm exits with
non-zero code.</p>

<p>-f, --force Force some operations even if the target is
in use.</p>

<p>-p, --pretend Only print tgtadm options which would be
used; don&acute;t execute any actions. Assumes -v.</p>

<p>--dump Dump current tgtd configuration. Note: does not
include detailed parameters, like write caching.</p>

<p>-v, --verbose Increase verbosity (show tgtadm commands
used).</p>

<p>-h, --help Display a list of available options and
exit.</p>

<p>CONFIGURATION FILE SYNTAX The defualt configuration file
is /etc/tgt/target.conf. It defines all the targets and
their properties. The configuration file is in XML format
and uses tags. Configuration file contains several target
blocks, where each block contains target&acute;s properties
such as storage devices, initator ACL and authorization
information. You can include other config files using:
include /etc/tgt/xen/*.conf.</p>

<p>backing-store Defines a virtual device on the
target.</p>

<p>direct-store Defines a direct mapped device with the
same properties as the physical device (such as VENDOR_ID,
SERIAL_NUM, etc.)</p>

<p>initiator-address Allows connections only from the
specified IP address. Defaults to ALL if no
&quot;initiator-address&quot; is specified.</p>

<p>incominguser Define iscsi incoming authentication
setting. If no &quot;incominguser&quot; is specified, it is
not used.</p>

<p>outgoinguser Define iscsi outgoing authentication
setting. If no &quot;outgoinguser&quot; is specified, it is
not used.</p>

<p>Example configuration file:</p>

<p>&lt;target iqn.2007-04.com.example:san.monitoring&gt;
backing-store /dev/san/monitoring</p>

<p># if no &quot;incominguser&quot; is specified, it is not
used incominguser backup secretpass12</p>

<p># defaults to ALL if no &quot;initiator-address&quot; is
specified initiator-address 192.168.1.2 &lt;/target&gt;</p>

<p>&lt;target iqn.2007-02.com.example:san.xen1&gt;
backing-store /dev/san/xen1-disk1 # LUN1 direct-store
/dev/san/xen1-disk2 # LUN2</p>

<p>initiator-address 192.168.1.2 # Allowed IP
initiator-address 192.168.5.6 # Allowed IP</p>

<p>incominguser user1 secretpass12 incominguser user2
secretpass23</p>

<p>outgoinguser userA secretpassA &lt;/target&gt;</p>

<p>&lt;target iqn.2007-02.com.example:san.xen2&gt;
backing-store /dev/san/xen2 &lt;/target&gt;</p>

<p>&lt;target iqn.2007-06.com.example:san.vmware1&gt;
backing-store /dev/san/vmware1 &lt;/target&gt;</p>

<p>FILES /etc/tgt/targets.conf Configuration file for
tgt-admin.</p>

<p>/usr/share/doc/tgt/targets.conf.example Example
configuration file for tgt-admin.</p>

<p>SEE ALSO tgtd(8), tgtadm(8), tgtimg(8),
tgt-setup-lun(8). http://stgt.sourceforge.net/</p>

<p>REPORTING BUGS Report bugs to
&lt;stgt@vger.kernel.org&gt;</p>

<p>03/31/2010 TGT-ADMIN(8)</p>
<hr>
</body>
</html>
