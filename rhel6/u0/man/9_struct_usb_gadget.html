<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:18:09 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>STRUCT USB_GADGET(9) Kernel Mode Gadget API STRUCT
USB_GADGET(9)</p>

<p>NAME struct_usb_gadget - represents a usb slave
device</p>

<p>SYNOPSIS struct usb_gadget { const struct usb_gadget_ops
* ops; struct usb_ep * ep0; struct list_head ep_list; enum
usb_device_speed speed; unsigned is_dualspeed:1; unsigned
is_otg:1; unsigned is_a_peripheral:1; unsigned
b_hnp_enable:1; unsigned a_hnp_support:1; unsigned
a_alt_hnp_support:1; const char * name; struct device dev;
};</p>

<p>MEMBERS ops Function pointers used to access
hardware-specific operations.</p>

<p>ep0 Endpoint zero, used when reading or writing
responses to driver setup requests</p>

<p>ep_list List of other endpoints supported by the
device.</p>

<p>speed Speed of current connection to USB host.</p>

<p>is_dualspeed True if the controller supports both high
and full speed operation. If it does, the gadget driver must
also support both.</p>

<p>is_otg True if the USB device port uses a Mini-AB jack,
so that the gadget driver must provide a USB OTG
descriptor.</p>

<p>is_a_peripheral False unless is_otg, the A end of a USB
cable is in the Mini-AB jack, and HNP has been used to
switch roles so that the A device currently acts as
A-Peripheral, not A-Host.</p>

<p>b_hnp_enable OTG device feature flag, indicating that
the A-Host enabled HNP support.</p>

<p>a_hnp_support OTG device feature flag, indicating that
the A-Host supports HNP at this port.</p>

<p>a_alt_hnp_support OTG device feature flag, indicating
that the A-Host only supports HNP on a different root
port.</p>

<p>name Identifies the controller hardware type. Used in
diagnostics and sometimes configuration.</p>

<p>dev Driver model state for this abstract device.</p>

<p>DESCRIPTION Gadgets have a mostly-portable gadget driver
implementing device functions, handling all usb
configurations and interfaces. Gadget drivers talk to
hardware-specific code indirectly, through ops vectors. That
insulates the gadget driver from hardware details, and
packages the hardware endpoints through generic i/o queues.
The usb_gadget and usb_ep interfaces provide that insulation
from the hardware.</p>

<p>Except for the driver data, all fields in this structure
are read-only to the gadget driver. That driver data is part
of the driver model infrastructure in 2.6 (and later)
kernels, and for earlier systems is grouped in a similar
structure that&acute;s not known to the rest of the
kernel.</p>

<p>Values of the three OTG device feature flags are updated
before the setup call corresponding to
USB_REQ_SET_CONFIGURATION, and before driver suspend calls.
They are valid only when is_otg, and when the device is
acting as a B-Peripheral (so is_a_peripheral is false).</p>

<p>AUTHOR David Brownell
&lt;dbrownell@users.sourceforge.net&gt; Author.</p>

<p>COPYRIGHT Kernel Hackers Manual 2.6. September 2010
STRUCT USB_GADGET(9)</p>
<hr>
</body>
</html>
