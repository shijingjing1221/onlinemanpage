<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:55:38 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>CHMOD(3P) POSIX Programmer s Manual CHMOD(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME chmod - change mode of a file</p>

<p>SYNOPSIS #include &lt;sys/stat.h&gt;</p>

<p>int chmod(const char *path, mode_t mode);</p>

<p>DESCRIPTION The chmod() function shall change S_ISUID,
S_ISGID, S_ISVTX, and the file permission bits of the file
named by the pathname pointed to by the path argument to the
corresponding bits in the mode argument. The application
shall ensure that the effective user ID of the process
matches the owner of the file or the process has appropriate
privileges in order to do this.</p>

<p>S_ISUID, S_ISGID, S_ISVTX, and the file permission bits
are described in &lt;sys/stat.h&gt;.</p>

<p>If the calling process does not have appropriate
privileges, and if the group ID of the file does not match
the effective group ID or one of the supplementary group IDs
and if the file is a regular file, bit S_ISGID (set-group-ID
on execution) in the file s mode shall be cleared upon
successful return from chmod().</p>

<p>Additional implementation-defined restrictions may cause
the S_ISUID and S_ISGID bits in mode to be ignored.</p>

<p>The effect on file descriptors for files open at the
time of a call to chmod() is implementation-defined.</p>

<p>Upon successful completion, chmod() shall mark for
update the st_ctime field of the file.</p>

<p>RETURN VALUE Upon successful completion, 0 shall be
returned; otherwise, -1 shall be returned and errno set to
indicate the error. If -1 is returned, no change to the file
mode occurs.</p>

<p>ERRORS The chmod() function shall fail if:</p>

<p>EACCES Search permission is denied on a component of the
path prefix.</p>

<p>ELOOP A loop exists in symbolic links encountered during
resolution of the path argument.</p>

<p>ENAMETOOLONG The length of the path argument exceeds
{PATH_MAX} or a pathname component is longer than
{NAME_MAX}.</p>

<p>ENOTDIR A component of the path prefix is not a
directory.</p>

<p>ENOENT A component of path does not name an existing
file or path is an empty string.</p>

<p>EPERM The effective user ID does not match the owner of
the file and the process does not have appropriate
privileges.</p>

<p>EROFS The named file resides on a read-only file
system.</p>

<p>The chmod() function may fail if:</p>

<p>EINTR A signal was caught during execution of the
function.</p>

<p>EINVAL The value of the mode argument is invalid.</p>

<p>ELOOP More than {SYMLOOP_MAX} symbolic links were
encountered during resolution of the path argument.</p>

<p>ENAMETOOLONG As a result of encountering a symbolic link
in resolution of the path argument, the length of the
substituted pathname strings exceeded {PATH_MAX}.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Setting Read Permissions for User, Group, and
Others The following example sets read permissions for the
owner, group, and others.</p>

<p>#include &lt;sys/stat.h&gt;</p>

<p>const char *path; ... chmod(path,
S_IRUSR|S_IRGRP|S_IROTH);</p>

<p>Setting Read, Write, and Execute Permissions for the
Owner Only The following example sets read, write, and
execute permissions for the owner, and no permissions for
group and others.</p>

<p>#include &lt;sys/stat.h&gt;</p>

<p>const char *path; ... chmod(path, S_IRWXU);</p>

<p>Setting Different Permissions for Owner, Group, and
Other The following example sets owner permissions for
CHANGEFILE to read, write, and execute, group permissions to
read and execute, and other permissions to read.</p>

<p>#include &lt;sys/stat.h&gt;</p>

<p>#define CHANGEFILE &quot;/etc/myfile&quot; ...
chmod(CHANGEFILE, S_IRWXU|S_IRGRP|S_IXGRP|S_IROTH);</p>

<p>Setting and Checking File Permissions The following
example sets the file permission bits for a file named
/home/cnd/mod1, then calls the stat() function to verify the
permis- sions.</p>

<p>#include &lt;sys/types.h&gt; #include
&lt;sys/stat.h&gt;</p>

<p>int status; struct stat buffer ...
chmod(&quot;home/cnd/mod1&quot;,
S_IRWXU|S_IRWXG|S_IROTH|S_IWOTH); status =
stat(&quot;home/cnd/mod1&quot;, &amp;buffer;);</p>

<p>APPLICATION USAGE In order to ensure that the S_ISUID
and S_ISGID bits are set, an appli- cation requiring this
should use stat() after a successful chmod() to verify
this.</p>

<p>Any file descriptors currently open by any process on
the file could possibly become invalid if the mode of the
file is changed to a value which would deny access to that
process. One situation where this could occur is on a
stateless file system. This behavior will not occur in a
conforming environment.</p>

<p>RATIONALE This volume of IEEE Std 1003.1-2001 specifies
that the S_ISGID bit is cleared by chmod() on a regular file
under certain conditions. This is specified on the
assumption that regular files may be executed, and the
system should prevent users from making executable setgid()
files per- form with privileges that the caller does not
have. On implementations that support execution of other
file types, the S_ISGID bit should be cleared for those file
types under the same circumstances.</p>

<p>Implementations that use the S_ISUID bit to indicate
some other func- tion (for example, mandatory record
locking) on non-executable files need not clear this bit on
writing. They should clear the bit for exe- cutable files
and any other cases where the bit grants special powers to
processes that change the file contents. Similar comments
apply to the S_ISGID bit.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO chown(), mkdir(), mkfifo(), open(), stat(),
statvfs(), the Base Defini- tions volume of IEEE Std
1003.1-2001, &lt;sys/stat.h&gt;, &lt;sys/types.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 CHMOD(3P)</p>
<hr>
</body>
</html>
