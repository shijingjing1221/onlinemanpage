<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:13:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>rlm_sql(5) FreeRADIUS Module rlm_sql(5)</p>

<p>NAME rlm_sql - FreeRADIUS Module</p>

<p>DESCRIPTION The rlm_sql module provides an SQL interface
to retrieve authorization information and store accounting
information. It can be used in con- junction with, or in
lieu of the files and detail modules. The SQL module has
drivers to support the following SQL databases:</p>

<p>db2 iodbc mysql oracle postgresql sybase unixodbc</p>

<p>Due to the size of the configuration variables, the sql
module is usu- ally configured in a separate file, which is
included in the main radiusd.conf via an include
directive.</p>

<p>The main configuration items to be aware of are:</p>

<p>driver This variable specifies the driver to be
loaded.</p>

<p>server</p>

<p>login</p>

<p>password These specify the servername, username, and
password the module will use to connect to the database.</p>

<p>radius_db The name of the database where the radius
tables are stored.</p>

<p>acct_table1</p>

<p>acct_table2 These specify the tables names for
accounting records. acct_ta- ble1 specifies the table where
Start records are stored. acct_table2 specifies the table
where Stop records are stored. In most cases, this should be
the same table.</p>

<p>postauth_table The name of the table to store
post-authentication data.</p>

<p>authcheck_table</p>

<p>authreply_table The tables where individual Check-Items
and Reply-Items are stored.</p>

<p>groupcheck_table</p>

<p>groupreply_table The tables where group Check-Items and
Reply-Items are stored.</p>

<p>usergroup_table The table where username to group
relationships are stored.</p>

<p>deletestatlesessions This option is set to yes or no. If
you are doing Simulta- neous-Use checking, and this is set
to yes, stale sessions ( defined as sessions for which a
Stop record was not received ) will be cleared.</p>

<p>sqltrace</p>

<p>sqltracefile These two options are useful for debugging
sql problems. If sqltrace is set to yes, then all sql
queries being executed are written to the file listed in
sqltracefile. This is disabled in normal operation.</p>

<p>num_sql_socks The number of sql connections to make to
the database.</p>

<p>connect_failure_retry_delay The number of seconds to
wait before attempting to reconnect to a failed database
connection.</p>

<p>sql_user_name This is the definition of the
SQL-User-Name attribute. This is set once, so that you can
use %{SQL-User-Name} in the SQL queries, rather than the
nested username substitution. This ensures that Username is
parsed consistently for all SQL queries executed.</p>

<p>default_user_profile This is the default profile name
that will be applied to all users if set. This is not set by
default.</p>

<p>query_on_not_found This option is set to yes or no. If
set to yes, then the default user profile is returned if no
specific match was found for the user.</p>

<p>authorize_check_query</p>

<p>authorize_reply_query These queries are run during the
authorization stage to extract the user authorization
information from the ${authcheck_table} and
${authreply_table}.</p>

<p>authorize_group_check_query</p>

<p>authorize_group_reply_query These queries are run during
the authorization stage to extract the group authorization
information from the ${groupcheck_table} and
${groupreply_table}.</p>

<p>accounting_onoff_query The query to be run when
receiving an Accounting On or Account- ing Off packet.</p>

<p>accounting_update_query</p>

<p>accounting_update_query_alt The query to be run when
receiving an Accounting Update packet. If the primary query
fails, the alt query is run.</p>

<p>accounting_start_query</p>

<p>accounting_start_query_alt The query to be run when
receiving an Accounting Start packet. If the primary query
fails, the alt query is run.</p>

<p>accounting_stop_query</p>

<p>accounting_stop_query_alt The query to be run when
receiving an Accounting Stop packet. If the primary query
fails, the alt query is run.</p>

<p>simul_count_query The query to be run to return the
number simultaneous sessions for the purposes of limiting
Simultaneous Use.</p>

<p>simul_verify_query The query to return the detail
information needed to confirm that all suspected connected
sessions are valid, and are not stale sessions.</p>

<p>group_membership_query The query to run to check user
group membership.</p>

<p>postauth_query The query to run during the
post-authentication stage.</p>

<p>CONFIGURATION Due to the size of the configuration for
this module, it is not included in this manual page. Please
review the supplied configuration files for example queries
and configuration details.</p>

<p>SECTIONS authorization, accounting, checksimul,
post-authentication</p>

<p>FILES /etc/raddb/radiusd.conf, /etc/raddb/sql.conf,
/etc/raddb/sql/&lt;DB&gt;/dialup.conf,
/etc/raddb/sql/&lt;DB&gt;/schema.sql,</p>

<p>SEE ALSO radiusd(8), radiusd.conf(5),</p>

<p>AUTHORS Chris Parker, cparker@segv.org</p>

<p>5 February 2004 rlm_sql(5)</p>
<hr>
</body>
</html>
