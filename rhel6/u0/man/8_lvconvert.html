<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:06:46 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>LVCONVERT(8) LVCONVERT(8)</p>

<p>NAME lvconvert - convert a logical volume from linear to
mirror or snapshot</p>

<p>SYNOPSIS lvconvert -m|--mirrors Mirrors [--mirrorlog
{disk|core|mirrored}] [--corelog] [-R|--regionsize
MirrorLogRegionSize] [-A|--alloc Alloca- tionPolicy]
[-b|--background] [-f|--force] [-i|--interval Seconds]
[-h|-?|--help] [--stripes Stripes [-I|--stripesize
StripeSize]] [--noudevsync] [-v|--verbose] [-y|--yes]
[--version] LogicalVolume[Path]
[PhysicalVolume[Path][:PE[-PE]]...]</p>

<p>lvconvert --splitmirrors Images --name
SplitLogicalVolumeName MirrorLogicalVolume[Path]
[SplittablePhysicalVolume[Path][:PE[-PE]]...]</p>

<p>lvconvert -s|--snapshot [-c|--chunksize ChunkSize]
[-h|-?|--help] [--noudevsync] [-v|--verbose] [-Z|--zero y|n]
[--version] OriginalLogicalVolume[Path]
SnapshotLogicalVolume[Path]</p>

<p>lvconvert --merge [-b|--background] [-i|--interval
Seconds] [-h|-?|--help] [-v|--verbose] [--version]
SnapshotLogicalVol- ume[Path]...</p>

<p>lvconvert --repair [-h|-?|--help] [-v|--verbose]
[--version] Logi- calVolume[Path]
[PhysicalVolume[Path]...]</p>

<p>DESCRIPTION lvconvert will change a linear logical
volume to a mirror logical vol- ume or to a snapshot of
linear volume and vice versa. It is also used to add and
remove disk logs from mirror devices. If the conversion
requires allocation of physical extents (for example, when
converting from linear to mirror) and you specify one or
more PhysicalVolumes (optionally with ranges of physical
extents), alloca- tion of physical extents will be
restricted to these physical extents. If the conversion
frees physical extents (for example, when converting from a
mirror to a linear, or reducing mirror legs) and you specify
one or more PhysicalVolumes, the freed extents come first
from the speci- fied PhysicalVolumes.</p>

<p>OPTIONS See lvm for common options. Exactly one of
--splitmirrors, --mirrors, --repair, --snapshot or --merge
arguments is required.</p>

<p>-m, --mirrors Mirrors Specifies the degree of the mirror
you wish to create. For example, &quot;-m 1&quot; would
convert the original logical volume to a mirror volume with
2-sides; that is, a linear volume plus one copy.</p>

<p>--mirrorlog {disk|core|mirrored} Specifies the type of
log to use. The default is disk, which is persistent and
requires a small amount of storage space, usually on a
separate device from the data being mirrored. Core may be
useful for short-lived mirrors: It means the mirror is
regener- ated by copying the data from the first device
again every time the device is activated - perhaps, for
example, after every reboot. Using &quot;mirrored&quot; will
create a persistent log that is itself mirrored.</p>

<p>--corelog The optional argument &quot;--corelog&quot; is
the same as specifying &quot;--mirrorlog core&quot;.</p>

<p>-R, --regionsize MirrorLogRegionSize A mirror is divided
into regions of this size (in MB), and the mirror log uses
this granularity to track which regions are in sync.</p>

<p>-b, --background Run the daemon in the background.</p>

<p>-i, --interval Seconds Report progress as a percentage
at regular intervals.</p>

<p>--noudevsync Disable udev synchronisation. The process
will not wait for notification from udev. It will continue
irrespective of any possible udev processing in the
background. You should only use this if udev is not running
or has rules that ignore the devices LVM2 creates.</p>

<p>--splitmirrors Images The number of redundant Images of
a mirror to be split off and used to form a new logical
volume. A name must be supplied for the newly-split-off
logical volume using the --name argument.</p>

<p>-n Name The name to apply to a logical volume which has
been split off from a mirror logical volume.</p>

<p>-s, --snapshot Create a snapshot from existing logical
volume using another existing logical volume as its
origin.</p>

<p>-c, --chunksize ChunkSize Power of 2 chunk size for the
snapshot logical volume between 4k and 512k.</p>

<p>-Z, --zero y|n Controls zeroing of the first KB of data
in the snapshot. If the volume is read-only the snapshot
will not be zeroed.</p>

<p>--merge Merges a snapshot into its origin volume. If
both the origin and snapshot volume are not open the merge
will start immediately. Otherwise, the merge will start the
first time either the origin or snapshot are activated and
both are closed. Merging a snap- shot into an origin that
cannot be closed, for example a root filesystem, is deferred
until the next time the origin volume is activated. When
merging starts, the resulting logical volume will have the
origins name, minor number and UUID. While the merge is in
progress, reads or writes to the origin appear as they were
directed to the snapshot being merged. When the merge
finishes, the merged snapshot is removed. Multiple snapshots
may be specified on the commandline or a @tag may be used to
specify multiple snapshots be merged to their respective
origin.</p>

<p>--repair Repair a mirror after suffering a disk failure.
The mirror will be brought back into a consistent state. By
default, the origi- nal number of mirrors will be restored
if possible. Specify -y on the command line to skip the
prompts. Use -f if you do not want any replacement.
Additionally, you may use --use-policies to use the device
replacement policy specified in lvm.conf, viz.
activation/mirror_log_fault_policy or activation/mir-
ror_device_fault_policy.</p>

<p>Examples &quot;lvconvert -m1 vg00/lvol1&quot; converts
the linear logical volume &quot;vg00/lvol1&quot; to a
two-way mirror logical volume.</p>

<p>&quot;lvconvert --mirrorlog core vg00/lvol1&quot;
converts a mirror with a disk log to a mirror with an
in-memory log.</p>

<p>&quot;lvconvert --mirrorlog disk vg00/lvol1&quot;
converts a mirror with an in-memory log to a mirror with a
disk log.</p>

<p>&quot;lvconvert -m0 vg00/lvol1&quot; converts a mirror
logical volume to a linear logical volume.</p>

<p>&quot;lvconvert -s vg00/lvol1 vg00/lvol2&quot; converts
logical volume &quot;vg00/lvol2&quot; to snapshot of
original volume &quot;vg00/lvol1&quot;</p>

<p>&quot;lvconvert -m1 vg00/lvol1 /dev/sda:0-15
/dev/sdb:0-15&quot; converts linear logical volume
&quot;vg00/lvol1&quot; to a two-way mirror, using physical
extents /dev/sda:0-15 and /dev/sdb:0-15 for allocation of
new extents.</p>

<p>&quot;lvconvert -m0 vg00/lvmirror1 /dev/sda converts
mirror logical volume &quot;vg00/lvmirror1&quot; to linear,
freeing physical extents from /dev/sda.</p>

<p>&quot;lvconvert --merge vg00/lvol1_snap&quot; merges
&quot;vg00/lvol1_snap&quot; into its origin.</p>

<p>&quot;lvconvert --merge @some_tag&quot; If vg00/lvol1,
vg00/lvol2, and vg00/lvol3 are all tagged with
&quot;some_tag&quot; each snapshot logical volume will be
merged serially, e.g.: vg00/lvol1, then vg00/lvol2, then
vg00/lvol3. If --background were used it would start all
snapshot logical volume merges in parallel.</p>

<p>SEE ALSO lvm(8), vgcreate(8), lvremove(8), lvrename(8),
lvextend(8), lvre- duce(8), lvdisplay(8), lvscan(8)</p>

<p>Red Hat, Inc LVM TOOLS 2.02.72(2) (2010-07-28)
LVCONVERT(8)</p>
<hr>
</body>
</html>
