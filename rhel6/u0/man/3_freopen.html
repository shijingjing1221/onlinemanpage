<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:00:07 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FOPEN(3) Linux Programmer s Manual FOPEN(3)</p>

<p>NAME fopen, fdopen, freopen - stream open functions</p>

<p>SYNOPSIS #include &lt;stdio.h&gt;</p>

<p>FILE *fopen(const char *path, const char *mode);</p>

<p>FILE *fdopen(int fd, const char *mode);</p>

<p>FILE *freopen(const char *path, const char *mode, FILE
*stream);</p>

<p>Feature Test Macro Requirements for glibc (see
feature_test_macros(7)):</p>

<p>fdopen(): _POSIX_C_SOURCE &gt;= 1 || _XOPEN_SOURCE ||
_POSIX_SOURCE</p>

<p>DESCRIPTION The fopen() function opens the file whose
name is the string pointed to by path and associates a
stream with it.</p>

<p>The argument mode points to a string beginning with one
of the follow- ing sequences (Additional characters may
follow these sequences.):</p>

<p>r Open text file for reading. The stream is positioned
at the beginning of the file.</p>

<p>r+ Open for reading and writing. The stream is
positioned at the beginning of the file.</p>

<p>w Truncate file to zero length or create text file for
writing. The stream is positioned at the beginning of the
file.</p>

<p>w+ Open for reading and writing. The file is created if
it does not exist, otherwise it is truncated. The stream is
positioned at the beginning of the file.</p>

<p>a Open for appending (writing at end of file). The file
is cre- ated if it does not exist. The stream is positioned
at the end of the file.</p>

<p>a+ Open for reading and appending (writing at end of
file). The file is created if it does not exist. The initial
file position for reading is at the beginning of the file,
but output is always appended to the end of the file.</p>

<p>The mode string can also include the letter
&rsquo;b&rsquo; either as a last char- acter or as a
character between the characters in any of the two-char-
acter strings described above. This is strictly for
compatibility with C89 and has no effect; the
&rsquo;b&rsquo; is ignored on all POSIX conforming sys-
tems, including Linux. (Other systems may treat text files
and binary files differently, and adding the &rsquo;b&rsquo;
may be a good idea if you do I/O to a binary file and expect
that your program may be ported to non-Unix
environments.)</p>

<p>See NOTES below for details of glibc extensions for
mode.</p>

<p>Any created files will have mode S_IRUSR | S_IWUSR |
S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH (0666), as modified by
the processs umask value (see umask(2)).</p>

<p>Reads and writes may be intermixed on read/write streams
in any order. Note that ANSI C requires that a file
positioning function intervene between output and input,
unless an input operation encounters end-of- file. (If this
condition is not met, then a read is allowed to return the
result of writes other than the most recent.) Therefore it
is good practice (and indeed sometimes necessary under
Linux) to put an fseek(3) or fgetpos(3) operation between
write and read operations on such a stream. This operation
may be an apparent no-op (as in fseek(..., 0L, SEEK_CUR)
called for its synchronizing side effect.</p>

<p>Opening a file in append mode (a as the first character
of mode) causes all subsequent write operations to this
stream to occur at end-of-file, as if preceded by an</p>

<p>fseek(stream,0,SEEK_END);</p>

<p>call.</p>

<p>The fdopen() function associates a stream with the
existing file descriptor, fd. The mode of the stream (one of
the values &quot;r&quot;, &quot;r+&quot;, &quot;w&quot;,
&quot;w+&quot;, &quot;a&quot;, &quot;a+&quot;) must be
compatible with the mode of the file descriptor. The file
position indicator of the new stream is set to that
belonging to fd, and the error and end-of-file indicators
are cleared. Modes &quot;w&quot; or &quot;w+&quot; do not
cause truncation of the file. The file descriptor is not
duped, and will be closed when the stream cre- ated by
fdopen() is closed. The result of applying fdopen() to a
shared memory object is undefined.</p>

<p>The freopen() function opens the file whose name is the
string pointed to by path and associates the stream pointed
to by stream with it. The original stream (if it exists) is
closed. The mode argument is used just as in the fopen()
function. The primary use of the freopen() function is to
change the file associated with a standard text stream
(stderr, stdin, or stdout).</p>

<p>RETURN VALUE Upon successful completion fopen(),
fdopen() and freopen() return a FILE pointer. Otherwise,
NULL is returned and errno is set to indicate the error.</p>

<p>ERRORS EINVAL The mode provided to fopen(), fdopen(), or
freopen() was invalid.</p>

<p>The fopen(), fdopen() and freopen() functions may also
fail and set errno for any of the errors specified for the
routine malloc(3).</p>

<p>The fopen() function may also fail and set errno for any
of the errors specified for the routine open(2).</p>

<p>The fdopen() function may also fail and set errno for
any of the errors specified for the routine fcntl(2).</p>

<p>The freopen() function may also fail and set errno for
any of the errors specified for the routines open(2),
fclose(3) and fflush(3).</p>

<p>CONFORMING TO The fopen() and freopen() functions
conform to C89. The fdopen() func- tion conforms to
POSIX.1-1990.</p>

<p>NOTES Glibc Notes The GNU C library allows the following
extensions for the string speci- fied in mode:</p>

<p>c (since glibc 2.3.3) Do not make the open operation, or
subsequent read and write operations, thread cancellation
points.</p>

<p>e (since glibc 2.7) Open the file with the O_CLOEXEC
flag. See open(2) for more information.</p>

<p>m (since glibc 2.3) Attempt to access the file using
mmap(2), rather than I/O system calls (read(2), write(2)).
Currently, use of mmap(2) is only attempted for a file
opened for reading.</p>

<p>x Open the file exclusively (like the O_EXCL flag of
open(2)). If the file already exists, fopen() fails, and
sets errno to EEX- IST. This flag is ignored for
fdopen().</p>

<p>SEE ALSO open(2), fclose(3), fileno(3), fmemopen(3),
fopencookie(3)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>GNU 2009-02-23 FOPEN(3)</p>
<hr>
</body>
</html>
