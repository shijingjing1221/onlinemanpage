<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:01:17 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GETPWENT_R(3) Linux Programmer s Manual
GETPWENT_R(3)</p>

<p>NAME getpwent_r, fgetpwent_r - get passwd file entry
reentrantly</p>

<p>SYNOPSIS #include &lt;pwd.h&gt;</p>

<p>int getpwent_r(struct passwd *pwbuf, char *buf, size_t
buflen, struct passwd **pwbufp);</p>

<p>int fgetpwent_r(FILE *fp, struct passwd *pwbuf, char
*buf, size_t buflen, struct passwd **pwbufp);</p>

<p>Feature Test Macro Requirements for glibc (see
feature_test_macros(7)):</p>

<p>getpwent_r(), _BSD_SOURCE || _SVID_SOURCE fgetpwent_r():
_SVID_SOURCE</p>

<p>DESCRIPTION The functions getpwent_r() and fgetpwent_r()
are the reentrant versions of getpwent(3) and fgetpwent(3).
The former reads the next passwd entry from the stream
initialized by setpwent(3). The latter reads the next passwd
entry from the stream fp.</p>

<p>The passwd structure is defined in &lt;pwd.h&gt; as
follows:</p>

<p>struct passwd { char *pw_name; /* username */ char
*pw_passwd; /* user password */ uid_t pw_uid; /* user ID */
gid_t pw_gid; /* group ID */ char *pw_gecos; /* real name */
char *pw_dir; /* home directory */ char *pw_shell; /* shell
program */ };</p>

<p>The non-reentrant functions return a pointer to static
storage, where this static storage contains further pointers
to user name, password, gecos field, home directory and
shell. The reentrant functions described here return all of
that in caller-provided buffers. First of all there is the
buffer pwbuf that can hold a struct passwd. And next the
buffer buf of size buflen that can hold additional strings.
The result of these functions, the struct passwd read from
the stream, is stored in the provided buffer *pwbuf, and a
pointer to this struct passwd is returned in *pwbufp.</p>

<p>RETURN VALUE On success, these functions return 0 and
*pwbufp is a pointer to the struct passwd. On error, these
functions return an error value and *pwbufp is NULL.</p>

<p>ERRORS ENOENT No more entries.</p>

<p>ERANGE Insufficient buffer space supplied. Try again
with larger buffer.</p>

<p>CONFORMING TO These functions are GNU extensions, done
in a style resembling the POSIX version of functions like
getpwnam_r(3). Other systems use pro- totype</p>

<p>struct passwd * getpwent_r(struct passwd *pwd, char
*buf, int buflen);</p>

<p>or, better,</p>

<p>int getpwent_r(struct passwd *pwd, char *buf, int
buflen, FILE **pw_fp);</p>

<p>NOTES The function getpwent_r() is not really reentrant
since it shares the reading position in the stream with all
other threads.</p>

<p>EXAMPLE #define _GNU_SOURCE #include &lt;pwd.h&gt;
#include &lt;stdio.h&gt; #define BUFLEN 4096</p>

<p>int main(void) { struct passwd pw, *pwp; char
buf[BUFLEN]; int i;</p>

<p>setpwent(); while (1) { i = getpwent_r(&amp;pw, buf,
BUFLEN, &amp;pwp); if (i) break; printf(&quot;%s (%d)HOME
%sSHELL %s0, pwp-&gt;pw_name, pwp-&gt;pw_uid,
pwp-&gt;pw_dir, pwp-&gt;pw_shell); } endpwent();
exit(EXIT_SUCCESS); }</p>

<p>SEE ALSO fgetpwent(3), getpw(3), getpwent(3),
getpwnam(3), getpwuid(3), putp- went(3), passwd(5)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>GNU 2007-07-26 GETPWENT_R(3)</p>
<hr>
</body>
</html>
