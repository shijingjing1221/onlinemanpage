<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:07:16 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>mformat(1) mformat(1)</p>

<p>Name mformat - add an MSDOS filesystem to a low-level
formatted floppy disk</p>

<p>Note of warning This manpage has been automatically
generated from mtoolss texinfo documentation, and may not be
entirely accurate or complete. See the end of this man page
for details.</p>

<p>Description The mformat command is used to add an MS-DOS
filesystem to a low-level formatted diskette. Its syntax
is:</p>

<p>mformat [-t cylinders] [-h heads] [-s sectors] [-f size]
[-1] [-4] [-8] [-v volume_label] [-F] [-S sizecode] [-X] [-2
sectors_on_track_0] [-3] [-0 rate_on_track_0] [-A
rate_on_other_tracks] [-M software_sector_size] [-N
serial_number] [-a] [-C] [-H hidden_sectors] [-I fsVersion]
[-r root_sectors] [-L fat_len] [-B boot_sector] [-k] [-m
media_descriptor] drive:</p>

<p>Mformat adds a minimal MS-DOS filesystem (boot sector,
FAT, and root directory) to a diskette that has already been
formatted by a Unix low- level format.</p>

<p>The following options are supported: (The S, 2, 1 and M
options may not exist if this copy of mtools has been
compiled without the USE_2M option)</p>

<p>The following options are the same as for Dos s format
command:</p>

<p>Options v Specifies the volume label. A volume label
identifies the disk and can be a maximum of 11 characters.
If you omit the -v switch, mlabel will assign no label to
the disk.</p>

<p>f Specifies the size of the DOS filesystem to format.
Only a cer- tain number of predefined sizes are supported by
this flag; for others use the -h/-t/-s flags. The following
sizes are sup- ported:</p>

<p>160 160K, single-sided, 8 sectors per track, 40
cylinders (for 5 1/4 DD)</p>

<p>180 160K, single-sided, 9 sectors per track, 40
cylinders (for 5 1/4 DD)</p>

<p>320 320K, double-sided, 8 sectors per track, 40
cylinders (for 5 1/4 DD)</p>

<p>360 360K, double-sided, 9 sectors per track, 40
cylinders (for 5 1/4 DD)</p>

<p>720 720K, double-sided, 9 sectors per track, 80
cylinders (for 3 1/2 DD)</p>

<p>1200 1200K, double-sided, 15 sectors per track, 80
cylinders (for 5 1/4 HD)</p>

<p>1440 1440K, double-sided, 18 sectors per track, 80
cylinders (for 3 1/2 HD)</p>

<p>2880 2880K, double-sided, 36 sectors per track, 80
cylinders (for 3 1/2 ED)</p>

<p>t Specifies the number of tracks on the disk.</p>

<p>h The number of heads (sides).</p>

<p>n Specifies the number of sectors per track. If the 2m
option is given, number of 512-byte sector equivalents on
generic tracks (i.e. not head 0 track 0). If the 2m option
is not given, num- ber of physical sectors per track (which
may be bigger than 512 bytes).</p>

<p>1 Formats a single side (equivalent to -h 1)</p>

<p>4 Formats a 360K double-sided disk (equivalent to -f
360). When used together with -the 1 switch, this switch
formats a 180K disk</p>

<p>8 Formats a disk with 8 sectors per track.</p>

<p>MSDOS formats q, u and b options are not supported, and
s has a dif- ferent meaning.</p>

<p>The following options are specific to mtools:</p>

<p>F Format the partition as FAT32.</p>

<p>S The sizecode. The size of the sector is 2 ^ (sizecode
+ 7).</p>

<p>X formats the disk as an XDF disk. See section XDF, for
more details. The disk has first to be low-level formatted
using the xdfcopy utility included in the fdutils package.
XDF disks are used for instance for OS/2 install disks.</p>

<p>2 2m format. The parameter to this option describes the
number of sectors on track 0, head 0. This option is
recommended for sec- tors bigger than normal.</p>

<p>3 dont use a 2m format, even if the current geometry of
the disk is a 2m geometry.</p>

<p>0 Data transfer rate on track 0</p>

<p>A Data transfer rate on tracks other than 0</p>

<p>M software sector size. This parameter describes the
sector size in bytes used by the MS-DOS filesystem. By
default it is the physical sector size.</p>

<p>N Uses the requested serial number, instead of
generating one automatically</p>

<p>a If this option is given, an Atari style serial number
is gener- ated. Ataris store their serial number in the OEM
label.</p>

<p>C creates the disk image file to install the MS-DOS
filesystem on it. Obviously, this is useless on physical
devices such as flop- pies and hard disk partitions, but is
interesting for image files.</p>

<p>H number of hidden sectors. This parameter is useful for
format- ting hard disk partition, which are not aligned on
track bound- aries (i.e. first head of first track doesnt
belong to the par- tition, but contains a partition table).
In that case the number of hidden sectors is in general the
number of sectors per cylin- der. This is untested.</p>

<p>I Sets the fsVersion id when formatting a FAT32 drive.
In order to find this out, run minfo on an existing FAT32
drive, and mail me about it, so I can include the correct
value in future ver- sions of mtools.</p>

<p>c Sets the size of a cluster (in sectors). If this
cluster size would generate a FAT that too big for its
number of bits, mtools automatically increases the cluster
size, until the FAT is small enough.</p>

<p>d Sets the number of FAT copies. Default is 2. This
setting can also be specified using the MTOOLS_NFATS
environment variable.</p>

<p>r Sets the size of the root directory (in sectors). Only
applica- ble to 12 and 16 bit FATs. This setting can also be
specified using the MTOOLS_DIR_LEN environment variable.</p>

<p>L Sets the length of the FAT.</p>

<p>B Use the bootsector stored in the given file or device,
instead of using its own. Only the geometry fields are
updated to match the target disks parameters.</p>

<p>k Keep the existing boot sector as much as possible.
Only the geometry fields and other similar filesystem data
are updated to match the target disks parameters.</p>

<p>m Use a non-standard media descriptor byte for this
disk. The media descriptor is stored at position 21 of the
boot sector, and as first byte in each FAT copy. Using this
option may con- fuse DOS or older mtools version, and may
make the disk unread- able. Only use if you know what you
are doing.</p>

<p>To format a diskette at a density other than the
default, you must sup- ply (at least) those command line
parameters that are different from the default.</p>

<p>Mformat returns 0 on success or 1 on failure.</p>

<p>It doesn t record bad block information to the Fat, use
mbadblocks for that.</p>

<p>See Also Mtools texinfo doc</p>

<p>Viewing the texi doc This manpage has been automatically
generated from mtoolss texinfo documentation. However, this
process is only approximative, and some items, such as
crossreferences, footnotes and indices are lost in this
translation process. Indeed, these items have no appropriate
represen- tation in the manpage format. Moreover, not all
information has been translated into the manpage version.
Thus I strongly advise you to use the original texinfo doc.
See the end of this manpage for instructions how to view the
texinfo doc.</p>

<p>* To generate a printable copy from the texinfo doc, run
the fol- lowing commands:</p>

<p>./configure; make dvi; dvips mtools.dvi</p>

<p>* To generate a html copy, run:</p>

<p>./configure; make html</p>

<p>A premade html can be found at http://www.gnu.org/soft-
ware/mtools/manual/mtools.html</p>

<p>* To generate an info copy (browsable using emacs info
mode), run:</p>

<p>./configure; make info</p>

<p>The texinfo doc looks most pretty when printed or as
html. Indeed, in the info version certain examples are
difficult to read due to the quoting conventions used in
info.</p>

<p>mtools-4.0.12 03Nov09 mformat(1)</p>
<hr>
</body>
</html>
