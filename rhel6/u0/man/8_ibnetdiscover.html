<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:04:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IBNETDISCOVER(8) OpenIB Diagnostics IBNETDISCOVER(8)</p>

<p>NAME ibnetdiscover - discover InfiniBand topology</p>

<p>SYNOPSIS ibnetdiscover [-d(ebug)] [-e(rr_show)]
[-v(erbose)] [-s(how)] [-l(ist)] [-g(rouping)] [-H(ca_list)]
[-S(witch_list)] [-R(outer_list)] [-C ca_name] [-P ca_port]
[-t(imeout) timeout_ms] [-V(ersion)] [--node- name-map
&lt;node-name-map&gt;] [-p(orts)] [-m(ax_hops)] [-h(elp)]
[&lt;topol- ogy-file&gt;]</p>

<p>DESCRIPTION ibnetdiscover performs IB subnet discovery
and outputs a human readable topology file. GUIDs, node
types, and port numbers are displayed as well as port LIDs
and NodeDescriptions. All nodes (and links) are dis- played
(full topology). Optionally, this utility can be used to
list the current connected nodes by nodetype. The output is
printed to standard output unless a topology file is
specified.</p>

<p>OPTIONS -l, --list List of connected nodes</p>

<p>-g, --grouping Show grouping. Grouping correlates IB
nodes by different vendor specific schemes. It may also show
the switch external ports correspondence.</p>

<p>-H, --Hca_list List of connected CAs</p>

<p>-S, --Switch_list List of connected switches</p>

<p>-R, --Router_list List of connected routers</p>

<p>-s, --show Show progress information during
discovery.</p>

<p>--node-name-map &lt;node-name-map&gt; Specify a node
name map. The node name map file maps GUIDs to more user
friendly names. See file format below.</p>

<p>-p, --ports Obtain a ports report which is a list of
connected ports with relevant information (like LID,
portnum, GUID, width, speed, and NodeDescription).</p>

<p>-m, --max_hops Report max hops discovered.</p>

<p>COMMON OPTIONS Most OpenIB diagnostics take the
following common flags. The exact list of supported flags
per utility can be found in the usage message and can be
shown using the util_name -h syntax.</p>

<p># Debugging flags</p>

<p>-d raise the IB debugging level. May be used several
times (-ddd or -d -d -d).</p>

<p>-e show send and receive errors (timeouts and
others)</p>

<p>-h show the usage message</p>

<p>-v increase the application verbosity level. May be used
several times (-vv or -v -v -v)</p>

<p>-V show the version info.</p>

<p># Other common flags:</p>

<p>-C &lt;ca_name&gt; use the specified ca_name.</p>

<p>-P &lt;ca_port&gt; use the specified ca_port.</p>

<p>-t &lt;timeout_ms&gt; override the default timeout for
the solicited mads.</p>

<p>Multiple CA/Multiple Port Support</p>

<p>When no IB device or port is specified, the port to use
is selected by the following criteria:</p>

<p>1. the first port that is ACTIVE.</p>

<p>2. if not found, the first port that is UP (physical
link up).</p>

<p>If a port and/or CA name is specified, the user request
is attempted to be fulfilled, and will fail if it is not
possible.</p>

<p>TOPOLOGY FILE FORMAT The topology file format is human
readable and largely intuitive. Most identifiers are given
textual names like vendor ID (vendid), device ID (device
ID), GUIDs of various types (sysimgguid, caguid, switchguid,
etc.). PortGUIDs are shown in parentheses (). For switches,
this is shown on the switchguid line. For CA and router
ports, it is shown on the connectivity lines. The IB node is
identified followed by the num- ber of ports and a quoted
the node GUID. On the right of this line is a comment (#)
followed by the NodeDescription in quotes. If the node is a
switch, this line also contains whether switch port 0 is
base or enhanced, and the LID and LMC of port 0. Subsequent
lines pertaining to this node show the connectivity. On the
left is the port number of the current node. On the right is
the peer node (node at other end of link). It is identified
in quotes with nodetype followed by - followed by NodeGUID
with the port number in square brackets. Further on the
right is a comment (#). What follows the comment is
dependent on the node type. If it it a switch node, it is
followed by the NodeDescrip- tion in quotes and the LID of
the peer node. If it is a CA or router node, it is followed
by the local LID and LMC and then followed by the
NodeDescription in quotes and the LID of the peer node. The
active link width and speed are then appended to the end of
this output line.</p>

<p>An example of this is: # # Topology file: generated on
Tue Jun 5 14:15:10 2007 # # Max of 3 hops discovered #
Initiated from node 0008f10403960558 port
0008f10403960559</p>

<p>Non-Chassis Nodes</p>

<p>vendid=0x8f1 devid=0x5a06 sysimgguid=0x5442ba00003000
switchguid=0x5442ba00003080(5442ba00003080) Switch 24
&quot;S-005442ba00003080&quot; # &quot;ISR9024
Voltaire&quot; base port 0 lid 6 lmc 0 [22]
&quot;H-0008f10403961354&quot;[1](8f10403961355) #
&quot;MT23108 InfiniHost Mellanox Technologies&quot; lid 4
4xSDR [10] &quot;S-0008f10400410015&quot;[1] # &quot;SW-6IB4
Voltaire&quot; lid 3 4xSDR [8]
&quot;H-0008f10403960558&quot;[2](8f1040396055a) #
&quot;MT23108 InfiniHost Mellanox Technologies&quot; lid 14
4xSDR [6] &quot;S-0008f10400410015&quot;[3] # &quot;SW-6IB4
Voltaire&quot; lid 3 4xSDR [12]
&quot;H-0008f10403960558&quot;[1](8f10403960559) #
&quot;MT23108 InfiniHost Mellanox Technologies&quot; lid 10
4xSDR</p>

<p>vendid=0x8f1 devid=0x5a05
switchguid=0x8f10400410015(8f10400410015) Switch 8
&quot;S-0008f10400410015&quot; # &quot;SW-6IB4
Voltaire&quot; base port 0 lid 3 lmc 0 [6]
&quot;H-0008f10403960984&quot;[1](8f10403960985) #
&quot;MT23108 InfiniHost Mellanox Technologies&quot; lid 16
4xSDR [4] &quot;H-005442b100004900&quot;[1](5442b100004901)
# &quot;MT23108 InfiniHost Mellanox Technologies&quot; lid
12 4xSDR [1] &quot;S-005442ba00003080&quot;[10] #
&quot;ISR9024 Voltaire&quot; lid 6 1xSDR [3]
&quot;S-005442ba00003080&quot;[6] # &quot;ISR9024
Voltaire&quot; lid 6 4xSDR</p>

<p>vendid=0x2c9 devid=0x5a44 caguid=0x8f10403960984 Ca 2
&quot;H-0008f10403960984&quot; # &quot;MT23108 InfiniHost
Mellanox Technologies&quot; [1](8f10403960985)
&quot;S-0008f10400410015&quot;[6] # lid 16 lmc 1
&quot;SW-6IB4 Voltaire&quot; lid 3 4xSDR</p>

<p>vendid=0x2c9 devid=0x5a44 caguid=0x5442b100004900 Ca 2
&quot;H-005442b100004900&quot; # &quot;MT23108 InfiniHost
Mellanox Technologies&quot; [1](5442b100004901)
&quot;S-0008f10400410015&quot;[4] # lid 12 lmc 1
&quot;SW-6IB4 Voltaire&quot; lid 3 4xSDR</p>

<p>vendid=0x2c9 devid=0x5a44 caguid=0x8f10403961354 Ca 2
&quot;H-0008f10403961354&quot; # &quot;MT23108 InfiniHost
Mellanox Technologies&quot; [1](8f10403961355)
&quot;S-005442ba00003080&quot;[22] # lid 4 lmc 1
&quot;ISR9024 Voltaire&quot; lid 6 4xSDR</p>

<p>vendid=0x2c9 devid=0x5a44 caguid=0x8f10403960558 Ca 2
&quot;H-0008f10403960558&quot; # &quot;MT23108 InfiniHost
Mellanox Technologies&quot; [2](8f1040396055a)
&quot;S-005442ba00003080&quot;[8] # lid 14 lmc 1
&quot;ISR9024 Voltaire&quot; lid 6 4xSDR [1](8f10403960559)
&quot;S-005442ba00003080&quot;[12] # lid 10 lmc 1
&quot;ISR9024 Voltaire&quot; lid 6 1xSDR</p>

<p>When grouping is used, IB nodes are organized into
chasses which are numbered. Nodes which cannot be determined
to be in a chassis are dis- played as &quot;Non-Chassis
Nodes&quot;. External ports are also shown on the
connectivity lines.</p>

<p>NODE NAME MAP FILE FORMAT The node name map is used to
specify user friendly names for nodes in the output. GUIDs
are used to perform the lookup.</p>

<p>Generically:</p>

<p># comment &lt;guid&gt; &quot;&lt;name&gt;&quot;</p>

<p>Example:</p>

<p># IB1 # Line cards 0x0008f104003f125c &quot;IB1 (Rack 11
slot 1 ) ISR9288/ISR9096 Voltaire sLB-24D&quot;
0x0008f104003f125d &quot;IB1 (Rack 11 slot 1 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; 0x0008f104003f10d2
&quot;IB1 (Rack 11 slot 2 ) ISR9288/ISR9096 Voltaire
sLB-24D&quot; 0x0008f104003f10d3 &quot;IB1 (Rack 11 slot 2 )
ISR9288/ISR9096 Voltaire sLB-24D&quot; 0x0008f104003f10bf
&quot;IB1 (Rack 11 slot 12 ) ISR9288/ISR9096 Voltaire
sLB-24D&quot; # Spines 0x0008f10400400e2d &quot;IB1 (Rack 11
spine 1 ) ISR9288 Voltaire sFB-12D&quot; 0x0008f10400400e2e
&quot;IB1 (Rack 11 spine 1 ) ISR9288 Voltaire sFB-12D&quot;
0x0008f10400400e2f &quot;IB1 (Rack 11 spine 1 ) ISR9288
Voltaire sFB-12D&quot; 0x0008f10400400e31 &quot;IB1 (Rack 11
spine 2 ) ISR9288 Voltaire sFB-12D&quot; 0x0008f10400400e32
&quot;IB1 (Rack 11 spine 2 ) ISR9288 Voltaire sFB-12D&quot;
# GUID Node Name 0x0008f10400411a08 &quot;SW1 (Rack 3)
ISR9024 Voltaire 9024D&quot; 0x0008f10400411a28 &quot;SW2
(Rack 3) ISR9024 Voltaire 9024D&quot; 0x0008f10400411a34
&quot;SW3 (Rack 3) ISR9024 Voltaire 9024D&quot;
0x0008f104004119d0 &quot;SW4 (Rack 3) ISR9024 Voltaire
9024D&quot;</p>

<p>AUTHORS Hal Rosenstock &lt;halr@voltaire.com&gt;</p>

<p>Ira Weiny &lt;weiny2@llnl.gov&gt;</p>

<p>OpenIB May 13, 2009 IBNETDISCOVER(8)</p>
<hr>
</body>
</html>
