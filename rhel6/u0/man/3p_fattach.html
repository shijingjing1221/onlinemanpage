<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:59:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>FATTACH(3P) POSIX Programmer s Manual FATTACH(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME fattach - attach a STREAMS-based file descriptor to
a file in the file system name space (STREAMS)</p>

<p>SYNOPSIS #include &lt;stropts.h&gt;</p>

<p>int fattach(int fildes, const char *path);</p>

<p>DESCRIPTION The fattach() function shall attach a
STREAMS-based file descriptor to a file, effectively
associating a pathname with fildes. The application shall
ensure that the fildes argument is a valid open file
descriptor associated with a STREAMS file. The path argument
points to a pathname of an existing file. The application
shall have the appropriate privi- leges or be the owner of
the file named by path and have write permis- sion. A
successful call to fattach() shall cause all pathnames that
name the file named by path to name the STREAMS file
associated with fildes, until the STREAMS file is detached
from the file. A STREAMS file can be attached to more than
one file and can have several path- names associated with
it.</p>

<p>The attributes of the named STREAMS file shall be
initialized as fol- lows: the permissions, user ID, group
ID, and times are set to those of the file named by path,
the number of links is set to 1, and the size and device
identifier are set to those of the STREAMS file associated
with fildes. If any attributes of the named STREAMS file are
subse- quently changed (for example, by chmod()), neither
the attributes of the underlying file nor the attributes of
the STREAMS file to which fildes refers shall be
affected.</p>

<p>File descriptors referring to the underlying file,
opened prior to an fattach() call, shall continue to refer
to the underlying file.</p>

<p>RETURN VALUE Upon successful completion, fattach() shall
return 0. Otherwise, -1 shall be returned and errno set to
indicate the error.</p>

<p>ERRORS The fattach() function shall fail if:</p>

<p>EACCES Search permission is denied for a component of
the path prefix, or the process is the owner of path but
does not have write per- missions on the file named by
path.</p>

<p>EBADF The fildes argument is not a valid open file
descriptor.</p>

<p>EBUSY The file named by path is currently a mount point
or has a STREAMS file attached to it.</p>

<p>ELOOP A loop exists in symbolic links encountered during
resolution of the path argument.</p>

<p>ENAMETOOLONG The size of path exceeds {PATH_MAX} or a
component of path is longer than {NAME_MAX}.</p>

<p>ENOENT A component of path does not name an existing
file or path is an empty string.</p>

<p>ENOTDIR A component of the path prefix is not a
directory.</p>

<p>EPERM The effective user ID of the process is not the
owner of the file named by path and the process does not
have appropriate privilege.</p>

<p>The fattach() function may fail if:</p>

<p>EINVAL The fildes argument does not refer to a STREAMS
file.</p>

<p>ELOOP More than {SYMLOOP_MAX} symbolic links were
encountered during resolution of the path argument.</p>

<p>ENAMETOOLONG Pathname resolution of a symbolic link
produced an intermediate result whose length exceeds
{PATH_MAX}.</p>

<p>EXDEV A link to a file on another file system was
attempted.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Attaching a File Descriptor to a File In the
following example, fd refers to an open STREAMS file. The
call to fattach() associates this STREAM with the file
/tmp/named-STREAM, such that any future calls to open
/tmp/named-STREAM, prior to breaking the attachment via a
call to fdetach(), will instead create a new file handle
referring to the STREAMS file associated with fd.</p>

<p>#include &lt;stropts.h&gt; ... int fd; char *filename =
&quot;/tmp/named-STREAM&quot;; int ret;</p>

<p>ret = fattach(fd, filename);</p>

<p>APPLICATION USAGE The fattach() function behaves
similarly to the traditional mount() function in the way a
file is temporarily replaced by the root direc- tory of the
mounted file system. In the case of fattach(), the replaced
file need not be a directory and the replacing file is a
STREAMS file.</p>

<p>RATIONALE The file attributes of a file which has been
the subject of an fat- tach() call are specifically set
because of an artefact of the original implementation. The
internal mechanism was the same as for the mount() function.
Since mount() is typically only applied to directories, the
effects when applied to a regular file are a little
surprising, espe- cially as regards the link count which
rigidly remains one, even if there were several links
originally and despite the fact that all orig- inal links
refer to the STREAM as long as the fattach() remains in
effect.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO fdetach(), isastream(), the Base Definitions
volume of IEEE Std 1003.1-2001, &lt;stropts.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 FATTACH(3P)</p>
<hr>
</body>
</html>
