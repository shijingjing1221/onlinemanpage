<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:12:24 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>QEMU-IMG(1) QEMU-IMG(1)</p>

<p>NAME qemu-img - QEMU disk image utility</p>

<p>SYNOPSIS usage: qemu-img command [command options]</p>

<p>OPTIONS The following commands are supported:</p>

<p>check [-f fmt] filename create [-f fmt] [-o options]
filename [size] commit [-f fmt] filename convert [-c] [-f
fmt] [-O output_fmt] [-o options] filename [filename2 [...]]
output_filename info [-f fmt] filename snapshot [-l | -a
snapshot | -c snapshot | -d snapshot] filename rebase [-f
fmt] [-u] -b backing_file [-F backing_fmt] filename</p>

<p>Command parameters:</p>

<p>filename is a disk image filename</p>

<p>fmt is the disk image format. It is guessed
automatically in most cases. See below for a description of
the supported disk formats.</p>

<p>size is the disk image size in bytes. Optional suffixes
&quot;k&quot; or &quot;K&quot; (kilobyte, 1024)
&quot;M&quot; (megabyte, 1024k) and &quot;G&quot; (gigabyte,
1024M) and T (terabyte, 1024G) are supported. &quot;b&quot;
is ignored.</p>

<p>output_filename is the destination disk image
filename</p>

<p>output_fmt is the destination format</p>

<p>options is a comma separated list of format specific
options in a name=value format. Use &quot;-o ?&quot; for an
overview of the options supported by the used format or see
the format descriptions below for details.</p>

<p>-c indicates that target image must be compressed (qcow
format only)</p>

<p>-h with or without a command shows help and lists the
supported formats</p>

<p>Parameters to snapshot subcommand:</p>

<p>snapshot is the name of the snapshot to create, apply or
delete</p>

<p>-a applies a snapshot (revert disk to saved state)</p>

<p>-c creates a snapshot</p>

<p>-d deletes a snapshot</p>

<p>-l lists all snapshots in the given image</p>

<p>Command description:</p>

<p>create [-f fmt] [-o options] filename [size] Create the
new disk image filename of size size and format fmt.
Depending on the file format, you can add one or more
options that enable additional features of this format.</p>

<p>If the option backing_file is specified, then the image
will record only the differences from backing_file. No size
needs to be specified in this case. backing_file will never
be modified unless you use the &quot;commit&quot; monitor
command (or qemu-img commit).</p>

<p>The size can also be specified using the size option
with &quot;-o&quot;, it doesnt need to be specified
separately in this case.</p>

<p>commit [-f fmt] filename Commit the changes recorded in
filename in its base image.</p>

<p>convert [-c] [-f fmt] [-O output_fmt] [-o options]
filename [filename2 [...]] output_filename Convert the disk
image filename to disk image output_filename using format
output_fmt. It can be optionally compressed (&quot;-c&quot;
option) or use any format specific options like encryption
(&quot;-o&quot; option).</p>

<p>Only the formats &quot;qcow&quot; and &quot;qcow2&quot;
support compression. The compression is read-only. It means
that if a compressed sector is rewritten, then it is
rewritten as uncompressed data.</p>

<p>Image conversion is also useful to get smaller image
when using a growable format such as &quot;qcow&quot; or
&quot;cow&quot;: the empty sectors are detected and
suppressed from the destination image.</p>

<p>You can use the backing_file option to force the output
image to be created as a copy on write image of the
specified base image; the backing_file should have the same
content as the input s base image, however the path, image
format, etc may differ.</p>

<p>info [-f fmt] filename Give information about the disk
image filename. Use it in particular to know the size
reserved on disk which can be different from the displayed
size. If VM snapshots are stored in the disk image, they are
displayed too.</p>

<p>snapshot [-l | -a snapshot | -c snapshot | -d snapshot ]
filename List, apply, create or delete snapshots in image
filename.</p>

<p>Supported image file formats:</p>

<p>raw Raw disk image format (default). This format has the
advantage of being simple and easily exportable to all other
emulators. If your file system supports holes (for example
in ext2 or ext3 on Linux or NTFS on Windows), then only the
written sectors will reserve space. Use &quot;qemu-img
info&quot; to know the real size used by the image or
&quot;ls -ls&quot; on Unix/Linux.</p>

<p>host_device Host device format. This format should be
used instead of raw when converting to block devices or
other devices where &quot;holes&quot; are not supported.</p>

<p>qcow2 QEMU image format, the most versatile format. Use
it to have smaller images (useful if your filesystem does
not supports holes, for example on Windows), optional AES
encryption, zlib based compression and support of multiple
VM snapshots.</p>

<p>Supported options:</p>

<p>&quot;backing_file&quot; File name of a base image (see
create subcommand)</p>

<p>&quot;backing_fmt&quot; Image format of the base
image</p>

<p>&quot;encryption&quot; If this option is set to
&quot;on&quot;, the image is encrypted.</p>

<p>Encryption uses the AES format which is very secure (128
bit keys). Use a long password (16 characters) to get
maximum protection.</p>

<p>&quot;cluster_size&quot; Changes the qcow2 cluster size
(must be between 512 and 2M). Smaller cluster sizes can
improve the image file size whereas larger cluster sizes
generally provide better performance.</p>

<p>&quot;preallocation&quot; Preallocation mode (allowed
values: off, metadata). An image with preallocated metadata
is initially larger but can improve performance when the
image needs to grow.</p>

<p>qcow Old QEMU image format. Left for compatibility.</p>

<p>Supported options:</p>

<p>&quot;backing_file&quot; File name of a base image (see
create subcommand)</p>

<p>&quot;encryption&quot; If this option is set to
&quot;on&quot;, the image is encrypted.</p>

<p>cow User Mode Linux Copy On Write image format. Used to
be the only growable image format in QEMU. It is supported
only for compatibility with previous versions. It does not
work on win32.</p>

<p>vdi VirtualBox 1.1 compatible image format.</p>

<p>vmdk VMware 3 and 4 compatible image format.</p>

<p>Supported options:</p>

<p>&quot;backing_fmt&quot; Image format of the base
image</p>

<p>&quot;compat6&quot; Create a VMDK version 6 image
(instead of version 4)</p>

<p>vpc VirtualPC compatible image format (VHD).</p>

<p>cloop Linux Compressed Loop image, useful only to reuse
directly compressed CD-ROM images present for example in the
Knoppix CD- ROMs.</p>

<p>SEE ALSO The HTML documentation of QEMU for more precise
information and Linux user mode emulator invocation.</p>

<p>AUTHOR Fabrice Bellard</p>

<p>2010-08-24 QEMU-IMG(1)</p>
<hr>
</body>
</html>
