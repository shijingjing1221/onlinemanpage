<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:57:03 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>DDP(7) Linux Programmer s Manual DDP(7)</p>

<p>NAME ddp - Linux AppleTalk protocol implementation</p>

<p>SYNOPSIS #include &lt;sys/socket.h&gt; #include
&lt;netatalk/at.h&gt;</p>

<p>ddp_socket = socket(AF_APPLETALK, SOCK_DGRAM, 0);
raw_socket = socket(AF_APPLETALK, SOCK_RAW, protocol);</p>

<p>DESCRIPTION Linux implements the Appletalk protocols
described in Inside Appletalk. Only the DDP layer and AARP
are present in the kernel. They are designed to be used via
the netatalk protocol libraries. This page documents the
interface for those who wish or need to use the DDP layer
directly.</p>

<p>The communication between Appletalk and the user program
works using a BSD-compatible socket interface. For more
information on sockets, see socket(7).</p>

<p>An AppleTalk socket is created by calling the socket(2)
function with a AF_APPLETALK socket family argument. Valid
socket types are SOCK_DGRAM to open a ddp socket or SOCK_RAW
to open a raw socket. protocol is the Appletalk protocol to
be received or sent. For SOCK_RAW you must spec- ify
ATPROTO_DDP.</p>

<p>Raw sockets may be only opened by a process with
effective user ID 0 or when the process has the CAP_NET_RAW
capability.</p>

<p>Address Format An Appletalk socket address is defined as
a combination of a network number, a node number, and a port
number.</p>

<p>struct at_addr { unsigned short s_net; unsigned char
s_node; };</p>

<p>struct sockaddr_atalk { sa_family_t sat_family; /*
address family */ unsigned char sat_port; /* port */ struct
at_addr sat_addr; /* net/node */ };</p>

<p>sat_family is always set to AF_APPLETALK. sat_port
contains the port. The port numbers below 129 are known as
reserved ports. Only processes with the effective user ID 0
or the CAP_NET_BIND_SERVICE capability may bind(2) to these
sockets. sat_addr is the host address. The net mem- ber of
struct at_addr contains the host network in network byte
order. The value of AT_ANYNET is a wildcard and also implies
this network. The node member of struct at_addr contains the
host node number. The value of AT_ANYNODE is a wildcard and
also implies this node. The value of ATADDR_BCAST is a link
local broadcast address.</p>

<p>Socket Options No protocol-specific socket options are
supported.</p>

<p>/proc interfaces IP supports a set of /proc interfaces
to configure some global AppleTalk parameters. The
parameters can be accessed by reading or writing files in
the directory /proc/sys/net/atalk/.</p>

<p>aarp-expiry-time The time interval (in seconds) before
an AARP cache entry expires.</p>

<p>aarp-resolve-time The time interval (in seconds) before
an AARP cache entry is resolved.</p>

<p>aarp-retransmit-limit The number of retransmissions of
an AARP query before the node is declared dead.</p>

<p>aarp-tick-time The timer rate (in seconds) for the timer
driving AARP.</p>

<p>The default values match the specification and should
never need to be changed.</p>

<p>Ioctls All ioctls described in socket(7) apply to
DDP.</p>

<p>ERRORS EACCES The user tried to execute an operation
without the necessary permissions. These include sending to
a broadcast address with- out having the broadcast flag set,
and trying to bind to a reserved port without effective user
ID 0 or CAP_NET_BIND_SER- VICE.</p>

<p>EADDRINUSE Tried to bind to an address already in
use.</p>

<p>EADDRNOTAVAIL A nonexistent interface was requested or
the requested source address was not local.</p>

<p>EAGAIN Operation on a non-blocking socket would
block.</p>

<p>EALREADY A connection operation on a non-blocking socket
is already in progress.</p>

<p>ECONNABORTED A connection was closed during an
accept(2).</p>

<p>EHOSTUNREACH No routing table entry matches the
destination address.</p>

<p>EINVAL Invalid argument passed.</p>

<p>EISCONN connect(2) was called on an already connected
socket.</p>

<p>EMSGSIZE Datagram is bigger than the DDP MTU.</p>

<p>ENODEV Network device not available or not capable of
sending IP.</p>

<p>ENOENT SIOCGSTAMP was called on a socket where no packet
arrived.</p>

<p>ENOMEM and ENOBUFS Not enough memory available.</p>

<p>ENOPKG A kernel subsystem was not configured.</p>

<p>ENOPROTOOPT and EOPNOTSUPP Invalid socket option
passed.</p>

<p>ENOTCONN The operation is only defined on a connected
socket, but the socket wasnt connected.</p>

<p>EPERM User doesnt have permission to set high priority,
make a con- figuration change, or send signals to the
requested process or group,</p>

<p>EPIPE The connection was unexpectedly closed or shut
down by the other end.</p>

<p>ESOCKTNOSUPPORT The socket was unconfigured, or an
unknown socket type was requested.</p>

<p>VERSIONS Appletalk is supported by Linux 2.0 or higher.
The /proc interfaces exist since Linux 2.2.</p>

<p>NOTES Be very careful with the SO_BROADCAST option - it
is not privileged in Linux. It is easy to overload the
network with careless sending to broadcast addresses.</p>

<p>Compatibility The basic AppleTalk socket interface is
compatible with netatalk on BSD-derived systems. Many BSD
systems fail to check SO_BROADCAST when sending broadcast
frames; this can lead to compatibility problems.</p>

<p>The raw socket mode is unique to Linux and exists to
support the alter- native CAP package and AppleTalk
monitoring tools more easily.</p>

<p>BUGS There are too many inconsistent error values.</p>

<p>The ioctls used to configure routing tables, devices,
AARP tables and other devices are not yet described.</p>

<p>SEE ALSO recvmsg(2), sendmsg(2), capabilities(7),
socket(7)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2008-11-20 DDP(7)</p>
<hr>
</body>
</html>
