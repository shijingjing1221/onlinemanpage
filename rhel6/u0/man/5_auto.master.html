<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:53:51 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>AUTO.MASTER(5) AUTO.MASTER(5)</p>

<p>NAME auto.master - Master Map for automounter</p>

<p>DESCRIPTION The auto.master map is consulted to set up
automount managed mount points when the autofs(8) script is
invoked or the automount(8) program is run. Each line
describes a mount point and refers to an autofs map
describing file systems to be mounted under the mount
point.</p>

<p>The default location of the master map is
/etc/auto.master but an al- ternate name may be given on the
command line when running the auto- mounter and the default
master map may changed by setting the MASTER_MAP_NAME
configuration variable in /etc/sysconfig/autofs. If the
master map name has no path then the system Name Service
Switch configuration will be consulted and each of the
sources searched in line with the rules given in the Name
Service Switch configuration.</p>

<p>Access to mounts in maps is governed by a key.</p>

<p>For direct maps the mount point is always specified
as:</p>

<p>/-</p>

<p>and the key used within the direct map is the full path
to the mount point.</p>

<p>For indirect maps access is by using the path
scheme:</p>

<p>/mount-point/key</p>

<p>where mount-point is one of the entries listed in the
master map. The key is a single directory component and is
matched against entries in the map given in the entry (See
autofs(5)).</p>

<p>Additionally, a map may be included from its source as
if it were it- self present in the master map by including a
line of the form: + [map- type,format:]map[options] and
automount(8) will process the map accord- ing to the
specification described below for map entries.</p>

<p>FORMAT Master map entries have three fields separated by
an arbitrary number of spaces or tabs. Lines beginning with
# are comments. The first field is the mount point described
above and the second field is the name of the map to be
consulted for the mount point followed by the third field
which contains options to be applied to all entries in the
map.</p>

<p>The format of a master map entry is:</p>

<p>mount-point [map-type[,format]:]map [options]</p>

<p>mount-point Base location for the autofs filesystem to
be mounted. For in- direct maps this directory will be
created (as with mkdir -p) and is removed when the autofs
filesystem is umounted.</p>

<p>map-type Type of map used for this mount point. The
following are valid map types:</p>

<p>file The map is a regular text file.</p>

<p>program The map is an executable program, which is
passed a key on the command line and returns an entry
(everything be- sides the key) on stdout if successful.</p>

<p>yp The map is a NIS (YP) database.</p>

<p>nisplus The map is a NIS+ database.</p>

<p>hesiod The map is a hesiod database whose filsys entries
are used for maps.</p>

<p>ldap or ldaps The map is stored in an LDAP directory. If
ldaps is used the appropriate certificate must be configured
in the LDAP client.</p>

<p>multi This map type allows the specification of multiple
maps separated by &quot;--&quot;. These maps are searched in
order to resolve key lookups.</p>

<p>format Format of the map data; currently the only
formats recognized are sun, which is a subset of the Sun
automounter map format, and hesiod, for hesiod filesys
entries. If the format is left unspecified, it defaults to
sun for all map types except hesiod.</p>

<p>map Name of the map to use. This is an absolute UNIX
pathname for maps of types file or program, and the name of
a database in the case for maps of type yp, nisplus, or
hesiod or the dn of an LDAP entry for maps of type ldap.</p>

<p>options Any remaining command line arguments without
leading dashes (-) are taken as options (-o) to mount.
Arguments with leading dashes are considered options for the
maps.</p>

<p>The sun format supports the following options:</p>

<p>-Dvariable=value Replace variable with value in map
substitutions.</p>

<p>-strict Treat errors when mounting file systems as
fatal. This is important when multiple file systems should
be mounted (multimounts). If this option is given, no file
system is mounted at all if at least one file system cant be
mounted.</p>

<p>nosymlink This is an autofs specific option that is a
pseudo mount option and so is given without a leading dash.
Histori- cally this option was used to prevent symlinking of
local NFS mounts. Nowadays it can be used to prevent bind
mounting of local NFS filesystems as well. If you need to
prevent bind mounting for only specific entrys in a map then
this can be done by adding the &quot;port=&quot; mount
option to the given entries.</p>

<p>-r, --random-multimount-selection Enables the use of
ramdom selection when choosing a host from a list of
replicated servers. This option is applied to this mount
only, overriding the global setting that may be specified on
the command line.</p>

<p>-n, --negative-timeout &lt;seconds&gt; Set the timeout
for caching failed key lookups. This op- tion can be used to
override the global default given ei- ther on the command
line or in the configuration.</p>

<p>GENERAL SYSTEM DEFAULTS CONFIGURATION The default value
of several general settings may be changed in the
configuration file /etc/sysconfig/autofs. They are:</p>

<p>TIMEOUT sets the default mount timeout (program default
600).</p>

<p>NEGATIVE_TIMEOUT Set the default timeout for caching
failed key lookups (program default 60). If the equivalent
command line option is given it will override this
setting.</p>

<p>MOUNT_WAIT Set the default time to wait for a response
from a spawned mount(8) before sending it a SIGTERM. Note
that we still need to wait for the RPC layer to timeout
before the sub-process exits so this isnt ideal but it is
the best we can do. The default is to wait until mount(8)
returns without intervention.</p>

<p>UMOUNT_WAIT Set the default time to wait for a response
from a spawned umount(8) before sending it a SIGTERM. Note
that we still need to wait for the RPC layer to timeout
before the sub-process ex- its so this isnt ideal but it is
the best we can do.</p>

<p>BROWSE_MODE Maps are browsable by default (program
default &quot;yes&quot;).</p>

<p>MOUNT_NFS_DEFAULT_PROTOCOL Specify the default protocol
used by mount.nfs(8) (program de- fault 3). Since we can t
identify this default automatically we need to set it in the
autofs configuration. This option will on- ly make a
difference for replicated map entries as availability
probing isnt used for single host map entries.</p>

<p>APPEND_OPTIONS Determine whether global options, given
on the command line or per mount in the master map, are
appended to map entry options or if the map entry options
replace the global options (program default &quot;yes&quot;,
append options).</p>

<p>LOGGING set default log level &quot;none&quot;,
&quot;verbose&quot; or &quot;debug&quot; (program de- fault
&quot;none&quot;).</p>

<p>BUILTIN MAP -hosts If &quot;-hosts&quot; is given as the
map then accessing a key under the mount point which
corresponds to a hostname will allow access to the exports
of that host.</p>

<p>For example, with an entry in the master map of /net
-hosts accessing /net/myserver will mount exports from
myserver on directories below /net/myserver.</p>

<p>NOTE: mounts done from a hosts map will be mounted with
the &quot;no- suid,nodev,intr&quot; options unless
overridden by explicily specifying the &quot;suid&quot;,
&quot;dev&quot; or &quot;nointr&quot; options in the master
map entry.</p>

<p>LDAP MAPS If the map type ldap is specified the mapname
is of the form [//server- name/]dn, where the optional
servername is the name of the LDAP server to query, and dn
is the Distinguished Name of a subtree to search for map
entries. The old style ldap:servername:mapname is also
understood. Alternatively, the type can be obtained from the
Name Service Switch configuration, in which case the map
name alone must be given.</p>

<p>If no schema is set in the autofs configuration then
autofs will check each of the commonly used schema for a
valid entry and if one is found it will used for subsequent
lookups.</p>

<p>There are three common schemas in use:</p>

<p>nisMap Entries in the nisMap schema are nisObject
objects in the speci- fied subtree, where the cn attribute
is the key (the wildcard key is &quot;/&quot;), and the
nisMapEntry attribute contains the informa- tion used by the
automounter.</p>

<p>automountMap The automountMap schema has two variations
that differ in the attribute used for the map key. Entries
in the automountMap schema are automount objects in the
specified subtree, where the cn or automountKey attribute
(depending on local usage) is the key (the wildcard key is
&quot;/&quot;), and the automountInformation at- tribute
contains the information used by the automounter. Note that
the cn attribute is case insensitive.</p>

<p>The object classes and attributes used for accessing
automount maps in LDAP can be changed by setting entries in
the autofs configuration lo- cated in
/etc/sysconfig/autofs.</p>

<p>NOTE: If a schema is given in the configuration then all
the schema configuration values must be set, any partial
schema specifica- tion will be ignored.</p>

<p>The configuration settings available are:</p>

<p>LDAP_TIMEOUT Set the network response timeout (default
8). Set timeout value for the synchronous API calls. The
default is the LDAP library default of an infinite
timeout.</p>

<p>LDAP_NETWORK_TIMEOUT Set the network response timeout
(default 8).</p>

<p>LDAP_URI A space seperated list of server uris of the
form &lt;pro- to&gt;://&lt;server&gt;[/] where &lt;proto&gt;
can be ldap or ldaps. The option can be given multiple
times. Map entries that include a server name override this
option and it is then not used. Default is an empty list in
which case either the server given in a map entry or the
LDAP configured default is used. This uri list is read at
startup and whenever the daemon receives a HUP signal.</p>

<p>This configuration option can also be used to request
autofs lookup SRV RRs for a domain of the form
&lt;proto&gt;:///[&lt;domain dn&gt;]. Note that a trailing
&quot;/&quot; is not allowed when using this form. If the
domain dn is not specified the dns domain name (if any) is
used to construct the do- main dn for the SRV RR lookup. The
server list returned from an SRV RR lookup is refreshed
according to the minimum ttl found in the SRV RR records or
after one hour, whichever is less.</p>

<p>SEARCH_BASE The base dn to use when searching for amap
base dn. This entry may be given multiple times and each
will be checked for a map base dn in the order they occur in
the configuration. The search base list is read at startup
and whenever the daemon recieves a HUP signal.</p>

<p>MAP_OBJECT_CLASS The map object class. In the nisMap
schema this corresponds to the class nisMap and in the
automountMap schema it corresponds to the class
automountMap.</p>

<p>ENTRY_OBJECT_CLASS The map entry object class. In the
nisMap schema this corre- sponds to the class nisObject and
in the automountMap schema it corresponds to the class
automount.</p>

<p>MAP_ATTRIBUTE The attribute used to identify the name of
the map to which this entry belongs. In the nisMap schema
this corresponds to the at- tribute nisMapName and in the
automountMap schema it corresponds to the attribute ou or
automountMapName.</p>

<p>ENTRY_ATTRIBUTE The attribute used to identify a map
key. In the nisMap schema this corresponds to the attribute
cn and in the automountMap schema it corresponds to the
attribute automountKey.</p>

<p>VALUE_ATTRIBUTE The attribute used to identify the value
of the map entry. In the nisMap schema this corresponds to
the attribute nisMapEntry and in the automountMap schema it
corresponds to the attribute automountInformation.</p>

<p>NOTE: It is essential that entries use class and
attribute in a con- sistent manner for correct operation of
autofs. For example mix- ing cn and automountKey attributes
in automount schema map en- tries wont work as expected.</p>

<p>LDAP AUTHENTICATION, ENCRYPTED AND CERTIFIED CONNECTIONS
LDAP authenticated binds, TLS encrypted connections and
certification may be used by setting appropriate values in
the autofs authentication configuration file and configuring
the LDAP client with appropriate settings. The default
location of this file is /etc/autofs_ldap_auth.conf. If this
file exists it will be used to es- tablish whether TLS or
authentication should be used.</p>

<p>An example of this file is:</p>

<p>&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;autofs_ldap_sasl_conf usetls=&quot;yes&quot;
tlsrequired=&quot;no&quot; authrequired=&quot;no&quot;
authtype=&quot;DIGEST-MD5&quot; user=&quot;xyz&quot;
secret=&quot;abc&quot; /&gt;</p>

<p>If TLS encryption is to be used the location of the
Certificate Author- ity certificate must be set within the
LDAP client configuration in or- der to validate the server
certificate. If, in addition, a certified connection is to
be used then the client certificate and private key file
locations must also be configured within the LDAP
client.</p>

<p>In OpenLDAP these may be configured in the ldap.conf
file or in the per-user configuration. For example it may be
sensible to use the sys- tem wide configuration for the
location of the Certificate Authority certificate and set
the location of the client certificate and private key in
the per-user configuration. The location of these files and
the configuration entry requirements is system dependent so
the documenta- tion for your installation will need to be
consulted to get further in- formation.</p>

<p>See autofs_ldap_auth.conf(5) for more information.</p>

<p>EXAMPLE /- auto.data /home /etc/auto.home /mnt
yp:mnt.map</p>

<p>This will generate two mountpoints for /home and /mnt
and install di- rect mount triggers for each entry in the
direct mount map auto.data. All accesses to /home will lead
to the consultation of the map in /etc/auto.home and all
accesses to /mnt will consult the NIS map mnt.map. All
accesses to paths in the map auto.data will trigger mounts
when they are accessed and the Name Service Switch
configuration will be used to locate the source of the map
auto.data.</p>

<p>SEE ALSO automount(8), autofs(5), autofs(8).
autofs_ldap_auth.conf(5)</p>

<p>AUTHOR This manual page was written by Christoph Lameter
&lt;chris@waterf.org&gt;, for the Dean GNU/Linux system.
Edited by &lt;hpa@transmeta.com&gt; and Ian Kent
&lt;raven@themaw.net&gt; .</p>

<p>11 Apr 2006 AUTO.MASTER(5)</p>
<hr>
</body>
</html>
