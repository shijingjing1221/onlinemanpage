<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:05:24 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>KDUMP.CONF(5) KDUMP.CONF(5)</p>

<p>NAME kdump.conf - configuration file for kdump
kernel.</p>

<p>DESCRIPTION kdump.conf is a configuration file for the
kdump kernel crash collec- tion service.</p>

<p>kdump.conf provides post-kexec instructions to the kdump
kernel. It is stored in the initrd file managed by the kdump
service. If you change this file and do not want to restart
before it takes effect, restart the kdump service to rebuild
to initrd.</p>

<p>For most configurations, you can simply review the
examples provided in the stock /etc/kdump.conf.</p>

<p>NOTE: kdump.conf only affects the behavior of the
initramfs. Please read the kdump operational flow section of
kexec-kdump-howto.txt in the docs to better understand how
this configuration file affects the behavior of kdump.</p>

<p>OPTIONS raw &lt;partition&gt; Will dd /proc/vmcore into
&lt;partition&gt;.</p>

<p>net &lt;nfs mount&gt; Will mount fs and copy
/proc/vmcore to &lt;mnt&gt;/var/crash/%HOST-%DATE/, supports
DNS. Note that a fqdn should be used as the server name in
the mount point</p>

<p>net &lt;user@server&gt; Will scp /proc/vmcore to
&lt;user@server&gt;:/var/crash/%HOST-%DATE/, supports DNS.
NOTE: make sure user has necessary write permis- sions on
server and that a fqdn is used as the server name</p>

<p>&lt;fs type&gt; &lt;partition&gt; Will mount -t &lt;fs
type&gt; &lt;partition&gt; /mnt and copy /proc/vmcore to
/mnt/var/crash/%DATE/. NOTE: &lt;partition&gt; can be a
device node, label or uuid.</p>

<p>path &lt;path&gt; Append path to the filesystem device
which you are dumping to. Ignored for raw device dumps. If
unset, will default to /var/crash.</p>

<p>disk_timeout &lt;seconds&gt; Number of seconds to wait
for disks to appear in sysfs prior to continuing Normally,
the kdump initramfs waits for disks that it has determined
it needs to use during the course of saving the vmcore. By
default, it pauses indefinately, but in certain cases, it
may wait indefinately on disks that either wont ever appear
(if a usb drive is removed for instance), or for disks that
it actually doesn t need (depending on configuration). This
allows the pause to be terminated in those events.</p>

<p>core_collector makedumpfile &lt;options&gt; This
directive allows you to use the dump filtering program
makedumpfile to retrieve your core, which on some arches can
drastically reduce core file size. See /sbin/makedumpfile
--help for a list of options. Note that the -i and -g
options are not needed here, as the initrd will
automatically be populated with a config file appropriate
for the running kernel.</p>

<p>If you use other command as a core_collector, probably
you also need to provide its full path in extra_bins.</p>

<p>link_delay &lt;seconds&gt; Some network cards take a
long time to initialize, and some spanning tree enabled
networks do not transmit user traffic for long periods after
a link state changes. This optional parame- ter defines a
wait period after a link is activated in which the initramfs
will wait before attempting to transmit user data.</p>

<p>kdump_post &lt;binary | script&gt; This directive allows
you to run a specified executable just after the memory dump
process terminates. The exit status from the dump process is
fed to the kdump_post executable, which can be used to
trigger different actions for success or failure.</p>

<p>Note that scripts written for use with this directive
must use the /bin/msh interpreter</p>

<p>kdump_pre &lt;binary | script&gt; Works just like the
kdump_post directive, but instead of running after the dump
process, runs immediately before. Exit status of this binary
is interpreted as follows:</p>

<p>0 - continue with dump process as usual</p>

<p>non 0 - reboot/halt the system</p>

<p>Note that scripts written for this directive must use
the /bin/msh interpreter</p>

<p>extra_bins &lt;binaries | shell scripts&gt; This
directive allows you to specify additional binaries or shell
scripts you d like to include in your kdump initrd. Gener-
ally only useful in conjunction with a kdump_post binary or
script that relies on other binaries or scripts.</p>

<p>extra_modules &lt;module(s)&gt; This directive allows
you to specify extra kernel modules that you want to be
loaded in the kdump initrd, typically used to set up access
to non-boot-path dump targets that might otherwise not be
accessible in the kdump environment. Multiple modules can be
listed, separated by a space, and any dependent modules will
automatically be included.</p>

<p>options &lt;module&gt; &lt;option list&gt; This
directive allows you to specify options to apply to modules
in the initramfs. This directive overrides options specified
in /etc/modprobe.conf</p>

<p>default &lt;reboot | halt | shell&gt; Action to preform
instead of mounting root fs and running init process reboot:
If the default action is reboot simply reboot the system
(this is what most people will want, as it returns the
system to a nominal state). shell: If the default action is
shell, then drop to an msh session inside the initramfs from
where you can manually preform additional recovery actions.
Exiting this shell reboots the system. halt: bring the
system to a halt, requiring manual reset NOTE: Since
kdump.conf is only used to configure the kdump initramfs
specifying a default action without also specifying a dump
target will cause the default directive to be ignored. A
warning will be issued on service start if this invalid
configuration is specified. Also note that if no default
action is specified, reboot is implied.</p>

<p>EXAMPLES see /etc/kdump.conf</p>

<p>SEE ALSO kexec(8) mkdumprd(8)</p>

<p>kexec-tools 07/23/2008 KDUMP.CONF(5)</p>
<hr>
</body>
</html>
