<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:58:55 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>exportfs(8) exportfs(8)</p>

<p>NAME exportfs - maintain list of NFS exported file
systems</p>

<p>SYNOPSIS /usr/sbin/exportfs [-avi] [-o options,..]
[client:/path ..] /usr/sbin/exportfs -r [-v]
/usr/sbin/exportfs [-av] -u [client:/path ..]
/usr/sbin/exportfs [-v] /usr/sbin/exportfs -f</p>

<p>DESCRIPTION The exportfs command is used to maintain the
current table of exported file systems for NFS. This list is
kept in a separate file named /var/lib/nfs/etab which is
read by mountd when a remote host requests access to mount a
file tree, and parts of the list which are active are kept
in the kernels export table.</p>

<p>Normally this etab file is initialized with the list of
all file sys- tems named in /etc/exports by invoking
exportfs -a.</p>

<p>However, administrators can choose to add and delete
individual file systems without modifying /etc/exports using
exportfs.</p>

<p>exportfs and its partner program mountd work in one of
two modes, a legacy mode which applies to 2.4 and earlier
versions of the Linux ker- nel, and a new mode which applies
to 2.6 and later versions providing the nfsd virtual
filesystem has been mounted at /proc/fs/nfsd or
/proc/fs/nfs. If this filesystem is not mounted in 2.6, the
legacy mode is used.</p>

<p>In the new mode, exportfs does not give any information
to the kernel but only provides it to mountd through the
/var/lib/nfs/etab file. mountd will listen to requests from
the kernel and will provide infor- mation as needed.</p>

<p>In the legacy mode, any export requests which identify a
specific host (rather than a subnet or netgroup etc) are
entered directly into the kernel s export table as well as
being written to /var/lib/nfs/etab. Further, any mount
points listed in /var/lib/nfs/rmtab which match a non
host-specific export request will cause an appropriate
export entry for the host given in rmtab to be entered into
the kernels export ta- ble.</p>

<p>OPTIONS -a Export or unexport all directories.</p>

<p>-o options,... Specify a list of export options in the
same manner as in exports(5).</p>

<p>-i Ignore the /etc/exports file, so that only default
options and options given on the command line are used.</p>

<p>-r Reexport all directories. It synchronizes
/var/lib/nfs/etab with /etc/exports. It removes entries in
/var/lib/nfs/etab which are deleted from /etc/exports, and
remove any entries from the ker- nel export table which are
no longer valid.</p>

<p>-u Unexport one or more directories.</p>

<p>-f In new mode, flush everything out of the kernels
export table. Any clients that are active will get new
entries added by mountd when they make their next
request.</p>

<p>-v Be verbose. When exporting or unexporting, show whats
going on. When displaying the current export list, also
display the list of export options.</p>

<p>DISCUSSION Exporting Directories The first synopsis
shows how to invoke the command when adding new entries to
the export table. When using exportfs -a, all directories in
exports(5) are added to etab and the resulting list is
pushed into the kernel.</p>

<p>The host:/path argument specifies the directory to
export along with the host or hosts to export it to. All
formats described in exports(5) are supported; to export a
directory to the world, simply specify :/path.</p>

<p>The export options for a particular host/directory pair
derive from several sources. There is a set of default
options which can be over- ridden by entries in /etc/exports
(unless the -i option is given). In addition, the
administrator may override any options from these sources
using the -o argument which takes a comma-separated list of
options in the same fashion as one would specify them in
exports(5). Thus, exportfs can also be used to modify the
export options of an already exported directory.</p>

<p>Modifications of the kernel export table used by nfsd(8)
take place immediately after parsing the command line and
updating the etab file.</p>

<p>The default export options are
sync,ro,root_squash,wdelay.</p>

<p>Unexporting Directories The third synopsis shows how to
unexported a currently exported direc- tory. When using
exportfs -ua, all entries listed in etab are removed from
the kernel export tables, and the file is cleared. This
effec- tively shuts down all NFS activity.</p>

<p>To remove an export to a host, specify a host:/path
pair. This deletes the specified entry from etab and removes
the corresponding kernel entry (if any). To remove one or
more exports to several hosts, use exportfs -ua.</p>

<p>Dumping the Export Table Invoking exportfs without
further options shows the current list of exported file
systems. When giving the -v option, the list of flags
pertaining to each export are shown in addition.</p>

<p>EXAMPLES The following adds all directories listed in
/etc/exports to /var/lib/nfs/etab and pushes the resulting
export entries into the ker- nel:</p>

<p># exportfs -a</p>

<p>To export the /usr/tmp directory to host django,
allowing asynchronous writes, one would do this:</p>

<p># exportfs -o async django:/usr/tmp</p>

<p>To unexport the /usr/tmp directory:</p>

<p># exportfs -u django:/usr/tmp</p>

<p>To unexport all the directories listed in
/etc/exports:</p>

<p># exportfs -au</p>

<p>DEPENDENCIES Exporting to IP networks, DNS and NIS
domains does not enable clients from these groups to access
NFS immediately; rather, these sorts of exports are hints to
mountd(8) to grant any mount requests from these clients.
This is usually not a big problem, because any existing
mounts are preserved in rmtab across reboots.</p>

<p>When unexporting a network or domain entry, any current
exports to mem- bers of this group will be checked against
the remaining valid exports and if they themselves are no
longer valid they will be removed.</p>

<p>SEE ALSO exports(5), mountd(8)</p>

<p>AUTHORS Olaf Kirch, &lt;okir@monad.swb.de&gt; Neil
Brown, &lt;neilb@cse.unsw.edu.au&gt;</p>

<p>18 July 2003 exportfs(8)</p>
<hr>
</body>
</html>
