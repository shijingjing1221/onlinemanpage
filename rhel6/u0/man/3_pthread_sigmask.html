<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:12:14 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PTHREAD_SIGMASK(3) Linux Programmer s Manual
PTHREAD_SIGMASK(3)</p>

<p>NAME pthread_sigmask - examine and change mask of
blocked signals</p>

<p>SYNOPSIS #include &lt;signal.h&gt;</p>

<p>int pthread_sigmask(int how, const sigset_t *set,
sigset_t *oldset);</p>

<p>Compile and link with -pthread.</p>

<p>DESCRIPTION The pthread_sigmask() function is just like
sigprocmask(2), with the difference that its use in
multithreaded programs is explicitly speci- fied by
POSIX.1-2001. Other differences are noted in this page.</p>

<p>For a description of the arguments and operation of this
function, see sigprocmask(2).</p>

<p>RETURN VALUE On success, pthread_sigmask() returns 0; on
error, it returns an error number.</p>

<p>ERRORS See sigprocmask(2).</p>

<p>CONFORMING TO POSIX.1-2001.</p>

<p>NOTES A new thread inherits a copy of its creators
signal mask.</p>

<p>EXAMPLE The program below blocks some signals in the
main thread, and then cre- ates a dedicated thread to fetch
those signals via sigwait(3). The following shell session
demonstrates its use:</p>

<p>$ ./a.out &amp; [1] 5423 $ kill -QUIT %1 Signal handling
thread got signal 3 $ kill -USR1 %1 Signal handling thread
got signal 10 $ kill -TERM %1 [1]+ Terminated ./a.out</p>

<p>Program source</p>

<p>#include &lt;pthread.h&gt; #include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt; #include &lt;unistd.h&gt; #include
&lt;signal.h&gt; #include &lt;errno.h&gt;</p>

<p>/* Simple error handling functions */</p>

<p>#define handle_error_en(en, msg) do { errno = en;
perror(msg); exit(EXIT_FAILURE); } while (0)</p>

<p>static void * sig_thread(void *arg) { sigset_t *set =
(sigset_t *) arg; int s, sig;</p>

<p>for (;;) { s = sigwait(set, &amp;sig); if (s != 0)
handle_error_en(s, &quot;sigwait&quot;); printf(&quot;Signal
handling thread got signal %d0, sig); } }</p>

<p>int main(int argc, char *argv[]) { pthread_t thread;
sigset_t set; int s;</p>

<p>/* Block SIGINT; other threads created by main() will
inherit a copy of the signal mask. */</p>

<p>sigemptyset(&amp;set); sigaddset(&amp;set, SIGQUIT);
sigaddset(&amp;set, SIGUSR1); s = pthread_sigmask(SIG_BLOCK,
&amp;set, NULL); if (s != 0) handle_error_en(s,
&quot;pthread_sigmask&quot;);</p>

<p>s = pthread_create(&amp;thread, NULL, &amp;sig_thread,
(void *) &amp;set); if (s != 0) handle_error_en(s,
&quot;pthread_create&quot;);</p>

<p>/* Main thread carries on to create other threads and/or
do other work */</p>

<p>pause(); /* Dummy pause so we can test program */ }</p>

<p>SEE ALSO sigaction(2), sigpending(2), sigprocmask(2)
pthread_create(3), pthread_kill(3), sigsetops(3),
pthreads(7), signal(7)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>Linux 2009-01-25 PTHREAD_SIGMASK(3)</p>
<hr>
</body>
</html>
