<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:01:03 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GETGRENT_R(3) Linux Programmer s Manual
GETGRENT_R(3)</p>

<p>NAME getgrent_r, fgetgrent_r - get group file entry
reentrantly</p>

<p>SYNOPSIS #include &lt;grp.h&gt;</p>

<p>int getgrent_r(struct group *gbuf, char *buf, size_t
buflen, struct group **gbufp);</p>

<p>int fgetgrent_r(FILE *fp, struct group *gbuf, char *buf,
size_t buflen, struct group **gbufp);</p>

<p>Feature Test Macro Requirements for glibc (see
feature_test_macros(7)):</p>

<p>getgrent_r(): _GNU_SOURCE fgetgrent_r():
_SVID_SOURCE</p>

<p>DESCRIPTION The functions getgrent_r() and fgetgrent_r()
are the reentrant versions of getgrent(3) and fgetgrent(3).
The former reads the next group entry from the stream
initialized by setgrent(3). The latter reads the next group
entry from the stream fp.</p>

<p>The group structure is defined in &lt;grp.h&gt; as
follows:</p>

<p>struct group { char *gr_name; /* group name */ char
*gr_passwd; /* group password */ gid_t gr_gid; /* group ID
*/ char **gr_mem; /* group members */ };</p>

<p>The non-reentrant functions return a pointer to static
storage, where this static storage contains further pointers
to group name, password and members. The reentrant functions
described here return all of that in caller-provided
buffers. First of all there is the buffer gbuf that can hold
a struct group. And next the buffer buf of size buflen that
can hold additional strings. The result of these functions,
the struct group read from the stream, is stored in the
provided buffer *gbuf, and a pointer to this struct group is
returned in *gbufp.</p>

<p>RETURN VALUE On success, these functions return 0 and
*gbufp is a pointer to the struct group. On error, these
functions return an error value and *gbufp is NULL.</p>

<p>ERRORS ENOENT No more entries.</p>

<p>ERANGE Insufficient buffer space supplied. Try again
with larger buffer.</p>

<p>CONFORMING TO These functions are GNU extensions, done
in a style resembling the POSIX version of functions like
getpwnam_r(3). Other systems use pro- totype</p>

<p>struct group *getgrent_r(struct group *grp, char *buf,
int buflen);</p>

<p>or, better,</p>

<p>int getgrent_r(struct group *grp, char *buf, int buflen,
FILE **gr_fp);</p>

<p>NOTES The function getgrent_r() is not really reentrant
since it shares the reading position in the stream with all
other threads.</p>

<p>EXAMPLE #define _GNU_SOURCE #include &lt;grp.h&gt;
#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #define
BUFLEN 4096</p>

<p>int main(void) { struct group grp, *grpp; char
buf[BUFLEN]; int i;</p>

<p>setgrent(); while (1) { i = getgrent_r(&amp;grp, buf,
BUFLEN, &amp;grpp); if (i) break; printf(&quot;%s
(%d):&quot;, grpp-&gt;gr_name, grpp-&gt;gr_gid); for (i = 0;
; i++) { if (grpp-&gt;gr_mem[i] == NULL) break;
printf(&quot; %s&quot;, grpp-&gt;gr_mem[i]); }
printf(&quot;0); } endgrent(); exit(EXIT_SUCCESS); }</p>

<p>SEE ALSO fgetgrent(3), getgrent(3), getgrgid(3),
getgrnam(3), putgrent(3), group(5)</p>

<p>COLOPHON This page is part of release 3.22 of the Linux
man-pages project. A description of the project, and
information about reporting bugs, can be found at
http://www.kernel.org/doc/man-pages/.</p>

<p>GNU 2007-07-26 GETGRENT_R(3)</p>
<hr>
</body>
</html>
