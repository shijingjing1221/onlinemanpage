<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:12:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PVMOVE(8) PVMOVE(8)</p>

<p>NAME pvmove - move physical extents</p>

<p>SYNOPSIS pvmove [--abort] [--alloc AllocationPolicy]
[-b|--background] [-d|--debug] [-h|--help] [-i|--interval
Seconds] [--noudevsync] [-v|--verbose] [-n|--name
LogicalVolume] [SourcePhysicalVol- ume[:PE[-PE]...]
[DestinationPhysicalVolume[:PE[-PE]...]...]]</p>

<p>DESCRIPTION pvmove allows you to move the allocated
physical extents (PEs) on Sour- cePhysicalVolume to one or
more other physical volumes (PVs). You can optionally
specify a source LogicalVolume in which case only extents
used by that LV will be moved to free (or specified) extents
on Desti- nationPhysicalVolume(s). If no
DestinationPhysicalVolume is specifed, the normal allocation
rules for the volume group are used.</p>

<p>If pvmove gets interrupted for any reason (e.g. the
machine crashes) then run pvmove again without any
PhysicalVolume arguments to restart any moves that were in
progress from the last checkpoint. Alterna- tively use
pvmove --abort at any time to abort them at the last check-
point.</p>

<p>You can run more than one pvmove at once provided they
are moving data off different SourcePhysicalVolumes, but
additional pvmoves will ignore any logical volumes already
in the process of being changed, so some data might not get
moved.</p>

<p>pvmove works as follows:</p>

<p>1. A temporary pvmove logical volume is created to store
details of all the data movements required.</p>

<p>2. Every logical volume in the volume group is searched
for contiguous data that need moving according to the
command line arguments. For each piece of data found, a new
segment is added to the end of the pvmove LV. This segment
takes the form of a temporary mirror to copy the data from
the original location to a newly-allocated location. The
original LV is updated to use the new temporary mirror
segment in the pvmove LV instead of accessing the data
directly.</p>

<p>3. The volume group metadata is updated on disk.</p>

<p>4. The first segment of the pvmove logical volume is
activated and starts to mirror the first part of the data.
Only one segment is mir- rored at once as this is usually
more efficient.</p>

<p>5. A daemon repeatedly checks progress at the specified
time interval. When it detects that the first temporary
mirror is in-sync, it breaks that mirror so that only the
new location for that data gets used and writes a checkpoint
into the volume group metadata on disk. Then it activates
the mirror for the next segment of the pvmove LV.</p>

<p>6. When there are no more segments left to be mirrored,
the temporary logical volume is removed and the volume group
metadata is updated so that the logical volumes reflect the
new data locations.</p>

<p>Note that this new process cannot support the original
LVM1 type of on- disk metadata. Metadata can be converted
using vgconvert(8).</p>

<p>OPTIONS --abort Abort any moves in progress.</p>

<p>--noudevsync Disable udev synchronisation. The process
will not wait for notification from udev. It will continue
irrespective of any possible udev processing in the
background. You should only use this if udev is not running
or has rules that ignore the devices LVM2 creates.</p>

<p>-b, --background Run the daemon in the background.</p>

<p>-i, --interval Seconds Report progress as a percentage
at regular intervals.</p>

<p>-n, --name LogicalVolume Move only the extents belonging
to LogicalVolume from Source- PhysicalVolume instead of all
allocated extents to the destina- tion physical
volume(s).</p>

<p>EXAMPLES To move all logical extents of any logical
volumes on /dev/hda4 to free physical extents elsewhere in
the volume group, giving verbose runtime information,
use:</p>

<p>pvmove -v /dev/hda4</p>

<p>SEE ALSO lvm(8), vgconvert(8)</p>

<p>Sistina Software UK LVM TOOLS 2.02.72(2) (2010-07-28)
PVMOVE(8)</p>
<hr>
</body>
</html>
