<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:09:58 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PERL594DELTA(1) Perl Programmers Reference Guide
PERL594DELTA(1)</p>

<p>NAME perl594delta - what is new for perl v5.9.4</p>

<p>DESCRIPTION This document describes differences between
the 5.9.3 and the 5.9.4 development releases. See
perl590delta, perl591delta, perl592delta and perl593delta
for the differences between 5.8.0 and 5.9.3.</p>

<p>Incompatible Changes chdir FOO A bareword argument to
chdir() is now recognized as a file handle. Earlier releases
interpreted the bareword as a directory name. (Gisle
Aas)</p>

<p>Handling of pmc files An old feature of perl was that
before &quot;require&quot; or &quot;use&quot; look for a
file with a .pm extension, they will first look for a
similar filename with a .pmc extension. If this file is
found, it will be loaded in place of any potentially
existing file ending in a .pm extension.</p>

<p>Previously, .pmc files were loaded only if more recent
than the matching .pm file. Starting with 5.9.4, theyll be
always loaded if they exist. (This trick is used by
Pugs.)</p>

<p>@- and @+ in patterns The special arrays &quot;@-&quot;
and &quot;@+&quot; are no longer interpolated in regular
expressions. (Sadahiro Tomoyuki)</p>

<p>$AUTOLOAD can now be tainted If you call a subroutine by
a tainted name, and if it defers to an AUTOLOAD function,
then $AUTOLOAD will be (correctly) tainted. (Rick
Delaney)</p>

<p>Core Enhancements state() variables A new class of
variables has been introduced. State variables are similar
to &quot;my&quot; variables, but are declared with the
&quot;state&quot; keyword in place of &quot;my&quot;. Theyre
visible only in their lexical scope, but their value is
persistent: unlike &quot;my&quot; variables, theyre not
undefined at scope entry, but retain their previous value.
(Rafael Garcia-Suarez)</p>

<p>To use state variables, one needs to enable them by
using</p>

<p>use feature &quot;state&quot;;</p>

<p>or by using the &quot;-E&quot; command-line switch in
one-liners.</p>

<p>See &quot;Persistent variables via state()&quot; in
perlsub.</p>

<p>UNIVERSAL::DOES() The &quot;UNIVERSAL&quot; class has a
new method, &quot;DOES()&quot;. It has been added to solve
semantic problems with the &quot;isa()&quot; method.
&quot;isa()&quot; checks for inheritance, while
&quot;DOES()&quot; has been designed to be overridden when
module authors use other types of relations between classes
(in addition to inheritance). (chromatic)</p>

<p>See &quot;$obj-&gt;DOES( ROLE )&quot; in UNIVERSAL.</p>

<p>Exceptions in constant folding The constant folding
routine is now wrapped in an exception handler, and if
folding throws an exception (such as attempting to evaluate
0/0), perl now retains the current optree, rather than
aborting the whole program. (Nicholas Clark, Dave
Mitchell)</p>

<p>Source filters in @INC Its possible to enhance the
mechanism of subroutine hooks in @INC by adding a source
filter on top of the filehandle opened and returned by the
hook. This feature was planned a long time ago, but wasnt
quite working until now. See &quot;require&quot; in perlfunc
for details. (Nicholas Clark)</p>

<p>MAD MAD, which stands for Misc Attribute Decoration, is
a still-in- development work leading to a Perl 5 to Perl 6
converter. To enable it, its necessary to pass the argument
&quot;-Dmad&quot; to Configure. The obtained perl isnt
binary compatible with a regular perl 5.9.4, and has space
and speed penalties; moreover not all regression tests still
pass with it. (Larry Wall, Nicholas Clark)</p>

<p>Modules and Pragmas &middot;
&quot;encoding::warnings&quot; is now a lexical pragma.
(Although on older perls, which dont have support for
lexical pragmas, it keeps its global behaviour.) (Audrey
Tang)</p>

<p>&middot; &quot;threads&quot; is now a dual-life module,
also available on CPAN. It has been expanded in many ways. A
kill() method is available for thread signalling. One can
get thread status, or the list of running or joinable
threads.</p>

<p>A new &quot;threads-&gt;exit()&quot; method is used to
exit from the application (this is the default for the main
thread) or from the current thread only (this is the default
for all other threads). On the other hand, the exit()
built-in now always causes the whole application to
terminate. (Jerry D. Hedden)</p>

<p>New Core Modules &middot;
&quot;Hash::Util::FieldHash&quot;, by Anno Siegel, has been
added. This module provides support for field hashes: hashes
that maintain an association of a reference with a value, in
a thread-safe garbage- collected way. Such hashes are useful
to implement inside-out objects.</p>

<p>&middot; &quot;Module::Build&quot;, by Ken Williams, has
been added. It s an alternative to
&quot;ExtUtils::MakeMaker&quot; to build and install perl
modules.</p>

<p>&middot; &quot;Module::Load&quot;, by Jos Boumans, has
been added. It provides a single interface to load Perl
modules and .pl files.</p>

<p>&middot; &quot;Module::Loaded&quot;, by Jos Boumans, has
been added. Its used to mark modules as loaded or
unloaded.</p>

<p>&middot; &quot;Package::Constants&quot;, by Jos Boumans,
has been added. Its a simple helper to list all constants
declared in a given package.</p>

<p>&middot; &quot;Win32API::File&quot;, by Tye McQueen, has
been added (for Windows builds). This module provides
low-level access to Win32 system API calls for
files/dirs.</p>

<p>Utility Changes config_data &quot;config_data&quot; is a
new utility that comes with &quot;Module::Build&quot;. It
provides a command-line interface to the configuration of
Perl modules that use Module::Builds framework of
configurability (that is, *::ConfigData modules that contain
local configuration information for their parent
modules.)</p>

<p>Documentation New manpage, perlpragma The perlpragma
manpage documents how to write one s own lexical pragmas in
pure Perl (something that is possible starting with
5.9.4).</p>

<p>New manpage, perlreguts The perlreguts manpage, courtesy
of Yves Orton, describes internals of the Perl regular
expression engine.</p>

<p>New manpage, perlunitut The perlunitut manpage is an
tutorial for programming with Unicode and string encodings
in Perl, courtesy of Juerd Waalboer.</p>

<p>Performance Enhancements Memory optimisations Several
internal data structures (typeglobs, GVs, CVs, formats) have
been restructured to use less memory. (Nicholas Clark)</p>

<p>UTF-8 cache optimisation The UTF-8 caching code is now
more efficient, and used more often. (Nicholas Clark)</p>

<p>Regular expressions Engine de-recursivised The regular
expression engine is no longer recursive, meaning that
patterns that used to overflow the stack will either die
with useful explanations, or run to completion, which, since
they were able to blow the stack before, will likely take a
very long time to happen. If you were experiencing the
occasional stack overflow (or segfault) and upgrade to
discover that now perl apparently hangs instead, look for a
degenerate regex. (Dave Mitchell)</p>

<p>Single char char-classes treated as literals Classes of
a single character are now treated the same as if the
character had been used as a literal, meaning that code that
uses char-classes as an escaping mechanism will see a
speedup. (Yves Orton)</p>

<p>Trie optimisation of literal string alternations
Alternations, where possible, are optimised into more
efficient matching structures. String literal alternations
are merged into a trie and are matched simultaneously. This
means that instead of O(N) time for matching N alternations
at a given point the new code performs in O(1) time. (Yves
Orton)</p>

<p>Note: Much code exists that works around perl s historic
poor performance on alternations. Often the tricks used to
do so will disable the new optimisations. Hopefully the
utility modules used for this purpose will be educated about
these new optimisations by the time 5.10 is released.</p>

<p>Aho-Corasick start-point optimisation When a pattern
starts with a trie-able alternation and there arent better
optimisations available the regex engine will use Aho-
Corasick matching to find the start point. (Yves Orton)</p>

<p>Sloppy stat on Windows On Windows, perls stat() function
normally opens the file to determine the link count and
update attributes that may have been changed through hard
links. Setting ${^WIN32_SLOPPY_STAT} to a true value speeds
up stat() by not performing this operation. (Jan Dubois)</p>

<p>Installation and Configuration Improvements Relocatable
installations There is now Configure support for creating a
relocatable perl tree. If you Configure with
&quot;-Duserelocatableinc&quot;, then the paths in @INC (and
everything else in %Config) can be optionally located via
the path of the perl executable.</p>

<p>That means that, if the string &quot;.../&quot; is found
at the start of any path, it s substituted with the
directory of $^X. So, the relocation can be configured on a
per-directory basis, although the default with
&quot;-Duserelocatableinc&quot; is that everything is
relocated. The initial install is done to the original
configured prefix.</p>

<p>Ports Many improvements have been made towards making
Perl work correctly on z/OS.</p>

<p>Perl has been reported to work on DragonFlyBSD.</p>

<p>Compilation improvements All ppport.h files in the XS
modules bundled with perl are now autogenerated at build
time. (Marcus Holland-Moritz)</p>

<p>New probes The configuration process now detects whether
strlcat() and strlcpy() are available. When they are not
available, perls own version is used (from Russ Allbery s
public domain implementation). Various places in the perl
interpreter now use them. (Steve Peters)</p>

<p>Windows build improvements Building XS extensions
Support for building XS extension modules with the free
MinGW compiler has been improved in the case where perl
itself was built with the Microsoft VC++ compiler.
(ActiveState)</p>

<p>Support for 64-bit compiler Support for building perl
with Microsoft s 64-bit compiler has been improved.
(ActiveState)</p>

<p>Selected Bug Fixes PERL5SHELL and tainting On Windows,
the PERL5SHELL environment variable is now checked for
taintedness. (Rafael Garcia-Suarez)</p>

<p>Using *FILE{IO} &quot;stat()&quot; and &quot;-X&quot;
filetests now treat *FILE{IO} filehandles like *FILE
filehandles. (Steve Peters)</p>

<p>Overloading and reblessing Overloading now works when
references are reblessed into another class. Internally,
this has been implemented by moving the flag for
&quot;overloading&quot; from the reference to the referent,
which logically is where it should always have been.
(Nicholas Clark)</p>

<p>Overloading and UTF-8 A few bugs related to UTF-8
handling with objects that have stringification overloaded
have been fixed. (Nicholas Clark)</p>

<p>eval memory leaks fixed Traditionally, &quot;eval
&rsquo;syntax error&rsquo;&quot; has leaked badly. Many (but
not all) of these leaks have now been eliminated or reduced.
(Dave Mitchell)</p>

<p>Random device on Windows In previous versions, perl
would read the file /dev/urandom if it existed when seeding
its random number generator. That file is unlikely to exist
on Windows, and if it did would probably not contain
appropriate data, so perl no longer tries to read it on
Windows. (Alex Davies)</p>

<p>New or Changed Diagnostics State variable %s will be
reinitialized One can assign initial values to state
variables, but not when theyre declared as a sub-part of a
list assignment. See perldiag.</p>

<p>Changed Internals A new file, mathoms.c, contains
functions that arent used anymore in the perl core, but
remain around because modules out there might still use
them. They come from a factorization effort: for example,
many PP functions are now shared for several ops.</p>

<p>The implementation of the special variables $^H and %^H
has changed, to allow implementing lexical pragmas in pure
perl.</p>

<p>Known Problems One warning test (number 263 in
lib/warnings.t) fails under UTF-8 locales.</p>

<p>Bytecode tests fail under several platforms. We are
considering removing support for byteloader and compiler
before the 5.10.0 release.</p>

<p>Reporting Bugs If you find what you think is a bug, you
might check the articles recently posted to the
comp.lang.perl.misc newsgroup and the perl bug database at
http://rt.perl.org/rt3/ . There may also be information at
http://www.perl.org/ , the Perl Home Page.</p>

<p>If you believe you have an unreported bug, please run
the perlbug program included with your release. Be sure to
trim your bug down to a tiny but sufficient test case. Your
bug report, along with the output of &quot;perl -V&quot;,
will be sent off to perlbug@perl.org to be analysed by the
Perl porting team.</p>

<p>SEE ALSO The Changes file for exhaustive details on what
changed.</p>

<p>The INSTALL file for how to build Perl.</p>

<p>The README file for general stuff.</p>

<p>The Artistic and Copying files for copyright
information.</p>

<p>perl v5.10.1 2009-02-12 PERL594DELTA(1)</p>
<hr>
</body>
</html>
