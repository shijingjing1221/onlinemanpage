<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:06:11 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>LIBPFM(3) Linux Programmer s Manual LIBPFM(3)</p>

<p>NAME libpfm_core - support for Intel Core processor
family</p>

<p>SYNOPSIS #include &lt;perfmon/pfmlib.h&gt; #include
&lt;perfmon/pfmlib_core.h&gt;</p>

<p>DESCRIPTION The libpfm library provides full support for
the Intel Core processor family, including the Core 2 Duo
and Quad series. The interface is defined in pfmlib_core.h.
It consists of a set of functions and struc- tures which
describe and allow access to the Intel Core processors spe-
cific PMU features.</p>

<p>When Intel Core processor specific features are needed
to support a measurement, their descriptions must be passed
as model-specific input arguments to the
pfm_dispatch_events() function. The Intel Core proces- sors
specific input arguments are described in the pfm-
lib_core_input_param_t structure. No output parameters are
currently defined. The input parameters are defined as
follows:</p>

<p>typedef struct { unsigned int cnt_mask; unsigned int
flags; } pfmlib_core_counter_t;</p>

<p>typedef struct { unsigned int pebs_used; }
pfmlib_core_pebs_t;</p>

<p>typedef struct { pfmlib_core_counter_t
pfp_core_counters[PMU_CORE_NUM_COUNTERS]; pfmlib_core_pebs_t
pfp_core_pebs; uint64_t reserved[4]; }
pfmlib_core_input_param_t;</p>

<p>The Intel Core processor provides a few additional
per-event features for counters: thresholding, inversion,
edge detection. They can be set using the pfp_core_counters
data structure for each event. The flags field can be
initialized with any combinations of the following
values:</p>

<p>PFMLIB_CORE_SEL_INV Inverse the results of the cnt_mask
comparison when set</p>

<p>PFMLIB_CORE_SEL_EDGE Enables edge detection of
events.</p>

<p>The cnt_mask field is used to set the event threshold.
The value of the counter is incremented each time the number
of occurrences per cycle of the event is greater or equal to
the value of the field. Thus the event is modified to
actually measure the number of qualifying cycles. When zero
all occurrences are counted (this is the default).</p>

<p>Support for Precise-Event Based Sampling (PEBS) The
library can be used to setup the PMC registers when using
PEBS. In this case, the pfp_core_pebs structure must be used
and the pebs_used field must be set to 1. When using PEBS,
it is not possible to use more than one event.</p>

<p>Support for Intel Core 2 Duo and Quad processors The
Intel Core 2 Duo and Quad processors are based on the Intel
Core micro-architecture. They implement the Intel
architectural PMU and some extensions such as PEBS. They
support all the architectural events and a lot more Core 2
specific events. The library auto-detects the processor and
provides access to Core 2 events whenever possible.</p>

<p>ERRORS Refer to the description of the
pfm_dispatch_events() function for errors.</p>

<p>SEE ALSO pfm_dispatch_events(3) and set of examples
shipped with the library</p>

<p>AUTHOR Stephane Eranian &lt;eranian@hpl.hp.com&gt;</p>

<p>November, 2006 LIBPFM(3)</p>
<hr>
</body>
</html>
