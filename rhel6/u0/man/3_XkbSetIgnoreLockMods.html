<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:27:20 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>XkbSetIgnoreLockMods(3) XKB FUNCTIONS
XkbSetIgnoreLockMods(3)</p>

<p>NAME XkbSetIgnoreLockMods - Sets the modifiers that, if
locked, are not to be reported in matching events to passive
grabs</p>

<p>SYNOPSIS Bool XkbSetIgnoreLockMods (Display *display,
unsigned int device_spec, unsigned int affect_real, unsigned
int real_values, unsigned int affect_virtual, unsigned int
virtual_values);</p>

<p>ARGUMENTS - display connection to the X server</p>

<p>- device_spec device ID, or XkbUseCoreKbd</p>

<p>- affect_real mask of real modifiers affected by this
call</p>

<p>- real_values values for affected real modifiers
(1=&gt;set, 0=&gt;unset)</p>

<p>- affect_virtual mask of virtual modifiers affected by
this call</p>

<p>- virtual_values values for affected virtual modifiers
(1=&gt;set, 0=&gt;unset)</p>

<p>DESCRIPTION The core protocol does not provide a way to
exclude specific modifiers from grab calculations, with the
result that locking modifiers some- times have unanticipated
side effects.</p>

<p>The IgnoreLockMods control specifies modifiers that
should be excluded from grab calculations. These modifiers
are also not reported in any core events except KeyPress and
KeyRelease events that do not activate a passive grab and
that do not occur while a grab is active.</p>

<p>Manipulate the IgnoreLockMods control via the
ignore_lock field in the XkbControlsRec structure, then use
XkbSetControls and XkbGetControls to query and change this
control. Alternatively, use XkbSetIgnoreLockMods.</p>

<p>XkbSetIgnoreLockMods sends a request to the server to
change the server s IgnoreLockMods control. affect_real and
real_values are masks of real modifier bits indicating which
real modifiers are to be added and removed from the server s
IgnoreLockMods control. Modifiers selected by both
affect_real and real_values are added to the servers
IgnoreLockMods control; those selected by affect_real but
not by real_values are removed from the server s
IgnoreLockMods control. Valid values for affect_real and
real_values consist of any combination of the eight core
modifier bits: ShiftMask, LockMask, ControlMask, Mod1Mask -
Mod5Mask. affect_virtual and virtual_values are masks of
virtual modifier bits indicating which virtual modifiers are
to be added and removed from the server s IgnoreLockMods
control. Modifiers selected by both affect_virtual and
virtual_values are added to the server s IgnoreLockMods
control; those selected by affect_virtual but not by
virtual_values are removed from the server s IgnoreLockMods
con- trol. See below for a discussion of virtual modifier
masks to use in affect_virtual and virtual_values.
XkbSetIgnoreLockMods does not wait for a reply from the
server. It returns True if the request was sent, and False
otherwise.</p>

<p>Virtual modifiers are named by converting their string
name to an X Atom and storing the Atom in the names.vmods
array in an XkbDescRec structure. The position of a name
Atom in the names.vmods array defines the bit position used
to represent the virtual modifier and also the index used
when accessing virtual modifier information in arrays: the
name in the i-th (0 relative) entry of names.vmods is the
i-th virtual modifier, represented by the mask (1&lt;&lt;i).
Throughout Xkb, various func- tions have a parameter that is
a mask representing virtual modifier choices. In each case,
the i-th bit (0 relative) of the mask represents the i-th
virtual modifier.</p>

<p>To set the name of a virtual modifier, use XkbSetNames,
using XkbVir- tualModNamesMask in which and the name in the
xkb argument; to retrieve indicator names, use
XkbGetNames.</p>

<p>STRUCTURES The complete description of an Xkb keyboard
is given by an XkbDescRec. The component structures in the
XkbDescRec represent the major Xkb com- ponents.</p>

<p>typedef struct { struct _XDisplay * display; /
connection to X server */ unsigned short flags; / private to
Xkb, do not modify */ unsigned short device_spec; / device
of interest */ KeyCode min_key_code; / minimum keycode for
device */ KeyCode max_key_code; / maximum keycode for device
*/ XkbControlsPtr ctrls; / controls */ XkbServerMapPtr
server; / server keymap */ XkbClientMapPtr map; / client
keymap */ XkbIndicatorPtr indicators; / indicator map */
XkbNamesPtr names; / names for all components */
XkbCompatMapPtr compat; / compatibility map */
XkbGeometryPtr geom; / physical geometry of keyboard */ }
XkbDescRec, *XkbDescPtr;</p>

<p>The display field points to an X display structure. The
flags field is private to the library: modifying flags may
yield unpredictable results. The device_spec field specifies
the device identifier of the keyboard input device, or
XkbUseCoreKeyboard, which specifies the core keyboard
device. The min_key_code and max_key_code fields specify the
least and greatest keycode that can be returned by the
keyboard.</p>

<p>Each structure component has a corresponding mask bit
that is used in function calls to indicate that the
structure should be manipulated in some manner, such as
allocating it or freeing it. These masks and their
relationships to the fields in the XkbDescRec are shown in
Table 1.</p>

<p>Table 1 Mask Bits for XkbDescRec
-------------------------------------------------- Mask Bit
XkbDescRec Field Value
--------------------------------------------------
XkbControlsMask ctrls (1L&lt;&lt;0) XkbServerMapMask server
(1L&lt;&lt;1) XkbIClientMapMask map (1L&lt;&lt;2)
XkbIndicatorMapMask indicators (1L&lt;&lt;3) XkbNamesMask
names (1L&lt;&lt;4) XkbCompatMapMask compat (1L&lt;&lt;5)
XkbGeometryMask geom (1L&lt;&lt;6) XkbGetControls(3),
XkbGetNames(3), XkbSetControls(3), XkbSetNames(3)
XkbAllComponentsMask All Fields (0x7f)</p>

<p>SEE ALSO</p>

<p>X Version 11 libX11 1.3 XkbSetIgnoreLockMods(3)</p>
<hr>
</body>
</html>
