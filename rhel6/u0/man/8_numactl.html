<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:08:33 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>NUMACTL(8) Linux Administrator s Manual NUMACTL(8)</p>

<p>NAME numactl - Control NUMA policy for processes or
shared memory</p>

<p>SYNOPSIS numactl [ --interleave nodes ] [ --preferred
node ] [ --membind nodes ] [ --cpunodebind nodes ] [
--physcpubind cpus ] [ --localalloc ] [--] command
{arguments ...} numactl --show numactl --hardware numactl [
--huge ] [ --offset offset ] [ --shmmode shmmode ] [
--length length ] [ --strict ] [ --shmid id ] --shm
shmkeyfile | --file tmpfsfile [ --touch ] [ --dump ] [
--dump-nodes ] memory policy</p>

<p>DESCRIPTION numactl runs processes with a specific NUMA
scheduling or memory place- ment policy. The policy is set
for command and inherited by all of its children. In
addition it can set persistent policy for shared memory
segments or files.</p>

<p>Use -- before command if using command options that
could be confused with numactl options.</p>

<p>Policy settings are:</p>

<p>--interleave=nodes, -i nodes Set a memory interleave
policy. Memory will be allocated using round robin on nodes.
When memory cannot be allocated on the current interleave
target fall back to other nodes. Multiple nodes may be
specified on --interleave, --membind and --cpunode- bind.
You may specify &quot;all&quot;, which means all nodes in
the cur- rent cpuset. nodes may be specified as N,N,N or N-N
or N,N-N or N-N,N-N and so forth. Relative nodes may be
specifed as +N,N,N or +N-N or +N,N-N and so forth. The +
indicates that the node numbers are relative to the process
set of allowed nodes in its current cpuset. A !N-N notation
indicates the inverse of N-N, in other words all nodes
except N-N. If used with + nota- tion, specify !+N-N.</p>

<p>--membind=nodes, -m nodes Only allocate memory from
nodes. Allocation will fail when there is not enough memory
available on these nodes. nodes may be specified as noted
above.</p>

<p>--cpunodebind=nodes, -N nodes Only execute command on
the CPUs of nodes. Note that nodes may consist of multiple
CPUs. nodes may be specified as noted above.</p>

<p>--physcpubind=cpus, -C cpus Only execute process on
cpus. This accepts physical cpu numbers as shown in the
processor fields of /proc/cpuinfo, or relative cpus as in
relative to the current cpuset. You may specify
&quot;all&quot;, which means all cpus in the current cpuset.
Physical cpus may be specified as N,N,N or N-N or N,N-N or
N-N,N-N and so forth. Relative cpus may be specifed as
+N,N,N or +N-N or +N,N-N and so forth. The + indicates that
the cpu numbers are relative to the process set of allowed
cpus in its current cpuset. A !N-N notation indicates the
inverse of N-N, in other words all cpus except N-N. If used
with + notation, specify !+N-N.</p>

<p>--localalloc, -l Always allocate on the current
node.</p>

<p>--preferred=node Preferably allocate memory on node, but
if memory cannot be allocated there fall back to other
nodes. This option takes only a single node number. Relative
notation may be used.</p>

<p>--show, -s Show NUMA policy settings of the current
process.</p>

<p>--hardware, -H Show inventory of available nodes on the
system.</p>

<p>Numactl can set up policy for a SYSV shared memory
segment or a file in shmfs/hugetlbfs.</p>

<p>This policy is persistent and will be used by all
mappings from that shared memory. The order of options
matters here. The specification must at least include either
of --shm, --shmid, --file to specify the shared memory
segment or file and a memory policy like described above (
--interleave, --localalloc, --prefered, --membind ).</p>

<p>--huge When creating a SYSV shared memory segment use
huge pages. Only valid before --shmid or --shm</p>

<p>--offset Specify offset into the shared memory segment.
Default 0. Valid units are m (for MB), g (for GB), k (for
KB), otherwise it specifies bytes.</p>

<p>--strict Give an error when a page in the policied area
in the shared memory segment already was faulted in with a
conflicting policy. Default is to silently ignore this.</p>

<p>--shmmode shmmode Only valid before --shmid or --shm
When creating a shared memory seg- ment set it to numeric
mode shmmode.</p>

<p>--length length Apply policy to length range in the
shared memory segment or make the segment length long
Default is to use the remaining length Required when a
shared memory segment is created and specifies the length of
the new segment then. Valid units are m (for MB), g (for
GB), k (for KB), otherwise it specifies bytes.</p>

<p>--shmid id Create or use an shared memory segment with
numeric ID id</p>

<p>--shm shmkeyfile Create or use an shared memory segment,
with the ID generated using ftok(3) from shmkeyfile</p>

<p>--file tmpfsfile Set policy for a file in tmpfs or
hugetlbfs</p>

<p>--touch Touch pages to enforce policy early. Default is
to not touch them, the policy is applied when an
applications maps and accesses a page.</p>

<p>--dump Dump policy in the specified range.</p>

<p>--dump-nodes Dump all nodes of the specific range (very
verbose!)</p>

<p>Valid node specifiers</p>

<p>all All nodes number Node number number1{,number2} Node
number1 and Node number2 number1-number2 Nodes from number1
to number2 ! nodes Invert selection of the following
specification.</p>

<p>EXAMPLES numactl --physcpubind=+0-4,8-12 myapplic
arguments Run myapplic on cpus 0-4 and 8-12 of the current
cpuset.</p>

<p>numactl --interleave=all bigdatabase arguments Run big
database with its memory interleaved on all CPUs.</p>

<p>numactl --cpubind=0 --membind=0,1 process Run process on
node 0 with memory allocated on node 0 and 1.</p>

<p>numactl --cpubind=0 --membind=0,1 -- process -l Run
process as above, but with an option (-l) that would be
confused with a numactl option.</p>

<p>numactl --preferred=1 numactl --show Set preferred node
1 and show the resulting state.</p>

<p>numactl --interleave=all --shmkeyfile /tmp/shmkey
Interleave all of the sysv shared memory regiion specified
by /tmp/shmkey over all nodes.</p>

<p>numactl --offset=1G --length=1G --membind=1 --file
/dev/shm/A --touch Bind the second gigabyte in the tmpfs
file /dev/shm/A to node 1.</p>

<p>numactl --localalloc /dev/shm/file Reset the policy for
the shared mem- ory file file to the default localalloc
policy.</p>

<p>NOTES Requires an NUMA policy aware kernel.</p>

<p>Command is not executed using a shell. If you want to
use shell metacharacters in the child use sh -c as
wrapper.</p>

<p>Setting policy for a hugetlbfs file does currently not
work because it cannot be extended by truncate.</p>

<p>Shared memory segments larger than numactl s address
space cannot be completely policied. This could be a problem
on 32bit architectures. Changing it piece by piece may
work.</p>

<p>The old --cpubind which accepts node numbers, not cpu
numbers, is dep- recated and replaced with the new
--cpunodebind and --physcpubind options.</p>

<p>FILES /proc/cpuinfo for the listing of active CPUs. See
proc(5) for details.</p>

<p>/sys/devices/system/node/node*/numastat for NUMA memory
hit statistics.</p>

<p>COPYRIGHT Copyright 2002,2004 Andi Kleen, SuSE Labs.
numactl and the demo pro- grams are under the GNU General
Public License, v.2</p>

<p>SEE ALSO set_mempolicy(2) , get_mempolicy(2) , mbind(2)
, sched_setaffinity(2) , sched_getaffinity(2) , proc(5) ,
ftok(3) , shmat(2) , migratepages(8)</p>

<p>SuSE Labs Mar 2004 NUMACTL(8)</p>
<hr>
</body>
</html>
