<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:04:46 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipmimonitoring(8) System Commands ipmimonitoring(8)</p>

<p>NAME ipmimonitoring - IPMI monitoring utility</p>

<p>SYNOPSIS ipmimonitoring [OPTION...]</p>

<p>DESCRIPTION ipmimonitoring is an IPMI sensor monitoring
tool that utilizes the libipmimonitoring(3) library to
interpret sensor readings rather than just report them. The
tool will output if sensors are in NOMINAL, WARNING, or
CRITICAL states. The library and tool are primarily used for
host monitoring activities. By mapping sensor readings into
NOMI- NAL, WARNING, or CRITICAL states, it makes monitoring
easier across large numbers of nodes. For more general
sensor reading use, it is rec- ommended that users use
ipmi-sensors(8).</p>

<p>The state interpretations are determined by the
configuration file /etc/ipmi_monitoring_sensors.conf. See
ipmi_monitoring_sensors.conf(5) for more information on
configuring sensor interpretations.</p>

<p>Some sensors may not be output by default. Those sensors
may not be readable or interpretable for a number of
reasons. The --verbose may be used to see what sensors
cannot be read or interpreted. Please see IPMIMONITORING
KNOWN ISSUES below for interpretation rule issues.</p>

<p>GENERAL OPTIONS The following options are general
options for configuring IPMI communi- cation and executing
general tool commands.</p>

<p>-D, --driver-type=IPMIDRIVER Specify the driver type to
use instead of doing an auto selec- tion. The currently
available outofband drivers are LAN and LAN_2_0, which
perform IPMI 1.5 and IPMI 2.0 respectively. The currently
available inband drivers are KCS, SSIF, OPENIPMI, and
SUNBMC.</p>

<p>--disable-auto-probe Do not probe in-band IPMI devices
for default settings.</p>

<p>--driver-address=DRIVER-ADDRESS Specify the in-band
driver address to be used instead of the probed value.
DRIVER-ADDRESS should be prefixed with &quot;0x&quot; for a
hex value and 0 for an octal value.</p>

<p>--driver-device=DEVICE Specify the in-band driver device
path to be used instead of the probed path.</p>

<p>--register-spacing=REGISTER-SPACING Specify the in-band
driver register spacing instead of the probed value.</p>

<p>-h, --hostname=IPMIHOST1,IPMIHOST2,... Specify the
remote host(s) to communicate with. Multiple host- names may
be separated by comma or may be specified in a range format;
see HOSTRANGED SUPPORT below.</p>

<p>-u, --username=USERNAME Specify the username to use when
authenticating with the remote host. If not specified, a
null (i.e. anonymous) username is assumed. The user must
have atleast OPERATOR privileges in order for this tool to
operate fully.</p>

<p>-p, --password=PASSWORD Specify the password to use when
authenticationg with the remote host. If not specified, a
null password is assumed. Maximum password length is 16 for
IPMI 1.5 and 20 for IPMI 2.0.</p>

<p>-P, --password-prompt Prompt for password to avoid
possibility of listing it in pro- cess lists.</p>

<p>-k, --k-g=K_G Specify the K_g BMC key to use when
authenticating with the remote host for IPMI 2.0. If not
specified, a null key is assumed. To input the key in
hexadecimal form, prefix the string with 0x. E.g., the key
abc can be entered with the either the string abc or the
string 0x616263</p>

<p>-K, --k-g-prompt Prompt for k-g to avoid possibility of
listing it in process lists.</p>

<p>--session-timeout=MILLISECONDS Specify the session
timeout in milliseconds. Defaults to 20000 milliseconds (20
seconds) if not specified.</p>

<p>--retransmission-timeout=MILLISECONDS Specify the packet
retransmission timeout in milliseconds. Defaults to 1000
milliseconds (1 second) if not specified. The retransmission
timeout cannot be larger than the session time- out.</p>

<p>-a, --authentication-type=AUTHENTICATION-TYPE Specify
the IPMI 1.5 authentication type to use. The currently
available authentication types are NONE,
STRAIGHT_PASSWORD_KEY, MD2, and MD5. Defaults to MD5 if not
specified.</p>

<p>-I, --cipher-suite-id=CIPHER-SUITE-ID Specify the IPMI
2.0 cipher suite ID to use. The Cipher Suite ID identifies a
set of authentication, integrity, and confidential- ity
algorithms to use for IPMI 2.0 communication. The authenti-
cation algorithm identifies the algorithm to use for session
setup, the integrity algorithm identifies the algorithm to
use for session packet signatures, and the confidentiality
algorithm identifies the algorithm to use for payload
encryption. Defaults to cipher suite ID 3 if not specified.
The following cipher suite ids are currently supported:</p>

<p>0 - Authentication Algorithm = None; Integrity Algorithm
= None; Confidentiality Algorithm = None</p>

<p>1 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = None; Confidentiality Algorithm = None</p>

<p>2 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = HMAC-SHA1-96; Confidentiality Algorithm =
None</p>

<p>3 - Authentication Algorithm = HMAC-SHA1; Integrity
Algorithm = HMAC-SHA1-96; Confidentiality Algorithm =
AES-CBC-128</p>

<p>6 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = None; Confidentiality Algorithm = None</p>

<p>7 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = HMAC-MD5-128; Confidentiality Algorithm =
None</p>

<p>8 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = HMAC-MD5-128; Confidentiality Algorithm =
AES-CBC-128</p>

<p>11 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = MD5-128; Confidentiality Algorithm = None</p>

<p>12 - Authentication Algorithm = HMAC-MD5; Integrity
Algorithm = MD5-128; Confidentiality Algorithm =
AES-CBC-128</p>

<p>-l, --privilege-level=PRIVILEGE-LEVEL Specify the
privilege level to be used. The currently available
privilege levels are USER, OPERATOR, and ADMIN. Defaults to
OPERATOR if not specified.</p>

<p>--config-file=FILE Specify an alternate configuration
file.</p>

<p>-W, --workaround-flags=WORKAROUNDS Specify workarounds
to vendor compliance issues. Multiple workarounds can be
specified separated by commas. See WORKAROUNDS below for a
list of available workarounds.</p>

<p>--debug Turn on debugging.</p>

<p>-?, --help Output a help list and exit.</p>

<p>--usage Output a usage message and exit.</p>

<p>-V, --version Output the program version and exit.</p>

<p>IPMIMONITORING OPTIONS The following options are
specific to Ipmimonitoring.</p>

<p>-v, --verbose Increase verbosity in output. This option
will output additional sensors that are generally unreadable
or uninterpretable.</p>

<p>-q, --quiet-readings Do not output sensor reading
values, only NOMINAL, WARNING, or CRITICAL states. This
option is particularly useful if you want to use hostranged
output across a cluster and want to consoli- date the
output.</p>

<p>-L, --list-groups List sensor groups.</p>

<p>-g GROUP-LIST, --groups=GROUP-LIST Specify groups to
specifically monitor. Multiple groups can be separated by
commas or spaces.</p>

<p>-s &quot;SENSORS-LIST&quot;,
--sensors=&quot;SENSORS-LIST&quot; Specify sensors to
monitor by record id. Multiple record ids can be separated
by commas or spaces.</p>

<p>-b, --bridge-sensors By default, ipmimonitoring will not
read sensors from non-BMC owners. Setting this option will
make ipmimoni- toring attempt to bridge sensor commands to
alternate owners (experimental). Bridging may not work on
some interfaces/driver types.</p>

<p>--sensor-config-file=FILE Specify an alternate sensor
configuration file.</p>

<p>SDR CACHE OPTIONS This tool requires access to the
sensor data repository (SDR) cache for general operation. By
default, SDR data will be down- loaded and cached on the
local machine. The following options apply to the SDR
cache.</p>

<p>-f, --flush-cache Flush a cached version of the sensor
data repository (SDR) cache. The SDR is typically cached for
faster sub- sequent access. However, it may need to be
flushed and re-generated if the SDR has been updated on a
system.</p>

<p>-Q, --quiet-cache Do not output information about cache
creation/deletion.</p>

<p>--sdr-cache-directory=DIRECTORY Specify an alternate
directory for sensor data repository (SDR) caches to be
stored or read from. Defaults to the home directory if not
specified.</p>

<p>--sdr-cache-recreate If the SDR cache is out of date or
invalid, automatically recreate the sensor data repository
(SDR) cache. This option may be useful for scripting
purposes.</p>

<p>HOSTRANGED OPTIONS The following options manipulate
hostranged output. See HOS- TRANGED SUPPORT below for
additional information on hostranges.</p>

<p>-B, --buffer-output Buffer hostranged output. For each
node, buffer standard output until the node has completed
its IPMI operation. When specifying this option, data may
appear to output slower to the user since the the entire
IPMI operation must complete before any data can be output.
See HOS- TRANGED SUPPORT below for additional
information.</p>

<p>-C, --consolidate-output Consolidate hostranged output.
The complete standard out- put from every node specified
will be consolidated so that nodes with identical output are
not output twice. A header will list those nodes with the
consolidated out- put. When this option is specified, no
output can be seen until the IPMI operations to all nodes
has completed. If the user breaks out of the program early,
all currently consolidated output will be dumped. See
HOSTRANGED SUP- PORT below for additional information.</p>

<p>-F, --fanout Specify multiple host fanout. A
&quot;sliding window&quot; (or fanout) algorithm is used for
parallel IPMI communication so that slower nodes or timed
out nodes will not impede parallel communication. The
maximum number of threads available at the same time is
limited by the fanout. The default is 64.</p>

<p>-E, --eliminate Eliminate hosts determined as undetected
by ipmidetect. This attempts to remove the common issue of
hostranged execution timing out due to several nodes being
removed from service in a large cluster. The ipmidetectd
daemon must be running on the node executing the
command.</p>

<p>--always-prefix Always prefix output, even if only one
host is specified or communicating in-band. This option is
primarily useful for scripting purposes. Option will be
ignored if speci- fied with the -C option.</p>

<p>HOSTRANGED SUPPORT Multiple hosts can be input either as
an explicit comma sepa- rated lists of hosts or a range of
hostnames in the general form: prefix[n-m,l-k,...], where n
&lt; m and l &lt; k, etc. The later form should not be
confused with regular expression character classes (also
denoted by []). For example, foo[19] does not rep- resent
foo1 or foo9, but rather represents a degenerate range:
foo19.</p>

<p>This range syntax is meant only as a convenience on
clusters with a prefixNN naming convention and specification
of ranges should not be considered necessary -- the list
foo1,foo9 could be specified as such, or by the range
foo[1,9].</p>

<p>Some examples of range usage follow: foo[01-05] instead
of foo01,foo02,foo03,foo04,foo05 foo[7,9-10] instead of
foo7,foo9,foo10 foo[0-3] instead of foo0,foo1,foo2,foo3</p>

<p>As a reminder to the reader, some shells will interpret
brackets ([ and ]) for pattern matching. Depending on your
shell, it may be necessary to enclose ranged lists within
quotes.</p>

<p>By default, standard output from each node specified
will be output with the hostname prepended to each line.
Although this output is readable in many situations, it may
be difficult to read in other situations. For example,
output from multiple nodes may be mixed together. The -B and
-C options can be used to change this default.</p>

<p>In-band IPMI Communication will be used when the host
&quot;local- host&quot; is specified. This allows the user
to add the localhost into the hostranged output.</p>

<p>GENERAL TROUBLESHOOTING Most often, IPMI over LAN
problems involve a misconfiguration of the remote machines
BMC. Double check to make sure the follow- ing are
configured properly in the remote machines BMC: IP address,
MAC address, subnet mask, username, user enablement, user
privilege, password, LAN privilege, LAN enablement, and
allowed authentication type(s). For IPMI 2.0 connections,
double check to make sure the cipher suite privilege(s) and
K_g key are configured properly. The bmc-config(8) tool can
be used to check and/or change these configuration
settings.</p>

<p>The following are common issues for given error
messages:</p>

<p>&quot;username invalid&quot; - The username entered (or
a NULL username if none was entered) is not available on the
remote machine. It may also be possible the remote BMC s
username configuration is incorrect.</p>

<p>&quot;password invalid&quot; - The password entered (or
a NULL password if none was entered) is not correct. It may
also be possible the password for the user is not correctly
configured on the remote BMC.</p>

<p>&quot;password verification timeout&quot; - Password
verification has timed out. A &quot;password invalid&quot;
error (described above) or a generic &quot;session
timeout&quot; (described below) occurred. During this point
in the protocol it cannot be differentiated which
occurred.</p>

<p>&quot;k_g invalid&quot; - The K_g key entered (or a NULL
K_g key if none was entered) is not correct. It may also be
possible the K_g key is not correctly configured on the
remote BMC.</p>

<p>&quot;privilege level insufficient&quot; - An IPMI
command requires a higher user privilege than the one
authenticated with. Please try to authenticate with a higher
privilege. This may require authenticating to a different
user which has a higher maximum privilege.</p>

<p>&quot;privilege level cannot be obtained for this
user&quot; - The privi- lege level you are attempting to
authenticate with is higher than the maximum allowed for
this user. Please try again with a lower privilege. It may
also be possible the maximum privilege level allowed for a
user is not configured properly on the remote BMC.</p>

<p>&quot;authentication type unavailable for attempted
privilege level&quot; - The authentication type you wish to
authenticate with is not available for this privilege level.
Please try again with an alternate authentication type or
alternate privilege level. It may also be possible the
available authentication types you can authenticate with are
not correctly configured on the remote BMC.</p>

<p>&quot;cipher suite id unavailable&quot; - The cipher
suite id you wish to authenticate with is not available on
the remote BMC. Please try again with an alternate cipher
suite id. It may also be possible the available cipher suite
ids are not correctly configured on the remote BMC.</p>

<p>&quot;ipmi 2.0 unavailable&quot; - IPMI 2.0 was not
discovered on the remote machine. Please try to use IPMI 1.5
instead.</p>

<p>&quot;connection timeout&quot; - Initial IPMI
communication failed. A num- ber of potential errors are
possible, including an invalid host- name specified, an IPMI
IP address cannot be resolved, IPMI is not enabled on the
remote server, the network connection is bad, etc. Please
verify configuration and connectivity.</p>

<p>&quot;session timeout&quot; - The IPMI session has timed
out. Please reconnect.</p>

<p>If IPMI over LAN continually times out, you may wish to
increase the retransmission timeout. Some remote BMCs are
considerably slower than others.</p>

<p>Please see WORKAROUNDS below to also if there are any
vendor specific bugs that have been discovered and worked
around.</p>

<p>IPMIMONITORING TROUBLESHOOTING The following are common
issues for given error messages specif- ically for
ipmimonitoring.</p>

<p>&quot;sensor config file parse error&quot; - A parse
error was found in the libipmimonitoring(3) sensor
configuration file. Please see libipmimonitoring(3).</p>

<p>WORKAROUNDS With so many different vendors implementing
their own IPMI solu- tions, different vendors may implement
their IPMI protocols incorrectly. The following lists the
handful of compliance issues discovered and the workarounds
currently supported.</p>

<p>When possible, workarounds have been implemented so they
will be transparent to the user. However, some will require
the user to specify a workaround be used via the -W
option.</p>

<p>The hardware listed below may only indicate the hardware
that a problem was discovered on. Newer versions of hardware
may fix the problems indicated below. Similar machines from
vendors may or may not exhibit the same problems.</p>

<p>Intel SR870BN4: BMCs would not respond to
retransmissions of a Get Session Challenge Request if a
previous Get Session Chal- lenge response was lost. Resolved
by sending retransmitted Get Session Challenge requests from
a different source port. Auto- matically handled.</p>

<p>Tyan S2882 with m3289 BMC: After the IPMI session is
brought up, packet responses return empty session IDs to the
client. This will likely cause &quot;session timeout&quot;
errors to occur. In order to work around this issue, the
&quot;idzero&quot; workaround must be speci- fied. The
option will allow empty session IDs to be accepted by the
client.</p>

<p>Dell PowerEdge 2850,SC1425: When Per-Message
Authentication is disabled, packet responses contain
non-null authentication data (when it should in fact be
null). This will likely cause &quot;ses- sion timeout&quot;
errors to occur. In order to work around this issue, the
&quot;unexpectedauth&quot; workaround must be specified. The
option will allow unexpected non-null authcodes to be
checked as though they were expected. This compliance bug is
confirmed to be fixed on newer firmware.</p>

<p>IBM eServer 325: The remote BMC will advertise that Per
Message Authentication is disabled, but actually require it
for the pro- tocol. This will likely cause &quot;session
timeout&quot; errors to occur. In order to work around this
issue, the &quot;forcepermsg&quot; workaround must be
specified. The option will force Per Message Authentication
to be used no matter what is advertised by the remote
BMC.</p>

<p>Supermicro H8QME with SIMSO daughter card: The remote
BMC will advertise that Per Message Authentication is
disabled, but actu- ally require it for the protocol.
Automatically handled.</p>

<p>Asus P5M2/P5MT-R/RS162-E4/RX4: The motherboard does not
properly report username capabilities and/or K_g status.
This will likely cause &quot;username invalid&quot; or
&quot;k_g invalid&quot; errors to occur. In order to work
around this issue, the &quot;authcap&quot; workaround must
be specified.</p>

<p>Intel SR1520ML/X38ML: The motherboard does not properly
report username capabilities and/or K_g status. This will
likely cause &quot;username invalid&quot; or &quot;k_g
invalid&quot; errors to occur. In order to work around this
issue, the &quot;authcap&quot; workaround must be speci-
fied.</p>

<p>Sun ILOM 1.0/2.0: The session sequence numbers returned
for IPMI 1.5 sessions are the wrong endian on some systems
running ILOM 1.0/2.0. The incorrect endian depends on the
service processor endianness. This will likely cause
&quot;session timeout&quot; errors to occur. In order to
work around this issue, the &quot;endianseq&quot; workaround
must be specified.</p>

<p>Sun Fire 2200/4150/4450 with ELOM: The motherboard does
not properly report username capabilities. This will likely
cause &quot;username invalid&quot; errors to occur. In order
to work around this issue, the &quot;authcap&quot;
workaround must be specified.</p>

<p>Intel SE7520AF2 with Intel Server Management Module
(Profes- sional Edition): There are a number of Intel IPMI
2.0 authenti- cation bugs. These problems may cause
&quot;username invalid&quot;, &quot;password invalid&quot;,
or &quot;k_g invalid&quot; errors to occur. They can be
worked around by specifying the &quot;intel20&quot;
workaround. The workarounds include padding of usernames,
automatic acceptance of a RAKP 4 response integrity check
when using the integrity algorithm MD5-128, and password
truncation if the authentication algorithm is
HMAC-MD5-128.</p>

<p>Supermicro H8QME with SIMSO daughter card: There are
several Supermicro IPMI 2.0 bugs on early firmware revisions
which can be worked around using the
&quot;supermicro20&quot; workaround. These problems may
cause &quot;password invalid&quot; errors to occur. These
compliance bugs are confirmed to be fixed on newer
firmware.</p>

<p>Sun Fire 4100/4200/4500 with ILOM: There are several Sun
IPMI 2.0 bugs. These problems may cause &quot;password
invalid&quot; or &quot;bmc error&quot; errors to occur. They
can be worked around by specifying the &quot;sun20&quot;
workaround. The workarounds include handling invalid
lengthed hash keys, improperly hashed keys, and invalid
cipher suite records.</p>

<p>Inventec 5441, Supermicro X8DTH: The privilege level
sent during the Open Session stage of an IPMI 2.0 connection
is used for hashing keys instead of the privilege level sent
during the RAKP1 connection stage. This may cause
&quot;password invalid&quot; or &quot;bad rmcpplus status
code&quot; errors to occur. It can be worked around by
specifying the &quot;opensesspriv&quot; workaround.</p>

<p>EXAMPLES # ipmimonitoring</p>

<p>Show all sensors on the local machine.</p>

<p># ipmimonitoring --sensors=&quot;82 11 7 102&quot;</p>

<p>Show sensors #82, #11, #7 and #102 on the local
machine.</p>

<p># ipmimonitoring --groups=TEMPERATURE</p>

<p>Show all sensors in TEMPERATURE group on the local
machine.</p>

<p># ipmimonitoring -h ahost -u myusername -p
mypassword</p>

<p>Show all sensors on a remote machine using IPMI over
LAN.</p>

<p># ipmimonitoring -h mycluster[0-127] -u myusername -p
mypassword</p>

<p>Show all sensors across a cluster using IPMI over
LAN.</p>

<p>IPMIMONITORING KNOWN ISSUES Interpretation rules have
not been written for all sensors per- mutations and types.
Users may notice some sensors output in ipmi-sensors(8) do
not output in ipmimonitoring. If sensor interpretation rules
are needed, please contact the FreeIPMI maintainers.</p>

<p>KNOWN ISSUES On older operating systems, if you input
your username, pass- word, and other potentially security
relevant information on the command line, this information
may be discovered by other users when using tools like the
ps(1) command or looking in the /proc file system. It is
generally more secure to input password information with
options like the -P or -K options. Configuring security
relevant information in the FreeIPMI configuration file
would also be an appropriate way to hide this
information.</p>

<p>In order to prevent brute force attacks, some BMCs will
tem- porarily &quot;lock up&quot; after a number of remote
authentication errors. You may need to wait awhile in order
to this temporary &quot;lock up&quot; to pass before you may
authenticate again.</p>

<p>Interpretation rules have not been written for all
sensors per- mutations and types. Users may notice some
sensors output in ipmi-sensors(8) does not output in
ipmimonitoring. If additional sensor interpretation rules
are needed, please con- tact the FreeIPMI maintainers.</p>

<p>Some sensors may be output because the owner of the
sensor is not the BMC. To attempt to bridge sensors and
access sensors not on the BMC, users may wish to try the -b
or --bridge-sensors options.</p>

<p>FILES /etc/ipmi_monitoring_sensors.conf</p>

<p>REPORTING BUGS Report bugs to
&lt;freeipmi-users@gnu.org&gt; or
&lt;freeipmi-devel@gnu.org&gt;.</p>

<p>COPYRIGHT Copyright (C) 2007-2008 Lawrence Livermore
National Security, LLC. Copyright (C) 2006-2007 The Regents
of the University of Cali- fornia.</p>

<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p>SEE ALSO libipmimonitoring(3),
ipmi_monitoring_sensors.conf(5), freeipmi(7),
ipmi-sensors(8)</p>

<p>http://www.gnu.org/software/freeipmi/</p>

<p>ipmimonitoring 0.7.16 2010-05-03 ipmimonitoring(8)</p>
<hr>
</body>
</html>
