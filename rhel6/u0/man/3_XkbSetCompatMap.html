<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:27:19 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>XkbSetCompatMap(3) XKB FUNCTIONS XkbSetCompatMap(3)</p>

<p>NAME XkbSetCompatMap - Modify the servers compatibility
map</p>

<p>SYNOPSIS Bool XkbSetCompatMap (Display *display,
unsigned int which, XkbDescPtr xkb, Bool
update_actions);</p>

<p>ARGUMENTS - display connection to server</p>

<p>- which mask of compat map components to set</p>

<p>- xkb source for compat map components</p>

<p>- update_actions True =&gt; apply to servers keyboard
map</p>

<p>DESCRIPTION To modify the servers compatibility map,
first modify a local copy of the Xkb compatibility map, then
call XkbSetCompatMap. You may allocate a new compatibility
map for this purpose using XkbAllocCompatMap. You may also
use a compatibility map from another server, although you
need to adjust the device_spec field in the XkbDescRec
accordingly. Note that symbol interpretations in a
compatibility map ( sym_interpret, the vector of
XkbSymInterpretRec structures) are also allocated using this
same function.</p>

<p>XkbSetCompatMap copies compatibility map information
from the keyboard description in xkb to the server specified
in display device_spec field of xkb. Unless you have
specifically modified this field, it is the default keyboard
device. which specifies the compatibility map compo- nents
to be set, and is an inclusive OR of the bits shown in Table
1.</p>

<p>Table 1 Compatibility Map Component Masks
---------------------------------------------------------------
Mask Value Affecting
---------------------------------------------------------------
XkbSymInterpMask (1&lt;&lt;0) Symbol interpretations
XkbGroupCompatMask (1&lt;&lt;1) Group maps XkbAllCompatMask
(0x3) All compatibility map components</p>

<p>After updating its compatibility map for the specified
device, if update_actions is True, the server applies the
new compatibility map to its entire keyboard for the device
to generate a new set of key seman- tics, compatibility
state, and a new core keyboard map. If update_actions is
False, the new compatibility map is not used to gen- erate
any modifications to the current device semantics, state, or
core keyboard map. One reason for not applying the
compatibility map immedi- ately would be if one server was
being configured to match another on a piecemeal basis; the
map should not be applied until everything is updated. To
force an update at a later time, use XkbSetCompatMap speci-
fying which as zero and update_actions as True.</p>

<p>XkbSetCompatMap returns True if successful and False if
unsuccessful. The server may report problems it encounters
when processing the request subsequently via protocol
errors.</p>

<p>RETURN VALUES True The XkbSetCompatMap function returns
True if successful.</p>

<p>False The XkbSetCompatMap function returns False if
unsuccess- ful.</p>

<p>STRUCTURES The complete description of an Xkb keyboard
is given by an XkbDescRec. The component structures in the
XkbDescRec represent the major Xkb com- ponents.</p>

<p>typedef struct { struct _XDisplay * display; /
connection to X server */ unsigned short flags; / private to
Xkb, do not modify */ unsigned short device_spec; / device
of interest */ KeyCode min_key_code; / minimum keycode for
device */ KeyCode max_key_code; / maximum keycode for device
*/ XkbControlsPtr ctrls; / controls */ XkbServerMapPtr
server; / server keymap */ XkbClientMapPtr map; / client
keymap */ XkbIndicatorPtr indicators; / indicator map */
XkbNamesPtr names; / names for all components */
XkbCompatMapPtr compat; / compatibility map */
XkbGeometryPtr geom; / physical geometry of keyboard */ }
XkbDescRec, *XkbDescPtr;</p>

<p>The display field points to an X display structure. The
flags field is private to the library: modifying flags may
yield unpredictable results. The device_spec field specifies
the device identifier of the keyboard input device, or
XkbUseCoreKeyboard, which specifies the core keyboard
device. The min_key_code and max_key_code fields specify the
least and greatest keycode that can be returned by the
keyboard.</p>

<p>Each structure component has a corresponding mask bit
that is used in function calls to indicate that the
structure should be manipulated in some manner, such as
allocating it or freeing it. These masks and their
relationships to the fields in the XkbDescRec are shown in
Table 2.</p>

<p>Table 2 Mask Bits for XkbDescRec
-------------------------------------------------- Mask Bit
XkbDescRec Field Value
--------------------------------------------------
XkbControlsMask ctrls (1L&lt;&lt;0) XkbServerMapMask server
(1L&lt;&lt;1) XkbIClientMapMask map (1L&lt;&lt;2)
XkbIndicatorMapMask indicators (1L&lt;&lt;3) XkbNamesMask
names (1L&lt;&lt;4) XkbCompatMapMask compat (1L&lt;&lt;5)
XkbGeometryMask geom (1L&lt;&lt;6) XkbAllComponentsMask All
Fields (0x7f)</p>

<p>The XkbSymInterpretRec structure specifies a symbol
interpretation:</p>

<p>typedef struct { KeySym sym; / keysym of interest or
NULL */ unsigned char flags; / XkbSI_AutoRepeat,
XkbSI_LockingKey */ unsigned char match; / specifies how
mods is interpreted */ unsigned char mods; / modifier bits,
correspond to eight real modifiers */ unsigned char
virtual_mod; / 1 modifier to add to key virtual mod map */
XkbAnyAction act; / action to bind to symbol position on key
*/ } XkbSymInterpretRec,*XkbSymInterpretPtr;</p>

<p>SEE ALSO XkbAllocCompatMap(3)</p>

<p>X Version 11 libX11 1.3 XkbSetCompatMap(3)</p>
<hr>
</body>
</html>
