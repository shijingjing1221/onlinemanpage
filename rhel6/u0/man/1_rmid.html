<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:13:23 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>rmid(1) rmid(1)</p>

<p>NAME rmid - The Java RMI Activation System Daemon</p>

<p>rmid starts the activation system daemon that allows
objects to be reg- istered and activated in a virtual
machine (VM).</p>

<p>SYNOPSIS rmid [options]</p>

<p>DESCRIPTION The rmid tool starts the activation system
daemon. The activation sys- tem daemon must be started
before activatable objects can be either registered with the
activation system or activated in a VM. See the Java RMI
Specification @
http://java.sun.com/javase/6/docs/platform/rmi/spec/rmitoc.html
and Activation tutorials @
http://java.sun.com/javase/6/docs/technotes/guides/rmi/activa-
tion/overview.html for details on how to write programs that
use acti- vatable remote objects.</p>

<p>The daemon can be started by executing the rmid command,
and specifying a security policy file, as follows:</p>

<p>rmid -J-Djava.security.policy=rmid.policy</p>

<p>Note: When running Suns implementation of rmid, by
default you will need to specify a security policy file so
that rmid can verify whether or not the information in each
ActivationGroupDesc is allowed to be used to launch a VM for
an activation group. Specifically, the command and options
specified by the CommandEnvironment and any Properties
passed to an ActivationGroupDescs constructor must now be
explicitly allowed in the security policy file for rmid. The
value of the sun.rmi.activation.execPolicy property dictates
the policy that rmid uses to determine whether or not the
information in an Activation- GroupDesc may be used to
launch a VM for an activation group.</p>

<p>Executing rmid by default</p>

<p>* starts the Activator and an internal registry on the
default port, 1098, and</p>

<p>* binds an ActivationSystem to the name
java.rmi.activation.Activa- tionSystem in this internal
registry.</p>

<p>To specify an alternate port for the registry, you must
specify the -port option when starting up rmid. For
example,</p>

<p>rmid -J-Djava.security.policy=rmid.policy -port 1099</p>

<p>starts the activation system daemon and a registry on
the registrys default port, 1099.</p>

<p>Starting rmid from inetd/xinetd</p>

<p>An alternative to starting rmid from the command line is
to configure inetd (Solaris) or xinetd (Linux) to start rmid
on demand.</p>

<p>When rmid starts up, it attempts to obtain an inherited
channel (inher- ited from inetd/xinetd) by invoking the
System.inheritedChannel method. If the inherited channel is
null or not an instance of java.nio.chan-
nels.ServerSocketChannel, then rmid assumes that it was not
started by inetd/xinetd, and it starts up as described
above.</p>

<p>If the inherited channel is a ServerSocketChannel
instance, then rmid uses the java.net.ServerSocket obtained
from the ServerSocketChannel as the server socket that
accepts requests for the remote objects it exports, namely
the registry in which the java.rmi.activation.Activa-
tionSystem is bound and the java.rmi.activation.Activator
remote object. In this mode, rmid behaves the same as when
it is started from the command line, except:</p>

<p>* Output printed to System.err is redirected to a file.
This file is located in the directory specified by the
java.io.tmpdir system property (typically /var/tmp or /tmp)
with the prefix &quot;rmid-err&quot; and the suffix
&quot;tmp&quot;.</p>

<p>* The -port option is disallowed. If this option is
specified, rmid will exit with an error message.</p>

<p>* The -log option is required. If this option is not
specified, rmid will exit with an error message.</p>

<p>See the man pages for inetd (Solaris) or xinetd (Linux)
for details on how to configure services to be started on
demand.</p>

<p>OPTIONS -C&lt;someCommandLineOption&gt; Specifies an
option that is passed as a command-line argument to each
child process (activation group) of rmid when that process
is created. For example, you could pass a property to each
virtual machine spawned by the activation system daemon:</p>

<p>rmid -C-Dsome.property=value</p>

<p>This ability to pass command-line arguments to child
processes can be useful for debugging. For example, the
following command:</p>

<p>rmid -C-Djava.rmi.server.logCalls=true</p>

<p>will enable server-call logging in all child VMs.</p>

<p>-J&lt;someCommandLineOption&gt; Specifies an option that
is passed to the java interpreter running rmid. For example,
to specify that rmid use a policy file named rmid.policy,
the -J option can be used to define the java.secu-
rity.policy property on rmid s command line, for
example:</p>

<p>rmid -J-Djava.security.policy=rmid.policy</p>

<p>-J-Dsun.rmi.activation.execPolicy=&lt;policy&gt;
Specifies the policy that rmid employs to check commands and
com- mand-line options used to launch the VM in which an
activation group runs. Please note that this option exists
only in Suns implementa- tion of the Java RMI activation
daemon. If this property is not specified on the command
line, the result is the same as if
-J-Dsun.rmi.activation.execPolicy=default were specified.
The possi- ble values of &lt;policy&gt; can be default,
&lt;policyClassName&gt;, or none:</p>

<p>* default (or if this property is unspecified)</p>

<p>The default execPolicy allows rmid to execute commands
with specific command-line options only if rmid has been
granted permission to execute those commands and options in
the security policy file that rmid uses. Only the default
activation group implementation can be used with the default
execution policy.</p>

<p>rmid launches a VM for an activation group using the
information in the group s registered activation group
descriptor, an Activation- GroupDesc. The group descriptor
specifies an optional Activation-
GroupDesc.CommandEnvironment which includes the command to
execute to start the activation group as well as any command
line options to be added to the command line. By default,
rmid uses the java command found in java.home. The group
descriptor also contains properties overrides that are added
to the command line as options defined as:</p>

<p>-D&lt;property&gt;=&lt;value&gt;</p>

<p>The permission com.sun.rmi.rmid.ExecPermission is used
to grant rmid permission to execute a command, specified in
the group descriptors CommandEnvironment to launch an
activation group. The permission
com.sun.rmi.rmid.ExecOptionPermission is used to allow rmid
to use command-line options, specified as properties
overrides in the group descriptor or as options in the
CommandEnvironment, when launching the activation group.</p>

<p>When granting rmid permission to execute various
commands and options, the permissions ExecPermission and
ExecOptionPermission need to be granted universally (i.e.,
granted to all code sources).</p>

<p>ExecPermission The ExecPermission class represents
permission for rmid to exe- cute a specific command to
launch an activation group.</p>

<p>Syntax The name of an ExecPermission is the path name of
a command to grant rmid permission to execute. A path name
that ends in &quot;/*&quot; indicates all the files
contained in that directory (where &quot;/&quot; is the
file-separator character, File.separatorChar). A path name
that ends with &quot;/-&quot; indicates all files and
subdirectories contained in that directory (recursively). A
path name consisting of the special token &quot;&lt;&lt;ALL
FILES&gt;&gt;&quot; matches any file.</p>

<p>Note: A path name consisting of a single &quot;*&quot;
indicates all the files in the current directory, while a
path name consisting of a single &quot;-&quot; indicates all
the files in the current directory and (recur- sively) all
files and subdirectories contained in the current direc-
tory.</p>

<p>ExecOptionPermission The ExecOptionPermission class
represents permission for rmid to use a specific
command-line option when launching an activation group. The
name of an ExecOptionPermission is the value of a com- mand
line option.</p>

<p>Syntax Options support a limited wildcard scheme. An
asterisk signifies a wildcard match, and it may appear as
the option name itself (i.e., it matches any option), or an
asterisk may appear at the end of the option name only if
the asterisk follows either a &quot;.&quot; or
&quot;=&quot;.</p>

<p>For example: &quot;*&quot; or &quot;-Dfoo.*&quot; or
&quot;-Da.b.c=*&quot; is valid, &quot;*foo&quot; or
&quot;-Da*b&quot; or &quot;ab*&quot; is not.</p>

<p>Policy file for rmid When granting rmid permission to
execute various commands and options, the permissions
ExecPermission and ExecOptionPermis- sion need to be granted
universally (i.e., granted to all code sources). It is safe
to grant these permissions universally because only rmid
checks these permissions.</p>

<p>An example policy file that grants various execute
permissions to rmid is:</p>

<p>grant { permission com.sun.rmi.rmid.ExecPermission
&quot;/files/apps/java/jdk1.2.2/solaris/bin/java&quot;;</p>

<p>permission com.sun.rmi.rmid.ExecPermission
&quot;/files/apps/java/jdk1.2.2/solaris/bin/java_g&quot;;</p>

<p>permission com.sun.rmi.rmid.ExecPermission
&quot;/files/apps/rmidcmds/*&quot;;</p>

<p>permission com.sun.rmi.rmid.ExecOptionPermission
&quot;-Djava.security.policy=/files/policies/group.policy&quot;;</p>

<p>permission com.sun.rmi.rmid.ExecOptionPermission
&quot;-Djava.security.debug=*&quot;;</p>

<p>permission com.sun.rmi.rmid.ExecOptionPermission
&quot;-Dsun.rmi.*&quot;; };</p>

<p>The first two permissions granted allow rmid to execute
the 1.2.2 version of the java and java_g commands, specified
by their explicit path names. Note that by default, the
version of the java command found in java.home is used (the
same one that rmid uses), and does not need to be specified
in the policy file. The third permission allows rmid to
execute any command in the directory
/files/apps/rmidcmds.</p>

<p>The fourth permission granted, an ExecOptionPermission,
allows rmid to launch an activation group that defines the
security policy file to be /files/policies/group.policy. The
next permission allows the java.security.debug property to
be used by an activation group. The last permission allows
any property in the sun.rmi property name hierarchy to be
used by activation groups.</p>

<p>To start rmid with a policy file, the
java.security.policy property needs to be specified on rmid
s command line, for example:</p>

<p>rmid -J-Djava.security.policy=rmid.policy</p>

<p>*</p>

<p>* &lt;policyClassName&gt;</p>

<p>If the default behavior is not flexible enough, an
administrator can provide, when starting rmid, the name of a
class whose checkExecCom- mand method is executed in order
to check commands to be executed by rmid.</p>

<p>The policyClassName specifies a public class with a
public, no-argu- ment constructor and an implementation of
the following checkExec- Command method:</p>

<p>public void checkExecCommand(ActivationGroupDesc desc,
String[] command) throws SecurityException;</p>

<p>Before launching an activation group, rmid calls the
policys check- ExecCommand method, passing it the activation
group descriptor and an array containing the complete
command to launch the activation group. If the
checkExecCommand throws a SecurityException, rmid will not
launch the activation group and an ActivationException will
be thrown to the caller attempting to activate the
object.</p>

<p>* none</p>

<p>If the sun.rmi.activation.execPolicy property value is
&quot;none&quot;, then rmid will not perform any validation
of commands to launch activa- tion groups.</p>

<p>-log dir Specifies the name of the directory the
activation system daemon uses to write its database and
associated information. The log directory defaults to
creating a directory, log, in the directory in which the
rmid command was executed.</p>

<p>-port port Specifies the port rmids registry uses. The
activation system dae- mon binds the ActivationSystem, with
the name java.rmi.activa- tion.ActivationSystem, in this
registry. Thus, the ActivationSystem on the local machine
can be obtained using the following Nam- ing.lookup method
call:</p>

<p>import java.rmi.*; import java.rmi.activation.*;</p>

<p>ActivationSystem system; system = (ActivationSystem)
Naming.lookup(&quot;//:port/java.rmi.activation.ActivationSystem&quot;);</p>

<p>-stop Stops the current invocation of rmid, for a port
specified by the -port option. If no port is specified, it
will stop the rmid running on port 1098.</p>

<p>ENVIRONMENT VARIABLES CLASSPATH Used to provide the
system a path to user-defined classes. Directo- ries are
separated by colons. For example:</p>

<p>.:/usr/local/java/classes</p>

<p>SEE ALSO rmic, CLASSPATH, java</p>

<p>05 Aug 2006 rmid(1)</p>
<hr>
</body>
</html>
