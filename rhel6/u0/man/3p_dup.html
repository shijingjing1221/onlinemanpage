<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 21:58:06 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>DUP(3P) POSIX Programmer s Manual DUP(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME dup, dup2 - duplicate an open file descriptor</p>

<p>SYNOPSIS #include &lt;unistd.h&gt;</p>

<p>int dup(int fildes); int dup2(int fildes, int
fildes2);</p>

<p>DESCRIPTION The dup() and dup2() functions provide an
alternative interface to the service provided by fcntl()
using the F_DUPFD command. The call:</p>

<p>fid = dup(fildes);</p>

<p>shall be equivalent to:</p>

<p>fid = fcntl(fildes, F_DUPFD, 0);</p>

<p>The call:</p>

<p>fid = dup2(fildes, fildes2);</p>

<p>shall be equivalent to:</p>

<p>close(fildes2); fid = fcntl(fildes, F_DUPFD,
fildes2);</p>

<p>except for the following:</p>

<p>* If fildes2 is less than 0 or greater than or equal to
{OPEN_MAX}, dup2() shall return -1 with errno set to
[EBADF].</p>

<p>* If fildes is a valid file descriptor and is equal to
fildes2, dup2() shall return fildes2 without closing it.</p>

<p>* If fildes is not a valid file descriptor, dup2() shall
return -1 and shall not close fildes2.</p>

<p>* The value returned shall be equal to the value of
fildes2 upon suc- cessful completion, or -1 upon
failure.</p>

<p>RETURN VALUE Upon successful completion a non-negative
integer, namely the file descriptor, shall be returned;
otherwise, -1 shall be returned and errno set to indicate
the error.</p>

<p>ERRORS The dup() function shall fail if:</p>

<p>EBADF The fildes argument is not a valid open file
descriptor.</p>

<p>EMFILE The number of file descriptors in use by this
process would exceed {OPEN_MAX}.</p>

<p>The dup2() function shall fail if:</p>

<p>EBADF The fildes argument is not a valid open file
descriptor or the argument fildes2 is negative or greater
than or equal to {OPEN_MAX}.</p>

<p>EINTR The dup2() function was interrupted by a
signal.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Redirecting Standard Output to a File The
following example closes standard output for the current
processes, re-assigns standard output to go to the file
referenced by pfd, and closes the original file descriptor
to clean up.</p>

<p>#include &lt;unistd.h&gt; ... int pfd; ... close(1);
dup(pfd); close(pfd); ...</p>

<p>Redirecting Error Messages The following example
redirects messages from stderr to stdout.</p>

<p>#include &lt;unistd.h&gt; ... dup2(1, 2); ...</p>

<p>APPLICATION USAGE None.</p>

<p>RATIONALE The dup() and dup2() functions are redundant.
Their services are also provided by the fcntl() function.
They have been included in this vol- ume of IEEE Std
1003.1-2001 primarily for historical reasons, since many
existing applications use them.</p>

<p>While the brief code segment shown is very similar in
behavior to dup2(), a conforming implementation based on
other functions defined in this volume of IEEE Std
1003.1-2001 is significantly more complex. Least obvious is
the possible effect of a signal-catching function that could
be invoked between steps and allocate or deallocate file
descrip- tors. This could be avoided by blocking
signals.</p>

<p>The dup2() function is not marked obsolescent because it
presents a type-safe version of functionality provided in a
type-unsafe version by fcntl(). It is used in the POSIX Ada
binding.</p>

<p>The dup2() function is not intended for use in critical
regions as a synchronization mechanism.</p>

<p>In the description of [EBADF], the case of fildes being
out of range is covered by the given case of fildes not
being valid. The descriptions for fildes and fildes2 are
different because the only kind of invalid- ity that is
relevant for fildes2 is whether it is out of range; that is,
it does not matter whether fildes2 refers to an open file
when the dup2() call is made.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO close(), fcntl(), open(), the Base Definitions
volume of IEEE Std 1003.1-2001, &lt;unistd.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 DUP(3P)</p>
<hr>
</body>
</html>
