<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:14:38 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SDL_PixelFormat(3) SDL API Reference
SDL_PixelFormat(3)</p>

<p>NAME SDL_PixelFormat - Stores surface format
information</p>

<p>STRUCTURE DEFINITION typedef struct SDL_PixelFormat {
SDL_Palette *palette; Uint8 BitsPerPixel; Uint8
BytesPerPixel; Uint8 Rloss, Gloss, Bloss, Aloss; Uint8
Rshift, Gshift, Bshift, Ashift; Uint32 Rmask, Gmask, Bmask,
Amask; Uint32 colorkey; Uint8 alpha; } SDL_PixelFormat;</p>

<p>STRUCTURE DATA palette Pointer to the palette, or NULL
if the BitsPer- Pixel&gt;8</p>

<p>BitsPerPixel The number of bits used to represent each
pixel in a surface. Usually 8, 16, 24 or 32.</p>

<p>BytesPerPixel The number of bytes used to represent each
pixel in a surface. Usually one to four.</p>

<p>[RGBA]mask Binary mask used to retrieve individual color
val- ues</p>

<p>[RGBA]loss Precision loss of each color component
(2^[RGBA]loss)</p>

<p>[RGBA]shift Binary left shift of each color component in
the pixel value</p>

<p>colorkey Pixel value of transparent pixels</p>

<p>alpha Overall surface alpha value</p>

<p>DESCRIPTION A SDL_PixelFormat describes the format of
the pixel data stored at the pixels field of a SDL_Surface.
Every surface stores a SDL_PixelFormat in the format
field.</p>

<p>If you wish to do pixel level modifications on a
surface, then under- standing how SDL stores its color
information is essential.</p>

<p>8-bit pixel formats are the easiest to understand. Since
its an 8-bit format, we have 8 BitsPerPixel and 1
BytesPerPixel. Since BytesPerPixel is 1, all pixels are
represented by a Uint8 which contains an index into
palette-&gt;colors. So, to determine the color of a pixel in
a 8-bit surface: we read the color index from
surface-&gt;pixels and we use that index to read the
SDL_Color structure from surface-&gt;for-
mat-&gt;palette-&gt;colors. Like so:</p>

<p>SDL_Surface *surface; SDL_PixelFormat *fmt; SDL_Color
*color; Uint8 index;</p>

<p>. .</p>

<p>/* Create surface */ . . fmt=surface-&gt;format;</p>

<p>/* Check the bitdepth of the surface */
if(fmt-&gt;BitsPerPixel!=8){ fprintf(stderr, &quot;Not an
8-bit surface. &quot;); return(-1); }</p>

<p>/* Lock the surface */ SDL_LockSurface(surface);</p>

<p>/* Get the topleft pixel */ index=*(Uint8
*)surface-&gt;pixels;
color=fmt-&gt;palette-&gt;colors[index];</p>

<p>/* Unlock the surface */ SDL_UnlockSurface(surface);
printf(&quot;Pixel Color-&gt; Red: %d, Green: %d, Blue: %d.
Index: %d &quot;, color-&gt;r, color-&gt;g, color-&gt;b,
index); . .</p>

<p>Pixel formats above 8-bit are an entirely different
experience. They are considered to be &quot;TrueColor&quot;
formats and the color information is stored in the pixels
themselves, not in a palette. The mask, shift and loss
fields tell us how the color information is encoded. The
mask fields allow us to isolate each color component, the
shift fields tell us the number of bits to the right of each
component in the pixel value and the loss fields tell us the
number of bits lost from each component when packing 8-bit
color component in a pixel.</p>

<p>/* Extracting color components from a 32-bit color value
*/ SDL_PixelFormat *fmt; SDL_Surface *surface; Uint32 temp,
pixel; Uint8 red, green, blue, alpha; . . .
fmt=surface-&gt;format; SDL_LockSurface(surface);
pixel=*((Uint32*)surface-&gt;pixels);
SDL_UnlockSurface(surface);</p>

<p>/* Get Red component */ temp=pixel&amp;fmt-&gt;Rmask; /*
Isolate red component */ temp=temp&gt;&gt;fmt-&gt;Rshift;/*
Shift it down to 8-bit */ temp=temp&lt;&lt;fmt-&gt;Rloss; /*
Expand to a full 8-bit number */ red=(Uint8)temp;</p>

<p>/* Get Green component */ temp=pixel&amp;fmt-&gt;Gmask;
/* Isolate green component */
temp=temp&gt;&gt;fmt-&gt;Gshift;/* Shift it down to 8-bit */
temp=temp&lt;&lt;fmt-&gt;Gloss; /* Expand to a full 8-bit
number */ green=(Uint8)temp;</p>

<p>/* Get Blue component */ temp=pixel&amp;fmt-&gt;Bmask;
/* Isolate blue component */
temp=temp&gt;&gt;fmt-&gt;Bshift;/* Shift it down to 8-bit */
temp=temp&lt;&lt;fmt-&gt;Bloss; /* Expand to a full 8-bit
number */ blue=(Uint8)temp;</p>

<p>/* Get Alpha component */ temp=pixel&amp;fmt-&gt;Amask;
/* Isolate alpha component */
temp=temp&gt;&gt;fmt-&gt;Ashift;/* Shift it down to 8-bit */
temp=temp&lt;&lt;fmt-&gt;Aloss; /* Expand to a full 8-bit
number */ alpha=(Uint8)temp;</p>

<p>printf(&quot;Pixel Color -&gt; R: %d, G: %d, B: %d, A:
%d &quot;, red, green, blue, alpha); . . .</p>

<p>SEE ALSO SDL_Surface, SDL_MapRGB</p>

<p>SDL Tue 11 Sep 2001, 23:01 SDL_PixelFormat(3)</p>
<hr>
</body>
</html>
