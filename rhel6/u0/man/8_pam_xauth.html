<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:09:14 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PAM_XAUTH(8) Linux-PAM Manual PAM_XAUTH(8)</p>

<p>NAME pam_xauth - PAM module to forward xauth keys
between users</p>

<p>SYNOPSIS pam_xauth.so [debug] [xauthpath=/path/to/xauth]
[systemuser=UID] [targetuser=UID]</p>

<p>DESCRIPTION The pam_xauth PAM module is designed to
forward xauth keys (sometimes referred to as
&quot;cookies&quot;) between users.</p>

<p>Without pam_xauth, when xauth is enabled and a user uses
the su(1) command to assume another user&acute;s privileges,
that user is no longer able to access the original
user&acute;s X display because the new user does not have
the key needed to access the display. pam_xauth solves the
problem by forwarding the key from the user running su (the
source user) to the user whose identity the source user is
assuming (the target user) when the session is created, and
destroying the key when the session is torn down.</p>

<p>This means, for example, that when you run su(1) from an
xterm session, you will be able to run X programs without
explicitly dealing with the xauth(1) xauth command or
~/.Xauthority files.</p>

<p>pam_xauth will only forward keys if xauth can list a key
connected to the $DISPLAY environment variable.</p>

<p>Primitive access control is provided by ~/.xauth/export
in the invoking user&acute;s home directory and
~/.xauth/import in the target user&acute;s home
directory.</p>

<p>If a user has a ~/.xauth/import file, the user will only
receive cookies from users listed in the file. If there is
no ~/.xauth/import file, the user will accept cookies from
any other user.</p>

<p>If a user has a .xauth/export file, the user will only
forward cookies to users listed in the file. If there is no
~/.xauth/export file, and the invoking user is not root, the
user will forward cookies to any other user. If there is no
~/.xauth/export file, and the invoking user is root, the
user will not forward cookies to other users.</p>

<p>Both the import and export files support wildcards (such
as *). Both the import and export files can be empty,
signifying that no users are allowed.</p>

<p>OPTIONS debug Print debug information.</p>

<p>xauthpath=/path/to/xauth Specify the path the xauth
program (it is expected in /usr/X11R6/bin/xauth,
/usr/bin/xauth, or /usr/bin/X11/xauth by default).</p>

<p>systemuser=UID Specify the highest UID which will be
assumed to belong to a &quot;system&quot; user. pam_xauth
will refuse to forward credentials to users with UID less
than or equal to this number, except for root and the
&quot;targetuser&quot;, if specified.</p>

<p>targetuser=UID Specify a single target UID which is
exempt from the systemuser check.</p>

<p>MODULE TYPES PROVIDED Only the session type is
provided.</p>

<p>RETURN VALUES PAM_BUF_ERR Memory buffer error.</p>

<p>PAM_PERM_DENIED Permission denied by import/export
file.</p>

<p>PAM_SESSION_ERR Cannot determine user name, UID or
access users home directory.</p>

<p>PAM_SUCCESS Success.</p>

<p>PAM_USER_UNKNOWN User not known.</p>

<p>EXAMPLES Add the following line to /etc/pam.d/su to
forward xauth keys between users when calling su:</p>

<p>session optional pam_xauth.so</p>

<p>IMPLEMENTATION DETAILS pam_xauth will work only if it is
used from a setuid application in which the getuid() call
returns the id of the user running the application, and for
which PAM can supply the name of the account that the user
is attempting to assume. The typical application of this
type is su(1). The application must call both
pam_open_session() and pam_close_session() with the ruid set
to the uid of the calling user and the euid set to root, and
must have provided as the PAM_USER item the name of the
target user.</p>

<p>pam_xauth calls xauth(1) as the source user to extract
the key for $DISPLAY, then calls xauth as the target user to
merge the key into the a temporary database and later remove
the database.</p>

<p>pam_xauth cannot be told to not remove the keys when the
session is closed.</p>

<p>FILES ~/.xauth/import XXX</p>

<p>~/.xauth/export XXX</p>

<p>SEE ALSO pam.conf(5), pam.d(5), pam(8)</p>

<p>AUTHOR pam_xauth was written by Nalin Dahyabhai
&lt;nalin@redhat.com&gt;, based on original version by
Michael K. Johnson &lt;johnsonm@redhat.com&gt;.</p>

<p>Linux-PAM Manual 06/16/2009 PAM_XAUTH(8)</p>
<hr>
</body>
</html>
