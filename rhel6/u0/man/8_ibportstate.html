<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:04:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IBPORTSTATE(8) OpenIB Diagnostics IBPORTSTATE(8)</p>

<p>NAME ibportstate - handle port (physical) state and link
speed of an Infini- Band port</p>

<p>SYNOPSIS ibportstate [-d(ebug)] [-e(rr_show)]
[-v(erbose)] [-D(irect)] [-G(uid)] [-s smlid] [-V(ersion)]
[-C ca_name] [-P ca_port] [-t(imeout) time- out_ms]
[-h(elp)] &lt;dest dr_path|lid|guid&gt; &lt;portnum&gt;
[&lt;op&gt;]</p>

<p>DESCRIPTION ibportstate allows the port state and port
physical state of an IB port to be queried (in addition to
link width and speed being validated rel- ative to the peer
port when the port queried is a switch port), or a switch
port to be disabled, enabled, or reset. It also allows the
link speed/width enabled on any IB port to be adjusted.</p>

<p>OPTIONS op Port operations allowed supported ops:
enable, disable, reset, speed, width, query Default is
query</p>

<p>ops enable, disable, and reset are only allowed on
switch ports (An error is indicated if attempted on CA or
router ports) speed and width ops are allowed on any port
speed values are legal values for PortInfo:LinkSpeedEnabled
(An error is indicated if PortInfo:LinkSpeedSupported does
not support this setting) width values are legal values for
PortInfo:LinkWidthEnabled (An error is indicated if
PortInfo:LinkWidthSupported does not support this setting)
(NOTE: Speed and width changes are not effected until the
port goes through link renegotiation) query also validates
port characteristics (link width and speed) based on the
peer port. This checking is done when the port queried is a
switch port as it relies on combined routing (an initial LID
route with directed routing to the peer) which can only be
done on a switch. This peer port validation feature of query
op requires LID routing to be functioning in the subnet.</p>

<p>COMMON OPTIONS Most OpenIB diagnostics take the
following common flags. The exact list of supported flags
per utility can be found in the usage message and can be
shown using the util_name -h syntax.</p>

<p># Debugging flags</p>

<p>-d raise the IB debugging level. May be used several
times (-ddd or -d -d -d).</p>

<p>-e show send and receive errors (timeouts and
others)</p>

<p>-h show the usage message</p>

<p>-v increase the application verbosity level. May be used
several times (-vv or -v -v -v)</p>

<p>-V show the version info.</p>

<p># Addressing flags</p>

<p>-D use directed path address arguments. The path is a
comma separated list of out ports. Examples: &quot;0&quot; #
self port &quot;0,1,2,1,4&quot; # out via port 1, then 2,
...</p>

<p>-G use GUID address argument. In most cases, it is the
Port GUID. Example: &quot;0x08f1040023&quot;</p>

<p>-s &lt;smlid&gt; use smlid as the target lid for SM/SA
queries.</p>

<p># Other common flags:</p>

<p>-C &lt;ca_name&gt; use the specified ca_name.</p>

<p>-P &lt;ca_port&gt; use the specified ca_port.</p>

<p>-t &lt;timeout_ms&gt; override the default timeout for
the solicited mads.</p>

<p>Multiple CA/Multiple Port Support</p>

<p>When no IB device or port is specified, the port to use
is selected by the following criteria:</p>

<p>1. the first port that is ACTIVE.</p>

<p>2. if not found, the first port that is UP (physical
link up).</p>

<p>If a port and/or CA name is specified, the user request
is attempted to be fulfilled, and will fail if it is not
possible.</p>

<p>EXAMPLES ibportstate 3 1 disable # by lid</p>

<p>ibportstate -G 0x2C9000100D051 1 enable # by guid</p>

<p>ibportstate -D 0 1 # (query) by direct route</p>

<p>ibportstate 3 1 reset # by lid</p>

<p>ibportstate 3 1 speed 1 # by lid</p>

<p>ibportstate 3 1 width 1 # by lid</p>

<p>AUTHOR Hal Rosenstock
&lt;hal.rosenstock@gmail.com&gt;</p>

<p>OpenIB September 8, 2009 IBPORTSTATE(8)</p>
<hr>
</body>
</html>
