<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:08:35 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_CTDB(7) OCF resource agents
OCF_HEARTBEAT_CTDB(7)</p>

<p>NAME ocf_heartbeat_CTDB - CTDB Resource Agent</p>

<p>SYNOPSIS CTDB [start | stop | monitor | meta-data |
validate-all]</p>

<p>DESCRIPTION This resource agent manages CTDB, allowing
one to use Clustered Samba in a Linux-HA/Pacemaker cluster.
You need a shared filesystem (e.g. OCFS2) on which CTDB lock
and Samba state will be stored. Configure shares in smb.conf
on all nodes, and create /etc/ctdb/nodes containing a list
of private IP addresses of each node in the cluster.
Configure this RA as a clone, and it will take care of the
rest. For more information see
http://linux-ha.org/wiki/CTDB_(resource_agent)</p>

<p>SUPPORTED PARAMETERS ctdb_recovery_lock The location of
a shared lock file, common across all nodes. This must be on
shared storage, e.g.: /shared-fs/samba/ctdb.lock (required,
string, no default)</p>

<p>smb_private_dir The directory for smbd to use for
storing such files as smbpasswd and secrets.tdb. This must
be on shared storage, e.g.: /shared-fs/samba/private
(required, string, no default)</p>

<p>ctdb_config_dir The directory containing various CTDB
configuration files. The &quot;nodes&quot; and
&quot;notify.sh&quot; scripts are expected to be in this
directory, as is the &quot;events.d&quot; subdirectory.
(optional, string, default /etc/ctdb)</p>

<p>ctdb_binary Full path to the CTDB binary. (optional,
string, default /usr/bin/ctdb)</p>

<p>ctdbd_binary Full path to the CTDB cluster daemon
binary. (optional, string, default /usr/sbin/ctdbd)</p>

<p>ctdb_socket Full path to the domain socket that ctdbd
will create, used for local clients to attach and
communicate with the ctdb daemon. (optional, string, default
/var/lib/ctdb/ctdb.socket)</p>

<p>ctdb_dbdir The directory to put the local CTDB database
files in. Persistent database files will be put in
ctdb_dbdir/persistent. (optional, string, default
/var/lib/ctdb)</p>

<p>ctdb_logfile Full path to log file. To log to syslog
instead, use the value &quot;syslog&quot;. (optional,
string, default /var/log/ctdb/log.ctdb)</p>

<p>ctdb_debuglevel What debug level to run at (0-10).
Higher means more verbose. (optional, integer, default
2)</p>

<p>smb_conf Path to default samba config file. (optional,
string, default /etc/samba/smb.conf)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
90.</p>

<p>stop Stops the resource. Suggested minimum timeout:
100.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 20. Suggested interval: 10.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 30.</p>

<p>EXAMPLE The following is an example configuration for a
CTDB resource using the crm(8) shell:</p>

<p>primitive example_CTDB ocf:heartbeat:CTDB params
ctdb_recovery_lock=string smb_private_dir=string op monitor
timeout=&quot;20&quot; interval=&quot;10&quot;
depth=&quot;0&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/CTDB_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>resource-agents 1.0.3 07/21/2010
OCF_HEARTBEAT_CTDB(7)</p>
<hr>
</body>
</html>
