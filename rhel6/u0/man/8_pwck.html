<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:12:21 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PWCK(8) System Management Commands PWCK(8)</p>

<p>NAME pwck - verify integrity of password files</p>

<p>SYNOPSIS pwck [-q] [-s] [passwd [ shadow ]]</p>

<p>pwck [-q] [-r] [passwd [ shadow ]]</p>

<p>DESCRIPTION The pwck command verifies the integrity of
the users and authentication information. It checks that all
entries in /etc/passwd and /etc/shadow have the proper
format and contain valid data. The user is prompted to
delete entries that are improperly formatted or which have
other uncorrectable errors.</p>

<p>Checks are made to verify that each entry has:</p>

<p>&middot; the correct number of fields</p>

<p>&middot; a unique and valid user name</p>

<p>&middot; a valid user and group identifier</p>

<p>&middot; a valid primary group</p>

<p>&middot; a valid home directory</p>

<p>&middot; a valid login shell</p>

<p>shadow checks are enabled when a second file parameter
is specified or when /etc/shadow exists on the system.</p>

<p>These checks are the following:</p>

<p>&middot; every passwd entry has a matching shadow entry,
and every shadow entry has a matching passwd entry</p>

<p>&middot; passwords are specified in the shadowed
file</p>

<p>&middot; shadow entries have the correct number of
fields</p>

<p>&middot; shadow entries are unique in shadow</p>

<p>&middot; the last password changes are not in the
future</p>

<p>The checks for correct number of fields and unique user
name are fatal. If the entry has the wrong number of fields,
the user will be prompted to delete the entire line. If the
user does not answer affirmatively, all further checks are
bypassed. An entry with a duplicated user name is prompted
for deletion, but the remaining checks will still be made.
All other errors are warning and the user is encouraged to
run the usermod command to correct the error.</p>

<p>The commands which operate on the /etc/passwd file are
not able to alter corrupted or duplicated entries. pwck
should be used in those circumstances to remove the
offending entry.</p>

<p>OPTIONS The options which apply to the pwck command
are:</p>

<p>-q Report errors only. The warnings which do not require
any action from the user won&acute;t be displayed.</p>

<p>-r Execute the pwck command in read-only mode.</p>

<p>-s Sort entries in /etc/passwd and /etc/shadow by
UID.</p>

<p>By default, pwck operates on the files /etc/passwd and
/etc/shadow. The user may select alternate files with the
passwd and shadow parameters.</p>

<p>CONFIGURATION The following configuration variables in
/etc/login.defs change the behavior of this tool:</p>

<p>PASS_MAX_DAYS (number) The maximum number of days a
password may be used. If the password is older than this, a
password change will be forced. If not specified, -1 will be
assumed (which disables the restriction).</p>

<p>PASS_MIN_DAYS (number) The minimum number of days
allowed between password changes. Any password changes
attempted sooner than this will be rejected. If not
specified, -1 will be assumed (which disables the
restriction).</p>

<p>PASS_WARN_AGE (number) The number of days warning given
before a password expires. A zero means warning is given
only upon the day of expiration, a negative value means no
warning is given. If not specified, no warning will be
provided.</p>

<p>FILES /etc/group Group account information.</p>

<p>/etc/passwd User account information.</p>

<p>/etc/shadow Secure user account information.</p>

<p>EXIT VALUES The pwck command exits with the following
values:</p>

<p>0 success</p>

<p>1 invalid command syntax</p>

<p>2 one or more bad password entries</p>

<p>3 can&acute;t open password files</p>

<p>4 can&acute;t lock password files</p>

<p>5 can&acute;t update password files</p>

<p>6 can&acute;t sort password files</p>

<p>SEE ALSO group(5), grpck(8), passwd(5), shadow(5),
usermod(8).</p>

<p>System Management Commands 07/24/2009 PWCK(8)</p>
<hr>
</body>
</html>
