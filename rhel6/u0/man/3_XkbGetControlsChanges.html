<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:27:07 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>XkbGetControlsChanges(3) XKB FUNCTIONS
XkbGetControlsChanges(3)</p>

<p>NAME XkbGetControlsChanges - Updates a local copy of a
keyboard description with the changes previously noted by
one or more calls to XkbNoteCon- trolsChanges</p>

<p>SYNOPSIS XkbGetControlsChanges (Display *dpy, XkbDescPtr
xkb, XkbNameChangesPtr changes);</p>

<p>ARGUMENTS - dpy connection to X server</p>

<p>- xkb xkb-&gt;ctrls will be updated</p>

<p>- changes indicates which parts of xkb-&gt;ctrls to
update</p>

<p>DESCRIPTION Whenever a field in the controls structure
changes in the servers key- board description, the server
sends an XkbControlsNotify event to all interested
clients.To receive XkbControlsNotify events under all possi-
ble conditions, use XkbSelectEvents and pass
XkbControlsNotifyMask in both bits_to_change and
values_for_bits.</p>

<p>To receive XkbControlsNotify events only under certain
conditions, use XkbSelectEventDetails using
XkbControlsNotify as the event_type and specifying the
desired state changes in bits_to_change and val-
ues_for_bits using mask bits from Table 1.</p>

<p>Table 1 shows the actual values for the individual mask
bits used to select controls for modification and to enable
and disable the control. Note that the same mask bit is used
to specify general modifications to the parameters used to
configure the control (which), and to enable and disable the
control (enabled_ctrls). The anomalies in the table (no
&quot;ok&quot; in column) are for controls that have no
configurable attributes; and for controls that are not
boolean controls and therefore cannot be enabled or
disabled.</p>

<p>Table 1 Controls Mask Bits
--------------------------------------------------------------------------
Mask Bit which or enabled Value changed_ctrls _ctrls
--------------------------------------------------------------------------
XkbRepeatKeysMask ok ok (1L&lt;&lt;0) XkbSlowKeysMask ok ok
(1L&lt;&lt;1) XkbBounceKeysMask ok ok (1L&lt;&lt;2)
XkbStickyKeysMask ok ok (1L&lt;&lt;3) XkbMouseKeysMask ok ok
(1L&lt;&lt;4) XkbMouseKeysAccelMask ok ok (1L&lt;&lt;5)
XkbAccessXKeysMask ok ok (1L&lt;&lt;6) XkbAccessXTimeoutMask
ok ok (1L&lt;&lt;7) XkbAccessXFeedbackMask ok ok
(1L&lt;&lt;8) XkbAudibleBellMask ok (1L&lt;&lt;9)
XkbOverlay1Mask ok (1L&lt;&lt;10) XkbOverlay2Mask ok
(1L&lt;&lt;11) XkbIgnoreGroupLockMask ok (1L&lt;&lt;12)
XkbGroupsWrapMask ok (1L&lt;&lt;27) XkbInternalModsMask ok
(1L&lt;&lt;28) XkbIgnoreLockModsMask ok (1L&lt;&lt;29)
XkbPerKeyRepeatMask ok (1L&lt;&lt;30)</p>

<p>XkbControlsEnabledMask ok (1L&lt;&lt;31)
XkbAccessXOptionsMask ok ok (XkbStickyKeysMask |
XkbAccessXFeedbackMask) XkbAllBooleanCtrlsMask ok
(0x00001FFF) XkbAllControlsMask ok (0xF8001FFF)</p>

<p>The changed_ctrls field specifies the controls
components that have changed and consists of bits taken from
the masks defined in Table 10.7 with &quot;ok&quot; in the
changed_ctrls column.</p>

<p>The controls currently enabled in the server are
reported in the enabled_ctrls field. If any controls were
just enabled or disabled (that is, the contents of the
enabled_ctrls field changed), they are flagged in the
enabled_ctrl_changes field. The valid bits for these fields
are the masks listed in Table 10.7 with &quot;ok&quot; in
the enabled_ctrls column. The num_groups field reports the
number of groups bound to the key belonging to the most
number of groups and is automat- ically updated when the
keyboard mapping changes.</p>

<p>If the change was caused by a request from a client, the
keycode and event_type fields are set to zero and the
req_major and req_minor fields identify the request. The
req_major value is the same as the major extension opcode.
Otherwise, event_type is set to the type of event that
caused the change (one of KeyPress, KeyRelease, DeviceKey-
Press, DeviceKeyRelease, ButtonPress or ButtonRelease), and
req_major and req_minor are undefined. If event_type is
KeyPress, KeyRelease, DeviceKeyPress, or DeviceKeyRelease,
the keycode field is set to the key that caused the change.
If event_type is ButtonPress or ButtonRe- lease, keycode
contains the button number.</p>

<p>When a client receives an XkbControlsNotify event, it
can note the changes in a changes structure using
XkbNoteControlsChanges.</p>

<p>XkbGetControlsChanges examines the changes parameter,
queries the server for the necessary information, and copies
the results into the xkb-&gt;ctrls keyboard description. If
the ctrls field of xkb is NULL, XkbGetControlsChanges
allocates and initializes it. To free the ctrls field, use
XkbFreeControls.</p>

<p>XkbGetControlsChanges returns Success if successful and
can generate BadAlloc, BadImplementation, and BadMatch
errors.</p>

<p>RETURN VALUES Success The XkbGetControlsChanges function
returns Success if the query of the server was
successful.</p>

<p>STRUCTURES The structure for the XkbControlsNotify event
is defined as follows:</p>

<p>typedef struct { int type; / Xkb extension base event
code */ unsigned long serial; / X server serial number for
event */ Bool send_event; / True =&gt; synthetically
generated */ Display * display; / server connection where
event generated */ Time time; / server time when event
generated */ int xkb_type; / XkbCompatMapNotify */ int
device; / Xkb device ID, will not be XkbUseCoreKbd */
unsigned int changed_ctrls; / bits indicating which controls
data have changed*/ unsigned int enabled_ctrls; / controls
currently enabled in server */ unsigned int
enabled_ctrl_changes; / bits indicating enabled/disabled
controls */ int num_groups; / current number of keyboard
groups */ KeyCode keycode; / != 0 =&gt; keycode of key
causing change */ char event_type; / Type of event causing
change */ char req_major; / major event code of event
causing change */ char req_minor; / minor event code of
event causing change */ } XkbControlsNotifyEvent;</p>

<p>DIAGNOSTICS BadAlloc Unable to allocate storage</p>

<p>BadImplementation Invalid reply from server</p>

<p>BadMatch A compatible version of Xkb was not available
in the server or an argument has correct type and range, but
is otherwise invalid</p>

<p>SEE ALSO XkbFreeControls(3), XkbNoteControlsChanges(3),
XkbSelectEventDe- tails(3), XkbSelectEvents(3)</p>

<p>X Version 11 libX11 1.3 XkbGetControlsChanges(3)</p>
<hr>
</body>
</html>
