<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:16:04 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SLAPD-SOCK(5) SLAPD-SOCK(5)</p>

<p>NAME slapd-sock - Socket backend to slapd</p>

<p>SYNOPSIS /etc/openldap/slapd.conf</p>

<p>DESCRIPTION The Socket backend to slapd(8) uses an
external program to handle queries, similarly to
slapd-shell(5). However, in this case the exter- nal program
listens on a Unix domain socket. This makes it possible to
have a pool of processes, which persist between requests.
This allows multithreaded operation and a higher level of
efficiency. The external program must have been started
independently; slapd(8) itself will not start it.</p>

<p>CONFIGURATION These slapd.conf options apply to the SOCK
backend database. That is, they must follow a &quot;database
sock&quot; line and come before any subsequent
&quot;backend&quot; or &quot;database&quot; lines. Other
database options are described in the slapd.conf(5) manual
page.</p>

<p>extensions [ binddn | peername | ssf ]* Enables the
sending of additional meta-attributes with each request.
binddn: &lt;bound DN&gt; peername:
IP=&lt;address&gt;:&lt;port&gt; ssf: &lt;SSF value&gt;</p>

<p>socketpath &lt;pathname&gt; Gives the path to a Unix
domain socket to which the commands will be sent and from
which replies are received.</p>

<p>PROTOCOL The protocol is essentially the same as
slapd-shell(5) with the addi- tion of a newline to terminate
the command parameters. The following commands are sent: ADD
msgid: &lt;message id&gt; &lt;repeat { &quot;suffix:&quot;
&lt;database suffix DN&gt; }&gt; &lt;entry in LDIF
format&gt; &lt;blank line&gt;</p>

<p>BIND msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; dn:
&lt;DN&gt; method: &lt;method number&gt; credlen: &lt;length
of &lt;credentials&gt;&gt; cred: &lt;credentials&gt;
&lt;blank line&gt;</p>

<p>COMPARE msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; dn:
&lt;DN&gt; &lt;attribute&gt;: &lt;value&gt; &lt;blank
line&gt;</p>

<p>DELETE msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; dn:
&lt;DN&gt; &lt;blank line&gt;</p>

<p>MODIFY msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; dn:
&lt;DN&gt; &lt;repeat {
&lt;&quot;add&quot;/&quot;delete&quot;/&quot;replace&quot;&gt;:
&lt;attribute&gt; &lt;repeat { &lt;attribute&gt;:
&lt;value&gt; }&gt; - }&gt; &lt;blank line&gt;</p>

<p>MODRDN msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; dn:
&lt;DN&gt; newrdn: &lt;new RDN&gt; deleteoldrdn: &lt;0 or
1&gt; &lt;if new superior is specified: &quot;newSuperior:
&lt;DN&gt;&quot;&gt; &lt;blank line&gt;</p>

<p>SEARCH msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt; base:
&lt;base DN&gt; scope: &lt;0-2, see ldap.h&gt; deref:
&lt;0-3, see ldap.h&gt; sizelimit: &lt;size limit&gt;
timelimit: &lt;time limit&gt; filter: &lt;filter&gt;
attrsonly: &lt;0 or 1&gt; attrs: &lt;&quot;all&quot; or
space-separated attribute list&gt; &lt;blank line&gt;</p>

<p>UNBIND msgid: &lt;message id&gt; &lt;repeat {
&quot;suffix:&quot; &lt;database suffix DN&gt; }&gt;
&lt;blank line&gt;</p>

<p>The commands - except unbind - should output: RESULT
code: &lt;integer&gt; matched: &lt;matched DN&gt; info:
&lt;text&gt; where only RESULT is mandatory, and then close
the socket. The search RESULT should be preceded by the
entries in LDIF format, each entry followed by a blank line.
Lines starting with # or DEBUG: are ignored.</p>

<p>ACCESS CONTROL The sock backend does not honor all ACL
semantics as described in slapd.access(5). In general,
access to objects is checked by using a dummy object that
contains only the DN, so access rules that rely on the
contents of the object are not honored. In detail:</p>

<p>The add operation does not require write (=w) access to
the children pseudo-attribute of the parent entry.</p>

<p>The bind operation requires auth (=x) access to the
entry pseudo- attribute of the entry whose identity is being
assessed; auth (=x) access to the credentials is not
checked, but rather delegated to the underlying program.</p>

<p>The compare operation requires compare (=c) access to
the entry pseudo- attribute of the object whose value is
being asserted; compare (=c) access to the attribute whose
value is being asserted is not checked.</p>

<p>The delete operation does not require write (=w) access
to the children pseudo-attribute of the parent entry.</p>

<p>The modify operation requires write (=w) access to the
entry pseudo- attribute; write (=w) access to the specific
attributes that are modi- fied is not checked.</p>

<p>The modrdn operation does not require write (=w) access
to the children pseudo-attribute of the parent entry, nor to
that of the new parent, if different; write (=w) access to
the distinguished values of the naming attributes is not
checked.</p>

<p>The search operation does not require search (=s) access
to the entry pseudo_attribute of the searchBase; search (=s)
access to the attributes and values used in the filter is
not checked.</p>

<p>EXAMPLE There is an example script in the
slapd/back-sock/ directory in the OpenLDAP source tree.</p>

<p>FILES /etc/openldap/slapd.conf default slapd
configuration file</p>

<p>SEE ALSO slapd.conf(5), slapd-config(5), slapd(8).</p>

<p>AUTHOR Brian Candler</p>

<p>OpenLDAP 2.4.19 2009/10/06 SLAPD-SOCK(5)</p>
<hr>
</body>
</html>
