<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:13:56 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>sasl_auxprop(10 July 2001) sasl_auxprop(10 July
2001)</p>

<p>NAME sasl_auxprop - How to work with SASL auxiliary
properties</p>

<p>SYNOPSIS #include &lt;sasl/prop.h&gt;</p>

<p>struct propctx *prop_new(unsigned estimate)</p>

<p>int prop_dup(struct propctx *src_ctx, struct propctx
*dst_ctx)</p>

<p>int prop_request(struct propctx *ctx, const char
**names)</p>

<p>const struct propval *prop_get(struct propctx *ctx)</p>

<p>int prop_getnames(struct propctx *ctx, const char
**names, struct porpval *vals)</p>

<p>void prop_clear(struct propctx *ctx, int requests)</p>

<p>void prop_erase(struct propctx *ctx, const char
*name)</p>

<p>void prop_dispose(struct propctx **ctx)</p>

<p>int prop_format(struct propctx *ctx, const char *sep,
int seplen, char *outbuf, unsigned outmax, unsigned
*outlen)</p>

<p>int prop_set(struct propctx *ctx, const char *name,
const char *value, int vallen)</p>

<p>int prop_setvals(struct propctx *ctx, const char *name,
const char **values)</p>

<p>DESCRIPTION SASL auxiliary properties are used to obtain
properties from external sources during the authentication
process. For example, a mechanism might need to query an
LDAP server to obtain the authentication secret. The
application probably needs other information from there as
well, such as home directory or UID. The auxiliary property
interface allows the two to cooperate, and only results in a
single query against the LDAP server (or other property
sources).</p>

<p>Property lookups take place directly after user
canonicalization occurs. Therefore, all requests should be
registered with he context before that time. Note that
requests can also be registered using the
sasl_auxprop_request(3) function. Most of the functions
listed below, however, require a property context which can
be obtained by calling sasl_auxprop_getctx(3).</p>

<p>API Description struct propctx *prop_new(unsigned
estimate) Create a new property context. Probably
unnecessary for appli- cation developers to call this at any
point.</p>

<p>estimate is the estimate of storage needed total for
requests &amp; responses. A value of 0 will imply the
library default.</p>

<p>int prop_dup(struct propctx *src_ctx, struct propctx
*dst_ctx)</p>

<p>Duplicate a given property context.</p>

<p>int prop_request(struct propctx *ctx, const char
**names)</p>

<p>Add properties to the request list of a given
context.</p>

<p>names is the NULL-terminated array of property names,
and must persist until the requests are cleared or the
context is dis- posed of with a call to prop_dispose.</p>

<p>const struct propval *prop_get(struct propctx *ctx)</p>

<p>Returns a NULL-terminated array of struct propval from
the given context.</p>

<p>int prop_getnames(struct propctx *ctx, const char
**names, struct porpval *vals)</p>

<p>Fill in a (provided) array of struct propval based on a
list of property names. This implies that the vals array is
at least as long as the names array. The values that are
filled in by this call persist until next call to
prop_request, prop_clear, or prop_dispose on context. If a
name specified here was never requested, that its associated
values entry will be set to NULL.</p>

<p>Returns number of matching properties that were found,
or a SASL error code.</p>

<p>void prop_clear(struct propctx *ctx, int requests)</p>

<p>Clear values and optionally requests from a property
context.</p>

<p>requests is 1 if the requests should be cleared, 0
otherwise.</p>

<p>void prop_erase(struct propctx *ctx, const char
*name)</p>

<p>Securely erase the value of a property.</p>

<p>name is the name of the property to erase.</p>

<p>void prop_dispose(struct propctx **ctx)</p>

<p>Disposes of a property context and NULLifys the
pointer.</p>

<p>int prop_format(struct propctx *ctx, const char *sep,
int seplen, char *outbuf, unsigned outmax, unsigned
*outlen)</p>

<p>Format the requested property names into a string. This
not intended for use by the application (only by auxprop
plugins).</p>

<p>sep Is the separator to use for the string</p>

<p>outbuf Is the caller-allocated buffer of length outmax
that the resulting string will be placed in (including NUL
terminator).</p>

<p>outlen if non-NULL, will contain the length of the
resulting string (excluding NUL terminator).</p>

<p>int prop_set(struct propctx *ctx, const char *name,
const char *value, int vallen)</p>

<p>Adds a property value to the context. This is intended
for use by auxprop plugins only.</p>

<p>name is the name of the property to receive the new
value, or NULL, which implies that the value will be added
to the same property as the last call to either prop_set or
prop_setvals.</p>

<p>value is a value for the property of length vallen</p>

<p>int prop_setvals(struct propctx *ctx, const char *name,
const char **values)</p>

<p>Adds multiple values to a single property. This is
intended for use by auxprop plugins only.</p>

<p>name has the same meaning as in prop_set</p>

<p>values are a NULL-terminated array of values to be added
the property.</p>

<p>RETURN VALUE The property functions that return an int
return SASL error codes. See sasl_errors(3). Those that
return pointers will return a valid pointer on success, or
NULL on any error.</p>

<p>CONFORMING TO RFC 2222</p>

<p>SEE ALSO sasl(3), sasl_errors(3),
sasl_auxprop_request(3), sasl_aux- prop_getctx(3)</p>

<p>SASL man pages SASL sasl_auxprop(10 July 2001)</p>
<hr>
</body>
</html>
