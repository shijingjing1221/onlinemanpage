<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Sat Nov 12 22:07:52 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MSGSND(3P) POSIX Programmer s Manual MSGSND(3P)</p>

<p>PROLOG This manual page is part of the POSIX Programmer
s Manual. The Linux implementation of this interface may
differ (consult the corresponding Linux manual page for
details of Linux behavior), or the interface may not be
implemented on Linux.</p>

<p>NAME msgsnd - XSI message send operation</p>

<p>SYNOPSIS #include &lt;sys/msg.h&gt;</p>

<p>int msgsnd(int msqid, const void *msgp, size_t msgsz,
int msgflg);</p>

<p>DESCRIPTION The msgsnd() function operates on XSI
message queues (see the Base Def- initions volume of IEEE
Std 1003.1-2001, Section 3.224, Message Queue). It is
unspecified whether this function interoperates with the
realtime interprocess communication facilities defined in
Realtime .</p>

<p>The msgsnd() function shall send a message to the queue
associated with the message queue identifier specified by
msqid.</p>

<p>The application shall ensure that the argument msgp
points to a user- defined buffer that contains first a field
of type long specifying the type of the message, and then a
data portion that holds the data bytes of the message. The
structure below is an example of what this user- defined
buffer might look like:</p>

<p>struct mymsg { long mtype; /* Message type. */ char
mtext[1]; /* Message text. */ }</p>

<p>The structure member mtype is a non-zero positive type
long that can be used by the receiving process for message
selection.</p>

<p>The structure member mtext is any text of length msgsz
bytes. The argu- ment msgsz can range from 0 to a
system-imposed maximum.</p>

<p>The argument msgflg specifies the action to be taken if
one or more of the following is true:</p>

<p>* The number of bytes already on the queue is equal to
msg_qbytes; see &lt;sys/msg.h&gt;.</p>

<p>* The total number of messages on all queues system-wide
is equal to the system-imposed limit.</p>

<p>These actions are as follows:</p>

<p>* If (msgflg &amp; IPC_NOWAIT) is non-zero, the message
shall not be sent and the calling thread shall return
immediately.</p>

<p>* If (msgflg &amp; IPC_NOWAIT) is 0, the calling thread
shall suspend exe- cution until one of the following
occurs:</p>

<p>* The condition responsible for the suspension no longer
exists, in which case the message is sent.</p>

<p>* The message queue identifier msqid is removed from the
system; when this occurs, errno shall be set equal to
[EIDRM] and -1 shall be returned.</p>

<p>* The calling thread receives a signal that is to be
caught; in this case the message is not sent and the calling
thread resumes execution in the manner prescribed in
sigaction().</p>

<p>Upon successful completion, the following actions are
taken with respect to the data structure associated with
msqid; see &lt;sys/msg.h&gt;:</p>

<p>* msg_qnum shall be incremented by 1.</p>

<p>* msg_lspid shall be set equal to the process ID of the
calling pro- cess.</p>

<p>* msg_stime shall be set equal to the current time.</p>

<p>RETURN VALUE Upon successful completion, msgsnd() shall
return 0; otherwise, no mes- sage shall be sent, msgsnd()
shall return -1, and errno shall be set to indicate the
error.</p>

<p>ERRORS The msgsnd() function shall fail if:</p>

<p>EACCES Operation permission is denied to the calling
process; see XSI Interprocess Communication .</p>

<p>EAGAIN The message cannot be sent for one of the reasons
cited above and (msgflg &amp; IPC_NOWAIT) is non-zero.</p>

<p>EIDRM The message queue identifier msqid is removed from
the system.</p>

<p>EINTR The msgsnd() function was interrupted by a
signal.</p>

<p>EINVAL The value of msqid is not a valid message queue
identifier, or the value of mtype is less than 1; or the
value of msgsz is less than 0 or greater than the
system-imposed limit.</p>

<p>The following sections are informative.</p>

<p>EXAMPLES Sending a Message The following example sends a
message to the queue identified by the msqid argument
(assuming that value has previously been set). This call
specifies that an error should be reported if no message is
available. The message size is calculated directly using the
sizeof operator.</p>

<p>#include &lt;sys/msg.h&gt; ... int result; int msqid;
struct message { long type; char text[20]; } msg;</p>

<p>msg.type = 1; strcpy(msg.text, &quot;This is message
1&quot;); ... result = msgsnd(msqid, (void *) &amp;msg,
sizeof(msg.text), IPC_NOWAIT);</p>

<p>APPLICATION USAGE The POSIX Realtime Extension defines
alternative interfaces for inter- process communication
(IPC). Application developers who need to use IPC should
design their applications so that modules using the IPC
routines described in XSI Interprocess Communication can be
easily modified to use the alternative interfaces.</p>

<p>RATIONALE None.</p>

<p>FUTURE DIRECTIONS None.</p>

<p>SEE ALSO XSI Interprocess Communication, Realtime,
mq_close(), mq_getattr(), mq_notify(), mq_open(),
mq_receive(), mq_send(), mq_setattr(), mq_unlink(),
msgctl(), msgget(), msgrcv(), sigaction(), the Base Defi-
nitions volume of IEEE Std 1003.1-2001,
&lt;sys/msg.h&gt;</p>

<p>COPYRIGHT Portions of this text are reprinted and
reproduced in electronic form from IEEE Std 1003.1, 2003
Edition, Standard for Information Technology -- Portable
Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the
Institute of Electrical and Electronics Engineers, Inc and
The Open Group. In the event of any discrepancy between this
version and the original IEEE and The Open Group Standard,
the original IEEE and The Open Group Standard is the referee
document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>

<p>IEEE/The Open Group 2003 MSGSND(3P)</p>
<hr>
</body>
</html>
