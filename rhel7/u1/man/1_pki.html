<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:13:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>pki</title>

</head>
<body>

<h1 align="center">pki</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#OPERATIONS">OPERATIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pki &minus;
Command-Line Interface for accessing Certificate System
services.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pki [CLI
options] &lt;command&gt; [command arguments]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pki</b>
provides a command-line interface allowing clients to access
various services on the Certificate System server. These
services include certificates, groups, keys, security
domains, and users.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>-c
&lt;security database password&gt;</b></p>

<p style="margin-left:22%;">Specifies the security database
password.</p>

<p style="margin-left:11%;"><b>-d &lt;security database
location&gt;</b></p>

<p style="margin-left:22%;">Specifies the security database
location (default: ~/.dogtag/nssdb).</p>

<p style="margin-left:11%;"><b>-h &lt;hostname&gt;</b></p>

<p style="margin-left:22%;">Specifies the hostname
(default: localhost).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>--help</b></p></td>
<td width="2%"></td>
<td width="53%">


<p>Prints additional help information.</p></td>
<td width="25%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>-n &lt;nickname&gt;</b></p>

<p style="margin-left:22%;">Specifies the certificate
nickname.</p>

<p style="margin-left:11%;"><b>-P &lt;protocol&gt;</b></p>

<p style="margin-left:22%;">Specifies the protocol
(default: http).</p>

<p style="margin-left:11%;"><b>-p &lt;port&gt;</b></p>

<p style="margin-left:22%;">Specifies the port (default:
8080).</p>

<p style="margin-left:11%;"><b>-U &lt;URL&gt;</b></p>

<p style="margin-left:22%;">Specifies the server URL.</p>

<p style="margin-left:11%;"><b>-u &lt;username&gt;</b></p>

<p style="margin-left:22%;">Specifies the username.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-v</b></p></td>
<td width="8%"></td>
<td width="44%">


<p>Displays verbose information.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>--version</b></p>

<p style="margin-left:22%;">Displays &rsquo;pki&rsquo; CLI
version information.</p>

<p style="margin-left:11%;"><b>-w &lt;password&gt;</b></p>

<p style="margin-left:22%;">Specifies the user
password.</p>

<h2>OPERATIONS
<a name="OPERATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To view
available commands and options, simply type <b>pki</b>. Some
commands have sub-commands. To view the sub-commands, type
<b>pki &lt;command&gt;</b>. To view each command&rsquo;s
usage, type <b>pki &lt;command&gt; --help</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Security
Database</b> <br>
The CLI uses a security database to store keys and
certificates on the client side. To create a new database
execute the following command:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -d
&lt;security database location&gt; -c &lt;security database
password&gt; client-init</b></p>

<p style="margin-left:11%; margin-top: 1em">To view
certificates in the security database:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -d
&lt;security database location&gt; -c &lt;security database
password&gt; client-cert-find</b></p>

<p style="margin-left:11%; margin-top: 1em">To import a
certificate into the security database:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -d
&lt;security database location&gt; -c &lt;security database
password&gt; -n &lt;certificate nickname&gt;
client-cert-import --cert &lt;certificate file&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To delete a
certificate from the security database:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -d
&lt;security database location&gt; -c &lt;security database
password&gt; client-cert-del &lt;certificate
nickname&gt;</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Connection</b>
<br>
By default, the CLI connects to a server running on the
localhost via the non-secure HTTP port 8080. To specify a
different server location, use the appropriate arguments to
give a different host (<b>-h</b>), port (<b>-p</b>), or
connection protocol (<b>-P</b>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -P
&lt;protocol&gt; -h &lt;hostname&gt; -p &lt;port&gt;
&lt;command&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">Alternatively,
the connection parameters can be specified as a URL:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -U
&lt;URL&gt; &lt;command&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">where the URL
is of the format
<i>&lt;protocol&gt;://&lt;hostname&gt;:&lt;port&gt;</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Authentication</b>
<br>
Some commands require authentication. These are commands
that are restricted to particular sets of users (such as
agents or admins) or those operations involving certificate
profiles that require authentication.</p>

<p style="margin-left:11%; margin-top: 1em">To execute a
command without authentication:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;command&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To authenticate
with a username and password:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -u
&lt;username&gt; -w &lt;password&gt; &lt;command&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To authenticate
with a client certificate:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki -d
&lt;security database location&gt; -c &lt;security database
password&gt; -n &lt;certificate nickname&gt;
&lt;command&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Viewing
Certificates</b> <br>
Certificates can be viewed anonymously.</p>

<p style="margin-left:11%; margin-top: 1em">To list all
certificates in the CA:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-find</b></p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to search for and list specific certificates by
adding a search filter. Use <b>pki ca-cert-find --help</b>
to see options. For example, to search based on issuance
date:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-find --issuedOnFrom 2012-06-15</b></p>

<p style="margin-left:11%; margin-top: 1em">To view a
particular certificate:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-show &lt;certificate ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Revoking
Certificates</b> <br>
Revoking, holding, or releasing a certificate must be
executed as an agent user. To revoke a certificate:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;agent authentication&gt; ca-cert-revoke &lt;certificate
ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To place a
certificate on hold temporarily:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;agent authentication&gt; ca-cert-hold &lt;certificate
ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To release a
certificate that has been placed on hold:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;agent authentication&gt; ca-cert-release-hold
&lt;certificate ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Certificate
Requests</b> <br>
To request a certificate, first generate a certificate
request in PKCS #10 or CRMF, and store this request in the
XML template file, of the profile type the request relates
to.</p>

<p style="margin-left:11%; margin-top: 1em">The list of
profiles can be viewed using the CLI command:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-request-profile-find</b></p>

<p style="margin-left:11%; margin-top: 1em">The XML
template file for a profile type can be created by calling
the ca-cert-request-profile-show CLI command. For
example:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-request-profile-show &lt;profileID&gt; --output
&lt;file to store the XML template&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">will store the
XML template of the request in the specified output
file.</p>

<p style="margin-left:11%; margin-top: 1em">Then, fill in
the values in the XML file and submit the request for
review. This can be done without authentication.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
ca-cert-request-submit &lt;request file&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">Then, an agent
needs to review the request by running the following
command:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;agent authentication&gt; ca-cert-request-review
&lt;request ID&gt; --file &lt;file to store the certificate
request&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">The certificate
request, as well as the defaults and constraints of the
enrollment profile, will be stored in the output file
provided by the --file option. The agent can examine the
file and override any values if necessary. To process the
request, enter the appropriate action when prompted:</p>

<p style="margin-left:11%; margin-top: 1em"><b>Action
(approve/reject/cancel/update/validate/assign/unassign):</b></p>

<p style="margin-left:11%; margin-top: 1em">Alternatively,
the agent can process the request in a single step with the
following command:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;agent authentication&gt; ca-cert-request-review
&lt;request ID&gt; --action &lt;action&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Group
Management Commands</b> <br>
All group commands must be executed as the subsystem
administrator. Type <b>pki &lt;subsystem&gt;-group</b> to
view all group management commands for the subsystem.</p>

<p style="margin-left:11%; margin-top: 1em">To list groups
in CA, use <b>pki ca-group-find</b>. It is possible to
select the page size to limit the number of entries
returned. To list all groups:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-find</b></p>

<p style="margin-left:11%; margin-top: 1em">To view a
particular group:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-show &lt;group
ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To add a
group:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-add &lt;group ID&gt;
--description description</b></p>

<p style="margin-left:11%; margin-top: 1em">To delete a
group:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-del &lt;group
ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To add a user
to a group:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-member-add &lt;group
ID&gt; &lt;Member ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To delete a
user from a group:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-group-member-del &lt;group
ID&gt; &lt;Member ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Security
Domain Commands <br>
pki</b> can be used to access certain information from the
security domain.</p>

<p style="margin-left:11%; margin-top: 1em">To get an
installation token (used when installing a new subsystem
within a security domain):</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;security domain admin authentication&gt;
securitydomain-get-install-token --hostname &lt;hostname&gt;
--subsystem &lt;subsystem&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To show the
contents of the security domain:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;security domain admin authentication&gt;
securitydomain-show</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>User
Management Commands</b> <br>
All user commands must be executed as the subsystem
administrator. Type <b>pki &lt;subsystem&gt;-user</b> to
view all user management commands for the subsystem.</p>

<p style="margin-left:11%; margin-top: 1em">To list users
in CA, use <b>pki ca-user-find</b>. It is possible to select
the page size to limit the size of the results. To list all
users:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-user-find</b></p>

<p style="margin-left:11%; margin-top: 1em">To view a
particular user:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-user-show &lt;user
ID&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To add a
user:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-user-add &lt;user ID&gt;
--fullName &lt;full name&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">To delete a
user:</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki
&lt;admin authentication&gt; ca-user-del &lt;user
ID&gt;</b></p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>/usr/bin/pki</i></b></p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Ade Lee
&lt;alee@redhat.com&gt;, Endi Dewata
&lt;edewata@redhat.com&gt;, and Matthew Harmsen
&lt;mharmsen@redhat.com&gt;. <b>pki</b> was written by the
Dogtag project.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (c)
2012 Red Hat, Inc. This is licensed under the GNU General
Public License, version 2 (GPLv2). A copy of this license is
available at
http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.</p>
<hr>
</body>
</html>
