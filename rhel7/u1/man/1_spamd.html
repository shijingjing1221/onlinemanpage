<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:28:34 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SPAMD</title>

</head>
<body>

<h1 align="center">SPAMD</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#PREREQUISITES">PREREQUISITES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#LICENSE">LICENSE</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">spamd &minus;
daemonized version of spamassassin</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">spamd
[options]</p>

<p style="margin-left:11%; margin-top: 1em">Options:</p>

<pre style="margin-left:11%; margin-top: 1em"> &minus;l, &minus;&minus;allow&minus;tell                  Allow learning/reporting
 &minus;c, &minus;&minus;create&minus;prefs                Create user preferences files
 &minus;C path, &minus;&minus;configpath=path        Path for default config files
 &minus;&minus;siteconfigpath=path             Path for site configs
 &minus;&minus;cf='config line'                Additional line of configuration
 &minus;d, &minus;&minus;daemonize                   Daemonize
 &minus;h, &minus;&minus;help                        Print usage message
 &minus;i [ip_or_name[:port]], &minus;&minus;listen=[ip_or_name[:port]] Listen on IP addr and port
 &minus;p port, &minus;&minus;port=port              Listen on specified port, may be overridden by &minus;i
 &minus;4, &minus;&minus;ipv4&minus;only, &minus;&minus;ipv4           Use IPv4 where applicable, disables IPv6
 &minus;6                                Use IPv6 where applicable, disables IPv4
 &minus;A host,..., &minus;&minus;allowed&minus;ips=..,..  Restrict to IP addresses which can connect
 &minus;m num, &minus;&minus;max&minus;children=num        Allow maximum num children
 &minus;&minus;min&minus;children=num                Allow minimum num children
 &minus;&minus;min&minus;spare=num                   Lower limit for number of spare children
 &minus;&minus;max&minus;spare=num                   Upper limit for number of spare children
 &minus;&minus;max&minus;conn&minus;per&minus;child=num          Maximum connections accepted by child
                                   before it is respawned
 &minus;&minus;round&minus;robin                     Use traditional prefork algorithm
 &minus;&minus;timeout&minus;tcp=secs                Connection timeout for client headers
 &minus;&minus;timeout&minus;child=secs              Connection timeout for message checks
 &minus;q, &minus;&minus;sql&minus;config                  Enable SQL config (needs &minus;x)
 &minus;Q, &minus;&minus;setuid&minus;with&minus;sql             Enable SQL config (needs &minus;x,
                                   enables use of &minus;H)
 &minus;&minus;ldap&minus;config                     Enable LDAP config (needs &minus;x)
 &minus;&minus;setuid&minus;with&minus;ldap                Enable LDAP config (needs &minus;x,
                                   enables use of &minus;H)
 &minus;&minus;virtual&minus;config&minus;dir=dir          Enable pattern based Virtual configs
                                   (needs &minus;x)
 &minus;r pidfile, &minus;&minus;pidfile             Write the process id to pidfile
 &minus;s facility, &minus;&minus;syslog=facility    Specify the syslog facility
 &minus;&minus;syslog&minus;socket=type              How to connect to syslogd
 &minus;&minus;log&minus;timestamp&minus;fmt=fmt           strftime(3) format for timestamps, may be
                                   empty to disable timestamps, or 'default'
 &minus;u username, &minus;&minus;username=username  Run as username
 &minus;g groupname, &minus;&minus;groupname=groupname  Run as groupname
 &minus;v, &minus;&minus;vpopmail                    Enable vpopmail config
 &minus;x, &minus;&minus;nouser&minus;config               Disable user config files
 &minus;&minus;auth&minus;ident                      Use ident to identify spamc user (deprecated)
 &minus;&minus;ident&minus;timeout=timeout           Timeout for ident connections
 &minus;D, &minus;&minus;debug[=areas]               Print debugging messages (for areas)
 &minus;L, &minus;&minus;local                       Use local tests only (no DNS)
 &minus;P, &minus;&minus;paranoid                    Die upon user errors
 &minus;H [dir], &minus;&minus;helper&minus;home&minus;dir[=dir] Specify a different HOME directory
 &minus;&minus;ssl                             Enable SSL on TCP connections
 &minus;&minus;ssl&minus;port port                   Override &minus;&minus;port setting for SSL connections
 &minus;&minus;ssl&minus;version sslversion          Specify SSL protocol version to use
 &minus;&minus;server&minus;key keyfile              Specify an SSL keyfile
 &minus;&minus;server&minus;cert certfile            Specify an SSL certificate
 &minus;&minus;socketpath=path                 Listen on a given UNIX domain socket
 &minus;&minus;socketowner=name                Set UNIX domain socket file's owner
 &minus;&minus;socketgroup=name                Set UNIX domain socket file's group
 &minus;&minus;socketmode=mode                 Set UNIX domain socket file's mode
 &minus;V, &minus;&minus;version                     Print version and exit</pre>


<p style="margin-left:11%; margin-top: 1em">The
&minus;&minus;listen option (or &minus;i) may be specified
multiple times, its syntax is: [ ssl: ] [
host-name-or-IP-address ] [ : port ] or an absolute path
(filename) of a Unix socket. If port is omitted it defaults
to &minus;&minus;port or to 783. Option &minus;&minus;ssl
implies a prefix &rsquo;ssl:&rsquo;. An IPv6 address should
be enclosed in square brackets, e.g. [::1]:783, an IPv4
address may be but need not be enclosed in square brackets.
An asterisk &rsquo;*&rsquo; in place of a hostname implies
an unspecified address, (&rsquo;0.0.0.0&rsquo; or
&rsquo;::&rsquo;), i.e. it binds to all interfaces. An empty
option value implies &rsquo;*&rsquo;. A default is
&rsquo;&minus;&minus;listen localhost&rsquo;, which binds to
a loopback interface only.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The purpose of
this program is to provide a daemonized version of the
spamassassin executable. The goal is improving throughput
performance for automated mail checking.</p>

<p style="margin-left:11%; margin-top: 1em">This is
intended to be used alongside <tt>&quot;spamc&quot;</tt>, a
fast, low-overhead C client program.</p>

<p style="margin-left:11%; margin-top: 1em">See the
<small>README</small> file in the <tt>&quot;spamd&quot;</tt>
directory of the SpamAssassin distribution for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">Note: Although
<tt>&quot;spamd&quot;</tt> will check per-user config files
for every message, any changes to the system-wide config
files will require either restarting spamd or forcing it to
reload itself via <b><small>SIGHUP</small></b> for the
changes to take effect.</p>

<p style="margin-left:11%; margin-top: 1em">Note: If
<tt>&quot;spamd&quot;</tt> receives a
<b><small>SIGHUP</small></b> , it internally reloads itself,
which means that it will change its pid and might not
restart at all if its environment changed (ie. if it
can&rsquo;t change back into its own directory). If you plan
to use <b><small>SIGHUP</small></b> , you should always
start <tt>&quot;spamd&quot;</tt> with the <b>&minus;r</b>
switch to know its current pid.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options of the
long form can be shortened as long as they remain
unambiguous. (i.e. <b>&minus;&minus;dae</b> can be used
instead of <b>&minus;&minus;daemonize</b>) Also, boolean
options (like <b>&minus;&minus;user&minus;config</b>) can be
negated by adding <i>no</i>
(<b>&minus;&minus;nouser&minus;config</b>), however, this is
usually unnecessary. <b><br>
&minus;l</b>, <b>&minus;&minus;allow&minus;tell</b></p>

<p style="margin-left:17%;">Allow learning and forgetting
(to a local Bayes database), reporting and revoking (to a
remote database) by spamd. The client issues a
<small>TELL</small> command to tell what type of message is
being processed and whether local (learn/forget) or remote
(report/revoke) databases should be updated.</p>

<p style="margin-left:17%; margin-top: 1em">Note that spamd
always trusts the username passed in (unless
<b>&minus;&minus;auth&minus;ident</b> is used) so clients
could maliciously learn messages for other users. (This is
not ususally a concern with an <small>SQL</small> Bayes
store as users will typically have read-write access
directly to the database, and can also use
<tt>&quot;sa&minus;learn&quot;</tt> with the <b>&minus;u</b>
option to achieve the same result.)</p>

<p style="margin-left:11%;"><b>&minus;c</b>,
<b>&minus;&minus;create&minus;prefs</b></p>

<p style="margin-left:17%;">Create user preferences files
if they don&rsquo;t exist (default: don&rsquo;t).</p>

<p style="margin-left:11%;"><b>&minus;C</b> <i>path</i>,
<b>&minus;&minus;configpath</b>=<i>path</i></p>

<p style="margin-left:17%;">Use the specified path for
locating the distributed configuration files. Ignore the
default directories (usually
<tt>&quot;/usr/share/spamassassin&quot;</tt> or
similar).</p>


<p style="margin-left:11%;"><b>&minus;&minus;siteconfigpath</b>=<i>path</i></p>

<p style="margin-left:17%;">Use the specified path for
locating site-specific configuration files. Ignore the
default directories (usually
<tt>&quot;/etc/mail/spamassassin&quot;</tt> or similar).</p>


<p style="margin-left:11%;"><b>&minus;&minus;cf=&rsquo;config
line&rsquo;</b></p>

<p style="margin-left:17%;">Add additional lines of
configuration directly from the command-line, parsed after
the configuration files are read. Multiple
<b>&minus;&minus;cf</b> arguments can be used, and each will
be considered a separate line of configuration.</p>

<p style="margin-left:11%;"><b>&minus;d</b>,
<b>&minus;&minus;daemonize</b></p>

<p style="margin-left:17%;">Detach from starting process
and run in background (daemonize).</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Print a brief help message,
then exit without further action.</p>

<p style="margin-left:11%;"><b>&minus;V</b>,
<b>&minus;&minus;version</b></p>

<p style="margin-left:17%;">Print version information, then
exit without further action.</p>

<p style="margin-left:11%;"><b>&minus;i</b>
[<i>ipaddress</i>[:&lt;port&gt;]],
<b>&minus;&minus;listen</b>[=<i>ipaddress</i>[:&lt;port&gt;]]</p>

<p style="margin-left:17%;">Additional alias names for this
option are &minus;&minus;listen&minus;ip and
&minus;&minus;ip&minus;address. Tells spamd to listen on the
specified <small>IP</small> address, defaults to a loopback
interface, i.e. <tt>&quot;&minus;&minus;listen
localhost&quot;</tt>). If no value is specified after the
switch, or if an asterisk &rsquo;*&rsquo; stands in place of
an &lt;ipaddress&gt;, spamd will listen on all interfaces
&minus; this is equivalent to address &rsquo;0.0.0.0&rsquo;
for IPv4 and to &rsquo;::&rsquo; for IPv6. You can also use
a valid hostname which will make spamd listen on all
addresses that a name resolves to. The option may be
specified multiple times. See also options &minus;4 and
&minus;6 for restricting address family to IPv4 or to IPv6.
If a port is specified it overrides for this socket the
global &minus;&minus;port (and &minus;&minus;ssl&minus;port)
setting. An IPv6 addresses should be enclosed in square
brackets, e.g. [::1]:783. For compatibility square brackets
on an IPv6 address may be omitted if a port number
specification is also omitted.</p>

<p style="margin-left:11%;"><b>&minus;p</b> <i>port</i>,
<b>&minus;&minus;port</b>=<i>port</i></p>

<p style="margin-left:17%;">Optionally specifies the port
number for the server to listen on (default: 783).</p>

<p style="margin-left:17%; margin-top: 1em">If the
<b>&minus;&minus;ssl</b> switch is used, and
<b>&minus;&minus;ssl&minus;port</b> is not supplied, then
this port will be used to accept <small>SSL</small>
connections instead of unencrypted connections. If the
<b>&minus;&minus;ssl</b> switch is used, and
<b>&minus;&minus;ssl&minus;port</b> is set, then unencrypted
connections will be accepted on the
<b>&minus;&minus;port</b> at the same time as encrypted
connections are accepted at
<b>&minus;&minus;ssl&minus;port</b>.</p>

<p style="margin-left:11%;"><b>&minus;q</b>,
<b>&minus;&minus;sql&minus;config</b></p>

<p style="margin-left:17%;">Turn on <small>SQL</small>
lookups even when per-user config files have been disabled
with <b>&minus;x</b>. this is useful for spamd hosts which
don&rsquo;t have user&rsquo;s home directories but do want
to load user preferences from an <small>SQL</small>
database.</p>

<p style="margin-left:17%; margin-top: 1em">If your spamc
client does not support sending the
<tt>&quot;User:&quot;</tt> header, like
<tt>&quot;exiscan&quot;</tt>, then the <small>SQL</small>
username used will always be <b>nobody</b>.</p>

<p style="margin-left:17%; margin-top: 1em">This inhibits
the <i>setuid()</i> behavior, so the
<tt>&quot;&minus;u&quot;</tt> option is required. If you
want the <i>setuid()</i> behaviour, use
<tt>&quot;&minus;Q&quot;</tt> or
<tt>&quot;&minus;&minus;setuid&minus;with&minus;sql&quot;</tt>
instead.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ldap&minus;config</b></p>

<p style="margin-left:17%;">Turn on <small>LDAP</small>
lookups. This is completely analog to
<tt>&quot;&minus;&minus;sql&minus;config&quot;</tt>, only it
is using an <small>LDAP</small> server.</p>

<p style="margin-left:17%; margin-top: 1em">Like
<tt>&quot;&minus;&minus;sql&minus;config&quot;</tt>, this
disables the setuid behavior, and requires
<tt>&quot;&minus;u&quot;</tt>. If you want it, use
<tt>&quot;&minus;&minus;setuid&minus;with&minus;ldap&quot;</tt>
instead.</p>

<p style="margin-left:11%;"><b>&minus;Q</b>,
<b>&minus;&minus;setuid&minus;with&minus;sql</b></p>

<p style="margin-left:17%;">Turn on <small>SQL</small>
lookups even when per-user config files have been disabled
with <b>&minus;x</b> and also setuid to the user. This is
useful for spamd hosts which want to load user preferences
from an <small>SQL</small> database but also wish to support
the use of <b>&minus;H</b> (Helper home directories.)</p>


<p style="margin-left:11%;"><b>&minus;&minus;setuid&minus;with&minus;ldap</b></p>

<p style="margin-left:17%;">Turn on <small>LDAP</small>
lookups even when per-user config files have been disabled
with <b>&minus;x</b> and also setuid to the user. This is
again completely analog to
<tt>&quot;&minus;&minus;setuid&minus;with&minus;sql&quot;</tt>,
only it is using an <small>LDAP</small> server.</p>


<p style="margin-left:11%;"><b>&minus;&minus;virtual&minus;config&minus;dir</b>=<i>pattern</i></p>

<p style="margin-left:17%;">This option specifies where
per-user preferences can be found for virtual users, for the
<b>&minus;x</b> switch. The <i>pattern</i> is used as a base
pattern for the directory name. Any of the following escapes
can be used: <br>
%u -- replaced with the full name of the current user, as
sent by <br>
spamc. <br>
%l -- replaced with the &rsquo;local part&rsquo; of the
current username. In <br>
other words, if the username is an email address, this is
the part <br>
before the &quot;@&quot; sign. <br>
%d -- replaced with the &rsquo;domain&rsquo; of the current
username. In other <br>
words, if the username is an email address, this is the part
after <br>
the &quot;@&quot; sign. <br>
%% -- replaced with a single percent sign (%).</p>

<p style="margin-left:17%; margin-top: 1em">So for example,
if <tt>&quot;/vhome/users/%u/spamassassin&quot;</tt> is
specified, and spamc sends a virtual username of
<tt>&quot;jm@example.com&quot;</tt>, the directory
<tt>&quot;/vhome/users/jm@example.com/spamassassin&quot;</tt>
will be used.</p>

<p style="margin-left:17%; margin-top: 1em">The set of
characters allowed in the virtual username for this path are
restricted to:</p>

<pre style="margin-left:17%; margin-top: 1em">        A&minus;Z a&minus;z 0&minus;9 &minus; + _ . , @ =</pre>


<p style="margin-left:17%; margin-top: 1em">All others will
be replaced by underscores (<tt>&quot;_&quot;</tt>).</p>

<p style="margin-left:17%; margin-top: 1em">This path must
be a writable directory. It will be created if it does not
already exist. If a file called <b>user_prefs</b> exists in
this directory (note: <b>not</b> in a
<tt>&quot;.spamassassin&quot;</tt> subdirectory!), it will
be loaded as the user&rsquo;s preferences. The Bayes
databases for that user will be stored in this
directory.</p>

<p style="margin-left:17%; margin-top: 1em">Note that this
<b>requires</b> that <b>&minus;x</b> is used, and cannot be
combined with <small>SQL&minus;</small> or LDAP-based
configuration.</p>

<p style="margin-left:17%; margin-top: 1em">The pattern
<b>must</b> expand to an absolute directory when spamd is
running daemonized (<b>&minus;d</b>).</p>

<p style="margin-left:17%; margin-top: 1em">Currently, use
of this without <b>&minus;u</b> is not supported. This
inhibits setuid.</p>

<p style="margin-left:11%;"><b>&minus;r</b> <i>pidfile</i>,
<b>&minus;&minus;pidfile</b>=<i>pidfile</i></p>

<p style="margin-left:17%;">Write the process
<small>ID</small> of the spamd parent to the file specified
by <i>pidfile</i>. The file will be unlinked when the parent
exits. Note that when running with the <b>&minus;u</b>
option, the file must be writable by that user.</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;vpopmail</b></p>

<p style="margin-left:17%;">Enable vpopmail config. If
specified with with <b>&minus;u</b> set to the vpopmail
user, this allows spamd to lookup/create user_prefs in the
vpopmail user&rsquo;s own maildir. This option is useful for
vpopmail virtual users who do not have an entry in the
system /etc/passwd file.</p>

<p style="margin-left:17%; margin-top: 1em">Currently, use
of this without <b>&minus;u</b> is not supported. This
inhibits setuid.</p>

<p style="margin-left:11%;"><b>&minus;s</b>
<i>facility</i>,
<b>&minus;&minus;syslog</b>=<i>facility</i></p>

<p style="margin-left:17%;">Specify the syslog facility to
use (default: mail). If <tt>&quot;stderr&quot;</tt> is
specified, output will be written to stderr. (This is useful
if you&rsquo;re running <tt>&quot;spamd&quot;</tt> under the
<tt>&quot;daemontools&quot;</tt> package.) With a
<i>facility</i> of <tt>&quot;file&quot;</tt>, all output
goes to spamd.log. <i>facility</i> is interpreted as a file
name to log to if it contains any characters except
a&minus;z and 0&minus;9. <tt>&quot;null&quot;</tt> disables
logging completely (used internally).</p>

<p style="margin-left:17%; margin-top: 1em">Examples: spamd
&minus;s mail # use syslog, facility mail (default) spamd
&minus;s ./mail # log to file ./mail spamd &minus;s stderr
2&gt;/dev/null # log to stderr, throw messages away spamd
&minus;s null # the same as above spamd &minus;s file # log
to file ./spamd.log spamd &minus;s /var/log/spamd.log # log
to file /var/log/spamd.log</p>

<p style="margin-left:17%; margin-top: 1em">If logging to a
file is enabled and that log file is rotated, the spamd
server must be restarted with a <small>SIGHUP.</small> (If
the log file is just truncated, this is not needed but still
recommended.)</p>

<p style="margin-left:17%; margin-top: 1em">Note that
logging to a file does not use locking, so you cannot
intermix logging from spamd and other processes into the
same file. If you want to mix logging like this, use syslog
instead.</p>

<p style="margin-left:17%; margin-top: 1em">If you use
syslog logging, it is essential to send a
<small>SIGHUP</small> to the spamd daemon when you restart
the syslogd daemon. (This is due to a shortcoming in
Perl&rsquo;s syslog handling, where the disappearance of the
connection to the syslogd is considered a fatal error.)</p>


<p style="margin-left:11%;"><b>&minus;&minus;syslog&minus;socket</b>=<i>type</i></p>

<p style="margin-left:17%;">Specify how spamd should send
messages to syslogd. The <i>type</i> can be any of the
socket types or logging mechanisms as accepted by the
subroutine <i>Sys::Syslog::setlogsock()</i>. Depending on a
version of Sys::Syslog and on the underlying operating
system, one of the following values (or their subset) can be
used: <tt>&quot;native&quot;</tt>,
<tt>&quot;eventlog&quot;</tt>, <tt>&quot;tcp&quot;</tt>,
<tt>&quot;udp&quot;</tt>, <tt>&quot;inet&quot;</tt>,
<tt>&quot;unix&quot;</tt>, <tt>&quot;stream&quot;</tt>,
<tt>&quot;pipe&quot;</tt>, or <tt>&quot;console&quot;</tt>.
The value <tt>&quot;eventlog&quot;</tt> is specific to Win32
events logger and requires a perl module Win32::EventLog to
be installed. For more information please consult the
Sys::Syslog documentation.</p>

<p style="margin-left:17%; margin-top: 1em">A historical
setting &minus;&minus;syslog&minus;socket=none is mapped to
&minus;&minus;syslog=stderr.</p>

<p style="margin-left:17%; margin-top: 1em">A default for
Windows platforms is <tt>&quot;none&quot;</tt>, otherwise
the default is to try <tt>&quot;unix&quot;</tt> first,
falling back to <tt>&quot;inet&quot;</tt> if perl detects
errors in its <tt>&quot;unix&quot;</tt> support.</p>

<p style="margin-left:17%; margin-top: 1em">Some platforms,
or versions of perl, are shipped with old or dysfunctional
versions of the <b>Sys::Syslog</b> module which do not
support some socket types, so you may need to set this
option explicitly. If you get error messages regarding
<b>__PATH_LOG</b> or similar spamd, try changing this
setting.</p>

<p style="margin-left:17%; margin-top: 1em">The socket
types <tt>&quot;file&quot;</tt> is used internally and
should not be specified. Use the
<tt>&quot;&minus;s&quot;</tt> switch instead.</p>


<p style="margin-left:11%;"><b>&minus;&minus;log&minus;timestamp&minus;fmt</b>=<i>format</i></p>

<p style="margin-left:17%;">The
&minus;&minus;log&minus;timestamp&minus;fmt option can
provide a <small>POSIX</small> <i>strftime</i>(3) format for
timestamps included in each logged message. Each logger
(stderr, file, syslog) has its own default value for a
timestamp format, which applies when
&minus;&minus;log&minus;timestamp&minus;fmt option is not
given, or with
&minus;&minus;log&minus;timestamp&minus;fmt=default .
Timestamps can be turned off by specifying an empty string
with this option, e.g.
&minus;&minus;log&minus;timestamp&minus;fmt=&rsquo;&rsquo;
or just &minus;&minus;log&minus;timestamp&minus;fmt= .
Typical use:
&minus;&minus;log&minus;timestamp&minus;fmt=&rsquo;%a <tt>%b
%e %H:</tt>%M:%S <tt>%Y</tt>&rsquo; (provides localized
weekday and month names in the <i>ctime</i>(3) style), or
&rsquo;%a, <tt>%e %b %Y %H:</tt>%M:%S <tt>%z</tt>
(%Z)&rsquo; for a <small>RFC 2822</small> format, or maybe
&rsquo;%Y&minus;%m&minus;%d <tt>%H:</tt>%M:%S%z&rsquo; for
an <small>ISO 8601</small> ( <small>EN 28601</small> )
format, or just &rsquo;%Y%m%dT%H%M%S&rsquo; .</p>

<p style="margin-left:11%;"><b>&minus;u</b>
<i>username</i>,
<b>&minus;&minus;username</b>=<i>username</i></p>

<p style="margin-left:17%;">Run as the named user. If this
option is not set, the default behaviour is to
<i>setuid()</i> to the user running
<tt>&quot;spamc&quot;</tt>, if <tt>&quot;spamd&quot;</tt> is
running as root.</p>

<p style="margin-left:17%; margin-top: 1em">Note:
&quot;&minus;&minus;username=root&quot; is not a valid
option. If specified, <tt>&quot;spamd&quot;</tt> will exit
with a fatal error on startup.</p>

<p style="margin-left:11%;"><b>&minus;g</b>
<i>groupname</i>,
<b>&minus;&minus;groupname</b>=<i>groupname</i></p>

<p style="margin-left:17%;">Run as the named group if
&minus;&minus;username is being used. If this option is not
set when &minus;&minus;username is used then the primary
group for the user given to &minus;&minus;username is
used.</p>

<p style="margin-left:11%;"><b>&minus;x</b>,
<b>&minus;&minus;nouser&minus;config</b>,
<b>&minus;&minus;user&minus;config</b></p>

<p style="margin-left:17%;">Turn off (on) reading of
per-user configuration files (user_prefs) from the
user&rsquo;s home directory. The default behaviour is to
read per-user configuration from the user&rsquo;s home
directory (<b>&minus;&minus;user&minus;config</b>).</p>

<p style="margin-left:17%; margin-top: 1em">This option
does not disable or otherwise influence the <small>SQL,
LDAP</small> or Virtual Config Dir settings.</p>


<p style="margin-left:11%;"><b>&minus;&minus;auth&minus;ident</b></p>

<p style="margin-left:17%;">Verify the username provided by
spamc using ident. This is only useful if connections are
only allowed from trusted hosts (because an identd that lies
is trivial to create) and if spamc <small>REALLY
SHOULD</small> be running as the user it represents.
Connections are terminated immediately if authentication
fails. In this case, spamc will pass the mail through
unchecked. Failure to connect to an ident server, and
response timeouts are considered authentication failures.
This requires that Net::Ident be installed. Deprecated.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ident&minus;timeout</b>=<i>timeout</i></p>

<p style="margin-left:17%;">Wait at most <i>timeout</i>
seconds for a response to ident queries. Ident query that
takes longer that <i>timeout</i> seconds will fail, and mail
will not be processed. Setting this to 0.0 or less results
in no timeout, which is <small>STRONGLY</small> discouraged.
The default is 5 seconds.</p>

<p style="margin-left:11%;"><b>&minus;A</b>
<i>host,...</i>,
<b>&minus;&minus;allowed&minus;ips</b>=<i>host,...</i></p>

<p style="margin-left:17%;">Specify a comma-separated list
of authorized hosts or networks which can connect to this
spamd instance. Each element of the list is either a single
<small>IP</small> addresses, or a range of <small>IP</small>
addresses in address/masklength <small>CIDR</small>
notation, or ranges of IPv4 addresses by specifying 3 or
less octets with a trailing dot. Hostnames are not
supported, only IPv4 or IPv6 addresses. This option can be
specified multiple times, or can take a list of addresses
separated by commas. IPv6 addresses may be (but need not be)
enclosed in square brackets for consistency with option
<b>&minus;&minus;listen</b>. Examples:</p>

<p style="margin-left:17%; margin-top: 1em"><b>&minus;A
10.11.12.13</b> -- only allow connections from
<tt>10.11.12.13</tt>.</p>

<p style="margin-left:17%; margin-top: 1em"><b>&minus;A
10.11.12.13,10.11.12.14</b> -- only allow connections from
<tt>10.11.12.13</tt> and <tt>10.11.12.14</tt>.</p>

<p style="margin-left:17%; margin-top: 1em"><b>&minus;A
10.200.300.0/24</b> -- allow connections from any machine in
the range <tt>&quot;10.200.300.*&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em"><b>&minus;A
10.</b> -- allow connections from any machine in the range
<tt>&quot;10.*.*.*&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em"><b>&minus;A
[2001:db8::]/32,192.0.2.0/24,::1,127.0.0.0/8</b> -- only
accept connections from specified test networks and from
localhost.</p>

<p style="margin-left:17%; margin-top: 1em">In absence of
the <b>&minus;A</b> option, connections are only accepted
from <small>IP</small> address 127.0.0.1 or ::1, i.e. from
localhost on a loopback interface.</p>

<p style="margin-left:11%;"><b>&minus;D</b>
[<i>area,...</i>], <b>&minus;&minus;debug</b>
[<i>area,...</i>]</p>

<p style="margin-left:17%;">Produce debugging output. If no
areas are listed, all debugging information is printed.
Diagnostic output can also be enabled for each area
individually; <i>area</i> is the area of the code to
instrument. For example, to produce diagnostic output on
bayes, learn, and dns, use:</p>

<pre style="margin-left:17%; margin-top: 1em">        spamassassin &minus;D bayes,learn,dns</pre>


<p style="margin-left:17%; margin-top: 1em">Higher priority
informational messages that are suitable for logging in
normal circumstances are available with an area of
&quot;info&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">For more
information about which areas (also known as channels) are
available, please see the documentation at:</p>

<pre style="margin-left:17%; margin-top: 1em">        C&lt;http://wiki.apache.org/spamassassin/DebugChannels&gt;</pre>


<p style="margin-left:11%;"><b>&minus;4</b>,
<b>&minus;&minus;ipv4only</b>,
<b>&minus;&minus;ipv4&minus;only</b>,
<b>&minus;&minus;ipv4</b></p>

<p style="margin-left:17%;">Use IPv4 where applicable, do
not use IPv6. The option affects a set of listen sockets
(see option <tt>&quot;&minus;&minus;listen&quot;</tt>) and
disables IPv6 for <small>DNS</small> tests.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;6</b></p></td>
<td width="3%"></td>
<td width="83%">


<p>Use IPv6 where applicable, do not use IPv4. The option
affects a set of listen sockets (see option
<tt>&quot;&minus;&minus;listen&quot;</tt>) and disables IPv4
for <small>DNS</small> tests. Installing a module
IO::Socket::IP is recommended if spamd is expected to
receive requests over IPv6.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;L</b>,
<b>&minus;&minus;local</b></p>

<p style="margin-left:17%;">Perform only local tests on all
mail. In other words, skip <small>DNS</small> and other
network tests. Works the same as the
<tt>&quot;&minus;L&quot;</tt> flag to
<tt>spamassassin(1)</tt>.</p>

<p style="margin-left:11%;"><b>&minus;P</b>,
<b>&minus;&minus;paranoid</b></p>

<p style="margin-left:17%;">Die on user errors (for the
user passed from spamc) instead of falling back to user
<i>nobody</i> and using the default configuration.</p>

<p style="margin-left:11%;"><b>&minus;m</b> <i>number</i> ,
<b>&minus;&minus;max&minus;children</b>=<i>number</i></p>

<p style="margin-left:17%;">This option specifies the
maximum number of children to spawn. Spamd will spawn that
number of children, then sleep in the background until a
child dies, wherein it will go and spawn a new child.</p>

<p style="margin-left:17%; margin-top: 1em">Incoming
connections can still occur if all of the children are busy,
however those connections will be queued waiting for a free
child. The minimum value is <tt>1</tt>, the default value is
<tt>5</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">Please note
that there is a <small>OS</small> specific maximum of
connections that can be queued (Try <tt>&quot;perl
&minus;MSocket &minus;e'print SOMAXCONN'&quot;</tt> to find
this maximum).</p>

<p style="margin-left:17%; margin-top: 1em">Note that if
you run too many servers for the amount of free
<small>RAM</small> available, you run the danger of hurting
performance by causing a high swap load as server processes
are swapped in and out continually.</p>


<p style="margin-left:11%;"><b>&minus;&minus;min&minus;children</b>=<i>number</i></p>

<p style="margin-left:17%;">The minimum number of children
that will be kept running. The minimum value is <tt>1</tt>,
the default value is <tt>1</tt>. If you have lots of free
<small>RAM,</small> you may want to increase this.</p>


<p style="margin-left:11%;"><b>&minus;&minus;min&minus;spare</b>=<i>number</i></p>

<p style="margin-left:17%;">The lower limit for the number
of spare children allowed to run. A spare, or idle, child is
one that is not handling a scan request. If there are too
few spare children available, a new server will be started
every second or so. The default value is <tt>1</tt>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;max&minus;spare</b>=<i>number</i></p>

<p style="margin-left:17%;">The upper limit for the number
of spare children allowed to run. If there are too many
spare children, one will be killed every second or so until
the number of idle children is in the desired range. The
default value is <tt>2</tt>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;max&minus;conn&minus;per&minus;child</b>=<i>number</i></p>

<p style="margin-left:17%;">This option specifies the
maximum number of connections each child should process
before dying and letting the master spamd process spawn a
new child. The minimum value is <tt>1</tt>, the default
value is <tt>200</tt>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;round&minus;robin</b></p>

<p style="margin-left:17%;">By default,
<tt>&quot;spamd&quot;</tt> will attempt to keep a small
number of &quot;hot&quot; child processes as busy as
possible, and keep any others as idle as possible, using
something similar to the Apache httpd server scaling
algorithm. This is accomplished by the master process
coordinating the activities of the children. This switch
will disable this scaling algorithm, and the behaviour seen
in the 3.0.x versions will be used instead, where all
processes receive an equal load and no scaling takes
place.</p>


<p style="margin-left:11%;"><b>&minus;&minus;timeout&minus;tcp</b>=<i>number</i></p>

<p style="margin-left:17%;">This option specifies the
number of seconds to wait for headers from a client (spamc)
before closing the connection. The minimum value is
<tt>1</tt>, the default value is <tt>30</tt>, and a value of
<tt>0</tt> will disable socket timeouts completely.</p>


<p style="margin-left:11%;"><b>&minus;&minus;timeout&minus;child</b>=<i>number</i></p>

<p style="margin-left:17%;">This option specifies the
number of seconds to wait for a spamd child to process or
check a message. The minimum value is <tt>1</tt>, the
default value is <tt>300</tt>, and a value of <tt>0</tt>
will disable child timeouts completely.</p>

<p style="margin-left:11%;"><b>&minus;H</b>
<i>directory</i>,
<b>&minus;&minus;helper&minus;home&minus;dir</b>=<i>directory</i></p>

<p style="margin-left:17%;">Specify that external programs
such as Razor, <small>DCC,</small> and Pyzor should have a
<small>HOME</small> environment variable set to a specific
directory. The default is to use the <small>HOME</small>
environment variable setting from the shell running spamd.
By specifying no argument, spamd will use the spamc
caller&rsquo;s home directory instead.</p>

<p style="margin-left:11%;"><b>&minus;&minus;ssl</b></p>

<p style="margin-left:17%;">Accept only <small>SSL</small>
connections on the associated port. The
<b>IO::Socket::SSL</b> perl module must be installed.</p>

<p style="margin-left:17%; margin-top: 1em">If the
<b>&minus;&minus;ssl</b> switch is used, and
<b>&minus;&minus;ssl&minus;port</b> is not supplied, then
<b>&minus;&minus;port</b> port will be used to accept
<small>SSL</small> connections instead of unencrypted
connections. If the <b>&minus;&minus;ssl</b> switch is used,
and <b>&minus;&minus;ssl&minus;port</b> is set, then
unencrypted connections will be accepted on the
<b>&minus;&minus;port</b>, at the same time as encrypted
connections are accepted at
<b>&minus;&minus;ssl&minus;port</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ssl&minus;port</b>=<i>port</i></p>

<p style="margin-left:17%;">Optionally specifies the port
number for the server to listen on for <small>SSL</small>
connections (default: whatever &minus;&minus;port uses). See
<b>&minus;&minus;ssl</b> for more details.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ssl&minus;version</b>=<i>sslversion</i></p>

<p style="margin-left:17%;">Specify the <small>SSL</small>
protocol version to use, one of <b>sslv3</b> or
<b>tlsv1</b>. The default, <b>sslv3</b>, is the most
flexible, accepting a SSLv3 or higher hello handshake, then
negotiating use of SSLv3 or TLSv1 protocol if the client can
accept it. Specifying <b>&minus;&minus;ssl&minus;version</b>
implies <b>&minus;&minus;ssl</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;server&minus;key</b>
<i>keyfile</i></p>

<p style="margin-left:17%;">Specify the <small>SSL</small>
key file to use for <small>SSL</small> connections.</p>


<p style="margin-left:11%;"><b>&minus;&minus;server&minus;cert</b>
<i>certfile</i></p>

<p style="margin-left:17%;">Specify the <small>SSL</small>
certificate file to use for <small>SSL</small>
connections.</p>


<p style="margin-left:11%;"><b>&minus;&minus;socketpath</b>
<i>pathname</i></p>

<p style="margin-left:17%;">Listen on a <small>UNIX</small>
domain socket at path <i>pathname</i>, in addition to
sockets specified with a
<tt>&quot;&minus;&minus;listen&quot;</tt> option. This
option is provided for compatibility with older versions of
spamd. Starting with version 3.4.0 the
<tt>&quot;&minus;&minus;listen&quot;</tt> option can also
take a <small>UNIX</small> domain socket as its value (an
absolute path name). Unlike
<tt>&quot;&minus;&minus;socketpath&quot;</tt>, the
<tt>&quot;&minus;&minus;listen&quot;</tt> option may be
specified multiple times if spamd needs to listen on
multiple <small>UNIX</small> or <small>INET</small> or
<small>INET6</small> sockets.</p>

<p style="margin-left:17%; margin-top: 1em">Warning: the
Perl support on <small>BSD</small> platforms for
<small>UNIX</small> domain sockets seems to have a bug
regarding paths of over 100 bytes or so (SpamAssassin bug
4380). If you see a &rsquo;could not find newly-created
<small>UNIX</small> socket&rsquo; error message, and the
path appears truncated, this may be the cause. Try using a
shorter path to the socket.</p>

<p style="margin-left:17%; margin-top: 1em">By default, use
of <b>&minus;&minus;socketpath</b> without
<b>&minus;&minus;listen</b> will inhibit <small>SSL</small>
connections and unencrypted <small>TCP</small> connections.
To add other sockets, specify them with
<b>&minus;&minus;listen</b>, e.g.
&rsquo;&minus;&minus;listen=:&rsquo; or
&rsquo;&minus;&minus;listen=*:&rsquo;</p>


<p style="margin-left:11%;"><b>&minus;&minus;socketowner</b>
<i>name</i></p>

<p style="margin-left:17%;">Set <small>UNIX</small> domain
socket to be owned by the user named <i>name</i>. Note that
this requires that spamd be started as
<tt>&quot;root&quot;</tt>, and if
<tt>&quot;&minus;u&quot;</tt> is used, that user should have
write permissions to unlink the file later, for when the
<tt>&quot;spamd&quot;</tt> server is killed.</p>


<p style="margin-left:11%;"><b>&minus;&minus;socketgroup</b>
<i>name</i></p>

<p style="margin-left:17%;">Set <small>UNIX</small> domain
socket to be owned by the group named <i>name</i>. See
<tt>&quot;&minus;&minus;socketowner&quot;</tt> for notes on
ownership and permissions.</p>


<p style="margin-left:11%;"><b>&minus;&minus;socketmode</b>
<i>mode</i></p>

<p style="margin-left:17%;">Set <small>UNIX</small> domain
socket to use the octal mode <i>mode</i>. Note that if
<tt>&quot;&minus;u&quot;</tt> is used, that user should have
write permissions to unlink the file later, for when the
<tt>&quot;spamd&quot;</tt> server is killed.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>spamc</i>(1)
<i>spamassassin</i>(1) <i>Mail::SpamAssassin::Conf</i>(3)
<i>Mail::SpamAssassin</i>(3)</p>

<h2>PREREQUISITES
<a name="PREREQUISITES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><tt>&quot;Mail::SpamAssassin&quot;</tt></p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
SpamAssassin(tm) Project
(http://spamassassin.apache.org/)</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">SpamAssassin is
distributed under the Apache License, Version 2.0, as
described in the file <tt>&quot;LICENSE&quot;</tt> included
with the distribution.</p>
<hr>
</body>
</html>
