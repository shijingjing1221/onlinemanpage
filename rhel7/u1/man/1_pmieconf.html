<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:14:12 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMIECONFPMIECONF</title>

</head>
<body>

<h1 align="center">PMIECONFPMIECONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#FILES">FILES</a><br>
<a href="#PCP ENVIRONMENT">PCP ENVIRONMENT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmieconf</b>
&minus; display and set configurable pmie rule variables</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmieconf</b>
[<b>&minus;cFv</b>] [<b>&minus;f</b> <i>file</i>]
[<b>&minus;r</b> <i>rulepath</i>] [<i>command</i>
[<i>args...</i>]]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmieconf</b>
is a utility for viewing and configuring variables from
generalized <b>pmie</b>(1) rules. The set of generalized
rules is read in from <i>rulepath</i>, and the output
<i>file</i> produced by <b>pmieconf</b> is a valid input
file for <b>pmie</b>.</p>

<p style="margin-left:11%; margin-top: 1em">A brief
description of the <b>pmieconf</b> command line options
follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>-c</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>When run from automated <b>pmie</b> setup processes,
this option is used to add a specific message and timestamp
indicating that this is the case. It is not appropriate when
using the tool interactively.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>&minus;f</b> <i>file</i></p></td>
<td width="1%"></td>
<td width="77%">


<p>Any rule modifications resulting from <b>pmieconf</b>
manipulation of variable values will be written to
<i>file</i>. The default value of <i>file</i> is dependent
on the user ID &minus; for the root user, the file
<i>$PCP_VAR_DIR/config/pmieconf/config.pmie</i> is used, for
other users the default is
<i>$HOME/.pcp/pmie/config.pmie</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>&minus;F</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Forces the <b>pmieconf</b> output <i>file</i> to be
created (or updated), after which <b>pmieconf</b>
immediately exits.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;r</b>
<i>rulepath</i></p>

<p style="margin-left:23%;">Allows the source of
generalized <b>pmie</b> rules to be changed &minus;
<i>rulepath</i> is a colon-delimited list of
<b>pmieconf</b>(5) rule files and/or subdirectories. The
default value for <i>rulepath</i> is
<i>$PCP_VAR_DIR/config/pmieconf</i>. Use of this option
overrides the <b>PMIECONF_PATH</b> environment variable
which has a similar function.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="9%"></td>
<td width="77%">


<p>Verbose mode. Additional information associated with
each rule and its associated variables will be displayed.
This is the complete list of variables which affects any
given rule (by default, global variables are not displayed
with the rule).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The
<b>pmieconf</b> <i>command</i>s allow information related to
the various rules and configurable variables to be displayed
or modified. If no <b>pmieconf</b> <i>command</i>s are
presented on the command line, <b>pmieconf</b> prompts for
<i>command</i>s interactively.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>pmieconf</b> <i>command</i> language is described here:
<b><br>
help [ { . | all | global | &lt;rule&gt; | &lt;group&gt; }
[&lt;variable&gt;] ]</b></p>

<p style="margin-left:23%;">Without arguments, the
<b>help</b> command displays the syntax for all of the
available <b>pmieconf</b> commands. With one argument, a
description of one or more of the generalized rules is
displayed. With two arguments, a description of a specific
variable relating to one or more of the generalized rules is
displayed.</p>

<p style="margin-left:11%;"><b>rules [ enabled | disabled
]</b></p>

<p style="margin-left:23%;">Display the name and short
summary for all of the generalized rules found on
<i>rulepath</i>. Each of the rule names can be used in place
of the keyword <b>&lt;rule&gt;</b> in this command syntax
description. The <b>enabled</b> and <b>disabled</b> options
can be used to filter the set of rules displayed to just
those which are enabled or disabled respectfully.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>groups</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>Display the name of all of the rule groups that were
found on <i>rulepath</i>. Each of the group names can be
used in place of the keyword <b>&lt;group&gt;</b> in this
command syntax description, which applies the command to all
rules within the rule group.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>status</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>Display status information relating to the current
<b>pmieconf</b> session, including a list of running
<b>pmie</b> processes which are currently using
<i>file</i>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>enable { . | all |
&lt;rule&gt; | &lt;group&gt; }</b></p>

<p style="margin-left:23%;">Enables the specified rule or
group of rules. An enabled rule is one which will be
included in the <b>pmie</b> configuration file generated by
<b>pmieconf</b>. Any enabled &quot;actions&quot; will be
appended to the rule&rsquo;s &quot;predicate&quot;, in a
manner conforming to the <b>pmie</b> syntax
(&quot;actions&quot; can be viewed using the <b>list
global</b> command, described below).</p>

<p style="margin-left:11%;"><b>disable { . | all |
&lt;rule&gt; | &lt;group&gt; }</b></p>

<p style="margin-left:23%;">Disables the specified rule or
group of rules. If the rule was previously enabled, it will
be removed from the <b>pmie</b> configuration file generated
by <b>pmieconf</b>, and hence no longer evaluated when
<b>pmie</b> is restarted (using <b>pmieconf</b> does not
affect any existing <b>pmie</b> processes using
<i>file</i>).</p>

<p style="margin-left:11%;"><b>list { . | all | global |
&lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]</b></p>

<p style="margin-left:23%;">Display the values for a
specific rule variable; or for all variables of a rule, a
rule group, all rules, or the global variables.</p>

<p style="margin-left:11%;"><b>modify { . | all | global |
&lt;rule&gt; | &lt;group&gt; } &lt;variable&gt;
&lt;value&gt;</b></p>

<p style="margin-left:23%;">Enable, disable, or otherwise
change the value for one or more rule variables. This value
must be consistent with the type of the variable, which can
be inferred from the format of the printed value - e.g.
strings will be enclosed in double-quotes, percentages have
the &lsquo;&lsquo;%&rsquo;&rsquo; symbol appended, etc. Note
that certain rule variables cannot be modified through
<b>pmieconf</b> &minus; &quot;predicate&quot; and
&quot;help&quot;, for example.</p>

<p style="margin-left:11%;"><b>undo { . | all | global |
&lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]</b></p>

<p style="margin-left:23%;">Applicable only to a variable
whose value has been modified - this <i>command</i> simply
reverts to the default value for the given variable.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>quit</b></p></td>
<td width="5%"></td>
<td width="77%">


<p>Save any changes made to <i>file</i> and then exit
<b>pmieconf</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>abort</b></p></td>
<td width="5%"></td>
<td width="77%">


<p>Exit <b>pmieconf</b> immediately without saving any
changes to <i>file</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Each of the
commands above can be shortened by simply using the first
character of the command name, and also
&lsquo;&lsquo;?&rsquo;&rsquo; for help.</p>

<p style="margin-left:11%; margin-top: 1em">Use of the
<b>all</b> keyword causes the command to be applied to all
of the rules. The <b>global</b> keyword refers to those
variables which are applied to every rule. Such variables
can be changed either globally or locally, for example:</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
modify global delta &quot;5 minutes&quot; <br>
pmieconf&gt; modify memory delta &quot;1 minute&quot;</p>

<p style="margin-left:11%; margin-top: 1em">causes all
rules to now be evaluated once every five minutes, except
for rules in the &quot;memory&quot; group which are to be
evaluated once per minute.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;&lsquo;.&rsquo;&rsquo; character is special to
<b>pmieconf</b> &minus; it refers to the last successfully
used value of <b>all</b>, <b>global</b>, <b>&lt;rule&gt;</b>
or <b>&lt;group&gt;</b>.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Specify that
all of the rules in the &quot;memory&quot; group should be
evaluated:</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
modify memory enabled yes</p>

<p style="margin-left:11%; margin-top: 1em">Change your
mind, and revert to using only the &quot;memory&quot; rules
which were enabled by default:</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
undo memory enabled</p>

<p style="margin-left:11%; margin-top: 1em">Specify that
notification of rules which evaluate to true should be sent
to <b>syslogd</b>(1):</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
modify global syslog_action yes</p>

<p style="margin-left:11%; margin-top: 1em">Specify that
rules in the &quot;per_cpu&quot; group should use a
different holdoff value to other rules:</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
help global holdoff <br>
rule: global [generic parameters applied to all rules] <br>
var: holdoff <br>
help: Once the predicate is true and the action is
executed,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>this variable allows suppression of further action</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>execution until the specified interval has elapsed.</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>A value of zero enables execution of the action if</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>the rule predicate is true at the next sample.
Default</p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>units are seconds and common units are
&quot;second&quot;, &quot;sec&quot;,</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>&quot;minute&quot;, &quot;min&quot; and
&quot;hour&quot;.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt;
modify per_cpu holdoff &quot;1 hour&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Lower the
threshold associated with a particular variable for a
specified rule:</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt; l
cpu.syscall predicate <br>
rule: cpu.syscall [High aggregate system call rate] <br>
predicate =</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>some_host (</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="77%">


<p>( kernel.all.syscall $hosts$ )</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="77%">


<p>&gt; $threshold$ count/sec * hinv.ncpu $hosts$</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>)</p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt; m
. threshold 7000</p>

<p style="margin-left:11%; margin-top: 1em">pmieconf&gt; l
. threshold <br>
rule: cpu.syscall [High aggregate system call rate]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>threshold = 7000</p></td></tr>
</table>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The environment
variable <b>PMIECONF_PATH</b> has a similar function to the
<b>&minus;r</b> option described above, and if set will be
used provided no <b>&minus;r</b> option is presented.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>$PCP_VAR_DIR/config/pmieconf/</i>*/*</p>

<p style="margin-left:26%;">generalized system resource
monitoring rules</p>


<p style="margin-left:11%;"><i>$PCP_VAR_DIR/config/pmieconf/config.pmie</i></p>

<p style="margin-left:26%;">default super-user settings for
system resource monitoring rules</p>


<p style="margin-left:11%;"><i>$HOME/.pcp/pmie/config.pmie</i></p>

<p style="margin-left:26%;">default user settings for
system resource monitoring rules</p>

<h2>PCP ENVIRONMENT
<a name="PCP ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Environment
variables with the prefix <b>PCP_</b> are used to
parameterize the file and directory names used by PCP. On
each installation, the file <i>/etc/pcp.conf</i> contains
the local values for these variables. The <b>$PCP_CONF</b>
variable may be used to specify an alternative configuration
file, as described in <b>pcp.conf</b>(5).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PCPIntro</b>(1),
<b>pmie</b>(1), <b>pmie_check</b>(1) and
<b>pmieconf</b>(5).</p>
<hr>
</body>
</html>
