<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:28:04 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SNMPD.CONF</title>

</head>
<body>

<h1 align="center">SNMPD.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AGENT BEHAVIOUR">AGENT BEHAVIOUR</a><br>
<a href="#ACCESS CONTROL">ACCESS CONTROL</a><br>
<a href="#SYSTEM INFORMATION">SYSTEM INFORMATION</a><br>
<a href="#ACTIVE MONITORING">ACTIVE MONITORING</a><br>
<a href="#EXTENDING AGENT FUNCTIONALITY">EXTENDING AGENT FUNCTIONALITY</a><br>
<a href="#OTHER CONFIGURATION">OTHER CONFIGURATION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLE CONFIGURATION FILE">EXAMPLE CONFIGURATION FILE</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">snmpd.conf -
configuration file for the Net-SNMP SNMP agent</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Net-SNMP
agent uses one or more configuration files to control its
operation and the management information provided. These
files (<b>snmpd.conf</b> and <b>snmpd.local.conf</b>) can be
located in one of several locations, as described in the
<i>snmp_config(5)</i> manual page.</p>

<p style="margin-left:11%; margin-top: 1em">The (perl)
application <b>snmpconf</b> can be used to generate
configuration files for the most common agent requirements.
See the <i>snmpconf(1)</i> manual page for more information,
or try running the command:</p>

<p style="margin-left:22%;">snmpconf &minus;g
basic_setup</p>

<p style="margin-left:11%; margin-top: 1em">There are a
large number of directives that can be specified, but these
mostly fall into four distinct categories:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those controlling who can access the agent</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those configuring the information that is supplied by
the agent</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those controlling active monitoring of the local
system</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those concerned with extending the functionality of the
agent.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Some directives
don&rsquo;t fall naturally into any of these four
categories, but this covers the majority of the contents of
a typical <b>snmpd.conf</b> file. A full list of recognised
directives can be obtained by running the command:</p>

<p style="margin-left:22%;">snmpd &minus;H</p>

<h2>AGENT BEHAVIOUR
<a name="AGENT BEHAVIOUR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Although most
configuration directives are concerned with the MIB
information supplied by the agent, there are a handful of
directives that control the behaviour of <i>snmpd</i>
considered simply as a daemon providing a network service.
<br>
agentaddress
[&lt;transport-specifier&gt;:]&lt;transport-address&gt;[,...]</p>

<p style="margin-left:22%;">defines a list of listening
addresses, on which to receive incoming SNMP requests. See
the section <b>LISTENING ADDRESSES</b> in the
<i>snmpd(8)</i> manual page for more information about the
format of listening addresses.</p>

<p style="margin-left:22%; margin-top: 1em">The default
behaviour is to listen on UDP port 161 on all IPv4
interfaces.</p>

<p style="margin-left:11%;">agentgroup {GROUP|#GID}</p>

<p style="margin-left:22%;">changes to the specified group
after opening the listening port(s). This may refer to a
group by name (GROUP), or a numeric group ID starting with
&rsquo;#&rsquo; (#GID).</p>

<p style="margin-left:11%;">agentuser {USER|#UID}</p>

<p style="margin-left:22%;">changes to the specified user
after opening the listening port(s). This may refer to a
user by name (USER), or a numeric user ID starting with
&rsquo;#&rsquo; (#UID).</p>

<p style="margin-left:11%;">leave_pidfile yes</p>

<p style="margin-left:22%;">instructs the agent to not
remove its pid file on shutdown. Equivalent to specifying
&quot;&minus;U&quot; on the command line.</p>

<p style="margin-left:11%;">maxGetbulkRepeats NUM</p>

<p style="margin-left:22%;">Sets the maximum number of
responses allowed for a single variable in a getbulk
request. Set to 0 to enable the default and set it to
&minus;1 to enable unlimited. Because memory is allocated
ahead of time, sitting this to unlimited is not considered
safe if your user population can not be trusted. A repeat
number greater than this will be truncated to this
value.</p>

<p style="margin-left:22%; margin-top: 1em">This is set by
default to -1.</p>

<p style="margin-left:11%;">maxGetbulkResponses NUM</p>

<p style="margin-left:22%;">Sets the maximum number of
responses allowed for a getbulk request. This is set by
default to 100. Set to 0 to enable the default and set it to
&minus;1 to enable unlimited. Because memory is allocated
ahead of time, sitting this to unlimited is not considered
safe if your user population can not be trusted.</p>

<p style="margin-left:22%; margin-top: 1em">In general, the
total number of responses will not be allowed to exceed the
maxGetbulkResponses number and the total number returned
will be an integer multiple of the number of variables
requested times the calculated number of repeats allow to
fit below this number.</p>

<p style="margin-left:22%; margin-top: 1em">Also not that
processing of maxGetbulkRepeats is handled first.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3
Configuration - Real Security</b> <br>
SNMPv3 is added flexible security models to the SNMP packet
structure so that multiple security solutions could be used.
SNMPv3 was original defined with a &quot;User-based Security
Model&quot; (USM) [RFC3414] that required maintaining a
SNMP-specific user database. This was later determined to be
troublesome to maintain and had some minor security issues.
The IETF has since added additional security models to
tunnel SNMP over SSH [RFC5592] and DTLS/TLS [RFC-to-be].
Net-SNMP contains robust support for SNMPv3/USM, SNMPv3/TLS,
and SNMPv3/DTLS. It contains partial support for SNMPv3/SSH
as well but has not been as extensively tested. It also
contains code for support for an experimental Kerberos based
SNMPv3 that never got standardized.</p>

<p style="margin-left:11%; margin-top: 1em">Hopefully more
SNMP software and devices will eventually support SNMP over
(D)TLS or SSH, but it is likely that devices with original
support for SNMP will only contain support for USM users. If
your network manager supports SNMP over (D)TLS or SNMP over
SSH we suggest you use one of these mechanisms instead of
using USM, but as always with Net-SNMP we give you the
options to pick from so you can make the choice that is best
for you.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3
generic parameters</b> <br>
These parameters are generic to all the forms of SNMPv3. The
SNMPv3 protocol defines &quot;engineIDs&quot; that uniquely
identify an agent. The string must be consistent through
time and should not change or conflict with another
agent&rsquo;s engineID. Ever. Internally, Net-SNMP by
default creates a unique engineID that is based off of the
current system time and a random number. This should be
sufficient for most users unless you&rsquo;re embedding our
agent in a device where these numbers won&rsquo;t vary
between boxes on the devices initial boot.</p>

<p style="margin-left:22%; margin-top: 1em">EngineIDs are
used both as a &quot;context&quot; for selecting information
from the device and SNMPv3 with USM uses it to create unique
entries for users in its user table.</p>

<p style="margin-left:22%; margin-top: 1em">The Net-SNMP
agent offers the following mechanisms for setting the
engineID, but again you should only use them if you know
what you&rsquo;re doing:</p>

<p style="margin-left:11%;">engineID STRING</p>

<p style="margin-left:22%;">specifies that the engineID
should be built from the given text STRING.</p>

<p style="margin-left:11%;">engineIDType 1|2|3</p>

<p style="margin-left:22%;">specifies that the engineID
should be built from the IPv4 address (1), IPv6 address (2)
or MAC address (3). Note that changing the IP address (or
switching the network interface card) may cause
problems.</p>

<p style="margin-left:11%;">engineIDNic INTERFACE</p>

<p style="margin-left:22%;">defines which interface to use
when determining the MAC address. If <i>engineIDType 3</i>
is not specified, then this directive has no effect.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
to use eth0.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3 over
TLS</b> <br>
SNMPv3 may be tunneled over TLS and DTLS. TLS runs over TCP
and DTLS is the UDP equivalent. Wes Hardaker (the founder of
Net-SNMP) performed a study and presented it at an IETF
meeting that showed that TCP based protocols are sufficient
for stable networks but quickly becomes a problem in
unstable networks with even moderate levels of packet loss
(~ 20-30%). If you are going to use TLS or DTLS, you should
use the one appropriate for your networking environment. You
should potentially turn them both on so your management
system can access either the UDP or the TCP port as
needed.</p>

<p style="margin-left:11%; margin-top: 1em">Many of the
configuration tokens described below are prefixed with a
&rsquo;[snmp]&rsquo; tag. If you place these tokens in your
snmpd.conf file, this take is required. See the
snmp_config(5) manual page for the meaning of this context
switch. <br>
[snmp] localCert &lt;specifier&gt;</p>

<p style="margin-left:22%;">This token defines the default
X.509 public key to use as the server&rsquo;s identity. It
should either be a fingerprint or a filename. To create a
public key for use, please run the
&quot;net&minus;snmp&minus;cert&quot; utility which will
help you create the required certificate.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this is the certificate in the &quot;snmpd&quot;
named certificate file.</p>

<p style="margin-left:11%;">[snmp] tlsAlgorithms
&lt;algorithms&gt;</p>

<p style="margin-left:22%;">This string will select the
algorithms to use when negotiating security during (D)TLS
session establishment. See the openssl manual page
ciphers(1) for details on the format. Examples strings
include:</p>

<p style="margin-left:22%; margin-top: 1em">DEFAULT <br>
ALL <br>
HIGH <br>
HIGH:!AES128&minus;SHA</p>

<p style="margin-left:22%; margin-top: 1em">The default
value is whatever openssl itself was configured with.</p>

<p style="margin-left:11%;">[snmp] x059CRLFile</p>

<p style="margin-left:22%;">If you are using a Certificate
Authority (CA) that publishes a Certificate Revocation List
(CRL) then this token can be used to specify the location in
the filesystem of a copy of the CRL file. Note that Net-SNMP
will not pull a CRL over http and this must be a file, not a
URL. Additionally, OpenSSL does not reload a CRL file when
it has changed so modifications or updates to the file will
only be noticed upon a restart of the snmpd agent.</p>

<p style="margin-left:11%;">certSecName PRIORITY
FINGERPRINT OPTIONS</p>

<p style="margin-left:22%;">OPTIONS can be one of
&lt;&minus;&minus;sn SECNAME | &minus;&minus;rfc822 |
&minus;&minus;dns | &minus;&minus;ip | &minus;&minus;cn |
&minus;&minus;any&gt;.</p>

<p style="margin-left:22%; margin-top: 1em">The certSecName
token will specify how to map a certificate field from the
client&rsquo;s X.509 certificate to a SNMPv3 username. Use
the &minus;&minus;sn SECNAME flag to directly specify a
securityName for a given certificate. The other flags
extract a particular component of the certificate for use as
a snmpv3 securityName. These fields are one of: A
SubjectAltName containing an rfc822 value (eg
hardaker@net&minus;snmp.org), A SubjectAltName containing a
dns name value (eg foo.net&minus;snmp.org), an IP address
(eg 192.0.2.1) or a common name &quot;Wes Hardaker&quot;.
The &minus;&minus;any flag specifies that any of the
subjecAltName fields may be used. Make sure once a
securityName has been selected that it is given
authorization via the VACM controls discussed later in this
manual page.</p>

<p style="margin-left:22%; margin-top: 1em">See the
http://www.net&minus;snmp.org/wiki/index.php/Using_DTLS web
page for more detailed instructions for setting up
(D)TLS.</p>

<p style="margin-left:11%;">trustCert &lt;specifier&gt;</p>

<p style="margin-left:22%;">For X509 to properly verify a
certificate, it should be verifiable up until a trust anchor
for it. This trust anchor is typically a CA certificate but
it could also be a self-signed certificate. The
&quot;trustCert&quot; token should be used to load specific
trust anchors into the verification engine.</p>

<p style="margin-left:11%; margin-top: 1em">SNMP over
(D)TLS requires the use of the Transport Security Model
(TSM), so read the section on the usage of the Transport
Security Model as well. Make sure when you configure the
VACM to accept connections from (D)TLS that you use the
&quot;tsm&quot; security model. E.G.:</p>

<p style="margin-left:11%; margin-top: 1em">rwuser &minus;s
tsm hardaker@net&minus;snmp.org</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3 over
SSH Support</b> <br>
To use SSH, you&rsquo;ll need to configure sshd to invoke
the sshtosnmp program as well as configure the access
control settings to allow access through the tsm security
model using the user name provided to snmpd by the ssh
transport.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3 with
the Transport Security Model (TSM)</b> <br>
The Transport Security Model [RFC5591] defines a SNMPv3
security system for use with &quot;tunneled&quot; security
protocols like TLS, DTLS and SSH. It is a very simple
security model that simply lets properly protected packets
to pass through into the snmp application. The transport is
required to pass a securityName to use to the TSM and the
TSM may optionally prefix this with a transport string (see
below). <br>
tsmUseTransportPrefix (1|yes|true|0|no|false)</p>

<p style="margin-left:22%;">If set to true, the TSM module
will take every securityName passed to it from the
transports underneath and prefix it with a string that
specifically identities the transport it came from. This is
useful to avoid securityName clashes with transports that
generate identical security names. For example, if the ssh
security transport delivered the security name of
&quot;hardaker&quot; for a SSH connection and the TLS
security transport also delivered the security name of
&quot;hardaker&quot; for a TLS connection then it would be
impossible to separate out these two users to provide
separate access control rights. With the
tsmUseTransportPrefix set to true, however, the
securityNames would be prefixed appropriately with one of:
&quot;tls:&quot;, &quot;dtls:&quot; or &quot;ssh:&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3 with
the User-based Security Model (USM)</b> <br>
SNMPv3 was originally defined using the User-Based Security
Model (USM), which contains a private list of users and keys
specific to the SNMPv3 protocol. The operational community,
however, declared it a pain to manipulate yet another
database and would prefer to use existing infrastructure. To
that end the IETF created the ISMS working group to battle
that problem, and the ISMS working group decided to tunnel
SNMP over SSH and DTLS to make use existing user and
authentication infrastructures.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SNMPv3 USM
Users</b> <br>
To use the USM based SNMPv3-specific users, you&rsquo;ll
need to create them. It is recommended you <b>use the
net&minus;snmp&minus;config command</b> to do this, but you
can also do it by directly specifying createUser directives
yourself instead: <br>
createUser [&minus;e ENGINEID] username (MD5|SHA)
authpassphrase [DES|AES] <br>
[privpassphrase]</p>

<p style="margin-left:22%; margin-top: 1em">MD5 and SHA are
the authentication types to use. DES and AES are the privacy
protocols to use. If the privacy passphrase is not
specified, it is assumed to be the same as the
authentication passphrase. Note that the users created will
be useless unless they are also added to the VACM access
control tables described above.</p>

<p style="margin-left:22%; margin-top: 1em">SHA
authentication and DES/AES privacy require OpenSSL to be
installed and the agent to be built with OpenSSL support.
MD5 authentication may be used without OpenSSL.</p>

<p style="margin-left:22%; margin-top: 1em">Warning: the
minimum pass phrase length is 8 characters.</p>

<p style="margin-left:22%; margin-top: 1em">SNMPv3 users
can be created at runtime using the <i>snmpusm(1)</i>
command.</p>

<p style="margin-left:22%; margin-top: 1em">Instead of
figuring out how to use this directive and where to put it
(see below), just run &quot;net&minus;snmp&minus;config
&minus;&minus;create&minus;snmpv3&minus;user&quot; instead,
which will add one of these lines to the right place.</p>

<p style="margin-left:22%; margin-top: 1em">This directive
should be placed into the /var/lib/net-snmp/snmpd.conf file
instead of the other normal locations. The reason is that
the information is read from the file and then the line is
removed (eliminating the storage of the master password for
that user) and replaced with the key that is derived from
it. This key is a localized key, so that if it is stolen it
can not be used to access other agents. If the password is
stolen, however, it can be.</p>

<p style="margin-left:22%; margin-top: 1em">If you need to
localize the user to a particular EngineID (this is useful
mostly in the similar snmptrapd.conf file), you can use the
&minus;e argument to specify an EngineID as a hex value (EG,
&quot;0x01020304&quot;).</p>

<p style="margin-left:22%; margin-top: 1em">If you want to
generate either your master or localized keys directly,
replace the given password with a hexstring (preceded by a
&quot;0x&quot;) and precede the hex string by a &minus;m or
&minus;l token (respectively). EGs:</p>

<p style="margin-left:22%; margin-top: 1em">[these keys are
*not* secure but are easy to visually parse for <br>
counting purposes. Please generate random keys instead of
using <br>
these examples]</p>

<p style="margin-left:22%; margin-top: 1em">createUser
myuser SHA &minus;l
0x0001020304050607080900010203040506070809 AES &minus;l
0x00010203040506070809000102030405 <br>
createUser myuser SHA &minus;m
0x0001020304050607080900010203040506070809 AES &minus;m
0x0001020304050607080900010203040506070809</p>

<p style="margin-left:22%; margin-top: 1em">Due to the way
localization happens, localized privacy keys are expected to
be the length needed by the algorithm (128 bits for all
supported algorithms). Master encryption keys, though, need
to be the length required by the authentication algorithm
not the length required by the encrypting algorithm (MD5: 16
bytes, SHA: 20 bytes).</p>

<h2>ACCESS CONTROL
<a name="ACCESS CONTROL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>snmpd</b>
supports the View-Based Access Control Model (VACM) as
defined in RFC 2575, to control who can retrieve or update
information. To this end, it recognizes various directives
relating to access control.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Traditional
Access Control</b> <br>
Most simple access control requirements can be specified
using the directives <i>rouser</i>/<i>rwuser</i> (for
SNMPv3) or <i>rocommunity</i>/<i>rwcommunity</i> (for SNMPv1
or SNMPv2c). <br>
rouser [&minus;s SECMODEL] USER [noauth|auth|priv [OID |
&minus;V VIEW [CONTEXT]]] <br>
rwuser [&minus;s SECMODEL] USER [noauth|auth|priv [OID |
&minus;V VIEW [CONTEXT]]]</p>

<p style="margin-left:22%;">specify an SNMPv3 user that
will be allowed read-only (GET and GETNEXT) or read-write
(GET, GETNEXT and SET) access respectively. By default, this
will provide access to the full OID tree for authenticated
(including encrypted) SNMPv3 requests, using the default
context. An alternative minimum security level can be
specified using <i>noauth</i> (to allow unauthenticated
requests), or <i>priv</i> (to enforce use of encryption).
The OID field restricts access for that user to the subtree
rooted at the given OID, or the named view. An optional
context can also be specified, or &quot;context*&quot; to
denote a context prefix. If no context field is specified
(or the token &quot;*&quot; is used), the directive will
match all possible contexts.</p>

<p style="margin-left:22%; margin-top: 1em">If SECMODEL is
specified then it will be the security model required for
that user (note that identical user names may come in over
different security models and will be appropriately
separated via the access control settings). The default
security model is &quot;usm&quot; and the other common
security models are likely &quot;tsm&quot; when using (D)TLS
or SSH support and &quot;ksm&quot; if the Kerberos support
has been compiled in.</p>

<p style="margin-left:11%;">rocommunity COMMUNITY [SOURCE
[OID | &minus;V VIEW [CONTEXT]]] <br>
rwcommunity COMMUNITY [SOURCE [OID | &minus;V VIEW
[CONTEXT]]]</p>

<p style="margin-left:22%;">specify an SNMPv1 or SNMPv2c
community that will be allowed read-only (GET and GETNEXT)
or read-write (GET, GETNEXT and SET) access respectively. By
default, this will provide access to the full OID tree for
such requests, regardless of where they were sent from. The
SOURCE token can be used to restrict access to requests from
the specified system(s) - see <i>com2sec</i> for the full
details. The OID field restricts access for that community
to the subtree rooted at the given OID, or named view.
Contexts are typically less relevant to community-based SNMP
versions, but the same behaviour applies here.</p>

<p style="margin-left:11%;">rocommunity6 COMMUNITY [SOURCE
[OID | &minus;V VIEW [CONTEXT]]] <br>
rwcommunity6 COMMUNITY [SOURCE [OID | &minus;V VIEW
[CONTEXT]]]</p>

<p style="margin-left:22%;">are directives relating to
requests received using IPv6 (if the agent supports such
transport domains). The interpretation of the SOURCE, OID,
VIEW and CONTEXT tokens are exactly the same as for the IPv4
versions.</p>

<p style="margin-left:11%; margin-top: 1em">In each case,
only one directive should be specified for a given SNMPv3
user, or community string. It is <b>not</b> appropriate to
specify both <i>rouser</i> and <i>rwuser</i> directives
referring to the same SNMPv3 user (or equivalent community
settings). The <i>rwuser</i> directive provides all the
access of <i>rouser</i> (as well as allowing SET support).
The same holds true for the community-based directives.</p>

<p style="margin-left:11%; margin-top: 1em">More complex
access requirements (such as access to two or more distinct
OID subtrees, or different views for GET and SET requests)
should use one of the other access control mechanisms. Note
that if several distinct communities or SNMPv3 users need to
be granted the same level of access, it would also be more
efficient to use the main VACM configuration directives.</p>

<p style="margin-left:11%; margin-top: 1em"><b>VACM
Configuration</b> <br>
The full flexibility of the VACM is available using four
configuration directives &minus; <i>com2sec</i>,
<i>group</i>, <i>view</i> and <i>access</i>. These provide
direct configuration of the underlying VACM tables. <br>
com2sec [&minus;Cn CONTEXT] SECNAME SOURCE COMMUNITY <br>
com2sec6 [&minus;Cn CONTEXT] SECNAME SOURCE COMMUNITY</p>

<p style="margin-left:22%;">map an SNMPv1 or SNMPv2c
community string to a security name - either from a
particular range of source addresses, or globally
(<i>&quot;default&quot;</i>). A restricted source can either
be a specific hostname (or address), or a subnet -
represented as IP/MASK (e.g. 10.10.10.0/255.255.255.0), or
IP/BITS (e.g. 10.10.10.0/24), or the IPv6 equivalents.</p>

<p style="margin-left:22%; margin-top: 1em">The same
community string can be specified in several separate
directives (presumably with different source tokens), and
the first source/community combination that matches the
incoming request will be selected. Various source/community
combinations can also map to the same security name.</p>

<p style="margin-left:22%; margin-top: 1em">If a CONTEXT is
specified (using <i>&minus;Cn</i>), the community string
will be mapped to a security name in the named SNMPv3
context. Otherwise the default context (&quot;&quot;) will
be used.</p>

<p style="margin-left:11%;">com2secunix [&minus;Cn CONTEXT]
SECNAME SOCKPATH COMMUNITY</p>

<p style="margin-left:22%;">is the Unix domain sockets
version of <i>com2sec</i>.</p>

<p style="margin-left:11%;">group GROUP
{v1|v2c|usm|tsm|ksm} SECNAME</p>

<p style="margin-left:22%;">maps a security name (in the
specified security model) into a named group. Several
<i>group</i> directives can specify the same group name,
allowing a single access setting to apply to several users
and/or community strings.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
groups must be set up for the two community-based models
separately - a single <i>com2sec</i> (or equivalent)
directive will typically be accompanied by <b>two</b>
<i>group</i> directives.</p>

<p style="margin-left:11%;">view VNAME TYPE OID [MASK]</p>

<p style="margin-left:22%;">defines a named
&quot;view&quot; - a subset of the overall OID tree. This is
most commonly a single subtree, but several <i>view</i>
directives can be given with the same view name (VNAME), to
build up a more complex collection of OIDs. TYPE is either
<i>included</i> or <i>excluded</i>, which can again define a
more complex view (e.g by excluding certain sensitive
objects from an otherwise accessible subtree).</p>

<p style="margin-left:22%; margin-top: 1em">MASK is a list
of hex octets (optionally separated by &rsquo;.&rsquo; or
&rsquo;:&rsquo;) with the set bits indicating which
subidentifiers in the view OID to match against. If not
specified, this defaults to matching the OID exactly (all
bits set), thus defining a simple OID subtree. So:</p>

<p style="margin-left:32%;">view iso1 included .iso 0xf0
<br>
view iso2 included .iso <br>
view iso3 included .iso.org.dod.mgmt 0xf0</p>

<p style="margin-left:22%; margin-top: 1em">would all
define the same view, covering the whole of the
&rsquo;iso(1)&rsquo; subtree (with the third example
ignoring the subidentifiers not covered by the mask).</p>

<p style="margin-left:22%; margin-top: 1em">More usefully,
the mask can be used to define a view covering a particular
row (or rows) in a table, by matching against the
appropriate table index value, but skipping the column
subidentifier:</p>

<p style="margin-left:32%;">view ifRow4 included
.1.3.6.1.2.1.2.2.1.0.4 0xff:a0</p>

<p style="margin-left:22%; margin-top: 1em">Note that a
mask longer than 8 bits must use &rsquo;:&rsquo; to separate
the individual octets.</p>

<p style="margin-left:11%;">access GROUP CONTEXT
{any|v1|v2c|usm|tsm|ksm} LEVEL PREFX READ WRITE <br>
NOTIFY</p>

<p style="margin-left:22%;">maps from a group of
users/communities (with a particular security model and
minimum security level, and in a specific context) to one of
three views, depending on the request being processed.</p>

<p style="margin-left:22%; margin-top: 1em">LEVEL is one of
<i>noauth</i>, <i>auth</i>, or <i>priv</i>. PREFX specifies
how CONTEXT should be matched against the context of the
incoming request, either <i>exact</i> or <i>prefix</i>.
READ, WRITE and NOTIFY specifies the view to be used for
GET*, SET and TRAP/INFORM requests (althought the NOTIFY
view is not currently used). For v1 or v2c access, LEVEL
will need to be <i>noauth</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Typed-View
Configuration</b> <br>
The final group of directives extend the VACM approach into
a more flexible mechanism, which can be applied to other
access control requirements. Rather than the fixed three
views of the standard VACM mechanism, this can be used to
configure various different view types. As far as the main
SNMP agent is concerned, the two main view types are
<i>read</i> and <i>write</i>, corresponding to the READ and
WRITE views of the main <i>access</i> directive. See the
&rsquo;snmptrapd.conf(5)&rsquo; man page for discussion of
other view types. <br>
authcommunity TYPES COMMUNITY [SOURCE [OID | &minus;V VIEW
[CONTEXT]]]</p>

<p style="margin-left:22%;">is an alternative to the
<i>rocommunity</i>/<i>rwcommunity</i> directives. TYPES will
usually be <i>read</i> or <i>read,write</i> respectively.
The view specification can either be an OID subtree (as
before), or a named view (defined using the <i>view</i>
directive) for greater flexibility. If this is omitted, then
access will be allowed to the full OID tree. If CONTEXT is
specified, access is configured within this SNMPv3 context.
Otherwise the default context (&quot;&quot;) is used.</p>

<p style="margin-left:11%;">authuser TYPES [&minus;s MODEL]
USER [LEVEL [OID | &minus;V VIEW [CONTEXT]]]</p>

<p style="margin-left:22%;">is an alternative to the
<i>rouser</i>/<i>rwuser</i> directives. The fields TYPES,
OID, VIEW and CONTEXT have the same meaning as for
<i>authcommunity</i>.</p>

<p style="margin-left:11%;">authgroup TYPES [&minus;s
MODEL] GROUP [LEVEL [OID | &minus;V VIEW [CONTEXT]]]</p>

<p style="margin-left:22%;">is a companion to the
<i>authuser</i> directive, specifying access for a
particular group (defined using the <i>group</i> directive
as usual). Both <i>authuser</i> and <i>authgroup</i> default
to authenticated requests - LEVEL can also be specified as
<i>noauth</i> or <i>priv</i> to allow unauthenticated
requests, or require encryption respectively. Both
<i>authuser</i> and <i>authgroup</i> directives also default
to configuring access for SNMPv3/USM requests - use the
&rsquo;&minus;s&rsquo; flag to specify an alternative
security model (using the same values as for <i>access</i>
above).</p>

<p style="margin-left:11%;">authaccess TYPES [&minus;s
MODEL] GROUP VIEW [LEVEL [CONTEXT]]</p>

<p style="margin-left:22%;">also configures the access for
a particular group, specifying the name and type of view to
apply. The MODEL and LEVEL fields are interpreted in the
same way as for <i>authgroup</i>. If CONTEXT is specified,
access is configured within this SNMPv3 context (or contexts
with this prefix if the CONTEXT field ends with
&rsquo;*&rsquo;). Otherwise the default context
(&quot;&quot;) is used.</p>

<p style="margin-left:11%;">setaccess GROUP CONTEXT MODEL
LEVEL PREFIX VIEW TYPES</p>

<p style="margin-left:22%;">is a direct equivalent to the
original <i>access</i> directive, typically listing the view
types as <i>read</i> or <i>read,write</i> as appropriate.
(or see &rsquo;snmptrapd.conf(5)&rsquo; for other
possibilities). All other fields have the same
interpretation as with <i>access</i>.</p>

<h2>SYSTEM INFORMATION
<a name="SYSTEM INFORMATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most of the
information reported by the Net-SNMP agent is retrieved from
the underlying system, or dynamically configured via SNMP
SET requests (and retained from one run of the agent to the
next). However, certain MIB objects can be configured or
controlled via the <i>snmpd.conf(5)</i> file.</p>

<p style="margin-left:11%; margin-top: 1em"><b>System
Group</b> <br>
Most of the scalar objects in the &rsquo;system&rsquo; group
can be configured in this way: <br>
sysLocation STRING <br>
sysContact STRING <br>
sysName STRING</p>

<p style="margin-left:22%;">set the system location, system
contact or system name (<tt>sysLocation.0</tt>,
<tt>sysContact.0</tt> and <tt>sysName.0</tt>) for the agent
respectively. Ordinarily these objects are writable via
suitably authorized SNMP SET requests. However, specifying
one of these directives makes the corresponding object
read-only, and attempts to SET it will result in a
<i>notWritable</i> error response.</p>

<p style="margin-left:11%;">sysServices NUMBER</p>

<p style="margin-left:22%;">sets the value of the
<tt>sysServices.0</tt> object. For a host system, a good
value is 72 (application + end-to-end layers). If this
directive is not specified, then no value will be reported
for the <tt>sysServices.0</tt> object.</p>

<p style="margin-left:11%;">sysDescr STRING <br>
sysObjectID OID</p>

<p style="margin-left:22%;">sets the system description or
object ID for the agent. Although these MIB objects are not
SNMP-writable, these directives can be used by a network
administrator to configure suitable values for them.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Interfaces
Group</b> <br>
interface NAME TYPE SPEED</p>

<p style="margin-left:22%;">can be used to provide
appropriate type and speed settings for interfaces where the
agent fails to determine this information correctly. TYPE is
a type value as given in the IANAifType&minus;MIB, and can
be specified numerically or by name (assuming this MIB is
loaded).</p>

<p style="margin-left:11%;">interface_fadeout TIMEOUT</p>

<p style="margin-left:22%;">specifies, for how long the
agent keeps entries in <tt>ifTable</tt> after appropriate
interfaces have been removed from system (typically various
ppp, tap or tun interfaces). Timeout value is in seconds.
Default value is 300 (=5 minutes).</p>

<p style="margin-left:11%;">interface_replace_old yes</p>

<p style="margin-left:22%;">can be used to remove already
existing entries in <tt>ifTable</tt> when an interface with
the same name appears on the system. E.g. when ppp0
interface is removed, it is still listed in the table for
<i>interface_fadeout</i> seconds. This option ensures, that
the old ppp0 interface is removed even before the
<i>interface_fadeout</i> timeour when new ppp0 (with
different <tt>ifIndex</tt>) shows up.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Host
Resources Group</b> <br>
This requires that the agent was built with support for the
<i>host</i> module (which is now included as part of the
default build configuration on the major supported
platforms). <br>
ignoreDisk STRING</p>

<p style="margin-left:22%;">controls which disk devices are
scanned as part of populating the
<tt>hrDiskStorageTable</tt> (and <tt>hrDeviceTable</tt>).
The HostRes implementation code includes a list of disk
device patterns appropriate for the current operating
system, some of which may cause the agent to block when
trying to open the corresponding disk devices. This might
lead to a timeout when walking these tables, possibly
resulting in inconsistent behaviour. This directive can be
used to specify particular devices (either individually or
wildcarded) that should not be checked.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>Please consult the source (<i>host/hr_disk.c</i>) and
check for the <i>Add_HR_Disk_entry</i> calls relevant for a
particular O/S to determine the list of devices that will be
scanned.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The pattern can
include one or more wildcard expressions. See
<i>snmpd.examples(5)</i> for illustration of the wildcard
syntax.</p>

<p style="margin-left:11%;">skipNFSInHostResources true</p>

<p style="margin-left:22%;">controls whether NFS and
NFS-like file systems should be omitted from the
hrStorageTable (true or 1) or not (false or 0, which is the
default). If the Net-SNMP agent gets hung on NFS-mounted
filesystems, you can try setting this to
&rsquo;1&rsquo;.</p>

<p style="margin-left:11%;">storageUseNFS [1|2]</p>

<p style="margin-left:22%;">controls how NFS and NFS-like
file systems should be reported in the hrStorageTable. as
&rsquo;Network Disks&rsquo; (1) or &rsquo;Fixed Disks&rsquo;
(2) Historically, the Net-SNMP agent has reported such file
systems as &rsquo;Fixed Disks&rsquo;, and this is still the
default behaviour. Setting this directive to &rsquo;1&rsquo;
reports such file systems as &acute;Network Disks&rsquo;, as
required by the Host Resources MIB.</p>

<p style="margin-left:11%;">realStorageUnits</p>

<p style="margin-left:22%;">controlls how the agent reports
hrStorageAllocationUnits, hrStorageSize and hrStorageUsed in
hrStorageTable. For big storage drives with small allocation
units the agent re-calculates these values so they all fit
Integer32 and hrStorageAllocationUnits x hrStorageSize gives
real size of the storage. <br>
Example:</p>

<p style="margin-left:32%;">Linux xfs 16TB filesystem with
4096 bytes large blocks will be reported as
hrStorageAllocationUnits = 8192 and hrStorageSize =
2147483647, so 8192 x 2147483647 gives real size of the
filesystem (=16 TB).</p>

<p style="margin-left:22%; margin-top: 1em">Setting this
directive to &rsquo;1&rsquo; turns off this calculation and
the agent reports real hrStorageAllocationUnits, but it
might report wrong hrStorageSize for big drives because the
value won&rsquo;t fit into Integer32. In this case,
hrStorageAllocationUnits x hrStorageSize won&rsquo;t give
real size of the storage.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Process
Monitoring</b> <br>
The <tt>hrSWRun</tt> group of the Host Resources MIB
provides information about individual processes running on
the local system. The <tt>prTable</tt> of the
UCD&minus;SNMP&minus;MIB complements this by reporting on
selected services (which may involve multiple processes).
This requires that the agent was built with support for the
<i>ucd&minus;snmp/proc</i> module (which is included as part
of the default build configuration). <br>
proc NAME [MAX [MIN]]</p>

<p style="margin-left:22%;">monitors the number of
processes called NAME (as reported by &quot;/usr/bin/ps
-e&quot;) running on the local system.</p>

<p style="margin-left:22%; margin-top: 1em">If the number
of NAMEd processes is less than MIN or greater than MAX,
then the corresponding <tt>prErrorFlag</tt> instance will be
set to 1, and a suitable description message reported via
the <tt>prErrMessage</tt> instance.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This situation will <b>not</b> automatically trigger a
trap to report the problem - see the DisMan Event MIB
section later.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If neither MAX
nor MIN are specified, they will default to <b>infinity</b>
and 1 respectively (&quot;at least one&quot;). If only MAX
is specified, MIN will default to 0 (&quot;no more than
MAX&quot;). If MAX is 0 (and MIN is not), this indicates
infinity (&quot;at least MIN&quot;). If both MAX and MIN are
0, this indicates a process that should <b>not</b> be
running.</p>

<p style="margin-left:11%;">procfix NAME PROG ARGS</p>

<p style="margin-left:22%;">registers a command that can be
run to fix errors with the given process NAME. This will be
invoked when the corresponding <tt>prErrFix</tt> instance is
set to 1.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This command will <b>not</b> be invoked
automatically.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The
<i>procfix</i> directive must be specified <b>after</b> the
matching <i>proc</i> directive, and cannot be used on its
own.</p>

<p style="margin-left:11%; margin-top: 1em">If no
<i>proc</i> directives are defined, then walking the
<tt>prTable</tt> will fail (<i>noSuchObject).</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>Disk Usage
Monitoring</b> <br>
This requires that the agent was built with support for the
<i>ucd&minus;snmp/disk</i> module (which is included as part
of the default build configuration). <br>
disk PATH [ MINSPACE | MINPERCENT% ]</p>

<p style="margin-left:22%;">monitors the disk mounted at
PATH for available disk space. Disks mounted after the agent
has started will not be monitored, unless
<i>includeAllDisks</i> option is specified.</p>

<p style="margin-left:22%; margin-top: 1em">The minimum
threshold can either be specified in kB (MINSPACE) or as a
percentage of the total disk (MINPERCENT% with a
&rsquo;%&rsquo; character), defaulting to 100kB if neither
are specified. If the free disk space falls below this
threshold, then the corresponding <tt>dskErrorFlag</tt>
instance will be set to 1, and a suitable description
message reported via the <tt>dskErrorMsg</tt> instance.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This situation will <b>not</b> automatically trigger a
trap to report the problem - see the DisMan Event MIB
section later.</p></td></tr>
</table>

<p style="margin-left:11%;">includeAllDisks MINPERCENT%</p>

<p style="margin-left:22%;">configures monitoring of all
disks found on the system, using the specified (percentage)
threshold. The <tt>dskTable</tt> is dynamically updated,
unmounted disks disappear from the table and newly mounted
disks are added to the table. The threshold for individual
disks can be adjusted using suitable <i>disk</i> directives
(which can come either before or after the
<i>includeAllDisks</i> directive).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>Whether <i>disk</i> directives appears before or after
<i>includeAllDisks</i> may affect the indexing of the
<tt>dskTable</tt>.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Only one
<i>includeAllDisks</i> directive should be specified - any
subsequent copies will be ignored.</p>

<p style="margin-left:22%; margin-top: 1em">The list of
mounted disks will be determined from
HOST-RESOURCES-MIB::hrFSTable.</p>

<p style="margin-left:11%; margin-top: 1em">If neither any
<i>disk</i> directives or <i>includeAllDisks</i> are
defined, then walking the <tt>dskTable</tt> will fail
(<i>noSuchObject).</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>Disk I/O
Monitoring</b> <br>
This requires that the agent was built with support for the
<i>ucd&minus;snmp/diskio</i> module (which is not included
as part of the default build configuration).</p>

<p style="margin-left:11%; margin-top: 1em">By default, all
block devices known to the operating system are included in
the diskIOTable. On platforms other than Linux, this module
has no configuration directives.</p>

<p style="margin-left:11%; margin-top: 1em">On Linux
systems, it is possible to exclude several classes of block
devices from the diskIOTable in order to avoid cluttering
the table with useless zero statistics for pseudo-devices
that often are not in use but are configured by default to
exist in most recent Linux distributions. <br>
diskio_exclude_fd yes</p>

<p style="margin-left:22%;">Excludes all Linux floppy disk
block devices, whose names start with &quot;fd&quot;, e.g.
&quot;fd0&quot;</p>

<p style="margin-left:11%;">diskio_exclude_loop yes</p>

<p style="margin-left:22%;">Excludes all Linux loopback
block devices, whose names start with &quot;loop&quot;, e.g.
&quot;loop0&quot;</p>

<p style="margin-left:11%;">diskio_exclude_ram yes</p>

<p style="margin-left:22%;">Excludes all LInux ramdisk
block devices, whose names start with &quot;ram&quot;, e.g.
&quot;ram0&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><b>System Load
Monitoring</b> <br>
This requires that the agent was built with support for
either the <i>ucd&minus;snmp/loadave</i> module or the
<i>ucd&minus;snmp/memory</i> module respectively (both of
which are included as part of the default build
configuration). <br>
load MAX1 [MAX5 [MAX15]]</p>

<p style="margin-left:22%;">monitors the load average of
the local system, specifying thresholds for the 1-minute,
5-minute and 15-minute averages. If any of these loads
exceed the associated maximum value, then the corresponding
<tt>laErrorFlag</tt> instance will be set to 1, and a
suitable description message reported via the
<tt>laErrMessage</tt> instance.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This situation will <b>not</b> automatically trigger a
trap to report the problem - see the DisMan Event MIB
section later.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the MAX15
threshold is omitted, it will default to the MAX5 value. If
both MAX5 and MAX15 are omitted, they will default to the
MAX1 value. If this directive is not specified, all three
thresholds will default to a value of DEFMAXLOADAVE.</p>

<p style="margin-left:22%; margin-top: 1em">If a threshold
value of 0 is given, the agent will not report errors via
the relevant <tt>laErrorFlag</tt> or <tt>laErrMessage</tt>
instances, regardless of the current load.</p>

<p style="margin-left:11%; margin-top: 1em">Unlike the
<i>proc</i> and <i>disk</i> directives, walking the walking
the <tt>laTable</tt> will succeed (assuming the
<i>ucd&minus;snmp/loadave</i> module was configured into the
agent), even if the <i>load</i> directive is not present.
<br>
swap MIN</p>

<p style="margin-left:22%;">monitors the amount of swap
space available on the local system. If this falls below the
specified threshold (MIN kB), then the <i>memErrorSwap</i>
object will be set to 1, and a suitable description message
reported via <i>memSwapErrorMsg</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This situation will <b>not</b> automatically trigger a
trap to report the problem - see the DisMan Event MIB
section later.</p></td></tr>
</table>

<p style="margin-left:11%;">If this directive is not
specified, the default threshold is 16 MB.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Log File
Monitoring</b> <br>
This requires that the agent was built with support for
either the <i>ucd&minus;snmp/file</i> or
<i>ucd&minus;snmp/logmatch</i> modules respectively (both of
which are included as part of the default build
configuration). <br>
file FILE [MAXSIZE]</p>

<p style="margin-left:22%;">monitors the size of the
specified file (in kB). If MAXSIZE is specified, and the
size of the file exceeds this threshold, then the
corresponding <tt>fileErrorFlag</tt> instance will be set to
1, and a suitable description message reported via the
<tt>fileErrorMsg</tt> instance.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This situation will <b>not</b> automatically trigger a
trap to report the problem - see the DisMan Event MIB
section later.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note: A maximum
of 20 files can be monitored.</p>

<p style="margin-left:22%; margin-top: 1em">Note: If no
<i>file</i> directives are defined, then walking the
<tt>fileTable</tt> will fail (<i>noSuchObject</i>).</p>

<p style="margin-left:11%;">logmatch NAME FILE CYCLETIME
REGEX</p>

<p style="margin-left:22%;">monitors the specified file for
occurances of the specified pattern REGEX. The file position
is stored internally so the entire file is only read
initially, every subsequent pass will only read the new
lines added to the file since the last read.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>NAME</p></td>
<td width="4%"></td>
<td width="68%">


<p>name of the logmatch instance (will appear as
logMatchName under
logMatch/logMatchTable/logMatchEntry/logMatchName in the
ucd&minus;snmp MIB tree)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>FILE</p></td>
<td width="4%"></td>
<td width="68%">


<p>absolute path to the logfile to be monitored. Note that
this path can contain date/time directives (like in the UNIX
&rsquo;date&rsquo; command). See the manual page for
&rsquo;strftime&rsquo; for the various directives
accepted.</p> </td></tr>
</table>

<p style="margin-left:22%;">CYCLETIME</p>

<p style="margin-left:32%;">time interval for each logfile
read and internal variable update in seconds. Note: an
SNMPGET* operation will also trigger an immediate logfile
read and variable update.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>REGEX</p></td>
<td width="3%"></td>
<td width="68%">


<p>the regular expression to be used. Note: DO NOT enclose
the regular expression in quotes even if there are spaces in
the expression as the quotes will also become part of the
pattern to be matched!</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<p style="margin-left:32%; margin-top: 1em">logmatch
apache&minus;GETs
/usr/local/apache/logs/access.log&minus;%Y&minus;%m&minus;%d
60 GET.*HTTP.*</p>

<p style="margin-left:32%; margin-top: 1em">This logmatch
instance is named &rsquo;apache&minus;GETs&rsquo;, uses
&rsquo;GET.*HTTP.*&rsquo; as its regular expression and it
will monitor the file named (assuming today is May 6th
2009):
&rsquo;/usr/local/apache/logs/access.log&minus;2009&minus;05&minus;06&rsquo;,
tomorrow it will look for
&rsquo;access.log&minus;2009&minus;05&minus;07&rsquo;. The
logfile is read every 60 seconds.</p>

<p style="margin-left:22%; margin-top: 1em">Note: A maximum
of 250 logmatch directives can be specified.</p>

<p style="margin-left:22%; margin-top: 1em">Note: If no
<i>logmatch</i> directives are defined, then walking the
<tt>logMatchTable</tt> will fail (<i>noSuchObject).</i></p>

<h2>ACTIVE MONITORING
<a name="ACTIVE MONITORING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The usual
behaviour of an SNMP agent is to wait for incoming SNMP
requests and respond to them - if no requests are received,
an agent will typically not initiate any actions. This
section describes various directives that can configure
<i>snmpd</i> to take a more active role.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Notification
Handling</b> <br>
trapcommunity STRING</p>

<p style="margin-left:22%;">defines the default community
string to be used when sending traps. Note that this
directive must be used prior to any community-based trap
destination directives that need to use it.</p>

<p style="margin-left:11%;">trapsink HOST [COMMUNITY
[PORT]] <br>
trap2sink HOST [COMMUNITY [PORT]] <br>
informsink HOST [COMMUNITY [PORT]]</p>

<p style="margin-left:22%;">define the address of a
notification receiver that should be sent SNMPv1 TRAPs,
SNMPv2c TRAP2s, or SNMPv2 INFORM notifications respectively.
See the section <b>LISTENING ADDRESSES</b> in the
<i>snmpd(8)</i> manual page for more information about the
format of listening addresses. If COMMUNITY is not
specified, the most recent <i>trapcommunity</i> string will
be used.</p>

<p style="margin-left:22%; margin-top: 1em">If the
transport address does not include an explicit port
specification, then PORT will be used. If this is not
specified, the well known SNMP trap port (162) will be
used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This mechanism is being deprecated, and the listening
port should be specified via the transport specification
HOST instead.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If several sink
directives are specified, multiple copies of each
notification (in the appropriate formats) will be
generated.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p style="margin-top: 1em">Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p style="margin-top: 1em">It is <b>not</b> normally
appropriate to list two (or all three) sink directives with
the same destination.</p></td></tr>
</table>

<p style="margin-left:11%;">trapsess [SNMPCMD_ARGS]
HOST</p>

<p style="margin-left:22%;">provides a more generic
mechanism for defining notification destinations.
<i>SNMPCMD_ARGS</i> should be the command-line options
required for an equivalent <i>snmptrap</i> (or
<i>snmpinform</i>) command to send the desired notification.
The option <i>&minus;Ci</i> can be used (with
<i>&minus;v2c</i> or <i>&minus;v3</i>) to generate an INFORM
notification rather than an unacknowledged TRAP.</p>

<p style="margin-left:22%; margin-top: 1em">This is the
appropriate directive for defining SNMPv3 trap receivers.
See
http://www.net&minus;snmp.org/tutorial/tutorial&minus;5/commands/snmptrap&minus;v3.html
for more information about SNMPv3 notification
behaviour.</p>

<p style="margin-left:11%;">authtrapenable {1|2}</p>

<p style="margin-left:22%;">determines whether to generate
authentication failure traps (<i>enabled(1)</i>) or not
(<i>disabled(2)</i> - the default). Ordinarily the
corresponding MIB object (<tt>snmpEnableAuthenTraps.0</tt>)
is read-write, but specifying this directive makes this
object read-only, and attempts to set the value via SET
requests will result in a <i>notWritable</i> error
response.</p>

<p style="margin-left:11%;">v1trapaddress HOST</p>

<p style="margin-left:22%;">defines the agent address,
which is inserted into SNMPv1 TRAPs. Arbitrary local IPv4
address is chosen if this option is ommited. This option is
useful mainly when the agent is visible from outside world
by specific address only (e.g. because of network address
translation or firewall).</p>

<p style="margin-left:11%; margin-top: 1em"><b>DisMan Event
MIB</b> <br>
The previous directives can be used to configure where traps
should be sent, but are not concerned with <i>when</i> to
send such traps (or what traps should be generated). This is
the domain of the Event MIB - developed by the Distributed
Management (DisMan) working group of the IETF.</p>

<p style="margin-left:11%; margin-top: 1em">This requires
that the agent was built with support for the
<i>disman/event</i> module (which is now included as part of
the default build configuration for the most recent
distribution).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>The behaviour of the latest implementation differs in
some minor respects from the previous code - nothing too
significant, but existing scripts may possibly need some
minor adjustments.</p></td></tr>
</table>

<p style="margin-left:11%;">iquerySecName NAME <br>
agentSecName NAME</p>

<p style="margin-left:22%;">specifies the default SNMPv3
username, to be used when making internal queries to
retrieve any necessary information (either for evaluating
the monitored expression, or building a notification
payload). These internal queries always use SNMPv3, even if
normal querying of the agent is done using SNMPv1 or
SNMPv2c.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
user must also be explicitly created (<i>createUser</i>) and
given appropriate access rights (e.g. <i>rouser</i>). This
directive is purely concerned with defining <i>which</i>
user should be used - not with actually setting this user
up.</p>

<p style="margin-left:11%;">monitor [OPTIONS] NAME
EXPRESSION</p>

<p style="margin-left:22%;">defines a MIB object to
monitor. If the EXPRESSION condition holds (see below), then
this will trigger the corresponding event, and either send a
notification or apply a SET assignment (or both). Note that
the event will only be triggered once, when the expression
first matches. This monitor entry will not fire again until
the monitored condition first becomes false, and then
matches again. NAME is an administrative name for this
expression, and is used for indexing the
<tt>mteTriggerTable</tt> (and related tables). Note also
that such monitors use an internal SNMPv3 request to
retrieve the values being monitored (even if normal agent
queries typically use SNMPv1 or SNMPv2c). See the
<i>iquerySecName</i> token described above.</p>

<p style="margin-left:11%;"><i>EXPRESSION</i></p>

<p style="margin-left:22%;">There are three types of
monitor expression supported by the Event MIB - existence,
boolean and threshold tests. <br>
OID | ! OID | != OID</p>

<p style="margin-left:32%;">defines an <i>existence(0)</i>
monitor test. A bare OID specifies a <i>present(0)</i> test,
which will fire when (an instance of) the monitored OID is
created. An expression of the form <i>! OID</i> specifies an
<i>absent(1)</i> test, which will fire when the monitored
OID is delected. An expression of the form <i>!= OID</i>
specifies a <i>changed(2)</i> test, which will fire whenever
the monitored value(s) change. Note that there <b>must</b>
be whitespace before the OID token.</p>

<p style="margin-left:22%;">OID OP VALUE</p>

<p style="margin-left:32%;">defines a <i>boolean(1)</i>
monitor test. OP should be one of the defined comparison
operators (!=, ==, &lt;, &lt;=, &gt;, &gt;=) and VALUE
should be an integer value to compare against. Note that
there <b>must</b> be whitespace around the OP token. A
comparison such as <tt>OID !=0</tt> will not be handled
correctly.</p>

<p style="margin-left:22%;">OID MIN MAX [DMIN DMAX]</p>

<p style="margin-left:32%;">defines a <i>threshold(2)</i>
monitor test. MIN and MAX are integer values, specifying
lower and upper thresholds. If the value of the monitored
OID falls below the lower threshold (MIN) or rises above the
upper threshold (MAX), then the monitor entry will trigger
the corresponding event.</p>

<p style="margin-left:32%; margin-top: 1em">Note that the
rising threshold event will only be re-armed when the
monitored value falls below the <b>lower</b> threshold
(MIN). Similarly, the falling threshold event will be
re-armed by the upper threshold (MAX).</p>

<p style="margin-left:32%; margin-top: 1em">The optional
parameters DMIN and DMAX configure a pair of similar
threshold tests, but working with the delta differences
between successive sample values.</p>

<p style="margin-left:11%;"><i>OPTIONS</i></p>

<p style="margin-left:22%;">There are various options to
control the behaviour of the monitored expression. These
include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>&minus;D</p></td>
<td width="1%"></td>
<td width="68%">


<p>indicates that the expression should be evaluated using
delta differences between sample values (rather than the
values themselves).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>&minus;d OID</p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%;">&minus;di OID</p>

<p style="margin-left:32%;">specifies a discontinuity
marker for validating delta differences. A <i>&minus;di</i>
object instance will be used exactly as given. A
<i>&minus;d</i> object will have the instance subidentifiers
from the corresponding (wildcarded) expression object
appended. If the <i>&minus;I</i> flag is specified, then
there is no difference between these two options.</p>

<p style="margin-left:32%; margin-top: 1em">This option
also implies <i>&minus;D</i>.</p>

<p style="margin-left:22%;">&minus;e EVENT</p>

<p style="margin-left:32%;">specifies the event to be
invoked when this monitor entry is triggered. If this option
is not given, the monitor entry will generate one of the
standard notifications defined in the
DISMAN&minus;EVENT&minus;MIB.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>&minus;I</p></td>
<td width="1%"></td>
<td width="68%">


<p>indicates that the monitored expression should be
applied to the specified OID as a single instance. By
default, the OID will be treated as a wildcarded object, and
the monitor expanded to cover all matching instances.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>&minus;i OID</p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>&minus;o OID</p></td>
<td width="1%"></td>
<td width="68%">


<p>define additional varbinds to be added to the
notification payload when this monitor trigger fires. For a
wildcarded expression, the suffix of the matched instance
will be added to any OIDs specified using <i>&minus;o</i>,
while OIDs specified using <i>&minus;i</i> will be treated
as exact instances. If the <i>&minus;I</i> flag is
specified, then there is no difference between these two
options.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">See
<i>strictDisman</i> for details of the ordering of
notification payloads.</p>

<p style="margin-left:22%;">&minus;r FREQUENCY</p>

<p style="margin-left:32%;">monitors the given expression
every FREQUENCY, where FREQUENCY is in seconds or optionally
suffixed by one of s (for seconds), m (for minutes), h (for
hours), d (for days), or w (for weeks). By default, the
expression will be evaluated every 600s (10 minutes).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>&minus;S</p></td>
<td width="7%"></td>
<td width="68%">


<p>indicates that the monitor expression should <i>not</i>
be evaluated when the agent first starts up. The first
evaluation will be done once the first repeat interval has
expired.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>&minus;s</p></td>
<td width="7%"></td>
<td width="68%">


<p>indicates that the monitor expression <i>should</i> be
evaluated when the agent first starts up. This is the
default behaviour.</p></td></tr>
</table>

<p style="margin-left:32%;">Note:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="43%"></td>
<td width="57%">


<p style="margin-top: 1em">Notifications triggered by this
initial evaluation will be sent <i>before</i> the
<tt>coldStart</tt> trap.</p></td></tr>
</table>

<p style="margin-left:22%;">&minus;u SECNAME</p>

<p style="margin-left:32%;">specifies a security name to
use for scanning the local host, instead of the default
<i>iquerySecName</i>. Once again, this user must be
explicitly created and given suitable access rights.</p>

<p style="margin-left:11%;">notificationEvent ENAME
NOTIFICATION [&minus;m] [&minus;i OID | &minus;o OID ]*</p>

<p style="margin-left:22%;">defines a notification event
named ENAME. This can be triggered from a given
<i>monitor</i> entry by specifying the option <i>&minus;e
ENAME</i> (see above). NOTIFICATION should be the OID of the
NOTIFICATION&minus;TYPE definition for the notification to
be generated.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>&minus;m</i> option is given, the notification payload
will include the standard varbinds as specified in the
OBJECTS clause of the notification MIB definition. This
option must come <b>after</b> the NOTIFICATION OID (and the
relevant MIB file must be available and loaded by the
agent). Otherwise, these varbinds must be listed explicitly
(either here or in the corresponding <i>monitor</i>
directive).</p>

<p style="margin-left:22%; margin-top: 1em">The <i>&minus;i
OID</i> and <i>&minus;o OID</i> options specify additional
varbinds to be appended to the notification payload, after
the standard list. If the monitor entry that triggered this
event involved a wildcarded expression, the suffix of the
matched instance will be added to any OIDs specified using
<i>&minus;o</i>, while OIDs specified using <i>&minus;i</i>
will be treated as exact instances. If the <i>&minus;I</i>
flag was specified to the <i>monitor</i> directive, then
there is no difference between these two options.</p>

<p style="margin-left:11%;">setEvent ENAME [&minus;I] OID =
VALUE</p>

<p style="margin-left:22%;">defines a set event named
ENAME, assigning the (integer) VALUE to the specified OID.
This can be triggered from a given <i>monitor</i> entry by
specifying the option <i>&minus;e ENAME</i> (see above).</p>

<p style="margin-left:22%; margin-top: 1em">If the monitor
entry that triggered this event involved a wildcarded
expression, the suffix of the matched instance will normally
be added to the OID. If the <i>&minus;I</i> flag was
specified to either of the <i>monitor</i> or <i>setEvent</i>
directives, the specified OID will be regarded as an exact
single instance.</p>

<p style="margin-left:11%;">strictDisman yes</p>

<p style="margin-left:22%;">The definition of SNMP
notifications states that the varbinds defined in the OBJECT
clause should come first (in the order specified), followed
by any &quot;extra&quot; varbinds that the notification
generator feels might be useful. The most natural approach
would be to associate these mandatory varbinds with the
<i>notificationEvent</i> entry, and append any varbinds
associated with the monitor entry that triggered the
notification to the end of this list. This is the default
behaviour of the Net-SNMP Event MIB implementation.</p>

<p style="margin-left:22%; margin-top: 1em">Unfortunately,
the DisMan Event MIB specifications actually state that the
trigger-related varbinds should come <b>first</b>, followed
by the event-related ones. This directive can be used to
restore this strictly-correct (but inappropriate)
behaviour.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>Strict DisMan ordering may result in generating invalid
notifications payload lists if the <i>notificationEvent
&minus;n</i> flag is used together with <i>monitor
&minus;o</i> (or <i>&minus;i</i>) varbind options.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If no
<i>monitor</i> entries specify payload varbinds, then the
setting of this directive is irrelevant.</p>

<p style="margin-left:11%;">linkUpDownNotifications yes</p>

<p style="margin-left:22%;">will configure the Event MIB
tables to monitor the <tt>ifTable</tt> for network
interfaces being taken up or down, and triggering a
<i>linkUp</i> or <i>linkDown</i> notification as
appropriate.</p>

<p style="margin-left:22%; margin-top: 1em">This is exactly
equivalent to the configuration:</p>


<p style="margin-left:32%; margin-top: 1em">notificationEvent
linkUpTrap linkUp ifIndex ifAdminStatus ifOperStatus <br>
notificationEvent linkDownTrap linkDown ifIndex
ifAdminStatus ifOperStatus</p>

<p style="margin-left:32%; margin-top: 1em">monitor
&minus;r 60 &minus;e linkUpTrap &quot;Generate linkUp&quot;
ifOperStatus != 2 <br>
monitor &minus;r 60 &minus;e linkDownTrap &quot;Generate
linkDown&quot; ifOperStatus == 2</p>

<p style="margin-left:11%;">defaultMonitors yes</p>

<p style="margin-left:22%;">will configure the Event MIB
tables to monitor the various
<tt>UCD&minus;SNMP&minus;MIB</tt> tables for problems (as
indicated by the appropriate <tt>xxErrFlag</tt> column
objects).</p>

<p style="margin-left:22%; margin-top: 1em">This is exactly
equivalent to the configuration:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o prNames &minus;o prErrMessage &quot;process
table&quot; prErrorFlag != 0</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o memErrorName &minus;o memSwapErrorMsg
&quot;memory&quot; memSwapError != 0</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o extNames &minus;o extOutput
&quot;extTable&quot; extResult != 0</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o dskPath &minus;o dskErrorMsg
&quot;dskTable&quot; dskErrorFlag != 0</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o laNames &minus;o laErrMessage
&quot;laTable&quot; laErrorFlag != 0</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>monitor</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="-24%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p>&minus;o fileName &minus;o fileErrorMsg
&quot;fileTable&quot; fileErrorFlag != 0</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In both these
latter cases, the snmpd.conf must also contain a
<i>iquerySecName</i> directive, together with a
corresponding <i>createUser</i> entry and suitable access
control configuration.</p>

<p style="margin-left:11%; margin-top: 1em"><b>DisMan
Schedule MIB</b> <br>
The DisMan working group also produced a mechanism for
scheduling particular actions (a specified SET assignment)
at given times. This requires that the agent was built with
support for the <i>disman/schedule</i> module (which is
included as part of the default build configuration for the
most recent distribution).</p>

<p style="margin-left:11%; margin-top: 1em">There are three
ways of specifying the scheduled action: <br>
repeat FREQUENCY OID = VALUE</p>

<p style="margin-left:22%;">configures a SET assignment of
the (integer) VALUE to the MIB instance OID, to be run every
FREQUENCY seconds, where FREQUENCY is in seconds or
optionally suffixed by one of s (for seconds), m (for
minutes), h (for hours), d (for days), or w (for weeks).</p>

<p style="margin-left:11%;">cron MINUTE HOUR DAY MONTH
WEEKDAY OID = VALUE</p>

<p style="margin-left:22%;">configures a SET assignment of
the (integer) VALUE to the MIB instance OID, to be run at
the times specified by the fields MINUTE to WEEKDAY. These
follow the same pattern as the equivalent <i>crontab(5)</i>
fields.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>These fields should be specified as a (comma-separated)
list of numeric values. Named values for the MONTH and
WEEKDAY fields are not supported, and neither are value
ranges. A wildcard match can be specified as
&rsquo;*&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The DAY field
can also accept negative values, to indicate days counting
backwards from the end of the month.</p>

<p style="margin-left:11%;">at MINUTE HOUR DAY MONTH
WEEKDAY OID = VALUE</p>

<p style="margin-left:22%;">configures a one-shot SET
assignment, to be run at the first matching time as
specified by the fields MINUTE to WEEKDAY. The
interpretation of these fields is exactly the same as for
the <i>cron</i> directive.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Data
Delivery via Notfiications</b> <br>
Note: this functionality is only available if the
<i>deliver/deliverByNotify</i> mib module was complied in to
the agent</p>

<p style="margin-left:11%; margin-top: 1em">In some
situations it may be advantageous to deliver SNMP data over
SNMP Notifications (TRAPs and INFORMs) rather than the
typical process of having the manager issue requests for the
data (via GETs and GETNEXTs). Reasons for doing this are
numerous, but frequently corner cases. The most common
reason for wanting this behaviour might be to monitor
devices that reside behind NATs or Firewalls that prevent
incoming SNMP traffic.</p>

<p style="margin-left:11%; margin-top: 1em">It should be
noted that although most management software is capable of
logging notifications, very little (if any) management
software will updated their &quot;knowledge database&quot;
based on the contents of SNMP notifications. IE, it
won&rsquo;t (for example) update the interface traffic
counter history that is used to produce graphs. Most larger
network management packages have a separate database for
storing data received via SNMP requests (GETs and GETNEXTs)
vs those received from notifications. Researching the
capabilities of your management station software is required
before assuming this functionality will solve your data
delivery requirements.</p>

<p style="margin-left:11%; margin-top: 1em">Notifications
generated via this mechanism will be sent to the standard
set of configured notification targets. See the
&quot;Notification Handling&quot; section of this document
for further information. <br>
deliverByNotify [&minus;p] [&minus;m] [&minus;s MAXSIZE]
FREQUENCY OID</p>

<p style="margin-left:22%;">This directive tells the SNMP
agent to self-walk the <i>OID</i>, collect all the data and
send it out every <i>FREQUENCY</i> seconds, where FREQUENCY
is in seconds or optionally suffixed by one of s (for
seconds), m (for minutes), h (for hours), d (for days), or w
(for weeks). By default scalars are included in the
notification that specify the how often the notification
will be sent (unless the <i>&minus;p</i> option is
specified) and which message number of how many messages a
particular notification is (unless <i>&minus;m</i> is
specified). To break the notifications into manageable
packet sizes, use the <i>&minus;s</i> flag to specify the
approximate maximum number of bytes that a notification
message should be limited to. If more than <i>MAXSIZE</i> of
bytes is needed then multiple notifications will be sent to
deliver the data. Note that the calculations for ensuring
the maximum size is met are approximations and thus it can
be absolutely guaranteed they&rsquo;ll be under that size,
so leave a padding buffer if it is critical that you avoid
fragmentation. A value of &minus;1 indicates force
everything into a single message no matter how big it
is.</p>

<p style="margin-left:22%; margin-top: 1em">Example usage:
the following will deliver the contents of the ifTable once
an hour and the contents of the system group once every 2
hours:</p>


<p style="margin-left:22%; margin-top: 1em">deliverByNotify
3600 ifTable <br>
deliverByNotify 7200 system</p>

<p style="margin-left:11%;">deliverByNotifyMaxPacketSize
SIZEINBYTES</p>

<p style="margin-left:22%;">Sets the default notification
size limit (see the <i>&minus;s</i> flag above).</p>

<p style="margin-left:11%;">deliverByNotifyOid OID <br>
deliverByNotifyFrequencyOid OID <br>
deliverByNotifyMessageNumberOid OID <br>
deliverByNotifyMaxMessageNumberOid OID</p>

<p style="margin-left:22%;">These set the data OID that the
notification will be sent under, the scalar OID, the message
number OID, and the maximum message number OID. These
default to objects in the
NET&minus;SNMP&minus;PERIODIC&minus;NOTIFY&minus;MIB.</p>

<h2>EXTENDING AGENT FUNCTIONALITY
<a name="EXTENDING AGENT FUNCTIONALITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">One of the
first distinguishing features of the original UCD suite was
the ability to extend the functionality of the agent - not
just by recompiling with code for new MIB modules, but also
by configuring the running agent to report additional
information. There are a number of techniques to support
this, including:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>running external commands (<i>exec</i>, <i>extend</i>,
<i>pass</i>)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>loading new code dynamically (embedded perl,
<i>dlmod</i>)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>communicating with other agents (<i>proxy</i>, SMUX,
AgentX)</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Arbitrary
Extension Commands</b> <br>
The earliest extension mechanism was the ability to run
arbitrary commands or shell scripts. Such commands do not
need to be aware of SNMP operations, or conform to any
particular behaviour - the MIB structures are designed to
accommodate any form of command output. Use of this
mechanism requires that the agent was built with support for
the <i>ucd&minus;snmp/extensible</i> and/or
<i>agent/extend</i> modules (which are both included as part
of the default build configuration). <br>
exec [MIBOID] NAME PROG ARGS <br>
sh [MIBOID] NAME PROG ARGS</p>

<p style="margin-left:22%;">invoke the named PROG with
arguments of ARGS. By default the exit status and first line
of output from the command will be reported via the
<tt>extTable</tt>, discarding any additional output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>Entries in this table appear in the order they are read
from the configuration file. This means that adding new
<i>exec</i> (or <i>sh</i>) directives and restarting the
agent, may affect the indexing of other entries.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The PROG
argument for <i>exec</i> directives must be a full path to a
real binary, as it is executed via the exec() system call.
To invoke a shell script, use the <i>sh</i> directive
instead.</p>

<p style="margin-left:22%; margin-top: 1em">If MIBOID is
specified, then the results will be rooted at this point in
the OID tree, returning the exit statement as MIBOID.100.0
and the entire command output in a pseudo-table based at
MIBNUM.101 - with one &rsquo;row&rsquo; for each line of
output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p style="margin-top: 1em">Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p style="margin-top: 1em">The layout of this
&quot;relocatable&quot; form of <i>exec</i> (or <i>sh</i>)
output does not strictly form a valid MIB structure. This
mechanism is being deprecated - please see the <i>extend</i>
directive (described below) instead.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The agent does
not cache the exit status or output of the executed
program.</p>

<p style="margin-left:11%;">execfix NAME PROG ARGS</p>

<p style="margin-left:22%;">registers a command that can be
invoked on demand - typically to respond to or fix errors
with the corresponding <i>exec</i> or <i>sh</i> entry. When
the <i>extErrFix</i> instance for a given NAMEd entry is set
to the integer value of 1, this command will be called.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>This directive can only be used in combination with a
corresponding <i>exec</i> or <i>sh</i> directive, which must
be defined first. Attempting to define an unaccompanied
<i>execfix</i> directive will fail.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>exec</i> and
<i>sh</i> extensions can only be configured via the
snmpd.conf file. They cannot be set up via SNMP SET
requests. <br>
extend [MIBOID] NAME PROG ARGS</p>

<p style="margin-left:22%;">works in a similar manner to
the <i>exec</i> directive, but with a number of
improvements. The MIB tables (<i>nsExtendConfigTable</i>
etc) are indexed by the NAME token, so are unaffected by the
order in which entries are read from the configuration
files. There are <i>two</i> result tables - one
(<i>nsExtendOutput1Table</i>) containing the exit status,
the first line and full output (as a single string) for each
<i>extend</i> entry, and the other
(<i>nsExtendOutput2Table</i>) containing the complete output
as a series of separate lines.</p>

<p style="margin-left:22%; margin-top: 1em">If MIBOID is
specified, then the configuration and result tables will be
rooted at this point in the OID tree, but are otherwise
structured in exactly the same way. This means that several
separate <i>extend</i> directives can specify the same
MIBOID root, without conflicting.</p>

<p style="margin-left:22%; margin-top: 1em">The exit status
and output is cached for each entry individually, and can be
cleared (and the caching behaviour configured) using the
<tt>nsCacheTable</tt>.</p>

<p style="margin-left:11%;">extendfix NAME PROG ARGS</p>

<p style="margin-left:22%;">registers a command that can be
invoked on demand, by setting the appropriate
<i>nsExtendRunType</i> instance to the value
<i>run-command(3)</i>. Unlike the equivalent <i>execfix</i>,
this directive does not need to be paired with a
corresponding <i>extend</i> entry, and can appear on its
own.</p>

<p style="margin-left:11%; margin-top: 1em">Both
<i>extend</i> and <i>extendfix</i> directives can be
configured dynamically, using SNMP SET requests to the
NET&minus;SNMP&minus;EXTEND&minus;MIB.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MIB-Specific
Extension Commands</b> <br>
The first group of extension directives invoke arbitrary
commands, and rely on the MIB structure (and management
applications) having the flexibility to accommodate and
interpret the output. This is a convenient way to make
information available quickly and simply, but is of no use
when implementing specific MIB objects, where the extension
must conform to the structure of the MIB (rather than vice
versa). The remaining extension mechanisms are all concerned
with such MIB-specific situations - starting with
&quot;pass-through&quot; scripts. Use of this mechanism
requires that the agent was built with support for the
<i>ucd&minus;snmp/pass</i> and
<i>ucd&minus;snmp/pass_persist</i> modules (which are both
included as part of the default build configuration). <br>
pass [&minus;p priority] MIBOID PROG</p>

<p style="margin-left:22%;">will pass control of the
subtree rooted at MIBOID to the specified PROG command. GET
and GETNEXT requests for OIDs within this tree will trigger
this command, called as:</p>

<p style="margin-left:32%; margin-top: 1em">PROG &minus;g
OID</p>

<p style="margin-left:32%; margin-top: 1em">PROG &minus;n
OID</p>

<p style="margin-left:22%; margin-top: 1em">respectively,
where OID is the requested OID. The PROG command should
return the response varbind as three separate lines printed
to stdout - the first line should be the OID of the returned
value, the second should be its TYPE (one of the text
strings <b>integer, gauge, counter, timeticks, ipaddress,
objectid,</b> or <b>string</b> ), and the third should be
the value itself.</p>

<p style="margin-left:22%; margin-top: 1em">If the command
cannot return an appropriate varbind - e.g the specified OID
did not correspond to a valid instance for a GET request, or
there were no following instances for a GETNEXT - then it
should exit without producing any output. This will result
in an SNMP <i>noSuchName</i> error, or a
<i>noSuchInstance</i> exception.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="57%">


<p>The SMIv2 type <b>counter64</b> and SNMPv2
<i>noSuchObject</i> exception are not supported.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A SET request
will result in the command being called as:</p>

<p style="margin-left:32%; margin-top: 1em">PROG &minus;s
OID TYPE VALUE</p>

<p style="margin-left:22%; margin-top: 1em">where TYPE is
one of the tokens listed above, indicating the type of the
value passed as the third parameter.</p>

<p style="margin-left:22%; margin-top: 1em">If the
assignment is successful, the PROG command should exit
without producing any output. Errors should be indicated by
writing one of the strings <b>not-writable,</b> or
<b>wrong-type</b> to stdout, and the agent will generate the
appropriate error response.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p style="margin-top: 1em">Note:</p></td>
<td width="3%"></td>
<td width="57%">


<p style="margin-top: 1em">The other SNMPv2 errors are not
supported.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In either case,
the command should exit once it has finished processing.
Each request (and each varbind within a single request) will
trigger a separate invocation of the command.</p>

<p style="margin-left:22%; margin-top: 1em">The default
registration priority is 127. This can be changed by
supplying the optional &minus;p flag, with lower priority
registrations being used in preference to higher priority
values.</p>

<p style="margin-left:11%;">pass_persist [&minus;p
priority] MIBOID PROG</p>

<p style="margin-left:22%;">will also pass control of the
subtree rooted at MIBOID to the specified PROG command.
However this command will continue to run after the initial
request has been answered, so subsequent requests can be
processed without the startup overheads.</p>

<p style="margin-left:22%; margin-top: 1em">Upon
initialization, PROG will be passed the string
&quot;PING\n&quot; on stdin, and should respond by printing
&quot;PONG\n&quot; to stdout.</p>

<p style="margin-left:22%; margin-top: 1em">For GET and
GETNEXT requests, PROG will be passed two lines on stdin,
the command (<i>get</i> or <i>getnext</i>) and the requested
OID. It should respond by printing three lines to stdout -
the OID for the result varbind, the TYPE and the VALUE
itself - exactly as for the <i>pass</i> directive above. If
the command cannot return an appropriate varbind, it should
print print &quot;NONE\n&quot; to stdout (but continue
running).</p>

<p style="margin-left:22%; margin-top: 1em">For SET
requests, PROG will be passed three lines on stdin, the
command (<i>set</i>) and the requested OID, followed by the
type and value (both on the same line). If the assignment is
successful, the command should print &quot;DONE\n&quot; to
stdout. Errors should be indicated by writing one of the
strings <b>not&minus;writable, wrong&minus;type,
wrong&minus;length, wrong&minus;value</b> or
<b>inconsistent&minus;value</b> to stdout, and the agent
will generate the appropriate error response. In either
case, the command should continue running.</p>

<p style="margin-left:22%; margin-top: 1em">The
registration priority can be changed using the optional
&minus;p flag, just as for the <i>pass</i> directive.</p>

<p style="margin-left:11%; margin-top: 1em"><i>pass</i> and
<i>pass_persist</i> extensions can only be configured via
the snmpd.conf file. They cannot be set up via SNMP SET
requests.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Embedded
Perl Support</b> <br>
Programs using the previous extension mechanisms can be
written in any convenient programming language - including
perl, which is a common choice for pass-through extensions
in particular. However the Net-SNMP agent also includes
support for embedded perl technology (similar to
<i>mod_perl</i> for the Apache web server). This allows the
agent to interpret perl scripts directly, thus avoiding the
overhead of spawning processes and initializing the perl
system when a request is received.</p>

<p style="margin-left:11%; margin-top: 1em">Use of this
mechanism requires that the agent was built with support for
the embedded perl mechanism, which is not part of the
default build environment. It must be explicitly included by
specifying the
&rsquo;&minus;&minus;enable&minus;embedded&minus;perl&rsquo;
option to the configure script when the package is first
built.</p>

<p style="margin-left:11%; margin-top: 1em">If enabled, the
following directives will be recognised: <br>
disablePerl true</p>

<p style="margin-left:22%;">will turn off embedded perl
support entirely (e.g. if there are problems with the perl
installation).</p>

<p style="margin-left:11%;">perlInitFile FILE</p>

<p style="margin-left:22%;">loads the specified
initialisation file (if present) immediately before the
first <i>perl</i> directive is parsed. If not explicitly
specified, the agent will look for the default
initialisation file /usr/share/snmp/snmp_perl.pl.</p>

<p style="margin-left:22%; margin-top: 1em">The default
initialisation file creates an instance of a
<tt>NetSNMP::agent</tt> object - a variable <tt>$agent</tt>
which can be used to register perl-based MIB handler
routines.</p>

<p style="margin-left:11%;">perl EXPRESSION</p>

<p style="margin-left:22%;">evaluates the given expression.
This would typically register a handler routine to be called
when a section of the OID tree was requested:</p>

<pre style="margin-left:32%;">perl use Data::Dumper;
perl sub myroutine  { print &quot;got called: &quot;,Dumper(@_),&quot;\n&quot;; }
perl $agent&minus;&gt;register(&rsquo;mylink&rsquo;, &rsquo;.1.3.6.1.8765&rsquo;, \&amp;myroutine);</pre>


<p style="margin-left:22%; margin-top: 1em">This expression
could also source an external file:</p>

<p style="margin-left:32%;"><tt>perl &rsquo;do
/path/to/file.pl&rsquo;;</tt></p>

<p style="margin-left:22%; margin-top: 1em">or perform any
other perl-based processing that might be required.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Dynamically
Loadable Modules</b> <br>
Most of the MIBs supported by the Net-SNMP agent are
implemented as C code modules, which were compiled and
linked into the agent libraries when the suite was first
built. Such implementation modules can also be compiled
independently and loaded into the running agent once it has
started. Use of this mechanism requires that the agent was
built with support for the <i>ucd&minus;snmp/dlmod</i>
module (which is included as part of the default build
configuration). <br>
dlmod NAME PATH</p>

<p style="margin-left:22%;">will load the shared object
module from the file PATH (an absolute filename), and call
the initialisation routine <i>init_NAME</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>If the specified PATH is not a fully qualified filename,
it will be interpreted relative to /usr/lib(64)/snmp/dlmod,
and <tt>.so</tt> will be appended to the filename.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This
functionality can also be configured using SNMP SET requests
to the UCD&minus;DLMOD&minus;MIB.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Proxy
Support</b> <br>
Another mechanism for extending the functionality of the
agent is to pass selected requests (or selected varbinds) to
another SNMP agent, which can be running on the same host
(presumably listening on a different port), or on a remote
system. This can be viewed either as the main agent
delegating requests to the remote one, or acting as a proxy
for it. Use of this mechanism requires that the agent was
built with support for the <i>ucd&minus;snmp/proxy</i>
module (which is included as part of the default build
configuration). <br>
proxy [&minus;Cn CONTEXTNAME] [SNMPCMD_ARGS] HOST OID
[REMOTEOID]</p>

<p style="margin-left:22%;">will pass any incoming requests
under OID to the agent listening on the port specified by
the transport address HOST. See the section <b>LISTENING
ADDRESSES</b> in the <i>snmpd(8)</i> manual page for more
information about the format of listening addresses.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>To proxy the entire MIB tree, use the OID .1.3
(<b>not</b> the top-level .1)</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The
<i>SNMPCMD_ARGS</i> should provide sufficient version and
administrative information to generate a valid SNMP request
(see <i>snmpcmd(1)</i>).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em">Note:</p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">The proxied request will
<i>not</i> use the administrative settings from the original
request.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If a
CONTEXTNAME is specified, this will register the proxy
delegation within the named context in the local agent.
Defining multiple <i>proxy</i> directives for the same OID
but different contexts can be used to query several remote
agents through a single proxy, by specifying the appropriate
SNMPv3 context in the incoming request (or using suitable
configured community strings - see the <i>com2sec</i>
directive).</p>

<p style="margin-left:11%; margin-top: 1em">Specifying the
REMOID parameter will map the local MIB tree rooted at OID
to an equivalent subtree rooted at REMOID on the remote
agent.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SMUX
Sub-Agents</b> <br>
The Net-SNMP agent supports the SMUX protocol (RFC 1227) to
communicate with SMUX-based subagents (such as <i>gated</i>,
<i>zebra</i> or <i>quagga</i>). Use of this mechanism
requires that the agent was built with support for the
<i>smux</i> module, which is not part of the default build
environment, and must be explicitly included by specifying
the
&rsquo;&minus;&minus;with&minus;mib&minus;modules=smux&rsquo;
option to the configure script when the package is first
built.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p style="margin-top: 1em">Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p style="margin-top: 1em">This extension protocol has been
officially deprecated in favour of AgentX (see below).</p></td></tr>
</table>

<p style="margin-left:11%;">smuxpeer OID PASS</p>

<p style="margin-left:22%;">will register a subtree for
SMUX-based processing, to be authenticated using the
password PASS. If a subagent (or &quot;peer&quot;) connects
to the agent and registers this subtree then requests for
OIDs within it will be passed to that SMUX subagent for
processing.</p>

<p style="margin-left:22%; margin-top: 1em">A suitable
entry for an OSPF routing daemon (such as <i>gated</i>,
<i>zebra</i> or <i>quagga</i>) might be something like</p>

<p style="margin-left:32%;"><i>smuxpeer .1.3.6.1.2.1.14
ospf_pass</i></p>

<p style="margin-left:11%;">smuxsocket
&lt;IPv4-address&gt;</p>

<p style="margin-left:22%;">defines the IPv4 address for
SMUX peers to communicate with the Net-SNMP agent. The
default is to listen on all IPv4 interfaces
(&quot;0.0.0.0&quot;), unless the package has been
configured with
&quot;&minus;&minus;enable&minus;local&minus;smux&quot; at
build time, which causes it to only listen on 127.0.0.1 by
default. SMUX uses the well-known TCP port 199.</p>

<p style="margin-left:11%; margin-top: 1em">Note the
Net-SNMP agent will only operate as a SMUX <i>master</i>
agent. It does not support acting in a SMUX subagent
role.</p>

<p style="margin-left:11%; margin-top: 1em"><b>AgentX
Sub-Agents</b> <br>
The Net-SNMP agent supports the AgentX protocol (RFC 2741)
in both master and subagent roles. Use of this mechanism
requires that the agent was built with support for the
<i>agentx</i> module (which is included as part of the
default build configuration), and also that this support is
explicitly enabled (e.g. via the <i>snmpd.conf</i>
file).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
directives specifically relevant to running as an AgentX
master agent: <br>
master agentx</p>

<p style="margin-left:22%;">will enable the AgentX
functionality and cause the agent to start listening for
incoming AgentX registrations. This can also be activated by
specifying the &rsquo;&minus;x&rsquo; command-line option
(to specify an alternative listening socket).</p>

<p style="margin-left:11%;">agentXPerms SOCKPERMS [DIRPERMS
[USER|UID [GROUP|GID]]]</p>

<p style="margin-left:22%;">Defines the permissions and
ownership of the AgentX Unix Domain socket, and the parent
directories of this socket. SOCKPERMS and DIRPERMS must be
octal digits (see <i>chmod(1)</i> ). By default this socket
will only be accessible to subagents which have the same
userid as the agent.</p>

<p style="margin-left:11%; margin-top: 1em">There is one
directive specifically relevant to running as an AgentX
sub-agent: <br>
agentXPingInterval NUM</p>

<p style="margin-left:22%;">will make the subagent try and
reconnect every NUM seconds to the master if it ever becomes
(or starts) disconnected.</p>

<p style="margin-left:11%; margin-top: 1em">The remaining
directives are relevant to both AgentX master and
sub-agents: <br>
agentXSocket
[&lt;transport-specifier&gt;:]&lt;transport-address&gt;[,...]</p>

<p style="margin-left:22%;">defines the address the master
agent listens at, or the subagent should connect to. The
default is the Unix Domain socket
<tt>&quot;/var/agentx/master&quot;</tt>. Another common
alternative is <tt>tcp:localhost:705</tt>. See the section
<b>LISTENING ADDRESSES</b> in the <i>snmpd(8)</i> manual
page for more information about the format of addresses.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>Note:</p></td>
<td width="3%"></td>
<td width="68%">


<p>Specifying an AgentX socket does <b>not</b>
automatically enable AgentX functionality (unlike the
&rsquo;&minus;x&rsquo; command-line option).</p></td></tr>
</table>

<p style="margin-left:11%;">agentXTimeout NUM</p>

<p style="margin-left:22%;">defines the timeout period (NUM
seconds) for an AgentX request. Default is 1 second. NUM
also be specified with a suffix of one of s (for seconds), m
(for minutes), h (for hours), d (for days), or w (for
weeks).</p>

<p style="margin-left:11%;">agentXRetries NUM</p>

<p style="margin-left:22%;">defines the number of retries
for an AgentX request. Default is 5 retries.</p>

<p style="margin-left:11%; margin-top: 1em">net-snmp ships
with both C and Perl APIs to develop your own AgentX
subagent.</p>

<h2>OTHER CONFIGURATION
<a name="OTHER CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">override
[&minus;rw] OID TYPE VALUE</p>

<p style="margin-left:22%;">This directive allows you to
override a particular OID with a different value (and
possibly a different type of value). The &minus;rw flag will
allow snmp SETs to modify it&rsquo;s value as well. (note
that if you&rsquo;re overriding original functionality, that
functionality will be entirely lost. Thus SETS will do
nothing more than modify the internal overridden value and
will not perform any of the original functionality intended
to be provided by the MIB object. It&rsquo;s an emulation
only.) An example:</p>

<p style="margin-left:32%; margin-top: 1em"><tt>override
sysDescr.0 octet_str &quot;my own sysDescr&quot;</tt></p>

<p style="margin-left:22%; margin-top: 1em">That line will
set the sysDescr.0 value to &quot;my own sysDescr&quot; as
well as make it modifiable with SNMP SETs as well (which is
actually illegal according to the MIB specifications).</p>

<p style="margin-left:22%; margin-top: 1em">Note that care
must be taken when using this. For example, if you try to
override a property of the 3rd interface in the ifTable with
a new value and later the numbering within the ifTable
changes it&rsquo;s index ordering you&rsquo;ll end up with
problems and your modified value won&rsquo;t appear in the
right place in the table.</p>

<p style="margin-left:22%; margin-top: 1em">Valid TYPEs
are: integer, uinteger, octet_str, object_id, counter, null
(for gauges, use &quot;uinteger&quot;; for bit strings, use
&quot;octet_str&quot;). Note that setting an object to
&quot;null&quot; effectively delete&rsquo;s it as being
accessible. No VALUE needs to be given if the object type is
null.</p>

<p style="margin-left:22%; margin-top: 1em">More types
should be available in the future.</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
trying to figure out aspects of the various mib modules
(possibly some that you&rsquo;ve added yourself), the
following may help you spit out some useful debugging
information. First off, please read the snmpd manual page on
the &minus;D flag. Then the following configuration
snmpd.conf token, combined with the &minus;D flag, can
produce useful output: <br>
injectHandler HANDLER modulename [beforeThis]</p>

<p style="margin-left:22%;">This will insert new handlers
into the section of the mib tree referenced by
&quot;modulename&quot;. If &quot;beforeThis&quot; is
specified then the module will be injected before the named
module. This is useful for getting a handler into the exact
right position in the chain.</p>

<p style="margin-left:22%; margin-top: 1em">The types of
handlers available for insertion are: <br>
stash_cache</p>

<p style="margin-left:32%;">Caches information returned
from the lower level. This greatly help the performance of
the agent, at the cost of caching the data such that its no
longer &quot;live&quot; for 30 seconds (in this future, this
will be configurable). Note that this means snmpd will use
more memory as well while the information is cached.
Currently this only works for handlers registered using the
table_iterator support, which is only a few mib tables. To
use it, you need to make sure to install it before the
table_iterator point in the chain, so to do this:</p>


<p style="margin-left:32%; margin-top: 1em"><tt>injectHandler
stash_cache NAME table_iterator</tt></p>

<p style="margin-left:32%; margin-top: 1em">If you want a
table to play with, try walking the <tt>nsModuleTable</tt>
with and without this injected.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>debug</p></td>
<td width="3%"></td>
<td width="68%">


<p>Prints out lots of debugging information when the
&minus;Dhelper:debug flag is passed to the snmpd
application.</p> </td></tr>
</table>

<p style="margin-left:22%;">read_only</p>

<p style="margin-left:32%;">Forces turning off write
support for the given module.</p>

<p style="margin-left:22%;">serialize</p>

<p style="margin-left:32%;">If a module is failing to
handle multiple requests properly (using the new 5.0 module
API), this will force the module to only receive one request
at a time.</p>

<p style="margin-left:22%;">bulk_to_next</p>

<p style="margin-left:32%;">If a module registers to handle
getbulk support, but for some reason is failing to implement
it properly, this module will convert all getbulk requests
to getnext requests before the final module receives it.</p>

<p style="margin-left:11%;">dontLogTCPWrappersConnects</p>

<p style="margin-left:22%;">If the <b>snmpd</b> was
compiled with TCP Wrapper support, it logs every connection
made to the agent. This setting disables the log messages
for accepted connections. Denied connections will still be
logged.</p>

<p style="margin-left:11%;">Figuring out module names</p>

<p style="margin-left:22%;">To figure out which modules you
can inject things into, run <b>snmpwalk</b> on the
<tt>nsModuleTable</tt> which will give a list of all named
modules registered within the agent.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Internal
Data tables</b> <br>
table NAME <br>
add_row NAME INDEX(ES) VALUE(S)</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">The Net-SNMP agent can be
instructed to re-read the various configuration files,
either via an <b>snmpset</b> assignment of integer(1) to
<tt>UCD&minus;SNMP&minus;MIB::versionUpdateConfig.0</tt>
(.1.3.6.1.4.1.2021.100.11.0), or by sending a <b>kill
&minus;HUP</b> signal to the agent process.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>All directives listed with a value of &quot;yes&quot;
actually accept a range of boolean values. These will accept
any of <i>1</i>, <i>yes</i> or <i>true</i> to enable the
corresponding behaviour, or any of <i>0</i>, <i>no</i> or
<i>false</i> to disable it. The default in each case is for
the feature to be turned off, so these directives are
typically only used to enable the appropriate behaviour.</p></td></tr>
</table>

<h2>EXAMPLE CONFIGURATION FILE
<a name="EXAMPLE CONFIGURATION FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See the
EXAMPLE.CONF file in the top level source directory for a
more detailed example of how the above information is used
in real examples.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/snmp/snmpd.conf</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">snmpconf(1),
snmpusm(1), snmp.conf(5), snmp_config(5), snmpd(8),
EXAMPLE.conf, netsnmp_config_api(3).</p>
<hr>
</body>
</html>
