<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:30:33 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CREATE VIEW</title>

</head>
<body>

<h1 align="center">CREATE VIEW</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#PARAMETERS">PARAMETERS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#COMPATIBILITY">COMPATIBILITY</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CREATE_VIEW
&minus; define a new view</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CREATE [ OR
REPLACE ] [ TEMP | TEMPORARY ] VIEW <i>name</i> [ (
<i>column_name</i> [, ...] ) ] <br>
[ WITH ( <i>view_option_name</i> [=
<i>view_option_value</i>] [, ... ] ) ] <br>
AS <i>query</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i><b>CREATE
VIEW</b></i> defines a view of a query. The view is not
physically materialized. Instead, the query is run every
time the view is referenced in a query.</p>

<p style="margin-left:11%; margin-top: 1em"><b>CREATE OR
REPLACE VIEW</b> is similar, but if a view of the same name
already exists, it is replaced. The new query must generate
the same columns that were generated by the existing view
query (that is, the same column names in the same order and
with the same data types), but it may add additional columns
to the end of the list. The calculations giving rise to the
output columns may be completely different.</p>

<p style="margin-left:11%; margin-top: 1em">If a schema
name is given (for example, CREATE VIEW myschema.myview ...)
then the view is created in the specified schema. Otherwise
it is created in the current schema. Temporary views exist
in a special schema, so a schema name cannot be given when
creating a temporary view. The name of the view must be
distinct from the name of any other view, table, sequence,
index or foreign table in the same schema.</p>

<h2>PARAMETERS
<a name="PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">TEMPORARY or
TEMP</p>

<p style="margin-left:17%;">If specified, the view is
created as a temporary view. Temporary views are
automatically dropped at the end of the current session.
Existing permanent relations with the same name are not
visible to the current session while the temporary view
exists, unless they are referenced with
schema&minus;qualified names.</p>

<p style="margin-left:17%; margin-top: 1em">If any of the
tables referenced by the view are temporary, the view is
created as a temporary view (whether TEMPORARY is specified
or not).</p>


<p style="margin-left:11%; margin-top: 1em"><i>name</i></p>

<p style="margin-left:17%;">The name (optionally
schema&minus;qualified) of a view to be created.</p>


<p style="margin-left:11%; margin-top: 1em"><i>column_name</i></p>

<p style="margin-left:17%;">An optional list of names to be
used for columns of the view. If not given, the column names
are deduced from the query.</p>

<p style="margin-left:11%; margin-top: 1em">WITH (
<i>view_option_name</i> [= <i>view_option_value</i>] [, ...
] )</p>

<p style="margin-left:17%;">This clause specifies optional
parameters for a view; currently, the only supported
parameter name is security_barrier, which should be enabled
when a view is intended to provide row&minus;level security.
See Section 37.4, &ldquo;Rules and Privileges&rdquo;, in the
documentation for full details.</p>


<p style="margin-left:11%; margin-top: 1em"><i>query</i></p>

<p style="margin-left:17%;">A <b>SELECT</b>(7) or
<b>VALUES</b>(7) command which will provide the columns and
rows of the view.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Currently,
views are read only: the system will not allow an insert,
update, or delete on a view. You can get the effect of an
updatable view by creating INSTEAD triggers on the view,
which must convert attempted inserts, etc. on the view into
appropriate actions on other tables. For more information
see CREATE TRIGGER (<b>CREATE_TRIGGER</b>(7)). Another
possibility is to create rules (see CREATE RULE
(<b>CREATE_RULE</b>(7))), but in practice triggers are
easier to understand and use correctly.</p>

<p style="margin-left:11%; margin-top: 1em">Use the DROP
VIEW (<b>DROP_VIEW</b>(7)) statement to drop views.</p>

<p style="margin-left:11%; margin-top: 1em">Be careful that
the names and types of the view's columns will be assigned
the way you want. For example:</p>

<p style="margin-left:17%; margin-top: 1em">CREATE VIEW
vista AS SELECT 'Hello World';</p>

<p style="margin-left:11%; margin-top: 1em">is bad form in
two ways: the column name defaults to ?column?, and the
column data type defaults to unknown. If you want a string
literal in a view's result, use something like:</p>

<p style="margin-left:17%; margin-top: 1em">CREATE VIEW
vista AS SELECT text 'Hello World' AS hello;</p>

<p style="margin-left:11%; margin-top: 1em">Access to
tables referenced in the view is determined by permissions
of the view owner. In some cases, this can be used to
provide secure but restricted access to the underlying
tables. However, not all views are secure against tampering;
see Section 37.4, &ldquo;Rules and Privileges&rdquo;, in the
documentation for details. Functions called in the view are
treated the same as if they had been called directly from
the query using the view. Therefore the user of a view must
have permissions to call all functions used by the view.</p>

<p style="margin-left:11%; margin-top: 1em">When <b>CREATE
OR REPLACE VIEW</b> is used on an existing view, only the
view's defining SELECT rule is changed. Other view
properties, including ownership, permissions, and
non&minus;SELECT rules, remain unchanged. You must own the
view to replace it (this includes being a member of the
owning role).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Create a view
consisting of all comedy films:</p>

<p style="margin-left:17%; margin-top: 1em">CREATE VIEW
comedies AS <br>
SELECT * <br>
FROM films <br>
WHERE kind = 'Comedy';</p>

<p style="margin-left:11%; margin-top: 1em">This will
create a view containing the columns that are in the film
table at the time of view creation. Though * was used to
create the view, columns added later to the table will not
be part of the view.</p>

<h2>COMPATIBILITY
<a name="COMPATIBILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The SQL
standard specifies some additional capabilities for the
<b>CREATE VIEW</b> statement:</p>

<p style="margin-left:17%; margin-top: 1em">CREATE VIEW
<i>name</i> [ ( <i>column_name</i> [, ...] ) ] <br>
AS <i>query</i> <br>
[ WITH [ CASCADED | LOCAL ] CHECK OPTION ]</p>

<p style="margin-left:11%; margin-top: 1em">The optional
clauses for the full SQL command are:</p>

<p style="margin-left:11%; margin-top: 1em">CHECK
OPTION</p>

<p style="margin-left:17%;">This option has to do with
updatable views. All <b>INSERT</b> and <b>UPDATE</b>
commands on the view will be checked to ensure data satisfy
the view&minus;defining condition (that is, the new data
would be visible through the view). If they do not, the
update will be rejected.</p>

<p style="margin-left:11%; margin-top: 1em">LOCAL</p>

<p style="margin-left:17%;">Check for integrity on this
view.</p>

<p style="margin-left:11%; margin-top: 1em">CASCADED</p>

<p style="margin-left:17%;">Check for integrity on this
view and on any dependent view. CASCADED is assumed if
neither CASCADED nor LOCAL is specified.</p>

<p style="margin-left:11%; margin-top: 1em"><b>CREATE OR
REPLACE VIEW</b> is a PostgreSQL language extension. So is
the concept of a temporary view.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ALTER VIEW
(<b>ALTER_VIEW</b>(7)), DROP VIEW (<b>DROP_VIEW</b>(7))</p>
<hr>
</body>
</html>
