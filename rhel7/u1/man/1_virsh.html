<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:41:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRSH</title>

</head>
<body>

<h1 align="center">VIRSH</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#GENERIC COMMANDS">GENERIC COMMANDS</a><br>
<a href="#DOMAIN COMMANDS">DOMAIN COMMANDS</a><br>
<a href="#DEVICE COMMANDS">DEVICE COMMANDS</a><br>
<a href="#NODEDEV COMMANDS">NODEDEV COMMANDS</a><br>
<a href="#VIRTUAL NETWORK COMMANDS">VIRTUAL NETWORK COMMANDS</a><br>
<a href="#INTERFACE COMMANDS">INTERFACE COMMANDS</a><br>
<a href="#STORAGE POOL COMMANDS">STORAGE POOL COMMANDS</a><br>
<a href="#VOLUME COMMANDS">VOLUME COMMANDS</a><br>
<a href="#SECRET COMMANDS">SECRET COMMANDS</a><br>
<a href="#SNAPSHOT COMMANDS">SNAPSHOT COMMANDS</a><br>
<a href="#NWFILTER COMMANDS">NWFILTER COMMANDS</a><br>
<a href="#HYPERVISOR-SPECIFIC COMMANDS">HYPERVISOR-SPECIFIC COMMANDS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virsh &minus;
management user interface</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>virsh</b> [
<i><small>OPTION</small></i> ]... [
<i><small>COMMAND_STRING</small></i> ]</p>

<p style="margin-left:11%; margin-top: 1em"><b>virsh</b> [
<i><small>OPTION</small></i> ]...
<i><small>COMMAND</small></i> [ <i><small>ARG</small></i>
]...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>virsh</b> program is the main interface for managing
virsh guest domains. The program can be used to create,
pause, and shutdown domains. It can also be used to list
current domains. Libvirt is a C toolkit to interact with the
virtualization capabilities of recent versions of Linux (and
other OSes). It is free software available under the
<small>GNU</small> Lesser General Public License.
Virtualization of the Linux Operating System means the
ability to run multiple instances of Operating Systems
concurrently on a single hardware system where the basic
resources are driven by a Linux instance. The library aims
at providing a long term stable C <small>API.</small> It
currently supports Xen, <small>QEMU, KVM, LXC,</small>
OpenVZ, VirtualBox and VMware <small>ESX.</small></p>

<p style="margin-left:11%; margin-top: 1em">The basic
structure of most virsh usage is:</p>

<pre style="margin-left:11%; margin-top: 1em">  virsh [OPTION]... &lt;command&gt; &lt;domain&gt; [ARG]...</pre>


<p style="margin-left:11%; margin-top: 1em">Where
<i>command</i> is one of the commands listed below;
<i>domain</i> is the numeric domain id, or the domain name,
or the domain <small>UUID</small> ; and
<i><small>ARGS</small></i> are command specific options.
There are a few exceptions to this rule in the cases where
the command in question acts on all domains, the entire
machine, or directly on the xen hypervisor. Those exceptions
will be clear for each of those commands. Note: it is
permissible to give numeric names to domains, however, doing
so will result in a domain that can only be identified by
domain id. In other words, if a numeric value is supplied it
will be interpreted as a domain id, not as a name.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>virsh</b> program can be used either to run one
<i><small>COMMAND</small></i> by giving the command and its
arguments on the shell command line, or a
<i><small>COMMAND_STRING</small></i> which is a single shell
argument consisting of multiple
<i><small>COMMAND</small></i> actions and their arguments
joined with whitespace, and separated by semicolons between
commands. Within <i><small>COMMAND_STRING</small></i> ,
virsh understands the same single, double, and backslash
escapes as the shell, although you must add another layer of
shell escaping in creating the single shell argument. If no
command is given in the command line, <b>virsh</b> will then
start a minimal interpreter waiting for your commands, and
the <b>quit</b> command will then exit the program.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>virsh</b> program understands the following
<i><small>OPTIONS</small></i> . <b><br>
&minus;c</b>, <b>&minus;&minus;connect</b>
<i><small>URI</small></i></p>

<p style="margin-left:17%;">Connect to the specified
<i><small>URI</small></i> , as if by the <b>connect</b>
command, instead of the default connection.</p>

<p style="margin-left:11%;"><b>&minus;d</b>,
<b>&minus;&minus;debug</b> <i><small>LEVEL</small></i></p>

<p style="margin-left:17%;">Enable debug messages at
integer <i><small>LEVEL</small></i> and above.
<i><small>LEVEL</small></i> can range from 0 to 4 (default).
See the documentation of <b><small>VIRSH_DEBUG</small></b>
environment variable below for the description of each
<i><small>LEVEL</small></i> .</p>

<p style="margin-left:11%;"><b>&minus;e</b>,
<b>&minus;&minus;escape</b> <i>string</i></p>

<p style="margin-left:17%;">Set alternative escape sequence
for <i>console</i> command. By default, telnet&rsquo;s
<b>^]</b> is used. Allowed characters when using hat
notation are: alphabetic character, @, [, ], \, ^, _.</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
behave as if the <b>help</b> command were given instead.</p>

<p style="margin-left:11%;"><b>&minus;k</b>,
<b>&minus;&minus;keepalive&minus;interval</b>
<i><small>INTERVAL</small></i></p>

<p style="margin-left:17%;">Set an
<i><small>INTERVAL</small></i> (in seconds) for sending
keepalive messages to check whether connection to the server
is still alive. Setting the interval to 0 disables client
keepalive mechanism.</p>

<p style="margin-left:11%;"><b>&minus;K</b>,
<b>&minus;&minus;keepalive&minus;count</b>
<i><small>COUNT</small></i></p>

<p style="margin-left:17%;">Set a number of times keepalive
message can be sent without getting an answer from the
server without marking the connection dead. There is no
effect to this setting in case the
<i><small>INTERVAL</small></i> is set to 0.</p>

<p style="margin-left:11%;"><b>&minus;l</b>,
<b>&minus;&minus;log</b> <i><small>FILE</small></i></p>

<p style="margin-left:17%;">Output logging details to
<i><small>FILE</small></i> .</p>

<p style="margin-left:11%;"><b>&minus;q</b>,
<b>&minus;&minus;quiet</b></p>

<p style="margin-left:17%;">Avoid extra informational
messages.</p>

<p style="margin-left:11%;"><b>&minus;r</b>,
<b>&minus;&minus;readonly</b></p>

<p style="margin-left:17%;">Make the initial connection
read-only, as if by the <i>&minus;&minus;readonly</i> option
of the <b>connect</b> command.</p>

<p style="margin-left:11%;"><b>&minus;t</b>,
<b>&minus;&minus;timing</b></p>

<p style="margin-left:17%;">Output elapsed time information
for each command.</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;version[=short]</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
prints the version of the libvirt library virsh is coming
from</p>

<p style="margin-left:11%;"><b>&minus;V</b>,
<b>&minus;&minus;version=long</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
prints the version of the libvirt library virsh is coming
from and which options and driver are compiled in.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most
<b>virsh</b> operations rely upon the libvirt library being
able to connect to an already running libvirtd service. This
can usually be done using the command <b>service libvirtd
start</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Most
<b>virsh</b> commands require root privileges to run due to
the communications channels used to talk to the hypervisor.
Running as non root will return an error.</p>

<p style="margin-left:11%; margin-top: 1em">Most
<b>virsh</b> commands act synchronously, except maybe
shutdown, setvcpus and setmem. In those cases the fact that
the <b>virsh</b> program returned, may not mean the action
is complete and you must poll periodically to detect that
the guest completed the operation.</p>

<p style="margin-left:11%; margin-top: 1em"><b>virsh</b>
strives for backward compatibility. Although the <b>help</b>
command only lists the preferred usage of a command, if an
older version of <b>virsh</b> supported an alternate
spelling of a command or option (such as
<i>&minus;&minus;tunnelled</i> instead of
<i>&minus;&minus;tunneled</i>), then scripts using that
older spelling will continue to work.</p>

<p style="margin-left:11%; margin-top: 1em">Several
<b>virsh</b> commands take an optionally scaled integer; if
no scale is provided, then the default is listed in the
command (for historical reasons, some commands default to
bytes, while other commands default to kibibytes). The
following case-insensitive suffixes can be used to select a
specific scale: <br>
b, byte byte 1 <small><br>
KB</small> kilobyte 1,000 <br>
k, KiB kibibyte 1,024 <small><br>
MB</small> megabyte 1,000,000 <br>
M, MiB mebibyte 1,048,576 <small><br>
GB</small> gigabyte 1,000,000,000 <br>
G, GiB gibibyte 1,073,741,824 <small><br>
TB</small> terabyte 1,000,000,000,000 <br>
T, TiB tebibyte 1,099,511,627,776 <small><br>
PB</small> petabyte 1,000,000,000,000,000 <br>
P, PiB pebibyte 1,125,899,906,842,624 <small><br>
EB</small> exabyte 1,000,000,000,000,000,000 <br>
E, EiB exbibyte 1,152,921,504,606,846,976</p>

<h2>GENERIC COMMANDS
<a name="GENERIC COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands are generic i.e. not specific to a domain. <b><br>
help</b> [<i>command-or-group</i>]</p>

<p style="margin-left:17%;">This lists each of the virsh
commands. When used without options, all commands are
listed, one per line, grouped into related categories,
displaying the keyword for each group.</p>

<p style="margin-left:17%; margin-top: 1em">To display only
commands for a specific group, give the keyword for that
group as an option. For example:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh # help host
  Host and Hypervisor (help keyword 'host'):
     capabilities                   capabilities
     cpu&minus;models                     show the CPU models for an architecture
     connect                        (re)connect to hypervisor
     freecell                       NUMA free memory
     hostname                       print the hypervisor hostname
     qemu&minus;attach                    Attach to existing QEMU process
     qemu&minus;monitor&minus;command           QEMU Monitor Command
     qemu&minus;agent&minus;command             QEMU Guest Agent Command
     sysinfo                        print the hypervisor sysinfo
     uri                            print the hypervisor canonical URI</pre>


<p style="margin-left:17%; margin-top: 1em">To display
detailed information for a specific command, give its name
as the option instead. For example:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh # help list
   NAME
     list &minus; list domains
   SYNOPSIS
     list [&minus;&minus;inactive] [&minus;&minus;all]
   DESCRIPTION
     Returns list of domains.
   OPTIONS
     &minus;&minus;inactive       list inactive domains
     &minus;&minus;all            list inactive &amp; active domains</pre>


<p style="margin-left:11%;"><b>quit</b>, <b>exit</b></p>

<p style="margin-left:17%;">quit this interactive
terminal</p>

<p style="margin-left:11%;"><b>version</b>
[<i>&minus;&minus;daemon</i>]</p>

<p style="margin-left:17%;">Will print out the major
version info about what this built from. If
<i>&minus;&minus;daemon</i> is specified then the version of
the libvirt daemon is included in the output.</p>


<p style="margin-left:23%; margin-top: 1em"><b>Example</b></p>


<pre style="margin-left:23%; margin-top: 1em"> $ virsh version
 Compiled against library: libvirt 1.2.3
 Using library: libvirt 1.2.3
 Using API: QEMU 1.2.3
 Running hypervisor: QEMU 2.0.50
 $ virsh version &minus;&minus;daemon
 Compiled against library: libvirt 1.2.3
 Using library: libvirt 1.2.3
 Using API: QEMU 1.2.3
 Running hypervisor: QEMU 2.0.50
 Running against daemon: 1.2.6</pre>


<p style="margin-left:11%;"><b>cd</b>
[<i>directory</i>]</p>

<p style="margin-left:17%;">Will change current directory
to <i>directory</i>. The default directory for the <b>cd</b>
command is the home directory or, if there is no
<i><small>HOME</small></i> variable in the environment, the
root directory.</p>

<p style="margin-left:17%; margin-top: 1em">This command is
only available in interactive mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>pwd</b></p></td>
<td width="2%"></td>
<td width="51%">


<p>Will print the current directory.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>connect</b> [
<i><small>URI</small></i> ]
[<i>&minus;&minus;readonly</i>]</p>

<p style="margin-left:17%;">(Re)&minus;Connect to the
hypervisor. When the shell is first started, this is
automatically run with the <i><small>URI</small></i>
parameter requested by the <tt>&quot;&minus;c&quot;</tt>
option on the command line. The <i><small>URI</small></i>
parameter specifies how to connect to the hypervisor. The
documentation page at &lt;http://libvirt.org/uri.html&gt;
list the values supported, but the most common are: <br>
xen:///</p>

<p style="margin-left:23%;">this is used to connect to the
local Xen hypervisor</p>

<p style="margin-left:17%;">qemu:///system</p>

<p style="margin-left:23%;">connect locally as root to the
daemon supervising <small>QEMU</small> and
<small>KVM</small> domains</p>

<p style="margin-left:17%;">qemu:///session</p>

<p style="margin-left:23%;">connect locally as a normal
user to his own set of <small>QEMU</small> and
<small>KVM</small> domains</p>

<p style="margin-left:17%;">lxc:///</p>

<p style="margin-left:23%;">connect to a local linux
container</p>

<p style="margin-left:17%; margin-top: 1em">To find the
currently used <small>URI,</small> check the <i>uri</i>
command documented below.</p>

<p style="margin-left:17%; margin-top: 1em">For remote
access see the documentation page at
&lt;http://libvirt.org/uri.html&gt; on how to make URIs. The
<i>&minus;&minus;readonly</i> option allows for read-only
connection</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>uri</b></p></td>
<td width="2%"></td>
<td width="83%">


<p>Prints the hypervisor canonical <small>URI,</small> can
be useful in shell mode.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>hostname</b></p>

<p style="margin-left:17%;">Print the hypervisor
hostname.</p>

<p style="margin-left:11%;"><b>sysinfo</b></p>

<p style="margin-left:17%;">Print the <small>XML</small>
representation of the hypervisor sysinfo, if available.</p>

<p style="margin-left:11%;"><b>nodeinfo</b></p>

<p style="margin-left:17%;">Returns basic information about
the node, like number and type of <small>CPU,</small> and
size of the physical memory. The output corresponds to
virNodeInfo structure. Specifically, the &quot;
<small>CPU</small> socket(s)&quot; field means number of
<small>CPU</small> sockets per <small>NUMA</small> cell.</p>

<p style="margin-left:11%;"><b>nodecpumap</b>
[<i>&minus;&minus;pretty</i>]</p>

<p style="margin-left:17%;">Displays the node&rsquo;s total
number of CPUs, the number of online CPUs and the list of
online CPUs.</p>

<p style="margin-left:17%; margin-top: 1em">With
<i>&minus;&minus;pretty</i> the online CPUs are printed as a
range instead of a list.</p>

<p style="margin-left:11%;"><b>nodecpustats</b>
[<i>cpu</i>] [<i>&minus;&minus;percent</i>]</p>

<p style="margin-left:17%;">Returns cpu stats of the node.
If <i>cpu</i> is specified, this will prints specified cpu
statistics only. If <i>&minus;&minus;percent</i> is
specified, this will prints percentage of each kind of cpu
statistics during 1 second.</p>

<p style="margin-left:11%;"><b>nodememstats</b>
[<i>cell</i>]</p>

<p style="margin-left:17%;">Returns memory stats of the
node. If <i>cell</i> is specified, this will prints
specified cell statistics only.</p>

<p style="margin-left:11%;"><b>nodesuspend</b>
[<i>target</i>] [<i>duration</i>]</p>

<p style="margin-left:17%;">Puts the node (host machine)
into a system-wide sleep state and schedule the node&rsquo;s
Real-Time-Clock interrupt to resume the node after the time
duration specified by <i>duration</i> is out. <i>target</i>
specifies the state to which the host will be suspended to,
it can be &quot;mem&quot; (suspend to <small>RAM</small> ),
&quot;disk&quot; (suspend to disk), or &quot;hybrid&quot;
(suspend to both <small>RAM</small> and disk).
<i>duration</i> specifies the time duration in seconds for
which the host has to be suspended, it should be at least 60
seconds.</p>

<p style="margin-left:11%;"><b>node-memory-tune</b>
[<i>shm-pages-to-scan</i>] [<i>shm-sleep-millisecs</i>] <br>
[<i>shm-merge-across-nodes</i>]</p>

<p style="margin-left:17%;">Allows you to display or set
the node memory parameters. <i>shm-pages-to-scan</i> can be
used to set the number of pages to scan before the shared
memory service goes to sleep; <i>shm-sleep-millisecs</i> can
be used to set the number of millisecs the shared memory
service should sleep before next scan;
<i>shm-merge-across-nodes</i> specifies if pages from
different numa nodes can be merged. When set to 0, only
pages which physically reside in the memory area of same
<small>NUMA</small> node can be merged. When set to 1, pages
from all nodes can be merged. Default to 1.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
Currently the &quot;shared memory service&quot; only means
<small>KSM</small> (Kernel Samepage Merging).</p>

<p style="margin-left:11%;"><b>capabilities</b></p>

<p style="margin-left:17%;">Print an <small>XML</small>
document describing the capabilities of the hypervisor we
are currently connected to. This includes a section on the
host capabilities in terms of <small>CPU</small> and
features, and a set of description for each kind of guest
which can be virtualized. For a more complete description
see: <br>
&lt;http://libvirt.org/formatcaps.html&gt; The
<small>XML</small> also show the <small>NUMA</small>
topology information if available.</p>

<p style="margin-left:11%;"><b>domcapabilities</b>
[<i>virttype</i>] [<i>emulatorbin</i>] [<i>arch</i>]
[<i>machine</i>]</p>

<p style="margin-left:17%;">Print an <small>XML</small>
document describing the domain capabilities for the
hypervisor we are connected to using information either
sourced from an existing domain or taken from the <b>virsh
capabilities</b> output. This may be useful if you intend to
create a new domain and are curious if for instance it could
make use of <small>VFIO</small> by creating a domain for the
hypervisor with a specific emulator and architecture.</p>

<p style="margin-left:17%; margin-top: 1em">Each hypervisor
will have different requirements regarding which options are
required and which are optional. A hypervisor can support
providing a default value for any of the options.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>virttype</i> option specifies the virtualization type
used. The value to be used is either from the
&rsquo;type&rsquo; attribute of the &lt;domain/&gt; top
level element from the domain <small>XML</small> or the
&rsquo;type&rsquo; attribute found within each
&lt;guest/&gt; element from the <b>virsh capabilities</b>
output. The <i>emulatorbin</i> option specifies the path to
the emulator. The value to be used is either the
&lt;emulator&gt; element in the domain <small>XML</small> or
the <b>virsh capabilities</b> output. The <i>arch</i> option
specifies the architecture to be used for the domain. The
value to be used is either the &quot;arch&quot; attribute
from the domain&rsquo;s <small>XML</small> &lt;os/&gt;
element and &lt;type/&gt; subelement or the &quot;name&quot;
attribute of an &lt;arch/&gt; element from the <b>virsh
capabililites</b> output. The <i>machine</i> specifies the
machine type for the emulator. The value to be used is
either the &quot;machine&quot; attribute from the
domain&rsquo;s <small>XML</small> &lt;os/&gt; element and
&lt;type/&gt; subelement or one from a list of machines from
the <b>virsh capabilities</b> output for a specific
architecture and domain type.</p>

<p style="margin-left:17%; margin-top: 1em">For the qemu
hypervisor, a <i>virttype</i> of either &rsquo;qemu&rsquo;
or &rsquo;kvm&rsquo; must be supplied along with either the
<i>emulatorbin</i> or <i>arch</i> in order to generate
output for the default <i>machine</i>. Supplying a
<i>machine</i> value will generate output for the specific
machine.</p>

<p style="margin-left:11%;"><b>inject-nmi</b>
<i>domain</i></p>

<p style="margin-left:17%;">Inject <small>NMI</small> to
the guest.</p>

<p style="margin-left:11%;"><b>list</b>
[<i>&minus;&minus;inactive</i> | <i>&minus;&minus;all</i>]
[<i>&minus;&minus;managed&minus;save</i>]
[<i>&minus;&minus;title</i>] { [<i>&minus;&minus;table</i>]
| <i><br>
&minus;&minus;name</i> | <i>&minus;&minus;uuid</i> }
[<i>&minus;&minus;persistent</i>]
[<i>&minus;&minus;transient</i>]
[<i>&minus;&minus;with&minus;managed&minus;save</i>] <br>
[<i>&minus;&minus;without&minus;managed&minus;save</i>]
[<i>&minus;&minus;autostart</i>]
[<i>&minus;&minus;no&minus;autostart</i>] <br>
[<i>&minus;&minus;with&minus;snapshot</i>]
[<i>&minus;&minus;without&minus;snapshot</i>]
[<i>&minus;&minus;state&minus;running</i>] <br>
[<i>&minus;&minus;state&minus;paused</i>]
[<i>&minus;&minus;state&minus;shutoff</i>]
[<i>&minus;&minus;state&minus;other</i>]</p>

<p style="margin-left:17%;">Prints information about
existing domains. If no options are specified it prints out
information about running domains.</p>

<p style="margin-left:17%; margin-top: 1em">An example
format for the list is as follows:</p>

<p style="margin-left:17%; margin-top: 1em"><b>virsh</b>
list <br>
Id Name State <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
0 Domain&minus;0 running <br>
2 fedora paused</p>

<p style="margin-left:17%; margin-top: 1em">Name is the
name of the domain. <small>ID</small> the domain numeric id.
State is the run state (see below).</p>


<p style="margin-left:17%; margin-top: 1em"><b><small>STATES</small></b></p>

<p style="margin-left:17%; margin-top: 1em">The State field
lists 8 states for a domain, and which ones the current
domain is in. <b><br>
cpu-models</b> <i>arch</i></p>

<p style="margin-left:23%;">Print the list of
<small>CPU</small> models known for the specified
architecture.</p>

<p style="margin-left:17%;"><b>running</b></p>

<p style="margin-left:23%;">The domain is currently running
on a <small>CPU</small></p>

<p style="margin-left:17%;"><b>idle</b></p>

<p style="margin-left:23%;">The domain is idle, and not
running or runnable. This can be caused because the domain
is waiting on <small>IO</small> (a traditional wait state)
or has gone to sleep because there was nothing else for it
to do.</p>

<p style="margin-left:17%;"><b>paused</b></p>

<p style="margin-left:23%;">The domain has been paused,
usually occurring through the administrator running <b>virsh
suspend</b>. When in a paused state the domain will still
consume allocated resources like memory, but will not be
eligible for scheduling by the hypervisor.</p>

<p style="margin-left:17%;"><b>shutdown</b></p>

<p style="margin-left:23%;">The domain is in the process of
shutting down, i.e. the guest operating system has been
notified and should be in the process of stopping its
operations gracefully.</p>

<p style="margin-left:17%;"><b>shut off</b></p>

<p style="margin-left:23%;">The domain is not running.
Usually this indicates the domain has been shut down
completely, or has not been started.</p>

<p style="margin-left:17%;"><b>crashed</b></p>

<p style="margin-left:23%;">The domain has crashed, which
is always a violent ending. Usually this state can only
occur if the domain has been configured not to restart on
crash.</p>

<p style="margin-left:17%;"><b>dying</b></p>

<p style="margin-left:23%;">The domain is in process of
dying, but hasn&rsquo;t completely shutdown or crashed.</p>

<p style="margin-left:17%;"><b>pmsuspended</b></p>

<p style="margin-left:23%;">The domain has been suspended
by guest power management, e.g. entered into s3 state.</p>

<p style="margin-left:17%; margin-top: 1em">Normally only
active domains are listed. To list inactive domains specify
<i>&minus;&minus;inactive</i> or <i>&minus;&minus;all</i> to
list both active and inactive domains.</p>

<p style="margin-left:17%; margin-top: 1em">To further
filter the list of domains you may specify one or more of
filtering flags supported by the <b>list</b> command. These
flags are grouped by function. Specifying one or more flags
from a group enables the filter group. Note that some
combinations of flags may yield no results. Supported
filtering flags and groups: <b><br>
Persistence</b></p>

<p style="margin-left:23%;">Flag
<i>&minus;&minus;persistent</i> is used to include
persistent domains in the returned list. To include
transient domains specify
<i>&minus;&minus;transient</i>.</p>

<p style="margin-left:17%;"><b>Existence of managed save
image</b></p>

<p style="margin-left:23%;">To list domains having a
managed save image specify flag
<i>&minus;&minus;with&minus;managed&minus;save</i>. For
domains that don&rsquo;t have a managed save image specify
<i>&minus;&minus;without&minus;managed&minus;save</i>.</p>

<p style="margin-left:17%;"><b>Domain state</b></p>

<p style="margin-left:23%;">The following filter flags
select a domain by its state:
<i>&minus;&minus;state&minus;running</i> for running
domains, <i>&minus;&minus;state&minus;paused</i> for paused
domains, <i>&minus;&minus;state&minus;shutoff</i> for turned
off domains and <i>&minus;&minus;state&minus;other</i> for
all other states as a fallback.</p>

<p style="margin-left:17%;"><b>Autostarting domains</b></p>

<p style="margin-left:23%;">To list autostarting domains
use the flag <i>&minus;&minus;autostart</i>. To list domains
with this feature disabled use
<i>&minus;&minus;no&minus;autostart</i>.</p>

<p style="margin-left:17%;"><b>Snapshot existence</b></p>

<p style="margin-left:23%;">Domains that have snapshot
images can be listed using flag
<i>&minus;&minus;with&minus;snapshot</i>, domains without a
snapshot <i>&minus;&minus;without&minus;snapshot</i>.</p>

<p style="margin-left:17%; margin-top: 1em">When talking to
older servers, this command is forced to use a series of
<small>API</small> calls with an inherent race, where a
domain might not be listed or might appear more than once if
it changed state between calls while the list was being
collected. Newer servers do not have this problem.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;managed&minus;save</i> is specified, then
domains that have managed save state (only possible if they
are in the <b>shut off</b> state, so you need to specify
<i>&minus;&minus;inactive</i> or <i>&minus;&minus;all</i> to
actually list them) will instead show as <b>saved</b> in the
listing. This flag is usable only with the default
<i>&minus;&minus;table</i> output. Note that this flag does
not filter the list of domains.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;name</i> is specified, domain names are
printed instead of the table formatted one per line. If
<i>&minus;&minus;uuid</i> is specified domain&rsquo;s
<small>UUID</small> &rsquo;s are printed instead of names.
Flag <i>&minus;&minus;table</i> specifies that the legacy
table-formatted output should be used. This is the default.
All of these are mutually exclusive.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;title</i> is specified, then the short
domain description (title) is printed in an extra column.
This flag is usable only with the default
<i>&minus;&minus;table</i> output.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<p style="margin-left:17%; margin-top: 1em"><b>virsh</b>
list &minus;&minus;title <br>
Id Name State Title <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
0 Domain&minus;0 running Mailserver 1 <br>
2 fedora paused</p>

<p style="margin-left:11%;"><b>freecell</b> [{
[<i>&minus;&minus;cellno</i>] <b>cellno</b> |
<i>&minus;&minus;all</i> }]</p>

<p style="margin-left:17%;">Prints the available amount of
memory on the machine or within a <small>NUMA</small> cell.
The freecell command can provide one of three different
displays of available memory on the machine depending on the
options specified. With no options, it displays the total
free memory on the machine. With the &minus;&minus;all
option, it displays the free memory in each cell and the
total free memory on the machine. Finally, with a numeric
argument or with &minus;&minus;cellno plus a cell number it
will display the free memory for the specified cell
only.</p>

<p style="margin-left:11%;"><b>freepages</b> [{
[<i>&minus;&minus;cellno</i>] <i>cellno</i>
[<i>&minus;&minus;pagesize</i>] <i>pagesize</i> |
<i>&minus;&minus;all</i> }]</p>

<p style="margin-left:17%;">Prints the available amount of
pages within a <small>NUMA</small> cell. <i>cellno</i>
refers to the <small>NUMA</small> cell you&rsquo;re
interested in. <i>pagesize</i> is a scaled integer (see
<b><small>NOTES</small></b> above). Alternatively, if
<i>&minus;&minus;all</i> is used, info on each possible
combination of <small>NUMA</small> cell and page size is
printed out.</p>

<p style="margin-left:11%;"><b>cpu-baseline</b>
<i><small>FILE</small></i>
[<i>&minus;&minus;features</i>]</p>

<p style="margin-left:17%;">Compute baseline
<small>CPU</small> which will be supported by all host CPUs
given in &lt;file&gt;. The list of host CPUs is built by
extracting all &lt;cpu&gt; elements from the &lt;file&gt;.
Thus, the &lt;file&gt; can contain either a set of
&lt;cpu&gt; elements separated by new lines or even a set of
complete &lt;capabilities&gt; elements printed by
<b>capabilities</b> command. If
<i>&minus;&minus;features</i> is specified then the
resulting <small>XML</small> description will explicitly
include all features that make up the <small>CPU,</small>
without this option features that are part of the
<small>CPU</small> model will not be listed in the
<small>XML</small> description.</p>

<p style="margin-left:11%;"><b>cpu-compare</b>
<i><small>FILE</small></i> [<i>&minus;&minus;error</i>]</p>

<p style="margin-left:17%;">Compare <small>CPU</small>
definition from <small>XML</small> &lt;file&gt; with host
<small>CPU.</small> The <small>XML</small> &lt;file&gt; may
contain either host or guest <small>CPU</small> definition.
The host <small>CPU</small> definition is the &lt;cpu&gt;
element and its contents as printed by <b>capabilities</b>
command. The guest <small>CPU</small> definition is the
&lt;cpu&gt; element and its contents from domain
<small>XML</small> definition. For more information on guest
<small>CPU</small> definition see:
&lt;http://libvirt.org/formatdomain.html#elementsCPU&gt;. If
<i>&minus;&minus;error</i> is specified, the command will
return an error when the given <small>CPU</small> is
incompatible with host <small>CPU</small> and a message
providing more details about the incompatibility will be
printed out.</p>

<p style="margin-left:11%;"><b>echo</b>
[<i>&minus;&minus;shell</i>] [<i>&minus;&minus;xml</i>]
[<i>arg</i>...]</p>

<p style="margin-left:17%;">Echo back each <i>arg</i>,
separated by space. If <i>&minus;&minus;shell</i> is
specified, then the output will be single-quoted where
needed, so that it is suitable for reuse in a shell context.
If <i>&minus;&minus;xml</i> is specified, then the output
will be escaped for use in <small>XML.</small></p>

<h2>DOMAIN COMMANDS
<a name="DOMAIN COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate domains directly, as stated previously
most commands take domain as the first parameter. The
<i>domain</i> can be specified as a short integer, a name or
a full <small>UUID.</small> <b><br>
autostart</b> [<i>&minus;&minus;disable</i>]
<i>domain</i></p>

<p style="margin-left:17%;">Configure a domain to be
automatically started at boot.</p>

<p style="margin-left:17%; margin-top: 1em">The option
<i>&minus;&minus;disable</i> disables autostarting.</p>

<p style="margin-left:11%;"><b>console</b> <i>domain</i>
[<i>devname</i>] [<i>&minus;&minus;safe</i>]
[<i>&minus;&minus;force</i>]</p>

<p style="margin-left:17%;">Connect the virtual serial
console for the guest. The optional <i>devname</i> parameter
refers to the device alias of an alternate console, serial
or parallel device configured for the guest. If omitted, the
primary console will be opened.</p>

<p style="margin-left:17%; margin-top: 1em">If the flag
<i>&minus;&minus;safe</i> is specified, the connection is
only attempted if the driver supports safe console handling.
This flag specifies that the server has to ensure exclusive
access to console devices. Optionally the
<i>&minus;&minus;force</i> flag may be specified, requesting
to disconnect any existing sessions, such as in a case of a
broken connection.</p>

<p style="margin-left:11%;"><b>create</b>
<i><small>FILE</small></i> [<i>&minus;&minus;console</i>]
[<i>&minus;&minus;paused</i>]
[<i>&minus;&minus;autodestroy</i>]
[<i>&minus;&minus;pass&minus;fds N,M,...</i>]</p>

<p style="margin-left:17%;">Create a domain from an
<small>XML</small> &lt;file&gt;. An easy way to create the
<small>XML</small> &lt;file&gt; is to use the <b>dumpxml</b>
command to obtain the definition of a pre-existing guest.
The domain will be paused if the <i>&minus;&minus;paused</i>
option is used and supported by the driver; otherwise it
will be running. If <i>&minus;&minus;console</i> is
requested, attach to the console after creation. If
<i>&minus;&minus;autodestroy</i> is requested, then the
guest will be automatically destroyed when virsh closes its
connection to libvirt, or otherwise exits.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;pass&minus;fds</i> is specified, the
argument is a comma separated list of open file descriptors
which should be pass on into the guest. The file descriptors
will be re-numbered in the guest, starting from 3. This is
only supported with container based virtualization.</p>


<p style="margin-left:17%; margin-top: 1em"><b>Example</b></p>


<pre style="margin-left:17%; margin-top: 1em"> virsh dumpxml &lt;domain&gt; &gt; domain.xml
 vi domain.xml (or make changes with your other text editor)
 virsh create domain.xml</pre>


<p style="margin-left:11%;"><b>define</b>
<i><small>FILE</small></i></p>

<p style="margin-left:17%;">Define a domain from an
<small>XML</small> &lt;file&gt;. The domain definition is
registered but not started. If domain is already running,
the changes will take effect on the next boot.</p>

<p style="margin-left:11%;"><b>desc</b> <i>domain</i>
[[<i>&minus;&minus;live</i>] [<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]] [<i>&minus;&minus;title</i>]
[<i>&minus;&minus;edit</i>] <br>
[<i>&minus;&minus;new&minus;desc</i> New description or
title message]</p>

<p style="margin-left:17%;">Show or modify description and
title of a domain. These values are user fields that allow
to store arbitrary textual data to allow easy identification
of domains. Title should be short, although it&rsquo;s not
enforced. (See also <b>metadata</b> that works with
<small>XML</small> based domain metadata.)</p>

<p style="margin-left:17%; margin-top: 1em">Flags
<i>&minus;&minus;live</i> or <i>&minus;&minus;config</i>
select whether this command works on live or persistent
definitions of the domain. If both <i>&minus;&minus;live</i>
and <i>&minus;&minus;config</i> are specified, the
<i>&minus;&minus;config</i> option takes precedence on
getting the current description and both live configuration
and config are updated while setting the description.
<i>&minus;&minus;current</i> is exclusive and implied if
none of these was specified.</p>

<p style="margin-left:17%; margin-top: 1em">Flag
<i>&minus;&minus;edit</i> specifies that an editor with the
contents of current description or title should be opened
and the contents saved back afterwards.</p>

<p style="margin-left:17%; margin-top: 1em">Flag
<i>&minus;&minus;title</i> selects operation on the title
field instead of description.</p>

<p style="margin-left:17%; margin-top: 1em">If neither of
<i>&minus;&minus;edit</i> and
<i>&minus;&minus;new&minus;desc</i> are specified the note
or description is displayed instead of being modified.</p>

<p style="margin-left:11%;"><b>destroy</b> <i>domain</i>
[<i>&minus;&minus;graceful</i>]</p>

<p style="margin-left:17%;">Immediately terminate the
domain <i>domain</i>. This doesn&rsquo;t give the domain
<small>OS</small> any chance to react, and it&rsquo;s the
equivalent of ripping the power cord out on a physical
machine. In most cases you will want to use the
<b>shutdown</b> command instead. However, this does not
delete any storage volumes used by the guest, and if the
domain is persistent, it can be restarted later.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>domain</i> is transient, then the metadata of any
snapshots will be lost once the guest stops running, but the
snapshot contents still exist, and a new domain with the
same name and <small>UUID</small> can restore the snapshot
metadata with <b>snapshot-create</b>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;graceful</i> is specified, don&rsquo;t
resort to extreme measures (e.g. <small>SIGKILL</small> )
when the guest doesn&rsquo;t stop after a reasonable
timeout; return an error instead.</p>

<p style="margin-left:11%;"><b>domblkstat</b> <i>domain</i>
[<i>block-device</i>] [<i>&minus;&minus;human</i>]</p>

<p style="margin-left:17%;">Get device block stats for a
running domain. A <i>block-device</i> corresponds to a
unique target name (&lt;target dev=&rsquo;name&rsquo;/&gt;)
or source file (&lt;source file=&rsquo;name&rsquo;/&gt;) for
one of the disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names). On a lxc domain,
omitting the <i>block-device</i> yields device block stats
summarily for the entire domain.</p>

<p style="margin-left:17%; margin-top: 1em">Use
<i>&minus;&minus;human</i> for a more human readable
output.</p>

<p style="margin-left:17%; margin-top: 1em">Availability of
these fields depends on hypervisor. Unsupported fields are
missing from the output. Other fields may appear if
communicating with a newer version of libvirtd.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Explanation
of fields</b> (fields appear in the following order): <br>
rd_req &minus; count of read operations <br>
rd_bytes &minus; count of read bytes <br>
wr_req &minus; count of write operations <br>
wr_bytes &minus; count of written bytes <br>
errs &minus; error count <br>
flush_operations &minus; count of flush operations <br>
rd_total_times &minus; total time read operations took (ns)
<br>
wr_total_times &minus; total time write operations took (ns)
<br>
flush_total_times &minus; total time flush operations took
(ns) <br>
&lt;&minus;&minus; other fields provided by hypervisor
&minus;&minus;&gt;</p>

<p style="margin-left:11%;"><b>domifstat</b> <i>domain
interface-device</i></p>

<p style="margin-left:17%;">Get network interface stats for
a running domain.</p>

<p style="margin-left:11%;"><b>domif-setlink</b> <i>domain
interface-device state</i> [<i>&minus;&minus;config</i>]</p>

<p style="margin-left:17%;">Modify link state of the
domain&rsquo;s virtual interface. Possible values for state
are &quot;up&quot; and &quot;down. If
<i>&minus;&minus;config</i> is specified, only the
persistent configuration of the domain is modified, for
compatibility purposes, <i>&minus;&minus;persistent</i> is
alias of <i>&minus;&minus;config</i>.
<i>interface-device</i> can be the interface&rsquo;s target
name or the <small>MAC</small> address.</p>

<p style="margin-left:11%;"><b>domif-getlink</b> <i>domain
interface-device</i> [<i>&minus;&minus;config</i>]</p>

<p style="margin-left:17%;">Query link state of the
domain&rsquo;s virtual interface. If
<i>&minus;&minus;config</i> is specified, query the
persistent configuration, for compatibility purposes,
<i>&minus;&minus;persistent</i> is alias of
<i>&minus;&minus;config</i>.</p>


<p style="margin-left:17%; margin-top: 1em"><i>interface-device</i>
can be the interface&rsquo;s target name or the
<small>MAC</small> address.</p>

<p style="margin-left:11%;"><b>domiftune</b> <i>domain
interface-device</i> [[<i>&minus;&minus;config</i>]
[<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]] <br>
[<i>&minus;&minus;inbound average,peak,burst</i>]
[<i>&minus;&minus;outbound average,peak,burst</i>]</p>

<p style="margin-left:17%;">Set or query the domain&rsquo;s
network interface&rsquo;s bandwidth parameters.
<i>interface-device</i> can be the interface&rsquo;s target
name (&lt;target dev=&rsquo;name&rsquo;/&gt;), or the
<small>MAC</small> address.</p>

<p style="margin-left:17%; margin-top: 1em">If no
<i>&minus;&minus;inbound</i> or
<i>&minus;&minus;outbound</i> is specified, this command
will query and show the bandwidth settings. Otherwise, it
will set the inbound or outbound bandwidth.
<i>average,peak,burst</i> is the same as in command
<i>attach-interface</i>. Values for <i>average</i> and
<i>peak</i> are expressed in kilobytes per second, while
<i>burst</i> is expressed in kilobytes in a single burst at
&minus;<i>peak</i> speed as described in the Network
<small>XML</small> documentation at
&lt;http://libvirt.org/formatnetwork.html#elementQoS&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">To clear
inbound or outbound settings, use
<i>&minus;&minus;inbound</i> or
<i>&minus;&minus;outbound</i> respectfully with average
value of zero.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;current</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. If no flag is
specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:11%;"><b>dommemstat</b> <i>domain</i>
[<i>&minus;&minus;period</i> <b>seconds</b>]
[[<i>&minus;&minus;config</i>] [<i>&minus;&minus;live</i>] |
<br>
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Get memory stats for a running
domain.</p>

<p style="margin-left:17%; margin-top: 1em">Depending on
the hypervisor a variety of statistics can be returned</p>

<p style="margin-left:17%; margin-top: 1em">For
<small>QEMU/KVM</small> with a memory balloon, setting the
optional <i>&minus;&minus;period</i> to a value larger than
0 in seconds will allow the balloon driver to return
additional statistics which will be displayed by subsequent
<b>dommemstat</b> commands. Setting the
<i>&minus;&minus;period</i> to 0 will stop the balloon
driver collection, but does not clear the statistics in the
balloon driver. Requires at least <small>QEMU/KVM
1.5</small> to be running on the host.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;live</i>, <i>&minus;&minus;config</i>, and
<i>&minus;&minus;current</i> flags are only valid when using
the <i>&minus;&minus;period</i> option in order to set the
collection period for the balloon driver. If
<i>&minus;&minus;live</i> is specified, only the running
guest collection period is affected. If
<i>&minus;&minus;config</i> is specified, affect the next
boot of a persistent guest. If <i>&minus;&minus;current</i>
is specified, affect the current guest state.</p>

<p style="margin-left:17%; margin-top: 1em">Both
<i>&minus;&minus;live</i> and <i>&minus;&minus;config</i>
flags may be given, but <i>&minus;&minus;current</i> is
exclusive. If no flag is specified, behavior is different
depending on the guest state.</p>

<p style="margin-left:11%;"><b>domblkerror</b>
<i>domain</i></p>

<p style="margin-left:17%;">Show errors on block devices.
This command usually comes handy when <b>domstate</b>
command says that a domain was paused due to I/O error. The
<b>domblkerror</b> command lists all block devices in error
state and the error seen on each of them.</p>

<p style="margin-left:11%;"><b>domblkinfo</b> <i>domain
block-device</i></p>

<p style="margin-left:17%;">Get block device size info for
a domain. A <i>block-device</i> corresponds to a unique
target name (&lt;target dev=&rsquo;name&rsquo;/&gt;) or
source file (&lt;source file=&rsquo;name&rsquo;/&gt;) for
one of the disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names).</p>

<p style="margin-left:11%;"><b>domblklist</b> <i>domain</i>
[<i>&minus;&minus;inactive</i>]
[<i>&minus;&minus;details</i>]</p>

<p style="margin-left:17%;">Print a table showing the brief
information of all block devices associated with
<i>domain</i>. If <i>&minus;&minus;inactive</i> is
specified, query the block devices that will be used on the
next boot, rather than those currently in use by a running
domain. If <i>&minus;&minus;details</i> is specified, disk
type and device value will also be printed. Other contexts
that require a block device name (such as <i>domblkinfo</i>
or <i>snapshot-create</i> for disk snapshots) will accept
either target or unique source names printed by this
command.</p>

<p style="margin-left:11%;"><b>domstats</b>
[<i>&minus;&minus;raw</i>] [<i>&minus;&minus;enforce</i>]
[<i>&minus;&minus;backing</i>] [<i>&minus;&minus;state</i>]
[<i>&minus;&minus;cpu&minus;total</i>] <br>
[<i>&minus;&minus;balloon</i>] [<i>&minus;&minus;vcpu</i>]
[<i>&minus;&minus;interface</i>]
[<i>&minus;&minus;block</i>]
[[<i>&minus;&minus;list&minus;active</i>] <br>
[<i>&minus;&minus;list&minus;inactive</i>]
[<i>&minus;&minus;list&minus;persistent</i>]
[<i>&minus;&minus;list&minus;transient</i>] <br>
[<i>&minus;&minus;list&minus;running</i>]
[<i>&minus;&minus;list&minus;paused</i>]
[<i>&minus;&minus;list&minus;shutoff</i>]
[<i>&minus;&minus;list&minus;other</i>]] | <br>
[<i>domain</i> ...]</p>

<p style="margin-left:17%;">Get statistics for multiple or
all domains. Without any argument this command prints all
available statistics for all domains.</p>

<p style="margin-left:17%; margin-top: 1em">The list of
domains to gather stats for can be either limited by listing
the domains as a space separated list, or by specifying one
of the filtering flags <i>&minus;&minus;list&minus;*</i>.
(The approaches can&rsquo;t be combined.)</p>

<p style="margin-left:17%; margin-top: 1em">By default some
of the returned fields may be converted to more human
friendly values by a set of pretty-printers. To suppress
this behavior use the <i>&minus;&minus;raw</i> flag.</p>

<p style="margin-left:17%; margin-top: 1em">The individual
statistics groups are selectable via specific flags. By
default all supported statistics groups are returned.
Supported statistics groups flags are:
<i>&minus;&minus;state</i>,
<i>&minus;&minus;cpu&minus;total</i>,
<i>&minus;&minus;balloon</i>, <i>&minus;&minus;vcpu</i>,
<i>&minus;&minus;interface</i>,
<i>&minus;&minus;block</i>.</p>

<p style="margin-left:17%; margin-top: 1em">When selecting
the <i>&minus;&minus;state</i> group the following fields
are returned: &quot;state.state&quot; &minus; state of the
<small>VM,</small> returned as number from virDomainState
enum, &quot;state.reason&quot; &minus; reason for entering
given state, returned as int from virDomain*Reason enum
corresponding to given state.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;cpu&minus;total</i>
returns: &quot;cpu.time&quot; &minus; total cpu time spent
for this domain in nanoseconds, &quot;cpu.user&quot; &minus;
user cpu time spent in nanoseconds, &quot;cpu.system&quot;
&minus; system cpu time spent in nanoseconds</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;balloon</i>
returns: &quot;balloon.current&quot; &minus; the memory in
kiB currently used, &quot;balloon.maximum&quot; &minus; the
maximum memory in kiB allowed</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;vcpu</i>
returns: &quot;vcpu.current&quot; &minus; current number of
online virtual CPUs, &quot;vcpu.maximum&quot; &minus;
maximum number of online virtual CPUs,
&quot;vcpu.&lt;num&gt;.state&quot; &minus; state of the
virtual <small>CPU</small> &lt;num&gt;, as number from
virVcpuState enum, &quot;vcpu.&lt;num&gt;.time&quot; &minus;
virtual cpu time spent by virtual <small>CPU</small>
&lt;num&gt;</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;interface</i>
returns: &quot;net.count&quot; &minus; number of network
interfaces on this domain, &quot;net.&lt;num&gt;.name&quot;
&minus; name of the interface &lt;num&gt;,
&quot;net.&lt;num&gt;.rx.bytes&quot; &minus; number of bytes
received, &quot;net.&lt;num&gt;.rx.pkts&quot; &minus; number
of packets received, &quot;net.&lt;num&gt;.rx.errs&quot;
&minus; number of receive errors,
&quot;net.&lt;num&gt;.rx.drop&quot; &minus; number of
receive packets dropped,
&quot;net.&lt;num&gt;.tx.bytes&quot; &minus; number of bytes
transmitted, &quot;net.&lt;num&gt;.tx.pkts&quot; &minus;
number of packets transmitted,
&quot;net.&lt;num&gt;.tx.errs&quot; &minus; number of
transmission errors, &quot;net.&lt;num&gt;.tx.drop&quot;
&minus; number of transmit packets dropped</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;block</i>
returns information about disks associated with each domain.
Using the <i>&minus;&minus;backing</i> flag extends this
information to cover all resources in the backing chain,
rather than the default of limiting information to the
active layer for each guest disk. Information listed
includes: &quot;block.count&quot; &minus; number of block
devices being listed, &quot;block.&lt;num&gt;.name&quot;
&minus; name of the target of the block device &lt;num&gt;
(the same name for multiple entries if
<i>&minus;&minus;backing</i> is present),
&quot;block.&lt;num&gt;.backingIndex&quot; &minus; when
<i>&minus;&minus;backing</i> is present, matches up with the
&lt;backingStore&gt; index listed in domain
<small>XML</small> for backing files,
&quot;block.&lt;num&gt;.path&quot; &minus; file source of
block device &lt;num&gt;, if it is a local file or block
device, &quot;block.&lt;num&gt;.rd.reqs&quot; &minus; number
of read requests, &quot;block.&lt;num&gt;.rd.bytes&quot;
&minus; number of read bytes,
&quot;block.&lt;num&gt;.rd.times&quot; &minus; total time
(ns) spent on reads, &quot;block.&lt;num&gt;.wr.reqs&quot;
&minus; number of write requests,
&quot;block.&lt;num&gt;.wr.bytes&quot; &minus; number of
written bytes, &quot;block.&lt;num&gt;.wr.times&quot;
&minus; total time (ns) spent on writes,
&quot;block.&lt;num&gt;.fl.reqs&quot; &minus; total flush
requests, &quot;block.&lt;num&gt;.fl.times&quot; &minus;
total time (ns) spent on cache flushing,
&quot;block.&lt;num&gt;.errors&quot; &minus; Xen only: the
&rsquo;oo_req&rsquo; value,
&quot;block.&lt;num&gt;.allocation&quot; &minus; offset of
highest written sector in bytes,
&quot;block.&lt;num&gt;.capacity&quot; &minus; logical size
of source file in bytes,
&quot;block.&lt;num&gt;.physical&quot; &minus; physical size
of source file in bytes</p>

<p style="margin-left:17%; margin-top: 1em">Selecting a
specific statistics groups doesn&rsquo;t guarantee that the
daemon supports the selected group of stats. Flag
<i>&minus;&minus;enforce</i> forces the command to fail if
the daemon doesn&rsquo;t support the selected group.</p>

<p style="margin-left:11%;"><b>domiflist</b> <i>domain</i>
[<i>&minus;&minus;inactive</i>]</p>

<p style="margin-left:17%;">Print a table showing the brief
information of all virtual interfaces associated with
<i>domain</i>. If <i>&minus;&minus;inactive</i> is
specified, query the virtual interfaces that will be used on
the next boot, rather than those currently in use by a
running domain. Other contexts that require a
<small>MAC</small> address of virtual interface (such as
<i>detach-interface</i> or <i>domif-setlink</i>) will accept
the <small>MAC</small> address printed by this command.</p>

<p style="margin-left:11%;"><b>blockcommit</b> <i>domain
path</i> [<i>bandwidth</i>] [<i>base</i>]
[<i>&minus;&minus;shallow</i>] [<i>top</i>]
[<i>&minus;&minus;delete</i>] <br>
[<i>&minus;&minus;keep&minus;relative</i>]
[<i>&minus;&minus;wait</i> [<i>&minus;&minus;async</i>]
[<i>&minus;&minus;verbose</i>]]
[<i>&minus;&minus;timeout</i> <b>seconds</b>] <br>
[<i>&minus;&minus;active</i>] [{<i>&minus;&minus;pivot</i> |
<i>&minus;&minus;keep&minus;overlay</i>}]</p>

<p style="margin-left:17%;">Reduce the length of a backing
image chain, by committing changes at the top of the chain
(snapshot or delta files) into backing images. By default,
this command attempts to flatten the entire chain. If
<i>base</i> and/or <i>top</i> are specified as files within
the backing chain, then the operation is constrained to
committing just that portion of the chain;
<i>&minus;&minus;shallow</i> can be used instead of
<i>base</i> to specify the immediate backing file of the
resulting top image to be committed. The files being
committed are rendered invalid, possibly as soon as the
operation starts; using the <i>&minus;&minus;delete</i> flag
will attempt to remove these invalidated files at the
successful completion of the commit operation. When the
<i>&minus;&minus;keep&minus;relative</i> flag is used, the
backing file paths will be kept relative.</p>

<p style="margin-left:17%; margin-top: 1em">When <i>top</i>
is omitted or specified as the active image, it is also
possible to specify <i>&minus;&minus;active</i> to trigger a
two-phase active commit. In the first phase, <i>top</i> is
copied into <i>base</i> and the job can only be canceled,
with top still containing data not yet in base. In the
second phase, <i>top</i> and <i>base</i> remain identical
until a call to <b>blockjob</b> with the
<i>&minus;&minus;abort</i> flag (keeping top as the active
image that tracks changes from that point in time) or the
<i>&minus;&minus;pivot</i> flag (making base the new active
image and invalidating top).</p>

<p style="margin-left:17%; margin-top: 1em">By default,
this command returns as soon as possible, and data for the
entire disk is committed in the background; the progress of
the operation can be checked with <b>blockjob</b>. However,
if <i>&minus;&minus;wait</i> is specified, then this command
will block until the operation completes (or for
<i>&minus;&minus;active</i>, enters the second phase), or
until the operation is canceled because the optional
<i>timeout</i> in seconds elapses or <small>SIGINT</small>
is sent (usually with <tt>&quot;Ctrl&minus;C&quot;</tt>).
Using <i>&minus;&minus;verbose</i> along with
<i>&minus;&minus;wait</i> will produce periodic status
updates. If job cancellation is triggered,
<i>&minus;&minus;async</i> will return control to the user
as fast as possible, otherwise the command may continue to
block a little while longer until the job is done cleaning
up. Using <i>&minus;&minus;pivot</i> is shorthand for
combining <i>&minus;&minus;active &minus;&minus;wait</i>
with an automatic <b>blockjob</b>
<i>&minus;&minus;pivot</i>; and using
<i>&minus;&minus;keep&minus;overlay</i> is shorthand for
combining <i>&minus;&minus;active &minus;&minus;wait</i>
with an automatic <b>blockjob</b>
<i>&minus;&minus;abort</i>.</p>

<p style="margin-left:17%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target
dev=&rsquo;name&rsquo;/&gt;) or source file (&lt;source
file=&rsquo;name&rsquo;/&gt;) for one of the disk devices
attached to <i>domain</i> (see also <b>domblklist</b> for
listing these names). <i>bandwidth</i> specifies copying
bandwidth limit in MiB/s, although for qemu, it may be
non-zero only for an online domain. Specifying a negative
value is interpreted as an unsigned long long value or
essentially unlimited. The hypervisor can choose whether to
reject the value or convert it to the maximum value
allowed.</p>

<p style="margin-left:11%;"><b>blockcopy</b> <i>domain path
dest</i> [<i>bandwidth</i>] [<i>&minus;&minus;shallow</i>]
[<i>&minus;&minus;reuse&minus;external</i>] <br>
[<i>&minus;&minus;raw</i>] [<i>&minus;&minus;wait</i>
[<i>&minus;&minus;async</i>] [<i>&minus;&minus;verbose</i>]]
[{<i>&minus;&minus;pivot</i> | <i>&minus;&minus;finish</i>}]
<br>
[<i>&minus;&minus;timeout</i> <b>seconds</b>]</p>

<p style="margin-left:17%;">Copy a disk backing image chain
to <i>dest</i>. By default, this command flattens the entire
chain; but if <i>&minus;&minus;shallow</i> is specified, the
copy shares the backing chain.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;reuse&minus;external</i> is specified, then
<i>dest</i> must exist and have sufficient space to hold the
copy. If <i>&minus;&minus;shallow</i> is used in conjunction
with <i>&minus;&minus;reuse&minus;external</i> then the
pre-created image must have guest visible contents identical
to guest visible contents of the backing file of the
original image. This may be used to modify the backing file
names on the destination.</p>

<p style="margin-left:17%; margin-top: 1em">The format of
the destination is determined by the first match in the
following list: if <i>&minus;&minus;raw</i> is specified, it
will be raw; if <i>&minus;&minus;reuse&minus;external</i> is
specified, the existing destination is probed for a format;
and in all other cases, the destination format will match
the source format.</p>

<p style="margin-left:17%; margin-top: 1em">By default, the
copy job runs in the background, and consists of two phases.
Initially, the job must copy all data from the source, and
during this phase, the job can only be canceled to revert
back to the source disk, with no guarantees about the
destination. After this phase completes, both the source and
the destination remain mirrored until a call to
<b>blockjob</b> with the <i>&minus;&minus;abort</i> and
<i>&minus;&minus;pivot</i> flags pivots over to the copy, or
a call without <i>&minus;&minus;pivot</i> leaves the
destination as a faithful copy of that point in time.
However, if <i>&minus;&minus;wait</i> is specified, then
this command will block until the mirroring phase begins, or
cancel the operation if the optional <i>timeout</i> in
seconds elapses or <small>SIGINT</small> is sent (usually
with <tt>&quot;Ctrl&minus;C&quot;</tt>). Using
<i>&minus;&minus;verbose</i> along with
<i>&minus;&minus;wait</i> will produce periodic status
updates. Using <i>&minus;&minus;pivot</i> (similar to
<b>blockjob</b> <i>&minus;&minus;pivot</i>) or
<i>&minus;&minus;finish</i> (similar to <b>blockjob</b>
<i>&minus;&minus;abort</i>) implies
<i>&minus;&minus;wait</i>, and will additionally end the job
cleanly rather than leaving things in the mirroring phase.
If job cancellation is triggered by timeout or by
<i>&minus;&minus;finish</i>, <i>&minus;&minus;async</i> will
return control to the user as fast as possible, otherwise
the command may continue to block a little while longer
until the job has actually cancelled.</p>

<p style="margin-left:17%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk. <i>bandwidth</i>
specifies copying bandwidth limit in MiB/s. Specifying a
negative value is interpreted as an unsigned long long value
or essentially unlimited. The hypervisor can choose whether
to reject the value or convert it to the maximum value
allowed.</p>

<p style="margin-left:11%;"><b>blockpull</b> <i>domain
path</i> [<i>bandwidth</i>] [<i>base</i>]
[<i>&minus;&minus;wait</i> [<i>&minus;&minus;verbose</i>]
[<i>&minus;&minus;timeout</i> <b><br>
seconds</b>] [<i>&minus;&minus;async</i>]]
[<i>&minus;&minus;keep&minus;relative</i>]</p>

<p style="margin-left:17%;">Populate a disk from its
backing image chain. By default, this command flattens the
entire chain; but if <i>base</i> is specified, containing
the name of one of the backing files in the chain, then that
file becomes the new backing file and only the intermediate
portion of the chain is pulled. Once all requested data from
the backing image chain has been pulled, the disk no longer
depends on that portion of the backing chain.</p>

<p style="margin-left:17%; margin-top: 1em">By default,
this command returns as soon as possible, and data for the
entire disk is pulled in the background; the progress of the
operation can be checked with <b>blockjob</b>. However, if
<i>&minus;&minus;wait</i> is specified, then this command
will block until the operation completes, or cancel the
operation if the optional <i>timeout</i> in seconds elapses
or <small>SIGINT</small> is sent (usually with
<tt>&quot;Ctrl&minus;C&quot;</tt>). Using
<i>&minus;&minus;verbose</i> along with
<i>&minus;&minus;wait</i> will produce periodic status
updates. If job cancellation is triggered,
<i>&minus;&minus;async</i> will return control to the user
as fast as possible, otherwise the command may continue to
block a little while longer until the job is done cleaning
up.</p>

<p style="margin-left:17%; margin-top: 1em">Using the
<i>&minus;&minus;keep&minus;relative</i> flag will keep the
backing chain names relative.</p>

<p style="margin-left:17%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target
dev=&rsquo;name&rsquo;/&gt;) or source file (&lt;source
file=&rsquo;name&rsquo;/&gt;) for one of the disk devices
attached to <i>domain</i> (see also <b>domblklist</b> for
listing these names). <i>bandwidth</i> specifies copying
bandwidth limit in MiB/s. Specifying a negative value is
interpreted as an unsigned long long value or essentially
unlimited. The hypervisor can choose whether to reject the
value or convert it to the maximum value allowed.</p>

<p style="margin-left:11%;"><b>blkdeviotune</b> <i>domain
device</i> [[<i>&minus;&minus;config</i>]
[<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]] <br>
[[<i>total-bytes-sec</i>] | [<i>read-bytes-sec</i>]
[<i>write-bytes-sec</i>]] <br>
[[<i>total-iops-sec</i>] | [<i>read-iops-sec</i>]
[<i>write-iops-sec</i>]]</p>

<p style="margin-left:17%;">Set or query the block disk io
parameters for a block device of <i>domain</i>.
<i>device</i> specifies a unique target name (&lt;target
dev=&rsquo;name&rsquo;/&gt;) or source file (&lt;source
file=&rsquo;name&rsquo;/&gt;) for one of the disk devices
attached to <i>domain</i> (see also <b>domblklist</b> for
listing these names).</p>

<p style="margin-left:17%; margin-top: 1em">If no limit is
specified, it will query current I/O limits setting.
Otherwise, alter the limits with these flags:
<i>&minus;&minus;total&minus;bytes&minus;sec</i> specifies
total throughput limit in bytes per second.
<i>&minus;&minus;read&minus;bytes&minus;sec</i> specifies
read throughput limit in bytes per second.
<i>&minus;&minus;write&minus;bytes&minus;sec</i> specifies
write throughput limit in bytes per second.
<i>&minus;&minus;total&minus;iops&minus;sec</i> specifies
total I/O operations limit per second.
<i>&minus;&minus;read&minus;iops&minus;sec</i> specifies
read I/O operations limit per second.
<i>&minus;&minus;write&minus;iops&minus;sec</i> specifies
write I/O operations limit per second.</p>

<p style="margin-left:17%; margin-top: 1em">Older versions
of virsh only accepted these options with underscore instead
of dash, as in <i>&minus;&minus;total_bytes_sec</i>.</p>

<p style="margin-left:17%; margin-top: 1em">Bytes and iops
values are independent, but setting only one value (such as
&minus;&minus;read&minus;bytes&minus;sec) resets the other
two in that category to unlimited. An explicit 0 also clears
any limit. A non-zero value for a given total cannot be
mixed with non-zero values for read or write.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;current</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. If no flag is
specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:11%;"><b>blockjob</b> <i>domain
path</i> { [<i>&minus;&minus;abort</i>]
[<i>&minus;&minus;async</i>] [<i>&minus;&minus;pivot</i>] |
[<i>&minus;&minus;info</i>] | <br>
[<i>bandwidth</i>] }</p>

<p style="margin-left:17%;">Manage active block operations.
There are three modes: <i>&minus;&minus;info</i>,
<i>bandwidth</i>, and <i>&minus;&minus;abort</i>;
<i>&minus;&minus;info</i> is default except that
<i>&minus;&minus;async</i> or <i>&minus;&minus;pivot</i>
implies <i>&minus;&minus;abort</i>.</p>

<p style="margin-left:17%; margin-top: 1em"><i>path</i>
specifies fully-qualified path of the disk; it corresponds
to a unique target name (&lt;target
dev=&rsquo;name&rsquo;/&gt;) or source file (&lt;source
file=&rsquo;name&rsquo;/&gt;) for one of the disk devices
attached to <i>domain</i> (see also <b>domblklist</b> for
listing these names).</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;abort</i> is specified, the active job on
the specified disk will be aborted. If
<i>&minus;&minus;async</i> is also specified, this command
will return immediately, rather than waiting for the
cancellation to complete. If <i>&minus;&minus;pivot</i> is
specified, this requests that an active copy or active
commit job be pivoted over to the new image. If
<i>&minus;&minus;info</i> is specified, the active job
information on the specified disk will be printed.
<i>bandwidth</i> can be used to set bandwidth limit for the
active job. Specifying a negative value is interpreted as an
unsigned long long value or essentially unlimited. The
hypervisor can choose whether to reject the value or convert
it to the maximum value allowed.</p>

<p style="margin-left:11%;"><b>blockresize</b> <i>domain
path size</i></p>

<p style="margin-left:17%;">Resize a block device of domain
while the domain is running, <i>path</i> specifies the
absolute path of the block device; it corresponds to a
unique target name (&lt;target dev=&rsquo;name&rsquo;/&gt;)
or source file (&lt;source file=&rsquo;name&rsquo;/&gt;) for
one of the disk devices attached to <i>domain</i> (see also
<b>domblklist</b> for listing these names).</p>

<p style="margin-left:17%; margin-top: 1em"><i>size</i> is
a scaled integer (see <b><small>NOTES</small></b> above)
which defaults to KiB (blocks of 1024 bytes) if there is no
suffix. You must use a suffix of &quot;B&quot; to get bytes
(note that for historical reasons, this differs from
<b>vol-resize</b> which defaults to bytes without a
suffix).</p>

<p style="margin-left:11%;"><b>domdisplay</b> <i>domain</i>
[<i>&minus;&minus;include&minus;password</i>]
[[<i>&minus;&minus;type</i>] <b>type</b>]</p>

<p style="margin-left:17%;">Output a <small>URI</small>
which can be used to connect to the graphical display of the
domain via <small>VNC, SPICE</small> or <small>RDP.</small>
The particular graphical display type can be selected using
the <b>type</b> parameter (e.g. &quot;vnc&quot;,
&quot;spice&quot;, &quot;rdp&quot;). If
<i>&minus;&minus;include&minus;password</i> is specified,
the <small>SPICE</small> channel password will be included
in the <small>URI.</small></p>

<p style="margin-left:11%;"><b>domfsfreeze</b>
<i>domain</i> [[<i>&minus;&minus;mountpoint</i>]
<b>mountpoint</b>...]</p>

<p style="margin-left:17%;">Freeze mounted filesystems
within a running domain to prepare for consistent
snapshots.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;mountpoint</i> option takes a parameter
<b>mountpoint</b>, which is a mount point path of the
filesystem to be frozen. This option can occur multiple
times. If this is not specified, every mounted filesystem is
frozen.</p>

<p style="margin-left:17%; margin-top: 1em">Note:
<b>snapshot-create</b> command has a
<i>&minus;&minus;quiesce</i> option to freeze and thaw the
filesystems automatically to keep snapshots consistent.
<b>domfsfreeze</b> command is only needed when a user wants
to utilize the native snapshot features of storage devices
not supported by libvirt.</p>

<p style="margin-left:11%;"><b>domfsthaw</b> <i>domain</i>
[[<i>&minus;&minus;mountpoint</i>] <b>mountpoint</b>...]</p>

<p style="margin-left:17%;">Thaw mounted filesystems within
a running domain, which have been frozen by domfsfreeze
command.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;mountpoint</i> option takes a parameter
<b>mountpoint</b>, which is a mount point path of the
filesystem to be thawed. This option can occur multiple
times. If this is not specified, every mounted filesystem is
thawed.</p>

<p style="margin-left:11%;"><b>domfstrim</b> <i>domain</i>
[<i>&minus;&minus;minimum</i> <b>bytes</b>]
[<i>&minus;&minus;mountpoint mountPoint</i>]</p>

<p style="margin-left:17%;">Issue a fstrim command on all
mounted filesystems within a running domain. It discards
blocks which are not in use by the filesystem. If
<i>&minus;&minus;minimum</i> <b>bytes</b> is specified, it
tells guest kernel length of contiguous free range. Smaller
than this may be ignored (this is a hint and the guest may
not respect it). By increasing this value, the fstrim
operation will complete more quickly for filesystems with
badly fragmented free space, although not all blocks will be
discarded. The default value is zero, meaning &quot;discard
every free block&quot;. Moreover, a if user wants to trim
only one mount point, it can be specified via optional
<i>&minus;&minus;mountpoint</i> parameter.</p>

<p style="margin-left:11%;"><b>domhostname</b>
<i>domain</i></p>

<p style="margin-left:17%;">Returns the hostname of a
domain, if the hypervisor makes it available.</p>

<p style="margin-left:11%;"><b>dominfo</b>
<i>domain</i></p>

<p style="margin-left:17%;">Returns basic information about
the domain.</p>

<p style="margin-left:11%;"><b>domuuid</b>
<i>domain-name-or-id</i></p>

<p style="margin-left:17%;">Convert a domain name or id to
domain <small>UUID</small></p>

<p style="margin-left:11%;"><b>domid</b>
<i>domain-name-or-uuid</i></p>

<p style="margin-left:17%;">Convert a domain name (or
<small>UUID</small> ) to a domain id</p>

<p style="margin-left:11%;"><b>domjobabort</b>
<i>domain</i></p>

<p style="margin-left:17%;">Abort the currently running
domain job.</p>

<p style="margin-left:11%;"><b>domjobinfo</b> <i>domain</i>
[<i>&minus;&minus;completed</i>]</p>

<p style="margin-left:17%;">Returns information about jobs
running on a domain. <i>&minus;&minus;completed</i> tells
virsh to return information about a recently finished job.
Statistics of a completed job are automatically destroyed
once read or when libvirtd is restarted. Note that time
information returned for completed migrations may be
completely irrelevant unless both source and destination
hosts have synchronized time (i.e., <small>NTP</small>
daemon is running on both of them).</p>

<p style="margin-left:11%;"><b>domname</b>
<i>domain-id-or-uuid</i></p>

<p style="margin-left:17%;">Convert a domain Id (or
<small>UUID</small> ) to domain name</p>

<p style="margin-left:11%;"><b>domstate</b> <i>domain</i>
[<i>&minus;&minus;reason</i>]</p>

<p style="margin-left:17%;">Returns state about a domain.
<i>&minus;&minus;reason</i> tells virsh to also print reason
for the state.</p>

<p style="margin-left:11%;"><b>domcontrol</b>
<i>domain</i></p>

<p style="margin-left:17%;">Returns state of an interface
to <small>VMM</small> used to control a domain. For states
other than &quot;ok&quot; or &quot;error&quot; the command
also prints number of seconds elapsed since the control
interface entered its current state.</p>

<p style="margin-left:11%;"><b>domtime</b> <i>domain</i> {
[<i>&minus;&minus;now</i>] [<i>&minus;&minus;pretty</i>]
[<i>&minus;&minus;sync</i>] [<i>&minus;&minus;time</i>
<b>time</b>] }</p>

<p style="margin-left:17%;">Gets or sets the domain&rsquo;s
system time. When run without any arguments (but
<i>domain</i>), the current domain&rsquo;s system time is
printed out. The <i>&minus;&minus;pretty</i> modifier can be
used to print the time in more human readable form.</p>

<p style="margin-left:17%; margin-top: 1em">When
<i>&minus;&minus;time</i> <b>time</b> is specified, the
domain&rsquo;s time is not gotten but set instead. The
<i>&minus;&minus;now</i> modifier acts like if it was an
alias for <i>&minus;&minus;time</i> <b>$now</b>, which means
it sets the time that is currently on the host virsh is
running at. In both cases (setting and getting), time is in
seconds relative to Epoch of 1970&minus;01&minus;01 in
<small>UTC.</small> The <i>&minus;&minus;sync</i> modifies
the set behavior a bit: The time passed is ignored, but the
time to set is read from domain&rsquo;s <small>RTC</small>
instead. Please note, that some hypervisors may require a
guest agent to be configured in order to get or set the
guest time.</p>

<p style="margin-left:11%;"><b>domxml-from-native</b>
<i>format config</i></p>

<p style="margin-left:17%;">Convert the file <i>config</i>
in the native guest configuration format named by
<i>format</i> to a domain <small>XML</small> format. For
<small>QEMU/KVM</small> hypervisor, the <i>format</i>
argument must be <b>qemu-argv</b>. For Xen hypervisor, the
<i>format</i> argument may be <b>xen-xm</b> or
<b>xen-sxpr</b>. For <small>LXC</small> hypervisor, the
<i>format</i> argument must be <b>lxc-tools</b>.</p>

<p style="margin-left:11%;"><b>domxml-to-native</b>
<i>format xml</i></p>

<p style="margin-left:17%;">Convert the file <i>xml</i> in
domain <small>XML</small> format to the native guest
configuration format named by <i>format</i>. For
<small>QEMU/KVM</small> hypervisor, the <i>format</i>
argument must be <b>qemu-argv</b>. For Xen hypervisor, the
<i>format</i> argument may be <b>xen-xm</b> or
<b>xen-sxpr</b>. For <small>LXC</small> hypervisor, the
<i>format</i> argument must be <b>lxc-tools</b>.</p>

<p style="margin-left:11%;"><b>dump</b> <i>domain
corefilepath</i> [<i>&minus;&minus;bypass&minus;cache</i>] {
[<i>&minus;&minus;live</i>] | [<i>&minus;&minus;crash</i>] |
<br>
[<i>&minus;&minus;reset</i>] }
[<i>&minus;&minus;verbose</i>]
[<i>&minus;&minus;memory&minus;only</i>]
[<i>&minus;&minus;format string</i>]</p>

<p style="margin-left:17%;">Dumps the core of a domain to a
file for analysis. If <i>&minus;&minus;live</i> is
specified, the domain continues to run until the core dump
is complete, rather than pausing up front. If
<i>&minus;&minus;crash</i> is specified, the domain is
halted with a crashed status, rather than merely left in a
paused state. If <i>&minus;&minus;reset</i> is specified,
the domain is reset after successful dump. Note, these three
switches are mutually exclusive. If
<i>&minus;&minus;bypass&minus;cache</i> is specified, the
save will avoid the file system cache, although this may
slow down the operation. If
<i>&minus;&minus;memory&minus;only</i> is specified, the
file is elf file, and will only include domain&rsquo;s
memory and cpu common register value. It is very useful if
the domain uses host devices directly.
<i>&minus;&minus;format string</i> is used to specify the
format of &rsquo;memory&minus;only&rsquo; dump, and
<i>string</i> can be one of them: elf,
kdump&minus;zlib(kdump&minus;compressed format with
zlib-compressed), kdump&minus;lzo(kdump&minus;compressed
format with lzo-compressed),
kdump&minus;snappy(kdump&minus;compressed format with
snappy-compressed).</p>

<p style="margin-left:17%; margin-top: 1em">The progress
may be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send
<small>SIGINT</small> (usually with
<tt>&quot;Ctrl&minus;C&quot;</tt>) to the virsh process
running <b>dump</b> command. <i>&minus;&minus;verbose</i>
displays the progress of dump.</p>


<p style="margin-left:17%; margin-top: 1em"><small>NOTE:</small>
Some hypervisors may require the user to manually ensure
proper permissions on file and path specified by argument
<i>corefilepath</i>.</p>

<p style="margin-left:11%;"><b>dumpxml</b> <i>domain</i>
[<i>&minus;&minus;inactive</i>]
[<i>&minus;&minus;security&minus;info</i>]
[<i>&minus;&minus;update&minus;cpu</i>] <br>
[<i>&minus;&minus;migratable</i>]</p>

<p style="margin-left:17%;">Output the domain information
as an <small>XML</small> dump to stdout, this format can be
used by the <b>create</b> command. Additional options
affecting the <small>XML</small> dump may be used.
<i>&minus;&minus;inactive</i> tells virsh to dump domain
configuration that will be used on next start of the domain
as opposed to the current domain configuration. Using
<i>&minus;&minus;security&minus;info</i> will also include
security sensitive information in the <small>XML</small>
dump. <i>&minus;&minus;update&minus;cpu</i> updates domain
<small>CPU</small> requirements according to host
<small>CPU.</small> With <i>&minus;&minus;migratable</i> one
can request an <small>XML</small> that is suitable for
migrations, i.e., compatible with older libvirt releases and
possibly amended with internal run-time options. This option
may automatically enable other options
(<i>&minus;&minus;update&minus;cpu</i>,
<i>&minus;&minus;security&minus;info</i>, ...) as
necessary.</p>

<p style="margin-left:11%;"><b>edit</b> <i>domain</i></p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration file for a domain, which will affect the next
boot of the guest.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh dumpxml &minus;&minus;inactive &minus;&minus;security&minus;info domain &gt; domain.xml
 vi domain.xml (or make changes with your other text editor)
 virsh define domain.xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><b>event</b> {[<i>domain</i>] {
<i>event</i> | <i>&minus;&minus;all</i> }
[<i>&minus;&minus;loop</i>] [<i>&minus;&minus;timeout
seconds</i>] | <i><br>
&minus;&minus;list</i>}</p>

<p style="margin-left:17%;">Wait for a class of domain
events to occur, and print appropriate details of events as
they happen. The events can optionally be filtered by
<i>domain</i>. Using <i>&minus;&minus;list</i> as the only
argument will provide a list of possible <i>event</i> values
known by this client, although the connection might not
allow registering for all these events. It is also possible
to use <i>&minus;&minus;all</i> instead of <i>event</i> to
register for all possible event types at once.</p>

<p style="margin-left:17%; margin-top: 1em">By default,
this command is one-shot, and returns success once an event
occurs; you can send <small>SIGINT</small> (usually via
<tt>&quot;Ctrl&minus;C&quot;</tt>) to quit immediately. If
<i>&minus;&minus;timeout</i> is specified, the command gives
up waiting for events after <i>seconds</i> have elapsed.
With <i>&minus;&minus;loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:11%;"><b>managedsave</b>
<i>domain</i> [<i>&minus;&minus;bypass&minus;cache</i>]
[{<i>&minus;&minus;running</i> |
<i>&minus;&minus;paused</i>}] <br>
[<i>&minus;&minus;verbose</i>]</p>

<p style="margin-left:17%;">Save and destroy (stop) a
running domain, so it can be restarted from the same state
at a later time. When the virsh <b>start</b> command is next
run for the domain, it will automatically be started from
this saved state. If <i>&minus;&minus;bypass&minus;cache</i>
is specified, the save will avoid the file system cache,
although this may slow down the operation.</p>

<p style="margin-left:17%; margin-top: 1em">The progress
may be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send
<small>SIGINT</small> (usually with
<tt>&quot;Ctrl&minus;C&quot;</tt>) to the virsh process
running <b>managedsave</b> command.
<i>&minus;&minus;verbose</i> displays the progress of
save.</p>

<p style="margin-left:17%; margin-top: 1em">Normally,
starting a managed save will decide between running or
paused based on the state the domain was in when the save
was done; passing either the <i>&minus;&minus;running</i> or
<i>&minus;&minus;paused</i> flag will allow overriding which
state the <b>start</b> should use.</p>

<p style="margin-left:17%; margin-top: 1em">The
<b>dominfo</b> command can be used to query whether a domain
currently has any managed save image.</p>

<p style="margin-left:11%;"><b>managedsave-remove</b>
<i>domain</i></p>

<p style="margin-left:17%;">Remove the <b>managedsave</b>
state file for a domain, if it exists. This ensures the
domain will do a full boot the next time it is started.</p>

<p style="margin-left:11%;"><b>maxvcpus</b>
[<i>type</i>]</p>

<p style="margin-left:17%;">Provide the maximum number of
virtual CPUs supported for a guest <small>VM</small> on this
connection. If provided, the <i>type</i> parameter must be a
valid type attribute for the &lt;domain&gt; element of
<small>XML.</small></p>

<p style="margin-left:11%;"><b>cpu-stats</b> <i>domain</i>
[<i>&minus;&minus;total</i>] [<i>start</i>]
[<i>count</i>]</p>

<p style="margin-left:17%;">Provide cpu statistics
information of a domain. The domain should be running.
Default it shows stats for all CPUs, and a total. Use
<i>&minus;&minus;total</i> for only the total stats,
<i>start</i> for only the per-cpu stats of the CPUs from
<i>start</i>, <i>count</i> for only <i>count</i> CPUs&rsquo;
stats.</p>

<p style="margin-left:11%;"><b>metadata</b> <i>domain</i>
[[<i>&minus;&minus;live</i>] [<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]] [<i>&minus;&minus;edit</i>]
[<i>uri</i>] <br>
[<i>key</i>] [<i>set</i>] [<i>&minus;&minus;remove</i>]</p>

<p style="margin-left:17%;">Show or modify custom
<small>XML</small> metadata of a domain. The metadata is a
user defined <small>XML</small> that allows to store
arbitrary <small>XML</small> data in the domain definition.
Multiple separate custom metadata pieces can be stored in
the domain <small>XML.</small> The pieces are identified by
a private <small>XML</small> namespace provided via the
<i>uri</i> argument. (See also <b>desc</b> that works with
textual metadata of a domain.)</p>

<p style="margin-left:17%; margin-top: 1em">Flags
<i>&minus;&minus;live</i> or <i>&minus;&minus;config</i>
select whether this command works on live or persistent
definitions of the domain. If both <i>&minus;&minus;live</i>
and <i>&minus;&minus;config</i> are specified, the
<i>&minus;&minus;config</i> option takes precedence on
getting the current description and both live configuration
and config are updated while setting the description.
<i>&minus;&minus;current</i> is exclusive and implied if
none of these was specified.</p>

<p style="margin-left:17%; margin-top: 1em">Flag
<i>&minus;&minus;remove</i> specifies that the metadata
element specified by the <i>uri</i> argument should be
removed rather than updated.</p>

<p style="margin-left:17%; margin-top: 1em">Flag
<i>&minus;&minus;edit</i> specifies that an editor with the
metadata identified by the <i>uri</i> argument should be
opened and the contents saved back afterwards. Otherwise the
new contents can be provided via the <i>set</i>
argument.</p>

<p style="margin-left:17%; margin-top: 1em">When setting
metadata via <i>&minus;&minus;edit</i> or <i>set</i> the
<i>key</i> argument must be specified and is used to prefix
the custom elements to bind them to the private
namespace.</p>

<p style="margin-left:17%; margin-top: 1em">If neither of
<i>&minus;&minus;edit</i> and <i>set</i> are specified the
<small>XML</small> metadata corresponding to the <i>uri</i>
namespace is displayed instead of being modified.</p>

<p style="margin-left:11%;"><b>migrate</b>
[<i>&minus;&minus;live</i>] [<i>&minus;&minus;offline</i>]
[<i>&minus;&minus;direct</i>] [<i>&minus;&minus;p2p</i>
[<i>&minus;&minus;tunnelled</i>]] <br>
[<i>&minus;&minus;persistent</i>]
[<i>&minus;&minus;undefinesource</i>]
[<i>&minus;&minus;suspend</i>]
[<i>&minus;&minus;copy&minus;storage&minus;all</i>] <br>
[<i>&minus;&minus;copy&minus;storage&minus;inc</i>]
[<i>&minus;&minus;change&minus;protection</i>]
[<i>&minus;&minus;unsafe</i>] [<i>&minus;&minus;verbose</i>]
<br>
[<i>&minus;&minus;compressed</i>]
[<i>&minus;&minus;abort&minus;on&minus;error</i>]
[<i>&minus;&minus;auto&minus;converge</i>] <i>domain
desturi</i> <br>
[<i>migrateuri</i>] [<i>graphicsuri</i>]
[<i>listen-address</i>] [<i>dname</i>]
[<i>&minus;&minus;timeout</i> <b>seconds</b>] <br>
[<i>&minus;&minus;xml</i> <b>file</b>]</p>

<p style="margin-left:17%;">Migrate domain to another host.
Add <i>&minus;&minus;live</i> for live migration;
&lt;&minus;&minus;p2p&gt; for peer&minus;2&minus;peer
migration; <i>&minus;&minus;direct</i> for direct migration;
or <i>&minus;&minus;tunnelled</i> for tunnelled migration.
<i>&minus;&minus;offline</i> migrates domain definition
without starting the domain on destination and without
stopping it on source host. Offline migration may be used
with inactive domains and it must be used with
<i>&minus;&minus;persistent</i> option.
<i>&minus;&minus;persistent</i> leaves the domain persistent
on destination host, <i>&minus;&minus;undefinesource</i>
undefines the domain on the source host, and
<i>&minus;&minus;suspend</i> leaves the domain paused on the
destination host.
<i>&minus;&minus;copy&minus;storage&minus;all</i> indicates
migration with non-shared storage with full disk copy,
<i>&minus;&minus;copy&minus;storage&minus;inc</i> indicates
migration with non-shared storage with incremental copy
(same base image shared between source and destination). In
both cases the disk images have to exist on destination
host, the <i>&minus;&minus;copy&minus;storage&minus;...</i>
options only tell libvirt to transfer data from the images
on source host to the images found at the same place on the
destination host.
<i>&minus;&minus;change&minus;protection</i> enforces that
no incompatible configuration changes will be made to the
domain while the migration is underway; this flag is
implicitly enabled when supported by the hypervisor, but can
be explicitly used to reject the migration if the hypervisor
lacks change protection support.
<i>&minus;&minus;verbose</i> displays the progress of
migration. <i>&minus;&minus;compressed</i> activates
compression of memory pages that have to be transferred
repeatedly during live migration.
<i>&minus;&minus;abort&minus;on&minus;error</i> cancels the
migration if a soft error (for example I/O error) happens
during the migration.
<i>&minus;&minus;auto&minus;converge</i> forces convergence
during live migration.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
Individual hypervisors usually do not support all possible
types of migration. For example, <small>QEMU</small> does
not support direct migration.</p>

<p style="margin-left:17%; margin-top: 1em">In some cases
libvirt may refuse to migrate the domain because doing so
may lead to potential problems such as data corruption, and
thus the migration is considered unsafe. For
<small>QEMU</small> domain, this may happen if the domain
uses disks without explicitly setting cache mode to
&quot;none&quot;. Migrating such domains is unsafe unless
the disk images are stored on coherent clustered filesystem,
such as <small>GFS2</small> or <small>GPFS.</small> If you
are sure the migration is safe or you just do not care, use
<i>&minus;&minus;unsafe</i> to force the migration.</p>

<p style="margin-left:17%; margin-top: 1em"><i>dname</i> is
used for renaming the domain to new name during migration,
which also usually can be omitted. Likewise,
<i>&minus;&minus;xml</i> <b>file</b> is usually omitted, but
can be used to supply an alternative <small>XML</small> file
for use on the destination to supply a larger set of changes
to any host-specific portions of the domain
<small>XML,</small> such as accounting for naming
differences between source and destination in accessing
underlying storage.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;timeout</i>
<b>seconds</b> forces guest to suspend when live migration
exceeds that many seconds, and then the migration will
complete offline. It can only be used with
<i>&minus;&minus;live</i>.</p>

<p style="margin-left:17%; margin-top: 1em">Running
migration can be canceled by interrupting virsh (usually
using <tt>&quot;Ctrl&minus;C&quot;</tt>) or by
<b>domjobabort</b> command sent from another virsh
instance.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>desturi</i> and <i>migrateuri</i> parameters can be used
to control which destination the migration uses.
<i>desturi</i> is important for managed migration, but
unused for direct migration; <i>migrateuri</i> is required
for direct migration, but can usually be automatically
determined for managed migration.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The <i>desturi</i> parameter for normal migration and
peer2peer migration has different semantics:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>normal migration: the <i>desturi</i> is an address of
the target host as seen from the client machine.</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>peer2peer migration: the <i>desturi</i> is an address of
the target host as seen from the source machine.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">When
<i>migrateuri</i> is not specified, libvirt will
automatically determine the hypervisor specific
<small>URI.</small> Some hypervisors, including
<small>QEMU,</small> have an optional
&quot;migration_host&quot; configuration parameter (useful
when the host has multiple network interfaces). If this is
unspecified, libvirt determines a name by looking up the
target host&rsquo;s configured hostname.</p>

<p style="margin-left:17%; margin-top: 1em">There are a few
scenarios where specifying <i>migrateuri</i> may help:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em">The configured hostname is
incorrect, or <small>DNS</small> is broken. If a host has a
hostname which will not resolve to match one of its public
<small>IP</small> addresses, then libvirt will generate an
incorrect <small>URI.</small> In this case <i>migrateuri</i>
should be explicitly specified, using an <small>IP</small>
address, or a correct hostname.</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>The host has multiple network interfaces. If a host has
multiple network interfaces, it might be desirable for the
migration data stream to be sent over a specific interface
for either security or performance reasons. In this case
<i>migrateuri</i> should be explicitly specified, using an
<small>IP</small> address associated with the network to be
used.</p> </td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>The firewall restricts what ports are available. When
libvirt generates a migration <small>URI,</small> it will
pick a port number using hypervisor specific rules. Some
hypervisors only require a single port to be open in the
firewalls, while others require a whole range of port
numbers. In the latter case <i>migrateuri</i> might be
specified to choose a specific port number outside the
default range in order to comply with local firewall
policies.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">See
&lt;http://libvirt.org/migration.html#uris&gt; for more
details on migration URIs.</p>

<p style="margin-left:17%; margin-top: 1em">Optional
<i>graphicsuri</i> overrides connection parameters used for
automatically reconnecting a graphical clients at the end of
migration. If omitted, libvirt will compute the parameters
based on target host <small>IP</small> address. In case the
client does not have a direct access to the network
virtualization hosts are connected to and needs to connect
through a proxy, <i>graphicsuri</i> may be used to specify
the address the client should connect to. The
<small>URI</small> is formed as follows:</p>

<pre style="margin-left:17%; margin-top: 1em">    protocol://hostname[:port]/[?parameters]</pre>


<p style="margin-left:17%; margin-top: 1em">where protocol
is either &quot;spice&quot; or &quot;vnc&quot; and
parameters is a list of protocol specific parameters
separated by &rsquo;&amp;&rsquo;. Currently recognized
parameters are &quot;tlsPort&quot; and
&quot;tlsSubject&quot;. For example,</p>

<pre style="margin-left:17%; margin-top: 1em">    spice://target.host.com:1234/?tlsPort=4567</pre>


<p style="margin-left:17%; margin-top: 1em">Optional
<i>listen-address</i> sets the listen address that
hypervisor on the destination side should bind to for
incoming migration. Both IPv4 and IPv6 addresses are
accepted as well as hostnames (the resolving is done on
destination). Some hypervisors do not support this feature
and will return an error if this parameter is used.</p>

<p style="margin-left:11%;"><b>migrate-setmaxdowntime</b>
<i>domain downtime</i></p>

<p style="margin-left:17%;">Set maximum tolerable downtime
for a domain which is being live-migrated to another host.
The <i>downtime</i> is a number of milliseconds the guest is
allowed to be down at the end of live migration.</p>

<p style="margin-left:11%;"><b>migrate-compcache</b>
<i>domain</i> [<i>&minus;&minus;size</i> <b>bytes</b>]</p>

<p style="margin-left:17%;">Sets and/or gets size of the
cache (in bytes) used for compressing repeatedly transferred
memory pages during live migration. When called without
<i>size</i>, the command just prints current size of the
compression cache. When <i>size</i> is specified, the
hypervisor is asked to change compression cache to
<i>size</i> bytes and then the current size is printed (the
result may differ from the requested size due to rounding
done by the hypervisor). The <i>size</i> option is supposed
to be used while the domain is being live-migrated as a
reaction to migration progress and increasing number of
compression cache misses obtained from domjobinfo.</p>

<p style="margin-left:11%;"><b>migrate-setspeed</b>
<i>domain bandwidth</i></p>

<p style="margin-left:17%;">Set the maximum migration
bandwidth (in MiB/s) for a domain which is being migrated to
another host. <i>bandwidth</i> is interpreted as an unsigned
long long value. Specifying a negative value results in an
essentially unlimited value being provided to the
hypervisor. The hypervisor can choose whether to reject the
value or convert it to the maximum value allowed.</p>

<p style="margin-left:11%;"><b>migrate-getspeed</b>
<i>domain</i></p>

<p style="margin-left:17%;">Get the maximum migration
bandwidth (in MiB/s) for a domain.</p>

<p style="margin-left:11%;"><b>numatune</b> <i>domain</i>
[<i>&minus;&minus;mode</i> <b>mode</b>]
[<i>&minus;&minus;nodeset</i> <b>nodeset</b>]
[[<i>&minus;&minus;config</i>] [<i>&minus;&minus;live</i>]
<br>
| [<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Set or get a domain&rsquo;s
numa parameters, corresponding to the &lt;numatune&gt;
element of domain <small>XML.</small> Without flags, the
current settings are displayed.</p>

<p style="margin-left:17%; margin-top: 1em"><i>mode</i> can
be one of &lsquo;strict&rsquo;, &lsquo;interleave&rsquo; and
&lsquo;preferred&rsquo; or any valid number from the
virDomainNumatuneMemMode enum in case the daemon supports
it. For a running domain, the mode can&rsquo;t be changed,
and the nodeset can be changed only if the domain was
started with a mode of &lsquo;strict&rsquo;.</p>

<p style="margin-left:17%; margin-top: 1em"><i>nodeset</i>
is a list of numa nodes used by the host for running the
domain. Its syntax is a comma separated list, with
&rsquo;&minus;&rsquo; for ranges and &rsquo;^&rsquo; for
excluding a node.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, set scheduler
information of a running guest. If
<i>&minus;&minus;config</i> is specified, affect the next
boot of a persistent guest. If <i>&minus;&minus;current</i>
is specified, affect the current guest state.</p>

<p style="margin-left:11%;"><b>reboot</b> <i>domain</i>
[<i>&minus;&minus;mode MODE-LIST</i>]</p>

<p style="margin-left:17%;">Reboot a domain. This acts just
as if the domain had the <b>reboot</b> command run from the
console. The command returns as soon as it has executed the
reboot action, which may be significantly before the domain
actually reboots.</p>

<p style="margin-left:17%; margin-top: 1em">The exact
behavior of a domain when it reboots is set by the
<i>on_reboot</i> parameter in the domain&rsquo;s
<small>XML</small> definition.</p>

<p style="margin-left:17%; margin-top: 1em">By default the
hypervisor will try to pick a suitable shutdown method. To
specify an alternative method, the <i>&minus;&minus;mode</i>
parameter can specify a comma separated list which includes
<tt>&quot;acpi&quot;</tt>, <tt>&quot;agent&quot;</tt>,
<tt>&quot;initctl&quot;</tt>, <tt>&quot;signal&quot;</tt>
and <tt>&quot;paravirt&quot;</tt>. The order in which
drivers will try each mode is undefined, and not related to
the order specified to virsh. For strict control over
ordering, use a single mode at a time and repeat the
command.</p>

<p style="margin-left:11%;"><b>reset</b> <i>domain</i></p>

<p style="margin-left:17%;">Reset a domain immediately
without any guest shutdown. <b>reset</b> emulates the power
reset button on a machine, where all guest hardware sees the
<small>RST</small> line set and reinitializes internal
state.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
Reset without any guest <small>OS</small> shutdown risks
data loss.</p>

<p style="margin-left:11%;"><b>restore</b>
<i>state-file</i> [<i>&minus;&minus;bypass&minus;cache</i>]
[<i>&minus;&minus;xml</i> <b>file</b>]
[{<i>&minus;&minus;running</i> | <i><br>
&minus;&minus;paused</i>}]</p>

<p style="margin-left:17%;">Restores a domain from a
<b>virsh save</b> state file. See <i>save</i> for more
info.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;bypass&minus;cache</i> is specified, the
restore will avoid the file system cache, although this may
slow down the operation.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;xml</i>
<b>file</b> is usually omitted, but can be used to supply an
alternative <small>XML</small> file for use on the restored
guest with changes only in the host-specific portions of the
domain <small>XML.</small> For example, it can be used to
account for file naming differences in underlying storage
due to disk snapshots taken after the guest was saved.</p>

<p style="margin-left:17%; margin-top: 1em">Normally,
restoring a saved image will use the state recorded in the
save image to decide between running or paused; passing
either the <i>&minus;&minus;running</i> or
<i>&minus;&minus;paused</i> flag will allow overriding which
state the domain should be started in.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>: To
avoid corrupting file system contents within the domain, you
should not reuse the saved state file for a second
<b>restore</b> unless you have also reverted all storage
volumes back to the same contents as when the state file was
created.</p>

<p style="margin-left:11%;"><b>save</b> <i>domain
state-file</i> [<i>&minus;&minus;bypass&minus;cache</i>]
[<i>&minus;&minus;xml</i> <b>file</b>]
[{<i>&minus;&minus;running</i> | <i><br>
&minus;&minus;paused</i>}]
[<i>&minus;&minus;verbose</i>]</p>

<p style="margin-left:17%;">Saves a running domain (
<small>RAM,</small> but not disk state) to a state file so
that it can be restored later. Once saved, the domain will
no longer be running on the system, thus the memory
allocated for the domain will be free for other domains to
use. <b>virsh restore</b> restores from this state file. If
<i>&minus;&minus;bypass&minus;cache</i> is specified, the
save will avoid the file system cache, although this may
slow down the operation.</p>

<p style="margin-left:17%; margin-top: 1em">The progress
may be monitored using <b>domjobinfo</b> virsh command and
canceled with <b>domjobabort</b> command (sent by another
virsh instance). Another option is to send
<small>SIGINT</small> (usually with
<tt>&quot;Ctrl&minus;C&quot;</tt>) to the virsh process
running <b>save</b> command. <i>&minus;&minus;verbose</i>
displays the progress of save.</p>

<p style="margin-left:17%; margin-top: 1em">This is roughly
equivalent to doing a hibernate on a running computer, with
all the same limitations. Open network connections may be
severed upon restore, as <small>TCP</small> timeouts may
have expired.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;xml</i>
<b>file</b> is usually omitted, but can be used to supply an
alternative <small>XML</small> file for use on the restored
guest with changes only in the host-specific portions of the
domain <small>XML.</small> For example, it can be used to
account for file naming differences that are planned to be
made via disk snapshots of underlying storage after the
guest is saved.</p>

<p style="margin-left:17%; margin-top: 1em">Normally,
restoring a saved image will decide between running or
paused based on the state the domain was in when the save
was done; passing either the <i>&minus;&minus;running</i> or
<i>&minus;&minus;paused</i> flag will allow overriding which
state the <b>restore</b> should use.</p>

<p style="margin-left:17%; margin-top: 1em">Domain saved
state files assume that disk images will be unchanged
between the creation and restore point. For a more complete
system restore point, where the disk state is saved
alongside the memory state, see the <b>snapshot</b> family
of commands.</p>

<p style="margin-left:11%;"><b>save-image-define</b>
<i>file xml</i> [{<i>&minus;&minus;running</i> |
<i>&minus;&minus;paused</i>}]</p>

<p style="margin-left:17%;">Update the domain
<small>XML</small> that will be used when <i>file</i> is
later used in the <b>restore</b> command. The <i>xml</i>
argument must be a file name containing the alternative
<small>XML,</small> with changes only in the host-specific
portions of the domain <small>XML.</small> For example, it
can be used to account for file naming differences resulting
from creating disk snapshots of underlying storage after the
guest was saved.</p>

<p style="margin-left:17%; margin-top: 1em">The save image
records whether the domain should be restored to a running
or paused state. Normally, this command does not alter the
recorded state; passing either the
<i>&minus;&minus;running</i> or <i>&minus;&minus;paused</i>
flag will allow overriding which state the <b>restore</b>
should use.</p>

<p style="margin-left:11%;"><b>save-image-dumpxml</b>
<i>file</i> [<i>&minus;&minus;security&minus;info</i>]</p>

<p style="margin-left:17%;">Extract the domain
<small>XML</small> that was in effect at the time the saved
state file <i>file</i> was created with the <b>save</b>
command. Using <i>&minus;&minus;security&minus;info</i> will
also include security sensitive information.</p>

<p style="margin-left:11%;"><b>save-image-edit</b>
<i>file</i> [{<i>&minus;&minus;running</i> |
<i>&minus;&minus;paused</i>}]</p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration associated with a saved state file <i>file</i>
created by the <b>save</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">The save image
records whether the domain should be restored to a running
or paused state. Normally, this command does not alter the
recorded state; passing either the
<i>&minus;&minus;running</i> or <i>&minus;&minus;paused</i>
flag will allow overriding which state the <b>restore</b>
should use.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh save&minus;image&minus;dumpxml state&minus;file &gt; state&minus;file.xml
 vi state&minus;file.xml (or make changes with your other text editor)
 virsh save&minus;image&minus;define state&minus;file state&minus;file&minus;xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><b>schedinfo</b> <i>domain</i>
[[<i>&minus;&minus;config</i>] [<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]] [[<i>&minus;&minus;set</i>]
<b><br>
parameter=value</b>]... <b><br>
schedinfo</b> [<i>&minus;&minus;weight</i> <b>number</b>]
[<i>&minus;&minus;cap</i> <b>number</b>] <i>domain</i></p>

<p style="margin-left:17%;">Allows you to show (and set)
the domain scheduler parameters. The parameters available
for each hypervisor are:</p>


<p style="margin-left:17%; margin-top: 1em"><small>LXC</small>
(posix scheduler) : cpu_shares, vcpu_period, vcpu_quota</p>


<p style="margin-left:17%; margin-top: 1em"><small>QEMU/KVM</small>
(posix scheduler): cpu_shares, vcpu_period, vcpu_quota,
emulator_period, emulator_quota</p>

<p style="margin-left:17%; margin-top: 1em">Xen (credit
scheduler): weight, cap</p>


<p style="margin-left:17%; margin-top: 1em"><small>ESX</small>
(allocation scheduler): reservation, limit, shares</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, set scheduler
information of a running guest. If
<i>&minus;&minus;config</i> is specified, affect the next
boot of a persistent guest. If <i>&minus;&minus;current</i>
is specified, affect the current guest state.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The cpu_shares parameter has a valid value range of
0&minus;262144; Negative values are wrapped to positive, and
larger values are capped at the maximum. Therefore, &minus;1
is a useful shorthand for 262144. On the Linux kernel, the
values 0 and 1 are automatically converted to a minimal
value of 2.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The weight and cap parameters are defined only for the
<small>XEN_CREDIT</small> scheduler and are now
<i><small>DEPRECATED</small></i> .</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The vcpu_period/emulator_period parameters have a valid
value range of 1000&minus;1000000 or 0, and the
vcpu_quota/emulator_quota parameters have a valid value
range of 1000&minus;18446744073709551 or less than 0. The
value 0 for either parameter is the same as not specifying
that parameter.</p>

<p style="margin-left:11%;"><b>screenshot</b> <i>domain</i>
[<i>imagefilepath</i>] [<i>&minus;&minus;screen</i>
<b>screenID</b>]</p>

<p style="margin-left:17%;">Takes a screenshot of a current
domain console and stores it into a file. Optionally, if
hypervisor supports more displays for a domain,
<i>screenID</i> allows to specify which screen will be
captured. It is the sequential number of screen. In case of
multiple graphics cards, heads are enumerated before
devices, e.g. having two graphics cards, both with four
heads, screen <small>ID 5</small> addresses the second head
on the second card.</p>

<p style="margin-left:11%;"><b>send-key</b> <i>domain</i>
[<i>&minus;&minus;codeset</i> <b>codeset</b>]
[<i>&minus;&minus;holdtime</i> <b>holdtime</b>]
<i>keycode</i>...</p>

<p style="margin-left:17%;">Parse the <i>keycode</i>
sequence as keystrokes to send to <i>domain</i>. Each
<i>keycode</i> can either be a numeric value or a symbolic
name from the corresponding codeset. If
<i>&minus;&minus;holdtime</i> is given, each keystroke will
be held for that many milliseconds. The default codeset is
<b>linux</b>, but use of the <i>&minus;&minus;codeset</i>
option allows other codesets to be chosen.</p>

<p style="margin-left:17%; margin-top: 1em">If multiple
keycodes are specified, they are all sent simultaneously to
the guest, and they may be received in random order. If you
need distinct keypresses, you must use multiple send-key
invocations. <b><br>
linux</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the Linux generic input event subsystem. The
symbolic names match the corresponding Linux key constant
macro names.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p><b>xt</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>The numeric values are those defined by the original
<small>XT</small> keyboard controller. No symbolic names are
provided</p> </td></tr>
</table>

<p style="margin-left:17%;"><b>atset1</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the <small>AT</small> keyboard controller, set 1
(aka <small>XT</small> compatible set). Extended keycoes
from <b>atset1</b> may differ from extended keycodes in the
<b>xt</b> codeset. No symbolic names are provided</p>

<p style="margin-left:17%;"><b>atset2</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the <small>AT</small> keyboard controller, set 2.
No symbolic names are provided</p>

<p style="margin-left:17%;"><b>atset3</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the <small>AT</small> keyboard controller, set 3
(aka <small>PS/2</small> compatible set). No symbolic names
are provided</p>

<p style="margin-left:17%;"><b>os_x</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the OS-X keyboard input subsystem. The symbolic
names match the corresponding OS-X key constant macro
names</p>

<p style="margin-left:17%;"><b>xt_kbd</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the Linux <small>KBD</small> device. These are a
variant on the original <small>XT</small> codeset, but often
with different encoding for extended keycodes. No symbolic
names are provided.</p>

<p style="margin-left:17%;"><b>win32</b></p>

<p style="margin-left:23%;">The numeric values are those
defined by the Win32 keyboard input subsystem. The symbolic
names match the corresponding Win32 key constant macro
names</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>usb</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>The numeric values are those defined by the <small>USB
HID</small> specification for keyboard input. No symbolic
names are provided</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p><b>rfb</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>The numeric values are those defined by the
<small>RFB</small> extension for sending raw keycodes. These
are a variant on the <small>XT</small> codeset, but extended
keycodes have the low bit of the second byte set, instead of
the high bit of the first byte. No symbolic names are
provided.</p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><b>Examples</b>
<br>
# send three strokes &rsquo;k&rsquo;, &rsquo;e&rsquo;,
&rsquo;y&rsquo;, using xt codeset. these <br>
# are all pressed simultaneously and may be received by the
guest <br>
# in random order <br>
virsh send-key dom &minus;&minus;codeset xt 37 18 21</p>

<pre style="margin-left:17%; margin-top: 1em">  # send one stroke 'right&minus;ctrl+C'
  virsh send&minus;key dom KEY_RIGHTCTRL KEY_C
  # send a tab, held for 1 second
  virsh send&minus;key &minus;&minus;holdtime 1000 0xf</pre>


<p style="margin-left:11%;"><b>send-process-signal</b>
<i>domain-id pid signame</i></p>

<p style="margin-left:17%;">Send a signal <i>signame</i> to
the process identified by <i>pid</i> running in the virtual
domain <i>domain-id</i>. The <i>pid</i> is a process
<small>ID</small> in the virtual domain namespace.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>signame</i> argument may be either an integer signal
constant number, or one of the symbolic names:</p>

<pre style="margin-left:17%; margin-top: 1em">    &quot;nop&quot;, &quot;hup&quot;, &quot;int&quot;, &quot;quit&quot;, &quot;ill&quot;,
    &quot;trap&quot;, &quot;abrt&quot;, &quot;bus&quot;, &quot;fpe&quot;, &quot;kill&quot;,
    &quot;usr1&quot;, &quot;segv&quot;, &quot;usr2&quot;, &quot;pipe&quot;, &quot;alrm&quot;,
    &quot;term&quot;, &quot;stkflt&quot;, &quot;chld&quot;, &quot;cont&quot;, &quot;stop&quot;,
    &quot;tstp&quot;, &quot;ttin&quot;, &quot;ttou&quot;, &quot;urg&quot;, &quot;xcpu&quot;,
    &quot;xfsz&quot;, &quot;vtalrm&quot;, &quot;prof&quot;, &quot;winch&quot;, &quot;poll&quot;,
    &quot;pwr&quot;, &quot;sys&quot;, &quot;rt0&quot;, &quot;rt1&quot;, &quot;rt2&quot;, &quot;rt3&quot;,
    &quot;rt4&quot;, &quot;rt5&quot;, &quot;rt6&quot;, &quot;rt7&quot;, &quot;rt8&quot;, &quot;rt9&quot;,
    &quot;rt10&quot;, &quot;rt11&quot;, &quot;rt12&quot;, &quot;rt13&quot;, &quot;rt14&quot;, &quot;rt15&quot;,
    &quot;rt16&quot;, &quot;rt17&quot;, &quot;rt18&quot;, &quot;rt19&quot;, &quot;rt20&quot;, &quot;rt21&quot;,
    &quot;rt22&quot;, &quot;rt23&quot;, &quot;rt24&quot;, &quot;rt25&quot;, &quot;rt26&quot;, &quot;rt27&quot;,
    &quot;rt28&quot;, &quot;rt29&quot;, &quot;rt30&quot;, &quot;rt31&quot;, &quot;rt32&quot;</pre>


<p style="margin-left:17%; margin-top: 1em">The symbol name
may optionally be prefixed with &rsquo;sig&rsquo; or
&rsquo;sig_&rsquo; and may be in uppercase or lowercase.</p>


<p style="margin-left:17%; margin-top: 1em"><b>Examples</b>
<br>
virsh send-process-signal myguest 1 15 <br>
virsh send-process-signal myguest 1 term <br>
virsh send-process-signal myguest 1 sigterm <br>
virsh send-process-signal myguest 1
<small>SIG_HUP</small></p>

<p style="margin-left:11%;"><b>setmem</b> <i>domain</i>
<b>size</b> [[<i>&minus;&minus;config</i>]
[<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Change the memory allocation
for a guest domain. If <i>&minus;&minus;live</i> is
specified, perform a memory balloon of a running guest. If
<i>&minus;&minus;config</i> is specified, affect the next
boot of a persistent guest. If <i>&minus;&minus;current</i>
is specified, affect the current guest state. Both
<i>&minus;&minus;live</i> and <i>&minus;&minus;config</i>
flags may be given, but <i>&minus;&minus;current</i> is
exclusive. If no flag is specified, behavior is different
depending on hypervisor.</p>

<p style="margin-left:17%; margin-top: 1em"><i>size</i> is
a scaled integer (see <b><small>NOTES</small></b> above); it
defaults to kibibytes (blocks of 1024 bytes) unless you
provide a suffix (and the older option name
<i>&minus;&minus;kilobytes</i> is available as a deprecated
synonym) . Libvirt rounds up to the nearest kibibyte. Some
hypervisors require a larger granularity than KiB, and
requests that are not an even multiple will be rounded up.
For example, vSphere/ESX rounds the parameter up to
mebibytes (1024 kibibytes).</p>

<p style="margin-left:17%; margin-top: 1em">For Xen, you
can only adjust the memory of a running domain if the domain
is paravirtualized or running the <small>PV</small> balloon
driver.</p>

<p style="margin-left:11%;"><b>setmaxmem</b> <i>domain</i>
<b>size</b> [[<i>&minus;&minus;config</i>]
[<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Change the maximum memory
allocation limit for a guest domain. If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. If no flag is
specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:17%; margin-top: 1em">Some
hypervisors such as <small>QEMU/KVM</small> don&rsquo;t
support live changes (especially increasing) of the maximum
memory limit.</p>

<p style="margin-left:17%; margin-top: 1em"><i>size</i> is
a scaled integer (see <b><small>NOTES</small></b> above); it
defaults to kibibytes (blocks of 1024 bytes) unless you
provide a suffix (and the older option name
<i>&minus;&minus;kilobytes</i> is available as a deprecated
synonym) . Libvirt rounds up to the nearest kibibyte. Some
hypervisors require a larger granularity than KiB, and
requests that are not an even multiple will be rounded up.
For example, vSphere/ESX rounds the parameter up to
mebibytes (1024 kibibytes).</p>

<p style="margin-left:11%;"><b>memtune</b> <i>domain</i>
[<i>&minus;&minus;hard&minus;limit</i> <b>size</b>]
[<i>&minus;&minus;soft&minus;limit</i> <b>size</b>] <br>
[<i>&minus;&minus;swap&minus;hard&minus;limit</i>
<b>size</b>] [<i>&minus;&minus;min&minus;guarantee</i>
<b>size</b>] [[<i>&minus;&minus;config</i>]
[<i>&minus;&minus;live</i>] | <br>
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Allows you to display or set
the domain memory parameters. Without flags, the current
settings are displayed; with a flag, the appropriate limit
is adjusted if supported by the hypervisor.
<small>LXC</small> and <small>QEMU/KVM</small> support
<i>&minus;&minus;hard&minus;limit</i>,
<i>&minus;&minus;soft&minus;limit</i>, and
<i>&minus;&minus;swap&minus;hard&minus;limit</i>.
<i>&minus;&minus;min&minus;guarantee</i> is supported only
by <small>ESX</small> hypervisor. Each of these limits are
scaled integers (see <b><small>NOTES</small></b> above),
with a default of kibibytes (blocks of 1024 bytes) if no
suffix is present. Libvirt rounds up to the nearest
kibibyte. Some hypervisors require a larger granularity than
KiB, and requests that are not an even multiple will be
rounded up. For example, vSphere/ESX rounds the parameter up
to mebibytes (1024 kibibytes).</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. If no flag is
specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:17%; margin-top: 1em">For
<small>QEMU/KVM,</small> the parameters are applied to the
<small>QEMU</small> process as a whole. Thus, when counting
them, one needs to add up guest <small>RAM,</small> guest
video <small>RAM,</small> and some memory overhead of
<small>QEMU</small> itself. The last piece is hard to
determine so one needs guess and try. <i><br>
&minus;&minus;hard&minus;limit</i></p>

<p style="margin-left:23%;">The maximum memory the guest
can use.</p>


<p style="margin-left:17%;"><i>&minus;&minus;soft&minus;limit</i></p>

<p style="margin-left:23%;">The memory limit to enforce
during memory contention.</p>


<p style="margin-left:17%;"><i>&minus;&minus;swap&minus;hard&minus;limit</i></p>

<p style="margin-left:23%;">The maximum memory plus swap
the guest can use. This has to be more than hard-limit value
provided.</p>


<p style="margin-left:17%;"><i>&minus;&minus;min&minus;guarantee</i></p>

<p style="margin-left:23%;">The guaranteed minimum memory
allocation for the guest.</p>

<p style="margin-left:17%; margin-top: 1em">Specifying
&minus;1 as a value for these limits is interpreted as
unlimited.</p>

<p style="margin-left:11%;"><b>blkiotune</b> <i>domain</i>
[<i>&minus;&minus;weight</i> <b>weight</b>]
[<i>&minus;&minus;device&minus;weights</i>
<b>device-weights</b>] <br>

[<i>&minus;&minus;device&minus;read&minus;iops&minus;sec</i>
<b>device-read-iops-sec</b>]
[<i>&minus;&minus;device&minus;write&minus;iops&minus;sec</i>
<b><br>
device-write-iops-sec</b>]
[<i>&minus;&minus;device&minus;read&minus;bytes&minus;sec</i>
<b>device-read-bytes-sec</b>] <br>

[<i>&minus;&minus;device&minus;write&minus;bytes&minus;sec</i>
<b>device-write-bytes-sec</b>]
[[<i>&minus;&minus;config</i>] [<i>&minus;&minus;live</i>]
<br>
| [<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Display or set the blkio
parameters. <small>QEMU/KVM</small> supports
<i>&minus;&minus;weight</i>. <i>&minus;&minus;weight</i> is
in range [100, 1000]. After kernel 2.6.39, the value could
be in the range [10, 1000].</p>


<p style="margin-left:17%; margin-top: 1em"><b>device-weights</b>
is a single string listing one or more device/weight pairs,
in the format of
/path/to/device,weight,/path/to/device,weight. Each weight
is in the range [100, 1000], [10, 1000] after kernel 2.6.39,
or the value 0 to remove that device from per-device
listings. Only the devices listed in the string are
modified; any existing per-device weights for other devices
remain unchanged.</p>


<p style="margin-left:17%; margin-top: 1em"><b>device-read-iops-sec</b>
is a single string listing one or more device/read_iops_sec
pairs, int the format of
/path/to/device,read_iops_sec,/path/to/device,read_iops_sec.
Each read_iops_sec is a number which type is unsigned int,
value 0 to remove that device from per-decice listing. Only
the devices listed in the string are modified; any existing
per-device read_iops_sec for other devices remain
unchanged.</p>


<p style="margin-left:17%; margin-top: 1em"><b>device-write-iops-sec</b>
is a single string listing one or more device/write_iops_sec
pairs, int the format of
/path/to/device,write_iops_sec,/path/to/device,write_iops_sec.
Each write_iops_sec is a number which type is unsigned int,
value 0 to remove that device from per-decice listing. Only
the devices listed in the string are modified; any existing
per-device write_iops_sec for other devices remain
unchanged.</p>


<p style="margin-left:17%; margin-top: 1em"><b>device-read-bytes-sec</b>
is a single string listing one or more device/read_bytes_sec
pairs, int the format of
/path/to/device,read_bytes_sec,/path/to/device,read_bytes_sec.
Each read_bytes_sec is a number which type is unsigned long
long, value 0 to remove that device from per-decice listing.
Only the devices listed in the string are modified; any
existing per-device read_bytes_sec for other devices remain
unchanged.</p>


<p style="margin-left:17%; margin-top: 1em"><b>device-write-bytes-sec</b>
is a single string listing one or more
device/write_bytes_sec pairs, int the format of
/path/to/device,write_bytes_sec,/path/to/device,write_bytes_sec.
Each write_bytes_sec is a number which type is unsigned long
long, value 0 to remove that device from per-decice listing.
Only the devices listed in the string are modified; any
existing per-device write_bytes_sec for other devices remain
unchanged.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. If no flag is
specified, behavior is different depending on
hypervisor.</p>

<p style="margin-left:11%;"><b>setvcpus</b> <i>domain
count</i> [<i>&minus;&minus;maximum</i>]
[[<i>&minus;&minus;config</i>] [<i>&minus;&minus;live</i>] |
[<i>&minus;&minus;current</i>]] <br>
[<i>&minus;&minus;guest</i>]</p>

<p style="margin-left:17%;">Change the number of virtual
CPUs active in a guest domain. By default, this command
works on active guest domains. To change the settings for an
inactive guest domain, use the <i>&minus;&minus;config</i>
flag.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>count</i> value may be limited by host, hypervisor, or a
limit coming from the original description of the guest
domain. For Xen, you can only adjust the virtual CPUs of a
running domain if the domain is paravirtualized.</p>

<p style="margin-left:17%; margin-top: 1em">If the
<i>&minus;&minus;config</i> flag is specified, the change is
made to the stored <small>XML</small> configuration for the
guest domain, and will only take effect when the guest
domain is next started.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, the guest domain
must be active, and the change takes place immediately. Both
the <i>&minus;&minus;config</i> and
<i>&minus;&minus;live</i> flags may be specified together if
supported by the hypervisor. If this command is run before
the guest has finished booting, the guest may fail to
process the change.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;current</i> is specified, affect the
current guest state.</p>

<p style="margin-left:17%; margin-top: 1em">When no flags
are given, the <i>&minus;&minus;live</i> flag is assumed and
the guest domain must be active. In this situation it is up
to the hypervisor whether the <i>&minus;&minus;config</i>
flag is also assumed, and therefore whether the
<small>XML</small> configuration is adjusted to make the
change persistent.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;guest</i> is specified, then the count of
cpus is modified in the guest instead of the hypervisor.
This flag is usable only for live domains and may require
guest agent to be configured in the guest.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;maximum</i> flag controls the maximum
number of virtual cpus that can be hot-plugged the next time
the domain is booted. As such, it must only be used with the
<i>&minus;&minus;config</i> flag, and not with the
<i>&minus;&minus;live</i> flag.</p>

<p style="margin-left:11%;"><b>shutdown</b> <i>domain</i>
[<i>&minus;&minus;mode MODE-LIST</i>]</p>

<p style="margin-left:17%;">Gracefully shuts down a domain.
This coordinates with the domain <small>OS</small> to
perform graceful shutdown, so there is no guarantee that it
will succeed, and may take a variable length of time
depending on what services must be shutdown in the
domain.</p>

<p style="margin-left:17%; margin-top: 1em">The exact
behavior of a domain when it shuts down is set by the
<i>on_shutdown</i> parameter in the domain&rsquo;s
<small>XML</small> definition.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>domain</i> is transient, then the metadata of any
snapshots will be lost once the guest stops running, but the
snapshot contents still exist, and a new domain with the
same name and <small>UUID</small> can restore the snapshot
metadata with <b>snapshot-create</b>.</p>

<p style="margin-left:17%; margin-top: 1em">By default the
hypervisor will try to pick a suitable shutdown method. To
specify an alternative method, the <i>&minus;&minus;mode</i>
parameter can specify a comma separated list which includes
<tt>&quot;acpi&quot;</tt>, <tt>&quot;agent&quot;</tt>,
<tt>&quot;initctl&quot;</tt>, <tt>&quot;signal&quot;</tt>
and <tt>&quot;paravirt&quot;</tt>. The order in which
drivers will try each mode is undefined, and not related to
the order specified to virsh. For strict control over
ordering, use a single mode at a time and repeat the
command.</p>

<p style="margin-left:11%;"><b>start</b>
<i>domain-name-or-uuid</i> [<i>&minus;&minus;console</i>]
[<i>&minus;&minus;paused</i>]
[<i>&minus;&minus;autodestroy</i>] <br>
[<i>&minus;&minus;bypass&minus;cache</i>]
[<i>&minus;&minus;force&minus;boot</i>]
[<i>&minus;&minus;pass&minus;fds N,M,...</i>]</p>

<p style="margin-left:17%;">Start a (previously defined)
inactive domain, either from the last <b>managedsave</b>
state, or via a fresh boot if no managedsave state is
present. The domain will be paused if the
<i>&minus;&minus;paused</i> option is used and supported by
the driver; otherwise it will be running. If
<i>&minus;&minus;console</i> is requested, attach to the
console after creation. If <i>&minus;&minus;autodestroy</i>
is requested, then the guest will be automatically destroyed
when virsh closes its connection to libvirt, or otherwise
exits. If <i>&minus;&minus;bypass&minus;cache</i> is
specified, and managedsave state exists, the restore will
avoid the file system cache, although this may slow down the
operation. If <i>&minus;&minus;force&minus;boot</i> is
specified, then any managedsave state is discarded and a
fresh boot occurs.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;pass&minus;fds</i> is specified, the
argument is a comma separated list of open file descriptors
which should be pass on into the guest. The file descriptors
will be re-numered in the guest, starting from 3. This is
only supported with container based virtualization.</p>

<p style="margin-left:11%;"><b>suspend</b>
<i>domain</i></p>

<p style="margin-left:17%;">Suspend a running domain. It is
kept in memory but won&rsquo;t be scheduled anymore.</p>

<p style="margin-left:11%;"><b>resume</b> <i>domain</i></p>

<p style="margin-left:17%;">Moves a domain out of the
suspended state. This will allow a previously suspended
domain to now be eligible for scheduling by the underlying
hypervisor.</p>

<p style="margin-left:11%;"><b>dompmsuspend</b> <i>domain
target</i> [<i>&minus;&minus;duration</i>]</p>

<p style="margin-left:17%;">Suspend a running domain into
one of these states (possible <i>target</i> values): <br>
mem equivalent of S3 <small>ACPI</small> state <br>
disk equivalent of S4 <small>ACPI</small> state <br>
hybrid <small>RAM</small> is saved to disk but not powered
off</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;duration</i> argument specifies number of
seconds before the domain is woken up after it was suspended
(see also <b>dompmwakeup</b>). Default is 0 for unlimited
suspend time. (This feature isn&rsquo;t currently supported
by any hypervisor driver and 0 should be used.).</p>

<p style="margin-left:17%; margin-top: 1em">Note that this
command requires a guest agent configured and running in the
domain&rsquo;s guest <small>OS.</small></p>

<p style="margin-left:17%; margin-top: 1em">Beware that at
least for <small>QEMU,</small> the domain&rsquo;s process
will be terminated when target disk is used and a new
process will be launched when libvirt is asked to wake up
the domain. As a result of this, any runtime changes, such
as device hotplug or memory settings, are lost unless such
changes were made with <i>&minus;&minus;config</i> flag.</p>

<p style="margin-left:11%;"><b>dompmwakeup</b>
<i>domain</i></p>

<p style="margin-left:17%;">Wakeup a domain from
pmsuspended state (either suspended by dompmsuspend or from
the guest itself). Injects a wakeup into the guest that is
in pmsuspended state, rather than waiting for the previously
requested duration (if any) to elapse. This operation
doesn&rsquo;t not necessarily fail if the domain is
running.</p>

<p style="margin-left:11%;"><b>ttyconsole</b>
<i>domain</i></p>

<p style="margin-left:17%;">Output the device used for the
<small>TTY</small> console of the domain. If the information
is not available the processes will provide an exit code of
1.</p>

<p style="margin-left:11%;"><b>undefine</b> <i>domain</i>
[<i>&minus;&minus;managed&minus;save</i>]
[<i>&minus;&minus;snapshots&minus;metadata</i>]
[<i>&minus;&minus;nvram</i>] [ <br>
{<i>&minus;&minus;storage</i> <b>volumes</b> |
<i>&minus;&minus;remove&minus;all&minus;storage</i>}
<i>&minus;&minus;wipe&minus;storage</i>]</p>

<p style="margin-left:17%;">Undefine a domain. If the
domain is running, this converts it to a transient domain,
without stopping it. If the domain is inactive, the domain
configuration is removed.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;managed&minus;save</i> flag guarantees that
any managed save image (see the <b>managedsave</b> command)
is also cleaned up. Without the flag, attempts to undefine a
domain with a managed save image will fail.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;snapshots&minus;metadata</i> flag
guarantees that any snapshots (see the <b>snapshot-list</b>
command) are also cleaned up when undefining an inactive
domain. Without the flag, attempts to undefine an inactive
domain with snapshot metadata will fail. If the domain is
active, this flag is ignored.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;nvram</i> flag ensures no nvram
(/domain/os/nvram/) file is left behind. If the domain has
an nvram file and the flag is omitted, the undefine will
fail.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;storage</i> flag takes a parameter
<b>volumes</b>, which is a comma separated list of volume
target names or source paths of storage volumes to be
removed along with the undefined domain. Volumes can be
undefined and thus removed only on inactive domains. Volume
deletion is only attempted after the domain is undefined; if
not all of the requested volumes could be deleted, the error
message indicates what still remains behind. If a volume
path is not found in the domain definition, it&rsquo;s
treated as if the volume was successfully deleted. Only
volumes managed by libvirt in storage pools can be removed
this way. (See <b>domblklist</b> for list of target names
associated to a domain). Example: &minus;&minus;storage
vda,/path/to/storage.img</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;remove&minus;all&minus;storage</i> flag
specifies that all of the domain&rsquo;s storage volumes
should be deleted.</p>

<p style="margin-left:17%; margin-top: 1em">The flag
<i>&minus;&minus;wipe&minus;storage</i> specifies that the
storage volumes should be wiped before removal.</p>


<p style="margin-left:17%; margin-top: 1em"><small>NOTE:</small>
For an inactive domain, the domain name or
<small>UUID</small> must be used as the <i>domain</i>.</p>

<p style="margin-left:11%;"><b>vcpucount</b> <i>domain</i>
[{<i>&minus;&minus;maximum</i> |
<i>&minus;&minus;active</i>} {<i>&minus;&minus;config</i> |
<i>&minus;&minus;live</i> | <i><br>
&minus;&minus;current</i>}] [<i>&minus;&minus;guest</i>]</p>

<p style="margin-left:17%;">Print information about the
virtual cpu counts of the given <i>domain</i>. If no flags
are specified, all possible counts are listed in a table;
otherwise, the output is limited to just the numeric value
requested. For historical reasons, the table lists the label
&quot;current&quot; on the rows that can be queried in
isolation via the <i>&minus;&minus;active</i> flag, rather
than relating to the <i>&minus;&minus;current</i> flag.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;maximum</i>
requests information on the maximum cap of vcpus that a
domain can add via <b>setvcpus</b>, while
<i>&minus;&minus;active</i> shows the current usage; these
two flags cannot both be specified.
<i>&minus;&minus;config</i> requires a persistent domain and
requests information regarding the next time the domain will
be booted, <i>&minus;&minus;live</i> requires a running
domain and lists current values, and
<i>&minus;&minus;current</i> queries according to the
current state of the domain (corresponding to
<i>&minus;&minus;live</i> if running, or
<i>&minus;&minus;config</i> if inactive); these three flags
are mutually exclusive.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;guest</i> is specified, then the count of
cpus is reported from the perspective of the guest. This
flag is usable only for live domains and may require guest
agent to be configured in the guest.</p>

<p style="margin-left:11%;"><b>vcpuinfo</b> <i>domain</i>
[<i>&minus;&minus;pretty</i>]</p>

<p style="margin-left:17%;">Returns basic information about
the domain virtual CPUs, like the number of vCPUs, the
running time, the affinity to physical processors.</p>

<p style="margin-left:17%; margin-top: 1em">With
<i>&minus;&minus;pretty</i>, cpu affinities are shown as
ranges.</p>

<p style="margin-left:11%;"><b>vcpupin</b> <i>domain</i>
[<i>vcpu</i>] [<i>cpulist</i>] [[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Query or change the pinning of
domain VCPUs to host physical CPUs. To pin a single
<i>vcpu</i>, specify <i>cpulist</i>; otherwise, you can
query one <i>vcpu</i> or omit <i>vcpu</i> to list all at
once.</p>

<p style="margin-left:17%; margin-top: 1em"><i>cpulist</i>
is a list of physical <small>CPU</small> numbers. Its syntax
is a comma separated list and a special markup using
&rsquo;&minus;&rsquo; and &rsquo;^&rsquo; (ex.
&rsquo;0&minus;4&rsquo;, &rsquo;0&minus;3,^2&rsquo;) can
also be allowed. The &rsquo;&minus;&rsquo; denotes the range
and the &rsquo;^&rsquo; denotes exclusive. If you want to
reset vcpupin setting, that is, to pin vcpu all physical
cpus, simply specify &rsquo;r&rsquo; as a cpulist. If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given if
<i>cpulist</i> is present, but <i>&minus;&minus;current</i>
is exclusive. If no flag is specified, behavior is different
depending on hypervisor.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The expression is sequentially evaluated, so
&quot;0&minus;15,^8&quot; is identical to
&quot;9&minus;14,0&minus;7,15&quot; but not identical to
&quot;^8,0&minus;15&quot;.</p>

<p style="margin-left:11%;"><b>emulatorpin</b>
<i>domain</i> [<i>cpulist</i>] [[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Query or change the pinning of
domain&rsquo;s emulator threads to host physical CPUs.</p>

<p style="margin-left:17%; margin-top: 1em">See
<b>vcpupin</b> for <i>cpulist</i>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
guest. If <i>&minus;&minus;config</i> is specified, affect
the next boot of a persistent guest. If
<i>&minus;&minus;current</i> is specified, affect the
current guest state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given if
<i>cpulist</i> is present, but <i>&minus;&minus;current</i>
is exclusive. If no flag is specified, behavior is different
depending on hypervisor.</p>

<p style="margin-left:11%;"><b>vncdisplay</b>
<i>domain</i></p>

<p style="margin-left:17%;">Output the <small>IP</small>
address and port number for the <small>VNC</small> display.
If the information is not available the processes will
provide an exit code of 1.</p>

<h2>DEVICE COMMANDS
<a name="DEVICE COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate devices associated to domains. The
<i>domain</i> can be specified as a short integer, a name or
a full <small>UUID.</small> To better understand the values
allowed as options for the command reading the documentation
at &lt;http://libvirt.org/formatdomain.html&gt; on the
format of the device sections to get the most accurate set
of accepted values. <b><br>
attach-device</b> <i>domain <small>FILE</small></i>
[[[<i>&minus;&minus;live</i>] [<i>&minus;&minus;config</i>]
| [<i>&minus;&minus;current</i>]] | <br>
[<i>&minus;&minus;persistent</i>]]</p>

<p style="margin-left:17%;">Attach a device to the domain,
using a device definition in an <small>XML</small> file
using a device definition element such as &lt;disk&gt; or
&lt;interface&gt; as the top-level element. See the
documentation at
&lt;http://libvirt.org/formatdomain.html#elementsDevices&gt;
to learn about libvirt <small>XML</small> format for a
device. If <i>&minus;&minus;config</i> is specified the
command alters the persistent domain configuration with the
device attach taking effect the next time libvirt starts the
domain. For cdrom and floppy devices, this command only
replaces the media within an existing device; consider using
<b>update-device</b> for this usage. For passthrough host
devices, see also <b>nodedev-detach</b>, needed if the
device does not use managed mode.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
using of partial device definition <small>XML</small> files
may lead to unexpected results as some fields may be
autogenerated and thus match devices other than
expected.</p>

<p style="margin-left:11%;"><b>attach-disk</b> <i>domain
source target</i> [[[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]] | <br>
[<i>&minus;&minus;persistent</i>]]
[<i>&minus;&minus;targetbus bus</i>]
[<i>&minus;&minus;driver driver</i>]
[<i>&minus;&minus;subdriver <br>
subdriver</i>] [<i>&minus;&minus;iothread iothread</i>]
[<i>&minus;&minus;cache cache</i>] [<i>&minus;&minus;type
type</i>] [<i>&minus;&minus;mode <br>
mode</i>] [<i>&minus;&minus;sourcetype sourcetype</i>]
[<i>&minus;&minus;serial serial</i>] [<i>&minus;&minus;wwn
wwn</i>] [<i>&minus;&minus;rawio</i>] <br>
[<i>&minus;&minus;address address</i>]
[<i>&minus;&minus;multifunction</i>]
[<i>&minus;&minus;print&minus;xml</i>]</p>

<p style="margin-left:17%;">Attach a new disk device to the
domain. <i>source</i> is path for the files and devices.
<i>target</i> controls the bus or device under which the
disk is exposed to the guest <small>OS.</small> It indicates
the &quot;logical&quot; device name; the optional
<i>targetbus</i> attribute specifies the type of disk device
to emulate; possible values are driver specific, with
typical values being <i>ide</i>, <i>scsi</i>, <i>virtio</i>,
<i>xen</i>, <i>usb</i>, <i>sata</i>, or <i>sd</i>, if
omitted, the bus type is inferred from the style of the
device name (e.g. a device named &rsquo;sda&rsquo; will
typically be exported using a <small>SCSI</small> bus).
<i>driver</i> can be <i>file</i>, <i>tap</i> or <i>phy</i>
for the Xen hypervisor depending on the kind of access; or
<i>qemu</i> for the <small>QEMU</small> emulator. Further
details to the driver can be passed using <i>subdriver</i>.
For Xen <i>subdriver</i> can be <i>aio</i>, while for
<small>QEMU</small> subdriver should match the format of the
disk source, such as <i>raw</i> or <i>qcow2</i>. Hypervisor
default will be used if <i>subdriver</i> is not specified.
However, the default may not be correct, esp. for
<small>QEMU</small> as for security reasons it is configured
not to detect disk formats. <i>type</i> can indicate
<i>lun</i>, <i>cdrom</i> or <i>floppy</i> as alternative to
the disk default, although this use only replaces the media
within the existing virtual cdrom or floppy device; consider
using <b>update-device</b> for this usage instead.
<i>mode</i> can specify the two specific mode
<i>readonly</i> or <i>shareable</i>. <i>sourcetype</i> can
indicate the type of source (block|file) <i>cache</i> can be
one of &quot;default&quot;, &quot;none&quot;,
&quot;writethrough&quot;, &quot;writeback&quot;,
&quot;directsync&quot; or &quot;unsafe&quot;.
<i>iothread</i> is the number within the range of domain
IOThreads to which this disk may be attached (
<small>QEMU</small> only). <i>serial</i> is the serial of
disk device. <i>wwn</i> is the wwn of disk device.
<i>rawio</i> indicates the disk needs rawio capability.
<i>address</i> is the address of disk device in the form of
pci:domain.bus.slot.function, scsi:controller.bus.unit or
ide:controller.bus.unit. <i>multifunction</i> indicates
specified pci address is a multifunction pci device
address.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;print&minus;xml</i> is specified, then the
<small>XML</small> of the disk that would be attached is
printed instead.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain. Likewise,
<i>&minus;&minus;shareable</i> is an alias for
<i>&minus;&minus;mode shareable</i>.</p>

<p style="margin-left:11%;"><b>attach-interface</b>
<i>domain type source</i> [[[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] | <br>
[<i>&minus;&minus;current</i>]] |
[<i>&minus;&minus;persistent</i>]] [<i>&minus;&minus;target
target</i>] [<i>&minus;&minus;mac mac</i>]
[<i>&minus;&minus;script <br>
script</i>] [<i>&minus;&minus;model model</i>]
[<i>&minus;&minus;config</i>] [<i>&minus;&minus;inbound
average,peak,burst</i>] <br>
[<i>&minus;&minus;outbound average,peak,burst</i>]</p>

<p style="margin-left:17%;">Attach a new network interface
to the domain. <i>type</i> can be either <i>network</i> to
indicate connection via a libvirt virtual network or
<i>bridge</i> to indicate connection via a bridge device on
the host. <i>source</i> indicates the source of the
connection (either the name of a network, or of a bridge
device). <i>target</i> is used to specify the tap/macvtap
device to be used to connect the domain to the source. Names
starting with &rsquo;vnet&rsquo; are considered as
auto-generated and are blanked out/regenerated each time the
interface is attached. <i>mac</i> specifies the
<small>MAC</small> address of the network interface; if a
<small>MAC</small> address is not given, a new address will
be automatically generated (and stored in the persistent
configuration if &quot;&minus;&minus;config&quot; is given
on the commandline). <i>script</i> is used to specify a path
to a custom script to be called while attaching to a bridge
&minus; this will be called instead of the default script
not in addition to it; &minus;&minus;script is valid only
for interfaces of type <i>bridge</i> and only for Xen
domains. <i>model</i> specifies the network device model to
be presented to the domain. <i>inbound</i> and
<i>outbound</i> control the bandwidth of the interface.
<i>peak</i> and <i>burst</i> are optional, so
&quot;average,peak&quot;, &quot;average,,burst&quot; and
&quot;average&quot; are also legal. Values for
<i>average</i> and <i>peak</i> are expressed in kilobytes
per second, while <i>burst</i> is expressed in kilobytes in
a single burst at &minus;<i>peak</i> speed as described in
the Network <small>XML</small> documentation at
&lt;http://libvirt.org/formatnetwork.html#elementQoS&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
the optional target value is the name of a device to be
created as the back-end on the node. If not provided a
device named &quot;vnetN&quot; or &quot;vifN&quot; will be
created automatically.</p>

<p style="margin-left:11%;"><b>detach-device</b> <i>domain
<small>FILE</small></i> [[[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]] | <br>
[<i>&minus;&minus;persistent</i>]]</p>

<p style="margin-left:17%;">Detach a device from the
domain, takes the same kind of <small>XML</small>
descriptions as command <b>attach-device</b>. For
passthrough host devices, see also <b>nodedev-reattach</b>,
needed if the device does not use managed mode.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
using of partial device definition <small>XML</small> files
may lead to unexpected results as some fields may be
autogenerated and thus match devices other than
expected.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em">Note that older
versions of virsh used <i>&minus;&minus;config</i> as an
alias for <i>&minus;&minus;persistent</i>.</p>

<p style="margin-left:11%;"><b>detach-disk</b> <i>domain
target</i> [[[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]] | <br>
[<i>&minus;&minus;persistent</i>]]</p>

<p style="margin-left:17%;">Detach a disk device from a
domain. The <i>target</i> is the device as seen from the
domain.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em">Note that older
versions of virsh used <i>&minus;&minus;config</i> as an
alias for <i>&minus;&minus;persistent</i>.</p>

<p style="margin-left:11%;"><b>detach-interface</b>
<i>domain type</i> [<i>&minus;&minus;mac mac</i>]
[[[<i>&minus;&minus;live</i>] [<i>&minus;&minus;config</i>]
| <br>
[<i>&minus;&minus;current</i>]] |
[<i>&minus;&minus;persistent</i>]]</p>

<p style="margin-left:17%;">Detach a network interface from
a domain. <i>type</i> can be either <i>network</i> to
indicate a physical network device or <i>bridge</i> to
indicate a bridge to a device. It is recommended to use the
<i>mac</i> option to distinguish between the interfaces if
more than one are present on the domain.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. When no flag is
specified legacy <small>API</small> is used whose behavior
depends on the hypervisor driver.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em">Note that older
versions of virsh used <i>&minus;&minus;config</i> as an
alias for <i>&minus;&minus;persistent</i>.</p>

<p style="margin-left:11%;"><b>update-device</b> <i>domain
file</i> [<i>&minus;&minus;force</i>]
[[[<i>&minus;&minus;live</i>] [<i>&minus;&minus;config</i>]
| <br>
[<i>&minus;&minus;current</i>]] |
[<i>&minus;&minus;persistent</i>]]</p>

<p style="margin-left:17%;">Update the characteristics of a
device associated with <i>domain</i>, based on the device
definition in an <small>XML</small> <i>file</i>. The
<i>&minus;&minus;force</i> option can be used to force
device update, e.g., to eject a CD-ROM even if it is
locked/mounted in the domain. See the documentation at
&lt;http://libvirt.org/formatdomain.html#elementsDevices&gt;
to learn about libvirt <small>XML</small> format for a
device.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
domain. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent domain. If
<i>&minus;&minus;current</i> is specified, affect the
current domain state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. Not specifying
any flag is the same as specifying
<i>&minus;&minus;current</i>.</p>

<p style="margin-left:17%; margin-top: 1em">For
compatibility purposes, <i>&minus;&minus;persistent</i>
behaves like <i>&minus;&minus;config</i> for an offline
domain, and like <i>&minus;&minus;live
&minus;&minus;config</i> for a running domain.</p>

<p style="margin-left:17%; margin-top: 1em">Note that older
versions of virsh used <i>&minus;&minus;config</i> as an
alias for <i>&minus;&minus;persistent</i>.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
using of partial device definition <small>XML</small> files
may lead to unexpected results as some fields may be
autogenerated and thus match devices other than
expected.</p>

<p style="margin-left:11%;"><b>change-media</b> <i>domain
path</i> [<i>&minus;&minus;eject</i>]
[<i>&minus;&minus;insert</i>] [<i>&minus;&minus;update</i>]
[<i>source</i>] <br>
[<i>&minus;&minus;force</i>] [[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Change media of
<small>CDROM</small> or floppy drive. <i>path</i> can be the
fully-qualified path or the unique target name (&lt;target
dev=&rsquo;hdc&rsquo;&gt;) of the disk device. <i>source</i>
specifies the path of the media to be inserted or
updated.</p>


<p style="margin-left:17%; margin-top: 1em"><i>&minus;&minus;eject</i>
indicates the media will be ejected.
<i>&minus;&minus;insert</i> indicates the media will be
inserted. <i>source</i> must be specified. If the device has
source (e.g. &lt;source file=&rsquo;media&rsquo;&gt;), and
<i>source</i> is not specified, <i>&minus;&minus;update</i>
is equal to <i>&minus;&minus;eject</i>. If the device has no
source, and <i>source</i> is specified,
<i>&minus;&minus;update</i> is equal to
<i>&minus;&minus;insert</i>. If the device has source, and
<i>source</i> is specified, <i>&minus;&minus;update</i>
behaves like combination of <i>&minus;&minus;eject</i> and
<i>&minus;&minus;insert</i>. If none of
<i>&minus;&minus;eject</i>, <i>&minus;&minus;insert</i>, and
<i>&minus;&minus;update</i> is specified,
<i>&minus;&minus;update</i> is used by default. The
<i>&minus;&minus;force</i> option can be used to force media
changing. If <i>&minus;&minus;live</i> is specified, alter
live configuration of running guest. If
<i>&minus;&minus;config</i> is specified, alter persistent
configuration, effect observed on next boot.
<i>&minus;&minus;current</i> can be either or both of
<i>live</i> and <i>config</i>, depends on the
hypervisor&rsquo;s implementation. Both
<i>&minus;&minus;live</i> and <i>&minus;&minus;config</i>
flags may be given, but <i>&minus;&minus;current</i> is
exclusive. If no flag is specified, behavior is different
depending on hypervisor.</p>

<h2>NODEDEV COMMANDS
<a name="NODEDEV COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate host devices that are intended to be
passed through to guest domains via &lt;hostdev&gt; elements
in a domain&rsquo;s &lt;devices&gt; section. A node device
key is generally specified by the bus name followed by its
address, using underscores between all components, such as
pci_0000_00_02_1, usb_1_5_3, or net_eth1_00_27_13_6a_fe_00.
The <b>nodedev-list</b> gives the full list of host devices
that are known to libvirt, although this includes devices
that cannot be assigned to a guest (for example, attempting
to detach the <small>PCI</small> device that controls the
host&rsquo;s hard disk controller where the guest&rsquo;s
disk images live could cause the host system to lock up or
reboot).</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on node device definition see:
&lt;http://libvirt.org/formatnode.html&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">Passthrough
devices cannot be simultaneously used by the host and its
guest domains, nor by multiple active guests at once. If the
&lt;hostdev&gt; description includes the attribute
<b>managed=&rsquo;yes&rsquo;</b>, and the hypervisor driver
supports it, then the device is in managed mode, and
attempts to use that passthrough device in an active guest
will automatically behave as if <b>nodedev-detach</b> (guest
start, device hot-plug) and <b>nodedev-reattach</b> (guest
stop, device hot-unplug) were called at the right points
(currently, qemu does this for <small>PCI</small> devices,
but not <small>USB</small> ). If a device is not marked as
managed, then it must manually be detached before guests can
use it, and manually reattached to be returned to the host.
Also, if a device is manually detached, then the host does
not regain control of the device without a matching
reattach, even if the guests use the device in managed mode.
<b><br>
nodedev-create</b> <i><small>FILE</small></i></p>

<p style="margin-left:17%;">Create a device on the host
node that can then be assigned to virtual machines.
Normally, libvirt is able to automatically determine which
host nodes are available for use, but this allows
registration of host hardware that libvirt did not
automatically detect. <i>file</i> contains xml for a
top-level &lt;device&gt; description of a node device.</p>

<p style="margin-left:11%;"><b>nodedev-destroy</b>
<i>device</i></p>

<p style="margin-left:17%;">Destroy (stop) a device on the
host. <i>device</i> can be either device name or wwn pair in
&quot;wwnn,wwpn&quot; format (only works for vHBA
currently). Note that this makes libvirt quit managing a
host device, and may even make that device unusable by the
rest of the physical host until a reboot.</p>

<p style="margin-left:11%;"><b>nodedev-detach</b>
<i>nodedev</i> [<i>&minus;&minus;driver
backend_driver</i>]</p>

<p style="margin-left:17%;">Detach <i>nodedev</i> from the
host, so that it can safely be used by guests via
&lt;hostdev&gt; passthrough. This is reversed with
<b>nodedev-reattach</b>, and is done automatically for
managed devices. For compatibility purposes, this command
can also be spelled <b>nodedev-dettach</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Different
backend drivers expect the device to be bound to different
dummy devices. For example, <small>QEMU</small> &rsquo;s
&quot;kvm&quot; backend driver (the default) expects the
device to be bound to pci-stub, but its &quot;vfio&quot;
backend driver expects the device to be bound to vfio-pci.
The <i>&minus;&minus;driver</i> parameter can be used to
specify the desired backend driver.</p>

<p style="margin-left:11%;"><b>nodedev-dumpxml</b>
<i>device</i></p>

<p style="margin-left:17%;">Dump a &lt;device&gt;
<small>XML</small> representation for the given node device,
including such information as the device name, which bus
owns the device, the vendor and product id, and any
capabilities of the device usable by libvirt (such as
whether device reset is supported). <i>device</i> can be
either device name or wwn pair in &quot;wwnn,wwpn&quot;
format (only works for <small>HBA</small> ).</p>

<p style="margin-left:11%;"><b>nodedev-list</b> <i>cap
&minus;&minus;tree</i></p>

<p style="margin-left:17%;">List all of the devices
available on the node that are known by libvirt. <i>cap</i>
is used to filter the list by capability types, the types
must be separated by comma, e.g. &minus;&minus;cap pci,scsi,
valid capability types include &rsquo;system&rsquo;,
&rsquo;pci&rsquo;, &rsquo;usb_device&rsquo;,
&rsquo;usb&rsquo;, &rsquo;net&rsquo;,
&rsquo;scsi_host&rsquo;, &rsquo;scsi_target&rsquo;,
&rsquo;scsi&rsquo;, &rsquo;storage&rsquo;,
&rsquo;fc_host&rsquo;, &rsquo;vports&rsquo;,
&rsquo;scsi_generic&rsquo;. If <i>&minus;&minus;tree</i> is
used, the output is formatted in a tree representing parents
of each node. <i>cap</i> and <i>&minus;&minus;tree</i> are
mutually exclusive.</p>

<p style="margin-left:11%;"><b>nodedev-reattach</b>
<i>nodedev</i></p>

<p style="margin-left:17%;">Declare that <i>nodedev</i> is
no longer in use by any guests, and that the host can resume
normal use of the device. This is done automatically for
devices in managed mode, but must be done explicitly to
match any explicit <b>nodedev-detach</b>.</p>

<p style="margin-left:11%;"><b>nodedev-reset</b>
<i>nodedev</i></p>

<p style="margin-left:17%;">Trigger a device reset for
<i>nodedev</i>, useful prior to transferring a node device
between guest passthrough or the host. Libvirt will often do
this action implicitly when required, but this command
allows an explicit reset when needed.</p>

<h2>VIRTUAL NETWORK COMMANDS
<a name="VIRTUAL NETWORK COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate networks. Libvirt has the capability to
define virtual networks which can then be used by domains
and linked to actual network devices. For more detailed
information about this feature see the documentation at
&lt;http://libvirt.org/formatnetwork.html&gt; . Many of the
commands for virtual networks are similar to the ones used
for domains, but the way to name a virtual network is either
by its name or <small>UUID.</small> <b><br>
net-autostart</b> <i>network</i>
[<i>&minus;&minus;disable</i>]</p>

<p style="margin-left:17%;">Configure a virtual network to
be automatically started at boot. The
<i>&minus;&minus;disable</i> option disable
autostarting.</p>

<p style="margin-left:11%;"><b>net-create</b>
<i>file</i></p>

<p style="margin-left:17%;">Create a transient (temporary)
virtual network from an <small>XML</small> <i>file</i> and
instantiate (start) the network. See the documentation at
&lt;http://libvirt.org/formatnetwork.html&gt; to get a
description of the <small>XML</small> network format used by
libvirt.</p>

<p style="margin-left:11%;"><b>net-define</b>
<i>file</i></p>

<p style="margin-left:17%;">Define a persistent virtual
network from an <small>XML</small> <i>file</i>, the network
is just defined but not instantiated (started).</p>

<p style="margin-left:11%;"><b>net-destroy</b>
<i>network</i></p>

<p style="margin-left:17%;">Destroy (stop) a given
transient or persistent virtual network specified by its
name or <small>UUID.</small> This takes effect
immediately.</p>

<p style="margin-left:11%;"><b>net-dumpxml</b>
<i>network</i> [<i>&minus;&minus;inactive</i>]</p>

<p style="margin-left:17%;">Output the virtual network
information as an <small>XML</small> dump to stdout. If
<i>&minus;&minus;inactive</i> is specified, then physical
functions are not expanded into their associated virtual
functions.</p>

<p style="margin-left:11%;"><b>net-edit</b>
<i>network</i></p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration file for a network.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh net&minus;dumpxml &minus;&minus;inactive network &gt; network.xml
 vi network.xml (or make changes with your other text editor)
 virsh net&minus;define network.xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><b>net-event</b>
{[<i>network</i>] <i>event</i> [<i>&minus;&minus;loop</i>]
[<i>&minus;&minus;timeout seconds</i>] |
<i>&minus;&minus;list</i>}</p>

<p style="margin-left:17%;">Wait for a class of network
events to occur, and print appropriate details of events as
they happen. The events can optionally be filtered by
<i>network</i>. Using <i>&minus;&minus;list</i> as the only
argument will provide a list of possible <i>event</i> values
known by this client, although the connection might not
allow registering for all these events.</p>

<p style="margin-left:17%; margin-top: 1em">By default,
this command is one-shot, and returns success once an event
occurs; you can send <small>SIGINT</small> (usually via
<tt>&quot;Ctrl&minus;C&quot;</tt>) to quit immediately. If
<i>&minus;&minus;timeout</i> is specified, the command gives
up waiting for events after <i>seconds</i> have elapsed.
With <i>&minus;&minus;loop</i>, the command prints all
events until a timeout or interrupt key.</p>

<p style="margin-left:11%;"><b>net-info</b>
<i>network</i></p>

<p style="margin-left:17%;">Returns basic information about
the <i>network</i> object.</p>

<p style="margin-left:11%;"><b>net-list</b>
[<i>&minus;&minus;inactive</i> | <i>&minus;&minus;all</i>]
[<i>&minus;&minus;persistent</i>]
[&lt;&minus;&minus;transient&gt;] <br>
[<i>&minus;&minus;autostart</i>]
[&lt;&minus;&minus;no&minus;autostart&gt;]</p>

<p style="margin-left:17%;">Returns the list of active
networks, if <i>&minus;&minus;all</i> is specified this will
also include defined but inactive networks, if
<i>&minus;&minus;inactive</i> is specified only the inactive
ones will be listed. You may also want to filter the
returned networks by <i>&minus;&minus;persistent</i> to list
the persistent ones, <i>&minus;&minus;transient</i> to list
the transient ones, <i>&minus;&minus;autostart</i> to list
the ones with autostart enabled, and
<i>&minus;&minus;no&minus;autostart</i> to list the ones
with autostart disabled.</p>


<p style="margin-left:17%; margin-top: 1em"><small>NOTE:</small>
When talking to older servers, this command is forced to use
a series of <small>API</small> calls with an inherent race,
where a pool might not be listed or might appear more than
once if it changed state between calls while the list was
being collected. Newer servers do not have this problem.</p>

<p style="margin-left:11%;"><b>net-name</b>
<i>network-UUID</i></p>

<p style="margin-left:17%;">Convert a network
<small>UUID</small> to network name.</p>

<p style="margin-left:11%;"><b>net-start</b>
<i>network</i></p>

<p style="margin-left:17%;">Start a (previously defined)
inactive network.</p>

<p style="margin-left:11%;"><b>net-undefine</b>
<i>network</i></p>

<p style="margin-left:17%;">Undefine the configuration for
a persistent network. If the network is active, make it
transient.</p>

<p style="margin-left:11%;"><b>net-uuid</b>
<i>network-name</i></p>

<p style="margin-left:17%;">Convert a network name to
network <small>UUID.</small></p>

<p style="margin-left:11%;"><b>net-update</b> <i>network
command section xml</i> [<i>&minus;&minus;parent&minus;index
index</i>] [[<i>&minus;&minus;live</i>] <br>
[<i>&minus;&minus;config</i>] |
[<i>&minus;&minus;current</i>]]</p>

<p style="margin-left:17%;">Update the given section of an
existing network definition, with the changes optionally
taking effect immediately, without needing to destroy and
re-start the network.</p>

<p style="margin-left:17%; margin-top: 1em"><i>command</i>
is one of &quot;add-first&quot;, &quot;add-last&quot;,
&quot;add&quot; (a synonym for add-last),
&quot;delete&quot;, or &quot;modify&quot;.</p>

<p style="margin-left:17%; margin-top: 1em"><i>section</i>
is one of &quot;bridge&quot;, &quot;domain&quot;,
&quot;ip&quot;, &quot;ip-dhcp-host&quot;,
&quot;ip-dhcp-range&quot;, &quot;forward&quot;,
&quot;forward-interface&quot;, &quot;forward-pf&quot;,
&quot;portgroup&quot;, &quot;dns-host&quot;,
&quot;dns-txt&quot;, or &quot;dns-srv&quot;, each section
being named by a concatenation of the xml element hierarchy
leading to the element being changed. For example,
&quot;ip-dhcp-host&quot; will change a &lt;host&gt; element
that is contained inside a &lt;dhcp&gt; element inside an
&lt;ip&gt; element of the network.</p>

<p style="margin-left:17%; margin-top: 1em"><i>xml</i> is
either the text of a complete xml element of the type being
changed (e.g. &quot;&lt;host
mac=&quot;00:11:22:33:44:55&rsquo;
ip=&rsquo;1.2.3.4&rsquo;/&gt;&quot;, or the name of a file
that contains a complete xml element. Disambiguation is done
by looking at the first character of the provided text
&minus; if the first character is &quot;&lt;&quot;, it is
xml text, if the first character is not &quot;&lt;&quot;, it
is the name of a file that contains the xml text to be
used.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;parent&minus;index</i> option is used to
specify which of several parent elements the requested
element is in (0&minus;based). For example, a dhcp
&lt;host&gt; element could be in any one of multiple
&lt;ip&gt; elements in the network; if a parent-index
isn&rsquo;t provided, the &quot;most appropriate&quot;
&lt;ip&gt; element will be selected (usually the only one
that already has a &lt;dhcp&gt; element), but if
<i>&minus;&minus;parent&minus;index</i> is given, that
particular instance of &lt;ip&gt; will get the
modification.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, affect a running
network. If <i>&minus;&minus;config</i> is specified, affect
the next startup of a persistent network. If
<i>&minus;&minus;current</i> is specified, affect the
current network state. Both <i>&minus;&minus;live</i> and
<i>&minus;&minus;config</i> flags may be given, but
<i>&minus;&minus;current</i> is exclusive. Not specifying
any flag is the same as specifying
<i>&minus;&minus;current</i>.</p>

<p style="margin-left:11%;"><b>net-dhcp-leases</b>
<i>network</i> [<i>mac</i>]</p>

<p style="margin-left:17%;">Get a list of dhcp leases for
all network interfaces connected to the given virtual
<i>network</i> or limited output just for one interface if
<i>mac</i> is specified.</p>

<h2>INTERFACE COMMANDS
<a name="INTERFACE COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate host interfaces. Often, these host
interfaces can then be used by name within domain
&lt;interface&gt; elements (such as a system-created bridge
interface), but there is no requirement that host interfaces
be tied to any particular guest configuration
<small>XML</small> at all.</p>

<p style="margin-left:11%; margin-top: 1em">Many of the
commands for host interfaces are similar to the ones used
for domains, and the way to name an interface is either by
its name or its <small>MAC</small> address. However, using a
<small>MAC</small> address for an <i>iface</i> argument only
works when that address is unique (if an interface and a
bridge share the same <small>MAC</small> address, which is
often the case, then using that <small>MAC</small> address
results in an error due to ambiguity, and you must resort to
a name instead). <b><br>
iface-bridge</b> <i>interface bridge</i>
[<i>&minus;&minus;no&minus;stp</i>] [<i>delay</i>]
[<i>&minus;&minus;no&minus;start</i>]</p>

<p style="margin-left:17%;">Create a bridge device named
<i>bridge</i>, and attach the existing network device
<i>interface</i> to the new bridge. The new bridge defaults
to starting immediately, with <small>STP</small> enabled and
a delay of 0; these settings can be altered with
<i>&minus;&minus;no&minus;stp</i>,
<i>&minus;&minus;no&minus;start</i>, and an integer number
of seconds for <i>delay</i>. All <small>IP</small> address
configuration of <i>interface</i> will be moved to the new
bridge device.</p>

<p style="margin-left:17%; margin-top: 1em">See also
<b>iface-unbridge</b> for undoing this operation.</p>

<p style="margin-left:11%;"><b>iface-define</b>
<i>file</i></p>

<p style="margin-left:17%;">Define a host interface from an
<small>XML</small> <i>file</i>, the interface is just
defined but not started.</p>

<p style="margin-left:11%;"><b>iface-destroy</b>
<i>interface</i></p>

<p style="margin-left:17%;">Destroy (stop) a given host
interface, such as by running &quot;if-down&quot; to disable
that interface from active use. This takes effect
immediately.</p>

<p style="margin-left:11%;"><b>iface-dumpxml</b>
<i>interface</i> [<i>&minus;&minus;inactive</i>]</p>

<p style="margin-left:17%;">Output the host interface
information as an <small>XML</small> dump to stdout. If
<i>&minus;&minus;inactive</i> is specified, then the output
reflects the persistent state of the interface that will be
used the next time it is started.</p>

<p style="margin-left:11%;"><b>iface-edit</b>
<i>interface</i></p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration file for a host interface.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh iface&minus;dumpxml iface &gt; iface.xml
 vi iface.xml (or make changes with your other text editor)
 virsh iface&minus;define iface.xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><b>iface-list</b>
[<i>&minus;&minus;inactive</i> |
<i>&minus;&minus;all</i>]</p>

<p style="margin-left:17%;">Returns the list of active host
interfaces. If <i>&minus;&minus;all</i> is specified this
will also include defined but inactive interfaces. If
<i>&minus;&minus;inactive</i> is specified only the inactive
ones will be listed.</p>

<p style="margin-left:11%;"><b>iface-name</b>
<i>interface</i></p>

<p style="margin-left:17%;">Convert a host interface
<small>MAC</small> to interface name, if the
<small>MAC</small> address is unique among the host&rsquo;s
interfaces.</p>


<p style="margin-left:17%; margin-top: 1em"><i>interface</i>
specifies the interface <small>MAC</small> address.</p>

<p style="margin-left:11%;"><b>iface-mac</b>
<i>interface</i></p>

<p style="margin-left:17%;">Convert a host interface name
to <small>MAC</small> address.</p>


<p style="margin-left:17%; margin-top: 1em"><i>interface</i>
specifies the interface name.</p>

<p style="margin-left:11%;"><b>iface-start</b>
<i>interface</i></p>

<p style="margin-left:17%;">Start a (previously defined)
host interface, such as by running &quot;if-up&quot;.</p>

<p style="margin-left:11%;"><b>iface-unbridge</b>
<i>bridge</i> [<i>&minus;&minus;no&minus;start</i>]</p>

<p style="margin-left:17%;">Tear down a bridge device named
<i>bridge</i>, releasing its underlying interface back to
normal usage, and moving all <small>IP</small> address
configuration from the bridge device to the underlying
device. The underlying interface is restarted unless
<i>&minus;&minus;no&minus;start</i> is present; this flag is
present for symmetry, but generally not recommended.</p>

<p style="margin-left:17%; margin-top: 1em">See also
<b>iface-bridge</b> for creating a bridge.</p>

<p style="margin-left:11%;"><b>iface-undefine</b>
<i>interface</i></p>

<p style="margin-left:17%;">Undefine the configuration for
an inactive host interface.</p>

<p style="margin-left:11%;"><b>iface-begin</b></p>

<p style="margin-left:17%;">Create a snapshot of current
host interface settings, which can later be committed
(<i>iface-commit</i>) or restored (<i>iface-rollback</i>).
If a snapshot already exists, then this command will fail
until the previous snapshot has been committed or restored.
Undefined behavior results if any external changes are made
to host interfaces outside of the libvirt <small>API</small>
between the beginning of a snapshot and its eventual commit
or rollback.</p>

<p style="margin-left:11%;"><b>iface-commit</b></p>

<p style="margin-left:17%;">Declare all changes since the
last <i>iface-begin</i> as working, and delete the rollback
point. If no interface snapshot has already been started,
then this command will fail.</p>

<p style="margin-left:11%;"><b>iface-rollback</b></p>

<p style="margin-left:17%;">Revert all host interface
settings back to the state recorded in the last
<i>iface-begin</i>. If no interface snapshot has already
been started, then this command will fail. Rebooting the
host also serves as an implicit rollback point.</p>

<h2>STORAGE POOL COMMANDS
<a name="STORAGE POOL COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate storage pools. Libvirt has the
capability to manage various storage solutions, including
files, raw partitions, and domain-specific formats, used to
provide the storage volumes visible as devices within
virtual machines. For more detailed information about this
feature, see the documentation at
&lt;http://libvirt.org/formatstorage.html&gt; . Many of the
commands for pools are similar to the ones used for domains.
<b><br>
find-storage-pool-sources</b> <i>type</i>
[<i>srcSpec</i>]</p>

<p style="margin-left:17%;">Returns <small>XML</small>
describing all storage pools of a given <i>type</i> that
could be found. If <i>srcSpec</i> is provided, it is a file
that contains <small>XML</small> to further restrict the
query for pools.</p>


<p style="margin-left:11%;"><b>find-storage-pool-sources-as</b>
<i>type</i> [<i>host</i>] [<i>port</i>]
[<i>initiator</i>]</p>

<p style="margin-left:17%;">Returns <small>XML</small>
describing all storage pools of a given <i>type</i> that
could be found. If <i>host</i>, <i>port</i>, or
<i>initiator</i> are provided, they control where the query
is performed.</p>

<p style="margin-left:11%;"><b>pool-autostart</b>
<i>pool-or-uuid</i> [<i>&minus;&minus;disable</i>]</p>

<p style="margin-left:17%;">Configure whether <i>pool</i>
should automatically start at boot.</p>

<p style="margin-left:11%;"><b>pool-build</b>
<i>pool-or-uuid</i> [<i>&minus;&minus;overwrite</i>]
[<i>&minus;&minus;no&minus;overwrite</i>]</p>

<p style="margin-left:17%;">Build a given pool.</p>

<p style="margin-left:17%; margin-top: 1em">Options
<i>&minus;&minus;overwrite</i> and
<i>&minus;&minus;no&minus;overwrite</i> can only be used for
<b>pool-build</b> a filesystem pool. If neither of them is
specified, <b>pool-build</b> on a filesystem pool only makes
the directory; If <i>&minus;&minus;no&minus;overwrite</i> is
specified, it probes to determine if a filesystem already
exists on the target device, returning an error if exists,
or using mkfs to format the target device if not; If
<i>&minus;&minus;overwrite</i> is specified, mkfs is always
executed, any existed data on the target device is
overwritten unconditionally.</p>

<p style="margin-left:11%;"><b>pool-create</b>
<i>file</i></p>

<p style="margin-left:17%;">Create and start a pool object
from the <small>XML</small> <i>file</i>.</p>

<p style="margin-left:11%;"><b>pool-create-as</b> <i>name
&minus;&minus;print&minus;xml type</i> [<i>source-host</i>]
[<i>source-path</i>] <br>
[<i>source-dev</i>] [<i>source-name</i>] [&lt;target&gt;]
[<i>&minus;&minus;source&minus;format format</i>]</p>

<p style="margin-left:17%;">Create and start a pool object
<i>name</i> from the raw parameters. If
<i>&minus;&minus;print&minus;xml</i> is specified, then
print the <small>XML</small> of the pool object without
creating the pool. Otherwise, the pool has the specified
<i>type</i>.</p>

<p style="margin-left:11%;"><b>pool-define</b>
<i>file</i></p>

<p style="margin-left:17%;">Create, but do not start, a
pool object from the <small>XML</small> <i>file</i>.</p>

<p style="margin-left:11%;"><b>pool-define-as</b> <i>name
&minus;&minus;print&minus;xml type</i> [<i>source-host</i>]
[<i>source-path</i>] <br>
[<i>source-dev</i>] [<i>source-name</i>] [&lt;target&gt;]
[<i>&minus;&minus;source&minus;format format</i>]</p>

<p style="margin-left:17%;">Create, but do not start, a
pool object <i>name</i> from the raw parameters. If
<i>&minus;&minus;print&minus;xml</i> is specified, then
print the <small>XML</small> of the pool object without
defining the pool. Otherwise, the pool has the specified
<i>type</i>.</p>

<p style="margin-left:11%;"><b>pool-destroy</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Destroy (stop) a given
<i>pool</i> object. Libvirt will no longer manage the
storage described by the pool object, but the raw data
contained in the pool is not changed, and can be later
recovered with <b>pool-create</b>.</p>

<p style="margin-left:11%;"><b>pool-delete</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Destroy the resources used by a
given <i>pool</i> object. This operation is non-recoverable.
The <i>pool</i> object will still exist after this command,
ready for the creation of new storage volumes.</p>

<p style="margin-left:11%;"><b>pool-dumpxml</b>
[<i>&minus;&minus;inactive</i>] <i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Returns the <small>XML</small>
information about the <i>pool</i> object.
<i>&minus;&minus;inactive</i> tells virsh to dump pool
configuration that will be used on next start of the pool as
opposed to the current pool configuration.</p>

<p style="margin-left:11%;"><b>pool-edit</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration file for a storage pool.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh pool&minus;dumpxml pool &gt; pool.xml
 vi pool.xml (or make changes with your other text editor)
 virsh pool&minus;define pool.xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><b>pool-info</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Returns basic information about
the <i>pool</i> object.</p>

<p style="margin-left:11%;"><b>pool-list</b>
[<i>&minus;&minus;inactive</i>] [<i>&minus;&minus;all</i>]
[<i>&minus;&minus;persistent</i>]
[<i>&minus;&minus;transient</i>] <br>
[<i>&minus;&minus;autostart</i>]
[<i>&minus;&minus;no&minus;autostart</i>]
[[<i>&minus;&minus;details</i>] [&lt;type&gt;]</p>

<p style="margin-left:17%;">List pool objects known to
libvirt. By default, only active pools are listed;
<i>&minus;&minus;inactive</i> lists just the inactive pools,
and <i>&minus;&minus;all</i> lists all pools.</p>

<p style="margin-left:17%; margin-top: 1em">In addition,
there are several sets of filtering flags.
<i>&minus;&minus;persistent</i> is to list the persistent
pools, <i>&minus;&minus;transient</i> is to list the
transient pools. <i>&minus;&minus;autostart</i> lists the
autostarting pools, <i>&minus;&minus;no&minus;autostart</i>
lists the pools with autostarting disabled.</p>

<p style="margin-left:17%; margin-top: 1em">You may also
want to list pools with specified types using <i>type</i>,
the pool types must be separated by comma, e.g.
&minus;&minus;type dir,disk. The valid pool types include
&rsquo;dir&rsquo;, &rsquo;fs&rsquo;, &rsquo;netfs&rsquo;,
&rsquo;logical&rsquo;, &rsquo;disk&rsquo;,
&rsquo;iscsi&rsquo;, &rsquo;scsi&rsquo;,
&rsquo;mpath&rsquo;, &rsquo;rbd&rsquo;,
&rsquo;sheepdog&rsquo; and &rsquo;gluster&rsquo;.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;details</i> option instructs virsh to
additionally display pool persistence and capacity related
information where available.</p>


<p style="margin-left:17%; margin-top: 1em"><small>NOTE:</small>
When talking to older servers, this command is forced to use
a series of <small>API</small> calls with an inherent race,
where a pool might not be listed or might appear more than
once if it changed state between calls while the list was
being collected. Newer servers do not have this problem.</p>

<p style="margin-left:11%;"><b>pool-name</b>
<i>uuid</i></p>

<p style="margin-left:17%;">Convert the <i>uuid</i> to a
pool name.</p>

<p style="margin-left:11%;"><b>pool-refresh</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Refresh the list of volumes
contained in <i>pool</i>.</p>

<p style="margin-left:11%;"><b>pool-start</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Start the storage <i>pool</i>,
which is previously defined but inactive.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>: A
storage pool that relies on remote resources such as an
&quot;iscsi&quot; or a (v)HBA backed &quot;scsi&quot; pool
may need to be refreshed multiple times in order to have all
the volumes detected (see <b>pool-refresh</b>). This is
because the corresponding volume devices may not be present
in the host&rsquo;s filesystem during the initial pool
startup or the current refresh attempt. The number of
refresh retries is dependant upon the network connection and
the time the host takes to export the corresponding
devices.</p>

<p style="margin-left:11%;"><b>pool-undefine</b>
<i>pool-or-uuid</i></p>

<p style="margin-left:17%;">Undefine the configuration for
an inactive <i>pool</i>.</p>

<p style="margin-left:11%;"><b>pool-uuid</b>
<i>pool</i></p>

<p style="margin-left:17%;">Returns the <small>UUID</small>
of the named <i>pool</i>.</p>

<h2>VOLUME COMMANDS
<a name="VOLUME COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>vol-create</b>
<i>pool-or-uuid <small>FILE</small></i>
[<i>&minus;&minus;prealloc&minus;metadata</i>]</p>

<p style="margin-left:17%;">Create a volume from an
<small>XML</small> &lt;file&gt;. <i>pool-or-uuid</i> is the
name or <small>UUID</small> of the storage pool to create
the volume in. <i><small>FILE</small></i> is the
<small>XML</small> &lt;file&gt; with the volume definition.
An easy way to create the <small>XML</small> &lt;file&gt; is
to use the <b>vol-dumpxml</b> command to obtain the
definition of a pre-existing volume.
[<i>&minus;&minus;prealloc&minus;metadata</i>] preallocate
metadata (for qcow2 images which don&rsquo;t support full
allocation). This option creates a sparse image file with
metadata, resulting in higher performance compared to images
with no preallocation and only slightly higher initial disk
space usage.</p>


<p style="margin-left:17%; margin-top: 1em"><b>Example</b></p>


<pre style="margin-left:17%; margin-top: 1em"> virsh vol&minus;dumpxml &minus;&minus;pool storagepool1 appvolume1 &gt; newvolume.xml
 vi newvolume.xml (or make changes with your other text editor)
 virsh vol&minus;create differentstoragepool newvolume.xml</pre>


<p style="margin-left:11%;"><b>vol-create-from</b>
<i>pool-or-uuid <small>FILE</small></i>
[<i>&minus;&minus;inputpool pool-or-uuid</i>] <i><br>
vol-name-or-key-or-path</i>
[<i>&minus;&minus;prealloc&minus;metadata</i>]</p>

<p style="margin-left:17%;">Create a volume, using another
volume as input. <i>pool-or-uuid</i> is the name or
<small>UUID</small> of the storage pool to create the volume
in. <i><small>FILE</small></i> is the <small>XML</small>
&lt;file&gt; with the volume definition.
<i>&minus;&minus;inputpool pool-or-uuid</i> is the name or
uuid of the storage pool the source volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the source volume.
[<i>&minus;&minus;prealloc&minus;metadata</i>] preallocate
metadata (for qcow2 images which don&rsquo;t support full
allocation). This option creates a sparse image file with
metadata, resulting in higher performance compared to images
with no preallocation and only slightly higher initial disk
space usage.</p>

<p style="margin-left:11%;"><b>vol-create-as</b>
<i>pool-or-uuid name capacity</i>
[<i>&minus;&minus;allocation size</i>]
[<i>&minus;&minus;format <br>
string</i>] [<i>&minus;&minus;backing&minus;vol
vol-name-or-key-or-path</i>]
[<i>&minus;&minus;backing&minus;vol&minus;format <br>
string</i>]
[<i>&minus;&minus;prealloc&minus;metadata</i>]</p>

<p style="margin-left:17%;">Create a volume from a set of
arguments. <i>pool-or-uuid</i> is the name or
<small>UUID</small> of the storage pool to create the volume
in. <i>name</i> is the name of the new volume.
<i>capacity</i> is the size of the volume to be created, as
a scaled integer (see <b><small>NOTES</small></b> above),
defaulting to bytes if there is no suffix.
<i>&minus;&minus;allocation size</i> is the initial size to
be allocated in the volume, also as a scaled integer
defaulting to bytes. <i>&minus;&minus;format string</i> is
used in file based storage pools to specify the volume file
format to use; raw, bochs, qcow, qcow2, vmdk, qed.
<i>&minus;&minus;backing&minus;vol
vol-name-or-key-or-path</i> is the source backing volume to
be used if taking a snapshot of an existing volume.
<i>&minus;&minus;backing&minus;vol&minus;format string</i>
is the format of the snapshot backing volume; raw, bochs,
qcow, qcow2, qed, vmdk, host_device. These are, however,
meant for file based storage pools.
[<i>&minus;&minus;prealloc&minus;metadata</i>] preallocate
metadata (for qcow2 images which don&rsquo;t support full
allocation). This option creates a sparse image file with
metadata, resulting in higher performance compared to images
with no preallocation and only slightly higher initial disk
space usage.</p>

<p style="margin-left:11%;"><b>vol-clone</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-key-or-path name</i> <br>
[<i>&minus;&minus;prealloc&minus;metadata</i>]</p>

<p style="margin-left:17%;">Clone an existing volume. Less
powerful, but easier to type, version of
<b>vol-create-from</b>. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool to create the volume in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the source volume. <i>name</i> is the name of the new
volume. [<i>&minus;&minus;prealloc&minus;metadata</i>]
preallocate metadata (for qcow2 images which don&rsquo;t
support full allocation). This option creates a sparse image
file with metadata, resulting in higher performance compared
to images with no preallocation and only slightly higher
initial disk space usage.</p>

<p style="margin-left:11%;"><b>vol-delete</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-key-or-path</i></p>

<p style="margin-left:17%;">Delete a given volume.
<i>&minus;&minus;pool pool-or-uuid</i> is the name or
<small>UUID</small> of the storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to delete.</p>

<p style="margin-left:11%;"><b>vol-upload</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
[<i>&minus;&minus;offset bytes</i>] [<i>&minus;&minus;length
bytes</i>] <i><br>
vol-name-or-key-or-path local-file</i></p>

<p style="margin-left:17%;">Upload the contents of
<i>local-file</i> to a storage volume. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume where the file will be uploaded.
<i>&minus;&minus;offset</i> is the position in the storage
volume at which to start writing the data. The value must be
0 or larger. <i>&minus;&minus;length</i> is an upper bound
of the amount of data to be uploaded. A negative value is
interpreted as an unsigned long long value to essentially
include everything from the offset to the end of the volume.
An error will occur if the <i>local-file</i> is greater than
the specified length. See the description for the libvirt
virStorageVolUpload <small>API</small> for details regarding
possible target volume and pool changes as a result of the
pool refresh when the upload is attempted.</p>

<p style="margin-left:11%;"><b>vol-download</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
[<i>&minus;&minus;offset bytes</i>] [<i>&minus;&minus;length
bytes</i>] <i><br>
vol-name-or-key-or-path local-file</i></p>

<p style="margin-left:17%;">Download the contents of a
storage volume to <i>local-file</i>. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to download. <i>&minus;&minus;offset</i> is the
position in the storage volume at which to start reading the
data. The value must be 0 or larger.
<i>&minus;&minus;length</i> is an upper bound of the amount
of data to be downloaded. A negative value is interpreted as
an unsigned long long value to essentially include
everything from the offset to the end of the volume.</p>

<p style="margin-left:11%;"><b>vol-wipe</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
[<i>&minus;&minus;algorithm algorithm</i>] <i><br>
vol-name-or-key-or-path</i></p>

<p style="margin-left:17%;">Wipe a volume, ensure data
previously on the volume is not accessible to future reads.
<i>&minus;&minus;pool pool-or-uuid</i> is the name or
<small>UUID</small> of the storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to wipe. It is possible to choose different
wiping algorithms instead of re-writing volume with zeroes.
This can be done via <i>&minus;&minus;algorithm</i>
switch.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Supported
algorithms</b> <br>
zero &minus; 1&minus;pass all zeroes <br>
nnsa &minus; 4&minus;pass <small>NNSA</small> Policy Letter
<small>NAP&minus;14.1&minus;C</small> (
<small>XVI&minus;8</small> ) for <br>
sanitizing removable and non-removable hard disks: <br>
random x2, 0x00, verify. <br>
dod &minus; 4&minus;pass DoD 5220.22&minus;M section
8&minus;306 procedure for <br>
sanitizing removable and non-removable rigid <br>
disks: random, 0x00, 0xff, verify. <br>
bsi &minus; 9&minus;pass method recommended by the German
Center of <br>
Security in Information Technologies <br>
(http://www.bsi.bund.de): 0xff, 0xfe, 0xfd, 0xfb, <br>
0xf7, 0xef, 0xdf, 0xbf, 0x7f. <br>
gutmann &minus; The canonical 35&minus;pass sequence
described in <br>
Gutmann&rsquo;s paper. <br>
schneier &minus; 7&minus;pass method described by Bruce
Schneier in <br>
&quot;Applied Cryptography&quot; (1996): 0x00, 0xff, <br>
random x5. <br>
pfitzner7 &minus; Roy Pfitzner&rsquo;s
7&minus;random&minus;pass method: random x7. <br>
pfitzner33 &minus; Roy Pfitzner&rsquo;s
33&minus;random&minus;pass method: random x33. <br>
random &minus; 1&minus;pass pattern: random.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
The availability of algorithms may be limited by the version
of the <tt>&quot;scrub&quot;</tt> binary installed on the
host.</p>

<p style="margin-left:11%;"><b>vol-dumpxml</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-key-or-path</i></p>

<p style="margin-left:17%;">Output the volume information
as an <small>XML</small> dump to stdout.
<i>&minus;&minus;pool pool-or-uuid</i> is the name or
<small>UUID</small> of the storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to output the <small>XML</small> of.</p>

<p style="margin-left:11%;"><b>vol-info</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-key-or-path</i></p>

<p style="margin-left:17%;">Returns basic information about
the given storage volume. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to return information for.</p>

<p style="margin-left:11%;"><b>vol-list</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
[<i>&minus;&minus;details</i>]</p>

<p style="margin-left:17%;">Return the list of volumes in
the given storage pool. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool. The <i>&minus;&minus;details</i> option
instructs virsh to additionally display volume type and
capacity related information where available.</p>

<p style="margin-left:11%;"><b>vol-pool</b>
[<i>&minus;&minus;uuid</i>] <i>vol-key-or-path</i></p>

<p style="margin-left:17%;">Return the pool name or
<small>UUID</small> for a given volume. By default, the pool
name is returned. If the <i>&minus;&minus;uuid</i> option is
given, the pool <small>UUID</small> is returned instead.
<i>vol-key-or-path</i> is the key or path of the volume to
return the pool information for.</p>

<p style="margin-left:11%;"><b>vol-path</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-key</i></p>

<p style="margin-left:17%;">Return the path for a given
volume. <i>&minus;&minus;pool pool-or-uuid</i> is the name
or <small>UUID</small> of the storage pool the volume is in.
<i>vol-name-or-key</i> is the name or key of the volume to
return the path for.</p>

<p style="margin-left:11%;"><b>vol-name</b>
<i>vol-key-or-path</i></p>

<p style="margin-left:17%;">Return the name for a given
volume. <i>vol-key-or-path</i> is the key or path of the
volume to return the name for.</p>

<p style="margin-left:11%;"><b>vol-key</b>
[<i>&minus;&minus;pool pool-or-uuid</i>]
<i>vol-name-or-path</i></p>

<p style="margin-left:17%;">Return the volume key for a
given volume. <i>&minus;&minus;pool pool-or-uuid</i> is the
name or <small>UUID</small> of the storage pool the volume
is in. <i>vol-name-or-path</i> is the name or path of the
volume to return the volume key for.</p>

<p style="margin-left:11%;"><b>vol-resize</b>
[<i>&minus;&minus;pool pool-or-uuid</i>] <i>vol-name-or-path
pool-or-uuid capacity</i> <br>
[<i>&minus;&minus;allocate</i>] [<i>&minus;&minus;delta</i>]
[<i>&minus;&minus;shrink</i>]</p>

<p style="margin-left:17%;">Resize the capacity of the
given volume, in bytes. <i>&minus;&minus;pool
pool-or-uuid</i> is the name or <small>UUID</small> of the
storage pool the volume is in.
<i>vol-name-or-key-or-path</i> is the name or key or path of
the volume to resize. The new capacity might be sparse
unless <i>&minus;&minus;allocate</i> is specified. Normally,
<i>capacity</i> is the new size, but if
<i>&minus;&minus;delta</i> is present, then it is added to
the existing size. Attempts to shrink the volume will fail
unless <i>&minus;&minus;shrink</i> is present;
<i>capacity</i> cannot be negative unless
<i>&minus;&minus;shrink</i> is provided, but a negative sign
is not necessary. <i>capacity</i> is a scaled integer (see
<b><small>NOTES</small></b> above), which defaults to bytes
if there is no suffix. This command is only safe for storage
volumes not in use by an active guest; see also
<b>blockresize</b> for live resizing.</p>

<h2>SECRET COMMANDS
<a name="SECRET COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate &quot;secrets&quot; (e.g. passwords,
passphrases and encryption keys). Libvirt can store secrets
independently from their use, and other objects (e.g.
volumes or domains) can refer to the secrets for encryption
or possibly other uses. Secrets are identified using a
<small>UUID.</small> See
&lt;http://libvirt.org/formatsecret.html&gt; for
documentation of the <small>XML</small> format used to
represent properties of secrets. <b><br>
secret-define</b> <i>file</i></p>

<p style="margin-left:17%;">Create a secret with the
properties specified in <i>file</i>, with no associated
secret value. If <i>file</i> does not specify a
<small>UUID,</small> choose one automatically. If
<i>file</i> specifies a <small>UUID</small> of an existing
secret, replace its properties by properties defined in
<i>file</i>, without affecting the secret value.</p>

<p style="margin-left:11%;"><b>secret-dumpxml</b>
<i>secret</i></p>

<p style="margin-left:17%;">Output properties of
<i>secret</i> (specified by its <small>UUID</small> ) as an
<small>XML</small> dump to stdout.</p>

<p style="margin-left:11%;"><b>secret-set-value</b>
<i>secret base64</i></p>

<p style="margin-left:17%;">Set the value associated with
<i>secret</i> (specified by its <small>UUID</small> ) to the
value Base64&minus;encoded value <i>base64</i>.</p>

<p style="margin-left:11%;"><b>secret-get-value</b>
<i>secret</i></p>

<p style="margin-left:17%;">Output the value associated
with <i>secret</i> (specified by its <small>UUID</small> )
to stdout, encoded using Base64.</p>

<p style="margin-left:11%;"><b>secret-undefine</b>
<i>secret</i></p>

<p style="margin-left:17%;">Delete a <i>secret</i>
(specified by its <small>UUID</small> ), including the
associated value, if any.</p>

<p style="margin-left:11%;"><b>secret-list</b>
[<i>&minus;&minus;ephemeral</i>]
[<i>&minus;&minus;no&minus;ephemeral</i>]
[<i>&minus;&minus;private</i>]
[<i>&minus;&minus;no&minus;private</i>]</p>

<p style="margin-left:17%;">Returns the list of secrets.
You may also want to filter the returned secrets by
<i>&minus;&minus;ephemeral</i> to list the ephemeral ones,
<i>&minus;&minus;no&minus;ephemeral</i> to list the
non-ephemeral ones, <i>&minus;&minus;private</i> to list the
private ones, and <i>&minus;&minus;no&minus;private</i> to
list the non-private ones.</p>

<h2>SNAPSHOT COMMANDS
<a name="SNAPSHOT COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate domain snapshots. Snapshots take the
disk, memory, and device state of a domain at a
point-of-time, and save it for future use. They have many
uses, from saving a &quot;clean&quot; copy of an
<small>OS</small> image to saving a domain&rsquo;s state
before a potentially destructive operation. Snapshots are
identified with a unique name. See
&lt;http://libvirt.org/formatsnapshot.html&gt; for
documentation of the <small>XML</small> format used to
represent properties of snapshots. <b><br>
snapshot-create</b> <i>domain</i> [<i>xmlfile</i>]
{[<i>&minus;&minus;redefine</i>
[<i>&minus;&minus;current</i>]] | <br>
[<i>&minus;&minus;no&minus;metadata</i>]
[<i>&minus;&minus;halt</i>]
[<i>&minus;&minus;disk&minus;only</i>]
[<i>&minus;&minus;reuse&minus;external</i>]
[<i>&minus;&minus;quiesce</i>] <br>
[<i>&minus;&minus;atomic</i>]
[<i>&minus;&minus;live</i>]}</p>

<p style="margin-left:17%;">Create a snapshot for domain
<i>domain</i> with the properties specified in
<i>xmlfile</i>. Normally, the only properties settable for a
domain snapshot are the &lt;name&gt; and &lt;description&gt;
elements, as well as &lt;disks&gt; if
<i>&minus;&minus;disk&minus;only</i> is given; the rest of
the fields are ignored, and automatically filled in by
libvirt. If <i>xmlfile</i> is completely omitted, then
libvirt will choose a value for all fields. The new snapshot
will become current, as listed by
<b>snapshot-current</b>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;halt</i> is specified, the domain will be
left in an inactive state after the snapshot is created.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;disk&minus;only</i> is specified, the
snapshot will only include disk state rather than the usual
system checkpoint with vm state. Disk snapshots are faster
than full system checkpoints, but reverting to a disk
snapshot may require fsck or journal replays, since it is
like the disk state at the point when the power cord is
abruptly pulled; and mixing <i>&minus;&minus;halt</i> and
<i>&minus;&minus;disk&minus;only</i> loses any data that was
not flushed to disk at the time.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;redefine</i> is specified, then all
<small>XML</small> elements produced by
<b>snapshot-dumpxml</b> are valid; this can be used to
migrate snapshot hierarchy from one machine to another, to
recreate hierarchy for the case of a transient domain that
goes away and is later recreated with the same name and
<small>UUID,</small> or to make slight alterations in the
snapshot metadata (such as host-specific aspects of the
domain <small>XML</small> embedded in the snapshot). When
this flag is supplied, the <i>xmlfile</i> argument is
mandatory, and the domain&rsquo;s current snapshot will not
be altered unless the <i>&minus;&minus;current</i> flag is
also given.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;no&minus;metadata</i> is specified, then
the snapshot data is created, but any metadata is
immediately discarded (that is, libvirt does not treat the
snapshot as current, and cannot revert to the snapshot
unless <i>&minus;&minus;redefine</i> is later used to teach
libvirt about the metadata again).</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;reuse&minus;external</i> is specified, and
the snapshot <small>XML</small> requests an external
snapshot with a destination of an existing file, then the
destination must exist and be pre-created with correct
format and metadata. The file is then reused; otherwise, a
snapshot is refused to avoid losing contents of the existing
files.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;quiesce</i> is specified, libvirt will try
to use guest agent to freeze and unfreeze domain&rsquo;s
mounted file systems. However, if domain has no guest agent,
snapshot creation will fail. Currently, this requires
<i>&minus;&minus;disk&minus;only</i> to be passed as
well.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;atomic</i> is specified, libvirt will
guarantee that the snapshot either succeeds, or fails with
no changes; not all hypervisors support this. If this flag
is not specified, then some hypervisors may fail after
partially performing the action, and <b>dumpxml</b> must be
used to see whether any partial changes occurred.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, libvirt takes the
snapshot while the guest is running. This increases the size
of the memory image of the external checkpoint. This is
currently supported only for external checkpoints.</p>

<p style="margin-left:17%; margin-top: 1em">Existence of
snapshot metadata will prevent attempts to <b>undefine</b> a
persistent domain. However, for transient domains, snapshot
metadata is silently lost when the domain quits running
(whether by command such as <b>destroy</b> or by internal
guest action).</p>

<p style="margin-left:11%;"><b>snapshot-create-as</b>
<i>domain</i> {[<i>&minus;&minus;print&minus;xml</i>] |
[<i>&minus;&minus;no&minus;metadata</i>]
[<i>&minus;&minus;halt</i>] <br>
[<i>&minus;&minus;reuse&minus;external</i>]} [<i>name</i>]
[<i>description</i>] [<i>&minus;&minus;disk&minus;only</i>
[<i>&minus;&minus;quiesce</i>]] <br>
[<i>&minus;&minus;atomic</i>] [[<i>&minus;&minus;live</i>]
[<i>&minus;&minus;memspec</i> <b>memspec</b>]]
[<i>&minus;&minus;diskspec</i>] <b>diskspec</b>]...</p>

<p style="margin-left:17%;">Create a snapshot for domain
<i>domain</i> with the given &lt;name&gt; and
&lt;description&gt;; if either value is omitted, libvirt
will choose a value. If <i>&minus;&minus;print&minus;xml</i>
is specified, then <small>XML</small> appropriate for
<i>snapshot-create</i> is output, rather than actually
creating a snapshot. Otherwise, if <i>&minus;&minus;halt</i>
is specified, the domain will be left in an inactive state
after the snapshot is created, and if
<i>&minus;&minus;disk&minus;only</i> is specified, the
snapshot will not include vm state.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;memspec</i> option can be used to control
whether a checkpoint is internal or external. The
<i>&minus;&minus;memspec</i> flag is mandatory, followed by
a <b>memspec</b> of the form
<b>[file=]name[,snapshot=type]</b>, where type can be
<b>no</b>, <b>internal</b>, or <b>external</b>. To include a
literal comma in <b>file=name</b>, escape it with a second
comma. <i>&minus;&minus;memspec</i> cannot be used together
with <i>&minus;&minus;disk&minus;only</i>.</p>

<p style="margin-left:17%; margin-top: 1em">The
<i>&minus;&minus;diskspec</i> option can be used to control
how <i>&minus;&minus;disk&minus;only</i> and external
checkpoints create external files. This option can occur
multiple times, according to the number of &lt;disk&gt;
elements in the domain xml. Each &lt;diskspec&gt; is in the
form <b>disk[,snapshot=type][,driver=type][,file=name]</b>.
A <i>diskspec</i> must be provided for disks backed by block
devices as libvirt doesn&rsquo;t auto-generate file names
for those. To include a literal comma in <b>disk</b> or in
<b>file=name</b>, escape it with a second comma. A literal
<i>&minus;&minus;diskspec</i> must precede each
<b>diskspec</b> unless all three of <i>domain</i>,
<i>name</i>, and <i>description</i> are also present. For
example, a diskspec of
&quot;vda,snapshot=external,file=/path/to,,new&quot; results
in the following <small>XML:</small> <br>
&lt;disk name=&rsquo;vda&rsquo;
snapshot=&rsquo;external&rsquo;&gt; <br>
&lt;source file=&rsquo;/path/to,new&rsquo;/&gt; <br>
&lt;/disk&gt;</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;reuse&minus;external</i> is specified, and
the domain <small>XML</small> or <i>diskspec</i> option
requests an external snapshot with a destination of an
existing file, then the destination must exist and be
pre-created with correct format and metadata. The file is
then reused; otherwise, a snapshot is refused to avoid
losing contents of the existing files.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;quiesce</i> is specified, libvirt will try
to use guest agent to freeze and unfreeze domain&rsquo;s
mounted file systems. However, if domain has no guest agent,
snapshot creation will fail. Currently, this requires
<i>&minus;&minus;disk&minus;only</i> to be passed as
well.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;no&minus;metadata</i> is specified, then
the snapshot data is created, but any metadata is
immediately discarded (that is, libvirt does not treat the
snapshot as current, and cannot revert to the snapshot
unless <b>snapshot-create</b> is later used to teach libvirt
about the metadata again). This flag is incompatible with
<i>&minus;&minus;print&minus;xml</i>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;atomic</i> is specified, libvirt will
guarantee that the snapshot either succeeds, or fails with
no changes; not all hypervisors support this. If this flag
is not specified, then some hypervisors may fail after
partially performing the action, and <b>dumpxml</b> must be
used to see whether any partial changes occurred.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;live</i> is specified, libvirt takes the
snapshot while the guest is running. This increases the size
of the memory image of the external checkpoint. This is
currently supported only for external checkpoints.</p>

<p style="margin-left:11%;"><b>snapshot-current</b>
<i>domain</i> {[<i>&minus;&minus;name</i>] |
[<i>&minus;&minus;security&minus;info</i>] |
[<i>snapshotname</i>]}</p>

<p style="margin-left:17%;">Without <i>snapshotname</i>,
this will output the snapshot <small>XML</small> for the
domain&rsquo;s current snapshot (if any). If
<i>&minus;&minus;name</i> is specified, just the current
snapshot name instead of the full xml. Otherwise, using
<i>&minus;&minus;security&minus;info</i> will also include
security sensitive information in the
<small>XML.</small></p>

<p style="margin-left:17%; margin-top: 1em">With
<i>snapshotname</i>, this is a request to make the existing
named snapshot become the current snapshot, without
reverting the domain.</p>

<p style="margin-left:11%;"><b>snapshot-edit</b>
<i>domain</i> [<i>snapshotname</i>]
[<i>&minus;&minus;current</i>]
{[<i>&minus;&minus;rename</i>] | <br>
[<i>&minus;&minus;clone</i>]}</p>

<p style="margin-left:17%;">Edit the <small>XML</small>
configuration file for <i>snapshotname</i> of a domain. If
both <i>snapshotname</i> and <i>&minus;&minus;current</i>
are specified, also force the edited snapshot to become the
current snapshot. If <i>snapshotname</i> is omitted, then
<i>&minus;&minus;current</i> must be supplied, to edit the
current snapshot.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh snapshot&minus;dumpxml dom name &gt; snapshot.xml
 vi snapshot.xml (or make changes with your other text editor)
 virsh snapshot&minus;create dom snapshot.xml &minus;&minus;redefine [&minus;&minus;current]</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;rename</i> is specified, then the edits can
change the snapshot name. If <i>&minus;&minus;clone</i> is
specified, then changing the snapshot name will create a
clone of the snapshot metadata. If neither is specified,
then the edits must not change the snapshot name. Note that
changing a snapshot name must be done with care, since the
contents of some snapshots, such as internal snapshots
within a single qcow2 file, are accessible only from the
original name.</p>

<p style="margin-left:11%;"><b>snapshot-info</b>
<i>domain</i> {<i>snapshot</i> |
<i>&minus;&minus;current</i>}</p>

<p style="margin-left:17%;">Output basic information about
a named &lt;snapshot&gt;, or the current snapshot with
<i>&minus;&minus;current</i>.</p>

<p style="margin-left:11%;"><b>snapshot-list</b>
<i>domain</i> [<i>&minus;&minus;metadata</i>]
[<i>&minus;&minus;no&minus;metadata</i>]
[{<i>&minus;&minus;parent</i> | <i>&minus;&minus;roots</i>
<br>
| [{<i>&minus;&minus;tree</i> |
<i>&minus;&minus;name</i>}]}] [{[<i>&minus;&minus;from</i>]
<b>snapshot</b> | <i>&minus;&minus;current</i>} <br>
[<i>&minus;&minus;descendants</i>]]
[<i>&minus;&minus;leaves</i>]
[<i>&minus;&minus;no&minus;leaves</i>]
[<i>&minus;&minus;inactive</i>]
[<i>&minus;&minus;active</i>] <br>
[<i>&minus;&minus;disk&minus;only</i>]
[<i>&minus;&minus;internal</i>]
[<i>&minus;&minus;external</i>]</p>

<p style="margin-left:17%;">List all of the available
snapshots for the given domain, defaulting to show columns
for the snapshot name, creation time, and domain state.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;parent</i> is specified, add a column to
the output table giving the name of the parent of each
snapshot. If <i>&minus;&minus;roots</i> is specified, the
list will be filtered to just snapshots that have no
parents. If <i>&minus;&minus;tree</i> is specified, the
output will be in a tree format, listing just snapshot
names. These three options are mutually exclusive. If
<i>&minus;&minus;name</i> is specified only the snapshot
name is printed. This option is mutually exclusive with
<i>&minus;&minus;tree</i>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;from</i> is provided, filter the list to
snapshots which are children of the given <b>snapshot</b>;
or if <i>&minus;&minus;current</i> is provided, start at the
current snapshot. When used in isolation or with
<i>&minus;&minus;parent</i>, the list is limited to direct
children unless <i>&minus;&minus;descendants</i> is also
present. When used with <i>&minus;&minus;tree</i>, the use
of <i>&minus;&minus;descendants</i> is implied. This option
is not compatible with <i>&minus;&minus;roots</i>. Note that
the starting point of <i>&minus;&minus;from</i> or
<i>&minus;&minus;current</i> is not included in the list
unless the <i>&minus;&minus;tree</i> option is also
present.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;leaves</i> is specified, the list will be
filtered to just snapshots that have no children. Likewise,
if <i>&minus;&minus;no&minus;leaves</i> is specified, the
list will be filtered to just snapshots with children. (Note
that omitting both options does no filtering, while
providing both options will either produce the same list or
error out depending on whether the server recognizes the
flags). Filtering options are not compatible with
<i>&minus;&minus;tree</i>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;metadata</i> is specified, the list will be
filtered to just snapshots that involve libvirt metadata,
and thus would prevent <b>undefine</b> of a persistent
domain, or be lost on <b>destroy</b> of a transient domain.
Likewise, if <i>&minus;&minus;no&minus;metadata</i> is
specified, the list will be filtered to just snapshots that
exist without the need for libvirt metadata.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;inactive</i> is specified, the list will be
filtered to snapshots that were taken when the domain was
shut off. If <i>&minus;&minus;active</i> is specified, the
list will be filtered to snapshots that were taken when the
domain was running, and where the snapshot includes the
memory state to revert to that running state. If
<i>&minus;&minus;disk&minus;only</i> is specified, the list
will be filtered to snapshots that were taken when the
domain was running, but where the snapshot includes only
disk state.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;internal</i> is specified, the list will be
filtered to snapshots that use internal storage of existing
disk images. If <i>&minus;&minus;external</i> is specified,
the list will be filtered to snapshots that use external
files for disk images or memory state.</p>

<p style="margin-left:11%;"><b>snapshot-dumpxml</b>
<i>domain snapshot</i>
[<i>&minus;&minus;security&minus;info</i>]</p>

<p style="margin-left:17%;">Output the snapshot
<small>XML</small> for the domain&rsquo;s snapshot named
<i>snapshot</i>. Using
<i>&minus;&minus;security&minus;info</i> will also include
security sensitive information. Use <b>snapshot-current</b>
to easily access the <small>XML</small> of the current
snapshot.</p>

<p style="margin-left:11%;"><b>snapshot-parent</b>
<i>domain</i> {<i>snapshot</i> |
<i>&minus;&minus;current</i>}</p>

<p style="margin-left:17%;">Output the name of the parent
snapshot, if any, for the given <i>snapshot</i>, or for the
current snapshot with <i>&minus;&minus;current</i>.</p>

<p style="margin-left:11%;"><b>snapshot-revert</b>
<i>domain</i> {<i>snapshot</i> |
<i>&minus;&minus;current</i>} [{<i>&minus;&minus;running</i>
| <i>&minus;&minus;paused</i>}] <br>
[<i>&minus;&minus;force</i>]</p>

<p style="margin-left:17%;">Revert the given domain to the
snapshot specified by <i>snapshot</i>, or to the current
snapshot with <i>&minus;&minus;current</i>. Be aware that
this is a destructive action; any changes in the domain
since the last snapshot was taken will be lost. Also note
that the state of the domain after snapshot-revert is
complete will be the state of the domain at the time the
original snapshot was taken.</p>

<p style="margin-left:17%; margin-top: 1em">Normally,
reverting to a snapshot leaves the domain in the state it
was at the time the snapshot was created, except that a disk
snapshot with no vm state leaves the domain in an inactive
state. Passing either the <i>&minus;&minus;running</i> or
<i>&minus;&minus;paused</i> flag will perform additional
state changes (such as booting an inactive domain, or
pausing a running domain). Since transient domains cannot be
inactive, it is required to use one of these flags when
reverting to a disk snapshot of a transient domain.</p>

<p style="margin-left:17%; margin-top: 1em">There are two
cases where a snapshot revert involves extra risk, which
requires the use of <i>&minus;&minus;force</i> to proceed.
One is the case of a snapshot that lacks full domain
information for reverting configuration (such as snapshots
created prior to libvirt 0.9.5); since libvirt cannot prove
that the current configuration matches what was in use at
the time of the snapshot, supplying
<i>&minus;&minus;force</i> assures libvirt that the snapshot
is compatible with the current configuration (and if it is
not, the domain will likely fail to run). The other is the
case of reverting from a running domain to an active state
where a new hypervisor has to be created rather than reusing
the existing hypervisor, because it implies drawbacks such
as breaking any existing <small>VNC</small> or Spice
connections; this condition happens with an active snapshot
that uses a provably incompatible configuration, as well as
with an inactive snapshot that is combined with the
<i>&minus;&minus;start</i> or <i>&minus;&minus;pause</i>
flag.</p>

<p style="margin-left:11%;"><b>snapshot-delete</b>
<i>domain</i> {<i>snapshot</i> |
<i>&minus;&minus;current</i>}
[<i>&minus;&minus;metadata</i>]
[{<i>&minus;&minus;children</i> <br>
| <i>&minus;&minus;children&minus;only</i>}]</p>

<p style="margin-left:17%;">Delete the snapshot for the
domain named <i>snapshot</i>, or the current snapshot with
<i>&minus;&minus;current</i>. If this snapshot has child
snapshots, changes from this snapshot will be merged into
the children. If <i>&minus;&minus;children</i> is passed,
then delete this snapshot and any children of this snapshot.
If <i>&minus;&minus;children&minus;only</i> is passed, then
delete any children of this snapshot, but leave this
snapshot intact. These two flags are mutually exclusive.</p>

<p style="margin-left:17%; margin-top: 1em">If
<i>&minus;&minus;metadata</i> is specified, then only delete
the snapshot metadata maintained by libvirt, while leaving
the snapshot contents intact for access by external tools;
otherwise deleting a snapshot also removes the data contents
from that point in time.</p>

<h2>NWFILTER COMMANDS
<a name="NWFILTER COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands manipulate network filters. Network filters allow
filtering of the network traffic coming from and going to
virtual machines. Individual network traffic filters are
written in <small>XML</small> and may contain references to
other network filters, describe traffic filtering rules, or
contain both. Network filters are referenced by virtual
machines from within their interface description. A network
filter may be referenced by multiple virtual machines&rsquo;
interfaces. <b><br>
nwfilter-define</b> <i>xmlfile</i></p>

<p style="margin-left:17%;">Make a new network filter known
to libvirt. If a network filter with the same name already
exists, it will be replaced with the new <small>XML.</small>
Any running virtual machine referencing this network filter
will have its network traffic rules adapted. If for any
reason the network traffic filtering rules cannot be
instantiated by any of the running virtual machines, then
the new <small>XML</small> will be rejected.</p>

<p style="margin-left:11%;"><b>nwfilter-undefine</b>
<i>nwfilter-name</i></p>

<p style="margin-left:17%;">Delete a network filter. The
deletion will fail if any running virtual machine is
currently using this network filter.</p>

<p style="margin-left:11%;"><b>nwfilter-list</b></p>

<p style="margin-left:17%;">List all of the available
network filters.</p>

<p style="margin-left:11%;"><b>nwfilter-dumpxml</b>
<i>nwfilter-name</i></p>

<p style="margin-left:17%;">Output the network filter
<small>XML.</small></p>

<p style="margin-left:11%;"><b>nwfilter-edit</b>
<i>nwfilter-name</i></p>

<p style="margin-left:17%;">Edit the <small>XML</small> of
a network filter.</p>

<p style="margin-left:17%; margin-top: 1em">This is
equivalent to:</p>

<pre style="margin-left:17%; margin-top: 1em"> virsh nwfilter&minus;dumpxml myfilter &gt; myfilter.xml
 vi myfilter.xml (or make changes with your other text editor)
 virsh nwfilter&minus;define myfilter.xml</pre>


<p style="margin-left:17%; margin-top: 1em">except that it
does some error checking. The new network filter may be
rejected due to the same reason as mentioned in
<i>nwfilter-define</i>.</p>

<p style="margin-left:17%; margin-top: 1em">The editor used
can be supplied by the <tt>$VISUAL</tt> or <tt>$EDITOR</tt>
environment variables, and defaults to
<tt>&quot;vi&quot;</tt>.</p>

<h2>HYPERVISOR-SPECIFIC COMMANDS
<a name="HYPERVISOR-SPECIFIC COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>NOTE:</small>
Use of the following commands is <b>strongly</b>
discouraged. They can cause libvirt to become confused and
do the wrong thing on subsequent operations. Once you have
used these commands, please do not report problems to the
libvirt developers; the reports will be ignored. If you find
that these commands are the only way to accomplish
something, then it is better to request that the feature be
added as a first-class citizen in the regular libvirt
library. <b><br>
qemu-attach</b> <i>pid</i></p>

<p style="margin-left:17%;">Attach an externally launched
<small>QEMU</small> process to the libvirt
<small>QEMU</small> driver. The <small>QEMU</small> process
must have been created with a monitor connection using the
<small>UNIX</small> driver. Ideally the process will also
have had the &rsquo;&minus;name&rsquo; argument
specified.</p>

<pre style="margin-left:17%; margin-top: 1em">     $ qemu&minus;kvm &minus;cdrom ~/demo.iso \
         &minus;monitor unix:/tmp/demo,server,nowait \
         &minus;name foo \
         &minus;uuid cece4f9f&minus;dff0&minus;575d&minus;0e8e&minus;01fe380f12ea  &amp;
     $ QEMUPID=$!
     $ virsh qemu&minus;attach $QEMUPID</pre>


<p style="margin-left:17%; margin-top: 1em">Not all
functions of libvirt are expected to work reliably after
attaching to an externally launched <small>QEMU</small>
process. There may be issues with the guest
<small>ABI</small> changing upon migration and device
hotplug or hotunplug may not work. The attached environment
should be considered primarily read-only.</p>

<p style="margin-left:11%;"><b>qemu-monitor-command</b>
<i>domain</i> { [<i>&minus;&minus;hmp</i>] |
[<i>&minus;&minus;pretty</i>] } <i>command</i>...</p>

<p style="margin-left:17%;">Send an arbitrary monitor
command <i>command</i> to domain <i>domain</i> through the
qemu monitor. The results of the command will be printed on
stdout. If <i>&minus;&minus;hmp</i> is passed, the command
is considered to be a human monitor command and libvirt will
automatically convert it into <small>QMP</small> if needed.
In that case the result will also be converted back from
<small>QMP.</small> If <i>&minus;&minus;pretty</i> is given,
and the monitor uses <small>QMP,</small> then the output
will be pretty-printed. If more than one argument is
provided for <i>command</i>, they are concatenated with a
space in between before passing the single command to the
monitor.</p>

<p style="margin-left:11%;"><b>qemu-agent-command</b>
<i>domain</i> [<i>&minus;&minus;timeout seconds</i> |
<i>&minus;&minus;async</i> | <i>&minus;&minus;block</i>]
<i><br>
command</i>...</p>

<p style="margin-left:17%;">Send an arbitrary guest agent
command <i>command</i> to domain <i>domain</i> through qemu
agent. <i>&minus;&minus;timeout</i>,
<i>&minus;&minus;async</i> and <i>&minus;&minus;block</i>
options are exclusive. <i>&minus;&minus;timeout</i> requires
timeout seconds <i>seconds</i> and it must be positive. When
<i>&minus;&minus;aysnc</i> is given, the command waits for
timeout whether success or failed. And when
<i>&minus;&minus;block</i> is given, the command waits
forever with blocking timeout.</p>

<p style="margin-left:11%;"><b>qemu-monitor-event</b>
[<i>domain</i>] [<i>&minus;&minus;event event-name</i>]
[<i>&minus;&minus;loop</i>] [<i>&minus;&minus;timeout <br>
seconds</i>] [<i>&minus;&minus;pretty</i>]
[<i>&minus;&minus;regex</i>]
[<i>&minus;&minus;no&minus;case</i>]</p>

<p style="margin-left:17%;">Wait for arbitrary
<small>QEMU</small> monitor events to occur, and print out
the details of events as they happen. The events can
optionally be filtered by <i>domain</i> or
<i>event-name</i>. The &rsquo;query&minus;events&rsquo;
<small>QMP</small> command can be used via
<i>qemu-monitor-command</i> to learn what events are
supported. If <i>&minus;&minus;regex</i> is used,
<i>event-name</i> is a basic regular expression instead of a
literal string. If <i>&minus;&minus;no&minus;case</i> is
used, <i>event-name</i> will match case-insensitively.</p>

<p style="margin-left:17%; margin-top: 1em">By default,
this command is one-shot, and returns success once an event
occurs; you can send <small>SIGINT</small> (usually via
<tt>&quot;Ctrl&minus;C&quot;</tt>) to quit immediately. If
<i>&minus;&minus;timeout</i> is specified, the command gives
up waiting for events after <i>seconds</i> have elapsed.
With <i>&minus;&minus;loop</i>, the command prints all
events until a timeout or interrupt key. If
<i>&minus;&minus;pretty</i> is specified, any
<small>JSON</small> event details are pretty-printed for
better legibility.</p>

<p style="margin-left:11%;"><b>lxc-enter-namespace</b>
<i>domain</i> -- /path/to/binary [arg1, [arg2, ...]]</p>

<p style="margin-left:17%;">Enter the namespace of
<i>domain</i> and execute the command
<tt>&quot;/path/to/binary&quot;</tt> passing the requested
args. The binary path is relative to the container root
filesystem, not the host root filesystem. The binary will
inherit the environment variables / console visible to
virsh. This command only works when connected to the
<small>LXC</small> hypervisor driver. This command succeeds
only if <tt>&quot;/path/to/binary&quot;</tt> has 0 exit
status.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables can be set to alter the behaviour of
<tt>&quot;virsh&quot;</tt> <br>
VIRSH_DEBUG=&lt;0 to 4&gt;</p>

<p style="margin-left:17%;">Turn on verbose debugging of
virsh commands. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="20%">


<p>VIRSH_DEBUG=0</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>DEBUG
&minus;</small> Messages at <small>ALL</small> levels get
logged</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="20%">


<p style="margin-top: 1em">VIRSH_DEBUG=1</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>INFO
&minus;</small> Logs messages at levels <small>INFO, NOTICE,
WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="20%">


<p style="margin-top: 1em">VIRSH_DEBUG=2</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>NOTICE
&minus;</small> Logs messages at levels <small>NOTICE,
WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="20%">


<p style="margin-top: 1em">VIRSH_DEBUG=3</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>WARNING
&minus;</small> Logs messages at levels
<small>WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="20%">


<p style="margin-top: 1em">VIRSH_DEBUG=4</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>ERROR
&minus;</small> Messages at only <small>ERROR</small> level
gets logged.</p>


<p style="margin-left:11%;">VIRSH_LOG_FILE=&quot;LOGFILE&quot;</p>

<p style="margin-left:17%;">The file to log virsh debug
messages.</p>


<p style="margin-left:11%;"><small>VIRSH_DEFAULT_CONNECT_URI</small></p>

<p style="margin-left:17%;">The hypervisor to connect to by
default. Set this to a <small>URI,</small> in the same
format as accepted by the <b>connect</b> option. This
environment variable is deprecated in favour of the global
<b><small>LIBVIRT_DEFAULT_URI</small></b> variable which
serves the same purpose.</p>


<p style="margin-left:11%;"><small>LIBVIRT_DEFAULT_URI</small></p>

<p style="margin-left:17%;">The hypervisor to connect to by
default. Set this to a <small>URI,</small> in the same
format as accepted by the <b>connect</b> option. This
overrides the default <small>URI</small> set in any client
config file and prevents libvirt from probing for
drivers.</p>

<p style="margin-left:11%;"><small>VISUAL</small></p>

<p style="margin-left:17%;">The editor to use by the
<b>edit</b> and related options.</p>

<p style="margin-left:11%;"><small>EDITOR</small></p>

<p style="margin-left:17%;">The editor to use by the
<b>edit</b> and related options, if
<tt>&quot;VISUAL&quot;</tt> is not set.</p>


<p style="margin-left:11%;"><small>VIRSH_HISTSIZE</small></p>

<p style="margin-left:17%;">The number of commands to
remember in the command history. The default value is
500.</p>

<p style="margin-left:11%;">LIBVIRT_DEBUG=LEVEL</p>

<p style="margin-left:17%;">Turn on verbose debugging of
all libvirt <small>API</small> calls. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p>LIBVIRT_DEBUG=1</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>DEBUG</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=2</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>INFO</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=3</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>WARNING</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=4</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>ERROR</small> or above</p>

<p style="margin-left:17%; margin-top: 1em">For further
information about debugging options consult
<tt>&quot;http://libvirt.org/logging.html&quot;</tt></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report any bugs
discovered to the libvirt community via the mailing list
<tt>&quot;http://libvirt.org/contact.html&quot;</tt> or bug
tracker <tt>&quot;http://libvirt.org/bugs.html&quot;</tt>.
Alternatively report bugs to your software distributor /
vendor.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">  Please refer to the AUTHORS file distributed with libvirt.
  Based on the xm man page by:
  Sean Dague &lt;sean at dague dot net&gt;
  Daniel Stekloff &lt;dsteklof at us dot ibm dot com&gt;</pre>


<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2005, 2007&minus;2014 Red Hat, Inc., and the authors listed
in the libvirt <small>AUTHORS</small> file.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virsh is
distributed under the terms of the <small>GNU LGPL</small>
v2+. This is free software; see the source for copying
conditions. There is <small>NO</small> warranty; not even
for <small>MERCHANTABILITY</small> or <small>FITNESS FOR A
PARTICULAR PURPOSE</small></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;install</i>(1),
<i>virt&minus;xml&minus;validate</i>(1),
<i>virt&minus;top</i>(1), <i>virt&minus;df</i>(1),
&lt;http://www.libvirt.org/&gt;</p>
<hr>
</body>
</html>
