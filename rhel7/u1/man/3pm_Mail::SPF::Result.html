<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:04:06 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Mail::SPF::Result</title>

</head>
<body>

<h1 align="center">Mail::SPF::Result</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OVERLOADING">OVERLOADING</a><br>
<a href="#RESULT CLASSES">RESULT CLASSES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Mail::SPF::Result
&minus; SPF result class</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For the general
usage of <i>Mail::SPF::Result</i> objects in code that calls
Mail::SPF, see Mail::SPF. For the detailed interface of
<i>Mail::SPF::Result</i> and its derivatives, see below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Throwing
results</b></p>

<pre style="margin-left:11%;">    package Mail::SPF::Foo;
    use Error ':try';
    use Mail::SPF::Result;
    sub foo {
        if (...) {
            $server&minus;&gt;throw_result('pass', $request)
        }
        else {
            $server&minus;&gt;throw_result('permerror', $request, 'Invalid foo');
        }
    }</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Catching
results</b></p>

<pre style="margin-left:11%;">    package Mail::SPF::Bar;
    use Error ':try';
    use Mail::SPF::Foo;
    try {
        Mail::SPF::Foo&minus;&gt;foo();
    }
    catch Mail::SPF::Result with {
        my ($result) = @_;
        ...
    };</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Using
results</b></p>

<pre style="margin-left:11%;">    my $result_name     = $result&minus;&gt;name;
    my $result_code     = $result&minus;&gt;code;
    my $request         = $result&minus;&gt;request;
    my $local_exp       = $result&minus;&gt;local_explanation;
    my $authority_exp   = $result&minus;&gt;authority_explanation
        if $result&minus;&gt;can('authority_explanation');
    my $spf_header      = $result&minus;&gt;received_spf_header;</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An object of
class <b>Mail::SPF::Result</b> represents the result of an
<small>SPF</small> request.</p>

<p style="margin-left:11%; margin-top: 1em">There is
usually no need to construct an <small>SPF</small> result
object directly using the <tt>&quot;new&quot;</tt>
constructor. Instead, use the <tt>&quot;throw&quot;</tt>
class method to signal to the calling code that a definite
<small>SPF</small> result has been determined. In other
words, use Mail::SPF::Result and its derivatives just like
exceptions. See Error or &quot;eval&quot; in perlfunc for
how to handle exceptions in Perl.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Constructor</b>
<br>
The following constructor is provided: <b><br>
new($server, $request)</b>: returns <i>Mail::SPF::Result</i>
<b><br>
new($server, $request,</b> <b><i>$text</i></b><b>)</b>:
returns <i>Mail::SPF::Result</i></p>

<p style="margin-left:17%;">Creates a new
<small>SPF</small> result object and associates the given
<i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i>
objects with it. An optional result text may be
specified.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
methods</b> <br>
The following class methods are provided: <b><br>
throw($server, $request)</b>: throws
<i>Mail::SPF::Result</i> <b><br>
throw($server, $request,</b> <b><i>$text</i></b><b>)</b>:
throws <i>Mail::SPF::Result</i></p>

<p style="margin-left:17%;">Throws a new <small>SPF</small>
result object, associating the given
<i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i>
objects with it. An optional result text may be
specified.</p>

<p style="margin-left:17%; margin-top: 1em"><i>Note</i>: Do
not write code invoking <tt>&quot;throw&quot;</tt> on
<i>literal</i> result class names as this would ignore any
derivative result classes provided by <b>Mail::SPF</b>
extension modules. Invoke the
<tt>&quot;throw_result&quot;</tt> method on a
<i>Mail::SPF::Server</i> object instead.</p>

<p style="margin-left:11%;"><b>name</b>: returns
<i>string</i></p>

<p style="margin-left:17%;"><i>Abstract</i>. Returns the
result name of the result class (or object). For classes of
the <i>Mail::SPF::Result::*</i> hierarchy, this roughly
corresponds to the trailing part of the class name. For
example, returns
<tt>&quot;neutral&minus;by&minus;default&quot;</tt> if
invoked on <i>Mail::SPF::Result::NeutralByDefault</i>. Also
see the &quot;code&quot; method. This method may also be
used as an instance method.</p>

<p style="margin-left:17%; margin-top: 1em">This method
must be implemented by sub-classes of Mail::SPF::Result for
which the result <i>name</i> differs from the result
<i>code</i>.</p>

<p style="margin-left:11%;"><b>class</b>: returns
<i>class</i> <b><br>
class($name)</b>: returns <i>class</i></p>

<p style="margin-left:17%;">Maps the given result name to
the corresponding <i>Mail::SPF::Result::*</i> class, or
returns the result base class (the class on which it is
invoked) if no result name is given. If an unknown result
name is specified, returns <b>undef</b>.</p>

<p style="margin-left:11%;"><b>isa_by_name($name)</b>:
returns <i>boolean</i></p>

<p style="margin-left:17%;">If the class (or object) on
which this method is invoked represents the given result
name (or a derivative name), returns <b>true</b>. Returns
<b>false</b> otherwise. This method may also be used as an
instance method.</p>

<p style="margin-left:17%; margin-top: 1em">For example,
<tt>&quot;Mail::SPF::Result::NeutralByDefault&minus;&gt;isa_by_name('neutral')&quot;</tt>
returns <b>true</b>.</p>

<p style="margin-left:11%;"><b>code</b>: returns
<i>string</i></p>

<p style="margin-left:17%;"><i>Abstract</i>. Returns the
basic <small>SPF</small> result code
(<tt>&quot;pass&quot;</tt>, <tt>&quot;fail&quot;</tt>,
<tt>&quot;softfail&quot;</tt>, <tt>&quot;neutral&quot;</tt>,
<tt>&quot;none&quot;</tt>, <tt>&quot;error&quot;</tt>,
<tt>&quot;permerror&quot;</tt>,
<tt>&quot;temperror&quot;</tt>) of the result class on which
it is invoked. All valid result codes are valid result names
as well, the reverse however does not apply. This method may
also be used as an instance method.</p>

<p style="margin-left:17%; margin-top: 1em">This method is
abstract and must be implemented by sub-classes of
Mail::SPF::Result.</p>

<p style="margin-left:11%;"><b>is_code($code)</b>: returns
<i>boolean</i></p>

<p style="margin-left:17%;">If the class (or object) on
which this method is invoked represents the given result
code, returns <b>true</b>. Returns <b>false</b> otherwise.
This method may also be used as an instance method.</p>

<p style="margin-left:17%; margin-top: 1em"><i>Note</i>:
The &quot;isa_by_name&quot; method provides a superset of
this method&rsquo;s functionality.</p>


<p style="margin-left:11%;"><b>received_spf_header_name</b>:
returns <i>string</i></p>

<p style="margin-left:17%;">Returns
<b>&rsquo;Received&minus;SPF&rsquo;</b> as the field name
for <tt>&quot;Received&minus;SPF&quot;</tt> header fields.
This method should be overridden by <b>Mail::SPF</b>
extension modules that provide non-standard features (such
as local policy) with the capacity to dilute the purity of
<small>SPF</small> results, in order not to deceive users of
the header field into mistaking it as an indication of a
natural <small>SPF</small> result.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Instance
methods</b> <br>
The following instance methods are provided: <b><br>
throw</b>: throws <i>Mail::SPF::Result</i> <b><br>
throw($server, $request)</b>: throws
<i>Mail::SPF::Result</i> <b><br>
throw($server, $request,</b> <b><i>$text</i></b><b>)</b>:
throws <i>Mail::SPF::Result</i></p>

<p style="margin-left:17%;">Re-throws an existing
<small>SPF</small> result object. If
<i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i>
objects are specified, associates them with the result
object, replacing the prior server and request objects. If a
result text is specified as well, overrides the prior result
text.</p>

<p style="margin-left:11%;"><b>server</b>: returns
<i>Mail::SPF::Server</i></p>

<p style="margin-left:17%;">Returns the Mail::SPF server
object that produced the result at hand.</p>

<p style="margin-left:11%;"><b>request</b>: returns
<i>Mail::SPF::Request</i></p>

<p style="margin-left:17%;">Returns the <small>SPF</small>
request that led to the result at hand.</p>

<p style="margin-left:11%;"><b>text</b>: returns
<i>string</i></p>

<p style="margin-left:17%;">Returns the text message of the
result object.</p>

<p style="margin-left:11%;"><b>stringify</b>: returns
<i>string</i></p>

<p style="margin-left:17%;">Returns the result&rsquo;s name
and text message formatted as a string. You can simply use a
Mail::SPF::Result object as a string for the same effect,
see &quot; <small>OVERLOADING&quot;</small> .</p>

<p style="margin-left:11%;"><b>local_explanation</b>:
returns <i>string</i>; throws <i>Mail::SPF::EDNSError</i>,
<i><br>
Mail::SPF::EInvalidMacroString</i></p>

<p style="margin-left:17%;">Returns a locally generated
explanation for the result.</p>

<p style="margin-left:17%; margin-top: 1em">The local
explanation is prefixed with the authority domain whose
sender policy is responsible for the result. If the
responsible sender policy referred to another domain&rsquo;s
policy (using the <tt>&quot;include&quot;</tt> mechanism or
the <tt>&quot;redirect&quot;</tt> modifier), that other
domain which is <i>directly</i> responsible for the result
is also included in the local explanation&rsquo;s head. For
example:</p>

<pre style="margin-left:17%; margin-top: 1em">    example.com: &lt;local&minus;explanation&gt;</pre>


<p style="margin-left:17%; margin-top: 1em">The authority
domain <tt>&quot;example.com&quot;</tt>&rsquo;s sender
policy is directly responsible for the result.</p>

<pre style="margin-left:17%; margin-top: 1em">    example.com ... other.example.org: &lt;local&minus;explanation&gt;</pre>


<p style="margin-left:17%; margin-top: 1em">The authority
domain <tt>&quot;example.com&quot;</tt> (directly or
indirectly) referred to the domain
<tt>&quot;other.example.org&quot;</tt>, whose sender policy
then led to the result.</p>

<p style="margin-left:11%;"><b>received_spf_header</b>:
returns <i>string</i></p>

<p style="margin-left:17%;">Returns a string containing an
appropriate <tt>&quot;Received&minus;SPF&quot;</tt> header
field for the result object. The header field is not
line-wrapped and contains no trailing newline character.</p>

<h2>OVERLOADING
<a name="OVERLOADING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a
Mail::SPF::Result object is used as a <i>string</i>, the
&quot;stringify&quot; method is used to convert the object
into a string.</p>

<h2>RESULT CLASSES
<a name="RESULT CLASSES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
result classes are provided:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="41%">


<p><i>Mail::SPF::Result::Pass</i></p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="41%">


<p><i>Mail::SPF::Result::Fail</i></p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="41%">


<p><i>Mail::SPF::Result::SoftFail</i></p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="41%">


<p><i>Mail::SPF::Result::Neutral</i></p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:17%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="23%"></td>
<td width="54%">



<p style="margin-top: 1em"><i>Mail::SPF::Result::NeutralByDefault</i></p> </td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">This is a
special case of the <tt>&quot;neutral&quot;</tt> result that
is thrown as a default when &quot;falling off&quot; the end
of the record during evaluation. See <small>RFC 4408,
4.7.</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="37%">



<p style="margin-top: 1em"><i>Mail::SPF::Result::None</i></p> </td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="37%">


<p><i>Mail::SPF::Result::Error</i></p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:17%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%"></td>
<td width="5%"></td>
<td width="43%">



<p style="margin-top: 1em"><i>Mail::SPF::Result::PermError</i></p> </td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p><i>Mail::SPF::Result::TempError</i></p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The following
result classes have additional functionality: <i><br>
Mail::SPF::Result::Fail</i></p>

<p style="margin-left:17%;">The following additional
instance method is provided: <b><br>
authority_explanation</b>: returns <i>string</i>; throws
<i>Mail::SPF::EDNSError</i>, <i><br>
Mail::SPF::EInvalidMacroString</i></p>

<p style="margin-left:23%;">Returns the authority
domain&rsquo;s explanation for the result. Be aware that the
authority domain may be a malicious party and thus the
authority explanation should not be trusted blindly. See
<small>RFC 4408, 10.5,</small> for a detailed discussion of
this issue.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Mail::SPF,
Mail::SPF::Server, Error, &quot;eval&quot; in perlfunc</p>


<p style="margin-left:11%; margin-top: 1em">&lt;http://tools.ietf.org/html/rfc4408&gt;</p>

<p style="margin-left:11%; margin-top: 1em">For
availability, support, and license information, see the
<small>README</small> file included with Mail::SPF.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Julian Mehnle
&lt;julian@mehnle.net&gt;</p>
<hr>
</body>
</html>
