<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:54:53 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IBDIAGPATH</title>

</head>
<body>

<h1 align="center">IBDIAGPATH</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSYS">SYNOPSYS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ERROR CODES">ERROR CODES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ibdiagpath
&minus; IB diagnostic path</p>

<h2>SYNOPSYS
<a name="SYNOPSYS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ibdiagpath <br>
{&minus;n &lt;[src&minus;name,]dst&minus;name&gt;|&minus;l
&lt;[src&minus;lid,]dst&minus;lid&gt;|&minus;d
&lt;p1,p2,p3,...&gt;} <br>
[&minus;c &lt;count&gt;] [&minus;v] [&minus;t
&lt;topo&minus;file&gt;] [&minus;s &lt;sys&minus;name&gt;]
[&minus;i &lt;dev&minus;index&gt;] <br>
[&minus;p &lt;port&minus;num&gt;] [&minus;o
&lt;out&minus;dir&gt;] [&minus;lw &lt;1x|4x|12x&gt;]
[&minus;ls &lt;2.5|5|10&gt;] [&minus;pm] <br>
[&minus;pc] [&minus;P &lt;&lt; <small>PM</small>
counter&gt;=&lt;Trash Limit&gt;&gt;]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ibdiagpath
traces a path between two end-points and provides
information regarding the nodes and ports traversed along
the path. It utilizes device specific health queries for the
different devices along the traversed path. The way
ibdiagpath operates depends on the addressing mode used on
the command line. If directed route adressing is used, the
local node is the source node and the route to the
destination port is known apriori. On the other hand, if
<small>LID</small> route (or by-name) addressing is
imployed, then the source and destination ports of a route
are specified by their LIDs (or by the names defined in the
topology file). In this case, the actual path from the local
port to the source port, and from the source port to the
destination port, is defined by means of Subnet Management
Linear Forwarding Table queries of the switch nodes along
those paths. Therefore, the path cannot be predicted as it
may change. The tool allows omitting the source node, in
which case the local port on the machine running the tool is
assumed to be the source. Note: When ibdiagpath queries for
the performance counters along the path between the source
and destination ports, it always traverses the
<small>LID</small> route, even if a directed route is
specified. If along the <small>LID</small> route one or more
links are not in the <small>ACTIVE</small> state, ibdiagpath
reports an error. Checks for path validity from partitions,
IPoIB and QoS perspectives are also provided. <i><br>
ibdiagpath.log</i> &minus;</p>

<p style="margin-left:17%;">A dump of all the application
reports generate according to the provided flags</p>

<p style="margin-left:11%;"><i>ibdiagnet.pm</i> &minus;</p>

<p style="margin-left:17%;">A dump of the pm Counters
values, of the fabric links</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;n
&lt;[src&minus;name,]dst&minus;name</b>&gt; :</p>

<p style="margin-left:17%;">Names of the source and
destination ports (as defined in the <br>
topology file; source may be omitted &minus;&gt; local port
is assumed to be <br>
the source)</p>

<p style="margin-left:11%;"><b>&minus;l
&lt;[src&minus;lid,]dst&minus;lid</b>&gt; :</p>

<p style="margin-left:17%;">Source and destination LIDs
(source may be omitted &minus;&gt; local port <br>
is assumed to be the source)</p>

<p style="margin-left:11%;"><b>&minus;d
&lt;p1,p2,p3,...</b>&gt; :</p>

<p style="margin-left:17%;">directed route from the local
node (which is the source) and the <br>
destination node</p>

<p style="margin-left:11%;"><b>&minus;c &lt;count</b>&gt;
:</p>

<p style="margin-left:17%;">The minimal number of packets
to be sent across each link (default <br>
= 100)</p>

<p style="margin-left:11%;"><b>&minus;v</b> :</p>

<p style="margin-left:17%;">Enable verbose mode</p>

<p style="margin-left:11%;"><b>&minus;t
&lt;topo&minus;file</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the topology file
name</p>

<p style="margin-left:11%;"><b>&minus;s
&lt;sys&minus;name</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the local system
name. Meaningful only if a topology <br>
file is specified</p>

<p style="margin-left:11%;"><b>&minus;i
&lt;dev&minus;index</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the index of the
device of the port used to connect to <br>
the <small>IB</small> fabric (in case of multiple devices on
the local system)</p>

<p style="margin-left:11%;"><b>&minus;p
&lt;port&minus;num</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the local
device&rsquo;s port number used to connect to the
<small>IB</small> <br>
fabric</p>

<p style="margin-left:11%;"><b>&minus;o
&lt;out&minus;dir</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the directory where
the output files will be placed <br>
(default = /var/cache/ibutils)</p>

<p style="margin-left:11%;"><b>&minus;lw
&lt;1x|4x|12x</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the expected link
width</p>

<p style="margin-left:11%;"><b>&minus;ls
&lt;2.5|5|10</b>&gt; :</p>

<p style="margin-left:17%;">Specifies the expected link
speed</p>

<p style="margin-left:11%;"><b>&minus;pm</b> :</p>

<p style="margin-left:17%;">Dump all the fabric links, pm
Counters into ibdiagnet.pm</p>

<p style="margin-left:11%;"><b>&minus;pc</b> :</p>

<p style="margin-left:17%;">Reset all the fabric links
pmCounters</p>

<p style="margin-left:11%;"><b>&minus;P</b>
&lt;PM=&lt;Trash&gt;&gt; :</p>

<p style="margin-left:17%;">If any of the provided pm is
greater then its provided value, <br>
print it to screen</p>


<p style="margin-left:11%;"><b>&minus;h|&minus;&minus;help</b>
:</p>

<p style="margin-left:17%;">Prints the help page
information</p>


<p style="margin-left:11%;"><b>&minus;V|&minus;&minus;version</b>
:</p>

<p style="margin-left:17%;">Prints the version of the
tool</p>

<p style="margin-left:11%;"><b>&minus;&minus;vars</b> :</p>

<p style="margin-left:17%;">Prints the tool&rsquo;s
environment variables and their values</p>

<h2>ERROR CODES
<a name="ERROR CODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1 &minus; The
path traced is un-healthy <br>
2 &minus; Failed to parse command line options <br>
3 &minus; More then 64 hops are required for traversing the
local port to the <br>
&quot;Source&quot; port and then to the
&quot;Destination&quot; port. <br>
4 &minus; Unable to traverse the <small>LFT</small> data
from source to destination <br>
5 &minus; Failed to use Topology File <br>
6 &minus; Failed to load required Package</p>
<hr>
</body>
</html>
