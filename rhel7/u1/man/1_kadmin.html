<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:58:58 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>KADMIN</title>

</head>
<body>

<h1 align="center">KADMIN</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DATABASE OPTIONS">DATABASE OPTIONS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#HISTORY">HISTORY</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">kadmin &minus;
Kerberos V5 database administration program</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>kadmin</b>
[<b>&minus;O</b>|<b>&minus;N</b>] [<b>&minus;r</b>
<i>realm</i>] [<b>&minus;p</b> <i>principal</i>]
[<b>&minus;q</b> <i>query</i>] [[<b>&minus;c</b>
<i>cache_name</i>]|[<b>&minus;k</b> [<b>&minus;t</b>
<i>keytab</i>]]|<b>&minus;n</b>] [<b>&minus;w</b>
<i>password</i>] [<b>&minus;s</b>
<i>admin_server</i>[:<i>port</i>]]</p>


<p style="margin-left:11%; margin-top: 1em"><b>kadmin.local</b>
[<b>&minus;r</b> <i>realm</i>] [<b>&minus;p</b>
<i>principal</i>] [<b>&minus;q</b> <i>query</i>]
[<b>&minus;d</b> <i>dbname</i>] [<b>&minus;e</b>
<i>enc</i>:<i>salt</i> ...] [<b>&minus;m</b>]
[<b>&minus;x</b> <i>db_args</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">kadmin and
kadmin.local are command&minus;line interfaces to the
Kerberos V5 administration system. They provide nearly
identical functionalities; the difference is that
kadmin.local directly accesses the KDC database, while
kadmin performs operations using <i>kadmind(8)</i>. Except
as explicitly noted otherwise, this man page will use
&quot;kadmin&quot; to refer to both versions. kadmin
provides for the maintenance of Kerberos principals,
password policies, and service key tables (keytabs).</p>

<p style="margin-left:11%; margin-top: 1em">The remote
kadmin client uses Kerberos to authenticate to kadmind using
the service principal <b>kadmin/ADMINHOST</b> (where
<i>ADMINHOST</i> is the fully&minus;qualified hostname of
the admin server) or <b>kadmin/admin</b>. If the credentials
cache contains a ticket for one of these principals, and the
<b>&minus;c</b> credentials_cache option is specified, that
ticket is used to authenticate to kadmind. Otherwise, the
<b>&minus;p</b> and <b>&minus;k</b> options are used to
specify the client Kerberos principal name used to
authenticate. Once kadmin has determined the principal name,
it requests a service ticket from the KDC, and uses that
service ticket to authenticate to kadmind.</p>

<p style="margin-left:11%; margin-top: 1em">Since
kadmin.local directly accesses the KDC database, it usually
must be run directly on the master KDC with sufficient
permissions to read the KDC database. If the KDC database
uses the LDAP database module, kadmin.local can be run on
any host which can access the LDAP server.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;r</b>
<i>realm</i></p>

<p style="margin-left:22%;">Use <i>realm</i> as the default
database realm.</p>

<p style="margin-left:11%;"><b>&minus;p</b>
<i>principal</i></p>

<p style="margin-left:22%;">Use <i>principal</i> to
authenticate. Otherwise, kadmin will append <b>/admin</b> to
the primary principal name of the default ccache, the value
of the <b>USER</b> environment variable, or the username as
obtained with getpwuid, in order of preference.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;k</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Use a keytab to decrypt the KDC response instead of
prompting for a password. In this case, the default
principal will be <b>host/hostname</b>. If there is no
keytab specified with the <b>&minus;t</b> option, then the
default keytab will be used.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;t</b>
<i>keytab</i></p>

<p style="margin-left:22%;">Use <i>keytab</i> to decrypt
the KDC response. This can only be used with the
<b>&minus;k</b> option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Requests anonymous processing. Two types of anonymous
principals are supported. For fully anonymous Kerberos,
configure PKINIT on the KDC and configure
<b>pkinit_anchors</b> in the client's <i>krb5.conf(5)</i>.
Then use the <b>&minus;n</b> option with a principal of the
form <b>@REALM</b> (an empty principal name followed by the
at&minus;sign and a realm name). If permitted by the KDC, an
anonymous ticket will be returned. A second form of
anonymous tickets is supported; these realm&minus;exposed
tickets hide the identity of the client but not the client's
realm. For this mode, use <b>kinit &minus;n</b> with a
normal principal name. If supported by the KDC, the
principal (but not realm) will be replaced by the anonymous
principal. As of release 1.8, the MIT Kerberos KDC only
supports fully anonymous operation.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;c</b>
<i>credentials_cache</i></p>

<p style="margin-left:22%;">Use <i>credentials_cache</i> as
the credentials cache. The cache should contain a service
ticket for the <b>kadmin/ADMINHOST</b> (where
<i>ADMINHOST</i> is the fully&minus;qualified hostname of
the admin server) or <b>kadmin/admin</b> service; it can be
acquired with the <i>kinit(1)</i> program. If this option is
not specified, kadmin requests a new service ticket from the
KDC, and stores it in its own temporary ccache.</p>

<p style="margin-left:11%;"><b>&minus;w</b>
<i>password</i></p>

<p style="margin-left:22%;">Use <i>password</i> instead of
prompting for one. Use this option with care, as it may
expose the password to other users on the system via the
process list.</p>

<p style="margin-left:11%;"><b>&minus;q</b>
<i>query</i></p>

<p style="margin-left:22%;">Perform the specified query and
then exit. This can be useful for writing scripts.</p>

<p style="margin-left:11%;"><b>&minus;d</b>
<i>dbname</i></p>

<p style="margin-left:22%;">Specifies the name of the KDC
database. This option does not apply to the LDAP database
module.</p>

<p style="margin-left:11%;"><b>&minus;s</b>
<i>admin_server</i><b>[:</b><i>port</i><b>]</b></p>

<p style="margin-left:22%;">Specifies the admin server
which kadmin should contact.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If using kadmin.local, prompt for the database master
password instead of reading it from a stash file.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;e</b>
<i>enc</i><b>:</b><i>salt</i> <b>...</b></p>

<p style="margin-left:22%;">Sets the keysalt list to be
used for any new keys created. See <i>Keysalt_lists</i> in
<i>kdc.conf(5)</i> for a list of possible values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;O</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Force use of old AUTH_GSSAPI authentication flavor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Prevent fallback to AUTH_GSSAPI authentication
flavor.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;x</b>
<i>db_args</i></p>

<p style="margin-left:22%;">Specifies the database specific
arguments. See the next section for supported options.</p>

<h2>DATABASE OPTIONS
<a name="DATABASE OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Database
options can be used to override database&minus;specific
defaults. Supported options for the DB2 module are:</p>

<p style="margin-left:15%;"><b>&minus;x
dbname=*filename*</b></p>

<p style="margin-left:26%;">Specifies the base filename of
the DB2 database.</p>

<p style="margin-left:11%; margin-top: 1em">Supported
options for the LDAP module are:</p>

<p style="margin-left:15%;"><b>&minus;x
host=</b><i>ldapuri</i></p>

<p style="margin-left:26%;">Specifies the LDAP server to
connect to by a LDAP URI.</p>

<p style="margin-left:15%;"><b>&minus;x
binddn=</b><i>bind_dn</i></p>

<p style="margin-left:26%;">Specifies the DN used to bind
to the LDAP server.</p>

<p style="margin-left:15%;"><b>&minus;x
bindpwd=</b><i>bind_password</i></p>

<p style="margin-left:26%;">Specifies the password for the
above mentioned binddn. Using this option may expose the
password to other users on the system via the process list;
to avoid this, instead stash the password using the
<b>stashsrvpw</b> command of <i>kdb5_ldap_util(8)</i>.</p>

<p style="margin-left:15%;"><b>&minus;x
debug=</b><i>level</i></p>

<p style="margin-left:26%;">sets the OpenLDAP client
library debug level. <i>level</i> is an integer to be
interpreted by the library. Debugging messages are printed
to standard error. New in release 1.12.</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When using the
remote client, available commands may be restricted
according to the privileges specified in the
<i>kadm5.acl(5)</i> file on the admin server.</p>


<p style="margin-left:11%; margin-top: 1em"><b>add_principal</b></p>

<p style="margin-left:15%;"><b>add_principal</b>
[<i>options</i>] <i>newprinc</i></p>

<p style="margin-left:11%; margin-top: 1em">Creates the
principal <i>newprinc</i>, prompting twice for a password.
If no password policy is specified with the
<b>&minus;policy</b> option, and the policy named
<b>default</b> is assigned to the principal if it exists.
However, creating a policy named <b>default</b> will not
automatically assign this policy to previously existing
principals. This policy assignment can be suppressed with
the <b>&minus;clearpolicy</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>add</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Aliases:
<b>addprinc</b>, <b>ank</b></p>

<p style="margin-left:11%; margin-top: 1em">Options:
<b><br>
&minus;expire</b> <i>expdate</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) The
expiration date of the principal.</p>

<p style="margin-left:11%;"><b>&minus;pwexpire</b>
<i>pwexpdate</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) The
password expiration date.</p>

<p style="margin-left:11%;"><b>&minus;maxlife</b>
<i>maxlife</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) The
maximum ticket life for the principal.</p>

<p style="margin-left:11%;"><b>&minus;maxrenewlife</b>
<i>maxrenewlife</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) The
maximum renewable life of tickets for the principal.</p>

<p style="margin-left:11%;"><b>&minus;kvno</b>
<i>kvno</i></p>

<p style="margin-left:22%;">The initial key version
number.</p>

<p style="margin-left:11%;"><b>&minus;policy</b>
<i>policy</i></p>

<p style="margin-left:22%;">The password policy used by
this principal. If not specified, the policy <b>default</b>
is used if it exists (unless <b>&minus;clearpolicy</b> is
specified).</p>

<p style="margin-left:11%;"><b>&minus;clearpolicy</b></p>

<p style="margin-left:22%;">Prevents any policy from being
assigned when <b>&minus;policy</b> is not specified.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_postdated</b></p>

<p style="margin-left:22%;"><b>&minus;allow_postdated</b>
prohibits this principal from obtaining postdated tickets.
<b>+allow_postdated</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_forwardable</b></p>


<p style="margin-left:22%;"><b>&minus;allow_forwardable</b>
prohibits this principal from obtaining forwardable tickets.
<b>+allow_forwardable</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_renewable</b></p>

<p style="margin-left:22%;"><b>&minus;allow_renewable</b>
prohibits this principal from obtaining renewable tickets.
<b>+allow_renewable</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_proxiable</b></p>

<p style="margin-left:22%;"><b>&minus;allow_proxiable</b>
prohibits this principal from obtaining proxiable tickets.
<b>+allow_proxiable</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_dup_skey</b></p>

<p style="margin-left:22%;"><b>&minus;allow_dup_skey</b>
disables user&minus;to&minus;user authentication for this
principal by prohibiting this principal from obtaining a
session key for another user. <b>+allow_dup_skey</b> clears
this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}requires_preauth</b></p>

<p style="margin-left:22%;"><b>+requires_preauth</b>
requires this principal to preauthenticate before being
allowed to kinit. <b>&minus;requires_preauth</b> clears this
flag. When <b>+requires_preauth</b> is set on a service
principal, the KDC will only issue service tickets for that
service principal if the client's initial authentication was
performed using preauthentication.</p>


<p style="margin-left:11%;"><b>{&minus;|+}requires_hwauth</b></p>

<p style="margin-left:22%;"><b>+requires_hwauth</b>
requires this principal to preauthenticate using a hardware
device before being allowed to kinit.
<b>&minus;requires_hwauth</b> clears this flag. When
<b>+requires_hwauth</b> is set on a service principal, the
KDC will only issue service tickets for that service
principal if the client's initial authentication was
performed using a hardware device to preauthenticate.</p>


<p style="margin-left:11%;"><b>{&minus;|+}ok_as_delegate</b></p>

<p style="margin-left:22%;"><b>+ok_as_delegate</b> sets the
<b>okay as delegate</b> flag on tickets issued with this
principal as the service. Clients may use this flag as a
hint that credentials should be delegated when
authenticating to the service. <b>&minus;ok_as_delegate</b>
clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_svr</b></p>

<p style="margin-left:22%;"><b>&minus;allow_svr</b>
prohibits the issuance of service tickets for this
principal. <b>+allow_svr</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_tgs_req</b></p>

<p style="margin-left:22%;"><b>&minus;allow_tgs_req</b>
specifies that a Ticket&minus;Granting Service (TGS) request
for a service ticket for this principal is not permitted.
<b>+allow_tgs_req</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}allow_tix</b></p>

<p style="margin-left:22%;"><b>&minus;allow_tix</b> forbids
the issuance of any tickets for this principal.
<b>+allow_tix</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}needchange</b></p>

<p style="margin-left:22%;"><b>+needchange</b> forces a
password change on the next initial authentication to this
principal. <b>&minus;needchange</b> clears this flag.</p>


<p style="margin-left:11%;"><b>{&minus;|+}password_changing_service</b></p>


<p style="margin-left:22%;"><b>+password_changing_service</b>
marks this principal as a password change service
principal.</p>


<p style="margin-left:11%;"><b>{&minus;|+}ok_to_auth_as_delegate</b></p>

<p style="margin-left:22%;"><b>+ok_to_auth_as_delegate</b>
allows this principal to acquire forwardable tickets to
itself from arbitrary users, for use with constrained
delegation.</p>


<p style="margin-left:11%;"><b>{&minus;|+}no_auth_data_required</b></p>

<p style="margin-left:22%;"><b>+no_auth_data_required</b>
prevents PAC or AD&minus;SIGNEDPATH data from being added to
service tickets for the principal.</p>

<p style="margin-left:11%;"><b>&minus;randkey</b></p>

<p style="margin-left:22%;">Sets the key of the principal
to a random value.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;nokey</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Causes the principal to be created with no key. New in
release 1.12.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;pw</b>
<i>password</i></p>

<p style="margin-left:22%;">Sets the password of the
principal to the specified string and does not prompt for a
password. Note: using this option in a shell script may
expose the password to other users on the system via the
process list.</p>

<p style="margin-left:11%;"><b>&minus;e</b>
<i>enc</i><b>:</b><i>salt</i><b>,...</b></p>

<p style="margin-left:22%;">Uses the specified keysalt list
for setting the keys of the principal. See
<i>Keysalt_lists</i> in <i>kdc.conf(5)</i> for a list of
possible values.</p>

<p style="margin-left:11%;"><b>&minus;x</b>
<i>db_princ_args</i></p>

<p style="margin-left:22%;">Indicates
database&minus;specific options. The options for the LDAP
database module are: <b><br>
&minus;x dn=</b><i>dn</i></p>

<p style="margin-left:32%;">Specifies the LDAP object that
will contain the Kerberos principal being created.</p>

<p style="margin-left:22%;"><b>&minus;x
linkdn=</b><i>dn</i></p>

<p style="margin-left:32%;">Specifies the LDAP object to
which the newly created Kerberos principal object will
point.</p>

<p style="margin-left:22%;"><b>&minus;x
containerdn=</b><i>container_dn</i></p>

<p style="margin-left:32%;">Specifies the container object
under which the Kerberos principal is to be created.</p>

<p style="margin-left:22%;"><b>&minus;x
tktpolicy=</b><i>policy</i></p>

<p style="margin-left:32%;">Associates a ticket policy to
the Kerberos principal.</p>


<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="71%">


<p>The <b>containerdn</b> and <b>linkdn</b> options cannot
be specified with the <b>dn</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="71%">


<p>If the <i>dn</i> or <i>containerdn</i> options are not
specified while adding the principal, the principals are
created under the principal container configured in the
realm or the realm container.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="71%">


<p><i>dn</i> and <i>containerdn</i> should be within the
subtrees or principal container configured in the realm.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: addprinc jennifer
WARNING: no policy specified for &quot;jennifer@ATHENA.MIT.EDU&quot;;
defaulting to no policy.
Enter password for principal jennifer@ATHENA.MIT.EDU:
Re&minus;enter password for principal jennifer@ATHENA.MIT.EDU:
Principal &quot;jennifer@ATHENA.MIT.EDU&quot; created.
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>modify_principal</b></p>

<p style="margin-left:15%;"><b>modify_principal</b>
[<i>options</i>] <i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Modifies the
specified principal, changing the fields as specified. The
options to <b>add_principal</b> also apply to this command,
except for the <b>&minus;randkey</b>, <b>&minus;pw</b>, and
<b>&minus;e</b> options. In addition, the option
<b>&minus;clearpolicy</b> will clear the current policy of a
principal.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <i>modify</i> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>modprinc</b></p>

<p style="margin-left:11%; margin-top: 1em">Options (in
addition to the <b>addprinc</b> options): <b><br>
&minus;unlock</b></p>

<p style="margin-left:22%;">Unlocks a locked principal (one
which has received too many failed authentication attempts
without enough time between them according to its password
policy) so that it can successfully authenticate.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rename_principal</b></p>

<p style="margin-left:15%;"><b>rename_principal</b>
[<b>&minus;force</b>] <i>old_principal new_principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Renames the
specified <i>old_principal</i> to <i>new_principal</i>. This
command prompts for confirmation, unless the
<b>&minus;force</b> option is given.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>add</b> and <b>delete</b> privileges.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>renprinc</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>delete_principal</b></p>

<p style="margin-left:15%;"><b>delete_principal</b>
[<b>&minus;force</b>] <i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Deletes the
specified <i>principal</i> from the database. This command
prompts for deletion, unless the <b>&minus;force</b> option
is given.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>delete</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>delprinc</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>change_password</b></p>

<p style="margin-left:15%;"><b>change_password</b>
[<i>options</i>] <i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Changes the
password of <i>principal</i>. Prompts for a new password if
neither <b>&minus;randkey</b> or <b>&minus;pw</b> is
specified.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>changepw</b> privilege, or that the
principal running the program is the same as the principal
being changed.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>cpw</b></p>

<p style="margin-left:11%; margin-top: 1em">The following
options are available: <b><br>
&minus;randkey</b></p>

<p style="margin-left:22%;">Sets the key of the principal
to a random value.</p>

<p style="margin-left:11%;"><b>&minus;pw</b>
<i>password</i></p>

<p style="margin-left:22%;">Set the password to the
specified string. Using this option in a script may expose
the password to other users on the system via the process
list.</p>

<p style="margin-left:11%;"><b>&minus;e</b>
<i>enc</i><b>:</b><i>salt</i><b>,...</b></p>

<p style="margin-left:22%;">Uses the specified keysalt list
for setting the keys of the principal. See
<i>Keysalt_lists</i> in <i>kdc.conf(5)</i> for a list of
possible values.</p>

<p style="margin-left:11%;"><b>&minus;keepold</b></p>

<p style="margin-left:22%;">Keeps the existing keys in the
database. This flag is usually not necessary except perhaps
for <b>krbtgt</b> principals.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: cpw systest
Enter password for principal systest@BLEEP.COM:
Re&minus;enter password for principal systest@BLEEP.COM:
Password for systest@BLEEP.COM changed.
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>purgekeys</b></p>

<p style="margin-left:15%;"><b>purgekeys</b>
[<b>&minus;all</b>|<b>&minus;keepkvno</b>
<i>oldest_kvno_to_keep</i>] <i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Purges
previously retained old keys (e.g., from <b>change_password
&minus;keepold</b>) from <i>principal</i>. If
<b>&minus;keepkvno</b> is specified, then only purges keys
with kvnos lower than <i>oldest_kvno_to_keep</i>. If
<b>&minus;all</b> is specified, then all keys are purged.
The <b>&minus;all</b> option is new in release 1.12.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>modify</b> privilege.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get_principal</b></p>

<p style="margin-left:15%;"><b>get_principal</b>
[<b>&minus;terse</b>] <i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Gets the
attributes of principal. With the <b>&minus;terse</b>
option, outputs fields as quoted tab&minus;separated
strings.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>inquire</b> privilege, or that the principal
running the the program to be the same as the one being
listed.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>getprinc</b></p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>
<pre style="margin-left:15%; margin-top: 1em">kadmin: getprinc tlyu/admin
Principal: tlyu/admin@BLEEP.COM
Expiration date: [never]
Last password change: Mon Aug 12 14:16:47 EDT 1996
Password expiration date: [none]
Maximum ticket life: 0 days 10:00:00
Maximum renewable life: 7 days 00:00:00
Last modified: Mon Aug 12 14:16:47 EDT 1996 (bjaspan/admin@BLEEP.COM)
Last successful authentication: [never]
Last failed authentication: [never]
Failed password attempts: 0
Number of keys: 2
Key: vno 1, des&minus;cbc&minus;crc, no salt
Key: vno 1, des&minus;cbc&minus;crc, Version 4
Attributes:
Policy: [none]


kadmin: getprinc &minus;terse systest
systest@BLEEP.COM   3    86400     604800    1
785926535 753241234 785900000
tlyu/admin@BLEEP.COM     786100034 0    0
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>list_principals</b></p>

<p style="margin-left:15%;"><b>list_principals</b>
[<i>expression</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Retrieves all
or some principal names. <i>expression</i> is a
shell&minus;style glob expression that can contain the
wild&minus;card characters <b>?</b>, <b>*</b>, and
<b>[]</b>. All principal names matching the expression are
printed. If no expression is provided, all principal names
are printed. If the expression does not contain an <b>@</b>
character, an <b>@</b> character followed by the local realm
is appended to the expression.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>list</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>listprincs</b>, <b>get_principals</b>,
<b>get_princs</b></p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin:  listprincs test*
test3@SECURE&minus;TEST.OV.COM
test2@SECURE&minus;TEST.OV.COM
test1@SECURE&minus;TEST.OV.COM
testuser@SECURE&minus;TEST.OV.COM
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>get_strings</b></p>

<p style="margin-left:15%;"><b>get_strings</b>
<i>principal</i></p>

<p style="margin-left:11%; margin-top: 1em">Displays string
attributes on <i>principal</i>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>inquire</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>getstr</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>set_string</b></p>

<p style="margin-left:15%;"><b>set_string</b> <i>principal
key value</i></p>

<p style="margin-left:11%; margin-top: 1em">Sets a string
attribute on <i>principal</i>. String attributes are used to
supply per&minus;principal configuration to the KDC and some
KDC plugin modules. The following string attributes are
recognized by the KDC: <b><br>
session_enctypes</b></p>

<p style="margin-left:22%;">Specifies the encryption types
supported for session keys when the principal is
authenticated to as a server. See <i>Encryption_types</i> in
<i>kdc.conf(5)</i> for a list of the accepted values.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>modify</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>setstr</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>del_string</b></p>

<p style="margin-left:15%;"><b>del_string</b> <i>principal
key</i></p>

<p style="margin-left:11%; margin-top: 1em">Deletes a
string attribute from <i>principal</i>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>delete</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>delstr</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>add_policy</b></p>

<p style="margin-left:15%;"><b>add_policy</b>
[<i>options</i>] <i>policy</i></p>

<p style="margin-left:11%; margin-top: 1em">Adds a password
policy named <i>policy</i> to the database.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>add</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>addpol</b></p>

<p style="margin-left:11%; margin-top: 1em">The following
options are available: <b><br>
&minus;maxlife</b> <i>time</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) Sets
the maximum lifetime of a password.</p>

<p style="margin-left:11%;"><b>&minus;minlife</b>
<i>time</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) Sets
the minimum lifetime of a password.</p>

<p style="margin-left:11%;"><b>&minus;minlength</b>
<i>length</i></p>

<p style="margin-left:22%;">Sets the minimum length of a
password.</p>

<p style="margin-left:11%;"><b>&minus;minclasses</b>
<i>number</i></p>

<p style="margin-left:22%;">Sets the minimum number of
character classes required in a password. The five character
classes are lower case, upper case, numbers, punctuation,
and whitespace/unprintable characters.</p>

<p style="margin-left:11%;"><b>&minus;history</b>
<i>number</i></p>

<p style="margin-left:22%;">Sets the number of past keys
kept for a principal. This option is not supported with the
LDAP KDC database module.</p>

<p style="margin-left:11%;"><b>&minus;maxfailure</b>
<i>maxnumber</i></p>

<p style="margin-left:22%;">Sets the number of
authentication failures before the principal is locked.
Authentication failures are only tracked for principals
which require preauthentication. The counter of failed
attempts resets to 0 after a successful attempt to
authenticate. A <i>maxnumber</i> value of 0 (the default)
disables lockout.</p>


<p style="margin-left:11%;"><b>&minus;failurecountinterval</b>
<i>failuretime</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) Sets
the allowable time between authentication failures. If an
authentication failure happens after <i>failuretime</i> has
elapsed since the previous failure, the number of
authentication failures is reset to 1. A <i>failuretime</i>
value of 0 (the default) means forever.</p>

<p style="margin-left:11%;"><b>&minus;lockoutduration</b>
<i>lockouttime</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string) Sets
the duration for which the principal is locked from
authenticating if too many authentication failures occur
without the specified failure count interval elapsing. A
duration of 0 (the default) means the principal remains
locked out until it is administratively unlocked with
<b>modprinc &minus;unlock</b>.</p>


<p style="margin-left:11%;"><b>&minus;allowedkeysalts</b></p>

<p style="margin-left:22%;">Specifies the key/salt tuples
supported for long&minus;term keys when setting or changing
a principal's password/keys. See <i>Keysalt_lists</i> in
<i>kdc.conf(5)</i> for a list of the accepted values, but
note that key/salt tuples must be separated with commas
(',') only. To clear the allowed key/salt policy use a value
of '&minus;'.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: add_policy &minus;maxlife &quot;2 days&quot; &minus;minlength 5 guests
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>modify_policy</b></p>

<p style="margin-left:15%;"><b>modify_policy</b>
[<i>options</i>] <i>policy</i></p>

<p style="margin-left:11%; margin-top: 1em">Modifies the
password policy named <i>policy</i>. Options are as
described for <b>add_policy</b>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>modify</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>modpol</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>delete_policy</b></p>

<p style="margin-left:15%;"><b>delete_policy</b>
[<b>&minus;force</b>] <i>policy</i></p>

<p style="margin-left:11%; margin-top: 1em">Deletes the
password policy named <i>policy</i>. Prompts for
confirmation before deletion. The command will fail if the
policy is in use by any principals.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>delete</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
<b>delpol</b></p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: del_policy guests
Are you sure you want to delete the policy &quot;guests&quot;?
(yes/no): yes
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>get_policy</b></p>

<p style="margin-left:15%;"><b>get_policy</b> [
<b>&minus;terse</b> ] <i>policy</i></p>

<p style="margin-left:11%; margin-top: 1em">Displays the
values of the password policy named <i>policy</i>. With the
<b>&minus;terse</b> flag, outputs the fields as quoted
strings separated by tabs.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>inquire</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Alias:
getpol</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>
<pre style="margin-left:15%; margin-top: 1em">kadmin: get_policy admin
Policy: admin
Maximum password life: 180 days 00:00:00
Minimum password life: 00:00:00
Minimum password length: 6
Minimum number of password character classes: 2
Number of old keys kept: 5
Reference count: 17


kadmin: get_policy &minus;terse admin
admin     15552000  0    6    2    5    17
kadmin:</pre>


<p style="margin-left:11%; margin-top: 1em">The
&quot;Reference count&quot; is the number of principals
using that policy. With the LDAP KDC database module, the
reference count field is not meaningful.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list_policies</b></p>

<p style="margin-left:15%;"><b>list_policies</b>
[<i>expression</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Retrieves all
or some policy names. <i>expression</i> is a
shell&minus;style glob expression that can contain the
wild&minus;card characters <b>?</b>, <b>*</b>, and
<b>[]</b>. All policy names matching the expression are
printed. If no expression is provided, all existing policy
names are printed.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>list</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">Aliases:
<b>listpols</b>, <b>get_policies</b>, <b>getpols</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>
<pre style="margin-left:15%; margin-top: 1em">kadmin:  listpols
test&minus;pol
dict&minus;only
once&minus;a&minus;min
test&minus;pol&minus;nopw


kadmin:  listpols t*
test&minus;pol
test&minus;pol&minus;nopw
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>ktadd</b></p>

<p style="margin-left:15%;"><b>ktadd</b> [options]
<i>principal</i> <b><br>
ktadd</b> [options] <b>&minus;glob</b>
<i>princ&minus;exp</i></p>

<p style="margin-left:11%; margin-top: 1em">Adds a
<i>principal</i>, or all principals matching
<i>princ&minus;exp</i>, to a keytab file. Each principal's
keys are randomized in the process. The rules for
<i>princ&minus;exp</i> are described in the
<b>list_principals</b> command.</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the <b>inquire</b> and <b>changepw</b> privileges.
With the <b>&minus;glob</b> form, it also requires the
<b>list</b> privilege.</p>

<p style="margin-left:11%; margin-top: 1em">The options
are: <b><br>
&minus;k[eytab]</b> <i>keytab</i></p>

<p style="margin-left:22%;">Use <i>keytab</i> as the keytab
file. Otherwise, the default keytab is used.</p>

<p style="margin-left:11%;"><b>&minus;e</b>
<i>enc</i><b>:</b><i>salt</i><b>,...</b></p>

<p style="margin-left:22%;">Uses the specified keysalt list
for setting the new keys of the principal. See
<i>Keysalt_lists</i> in <i>kdc.conf(5)</i> for a list of
possible values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="8%"></td>
<td width="50%">


<p>Display less verbose information.</p></td>
<td width="28%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;norandkey</b></p>

<p style="margin-left:22%;">Do not randomize the keys. The
keys and their version numbers stay unchanged. This option
is only available in kadmin.local, and cannot be specified
in combination with the <b>&minus;e</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">An entry for
each of the principal's unique encryption types is added,
ignoring multiple keys with the same encryption type but
different salt types.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: ktadd &minus;k /tmp/foo&minus;new&minus;keytab host/foo.mit.edu
Entry for principal host/foo.mit.edu@ATHENA.MIT.EDU with kvno 3,
     encryption type aes256&minus;cts&minus;hmac&minus;sha1&minus;96 added to keytab
     FILE:/tmp/foo&minus;new&minus;keytab
kadmin:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>ktremove</b></p>

<p style="margin-left:15%;"><b>ktremove</b> [options]
<i>principal</i> [<i>kvno</i> | <i>all</i> | <i>old</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Removes entries
for the specified <i>principal</i> from a keytab. Requires
no permissions, since this does not require database
access.</p>

<p style="margin-left:11%; margin-top: 1em">If the string
&quot;all&quot; is specified, all entries for that principal
are removed; if the string &quot;old&quot; is specified, all
entries for that principal except those with the highest
kvno are removed. Otherwise, the value specified is parsed
as an integer, and all entries whose kvno match that integer
are removed.</p>

<p style="margin-left:11%; margin-top: 1em">The options
are: <b><br>
&minus;k[eytab]</b> <i>keytab</i></p>

<p style="margin-left:22%;">Use <i>keytab</i> as the keytab
file. Otherwise, the default keytab is used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="8%"></td>
<td width="50%">


<p>Display less verbose information.</p></td>
<td width="28%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin: ktremove kadmin/admin all
Entry for principal kadmin/admin with kvno 3 removed from keytab
     FILE:/etc/krb5.keytab
kadmin:</pre>


<p style="margin-left:11%; margin-top: 1em"><b>lock</b>
<br>
Lock database exclusively. Use with extreme caution! This
command only works with the DB2 KDC database module.</p>

<p style="margin-left:11%; margin-top: 1em"><b>unlock</b>
<br>
Release the exclusive database lock.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list_requests</b>
<br>
Lists available for kadmin requests.</p>

<p style="margin-left:11%; margin-top: 1em">Aliases:
<b>lr</b>, <b>?</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>quit</b>
<br>
Exit program. If the database was locked, the lock is
released.</p>

<p style="margin-left:11%; margin-top: 1em">Aliases:
<b>exit</b>, <b>q</b></p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The kadmin
program was originally written by Tom Yu at MIT, as an
interface to the OpenVision Kerberos administration
program.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>kpasswd(1)</i>,
<i>kadmind(8)</i></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">MIT</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1985-2014,
MIT</p>
<hr>
</body>
</html>
