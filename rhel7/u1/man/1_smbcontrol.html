<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:27:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMBCONTROL</title>

</head>
<body>

<h1 align="center">SMBCONTROL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#MESSAGE-TYPES">MESSAGE-TYPES</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">smbcontrol
&minus; send messages to smbd, nmbd or winbindd
processes</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="78%">


<p style="margin-top: 1em">smbcontrol [&minus;s]
[&minus;t|&minus;&minus;timeout]</p> </td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="78%">


<p style="margin-top: 1em">smbcontrol [destination]
[message&minus;type] [parameter]</p></td>
<td width="11%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This tool is
part of the <b>samba</b>(7) suite.</p>

<p style="margin-left:11%; margin-top: 1em">smbcontrol is a
very small program, which sends messages to a
<b>smbd</b>(8), a <b>nmbd</b>(8), or a <b>winbindd</b>(8)
daemon running on the system.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&minus;?|&minus;&minus;help</p>

<p style="margin-left:17%;">Print a summary of command line
options.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;usage</p>

<p style="margin-left:17%;">Display brief usage
message.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;s|&minus;&minus;configfile=&lt;configuration
file&gt;</p>

<p style="margin-left:17%;">The file specified contains the
configuration details required by the server. The
information in this file includes server&minus;specific
information such as what printcap file to use, as well as
descriptions of all the services that the server is to
provide. See smb.conf for more information. The default
configuration file name is determined at compile time.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;d|&minus;&minus;debuglevel=level</p>

<p style="margin-left:17%;"><i>level</i> is an integer from
0 to 10. The default value if this parameter is not
specified is 1.</p>

<p style="margin-left:17%; margin-top: 1em">The higher this
value, the more detail will be logged to the log files about
the activities of the server. At level 0, only critical
errors and serious warnings will be logged. Level 1 is a
reasonable level for day&minus;to&minus;day running &minus;
it generates a small amount of information about operations
carried out.</p>

<p style="margin-left:17%; margin-top: 1em">Levels above 1
will generate considerable amounts of log data, and should
only be used when investigating a problem. Levels above 3
are designed for use only by developers and generate HUGE
amounts of log data, most of which is extremely cryptic.</p>

<p style="margin-left:17%; margin-top: 1em">Note that
specifying this parameter here will override the
<b><font color="#0000FF">log level</font></b>
<font color="#000000">parameter in the smb.conf
file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;V|&minus;&minus;version</font></p>

<p style="margin-left:17%;"><font color="#000000">Prints
the program version number.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;s|&minus;&minus;configfile=&lt;configuration
file&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">The file
specified contains the configuration details required by the
server. The information in this file includes
server&minus;specific information such as what printcap file
to use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at compile
time.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;l|&minus;&minus;log&minus;basename=logdirectory</font></p>

<p style="margin-left:17%;"><font color="#000000">Base
directory name for log/debug files. The extension
<b>&quot;.progname&quot;</b> will be appended (e.g.
log.smbclient, log.smbd, etc...). The log file is never
removed by the client.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;option=&lt;name&gt;=&lt;value&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">Set the
<b>smb.conf</b>(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled&minus;in defaults and options read from
the configuration file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;t|&minus;&minus;timeout</font></p>

<p style="margin-left:17%;"><font color="#000000">Set
timeout to seconds.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">destination</font></p>

<p style="margin-left:17%;"><font color="#000000">One of
<i>nmbd</i>, <i>smbd</i> or a process ID.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
<i>all</i> destination causes the message to
&quot;broadcast&quot; to all running daemons including nmbd
and winbind. This is a change for Samba 3.3, prior to this
the parameter smbd used to do this.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
<i>smbd</i> destination causes the message to be sent to the
smbd daemon specified in the smbd.pid file.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
<i>nmbd</i> destination causes the message to be sent to the
nmbd daemon specified in the nmbd.pid file.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
<i>winbindd</i> destination causes the message to be sent to
the winbind daemon specified in the winbindd.pid
file.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
a single process ID is given, the message is sent to only
that process.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">message&minus;type</font></p>

<p style="margin-left:17%;"><font color="#000000">Type of
message to send. See the section <b>MESSAGE&minus;TYPES</b>
for details.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">parameters</font></p>

<p style="margin-left:17%;"><font color="#000000">any
parameters required for the message&minus;type</font></p>

<h2>MESSAGE-TYPES
<a name="MESSAGE-TYPES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Available
message types are:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">close&minus;share</font></p>

<p style="margin-left:17%;"><font color="#000000">Order
smbd to close the client connections to the named share.
Note that this doesn't affect client connections to any
other shares. This message&minus;type takes an argument of
the share name for which client connections will be closed,
or the &quot;*&quot; character which will close all
currently open shares. This may be useful if you made
changes to the access controls on the share. This message
can only be sent to <b>smbd</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">debug</font></p>

<p style="margin-left:17%;"><font color="#000000">Set debug
level to the value specified by the parameter. This can be
sent to any of the destinations. If this message is sent to
either the smbd or winbindd daemons, the parent process will
rebroadcast the message to all child processes changing the
debug level in each one.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">force&minus;election</font></p>

<p style="margin-left:17%;"><font color="#000000">This
message causes the nmbd daemon to force a new browse master
election.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ping</font></p>

<p style="margin-left:17%;"><font color="#000000">Send
specified number of &quot;ping&quot; messages and wait for
the same number of reply &quot;pong&quot; messages. This can
be sent to any of the destinations.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">profile</font></p>

<p style="margin-left:17%;"><font color="#000000">Change
profile settings of a daemon, based on the parameter. The
parameter can be &quot;on&quot; to turn on profile stats
collection, &quot;off&quot; to turn off profile stats
collection, &quot;count&quot; to enable only collection of
count stats (time stats are disabled), and &quot;flush&quot;
to zero the current profile stats. This can be sent to any
smbd or nmbd destinations.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">debuglevel</font></p>

<p style="margin-left:17%;"><font color="#000000">Request
debuglevel of a certain daemon and write it to stdout. This
can be sent to any of the destinations.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">profilelevel</font></p>

<p style="margin-left:17%;"><font color="#000000">Request
profilelevel of a certain daemon and write it to stdout.
This can be sent to any smbd or nmbd
destinations.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">printnotify</font></p>

<p style="margin-left:17%;"><font color="#000000">Order
smbd to send a printer notify message to any Windows NT
clients connected to a printer. This message&minus;type
takes the following arguments:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">queuepause
printername</font></p>

<p style="margin-left:23%;"><font color="#000000">Send a
queue pause change notify message to the printer
specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">queueresume
printername</font></p>

<p style="margin-left:23%;"><font color="#000000">Send a
queue resume change notify message for the printer
specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">jobpause
printername unixjobid</font></p>

<p style="margin-left:23%;"><font color="#000000">Send a
job pause change notify message for the printer and unix
jobid specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">jobresume
printername unixjobid</font></p>

<p style="margin-left:23%;"><font color="#000000">Send a
job resume change notify message for the printer and unix
jobid specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">jobdelete
printername unixjobid</font></p>

<p style="margin-left:23%;"><font color="#000000">Send a
job delete change notify message for the printer and unix
jobid specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this message only sends notification that an event has
occurred. It doesn't actually cause the event to
happen.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
message can only be sent to <b>smbd</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">dmalloc&minus;mark</font></p>

<p style="margin-left:17%;"><font color="#000000">Set a
mark for dmalloc. Can be sent to both smbd and nmbd. Only
available if samba is built with dmalloc support.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">dmalloc&minus;log&minus;changed</font></p>

<p style="margin-left:17%;"><font color="#000000">Dump the
pointers that have changed since the mark set by
dmalloc&minus;mark. Can be sent to both smbd and nmbd. Only
available if samba is built with dmalloc support.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">shutdown</font></p>

<p style="margin-left:17%;"><font color="#000000">Shut down
specified daemon. Can be sent to both smbd and
nmbd.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">pool&minus;usage</font></p>

<p style="margin-left:17%;"><font color="#000000">Print a
human&minus;readable description of all talloc(pool) memory
usage by the specified daemon/process. Available for both
smbd and nmbd.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">drvupgrade</font></p>

<p style="margin-left:17%;"><font color="#000000">Force
clients of printers using specified driver to update their
local version of the driver. Can only be sent to
smbd.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">reload&minus;config</font></p>

<p style="margin-left:17%;"><font color="#000000">Force
daemon to reload smb.conf configuration file. Can be sent to
<b>smbd</b>, <b>nmbd</b>, or <b>winbindd</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">reload&minus;printers</font></p>

<p style="margin-left:17%;"><font color="#000000">Force
smbd to reload printers. Can only be sent to
<b>smbd</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">idmap</font></p>

<p style="margin-left:17%;"><font color="#000000">Notify
about changes of id mapping. Can be sent to <b>smbd</b> or
(not implemented yet) <b>winbindd</b>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">flush
[uid|gid]</font></p>

<p style="margin-left:23%;"><font color="#000000">Flush
caches for sid &lt;&minus;&gt; gid and/or sid
&lt;&minus;&gt; uid mapping.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">delete
&lt;ID&gt;</font></p>

<p style="margin-left:23%;"><font color="#000000">Remove a
mapping from cache. The mapping is given by &lt;ID&gt; which
may either be a sid: S&minus;x&minus;..., a gid: &quot;GID
number&quot; or a uid: &quot;UID number&quot;.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">kill
&lt;ID&gt;</font></p>

<p style="margin-left:23%;"><font color="#000000">Remove a
mapping from cache. Terminate <b>smbd</b> if the id is
currently in use.</font></p>

<h2>VERSION
<a name="VERSION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
man page is correct for version 3 of the Samba
suite.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>nmbd</b>(8)
and <b>smbd</b>(8).</font></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba software and related utilities were created
by Andrew Tridgell. Samba is now developed by the Samba Team
as an Open Source project similar to the way the Linux
kernel is developed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba man pages were written by Karl Auer. The man
page sources were converted to YODL format (another
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba
2.0 release by Jeremy Allison. The conversion to DocBook for
Samba 2.2 was done by Gerald Carter. The conversion to
DocBook XML 4.2 for Samba 3.0 was done by Alexander
Bokovoy.</font></p>
<hr>
</body>
</html>
