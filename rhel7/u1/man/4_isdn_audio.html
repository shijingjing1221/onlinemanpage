<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:57:38 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>isdn_audio</title>

</head>
<body>

<h1 align="center">isdn_audio</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AUDIO RELATED AT COMMAND SET">AUDIO RELATED AT COMMAND SET</a><br>
<a href="#GENERAL BEHAVIOUR">GENERAL BEHAVIOUR</a><br>
<a href="#AUDIO DATA FORMAT">AUDIO DATA FORMAT</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">isdn_audio
&minus; audio extension of ttyI ISDN character devices</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes the audio related extensions of the modem
emulation, provided by <i>/dev/ttyIx</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>ISDN</small> tty devices are equipped with a modem
emulation implementing a set of traditional and some special
AT commands. This provides easy use together with almost all
communication software that uses modem commands:
<b>minicom</b>(1), <b>seyon</b>(1), <b>XCept</b>(1),
<b>uucico</b>(8), <b>mgetty</b>(8), <b>dip</b>(8),
<b>pppd</b>(8) and more. When enabled during kernel
configuration, the emulator is capable of a reduced set of
commands to support audio. To use audio features, an
<small>ISDN</small> card with a audio-capable low-level
driver is needed. Currently the only audio-capable drivers
are the teles and HiSax driver.</p>

<p style="margin-left:11%; margin-top: 1em">The port speed
of the <small>ISDN</small> tty devices is always 64000
bps.</p>

<h2>AUDIO RELATED AT COMMAND SET
<a name="AUDIO RELATED AT COMMAND SET"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This
description does <b>not</b> include the standard AT command
set. For a description of the standard AT command set,
provided by the Linux <small>ISDN</small> subsystem, see
<b>ttyI</b>(4). All commands starting with <b>AT+</b> except
<b>AT+FCLASS</b> are enabled only, if audio mode is active.
The following <b>audio related AT commands</b> are supported
by <small>ISDN</small> tty devices: <b><br>
AT+FCLASS=0</b></p>

<p style="margin-left:22%;">Disable audio mode (default).
This command sets register <i>18</i> to <i>4</i>.</p>

<p style="margin-left:11%;"><b>AT+FCLASS=8</b></p>

<p style="margin-left:22%;">Enable audio mode. This command
sets register <i>18</i> to <i>5</i>.</p>

<p style="margin-left:11%;"><b>AT+FCLASS=?</b></p>

<p style="margin-left:22%;">Show possible modes.</p>

<p style="margin-left:11%;"><b>AT+FCLASS?</b></p>

<p style="margin-left:22%;">Show current mode.</p>

<p style="margin-left:11%;"><b>AT+VNH=</b><i>x</i></p>

<p style="margin-left:22%;">No function, provided for
compatibility only.</p>

<p style="margin-left:11%;"><b>AT+VNH=?</b></p>

<p style="margin-left:22%;">Always showing
&quot;1&quot;.</p>

<p style="margin-left:11%;"><b>AT+VNH?</b></p>

<p style="margin-left:22%;">Always showing
&quot;1&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>AT+VIP</b></p></td>
<td width="2%"></td>
<td width="41%">


<p>Reset all audio parameters.</p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>AT+VLS=</b><i>x</i></p>

<p style="margin-left:22%;">Select line <i>x</i>, where
<i>x</i> is one of the following: <br>
0 = No device. <br>
2 = Phone line.</p>

<p style="margin-left:11%;"><b>AT+VLS=?</b></p>

<p style="margin-left:22%;">Always showing
&quot;0,2&quot;.</p>

<p style="margin-left:11%;"><b>AT+VLS?</b></p>

<p style="margin-left:22%;">Show current line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>AT+VRX</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Start audio recording. See below for more
information.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>AT+VSD=</b><i>x</i><b>,</b><i>y</i></p>

<p style="margin-left:22%;">Set silence-detection
parameters. <br>
Possible parameters: <i><br>
x</i> = 0 ... 31 sensitivity threshold level. <br>
(default 0 , deactivated) <i><br>
y</i> = 0 ... 255 range of interval in units of 0.1 second.
(default 70)</p>

<p style="margin-left:11%;"><b>AT+VSD=?</b></p>

<p style="margin-left:22%;">Show possible parameters.</p>

<p style="margin-left:11%;"><b>AT+VSD?</b></p>

<p style="margin-left:22%;">Show current parameters.</p>

<p style="margin-left:11%;"><b>AT+VSM=</b><i>x</i></p>

<p style="margin-left:22%;">Select audio data format to
<i>x</i>, where <i>x</i> is: <br>
2 = ADPCM-2 <br>
3 = ADPCM-3 <br>
4 = ADPCM-4 <br>
5 = aLAW <br>
6 = uLAW</p>

<p style="margin-left:11%;"><b>AT+VSM=?</b></p>

<p style="margin-left:22%;">Show possible audio data
formats.</p>

<p style="margin-left:11%;"><b>AT+VSM?</b></p>

<p style="margin-left:22%;">Show current audio data
format.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>AT+VTX</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Start audio playback. See below for more
information.</p> </td></tr>
</table>

<h2>GENERAL BEHAVIOUR
<a name="GENERAL BEHAVIOUR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On incoming
calls, if the application responds to a <b>RING</b> by
sending <b>ATA</b>, depending on the calling service, the
emulator responds with either <b>CONNECT</b> (data call) or
<b>VCON</b> (voice call).</p>

<p style="margin-left:11%; margin-top: 1em">When starting
audio playback or recording, the emulator responds with
<b>CONNECT</b>. After that, the data transfer protocol
described below is used. It is possible to initiate full
duplex data transfer by issuing <b>AT+VRX+VTX</b> in a
<b>single</b> command. In this case, <b>no</b> CONNECT
message is sent to the application and the protocol
described below is started immediately.</p>

<p style="margin-left:11%; margin-top: 1em">When stopping
audio playback or recording, the message returned by the
emulator depends on how the data transfer is stopped. If the
data transfer is stopped by a remote hangup, <b>NO
CARRIER</b> is sent to the application, while stopping data
transfer with one of the DLE sequences, <b>VCON</b> is sent.
In any case, the message is preceded by the appropriate DLE
sequence for end of audio data and/or abort
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">On outgoing
voice calls, the emulator responds with <b>VCON</b> upon
connection setup.</p>

<h2>AUDIO DATA FORMAT
<a name="AUDIO DATA FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When recording
or playing back audio data, a kind of modified bisync
protocol is used. When recording audio data, the modem
emulator is considered to be the <b>sender</b>, while the
application is the <b>receiver</b>. When playing back, this
relationship is reversed: The modem emulator acts as
<b>receiver</b>, while the application is the <b>sender</b>.
With the bisync protocol the character <b>DLE</b> (0x10) has
a special meaning and is used like an escape character. It
is always followed by a second character which has the
following meanings defined: <b><br>
ETX</b> (0x03)</p>

<p style="margin-left:22%;">End of audio data. This code
has to be sent by the <b>sender</b>, indicating end of audio
data.</p>

<p style="margin-left:11%;"><b>DC4</b> (0x14)</p>

<p style="margin-left:22%;">Abort sending. This code has to
be sent by the <b>receiver</b>, when it wishes to abort
receiving data. The <b>sender</b> has to reply by stop
sending data and finally indicating end of audio data.</p>

<p style="margin-left:11%;"><b>DLE</b> (0x10)</p>

<p style="margin-left:22%;">a single byte with value 0x10
in the data stream.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>0</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;0&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>1</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;1&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>2</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;2&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>3</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;3&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>4</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;4&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>5</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;5&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>6</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;6&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>7</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;7&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>8</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;8&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>9</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;9&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>#</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;#&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>*</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;*&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>A</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;A&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>B</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;B&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>C</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;C&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Touch-tone &quot;D&quot; received. Valid only in
direction from emulator to application.</p></td></tr>
</table>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fritz Elfert
&lt;fritz@isdn4linux.de&gt;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ttyI</b>(4).</p>
<hr>
</body>
</html>
