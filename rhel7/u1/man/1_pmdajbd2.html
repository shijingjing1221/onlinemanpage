<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:14:03 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMDAJBD2</title>

</head>
<body>

<h1 align="center">PMDAJBD2</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#INSTALLATION">INSTALLATION</a><br>
<a href="#FILES">FILES</a><br>
<a href="#PCP ENVIRONMENT">PCP ENVIRONMENT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmdajbd2</b>
&minus; journal block device (JBD) performance metrics
domain agent (PMDA)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>$PCP_PMDAS_DIR/jbd2/pmdajbd2</b>
[<b>&minus;d</b> <i>domain</i>] [<b>&minus;l</b>
<i>logfile</i>] [<b>&minus;j</b> <i>path</i>]
[<b>&minus;U</b> <i>username</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmdajbd2</b>
is a Performance Metrics Domain Agent (PMDA) which extracts
performance metrics from the Journal Block Device subsystem
(version 2) in the Linux kernel. These metrics are exported
by the kernel in procfs files, one file per block device.
The JBD2 subsystem is used by several filesystems including
ext3, ext4 and ocfs2.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>jbd2</b>
PMDA exports metrics that measure detailed journal
transaction information, such as time spent waiting and
locked, request rates, blocks used and so on.</p>

<p style="margin-left:11%; margin-top: 1em">A brief
description of the <b>pmdajbd2</b> command line options
follows (these are only relevant when running the PMDA as a
daemon, and not as a shared library):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>It is absolutely crucial that the performance metrics
<i>domain</i> number specified here is unique and
consistent. That is, <i>domain</i> should be different for
every PMDA on the one host, and the same <i>domain</i>
number should be used for the same PMDA on all hosts.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Location of the log file. By default, when running as a
daemon a log file named <i>jbd2.log</i> is written in the
current directory of when <b>pmdajbd2</b> is started, i.e.
<b>$PCP_LOG_DIR/pmcd</b>. If the log file cannot be created
or is not writable, output is written to the standard error
instead. When running in shared library mode, and diagnostic
information will be written into the <b>pmcd</b> log file,
namely <b>$PCP_LOG_DIR/pmcd/pmcd.log</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;j</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Allows an alternate path to the jbd2 statistics files to
be specified. The default path is <i>/proc/fs/jbd2</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;U</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>User account under which to run the agent. The default
is the unprivileged &quot;pcp&quot; account in current
versions of PCP, but in older versions the superuser account
(&quot;root&quot;) was used by default.</p></td></tr>
</table>

<h2>INSTALLATION
<a name="INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This PMDA is
installed by default and in the shared library mode (rather
than as a separate daemon to <b>pmcd</b>(1)). Thus, the
names, help text and values for the jbd2 performance metrics
should always be available.</p>

<p style="margin-left:11%; margin-top: 1em">If you do not
use these metrics you can remove this PMDA, do the following
as root:</p>

<pre style="margin-left:18%; margin-top: 1em"># cd $PCP_PMDAS_DIR/jbd2
# ./Remove</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
enable the installation again, do the following as root:</p>

<pre style="margin-left:18%; margin-top: 1em"># cd $PCP_PMDAS_DIR/jbd2
# ./Install</pre>



<p style="margin-left:11%; margin-top: 1em"><b>pmdajbd2</b>
is launched by <b>pmcd</b>(1) and should never be executed
directly. The Install and Remove scripts notify
<b>pmcd</b>(1) when the agent is installed or removed.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>$PCP_PMCDCONF_PATH</b></p>

<p style="margin-left:26%;">command line options used to
launch <b>pmdajbd2</b></p>


<p style="margin-left:11%;"><b>$PCP_PMDAS_DIR/jbd2/help</b></p>

<p style="margin-left:26%;">default help text file for the
jbd2 metrics</p>


<p style="margin-left:11%;"><b>$PCP_PMDAS_DIR/jbd2/Install</b></p>

<p style="margin-left:26%;">installation script for the
<b>pmdajbd2</b> agent</p>


<p style="margin-left:11%;"><b>$PCP_PMDAS_DIR/jbd2/Remove</b></p>

<p style="margin-left:26%;">undo installation script for
the <b>pmdajbd2</b> agent</p>


<p style="margin-left:11%;"><b>$PCP_LOG_DIR/pmcd/jbd2.log</b></p>

<p style="margin-left:26%;">default log file for error
messages and other information from <b>pmdajbd2</b></p>

<h2>PCP ENVIRONMENT
<a name="PCP ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Environment
variables with the prefix <b>PCP_</b> are used to
parameterize the file and directory names used by PCP. On
each installation, the file <i>/etc/pcp.conf</i> contains
the local values for these variables. The <b>$PCP_CONF</b>
variable may be used to specify an alternative configuration
file, as described in <b>pcp.conf</b>(5).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PCPIntro</b>(1),
<b>pmcd</b>(1), <b>pcp.conf</b>(5) and
<b>pcp.env</b>(5).</p>
<hr>
</body>
</html>
