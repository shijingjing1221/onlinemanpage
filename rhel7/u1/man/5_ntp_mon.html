<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:08:57 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ntp_mon</title>

</head>
<body>

<h1 align="center">ntp_mon</h1>

<a href="#NAME">NAME</a><br>
<a href="#&nbsp;">&nbsp;</a><br>
<a href="#INTRODUCTION">INTRODUCTION</a><br>
<a href="#MONITORING COMMANDS">MONITORING COMMANDS</a><br>
<a href="#FILE SET TYPES">FILE SET TYPES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ntp_mon -
Monitoring Options</p>

<h2>&nbsp;
<a name="&nbsp;"></a>
</h2>


<h2>INTRODUCTION
<a name="INTRODUCTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>ntpd</b>
includes a comprehensive monitoring facility which collects
statistical data of various types and writes the data to
files associated with each type at defined events or
intervals. The files associated with a particular type are
collectively called the generation file set for that type.
The files in the file set are the members of that set.</p>

<p style="margin-left:11%; margin-top: 1em">File sets have
names specific to the type and generation epoch. The names
are constructed from three concatenated elements
<b>prefix</b>, <b>filename</b> and <b>suffix</b>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>prefix</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>The directory path specified in the <b>statsdir</b>
command.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>name</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>The name specified by the <b>file</b> option of the
<b>filegen</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>suffix</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>A string of elements bdginning with . (dot) followed by
a number of elements depending on the file set type.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Statistics
files can be managed using scripts, examples of which are in
the <b>./scripts</b> directory. Using these or similar
scripts and Unix <b>cron</b> jobs, the files can be
automatically summarized and archived for retrospective
analysis.</p>

<h2>MONITORING COMMANDS
<a name="MONITORING COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>filegen</b>
<i>name</i> <b>file</b> <i>filename</i> <b>[type</b>
<i>type</i><b>] [link | nolink] [enable | <br>
disable]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="23%"></td>
<td width="6%">


<p><b>name</b></p></td>
<td width="6%"></td>
<td width="65%">


<p>Specifies the file set type from the list in the next
section.</p> </td></tr>
</table>

<p style="margin-left:23%;"><b>file</b> <i>filename</i></p>

<p style="margin-left:35%;">Specfies the file set name.</p>

<p style="margin-left:23%;"><b>type</b> <i>typename</i></p>

<p style="margin-left:35%;">Specifies the file set
interval. The following intervals are supported with default
<b>day</b>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>none</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>The file set is actually a single plain file.</p></td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>pid</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is created for every incarnation of
<b>ntpd</b>. The file name suffix is the string .<b>n</b>,
where <b>n</b> is the process ID of the <b>ntpd</b> server
process.</p> </td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>day</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is created per day. A day is defined
as the period between 00:00 and 23:59 UTC. The file name
suffix is the string .<b>yyyymmdd</b>, where <b>yyyy</b> is
the year, <b>mm</b> the month of the year and <b>dd</b> the
day of the month. Thus, member created on 10 December 1992
would have suffix <b>.19921210</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>week</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is created per week. The week is
defined as the day of year modulo 7. The file name suffix is
the string .<b>yyyyWww</b>, where <b>yyyy</b> is the year,
<b>W</b> stands for itself and <b>ww</b> the week number
starting from 0. For example, The member created on 10
January 1992 would have suffix <b>.1992W1</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>month</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is created per month. The file name
suffix is the string .<b>yyyymm</b>, where <b>yyyy</b> is
the year and <b>mm</b> the month of the year starting from
1. For example, The member created on 10 January 1992 would
have suffix <b>.199201</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>year</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is generated per year. The file name
suffix is the string .<b>yyyy</b>, where <b>yyyy</b> is the
year. For example, The member created on 1 January 1992
would have suffix <b>.1992</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="35%"></td>
<td width="8%">


<p><b>age</b></p></td>
<td width="5%"></td>
<td width="52%">


<p>One file set member is generated every 24 hours of
<b>ntpd</b> operation. The filename suffix is the string
<b>.adddddddd</b>, where <b>a</b> stands for itself and
<b>dddddddd</b> is the <b>ntpd</b> running time in seconds
at the start of the corresponding 24-hour period.</p></td></tr>
</table>

<p style="margin-left:23%;"><b>link | nolink</b></p>

<p style="margin-left:35%;">It is convenient to be able to
access the current file set members by file name, but
without the suffix. This feature is enabled by <b>link</b>
and disabled by <b>nolink</b>. If enabled, which is the
default, a hard link from the current file set member to a
file without suffix is created. When there is already a file
with this name and the number of links to this file is one,
it is renamed by appending a dot, the letter <b>C</b>, and
the pid of the <b>ntpd</b> server process. When the number
of links is greater than one, the file is unlinked. This
allows the current file to be accessed by a constant
name.</p>

<p style="margin-left:23%;"><b>enable | disable</b></p>

<p style="margin-left:35%;">Enable or disable the recording
function, with default <b>enable</b>. These options are
intended for remote configutation commands.</p>

<p style="margin-left:11%;"><b>statsdir</b>
<i>directory_path</i></p>

<p style="margin-left:23%;">Specify the directory path
prefix for statistics file names.</p>

<h2>FILE SET TYPES
<a name="FILE SET TYPES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>clockstats</b></p>

<p style="margin-left:23%;">Record reference clock
statistics. Each update received from a reference clock
driver appends one line to the <b>clockstats</b> file set:
<b>49213 525.624 127.127.4.1 93 226 00:08:29.606 D</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309881.png" alt="Image grohtml-309881.png"></b></p>

<p style="margin-left:23%;">The <i>message</i> field
includes the last timecode received in decoded ASCII format,
where meaningful. In some cases a good deal of additional
information is displayed. See information specific to each
reference clock for further details.</p>

<p style="margin-left:11%;"><b>cryptostats</b></p>

<p style="margin-left:23%;">Record significant events in
the Autokey protocol. This option requires the OpenSSL
cryptographic software library. Each event appends one line
to the <b>cryptostats</b> file set: <b>49213 525.624
128.4.1.1</b> <i>message</i></p>


<p align="center" style="margin-top: 1em"><i><img src="grohtml-309882.png" alt="Image grohtml-309882.png"></i></p>

<p style="margin-left:23%;">The <i>message</i> field
includes the message type and certain ancillary information.
See the Authentication Options page for further
information.</p>

<p style="margin-left:11%;"><b>loopstats</b></p>

<p style="margin-left:23%;">Record clock discipline loop
statistics. Each system clock update appends one line to the
<b>loopstats</b> file set: <b>50935 75440.031 0.000006019
13.778 0.000351733 0.013380 6</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309883.png" alt="Image grohtml-309883.png"></b></p>

<p style="margin-left:11%;"><b>peerstats</b></p>

<p style="margin-left:23%;">Record peer statistics. Each
NTP packet or reference clock update received appends one
line to the <b>peerstats</b> file set: <b>48773 10847.650
127.127.4.1 9714 -0.001605376 0.000000000 0.001424877
0.000958674</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309884.png" alt="Image grohtml-309884.png"></b></p>

<p style="margin-left:23%;">The status field is encoded in
hex format as described in Appendix B of the NTP
specification RFC 1305.</p>

<p style="margin-left:11%;"><b>protostats</b></p>

<p style="margin-left:23%;">Record significant peer, system
and [rptpcp; events. Each significant event appends one line
to the <b>protostats</b> file set: <b>49213 525.624
128.4.1.1 963a 8a</b> <i>message</i></p>


<p align="center" style="margin-top: 1em"><i><img src="grohtml-309885.png" alt="Image grohtml-309885.png"></i></p>

<p style="margin-left:23%;">The event message code and
<i>message</i> field are described on the Event Messages and
Status Words page.</p>

<p style="margin-left:11%;"><b>rawstats</b></p>

<p style="margin-left:23%;">Record timestamp statistics.
Each NTP packet received appends one line to the
<b>rawstats</b> file set: <b>50928 2132.543 128.4.1.1
128.4.1.20 3102453281.584327000 3102453281.58622800031
02453332.540806000 3102453332.541458000</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309886.png" alt="Image grohtml-309886.png"></b></p>

<p style="margin-left:11%;"><b>sysstats</b></p>

<p style="margin-left:23%;">Record system statistics. Each
hour one line is appended to the <b>sysstats</b> file set in
the following format: <b>50928 2132.543 3600 81965 0 9546 56
512 540 10 4 147 1</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309887.png" alt="Image grohtml-309887.png"></b></p>

<p style="margin-left:11%;"><b>timingstats</b></p>

<p style="margin-left:23%;">(Only available when the deamon
is compiled with process time debugging support
(--enable-debug-timing - costs performance). Record
processing time statistics for various selected code paths.
<b>53876 36.920 10.0.3.5 1 0.000014592 input processing
delay</b></p>


<p align="center" style="margin-top: 1em"><b><img src="grohtml-309888.png" alt="Image grohtml-309888.png"></b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ntp.conf(5),
ntp_decode(5)</p>

<p style="margin-left:11%; margin-top: 1em">The official
HTML documentation.</p>

<p style="margin-left:11%; margin-top: 1em">This file was
automatically generated from HTML source.</p>
<hr>
</body>
</html>
