<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:27:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMBD</title>

</head>
<body>

<h1 align="center">SMBD</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#LIMITATIONS">LIMITATIONS</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#PAM INTERACTION">PAM INTERACTION</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#TDB FILES">TDB FILES</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">smbd &minus;
server to provide SMB/CIFS services to clients</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">smbd
[&minus;D|&minus;&minus;daemon]
[&minus;F|&minus;&minus;foreground]
[&minus;S|&minus;&minus;log&minus;stdout]
[&minus;i|&minus;&minus;interactive] [&minus;V]
[&minus;b|&minus;&minus;build&minus;options]
[&minus;d&nbsp;&lt;debug&nbsp;level&gt;]
[&minus;l|&minus;&minus;log&minus;basename&nbsp;&lt;log&nbsp;directory&gt;]
[&minus;p&nbsp;&lt;port&nbsp;number(s)&gt;]
[&minus;P&nbsp;&lt;profiling&nbsp;level&gt;]
[&minus;s&nbsp;&lt;configuration&nbsp;file&gt;]
[&minus;&minus;no&minus;process&minus;group]</p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program is
part of the <b>samba</b>(7) suite.</p>

<p style="margin-left:11%; margin-top: 1em">smbd is the
server daemon that provides filesharing and printing
services to Windows clients. The server provides filespace
and printer services to clients using the SMB (or CIFS)
protocol. This is compatible with the LanManager protocol,
and can service LanManager clients. These include MSCLIENT
3.0 for DOS, Windows for Workgroups, Windows 95/98/ME,
Windows NT, Windows 2000, OS/2, DAVE for Macintosh, and
smbfs for Linux.</p>

<p style="margin-left:11%; margin-top: 1em">An extensive
description of the services that the server can provide is
given in the man page for the configuration file controlling
the attributes of those services (see <b>smb.conf</b>(5).
This man page will not describe the services, but will
concentrate on the administrative aspects of running the
server.</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that there are significant security implications to running
this server, and the <b>smb.conf</b>(5) manual page should
be regarded as mandatory reading before proceeding with
installation.</p>

<p style="margin-left:11%; margin-top: 1em">A session is
created whenever a client requests one. Each client gets a
copy of the server for each session. This copy then services
all connections made by the client during that session. When
all connections from its client are closed, the copy of the
server for that client terminates.</p>

<p style="margin-left:11%; margin-top: 1em">The
configuration file, and any files that it includes, are
automatically reloaded every minute, if they change. You can
force a reload by sending a SIGHUP to the server. Reloading
the configuration file will not affect connections to any
service that is already established. Either the user will
have to disconnect from the service, or smbd killed and
restarted.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&minus;D|&minus;&minus;daemon</p>

<p style="margin-left:17%;">If specified, this parameter
causes the server to operate as a daemon. That is, it
detaches itself and runs in the background, fielding
requests on the appropriate port. Operating the server as a
daemon is the recommended way of running smbd for servers
that provide more than casual use file and print services.
This switch is assumed if smbd is executed on the command
line of a shell.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;F|&minus;&minus;foreground</p>

<p style="margin-left:17%;">If specified, this parameter
causes the main smbd process to not daemonize, i.e.
double&minus;fork and disassociate with the terminal. Child
processes are still created as normal to service each
connection request, but the main process does not exit. This
operation mode is suitable for running smbd under process
supervisors such as supervise and svscan from Daniel J.
Bernstein's daemontools package, or the AIX process
monitor.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;S|&minus;&minus;log&minus;stdout</p>

<p style="margin-left:17%;">If specified, this parameter
causes smbd to log to standard output rather than a
file.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;i|&minus;&minus;interactive</p>

<p style="margin-left:17%;">If this parameter is specified
it causes the server to run &quot;interactively&quot;, not
as a daemon, even if the server is executed on the command
line of a shell. Setting this parameter negates the implicit
daemon mode when run from the command line. smbd also logs
to standard output, as if the &minus;S parameter had been
given.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;d|&minus;&minus;debuglevel=level</p>

<p style="margin-left:17%;"><i>level</i> is an integer from
0 to 10. The default value if this parameter is not
specified is 0.</p>

<p style="margin-left:17%; margin-top: 1em">The higher this
value, the more detail will be logged to the log files about
the activities of the server. At level 0, only critical
errors and serious warnings will be logged. Level 1 is a
reasonable level for day&minus;to&minus;day running &minus;
it generates a small amount of information about operations
carried out.</p>

<p style="margin-left:17%; margin-top: 1em">Levels above 1
will generate considerable amounts of log data, and should
only be used when investigating a problem. Levels above 3
are designed for use only by developers and generate HUGE
amounts of log data, most of which is extremely cryptic.</p>

<p style="margin-left:17%; margin-top: 1em">Note that
specifying this parameter here will override the
<b><font color="#0000FF">log level</font></b>
<font color="#000000">parameter in the smb.conf
file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;V|&minus;&minus;version</font></p>

<p style="margin-left:17%;"><font color="#000000">Prints
the program version number.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;s|&minus;&minus;configfile=&lt;configuration
file&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">The file
specified contains the configuration details required by the
server. The information in this file includes
server&minus;specific information such as what printcap file
to use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at compile
time.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;l|&minus;&minus;log&minus;basename=logdirectory</font></p>

<p style="margin-left:17%;"><font color="#000000">Base
directory name for log/debug files. The extension
<b>&quot;.progname&quot;</b> will be appended (e.g.
log.smbclient, log.smbd, etc...). The log file is never
removed by the client.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;option=&lt;name&gt;=&lt;value&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">Set the
<b>smb.conf</b>(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled&minus;in defaults and options read from
the configuration file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;?|&minus;&minus;help</font></p>

<p style="margin-left:17%;"><font color="#000000">Print a
summary of command line options.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;usage</font></p>

<p style="margin-left:17%;"><font color="#000000">Display
brief usage message.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;no&minus;process&minus;group</font></p>

<p style="margin-left:17%;"><font color="#000000">Do not
create a new process group for smbd.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;b|&minus;&minus;build&minus;options</font></p>

<p style="margin-left:17%;"><font color="#000000">Prints
information about how Samba was built.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;p|&minus;&minus;port&lt;port
number(s)&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000"><i>port
number(s)</i> is a space or comma&minus;separated list of
TCP ports smbd should listen on. The default value is taken
from the</font> <b><font color="#0000FF">ports</font></b>
<font color="#000000">parameter in smb.conf</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
default ports are 139 (used for SMB over NetBIOS over TCP)
and port 445 (used for plain SMB over TCP).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;P|&minus;&minus;profiling&minus;level&lt;profiling
level&gt;</font></p>


<p style="margin-left:17%;"><font color="#000000"><i>profiling
level</i> is a number specifying the level of profiling data
to be collected. 0 turns off profiling, 1 turns on counter
profiling only, 2 turns on complete profiling, and 3 resets
all profiling data.</font></p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">/etc/inetd.conf</font></p>

<p style="margin-left:17%;"><font color="#000000">If the
server is to be run by the inetd meta&minus;daemon, this
file must contain suitable startup information for the
meta&minus;daemon.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">/etc/rc</font></p>

<p style="margin-left:17%;"><font color="#000000">or
whatever initialization script your system uses).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
running the server as a daemon at startup, this file will
need to contain an appropriate startup sequence for the
server.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">/etc/services</font></p>

<p style="margin-left:17%;"><font color="#000000">If
running the server via the meta&minus;daemon inetd, this
file must contain a mapping of service name (e.g.,
netbios&minus;ssn) to service port (e.g., 139) and protocol
type (e.g., tcp).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">/usr/local/samba/lib/smb.conf</font></p>

<p style="margin-left:17%;"><font color="#000000">This is
the default location of the <b>smb.conf</b>(5) server
configuration file. Other common places that systems install
this file are /usr/samba/lib/smb.conf and
/etc/samba/smb.conf.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
file describes all the services the server is to make
available to clients. See <b>smb.conf</b>(5) for more
information.</font></p>

<h2>LIMITATIONS
<a name="LIMITATIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">On
some systems smbd cannot change uid back to root after a
setuid() call. Such systems are called trapdoor uid systems.
If you have such a system, you will be unable to connect
from a client (such as a PC) as two different users at once.
Attempts to connect the second user will result in access
denied or similar.</font></p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>PRINTER</b></font></p>

<p style="margin-left:17%;"><font color="#000000">If no
printer name is specified to printable services, most
systems will use the value of this variable (or <b>lp</b> if
this variable is not defined) as the name of the printer to
use. This is not specific to the server, however.</font></p>

<h2>PAM INTERACTION
<a name="PAM INTERACTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Samba
uses PAM for authentication (when presented with a plaintext
password), for account checking (is this account disabled?)
and for session management. The degree too which samba
supports PAM is restricted by the limitations of the SMB
protocol and the</font> <b><font color="#0000FF">obey pam
restrictions</font><font color="#000000">smb.conf</font></b><font color="#000000">(5)
parameter. When this is set, the following restrictions
apply:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>Account Validation</i>: All accesses to a samba server
are checked against PAM to see if the account is valid, not
disabled and is permitted to login at this time. This also
applies to encrypted logins.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>Session Management</i>: When not using share level
security, users must pass PAM's session checks before access
is granted. Note however, that this is bypassed in share
level security. Note also that some older pam configuration
files may need a line added for session support.</font></p>

<h2>VERSION
<a name="VERSION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
man page is correct for version 3 of the Samba
suite.</font></p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Most
diagnostics issued by the server are logged in a specified
log file. The log file name is specified at compile time,
but may be overridden on the command line.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
number and nature of diagnostics available depends on the
debug level used by the server. If you have problems, set
the debug level to 3 and peruse the log files.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Most
messages are reasonably self&minus;explanatory.
Unfortunately, at the time this man page was created, there
are too many diagnostics available in the source code to
warrant describing each and every diagnostic. At this stage
your best bet is still to grep the source code and inspect
the conditions that gave rise to the diagnostics you are
seeing.</font></p>

<h2>TDB FILES
<a name="TDB FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Samba
stores it's data in several TDB (Trivial Database) files,
usually located in /var/lib/samba.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">(*)
information persistent across restarts (but not necessarily
important to backup).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">account_policy.tdb*</font></p>

<p style="margin-left:17%;"><font color="#000000">NT
account policy settings such as pw expiration,
etc...</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">brlock.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">byte
range locks</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">browse.dat</font></p>

<p style="margin-left:17%;"><font color="#000000">browse
lists</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">gencache.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">generic
caching db</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">group_mapping.tdb*</font></p>

<p style="margin-left:17%;"><font color="#000000">group
mapping information</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">locking.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">share
modes &amp; oplocks</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">login_cache.tdb*</font></p>

<p style="margin-left:17%;"><font color="#000000">bad pw
attempts</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">messages.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">Samba
messaging system</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">netsamlogon_cache.tdb*</font></p>

<p style="margin-left:17%;"><font color="#000000">cache of
user net_info_3 struct from net_samlogon() request (as a
domain member)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ntdrivers.tdb*</font></p>


<p style="margin-left:17%;"><font color="#000000">installed
printer drivers</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ntforms.tdb*</font></p>


<p style="margin-left:17%;"><font color="#000000">installed
printer forms</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ntprinters.tdb*</font></p>


<p style="margin-left:17%;"><font color="#000000">installed
printer information</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">printing/</font></p>


<p style="margin-left:17%;"><font color="#000000">directory
containing tdb per print queue of cached lpq
output</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">registry.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">Windows
registry skeleton (connect via regedit.exe)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">smbXsrv_session_global.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">session
information (e.g. support for 'utmp = yes')</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">smbXsrv_tcon_global.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">share
connections (used to enforce max connections,
etc...)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">smbXsrv_open_global.tdb</font></p>

<p style="margin-left:17%;"><font color="#000000">open file
handles (used durable handles, etc...)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">share_info.tdb*</font></p>

<p style="margin-left:17%;"><font color="#000000">share
acls</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">winbindd_cache.tdb</font></p>


<p style="margin-left:17%;"><font color="#000000">winbindd's
cache of user lists, etc...</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">winbindd_idmap.tdb*</font></p>


<p style="margin-left:17%;"><font color="#000000">winbindd's
local idmap db</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">wins.dat*</font></p>

<p style="margin-left:17%;"><font color="#000000">wins
database when 'wins support = yes'</font></p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Sending
the smbd a SIGHUP will cause it to reload its smb.conf
configuration file within a short period of time.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">To
shut down a user's smbd process it is recommended that
SIGKILL (&minus;9)<i>NOT</i> be used, except as a last
resort, as this may leave the shared memory area in an
inconsistent state. The safe way to terminate an smbd is to
send it a SIGTERM (&minus;15) signal and wait for it to die
on its own.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
debug log level of smbd may be raised or lowered using
<b>smbcontrol</b>(1) program (SIGUSR[1|2] signals are no
longer used since Samba 2.2). This is to allow transient
problems to be diagnosed, whilst still running at a normally
low log level.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note
that as the signal handlers send a debug write, they are not
re&minus;entrant in smbd. This you should wait until smbd is
in a state of waiting for an incoming SMB before issuing
them. It is possible to make the signal handlers safe by
un&minus;blocking the signals before the select call and
re&minus;blocking them after, however this would affect
performance.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>hosts_access</b>(5),
<b>inetd</b>(8), <b>nmbd</b>(8), <b>smb.conf</b>(5),
<b>smbclient</b>(1), <b>testparm</b>(1), and the Internet
RFC's rfc1001.txt, rfc1002.txt. In addition the CIFS
(formerly SMB) specification is available as a link from the
Web page http://samba.org/cifs/.</font></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba software and related utilities were created
by Andrew Tridgell. Samba is now developed by the Samba Team
as an Open Source project similar to the way the Linux
kernel is developed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba man pages were written by Karl Auer. The man
page sources were converted to YODL format (another
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba
2.0 release by Jeremy Allison. The conversion to DocBook for
Samba 2.2 was done by Gerald Carter. The conversion to
DocBook XML 4.2 for Samba 3.0 was done by Alexander
Bokovoy.</font></p>
<hr>
</body>
</html>
