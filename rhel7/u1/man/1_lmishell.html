<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:02:04 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>LMISHELL</title>

</head>
<body>

<h1 align="center">LMISHELL</h1>

<a href="#NAME">NAME</a><br>
<a href="#LMISHELL">LMISHELL</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">lmishell
&minus; (non)interactive WBEM client and interpreter</p>

<p style="margin-left:11%; margin-top: 1em"><i>OpenLMI
Tools</i> currently consist of <i>LMIShell</i> and the
content of the documentation itself is devoted to the
LMIShell.</p>

<h2>LMISHELL
<a name="LMISHELL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">LMIShell
provides a (non)interactive way how to access CIM objects
provided by <i>OpenPegasus</i> or <i>sblim&minus;sfcb</i>
broker.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Synopsis
<br>
lmishell</b> [options] script [script&minus;options]</p>


<p style="margin-left:11%; margin-top: 1em"><b>Description</b>
<br>
LMIShell provides a (non)interactive or interactive way how
to access CIM objects provided by OpenPegasus or
sblim&minus;sfcb CIMOM.</p>

<p style="margin-left:11%; margin-top: 1em">LMIShell is
based on a python interpreter and added logic, therefore
what is possible to do in pure python, it is possible in
LMIShell. There are classes added to manipulate with CIM
classes, instance names, instances, etc. Additional classes
are added to fulfill wrapper pattern and expose only those
methods, which are necessary for the purpose of a shell.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Options</b>
<br>
The options may be given in any order before the first
positional argument, which stands for the script name.</p>

<p style="margin-left:15%;"><b>&minus;h,
&minus;&minus;help</b></p>

<p style="margin-left:26%;">Print summary of usage, command
line options and exit.</p>

<p style="margin-left:15%;"><b>&minus;i,
&minus;&minus;interact</b></p>

<p style="margin-left:26%;">Enter interactive mode, when
the script passed as the first positional argument is
executed.</p>

<p style="margin-left:15%;"><b>&minus;v,
&minus;&minus;verbose</b></p>

<p style="margin-left:26%;">Print log messages to
stderr.</p>

<p style="margin-left:15%;"><b>&minus;m,
&minus;&minus;more&minus;verbose</b></p>

<p style="margin-left:26%;">Print all log messages to
stderr.</p>

<p style="margin-left:15%;"><b>&minus;q,
&minus;&minus;quiet</b></p>

<p style="margin-left:26%;">Do not print any log messages
to stderr.</p>

<p style="margin-left:15%;"><b>&minus;n,
&minus;&minus;noverify</b></p>

<p style="margin-left:26%;">Do not verify server's
certificate, if SSL used. By default, the certificate
validity check will be performed.</p>

<p style="margin-left:15%; margin-top: 1em">By default,
LMIShell prints out log messages with Error severity.
Options <b>&minus;v</b>, <b>&minus;m</b> and <b>&minus;q</b>
are mutually exclusive and can not be used together.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Startup</b>
<br>
By running the following, you will gain an interactive
interface of the shell. The <i>LMIShell</i> is waiting for
the end of an input to quit &minus;&minus; by hitting
<b>&lt;ctrl+d&gt;</b> you can exit from it:</p>

<pre style="margin-left:15%; margin-top: 1em">$ lmishell
&gt; &lt;ctrl+d&gt;
$</pre>


<p style="margin-left:11%; margin-top: 1em">or:</p>

<pre style="margin-left:15%; margin-top: 1em">$ lmishell
&gt; quit()
$</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Establish a
connection</b> <br>
Following examples demonstrate, how to connect to a
<i>CIMOM</i> by issuing a <b>connect()</b> call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Username/Password
authentication</b> <br>
Common means of performing the authentication is done by
providing a <i>username</i> and <i>password</i> to
<b>connect()</b> function. See the following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;host&quot;, &quot;username&quot;)
password: # &lt;not echoed&gt;
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">or:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;host&quot;, &quot;username&quot;, &quot;password&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Certificate
authentication</b> <br>
LMIShell is capable of creating a connection by using a
<i>X509</i> certificate. For the purpose of creating a
connection object, it is necessary to provide two file
names, which contain a <i>certificate</i> and a <i>private
key</i>.</p>

<p style="margin-left:11%; margin-top: 1em">See the
following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;host&quot;, key_file=&quot;key_file&quot;, cert_file=&quot;cert_file&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Unix
socket</b> <br>
LMIShell can connect directly to the CIMOM using Unix
socket. For this type of connection, the shell needs to be
run under root user and the destination machine has to be
either <b>localhost</b>, <b>127.0.0.1</b> or <b>::1</b>.
This type of connection is supported by TOG&minus;Pegasus
and there needs to be a Unix socket file present at
<b>/var/run/tog&minus;pegasus/cimxml.socket</b>. If the
condition is not met, classic username/password method will
be used.</p>

<p style="margin-left:11%; margin-top: 1em">See following
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;localhost&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Credentials
validation</b> <br>
Function <b>connect()</b> returns either
<b>LMIConnection</b> object, if the connection can be
established, otherwise <b>None</b> is returned. Suppose, the
LMIShell is run in verbose mode (<i>&minus;v</i>,
<i>&minus;&minus;verbose</i>, <i>&minus;m</i> or
<i>&minus;&minus;more&minus;verbose</i> is used). See
following example of creating a connection:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; # correct username or password
&gt; c = connect(&quot;host&quot;, &quot;username&quot;, &quot;password&quot;)
INFO: Connected to host
&gt; isinstance(c, LMIConnection)
True
&gt; # wrong login username or password
&gt; c = connect(&quot;host&quot;, &quot;wrong_username&quot;, &quot;wrong_password&quot;)
ERROR: Error connecting to host, &lt;error message&gt;
&gt; c is None
True
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b> By
default, LMIShell prints out only error messages, when
calling a <b>connect()</b>; no INFO messages will be print
out. It is possible to suppress all the messages by passing
<i>&minus;q</i> or <i>&minus;&minus;quiet</i>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Server's
certificate validation</b> <br>
When using https transport protocol, LMIShell tries to
validate each server&minus;side certificate against platform
provided <i>CA trust store</i>. It is necessary to copy the
server's certificate from each CIMOM to the platform
specific trust store directory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b> It
is possible to make LMIShell skip the certificate validation
process by <b>lmishell</b> <i>&minus;n</i> or
<i>&minus;&minus;noverify</i>.</p>

<p style="margin-left:11%; margin-top: 1em">See following
example:</p>

<pre style="margin-left:15%; margin-top: 1em">$ lmishell &minus;&minus;noverify
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Namespaces</b>
<br>
Namespaces in CIM and LMIShell provide a natural way, how to
organize all the available classes and their instances. In
the shell, they provide a hierarchic access point to other
namespaces and corresponding classes.</p>

<p style="margin-left:11%; margin-top: 1em">The <i>root</i>
namespace plays a special role in the managed system; it is
the first entry point from the connection object and
provides the access to other clamped namespaces.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Available
namespaces</b> <br>
To get a <b>LMINamespace</b> object for the root namespace
of the managed system, run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; root_namespace = c.root
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">To list all
available namespace from the root one, run following
code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.root.print_namespaces()
...
&gt; ns_lst = c.root.namespaces
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
access any namespace deeper (e.g. <i>cimv2</i>), run
this:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cimv2_namespace = c.root.cimv2
&gt; cimv2_namespace = c.get_namespace(&quot;root/cimv2&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Available
classes</b> <br>
Each namespace object can print its available classes. To
print/get the list of the classes, run this:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.root.cimv2.print_classes()
...
&gt; classes_lst = c.root.cimv2.classes()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Queries</b>
<br>
Using a <b>LMINamespace</b> object, it is possible to
retrieve a list of <b>LMIInstance</b> objects. The LMIShell
supports 2 query languages:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="4%">


<p><i>WQL</i></p></td>
<td width="82%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="4%">


<p><i>CQL</i></p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Following code
illustrates, how to execute <i>WQL</i> and <i>CQL</i>
queries:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instances_lst = namespace.wql(&quot;query&quot;)
&gt; instances_lst = namespace.cql(&quot;query&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Classes</b>
<br>
Each class in LMIShell represents a class provided by a
CIMOM. You can get a list of its properties, methods,
instances, instance names and ValueMap properties. It is
also possible to print a documentation string, create a new
instance or new instance name.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Getting a
class object</b> <br>
To get a class which is provided by a broker, you can do
following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls = c.root.cimv2.ClassName
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Fetching a
class</b> <br>
Objects of <b>LMIClass</b> use lazy fetching method, because
some methods do not need the <b>CIMClass</b> object.</p>

<p style="margin-left:11%; margin-top: 1em">To manually
fetch the <b>CIMClass</b> object, call following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.fetch()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The methods,
which need the <b>CIMClass</b> object to be fetched from
CIMOM, do this action automatically, without the need of
calling <b>LMIClass.fetch()</b> method by hand.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
Methods</b> <br>
Following example illustrates, how to work with
<b>LMIClass</b> methods:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.print_methods()
...
&gt; cls_method_lst = cls.methods()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Class
Properties</b> <br>
To get a list of properties of a specific class, run
following code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.print_properties()
...
&gt; cls_property_lst = cls.properties()
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Instances</b>
<br>
Following part described basic work flow with
<b>LMIInstance</b> and <b>LMIInstanceName</b> objects.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Get
Instances</b> <br>
Using a class object, you can access its instances. You can
easily get a list of (filtered) instances, or the first one
from the list. The filtering is uses input dictionary, if
present, where the dictionary keys represent the instance
properties and the dictionary values represent your desired
instance property values.</p>

<p style="margin-left:11%; margin-top: 1em">To get
<b>LMIInstance</b> object, execute the following
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; inst = cls.first_instance()
&gt; inst_lst = cls.instances()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Get Instance
Names</b> <br>
The <b>CIMInstanceName</b> objects clearly identify
<b>CIMInstance</b> objects. LMIShell can retrieve
<b>LMIInstanceName</b> objects, by calling following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; inst_name = cls.first_instance_name()
&gt; inst_names_lst = cls.instance_names()
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Filtering</b>
<br>
Both methods <b>LMIClass.instances()</b> or
<b>LMIClass.instance_names()</b> can filter returned objects
by their keys/values. The filtering is achieved by passing a
dictionary of <b>{property : value}</b> to the corresponding
method. See following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; inst_lst = cls.instances({&quot;FilterProperty&quot; : FilterValue})
&gt; inst_names_lst = cls.instance_names({&quot;FilterProperty&quot; : FilterValue})
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New Instance
Name</b> <br>
LMIShell is able to create a new wrapped
<b>CIMInstanceName</b>, if you know all the primary keys of
a remote object. This instance name object can be then used
to retrieve the whole instance object.</p>

<p style="margin-left:11%; margin-top: 1em">See the next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; inst_name = cls({Property1 : Value1, Property2 : Value2, ...})
&gt; inst = inst_name.to_instance()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Creating a
new instance</b> <br>
LMIShell is able to create an object of specific class, if
the provider support this operation.</p>

<p style="margin-left:11%; margin-top: 1em">See the
following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.create_instance({&quot;Property1&quot; : Value1, &quot;Property2&quot; : Value2})
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:
Value</b> can be a <b>LMIInstance</b> object, as well.
LMIShell will auto&minus;cast such object.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ValueMap
Properties</b> <br>
A CIM class may contain <i>ValueMap</i> properties (aliases
for constant values) in its MOF definition. These properties
contain constant values, which can be useful, when calling a
method, or checking a returned value.</p>

<p style="margin-left:11%; margin-top: 1em">ValueMap
properties are formed from 2 MOF properties of a class
definition:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="84%">


<p style="margin-top: 1em"><i>Values</i> &minus;&minus;
list of string names of the &quot;constant&quot; values</p></td>
<td width="2%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="84%">


<p><i>ValueMap</i> &minus;&minus; list of values</p></td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
properties</b> <br>
To get a list of all available constants, their values, use
the following code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.print_valuemap_properties()
...
&gt; valuemap_properties = cls.valuemap_properties()
...
&gt; cls.PropertyValues.print_values()
...
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
The suffix &quot;<b>Values</b>&quot; provides a way, how to
access ValueMap properties.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
property value</b> <br>
Following example shows, how to retrieve a constant
value:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; constant_value_names_lst = cls.PropertyValues.values()
&gt; cls.PropertyValues.ConstantValueName
ConstantValue
&gt; cls.PropertyValues.value(&quot;ConstantValueName&quot;)
ConstantValue
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
property value name</b> <br>
LMIShell can also return string representing constant value.
See the following code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.PropertyValue.value_name(ConstantValue)
'ConstantValueName'
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Useful
Properties</b> <br>
Following part describes few useful <b>LMIClass</b>
properties.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
Name</b> <br>
Every class object can return a name of the CIM class, see
following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.classname
ClassName
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Namespace</b>
<br>
Every class belongs to certain namespace, to get a string
containing the corresponding namespace for each class, run
following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.namespace
Namespace
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Connection
Object</b> <br>
This property returns a connection object, which was used to
retrieve the class (refer to <i>startup_connection</i>). See
next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.connection
LMIConnection(URI='uri', user='user'...)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Wrapped
Object</b> <br>
This property returns a wrapped <b>pywbem</b> object. See
the example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.wrapped_object
CIMClass(u'ClassName', ...)
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Documentation</b>
<br>
To see a class documentation (based on <i>MOF</i>
definitions), run:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; cls.doc()
# ... pretty verbose output displayed in a pages (can be modified by
#     setting environment variable PAGER) ...
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Instances</b>
<br>
Each instance in LMIShell represents a CIM instance provided
by a CIMOM.</p>

<p style="margin-left:11%; margin-top: 1em">Operations,
that can be done within a <b>LMIInstance</b>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p style="margin-top: 1em">get and set properties</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>list/print/execute its methods</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>print a documentation string</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>get a list of associated objects</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>get a list of association objects</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>push (update) a modified object to CIMOM</p></td>
<td width="25%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="61%">


<p>delete a single instance from the CIMOM.</p></td>
<td width="25%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Instance
Methods</b> <br>
To get a list of methods, run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.print_methods()
...
&gt; method_lst = instance.methods()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">To execute a
method within an object, run this:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Method(
...    {&quot;Param1&quot; : value1,
...     &quot;Param2&quot; : value2, ...})
LMIReturnValue(
    rval=ReturnValue,
    rparams=ReturnParametersDictionary,
    errorstr=&quot;Possible error string&quot;
)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
Instances <b>do not</b> auto&minus;refresh after a method
calls. It is necessary to perform this operation by hand
(See <i>instances_refreshing</i>).</p>

<p style="margin-left:11%; margin-top: 1em">To get the
result from a method call, see following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; (rval, rparams, errorstr) = instance.Method(
...    {&quot;Param1&quot; : value1,
...     &quot;Param2&quot; : value2, ...})
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The tuple in
the previous example will contain return value of the method
call (<b>rval</b>), returned parameters (<b>rparams</b>) and
possible error string (<b>errorstr</b>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Synchronous
methods</b> <br>
LMIShell can perform synchronous method call, which means,
that the LMIShell is able to synchronously wait for a Job
object to change its state to <i>Finished</i> state and then
return the job's return parameters. LMIShell can perform the
synchronous method call, if the given method returns a
object of following classes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="41%">


<p style="margin-top: 1em"><b>LMI_StorageJob</b></p></td>
<td width="45%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="41%">


<p><b>LMI_SoftwareInstallationJob</b></p></td>
<td width="45%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="41%">


<p><b>LMI_SoftwareVerificationJob</b></p></td>
<td width="45%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="41%">


<p><b>LMI_NetworkJob</b></p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">LMIShell first
tries to use indications as the waiting method. If it fails,
then it uses polling method instead.</p>

<p style="margin-left:11%; margin-top: 1em">Following
example illustrates, how to perform a synchronous method
call:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; (rval, rparams, errorstr) = instance.SyncMethod(
...    {&quot;Param1&quot; : value1,
...     &quot;Param2&quot; : value2, ...})
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
See the prefix <i>Sync</i> of a method name.</p>

<p style="margin-left:11%; margin-top: 1em">When a
synchronous method call is done:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="75%">


<p style="margin-top: 1em"><b>rval</b> will contain the
job's return value</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="75%">


<p><b>rparams</b> will contain the job's return
parameters</p> </td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="75%">


<p><b>errorstr</b> will contain job's possible error
string</p> </td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">It is possible
to force LMIShell to use only polling method, see the next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; (rval, rparams, errorstr) = instance.SyncMethod(
...    {&quot;Param1&quot; : value1,
...     &quot;Param2&quot; : value2, ...},
...    PreferPolling=True)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Signal
handling</b> <br>
LMIShell can properly handle <i>SIGINT</i> and
<i>SIGTERM</i>, which instruct the shell to cancel the
synchronous call. When such signal is received, the
background job, for which the LMIShell is waiting, will be
asked to terminate, as well.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Instance
Properties</b> <br>
To get a list of properties, see following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.print_properties()
...
&gt; instance_prop_lst = instance.properties()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">It is possible
to access an instance object properties. To get a property,
see the following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Property
PropertyValue
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">To modify a
property, execute following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Property = NewPropertyValue
&gt; instance.push()
LMIReturnValue(rval=0, rparams={}, errorstr=&quot;&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b> If
you change an instance object property, you have to execute
a <b>LMIInstance.push()</b> method to propagate the change
to the CIMOM.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ValueMap
Parameters</b> <br>
A CIM Method may contain <i>ValueMap</i> parameters (aliases
for constant values) in its <i>MOF</i> definition.</p>

<p style="margin-left:11%; margin-top: 1em">To access these
parameters, which contain constant values, see following
code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Method.print_valuemap_parameters()
...
&gt; valuemap_parameters = instance.Method.valuemap_parameters()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
parameter value</b> <br>
By using a <i>ValueMap</i> parameters, you can retrieve a
constant value defined in the <i>MOF</i> file for a specific
method.</p>

<p style="margin-left:11%; margin-top: 1em">To get a list
of all available constants, their values, use the following
code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Method.ParameterValues.print_values()
...
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
The suffix <i>Values</i> provides a way, how to access
<i>ValueMap</i> parameters.</p>

<p style="margin-left:11%; margin-top: 1em">To retrieve a
constant value, see the next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; constant_value_names_lst = instance.Method.ParameterValues.values()
&gt; instance.Method.ParameterValues.ConstantValueName
ConstantValue
&gt; instance.Method.ParameterValues.value(&quot;ConstantValueName&quot;)
ConstantValue
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
parameter</b> <br>
Method can also contain a mapping between constant property
name and corresponding value. Following code demonstrates,
how to access such parameters:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Method.ConstantValueName
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Get ValueMap
parameter value name</b> <br>
LMIShell can also return string representing constant value.
See the following code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.Method.ParameterValue.value_name(ConstantValue)
ConstantValueName
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Instance
refreshing</b> <br>
Local objects used by LMIShell, which represent CIM objects
at CIMOM side, can get outdated, if such object changes
while working with LMIShell's one.</p>

<p style="margin-left:11%; margin-top: 1em">To update
object's properties, methods, etc. follow the next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.refresh()
LMIReturnValue(rval=True, rparams={}, errorstr=&quot;&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Instance
deletion</b> <br>
A single instance can be removed from the CIMOM by
executing:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.delete()
True
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
After executing the <b>LMIInstance.delete()</b> method, all
the object properties, methods will become inaccessible.</p>

<p style="margin-left:11%; margin-top: 1em">Deletion of the
instance can be verified by:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.is_deleted
True
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Documentation</b>
<br>
For an instance object, you can also use a documentation
method, which will display verbose information of its
properties and values.</p>

<p style="margin-left:11%; margin-top: 1em">See next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.doc()
# ... pretty verbose output displayed in a pages (can be modified by
#     setting environment variable PAGER) ...
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>MOF
representation</b> <br>
An instance object can also print out its <i>MOF</i>
representation. This can be achieved by running:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.tomof()
... verbose output of the instance in MOF syntax ...
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Useful
Properties</b> <br>
Following part describes <b>LMIInstance</b> useful
properties.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
Name</b> <br>
Each instance object provide a property, that returns its
class name. To get a string of the class name, run
following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.classname
ClassName
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Namespace</b>
<br>
Each instance object also provides a property, that returns
a namespace name. To get a string of the namespace name, run
following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.namespace
Namespace
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Path</b>
<br>
To retrieve a unique, wrapped, identification object for the
instance, <b>LMIInstanceName</b>, execute following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.path
LMIInstanceName(classname=&quot;ClassName&quot;...)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Connection
Object</b> <br>
This property returns a connection object, which was used to
retrieve the instance (refer to <i>startup_connection</i>).
See next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.connection
LMIConnection(URI='uri', user='user'...)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Wrapped
Object</b> <br>
This property returns a wrapped <b>pywbem</b> object. See
the example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.wrapped_object
CIMInstance(classname=u'ClassName', ...)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Instance
Names <br>
LMIInstanceName</b> is a object, which holds a set of
primary keys and their values. This type of object exactly
identifies an instance.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Key
properties</b> <br>
To get a list of key properties, see following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance_name.print_key_properties()
...
&gt; instance_name.key_properties()
...
&gt; instance_name.SomeKeyProperty
...
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Conversion
to a LMIInstance</b> <br>
This type of object may be returned from a method call. Each
instance name can be converted into the instance, see next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance = instance_name.to_instance()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Useful
Properties</b> <br>
Following part describes <b>LMIInstanceName</b> useful
properties.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
Name</b> <br>
The property returns a string representation of the class
name. See next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance_name.classname
ClassName
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Namespace</b>
<br>
The property returns a string representation of namesapce.
See next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance_name.namespace
Namespace
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Host
Name</b> <br>
This property returns a string representation of the host
name, where the CIM instance is located.</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance_name.hostname
Hostname
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Connection
Object</b> <br>
This property returns a connection object, which was used to
retrieve the instance name (refer to
<i>startup_connection</i>). See next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.connection
LMIConnection(URI='uri', user='user'...)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Wrapped
Object</b> <br>
This property returns a wrapped <b>pywbem</b> object. See
the example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; instance.wrapped_object
CIMInstanceName(classname=u'ClassName', keybindings=NocaseDict(...), host=u'hostname', namespace='namespace')
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Associated
Objects</b> <br>
CIM defines an association relationship between managed
objects. Following text describes the means of retrieving
associated objects within a given one.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Associated
Instances</b> <br>
To get a list of associated <b>LMIInstance</b> objects with
a given object, run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; associated_objects = instance.associators(
...    AssocClass=cls,
...    ResultClass=cls,
...    ResultRole=role,
...    IncludeQualifiers=include_qualifiers,
...    IncludeClassOrigin=include_class_origin,
...    PropertyList=property_lst)
&gt; first_associated_object = instance.first_associator(
...    AssocClass=cls,
...    ResultClass=cls,
...    ResultRole=role,
...    IncludeQualifiers=include_qualifiers,
...    IncludeClassOrigin=include_class_origin,
...    PropertyList=property_lst))</pre>


<p style="margin-left:11%; margin-top: 1em">The list of
returned associated objects can be filtered by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>AssocClass</b> &minus;&minus;
Each returned object shall be associated to the source
object through an instance of this class or one of its
subclasses. Default value is <i>None</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>ResultClass</b> &minus;&minus; Each returned object
shall be either an instance of this class (or one of its
subclasses) or be this class (or one of its subclasses).
Default value is <i>None</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>Role</b> &minus;&minus; Each returned object shall be
associated with the source object through an association in
which the source object plays the specified role. That is,
the name of the property in the association class that
refers to the source object shall match the value of this
parameter. Default value is <i>None</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>ResultRole</b> &minus;&minus; Each returned object
shall be associated to the source object through an
association in which the returned object plays the specified
role. That is, the name of the property in the association
class that refers to the returned object shall match the
value of this parameter. Default value is <i>None</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Other
parameters refer to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>IncludeQualifiers</b>
&minus;&minus; Bool flag indicating, if all qualifiers for
each object (including qualifiers on the object and on any
returned properties) shall be included as
<b>&lt;QUALIFIER&gt;</b> elements in the response. Default
value is <i>False</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>IncludeClassOrigin</b> &minus;&minus; Bool flag
indicating, if the CLASSORIGIN attribute shall be present on
all appropriate elements in each returned object. Default
value is <i>False</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>PropertyList</b> &minus;&minus; The members of the
array define one or more property names. Each returned
object shall not include elements for any properties missing
from this list. If PropertyList is an empty list, no
properties are included in each returned object. If it is
None, no additional filtering is defined. Default value is
<i>None</i>.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Associated
Instance Names</b> <br>
To get a list of associated <b>LMIInstanceName</b> objects
with a given object, run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; associated_object_names = instance.associator_names(
...    AssocClass=cls,
...    ResultClass=cls,
...    Role=role,
...    ResultRole=result_role)
&gt; first_associated_object_name = instance.first_associator_name(
...    AssocClass=cls,
...    ResultClass=cls,
...    Role=role,
...    ResultRole=result_role)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The list of
returned associated instance names can be filtered by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>AssocClass</b> &minus;&minus;
Each returned name identify an object that shall be
associated to the source object through an instance of this
class or one of its subclasses. Default value is
<i>None</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>ResultClass</b> &minus;&minus; Each returned name
identify an object that shall be either an instance of this
class (or one of its subclasses) or be this class (or one of
its subclasses). Default value is <i>None</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>Role</b> &minus;&minus; Each returned name identify
an object that shall be associated to the source object
through an association in which the source object plays the
specified role. That is, the name of the property in the
association class that refers to the source object shall
match the value of this parameter. Default value is
<i>None</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>ResultRole</b> &minus;&minus; Each returned name
identify an object that shall be associated to the source
object through an association in which the named returned
object plays the specified role. That is, the name of the
property in the association class that refers to the
returned object shall match the value of this parameter.
Default value is <i>None</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Association
Objects</b> <br>
CIM defines an association relationship between managed
objects. Following text describes the means of retrieving
association objects within a given one. An association
object is the object, which defines the relationship between
two other objects.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Association
Instances</b> <br>
To get association <b>LMIInstance</b> objects that refer to
a particular target object, run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; association_objects = instance.references(
...    ResultClass=cls,
...    Role=role,
...    IncludeQualifiers=include_qualifiers,
...    IncludeClassOrigin=include_class_origin,
...    PropertyList=property_lst)
&gt; first_association_object = instance.first_reference(
...    ResultClass=cls,
...    Role=role,
...    IncludeQualifiers=include_qualifiers,
...    IncludeClassOrigin=include_class_origin,
...    PropertyList=property_lst)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The list of
returned association objects can be filtered by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>ResultClass</b>
&minus;&minus; Each returned object shall be an instance of
this class (or one of its subclasses) or this class (or one
of its subclasses). Default value is <i>None</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>Role</b> &minus;&minus; Each returned object shall
refer to the target object through a property with a name
that matches the value of this parameter. Default value is
<i>None</i>.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Other
parameters reffer to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>IncludeQualifiers</b>
&minus;&minus; Each object (including qualifiers on the
object and on any returned properties) shall be included as
<b>&lt;QUALIFIER&gt;</b> elements in the response. Default
value is <i>False</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>IncludeClassOrigin</b> &minus;&minus; Flag
indicating, if the <b>CLASSORIGIN</b> attribute shall be
present on all appropriate elements in each returned object.
Default value is <i>False</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>PropertyList</b> &minus;&minus; The members of the
list define one or more property names. Each returned object
shall not include elements for any properties missing from
this list. If PropertyList is an empty list, no properties
are included in each returned object. If PropertyList is
None, no additional filtering is defined. Default value is
<i>None</i>.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Association
Instance Names</b> <br>
To get a list of association <b>LMIInstanceName</b> objects,
run following:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; association_object_names = instance.reference_names(
...    ResultClass=cls,
...    Role=role)
&gt; first_association_object_name = instance.first_reference_name(
...    ResultClass=cls,
...    Role=role)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The list of
returned association instance names can be filtered by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><b>ResultClass</b>
&minus;&minus; Each returned Object Name identify an
instance of this class (or one of its subclasses) or this
class (or one of its subclasses). Default value is
<i>None</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><b>Role</b> &minus;&minus; Each returned object name
shall identify an object that refers to the target instance
through a property with a name that matches the value of
this parameter. Default value is <i>None</i>.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Indications</b>
<br>
Indication is a reaction to some specific event that occurs
in response to a change to a particular change in data.
LMIShell can perform a indication subscription, by which we
can receive such event responses.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Subscribing
to an indication</b> <br>
The LMIShell is capable of creating an indication
subscription with the filter and handler objects in one
single step. This example is based upon
<i>sblim&minus;cmpi&minus;base</i> provider.</p>

<p style="margin-left:11%; margin-top: 1em">How to
subscribe to an indication, please, follow the next
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;host&quot;, &quot;privileged_user&quot;, &quot;password&quot;)
&gt; c.subscribe_indication(
...    QueryLanguage=&quot;WQL&quot;,
...    Query='SELECT * FROM CIM_InstModification',
...    Name=&quot;cpu&quot;,
...    CreationNamespace=&quot;root/interop&quot;,
...    SubscriptionCreationClassName=&quot;CIM_IndicationSubscription&quot;,
...    FilterCreationClassName=&quot;CIM_IndicationFilter&quot;,
...    FilterSystemCreationClassName=&quot;CIM_ComputerSystem&quot;,
...    FilterSourceNamespace=&quot;root/cimv2&quot;,
...    HandlerCreationClassName=&quot;CIM_IndicationHandlerCIMXML&quot;,
...    HandlerSystemCreationClassName=&quot;CIM_ComputerSystem&quot;,
...    # destination computer, where the indications will be delivered
...    Destination=&quot;http://192.168.122.1:5988&quot;
...  )
LMIReturnValue(rval=True, rparams={}, errorstr=&quot;&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The previous
code can be simplified by omitting some optional
parameters:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em"><i>QueryLanguage</i>:
<i>DMTF:CQL</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>CreationNamespace</i>: <i>root/interop</i></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>SubscriptionCreationClassName</i>:
<i>CIM_IndicationSubscription</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>FilterCreationClassName</i>:
<i>CIM_IndicationFilter</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>FilterSystemCreationClassName</i>:
<i>CIM_ComputerSystem</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>FilterSourceNamespace</i>: <i>root/cimv2</i></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>HandlerCreationClassName</i>:
<i>CIM_IndicationHandlerCIMXML</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="86%">


<p><i>HandlerSystemCreationClassName</i>:
<i>CIM_ComputerSystem</i></p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Simplified
subscription:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c = connect(&quot;host&quot;, &quot;privileged_user&quot;, &quot;password&quot;)
&gt; c.subscribe_indication(
...    Name=&quot;cpu&quot;,
...    Query='SELECT * FROM CIM_InstModification',
...    Destination=&quot;http://192.168.122.1:5988&quot;
...  )
LMIReturnValue(rval=True, rparams={}, errorstr=&quot;&quot;)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
Make sure, that you are logged&minus;in with an account,
which has write privileges in the <i>root/interop</i>
namespace.</p>

<p style="margin-left:11%; margin-top: 1em">In this state,
we have a indication subscription created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Auto&minus;delete
subscriptions</b> <br>
By default all subscriptions created by LMIShell will be
<b>auto&minus;deleted</b>, when the shell quits. To change
this behavior, you can pass <b>Permanent=True</b> keyword
parameter to <b>LMIConnection.subscribe_indication()</b>
call, which will prevent LMIShell from deleting the
subscription.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Listing
subscribed indications</b> <br>
To list all the subscribed indications, run following
code:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.print_subscribed_indications()
...
&gt; subscribed_ind_lst = c.subscribed_indications()
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Unsubscribing
from an indications</b> <br>
By default, the subscriptions created by the shell are
auto&minus;deleted, when the shell quits.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
delete the subscriptions sooner, you can use following
methods:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.unsubscribe_indication(indication_name)
LMIReturnValue(rval=True, rparams={}, errorstr=&quot;&quot;)
&gt; c.unsubscribe_all_indications()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Indication
handler</b> <br>
In the previous example, there is a local computer specified
(the one, which runs the shell), now we need to start a
indication listener with our indication handler function
defined. This example continues (see previous one). It is
also possible to start another shell, script and start the
indication listener there.</p>

<p style="margin-left:11%; margin-top: 1em">See the
following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; def handler(ind, arg1, arg2, **kwargs):
...    exported_objects = ind.exported_objects()
...    do_something_with(exported_objects)
&gt; listener = LmiIndicationListener(&quot;0.0.0.0&quot;, listening_port)
&gt; listener.add_handler(&quot;indication&minus;name&minus;XXXXXXXX&quot;, handler, arg1, arg2, **kwargs)
&gt; listener.start()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The first
argument of the handler is <b>LMIIndication</b> object,
which contains list of methods and objects exported by the
indication. Other parameters are user specific; those
arguments need to be specified, when adding a handler to the
listener. In the example, there is a special string used in
the <b>LMIIndicationListener.add_handler()</b> call; note
the eight <b>&quot;X&quot;</b> characters. Those characters
will be replaced by random string, which is generated by the
listeners to avoid handler name clash. If you want to use
that random&minus;based string, start indication listener
first, then subscribe to an indication, so the
<i>Destination</i> property of a handler object contains
<b>&lt;schema&gt;://&lt;hostname&gt;/&lt;random&minus;based
string&gt;</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
Values</b> <br>
Method calls return an object, that represents a return
value of the given method. This type of object can be
converted into python's typical 3&minus;item tuple and
consists of 3 items:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="52%">


<p style="margin-top: 1em"><b>rval</b> &minus;&minus;
return value</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="52%">


<p><b>rparams</b> &minus;&minus; return value
parameters</p> </td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="52%">


<p><b>errorstr</b> &minus;&minus; error string, if any</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Following
example shows, how to use and convert <b>LMIReturnValue</b>
object to tuple:</p>
<pre style="margin-left:15%; margin-top: 1em">&gt; return_value = instance.MethodCall()
&gt; return_value.rval
0
&gt; return_value.rparams
[]
&gt; return_value.errorstr

&gt; (rval, rparams, errorstr) = return_value
&gt; rval
0
&gt; rparams
[]
&gt; errorstr

&gt;</pre>

<p style="margin-left:11%; margin-top: 1em"><b>Interactive
Interface</b> <br>
This section covers some features, that are present in the
interactive interface or are related to the LMIShell.</p>

<p style="margin-left:11%; margin-top: 1em"><b>History</b>
<br>
When using the interactive interface of the LMIShell, you
can use up/down arrows to navigate in history of all the
commands you previously used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Clearing the
history</b> <br>
If you want to clear the history, simply run:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; clear_history()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Reversed
search</b> <br>
The LMIShell can also search in the history of commands by
hitting <b>&lt;ctrl+r&gt;</b> and typing the command prefix
(as your default shell does). See following:</p>

<pre style="margin-left:15%; margin-top: 1em">(reverse&minus;i&minus;search)'connect': c = connect(&quot;host&quot;, &quot;username&quot;)</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Exception
handling</b> <br>
Exception handling by the shell can be turned off
&minus;&minus; since then, all the exceptions need to be
handled by your code. By default, LMIShell <b>handles</b>
the exceptions and uses C&minus;like return values (See
section <b>return_values</b>) To allow all the exceptions to
propagate to your code, run this:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; use_exceptions()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">To turn
exception handling by the shell back on, run this:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; use_exceptions(False)
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Cache</b>
<br>
The LMIShell's connection objects use a temporary cache for
storing CIM class names and CIM classes to save network
communication.</p>

<p style="margin-left:11%; margin-top: 1em">The cache can
be cleared, see following example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.clear_cache()
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">The cache can
be also turned off, see next example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; c.use_cache(False)
&gt;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Tab&minus;completion</b>
<br>
Interactive interface also supports tab&minus;completion for
basic programming structures and also for CIM objects (such
as namespace, classes, methods and properties completion,
etc).</p>

<p style="margin-left:11%; margin-top: 1em">Following code
shows few examples:</p>
<pre style="margin-left:15%; margin-top: 1em">&gt; c = conn&lt;tab&gt;
&gt; c = connect(

&gt; lmi_service_class = c.root.c&lt;tab&gt;
&gt; lmi_service_class = c.root.cimv2
&gt; lmi_service_class = c.root.cimv2.lmi_ser&lt;tab&gt;
&gt; lmi_service_class = c.root.cimv2.LMI_Service

&gt; sshd_service = lmi_s&lt;tab&gt;
&gt; sshd_service = lmi_service_class

&gt; sshd_service.Stat&lt;tab&gt;
&gt; sshd_service.Status

&gt; sshd_service.Res&lt;tab&gt;
&gt; sshd_service.RestartService(


&gt; lmi_service_class.Req&lt;tab&gt;
&gt; lmi_service_class.RequestedStateChangeValues
&gt; lmi_service_class.RequestesStateChangeValues.Sh&lt;tab&gt;
&gt; lmi_service_class.RequestedStateChangeValues.Shutdown
&gt; # similar for method calls, as well
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Builtin
features</b> <br>
This section describes built&minus;in features of the
LMIShell.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration
file</b> <br>
The LMIShell has a tiny configuration file with location
<b>~/.lmishellrc</b>. In configuration file, you can set
these properties:</p>

<pre style="margin-left:15%; margin-top: 1em"># location of the history used by interactive mode
history_file = &quot;~/.lmishell_history&quot;
# length of history file, &minus;1 for unlimited
history_length = &minus;1
# default value for cache usage
use_cache = True
# default value for exceptions
use_exceptions = False</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Inspecting a
script</b> <br>
If you want to inspect a script after it has been
interpreted by the LMIShell, run this:</p>

<pre style="margin-left:15%; margin-top: 1em">$ lmishell &minus;i some_script.lmi
# some stuff done
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
Prefered extension of LMIShell's scripts is <b>.lmi</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>LMI Is
Instance</b> <br>
LMIShell is able to verify, if a <b>LMIInstance</b> or
<b>LMIInstanceName</b> object passed to
<b>lmi_isinstance()</b> is a instance of
<b>LMIClass</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The function is
similar to python's <b>isinstance()</b>:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; lmi_isinstance(inst, cls)
True/False
&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>LMI
Associators</b> <br>
LMIShell can speed up associated objects' traversal by
manual joining, instead of calling
<b>LMIInstance.associators()</b>. The call needs to get a
list of <b>association</b> classes, for which the referenced
objects will be joined. The list must contain objects of
<b>LMIClass</b>.</p>

<p style="margin-left:11%; margin-top: 1em">See following
example:</p>

<pre style="margin-left:15%; margin-top: 1em">&gt; associators = lmi_associators(list_of_association_classes)
&gt;</pre>


<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Peter Hatina
&lt;phatina@redhat.com&gt;</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">2012-2013, Red
Hat Inc.</p>
<hr>
</body>
</html>
