<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:05:06 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MIGRATE-DS.PL</title>

</head>
<body>

<h1 align="center">MIGRATE-DS.PL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">migrate&minus;ds.pl
&minus; Directory Server Migration script</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>migrate&minus;ds.pl</b>
[&minus;&minus;options] <b>&minus;&minus;</b> [args]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Directory
Server Migration script - migrates Directory Server from
older releases to the current release.</p>

<p style="margin-left:11%; margin-top: 1em">This script
will copy instances (data and configuration) from the old
server root directory to their new FHS locations. This
script does a copy only &minus; the data in the old
instances will be left untouched. The old instances must be
shutdown first to ensure that the databases are copied
safely. During migration your migrated instances will be
started.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A summary of
options is included below:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;help</b></p></td>
<td width="2%"></td>
<td width="18%">


<p>This message</p></td>
<td width="60%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">Print the version and exit</p>

<p style="margin-left:11%;"><b>&minus;&minus;debug</b></p>

<p style="margin-left:22%;">Turn on debugging</p>


<p style="margin-left:11%;"><b>&minus;&minus;oldsroot</b></p>

<p style="margin-left:22%;">The old server root directory
to migrate from</p>


<p style="margin-left:11%;"><b>&minus;&minus;actualsroot</b>
This is the old location of the old server root. <b><br>
&minus;&minus;silent</b></p>

<p style="margin-left:22%;">Use silent setup &minus; no
user input</p>


<p style="margin-left:11%;"><b>&minus;&minus;file</b>=<i>name</i></p>

<p style="margin-left:22%;">Use the file &rsquo;name&rsquo;
in .inf format to supply the default answers</p>


<p style="margin-left:11%;"><b>&minus;&minus;keepcache</b></p>

<p style="margin-left:22%;">Do not delete the temporary
.inf file generated by this program</p>


<p style="margin-left:11%;"><b>&minus;&minus;logfile</b></p>

<p style="margin-left:22%;">Log migration messages to this
file &minus; otherwise, a temp file will be used</p>


<p style="margin-left:11%;"><b>&minus;&minus;instance</b></p>

<p style="margin-left:22%;">By default, all directory
server instances will be migrated. You can use this argument
to specify one or more (e.g. <b>&minus;i</b> slapd&minus;foo
<b>&minus;i</b> slapd&minus;bar) if you do not want to
migrate all of them.</p>

<p style="margin-left:11%;"><b>&minus;&minus;cross</b></p>

<p style="margin-left:22%;">See below.</p>

<p style="margin-left:11%; margin-top: 1em">For all
options, you can also use the short name e.g.
<b>&minus;h</b>, <b>&minus;d</b>, etc. For the
<b>&minus;d</b> argument, specifying it more than once will
increase the debug level e.g. <b>&minus;ddddd</b></p>

<p style="margin-left:11%; margin-top: 1em">args: You can
supply default .inf data in this format:</p>


<p style="margin-left:22%; margin-top: 1em">section.param=value</p>

<p style="margin-left:11%; margin-top: 1em">e.g.</p>


<p style="margin-left:22%; margin-top: 1em">General.FullMachineName=foo.example.com</p>

<p style="margin-left:11%; margin-top: 1em">or</p>


<p style="margin-left:22%; margin-top: 1em">&quot;slapd.Suffix=dc=example,
dc=com&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Values passed
in this manner will override values in an .inf file given
with the <b>&minus;f</b> argument.</p>

<p style="margin-left:11%; margin-top: 1em">actualsroot:
This is used when you must migrate from one machine to
another. The usual case is that you have mounted the old
server root on a different root directory, either via a
network mount, or by copying a tarball made using a relative
directory on the source machine to the destination machine
and untarring it.</p>

<p style="margin-left:11%; margin-top: 1em">For example:
machineA is a 32bit machine, and you want to migrate your
servers to a new 64bit machine. Lets assume your old server
root on machineA was /opt/myds, and your new machine also
wants to use a server root of /opt/myds. There are a couple
of different ways to proceed. Either make a tarball of
opt/myds from machineA using a relative path (i.e. NOT
/opt/myds) or use NFS to mount machineA:/opt/myds on a
different mount point (e.g.
machineB:/migration/opt/myds).</p>

<p style="margin-left:11%; margin-top: 1em">If you do this,
you should give the old &quot;real&quot; server root
(/opt/myds) as the <b>&minus;&minus;actualsroot</b>
argument, and use /migration/opt/myds for the
<b>&minus;&minus;oldsroot</b> argument. That is, the
oldsroot is the physical location of the files on disk. The
actualsroot is the old value of the server root on the
source machine.</p>

<p style="margin-left:11%; margin-top: 1em">cross: Also
known as crossplatform, or &rsquo;c&rsquo;, or
&rsquo;x&rsquo;. This is when the source machine is a
different architecture than the destination machine. In this
case, only certain data will be available for migration.
Changelog information will not be migrated, and replicas
will need to be reinitialized (if migrating masters or
hubs). This type of migration requires that all of your old
databases have been dumped to LDIF format, and the LDIF file
must be in the default database directory (usually
/opt/fedora&minus;ds/slapd&minus;instance/db), and the LDIF
file must have the same name as the database instance
directory, with a &quot;.ldif&quot;. For example, if you
have</p>


<p style="margin-left:22%; margin-top: 1em">/opt/fedora&minus;ds/slapd&minus;instance/db/userRoot/
<br>
and <br>

/opt/fedora&minus;ds/slapd&minus;instance/db/NetscapeRoot/</p>

<p style="margin-left:11%; margin-top: 1em">you must first
use db2ldif to export these databases to LDIF e.g.</p>

<p style="margin-left:22%; margin-top: 1em">cd
/opt/fedora&minus;ds/slapd&minus;instance <br>
./db2ldif <b>&minus;n</b> userRoot <b>&minus;a</b>
/opt/fedora&minus;ds/slapd&minus;instance/db/userRoot.ldif
and <br>
./db2ldif <b>&minus;n</b> NetscapeRoot <b>&minus;a</b>
/opt/fedora&minus;ds/slapd&minus;instance/db/NetscapeRoot.ldif</p>

<p style="margin-left:11%; margin-top: 1em">Then you must
somehow make your old server root directory available on the
destination machine, either by creating a tar archive on the
source and copying it to the destination, or by network
mounting the source directory on the destination
machine.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">migrate-ds.pl
was written by the 389 Project.</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
https://fedorahosted.org/389/newticket.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2008 Red Hat, Inc. <br>
This manual page was written by Michele Baldessari
&lt;michele@pupazzo.org&gt;, for the Debian project (but may
be used by others). <br>
This is free software. You may redistribute copies of it
under the terms of the Directory Server license found in the
LICENSE file of this software distribution. This license is
essentially the GNU General Public License version 2 with an
exception for plug-in distribution.</p>
<hr>
</body>
</html>
