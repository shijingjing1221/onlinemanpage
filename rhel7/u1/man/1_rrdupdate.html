<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:20:07 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>RRDUPDATE</title>

</head>
<body>

<h1 align="center">RRDUPDATE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rrdupdate
&minus; Store a new set of values into the RRD</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>rrdtool</b>
{<b>update</b> | <b>updatev</b>} <i>filename</i>
[<b>&minus;&minus;template</b>|<b>&minus;t&nbsp;</b><i>ds-name</i>[<b>:</b><i>ds-name</i>]...]
[<b>&minus;&minus;daemon</b>|<b>&minus;d&nbsp;</b><i>address</i>]
[<b>&minus;&minus;</b>]
<b>N</b>|<i>timestamp</i><b>:</b><i>value</i>[<b>:</b><i>value</i>...]
<i>at-timestamp</i><b>@</b><i>value</i>[<b>:</b><i>value</i>...]
[<i>timestamp</i><b>:</b><i>value</i>[<b>:</b><i>value</i>...]&nbsp;...]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>update</b> function feeds new data values into an
<b><small>RRD</small></b> . The data is time aligned
(interpolated) according to the properties of the
<b><small>RRD</small></b> to which the data is written.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>updatev</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>This alternate version of <b>update</b> takes the same
arguments and performs the same function. The <i>v</i>
stands for <i>verbose</i>, which describes the output
returned. <b>updatev</b> returns a list of any and all
consolidated data points (CDPs) written to disk as a result
of the invocation of update. The values are indexed by
timestamp (time_t), <small>RRA</small> (consolidation
function and PDPs per <small>CDP</small> ), and data source
(name). Note that depending on the arguments of the current
and previous call to update, the list may have no entries or
a large number of entries.</p></td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Since
<b>updatev</b> requires direct disk access, the
<b>&minus;&minus;daemon</b> option cannot be used with this
command.</p>

<p style="margin-left:11%;"><i>filename</i></p>

<p style="margin-left:23%;">The name of the
<b><small>RRD</small></b> you want to update.</p>


<p style="margin-left:11%;"><b>&minus;&minus;template</b>|<b>&minus;t</b>
<i>ds-name</i>[<b>:</b><i>ds-name</i>]...</p>

<p style="margin-left:23%;">By default, the <b>update</b>
function expects its data input in the order the data
sources are defined in the <small>RRD</small> , excluding
any <small>COMPUTE</small> data sources (i.e. if the third
data source <b><small>DST</small></b> is
<small>COMPUTE</small> , the third input value will be
mapped to the fourth data source in the
<b><small>RRD</small></b> and so on). This is not very error
resistant, as you might be sending the wrong data into an
<small>RRD</small> .</p>

<p style="margin-left:23%; margin-top: 1em">The template
switch allows you to specify which data sources you are
going to update and in which order. If the data sources
specified in the template are not available in the
<small>RRD</small> file, the update process will abort with
an error message.</p>

<p style="margin-left:23%; margin-top: 1em">While it
appears possible with the template switch to update data
sources asynchronously, <b>RRDtool</b> implicitly assigns
non-COMPUTE data sources missing from the template the
<i>*UNKNOWN*</i> value.</p>

<p style="margin-left:23%; margin-top: 1em">Do not specify
a value for a <small>COMPUTE <b>DST</b></small> in the
<b>update</b> function. If this is done accidentally (and
this can only be done using the template switch),
<b>RRDtool</b> will ignore the value specified for the
<small>COMPUTE <b>DST</b></small> .</p>


<p style="margin-left:11%;"><b>&minus;&minus;daemon</b>|<b>&minus;d</b>
<i>address</i></p>

<p style="margin-left:23%;">If given, <b>RRDTool</b> will
try to connect to the caching daemon rrdcached at
<i>address</i> and will fail if the connection cannot be
established. If the connection is successfully established
the values will be sent to the daemon instead of accessing
the files directly.</p>

<p style="margin-left:23%; margin-top: 1em">For a list of
accepted formats, see the <b>&minus;l</b> option in the
rrdcached manual.</p>


<p style="margin-left:11%;"><b>N</b>|<i>timestamp</i><b>:</b><i>value</i>[<b>:</b><i>value</i>...]</p>

<p style="margin-left:23%;">The data used for updating the
<small>RRD</small> was acquired at a certain time. This time
can either be defined in seconds since
1970&minus;01&minus;01 or by using the letter
&rsquo;N&rsquo;, in which case the update time is set to be
the current time. Negative time values are subtracted from
the current time. An <small>AT_STYLE TIME
SPECIFICATION</small> (see the <i>rrdfetch</i>
documentation) may also be used by delimiting the end of the
time specification with the &rsquo;@&rsquo; character
instead of a &rsquo;:&rsquo;. Getting the timing right to
the second is especially important when you are working with
data-sources of type <b><small>COUNTER</small></b> ,
<b><small>DERIVE</small></b> or
<b><small>ABSOLUTE</small></b> .</p>

<p style="margin-left:23%; margin-top: 1em">When using
negative time values, options and data have to be separated
by two dashes (<b>&minus;&minus;</b>), else the time value
would be parsed as an option. See below for an example.</p>

<p style="margin-left:23%; margin-top: 1em">When using
negative time values, options and data have to be separated
by two dashes (<b>&minus;&minus;</b>), else the time value
would be parsed as an option. See below for an example.</p>

<p style="margin-left:23%; margin-top: 1em">The remaining
elements of the argument are <small>DS</small> updates. The
order of this list is the same as the order the data sources
were defined in the <small>RRA</small> . If there is no data
for a certain data-source, the letter <b>U</b> (e.g.,
N:0.1:U:1) can be specified.</p>

<p style="margin-left:23%; margin-top: 1em">The format of
the value acquired from the data source is dependent on the
data source type chosen. Normally it will be numeric, but
the data acquisition modules may impose their very own
parsing of this parameter as long as the colon (<b>:</b>)
remains the data source value separator.</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables may be used to change the behavior of
<tt>&quot;rrdtool&nbsp;update&quot;</tt>: <b><small><br>
RRDCACHED_ADDRESS</small></b></p>

<p style="margin-left:17%;">If this environment variable is
set it will have the same effect as specifying the
<tt>&quot;&minus;&minus;daemon&quot;</tt> option on the
command line. If both are present, the command line argument
takes precedence.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p style="margin-top: 1em"><tt>&quot;rrdtool update
demo1.rrd N:3.44:3.15:U:23&quot;</tt></p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Update the
database file demo1.rrd with 3 known and one
<i>*UNKNOWN*</i> value. Use the current time as the update
time.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;rrdtool update
demo2.rrd 887457267:U 887457521:22
887457903:2.7&quot;</tt></p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Update the
database file demo2.rrd which expects data from a single
data-source, three times. First with an <i>*UNKNOWN*</i>
value then with two regular readings. The update interval
seems to be around 300 seconds.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="61%">


<p style="margin-top: 1em"><tt>&quot;rrdtool update
demo3.rrd &minus;&minus; &minus;5:21 N:42&quot;</tt></p></td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Update the
database file demo3.rrd two times, using five seconds in the
past and the current time as the update times.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="80%">


<p style="margin-top: 1em"><tt>&quot;rrdtool update
&minus;&minus;cache /var/lib/rrd/demo3.rrd
N:42&quot;</tt></p> </td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Update the file
<tt>&quot;/var/lib/rrd/demo3.rrd&quot;</tt> with a single
data source, using the current time. If the caching daemon
cannot be reached, do <b>not</b> fall back to direct file
access.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;rrdtool update
&minus;&minus;daemon unix:/tmp/rrdd.sock demo4.rrd
N:23&quot;</tt></p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Use the
<small>UNIX</small> domain socket
<tt>&quot;/tmp/rrdd.sock&quot;</tt> to contact the caching
daemon. If the caching daemon is not available, update the
file <tt>&quot;demo4.rrd&quot;</tt> directly.
<b><small>WARNING:</small></b> Since a relative path is
specified, the following disturbing effect may occur: If the
daemon is available, the file relative to the working
directory <b>of the daemon</b> is used. If the daemon is not
available, the file relative to the current working
directory of the invoking process is used. <b>This may
update two different files depending on whether the daemon
could be reached or not.</b> Don&rsquo;t do relative paths,
kids!</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Tobias Oetiker
&lt;tobi@oetiker.ch&gt;, Florian Forster
&lt;octo&nbsp;at&nbsp;verplant.org&gt;</p>
<hr>
</body>
</html>
