<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:26:20 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CAP_INIT</title>

</head>
<body>

<h1 align="center">CAP_INIT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#CONFORMING TO">CONFORMING TO</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">cap_init,
cap_free, cap_dup &minus; capability data object storage
management</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;sys/capability.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>cap_t
cap_init(void);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
cap_free(void *</b><i>obj_d</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>cap_t
cap_dup(cap_t</b> <i>cap_p</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em">Link with
<i>-lcap</i>.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
capabilities associated with a file or process are never
edited directly. Instead, working storage is allocated to
contain a representation of the capability state.
Capabilities are edited and manipulated only within this
working storage area. Once editing of the capability state
is complete, the updated capability state is used to replace
the capability state associated with the file or
process.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap_init</b>()
creates a capability state in working storage and returns a
pointer to the capability state. The initial value of all
flags are cleared. The caller should free any releasable
memory, when the capability state in working storage is no
longer required, by calling <b>cap_free</b>() with the
<i>cap_t</i> as an argument.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap_free</b>()
liberates any releasable memory that has been allocated to
the capability state identified by <i>obj_d</i>. The
<i>obj_d</i> argument may identify either a <i>cap_t</i>
entity, or a <i>char *</i> entity allocated by the
<b>cap_to_text</b>() function.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap_dup</b>()
returns a duplicate capability state in working storage
given by the source object <i>cap_p</i>, allocating any
memory necessary, and returning a pointer to the newly
created capability state. Once duplicated, no operation on
either capability state affects the other in any way. When
the duplicated capability state in working storage is no
longer required, the caller should free any releasable
memory by calling <b>cap_free</b>() with the <i>cap_t</i> as
an argument.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>cap_init</b>()
and <b>cap_dup</b>() return a non-NULL value on success, and
NULL on failure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap_free</b>()
returns zero on success, and &minus;1 on failure.</p>

<p style="margin-left:11%; margin-top: 1em">On failure,
<i>errno</i> is set to <b>EINVAL</b> or <b>ENOMEM</b>.</p>

<h2>CONFORMING TO
<a name="CONFORMING TO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These functions
are specified in the withdrawn POSIX.1e draft
specification.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>libcap</b>(3),
<b>cap_clear</b>(3), <b>cap_copy_ext</b>(3),
<b>cap_from_text</b>(3), <b>cap_get_file</b>(3),
<b>cap_get_proc</b>(3), <b>capabilities</b>(7)</p>
<hr>
</body>
</html>
