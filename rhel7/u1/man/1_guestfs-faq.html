<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:53:36 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>guestfs-faq</title>

</head>
<body>

<h1 align="center">guestfs-faq</h1>

<a href="#NAME">NAME</a><br>
<a href="#ABOUT LIBGUESTFS">ABOUT LIBGUESTFS</a><br>
<a href="#GETTING HELP AND REPORTING BUGS">GETTING HELP AND REPORTING BUGS</a><br>
<a href="#COMMON PROBLEMS">COMMON PROBLEMS</a><br>
<a href="#DOWNLOADING, INSTALLING, COMPILING LIBGUESTFS">DOWNLOADING, INSTALLING, COMPILING LIBGUESTFS</a><br>
<a href="#SPEED, DISK SPACE USED BY LIBGUESTFS">SPEED, DISK SPACE USED BY LIBGUESTFS</a><br>
<a href="#PROBLEMS OPENING DISK IMAGES">PROBLEMS OPENING DISK IMAGES</a><br>
<a href="#USING LIBGUESTFS IN YOUR OWN PROGRAMS">USING LIBGUESTFS IN YOUR OWN PROGRAMS</a><br>
<a href="#DEBUGGING LIBGUESTFS">DEBUGGING LIBGUESTFS</a><br>
<a href="#DESIGN/INTERNALS OF LIBGUESTFS">DESIGN/INTERNALS OF LIBGUESTFS</a><br>
<a href="#DEVELOPERS">DEVELOPERS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">guestfs&minus;faq
&minus; libguestfs Frequently Asked Questions (FAQ)</p>

<h2>ABOUT LIBGUESTFS
<a name="ABOUT LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>What is
libguestfs?</b> <br>
libguestfs is a way to create, access and modify disk
images. You can look inside disk images, modify the files
they contain, create them from scratch, resize them, and
much more. It&rsquo;s especially useful from scripts and
programs and from the command line.</p>

<p style="margin-left:11%; margin-top: 1em">libguestfs is a
C library (hence &quot;lib&minus;&quot;), and a set of tools
built on this library, and bindings for many common
programming languages.</p>

<p style="margin-left:11%; margin-top: 1em">For more
information about what libguestfs can do read the
introduction on the home page (http://libguestfs.org).</p>

<p style="margin-left:11%; margin-top: 1em"><b>What are the
virt tools?</b> <br>
Virt tools (website: http://virt&minus;tools.org) are a
whole set of virtualization management tools aimed at system
administrators. Some of them come from libguestfs, some from
libvirt and many others from other open source projects. So
virt tools is a superset of libguestfs. However libguestfs
comes with many important tools. See http://libguestfs.org
for a full list.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Does
libguestfs need { libvirt / <small>KVM /</small> Red Hat /
Fedora }?</b> <br>
No!</p>

<p style="margin-left:11%; margin-top: 1em">libvirt is not
a requirement for libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">libguestfs
works with any disk image, including ones created in VMware,
<small>KVM,</small> qemu, VirtualBox, Xen, and many other
hypervisors, and ones which you have created from
scratch.</p>

<p style="margin-left:11%; margin-top: 1em">Red&nbsp;Hat
sponsors (ie. pays for) development of libguestfs and a huge
number of other open source projects. But you can run
libguestfs and the virt tools on many different Linux
distros and Mac <small>OS X.</small> We try our best to
support all Linux distros as first-class citizens. Some virt
tools have been ported to Windows.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How does
libguestfs compare to other tools?</b> <i><br>
vs. kpartx</i></p>

<p style="margin-left:17%;">Libguestfs takes a different
approach from kpartx. kpartx needs root, and mounts
filesystems on the host kernel (which can be insecure
&minus; see &quot; <small>SECURITY&quot;</small> in
<i>guestfs</i>(3)). Libguestfs isolates your host kernel
from guests, is more flexible, scriptable, supports
<small>LVM,</small> doesn&rsquo;t require root, is isolated
from other processes, and cleans up after itself. Libguestfs
is more than just file access because you can use it to
create images from scratch.</p>

<p style="margin-left:11%;"><i>vs. vdfuse</i></p>

<p style="margin-left:17%;">vdfuse is like kpartx but for
VirtualBox images. See the kpartx comparison above. You can
use libguestfs on the partition files exposed by vdfuse,
although it&rsquo;s not necessary since libguestfs can
access VirtualBox images directly.</p>

<p style="margin-left:11%;"><i>vs. qemu-nbd</i></p>

<p style="margin-left:17%;"><small>NBD</small> (Network
Block Device) is a protocol for exporting block devices over
the network. qemu-nbd is an <small>NBD</small> server which
can handle any disk format supported by qemu (eg. raw,
qcow2). You can use libguestfs and qemu-nbd or nbdkit
together to access block devices over the network, for
example: <tt>&quot;guestfish &minus;a
nbd://remote&quot;</tt></p>

<p style="margin-left:11%;"><i>vs. mounting filesystems in
the host</i></p>

<p style="margin-left:17%;">Mounting guest filesystems in
the host is insecure and should be avoided completely for
untrusted guests. Use libguestfs to provide a layer of
protection against filesystem exploits. See also
<i>guestmount</i>(1).</p>

<p style="margin-left:11%;"><i>vs. parted</i></p>

<p style="margin-left:17%;">Libguestfs supports
<small>LVM.</small> Libguestfs uses parted and provides most
parted features through the libguestfs
<small>API.</small></p>

<h2>GETTING HELP AND REPORTING BUGS
<a name="GETTING HELP AND REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>How do I
know what version I&rsquo;m using?</b> <br>
The simplest method is:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;version</pre>


<p style="margin-left:11%; margin-top: 1em">Libguestfs
development happens along an unstable branch and we
periodically create a stable branch which we backport stable
patches to. To find out more, read &quot; <small>LIBGUESTFS
VERSION NUMBERS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
get help? <br>
What mailing lists or chat rooms are available?</b> <br>
If you are a Red&nbsp;Hat customer using Red Hat Enterprise
Linux, please contact Red&nbsp;Hat&nbsp;Support:
http://redhat.com/support</p>

<p style="margin-left:11%; margin-top: 1em">There is a
mailing list, mainly for development, but users are also
welcome to ask questions about libguestfs and the virt
tools:
https://www.redhat.com/mailman/listinfo/libguestfs</p>

<p style="margin-left:11%; margin-top: 1em">You can also
talk to us on <small>IRC</small> channel
<tt>&quot;#libguestfs&quot;</tt> on FreeNode. We&rsquo;re
not always around, so please stay in the channel after
asking your question and someone will get back to you.</p>

<p style="margin-left:11%; margin-top: 1em">For other virt
tools (not ones supplied with libguestfs) there is a general
virt tools mailing list:
https://www.redhat.com/mailman/listinfo/virt&minus;tools&minus;list</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
report bugs?</b> <br>
Please use the following link to enter a bug in
Bugzilla:</p>


<p style="margin-left:11%; margin-top: 1em">https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">Include as much
detail as you can and a way to reproduce the problem.</p>

<p style="margin-left:11%; margin-top: 1em">Include the
full output of
<i>libguestfs&minus;test&minus;tool</i>(1).</p>

<h2>COMMON PROBLEMS
<a name="COMMON PROBLEMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See also &quot;
<small>LIBGUESTFS GOTCHAS&quot;</small> in <i>guestfs</i>(3)
for some &quot;gotchas&quot; with using the libguestfs
<small>API.</small></p>

<p style="margin-left:11%; margin-top: 1em"><b>&quot;Could
not allocate dynamic translator buffer&quot;</b> <br>
This obscure error is in fact an SELinux failure. You have
to enable the following SELinux boolean:</p>

<pre style="margin-left:11%; margin-top: 1em"> setsebool &minus;P virt_use_execmem=on</pre>


<p style="margin-left:11%; margin-top: 1em">For more
information see
https://bugzilla.redhat.com/show_bug.cgi?id=806106.</p>

<p style="margin-left:11%; margin-top: 1em"><b>&quot;child
process died unexpectedly&quot;</b> <br>
[This error message was changed in libguestfs 1.21.18 to
something more explanatory.]</p>

<p style="margin-left:11%; margin-top: 1em">This error
indicates that qemu failed or the host kernel could not
boot. To get further information about the failure, you have
to run:</p>

<pre style="margin-left:11%; margin-top: 1em"> libguestfs&minus;test&minus;tool</pre>


<p style="margin-left:11%; margin-top: 1em">If, after using
this, you still don&rsquo;t understand the failure, contact
us (see previous section).</p>

<p style="margin-left:11%; margin-top: 1em"><b>libguestfs:
error: cannot find any suitable libguestfs supermin, fixed
or old-style appliance on <small>LIBGUESTFS_PATH</small>
<br>
febootstrap-supermin-helper: ext2: parent directory not
found <br>
supermin-helper: ext2: parent directory not found</b> <br>
[This issue is fixed permanently in libguestfs &ge;
1.26.]</p>

<p style="margin-left:11%; margin-top: 1em">If you see any
of these errors on Debian/Ubuntu, you need to run the
following command:</p>

<pre style="margin-left:11%; margin-top: 1em"> sudo update&minus;guestfs&minus;appliance</pre>



<p style="margin-left:11%; margin-top: 1em"><b>&quot;Permission
denied&quot; when running libguestfs as root</b> <br>
You get a permission denied error when opening a disk image,
even though you are running libguestfs as root.</p>

<p style="margin-left:11%; margin-top: 1em">This is caused
by libvirt, and so only happens when using the libvirt
backend. When run as root, libvirt decides to run the qemu
appliance as user <tt>&quot;qemu.qemu&quot;</tt>.
Unfortunately this usually means that qemu cannot open disk
images, especially if those disk images are owned by root,
or are present in directories which require root access.</p>

<p style="margin-left:11%; margin-top: 1em">There is a bug
open against libvirt to fix this:
https://bugzilla.redhat.com/show_bug.cgi?id=1045069</p>

<p style="margin-left:11%; margin-top: 1em">You can work
around this by one of the following methods:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="45%">


<p>Switch to the direct backend:</p></td>
<td width="38%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> export LIBGUESTFS_BACKEND=direct</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Don&rsquo;t run libguestfs as
root.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Chmod the disk image and any parent directories so that
the qemu user can access them.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>(Nasty) Edit <tt>&quot;/etc/libvirt/qemu.conf&quot;</tt>
and change the <tt>&quot;user&quot;</tt> setting.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>execl:
/init: Permission denied <br>
Note:</b> If this error happens when you are using a distro
package of libguestfs (eg. from Fedora, Debian, etc) then
file a bug against the distro. This is not an error which
normal users should ever see if the distro package has been
prepared correctly.</p>

<p style="margin-left:11%; margin-top: 1em">This error
happens during the supermin boot phase of starting the
appliance:</p>

<pre style="margin-left:11%; margin-top: 1em"> supermin: mounting new root on /root
 supermin: chroot
 execl: /init: Permission denied
 supermin: debug: listing directory /
 [...followed by a lot of debug output...]</pre>


<p style="margin-left:11%; margin-top: 1em">This is a
complicated bug related to <i>supermin</i>(1) appliances.
The appliance is constructed by copying files like
<tt>&quot;/bin/bash&quot;</tt> and many libraries from the
host. The file <tt>&quot;hostfiles&quot;</tt> lists the
files that should be copied from the host into the
appliance. If some files don&rsquo;t exist on the host then
they are missed out, but if these files are needed in order
to (eg) run <tt>&quot;/bin/bash&quot;</tt> then you&rsquo;ll
see the above error.</p>

<p style="margin-left:11%; margin-top: 1em">Diagnosing the
problem involves studying the libraries needed by
<tt>&quot;/bin/bash&quot;</tt>, ie:</p>

<pre style="margin-left:11%; margin-top: 1em"> ldd /bin/bash</pre>


<p style="margin-left:11%; margin-top: 1em">comparing that
with <tt>&quot;hostfiles&quot;</tt>, with the files actually
available in the host filesystem, and with the debug output
printed in the error message. Once you&rsquo;ve worked out
which file is missing, install that file using your package
manager and try again.</p>

<p style="margin-left:11%; margin-top: 1em">You should also
check that files like <tt>&quot;/init&quot;</tt> and
<tt>&quot;/bin/bash&quot;</tt> (in the appliance) are
executable. The debug output shows file modes.</p>

<h2>DOWNLOADING, INSTALLING, COMPILING LIBGUESTFS
<a name="DOWNLOADING, INSTALLING, COMPILING LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Where can I
get the latest binaries for ...?</b> <br>
Fedora &ge; 11</p>

<p style="margin-left:17%;">Use:</p>

<pre style="margin-left:17%; margin-top: 1em"> yum install '*guestf*'</pre>


<p style="margin-left:17%; margin-top: 1em">For the latest
builds, see:
http://koji.fedoraproject.org/koji/packageinfo?packageID=8391</p>

<p style="margin-left:11%;">Red Hat Enterprise Linux</p>

<p style="margin-left:17%;"><small>RHEL 5</small></p>

<p style="margin-left:23%;">The version shipped in official
<small>RHEL 5</small> is very old and should not be used
except in conjunction with virt&minus;v2v. Use the
up-to-date libguestfs 1.20 package in <small>EPEL 5:</small>
https://fedoraproject.org/wiki/EPEL</p>

<p style="margin-left:17%;"><small>RHEL 6</small></p>

<p style="margin-left:23%;">It is part of the default
install. On <small>RHEL 6</small> and 7 (only) you have to
install <tt>&quot;libguestfs&minus;winsupport&quot;</tt> to
get Windows guest support.</p>

<p style="margin-left:17%;"><small>RHEL 7</small></p>

<p style="margin-left:23%;">It will be part of the default
install, and based on libguestfs&nbsp;1.22. You will need to
install <tt>&quot;libguestfs&minus;winsupport&quot;</tt>
separately to get Windows guest support.</p>

<p style="margin-left:11%;">Debian and Ubuntu</p>

<p style="margin-left:17%;">For libguestfs &lt; 1.26, after
installing libguestfs you need to do:</p>

<pre style="margin-left:17%; margin-top: 1em"> sudo update&minus;guestfs&minus;appliance</pre>


<p style="margin-left:17%; margin-top: 1em">(This script
has been removed on Debian/Ubuntu with libguestfs &ge; 1.26
and instead the appliance is built on demand.)</p>

<p style="margin-left:17%; margin-top: 1em">On Ubuntu
only:</p>

<pre style="margin-left:17%; margin-top: 1em"> sudo chmod 0644 /boot/vmlinuz*</pre>


<p style="margin-left:17%; margin-top: 1em">You may need to
add yourself to the <tt>&quot;kvm&quot;</tt> group:</p>

<pre style="margin-left:17%; margin-top: 1em"> sudo usermod &minus;a &minus;G kvm yourlogin</pre>


<p style="margin-left:17%;">Debian Squeeze (6)</p>

<p style="margin-left:23%;">Hilko Bengen has built
libguestfs in squeeze backports:
http://packages.debian.org/search?keywords=guestfs&amp;searchon=names&amp;section=all&amp;suite=squeeze&minus;backports</p>

<p style="margin-left:17%;">Debian Wheezy and later
(7+)</p>

<p style="margin-left:23%;">Hilko Bengen supports
libguestfs on Debian. Official Debian packages are
available:
http://packages.debian.org/search?keywords=libguestfs</p>

<p style="margin-left:17%;">Ubuntu</p>

<p style="margin-left:23%;">We don&rsquo;t have a full time
Ubuntu maintainer, and the packages supplied by Canonical
(which are outside our control) are sometimes broken.</p>

<p style="margin-left:23%; margin-top: 1em">Canonical
decided to change the permissions on the kernel so that
it&rsquo;s not readable except by root. This is completely
stupid, but they won&rsquo;t change it
(https://bugs.launchpad.net/ubuntu/+source/linux/+bug/759725).
So every user should do this:</p>

<pre style="margin-left:23%; margin-top: 1em"> sudo chmod 0644 /boot/vmlinuz*</pre>


<p style="margin-left:23%;">Ubuntu 12.04</p>

<p style="margin-left:29%;">libguestfs in this version of
Ubuntu works, but you need to update febootstrap and seabios
to the latest versions.</p>

<p style="margin-left:29%; margin-top: 1em">You need
febootstrap &ge; 3.14&minus;2 from:
http://packages.ubuntu.com/precise/febootstrap</p>

<p style="margin-left:29%; margin-top: 1em">After
installing or updating febootstrap, rebuild the
appliance:</p>

<pre style="margin-left:29%; margin-top: 1em"> sudo update&minus;guestfs&minus;appliance</pre>


<p style="margin-left:29%; margin-top: 1em">You need
seabios &ge; 0.6.2&minus;0ubuntu2.1 or &ge;
0.6.2&minus;0ubuntu3 from:
http://packages.ubuntu.com/precise&minus;updates/seabios or
http://packages.ubuntu.com/quantal/seabios</p>

<p style="margin-left:29%; margin-top: 1em">Also you need
to do (see above):</p>

<pre style="margin-left:29%; margin-top: 1em"> sudo chmod 0644 /boot/vmlinuz*</pre>


<p style="margin-left:11%;">Gentoo</p>

<p style="margin-left:17%;">Libguestfs was added to Gentoo
in 2012&minus;07 by Andreis Vinogradovs (libguestfs) and
Maxim Koltsov (mainly hivex). Do:</p>

<pre style="margin-left:17%; margin-top: 1em"> emerge libguestfs</pre>


<p style="margin-left:11%;">SuSE</p>

<p style="margin-left:17%;">Libguestfs was added to SuSE in
2012 by Olaf Hering.</p>

<p style="margin-left:11%;">ArchLinux</p>

<p style="margin-left:17%;">Libguestfs was added to the
<small>AUR</small> in 2010.</p>

<p style="margin-left:11%;">Other Linux distro</p>

<p style="margin-left:17%;">Compile from source (next
section).</p>

<p style="margin-left:11%;">Other non-Linux distro</p>

<p style="margin-left:17%;">You&rsquo;ll have to compile
from source, and port it.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
compile and install libguestfs from source?</b> <br>
You can compile libguestfs from git or a source tarball.
Read the <small>README</small> file before starting.</p>

<p style="margin-left:11%; margin-top: 1em">Git:
https://github.com/libguestfs/libguestfs Source tarballs:
http://libguestfs.org/download</p>

<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t run
<tt>&quot;make install&quot;</tt>! Use the
<tt>&quot;./run&quot;</tt> script instead (see
<small>README</small> ).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
compile and install libguestfs if my distro doesn&rsquo;t
have new enough qemu/supermin/kernel?</b> <br>
Libguestfs needs supermin 5. If supermin 5 hasn&rsquo;t been
ported to your distro, then see the question below.</p>

<p style="margin-left:11%; margin-top: 1em">First compile
qemu, supermin and/or the kernel from source. You do
<i>not</i> need to <tt>&quot;make install&quot;</tt>
them.</p>

<p style="margin-left:11%; margin-top: 1em">In the
libguestfs source directory, create two files.
<tt>&quot;localconfigure&quot;</tt> should contain:</p>

<pre style="margin-left:11%; margin-top: 1em"> source localenv
 #export PATH=/tmp/qemu/x86_64&minus;softmmu:$PATH
 ./autogen.sh &minus;&minus;prefix /usr &quot;$@&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Make
<tt>&quot;localconfigure&quot;</tt> executable.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;localenv&quot;</tt>
should contain:</p>

<pre style="margin-left:11%; margin-top: 1em"> #export SUPERMIN=/tmp/supermin/src/supermin
 #export LIBGUESTFS_HV=/tmp/qemu/x86_64&minus;softmmu/qemu&minus;system&minus;x86_64
 #export SUPERMIN_KERNEL=/tmp/linux/arch/x86/boot/bzImage
 #export SUPERMIN_KERNEL_VERSION=3.XX.0
 #export SUPERMIN_MODULES=/tmp/lib/modules/3.XX.0</pre>


<p style="margin-left:11%; margin-top: 1em">Uncomment and
adjust these lines as required to use the alternate programs
you have compiled.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;./localconfigure&quot;</tt> instead of
<tt>&quot;./configure&quot;</tt>, but otherwise you compile
libguestfs as usual.</p>

<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t run
<tt>&quot;make install&quot;</tt>! Use the
<tt>&quot;./run&quot;</tt> script instead (see
<small>README</small> ).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
compile and install libguestfs without supermin?</b> <br>
If supermin 5 supports your distro, but you don&rsquo;t
happen to have a new enough supermin installed, then see the
previous question.</p>

<p style="margin-left:11%; margin-top: 1em">If supermin 5
doesn&rsquo;t support your distro at all, you will need to
use the &quot;fixed appliance method&quot; where you use a
pre-compiled binary appliance. See:
http://libguestfs.org/download/binaries/appliance/</p>

<p style="margin-left:11%; margin-top: 1em">Patches to port
supermin to more Linux distros are welcome.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
add support for sVirt? <br>
Note for Fedora/RHEL users:</b> This configuration is the
default starting with Fedora&nbsp;18 and
<small>RHEL&nbsp;7.</small> If you find any problems, please
let us know or file a bug.</p>

<p style="margin-left:11%; margin-top: 1em">SVirt provides
a hardened appliance using SELinux, making it very hard for
a rogue disk image to &quot;escape&quot; from the
confinement of libguestfs and damage the host (it&rsquo;s
fair to say that even in standard libguestfs this would be
hard, but sVirt provides an extra layer of protection for
the host and more importantly protects virtual machines on
the same host from each other).</p>

<p style="margin-left:11%; margin-top: 1em">Currently to
enable sVirt you will need libvirt &ge; 0.10.2 (1.0 or later
preferred), libguestfs &ge; 1.20, and the SELinux policies
from recent Fedora. If you are not running Fedora&nbsp;18+,
you will need to make changes to your SELinux policy &minus;
contact us on the mailing list.</p>

<p style="margin-left:11%; margin-top: 1em">Once you have
the requirements, do:</p>

<pre style="margin-left:11%; margin-top: 1em"> ./configure &minus;&minus;with&minus;default&minus;backend=libvirt       # libguestfs &gt;= 1.22
 ./configure &minus;&minus;with&minus;default&minus;attach&minus;method=libvirt # libguestfs &lt;= 1.20
 make</pre>


<p style="margin-left:11%; margin-top: 1em">Set SELinux to
Enforcing mode, and sVirt should be used automatically.</p>

<p style="margin-left:11%; margin-top: 1em">All, or almost
all, features of libguestfs should work under sVirt. There
is one known shortcoming: <i>virt&minus;rescue</i>(1) will
not use libvirt (hence sVirt), but falls back to direct
launch of qemu. So you won&rsquo;t currently get the benefit
of sVirt protection when using virt-rescue.</p>

<p style="margin-left:11%; margin-top: 1em">You can check
if sVirt is being used by enabling libvirtd logging (see
<tt>&quot;/etc/libvirt/libvirtd.log&quot;</tt>), killing and
restarting libvirtd, and checking the log files for
&quot;Setting&nbsp;SELinux&nbsp;context&nbsp;on&nbsp;...&quot;
messages.</p>

<p style="margin-left:11%; margin-top: 1em">In theory sVirt
should support AppArmor, but we have not tried it. It will
almost certainly require patching libvirt and writing an
AppArmor policy.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Libguestfs
has a really long list of dependencies!</b> <br>
The base library doesn&rsquo;t depend on very much, but
there are three causes of the long list of other
dependencies:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>1.</p></td>
<td width="3%"></td>
<td width="83%">


<p>Libguestfs has to be able to read and edit many
different disk formats. For example, <small>XFS</small>
support requires <small>XFS</small> tools.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="3%"></td>
<td width="83%">


<p>There are language bindings for many different
languages, all requiring their own development tools. All
language bindings (except C) are optional.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="3%"></td>
<td width="83%">


<p>There are some optional library features which can be
disabled.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Since
libguestfs &ge; 1.26 it is possible to split up the
appliance dependencies (item 1 in the list above) and thus
have (eg) <tt>&quot;libguestfs&minus;xfs&quot;</tt> as a
separate subpackage for processing <small>XFS</small> disk
images. We encourage downstream packagers to start splitting
the base libguestfs package into smaller subpackages.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Errors
during launch on Fedora &ge; 18, <small>RHEL</small> &ge;
7</b> <br>
In Fedora &ge; 18 and <small>RHEL</small> &ge; 7, libguestfs
uses libvirt to manage the appliance. Previously (and
upstream) libguestfs runs qemu directly:</p>

<pre style="margin-left:11%; margin-top: 1em"> &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
 &#9474; libguestfs                       &#9474;
 &#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9508;
 &#9474; direct backend &#9474; libvirt backend &#9474;
 &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
        &darr;                  &darr;
    &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;         &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
    &#9474; qemu  &#9474;         &#9474; libvirtd &#9474;
    &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;         &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
                           &darr;
                       &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
                       &#9474; qemu  &#9474;
                       &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
    upstream          Fedora 18+
    non&minus;Fedora         RHEL 7+
    non&minus;RHEL</pre>


<p style="margin-left:11%; margin-top: 1em">The libvirt
backend is more sophisticated, supporting SELinux/sVirt (see
above), hotplugging and more. It is, however, more complex
and so less robust.</p>

<p style="margin-left:11%; margin-top: 1em">If you have
permissions problems using the libvirt backend, you can
switch to the direct backend by setting this environment
variable:</p>

<pre style="margin-left:11%; margin-top: 1em"> export LIBGUESTFS_BACKEND=direct</pre>


<p style="margin-left:11%; margin-top: 1em">before running
any libguestfs program or virt tool.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
switch to a fixed / prebuilt appliance?</b> <br>
This may improve the stability and performance of libguestfs
on Fedora and <small>RHEL.</small></p>

<p style="margin-left:11%; margin-top: 1em">Any time after
installing libguestfs, run the following commands as
root:</p>

<pre style="margin-left:11%; margin-top: 1em"> mkdir &minus;p /usr/local/lib/guestfs/appliance
 libguestfs&minus;make&minus;fixed&minus;appliance /usr/local/lib/guestfs/appliance
 ls &minus;l /usr/local/lib/guestfs/appliance</pre>


<p style="margin-left:11%; margin-top: 1em">Now set the
following environment variable before using libguestfs or
any virt tool:</p>

<pre style="margin-left:11%; margin-top: 1em"> export LIBGUESTFS_PATH=/usr/local/lib/guestfs/appliance</pre>


<p style="margin-left:11%; margin-top: 1em">Of course you
can change the path to any directory you want. You can share
the appliance across machines that have the same
architecture (eg. all x86&minus;64), but note that libvirt
will prevent you from sharing the appliance across
<small>NFS</small> because of permissions problems (so
either switch to the direct backend or don&rsquo;t use
<small>NFS</small> ).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
speed up libguestfs builds?</b> <br>
By far the most important thing you can do is to install and
properly configure Squid. Note that the default
configuration that ships with Squid is rubbish, so
configuring it is not optional.</p>

<p style="margin-left:11%; margin-top: 1em">A very good
place to start with Squid configuration is here:
https://fedoraproject.org/wiki/Extras/MockTricks#Using_Squid_to_Speed_Up_Mock_package_downloads</p>

<p style="margin-left:11%; margin-top: 1em">Make sure Squid
is running, and that the environment variables
<tt>$http_proxy</tt> and <tt>$ftp_proxy</tt> are pointing to
it.</p>

<p style="margin-left:11%; margin-top: 1em">With Squid
running and correctly configured, appliance builds should be
reduced to a few minutes.</p>

<p style="margin-left:11%; margin-top: 1em"><i>How can I
speed up libguestfs builds (Debian)?</i></p>

<p style="margin-left:11%; margin-top: 1em">Hilko Bengen
suggests using &quot;approx&quot; which is a Debian archive
proxy (http://packages.debian.org/approx). This tool is
documented on Debian in the <i>approx</i>(8) manual
page.</p>

<h2>SPEED, DISK SPACE USED BY LIBGUESTFS
<a name="SPEED, DISK SPACE USED BY LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Note:</b>
Most of the information in this section has moved:
<i>guestfs&minus;performance</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Upload or
write seem very slow.</b> <br>
If the underlying disk is not fully allocated (eg. sparse
raw or qcow2) then writes can be slow because the host
operating system has to do costly disk allocations while you
are writing. The solution is to use a fully allocated format
instead, ie. non-sparse raw, or qcow2 with the
<tt>&quot;preallocation=metadata&quot;</tt> option.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Libguestfs
uses too much disk space!</b> <br>
libguestfs caches a large-ish appliance in:</p>

<pre style="margin-left:11%; margin-top: 1em"> /var/tmp/.guestfs&minus;&lt;UID&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">If the
environment variable <tt>&quot;TMPDIR&quot;</tt> is defined,
then <tt>&quot;$TMPDIR/.guestfs&minus;&lt;UID&gt;&quot;</tt>
is used instead.</p>

<p style="margin-left:11%; margin-top: 1em">It is safe to
delete this directory when you are not using libguestfs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>virt-sparsify
seems to make the image grow to the full size of the virtual
disk</b> <br>
If the input to <i>virt&minus;sparsify</i>(1) is raw, then
the output will be raw sparse. Make sure you are measuring
the output with a tool which understands sparseness such as
<tt>&quot;du &minus;sh&quot;</tt>. It can make a huge
difference:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ ls &minus;lh test1.img
 &minus;rw&minus;rw&minus;r&minus;&minus;. 1 rjones rjones 100M Aug  8 08:08 test1.img
 $ du &minus;sh test1.img
 3.6M   test1.img</pre>


<p style="margin-left:11%; margin-top: 1em">(Compare the
apparent size <b>100M</b> vs the actual size
<b>3.6M</b>)</p>

<p style="margin-left:11%; margin-top: 1em">If all this
confuses you, use a non-sparse output format by specifying
the <i>&minus;&minus;convert</i> option, eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;sparsify &minus;&minus;convert qcow2 disk.raw disk.qcow2</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Why
doesn&rsquo;t virt-resize work on the disk image
in-place?</b> <br>
Resizing a disk image is very tricky -- especially making
sure that you don&rsquo;t lose data or break the bootloader.
The current method effectively creates a new disk image and
copies the data plus bootloader from the old one. If
something goes wrong, you can always go back to the
original.</p>

<p style="margin-left:11%; margin-top: 1em">If we were to
make virt-resize work in-place then there would have to be
limitations: for example, you wouldn&rsquo;t be allowed to
move existing partitions (because moving data across the
same disk is most likely to corrupt data in the event of a
power failure or crash), and <small>LVM</small> would be
very difficult to support (because of the almost arbitrary
mapping between <small>LV</small> content and underlying
disk blocks).</p>

<p style="margin-left:11%; margin-top: 1em">Another method
we have considered is to place a snapshot over the original
disk image, so that the original data is untouched and only
differences are recorded in the snapshot. You can do this
today using <tt>&quot;qemu&minus;img create&quot;</tt> +
<tt>&quot;virt&minus;resize&quot;</tt>, but qemu currently
isn&rsquo;t smart enough to recognize when the same block is
written back to the snapshot as already exists in the
backing disk, so you will find that this doesn&rsquo;t save
you any space or time.</p>

<p style="margin-left:11%; margin-top: 1em">In summary,
this is a hard problem, and what we have now mostly works so
we are reluctant to change it.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why
doesn&rsquo;t virt-sparsify work on the disk image
in-place?</b> <br>
In libguestfs &ge; 1.26, virt-sparsify can now work on disk
images in place. Use:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;sparsify &minus;&minus;in&minus;place disk.img</pre>


<p style="margin-left:11%; margin-top: 1em">But first you
should read &quot;IN-PLACE
<small>SPARSIFICATION&quot;</small> in
<i>virt&minus;sparsify</i>(1).</p>

<h2>PROBLEMS OPENING DISK IMAGES
<a name="PROBLEMS OPENING DISK IMAGES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Remote
libvirt guests cannot be opened.</b> <br>
Opening remote libvirt guests is not supported at this time.
For example this won&rsquo;t work:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;c qemu://remote/system &minus;d Guest</pre>


<p style="margin-left:11%; margin-top: 1em">To open remote
disks you have to export them somehow, then connect to the
export. For example if you decided to use
<small>NBD:</small></p>

<pre style="margin-left:11%; margin-top: 1em"> remote$ qemu&minus;nbd &minus;t &minus;p 10809 guest.img
  local$ guestfish &minus;a nbd://remote:10809 &minus;i</pre>


<p style="margin-left:11%; margin-top: 1em">Other
possibilities include ssh (if qemu is recent enough),
<small>NFS</small> or iSCSI. See &quot; <small>REMOTE
STORAGE&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
open this strange disk source?</b> <br>
You have a disk image located inside another system that
requires access via a library / <small>HTTP / REST /</small>
proprietary <small>API,</small> or is compressed or archived
in some way. (One example would be remote access to
OpenStack glance images without actually downloading
them.)</p>

<p style="margin-left:11%; margin-top: 1em">We have a
sister project called nbdkit
(https://github.com/libguestfs/nbdkit). This project lets
you turn any disk source into an <small>NBD</small> server.
Libguestfs can access <small>NBD</small> servers directly,
eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a nbd://remote</pre>


<p style="margin-left:11%; margin-top: 1em">nbdkit is
liberally licensed, so you can link it to or include it in
proprietary libraries and code. It also has a simple, stable
plugin <small>API</small> so you can easily write plugins
against the <small>API</small> which will continue to work
in future.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Error
opening <small>VMDK</small> disks: &quot;uses a vmdk feature
which is not supported by this qemu version:
<small>VMDK</small> version 3&quot;</b> <br>
Qemu (and hence libguestfs) only supports certain
<small>VMDK</small> disk images. Others won&rsquo;t work,
giving this or similar errors.</p>

<p style="margin-left:11%; margin-top: 1em">Ideally someone
would fix qemu to support the latest <small>VMDK</small>
features, but in the meantime you have three options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="3%"></td>
<td width="83%">


<p style="margin-top: 1em">If the guest is hosted on a
live, reachable <small>ESX</small> server, then locate and
download the disk image called
<i>somename</i><tt>&quot;&minus;flat.vmdk&quot;</tt>.
Despite the name, this is a raw disk image, and can be
opened by anything.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">If you have a
recent enough version of qemu and libguestfs, then you may
be able to access this disk image remotely using either
<small>HTTPS</small> or ssh. See &quot; <small>REMOTE
STORAGE&quot;</small> in <i>guestfs</i>(3).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="3%"></td>
<td width="83%">


<p style="margin-top: 1em">Use VMware&rsquo;s proprietary
vdiskmanager tool to convert the image to raw format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="3%"></td>
<td width="83%">


<p>Use nbdkit with the proprietary <small>VDDK</small>
plugin to live export the disk image as an
<small>NBD</small> source. This should allow you to read and
write the <small>VMDK</small> file.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b><small>UFS</small>
disks (as used by <small>BSD</small> ) cannot be opened.</b>
<br>
The <small>UFS</small> filesystem format has many variants,
and these are not self-identifying. The Linux kernel has to
be told which variant of <small>UFS</small> it has to use,
which libguestfs cannot know.</p>

<p style="margin-left:11%; margin-top: 1em">You have to
pass the right <tt>&quot;ufstype&quot;</tt> mount option
when mounting these filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">See
https://www.kernel.org/doc/Documentation/filesystems/ufs.txt</p>

<p style="margin-left:11%; margin-top: 1em"><b>Windows
ReFS</b> <br>
Windows ReFS is Microsoft&rsquo;s ZFS/Btrfs copy. This
filesystem has not yet been reverse engineered and
implemented in the Linux kernel, and therefore libguestfs
doesn&rsquo;t support it. At the moment it seems to be very
rare &quot;in the wild&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Non-ASCII
characters don&rsquo;t appear on <small>VFAT</small>
filesystems.</b> <br>
Typical symptoms of this problem:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">You get an error when you create
a file where the filename contains non-ASCII characters,
particularly non 8&minus;bit characters from Asian languages
(Chinese, Japanese, etc). The filesystem is
<small>VFAT.</small></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When you list a directory from a <small>VFAT</small>
filesystem, filenames appear as question marks.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This is a
design flaw of the GNU/Linux system.</p>


<p style="margin-left:11%; margin-top: 1em"><small>VFAT</small>
stores long filenames as <small>UTF&minus;16</small>
characters. When opening or returning filenames, the Linux
kernel has to translate these to some form of 8 bit string.
<small>UTF&minus;8</small> would be the obvious choice,
except for Linux users who persist in using
non&minus;UTF&minus;8 locales (the user&rsquo;s locale is
not known to the kernel because it&rsquo;s a function of
libc).</p>

<p style="margin-left:11%; margin-top: 1em">Therefore you
have to tell the kernel what translation you want done when
you mount the filesystem. The two methods are the
<tt>&quot;iocharset&quot;</tt> parameter (which is not
relevant to libguestfs) and the <tt>&quot;utf8&quot;</tt>
flag.</p>

<p style="margin-left:11%; margin-top: 1em">So to use a
<small>VFAT</small> filesystem you must add the
<tt>&quot;utf8&quot;</tt> flag when mounting. From
guestfish, use:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; mount&minus;options utf8 /dev/sda1 /</pre>


<p style="margin-left:11%; margin-top: 1em">or on the
guestfish command line:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish [...] &minus;m /dev/sda1:/:utf8</pre>


<p style="margin-left:11%; margin-top: 1em">or from the
<small>API:</small></p>

<pre style="margin-left:11%; margin-top: 1em"> guestfs_mount_options (g, &quot;utf8&quot;, &quot;/dev/sda1&quot;, &quot;/&quot;);</pre>


<p style="margin-left:11%; margin-top: 1em">The kernel will
then translate filenames to and from
<small>UTF&minus;8</small> strings.</p>

<p style="margin-left:11%; margin-top: 1em">We considered
adding this mount option transparently, but unfortunately
there are several problems with doing that:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">On some Linux systems, the
<tt>&quot;utf8&quot;</tt> mount option doesn&rsquo;t work.
We don&rsquo;t precisely understand what systems or why, but
this was reliably reported by one user.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>It would prevent you from using the
<tt>&quot;iocharset&quot;</tt> parameter because it is
incompatible with <tt>&quot;utf8&quot;</tt>. It is probably
not a good idea to use this parameter, but we don&rsquo;t
want to prevent it.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Non-ASCII
characters appear as underscore (_) on
<small>ISO9660</small> filesystems.</b> <br>
The filesystem was not prepared correctly with mkisofs or
genisoimage. Make sure the filesystem was created using
Joliet and/or Rock Ridge extensions. libguestfs does not
require any special mount options to handle the
filesystem.</p>

<h2>USING LIBGUESTFS IN YOUR OWN PROGRAMS
<a name="USING LIBGUESTFS IN YOUR OWN PROGRAMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>The
<small>API</small> has hundreds of methods, where do I
start?</b> <br>
We recommend you start by reading the <small>API</small>
overview: &quot; <small>API OVERVIEW&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">Although the
<small>API</small> overview covers the C <small>API,</small>
it is still worth reading even if you are going to use
another programming language, because the <small>API</small>
is the same, just with simple logical changes to the names
of the calls:</p>

<pre style="margin-left:11%; margin-top: 1em">                  C  guestfs_ln_sf (g, target, linkname);
             Python  g.ln_sf (target, linkname);
              OCaml  g#ln_sf target linkname;
               Perl  $g&minus;&gt;ln_sf (target, linkname);
  Shell (guestfish)  ln&minus;sf target linkname
                PHP  guestfs_ln_sf ($g, $target, $linkname);</pre>


<p style="margin-left:11%; margin-top: 1em">Once
you&rsquo;re familiar with the <small>API</small> overview,
you should look at this list of starting points for other
language bindings: &quot; <small>USING LIBGUESTFS WITH OTHER
PROGRAMMING LANGUAGES&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Can I use
libguestfs in my proprietary / closed source / commercial
program?</b> <br>
In general, yes. However this is not legal advice &minus;
read the license that comes with libguestfs, and if you have
specific questions contact a lawyer.</p>

<p style="margin-left:11%; margin-top: 1em">In the source
tree the license is in the file
<tt>&quot;COPYING.LIB&quot;</tt> (LGPLv2+ for the library
and bindings) and <tt>&quot;COPYING&quot;</tt> (GPLv2+ for
the standalone programs).</p>

<h2>DEBUGGING LIBGUESTFS
<a name="DEBUGGING LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Help,
it&rsquo;s not working!</b> <br>
Please supply all the information in this checklist, in an
email sent to <tt>&quot;libguestfs&quot;</tt> @
<tt>&quot;redhat.com&quot;</tt>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">What are you trying to
achieve?</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>What exact commands did you run?</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>What was the precise error / output of these
commands?</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Enable debugging, run the commands again, and capture
the <b>complete</b> output. <b>Do not edit the
output.</b></p> </td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> export LIBGUESTFS_DEBUG=1
 export LIBGUESTFS_TRACE=1</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Include the version of
libguestfs, the operating system version, and how you
installed libguestfs (eg. from source, <tt>&quot;yum
install&quot;</tt>, etc.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If no libguestfs program seems to work at all, run the
program below and paste the <b>complete, unedited</b> output
into the email:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> libguestfs&minus;test&minus;tool</pre>


<p style="margin-left:11%; margin-top: 1em"><b>How do I
debug when using any libguestfs program or tool (eg.
virt&minus;v2v or virt-df)?</b> <br>
There are two <tt>&quot;LIBGUESTFS_*&quot;</tt> environment
variables you can set in order to get more information from
libguestfs. <br>
&quot;LIBGUESTFS_TRACE&quot;</p>

<p style="margin-left:17%;">Set this to 1 and libguestfs
will print out each command / <small>API</small> call in a
format which is similar to guestfish commands.</p>


<p style="margin-left:11%;">&quot;LIBGUESTFS_DEBUG&quot;</p>

<p style="margin-left:17%;">Set this to 1 in order to
enable massive amounts of debug messages. If you think there
is some problem inside the libguestfs appliance, then you
should use this option.</p>

<p style="margin-left:11%; margin-top: 1em">To set these
from the shell, do this before running the program:</p>

<pre style="margin-left:11%; margin-top: 1em"> export LIBGUESTFS_TRACE=1
 export LIBGUESTFS_DEBUG=1</pre>


<p style="margin-left:11%; margin-top: 1em">For csh/tcsh
the equivalent commands would be:</p>

<pre style="margin-left:11%; margin-top: 1em"> setenv LIBGUESTFS_TRACE 1
 setenv LIBGUESTFS_DEBUG 1</pre>


<p style="margin-left:11%; margin-top: 1em">For further
information, see: &quot; <small>ENVIRONMENT
VARIABLES&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
debug when using guestfish?</b> <br>
You can use the same environment variables above.
Alternatively use the guestfish options &minus;x (to trace
commands) or &minus;v (to get the full debug output), or
both.</p>

<p style="margin-left:11%; margin-top: 1em">For further
information, see: <i>guestfish</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
debug when using the <small>API</small> ?</b> <br>
Call &quot;guestfs_set_trace&quot; in <i>guestfs</i>(3) to
enable command traces, and/or
&quot;guestfs_set_verbose&quot; in <i>guestfs</i>(3) to
enable debug messages.</p>

<p style="margin-left:11%; margin-top: 1em">For best
results, call these functions as early as possible, just
after creating the guestfs handle if you can, and definitely
before calling launch.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
capture debug output and put it into my logging system?</b>
<br>
Use the event <small>API.</small> For examples, see: &quot;
<small>SETTING CALLBACKS TO HANDLE EVENTS&quot;</small> in
<i>guestfs</i>(3) and the
<tt>&quot;examples/debug&minus;logging.c&quot;</tt> program
in the libguestfs sources.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Digging
deeper into the appliance boot process.</b> <br>
Enable debugging and then read this documentation on the
appliance boot process: &quot;
<small>INTERNALS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>libguestfs
hangs or fails during run/launch.</b> <br>
Enable debugging and look at the full output. If you cannot
work out what is going on, file a bug report, including the
<i>complete</i> output of
<i>libguestfs&minus;test&minus;tool</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Debugging
libvirt</b> <br>
If you are using the libvirt backend, and libvirt is
failing, then you can enable debugging by editing
<tt>&quot;/etc/libvirt/libvirtd.conf&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
running as non-root, then you have to edit a different file.
Create <tt>&quot;~/.config/libvirt/libvirtd.conf&quot;</tt>
containing:</p>

<pre style="margin-left:11%; margin-top: 1em"> log_level=1
 log_outputs=&quot;1:file:/tmp/libvirtd.log&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Kill any
session (non-root) libvirtd that is running, and next time
you run the libguestfs command, you should see a large
amount of useful debugging information from libvirtd in
<tt>&quot;/tmp/libvirtd.log&quot;</tt></p>

<h2>DESIGN/INTERNALS OF LIBGUESTFS
<a name="DESIGN/INTERNALS OF LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><tt><b>Why
don&rsquo;t you do everything through the <small>FUSE
/</small> filesystem interface?</b></tt> <br>
We offer a command called <i>guestmount</i>(1) which lets
you mount guest filesystems on the host. This is implemented
as a <small>FUSE</small> module. Why don&rsquo;t we just
implement the whole of libguestfs using this mechanism,
instead of having the large and rather complicated
<small>API</small> ?</p>

<p style="margin-left:11%; margin-top: 1em">The reasons are
twofold. Firstly, libguestfs offers <small>API</small> calls
for doing things like creating and deleting partitions and
logical volumes, which don&rsquo;t fit into a filesystem
model very easily. Or rather, you could fit them in: for
example, creating a partition could be mapped to
<tt>&quot;mkdir /fs/hda1&quot;</tt> but then you&rsquo;d
have to specify some method to choose the size of the
partition (maybe <tt>&quot;echo 100M &gt;
/fs/hda1/.size&quot;</tt>), and the partition type, start
and end sectors etc., but once you&rsquo;ve done that the
filesystem-based <small>API</small> starts to look more
complicated than the call-based <small>API</small> we
currently have.</p>

<p style="margin-left:11%; margin-top: 1em">The second
reason is for efficiency. <small>FUSE</small> itself is
reasonably efficient, but it does make lots of small,
independent calls into the <small>FUSE</small> module. In
guestmount these have to be translated into messages to the
libguestfs appliance which has a big overhead (in time and
round trips). For example, reading a file in 64
<small>KB</small> chunks is inefficient because each chunk
would turn into a single round trip. In the libguestfs
<small>API</small> it is much more efficient to download an
entire file or directory through one of the streaming calls
like <tt>&quot;guestfs_download&quot;</tt> or
<tt>&quot;guestfs_tar_out&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why
don&rsquo;t you do everything through <small>GVFS</small>
?</b> <br>
The problems are similar to the problems with
<small>FUSE.</small></p>


<p style="margin-left:11%; margin-top: 1em"><small>GVFS</small>
is a better abstraction than <small>POSIX/FUSE.</small>
There is an <small>FTP</small> backend for
<small>GVFS,</small> which is encouraging because
<small>FTP</small> is conceptually similar to the libguestfs
<small>API.</small> However the <small>GVFS FTP</small>
backend makes multiple simultaneous connections in order to
keep interactivity, which we can&rsquo;t easily do with
libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why can I
write to the disk, even though I added it read-only? <br>
Why does &quot;&minus;&minus;ro&quot; appear to have no
effect?</b> <br>
When you add a disk read-only, libguestfs places a writable
overlay on top of the underlying disk. Writes go into this
overlay, and are discarded when the handle is closed (or
<tt>&quot;guestfish&quot;</tt> etc. exits).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
reasons for doing it this way: Firstly read-only disks
aren&rsquo;t possible in many cases (eg. <small>IDE</small>
simply doesn&rsquo;t support them, so you couldn&rsquo;t
have an IDE-emulated read-only disk, although this is not
common in real libguestfs installations).</p>

<p style="margin-left:11%; margin-top: 1em">Secondly and
more importantly, even if read-only disks were possible, you
wouldn&rsquo;t want them. Mounting any filesystem that has a
journal, even <tt>&quot;mount &minus;o ro&quot;</tt>, causes
writes to the filesystem because the journal has to be
replayed and metadata updated. If the disk was truly
read-only, you wouldn&rsquo;t be able to mount a dirty
filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">To make it
usable, we create the overlay as a place to temporarily
store these writes, and then we discard it afterwards. This
ensures that the underlying disk is always untouched.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
there is a regression test for this when building libguestfs
(in <tt>&quot;tests/qemu&quot;</tt>). This is one reason why
it&rsquo;s important for packagers to run the test
suite.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Does
&quot;&minus;&minus;ro&quot; make all disks read-only?</b>
<i><br>
No!</i> The <tt>&quot;&minus;&minus;ro&quot;</tt> option
only affects disks added on the command line, ie. using
<tt>&quot;&minus;a&quot;</tt> and
<tt>&quot;&minus;d&quot;</tt> options.</p>

<p style="margin-left:11%; margin-top: 1em">In guestfish,
if you use the <tt>&quot;add&quot;</tt> command, then disk
is added read-write (unless you specify the
<tt>&quot;readonly:true&quot;</tt> flag explicitly with the
command).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Can I use
&quot;guestfish &minus;&minus;ro&quot; as a way to backup my
virtual machines?</b> <br>
Usually this is <i>not</i> a good idea. The question is
answered in more detail in this mailing list posting:
https://www.redhat.com/archives/libguestfs/2010&minus;August/msg00024.html</p>

<p style="margin-left:11%; margin-top: 1em">See also the
next question.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why
can&rsquo;t I run fsck on a live filesystem using
&quot;guestfish &minus;&minus;ro&quot;?</b> <br>
This command will usually <i>not</i> work:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a /dev/vg/my_root_fs run : fsck /dev/sda</pre>


<p style="margin-left:11%; margin-top: 1em">The reason for
this is that qemu creates a snapshot over the original
filesystem, but it doesn&rsquo;t create a strict
point-in-time snapshot. Blocks of data on the underlying
filesystem are read by qemu at different times as the fsck
operation progresses, with host writes in between. The
result is that fsck sees massive corruption (imaginary, not
real!) and fails.</p>

<p style="margin-left:11%; margin-top: 1em">What you have
to do is to create a point-in-time snapshot. If it&rsquo;s a
logical volume, use an <small>LVM2</small> snapshot. If the
filesystem is located inside something like a btrfs/ZFS
file, use a btrfs/ZFS snapshot, and then run the fsck on the
snapshot. In practice you don&rsquo;t need to use libguestfs
for this -- just run <tt>&quot;/sbin/fsck&quot;</tt>
directly.</p>

<p style="margin-left:11%; margin-top: 1em">Creating
point-in-time snapshots of host devices and files is outside
the scope of libguestfs, although libguestfs can operate on
them once they are created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
the difference between guestfish and virt-rescue?</b> <br>
A lot of people are confused by the two superficially
similar tools we provide:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ guestfish &minus;&minus;ro &minus;a guest.img
 &gt;&lt;fs&gt; run
 &gt;&lt;fs&gt; fsck /dev/sda1
 $ virt&minus;rescue &minus;&minus;ro guest.img
 &gt;&lt;rescue&gt; /sbin/fsck /dev/sda1</pre>


<p style="margin-left:11%; margin-top: 1em">And the related
question which then arises is why you can&rsquo;t type in
full shell commands with all the &minus;&minus;options in
guestfish (but you can in <i>virt&minus;rescue</i>(1)).</p>


<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1)
is a program providing structured access to the
<i>guestfs</i>(3) <small>API.</small> It happens to be a
nice interactive shell too, but its primary purpose is
structured access from shell scripts. Think of it more like
a language binding, like Python and other bindings, but for
shell. The key differentiating factor of guestfish (and the
libguestfs <small>API</small> in general) is the ability to
automate changes.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;rescue</i>(1)
is a free-for-all freeform way to boot the libguestfs
appliance and make arbitrary changes to your
<small>VM.</small> It&rsquo;s not structured, you
can&rsquo;t automate it, but for making quick ad-hoc fixes
to your guests, it can be quite useful.</p>

<p style="margin-left:11%; margin-top: 1em">But, libguestfs
also has a &quot;backdoor&quot; into the appliance allowing
you to send arbitrary shell commands. It&rsquo;s not as
flexible as virt-rescue, because you can&rsquo;t interact
with the shell commands, but here it is anyway:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; debug sh &quot;cmd arg1 arg2 ...&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Note that you
should <b>not</b> rely on this. It could be removed or
changed in future. If your program needs some operation,
please add it to the libguestfs <small>API</small>
instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
the deal with &quot;guestfish &minus;i&quot;? <br>
Why does virt-cat only work on a real <small>VM</small>
image, but virt-df works on any disk image? <br>
What does &quot;no root device found in this operating
system image&quot; mean?</b> <br>
These questions are all related at a fundamental level which
may not be immediately obvious.</p>

<p style="margin-left:11%; margin-top: 1em">At the
<i>guestfs</i>(3) <small>API</small> level, a &quot;disk
image&quot; is just a pile of partitions and
filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">In contrast,
when the virtual machine boots, it mounts those filesystems
into a consistent hierarchy such as:</p>

<pre style="margin-left:11%; margin-top: 1em"> /          (/dev/sda2)
 &#9474;
 &#9500;&#9472;&#9472; /boot  (/dev/sda1)
 &#9474;
 &#9500;&#9472;&#9472; /home  (/dev/vg_external/Homes)
 &#9474;
 &#9500;&#9472;&#9472; /usr   (/dev/vg_os/lv_usr)
 &#9474;
 &#9492;&#9472;&#9472; /var   (/dev/vg_os/lv_var)</pre>


<p style="margin-left:11%; margin-top: 1em">(or drive
letters on Windows).</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>API</small> first of all sees the disk image at the
&quot;pile of filesystems&quot; level. But it also has a way
to inspect the disk image to see if it contains an operating
system, and how the disks are mounted when the operating
system boots: &quot; <small>INSPECTION&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">Users expect
some tools (like <i>virt&minus;cat</i>(1)) to work with
<small>VM</small> paths:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;cat fedora.img /var/log/messages</pre>


<p style="margin-left:11%; margin-top: 1em">How does
virt-cat know that <tt>&quot;/var&quot;</tt> is a separate
partition? The trick is that virt-cat performs inspection on
the disk image, and uses that to translate the path
correctly.</p>

<p style="margin-left:11%; margin-top: 1em">Some tools
(including <i>virt&minus;cat</i>(1),
<i>virt&minus;edit</i>(1), <i>virt&minus;ls</i>(1)) use
inspection to map <small>VM</small> paths. Other tools, such
as <i>virt&minus;df</i>(1) and
<i>virt&minus;filesystems</i>(1) operate entirely at the raw
&quot;big pile of filesystems&quot; level of the libguestfs
<small>API,</small> and don&rsquo;t use inspection.</p>


<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1)
is in an interesting middle ground. If you use the
<i>&minus;a</i> and <i>&minus;m</i> command line options,
then you have to tell guestfish exactly how to add disk
images and where to mount partitions. This is the raw
<small>API</small> level.</p>

<p style="margin-left:11%; margin-top: 1em">If you use the
<i>&minus;i</i> option, libguestfs performs inspection and
mounts the filesystems for you.</p>

<p style="margin-left:11%; margin-top: 1em">The error
<tt>&quot;no root device found in this operating system
image&quot;</tt> is related to this. It means inspection was
unable to locate an operating system within the disk image
you gave it. You might see this from programs like virt-cat
if you try to run them on something which is just a disk
image, not a virtual machine disk image.</p>

<p style="margin-left:11%; margin-top: 1em"><b>What do
these &quot;debug*&quot; and &quot;internal&minus;*&quot;
functions do?</b> <br>
There are some functions which are used for debugging and
internal purposes which are <i>not</i> part of the stable
<small>API.</small></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;debug*&quot;</tt> (or
<tt>&quot;guestfs_debug*&quot;</tt>) functions, primarily
&quot;guestfs_debug&quot; in <i>guestfs</i>(3) and a handful
of others, are used for debugging libguestfs. Although they
are not part of the stable <small>API</small> and thus may
change or be removed at any time, some programs may want to
call these while waiting for features to be added to
libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;internal&minus;*&quot;</tt> (or
<tt>&quot;guestfs_internal_*&quot;</tt>) functions are
purely to be used by libguestfs itself. There is no reason
for programs to call them, and programs should not try to
use them. Using them will often cause bad things to happen,
as well as not being part of the documented stable
<small>API.</small></p>

<h2>DEVELOPERS
<a name="DEVELOPERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Where do I
send patches?</b> <br>
Please send patches to the libguestfs mailing list
https://www.redhat.com/mailman/listinfo/libguestfs. You
don&rsquo;t have to be subscribed, but there will be a delay
until your posting is manually approved.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Please
don&rsquo;t use github pull requests &minus; they will be
ignored</b>. The reasons are (a) we want to discuss and
dissect patches on the mailing list, and (b) github pull
requests turn into merge commits but we prefer to have a
linear history.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
propose a feature?</b> <br>
Large new features that you intend to contribute should be
discussed on the mailing list first
(https://www.redhat.com/mailman/listinfo/libguestfs). This
avoids disappointment and wasted work if we don&rsquo;t
think the feature would fit into the libguestfs project.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
suggest a useful feature but don&rsquo;t want to write the
code, you can file a bug (see &quot; <small>GETTING HELP AND
REPORTING BUGS&quot;</small> ) with <tt>&quot;RFE:
&quot;</tt> at the beginning of the Summary line.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Who can
commit to libguestfs git?</b> <br>
About 5 people have commit access to github. Patches should
be posted on the list first and ACKed. The policy for ACKing
and pushing patches is outlined here:</p>


<p style="margin-left:11%; margin-top: 1em">https://www.redhat.com/archives/libguestfs/2012&minus;January/msg00023.html</p>

<p style="margin-left:11%; margin-top: 1em"><b>Can I fork
libguestfs?</b> <br>
Of course you can. Git makes it easy to fork libguestfs.
Github makes it even easier. It&rsquo;s nice if you tell us
on the mailing list about forks and the reasons for
them.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1),
<i>guestfs</i>(3), http://libguestfs.org/.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Richard W.M.
Jones (<tt>&quot;rjones at redhat dot com&quot;</tt>)</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2012&minus;2014 Red Hat Inc.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This library is
free software; you can redistribute it and/or modify it
under the terms of the <small>GNU</small> Lesser General
Public License as published by the Free Software Foundation;
either version 2 of the License, or (at your option) any
later version.</p>

<p style="margin-left:11%; margin-top: 1em">This library is
distributed in the hope that it will be useful, but
<small>WITHOUT ANY WARRANTY</small> ; without even the
implied warranty of <small>MERCHANTABILITY</small> or
<small>FITNESS FOR A PARTICULAR PURPOSE.</small> See the
<small>GNU</small> Lesser General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the <small>GNU</small> Lesser General
Public License along with this library; if not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth
Floor, Boston, <small>MA 02110&minus;1301 USA</small></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">When reporting
a bug, please supply:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The version of libguestfs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Describe the bug accurately and give a way to reproduce
it.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Run <i>libguestfs&minus;test&minus;tool</i>(1) and paste
the <b>complete, unedited</b> output into the bug
report.</p> </td></tr>
 </table>
<hr>
</body>
</html>
