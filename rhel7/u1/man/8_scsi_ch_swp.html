<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:21:24 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SCSI_CH_SWP</title>

</head>
<body>

<h1 align="center">SCSI_CH_SWP</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">scsi_ch_swp
&minus; change SCSI Software WRITE Protect and block device
settings</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>scsi_ch_swp</b>
[<i>&minus;&minus;help</i>] [<i>&minus;&minus;set 0|1</i>]
[<i>&minus;&minus;verbose</i>] [<i>&minus;&minus;wr</i>]
<i>BLK_DEVICE</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This bash shell
script attempts to read or change the Software Write Protect
(SWP) bit in the SCSI Control mode page using the sdparm
utility. If that change is successful then it uses the
blockdev utility to change <i>BLK_DEVICE</i>&rsquo;s
read&minus;write or read&minus;only setting in sympathy.
This script is only available in Linux since the blockdev
utility is Linux specific.</p>

<p style="margin-left:11%; margin-top: 1em">If changing the
SWP bit is supported, setting the SWP bit makes
<i>BLK_DEVICE</i> read&minus;only at the device (disk)
itself. Clearing the SWP bit makes <i>BLK_DEVICE</i>
read&minus;write which is usually the default setting at
device (disk) power up.</p>

<p style="margin-left:11%; margin-top: 1em">If no options
are given then the current state of the SWP bit is printed
out (using sdparm) together with blockdev&rsquo;s RO bit. If
they are both 1 then <i>BLK_DEVICE</i> is in read&minus;only
mode; if they are both 0 then <i>BLK_DEVICE</i> is in
read&minus;write mode.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Arguments to
long options are mandatory for short options as well.
<b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">print out the usage message
then exit.</p>

<p style="margin-left:11%;"><b>&minus;s</b>,
<b>&minus;&minus;set</b> <i>0|1</i></p>

<p style="margin-left:22%;">when 0 is given then the SWP
bit in the Control mode page is cleared (i.e. set that bit
to 0) using sdparm; and blockdev is used to set
<i>BLK_DEVICE</i> to read&minus;write mode. When 1 is given
then the SWP bit in the Control mode page is set using
sdparm; and blockdev is used to set <i>BLK_DEVICE</i> to
read&minus;only mode. The default (i.e. when this option is
not given) is to read the state of the SWP bit and
<i>BLK_DEVICE</i>&rsquo;s read&minus;only mode and print
those values out.</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">increase level or
verbosity.</p>

<p style="margin-left:11%;"><b>&minus;w</b>,
<b>&minus;&minus;wr</b></p>

<p style="margin-left:22%;">when the <i>BLK_DEVICE</i> is
in read&minus;only mode, Linux will not typically allow
<i>BLK_DEVICE</i> to be opened read&minus;write by sdparm,
so the default action of this script is to use the sdparm
<i>&minus;&minus;readonly</i> option when
<i>&minus;&minus;set 0</i> has been invoked. It is possible
that <i>BLK_DEVICE</i> could be a generic device (e.g.
/dev/sg3) which has a different interpretation of the
read&minus;only open flag and may fail. For such rare cases
the <i>&minus;&minus;wr</i> option makes sdparm open
<i>BLK_DEVICE</i> read&minus;write when <i>&minus;&minus;set
0</i> is invoked.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of this script is 0 when it is successful. Otherwise the
exit status is that of the sdparm or the blockdev utility,
whichever is called last. See the sdparm(8) man page.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by D.
Gilbert</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2013 Douglas Gilbert <br>
This software is distributed under a FreeBSD license. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sdparm(sdparm),
blockdev(8)</b></p>
<hr>
</body>
</html>
