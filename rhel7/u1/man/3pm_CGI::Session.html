<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:27:20 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CGI::Session</title>

</head>
<body>

<h1 align="center">CGI::Session</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#A Warning about Auto-flushing">A Warning about Auto-flushing</a><br>
<a href="#A Warning about UTF8">A Warning about UTF8</a><br>
<a href="#TRANSLATIONS">TRANSLATIONS</a><br>
<a href="#TO LEARN MORE">TO LEARN MORE</a><br>
<a href="#METHODS">METHODS</a><br>
<a href="#MISCELLANEOUS METHODS">MISCELLANEOUS METHODS</a><br>
<a href="#DISTRIBUTION">DISTRIBUTION</a><br>
<a href="#CREDITS">CREDITS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#PUBLIC CODE REPOSITORY">PUBLIC CODE REPOSITORY</a><br>
<a href="#SUPPORT">SUPPORT</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Session
&minus; persistent session data in CGI applications</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">    # Object initialization:
    use CGI::Session;
    $session = new CGI::Session();
    $CGISESSID = $session&minus;&gt;id();
    # Send proper HTTP header with cookies:
    print $session&minus;&gt;header();
    # Storing data in the session:
    $session&minus;&gt;param('f_name', 'Sherzod');
    # or
    $session&minus;&gt;param(&minus;name=&gt;'l_name', &minus;value=&gt;'Ruzmetov');
    # Flush the data from memory to the storage driver at least before your
    # program finishes since auto&minus;flushing can be unreliable.
    # Warning: A bug in your logic whereby the DBI handle has gone
    # out of scope before flush() is called means flush() won't work
    # (when the session is a database session), so don't do that.
    $session&minus;&gt;flush();
    # Retrieving data:
    my $f_name = $session&minus;&gt;param('f_name');
    # or
    my $l_name = $session&minus;&gt;param(&minus;name=&gt;'l_name');
    # Clearing a certain session parameter:
    $session&minus;&gt;clear([&quot;l_name&quot;, &quot;f_name&quot;]);
    # Expire '_is_logged_in' flag after 10 idle minutes:
    $session&minus;&gt;expire('is_logged_in', '+10m')
    # Expire the session itself after 1 idle hour:
    $session&minus;&gt;expire('+1h');
    # Delete the session for good:
    $session&minus;&gt;delete();
    $session&minus;&gt;flush(); # Recommended practice says use flush() after delete().</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI-Session is
a Perl5 library that provides an easy, reliable and modular
session management system across <small>HTTP</small>
requests. Persistency is a key feature for such applications
as shopping carts, login/authentication routines, and
application that need to carry data across
<small>HTTP</small> requests. CGI::Session does that and
many more.</p>

<h2>A Warning about Auto-flushing
<a name="A Warning about Auto-flushing"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As mentioned
above in the Synopsis, auto-flushing can be unreliable.</p>

<p style="margin-left:11%; margin-top: 1em">Consequently,
you should regard it as mandatory that sessions always need
to be explicitly flushed before the program exits.</p>

<p style="margin-left:11%; margin-top: 1em">For instance,
in a <tt>&quot;CGI::Application&quot;</tt>&minus;based
program, <tt>&quot;sub teardown()&quot;</tt> would be the
appropriate place to do this.</p>

<p style="margin-left:11%; margin-top: 1em">This is all
part of what might be called &quot;Object life-cycle
&rsquo;v&rsquo; Program life-cycle&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">In the simplest
case the program has one object of type CGI::Session, and
that object is destroyed when the program exits.</p>

<p style="margin-left:11%; margin-top: 1em">If, however,
you wish to delete objects explicitly, then each call to
<tt>&quot;delete()&quot;</tt> should be followed by a call
to <tt>&quot;flush()&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Warning: A bug
in your logic whereby the <small>DBI</small> handle has gone
out out of scope before <i>flush()</i> is called means
<i>flush()</i> won&rsquo;t work (when the session is a
database session), so don&rsquo;t do that.</p>

<p style="margin-left:11%; margin-top: 1em">For more
detail, see the discussion of the
<tt>&quot;delete()&quot;</tt> method, below.</p>

<h2>A Warning about UTF8
<a name="A Warning about UTF8"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Trying to use
<small>UTF8</small> in a program which uses CGI::Session has
lead to problems. See RT#21981 and RT#28516.</p>

<p style="margin-left:11%; margin-top: 1em">In the first
case the user tried &quot;use encoding
&rsquo;utf8&rsquo;;&quot; in the program, and in the second
case the user tried &quot;$dbh&minus;&gt;do(qq|set names
&rsquo;utf8&rsquo;|);&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Until this
problem is understood and corrected, users are advised to
avoid <small>UTF8</small> in conjunction with
CGI::Session.</p>

<p style="margin-left:11%; margin-top: 1em">For details,
see: http://rt.cpan.org/Public/Bug/Display.html?id=28516
(and ...id=21981).</p>

<h2>TRANSLATIONS
<a name="TRANSLATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
is also available in Japanese.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="5%"></td>
<td width="83%">


<p>Translation based on 4.14:
http://digit.que.ne.jp/work/index.cgi?Perldoc/ja</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="5%"></td>
<td width="83%">


<p>Translation based on 3.11, including Cookbook and
Tutorial:
http://perldoc.jp/docs/modules/CGI&minus;Session&minus;3.11/</p> </td></tr>
</table>

<h2>TO LEARN MORE
<a name="TO LEARN MORE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Current manual
is optimized to be used as a quick reference. To learn more
both about the philosophy and CGI::Session programming
style, consider the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">CGI::Session::Tutorial &minus;
extended CGI::Session manual. Also includes library
architecture and driver specifications.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>We also provide mailing lists for CGI::Session users. To
subscribe to the list or browse the archives visit
https://lists.sourceforge.net/lists/listinfo/cgi&minus;session&minus;user</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><b><small>RFC 2965</small></b> &minus; &quot;
<small>HTTP</small> State Management Mechanism&quot; found
at ftp://ftp.isi.edu/in&minus;notes/rfc2965.txt</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><small>CGI</small> &minus; standard <small>CGI</small>
library</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Apache::Session &minus; another fine alternative to
CGI::Session.</p> </td></tr>
</table>

<h2>METHODS
<a name="METHODS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Following is
the overview of all the available methods accessible via
CGI::Session object.</p>

<p style="margin-left:11%; margin-top: 1em"><i>new()</i>
<b><br>
new( $sid ) <br>
new( $query ) <br>
new( $dsn, $query||$sid ) <br>
new( $dsn, $query||$sid, \%dsn_args ) <br>
new( $dsn, $query||$sid, \%dsn_args, \%session_params )</b>
<br>
Constructor. Returns new session object, or undef on
failure. Error message is accessible through <i>errstr()</i>
&minus; class method. If called on an already initialized
session will re-initialize the session based on already
configured object. This is only useful after a call to
<i>load()</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Can accept up
to three arguments, <tt>$dsn</tt> &minus; Data Source Name,
<tt>$query</tt>||$sid &minus; query object <small>OR</small>
a string representing session id, and finally, \%dsn_args,
arguments used by <tt>$dsn</tt> components.</p>

<p style="margin-left:11%; margin-top: 1em">If called
without any arguments, <tt>$dsn</tt> defaults to
<i>driver:file;serializer:default;id:md5</i>,
<tt>$query</tt>||$sid defaults to
<tt>&quot;CGI&minus;&gt;new()&quot;</tt>, and
<tt>&quot;\%dsn_args&quot;</tt> defaults to
<i>undef</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If called with
a single argument, it will be treated either as
<tt>$query</tt> object, or <tt>$sid</tt>, depending on its
type. If argument is a string , <tt>&quot;new()&quot;</tt>
will treat it as session id and will attempt to retrieve the
session from data store. If it fails, will create a new
session id, which will be accessible through <i>id()</i>
method. If argument is an object, <i>cookie()</i> and
<i>param()</i> methods will be called on that object to
recover a potential <tt>$sid</tt> and retrieve it from data
store. If it fails, <tt>&quot;new()&quot;</tt> will create a
new session id, which will be accessible through <i>id()</i>
method. <tt>&quot;name()&quot;</tt> will define the name of
the query parameter and/or cookie name to be requested,
defaults to <i><small>CGISESSID</small></i> .</p>

<p style="margin-left:11%; margin-top: 1em">If called with
two arguments first will be treated as <tt>$dsn</tt>, and
second will be treated as <tt>$query</tt> or <tt>$sid</tt>
or undef, depending on its type. Some examples of this
syntax are:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = CGI::Session&minus;&gt;new(&quot;driver:mysql&quot;, undef);
    $s = CGI::Session&minus;&gt;new(&quot;driver:sqlite&quot;, $sid);
    $s = CGI::Session&minus;&gt;new(&quot;driver:db_file&quot;, $query);
    $s = CGI::Session&minus;&gt;new(&quot;serializer:storable;id:incr&quot;, $sid);
    # etc...</pre>


<p style="margin-left:11%; margin-top: 1em">Briefly,
<tt>&quot;new()&quot;</tt> will return an initialized
session object with a valid id, whereas
<tt>&quot;load()&quot;</tt> may return an empty session
object with an undefined id.</p>

<p style="margin-left:11%; margin-top: 1em">Tests are
provided (t/new_with_undef.t and t/load_with_undef.t) to
clarify the result of calling <tt>&quot;new()&quot;</tt> and
<tt>&quot;load()&quot;</tt> with undef, or with an
initialized <small>CGI</small> object with an undefined or
fake <small>CGISESSID.</small></p>

<p style="margin-left:11%; margin-top: 1em">You are
strongly advised to run the old-fashioned &rsquo;make test
TEST_FILES=t/new_with_undef.t TEST_VERBOSE=1&rsquo; or the
new-fangled &rsquo;prove &minus;v t/new_with_undef.t&rsquo;,
for both new*.t and load*.t, and examine the output.</p>

<p style="margin-left:11%; margin-top: 1em">Following data
source components are supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><b>driver</b> &minus;
CGI::Session driver. Available drivers are file, db_file,
mysql and sqlite. Third party drivers are welcome. For
driver specs consider CGI::Session::Driver</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><b>serializer</b> &minus; serializer to be used to
encode the data structure before saving in the disk.
Available serializers are storable, freezethaw and default.
Default serializer will use Data::Dumper.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><b>id</b> &minus; <small>ID</small> generator to use
when new session is to be created. Available
<small>ID</small> generator is md5</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For example, to
get CGI::Session store its data using DB_File and serialize
data using FreezeThaw:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = new CGI::Session(&quot;driver:DB_File;serializer:FreezeThaw&quot;, undef);</pre>


<p style="margin-left:11%; margin-top: 1em">If called with
three arguments, first two will be treated as in the
previous example, and third argument will be
<tt>&quot;\%dsn_args&quot;</tt>, which will be passed to
<tt>$dsn</tt> components (namely, driver, serializer and id
generators) for initialization purposes. Since all the
<tt>$dsn</tt> components must initialize to some default
value, this third argument should not be required for most
drivers to operate properly.</p>

<p style="margin-left:11%; margin-top: 1em">If called with
four arguments, the first three match previous examples. The
fourth argument must be a hash reference with parameters to
be used by the CGI::Session object. (see \%session_params
above )</p>

<p style="margin-left:11%; margin-top: 1em">The following
is a list of the current keys:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><b>name</b> &minus; Name to use
for the cookie/query parameter name. This defaults to
<small>CGISESSID.</small> This can be altered or accessed by
the <tt>&quot;name&quot;</tt> accessor.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">undef is
acceptable as a valid placeholder to any of the above
arguments, which will force default behavior.</p>

<p style="margin-left:11%; margin-top: 1em"><i>load()</i>
<b><br>
load( $query||$sid ) <br>
load( $dsn, $query||$sid ) <br>
load( $dsn, $query, \%dsn_args ) <br>
load( $dsn, $query, \%dsn_args, \%session_params )</b> <br>
Accepts the same arguments as <i>new()</i>, and also returns
a new session object, or undef on failure. The difference
is, <i>new()</i> can create a new session if it detects
expired and non-existing sessions, but
<tt>&quot;load()&quot;</tt> does not.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;load()&quot;</tt>
is useful to detect expired or non-existing sessions without
forcing the library to create new sessions. So now you can
do something like this:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = CGI::Session&minus;&gt;load() or die CGI::Session&minus;&gt;errstr();
    if ( $s&minus;&gt;is_expired ) {
        print $s&minus;&gt;header(),
            $cgi&minus;&gt;start_html(),
            $cgi&minus;&gt;p(&quot;Your session timed out! Refresh the screen to start new session!&quot;)
            $cgi&minus;&gt;end_html();
        exit(0);
    }
    if ( $s&minus;&gt;is_empty ) {
        $s = $s&minus;&gt;new() or die $s&minus;&gt;errstr;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Notice: All
<i>expired</i> sessions are empty, but not all <i>empty</i>
sessions are expired!</p>

<p style="margin-left:11%; margin-top: 1em">Briefly,
<tt>&quot;new()&quot;</tt> will return an initialized
session object with a valid id, whereas
<tt>&quot;load()&quot;</tt> may return an empty session
object with an undefined id.</p>

<p style="margin-left:11%; margin-top: 1em">Tests are
provided (t/new_with_undef.t and t/load_with_undef.t) to
clarify the result of calling <tt>&quot;new()&quot;</tt> and
<tt>&quot;load()&quot;</tt> with undef, or with an
initialized <small>CGI</small> object with an undefined or
fake <small>CGISESSID.</small></p>

<p style="margin-left:11%; margin-top: 1em">You are
strongly advised to run the old-fashioned &rsquo;make test
TEST_FILES=t/new_with_undef.t TEST_VERBOSE=1&rsquo; or the
new-fangled &rsquo;prove &minus;v t/new_with_undef.t&rsquo;,
for both new*.t and load*.t, and examine the output.</p>

<p style="margin-left:11%; margin-top: 1em"><i>id()</i>
<br>
Returns effective <small>ID</small> for a session. Since
effective <small>ID</small> and claimed <small>ID</small>
can differ, valid session id should always be retrieved
using this method.</p>


<p style="margin-left:11%; margin-top: 1em"><b>param($name)
<br>
param(&minus;name=&gt;$name)</b> <br>
Used in either of the above syntax returns a session
parameter set to <tt>$name</tt> or undef if it doesn&rsquo;t
exist. If it&rsquo;s called on a deleted method
<i>param()</i> will issue a warning but return value is not
defined.</p>


<p style="margin-left:11%; margin-top: 1em"><b>param($name,
$value) <br>
param(&minus;name=&gt;$name, &minus;value=&gt;$value)</b>
<br>
Used in either of the above syntax assigns a new value to
<tt>$name</tt> parameter, which can later be retrieved with
previously introduced <i>param()</i> syntax. <tt>$value</tt>
may be a scalar, arrayref or hashref.</p>

<p style="margin-left:11%; margin-top: 1em">Attempts to set
parameter names that start with <i>_SESSION_</i> will
trigger a warning and undef will be returned.</p>


<p style="margin-left:11%; margin-top: 1em"><i>param_hashref()</i>
<b><br>
Deprecated</b>. Use <i>dataref()</i> instead.</p>


<p style="margin-left:11%; margin-top: 1em"><i>dataref()</i>
<br>
Returns reference to session&rsquo;s data table:</p>

<pre style="margin-left:11%; margin-top: 1em">    $params = $s&minus;&gt;dataref();
    $sid = $params&minus;&gt;{_SESSION_ID};
    $name= $params&minus;&gt;{name};
    # etc...</pre>


<p style="margin-left:11%; margin-top: 1em">Useful for
having all session data in a hashref, but too risky to
update.</p>


<p style="margin-left:11%; margin-top: 1em"><i>save_param()</i>
<b><br>
save_param($query) <br>
save_param($query, \@list)</b> <br>
Saves query parameters to session object. In other words,
it&rsquo;s the same as calling param($name, <tt>$value</tt>)
for every single query parameter returned by
<tt>&quot;$query&minus;&gt;param()&quot;</tt>. The first
argument, if present, should be either <small>CGI</small>
object or any object which can provide <i>param()</i>
method. If it&rsquo;s undef, defaults to the return value of
<i>query()</i>, which returns
<tt>&quot;CGI&minus;&gt;new&quot;</tt>. If second argument
is present and is a reference to an array, only those query
parameters found in the array will be stored in the session.
undef is a valid placeholder for any argument to force
default behavior.</p>


<p style="margin-left:11%; margin-top: 1em"><i>load_param()</i>
<b><br>
load_param($query) <br>
load_param($query, \@list)</b> <br>
Loads session parameters into a query object. The first
argument, if present, should be query object, or any other
object which can provide <i>param()</i> method. If second
argument is present and is a reference to an array, only
parameters found in that array will be loaded to the query
object.</p>

<p style="margin-left:11%; margin-top: 1em"><i>clear()</i>
<b><br>
clear(&rsquo;field&rsquo;) <br>
clear(\@list)</b> <br>
Clears parameters from the session object.</p>

<p style="margin-left:11%; margin-top: 1em">With no
parameters, all fields are cleared. If passed a single
parameter or a reference to an array, only the named
parameters are cleared.</p>

<p style="margin-left:11%; margin-top: 1em"><i>flush()</i>
<br>
Synchronizes data in memory with the copy serialized by the
driver. Call <i>flush()</i> if you need to access the
session from outside the current session object. You should
at least call <i>flush()</i> before your program exits.</p>

<p style="margin-left:11%; margin-top: 1em">As a last
resort, CGI::Session will automatically call flush for you
just before the program terminates or session object goes
out of scope. This automatic behavior was the recommended
behavior until the 4.x series. Automatic flushing has since
proven to be unreliable, and in some cases is now required
in places that worked with 3.x. For further details see:</p>

<pre style="margin-left:11%; margin-top: 1em"> http://rt.cpan.org/Ticket/Display.html?id=17541
 http://rt.cpan.org/Ticket/Display.html?id=17299</pre>


<p style="margin-left:11%; margin-top: 1em">Consequently,
always explicitly calling <tt>&quot;flush()&quot;</tt> on
the session before the program exits should be regarded as
mandatory until this problem is rectified.</p>

<p style="margin-left:11%; margin-top: 1em">Warning: A bug
in your logic whereby the <small>DBI</small> handle has gone
out out of scope before <i>flush()</i> is called means
<i>flush()</i> won&rsquo;t work (when the session is a
database session), so don&rsquo;t do that.</p>

<p style="margin-left:11%; margin-top: 1em"><i>atime()</i>
<br>
Read-only method. Returns the last access time of the
session in seconds from epoch. This time is used internally
while auto-expiring sessions and/or session parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><i>ctime()</i>
<br>
Read-only method. Returns the time when the session was
first created in seconds from epoch.</p>


<p style="margin-left:11%; margin-top: 1em"><i>expire()</i>
<b><br>
expire($time) <br>
expire($param, $time)</b> <br>
Sets expiration interval relative to <i>atime()</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If used with no
arguments, returns the expiration interval if it was ever
set. If no expiration was ever set, returns undef. For
backwards compatibility, a method named
<tt>&quot;etime()&quot;</tt> does the same thing.</p>

<p style="margin-left:11%; margin-top: 1em">Second form
sets an expiration time. This value is checked when
previously stored session is asked to be retrieved, and if
its expiration interval has passed, it will be expunged from
the disk immediately. Passing 0 cancels expiration.</p>

<p style="margin-left:11%; margin-top: 1em">By using the
third syntax you can set the expiration interval for a
particular session parameter, say <i>~logged&minus;in</i>.
This would cause the library call <i>clear()</i> on the
parameter when its time is up. Note it only makes sense to
set this value to something <i>earlier</i> than when the
whole session expires. Passing 0 cancels expiration.</p>

<p style="margin-left:11%; margin-top: 1em">All the time
values should be given in the form of seconds. Following
keywords are also supported for your convenience:</p>

<pre style="margin-left:11%; margin-top: 1em">    +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
    |   alias   |   meaning     |
    +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
    |     s     |   Second      |
    |     m     |   Minute      |
    |     h     |   Hour        |
    |     d     |   Day         |
    |     w     |   Week        |
    |     M     |   Month       |
    |     y     |   Year        |
    +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+</pre>


<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<pre style="margin-left:11%; margin-top: 1em">    $session&minus;&gt;expire(&quot;2h&quot;);                # expires in two hours
    $session&minus;&gt;expire(0);                   # cancel expiration
    $session&minus;&gt;expire(&quot;~logged&minus;in&quot;, &quot;10m&quot;); # expires '~logged&minus;in' parameter after 10 idle minutes</pre>


<p style="margin-left:11%; margin-top: 1em">Note: all the
expiration times are relative to session&rsquo;s last access
time, not to its creation time. To expire a session
immediately, call <i>delete()</i>. To expire a specific
session parameter immediately, call clear([$name]).</p>


<p style="margin-left:11%; margin-top: 1em"><i>is_new()</i>
<br>
Returns true only for a brand new session.</p>


<p style="margin-left:11%; margin-top: 1em"><i>is_expired()</i>
<br>
Tests whether session initialized using <i>load()</i> is to
be expired. This method works only on sessions initialized
with <i>load()</i>:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = CGI::Session&minus;&gt;load() or die CGI::Session&minus;&gt;errstr;
    if ( $s&minus;&gt;is_expired ) {
        die &quot;Your session expired. Please refresh&quot;;
    }
    if ( $s&minus;&gt;is_empty ) {
        $s = $s&minus;&gt;new() or die $s&minus;&gt;errstr;
    }</pre>



<p style="margin-left:11%; margin-top: 1em"><i>is_empty()</i>
<br>
Returns true for sessions that are empty. It&rsquo;s
preferred way of testing whether requested session was
loaded successfully or not:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = CGI::Session&minus;&gt;load($sid);
    if ( $s&minus;&gt;is_empty ) {
        $s = $s&minus;&gt;new();
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Actually, the
above code is nothing but waste. The same effect
could&rsquo;ve been achieved by saying:</p>

<pre style="margin-left:11%; margin-top: 1em">    $s = CGI::Session&minus;&gt;new( $sid );</pre>



<p style="margin-left:11%; margin-top: 1em"><i>is_empty()</i>
is useful only if you wanted to catch requests for expired
sessions, and create new session afterwards. See
<i>is_expired()</i> for an example.</p>


<p style="margin-left:11%; margin-top: 1em"><i>delete()</i>
<br>
Deletes a session from the data store and empties session
data from memory, completely, so subsequent read/write
requests on the same object will fail. Technically speaking,
though, it will only set the object&rsquo;s status to
<i><small>STATUS_DELETED</small></i> .</p>

<p style="margin-left:11%; margin-top: 1em">The intention
is that in due course (of the program&rsquo;s execution)
this will trigger <i>flush()</i>, and <i>flush()</i> will do
the actual removal.</p>

<p style="margin-left:11%; margin-top: 1em">However:
Auto-flushing can be unreliable, and always explicitly
calling <tt>&quot;flush()&quot;</tt> on the session after
<tt>&quot;delete()&quot;</tt> should be regarded as
mandatory until this problem is rectified.</p>

<p style="margin-left:11%; margin-top: 1em">Warning: A bug
in your logic whereby the <small>DBI</small> handle has gone
out out of scope before <i>flush()</i> is called means
<i>flush()</i> won&rsquo;t work (when the session is a
database session), so don&rsquo;t do that.</p>

<p style="margin-left:11%; margin-top: 1em"><b>find(
\&amp;code ) <br>
find( $dsn, \&amp;code ) <br>
find( $dsn, \&amp;code, \%dsn_args )</b> <br>
Experimental feature. Executes \&amp;code for every session
object stored in disk, passing initialized CGI::Session
object as the first argument of \&amp;code. Useful for
housekeeping purposes, such as for removing expired
sessions. Following line, for instance, will remove sessions
already expired, but are still in disk:</p>

<p style="margin-left:11%; margin-top: 1em">The following
line, for instance, will remove sessions already expired,
but which are still on disk:</p>

<pre style="margin-left:11%; margin-top: 1em">    CGI::Session&minus;&gt;find( sub {} );</pre>


<p style="margin-left:11%; margin-top: 1em">Notice, above
\&amp;code didn&rsquo;t have to do anything, because
<i>load()</i>, which is called to initialize sessions inside
<i>find()</i>, will automatically remove expired sessions.
Following example will remove all the objects that are 10+
days old:</p>

<pre style="margin-left:11%; margin-top: 1em">    CGI::Session&minus;&gt;find( \&amp;purge );
    sub purge {
        my ($session) = @_;
        next if $session&minus;&gt;is_empty;    # &lt;&minus;&minus; already expired?!
        if ( ($session&minus;&gt;ctime + 3600*240) &lt;= time() ) {
            $session&minus;&gt;delete() or warn &quot;couldn't remove &quot; . $session&minus;&gt;id . &quot;: &quot; . $session&minus;&gt;errstr;
        }
    }</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Note</b>:
find will not change the modification or access times on the
sessions it returns.</p>

<p style="margin-left:11%; margin-top: 1em">Explanation of
the 3 parameters to <tt>&quot;find()&quot;</tt>: <br>
$dsn</p>

<p style="margin-left:17%;">This is the <small>DSN</small>
(Data Source Name) used by CGI::Session to control what type
of sessions you previously created and what type of sessions
you now wish method <tt>&quot;find()&quot;</tt> to pass to
your callback.</p>

<p style="margin-left:17%; margin-top: 1em">The default
value is defined above, in the docs for method
<tt>&quot;new()&quot;</tt>, and is
&rsquo;driver:file;serializer:default;id:md5&rsquo;.</p>

<p style="margin-left:17%; margin-top: 1em">Do not confuse
this <small>DSN</small> with the <small>DSN</small>
arguments mentioned just below, under \%dsn_args.</p>

<p style="margin-left:11%;">\&amp;code</p>

<p style="margin-left:17%;">This is the callback provided
by you (i.e. the caller of method
<tt>&quot;find()&quot;</tt>) which is called by CGI::Session
once for each session found by method
<tt>&quot;find()&quot;</tt> which matches the given
<tt>$dsn</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">There is no
default value for this coderef.</p>

<p style="margin-left:17%; margin-top: 1em">When your
callback is actually called, the only parameter is a
session. If you want to call a subroutine you already have
with more parameters, you can achieve this by creating an
anonymous subroutine that calls your subroutine with the
parameters you want. For example:</p>

<pre style="margin-left:17%; margin-top: 1em">    CGI::Session&minus;&gt;find($dsn, sub { my_subroutine( @_, 'param 1', 'param 2' ) } );
    CGI::Session&minus;&gt;find($dsn, sub { $coderef&minus;&gt;( @_, $extra_arg ) } );</pre>


<p style="margin-left:17%; margin-top: 1em">Or if you wish,
you can define a sub generator as such:</p>

<pre style="margin-left:17%; margin-top: 1em">    sub coderef_with_args {
        my ( $coderef, @params ) = @_;
        return sub { $coderef&minus;&gt;( @_, @params ) };
    }
    CGI::Session&minus;&gt;find($dsn, coderef_with_args( $coderef, 'param 1', 'param 2' ) );</pre>


<p style="margin-left:11%;">\%dsn_args</p>

<p style="margin-left:17%;">If your <tt>$dsn</tt> uses
file-based storage, then this hashref might contain keys
such as:</p>

<pre style="margin-left:17%; margin-top: 1em">    {
        Directory =&gt; Value 1,
        NoFlock   =&gt; Value 2,
        UMask     =&gt; Value 3
    }</pre>


<p style="margin-left:17%; margin-top: 1em">If your
<tt>$dsn</tt> uses db-based storage, then this hashref
contains (up to) 3 keys, and looks like:</p>

<pre style="margin-left:17%; margin-top: 1em">    {
        DataSource =&gt; Value 1,
        User       =&gt; Value 2,
        Password   =&gt; Value 3
    }</pre>


<p style="margin-left:17%; margin-top: 1em">These 3 form
the <small>DSN,</small> username and password used by
<small>DBI</small> to control access to your database
server, and hence are only relevant when using db-based
sessions.</p>

<p style="margin-left:17%; margin-top: 1em">The default
value of this hashref is undef.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note:</b>
<i>find()</i> is meant to be convenient, not necessarily
efficient. It&rsquo;s best suited in cron scripts.</p>

<h2>MISCELLANEOUS METHODS
<a name="MISCELLANEOUS METHODS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>remote_addr()</i>
<br>
Returns the remote address of the user who created the
session for the first time. Returns undef if variable
<small>REMOTE_ADDR</small> wasn&rsquo;t present in the
environment when the session was created.</p>


<p style="margin-left:11%; margin-top: 1em"><i>errstr()</i>
<br>
Class method. Returns last error message from the
library.</p>

<p style="margin-left:11%; margin-top: 1em"><i>dump()</i>
<br>
Returns a dump of the session object. Useful for debugging
purposes only.</p>


<p style="margin-left:11%; margin-top: 1em"><i>header()</i>
<br>
Replacement for <small>CGI</small> .pm&rsquo;s
<i>header()</i> method. Without this method, you usually
need to create a CGI::Cookie object and send it as part of
the <small>HTTP</small> header:</p>

<pre style="margin-left:11%; margin-top: 1em">    $cookie = CGI::Cookie&minus;&gt;new(&minus;name=&gt;$session&minus;&gt;name, &minus;value=&gt;$session&minus;&gt;id);
    print $cgi&minus;&gt;header(&minus;cookie=&gt;$cookie);</pre>


<p style="margin-left:11%; margin-top: 1em">You can
minimize the above into:</p>

<pre style="margin-left:11%; margin-top: 1em">    print $session&minus;&gt;header();</pre>


<p style="margin-left:11%; margin-top: 1em">It will
retrieve the name of the session cookie from
<tt>&quot;$session&minus;&quot;</tt><i>name()</i>&gt; which
defaults to <tt>$CGI::Session::NAME</tt>. If you want to use
a different name for your session cookie, do something like
following before creating session object:</p>

<pre style="margin-left:11%; margin-top: 1em">    CGI::Session&minus;&gt;name(&quot;MY_SID&quot;);
    $session = new CGI::Session(undef, $cgi, \%attrs);</pre>


<p style="margin-left:11%; margin-top: 1em">Now,
<tt>$session</tt>&minus;&gt;<i>header()</i> uses &quot;
<small>MY_SID&quot;</small> as a name for the session
cookie.</p>

<p style="margin-left:11%; margin-top: 1em"><i>query()</i>
<br>
Returns query object associated with current session object.
Default query object class is <small>CGI</small> .pm.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>DEPRECATED
METHODS</small></b> <br>
These methods exist solely for for compatibility with
CGI::Session 3.x.</p>


<p style="margin-left:11%; margin-top: 1em"><i>close()</i></p>

<p style="margin-left:11%; margin-top: 1em">Closes the
session. Using <i>flush()</i> is recommended instead, since
that&rsquo;s exactly what a call to <i>close()</i> does
now.</p>

<h2>DISTRIBUTION
<a name="DISTRIBUTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Session
consists of several components such as drivers, serializers
and id generators. This section lists what is available.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>DRIVERS</small></b>
<br>
Following drivers are included in the standard
distribution:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>file &minus; default driver for storing session data in
plain files. Full name:
<b>CGI::Session::Driver::file</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>db_file &minus; for storing session data in BerkelyDB.
Requires: DB_File. Full name:
<b>CGI::Session::Driver::db_file</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>mysql &minus; for storing session data in MySQL tables.
Requires <small>DBI</small> and DBD::mysql. Full name:
<b>CGI::Session::Driver::mysql</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>sqlite &minus; for storing session data in SQLite.
Requires <small>DBI</small> and DBD::SQLite. Full name:
<b>CGI::Session::Driver::sqlite</b></p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b><small>SERIALIZERS</small></b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">default &minus; default data
serializer. Uses standard Data::Dumper. Full name:
<b>CGI::Session::Serialize::default</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>storable &minus; serializes data using Storable.
Requires Storable. Full name:
<b>CGI::Session::Serialize::storable</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>freezethaw &minus; serializes data using FreezeThaw.
Requires FreezeThaw. Full name:
<b>CGI::Session::Serialize::freezethaw</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>yaml &minus; serializes data using <small>YAML.</small>
Requires <small>YAML</small> or YAML::Syck. Full name:
<b>CGI::Session::Serialize::yaml</b></p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b><small>ID
GENERATORS</small></b> <br>
Following <small>ID</small> generators are available:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">md5 &minus; generates 32
character long hexadecimal string. Requires Digest::MD5.
Full name: <b>CGI::Session::ID::md5</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>incr &minus; generates incremental session ids.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>static &minus; generates static session ids.
<b>CGI::Session::ID::static</b></p> </td></tr>
</table>

<h2>CREDITS
<a name="CREDITS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Session
evolved to what it is today with the help of following
developers. The list doesn&rsquo;t follow any strict order,
but somewhat chronological. Specifics can be found in
<i>Changes</i> file <br>
Andy Lester <br>
Brian King &lt;mrbbking@mac.com&gt; <br>
Olivier Dragon &lt;dragon@shadnet.shad.ca&gt; <br>
Adam Jacob &lt;adam@sysadminsith.org&gt; <br>
Igor Plisco &lt;igor@plisco.ru&gt; <br>
Mark Stosberg <br>
Matt LeBlanc &lt;mleblanc@cpan.org&gt; <br>
Shawn Sorichetti</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2001&minus;2005 Sherzod Ruzmetov &lt;sherzodr@cpan.org&gt;.
All rights reserved. This library is free software. You can
modify and or distribute it under the same terms as Perl
itself.</p>

<h2>PUBLIC CODE REPOSITORY
<a name="PUBLIC CODE REPOSITORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can see
what the developers have been up to since the last release
by checking out the code repository. You can browse the
Subversion repository from here:</p>

<pre style="margin-left:11%; margin-top: 1em"> http://svn.cromedome.net/repos/CGI&minus;Session</pre>


<p style="margin-left:11%; margin-top: 1em">Or check it
directly with <tt>&quot;svn&quot;</tt> from here:</p>

<pre style="margin-left:11%; margin-top: 1em"> https://svn.cromedome.net/repos/CGI&minus;Session</pre>


<h2>SUPPORT
<a name="SUPPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you need
help using CGI::Session consider the mailing list. You can
ask the list by sending your questions to
cgi&minus;session&minus;user@lists.sourceforge.net .</p>

<p style="margin-left:11%; margin-top: 1em">You can
subscribe to the mailing list at
https://lists.sourceforge.net/lists/listinfo/cgi&minus;session&minus;user
.</p>

<p style="margin-left:11%; margin-top: 1em">Bug reports can
be submitted at
http://rt.cpan.org/NoAuth/ReportBug.html?Queue=CGI&minus;Session</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sherzod
Ruzmetov &lt;sherzodr@cpan.org&gt;,
http://author.handalak.com/</p>

<p style="margin-left:11%; margin-top: 1em">Mark Stosberg
became a co-maintainer during the development of 4.0.
<tt>&quot;markstos@cpan.org&quot;</tt>. Ron Savage became a
co-maintainer during the development of 4.30.
<tt>&quot;rsavage@cpan.org&quot;</tt>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">CGI::Session::Tutorial &minus;
extended CGI::Session manual</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><b><small>RFC 2965</small></b> &minus; &quot;
<small>HTTP</small> State Management Mechanism&quot; found
at ftp://ftp.isi.edu/in&minus;notes/rfc2965.txt</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><small>CGI</small> &minus; standard <small>CGI</small>
library</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Apache::Session &minus; another fine alternative to
CGI::Session</p> </td></tr>
 </table>
<hr>
</body>
</html>
