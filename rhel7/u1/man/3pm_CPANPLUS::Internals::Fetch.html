<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:29:46 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CPANPLUS::Internals::Fetch</title>

</head>
<body>

<h1 align="center">CPANPLUS::Internals::Fetch</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#METHODS">METHODS</a><br>
<a href="#$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; &rsquo;/path/to/save/to&rsquo;, fetch_from=&gt; &rsquo;scheme://path/to/fetch/from&rsquo;, verbose =&gt; BOOL, force =&gt; BOOL,prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )">$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; &rsquo;/path/to/save/to&rsquo;, fetch_from=&gt; &rsquo;scheme://path/to/fetch/from&rsquo;, verbose =&gt; BOOL, force =&gt; BOOL,prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">CPANPLUS::Internals::Fetch
&minus; internals for fetching files</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">    my $output = $cb&minus;&gt;_fetch(
                        module      =&gt; $modobj,
                        fetchdir    =&gt; '/path/to/save/to',
                        verbose     =&gt; BOOL,
                        force       =&gt; BOOL,
                    );
    $cb&minus;&gt;_add_fail_host( host =&gt; 'foo.com' );
    $cb&minus;&gt;_host_ok(       host =&gt; 'foo.com' );</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">CPANPLUS::Internals::Fetch
fetches files from either ftp, http, file or rsync
mirrors.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
rough flow:</p>

<pre style="margin-left:11%; margin-top: 1em">    $cb&minus;&gt;_fetch
        Delegate to File::Fetch;</pre>


<h2>METHODS
<a name="METHODS"></a>
</h2>



<h2>$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; &rsquo;/path/to/save/to&rsquo;, fetch_from=&gt; &rsquo;scheme://path/to/fetch/from&rsquo;, verbose =&gt; BOOL, force =&gt; BOOL,prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )

<a name="$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; &rsquo;/path/to/save/to&rsquo;, fetch_from=&gt; &rsquo;scheme://path/to/fetch/from&rsquo;, verbose =&gt; BOOL, force =&gt; BOOL,prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><tt>&quot;_fetch&quot;</tt>
will fetch files based on the information in a module
object. You always need a module object. If you want a fake
module object for a one-off fetch, look at
<tt>&quot;CPANPLUS::Module::Fake&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;fetchdir&quot;</tt>
is the place to save the file to. Usually this information
comes from your configuration, but you can override it
expressly if needed.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;fetch_from&quot;</tt>
lets you specify an <small>URI</small> to get this file
from. If you do not specify one, your list of configured
hosts will be probed to download the file from.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;force&quot;</tt>
forces a new download, even if the file already exists.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;verbose&quot;</tt>
simply indicates whether or not to print extra messages.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;prefer_bin&quot;</tt>
indicates whether you prefer the use of commandline programs
over perl modules. Defaults to your corresponding config
setting.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;ttl&quot;</tt>
(in seconds) indicates how long a cached copy is valid for.
If the fetch time of the local copy is within the ttl, the
cached copy is returned. Otherwise, the file is
refetched.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;_fetch&quot;</tt>
figures out, based on the host list, what scheme to use and
from there, delegates to <tt>&quot;File::Fetch&quot;</tt> do
the actual fetching.</p>

<p style="margin-left:11%; margin-top: 1em">Returns the
path of the output file on success, false on failure.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
can set a <tt>&quot;blacklist&quot;</tt> on certain methods
in the config. Simply add the identifying name of the method
(ie, <tt>&quot;lwp&quot;</tt>) to: <tt><br>
$conf</tt>&minus;&gt;_set_fetch( blacklist =&gt;
[&rsquo;lwp&rsquo;] );</p>

<p style="margin-left:11%; margin-top: 1em">And the
<tt>&quot;LWP&quot;</tt> function will be skipped by
<tt>&quot;File::Fetch&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>_add_fail_host(
host =&gt; $host_hashref )</b> <br>
Mark a particular host as bad. This makes
<tt>&quot;CPANPLUS::Internals::Fetch&quot;</tt> skip it in
fetches until this cache is flushed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>_host_ok(
host =&gt; $host_hashref )</b> <br>
Query the cache to see if this host is ok, or if it has been
flagged as bad.</p>

<p style="margin-left:11%; margin-top: 1em">Returns true if
the host is ok, false otherwise.</p>
<hr>
</body>
</html>
