<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:30:02 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SSM</title>

</head>
<body>

<h1 align="center">SSM</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SYSTEM STORAGE MANAGER COMMANDS">SYSTEM STORAGE MANAGER COMMANDS</a><br>
<a href="#BACK-ENDS">BACK-ENDS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#LICENCE">LICENCE</a><br>
<a href="#REQUIREMENTS">REQUIREMENTS</a><br>
<a href="#AVAILABILITY">AVAILABILITY</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ssm &minus;
System Storage Manager: a single tool to manage your
storage</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ssm</b>
[<b>&minus;h</b>] [<b>&minus;&minus;version</b>]
[<b>&minus;v</b>] [<b>&minus;f</b>] [<b>&minus;b</b>
BACKEND] [<b>&minus;n</b>]
{check,resize,create,list,add,remove,snapshot,mount} ...</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
create</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
[<b>&minus;n</b> NAME] [<b>&minus;&minus;fstype</b> FSTYPE]
[<b>&minus;r</b> LEVEL] [<b>&minus;I</b> STRIPESIZE]
[<b>&minus;i</b> STRIPES] [<b>&minus;p</b> POOL]
[<b>&minus;e</b> [{luks,plain}]] [<b>device</b>
[<b>device</b> ...]] [mount]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm list</b>
[<b>&minus;h</b>]
[{volumes,vol,dev,devices,pool,pools,fs,filesystems,snap,snapshots}]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
remove</b> [<b>&minus;h</b>] [<b>&minus;a</b>] [<b>items</b>
[<b>items</b> ...]]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
resize</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
<b>volume</b> [<b>device</b> [<b>device</b> ...]]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
check</b> [<b>&minus;h</b>] <b>device</b> [<b>device</b>
...]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
snapshot</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
[<b>&minus;d</b> DEST | <b>&minus;n</b> NAME] volume</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm add</b>
[<b>&minus;h</b>] [<b>&minus;p</b> POOL] <b>device</b>
[<b>device</b> ...]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm
mount</b> [<b>&minus;h</b>] [<b>&minus;o</b> OPTIONS]
<b>volume</b> directory</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">System Storage
Manager provides easy to use command line interface to
manage your storage using various technologies like lvm,
btrfs, encrypted volumes and more.</p>

<p style="margin-left:11%; margin-top: 1em">In more
sophisticated enterprise storage environments, management
with Device Mapper (dm), Logical Volume Manager (LVM), or
Multiple Devices (md) is becoming increasingly more
difficult. With file systems added to the mix, the number of
tools needed to configure and manage storage has grown so
large that it is simply not user friendly. With so many
options for a system administrator to consider, the
opportunity for errors and problems is large.</p>

<p style="margin-left:11%; margin-top: 1em">The btrfs
administration tools have shown us that storage management
can be simplified, and we are working to bring that ease of
use to Linux filesystems in general.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">show program's version number
and exit</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">Show aditional information
while executing.</p>

<p style="margin-left:11%;"><b>&minus;f</b>,
<b>&minus;&minus;force</b></p>

<p style="margin-left:22%;">Force execution in the case
where ssm has some doubts or questions.</p>


<p style="margin-left:11%;"><b>&minus;b&nbsp;</b><i>BACKEND</i><b>,&nbsp;&minus;&minus;backend&nbsp;</b><i>BACKEND</i></p>

<p style="margin-left:22%;">Choose backend to use.
Currently you can choose from (lvm,btrfs,crypt).</p>

<p style="margin-left:11%;"><b>&minus;n</b>,
<b>&minus;&minus;dry&minus;run</b></p>

<p style="margin-left:22%;">Dry run. Do not do anything,
just parse the command line options and gather system
information if necessary. Note that with this option ssm
will not perform all the check as some of them are done by
the backends themselves. This option is mainly used for
debugging purposes.</p>

<h2>SYSTEM STORAGE MANAGER COMMANDS
<a name="SYSTEM STORAGE MANAGER COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Introduction</b>
<br>
System Storage Manager have several commands you can specify
on the command line as a first argument to the ssm. They all
have specific use and its own arguments, but global ssm
arguments are propagated to all commands.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Create
command <br>
ssm create</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
[<b>&minus;n</b> NAME] [<b>&minus;&minus;fstype</b> FSTYPE]
[<b>&minus;r</b> LEVEL] [<b>&minus;I</b> STRIPESIZE]
[<b>&minus;i</b> STRIPES] [<b>&minus;p</b> POOL]
[<b>&minus;e</b> [{luks,plain}]] [<b>device</b>
[<b>device</b> ...]] [mount]</p>

<p style="margin-left:11%; margin-top: 1em">This command
creates a new volume with defined parameters. If
<b>device</b> is provided it will be used to create a
volume, hence it will be added into the <b>pool</b> prior
the volume creation (See <i>Add command section</i>). More
devices can be used to create a volume.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>device</b> is already used in the different pool, then
<b>ssm</b> will ask you whether you want to remove it from
the original pool. If you decline, or the removal fails,
then the <b>volume</b> creation fails if the <i>SIZE</i> was
not provided. On the other hand, if the <i>SIZE</i> is
provided and some devices can not be added to the
<b>pool</b> the volume creation might succeed if there is
enough space in the <b>pool</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>POOL</i>
name can be specified as well. If the pool exists new volume
will be created from that pool (optionally adding
<b>device</b> into the pool). However if the <i>POOL</i>
does not exist <b>ssm</b> will attempt to create a new pool
with provided <b>device</b> and then create a new volume
from this pool. If <b>&minus;&minus;backend</b> argument is
omitted, the default <b>ssm</b> backend will be used.
Default backend is <i>lvm</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ssm</b> also
supports creating RAID configuration, however some
back&minus;ends might not support all the levels, or it
might not support RAID at all. In this case, volume creation
will fail.</p>

<p style="margin-left:11%; margin-top: 1em">If <b>mount</b>
point is provided <b>ssm</b> will attempt to mount the
volume after it is created. However it will fail if
mountable file system is not present on the volume. <b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;s&nbsp;</b><i>SIZE</i><b>,&nbsp;&minus;&minus;size&nbsp;</b><i>SIZE</i></p>

<p style="margin-left:22%;">Gives the size to allocate for
the new logical volume A size suffix K|k, M|m, G|g, T|t,
P|p, E|e can be used to define 'power of two' units. If no
unit is provided, it defaults to kilobytes. This is optional
if if not given maximum possible size will be used.</p>


<p style="margin-left:11%;"><b>&minus;n&nbsp;</b><i>NAME</i><b>,&nbsp;&minus;&minus;name&nbsp;</b><i>NAME</i></p>

<p style="margin-left:22%;">The name for the new logical
volume. This is optional and if omitted, name will be
generated by the corresponding backend.</p>


<p style="margin-left:11%;"><b>&minus;&minus;fstype&nbsp;</b><i>FSTYPE</i></p>

<p style="margin-left:22%;">Gives the file system type to
create on the new logical volume. Supported file systems are
(ext3, ext4, xfs, btrfs). This is optional and if not given
file system will not be created.</p>


<p style="margin-left:11%;"><b>&minus;r&nbsp;</b><i>LEVEL</i><b>,&nbsp;&minus;&minus;raid&nbsp;</b><i>LEVEL</i></p>

<p style="margin-left:22%;">Specify a RAID level you want
to use when creating a new volume. Note that some backends
might not implement all supported RAID levels. This is
optional and if no specified, linear volume will be created.
You can choose from the following list of supported levels
(0,1,10).</p>


<p style="margin-left:11%;"><b>&minus;I&nbsp;</b><i>STRIPESIZE</i><b>,&nbsp;&minus;&minus;stripesize&nbsp;</b><i>STRIPESIZE</i></p>

<p style="margin-left:22%;">Gives the number of kilobytes
for the granularity of stripes. This is optional and if not
given, backend default will be used. Note that you have to
specify RAID level as well.</p>


<p style="margin-left:11%;"><b>&minus;i&nbsp;</b><i>STRIPES</i><b>,&nbsp;&minus;&minus;stripes&nbsp;</b><i>STRIPES</i></p>

<p style="margin-left:22%;">Gives the number of stripes.
This is equal to the number of physical volumes to scatter
the logical volume. This is optional and if stripesize is
set and multiple devices are provided stripes is determined
automatically from the number of devices. Note that you have
to specify RAID level as well.</p>


<p style="margin-left:11%;"><b>&minus;p&nbsp;</b><i>POOL</i><b>,&nbsp;&minus;&minus;pool&nbsp;</b><i>POOL</i></p>

<p style="margin-left:22%;">Pool to use to create the new
volume.</p>

<p style="margin-left:11%;"><b>&minus;e [{luks,plain}],
&minus;&minus;encrypt [{luks,plain}]</b></p>

<p style="margin-left:22%;">Create encrpted volume.
Extension to use can be specified.</p>

<p style="margin-left:11%; margin-top: 1em"><b>List command
<br>
ssm list</b> [<b>&minus;h</b>]
[{volumes,vol,dev,devices,pool,pools,fs,filesystems,snap,snapshots}]</p>

<p style="margin-left:11%; margin-top: 1em">List
informations about all detected devices, pools, volumes and
snapshots found in the system. <b>list</b> command can be
used either alone to list all the information, or you can
request specific section only.</p>

<p style="margin-left:11%; margin-top: 1em">Following
sections can be specified: <b><br>
{volumes | vol}</b></p>

<p style="margin-left:22%;">List information about all
<b>volumes</b> found in the system.</p>

<p style="margin-left:11%;"><b>{devices | dev}</b></p>

<p style="margin-left:22%;">List information about all
<b>devices</b> found in the system. Some devices are
intentionally hidden, like for example cdrom, or DM/MD
devices since those are actually listed as volumes.</p>

<p style="margin-left:11%;"><b>{pools | pool}</b></p>

<p style="margin-left:22%;">List information about all
<b>pools</b> found in the system.</p>

<p style="margin-left:11%;"><b>{filesystems | fs}</b></p>

<p style="margin-left:22%;">List information about all
volumes containing <b>filesystems</b> found in the
system.</p>

<p style="margin-left:11%;"><b>{snapshots | snap}</b></p>

<p style="margin-left:22%;">List information about all
<b>snapshots</b> found in the system. Note that some
back&minus;ends does not support snapshotting and some can
not distinguish between snapshot and regular volume. in this
case <b>ssm</b> will try to recognize volume name in order
to identify <b>snapshot</b>, but if the <b>ssm</b> regular
expression does not match the snapshot pattern, this
snapshot will not be recognized.</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>

<p style="margin-left:11%; margin-top: 1em"><b>Remove
command <br>
ssm remove</b> [<b>&minus;h</b>] [<b>&minus;a</b>]
[<b>items</b> [<b>items</b> ...]]</p>

<p style="margin-left:11%; margin-top: 1em">This command
removes <b>item</b> from the system. Multiple items can be
specified. If the <b>item</b> can not be removed for some
reason, it will be skipped.</p>

<p style="margin-left:11%; margin-top: 1em"><b>item</b> can
represent:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Remove <b>device</b> from the pool. Note that this can
not be done in some cases where the device is used by pool.
You can use <b>&minus;f</b> argument to <i>force</i>
removal. If the device does not belong to any pool, it will
be skipped.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>pool</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Remove the <b>pool</b> from the system. This will also
remove all volumes created from that pool.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>volume</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Remove the <b>volume</b> from the system. Note that this
will fail if the <b>volume</b> is mounted and it can not be
<i>forced</i> with <b>&minus;f</b>.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>

<p style="margin-left:11%;"><b>&minus;a</b>,
<b>&minus;&minus;all</b></p>

<p style="margin-left:22%;">Remove all pools in the
system.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Resize
command <br>
ssm resize</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
<b>volume</b> [<b>device</b> [<b>device</b> ...]]</p>

<p style="margin-left:11%; margin-top: 1em">Change size of
the <b>volume</b> and file system. If there is no file
system only the <b>volume</b> itself will be resized. You
can specify <b>device</b> to add into the <b>volume</b> pool
prior the resize. Note that <b>device</b> will only be added
into the pool if the <b>volume</b> size is going to
grow.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>device</b> is already used in the different pool, then
<b>ssm</b> will ask you whether you want to remove it from
the original pool.</p>

<p style="margin-left:11%; margin-top: 1em">In some cases
file system has to be mounted in order to resize. This will
be handled by <b>ssm</b> automatically by mounting the
<b>volume</b> temporarily.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
resizing btrfs subvolume is not supported, only the whole
file system can be resized. <b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;s&nbsp;</b><i>SIZE</i><b>,&nbsp;&minus;&minus;size&nbsp;</b><i>SIZE</i></p>

<p style="margin-left:22%;">New size of the volume. With
the + or &minus; sign the value is added to or subtracted
from the actual size of the volume and without it, the value
will be set as the new volume size. A size suffix of [k|K]
for kilobytes, [m|M] for megabytes, [g|G] for gigabytes,
[t|T] for terabytes or [p|P] for petabytes is optional. If
no unit is provided the default is kilobytes.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Check
command <br>
ssm check</b> [<b>&minus;h</b>] <b>device</b> [<b>device</b>
...]</p>

<p style="margin-left:11%; margin-top: 1em">Check the file
system consistency on the <b>volume</b>. You can specify
multiple volumes to check. If there is no file system on the
<b>volume</b>, this <b>volume</b> will be skipped.</p>

<p style="margin-left:11%; margin-top: 1em">In some cases
file system has to be mounted in order to check the file
system This will be handled by <b>ssm</b> automatically by
mounting the <b>volume</b> temporarily. <b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>

<p style="margin-left:11%; margin-top: 1em"><b>Snapshot
command <br>
ssm snapshot</b> [<b>&minus;h</b>] [<b>&minus;s</b> SIZE]
[<b>&minus;d</b> DEST | <b>&minus;n</b> NAME] volume</p>

<p style="margin-left:11%; margin-top: 1em">Take a snapshot
of existing <b>volume</b>. This operation will fail if
back&minus;end which the <b>volume</b> belongs to does not
support snapshotting. Note that you can not specify both
<i>NAME</i> and <i>DESC</i> since those options are mutually
exclusive.</p>

<p style="margin-left:11%; margin-top: 1em">In some cases
file system has to be mounted in order to take a snapshot of
the <b>volume</b>. This will be handled by <b>ssm</b>
automatically by mounting the <b>volume</b> temporarily.
<b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;s&nbsp;</b><i>SIZE</i><b>,&nbsp;&minus;&minus;size&nbsp;</b><i>SIZE</i></p>

<p style="margin-left:22%;">Gives the size to allocate for
the new snapshot volume A size suffix K|k, M|m, G|g, T|t,
P|p, E|e can be used to define 'power of two' units. If no
unit is provided, it defaults to kilobytes. This is option
and if not give, the size will be determined
automatically.</p>


<p style="margin-left:11%;"><b>&minus;d&nbsp;</b><i>DEST</i><b>,&nbsp;&minus;&minus;dest&nbsp;</b><i>DEST</i></p>

<p style="margin-left:22%;">Destination of the snapshot
specified with absolute path to be used for the new
snapshot. This is optional and if not specified default
backend policy will be performed.</p>


<p style="margin-left:11%;"><b>&minus;n&nbsp;</b><i>NAME</i><b>,&nbsp;&minus;&minus;name&nbsp;</b><i>NAME</i></p>

<p style="margin-left:22%;">Name of the new snapshot. This
is optional and if not specified default backend policy will
be performed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Add command
<br>
ssm add</b> [<b>&minus;h</b>] [<b>&minus;p</b> POOL]
<b>device</b> [<b>device</b> ...]</p>

<p style="margin-left:11%; margin-top: 1em">This command
adds <b>device</b> into the pool. The <b>device</b> will not
be added if it's already part of different pool by default,
but user will be asked whether to remove the device from
it's pool. When multiple devices are provided, all of them
are added into the pool. If one of the devices can not be
added into the pool for any reason, add command will fail.
If no pool is specified, default pool will be chosen. In the
case of non existing pool, it will be created using provided
devices. <b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;p&nbsp;</b><i>POOL</i><b>,&nbsp;&minus;&minus;pool&nbsp;</b><i>POOL</i></p>

<p style="margin-left:22%;">Pool to add device into. If not
specified the default pool is used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Mount
command <br>
ssm mount</b> [<b>&minus;h</b>] [<b>&minus;o</b> OPTIONS]
<b>volume</b> directory</p>

<p style="margin-left:11%; margin-top: 1em">This command
will mount the <b>volume</b> at specified <b>directory</b>.
The <b>volume</b> can be specified in the same way as with
<b>mount(8)</b>, however in addition one can also specify
<b>volume</b> in the format as it appear in the <b>ssm
list</b> table.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
instead of finding out what the device and subvolume id of
the btrfs subvolume &quot;btrfs_pool:vol001&quot; is in
order to mount it, on can simply call <b>ssm mount
btrfs_pool:vol001 /mnt/test</b>.</p>

<p style="margin-left:11%; margin-top: 1em">One can also
specify <i>OPTIONS</i> in the same way as with
<b>mount(8)</b>. <b><br>
&minus;h</b>, <b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">show this help message and
exit</p>


<p style="margin-left:11%;"><b>&minus;o&nbsp;</b><i>OPTIONS</i><b>,&nbsp;&minus;&minus;options&nbsp;</b><i>OPTIONS</i></p>

<p style="margin-left:22%;">Options are specified with a
&minus;o flag followed by a comma separated string of
options. This option is equivalent to the same mount(8)
option.</p>

<h2>BACK-ENDS
<a name="BACK-ENDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Introduction</b>
<br>
Ssm aims to create unified user interface for various
technologies like Device Mapper (dm), Btrfs file system,
Multiple Devices (md) and possibly more. In order to do so
we have a core abstraction layer in <b>ssmlib/main.py</b>.
This abstraction layer should ideally know nothing about the
underlying technology, but rather comply with <b>device</b>,
<b>pool</b> and <b>volume</b> abstraction.</p>

<p style="margin-left:11%; margin-top: 1em">Various
backends can be registered in <b>ssmlib/main.py</b> in order
to handle specific storage technology implementing methods
like <i>create</i>, <i>snapshot</i>, or <i>remove</i>
volumes and pools. The core will then call these methods to
manage the storage without needing to know what lies
underneath it. There are already several backends registered
in ssm.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Btrfs
backend</b> <br>
Btrfs is the file system with many advanced features
including volume management. This is the reason why btrfs is
handled differently than other <i>conventional</i> file
systems in <b>ssm</b>. It is used as a volume management
back&minus;end.</p>

<p style="margin-left:11%; margin-top: 1em">Pools, volumes
and snapshots can be created with btrfs backend and here is
what it means from the btrfs point of view:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>pool</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Pool is actually a btrfs file system itself, because it
can be extended by adding more devices, or shrink by
removing devices from it. Subvolumes and snapshots can also
be created. When the new btrfs pool should be created
<b>ssm</b> simply creates a btrfs file system, which means
that every new btrfs pool has one volume of the same name as
the pool itself which can not be removed without removing
the entire pool. Default btrfs pool name is
<b>btrfs_pool</b>.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">When creating
new btrfs pool, the name of the pool is used as the file
system label. If there is already existing btrfs file system
in the system without a label, btrfs pool name will be
generated for internal use in the following format
&quot;btrfs_{device base name}&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">Btrfs pool is
created when <b>create</b> or <b>add</b> command is used
with devices specified and non existing pool name.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>volume</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Volume in btrfs back&minus;end
is actually just btrfs subvolume with the exception of the
first volume created on btrfs pool creation, which is the
file system itself. Subvolumes can only be created on btrfs
file system when it is mounted, but user does not have to
worry about that since <b>ssm</b> will automatically mount
the file system temporarily in order to create a new
subvolume.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Volume name is
used as subvolume path in the btrfs file system and every
object in this path must exists in order to create a volume.
Volume name for internal tracking and for representing to
the user is generated in the format
&quot;{pool_name}:{volume name}&quot;, but volumes can be
also referenced with its mount point.</p>

<p style="margin-left:22%; margin-top: 1em">Btrfs volumes
are only shown in the <i>list</i> output, when the file
system is mounted, with the exception of the main btrfs
volume &minus; the file system itself.</p>

<p style="margin-left:22%; margin-top: 1em">Also note that
btrfs volumes and subvolumes can not be resized. This is
mainly limitation of the btrfs tools which currently does
not work reliably.</p>

<p style="margin-left:22%; margin-top: 1em">New btrfs
volume can be created with <b>create</b> command.</p>

<p style="margin-left:11%;"><b>snapshot</b></p>

<p style="margin-left:22%;">Btrfs file system support
subvolume snapshotting, so you can take a snapshot of any
btrfs volume in the system with <b>ssm</b>. However btrfs
does not distinguish between subvolumes and snapshots,
because snapshot actually is just a subvolume with some
block shared with different subvolume. It means, that
<b>ssm</b> is not able to recognize btrfs snapshot directly,
but instead it is trying to recognize special name format of
the btrfs volume. However, if the <i>NAME</i> is specified
when creating snapshot which does not match the special
pattern, snapshot will not be recognized by the <b>ssm</b>
and it will be listed as regular btrfs volume.</p>

<p style="margin-left:22%; margin-top: 1em">New btrfs
snapshot can be created with <b>snapshot</b> command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Btrfs does not require any special device to be created
on.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Lvm
backend</b> <br>
Pools, volumes and snapshots can be created with lvm, which
pretty much match the lvm abstraction.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>pool</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Lvm pool is just <i>volume
group</i> in lvm language. It means that it is grouping
devices and new logical volumes can be created out of the
lvm pool. Default lvm pool name is <b>lvm_pool</b>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Lvm pool is
created when <b>create</b> or <b>add</b> command is used
with devices specified and non existing pool name.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>volume</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Lvm volume is just <i>logical
volume</i> in lvm language. Lvm volume can be created wit
<b>create</b> command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>snapshot</b></p>

<p style="margin-left:22%;">Lvm volumes can be snapshotted
as well. When a snapshot is created from the lvm volume, new
<i>snapshot</i> volume is created, which can be handled as
any other lvm volume. Unlike <i>btrfs</i> lvm is able to
distinguish snapshot from regular volume, so there is no
need for a snapshot name to match special pattern.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Lvm requires <i>physical device</i> to be created on the
device, but with <b>ssm</b> this is transparent for the
user.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Crypt
backend</b> <br>
Crypt backend in <b>ssm</b> uses cryptsetup and
dm&minus;crypt target to manage encrypted volumes. Crypt
backend can be used as a regular backend for creating
encrypted volumes on top of regular block devices, or even
other volumes (lvm or md volumes for example). Or it can be
used to create encrypted lvm volumes right away in a single
step.</p>

<p style="margin-left:11%; margin-top: 1em">Only volumes
can be created with crypt backend. This backend does not
support pooling and does not require special devices.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>pool</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Crypt backend does not support
pooling it is not possible to create crypt pool or add a
device into a pool.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>volume</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Volume in crypt backend is the volume created by
dm&minus;crypt which represent the data on the original
encrypted device in unencrypted form. Crypt backend does not
support pooling, so only one device can be used to create
crypt volume. It also does not support raid or any device
concatenation.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Currently two
modes, or extensions are supported luks and plain. Luks is
used by default.For more information about the extensions
please see <b>cryptsetup</b> manual page.</p>

<p style="margin-left:11%;"><b>snapshot</b></p>

<p style="margin-left:22%;">Crypt backend does not support
snapshotting, however if the encrypted volume is created on
top of the lvm volume, the lvm volume itself can be
snapshotted. The snapshot can be then opened by using
<b>cryptsetup</b>. It is possible that this might change in
the future so that <b>ssm</b> will be able to activate the
volume directly without the extra step.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Crypt backend does not require any special device to be
created on.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>MD
backend</b> <br>
MD backend in <b>ssm</b> is currently limited to only gather
the information about MD volumes in the system. You can not
create or manage MD volumes or pools, but it will be
extended in the future.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>List</b>
system storage information:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm list</pre>


<p style="margin-left:11%; margin-top: 1em"><b>List</b> all
pools in the system:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm list pools</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Create</b> a
new 100GB <b>volume</b> with default lvm backend using
<i>/dev/sda</i> and <i>/dev/sdb</i> with xfs file
system:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm create &minus;&minus;size 100G &minus;&minus;fs xfs /dev/sda /dev/sdb</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Create</b> a
new <b>volume</b> with btrfs backend using <i>/dev/sda</i>
and <i>/dev/sdb</i> and let the volume to be RAID 1:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm &minus;b btrfs create &minus;&minus;raid 1 /dev/sda /dev/sdb</pre>


<p style="margin-left:11%; margin-top: 1em">Using lvm
backend <b>create</b> a RAID 0 <b>volume</b> with devices
<i>/dev/sda</i> and <i>/dev/sdb</i> with 128kB stripe size,
ext4 file system and mount it on <i>/home</i>:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm create &minus;&minus;raid 0 &minus;&minus;stripesize 128k /dev/sda /dev/sdb /home</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Extend</b>
btrfs <b>volume</b> <i>btrfs_pool</i> by 500GB and use
<i>/dev/sdc</i> and <i>/dev/sde</i> to cover the resize:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm resize &minus;s +500G btrfs_pool /dev/sdc /dev/sde</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Shrink
volume</b> <i>/dev/lvm_pool/lvol001</i> by 1TB:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm resize &minus;s&minus;1t /dev/lvm_pool/lvol001</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Remove</b>
<i>/dev/sda</i> <b>device</b> from the pool, remove the
<i>btrfs_pool</i> <b>pool</b> and also remove the
<b>volume</b> <i>/dev/lvm_pool/lvol001</i>:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm remove /dev/sda btrfs_pool /dev/lvm_pool/lvol001</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Take a
snapshot</b> of the btrfs volume
<i>btrfs_pool:my_volume</i>:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm snapshot btrfs_pool:my_volume</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Add
devices</b> <i>/dev/sda</i> and <i>/dev/sdb</i> into the
<i>btrfs_pool</i> pool:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm add &minus;p btrfs_pool /dev/sda /dev/sdb</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Mount btrfs
subvolume</b> <i>btrfs_pool:vol001</i> on
<i>/mnt/test</i>:</p>

<pre style="margin-left:15%; margin-top: 1em"># ssm mount btrfs_pool:vol001 /mnt/test</pre>


<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>SSM_DEFAULT_BACKEND</b></p>

<p style="margin-left:22%;">Specify which backend will be
used by default. This can be overridden by specifying
<b>&minus;b</b> or <b>&minus;&minus;backend</b> argument.
Currently only <i>lvm</i> and <i>btrfs</i> is supported.</p>


<p style="margin-left:11%;"><b>SSM_LVM_DEFAULT_POOL</b></p>

<p style="margin-left:22%;">Name of the default lvm pool to
be used if <b>&minus;p</b> or <b>&minus;&minus;pool</b>
argument is omitted.</p>


<p style="margin-left:11%;"><b>SSM_BTRFS_DEFAULT_POOL</b></p>

<p style="margin-left:22%;">Name of the default btrfs pool
to be used if <b>&minus;p</b> or <b>&minus;&minus;pool</b>
argument is omitted.</p>

<p style="margin-left:11%;"><b>SSM_PREFIX_FILTER</b></p>

<p style="margin-left:22%;">When this is set <b>ssm</b>
will filter out all devices, volumes and pools which name
does not start with this prefix. It is used mainly in
<b>ssm</b> test suite to make sure that we do not scramble
local system configuration.</p>

<h2>LICENCE
<a name="LICENCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">(C)2011 Red
Hat, Inc., Lukas Czerner
&lt;<i>lczerner@redhat.com</i>&gt;</p>

<p style="margin-left:11%; margin-top: 1em">This program is
free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as
published by the Free Software Foundation, either version 2
of the License, or (at your option) any later version.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the GNU General Public License along with
this program. If not, see
&lt;<i>http://www.gnu.org/licenses/</i>&gt;.</p>

<h2>REQUIREMENTS
<a name="REQUIREMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Python 2.6 or
higher is required to run this tool. System Storage Manager
can only be run as root since most of the commands requires
root privileges.</p>

<p style="margin-left:11%; margin-top: 1em">There are other
requirements listed bellow, but note that you do not
necessarily need all dependencies for all backends, however
if some of the tools required by the backend is missing, the
backend would not work.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Python
modules</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>os</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>re</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>sys</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>stat</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>argparse</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>datetime</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>threading</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>subprocess</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>System
tools</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p style="margin-top: 1em">tune2fs</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>fsck.SUPPORTED_FS</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>resize2fs</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>xfs_db</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>xfs_check</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>xfs_growfs</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>mkfs.SUPPORTED_FS</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>which</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>mount</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>blkid</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="26%">


<p>wipefs</p></td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Lvm
backend</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="20%">


<p style="margin-top: 1em">lvm2 binaries</p></td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Btrfs
backend</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="17%">


<p style="margin-top: 1em">btrfs progs</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Crypt
backend</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p style="margin-top: 1em">dmsetup</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="15%">


<p>cryptsetup</p></td>
<td width="71%">
</td></tr>
</table>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>System
storage manager</b> is available from
<i>http://storagemanager.sourceforge.net</i>. You can
subscribe to
<i>storagemanager-devel@lists.sourceforge.net</i> to follow
the current development.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Luk&aacute;&scaron;
Czerner &lt;lczerner@redhat.com&gt;</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">2012, Red Hat,
Inc., Luk&aacute;&scaron; Czerner
&lt;lczerner@redhat.com&gt;</p>
<hr>
</body>
</html>
