<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:43:01 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>FENCE_AGENT</title>

</head>
<body>

<h1 align="center">FENCE_AGENT</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#PARAMETERS">PARAMETERS</a><br>
<a href="#ACTIONS">ACTIONS</a><br>
<a href="#STDIN PARAMETERS">STDIN PARAMETERS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">fence_scsi -
Fence agent for SCSI persistentl reservation</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">fence_scsi is
an I/O fencing agent that uses SCSI-3 persistent
reservations to control access to shared storage devices.
These devices must support SCSI-3 persistent reservations
(SPC-3 or greater) as well as the
&quot;preempt-and-abort&quot; subcommand. The fence_scsi
agent works by having each node in the cluster register a
unique key with the SCSI devive(s). Once registered, a
single node will become the reservation holder by creating a
&quot;write exclusive, registrants only&quot; reservation on
the device(s). The result is that only registered nodes may
write to the device(s). When a node failure occurs, the
fence_scsi agent will remove the key belonging to the failed
node from the device(s). The failed node will no longer be
able to write to the device(s). A manual reboot is
required.</p>

<p style="margin-left:11%; margin-top: 1em">fence_scsi
accepts options on the command line as well as from stdin.
Fenced sends parameters through stdin when it execs the
agent. fence_scsi can be run by itself with command line
options. This is useful for testing and for turning outlets
on or off from scripts.</p>

<p style="margin-left:11%; margin-top: 1em">Vendor URL:</p>

<h2>PARAMETERS
<a name="PARAMETERS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>-a, --aptpl</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Use the APTPL flag for registrations. This option is
only used for the &rsquo;on&rsquo; action.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-n,
--nodename=[nodename]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Name of the node to be fenced. The node name is used to
generate the key value used for the current operation. This
option will be ignored when used with the -k option.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-o,
--action=[action]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Fencing Action (Default Value: off)</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-k, --key=[key]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Key to use for the current operation. This key should be
unique to a node. For the &quot;on&quot; action, the key
specifies the key use to register the local node. For the
&quot;off&quot; action, this key specifies the key to be
removed from the device(s).</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-d,
--devices=[devices]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>List of devices to use for current operation. Devices
can be comma-separated list of raw device (eg. /dev/sdc) or
device-mapper multipath devices (eg. /dev/dm-3). Each device
must support SCSI-3 persistent reservations.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-a, --logfile</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Log output (stdout and stderr) to file</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-v, --verbose</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Verbose mode</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-D,
--debug-file=[debugfile]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Write debug information to given file</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-V, --version</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Display version information and exit</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-h, --help</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Display help and exit</p></td></tr>
</table>

<p style="margin-left:11%;"><b>--vgs-path=[path]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Path to vgs binary (Default Value: /usr/sbin/vgs)</p></td></tr>
</table>


<p style="margin-left:11%;"><b>--power-wait=[seconds]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Wait X seconds after issuing ON/OFF (Default Value:
0)</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>--login-timeout=[seconds]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Wait X seconds for cmd prompt after login (Default
Value: 5)</p></td></tr>
</table>


<p style="margin-left:11%;"><b>--power-timeout=[seconds]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Test X seconds for status change after ON/OFF (Default
Value: 20)</p></td></tr>
</table>

<p style="margin-left:11%;"><b>--delay=[seconds]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Wait X seconds before fencing is started (Default Value:
0)</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>--sg_persist-path=[path]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Path to sg_persist binary (Default Value:
/usr/bin/sg_persist)</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>--shell-timeout=[seconds]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Wait X seconds for cmd prompt after issuing command
(Default Value: 3)</p></td></tr>
</table>


<p style="margin-left:11%;"><b>--sg_turs-path=[path]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Path to sg_turs binary (Default Value:
/usr/bin/sg_turs)</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>--corosync-cmap-path=[path]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="-14%"></td>
<td width="7%"></td>
<td width="85%">


<p>Path to corosync-cmapctl binary (Default Value:
/usr/sbin/corosync-cmapctl)</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>--retry-on=[attempts]</b></p>

<p style="margin-left:22%;">Count of attempts to retry
power on (Default Value: 1)</p>

<h2>ACTIONS
<a name="ACTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>on</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Power on machine.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>off</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Power off machine.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>status</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This returns the status of the plug/virtual machine.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>list</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>List available plugs with aliases/virtual machines if
there is support for more then one device. Returns N/A
otherwise.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>monitor</b></p>

<p style="margin-left:22%;">Check the health of fence
device</p>

<p style="margin-left:11%;"><b>metadata</b></p>

<p style="margin-left:22%;">Display the XML metadata
describing this resource.</p>

<h2>STDIN PARAMETERS
<a name="STDIN PARAMETERS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>aptpl</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">Use the APTPL flag for
registrations. This option is only used for the
&rsquo;on&rsquo; action.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>nodename</b></p>

<p style="margin-left:22%;">Name of the node to be fenced.
The node name is used to generate the key value used for the
current operation. This option will be ignored when used
with the -k option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>action</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Fencing Action (Default Value: off)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>key</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Key to use for the current operation. This key should be
unique to a node. For the &quot;on&quot; action, the key
specifies the key use to register the local node. For the
&quot;off&quot; action, this key specifies the key to be
removed from the device(s).</p></td></tr>
</table>

<p style="margin-left:11%;"><b>devices</b></p>

<p style="margin-left:22%;">List of devices to use for
current operation. Devices can be comma-separated list of
raw device (eg. /dev/sdc) or device-mapper multipath devices
(eg. /dev/dm-3). Each device must support SCSI-3 persistent
reservations.</p>

<p style="margin-left:11%;"><b>logfile</b></p>

<p style="margin-left:22%;">Log output (stdout and stderr)
to file</p>

<p style="margin-left:11%;"><b>verbose</b></p>

<p style="margin-left:22%;">Verbose mode</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>debug</b></p></td>
<td width="4%"></td>
<td width="56%">


<p>Write debug information to given file</p></td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>version</b></p>

<p style="margin-left:22%;">Display version information and
exit</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>help</b></p></td>
<td width="5%"></td>
<td width="32%">


<p>Display help and exit</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>vgs_path</b></p>

<p style="margin-left:22%;">Path to vgs binary (Default
Value: /usr/sbin/vgs)</p>

<p style="margin-left:11%;"><b>power_wait</b></p>

<p style="margin-left:22%;">Wait X seconds after issuing
ON/OFF (Default Value: 0)</p>

<p style="margin-left:11%;"><b>login_timeout</b></p>

<p style="margin-left:22%;">Wait X seconds for cmd prompt
after login (Default Value: 5)</p>

<p style="margin-left:11%;"><b>power_timeout</b></p>

<p style="margin-left:22%;">Test X seconds for status
change after ON/OFF (Default Value: 20)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>delay</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Wait X seconds before fencing is started (Default Value:
0)</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>sg_persist_path</b></p>

<p style="margin-left:22%;">Path to sg_persist binary
(Default Value: /usr/bin/sg_persist)</p>

<p style="margin-left:11%;"><b>shell_timeout</b></p>

<p style="margin-left:22%;">Wait X seconds for cmd prompt
after issuing command (Default Value: 3)</p>

<p style="margin-left:11%;"><b>sg_turs_path</b></p>

<p style="margin-left:22%;">Path to sg_turs binary (Default
Value: /usr/bin/sg_turs)</p>

<p style="margin-left:11%;"><b>corosync-cmap_path</b></p>

<p style="margin-left:22%;">Path to corosync-cmapctl binary
(Default Value: /usr/sbin/corosync-cmapctl)</p>

<p style="margin-left:11%;"><b>retry_on</b></p>

<p style="margin-left:22%;">Count of attempts to retry
power on (Default Value: 1)</p>
<hr>
</body>
</html>
