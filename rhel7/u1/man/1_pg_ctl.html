<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:13:23 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PG_CTL</title>

</head>
<body>

<h1 align="center">PG_CTL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#FILES">FILES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pg_ctl &minus;
initialize, start, stop, or control a PostgreSQL server</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl init[db]</b>
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]
[<b>&minus;o&nbsp;</b><i>initdb&minus;options</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl start</b>
[<b>&minus;w</b>] [<b>&minus;t&nbsp;</b><i>seconds</i>]
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]
[<b>&minus;l&nbsp;</b><i>filename</i>]
[<b>&minus;o&nbsp;</b><i>options</i>]
[<b>&minus;p&nbsp;</b><i>path</i>] [<b>&minus;c</b>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl stop</b>
[<b>&minus;W</b>] [<b>&minus;t&nbsp;</b><i>seconds</i>]
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]
[<b>&minus;m&nbsp;s[mart]&nbsp;</b>|&nbsp;<b>f[ast]&nbsp;</b>|&nbsp;<b>i[mmediate]</b>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl restart</b>
[<b>&minus;w</b>] [<b>&minus;t&nbsp;</b><i>seconds</i>]
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]
[<b>&minus;c</b>]
[<b>&minus;m&nbsp;s[mart]&nbsp;</b>|&nbsp;<b>f[ast]&nbsp;</b>|&nbsp;<b>i[mmediate]</b>]
[<b>&minus;o&nbsp;</b><i>options</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl reload</b>
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl status</b>
[<b>&minus;D&nbsp;</b><i>datadir</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl promote</b>
[<b>&minus;s</b>] [<b>&minus;D&nbsp;</b><i>datadir</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl kill</b>
<i>signal_name process_id</i></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl register</b>
[<b>&minus;N&nbsp;</b><i>servicename</i>]
[<b>&minus;U&nbsp;</b><i>username</i>]
[<b>&minus;P&nbsp;</b><i>password</i>]
[<b>&minus;D&nbsp;</b><i>datadir</i>]
[<b>&minus;S&nbsp;a[uto]&nbsp;</b>|&nbsp;<b>d[emand]</b>]
[<b>&minus;w</b>] [<b>&minus;t&nbsp;</b><i>seconds</i>]
[<b>&minus;s</b>] [<b>&minus;o&nbsp;</b><i>options</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>pg_ctl unregister</b>
[<b>&minus;N&nbsp;</b><i>servicename</i>]</p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pg_ctl is a
utility for initializing a PostgreSQL database cluster,
starting, stopping, or restarting the PostgreSQL database
server (<b>postgres</b>(1)), or displaying the status of a
running server. Although the server can be started manually,
pg_ctl encapsulates tasks such as redirecting log output and
properly detaching from the terminal and process group. It
also provides convenient options for controlled
shutdown.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>init</b>
or <b>initdb</b> mode creates a new PostgreSQL database
cluster. A database cluster is a collection of databases
that are managed by a single server instance. This mode
invokes the <b>initdb</b> command. See <b>initdb</b>(1) for
details.</p>

<p style="margin-left:11%; margin-top: 1em">In <b>start</b>
mode, a new server is launched. The server is started in the
background, and its standard input is attached to /dev/null
(or nul on Windows). On Unix&minus;like systems, by default,
the server's standard output and standard error are sent to
pg_ctl's standard output (not standard error). The standard
output of pg_ctl should then be redirected to a file or
piped to another process such as a log rotating program like
rotatelogs; otherwise <b>postgres</b> will write its output
to the controlling terminal (from the background) and will
not leave the shell's process group. On Windows, by default
the server's standard output and standard error are sent to
the terminal. These default behaviors can be changed by
using <b>&minus;l</b> to append the server's output to a log
file. Use of either <b>&minus;l</b> or output redirection is
recommended.</p>

<p style="margin-left:11%; margin-top: 1em">In <b>stop</b>
mode, the server that is running in the specified data
directory is shut down. Three different shutdown methods can
be selected with the <b>&minus;m</b> option.
&ldquo;Smart&rdquo; mode (the default) waits for all active
clients to disconnect and any online backup to finish. If
the server is in hot standby, recovery and streaming
replication will be terminated once all clients have
disconnected. &ldquo;Fast&rdquo; mode does not wait for
clients to disconnect and will terminate an online backup in
progress. All active transactions are rolled back and
clients are forcibly disconnected, then the server is shut
down. &ldquo;Immediate&rdquo; mode will abort all server
processes immediately, without a clean shutdown. This will
lead to a crash&minus;recovery run on the next restart.</p>

<p style="margin-left:11%; margin-top: 1em"><b>restart</b>
mode effectively executes a stop followed by a start. This
allows changing the <b>postgres</b> command&minus;line
options.</p>

<p style="margin-left:11%; margin-top: 1em"><b>reload</b>
mode simply sends the <b>postgres</b> process a SIGHUP
signal, causing it to reread its configuration files
(postgresql.conf, pg_hba.conf, etc.). This allows changing
of configuration&minus;file options that do not require a
complete restart to take effect.</p>

<p style="margin-left:11%; margin-top: 1em"><b>status</b>
mode checks whether a server is running in the specified
data directory. If it is, the PID and the command line
options that were used to invoke it are displayed. If the
server is not running, the process returns an exit status of
3.</p>

<p style="margin-left:11%; margin-top: 1em">In
<b>promote</b> mode, the standby server that is running in
the specified data directory is commanded to exit recovery
and begin read&minus;write operations.</p>

<p style="margin-left:11%; margin-top: 1em"><b>kill</b>
mode allows you to send a signal to a specified process.
This is particularly valuable for Microsoft Windows which
does not have a kill command. Use &minus;&minus;help to see
a list of supported signal names.</p>


<p style="margin-left:11%; margin-top: 1em"><b>register</b>
mode allows you to register a system service on Microsoft
Windows. The <b>&minus;S</b> option allows selection of
service start type, either &ldquo;auto&rdquo; (start service
automatically on system startup) or &ldquo;demand&rdquo;
(start service on demand).</p>


<p style="margin-left:11%; margin-top: 1em"><b>unregister</b>
mode allows you to unregister a system service on Microsoft
Windows. This undoes the effects of the <b>register</b>
command.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;c</b>,
<b>&minus;&minus;core&minus;file</b></p>

<p style="margin-left:17%;">Attempt to allow server crashes
to produce core files, on platforms where this is possible,
by lifting any soft resource limit placed on core files.
This is useful in debugging or diagnosing problems by
allowing a stack trace to be obtained from a failed server
process.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;D</b>
<i>datadir</i>, <b>&minus;&minus;pgdata</b>
<i>datadir</i></p>

<p style="margin-left:17%;">Specifies the file system
location of the database files. If this is omitted, the
environment variable <b>PGDATA</b> is used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;l</b>
<i>filename</i>, <b>&minus;&minus;log</b>
<i>filename</i></p>

<p style="margin-left:17%;">Append the server log output to
<i>filename</i>. If the file does not exist, it is created.
The umask is set to 077, so access to the log file is
disallowed to other users by default.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;m</b>
<i>mode</i>, <b>&minus;&minus;mode</b> <i>mode</i></p>

<p style="margin-left:17%;">Specifies the shutdown mode.
<i>mode</i> can be smart, fast, or immediate, or the first
letter of one of these three. If this is omitted, smart is
used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;o</b>
<i>options</i></p>

<p style="margin-left:17%;">Specifies options to be passed
directly to the <b>postgres</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">The options
should usually be surrounded by single or double quotes to
ensure that they are passed through as a group.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;o</b>
<i>initdb&minus;options</i></p>

<p style="margin-left:17%;">Specifies options to be passed
directly to the <b>initdb</b> command.</p>

<p style="margin-left:17%; margin-top: 1em">The options
should usually be surrounded by single or double quotes to
ensure that they are passed through as a group.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;p</b>
<i>path</i></p>

<p style="margin-left:17%;">Specifies the location of the
postgres executable. By default the postgres executable is
taken from the same directory as <b>pg_ctl</b>, or failing
that, the hard&minus;wired installation directory. It is not
necessary to use this option unless you are doing something
unusual and get errors that the postgres executable was not
found.</p>

<p style="margin-left:17%; margin-top: 1em">In init mode,
this option analogously specifies the location of the initdb
executable.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;s</b>,
<b>&minus;&minus;silent</b></p>

<p style="margin-left:17%;">Print only errors, no
informational messages.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;t</b>,
<b>&minus;&minus;timeout</b></p>

<p style="margin-left:17%;">The maximum number of seconds
to wait when waiting for startup or shutdown to complete.
The default is 60 seconds.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;V</b>,
<b>&minus;&minus;version</b></p>

<p style="margin-left:17%;">Print the pg_ctl version and
exit.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;w</b></p>

<p style="margin-left:17%;">Wait for the startup or
shutdown to complete. Waiting is the default option for
shutdowns, but not startups. When waiting for startup,
<b>pg_ctl</b> repeatedly attempts to connect to the server.
When waiting for shutdown, <b>pg_ctl</b> waits for the
server to remove its PID file. <b>pg_ctl</b> returns an exit
code based on the success of the startup or shutdown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;W</b></p>

<p style="margin-left:17%;">Do not wait for startup or
shutdown to complete. This is the default for start and
restart modes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;?</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Show help about pg_ctl command
line arguments, and exit.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Options for
Windows <br>
&minus;N</b> <i>servicename</i></p>

<p style="margin-left:17%;">Name of the system service to
register. The name will be used as both the service name and
the display name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;P</b>
<i>password</i></p>

<p style="margin-left:17%;">Password for the user to start
the service.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;S</b>
<i>start&minus;type</i></p>

<p style="margin-left:17%;">Start type of the system
service to register. start&minus;type can be auto, or
demand, or the first letter of one of these two. If this is
omitted, auto is used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;U</b>
<i>username</i></p>

<p style="margin-left:17%;">User name for the user to start
the service. For domain users, use the format
DOMAIN\username.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PGDATA</b></p>

<p style="margin-left:17%;">Default data directory
location.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pg_ctl</b>,
like most other PostgreSQL utilities, also uses the
environment variables supported by libpq (see Section 31.14,
&ldquo;Environment Variables&rdquo;, in the documentation).
For additional server variables, see <b>postgres</b>(1).</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">postmaster.pid</p>

<p style="margin-left:17%;">The existence of this file in
the data directory is used to help pg_ctl determine if the
server is currently running.</p>


<p style="margin-left:11%; margin-top: 1em">postmaster.opts</p>

<p style="margin-left:17%;">If this file exists in the data
directory, pg_ctl (in <b>restart</b> mode) will pass the
contents of the file as options to postgres, unless
overridden by the <b>&minus;o</b> option. The contents of
this file are also displayed in <b>status</b> mode.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Starting the
Server</b> <br>
To start the server:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
start</b></p>

<p style="margin-left:11%; margin-top: 1em">To start the
server, waiting until the server is accepting
connections:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
&minus;w start</b></p>

<p style="margin-left:11%; margin-top: 1em">To start the
server using port 5433, and running without <b>fsync</b>,
use:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
&minus;o &quot;&minus;F &minus;p 5433&quot; start</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Stopping the
Server</b> <br>
To stop the server, use:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
stop</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;m</b> option allows control over <i>how</i> the
server shuts down:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
stop &minus;m fast</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Restarting
the Server</b> <br>
Restarting the server is almost equivalent to stopping the
server and starting it again, except that <b>pg_ctl</b>
saves and reuses the command line options that were passed
to the previously running instance. To restart the server in
the simplest form, use:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
restart</b></p>

<p style="margin-left:11%; margin-top: 1em">To restart the
server, waiting for it to shut down and restart:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
&minus;w restart</b></p>

<p style="margin-left:11%; margin-top: 1em">To restart
using port 5433, disabling <b>fsync</b> upon restart:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
&minus;o &quot;&minus;F &minus;p 5433&quot; restart</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Showing the
Server Status</b> <br>
Here is sample status output from pg_ctl:</p>

<p style="margin-left:17%; margin-top: 1em">$ <b>pg_ctl
status</b> <br>
pg_ctl: server is running (PID: 13718) <br>
/usr/local/pgsql/bin/postgres &quot;&minus;D&quot;
&quot;/usr/local/pgsql/data&quot; &quot;&minus;p&quot;
&quot;5433&quot; &quot;&minus;B&quot; &quot;128&quot;</p>

<p style="margin-left:11%; margin-top: 1em">This is the
command line that would be invoked in restart mode.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>initdb</b>(1),
<b>postgres</b>(1)</p>
<hr>
</body>
</html>
