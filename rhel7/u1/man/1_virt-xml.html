<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:41:32 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRT-XML</title>

</head>
<body>

<h1 align="center">VIRT-XML</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virt&minus;xml
&minus; Edit libvirt XML using command line options.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>virt-xml</b>
<small>DOMAIN</small> XML-ACTION XML-OPTION [
<small>OUTPUT&minus;OPTION</small> ] [
<small>MISC&minus;OPTIONS</small> ] ...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>virt-xml</b>
is a command line tool for editing libvirt
<small>XML</small> using explicit command line options. See
the <small>EXAMPLES</small> section at the end of this
document to jump right in.</p>

<p style="margin-left:11%; margin-top: 1em">Each
<b>virt-xml</b> invocation requires 3 things: name of an
existing domain to alter (or <small>XML</small> passed on
stdin), an action to on the <small>XML,</small> and an
<small>XML</small> change to make. actions are one of:</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;add&minus;device:
Append a new device definition to the <small>XML</small>
&minus;&minus;remove&minus;device: Remove an existing device
definition &minus;&minus;edit: Edit an existing
<small>XML</small> block &minus;&minus;build&minus;xml: Just
build the requested <small>XML</small> block and print it
(no domain or input <small>XML</small> are required
here).</p>

<p style="margin-left:11%; margin-top: 1em">An
<small>XML</small> change is one instance of any of the
<small>XML</small> options provided by virt-xml, for example
&minus;&minus;disk or &minus;&minus;boot.</p>


<p style="margin-left:11%; margin-top: 1em"><b>virt-xml</b>
only allows one action and <small>XML</small> pair per
invocation. If you need to make multiple edits, invoke the
command multiple times.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">&minus;h,
&minus;&minus;help</p>

<p style="margin-left:17%;">Show the help message and
exit</p>

<p style="margin-left:11%;">&minus;&minus;version</p>

<p style="margin-left:17%;">Show program&rsquo;s version
number and exit</p>

<p style="margin-left:11%;">&minus;c <small>URI,</small>
&minus;&minus;connect=URI</p>

<p style="margin-left:17%;">Connect to a non-default
hypervisor. See <i>virt&minus;install</i>(1) for details</p>

<p style="margin-left:11%;">domain</p>

<p style="margin-left:17%;">domain is the name,
<small>UUID,</small> or <small>ID</small> of the existing
<small>VM.</small> This can be omitted if using
&minus;&minus;build&minus;xml, or if <small>XML</small> is
passed on stdin.</p>

<p style="margin-left:17%; margin-top: 1em">When a domain
is specified, the default output action is
&minus;&minus;define, even if the <small>VM</small> is
running. To update the running <small>VM</small>
configuration, add the &minus;&minus;update option (but not
all options/devices support updating the running
<small>VM</small> configuration).</p>

<p style="margin-left:17%; margin-top: 1em">If
<small>XML</small> is passed on stdin, the default output is
&minus;&minus;print&minus;xml.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>XML</small>
actions</b> <br>
&minus;&minus;edit [ <small>EDIT&minus;OPTIONS</small> ]</p>

<p style="margin-left:14%;">Edit the specified
<small>XML</small> block. EDIT-OPTIONS tell <b>virt-xml</b>
which block to edit. The type of <small>XML</small> that we
are editing is decided by <small>XML</small> option that is
passed to <b>virt-xml</b>. So if &minus;&minus;disk is
passed, EDIT-OPTIONS select which &lt;disk&gt; block to
edit.</p>

<p style="margin-left:14%; margin-top: 1em">Certain
<small>XML</small> options only ever map to a single
<small>XML</small> block, like &minus;&minus;cpu,
&minus;&minus;security, &minus;&minus;boot,
&minus;&minus;clock, and a few others. In those cases,
<b>virt-xml</b> will not complain if a corresponding
<small>XML</small> block does not already exist, it will
create it for you.</p>

<p style="margin-left:14%; margin-top: 1em">Every
<small>XML</small> option has a special value
&rsquo;clearxml=yes&rsquo;. When combined with
&minus;&minus;edit, it will completely blank out the
<small>XML</small> block being edited before applying the
requested changes. This allows completely rebuilding an
<small>XML</small> block. See <small>EXAMPLES</small> for
some usage.</p>

<p style="margin-left:14%; margin-top: 1em">EDIT-OPTIONS
examples: <br>
&minus;&minus;edit</p>

<p style="margin-left:20%;">&minus;&minus;edit without any
options implies &rsquo;edit the first block&rsquo;. So
&rsquo;&minus;&minus;edit &minus;&minus;disk
<small>DISK&minus;OPTIONS</small> &rsquo; means &rsquo;edit
the first &lt;disk&gt;&rsquo;.</p>

<p style="margin-left:20%; margin-top: 1em">For the single
<small>XML</small> block options mentioned above, plain
&rsquo;&minus;&minus;edit&rsquo; without any options is what
you always want to use.</p>

<p style="margin-left:14%;">&minus;&minus;edit #</p>

<p style="margin-left:20%;">Select the specified
<small>XML</small> block number. So
&rsquo;&minus;&minus;edit 2 &minus;&minus;disk
<small>DISK&minus;OPTS</small> &rsquo; means &rsquo;edit the
second &lt;disk&gt;&rsquo;. This option only really applies
for device <small>XML.</small></p>

<p style="margin-left:14%;">&minus;&minus;edit all</p>

<p style="margin-left:20%;">Modify every <small>XML</small>
block of the <small>XML</small> option type. So
&rsquo;&minus;&minus;edit all &minus;&minus;disk
<small>DISK&minus;OPTS</small> &rsquo; means &rsquo;edit
ever &lt;disk&gt; block&rsquo;. This option only really
applies for device <small>XML.</small></p>

<p style="margin-left:14%;">&minus;&minus;edit
DEVICE-OPTIONS</p>

<p style="margin-left:20%;">Modify every <small>XML</small>
block that matches the passed device options. The device
options are in the same format as would be passed to the
<small>XML</small> option.</p>

<p style="margin-left:20%; margin-top: 1em">So
&rsquo;&minus;&minus;edit path=/tmp/foo &minus;&minus;disk
<small>DISK&minus;OPTS</small> &rsquo; means &rsquo;edit
every &lt;disk&gt; with path /tmp/foo&rsquo;. This option
only really applies for device <small>XML.</small></p>


<p style="margin-left:11%;">&minus;&minus;add&minus;device</p>

<p style="margin-left:14%;">Append the specified
<small>XML</small> options to the <small>XML</small>
&lt;devices&gt; list. Example:
&rsquo;&minus;&minus;add&minus;device &minus;&minus;disk
<small>DISK&minus;OPTIONS</small> &rsquo; will create a new
&lt;disk&gt; block and add it to the <small>XML.</small></p>

<p style="margin-left:14%; margin-top: 1em">This option
will error if specified with a non-device <small>XML</small>
option (see &minus;&minus;edit section for a partial
list).</p>


<p style="margin-left:11%;">&minus;&minus;remove&minus;device</p>

<p style="margin-left:14%;">Remove the specified device
from the <small>XML.</small> The device to remove is chosen
by the <small>XML</small> option, which takes arguments in
the same format as &minus;&minus;edit. Examples <br>
&minus;&minus;remove&minus;device &minus;&minus;disk 2</p>

<p style="margin-left:20%;">Remove the second disk
device</p>


<p style="margin-left:14%;">&minus;&minus;remove&minus;device
&minus;&minus;network all</p>

<p style="margin-left:20%;">Remove all network devices</p>


<p style="margin-left:14%;">&minus;&minus;remove&minus;device
&minus;&minus;sound pcspk</p>

<p style="margin-left:20%;">Remove all sound devices with
model=&rsquo;pcspk&rsquo;</p>

<p style="margin-left:14%; margin-top: 1em">This option
will error if specified with a non-device <small>XML</small>
option (see &minus;&minus;edit section for a partial
list).</p>


<p style="margin-left:11%;">&minus;&minus;build&minus;xml</p>

<p style="margin-left:14%;">Just build the specified
<small>XML,</small> and print it to stdout. No input domain
or input <small>XML</small> is required. Example:
&rsquo;&minus;&minus;build&minus;xml &minus;&minus;disk
<small>DISK&minus;OPTIONS</small> &rsquo; will just print
the new &lt;disk&gt; device.</p>

<p style="margin-left:14%; margin-top: 1em">This option
will error if specified with an <small>XML</small> option
that does not map cleanly to a specific <small>XML</small>
block, like &minus;&minus;vcpus or &minus;&minus;memory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Output
options</b> <br>
These options decide what action to take after altering the
<small>XML.</small> In the common case these do not need to
be specified, as &rsquo; <small>XML</small> actions&rsquo;
will imply a default output action, described in detail
above. These are only needed if you want to modify the
default output. <br>
&minus;&minus;update</p>

<p style="margin-left:14%;">If the specified domain is
running, attempt to alter the running <small>VM</small>
configuration. If combined with &minus;&minus;edit, this is
an update operation. If combined with
&minus;&minus;add&minus;device, this is a device hotplug. If
combined with &minus;&minus;remove&minus;device, this is a
device hotunplug.</p>

<p style="margin-left:14%; margin-top: 1em">Keep in mind,
most <small>XML</small> properties and devices do not
support live update operations, so don&rsquo;t expect it to
succeed in all cases.</p>

<p style="margin-left:11%;">&minus;&minus;define</p>

<p style="margin-left:14%;">Define the requested
<small>XML</small> change. This is typically the default if
no output option is specified, but if a &minus;&minus;print
option is specified, &minus;&minus;define is required to
force the change.</p>


<p style="margin-left:11%;">&minus;&minus;print&minus;diff</p>

<p style="margin-left:14%;">Print the generated
<small>XML</small> change in unified diff format. If only
this output option is specified, all other output options
are disabled and no persistent change is made.</p>


<p style="margin-left:11%;">&minus;&minus;print&minus;xml</p>

<p style="margin-left:14%;">Print the generated
<small>XML</small> in its entirety. If only this output
option is specified, all other output options are disabled
and no persistent change is made.</p>

<p style="margin-left:11%;">&minus;&minus;confirm</p>

<p style="margin-left:14%;">Before defining or updating the
domain, show the generated <small>XML</small> diff and
interactively request confirmation.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>XML</small>
options</b> <br>
&minus;&minus;disk <br>
&minus;&minus;network <br>
&minus;&minus;graphics <br>
&minus;&minus;metadata <br>
&minus;&minus;memory <br>
&minus;&minus;vcpus <br>
&minus;&minus;cpu <br>
&minus;&minus;security <br>
&minus;&minus;numatune <br>
&minus;&minus;features <br>
&minus;&minus;clock <br>
&minus;&minus;pm <br>
&minus;&minus;boot <br>
&minus;&minus;filesystem <br>
&minus;&minus;controller <br>
&minus;&minus;serial <br>
&minus;&minus;parallel <br>
&minus;&minus;channel <br>
&minus;&minus;console <br>
&minus;&minus;host&minus;device <br>
&minus;&minus;sound <br>
&minus;&minus;watchdog <br>
&minus;&minus;video <br>
&minus;&minus;smartcard <br>
&minus;&minus;redirdev <br>
&minus;&minus;memballoon <br>
&minus;&minus;tpm <br>
&minus;&minus;rng <br>
&minus;&minus;panic</p>

<p style="margin-left:14%;">These options alter the
<small>XML</small> for a single class of <small>XML</small>
elements. More complete documentation is found in
<i>virt&minus;install</i>(1).</p>

<p style="margin-left:14%; margin-top: 1em">Generally these
options map pretty straightforwardly to the libvirt
<small>XML,</small> documented at
&lt;http://libvirt.org/formatdomain.html&gt;</p>

<p style="margin-left:14%; margin-top: 1em">Option strings
are in the format of: &minus;&minus;option
opt=val,opt2=val2,... example: &minus;&minus;disk
path=/tmp/foo,shareable=on. Properties can be used with
&rsquo;&minus;&minus;option opt=,&rsquo;, so to clear a
disks cache setting you could use &rsquo;&minus;&minus;disk
cache=,&rsquo;</p>

<p style="margin-left:14%; margin-top: 1em">Every
<small>XML</small> option has a special value
&rsquo;clearxml=yes&rsquo;. When combined with
&minus;&minus;edit, it will completely blank out the
<small>XML</small> block being edited before applying the
requested changes. This allows completely rebuilding an
<small>XML</small> block. See <small>EXAMPLES</small> for
some usage.</p>

<p style="margin-left:14%; margin-top: 1em">For any option,
use &minus;&minus;option=? to see a list of all available
sub options, example: &minus;&minus;disk=? or
&minus;&minus;boot=?</p>


<p style="margin-left:14%; margin-top: 1em">&minus;&minus;help
output also lists a few general examples. See the
<small>EXAMPLES</small> section below for some common
examples.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
Options</b> <br>
&minus;q, &minus;&minus;quiet</p>

<p style="margin-left:14%;">Avoid verbose output.</p>

<p style="margin-left:11%;">&minus;d,
&minus;&minus;debug</p>

<p style="margin-left:14%;">Print debugging information</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See a list of
all suboptions that &minus;&minus;disk and
&minus;&minus;network take</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml &minus;&minus;disk=? &minus;&minus;network=?</pre>


<p style="margin-left:11%; margin-top: 1em">Change the
&lt;description&gt; of domain &rsquo;example&rsquo;:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml example &minus;&minus;edit &minus;&minus;metadata description=&quot;my new description&quot;</pre>


<p style="margin-left:11%; margin-top: 1em"># Enable the
boot device menu for domain &rsquo;example&rsquo;:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml example &minus;&minus;edit &minus;&minus;boot bootmenu=on</pre>


<p style="margin-left:11%; margin-top: 1em">Clear the
previous &lt;cpu&gt; definition of domain
&rsquo;winxp&rsquo;, change it to
&rsquo;host&minus;model&rsquo;, but interactively confirm
the diff before saving:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml winxp &minus;&minus;edit &minus;&minus;cpu host&minus;model,clearxml=yes &minus;&minus;confirm</pre>


<p style="margin-left:11%; margin-top: 1em">Change the
second sound card to model=ich6 on &rsquo;fedora19&rsquo;,
but only output the diff:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml fedora19 &minus;&minus;edit 2 &minus;&minus;sound model=ich6 &minus;&minus;print&minus;diff</pre>


<p style="margin-left:11%; margin-top: 1em">Update the
every graphics device password to &rsquo;foo&rsquo; of the
running <small>VM</small> &rsquo;rhel6&rsquo;:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml rhel6 &minus;&minus;edit all &minus;&minus;graphics password=foo &minus;&minus;update</pre>


<p style="margin-left:11%; margin-top: 1em">Remove the disk
path from disk device hdc:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml rhel6 &minus;&minus;edit target=hdc &minus;&minus;disk path=</pre>


<p style="margin-left:11%; margin-top: 1em">Change all disk
devices of type &rsquo;disk&rsquo; to use cache=none, using
<small>XML</small> from stdin, printing the new
<small>XML</small> to stdout.</p>

<pre style="margin-left:11%; margin-top: 1em">  # cat &lt;xmlfile&gt; | virt&minus;xml &minus;&minus;edit device=disk &minus;&minus;disk cache=none</pre>


<p style="margin-left:11%; margin-top: 1em">Change disk
&rsquo;hda&rsquo; <small>IO</small> to native and use
startup policy as &rsquo;optional&rsquo;.</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml fedora20 &minus;&minus;edit target=hda &minus;&minus;disk io=native,startup_policy=optional</pre>


<p style="margin-left:11%; margin-top: 1em">Change all host
devices to use driver_name=vfio for <small>VM</small>
&rsquo;fedora20&rsquo; on the remote connection</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml &minus;&minus;connect qemu+ssh://remotehost/system \
             fedora20 &minus;&minus;edit all &minus;&minus;host&minus;device driver_name=vfio</pre>


<p style="margin-left:11%; margin-top: 1em">Hotplug host
<small>USB</small> device 001.003 to running domain
&rsquo;fedora19&rsquo;:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml f19 &minus;&minus;add&minus;device &minus;&minus;host&minus;device 001.003 &minus;&minus;update</pre>


<p style="margin-left:11%; margin-top: 1em">Add a spicevmc
channel to the domain &rsquo;winxp&rsquo;, that will be
available after the next <small>VM</small> shutdown.</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml winxp &minus;&minus;add&minus;device &minus;&minus;channel spicevmc</pre>


<p style="margin-left:11%; margin-top: 1em">Create a 10G
qcow2 disk image and attach it to &rsquo;fedora18&rsquo; for
the next <small>VM</small> startup:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml fedora18 &minus;&minus;add&minus;device \
    &minus;&minus;disk /var/lib/libvirt/images/newimage.qcow2,format=qcow2,size=10</pre>


<p style="margin-left:11%; margin-top: 1em">Remove the disk
vdb from the running domain &rsquo;rhel7&rsquo;:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml rhel7 &minus;&minus;remove&minus;device &minus;&minus;disk target=vdb</pre>


<p style="margin-left:11%; margin-top: 1em">Remove all
graphics devices from the <small>VM</small>
&rsquo;rhel7&rsquo; after the next shutdown:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml rhel7 &minus;&minus;remove&minus;device &minus;&minus;graphics all</pre>


<p style="margin-left:11%; margin-top: 1em">Generate
<small>XML</small> for a virtio console device and print it
to stdout:</p>

<pre style="margin-left:11%; margin-top: 1em">  # virt&minus;xml &minus;&minus;build&minus;xml &minus;&minus;console pty,target_type=virtio</pre>


<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please see
http://virt&minus;manager.org/page/BugReporting</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
Red Hat, Inc, and various contributors. This is free
software. You may redistribute copies of it under the terms
of the <small>GNU</small> General Public License
<tt>&quot;http://www.gnu.org/licenses/gpl.html&quot;</tt>.
There is <small>NO WARRANTY,</small> to the extent permitted
by law.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;install</i>(1),
the project website
<tt>&quot;http://virt&minus;manager.org&quot;</tt></p>
<hr>
</body>
</html>
