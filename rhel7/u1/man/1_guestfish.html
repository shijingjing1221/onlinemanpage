<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 00:53:35 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>guestfish</title>

</head>
<body>

<h1 align="center">guestfish</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#WARNING">WARNING</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#COMMANDS ON COMMAND LINE">COMMANDS ON COMMAND LINE</a><br>
<a href="#USING launch (OR run)">USING launch (OR run)</a><br>
<a href="#OPENING DISKS FOR READ AND WRITE">OPENING DISKS FOR READ AND WRITE</a><br>
<a href="#QUOTING">QUOTING</a><br>
<a href="#OPTIONAL ARGUMENTS">OPTIONAL ARGUMENTS</a><br>
<a href="#NUMBERS">NUMBERS</a><br>
<a href="#WILDCARDS AND GLOBBING">WILDCARDS AND GLOBBING</a><br>
<a href="#COMMENTS">COMMENTS</a><br>
<a href="#RUNNING COMMANDS LOCALLY">RUNNING COMMANDS LOCALLY</a><br>
<a href="#PIPES">PIPES</a><br>
<a href="#HOME DIRECTORIES">HOME DIRECTORIES</a><br>
<a href="#ENCRYPTED DISKS">ENCRYPTED DISKS</a><br>
<a href="#WINDOWS PATHS">WINDOWS PATHS</a><br>
<a href="#UPLOADING AND DOWNLOADING FILES">UPLOADING AND DOWNLOADING FILES</a><br>
<a href="#EXIT ON ERROR BEHAVIOUR">EXIT ON ERROR BEHAVIOUR</a><br>
<a href="#REMOTE CONTROL GUESTFISH OVER A SOCKET">REMOTE CONTROL GUESTFISH OVER A SOCKET</a><br>
<a href="#PREPARED DISK IMAGES">PREPARED DISK IMAGES</a><br>
<a href="#ADDING REMOTE STORAGE">ADDING REMOTE STORAGE</a><br>
<a href="#PROGRESS BARS">PROGRESS BARS</a><br>
<a href="#PROMPT">PROMPT</a><br>
<a href="#WINDOWS 8">WINDOWS 8</a><br>
<a href="#GUESTFISH COMMANDS">GUESTFISH COMMANDS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">guestfish
&minus; the guest filesystem shell</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em"> guestfish [&minus;&minus;options] [commands]
 guestfish
 guestfish [&minus;&minus;ro|&minus;&minus;rw] &minus;a disk.img
 guestfish [&minus;&minus;ro|&minus;&minus;rw] &minus;a disk.img &minus;m dev[:mountpoint]
 guestfish &minus;d libvirt&minus;domain
 guestfish [&minus;&minus;ro|&minus;&minus;rw] &minus;a disk.img &minus;i
 guestfish &minus;d libvirt&minus;domain &minus;i</pre>


<h2>WARNING
<a name="WARNING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Using guestfish
in read/write mode on live virtual machines can be
dangerous, potentially causing disk corruption. Use the
<i>&minus;&minus;ro</i> (read-only) option to use guestfish
safely if the disk image or virtual machine might be
live.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Guestfish is a
shell and command-line tool for examining and modifying
virtual machine filesystems. It uses libguestfs and exposes
all of the functionality of the guestfs <small>API,</small>
see <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">Guestfish gives
you structured access to the libguestfs <small>API,</small>
from shell scripts or the command line or interactively. If
you want to rescue a broken virtual machine image, you
should look at the <i>virt&minus;rescue</i>(1) command.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>As an
interactive shell</b></p>

<pre style="margin-left:11%;"> $ guestfish
 Welcome to guestfish, the guest filesystem shell for
 editing virtual machine filesystems.
 Type: 'help' for a list of commands
       'man' to read the manual
       'quit' to quit the shell
 &gt;&lt;fs&gt; add&minus;ro disk.img
 &gt;&lt;fs&gt; run
 &gt;&lt;fs&gt; list&minus;filesystems
 /dev/sda1: ext4
 /dev/vg_guest/lv_root: ext4
 /dev/vg_guest/lv_swap: swap
 &gt;&lt;fs&gt; mount /dev/vg_guest/lv_root /
 &gt;&lt;fs&gt; cat /etc/fstab
 # /etc/fstab
 # Created by anaconda
 [...]
 &gt;&lt;fs&gt; exit</pre>


<p style="margin-left:11%; margin-top: 1em"><b>From shell
scripts</b> <br>
Create a new <tt>&quot;/etc/motd&quot;</tt> file in a guest
or disk image:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &lt;&lt;_EOF_
 add disk.img
 run
 mount /dev/vg_guest/lv_root /
 write /etc/motd &quot;Welcome, new users&quot;
 _EOF_</pre>


<p style="margin-left:11%; margin-top: 1em">List the
<small>LVM</small> logical volumes in a disk image:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;&minus;ro &lt;&lt;_EOF_
 run
 lvs
 _EOF_</pre>


<p style="margin-left:11%; margin-top: 1em">List all the
filesystems in a disk image:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;&minus;ro &lt;&lt;_EOF_
 run
 list&minus;filesystems
 _EOF_</pre>


<p style="margin-left:11%; margin-top: 1em"><b>On one
command line</b> <br>
Update <tt>&quot;/etc/resolv.conf&quot;</tt> in a guest:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish \
   add disk.img : run : mount /dev/vg_guest/lv_root / : \
   write /etc/resolv.conf &quot;nameserver 1.2.3.4&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Edit
<tt>&quot;/boot/grub/grub.conf&quot;</tt> interactively:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;&minus;add disk.img \
   &minus;&minus;mount /dev/vg_guest/lv_root \
   &minus;&minus;mount /dev/sda1:/boot \
   edit /boot/grub/grub.conf</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Mount disks
automatically</b> <br>
Use the <i>&minus;i</i> option to automatically mount the
disks from a virtual machine:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img &minus;i cat /etc/group
 guestfish &minus;&minus;ro &minus;d libvirt&minus;domain &minus;i cat /etc/group</pre>


<p style="margin-left:11%; margin-top: 1em">Another way to
edit <tt>&quot;/boot/grub/grub.conf&quot;</tt> interactively
is:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;a disk.img &minus;i edit /boot/grub/grub.conf</pre>


<p style="margin-left:11%; margin-top: 1em"><b>As a script
interpreter</b> <br>
Create a 100MB disk containing an ext2&minus;formatted
partition:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/usr/bin/guestfish &minus;f
 sparse test1.img 100M
 run
 part&minus;disk /dev/sda mbr
 mkfs ext2 /dev/sda1</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Start with a
prepared disk</b> <br>
An alternate way to create a 100MB disk called
<tt>&quot;test1.img&quot;</tt> containing a single
ext2&minus;formatted partition:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N fs</pre>


<p style="margin-left:11%; margin-top: 1em">To list what is
available do:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N help | less</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Remote
drives</b> <br>
Access a remote disk using ssh:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a ssh://example.com/path/to/disk.img</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Remote
control</b></p>

<pre style="margin-left:11%;"> eval &quot;`guestfish &minus;&minus;listen`&quot;
 guestfish &minus;&minus;remote add&minus;ro disk.img
 guestfish &minus;&minus;remote run
 guestfish &minus;&minus;remote lvs</pre>


<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Displays general help on
options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;cmd&minus;help</b></p>

<p style="margin-left:17%;">Lists all available guestfish
commands.</p>

<p style="margin-left:11%;"><b>&minus;h cmd <br>
&minus;&minus;cmd&minus;help cmd</b></p>

<p style="margin-left:17%;">Displays detailed help on a
single command <tt>&quot;cmd&quot;</tt>.</p>

<p style="margin-left:11%;"><b>&minus;a image <br>
&minus;&minus;add image</b></p>

<p style="margin-left:17%;">Add a block device or virtual
machine image to the shell.</p>

<p style="margin-left:17%; margin-top: 1em">The format of
the disk image is auto-detected. To override this and force
a particular format use the <i>&minus;&minus;format=..</i>
option.</p>

<p style="margin-left:17%; margin-top: 1em">Using this flag
is mostly equivalent to using the <tt>&quot;add&quot;</tt>
command, with <tt>&quot;readonly:true&quot;</tt> if the
<i>&minus;&minus;ro</i> flag was given, and with
<tt>&quot;format:...&quot;</tt> if the
<i>&minus;&minus;format=...</i> flag was given.</p>

<p style="margin-left:11%;"><b>&minus;a <small>URI</small>
<br>
&minus;&minus;add <small>URI</small></b></p>

<p style="margin-left:17%;">Add a remote disk. See &quot;
<small>ADDING REMOTE STORAGE&quot;</small> .</p>

<p style="margin-left:11%;"><b>&minus;c <small>URI</small>
<br>
&minus;&minus;connect <small>URI</small></b></p>

<p style="margin-left:17%;">When used in conjunction with
the <i>&minus;d</i> option, this specifies the libvirt
<small>URI</small> to use. The default is to use the default
libvirt connection.</p>

<p style="margin-left:11%;"><b>&minus;&minus;csh</b></p>

<p style="margin-left:17%;">If using the
<i>&minus;&minus;listen</i> option and a csh-like shell, use
this option. See section &quot; <small>REMOTE CONTROL AND
CSH&quot;</small> below.</p>

<p style="margin-left:11%;"><b>&minus;d libvirt-domain <br>
&minus;&minus;domain libvirt-domain</b></p>

<p style="margin-left:17%;">Add disks from the named
libvirt domain. If the <i>&minus;&minus;ro</i> option is
also used, then any libvirt domain can be used. However in
write mode, only libvirt domains which are shut down can be
named here.</p>

<p style="margin-left:17%; margin-top: 1em">Domain UUIDs
can be used instead of names.</p>

<p style="margin-left:17%; margin-top: 1em">Using this flag
is mostly equivalent to using the
<tt>&quot;add&minus;domain&quot;</tt> command, with
<tt>&quot;readonly:true&quot;</tt> if the
<i>&minus;&minus;ro</i> flag was given, and with
<tt>&quot;format:...&quot;</tt> if the
<i>&minus;&minus;format=...</i> flag was given.</p>


<p style="margin-left:11%;"><b>&minus;&minus;echo&minus;keys</b></p>

<p style="margin-left:17%;">When prompting for keys and
passphrases, guestfish normally turns echoing off so you
cannot see what you are typing. If you are not worried about
Tempest attacks and there is no one else in the room you can
specify this flag to see what you are typing.</p>

<p style="margin-left:11%;"><b>&minus;f file <br>
&minus;&minus;file file</b></p>

<p style="margin-left:17%;">Read commands from
<tt>&quot;file&quot;</tt>. To write pure guestfish scripts,
use:</p>

<pre style="margin-left:17%; margin-top: 1em"> #!/usr/bin/guestfish &minus;f</pre>



<p style="margin-left:11%;"><b>&minus;&minus;format=raw|qcow2|..
<br>
&minus;&minus;format</b></p>

<p style="margin-left:17%;">The default for the
<i>&minus;a</i> option is to auto-detect the format of the
disk image. Using this forces the disk format for
<i>&minus;a</i> options which follow on the command line.
Using <i>&minus;&minus;format</i> with no argument switches
back to auto-detection for subsequent <i>&minus;a</i>
options.</p>

<p style="margin-left:17%; margin-top: 1em">For
example:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;&minus;format=raw &minus;a disk.img</pre>


<p style="margin-left:17%; margin-top: 1em">forces raw
format (no auto-detection) for
<tt>&quot;disk.img&quot;</tt>.</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;&minus;format=raw &minus;a disk.img &minus;&minus;format &minus;a another.img</pre>


<p style="margin-left:17%; margin-top: 1em">forces raw
format (no auto-detection) for <tt>&quot;disk.img&quot;</tt>
and reverts to auto-detection for
<tt>&quot;another.img&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">If you have
untrusted raw-format guest disk images, you should use this
option to specify the disk format. This avoids a possible
security problem with malicious guests (
<small>CVE&minus;2010&minus;3851</small> ). See also
&quot;add&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;inspector</b></p>

<p style="margin-left:17%;">Using
<i>virt&minus;inspector</i>(1) code, inspect the disks
looking for an operating system and mount filesystems as
they would be mounted on the real virtual machine.</p>

<p style="margin-left:17%; margin-top: 1em">Typical usage
is either:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;d myguest &minus;i</pre>


<p style="margin-left:17%; margin-top: 1em">(for an
inactive libvirt domain called <i>myguest</i>), or:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;d myguest &minus;i</pre>


<p style="margin-left:17%; margin-top: 1em">(for active
domains, readonly), or specify the block device
directly:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;a /dev/Guests/MyGuest &minus;i</pre>


<p style="margin-left:17%; margin-top: 1em">Note that the
command line syntax changed slightly over older versions of
guestfish. You can still use the old syntax:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish [&minus;&minus;ro] &minus;i disk.img
 guestfish [&minus;&minus;ro] &minus;i libvirt&minus;domain</pre>


<p style="margin-left:17%; margin-top: 1em">Using this flag
is mostly equivalent to using the
<tt>&quot;inspect&minus;os&quot;</tt> command and then using
other commands to mount the filesystems that were found.</p>


<p style="margin-left:11%;"><b>&minus;&minus;keys&minus;from&minus;stdin</b></p>

<p style="margin-left:17%;">Read key or passphrase
parameters from stdin. The default is to try to read
passphrases from the user by opening
<tt>&quot;/dev/tty&quot;</tt>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;listen</b></p>

<p style="margin-left:17%;">Fork into the background and
listen for remote commands. See section &quot; <small>REMOTE
CONTROL GUESTFISH OVER A SOCKET&quot;</small> below.</p>

<p style="margin-left:11%;"><b>&minus;&minus;live</b></p>

<p style="margin-left:17%;">Connect to a live virtual
machine. (Experimental, see &quot; <small>ATTACHING TO
RUNNING DAEMONS&quot;</small> in <i>guestfs</i>(3)).</p>

<p style="margin-left:11%;"><b>&minus;m
dev[:mountpoint[:options[:fstype]]] <br>
&minus;&minus;mount
dev[:mountpoint[:options[:fstype]]]</b></p>

<p style="margin-left:17%;">Mount the named partition or
logical volume on the given mountpoint.</p>

<p style="margin-left:17%; margin-top: 1em">If the
mountpoint is omitted, it defaults to
<tt>&quot;/&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">You have to
mount something on <tt>&quot;/&quot;</tt> before most
commands will work.</p>

<p style="margin-left:17%; margin-top: 1em">If any
<i>&minus;m</i> or <i>&minus;&minus;mount</i> options are
given, the guest is automatically launched.</p>

<p style="margin-left:17%; margin-top: 1em">If you
don&rsquo;t know what filesystems a disk image contains, you
can either run guestfish without this option, then list the
partitions, filesystems and LVs available (see
&quot;list-partitions&quot;, &quot;list-filesystems&quot;
and &quot;lvs&quot; commands), or you can use the
<i>virt&minus;filesystems</i>(1) program.</p>

<p style="margin-left:17%; margin-top: 1em">The third (and
rarely used) part of the mount parameter is the list of
mount options used to mount the underlying filesystem. If
this is not given, then the mount options are either the
empty string or <tt>&quot;ro&quot;</tt> (the latter if the
<i>&minus;&minus;ro</i> flag is used). By specifying the
mount options, you override this default choice. Probably
the only time you would use this is to enable ACLs and/or
extended attributes if the filesystem can support them:</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus;m /dev/sda1:/:acl,user_xattr</pre>


<p style="margin-left:17%; margin-top: 1em">Using this flag
is equivalent to using the
<tt>&quot;mount&minus;options&quot;</tt> command.</p>

<p style="margin-left:17%; margin-top: 1em">The fourth part
of the parameter is the filesystem driver to use, such as
<tt>&quot;ext3&quot;</tt> or <tt>&quot;ntfs&quot;</tt>. This
is rarely needed, but can be useful if multiple drivers are
valid for a filesystem (eg: <tt>&quot;ext2&quot;</tt> and
<tt>&quot;ext3&quot;</tt>), or if libguestfs misidentifies a
filesystem.</p>


<p style="margin-left:11%;"><b>&minus;&minus;network</b></p>

<p style="margin-left:17%;">Enable <small>QEMU</small> user
networking in the guest.</p>

<p style="margin-left:11%;"><b>&minus;N [filename=]type
<br>
&minus;&minus;new [filename=]type <br>
&minus;N help</b></p>

<p style="margin-left:17%;">Prepare a fresh disk image
formatted as &quot;type&quot;. This is an alternative to the
<i>&minus;a</i> option: whereas <i>&minus;a</i> adds an
existing disk, <i>&minus;N</i> creates a preformatted disk
with a filesystem and adds it. See &quot; <small>PREPARED
DISK IMAGES&quot;</small> below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;sync</b></p>

<p style="margin-left:17%;">Disable autosync. This is
enabled by default. See the discussion of autosync in the
<i>guestfs</i>(3) manpage.</p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;dest&minus;paths</b></p>

<p style="margin-left:17%;">Don&rsquo;t tab-complete paths
on the guest filesystem. It is useful to be able to hit the
tab key to complete paths on the guest filesystem, but this
causes extra &quot;hidden&quot; guestfs calls to be made, so
this option is here to allow this feature to be
disabled.</p>


<p style="margin-left:11%;"><b>&minus;&minus;pipe&minus;error</b></p>

<p style="margin-left:17%;">If writes fail to pipe commands
(see &quot; <small>PIPES&quot;</small> below), then the
command returns an error.</p>

<p style="margin-left:17%; margin-top: 1em">The default
(also for historical reasons) is to ignore such errors so
that:</p>

<pre style="margin-left:17%; margin-top: 1em"> &gt;&lt;fs&gt; command_with_lots_of_output | head</pre>


<p style="margin-left:17%; margin-top: 1em">doesn&rsquo;t
give an error.</p>


<p style="margin-left:11%;"><b>&minus;&minus;progress&minus;bars</b></p>

<p style="margin-left:17%;">Enable progress bars, even when
guestfish is used non-interactively.</p>

<p style="margin-left:17%; margin-top: 1em">Progress bars
are enabled by default when guestfish is used as an
interactive shell.</p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;progress&minus;bars</b></p>

<p style="margin-left:17%;">Disable progress bars.</p>


<p style="margin-left:11%;"><b>&minus;&minus;remote[=pid]</b></p>

<p style="margin-left:17%;">Send remote commands to
<tt>$GUESTFISH_PID</tt> or <tt>&quot;pid&quot;</tt>. See
section &quot; <small>REMOTE CONTROL GUESTFISH OVER A
SOCKET&quot;</small> below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;&minus;ro</b></p>

<p style="margin-left:17%;">This changes the
<i>&minus;a</i>, <i>&minus;d</i> and <i>&minus;m</i> options
so that disks are added and mounts are done read-only.</p>

<p style="margin-left:17%; margin-top: 1em">The option must
always be used if the disk image or virtual machine might be
running, and is generally recommended in cases where you
don&rsquo;t need write access to the disk.</p>

<p style="margin-left:17%; margin-top: 1em">Note that
prepared disk images created with <i>&minus;N</i> are not
affected by this option. Also commands like
<tt>&quot;add&quot;</tt> are not affected &minus; you have
to specify the <tt>&quot;readonly:true&quot;</tt> option
explicitly if you need it.</p>

<p style="margin-left:17%; margin-top: 1em">See also &quot;
<small>OPENING DISKS FOR READ AND WRITE&quot;</small>
below.</p>


<p style="margin-left:11%;"><b>&minus;&minus;selinux</b></p>

<p style="margin-left:17%;">Enable SELinux support for the
guest. See &quot; <small>SELINUX&quot;</small> in
<i>guestfs</i>(3).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;verbose</b></p>

<p style="margin-left:17%;">Enable very verbose messages.
This is particularly useful if you find a bug.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:17%;">Display the guestfish /
libguestfs version number and exit.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="86%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;&minus;rw</b></p>

<p style="margin-left:17%;">This changes the
<i>&minus;a</i>, <i>&minus;d</i> and <i>&minus;m</i> options
so that disks are added and mounts are done read-write.</p>

<p style="margin-left:17%; margin-top: 1em">See &quot;
<small>OPENING DISKS FOR READ AND WRITE&quot;</small>
below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="3%"></td>
<td width="58%">


<p>Echo each command before executing it.</p></td>
<td width="25%">
</td></tr>
</table>

<h2>COMMANDS ON COMMAND LINE
<a name="COMMANDS ON COMMAND LINE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Any additional
(non-option) arguments are treated as commands to
execute.</p>

<p style="margin-left:11%; margin-top: 1em">Commands to
execute should be separated by a colon
(<tt>&quot;:&quot;</tt>), where the colon is a separate
parameter. Thus:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish cmd [args...] : cmd [args...] : cmd [args...] ...</pre>


<p style="margin-left:11%; margin-top: 1em">If there are no
additional arguments, then we enter a shell, either an
interactive shell with a prompt (if the input is a terminal)
or a non-interactive shell.</p>

<p style="margin-left:11%; margin-top: 1em">In either
command line mode or non-interactive shell, the first
command that gives an error causes the whole shell to exit.
In interactive mode (with a prompt) if a command fails, you
can continue to enter commands.</p>

<h2>USING launch (OR run)
<a name="USING launch (OR run)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As with
<i>guestfs</i>(3), you must first configure your guest by
adding disks, then launch it, then mount any disks you need,
and finally issue actions/commands. So the general order of
the day is:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p style="margin-top: 1em">add or
&minus;a/&minus;&minus;add</p> </td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p>launch (aka run)</p></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p>mount or &minus;m/&minus;&minus;mount</p></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p>any other commands</p></td>
<td width="54%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;run&quot;</tt>
is a synonym for <tt>&quot;launch&quot;</tt>. You must
<tt>&quot;launch&quot;</tt> (or <tt>&quot;run&quot;</tt>)
your guest before mounting or performing any other
commands.</p>

<p style="margin-left:11%; margin-top: 1em">The only
exception is that if any of the <i>&minus;i</i>,
<i>&minus;m</i>, <i>&minus;&minus;mount</i>, <i>&minus;N</i>
or <i>&minus;&minus;new</i> options were given then
<tt>&quot;run&quot;</tt> is done automatically, simply
because guestfish can&rsquo;t perform the action you asked
for without doing this.</p>

<h2>OPENING DISKS FOR READ AND WRITE
<a name="OPENING DISKS FOR READ AND WRITE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The guestfish,
<i>guestmount</i>(1) and <i>virt&minus;rescue</i>(1) options
<i>&minus;&minus;ro</i> and <i>&minus;&minus;rw</i> affect
whether the other command line options <i>&minus;a</i>,
<i>&minus;c</i>, <i>&minus;d</i>, <i>&minus;i</i> and
<i>&minus;m</i> open disk images read-only or for
writing.</p>

<p style="margin-left:11%; margin-top: 1em">In libguestfs
&le; 1.10, guestfish, guestmount and virt-rescue defaulted
to opening disk images supplied on the command line for
write. To open a disk image read-only you have to do
<i>&minus;a image &minus;&minus;ro</i>.</p>

<p style="margin-left:11%; margin-top: 1em">This matters:
If you accidentally open a live <small>VM</small> disk image
writable then you will cause irreversible disk
corruption.</p>

<p style="margin-left:11%; margin-top: 1em">In a future
libguestfs we intend to change the default the other way.
Disk images will be opened read-only. You will have to
either specify <i>guestfish &minus;&minus;rw</i>,
<i>guestmount &minus;&minus;rw</i>, <i>virt-rescue
&minus;&minus;rw</i>, or change the configuration file in
order to get write access for disk images specified by those
other command line options.</p>

<p style="margin-left:11%; margin-top: 1em">This version of
guestfish, guestmount and virt-rescue has a
<i>&minus;&minus;rw</i> option which does nothing (it is
already the default). However it is highly recommended that
you use this option to indicate that you need write access,
and prepare your scripts for the day when this option will
be required for write access.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note:</b>
This does <i>not</i> affect commands like &quot;add&quot;
and &quot;mount&quot;, or any other libguestfs program apart
from guestfish and guestmount.</p>

<h2>QUOTING
<a name="QUOTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can quote
ordinary parameters using either single or double quotes.
For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> add &quot;file with a space.img&quot;
 rm '/file name'
 rm '/&quot;'</pre>


<p style="margin-left:11%; margin-top: 1em">A few commands
require a list of strings to be passed. For these, use a
whitespace-separated list, enclosed in quotes. Strings
containing whitespace to be passed through must be enclosed
in single quotes. A literal single quote must be escaped
with a backslash.</p>

<pre style="margin-left:11%; margin-top: 1em"> vgcreate VG &quot;/dev/sda1 /dev/sdb1&quot;
 command &quot;/bin/echo 'foo      bar'&quot;
 command &quot;/bin/echo \'foo\'&quot;</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>ESCAPE
SEQUENCES IN DOUBLE QUOTED ARGUMENTS</small></b> <br>
In double-quoted arguments (only) use backslash to insert
special characters: <br>
&quot;\a&quot;</p>

<p style="margin-left:17%;">Alert (bell) character.</p>

<p style="margin-left:11%;">&quot;\b&quot;</p>

<p style="margin-left:17%;">Backspace character.</p>

<p style="margin-left:11%;">&quot;\f&quot;</p>

<p style="margin-left:17%;">Form feed character.</p>

<p style="margin-left:11%;">&quot;\n&quot;</p>

<p style="margin-left:17%;">Newline character.</p>

<p style="margin-left:11%;">&quot;\r&quot;</p>

<p style="margin-left:17%;">Carriage return character.</p>

<p style="margin-left:11%;">&quot;\t&quot;</p>

<p style="margin-left:17%;">Horizontal tab character.</p>

<p style="margin-left:11%;">&quot;\v&quot;</p>

<p style="margin-left:17%;">Vertical tab character.</p>

<p style="margin-left:11%;">&quot;\&quot;&quot;</p>

<p style="margin-left:17%;">A literal double quote
character.</p>

<p style="margin-left:11%;">&quot;\ooo&quot;</p>

<p style="margin-left:17%;">A character with octal value
<i>ooo</i>. There must be precisely 3 octal digits (unlike
C).</p>

<p style="margin-left:11%;">&quot;\xhh&quot;</p>

<p style="margin-left:17%;">A character with hex value
<i>hh</i>. There must be precisely 2 hex digits.</p>

<p style="margin-left:17%; margin-top: 1em">In the current
implementation <tt>&quot;\000&quot;</tt> and
<tt>&quot;\x00&quot;</tt> cannot be used in strings.</p>

<p style="margin-left:11%;">&quot;\\&quot;</p>

<p style="margin-left:17%;">A literal backslash
character.</p>

<h2>OPTIONAL ARGUMENTS
<a name="OPTIONAL ARGUMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Some commands
take optional arguments. These arguments appear in this
documentation as <tt>&quot;[argname:..]&quot;</tt>. You can
use them as in these examples:</p>

<pre style="margin-left:11%; margin-top: 1em"> add filename
 add filename readonly:true
 add filename format:qcow2 readonly:false</pre>


<p style="margin-left:11%; margin-top: 1em">Each optional
argument can appear at most once. All optional arguments
must appear after the required ones.</p>

<h2>NUMBERS
<a name="NUMBERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
applies to all commands which can take integers as
parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><b><small>SIZE
SUFFIX</small></b> <br>
When the command takes a parameter measured in bytes, you
can use one of the following suffixes to specify kilobytes,
megabytes and larger sizes: <b><br>
k</b> or <b>K</b> or <b>KiB</b></p>

<p style="margin-left:17%;">The size in kilobytes
(multiplied by 1024).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>KB</small></b></p></td>
<td width="3%"></td>
<td width="48%">


<p>The size in <small>SI 1000</small> byte units.</p></td>
<td width="35%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>M</b> or <b>MiB</b></p>

<p style="margin-left:17%;">The size in megabytes
(multiplied by 1048576).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>MB</small></b></p></td>
<td width="3%"></td>
<td width="52%">


<p>The size in <small>SI 1000000</small> byte units.</p></td>
<td width="31%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>G</b> or <b>GiB</b></p>

<p style="margin-left:17%;">The size in gigabytes
(multiplied by 2**30).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>GB</small></b></p></td>
<td width="3%"></td>
<td width="49%">


<p>The size in <small>SI</small> 10**9 byte units.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>T</b> or <b>TiB</b></p>

<p style="margin-left:17%;">The size in terabytes
(multiplied by 2**40).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>TB</small></b></p></td>
<td width="3%"></td>
<td width="51%">


<p>The size in <small>SI</small> 10**12 byte units.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>P</b> or <b>PiB</b></p>

<p style="margin-left:17%;">The size in petabytes
(multiplied by 2**50).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>PB</small></b></p></td>
<td width="3%"></td>
<td width="51%">


<p>The size in <small>SI</small> 10**15 byte units.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>E</b> or <b>EiB</b></p>

<p style="margin-left:17%;">The size in exabytes
(multiplied by 2**60).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>EB</small></b></p></td>
<td width="3%"></td>
<td width="51%">


<p>The size in <small>SI</small> 10**18 byte units.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>Z</b> or <b>ZiB</b></p>

<p style="margin-left:17%;">The size in zettabytes
(multiplied by 2**70).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>ZB</small></b></p></td>
<td width="3%"></td>
<td width="51%">


<p>The size in <small>SI</small> 10**21 byte units.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>Y</b> or <b>YiB</b></p>

<p style="margin-left:17%;">The size in yottabytes
(multiplied by 2**80).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b><small>YB</small></b></p></td>
<td width="3%"></td>
<td width="51%">


<p>The size in <small>SI</small> 10**24 byte units.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<pre style="margin-left:11%; margin-top: 1em"> truncate&minus;size /file 1G</pre>


<p style="margin-left:11%; margin-top: 1em">would truncate
the file to 1 gigabyte.</p>

<p style="margin-left:11%; margin-top: 1em">Be careful
because a few commands take sizes in kilobytes or megabytes
(eg. the parameter to &quot;memsize&quot; is specified in
megabytes already). Adding a suffix will probably not do
what you expect.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>OCTAL
AND HEXADECIMAL NUMBERS</small></b> <br>
For specifying the radix (base) use the C convention:
<tt>0</tt> to prefix an octal number or
<tt>&quot;0x&quot;</tt> to prefix a hexadecimal number. For
example:</p>

<pre style="margin-left:11%; margin-top: 1em"> 1234      decimal number 1234
 02322     octal number, equivalent to decimal 1234
 0x4d2     hexadecimal number, equivalent to decimal 1234</pre>


<p style="margin-left:11%; margin-top: 1em">When using the
<tt>&quot;chmod&quot;</tt> command, you almost always want
to specify an octal number for the mode, and you must prefix
it with <tt>0</tt> (unlike the Unix <i>chmod</i>(1)
program):</p>

<pre style="margin-left:11%; margin-top: 1em"> chmod 0777 /public  # OK
 chmod 777 /public   # WRONG! This is mode 777 decimal = 01411 octal.</pre>


<p style="margin-left:11%; margin-top: 1em">Commands that
return numbers usually print them in decimal, but some
commands print numbers in other radices (eg.
<tt>&quot;umask&quot;</tt> prints the mode in octal,
preceded by <tt>0</tt>).</p>

<h2>WILDCARDS AND GLOBBING
<a name="WILDCARDS AND GLOBBING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Neither
guestfish nor the underlying guestfs <small>API</small>
performs wildcard expansion (globbing) by default. So for
example the following will not do what you expect:</p>

<pre style="margin-left:11%; margin-top: 1em"> rm&minus;rf /home/*</pre>


<p style="margin-left:11%; margin-top: 1em">Assuming you
don&rsquo;t have a directory called literally
<tt>&quot;/home/*&quot;</tt> then the above command will
return an error.</p>

<p style="margin-left:11%; margin-top: 1em">To perform
wildcard expansion, use the <tt>&quot;glob&quot;</tt>
command.</p>

<pre style="margin-left:11%; margin-top: 1em"> glob rm&minus;rf /home/*</pre>


<p style="margin-left:11%; margin-top: 1em">runs
<tt>&quot;rm&minus;rf&quot;</tt> on each path that matches
(ie. potentially running the command many times), equivalent
to:</p>

<pre style="margin-left:11%; margin-top: 1em"> rm&minus;rf /home/jim
 rm&minus;rf /home/joe
 rm&minus;rf /home/mary</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;glob&quot;
only works on simple guest paths and not on device
names.</p>

<p style="margin-left:11%; margin-top: 1em">If you have
several parameters, each containing a wildcard, then glob
will perform a Cartesian product.</p>

<h2>COMMENTS
<a name="COMMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Any line which
starts with a <i>#</i> character is treated as a comment and
ignored. The <i>#</i> can optionally be preceded by
whitespace, but <b>not</b> by a command. For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> # this is a comment
         # this is a comment
 foo # NOT a comment</pre>


<p style="margin-left:11%; margin-top: 1em">Blank lines are
also ignored.</p>

<h2>RUNNING COMMANDS LOCALLY
<a name="RUNNING COMMANDS LOCALLY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Any line which
starts with a <i>!</i> character is treated as a command
sent to the local shell (<tt>&quot;/bin/sh&quot;</tt> or
whatever <i>system</i>(3) uses). For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> !mkdir local
 tgz&minus;out /remote local/remote&minus;data.tar.gz</pre>


<p style="margin-left:11%; margin-top: 1em">will create a
directory <tt>&quot;local&quot;</tt> on the host, and then
export the contents of <tt>&quot;/remote&quot;</tt> on the
mounted filesystem to
<tt>&quot;local/remote&minus;data.tar.gz&quot;</tt>. (See
<tt>&quot;tgz&minus;out&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">To change the
local directory, use the <tt>&quot;lcd&quot;</tt> command.
<tt>&quot;!cd&quot;</tt> will have no effect, due to the way
that subprocesses work in Unix.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>LOCAL
COMMANDS WITH INLINE EXECUTION</small></b> <br>
If a line starts with <i>&lt;!</i> then the shell command is
executed (as for <i>!</i>), but subsequently any output
(stdout) of the shell command is parsed and executed as
guestfish commands.</p>

<p style="margin-left:11%; margin-top: 1em">Thus you can
use shell script to construct arbitrary guestfish commands
which are then parsed by guestfish.</p>

<p style="margin-left:11%; margin-top: 1em">For example it
is tedious to create a sequence of files (eg.
<tt>&quot;/foo.1&quot;</tt> through
<tt>&quot;/foo.100&quot;</tt>) using guestfish commands
alone. However this is simple if we use a shell script to
create the guestfish commands for us:</p>

<pre style="margin-left:11%; margin-top: 1em"> &lt;! for n in `seq 1 100`; do echo write /foo.$n $n; done</pre>


<p style="margin-left:11%; margin-top: 1em">or with names
like <tt>&quot;/foo.001&quot;</tt>:</p>

<pre style="margin-left:11%; margin-top: 1em"> &lt;! for n in `seq 1 100`; do printf &quot;write /foo.%03d %d\n&quot; $n $n; done</pre>


<p style="margin-left:11%; margin-top: 1em">When using
guestfish interactively it can be helpful to just run the
shell script first (ie. remove the initial
<tt>&quot;&lt;&quot;</tt> character so it is just an
ordinary <i>!</i> local command), see what guestfish
commands it would run, and when you are happy with those
prepend the <tt>&quot;&lt;&quot;</tt> character to run the
guestfish commands for real.</p>

<h2>PIPES
<a name="PIPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;command &lt;space&gt; | command&quot;</tt> to pipe
the output of the first command (a guestfish command) to the
second command (any host command). For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> cat /etc/passwd | awk &minus;F: '$3 == 0 { print }'</pre>


<p style="margin-left:11%; margin-top: 1em">(where
<tt>&quot;cat&quot;</tt> is the guestfish cat command, but
<tt>&quot;awk&quot;</tt> is the host awk program). The above
command would list all accounts in the guest filesystem
which have <small>UID 0,</small> ie. root accounts including
backdoors. Other examples:</p>

<pre style="margin-left:11%; margin-top: 1em"> hexdump /bin/ls | head
 list&minus;devices | tail &minus;1
 tgz&minus;out / &minus; | tar ztf &minus;</pre>


<p style="margin-left:11%; margin-top: 1em">The space
before the pipe symbol is required, any space after the pipe
symbol is optional. Everything after the pipe symbol is just
passed straight to the host shell, so it can contain
redirections, globs and anything else that makes sense on
the host side.</p>

<p style="margin-left:11%; margin-top: 1em">To use a
literal argument which begins with a pipe symbol, you have
to quote it, eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> echo &quot;|&quot;</pre>


<h2>HOME DIRECTORIES
<a name="HOME DIRECTORIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a parameter
starts with the character <tt>&quot;~&quot;</tt> then the
tilde may be expanded as a home directory path (either
<tt>&quot;~&quot;</tt> for the current user&rsquo;s home
directory, or <tt>&quot;~user&quot;</tt> for another
user).</p>

<p style="margin-left:11%; margin-top: 1em">Note that home
directory expansion happens for users known <i>on the
host</i>, not in the guest filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">To use a
literal argument which begins with a tilde, you have to
quote it, eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> echo &quot;~&quot;</pre>


<h2>ENCRYPTED DISKS
<a name="ENCRYPTED DISKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Libguestfs has
some support for Linux guests encrypted according to the
Linux Unified Key Setup ( <small>LUKS</small> ) standard,
which includes nearly all whole disk encryption systems used
by modern Linux guests. Currently only LVM-on-LUKS is
supported.</p>

<p style="margin-left:11%; margin-top: 1em">Identify
encrypted block devices and partitions using
&quot;vfs-type&quot;:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; vfs&minus;type /dev/sda2
 crypto_LUKS</pre>


<p style="margin-left:11%; margin-top: 1em">Then open those
devices using &quot;luks-open&quot;. This creates a
device-mapper device called
<tt>&quot;/dev/mapper/luksdev&quot;</tt>.</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; luks&minus;open /dev/sda2 luksdev
 Enter key or passphrase (&quot;key&quot;): &lt;enter the passphrase&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">Finally you
have to tell <small>LVM</small> to scan for volume groups on
the newly created mapper device:</p>

<pre style="margin-left:11%; margin-top: 1em"> vgscan
 vg&minus;activate&minus;all true</pre>


<p style="margin-left:11%; margin-top: 1em">The logical
volume(s) can now be mounted in the usual way.</p>

<p style="margin-left:11%; margin-top: 1em">Before closing
a <small>LUKS</small> device you must unmount any logical
volumes on it and deactivate the volume groups by calling
<tt>&quot;vg&minus;activate false VG&quot;</tt> on each one.
Then you can close the mapper device:</p>

<pre style="margin-left:11%; margin-top: 1em"> vg&minus;activate false /dev/VG
 luks&minus;close /dev/mapper/luksdev</pre>


<h2>WINDOWS PATHS
<a name="WINDOWS PATHS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a path is
prefixed with <tt>&quot;win:&quot;</tt> then you can use
Windows-style drive letters and paths (with some
limitations). The following commands are equivalent:</p>

<pre style="margin-left:11%; margin-top: 1em"> file /WINDOWS/system32/config/system.LOG
 file win:\windows\system32\config\system.log
 file WIN:C:\Windows\SYSTEM32\CONFIG\SYSTEM.LOG</pre>


<p style="margin-left:11%; margin-top: 1em">The parameter
is rewritten &quot;behind the scenes&quot; by looking up the
position where the drive is mounted, prepending that to the
path, changing all backslash characters to forward slash,
then resolving the result using
&quot;case-sensitive-path&quot;. For example if the E: drive
was mounted on <tt>&quot;/e&quot;</tt> then the parameter
might be rewritten like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> win:e:\foo\bar =&gt; /e/FOO/bar</pre>


<p style="margin-left:11%; margin-top: 1em">This only works
in argument positions that expect a path.</p>

<h2>UPLOADING AND DOWNLOADING FILES
<a name="UPLOADING AND DOWNLOADING FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For commands
such as <tt>&quot;upload&quot;</tt>,
<tt>&quot;download&quot;</tt>,
<tt>&quot;tar&minus;in&quot;</tt>,
<tt>&quot;tar&minus;out&quot;</tt> and others which upload
from or download to a local file, you can use the special
filename <tt>&quot;&minus;&quot;</tt> to mean &quot;from
stdin&quot; or &quot;to stdout&quot;. For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> upload &minus; /foo</pre>


<p style="margin-left:11%; margin-top: 1em">reads stdin and
creates from that a file <tt>&quot;/foo&quot;</tt> in the
disk image, and:</p>

<pre style="margin-left:11%; margin-top: 1em"> tar&minus;out /etc &minus; | tar tf &minus;</pre>


<p style="margin-left:11%; margin-top: 1em">writes the
tarball to stdout and then pipes that into the external
&quot;tar&quot; command (see &quot;
<small>PIPES&quot;</small> ).</p>

<p style="margin-left:11%; margin-top: 1em">When using
<tt>&quot;&minus;&quot;</tt> to read from stdin, the input
is read up to the end of stdin. You can also use a special
&quot;heredoc&quot;&minus;like syntax to read up to some
arbitrary end marker:</p>

<pre style="margin-left:11%; margin-top: 1em"> upload &minus;&lt;&lt;END /foo
 input line 1
 input line 2
 input line 3
 END</pre>


<p style="margin-left:11%; margin-top: 1em">Any string of
characters can be used instead of <tt>&quot;END&quot;</tt>.
The end marker must appear on a line of its own, without any
preceding or following characters (not even spaces).</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
<tt>&quot;&minus;&lt;&lt;&quot;</tt> syntax only applies to
parameters used to upload local files (so-called
&quot;FileIn&quot; parameters in the generator).</p>

<h2>EXIT ON ERROR BEHAVIOUR
<a name="EXIT ON ERROR BEHAVIOUR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">By default,
guestfish will ignore any errors when in interactive mode
(ie. taking commands from a human over a tty), and will exit
on the first error in non-interactive mode (scripts,
commands given on the command line).</p>

<p style="margin-left:11%; margin-top: 1em">If you prefix a
command with a <i>&minus;</i> character, then that command
will not cause guestfish to exit, even if that (one) command
returns an error.</p>

<h2>REMOTE CONTROL GUESTFISH OVER A SOCKET
<a name="REMOTE CONTROL GUESTFISH OVER A SOCKET"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Guestfish can
be remote-controlled over a socket. This is useful
particularly in shell scripts where you want to make several
different changes to a filesystem, but you don&rsquo;t want
the overhead of starting up a guestfish process each
time.</p>

<p style="margin-left:11%; margin-top: 1em">Start a
guestfish server process using:</p>

<pre style="margin-left:11%; margin-top: 1em"> eval &quot;`guestfish &minus;&minus;listen`&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">and then send
it commands by doing:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;remote cmd [...]</pre>


<p style="margin-left:11%; margin-top: 1em">To cause the
server to exit, send it the exit command:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;remote exit</pre>


<p style="margin-left:11%; margin-top: 1em">Note that the
server will normally exit if there is an error in a command.
You can change this in the usual way. See section &quot;
<small>EXIT ON ERROR BEHAVIOUR&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>CONTROLLING
MULTIPLE GUESTFISH PROCESSES</small></b> <br>
The <tt>&quot;eval&quot;</tt> statement sets the environment
variable <tt>$GUESTFISH_PID</tt>, which is how the
<i>&minus;&minus;remote</i> option knows where to send the
commands. You can have several guestfish listener processes
running using:</p>

<pre style="margin-left:11%; margin-top: 1em"> eval &quot;`guestfish &minus;&minus;listen`&quot;
 pid1=$GUESTFISH_PID
 eval &quot;`guestfish &minus;&minus;listen`&quot;
 pid2=$GUESTFISH_PID
 ...
 guestfish &minus;&minus;remote=$pid1 cmd
 guestfish &minus;&minus;remote=$pid2 cmd</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>REMOTE
CONTROL AND CSH</small></b> <br>
When using csh-like shells (csh, tcsh etc) you have to add
the <i>&minus;&minus;csh</i> option:</p>

<pre style="margin-left:11%; margin-top: 1em"> eval &quot;`guestfish &minus;&minus;listen &minus;&minus;csh`&quot;</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>REMOTE
CONTROL DETAILS</small></b> <br>
Remote control happens over a Unix domain socket called
<tt>&quot;/tmp/.guestfish&minus;$UID/socket&minus;$PID&quot;</tt>,
where <tt>$UID</tt> is the effective user <small>ID</small>
of the process, and <tt>$PID</tt> is the process
<small>ID</small> of the server.</p>

<p style="margin-left:11%; margin-top: 1em">Guestfish
client and server versions must match exactly.</p>

<p style="margin-left:11%; margin-top: 1em">Older versions
of guestfish were vulnerable to
<small>CVE&minus;2013&minus;4419</small> (see &quot;
<small>CVE&minus;2013&minus;4419&quot;</small> in
<i>guestfs</i>(3)). This is fixed in the current
version.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>USING
REMOTE CONTROL ROBUSTLY FROM SHELL SCRIPTS</small></b> <br>
From Bash, you can use the following code which creates a
guestfish instance, correctly quotes the command line,
handles failure to start, and cleans up guestfish when the
script exits:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/bin/bash &minus;
 set &minus;e
 guestfish[0]=&quot;guestfish&quot;
 guestfish[1]=&quot;&minus;&minus;listen&quot;
 guestfish[2]=&quot;&minus;&minus;ro&quot;
 guestfish[3]=&quot;&minus;a&quot;
 guestfish[4]=&quot;disk.img&quot;
 GUESTFISH_PID=
 eval $(&quot;${guestfish[@]}&quot;)
 if [ &minus;z &quot;$GUESTFISH_PID&quot; ]; then
     echo &quot;error: guestfish didn't start up, see error messages above&quot;
     exit 1
 fi
 cleanup_guestfish ()
 {
     guestfish &minus;&minus;remote &minus;&minus; exit &gt;/dev/null 2&gt;&amp;1 ||:
 }
 trap cleanup_guestfish EXIT ERR
 guestfish &minus;&minus;remote &minus;&minus; run
 # ...</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>REMOTE
CONTROL DOES NOT WORK WITH</small></b> <i>&minus;a</i>
<b><small>ETC. OPTIONS</small></b> <br>
Options such as <i>&minus;a</i>, <i>&minus;&minus;add</i>,
<i>&minus;N</i>, <i>&minus;&minus;new</i> etc don&rsquo;t
interact properly with remote support. They are processed
locally, and not sent through to the remote guestfish. In
particular this won&rsquo;t do what you expect:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;remote &minus;&minus;add disk.img</pre>


<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t use
these options. Use the equivalent commands instead, eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;remote add&minus;drive disk.img</pre>


<p style="margin-left:11%; margin-top: 1em">or:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;remote
 &gt;&lt;fs&gt; add disk.img</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>REMOTE
CONTROL RUN COMMAND HANGING</small></b> <br>
Using the <tt>&quot;run&quot;</tt> (or
<tt>&quot;launch&quot;</tt>) command remotely in a command
substitution context hangs, ie. don&rsquo;t do (note the
backquotes):</p>

<pre style="margin-left:11%; margin-top: 1em"> a=`guestfish &minus;&minus;remote run`</pre>


<p style="margin-left:11%; margin-top: 1em">Since the
<tt>&quot;run&quot;</tt> command produces no output on
stdout, this is not useful anyway. For further information
see https://bugzilla.redhat.com/show_bug.cgi?id=592910.</p>

<h2>PREPARED DISK IMAGES
<a name="PREPARED DISK IMAGES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use the
<i>&minus;N [filename=]type</i> or <i>&minus;&minus;new
[filename=]type</i> parameter to select one of a set of
preformatted disk images that guestfish can make for you to
save typing. This is particularly useful for testing
purposes. This option is used instead of the <i>&minus;a</i>
option, and like <i>&minus;a</i> can appear multiple times
(and can be mixed with <i>&minus;a</i>).</p>

<p style="margin-left:11%; margin-top: 1em">The new disk is
called <tt>&quot;test1.img&quot;</tt> for the first
<i>&minus;N</i>, <tt>&quot;test2.img&quot;</tt> for the
second and so on. Existing files in the current directory
are <i>overwritten</i>. You can use a different filename by
specifying <tt>&quot;filename=&quot;</tt> before the type
(see examples below).</p>

<p style="margin-left:11%; margin-top: 1em">The type
briefly describes how the disk should be sized, partitioned,
how filesystem(s) should be created, and how content should
be added. Optionally the type can be followed by extra
parameters, separated by <tt>&quot;:&quot;</tt> (colon)
characters. For example, <i>&minus;N fs</i> creates a
default 100MB, sparsely-allocated disk, containing a single
partition, with the partition formatted as ext2. <i>&minus;N
fs:ext4:1G</i> is the same, but for an ext4 filesystem on a
1GB disk instead.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
prepared filesystem is not mounted. You would usually have
to use the <tt>&quot;mount /dev/sda1 /&quot;</tt> command or
add the <i>&minus;m /dev/sda1</i> option.</p>

<p style="margin-left:11%; margin-top: 1em">If any
<i>&minus;N</i> or <i>&minus;&minus;new</i> options are
given, the libguestfs appliance is automatically
launched.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>EXAMPLES</small></b>
<br>
Create a 100MB disk with an ext4&minus;formatted partition,
called <tt>&quot;test1.img&quot;</tt> in the current
directory:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N fs:ext4</pre>


<p style="margin-left:11%; margin-top: 1em">Create a 32MB
disk with a VFAT-formatted partition, and mount it:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N fs:vfat:32M &minus;m /dev/sda1</pre>


<p style="margin-left:11%; margin-top: 1em">Create a blank
200MB disk:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N disk:200M</pre>


<p style="margin-left:11%; margin-top: 1em">Create a blank
200MB disk called <tt>&quot;blankdisk.img&quot;</tt>
(instead of <tt>&quot;test1.img&quot;</tt>):</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;N blankdisk.img=disk:200M</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N
disk &minus; create a blank disk</b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]disk[:</tt><i>size</i><tt>]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a blank
disk, size 100MB (by default).</p>

<p style="margin-left:11%; margin-top: 1em">The default
size can be changed by supplying an optional parameter.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 size          100M          the size of the disk image</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N
part &minus; create a partitioned disk</b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]part[:</tt><i>size</i><tt>[:</tt><i>partition</i><tt>]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a disk
with a single partition. By default the size of the disk is
100MB (the available space in the partition will be a tiny
bit smaller) and the partition table will be
<small>MBR</small> (old DOS-style).</p>

<p style="margin-left:11%; margin-top: 1em">These defaults
can be changed by supplying optional parameters.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 size          100M          the size of the disk image
 partition     mbr           partition table type</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N fs
&minus; create a filesystem</b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]fs[:</tt><i>filesystem</i><tt>[:</tt><i>size</i><tt>[:</tt><i>partition</i><tt>]]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a disk
with a single partition, with the partition containing an
empty filesystem. This defaults to creating a 100MB disk
(the available space in the filesystem will be a tiny bit
smaller) with an <small>MBR</small> (old DOS-style)
partition table and an ext2 filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">These defaults
can be changed by supplying optional parameters.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 filesystem    ext2          the type of filesystem to use
 size          100M          the size of the disk image
 partition     mbr           partition table type</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N lv
&minus; create a disk with logical volume</b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]lv[:</tt><i>name</i><tt>[:</tt><i>size</i><tt>[:</tt><i>partition</i><tt>]]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a disk
with a single partition, set up the partition as an
<small>LVM2</small> physical volume, and place a volume
group and logical volume on there. This defaults to creating
a 100MB disk with the <small>VG</small> and
<small>LV</small> called <tt>&quot;/dev/VG/LV&quot;</tt>.
You can change the name of the <small>VG</small> and
<small>LV</small> by supplying an alternate name as the
first optional parameter.</p>

<p style="margin-left:11%; margin-top: 1em">Note this does
not create a filesystem. Use &rsquo;lvfs&rsquo; to do
that.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 name          /dev/VG/LV    the name of the VG and LV to use
 size          100M          the size of the disk image
 partition     mbr           partition table type</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N
lvfs &minus; create a disk with logical volume and
filesystem</b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]lvfs[:</tt><i>name</i><tt>[:</tt><i>filesystem</i><tt>[:</tt><i>size</i><tt>[:</tt><i>partition</i><tt>]]]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a disk
with a single partition, set up the partition as an
<small>LVM2</small> physical volume, and place a volume
group and logical volume on there. Then format the
<small>LV</small> with a filesystem. This defaults to
creating a 100MB disk with the <small>VG</small> and
<small>LV</small> called <tt>&quot;/dev/VG/LV&quot;</tt>,
with an ext2 filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 name          /dev/VG/LV    the name of the VG and LV to use
 filesystem    ext2          the type of filesystem to use
 size          100M          the size of the disk image
 partition     mbr           partition table type</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N
bootroot &minus; create a boot and root filesystem</b>
<tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]bootroot[:</tt><i>bootfs</i><tt>[:</tt><i>rootfs</i><tt>[:</tt><i>size</i><tt>[:</tt><i>bootsize</i><tt>[:</tt><i>partition</i><tt>]]]]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Create a disk
with two partitions, for boot and root filesystem. Format
the two filesystems independently. There are several
optional parameters which control the exact layout and
filesystem types.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 bootfs        ext2          the type of filesystem to use for boot
 rootfs        ext2          the type of filesystem to use for root
 size          100M          the size of the disk image
 bootsize      32M           the size of the boot filesystem
 partition     mbr           partition table type</pre>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;N
bootrootlv &minus; create a boot and root filesystem using
<small>LVM</small></b> <tt><br>
&quot;guestfish &minus;N
[</tt><i>filename</i><tt>=]bootrootlv[:</tt><i>name</i><tt>[:</tt><i>bootfs</i><tt>[:</tt><i>rootfs</i><tt>[:</tt><i>size</i><tt>[:</tt><i>bootsize</i><tt>[:</tt><i>partition</i><tt>]]]]]]&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as <tt>&quot;bootroot&quot;</tt> but the root
filesystem (only) is placed on a logical volume, named by
default <tt>&quot;/dev/VG/LV&quot;</tt>. There are several
optional parameters which control the exact layout.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are:</p>

<pre style="margin-left:11%; margin-top: 1em"> Name          Default value
 name          /dev/VG/LV    the name of the VG and LV for root
 bootfs        ext2          the type of filesystem to use for boot
 rootfs        ext2          the type of filesystem to use for root
 size          100M          the size of the disk image
 bootsize      32M           the size of the boot filesystem
 partition     mbr           partition table type</pre>


<h2>ADDING REMOTE STORAGE
<a name="ADDING REMOTE STORAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>For
API-level documentation on this topic, see
&quot;guestfs_add_drive_opts&quot; in guestfs(3) and &quot;
<small>REMOTE STORAGE&quot;</small> in guestfs(3)</i>.</p>

<p style="margin-left:11%; margin-top: 1em">On the command
line, you can use the <i>&minus;a</i> option to add network
block devices using a URI-style format, for example:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a ssh://root@example.com/disk.img</pre>


<p style="margin-left:11%; margin-top: 1em">URIs
<i>cannot</i> be used with the &quot;add&quot; command. The
equivalent command using the <small>API</small> directly
is:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; add /disk.img protocol:ssh server:tcp:example.com username:root</pre>


<p style="margin-left:11%; margin-top: 1em">The possible
<i>&minus;a <small>URI</small></i> formats are described
below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>&minus;a
disk.img <br>
&minus;a file:///path/to/disk.img</b> <br>
Add the local disk image (or device) called
<tt>&quot;disk.img&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>&minus;a
nbd://example.com[:port] <br>
&minus;a nbd://example.com[:port]/exportname <br>
&minus;a nbd://?socket=/socket <br>
&minus;a nbd:///exportname?socket=/socket</b> <br>
Add a disk located on Network Block Device (nbd)
storage.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>/exportname</i> part of the <small>URI</small> specifies
an <small>NBD</small> export name, but is usually left
empty.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<i>?socket</i> parameter can be used to specify a Unix
domain socket that we talk to the <small>NBD</small> server
over. Note that you cannot mix server name (ie.
<small>TCP/IP</small> ) and socket path.</p>

<p style="margin-left:11%; margin-top: 1em">The equivalent
<small>API</small> command would be (no export name):</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; add &quot;&quot; protocol:nbd server:[tcp:example.com|unix:/socket]</pre>


<h2>PROGRESS BARS
<a name="PROGRESS BARS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Some (not all)
long-running commands send progress notification messages as
they are running. Guestfish turns these messages into
progress bars.</p>

<p style="margin-left:11%; margin-top: 1em">When a command
that supports progress bars takes longer than two seconds to
run, and if progress bars are enabled, then you will see one
appearing below the command:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; copy&minus;size /large&minus;file /another&minus;file 2048M
 / 10% [#####&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;] 00:30</pre>


<p style="margin-left:11%; margin-top: 1em">The spinner on
the left hand side moves round once for every progress
notification received from the backend. This is a
(reasonably) golden assurance that the command is
&quot;doing something&quot; even if the progress bar is not
moving, because the command is able to send the progress
notifications. When the bar reaches 100% and the command
finishes, the spinner disappears.</p>

<p style="margin-left:11%; margin-top: 1em">Progress bars
are enabled by default when guestfish is used interactively.
You can enable them even for non-interactive modes using
<i>&minus;&minus;progress&minus;bars</i>, and you can
disable them completely using
<i>&minus;&minus;no&minus;progress&minus;bars</i>.</p>

<h2>PROMPT
<a name="PROMPT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can change
or add colours to the default prompt
(<tt>&quot;&gt;&lt;fs&gt;&quot;</tt>) by setting the
<tt>&quot;GUESTFISH_PS1&quot;</tt> environment variable. A
second string (<tt>&quot;GUESTFISH_OUTPUT&quot;</tt>) is
printed after the command has been entered and before the
output, allowing you to control the colour of the output. A
third string (<tt>&quot;GUESTFISH_INIT&quot;</tt>) is
printed before the welcome message, allowing you to control
the colour of that message. A fourth string
(<tt>&quot;GUESTFISH_RESTORE&quot;</tt>) is printed before
guestfish exits.</p>

<p style="margin-left:11%; margin-top: 1em">A simple prompt
can be set by setting <tt>&quot;GUESTFISH_PS1&quot;</tt> to
an alternate string:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ GUESTFISH_PS1='(type a command) '
 $ export GUESTFISH_PS1
 $ guestfish
 [...]
 (type a command) &#9602;</pre>


<p style="margin-left:11%; margin-top: 1em">You can also
use special escape sequences, as described in the table
below:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">\\</p></td>
<td width="3%"></td>
<td width="72%">


<p style="margin-top: 1em">A literal backslash
character.</p> </td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>\[</p></td>
<td width="3%"></td>
<td width="72%">
</td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>\]</p></td>
<td width="3%"></td>
<td width="72%">


<p>(These should only be used in
<tt>&quot;GUESTFISH_PS1&quot;</tt>.)</p> </td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Place
non-printing characters (eg. terminal control codes for
colours) between <tt>&quot;\[...\]&quot;</tt>. What this
does it to tell the <i>readline</i>(3) library that it
should treat this subsequence as zero-width, so that
command-line redisplay, editing etc works.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">\a</p></td>
<td width="3%"></td>
<td width="49%">


<p style="margin-top: 1em">A bell character.</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>\e</p></td>
<td width="3%"></td>
<td width="49%">


<p>An <small>ASCII ESC</small> (escape) character.</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>\n</p></td>
<td width="3%"></td>
<td width="49%">


<p>A newline.</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>\r</p></td>
<td width="3%"></td>
<td width="49%">


<p>A carriage return.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;">\NNN</p>

<p style="margin-left:17%;">The <small>ASCII</small>
character whose code is the octal value
<small>NNN.</small></p>

<p style="margin-left:11%;">\xNN</p>

<p style="margin-left:17%;">The <small>ASCII</small>
character whose code is the hex value <small>NN.</small></p>


<p style="margin-left:11%; margin-top: 1em"><small><b>EXAMPLES
OF PROMPTS</b></small> <br>
Note these these require a terminal that supports
<small>ANSI</small> escape codes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="71%">

<pre> GUESTFISH_PS1='\[\e[1;30m\]&gt;&lt;fs&gt;\[\e[0;30m\] '</td>
<td width="11%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">A bold black
version of the ordinary prompt.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="6%"></td>
<td width="71%">

<pre style="margin-top: 1em"> GUESTFISH_PS1='\[\e[1;32m\]&gt;&lt;fs&gt;\[\e[0;31m\] '</td>
<td width="11%">
</td></tr>
</table></pre>

<p style="margin-left:17%;">GUESTFISH_OUTPUT='\e[0m' <br>
GUESTFISH_RESTORE=&quot;$GUESTFISH_OUTPUT&quot; <br>
GUESTFISH_INIT='\e[1;34m'</p>

<p style="margin-left:17%; margin-top: 1em">Blue welcome
text, green prompt, red commands, black command output.</p>

<h2>WINDOWS 8
<a name="WINDOWS 8"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Windows 8
&quot;fast startup&quot; can prevent guestfish from mounting
<small>NTFS</small> partitions. See &quot; <small>WINDOWS
HIBERNATION AND WINDOWS 8 FAST STARTUP&quot;</small> in
<i>guestfs</i>(3).</p>

<h2>GUESTFISH COMMANDS
<a name="GUESTFISH COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The commands in
this section are guestfish convenience commands, in other
words, they are not part of the <i>guestfs</i>(3)
<small>API.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>help</b></p>

<pre style="margin-left:11%;"> help
 help cmd</pre>

<p style="margin-left:11%; margin-top: 1em">Without any
parameter, this provides general help.</p>

<p style="margin-left:11%; margin-top: 1em">With a
<tt>&quot;cmd&quot;</tt> parameter, this displays detailed
help for that command.</p>

<p style="margin-left:11%; margin-top: 1em"><b>exit <br>
quit</b> <br>
This exits guestfish. You can also use
<tt>&quot;^D&quot;</tt> key.</p>

<p style="margin-left:11%; margin-top: 1em"><b>alloc <br>
allocate</b></p>
<pre style="margin-left:11%;"> alloc filename size</pre>

<p style="margin-left:11%; margin-top: 1em">This creates an
empty (zeroed) file of the given size, and then adds so it
can be further examined.</p>

<p style="margin-left:11%; margin-top: 1em">For more
advanced image creation, see &quot;disk-create&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Size can be
specified using standard suffixes, eg.
<tt>&quot;1M&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">To create a
sparse file, use &quot;sparse&quot; instead. To create a
prepared disk image, see &quot; <small>PREPARED DISK
IMAGES&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-in</b></p>


<pre style="margin-left:11%;"> copy&minus;in local [local ...] /remotedir</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;copy&minus;in&quot;
copies local files or directories recursively into the disk
image, placing them in the directory called
<tt>&quot;/remotedir&quot;</tt> (which must exist). This
guestfish meta-command turns into a sequence of
&quot;tar-in&quot; and other commands as necessary.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple local
files and directories can be specified, but the last
parameter must always be a remote directory. Wildcards
cannot be used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-out</b></p>


<pre style="margin-left:11%;"> copy&minus;out remote [remote ...] localdir</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;copy&minus;out&quot;
copies remote files or directories recursively out of the
disk image, placing them on the host disk in a local
directory called <tt>&quot;localdir&quot;</tt> (which must
exist). This guestfish meta-command turns into a sequence of
&quot;download&quot;, &quot;tar-out&quot; and other commands
as necessary.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple remote
files and directories can be specified, but the last
parameter must always be a local directory. To download to
the current directory, use <tt>&quot;.&quot;</tt> as in:</p>

<pre style="margin-left:11%; margin-top: 1em"> copy&minus;out /home .</pre>


<p style="margin-left:11%; margin-top: 1em">Wildcards
cannot be used in the ordinary command, but you can use them
with the help of &quot;glob&quot; like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> glob copy&minus;out /home/* .</pre>



<p style="margin-left:11%; margin-top: 1em"><b>delete-event</b></p>


<pre style="margin-left:11%;"> delete&minus;event name</pre>


<p style="margin-left:11%; margin-top: 1em">Delete the
event handler which was previously registered as
<tt>&quot;name&quot;</tt>. If multiple event handlers were
registered with the same name, they are all deleted.</p>

<p style="margin-left:11%; margin-top: 1em">See also the
guestfish commands <tt>&quot;event&quot;</tt> and
<tt>&quot;list&minus;events&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>display</b></p>

<pre style="margin-left:11%;"> display filename</pre>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;display&quot;</tt> (a graphical display program)
to display an image file. It downloads the file, and runs
<tt>&quot;display&quot;</tt> on it.</p>

<p style="margin-left:11%; margin-top: 1em">To use an
alternative program, set the
<tt>&quot;GUESTFISH_DISPLAY_IMAGE&quot;</tt> environment
variable. For example to use the <small>GNOME</small>
display program:</p>

<pre style="margin-left:11%; margin-top: 1em"> export GUESTFISH_DISPLAY_IMAGE=eog</pre>


<p style="margin-left:11%; margin-top: 1em">See also
<i>display</i>(1).</p>


<p style="margin-left:11%; margin-top: 1em"><b>echo</b></p>

<pre style="margin-left:11%;"> echo [params ...]</pre>

<p style="margin-left:11%; margin-top: 1em">This echos the
parameters to the terminal.</p>

<p style="margin-left:11%; margin-top: 1em"><b>edit <br>
vi <br>
emacs</b></p>
<pre style="margin-left:11%;"> edit filename</pre>

<p style="margin-left:11%; margin-top: 1em">This is used to
edit a file. It downloads the file, edits it locally using
your editor, then uploads the result.</p>

<p style="margin-left:11%; margin-top: 1em">The editor is
<tt>$EDITOR</tt>. However if you use the alternate commands
<tt>&quot;vi&quot;</tt> or <tt>&quot;emacs&quot;</tt> you
will get those corresponding editors.</p>


<p style="margin-left:11%; margin-top: 1em"><b>event</b></p>


<pre style="margin-left:11%;"> event name eventset &quot;shell script ...&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Register a
shell script fragment which is executed when an event is
raised. See &quot;guestfs_set_event_callback&quot; in
<i>guestfs</i>(3) for a discussion of the event
<small>API</small> in libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;name&quot;</tt> parameter is a name that you give
to this event handler. It can be any string (even the empty
string) and is simply there so you can delete the handler
using the guestfish <tt>&quot;delete&minus;event&quot;</tt>
command.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;eventset&quot;</tt> parameter is a comma-separated
list of one or more events, for example
<tt>&quot;close&quot;</tt> or
<tt>&quot;close,trace&quot;</tt>. The special value
<tt>&quot;*&quot;</tt> means all events.</p>

<p style="margin-left:11%; margin-top: 1em">The third and
final parameter is the shell script fragment (or any
external command) that is executed when any of the events in
the eventset occurs. It is executed using <tt>&quot;$SHELL
&minus;c&quot;</tt>, or if <tt>$SHELL</tt> is not set then
<tt>&quot;/bin/sh &minus;c&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The shell
script fragment receives callback parameters as arguments
<tt>$1</tt>, <tt>$2</tt> etc. The actual event that was
called is available in the environment variable
<tt>$EVENT</tt>.</p>

<pre style="margin-left:11%; margin-top: 1em"> event &quot;&quot; close &quot;echo closed&quot;
 event messages appliance,library,trace &quot;echo $@&quot;
 event &quot;&quot; progress &quot;echo progress: $3/$4&quot;
 event &quot;&quot; * &quot;echo $EVENT $@&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">See also the
guestfish commands <tt>&quot;delete&minus;event&quot;</tt>
and <tt>&quot;list&minus;events&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>glob</b></p>

<pre style="margin-left:11%;"> glob command args...</pre>

<p style="margin-left:11%; margin-top: 1em">Expand
wildcards in any paths in the args list, and run
<tt>&quot;command&quot;</tt> repeatedly on each matching
path.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>WILDCARDS AND GLOBBING&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>hexedit</b></p>


<pre style="margin-left:11%;"> hexedit &lt;filename|device&gt;
 hexedit &lt;filename|device&gt; &lt;max&gt;
 hexedit &lt;filename|device&gt; &lt;start&gt; &lt;max&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">Use hexedit (a
hex editor) to edit all or part of a binary file or block
device.</p>

<p style="margin-left:11%; margin-top: 1em">This command
works by downloading potentially the whole file or device,
editing it locally, then uploading it. If the file or device
is large, you have to specify which part you wish to edit by
using <tt>&quot;max&quot;</tt> and/or <tt>&quot;start&quot;
&quot;max&quot;</tt> parameters. <tt>&quot;start&quot;</tt>
and <tt>&quot;max&quot;</tt> are specified in bytes, with
the usual modifiers allowed such as <tt>&quot;1M&quot;</tt>
(1 megabyte).</p>

<p style="margin-left:11%; margin-top: 1em">For example to
edit the first few sectors of a disk you might do:</p>

<pre style="margin-left:11%; margin-top: 1em"> hexedit /dev/sda 1M</pre>


<p style="margin-left:11%; margin-top: 1em">which would
allow you to edit anywhere within the first megabyte of the
disk.</p>

<p style="margin-left:11%; margin-top: 1em">To edit the
superblock of an ext2 filesystem on
<tt>&quot;/dev/sda1&quot;</tt>, do:</p>

<pre style="margin-left:11%; margin-top: 1em"> hexedit /dev/sda1 0x400 0x400</pre>


<p style="margin-left:11%; margin-top: 1em">(assuming the
superblock is in the standard location).</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires the external <i>hexedit</i>(1) program. You can
specify another program to use by setting the
<tt>&quot;HEXEDITOR&quot;</tt> environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;hexdump&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>lcd</b></p>
<pre style="margin-left:11%;"> lcd directory</pre>

<p style="margin-left:11%; margin-top: 1em">Change the
local directory, ie. the current directory of guestfish
itself.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
<tt>&quot;!cd&quot;</tt> won&rsquo;t do what you might
expect.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-events</b></p>

<pre style="margin-left:11%;"> list&minus;events</pre>

<p style="margin-left:11%; margin-top: 1em">List the event
handlers registered using the guestfish
<tt>&quot;event&quot;</tt> command.</p>

<p style="margin-left:11%; margin-top: 1em"><b>man <br>
manual</b></p>
<pre style="margin-left:11%;">  man</pre>

<p style="margin-left:11%; margin-top: 1em">Opens the
manual page for guestfish.</p>

<p style="margin-left:11%; margin-top: 1em"><b>more <br>
less</b></p>

<pre style="margin-left:11%;"> more filename
 less filename</pre>


<p style="margin-left:11%; margin-top: 1em">This is used to
view a file.</p>

<p style="margin-left:11%; margin-top: 1em">The default
viewer is <tt>$PAGER</tt>. However if you use the alternate
command <tt>&quot;less&quot;</tt> you will get the
<tt>&quot;less&quot;</tt> command specifically.</p>


<p style="margin-left:11%; margin-top: 1em"><b>reopen</b></p>

<pre style="margin-left:11%;">  reopen</pre>

<p style="margin-left:11%; margin-top: 1em">Close and
reopen the libguestfs handle. It is not necessary to use
this normally, because the handle is closed properly when
guestfish exits. However this is occasionally useful for
testing.</p>


<p style="margin-left:11%; margin-top: 1em"><b>setenv</b></p>

<pre style="margin-left:11%;">  setenv VAR value</pre>

<p style="margin-left:11%; margin-top: 1em">Set the
environment variable <tt>&quot;VAR&quot;</tt> to the string
<tt>&quot;value&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">To print the
value of an environment variable use a shell command such
as:</p>

<pre style="margin-left:11%; margin-top: 1em"> !echo $VAR</pre>



<p style="margin-left:11%; margin-top: 1em"><b>sparse</b></p>

<pre style="margin-left:11%;"> sparse filename size</pre>

<p style="margin-left:11%; margin-top: 1em">This creates an
empty sparse file of the given size, and then adds so it can
be further examined.</p>

<p style="margin-left:11%; margin-top: 1em">In all respects
it works the same as the &quot;alloc&quot; command, except
that the image file is allocated sparsely, which means that
disk blocks are not assigned to the file until they are
needed. Sparse disk files only use space when written to,
but they are slower and there is a danger you could run out
of real disk space during a write operation.</p>

<p style="margin-left:11%; margin-top: 1em">For more
advanced image creation, see &quot;disk-create&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Size can be
specified using standard suffixes, eg.
<tt>&quot;1M&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also the
guestfish &quot;scratch&quot; command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>supported</b></p>

<pre style="margin-left:11%;"> supported</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns a list of the optional groups known to the daemon,
and indicates which ones are supported by this build of the
libguestfs appliance.</p>

<p style="margin-left:11%; margin-top: 1em">See also &quot;
<small>AVAILABILITY&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>time</b></p>

<pre style="margin-left:11%;"> time command args...</pre>

<p style="margin-left:11%; margin-top: 1em">Run the command
as usual, but print the elapsed time afterwards. This can be
useful for benchmarking operations.</p>


<p style="margin-left:11%; margin-top: 1em"><b>unsetenv</b></p>

<pre style="margin-left:11%;">  unsetenv VAR</pre>

<p style="margin-left:11%; margin-top: 1em">Remove
<tt>&quot;VAR&quot;</tt> from the environment.</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>acl-delete-def-file</b></p>


<pre style="margin-left:11%;"> acl&minus;delete&minus;def&minus;file dir</pre>


<p style="margin-left:11%; margin-top: 1em">This function
deletes the default <small>POSIX</small> Access Control List
( <small>ACL</small> ) attached to directory
<tt>&quot;dir&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>acl-get-file</b></p>


<pre style="margin-left:11%;"> acl&minus;get&minus;file path acltype</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns the <small>POSIX</small> Access Control List (
<small>ACL</small> ) attached to <tt>&quot;path&quot;</tt>.
The <small>ACL</small> is returned in &quot;long text
form&quot; (see <i>acl</i>(5)).</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;acltype&quot;</tt> parameter may be: <br>
&quot;access&quot;</p>

<p style="margin-left:17%;">Return the ordinary (access)
<small>ACL</small> for any file, directory or other
filesystem object.</p>

<p style="margin-left:11%;">&quot;default&quot;</p>

<p style="margin-left:17%;">Return the default
<small>ACL.</small> Normally this only makes sense if
<tt>&quot;path&quot;</tt> is a directory.</p>


<p style="margin-left:11%; margin-top: 1em"><b>acl-set-file</b></p>


<pre style="margin-left:11%;"> acl&minus;set&minus;file path acltype acl</pre>


<p style="margin-left:11%; margin-top: 1em">This function
sets the <small>POSIX</small> Access Control List (
<small>ACL</small> ) attached to
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;acltype&quot;</tt> parameter may be: <br>
&quot;access&quot;</p>

<p style="margin-left:17%;">Set the ordinary (access)
<small>ACL</small> for any file, directory or other
filesystem object.</p>

<p style="margin-left:11%;">&quot;default&quot;</p>

<p style="margin-left:17%;">Set the default
<small>ACL.</small> Normally this only makes sense if
<tt>&quot;path&quot;</tt> is a directory.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;acl&quot;</tt> parameter is the new
<small>ACL</small> in either &quot;long text form&quot; or
&quot;short text form&quot; (see <i>acl</i>(5)). The new
<small>ACL</small> completely replaces any previous
<small>ACL</small> on the file. The <small>ACL</small> must
contain the full Unix permissions (eg.
<tt>&quot;u::rwx,g::rx,o::rx&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">If you are
specifying individual users or groups, then the mask field
is also required (eg. <tt>&quot;m::rwx&quot;</tt>), followed
by the <tt>&quot;u:</tt><i>ID</i><tt>:...&quot;</tt> and/or
<tt>&quot;g:</tt><i>ID</i><tt>:...&quot;</tt> field(s). A
full <small>ACL</small> string might therefore look like
this:</p>

<pre style="margin-left:11%; margin-top: 1em"> u::rwx,g::rwx,o::rwx,m::rwx,u:500:rwx,g:500:rwx
 \ Unix permissions / \mask/ \      ACL        /</pre>


<p style="margin-left:11%; margin-top: 1em">You should use
numeric UIDs and GIDs. To map usernames and groupnames to
the correct numeric <small>ID</small> in the context of the
guest, use the Augeas functions (see
&quot;aug-init&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>add-cdrom</b></p>


<pre style="margin-left:11%;"> add&minus;cdrom filename</pre>


<p style="margin-left:11%; margin-top: 1em">This function
adds a virtual CD-ROM disk image to the guest.</p>

<p style="margin-left:11%; margin-top: 1em">The image is
added as read-only drive, so this function is equivalent of
&quot;add-drive-ro&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;add-drive-ro&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>add-domain
<br>
domain</b></p>

<pre style="margin-left:11%;"> add&minus;domain dom [libvirturi:..] [readonly:true|false] [iface:..] [live:true|false] [allowuuid:true|false] [readonlydisk:..] [cachemode:..] [discard:..] [copyonread:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This function
adds the disk(s) attached to the named libvirt domain
<tt>&quot;dom&quot;</tt>. It works by connecting to libvirt,
requesting the domain and domain <small>XML</small> from
libvirt, parsing it for disks, and calling
&quot;add-drive-opts&quot; on each one.</p>

<p style="margin-left:11%; margin-top: 1em">The number of
disks added is returned. This operation is atomic: if an
error is returned, then no disks are added.</p>

<p style="margin-left:11%; margin-top: 1em">This function
does some minimal checks to make sure the libvirt domain is
not running (unless <tt>&quot;readonly&quot;</tt> is true).
In a future version we will try to acquire the libvirt lock
on each disk.</p>

<p style="margin-left:11%; margin-top: 1em">Disks must be
accessible locally. This often means that adding disks from
a remote libvirt connection (see
http://libvirt.org/remote.html) will fail unless those disks
are accessible via the same device path locally too.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;libvirturi&quot;</tt> parameter sets the libvirt
<small>URI</small> (see http://libvirt.org/uri.html). If
this is not set then we connect to the default libvirt
<small>URI</small> (or one set through an environment
variable, see the libvirt documentation for full
details).</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;live&quot;</tt> flag controls whether this call
will try to connect to a running virtual machine
<tt>&quot;guestfsd&quot;</tt> process if it sees a suitable
&lt;channel&gt; element in the libvirt <small>XML</small>
definition. The default (if the flag is omitted) is never to
try. See &quot; <small>ATTACHING TO RUNNING
DAEMONS&quot;</small> in <i>guestfs</i>(3) for more
information.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>&quot;allowuuid&quot;</tt> flag is true (default is
false) then a <small>UUID</small> <i>may</i> be passed
instead of the domain name. The <tt>&quot;dom&quot;</tt>
string is treated as a <small>UUID</small> first and looked
up, and if that lookup fails then we treat
<tt>&quot;dom&quot;</tt> as a name as usual.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;readonlydisk&quot;</tt> parameter controls what we
do for disks which are marked &lt;readonly/&gt; in the
libvirt <small>XML.</small> Possible values are: <br>
readonlydisk = &quot;error&quot;</p>

<p style="margin-left:17%;">If
<tt>&quot;readonly&quot;</tt> is false:</p>

<p style="margin-left:17%; margin-top: 1em">The whole call
is aborted with an error if any disk with the
&lt;readonly/&gt; flag is found.</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;readonly&quot;</tt> is true:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are added read-only.</p>

<p style="margin-left:11%;">readonlydisk =
&quot;read&quot;</p>

<p style="margin-left:17%;">If
<tt>&quot;readonly&quot;</tt> is false:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are added read-only. Other disks are
added read/write.</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;readonly&quot;</tt> is true:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are added read-only.</p>

<p style="margin-left:11%;">readonlydisk =
&quot;write&quot; (default)</p>

<p style="margin-left:17%;">If
<tt>&quot;readonly&quot;</tt> is false:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are added read/write.</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;readonly&quot;</tt> is true:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are added read-only.</p>

<p style="margin-left:11%;">readonlydisk =
&quot;ignore&quot;</p>

<p style="margin-left:17%;">If
<tt>&quot;readonly&quot;</tt> is true or false:</p>

<p style="margin-left:17%; margin-top: 1em">Disks with the
&lt;readonly/&gt; flag are skipped.</p>

<p style="margin-left:11%; margin-top: 1em">The other
optional parameters are passed directly through to
&quot;add-drive-opts&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>add-drive
<br>
add <br>
add-drive-opts</b></p>

<pre style="margin-left:11%;"> add&minus;drive filename [readonly:true|false] [format:..] [iface:..] [name:..] [label:..] [protocol:..] [server:..] [username:..] [secret:..] [cachemode:..] [discard:..] [copyonread:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This function
adds a disk image called <tt>&quot;filename&quot;</tt> to
the handle. <tt>&quot;filename&quot;</tt> may be a regular
host file or a host device.</p>

<p style="margin-left:11%; margin-top: 1em">When this
function is called before &quot;launch&quot; (the usual
case) then the first time you call this function, the disk
appears in the <small>API</small> as
<tt>&quot;/dev/sda&quot;</tt>, the second time as
<tt>&quot;/dev/sdb&quot;</tt>, and so on.</p>

<p style="margin-left:11%; margin-top: 1em">In libguestfs
&ge; 1.20 you can also call this function after launch (with
some restrictions). This is called &quot;hotplugging&quot;.
When hotplugging, you must specify a
<tt>&quot;label&quot;</tt> so that the new disk gets a
predictable name. For more information see &quot;
<small>HOTPLUGGING&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">You don&rsquo;t
necessarily need to be root when using libguestfs. However
you obviously do need sufficient permissions to access the
filename for whatever operations you want to perform (ie.
read access if you just want to read the image or write
access if you want to modify the image).</p>

<p style="margin-left:11%; margin-top: 1em">This call
checks that <tt>&quot;filename&quot;</tt> exists.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;filename&quot;</tt>
may be the special string <tt>&quot;/dev/null&quot;</tt>.
See &quot; <small>NULL DISKS&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are: <br>
&quot;readonly&quot;</p>

<p style="margin-left:17%;">If true then the image is
treated as read-only. Writes are still allowed, but they are
stored in a temporary snapshot overlay which is discarded at
the end. The disk that you add is not modified.</p>

<p style="margin-left:11%;">&quot;format&quot;</p>

<p style="margin-left:17%;">This forces the image format.
If you omit this (or use &quot;add-drive&quot; or
&quot;add-drive-ro&quot;) then the format is automatically
detected. Possible formats include <tt>&quot;raw&quot;</tt>
and <tt>&quot;qcow2&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">Automatic
detection of the format opens you up to a potential security
hole when dealing with untrusted raw-format images. See
<small>CVE&minus;2010&minus;3851</small> and RHBZ#642934.
Specifying the format closes this security hole.</p>

<p style="margin-left:11%;">&quot;iface&quot;</p>

<p style="margin-left:17%;">This rarely-used option lets
you emulate the behaviour of the deprecated
&quot;add-drive-with-if&quot; call (q.v.)</p>

<p style="margin-left:11%;">&quot;name&quot;</p>

<p style="margin-left:17%;">The name the drive had in the
original guest, e.g. <tt>&quot;/dev/sdb&quot;</tt>. This is
used as a hint to the guest inspection process if it is
available.</p>

<p style="margin-left:11%;">&quot;label&quot;</p>

<p style="margin-left:17%;">Give the disk a label. The
label should be a unique, short string using <i>only</i>
<small>ASCII</small> characters
<tt>&quot;[a&minus;zA&minus;Z]&quot;</tt>. As well as its
usual name in the <small>API</small> (such as
<tt>&quot;/dev/sda&quot;</tt>), the drive will also be named
<tt>&quot;/dev/disk/guestfs/</tt><i>label</i><tt>&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">See &quot;
<small>DISK LABELS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%;">&quot;protocol&quot;</p>

<p style="margin-left:17%;">The optional protocol argument
can be used to select an alternate source protocol.</p>

<p style="margin-left:17%; margin-top: 1em">See also:
&quot; <small>REMOTE STORAGE&quot;</small> in
<i>guestfs</i>(3). <br>
&quot;protocol = &quot;file&quot;&quot;</p>

<p style="margin-left:23%;"><tt>&quot;filename&quot;</tt>
is interpreted as a local file or device. This is the
default if the optional protocol parameter is omitted.</p>

<p style="margin-left:17%;">&quot;protocol =
&quot;nbd&quot;&quot;</p>

<p style="margin-left:23%;">Connect to the Network Block
Device server. The <tt>&quot;server&quot;</tt> parameter
must also be supplied &minus; see below.</p>

<p style="margin-left:23%; margin-top: 1em">See also:
&quot; <small>NETWORK BLOCK DEVICE&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%;">&quot;server&quot;</p>

<p style="margin-left:17%;">For protocols which require
access to a remote server, this is a list of server(s).</p>

<pre style="margin-left:17%; margin-top: 1em"> Protocol       Number of servers required
 &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;       &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
 file           List must be empty or param not used at all
 nbd            Exactly one</pre>


<p style="margin-left:17%; margin-top: 1em">Each list
element is a string specifying a server. The string must be
in one of the following formats:</p>

<pre style="margin-left:17%; margin-top: 1em"> hostname
 hostname:port
 tcp:hostname
 tcp:hostname:port
 unix:/path/to/socket</pre>


<p style="margin-left:17%; margin-top: 1em">If the port
number is omitted, then the standard port number for the
protocol is used (see
<tt>&quot;/etc/services&quot;</tt>).</p>

<p style="margin-left:11%;">&quot;cachemode&quot;</p>

<p style="margin-left:17%;">Choose whether or not
libguestfs will obey sync operations (safe but slow) or not
(unsafe but fast). The possible values for this string are:
<br>
&quot;cachemode = &quot;writeback&quot;&quot;</p>

<p style="margin-left:23%;">This is the default.</p>

<p style="margin-left:23%; margin-top: 1em">Write
operations in the <small>API</small> do not return until a
<i>write</i>(2) call has completed in the host [but note
this does not imply that anything gets written to disk].</p>

<p style="margin-left:23%; margin-top: 1em">Sync operations
in the <small>API,</small> including implicit syncs caused
by filesystem journalling, will not return until an
<i>fdatasync</i>(2) call has completed in the host,
indicating that data has been committed to disk.</p>

<p style="margin-left:17%;">&quot;cachemode =
&quot;unsafe&quot;&quot;</p>

<p style="margin-left:23%;">In this mode, there are no
guarantees. Libguestfs may cache anything and ignore sync
requests. This is suitable only for scratch or temporary
disks.</p>

<p style="margin-left:11%;">&quot;discard&quot;</p>

<p style="margin-left:17%;">Enable or disable discard
(a.k.a. trim or unmap) support on this drive. If enabled,
operations such as &quot;fstrim&quot; will be able to
discard / make thin / punch holes in the underlying host
file or device.</p>

<p style="margin-left:17%; margin-top: 1em">Possible
discard settings are: <br>
&quot;discard = &quot;disable&quot;&quot;</p>

<p style="margin-left:23%;">Disable discard support. This
is the default.</p>

<p style="margin-left:17%;">&quot;discard =
&quot;enable&quot;&quot;</p>

<p style="margin-left:23%;">Enable discard support. Fail if
discard is not possible.</p>

<p style="margin-left:17%;">&quot;discard =
&quot;besteffort&quot;&quot;</p>

<p style="margin-left:23%;">Enable discard support if
possible, but don&rsquo;t fail if it is not supported.</p>

<p style="margin-left:23%; margin-top: 1em">Since not all
backends and not all underlying systems support discard,
this is a good choice if you want to use discard if
possible, but don&rsquo;t mind if it doesn&rsquo;t work.</p>

<p style="margin-left:11%;">&quot;copyonread&quot;</p>

<p style="margin-left:17%;">The boolean parameter
<tt>&quot;copyonread&quot;</tt> enables copy-on-read
support. This only affects disk formats which have backing
files, and causes reads to be stored in the overlay layer,
speeding up multiple reads of the same area of disk.</p>

<p style="margin-left:17%; margin-top: 1em">The default is
false.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>add-drive-ro
<br>
add-ro</b></p>

<pre style="margin-left:11%;"> add&minus;drive&minus;ro filename</pre>


<p style="margin-left:11%; margin-top: 1em">This function
is the equivalent of calling &quot;add-drive-opts&quot; with
the optional parameter
<tt>&quot;GUESTFS_ADD_DRIVE_OPTS_READONLY&quot;</tt> set to
1, so the disk is added read-only, with the format being
detected automatically.</p>


<p style="margin-left:11%; margin-top: 1em"><b>add-drive-ro-with-if</b></p>


<pre style="margin-left:11%;"> add&minus;drive&minus;ro&minus;with&minus;if filename iface</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;add-drive-ro&quot; but it allows you to
specify the <small>QEMU</small> interface emulation to use
at run time.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;add-drive&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>add-drive-scratch
<br>
scratch</b></p>

<pre style="margin-left:11%;"> add&minus;drive&minus;scratch size [name:..] [label:..]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
adds a temporary scratch drive to the handle. The
<tt>&quot;size&quot;</tt> parameter is the virtual size (in
bytes). The scratch drive is blank initially (all reads
return zeroes until you start writing to it). The drive is
deleted when the handle is closed.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments <tt>&quot;name&quot;</tt> and
<tt>&quot;label&quot;</tt> are passed through to
&quot;add-drive&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>add-drive-with-if</b></p>


<pre style="margin-left:11%;"> add&minus;drive&minus;with&minus;if filename iface</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;add-drive&quot; but it allows you to specify
the <small>QEMU</small> interface emulation to use at run
time.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;add-drive&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-clear</b></p>


<pre style="margin-left:11%;"> aug&minus;clear augpath</pre>


<p style="margin-left:11%; margin-top: 1em">Set the value
associated with <tt>&quot;path&quot;</tt> to
<tt>&quot;NULL&quot;</tt>. This is the same as the
<i>augtool</i>(1) <tt>&quot;clear&quot;</tt> command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-close</b></p>

<pre style="margin-left:11%;"> aug&minus;close</pre>

<p style="margin-left:11%; margin-top: 1em">Close the
current Augeas handle and free up any resources used by it.
After calling this, you have to call &quot;aug-init&quot;
again before you can use any other Augeas functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-defnode</b></p>


<pre style="margin-left:11%;"> aug&minus;defnode name expr val</pre>


<p style="margin-left:11%; margin-top: 1em">Defines a
variable <tt>&quot;name&quot;</tt> whose value is the result
of evaluating <tt>&quot;expr&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;expr&quot;</tt> evaluates to an empty nodeset, a
node is created, equivalent to calling &quot;aug-set&quot;
<tt>&quot;expr&quot;</tt>, <tt>&quot;value&quot;</tt>.
<tt>&quot;name&quot;</tt> will be the nodeset containing
that single node.</p>

<p style="margin-left:11%; margin-top: 1em">On success this
returns a pair containing the number of nodes in the
nodeset, and a boolean flag if a node was created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-defvar</b></p>


<pre style="margin-left:11%;"> aug&minus;defvar name expr</pre>


<p style="margin-left:11%; margin-top: 1em">Defines an
Augeas variable <tt>&quot;name&quot;</tt> whose value is the
result of evaluating <tt>&quot;expr&quot;</tt>. If
<tt>&quot;expr&quot;</tt> is <small>NULL,</small> then
<tt>&quot;name&quot;</tt> is undefined.</p>

<p style="margin-left:11%; margin-top: 1em">On success this
returns the number of nodes in <tt>&quot;expr&quot;</tt>, or
<tt>0</tt> if <tt>&quot;expr&quot;</tt> evaluates to
something which is not a nodeset.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-get</b></p>

<pre style="margin-left:11%;"> aug&minus;get augpath</pre>

<p style="margin-left:11%; margin-top: 1em">Look up the
value associated with <tt>&quot;path&quot;</tt>. If
<tt>&quot;path&quot;</tt> matches exactly one node, the
<tt>&quot;value&quot;</tt> is returned.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-init</b></p>


<pre style="margin-left:11%;"> aug&minus;init root flags</pre>


<p style="margin-left:11%; margin-top: 1em">Create a new
Augeas handle for editing configuration files. If there was
any previous Augeas handle associated with this guestfs
session, then it is closed.</p>

<p style="margin-left:11%; margin-top: 1em">You must call
this before using any other &quot;aug&minus;*&quot;
commands.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;root&quot;</tt>
is the filesystem root. <tt>&quot;root&quot;</tt> must not
be <small>NULL,</small> use <tt>&quot;/&quot;</tt>
instead.</p>

<p style="margin-left:11%; margin-top: 1em">The flags are
the same as the flags defined in &lt;augeas.h&gt;, the
logical <i>or</i> of the following integers: <br>
&quot;AUG_SAVE_BACKUP&quot; = 1</p>

<p style="margin-left:17%;">Keep the original file with a
<tt>&quot;.augsave&quot;</tt> extension.</p>

<p style="margin-left:11%;">&quot;AUG_SAVE_NEWFILE&quot; =
2</p>

<p style="margin-left:17%;">Save changes into a file with
extension <tt>&quot;.augnew&quot;</tt>, and do not overwrite
original. Overrides
<tt>&quot;AUG_SAVE_BACKUP&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;AUG_TYPE_CHECK&quot; =
4</p>

<p style="margin-left:17%;">Typecheck lenses.</p>

<p style="margin-left:17%; margin-top: 1em">This option is
only useful when debugging Augeas lenses. Use of this option
may require additional memory for the libguestfs appliance.
You may need to set the
<tt>&quot;LIBGUESTFS_MEMSIZE&quot;</tt> environment variable
or call &quot;set-memsize&quot;.</p>

<p style="margin-left:11%;">&quot;AUG_NO_STDINC&quot; =
8</p>

<p style="margin-left:17%;">Do not use standard load path
for modules.</p>

<p style="margin-left:11%;">&quot;AUG_SAVE_NOOP&quot; =
16</p>

<p style="margin-left:17%;">Make save a no-op, just record
what would have been changed.</p>

<p style="margin-left:11%;">&quot;AUG_NO_LOAD&quot; =
32</p>

<p style="margin-left:17%;">Do not load the tree in
&quot;aug-init&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To close the
handle, you can call &quot;aug-close&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To find out
more about Augeas, see http://augeas.net/.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-insert</b></p>


<pre style="margin-left:11%;"> aug&minus;insert augpath label true|false</pre>


<p style="margin-left:11%; margin-top: 1em">Create a new
sibling <tt>&quot;label&quot;</tt> for
<tt>&quot;path&quot;</tt>, inserting it into the tree before
or after <tt>&quot;path&quot;</tt> (depending on the boolean
flag <tt>&quot;before&quot;</tt>).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;path&quot;</tt>
must match exactly one existing node in the tree, and
<tt>&quot;label&quot;</tt> must be a label, ie. not contain
<tt>&quot;/&quot;</tt>, <tt>&quot;*&quot;</tt> or end with a
bracketed index <tt>&quot;[N]&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-label</b></p>


<pre style="margin-left:11%;"> aug&minus;label augpath</pre>


<p style="margin-left:11%; margin-top: 1em">The label (name
of the last element) of the Augeas path expression
<tt>&quot;augpath&quot;</tt> is returned.
<tt>&quot;augpath&quot;</tt> must match exactly one node,
else this function returns an error.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-load</b></p>

<pre style="margin-left:11%;"> aug&minus;load</pre>

<p style="margin-left:11%; margin-top: 1em">Load files into
the tree.</p>

<p style="margin-left:11%; margin-top: 1em">See
<tt>&quot;aug_load&quot;</tt> in the Augeas documentation
for the full gory details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-ls</b></p>

<pre style="margin-left:11%;"> aug&minus;ls augpath</pre>

<p style="margin-left:11%; margin-top: 1em">This is just a
shortcut for listing &quot;aug-match&quot;
<tt>&quot;path/*&quot;</tt> and sorting the resulting nodes
into alphabetical order.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-match</b></p>


<pre style="margin-left:11%;"> aug&minus;match augpath</pre>


<p style="margin-left:11%; margin-top: 1em">Returns a list
of paths which match the path expression
<tt>&quot;path&quot;</tt>. The returned paths are
sufficiently qualified so that they match exactly one node
in the current tree.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-mv</b></p>

<pre style="margin-left:11%;"> aug&minus;mv src dest</pre>

<p style="margin-left:11%; margin-top: 1em">Move the node
<tt>&quot;src&quot;</tt> to <tt>&quot;dest&quot;</tt>.
<tt>&quot;src&quot;</tt> must match exactly one node.
<tt>&quot;dest&quot;</tt> is overwritten if it exists.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-rm</b></p>

<pre style="margin-left:11%;"> aug&minus;rm augpath</pre>

<p style="margin-left:11%; margin-top: 1em">Remove
<tt>&quot;path&quot;</tt> and all of its children.</p>

<p style="margin-left:11%; margin-top: 1em">On success this
returns the number of entries which were removed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-save</b></p>

<pre style="margin-left:11%;"> aug&minus;save</pre>

<p style="margin-left:11%; margin-top: 1em">This writes all
pending changes to disk.</p>

<p style="margin-left:11%; margin-top: 1em">The flags which
were passed to &quot;aug-init&quot; affect exactly how files
are saved.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-set</b></p>


<pre style="margin-left:11%;"> aug&minus;set augpath val</pre>


<p style="margin-left:11%; margin-top: 1em">Set the value
associated with <tt>&quot;path&quot;</tt> to
<tt>&quot;val&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">In the Augeas
<small>API,</small> it is possible to clear a node by
setting the value to <small>NULL.</small> Due to an
oversight in the libguestfs <small>API</small> you cannot do
that with this call. Instead you must use the
&quot;aug-clear&quot; call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>aug-setm</b></p>


<pre style="margin-left:11%;"> aug&minus;setm base sub val</pre>


<p style="margin-left:11%; margin-top: 1em">Change multiple
Augeas nodes in a single operation.
<tt>&quot;base&quot;</tt> is an expression matching multiple
nodes. <tt>&quot;sub&quot;</tt> is a path expression
relative to <tt>&quot;base&quot;</tt>. All nodes matching
<tt>&quot;base&quot;</tt> are found, and then for each node,
<tt>&quot;sub&quot;</tt> is changed to
<tt>&quot;val&quot;</tt>. <tt>&quot;sub&quot;</tt> may also
be <tt>&quot;NULL&quot;</tt> in which case the
<tt>&quot;base&quot;</tt> nodes are modified.</p>

<p style="margin-left:11%; margin-top: 1em">This returns
the number of nodes modified.</p>


<p style="margin-left:11%; margin-top: 1em"><b>available</b></p>

<pre style="margin-left:11%;"> available 'groups ...'</pre>

<p style="margin-left:11%; margin-top: 1em">This command is
used to check the availability of some groups of
functionality in the appliance, which not all builds of the
libguestfs appliance will be able to provide.</p>

<p style="margin-left:11%; margin-top: 1em">The libguestfs
groups, and the functions that those groups correspond to,
are listed in &quot; <small>AVAILABILITY&quot;</small> in
<i>guestfs</i>(3). You can also fetch this list at runtime
by calling &quot;available-all-groups&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The argument
<tt>&quot;groups&quot;</tt> is a list of group names, eg:
<tt>&quot;[&quot;inotify&quot;,
&quot;augeas&quot;]&quot;</tt> would check for the
availability of the Linux inotify functions and Augeas
(configuration file editing) functions.</p>

<p style="margin-left:11%; margin-top: 1em">The command
returns no error if <i>all</i> requested groups are
available.</p>

<p style="margin-left:11%; margin-top: 1em">It fails with
an error if one or more of the requested groups is
unavailable in the appliance.</p>

<p style="margin-left:11%; margin-top: 1em">If an unknown
group name is included in the list of groups then an error
is always returned.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Notes:</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>&quot;feature-available&quot; is the same as this call,
but with a slightly simpler to use <small>API:</small> that
call returns a boolean true/false instead of throwing an
error.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>You must call &quot;launch&quot; before calling this
function.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The reason is
because we don&rsquo;t know what groups are supported by the
appliance/daemon until it is running and can be queried.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">If a group of functions is
available, this does not necessarily mean that they will
work. You still have to check for errors when calling
individual <small>API</small> functions even if they are
available.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>It is usually the job of distro packagers to build
complete functionality into the libguestfs appliance.
Upstream libguestfs, if built from source with all
requirements satisfied, will support everything.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>This call was added in version <tt>1.0.80</tt>. In
previous versions of libguestfs all you could do would be to
speculatively execute a command to find out if the daemon
implemented it. See also &quot;version&quot;.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;filesystem-available&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>available-all-groups</b></p>


<pre style="margin-left:11%;"> available&minus;all&minus;groups</pre>


<p style="margin-left:11%; margin-top: 1em">This command
returns a list of all optional groups that this daemon knows
about. Note this returns both supported and unsupported
groups. To find out which ones the daemon can actually
support you have to call &quot;available&quot; /
&quot;feature-available&quot; on each member of the returned
list.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;available&quot;, &quot;feature-available&quot; and
&quot; <small>AVAILABILITY&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>base64&minus;in</b></p>


<pre style="margin-left:11%;"> base64&minus;in (base64file|&minus;) filename</pre>


<p style="margin-left:11%; margin-top: 1em">This command
uploads base64&minus;encoded data from
<tt>&quot;base64file&quot;</tt> to
<tt>&quot;filename&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>base64&minus;out</b></p>


<pre style="margin-left:11%;"> base64&minus;out filename (base64file|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This command
downloads the contents of <tt>&quot;filename&quot;</tt>,
writing it out to local file <tt>&quot;base64file&quot;</tt>
encoded as base64.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blkdiscard</b></p>

<pre style="margin-left:11%;"> blkdiscard device</pre>

<p style="margin-left:11%; margin-top: 1em">This discards
all blocks on the block device <tt>&quot;device&quot;</tt>,
giving the free space back to the host.</p>

<p style="margin-left:11%; margin-top: 1em">This operation
requires support in libguestfs, the host filesystem, qemu
and the host kernel. If this support isn&rsquo;t present it
may give an error or even appear to run but do nothing. You
must also set the <tt>&quot;discard&quot;</tt> attribute on
the underlying drive (see &quot;add-drive-opts&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>blkdiscardzeroes</b></p>


<pre style="margin-left:11%;"> blkdiscardzeroes device</pre>


<p style="margin-left:11%; margin-top: 1em">This call
returns true if blocks on <tt>&quot;device&quot;</tt> that
have been discarded by a call to &quot;blkdiscard&quot; are
returned as blocks of zero bytes when read the next
time.</p>

<p style="margin-left:11%; margin-top: 1em">If it returns
false, then it may be that discarded blocks are read as
stale or random data.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blkid</b></p>

<pre style="margin-left:11%;"> blkid device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns block device attributes for
<tt>&quot;device&quot;</tt>. The following fields are
usually present in the returned hash. Other fields may also
be present. <br>
&quot;UUID&quot;</p>

<p style="margin-left:17%;">The uuid of this device.</p>

<p style="margin-left:11%;">&quot;LABEL&quot;</p>

<p style="margin-left:17%;">The label of this device.</p>

<p style="margin-left:11%;">&quot;VERSION&quot;</p>

<p style="margin-left:17%;">The version of blkid
command.</p>

<p style="margin-left:11%;">&quot;TYPE&quot;</p>

<p style="margin-left:17%;">The filesystem type or
<small>RAID</small> of this device.</p>

<p style="margin-left:11%;">&quot;USAGE&quot;</p>

<p style="margin-left:17%;">The usage of this device, for
example <tt>&quot;filesystem&quot;</tt> or
<tt>&quot;raid&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-flushbufs</b></p>


<pre style="margin-left:11%;"> blockdev&minus;flushbufs device</pre>


<p style="margin-left:11%; margin-top: 1em">This tells the
kernel to flush internal buffers associated with
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-getbsz</b></p>


<pre style="margin-left:11%;"> blockdev&minus;getbsz device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the block size of a device.</p>

<p style="margin-left:11%; margin-top: 1em">Note: this is
different from both <i>size in blocks</i> and <i>filesystem
block size</i>. Also this setting is not really used by
anything. You should probably not use it for anything.
Filesystems have their own idea about what block size to
choose.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-getro</b></p>


<pre style="margin-left:11%;"> blockdev&minus;getro device</pre>


<p style="margin-left:11%; margin-top: 1em">Returns a
boolean indicating if the block device is read-only (true if
read-only, false if not).</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev&minus;getsize64</b></p>


<pre style="margin-left:11%;"> blockdev&minus;getsize64 device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the size of the device in bytes.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;blockdev-getsz&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-getss</b></p>


<pre style="margin-left:11%;"> blockdev&minus;getss device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the size of sectors on a block device. Usually 512, but can
be larger for modern devices.</p>

<p style="margin-left:11%; margin-top: 1em">(Note, this is
not the size in sectors, use &quot;blockdev-getsz&quot; for
that).</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-getsz</b></p>


<pre style="margin-left:11%;"> blockdev&minus;getsz device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the size of the device in units of 512&minus;byte sectors
(even if the sectorsize isn&rsquo;t 512 bytes ...
weird).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;blockdev-getss&quot; for the real sector size of the
device, and &quot;blockdev&minus;getsize64&quot; for the
more useful <i>size in bytes</i>.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-rereadpt</b></p>


<pre style="margin-left:11%;"> blockdev&minus;rereadpt device</pre>


<p style="margin-left:11%; margin-top: 1em">Reread the
partition table on <tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-setbsz</b></p>


<pre style="margin-left:11%;"> blockdev&minus;setbsz device blocksize</pre>


<p style="margin-left:11%; margin-top: 1em">This call does
nothing and has never done anything because of a bug in
blockdev. <b>Do not use it.</b></p>

<p style="margin-left:11%; margin-top: 1em">If you need to
set the filesystem block size, use the
<tt>&quot;blocksize&quot;</tt> option of
&quot;mkfs&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mkfs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-setro</b></p>


<pre style="margin-left:11%;"> blockdev&minus;setro device</pre>


<p style="margin-left:11%; margin-top: 1em">Sets the block
device named <tt>&quot;device&quot;</tt> to read-only.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>blockdev-setrw</b></p>


<pre style="margin-left:11%;"> blockdev&minus;setrw device</pre>


<p style="margin-left:11%; margin-top: 1em">Sets the block
device named <tt>&quot;device&quot;</tt> to read-write.</p>

<p style="margin-left:11%; margin-top: 1em">This uses the
<i>blockdev</i>(8) command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-device-add</b></p>


<pre style="margin-left:11%;"> btrfs&minus;device&minus;add 'devices ...' fs</pre>


<p style="margin-left:11%; margin-top: 1em">Add the list of
device(s) in <tt>&quot;devices&quot;</tt> to the btrfs
filesystem mounted at <tt>&quot;fs&quot;</tt>. If
<tt>&quot;devices&quot;</tt> is an empty list, this does
nothing.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-device-delete</b></p>


<pre style="margin-left:11%;"> btrfs&minus;device&minus;delete 'devices ...' fs</pre>


<p style="margin-left:11%; margin-top: 1em">Remove the
<tt>&quot;devices&quot;</tt> from the btrfs filesystem
mounted at <tt>&quot;fs&quot;</tt>. If
<tt>&quot;devices&quot;</tt> is an empty list, this does
nothing.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-filesystem-balance</b></p>


<pre style="margin-left:11%;"> btrfs&minus;filesystem&minus;balance fs</pre>


<p style="margin-left:11%; margin-top: 1em">Balance the
chunks in the btrfs filesystem mounted at
<tt>&quot;fs&quot;</tt> across the underlying devices.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-filesystem-resize</b></p>


<pre style="margin-left:11%;"> btrfs&minus;filesystem&minus;resize mountpoint [size:N]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
resizes a btrfs filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
unlike other resize calls, the filesystem has to be mounted
and the parameter is the mountpoint not the device (this is
a requirement of btrfs itself).</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are: <br>
&quot;size&quot;</p>

<p style="margin-left:17%;">The new size (in bytes) of the
filesystem. If omitted, the filesystem is resized to the
maximum size.</p>

<p style="margin-left:11%; margin-top: 1em">See also
<i>btrfs</i>(8).</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-filesystem-sync</b></p>


<pre style="margin-left:11%;"> btrfs&minus;filesystem&minus;sync fs</pre>


<p style="margin-left:11%; margin-top: 1em">Force sync on
the btrfs filesystem mounted at <tt>&quot;fs&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-fsck</b></p>


<pre style="margin-left:11%;"> btrfs&minus;fsck device [superblock:N] [repair:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">Used to check a
btrfs filesystem, <tt>&quot;device&quot;</tt> is the device
file where the filesystem is stored.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-set-seeding</b></p>


<pre style="margin-left:11%;"> btrfs&minus;set&minus;seeding device true|false</pre>


<p style="margin-left:11%; margin-top: 1em">Enable or
disable the seeding feature of a device that contains a
btrfs filesystem.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-subvolume-create</b></p>


<pre style="margin-left:11%;"> btrfs&minus;subvolume&minus;create dest</pre>


<p style="margin-left:11%; margin-top: 1em">Create a btrfs
subvolume. The <tt>&quot;dest&quot;</tt> argument is the
destination directory and the name of the snapshot, in the
form <tt>&quot;/path/to/dest/name&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-subvolume-delete</b></p>


<pre style="margin-left:11%;"> btrfs&minus;subvolume&minus;delete subvolume</pre>


<p style="margin-left:11%; margin-top: 1em">Delete the
named btrfs subvolume.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-subvolume-list</b></p>


<pre style="margin-left:11%;"> btrfs&minus;subvolume&minus;list fs</pre>


<p style="margin-left:11%; margin-top: 1em">List the btrfs
snapshots and subvolumes of the btrfs filesystem which is
mounted at <tt>&quot;fs&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-subvolume-set-default</b></p>


<pre style="margin-left:11%;"> btrfs&minus;subvolume&minus;set&minus;default id fs</pre>


<p style="margin-left:11%; margin-top: 1em">Set the
subvolume of the btrfs filesystem <tt>&quot;fs&quot;</tt>
which will be mounted by default. See
&quot;btrfs-subvolume-list&quot; to get a list of
subvolumes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs-subvolume-snapshot</b></p>


<pre style="margin-left:11%;"> btrfs&minus;subvolume&minus;snapshot source dest</pre>


<p style="margin-left:11%; margin-top: 1em">Create a
writable snapshot of the btrfs subvolume
<tt>&quot;source&quot;</tt>. The <tt>&quot;dest&quot;</tt>
argument is the destination directory and the name of the
snapshot, in the form
<tt>&quot;/path/to/dest/name&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>canonical-device-name</b></p>


<pre style="margin-left:11%;"> canonical&minus;device&minus;name device</pre>


<p style="margin-left:11%; margin-top: 1em">This utility
function is useful when displaying device names to the user.
It takes a number of irregular device names and returns them
in a consistent format: <br>
&quot;/dev/hdX&quot; <br>
&quot;/dev/vdX&quot;</p>

<p style="margin-left:17%;">These are returned as
<tt>&quot;/dev/sdX&quot;</tt>. Note this works for device
names and partition names. This is approximately the reverse
of the algorithm described in &quot; <small>BLOCK DEVICE
NAMING&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%;">&quot;/dev/mapper/VG&minus;LV&quot;
<br>
&quot;/dev/dm&minus;N&quot;</p>

<p style="margin-left:17%;">Converted to
<tt>&quot;/dev/VG/LV&quot;</tt> form using
&quot;lvm-canonical-lvm-name&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Other strings
are returned unmodified.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap-get-file</b></p>


<pre style="margin-left:11%;"> cap&minus;get&minus;file path</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns the Linux capabilities attached to
<tt>&quot;path&quot;</tt>. The capabilities set is returned
in text form (see <i>cap_to_text</i>(3)).</p>

<p style="margin-left:11%; margin-top: 1em">If no
capabilities are attached to a file, an empty string is
returned.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cap-set-file</b></p>


<pre style="margin-left:11%;"> cap&minus;set&minus;file path cap</pre>


<p style="margin-left:11%; margin-top: 1em">This function
sets the Linux capabilities attached to
<tt>&quot;path&quot;</tt>. The capabilities set
<tt>&quot;cap&quot;</tt> should be passed in text form (see
<i>cap_from_text</i>(3)).</p>


<p style="margin-left:11%; margin-top: 1em"><b>case-sensitive-path</b></p>


<pre style="margin-left:11%;"> case&minus;sensitive&minus;path path</pre>


<p style="margin-left:11%; margin-top: 1em">This can be
used to resolve case insensitive paths on a filesystem which
is case sensitive. The use case is to resolve paths which
you have read from Windows configuration files or the
Windows Registry, to the true path.</p>

<p style="margin-left:11%; margin-top: 1em">The command
handles a peculiarity of the Linux ntfs&minus;3g filesystem
driver (and probably others), which is that although the
underlying filesystem is case-insensitive, the driver
exports the filesystem to Linux as case-sensitive.</p>

<p style="margin-left:11%; margin-top: 1em">One consequence
of this is that special directories such as
<tt>&quot;c:\windows&quot;</tt> may appear as
<tt>&quot;/WINDOWS&quot;</tt> or
<tt>&quot;/windows&quot;</tt> (or other things) depending on
the precise details of how they were created. In Windows
itself this would not be a problem.</p>

<p style="margin-left:11%; margin-top: 1em">Bug or feature?
You decide:
http://www.tuxera.com/community/ntfs&minus;3g&minus;faq/#posixfilenames1</p>


<p style="margin-left:11%; margin-top: 1em">&quot;case-sensitive-path&quot;
attempts to resolve the true case of each element in the
path. It will return a resolved path if either the full path
or its parent directory exists. If the parent directory
exists but the full path does not, the case of the parent
directory will be correctly resolved, and the remainder
appended unmodified. For example, if the file
<tt>&quot;/Windows/System32/netkvm.sys&quot;</tt> exists:
<br>
&quot;case-sensitive-path&quot;
(&quot;/windows/system32/netkvm.sys&quot;)</p>


<p style="margin-left:17%;">&quot;Windows/System32/netkvm.sys&quot;</p>


<p style="margin-left:11%;">&quot;case-sensitive-path&quot;
(&quot;/windows/system32/NoSuchFile&quot;)</p>


<p style="margin-left:17%;">&quot;Windows/System32/NoSuchFile&quot;</p>


<p style="margin-left:11%;">&quot;case-sensitive-path&quot;
(&quot;/windows/system33/netkvm.sys&quot;)</p>


<p style="margin-left:17%;"><i><small>ERROR</small></i></p>

<p style="margin-left:11%; margin-top: 1em"><i>Note</i>:
Because of the above behaviour,
&quot;case-sensitive-path&quot; cannot be used to check for
the existence of a file.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note</i>:
This function does not handle drive names, backslashes
etc.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;realpath&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>cat</b></p>
<pre style="margin-left:11%;"> cat path</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
contents of the file named <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Because, in C,
this function returns a <tt>&quot;char *&quot;</tt>, there
is no way to differentiate between a <tt>&quot;\0&quot;</tt>
character in a file and end of string. To handle binary
files, use the &quot;read-file&quot; or &quot;download&quot;
functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>checksum</b></p>

<pre style="margin-left:11%;"> checksum csumtype path</pre>

<p style="margin-left:11%; margin-top: 1em">This call
computes the <small>MD5,</small> SHAx or <small>CRC</small>
checksum of the file named <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The type of
checksum to compute is given by the
<tt>&quot;csumtype&quot;</tt> parameter which must have one
of the following values: <br>
&quot;crc&quot;</p>

<p style="margin-left:17%;">Compute the cyclic redundancy
check ( <small>CRC</small> ) specified by
<small>POSIX</small> for the <tt>&quot;cksum&quot;</tt>
command.</p>

<p style="margin-left:11%;">&quot;md5&quot;</p>

<p style="margin-left:17%;">Compute the <small>MD5</small>
hash (using the <tt>&quot;md5sum&quot;</tt> program).</p>

<p style="margin-left:11%;">&quot;sha1&quot;</p>

<p style="margin-left:17%;">Compute the <small>SHA1</small>
hash (using the <tt>&quot;sha1sum&quot;</tt> program).</p>

<p style="margin-left:11%;">&quot;sha224&quot;</p>

<p style="margin-left:17%;">Compute the
<small>SHA224</small> hash (using the
<tt>&quot;sha224sum&quot;</tt> program).</p>

<p style="margin-left:11%;">&quot;sha256&quot;</p>

<p style="margin-left:17%;">Compute the
<small>SHA256</small> hash (using the
<tt>&quot;sha256sum&quot;</tt> program).</p>

<p style="margin-left:11%;">&quot;sha384&quot;</p>

<p style="margin-left:17%;">Compute the
<small>SHA384</small> hash (using the
<tt>&quot;sha384sum&quot;</tt> program).</p>

<p style="margin-left:11%;">&quot;sha512&quot;</p>

<p style="margin-left:17%;">Compute the
<small>SHA512</small> hash (using the
<tt>&quot;sha512sum&quot;</tt> program).</p>

<p style="margin-left:11%; margin-top: 1em">The checksum is
returned as a printable string.</p>

<p style="margin-left:11%; margin-top: 1em">To get the
checksum for a device, use &quot;checksum-device&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To get the
checksums for many files, use &quot;checksums-out&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>checksum-device</b></p>


<pre style="margin-left:11%;"> checksum&minus;device csumtype device</pre>


<p style="margin-left:11%; margin-top: 1em">This call
computes the <small>MD5,</small> SHAx or <small>CRC</small>
checksum of the contents of the device named
<tt>&quot;device&quot;</tt>. For the types of checksums
supported see the &quot;checksum&quot; command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>checksums-out</b></p>


<pre style="margin-left:11%;"> checksums&minus;out csumtype directory (sumsfile|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This command
computes the checksums of all regular files in
<tt>&quot;directory&quot;</tt> and then emits a list of
those checksums to the local output file
<tt>&quot;sumsfile&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This can be
used for verifying the integrity of a virtual machine.
However to be properly secure you should pay attention to
the output of the checksum command (it uses the ones from
<small>GNU</small> coreutils). In particular when the
filename is not printable, coreutils uses a special
backslash syntax. For more information, see the
<small>GNU</small> coreutils info file.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>chmod</b></p>

<pre style="margin-left:11%;"> chmod mode path</pre>

<p style="margin-left:11%; margin-top: 1em">Change the mode
(permissions) of <tt>&quot;path&quot;</tt> to
<tt>&quot;mode&quot;</tt>. Only numeric modes are
supported.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note</i>:
When using this command from guestfish,
<tt>&quot;mode&quot;</tt> by default would be decimal,
unless you prefix it with <tt>0</tt> to get octal, ie. use
<tt>0700</tt> not <tt>700</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The mode
actually set is affected by the umask.</p>


<p style="margin-left:11%; margin-top: 1em"><b>chown</b></p>

<pre style="margin-left:11%;"> chown owner group path</pre>

<p style="margin-left:11%; margin-top: 1em">Change the file
owner to <tt>&quot;owner&quot;</tt> and group to
<tt>&quot;group&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Only numeric
uid and gid are supported. If you want to use names, you
will need to locate and parse the password file yourself
(Augeas support makes this relatively easy).</p>


<p style="margin-left:11%; margin-top: 1em"><b>clear-backend-setting</b></p>


<pre style="margin-left:11%;"> clear&minus;backend&minus;setting name</pre>


<p style="margin-left:11%; margin-top: 1em">If there is a
backend setting string matching <tt>&quot;name&quot;</tt> or
beginning with <tt>&quot;name=&quot;</tt>, then that string
is removed from the backend settings.</p>

<p style="margin-left:11%; margin-top: 1em">This call
returns the number of strings which were removed (which may
be 0, 1 or greater than 1).</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>command</b></p>


<pre style="margin-left:11%;"> command 'arguments ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This call runs
a command from the guest filesystem. The filesystem must be
mounted, and must contain a compatible operating system (ie.
something Linux, with the same or compatible processor
architecture).</p>

<p style="margin-left:11%; margin-top: 1em">The single
parameter is an argv-style list of arguments. The first
element is the name of the program to run. Subsequent
elements are parameters. The list must be non-empty (ie.
must contain a program name). Note that the command runs
directly, and is <i>not</i> invoked via the shell (see
&quot;sh&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">The return
value is anything printed to <i>stdout</i> by the
command.</p>

<p style="margin-left:11%; margin-top: 1em">If the command
returns a non-zero exit status, then this function returns
an error message. The error message string is the content of
<i>stderr</i> from the command.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>$PATH</tt> environment variable will contain at least
<tt>&quot;/usr/bin&quot;</tt> and <tt>&quot;/bin&quot;</tt>.
If you require a program from another location, you should
provide the full path in the first parameter.</p>

<p style="margin-left:11%; margin-top: 1em">Shared
libraries and data files required by the program must be
available on filesystems which are mounted in the correct
places. It is the caller&rsquo;s responsibility to ensure
all filesystems that are needed are mounted at the right
locations.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>command-lines</b></p>


<pre style="margin-left:11%;"> command&minus;lines 'arguments ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;command&quot;, but splits the result into a
list of lines.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;sh-lines&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>compress-device-out</b></p>


<pre style="margin-left:11%;"> compress&minus;device&minus;out ctype device (zdevice|&minus;) [level:N]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
compresses <tt>&quot;device&quot;</tt> and writes it out to
the local file <tt>&quot;zdevice&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;ctype&quot;</tt> and optional
<tt>&quot;level&quot;</tt> parameters have the same meaning
as in &quot;compress-out&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>compress-out</b></p>


<pre style="margin-left:11%;"> compress&minus;out ctype file (zfile|&minus;) [level:N]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
compresses <tt>&quot;file&quot;</tt> and writes it out to
the local file <tt>&quot;zfile&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The compression
program used is controlled by the <tt>&quot;ctype&quot;</tt>
parameter. Currently this includes:
<tt>&quot;compress&quot;</tt>, <tt>&quot;gzip&quot;</tt>,
<tt>&quot;bzip2&quot;</tt>, <tt>&quot;xz&quot;</tt> or
<tt>&quot;lzop&quot;</tt>. Some compression types may not be
supported by particular builds of libguestfs, in which case
you will get an error containing the substring &quot;not
supported&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;level&quot;</tt> parameter controls compression
level. The meaning and default for this parameter depends on
the compression program being used.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>config</b></p>

<pre style="margin-left:11%;"> config hvparam hvvalue</pre>

<p style="margin-left:11%; margin-top: 1em">This can be
used to add arbitrary hypervisor parameters of the form
<i>&minus;param value</i>. Actually it&rsquo;s not quite
arbitrary &minus; we prevent you from setting some
parameters which would interfere with parameters that we
use.</p>

<p style="margin-left:11%; margin-top: 1em">The first
character of <tt>&quot;hvparam&quot;</tt> string must be a
<tt>&quot;&minus;&quot;</tt> (dash).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;hvvalue&quot;</tt>
can be <small>NULL.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-attributes</b></p>


<pre style="margin-left:11%;"> copy&minus;attributes src dest [all:true|false] [mode:true|false] [xattributes:true|false] [ownership:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">Copy the
attributes of a path (which can be a file or a directory) to
another path.</p>

<p style="margin-left:11%; margin-top: 1em">By default
<tt>&quot;no&quot;</tt> attribute is copied, so make sure to
specify any (or <tt>&quot;all&quot;</tt> to copy
everything).</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments specify which attributes can be copied: <br>
&quot;mode&quot;</p>

<p style="margin-left:17%;">Copy part of the file mode from
<tt>&quot;source&quot;</tt> to
<tt>&quot;destination&quot;</tt>. Only the
<small>UNIX</small> permissions and the sticky/setuid/setgid
bits can be copied.</p>

<p style="margin-left:11%;">&quot;xattributes&quot;</p>

<p style="margin-left:17%;">Copy the Linux extended
attributes (xattrs) from <tt>&quot;source&quot;</tt> to
<tt>&quot;destination&quot;</tt>. This flag does nothing if
the <i>linuxxattrs</i> feature is not available (see
&quot;feature-available&quot;).</p>

<p style="margin-left:11%;">&quot;ownership&quot;</p>

<p style="margin-left:17%;">Copy the owner uid and the
group gid of <tt>&quot;source&quot;</tt> to
<tt>&quot;destination&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;all&quot;</p>

<p style="margin-left:17%;">Copy <b>all</b> the attributes
from <tt>&quot;source&quot;</tt> to
<tt>&quot;destination&quot;</tt>. Enabling it enables all
the other flags, if they are not specified already.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-device-to-device</b></p>


<pre style="margin-left:11%;"> copy&minus;device&minus;to&minus;device src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">The four calls
&quot;copy-device-to-device&quot;,
&quot;copy-device-to-file&quot;,
&quot;copy-file-to-device&quot;, and
&quot;copy-file-to-file&quot; let you copy from a source
(device|file) to a destination (device|file).</p>

<p style="margin-left:11%; margin-top: 1em">Partial copies
can be made since you can specify optionally the source
offset, destination offset and size to copy. These values
are all specified in bytes. If not given, the offsets both
default to zero, and the size defaults to copying as much as
possible until we hit the end of the source.</p>

<p style="margin-left:11%; margin-top: 1em">The source and
destination may be the same object. However overlapping
regions may not be copied correctly.</p>

<p style="margin-left:11%; margin-top: 1em">If the
destination is a file, it is created if required. If the
destination file is not large enough, it is extended.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>&quot;sparse&quot;</tt> flag is true then the call
avoids writing blocks that contain only zeroes, which can
help in some situations where the backing disk is
thin-provisioned. Note that unless the target is already
zeroed, using this option will result in incorrect
copying.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-device-to-file</b></p>


<pre style="margin-left:11%;"> copy&minus;device&minus;to&minus;file src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-file-to-device</b></p>


<pre style="margin-left:11%;"> copy&minus;file&minus;to&minus;device src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-file-to-file</b></p>


<pre style="margin-left:11%;"> copy&minus;file&minus;to&minus;file src dest [srcoffset:N] [destoffset:N] [size:N] [sparse:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">See
&quot;copy-device-to-device&quot; for a general overview of
this call.</p>

<p style="margin-left:11%; margin-top: 1em">This is
<b>not</b> the function you want for copying files. This is
for copying blocks within existing files. See
&quot;cp&quot;, &quot;cp-a&quot; and &quot;mv&quot; for
general file copying and moving functions.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>copy-size</b></p>


<pre style="margin-left:11%;"> copy&minus;size src dest size</pre>


<p style="margin-left:11%; margin-top: 1em">This command
copies exactly <tt>&quot;size&quot;</tt> bytes from one
source device or file <tt>&quot;src&quot;</tt> to another
destination device or file <tt>&quot;dest&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note this will
fail if the source is too short or if the destination is not
large enough.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;copy-device-to-device&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>cp</b></p>
<pre style="margin-left:11%;"> cp src dest</pre>

<p style="margin-left:11%; margin-top: 1em">This copies a
file from <tt>&quot;src&quot;</tt> to
<tt>&quot;dest&quot;</tt> where <tt>&quot;dest&quot;</tt> is
either a destination filename or destination directory.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cp-a</b></p>

<pre style="margin-left:11%;"> cp&minus;a src dest</pre>

<p style="margin-left:11%; margin-top: 1em">This copies a
file or directory from <tt>&quot;src&quot;</tt> to
<tt>&quot;dest&quot;</tt> recursively using the <tt>&quot;cp
&minus;a&quot;</tt> command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>cp-r</b></p>

<pre style="margin-left:11%;"> cp&minus;r src dest</pre>

<p style="margin-left:11%; margin-top: 1em">This copies a
file or directory from <tt>&quot;src&quot;</tt> to
<tt>&quot;dest&quot;</tt> recursively using the <tt>&quot;cp
&minus;rP&quot;</tt> command.</p>

<p style="margin-left:11%; margin-top: 1em">Most users
should use &quot;cp-a&quot; instead. This command is useful
when you don&rsquo;t want to preserve permissions, because
the target filesystem does not support it (primarily when
writing to <small>DOS FAT</small> filesystems).</p>


<p style="margin-left:11%; margin-top: 1em"><b>cpio-out</b></p>


<pre style="margin-left:11%;"> cpio&minus;out directory (cpiofile|&minus;) [format:..]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
packs the contents of <tt>&quot;directory&quot;</tt> and
downloads it to local file
<tt>&quot;cpiofile&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;format&quot;</tt> parameter can be used to select
the format. Only the following formats are currently
permitted: <br>
&quot;newc&quot;</p>

<p style="margin-left:17%;">New ( <small>SVR4</small> )
portable format. This format happens to be compatible with
the cpio-like format used by the Linux kernel for
initramfs.</p>

<p style="margin-left:17%; margin-top: 1em">This is the
default format.</p>

<p style="margin-left:11%;">&quot;crc&quot;</p>

<p style="margin-left:17%;">New ( <small>SVR4</small> )
portable format with a checksum.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>dd</b></p>
<pre style="margin-left:11%;"> dd src dest</pre>

<p style="margin-left:11%; margin-top: 1em">This command
copies from one source device or file
<tt>&quot;src&quot;</tt> to another destination device or
file <tt>&quot;dest&quot;</tt>. Normally you would use this
to copy to or from a device or partition, for example to
duplicate a filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">If the
destination is a device, it must be as large or larger than
the source file or device, otherwise the copy will fail.
This command cannot do partial copies (see
&quot;copy-device-to-device&quot;).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;copy-device-to-device&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>device-index</b></p>


<pre style="margin-left:11%;"> device&minus;index device</pre>


<p style="margin-left:11%; margin-top: 1em">This function
takes a device name (eg. &quot;/dev/sdb&quot;) and returns
the index of the device in the list of devices.</p>

<p style="margin-left:11%; margin-top: 1em">Index numbers
start from 0. The named device must exist, for example as a
string returned from &quot;list-devices&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;list-devices&quot;, &quot;part-to-dev&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>df</b></p>
<pre style="margin-left:11%;"> df</pre>

<p style="margin-left:11%; margin-top: 1em">This command
runs the <tt>&quot;df&quot;</tt> command to report disk
space used.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
mostly useful for interactive sessions. It is <i>not</i>
intended that you try to parse the output string. Use
&quot;statvfs&quot; from programs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>df-h</b></p>

<pre style="margin-left:11%;"> df&minus;h</pre>

<p style="margin-left:11%; margin-top: 1em">This command
runs the <tt>&quot;df &minus;h&quot;</tt> command to report
disk space used in human-readable format.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
mostly useful for interactive sessions. It is <i>not</i>
intended that you try to parse the output string. Use
&quot;statvfs&quot; from programs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>disk-create</b></p>


<pre style="margin-left:11%;"> disk&minus;create filename format size [backingfile:..] [backingformat:..] [preallocation:..] [compat:..] [clustersize:N]</pre>


<p style="margin-left:11%; margin-top: 1em">Create a blank
disk image called <tt>&quot;filename&quot;</tt> (a host
file) with format <tt>&quot;format&quot;</tt> (usually
<tt>&quot;raw&quot;</tt> or <tt>&quot;qcow2&quot;</tt>). The
size is <tt>&quot;size&quot;</tt> bytes.</p>

<p style="margin-left:11%; margin-top: 1em">If used with
the optional <tt>&quot;backingfile&quot;</tt> parameter,
then a snapshot is created on top of the backing file. In
this case, <tt>&quot;size&quot;</tt> must be passed as
<tt>&quot;&minus;1&quot;</tt>. The size of the snapshot is
the same as the size of the backing file, which is
discovered automatically. You are encouraged to also pass
<tt>&quot;backingformat&quot;</tt> to describe the format of
<tt>&quot;backingfile&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;filename&quot;</tt> refers to a block device, then
the device is formatted. The <tt>&quot;size&quot;</tt> is
ignored since block devices have an intrinsic size.</p>

<p style="margin-left:11%; margin-top: 1em">The other
optional parameters are: <br>
&quot;preallocation&quot;</p>

<p style="margin-left:17%;">If format is
<tt>&quot;raw&quot;</tt>, then this can be either
<tt>&quot;sparse&quot;</tt> or <tt>&quot;full&quot;</tt> to
create a sparse or fully allocated file respectively. The
default is <tt>&quot;sparse&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">If format is
<tt>&quot;qcow2&quot;</tt>, then this can be either
<tt>&quot;off&quot;</tt> or <tt>&quot;metadata&quot;</tt>.
Preallocating metadata can be faster when doing lots of
writes, but uses more space. The default is
<tt>&quot;off&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;compat&quot;</p>

<p style="margin-left:17%;"><tt>&quot;qcow2&quot;</tt>
only: Pass the string <tt>1.1</tt> to use the advanced qcow2
format supported by qemu &ge; 1.1.</p>

<p style="margin-left:11%;">&quot;clustersize&quot;</p>

<p style="margin-left:17%;"><tt>&quot;qcow2&quot;</tt>
only: Change the qcow2 cluster size. The default is 65536
(bytes) and this setting may be any power of two between 512
and 2097152.</p>

<p style="margin-left:11%; margin-top: 1em">Note that this
call does not add the new disk to the handle. You may need
to call &quot;add-drive-opts&quot; separately.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>disk-format</b></p>


<pre style="margin-left:11%;"> disk&minus;format filename</pre>


<p style="margin-left:11%; margin-top: 1em">Detect and
return the format of the disk image called
<tt>&quot;filename&quot;</tt>. <tt>&quot;filename&quot;</tt>
can also be a host device, etc. If the format of the image
could not be detected, then <tt>&quot;unknown&quot;</tt> is
returned.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
detecting the disk format can be insecure under some
circumstances. See &quot;
<small>CVE&minus;2010&minus;3851&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot; <small>DISK IMAGE FORMATS&quot;</small> in
<i>guestfs</i>(3)</p>


<p style="margin-left:11%; margin-top: 1em"><b>disk-has-backing-file</b></p>


<pre style="margin-left:11%;"> disk&minus;has&minus;backing&minus;file filename</pre>


<p style="margin-left:11%; margin-top: 1em">Detect and
return whether the disk image <tt>&quot;filename&quot;</tt>
has a backing file.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
detecting disk features can be insecure under some
circumstances. See &quot;
<small>CVE&minus;2010&minus;3851&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>disk-virtual-size</b></p>


<pre style="margin-left:11%;"> disk&minus;virtual&minus;size filename</pre>


<p style="margin-left:11%; margin-top: 1em">Detect and
return the virtual size in bytes of the disk image called
<tt>&quot;filename&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
detecting disk features can be insecure under some
circumstances. See &quot;
<small>CVE&minus;2010&minus;3851&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>dmesg</b></p>

<pre style="margin-left:11%;"> dmesg</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the kernel messages (<tt>&quot;dmesg&quot;</tt> output) from
the guest kernel. This is sometimes useful for extended
debugging of problems.</p>

<p style="margin-left:11%; margin-top: 1em">Another way to
get the same information is to enable verbose messages with
&quot;set-verbose&quot; or by setting the environment
variable <tt>&quot;LIBGUESTFS_DEBUG=1&quot;</tt> before
running the program.</p>


<p style="margin-left:11%; margin-top: 1em"><b>download</b></p>


<pre style="margin-left:11%;"> download remotefilename (filename|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">Download file
<tt>&quot;remotefilename&quot;</tt> and save it as
<tt>&quot;filename&quot;</tt> on the local machine.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;filename&quot;</tt>
can also be a named pipe.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;upload&quot;, &quot;cat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>download-offset</b></p>


<pre style="margin-left:11%;"> download&minus;offset remotefilename (filename|&minus;) offset size</pre>


<p style="margin-left:11%; margin-top: 1em">Download file
<tt>&quot;remotefilename&quot;</tt> and save it as
<tt>&quot;filename&quot;</tt> on the local machine.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;remotefilename&quot;</tt>
is read for <tt>&quot;size&quot;</tt> bytes starting at
<tt>&quot;offset&quot;</tt> (this region must be within the
file or device).</p>

<p style="margin-left:11%; margin-top: 1em">Note that there
is no limit on the amount of data that can be downloaded
with this call, unlike with &quot;pread&quot;, and this call
always reads the full amount unless an error occurs.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;download&quot;, &quot;pread&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>drop-caches</b></p>


<pre style="margin-left:11%;"> drop&minus;caches whattodrop</pre>


<p style="margin-left:11%; margin-top: 1em">This instructs
the guest kernel to drop its page cache, and/or dentries and
inode caches. The parameter <tt>&quot;whattodrop&quot;</tt>
tells the kernel what precisely to drop, see
http://linux&minus;mm.org/Drop_Caches</p>

<p style="margin-left:11%; margin-top: 1em">Setting
<tt>&quot;whattodrop&quot;</tt> to 3 should drop
everything.</p>

<p style="margin-left:11%; margin-top: 1em">This
automatically calls <i>sync</i>(2) before the operation, so
that the maximum guest memory is freed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>du</b></p>
<pre style="margin-left:11%;"> du path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
runs the <tt>&quot;du &minus;s&quot;</tt> command to
estimate file space usage for <tt>&quot;path&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;path&quot;</tt>
can be a file or a directory. If <tt>&quot;path&quot;</tt>
is a directory then the estimate includes the contents of
the directory and all subdirectories (recursively).</p>

<p style="margin-left:11%; margin-top: 1em">The result is
the estimated size in <i>kilobytes</i> (ie. units of 1024
bytes).</p>


<p style="margin-left:11%; margin-top: 1em"><b>e2fsck</b></p>


<pre style="margin-left:11%;"> e2fsck device [correct:true|false] [forceall:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This runs the
ext2/ext3 filesystem checker on <tt>&quot;device&quot;</tt>.
It can take the following optional arguments: <br>
&quot;correct&quot;</p>

<p style="margin-left:17%;">Automatically repair the file
system. This option will cause e2fsck to automatically fix
any filesystem problems that can be safely fixed without
human intervention.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
not be specified at the same time as the
<tt>&quot;forceall&quot;</tt> option.</p>

<p style="margin-left:11%;">&quot;forceall&quot;</p>

<p style="margin-left:17%;">Assume an answer of
&rsquo;yes&rsquo; to all questions; allows e2fsck to be used
non-interactively.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
not be specified at the same time as the
<tt>&quot;correct&quot;</tt> option.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>e2fsck&minus;f</b></p>

<pre style="margin-left:11%;"> e2fsck&minus;f device</pre>

<p style="margin-left:11%; margin-top: 1em">This runs
<tt>&quot;e2fsck &minus;p &minus;f device&quot;</tt>, ie.
runs the ext2/ext3 filesystem checker on
<tt>&quot;device&quot;</tt>, noninteractively
(<i>&minus;p</i>), even if the filesystem appears to be
clean (<i>&minus;f</i>).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;e2fsck&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>echo-daemon</b></p>


<pre style="margin-left:11%;"> echo&minus;daemon 'words ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This command
concatenates the list of <tt>&quot;words&quot;</tt> passed
with single spaces between them and returns the resulting
string.</p>

<p style="margin-left:11%; margin-top: 1em">You can use
this command to test the connection through to the
daemon.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;ping-daemon&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>egrep</b></p>

<pre style="margin-left:11%;"> egrep regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;egrep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>egrepi</b></p>

<pre style="margin-left:11%;"> egrepi regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;egrep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>equal</b></p>

<pre style="margin-left:11%;"> equal file1 file2</pre>

<p style="margin-left:11%; margin-top: 1em">This compares
the two files <tt>&quot;file1&quot;</tt> and
<tt>&quot;file2&quot;</tt> and returns true if their content
is exactly equal, or false otherwise.</p>

<p style="margin-left:11%; margin-top: 1em">The external
<i>cmp</i>(1) program is used for the comparison.</p>


<p style="margin-left:11%; margin-top: 1em"><b>exists</b></p>

<pre style="margin-left:11%;"> exists path</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a file,
directory (or anything) with the given
<tt>&quot;path&quot;</tt> name.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;is-file&quot;, &quot;is-dir&quot;,
&quot;stat&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>extlinux</b></p>

<pre style="margin-left:11%;"> extlinux directory</pre>

<p style="margin-left:11%; margin-top: 1em">Install the
<small>SYSLINUX</small> bootloader on the device mounted at
<tt>&quot;directory&quot;</tt>. Unlike &quot;syslinux&quot;
which requires a <small>FAT</small> filesystem, this can be
used on an ext2/3/4 or btrfs filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;directory&quot;</tt> parameter can be either a
mountpoint, or a directory within the mountpoint.</p>

<p style="margin-left:11%; margin-top: 1em">You also have
to mark the partition as &quot;active&quot;
(&quot;part-set-bootable&quot;) and a Master Boot Record
must be installed (eg. using &quot;pwrite-device&quot;) on
the first sector of the whole disk. The
<small>SYSLINUX</small> package comes with some suitable
Master Boot Records. See the <i>extlinux</i>(1) man page for
further information.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
configuration can be supplied to <small>SYSLINUX</small> by
placing a file called <tt>&quot;extlinux.conf&quot;</tt> on
the filesystem under <tt>&quot;directory&quot;</tt>. For
further information about the contents of this file, see
<i>extlinux</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;syslinux&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fallocate</b></p>

<pre style="margin-left:11%;"> fallocate path len</pre>

<p style="margin-left:11%; margin-top: 1em">This command
preallocates a file (containing zero bytes) named
<tt>&quot;path&quot;</tt> of size <tt>&quot;len&quot;</tt>
bytes. If the file exists already, it is overwritten.</p>

<p style="margin-left:11%; margin-top: 1em">Do not confuse
this with the guestfish-specific <tt>&quot;alloc&quot;</tt>
command which allocates a file in the host and attaches it
as a device.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;fallocate64&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fallocate64</b></p>

<pre style="margin-left:11%;"> fallocate64 path len</pre>

<p style="margin-left:11%; margin-top: 1em">This command
preallocates a file (containing zero bytes) named
<tt>&quot;path&quot;</tt> of size <tt>&quot;len&quot;</tt>
bytes. If the file exists already, it is overwritten.</p>

<p style="margin-left:11%; margin-top: 1em">Note that this
call allocates disk blocks for the file. To create a sparse
file use &quot;truncate-size&quot; instead.</p>

<p style="margin-left:11%; margin-top: 1em">The deprecated
call &quot;fallocate&quot; does the same, but owing to an
oversight it only allowed 30 bit lengths to be specified,
effectively limiting the maximum size of files created
through that call to 1GB.</p>

<p style="margin-left:11%; margin-top: 1em">Do not confuse
this with the guestfish-specific <tt>&quot;alloc&quot;</tt>
and <tt>&quot;sparse&quot;</tt> commands which create a file
in the host and attach it as a device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>feature-available</b></p>


<pre style="margin-left:11%;"> feature&minus;available 'groups ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;available&quot;, but unlike that call it
returns a simple true/false boolean result, instead of
throwing an exception if a feature is not found. For other
documentation see &quot;available&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fgrep</b></p>

<pre style="margin-left:11%;"> fgrep pattern path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;fgrep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fgrepi</b></p>

<pre style="margin-left:11%;"> fgrepi pattern path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;fgrep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>file</b></p>

<pre style="margin-left:11%;"> file path</pre>

<p style="margin-left:11%; margin-top: 1em">This call uses
the standard <i>file</i>(1) command to determine the type or
contents of the file.</p>

<p style="margin-left:11%; margin-top: 1em">This call will
also transparently look inside various types of compressed
file.</p>

<p style="margin-left:11%; margin-top: 1em">The exact
command which runs is <tt>&quot;file &minus;zb
path&quot;</tt>. Note in particular that the filename is not
prepended to the output (the <i>&minus;b</i> option).</p>

<p style="margin-left:11%; margin-top: 1em">The output
depends on the output of the underlying <i>file</i>(1)
command and it can change in future in ways beyond our
control. In other words, the output is not guaranteed by the
<small>ABI.</small></p>

<p style="margin-left:11%; margin-top: 1em">See also:
<i>file</i>(1), &quot;vfs-type&quot;, &quot;lstat&quot;,
&quot;is-file&quot;, &quot;is-blockdev&quot; (etc),
&quot;is-zero&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>file-architecture</b></p>


<pre style="margin-left:11%;"> file&minus;architecture filename</pre>


<p style="margin-left:11%; margin-top: 1em">This detects
the architecture of the binary
<tt>&quot;filename&quot;</tt>, and returns it if known.</p>

<p style="margin-left:11%; margin-top: 1em">Currently
defined architectures are: <br>
&quot;i386&quot;</p>

<p style="margin-left:17%;">This string is returned for all
32 bit i386, i486, i586, i686 binaries irrespective of the
precise processor requirements of the binary.</p>

<p style="margin-left:11%;">&quot;x86_64&quot;</p>

<p style="margin-left:17%;">64 bit x86&minus;64.</p>

<p style="margin-left:11%;">&quot;sparc&quot;</p>

<p style="margin-left:17%;">32 bit
<small>SPARC.</small></p>

<p style="margin-left:11%;">&quot;sparc64&quot;</p>

<p style="margin-left:17%;">64 bit <small>SPARC V9</small>
and above.</p>

<p style="margin-left:11%;">&quot;ia64&quot;</p>

<p style="margin-left:17%;">Intel Itanium.</p>

<p style="margin-left:11%;">&quot;ppc&quot;</p>

<p style="margin-left:17%;">32 bit Power
<small>PC.</small></p>

<p style="margin-left:11%;">&quot;ppc64&quot;</p>

<p style="margin-left:17%;">64 bit Power
<small>PC.</small></p>

<p style="margin-left:11%;">&quot;arm&quot;</p>

<p style="margin-left:17%;">32 bit <small>ARM.</small></p>

<p style="margin-left:11%;">&quot;aarch64&quot;</p>

<p style="margin-left:17%;">64 bit <small>ARM.</small></p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs may
return other architecture strings in future.</p>

<p style="margin-left:11%; margin-top: 1em">The function
works on at least the following types of files:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>many types of Un*x and Linux binary</p></td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>many types of Un*x and Linux shared library</p></td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>Windows Win32 and Win64 binaries</p></td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>Windows Win32 and Win64 DLLs</p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Win32 binaries
and DLLs return <tt>&quot;i386&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">Win64 binaries
and DLLs return <tt>&quot;x86_64&quot;</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="52%">


<p style="margin-top: 1em">Linux kernel modules</p></td>
<td width="31%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="52%">


<p>Linux new-style initrd images</p></td>
<td width="31%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="52%">


<p>some non&minus;x86 Linux vmlinuz kernels</p></td>
<td width="31%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">What it
can&rsquo;t do currently:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">static libraries (libfoo.a)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Linux old-style initrd as compressed ext2 filesystem (
<small>RHEL 3</small> )</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>x86 Linux vmlinuz kernels</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">x86 vmlinuz
images (bzImage format) consist of a mix of 16&minus;,
32&minus; and compressed code, and are horribly hard to
unpack. If you want to find the architecture of a kernel,
use the architecture of the associated initrd or kernel
module(s) instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>filesize</b></p>

<pre style="margin-left:11%;"> filesize file</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns the size of <tt>&quot;file&quot;</tt> in bytes.</p>

<p style="margin-left:11%; margin-top: 1em">To get other
stats about a file, use &quot;stat&quot;, &quot;lstat&quot;,
&quot;is-dir&quot;, &quot;is-file&quot; etc. To get the size
of block devices, use
&quot;blockdev&minus;getsize64&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>filesystem-available</b></p>


<pre style="margin-left:11%;"> filesystem&minus;available filesystem</pre>


<p style="margin-left:11%; margin-top: 1em">Check whether
libguestfs supports the named filesystem. The argument
<tt>&quot;filesystem&quot;</tt> is a filesystem name, such
as <tt>&quot;ext3&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">You must call
&quot;launch&quot; before using this command.</p>

<p style="margin-left:11%; margin-top: 1em">This is mainly
useful as a negative test. If this returns true, it
doesn&rsquo;t mean that a particular filesystem can be
created or mounted, since filesystems can fail for other
reasons such as it being a later version of the filesystem,
or having incompatible features, or lacking the right
mkfs.&lt;<i>fs</i>&gt; tool.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;available&quot;, &quot;feature-available&quot;, &quot;
<small>AVAILABILITY&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>fill</b></p>

<pre style="margin-left:11%;"> fill c len path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
creates a new file called <tt>&quot;path&quot;</tt>. The
initial content of the file is <tt>&quot;len&quot;</tt>
octets of <tt>&quot;c&quot;</tt>, where
<tt>&quot;c&quot;</tt> must be a number in the range
<tt>&quot;[0..255]&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">To fill a file
with zero bytes (sparsely), it is much more efficient to use
&quot;truncate-size&quot;. To create a file with a pattern
of repeating bytes use &quot;fill-pattern&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fill-dir</b></p>

<pre style="margin-left:11%;"> fill&minus;dir dir nr</pre>

<p style="margin-left:11%; margin-top: 1em">This function,
useful for testing filesystems, creates
<tt>&quot;nr&quot;</tt> empty files in the directory
<tt>&quot;dir&quot;</tt> with names <tt>00000000</tt>
through <tt>&quot;nr&minus;1&quot;</tt> (ie. each file name
is 8 digits long padded with zeroes).</p>


<p style="margin-left:11%; margin-top: 1em"><b>fill-pattern</b></p>


<pre style="margin-left:11%;"> fill&minus;pattern pattern len path</pre>


<p style="margin-left:11%; margin-top: 1em">This function
is like &quot;fill&quot; except that it creates a new file
of length <tt>&quot;len&quot;</tt> containing the repeating
pattern of bytes in <tt>&quot;pattern&quot;</tt>. The
pattern is truncated if necessary to ensure the length of
the file is exactly <tt>&quot;len&quot;</tt> bytes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>find</b></p>

<pre style="margin-left:11%;"> find directory</pre>

<p style="margin-left:11%; margin-top: 1em">This command
lists out all files and directories, recursively, starting
at <tt>&quot;directory&quot;</tt>. It is essentially
equivalent to running the shell command <tt>&quot;find
directory &minus;print&quot;</tt> but some post-processing
happens on the output, described below.</p>

<p style="margin-left:11%; margin-top: 1em">This returns a
list of strings <i>without any prefix</i>. Thus if the
directory structure was:</p>

<pre style="margin-left:11%; margin-top: 1em"> /tmp/a
 /tmp/b
 /tmp/c/d</pre>


<p style="margin-left:11%; margin-top: 1em">then the
returned list from &quot;find&quot;
<tt>&quot;/tmp&quot;</tt> would be 4 elements:</p>

<pre style="margin-left:11%; margin-top: 1em"> a
 b
 c
 c/d</pre>


<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;directory&quot;</tt> is not a directory, then this
command returns an error.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
list is sorted.</p>


<p style="margin-left:11%; margin-top: 1em"><b>find0</b></p>


<pre style="margin-left:11%;"> find0 directory (files|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This command
lists out all files and directories, recursively, starting
at <tt>&quot;directory&quot;</tt>, placing the resulting
list in the external file called
<tt>&quot;files&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
works the same way as &quot;find&quot; with the following
exceptions:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The resulting list is written to
an external file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Items (filenames) in the result are separated by
<tt>&quot;\0&quot;</tt> characters. See <i>find</i>(1)
option <i>&minus;print0</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The result list is not sorted.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>findfs-label</b></p>


<pre style="margin-left:11%;"> findfs&minus;label label</pre>


<p style="margin-left:11%; margin-top: 1em">This command
searches the filesystems and returns the one which has the
given label. An error is returned if no such filesystem can
be found.</p>

<p style="margin-left:11%; margin-top: 1em">To find the
label of a filesystem, use &quot;vfs-label&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>findfs-uuid</b></p>

<pre style="margin-left:11%;"> findfs&minus;uuid uuid</pre>

<p style="margin-left:11%; margin-top: 1em">This command
searches the filesystems and returns the one which has the
given <small>UUID.</small> An error is returned if no such
filesystem can be found.</p>

<p style="margin-left:11%; margin-top: 1em">To find the
<small>UUID</small> of a filesystem, use
&quot;vfs-uuid&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fsck</b></p>

<pre style="margin-left:11%;"> fsck fstype device</pre>

<p style="margin-left:11%; margin-top: 1em">This runs the
filesystem checker (fsck) on <tt>&quot;device&quot;</tt>
which should have filesystem type
<tt>&quot;fstype&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
integer is the status. See <i>fsck</i>(8) for the list of
status codes from <tt>&quot;fsck&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Notes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Multiple status codes can be
summed together.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A non-zero return code can mean &quot;success&quot;, for
example if errors have been corrected on the filesystem.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Checking or repairing <small>NTFS</small> volumes is not
supported (by linux-ntfs).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This command is
entirely equivalent to running <tt>&quot;fsck &minus;a
&minus;t fstype device&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fstrim</b></p>


<pre style="margin-left:11%;"> fstrim mountpoint [offset:N] [length:N] [minimumfreeextent:N]</pre>


<p style="margin-left:11%; margin-top: 1em">Trim the free
space in the filesystem mounted on
<tt>&quot;mountpoint&quot;</tt>. The filesystem must be
mounted read-write.</p>

<p style="margin-left:11%; margin-top: 1em">The filesystem
contents are not affected, but any free space in the
filesystem is &quot;trimmed&quot;, that is, given back to
the host device, thus making disk images more sparse,
allowing unused space in qcow2 files to be reused, etc.</p>

<p style="margin-left:11%; margin-top: 1em">This operation
requires support in libguestfs, the mounted filesystem, the
host filesystem, qemu and the host kernel. If this support
isn&rsquo;t present it may give an error or even appear to
run but do nothing.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;zero-free-space&quot;. That is a slightly different
operation that turns free space in the filesystem into
zeroes. It is valid to call &quot;fstrim&quot; either
instead of, or after calling
&quot;zero-free-space&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-append</b></p>

<pre style="margin-left:11%;"> get&minus;append</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
additional kernel options which are added to the libguestfs
appliance kernel command line.</p>

<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;NULL&quot;</tt> then no options are added.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-attach-method</b></p>


<pre style="margin-left:11%;"> get&minus;attach&minus;method</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
current backend.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;set-backend&quot; and &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;get-backend&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-autosync</b></p>

<pre style="margin-left:11%;"> get&minus;autosync</pre>

<p style="margin-left:11%; margin-top: 1em">Get the
autosync flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-backend</b></p>

<pre style="margin-left:11%;"> get&minus;backend</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
current backend.</p>

<p style="margin-left:11%; margin-top: 1em">This handle
property was previously called the &quot;attach
method&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;set-backend&quot; and &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-backend-setting</b></p>


<pre style="margin-left:11%;"> get&minus;backend&minus;setting name</pre>


<p style="margin-left:11%; margin-top: 1em">Find a backend
setting string which is either <tt>&quot;name&quot;</tt> or
begins with <tt>&quot;name=&quot;</tt>. If
<tt>&quot;name&quot;</tt>, this returns the string
<tt>&quot;1&quot;</tt>. If <tt>&quot;name=&quot;</tt>, this
returns the part after the equals sign (which may be an
empty string).</p>

<p style="margin-left:11%; margin-top: 1em">If no such
setting is found, this function throws an error. The errno
(see &quot;last-errno&quot;) will be
<tt>&quot;ESRCH&quot;</tt> in this case.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-backend-settings</b></p>


<pre style="margin-left:11%;"> get&minus;backend&minus;settings</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
current backend settings.</p>

<p style="margin-left:11%; margin-top: 1em">This call
returns all backend settings strings. If you want to find a
single backend setting, see
&quot;get-backend-setting&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-cachedir</b></p>

<pre style="margin-left:11%;"> get&minus;cachedir</pre>

<p style="margin-left:11%; margin-top: 1em">Get the
directory used by the handle to store the appliance
cache.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-direct</b></p>

<pre style="margin-left:11%;"> get&minus;direct</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
direct appliance mode flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get&minus;e2attrs</b></p>

<pre style="margin-left:11%;"> get&minus;e2attrs file</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the file attributes associated with
<tt>&quot;file&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The attributes
are a set of bits associated with each inode which affect
the behaviour of the file. The attributes are returned as a
string of letters (described below). The string may be
empty, indicating that no file attributes are set for this
file.</p>

<p style="margin-left:11%; margin-top: 1em">These
attributes are only present when the file is located on an
ext2/3/4 filesystem. Using this call on other filesystem
types will result in an error.</p>

<p style="margin-left:11%; margin-top: 1em">The characters
(file attributes) in the returned string are currently:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">&rsquo;A&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">When the file is accessed, its
atime is not modified.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;a&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is append-only.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;c&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is compressed on-disk.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;D&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>(Directories only.) Changes to this directory are
written synchronously to disk.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;d&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is not a candidate for backup (see
<i>dump</i>(8)).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;E&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file has compression errors.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;e&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is using extents.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;h&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is storing its blocks in units of the
filesystem blocksize instead of sectors.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;I&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>(Directories only.) The directory is using hashed
trees.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;i&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is immutable. It cannot be modified, deleted or
renamed. No link can be created to this file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;j&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The file is data-journaled.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;s&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>When the file is deleted, all its blocks will be
zeroed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;S&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Changes to this file are written synchronously to
disk.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;T&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>(Directories only.) This is a hint to the block
allocator that subdirectories contained in this directory
should be spread across blocks. If not present, the block
allocator will try to group subdirectories together.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;t&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>For a file, this disables tail-merging. (Not used by
upstream implementations of ext2.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;u&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>When the file is deleted, its blocks will be saved,
allowing the file to be undeleted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;X&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The raw contents of the compressed file may be
accessed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;Z&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The compressed file is dirty.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">More file
attributes may be added to this list later. Not all file
attributes may be set for all kinds of files. For detailed
information, consult the <i>chattr</i>(1) man page.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;set&minus;e2attrs&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t
confuse these attributes with extended attributes (see
&quot;getxattr&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get&minus;e2generation</b></p>


<pre style="margin-left:11%;"> get&minus;e2generation file</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the ext2 file generation of a file. The generation (which
used to be called the &quot;version&quot;) is a number
associated with an inode. This is most commonly used by
<small>NFS</small> servers.</p>

<p style="margin-left:11%; margin-top: 1em">The generation
is only present when the file is located on an ext2/3/4
filesystem. Using this call on other filesystem types will
result in an error.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;set&minus;e2generation&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get&minus;e2label</b></p>


<pre style="margin-left:11%;"> get&minus;e2label device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the ext2/3/4 filesystem label of the filesystem on
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;vfs-label&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get&minus;e2uuid</b></p>


<pre style="margin-left:11%;"> get&minus;e2uuid device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the ext2/3/4 filesystem <small>UUID</small> of the
filesystem on <tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;vfs-uuid&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-hv</b></p>

<pre style="margin-left:11%;"> get&minus;hv</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
current hypervisor binary.</p>

<p style="margin-left:11%; margin-top: 1em">This is always
non-NULL. If it wasn&rsquo;t set already, then this will
return the default qemu binary name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-libvirt-requested-credential-challenge</b></p>


<pre style="margin-left:11%;"> get&minus;libvirt&minus;requested&minus;credential&minus;challenge index</pre>


<p style="margin-left:11%; margin-top: 1em">Get the
challenge (provided by libvirt) for the
<tt>&quot;index&quot;</tt>&rsquo;th requested credential. If
libvirt did not provide a challenge, this returns the empty
string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-libvirt-requested-credential-defresult</b></p>


<pre style="margin-left:11%;"> get&minus;libvirt&minus;requested&minus;credential&minus;defresult index</pre>


<p style="margin-left:11%; margin-top: 1em">Get the default
result (provided by libvirt) for the
<tt>&quot;index&quot;</tt>&rsquo;th requested credential. If
libvirt did not provide a default result, this returns the
empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-libvirt-requested-credential-prompt</b></p>


<pre style="margin-left:11%;"> get&minus;libvirt&minus;requested&minus;credential&minus;prompt index</pre>


<p style="margin-left:11%; margin-top: 1em">Get the prompt
(provided by libvirt) for the
<tt>&quot;index&quot;</tt>&rsquo;th requested credential. If
libvirt did not provide a prompt, this returns the empty
string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-libvirt-requested-credentials</b></p>


<pre style="margin-left:11%;"> get&minus;libvirt&minus;requested&minus;credentials</pre>


<p style="margin-left:11%; margin-top: 1em">This should
only be called during the event callback for events of type
<tt>&quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Return the list
of credentials requested by libvirt. Possible values are a
subset of the strings provided when you called
&quot;set-libvirt-supported-credentials&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-memsize</b></p>

<pre style="margin-left:11%;"> get&minus;memsize</pre>

<p style="margin-left:11%; margin-top: 1em">This gets the
memory size in megabytes allocated to the hypervisor.</p>

<p style="margin-left:11%; margin-top: 1em">If
&quot;set-memsize&quot; was not called on this handle, and
if <tt>&quot;LIBGUESTFS_MEMSIZE&quot;</tt> was not set, then
this returns the compiled-in default value for memsize.</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on the architecture of libguestfs, see
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-network</b></p>

<pre style="margin-left:11%;"> get&minus;network</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the enable network flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-path</b></p>

<pre style="margin-left:11%;"> get&minus;path</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
current search path.</p>

<p style="margin-left:11%; margin-top: 1em">This is always
non-NULL. If it wasn&rsquo;t set already, then this will
return the default path.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-pgroup</b></p>

<pre style="margin-left:11%;"> get&minus;pgroup</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the process group flag.</p>

<p style="margin-left:11%; margin-top: 1em"><b>get-pid <br>
pid</b></p>
<pre style="margin-left:11%;"> get&minus;pid</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
process <small>ID</small> of the hypervisor. If there is no
hypervisor running, then this will return an error.</p>

<p style="margin-left:11%; margin-top: 1em">This is an
internal call used for debugging and testing.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-program</b></p>

<pre style="margin-left:11%;"> get&minus;program</pre>

<p style="margin-left:11%; margin-top: 1em">Get the program
name. See &quot;set-program&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-qemu</b></p>

<pre style="margin-left:11%;"> get&minus;qemu</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
current hypervisor binary (usually qemu).</p>

<p style="margin-left:11%; margin-top: 1em">This is always
non-NULL. If it wasn&rsquo;t set already, then this will
return the default qemu binary name.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;get-hv&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-recovery-proc</b></p>


<pre style="margin-left:11%;"> get&minus;recovery&minus;proc</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
recovery process enabled flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-selinux</b></p>

<pre style="margin-left:11%;"> get&minus;selinux</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the current setting of the selinux flag which is passed to
the appliance at boot time. See &quot;set-selinux&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on the architecture of libguestfs, see
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-smp</b></p>

<pre style="margin-left:11%;"> get&minus;smp</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the number of virtual CPUs assigned to the appliance.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-tmpdir</b></p>

<pre style="margin-left:11%;"> get&minus;tmpdir</pre>

<p style="margin-left:11%; margin-top: 1em">Get the
directory used by the handle to store temporary files.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-trace</b></p>

<pre style="margin-left:11%;"> get&minus;trace</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
command trace flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-umask</b></p>

<pre style="margin-left:11%;"> get&minus;umask</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
current umask. By default the umask is <tt>022</tt> unless
it has been set by calling &quot;umask&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>get-verbose</b></p>

<pre style="margin-left:11%;"> get&minus;verbose</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the verbose messages flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>getcon</b></p>

<pre style="margin-left:11%;"> getcon</pre>

<p style="margin-left:11%; margin-top: 1em">This gets the
SELinux security context of the daemon.</p>

<p style="margin-left:11%; margin-top: 1em">See the
documentation about <small>SELINUX</small> in
<i>guestfs</i>(3), and &quot;setcon&quot;</p>


<p style="margin-left:11%; margin-top: 1em"><b>getxattr</b></p>

<pre style="margin-left:11%;"> getxattr path name</pre>

<p style="margin-left:11%; margin-top: 1em">Get a single
extended attribute from file <tt>&quot;path&quot;</tt> named
<tt>&quot;name&quot;</tt>. This call follows symlinks. If
you want to lookup an extended attribute for the symlink
itself, use &quot;lgetxattr&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Normally it is
better to get all extended attributes from a file in one go
by calling &quot;getxattrs&quot;. However some Linux
filesystem implementations are buggy and do not provide a
way to list out attributes. For these filesystems (notably
ntfs&minus;3g) you have to know the names of the extended
attributes you want in advance and call this function.</p>

<p style="margin-left:11%; margin-top: 1em">Extended
attribute values are blobs of binary data. If there is no
extended attribute named <tt>&quot;name&quot;</tt>, this
returns an error.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;getxattrs&quot;, &quot;lgetxattr&quot;,
<i>attr</i>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><b>getxattrs</b></p>

<pre style="margin-left:11%;"> getxattrs path</pre>

<p style="margin-left:11%; margin-top: 1em">This call lists
the extended attributes of the file or directory
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">At the system
call level, this is a combination of the <i>listxattr</i>(2)
and <i>getxattr</i>(2) calls.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;lgetxattrs&quot;, <i>attr</i>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><b>glob-expand</b></p>


<pre style="margin-left:11%;"> glob&minus;expand pattern</pre>


<p style="margin-left:11%; margin-top: 1em">This command
searches for all the pathnames matching
<tt>&quot;pattern&quot;</tt> according to the wildcard
expansion rules used by the shell.</p>

<p style="margin-left:11%; margin-top: 1em">If no paths
match, then this returns an empty list (note: not an
error).</p>

<p style="margin-left:11%; margin-top: 1em">It is just a
wrapper around the C <i>glob</i>(3) function with flags
<tt>&quot;GLOB_MARK|GLOB_BRACE&quot;</tt>. See that manual
page for more details.</p>

<p style="margin-left:11%; margin-top: 1em">Notice that
there is no equivalent command for expanding a device name
(eg. <tt>&quot;/dev/sd*&quot;</tt>). Use
&quot;list-devices&quot;, &quot;list-partitions&quot; etc
functions instead.</p>

<p style="margin-left:11%; margin-top: 1em"><b>grep <br>
grep-opts</b></p>

<pre style="margin-left:11%;"> grep regex path [extended:true|false] [fixed:true|false] [insensitive:true|false] [compressed:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;grep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
flags are: <br>
&quot;extended&quot;</p>

<p style="margin-left:17%;">Use extended regular
expressions. This is the same as using the <i>&minus;E</i>
flag.</p>

<p style="margin-left:11%;">&quot;fixed&quot;</p>

<p style="margin-left:17%;">Match fixed (don&rsquo;t use
regular expressions). This is the same as using the
<i>&minus;F</i> flag.</p>

<p style="margin-left:11%;">&quot;insensitive&quot;</p>

<p style="margin-left:17%;">Match case-insensitive. This is
the same as using the <i>&minus;i</i> flag.</p>

<p style="margin-left:11%;">&quot;compressed&quot;</p>

<p style="margin-left:17%;">Use <tt>&quot;zgrep&quot;</tt>
instead of <tt>&quot;grep&quot;</tt>. This allows the input
to be compress&minus; or gzip-compressed.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>grepi</b></p>

<pre style="margin-left:11%;"> grepi regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;grep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>grub-install</b></p>


<pre style="margin-left:11%;"> grub&minus;install root device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
installs <small>GRUB 1</small> (the Grand Unified
Bootloader) on <tt>&quot;device&quot;</tt>, with the root
directory being <tt>&quot;root&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Notes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>There is currently no way in the <small>API</small> to
install grub2, which is used by most modern Linux guests. It
is possible to run the grub2 command from the guest,
although see the caveats in &quot; <small>RUNNING
COMMANDS&quot;</small> in <i>guestfs</i>(3).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>This uses <tt>&quot;grub&minus;install&quot;</tt> from
the host. Unfortunately grub is not always compatible with
itself, so this only works in rather narrow circumstances.
Careful testing with each guest version is advisable.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If grub-install reports the error &quot;No suitable
drive was found in the generated device map.&quot; it may be
that you need to create a
<tt>&quot;/boot/grub/device.map&quot;</tt> file first that
contains the mapping between grub device names and Linux
device names. It is usually sufficient to create a file
containing:</p> </td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> (hd0) /dev/vda</pre>


<p style="margin-left:17%; margin-top: 1em">replacing
<tt>&quot;/dev/vda&quot;</tt> with the name of the
installation device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>head</b></p>

<pre style="margin-left:11%;"> head path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns up to the first 10 lines of a file as a list of
strings.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>head-n</b></p>


<pre style="margin-left:11%;"> head&minus;n nrlines path</pre>


<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is a positive number,
this returns the first <tt>&quot;nrlines&quot;</tt> lines of
the file <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is a negative number,
this returns lines from the file <tt>&quot;path&quot;</tt>,
excluding the last <tt>&quot;nrlines&quot;</tt> lines.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is zero, this returns
an empty list.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>hexdump</b></p>

<pre style="margin-left:11%;"> hexdump path</pre>

<p style="margin-left:11%; margin-top: 1em">This runs
<tt>&quot;hexdump &minus;C&quot;</tt> on the given
<tt>&quot;path&quot;</tt>. The result is the human-readable,
canonical hex dump of the file.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-close</b></p>

<pre style="margin-left:11%;"> hivex&minus;close</pre>

<p style="margin-left:11%; margin-top: 1em">Close the
current hivex handle.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-commit</b></p>


<pre style="margin-left:11%;"> hivex&minus;commit filename</pre>


<p style="margin-left:11%; margin-top: 1em">Commit (write)
changes to the hive.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
<tt>&quot;filename&quot;</tt> parameter is null, then the
changes are written back to the same hive that was opened.
If this is not null then they are written to the alternate
filename given and the original hive is left untouched.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-add-child</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;add&minus;child parent name</pre>


<p style="margin-left:11%; margin-top: 1em">Add a child
node to <tt>&quot;parent&quot;</tt> named
<tt>&quot;name&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-children</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;children nodeh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the list
of nodes which are subkeys of
<tt>&quot;nodeh&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-delete-child</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;delete&minus;child nodeh</pre>


<p style="margin-left:11%; margin-top: 1em">Delete
<tt>&quot;nodeh&quot;</tt>, recursively if necessary.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-get-child</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;get&minus;child nodeh name</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
child of <tt>&quot;nodeh&quot;</tt> with the name
<tt>&quot;name&quot;</tt>, if it exists. This can return
<tt>0</tt> meaning the name was not found.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-get-value</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;get&minus;value nodeh key</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
value attached to <tt>&quot;nodeh&quot;</tt> which has the
name <tt>&quot;key&quot;</tt>, if it exists. This can return
<tt>0</tt> meaning the key was not found.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-name</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;name nodeh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the name
of <tt>&quot;nodeh&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-parent</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;parent nodeh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
parent node of <tt>&quot;nodeh&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-set-value</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;set&minus;value nodeh key t val</pre>


<p style="margin-left:11%; margin-top: 1em">Set or replace
a single value under the node <tt>&quot;nodeh&quot;</tt>.
The <tt>&quot;key&quot;</tt> is the name,
<tt>&quot;t&quot;</tt> is the type, and
<tt>&quot;val&quot;</tt> is the data.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-node-values</b></p>


<pre style="margin-left:11%;"> hivex&minus;node&minus;values nodeh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
array of (key, datatype, data) tuples attached to
<tt>&quot;nodeh&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-open</b></p>


<pre style="margin-left:11%;"> hivex&minus;open filename [verbose:true|false] [debug:true|false] [write:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">Open the
Windows Registry hive file named
<tt>&quot;filename&quot;</tt>. If there was any previous
hivex handle associated with this guestfs session, then it
is closed.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-root</b></p>

<pre style="margin-left:11%;"> hivex&minus;root</pre>

<p style="margin-left:11%; margin-top: 1em">Return the root
node of the hive.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-value-key</b></p>


<pre style="margin-left:11%;"> hivex&minus;value&minus;key valueh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the key
(name) field of a (key, datatype, data) tuple.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-value-type</b></p>


<pre style="margin-left:11%;"> hivex&minus;value&minus;type valueh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the data
type field from a (key, datatype, data) tuple.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex&minus;value&minus;utf8</b></p>


<pre style="margin-left:11%;"> hivex&minus;value&minus;utf8 valueh</pre>


<p style="margin-left:11%; margin-top: 1em">This calls
&quot;hivex-value-value&quot; (which returns the data field
from a hivex value tuple). It then assumes that the field is
a <small>UTF&minus;16LE</small> string and converts the
result to <small>UTF&minus;8</small> (or if this is not
possible, it returns an error).</p>

<p style="margin-left:11%; margin-top: 1em">This is useful
for reading strings out of the Windows registry. However it
is not foolproof because the registry is not strongly-typed
and fields can contain arbitrary or unexpected data.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hivex-value-value</b></p>


<pre style="margin-left:11%;"> hivex&minus;value&minus;value valueh</pre>


<p style="margin-left:11%; margin-top: 1em">Return the data
field of a (key, datatype, data) tuple.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
wrapper around the <i>hivex</i>(3) call of the same
name.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;hivex&minus;value&minus;utf8&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>initrd-cat</b></p>


<pre style="margin-left:11%;"> initrd&minus;cat initrdpath filename</pre>


<p style="margin-left:11%; margin-top: 1em">This command
unpacks the file <tt>&quot;filename&quot;</tt> from the
initrd file called <tt>&quot;initrdpath&quot;</tt>. The
filename must be given <i>without</i> the initial
<tt>&quot;/&quot;</tt> character.</p>

<p style="margin-left:11%; margin-top: 1em">For example, in
guestfish you could use the following command to examine the
boot script (usually called <tt>&quot;/init&quot;</tt>)
contained in a Linux initrd or initramfs image:</p>

<pre style="margin-left:11%; margin-top: 1em"> initrd&minus;cat /boot/initrd&minus;&lt;version&gt;.img init</pre>


<p style="margin-left:11%; margin-top: 1em">See also
&quot;initrd-list&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>initrd-list</b></p>

<pre style="margin-left:11%;"> initrd&minus;list path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
lists out files contained in an initrd.</p>

<p style="margin-left:11%; margin-top: 1em">The files are
listed without any initial <tt>&quot;/&quot;</tt> character.
The files are listed in the order they appear (not
necessarily alphabetical). Directory names are listed as
separate items.</p>

<p style="margin-left:11%; margin-top: 1em">Old Linux
kernels (2.4 and earlier) used a compressed ext2 filesystem
as initrd. We <i>only</i> support the newer initramfs format
(compressed cpio files).</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-add-watch</b></p>


<pre style="margin-left:11%;"> inotify&minus;add&minus;watch path mask</pre>


<p style="margin-left:11%; margin-top: 1em">Watch
<tt>&quot;path&quot;</tt> for the events listed in
<tt>&quot;mask&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
<tt>&quot;path&quot;</tt> is a directory then events within
that directory are watched, but this does <i>not</i> happen
recursively (in subdirectories).</p>

<p style="margin-left:11%; margin-top: 1em">Note for non-C
or non-Linux callers: the inotify events are defined by the
Linux kernel <small>ABI</small> and are listed in
<tt>&quot;/usr/include/sys/inotify.h&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-close</b></p>

<pre style="margin-left:11%;"> inotify&minus;close</pre>

<p style="margin-left:11%; margin-top: 1em">This closes the
inotify handle which was previously opened by inotify_init.
It removes all watches, throws away any pending events, and
deallocates all resources.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-files</b></p>

<pre style="margin-left:11%;"> inotify&minus;files</pre>

<p style="margin-left:11%; margin-top: 1em">This function
is a helpful wrapper around &quot;inotify-read&quot; which
just returns a list of pathnames of objects that were
touched. The returned pathnames are sorted and
deduplicated.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-init</b></p>


<pre style="margin-left:11%;"> inotify&minus;init maxevents</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a new inotify handle. The inotify subsystem can be
used to notify events which happen to objects in the guest
filesystem.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;maxevents&quot;</tt>
is the maximum number of events which will be queued up
between calls to &quot;inotify-read&quot; or
&quot;inotify-files&quot;. If this is passed as <tt>0</tt>,
then the kernel (or previously set) default is used. For
Linux 2.6.29 the default was 16384 events. Beyond this
limit, the kernel throws away events, but records the fact
that it threw them away by setting a flag
<tt>&quot;IN_Q_OVERFLOW&quot;</tt> in the returned structure
list (see &quot;inotify-read&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">Before any
events are generated, you have to add some watches to the
internal watch list. See: &quot;inotify-add-watch&quot; and
&quot;inotify-rm-watch&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Queued up
events should be read periodically by calling
&quot;inotify-read&quot; (or &quot;inotify-files&quot; which
is just a helpful wrapper around &quot;inotify-read&quot;).
If you don&rsquo;t read the events out often enough then you
risk the internal queue overflowing.</p>

<p style="margin-left:11%; margin-top: 1em">The handle
should be closed after use by calling
&quot;inotify-close&quot;. This also removes any watches
automatically.</p>

<p style="margin-left:11%; margin-top: 1em">See also
<i>inotify</i>(7) for an overview of the inotify interface
as exposed by the Linux kernel, which is roughly what we
expose via libguestfs. Note that there is one global inotify
handle per libguestfs instance.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-read</b></p>

<pre style="margin-left:11%;"> inotify&minus;read</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
complete queue of events that have happened since the
previous read call.</p>

<p style="margin-left:11%; margin-top: 1em">If no events
have happened, this returns an empty list.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note</i>: In
order to make sure that all events have been read, you must
call this function repeatedly until it returns an empty
list. The reason is that the call will read events up to the
maximum appliance-to-host message size and leave remaining
events in the queue.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inotify-rm-watch</b></p>


<pre style="margin-left:11%;"> inotify&minus;rm&minus;watch wd</pre>


<p style="margin-left:11%; margin-top: 1em">Remove a
previously defined inotify watch. See
&quot;inotify-add-watch&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-arch</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;arch root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the architecture of the inspected operating system. The
possible return values are listed under
&quot;file-architecture&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">If the
architecture could not be determined, then the string
<tt>&quot;unknown&quot;</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-distro</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;distro root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the distro (distribution) of the inspected operating
system.</p>

<p style="margin-left:11%; margin-top: 1em">Currently
defined distros are: <br>
&quot;archlinux&quot;</p>

<p style="margin-left:17%;">Arch Linux.</p>

<p style="margin-left:11%;">&quot;buildroot&quot;</p>

<p style="margin-left:17%;">Buildroot-derived distro, but
not one we specifically recognize.</p>

<p style="margin-left:11%;">&quot;centos&quot;</p>

<p style="margin-left:17%;">CentOS.</p>

<p style="margin-left:11%;">&quot;cirros&quot;</p>

<p style="margin-left:17%;">Cirros.</p>

<p style="margin-left:11%;">&quot;debian&quot;</p>

<p style="margin-left:17%;">Debian.</p>

<p style="margin-left:11%;">&quot;fedora&quot;</p>

<p style="margin-left:17%;">Fedora.</p>

<p style="margin-left:11%;">&quot;freedos&quot;</p>

<p style="margin-left:17%;">FreeDOS.</p>

<p style="margin-left:11%;">&quot;gentoo&quot;</p>

<p style="margin-left:17%;">Gentoo.</p>

<p style="margin-left:11%;">&quot;linuxmint&quot;</p>

<p style="margin-left:17%;">Linux Mint.</p>

<p style="margin-left:11%;">&quot;mageia&quot;</p>

<p style="margin-left:17%;">Mageia.</p>

<p style="margin-left:11%;">&quot;mandriva&quot;</p>

<p style="margin-left:17%;">Mandriva.</p>

<p style="margin-left:11%;">&quot;meego&quot;</p>

<p style="margin-left:17%;">MeeGo.</p>

<p style="margin-left:11%;">&quot;openbsd&quot;</p>

<p style="margin-left:17%;">OpenBSD.</p>

<p style="margin-left:11%;">&quot;opensuse&quot;</p>

<p style="margin-left:17%;">OpenSUSE.</p>

<p style="margin-left:11%;">&quot;oraclelinux&quot;</p>

<p style="margin-left:17%;">Oracle Linux.</p>

<p style="margin-left:11%;">&quot;pardus&quot;</p>

<p style="margin-left:17%;">Pardus.</p>

<p style="margin-left:11%;">&quot;redhat-based&quot;</p>

<p style="margin-left:17%;">Some Red Hat-derived
distro.</p>

<p style="margin-left:11%;">&quot;rhel&quot;</p>

<p style="margin-left:17%;">Red Hat Enterprise Linux.</p>


<p style="margin-left:11%;">&quot;scientificlinux&quot;</p>

<p style="margin-left:17%;">Scientific Linux.</p>

<p style="margin-left:11%;">&quot;slackware&quot;</p>

<p style="margin-left:17%;">Slackware.</p>

<p style="margin-left:11%;">&quot;sles&quot;</p>

<p style="margin-left:17%;">SuSE Linux Enterprise Server or
Desktop.</p>

<p style="margin-left:11%;">&quot;suse-based&quot;</p>

<p style="margin-left:17%;">Some openSuSE-derived
distro.</p>

<p style="margin-left:11%;">&quot;ttylinux&quot;</p>

<p style="margin-left:17%;">ttylinux.</p>

<p style="margin-left:11%;">&quot;ubuntu&quot;</p>

<p style="margin-left:17%;">Ubuntu.</p>

<p style="margin-left:11%;">&quot;unknown&quot;</p>

<p style="margin-left:17%;">The distro could not be
determined.</p>

<p style="margin-left:11%;">&quot;windows&quot;</p>

<p style="margin-left:17%;">Windows does not have
distributions. This string is returned if the
<small>OS</small> type is Windows.</p>

<p style="margin-left:11%; margin-top: 1em">Future versions
of libguestfs may return other strings here. The caller
should be prepared to handle any string.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-drive-mappings</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;drive&minus;mappings root</pre>


<p style="margin-left:11%; margin-top: 1em">This call is
useful for Windows which uses a primitive system of
assigning drive letters (like &quot;C:&quot;) to partitions.
This inspection <small>API</small> examines the Windows
Registry to find out how disks/partitions are mapped to
drive letters, and returns a hash table as in the example
below:</p>

<pre style="margin-left:11%; margin-top: 1em"> C      =&gt;     /dev/vda2
 E      =&gt;     /dev/vdb1
 F      =&gt;     /dev/vdc1</pre>


<p style="margin-left:11%; margin-top: 1em">Note that keys
are drive letters. For Windows, the key is case insensitive
and just contains the drive letter, without the customary
colon separator character.</p>

<p style="margin-left:11%; margin-top: 1em">In future we
may support other operating systems that also used drive
letters, but the keys for those might not be case
insensitive and might be longer than 1 character. For
example in <small>OS&minus;9,</small> hard drives were named
<tt>&quot;h0&quot;</tt>, <tt>&quot;h1&quot;</tt> etc.</p>

<p style="margin-left:11%; margin-top: 1em">For Windows
guests, currently only hard drive mappings are returned.
Removable disks (eg. DVD-ROMs) are ignored.</p>

<p style="margin-left:11%; margin-top: 1em">For guests that
do not use drive mappings, or if the drive mappings could
not be determined, this returns an empty hash table.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details. See also
&quot;inspect-get-mountpoints&quot;,
&quot;inspect-get-filesystems&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-filesystems</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;filesystems root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns a
list of all the filesystems that we think are associated
with this operating system. This includes the root
filesystem, other ordinary filesystems, and non-mounted
devices like swap partitions.</p>

<p style="margin-left:11%; margin-top: 1em">In the case of
a multi-boot virtual machine, it is possible for a
filesystem to be shared between operating systems.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details. See also
&quot;inspect-get-mountpoints&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-format</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;format root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the format of the inspected operating system. You can use it
to detect install images, live CDs and similar.</p>

<p style="margin-left:11%; margin-top: 1em">Currently
defined formats are: <br>
&quot;installed&quot;</p>

<p style="margin-left:17%;">This is an installed operating
system.</p>

<p style="margin-left:11%;">&quot;installer&quot;</p>

<p style="margin-left:17%;">The disk image being inspected
is not an installed operating system, but a <i>bootable</i>
install disk, live <small>CD,</small> or similar.</p>

<p style="margin-left:11%;">&quot;unknown&quot;</p>

<p style="margin-left:17%;">The format of this disk image
is not known.</p>

<p style="margin-left:11%; margin-top: 1em">Future versions
of libguestfs may return other strings here. The caller
should be prepared to handle any string.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-hostname</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;hostname root</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns the hostname of the operating system as found by
inspection of the guest&rsquo;s configuration files.</p>

<p style="margin-left:11%; margin-top: 1em">If the hostname
could not be determined, then the string
<tt>&quot;unknown&quot;</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-icon</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;icon root [favicon:true|false] [highquality:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns an icon corresponding to the inspected operating
system. The icon is returned as a buffer containing a
<small>PNG</small> image (re-encoded to <small>PNG</small>
if necessary).</p>

<p style="margin-left:11%; margin-top: 1em">If it was not
possible to get an icon this function returns a zero-length
(non-NULL) buffer. <i>Callers must check for this
case</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs will
start by looking for a file called
<tt>&quot;/etc/favicon.png&quot;</tt> or
<tt>&quot;C:\etc\favicon.png&quot;</tt> and if it has the
correct format, the contents of this file will be returned.
You can disable favicons by passing the optional
<tt>&quot;favicon&quot;</tt> boolean as false (default is
true).</p>

<p style="margin-left:11%; margin-top: 1em">If finding the
favicon fails, then we look in other places in the guest for
a suitable icon.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
<tt>&quot;highquality&quot;</tt> boolean is true then only
high quality icons are returned, which means only icons of
high resolution with an alpha channel. The default (false)
is to return any icon we can, even if it is of substandard
quality.</p>

<p style="margin-left:11%; margin-top: 1em">Notes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Unlike most other inspection <small>API</small> calls,
the guest&rsquo;s disks must be mounted up before you call
this, since it needs to read information from the guest
filesystem during the call.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><b>Security:</b> The icon data comes from the untrusted
guest, and should be treated with caution.
<small>PNG</small> files have been known to contain
exploits. Ensure that libpng (or other relevant libraries)
are fully up to date before trying to process or display the
icon.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <small>PNG</small> image returned can be any size.
It might not be square. Libguestfs tries to return the
largest, highest quality icon available. The application
must scale the icon to the required size.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Extracting icons from Windows guests requires the
external <tt>&quot;wrestool&quot;</tt> program from the
<tt>&quot;icoutils&quot;</tt> package, and several programs
(<tt>&quot;bmptopnm&quot;</tt>,
<tt>&quot;pnmtopng&quot;</tt>, <tt>&quot;pamcut&quot;</tt>)
from the <tt>&quot;netpbm&quot;</tt> package. These must be
installed separately.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Operating system icons are usually trademarks. Seek
legal advice before using trademarks in applications.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-major-version</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;major&minus;version root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the major version number of the inspected operating
system.</p>

<p style="margin-left:11%; margin-top: 1em">Windows uses a
consistent versioning scheme which is <i>not</i> reflected
in the popular public names used by the operating system.
Notably the operating system known as &quot;Windows 7&quot;
is really version 6.1 (ie. major = 6, minor = 1). You can
find out the real versions corresponding to releases of
Windows by consulting Wikipedia or <small>MSDN.</small></p>

<p style="margin-left:11%; margin-top: 1em">If the version
could not be determined, then <tt>0</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-minor-version</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;minor&minus;version root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the minor version number of the inspected operating
system.</p>

<p style="margin-left:11%; margin-top: 1em">If the version
could not be determined, then <tt>0</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details. See also
&quot;inspect-get-major-version&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-mountpoints</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;mountpoints root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns a
hash of where we think the filesystems associated with this
operating system should be mounted. Callers should note that
this is at best an educated guess made by reading
configuration files such as <tt>&quot;/etc/fstab&quot;</tt>.
<i>In particular note</i> that this may return filesystems
which are non-existent or not mountable and callers should
be prepared to handle or ignore failures if they try to
mount them.</p>

<p style="margin-left:11%; margin-top: 1em">Each element in
the returned hashtable has a key which is the path of the
mountpoint (eg. <tt>&quot;/boot&quot;</tt>) and a value
which is the filesystem that would be mounted there (eg.
<tt>&quot;/dev/sda1&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">Non-mounted
devices such as swap devices are <i>not</i> returned in this
list.</p>

<p style="margin-left:11%; margin-top: 1em">For operating
systems like Windows which still use drive letters, this
call will only return an entry for the first drive
&quot;mounted on&quot; <tt>&quot;/&quot;</tt>. For
information about the mapping of drive letters to
partitions, see &quot;inspect-get-drive-mappings&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details. See also
&quot;inspect-get-filesystems&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-package-format</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;package&minus;format root</pre>


<p style="margin-left:11%; margin-top: 1em">This function
and &quot;inspect-get-package-management&quot; return the
package format and package management tool used by the
inspected operating system. For example for Fedora these
functions would return <tt>&quot;rpm&quot;</tt> (package
format) and <tt>&quot;yum&quot;</tt> (package
management).</p>

<p style="margin-left:11%; margin-top: 1em">This returns
the string <tt>&quot;unknown&quot;</tt> if we could not
determine the package format <i>or</i> if the operating
system does not have a real packaging system (eg.
Windows).</p>

<p style="margin-left:11%; margin-top: 1em">Possible
strings include: <tt>&quot;rpm&quot;</tt>,
<tt>&quot;deb&quot;</tt>, <tt>&quot;ebuild&quot;</tt>,
<tt>&quot;pisi&quot;</tt>, <tt>&quot;pacman&quot;</tt>,
<tt>&quot;pkgsrc&quot;</tt>. Future versions of libguestfs
may return other strings.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-package-management</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;package&minus;management root</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;inspect-get-package-format&quot;
and this function return the package format and package
management tool used by the inspected operating system. For
example for Fedora these functions would return
<tt>&quot;rpm&quot;</tt> (package format) and
<tt>&quot;yum&quot;</tt> (package management).</p>

<p style="margin-left:11%; margin-top: 1em">This returns
the string <tt>&quot;unknown&quot;</tt> if we could not
determine the package management tool <i>or</i> if the
operating system does not have a real packaging system (eg.
Windows).</p>

<p style="margin-left:11%; margin-top: 1em">Possible
strings include: <tt>&quot;yum&quot;</tt>,
<tt>&quot;up2date&quot;</tt>, <tt>&quot;apt&quot;</tt> (for
all Debian derivatives), <tt>&quot;portage&quot;</tt>,
<tt>&quot;pisi&quot;</tt>, <tt>&quot;pacman&quot;</tt>,
<tt>&quot;urpmi&quot;</tt>, <tt>&quot;zypper&quot;</tt>.
Future versions of libguestfs may return other strings.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-product-name</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;product&minus;name root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the product name of the inspected operating system. The
product name is generally some freeform string which can be
displayed to the user, but should not be parsed by
programs.</p>

<p style="margin-left:11%; margin-top: 1em">If the product
name could not be determined, then the string
<tt>&quot;unknown&quot;</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-product-variant</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;product&minus;variant root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the product variant of the inspected operating system.</p>

<p style="margin-left:11%; margin-top: 1em">For Windows
guests, this returns the contents of the Registry key
<tt>&quot;HKLM\Software\Microsoft\Windows
NT\CurrentVersion&quot; &quot;InstallationType&quot;</tt>
which is usually a string such as
<tt>&quot;Client&quot;</tt> or <tt>&quot;Server&quot;</tt>
(other values are possible). This can be used to distinguish
consumer and enterprise versions of Windows that have the
same version number (for example, Windows 7 and Windows 2008
Server are both version 6.1, but the former is
<tt>&quot;Client&quot;</tt> and the latter is
<tt>&quot;Server&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">For enterprise
Linux guests, in future we intend this to return the product
variant such as <tt>&quot;Desktop&quot;</tt>,
<tt>&quot;Server&quot;</tt> and so on. But this is not
implemented at present.</p>

<p style="margin-left:11%; margin-top: 1em">If the product
variant could not be determined, then the string
<tt>&quot;unknown&quot;</tt> is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details. See also
&quot;inspect-get-product-name&quot;,
&quot;inspect-get-major-version&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-roots</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;roots</pre>


<p style="margin-left:11%; margin-top: 1em">This function
is a convenient way to get the list of root devices, as
returned from a previous call to &quot;inspect-os&quot;, but
without redoing the whole inspection process.</p>

<p style="margin-left:11%; margin-top: 1em">This returns an
empty list if either no root devices were found or the
caller has not called &quot;inspect-os&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-type</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;type root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the type of the inspected operating system. Currently
defined types are: <br>
&quot;linux&quot;</p>

<p style="margin-left:17%;">Any Linux-based operating
system.</p>

<p style="margin-left:11%;">&quot;windows&quot;</p>

<p style="margin-left:17%;">Any Microsoft Windows operating
system.</p>

<p style="margin-left:11%;">&quot;freebsd&quot;</p>

<p style="margin-left:17%;">FreeBSD.</p>

<p style="margin-left:11%;">&quot;netbsd&quot;</p>

<p style="margin-left:17%;">NetBSD.</p>

<p style="margin-left:11%;">&quot;openbsd&quot;</p>

<p style="margin-left:17%;">OpenBSD.</p>

<p style="margin-left:11%;">&quot;hurd&quot;</p>

<p style="margin-left:17%;">GNU/Hurd.</p>

<p style="margin-left:11%;">&quot;dos&quot;</p>

<p style="margin-left:17%;">MS-DOS, FreeDOS and others.</p>

<p style="margin-left:11%;">&quot;minix&quot;</p>

<p style="margin-left:17%;"><small>MINIX.</small></p>

<p style="margin-left:11%;">&quot;unknown&quot;</p>

<p style="margin-left:17%;">The operating system type could
not be determined.</p>

<p style="margin-left:11%; margin-top: 1em">Future versions
of libguestfs may return other strings here. The caller
should be prepared to handle any string.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-windows-current-control-set</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;windows&minus;current&minus;control&minus;set root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the Windows CurrentControlSet of the inspected guest. The
CurrentControlSet is a registry key name such as
<tt>&quot;ControlSet001&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This call
assumes that the guest is Windows and that the Registry
could be examined by inspection. If this is not the case
then an error is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-get-windows-systemroot</b></p>


<pre style="margin-left:11%;"> inspect&minus;get&minus;windows&minus;systemroot root</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the Windows systemroot of the inspected guest. The
systemroot is a directory path such as
<tt>&quot;/WINDOWS&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This call
assumes that the guest is Windows and that the systemroot
could be determined by inspection. If this is not the case
then an error is returned.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-is-live</b></p>


<pre style="margin-left:11%;"> inspect&minus;is&minus;live root</pre>


<p style="margin-left:11%; margin-top: 1em">If
&quot;inspect-get-format&quot; returns
<tt>&quot;installer&quot;</tt> (this is an install disk),
then this returns true if a live image was detected on the
disk.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-is-multipart</b></p>


<pre style="margin-left:11%;"> inspect&minus;is&minus;multipart root</pre>


<p style="margin-left:11%; margin-top: 1em">If
&quot;inspect-get-format&quot; returns
<tt>&quot;installer&quot;</tt> (this is an install disk),
then this returns true if the disk is part of a set.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-is-netinst</b></p>


<pre style="margin-left:11%;"> inspect&minus;is&minus;netinst root</pre>


<p style="margin-left:11%; margin-top: 1em">If
&quot;inspect-get-format&quot; returns
<tt>&quot;installer&quot;</tt> (this is an install disk),
then this returns true if the disk is a network installer,
ie. not a self-contained install <small>CD</small> but one
which is likely to require network access to complete the
install.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-list-applications</b></p>


<pre style="margin-left:11%;"> inspect&minus;list&minus;applications root</pre>


<p style="margin-left:11%; margin-top: 1em">Return the list
of applications installed in the operating system.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note:</i>
This call works differently from other parts of the
inspection <small>API.</small> You have to call
&quot;inspect-os&quot;, then
&quot;inspect-get-mountpoints&quot;, then mount up the
disks, before calling this. Listing applications is a
significantly more difficult operation which requires access
to the full filesystem. Also note that unlike the other
&quot;inspect&minus;get&minus;*&quot; calls which are just
returning data cached in the libguestfs handle, this call
actually reads parts of the mounted filesystems during the
call.</p>

<p style="margin-left:11%; margin-top: 1em">This returns an
empty list if the inspection code was not able to determine
the list of applications.</p>

<p style="margin-left:11%; margin-top: 1em">The application
structure contains the following fields: <br>
&quot;app_name&quot;</p>

<p style="margin-left:17%;">The name of the application.
For Red Hat-derived and Debian-derived Linux guests, this is
the package name.</p>


<p style="margin-left:11%;">&quot;app_display_name&quot;</p>

<p style="margin-left:17%;">The display name of the
application, sometimes localized to the install language of
the guest operating system.</p>

<p style="margin-left:17%; margin-top: 1em">If unavailable
this is returned as an empty string <tt>&quot;&quot;</tt>.
Callers needing to display something can use
<tt>&quot;app_name&quot;</tt> instead.</p>

<p style="margin-left:11%;">&quot;app_epoch&quot;</p>

<p style="margin-left:17%;">For package managers which use
epochs, this contains the epoch of the package (an integer).
If unavailable, this is returned as <tt>0</tt>.</p>

<p style="margin-left:11%;">&quot;app_version&quot;</p>

<p style="margin-left:17%;">The version string of the
application or package. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app_release&quot;</p>

<p style="margin-left:17%;">The release string of the
application or package, for package managers that use this.
If unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app_install_path&quot;</p>

<p style="margin-left:17%;">The installation path of the
application (on operating systems such as Windows which use
installation paths). This path is in the format used by the
guest operating system, it is not a libguestfs path.</p>

<p style="margin-left:17%; margin-top: 1em">If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app_trans_path&quot;</p>

<p style="margin-left:17%;">The install path translated
into a libguestfs path. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app_publisher&quot;</p>

<p style="margin-left:17%;">The name of the publisher of
the application, for package managers that use this. If
unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app_url&quot;</p>

<p style="margin-left:17%;">The <small>URL</small> (eg.
upstream <small>URL</small> ) of the application. If
unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app_source_package&quot;</p>

<p style="margin-left:17%;">For packaging systems which
support this, the name of the source package. If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app_summary&quot;</p>

<p style="margin-left:17%;">A short (usually one line)
description of the application or package. If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app_description&quot;</p>

<p style="margin-left:17%;">A longer description of the
application or package. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;inspect&minus;list&minus;applications2&quot; call
instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect&minus;list&minus;applications2</b></p>


<pre style="margin-left:11%;"> inspect&minus;list&minus;applications2 root</pre>


<p style="margin-left:11%; margin-top: 1em">Return the list
of applications installed in the operating system.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note:</i>
This call works differently from other parts of the
inspection <small>API.</small> You have to call
&quot;inspect-os&quot;, then
&quot;inspect-get-mountpoints&quot;, then mount up the
disks, before calling this. Listing applications is a
significantly more difficult operation which requires access
to the full filesystem. Also note that unlike the other
&quot;inspect&minus;get&minus;*&quot; calls which are just
returning data cached in the libguestfs handle, this call
actually reads parts of the mounted filesystems during the
call.</p>

<p style="margin-left:11%; margin-top: 1em">This returns an
empty list if the inspection code was not able to determine
the list of applications.</p>

<p style="margin-left:11%; margin-top: 1em">The application
structure contains the following fields: <br>
&quot;app2_name&quot;</p>

<p style="margin-left:17%;">The name of the application.
For Red Hat-derived and Debian-derived Linux guests, this is
the package name.</p>


<p style="margin-left:11%;">&quot;app2_display_name&quot;</p>

<p style="margin-left:17%;">The display name of the
application, sometimes localized to the install language of
the guest operating system.</p>

<p style="margin-left:17%; margin-top: 1em">If unavailable
this is returned as an empty string <tt>&quot;&quot;</tt>.
Callers needing to display something can use
<tt>&quot;app2_name&quot;</tt> instead.</p>

<p style="margin-left:11%;">&quot;app2_epoch&quot;</p>

<p style="margin-left:17%;">For package managers which use
epochs, this contains the epoch of the package (an integer).
If unavailable, this is returned as <tt>0</tt>.</p>

<p style="margin-left:11%;">&quot;app2_version&quot;</p>

<p style="margin-left:17%;">The version string of the
application or package. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app2_release&quot;</p>

<p style="margin-left:17%;">The release string of the
application or package, for package managers that use this.
If unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app2_arch&quot;</p>

<p style="margin-left:17%;">The architecture string of the
application or package, for package managers that use this.
If unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app2_install_path&quot;</p>

<p style="margin-left:17%;">The installation path of the
application (on operating systems such as Windows which use
installation paths). This path is in the format used by the
guest operating system, it is not a libguestfs path.</p>

<p style="margin-left:17%; margin-top: 1em">If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app2_trans_path&quot;</p>

<p style="margin-left:17%;">The install path translated
into a libguestfs path. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app2_publisher&quot;</p>

<p style="margin-left:17%;">The name of the publisher of
the application, for package managers that use this. If
unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app2_url&quot;</p>

<p style="margin-left:17%;">The <small>URL</small> (eg.
upstream <small>URL</small> ) of the application. If
unavailable this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app2_source_package&quot;</p>

<p style="margin-left:17%;">For packaging systems which
support this, the name of the source package. If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;app2_summary&quot;</p>

<p style="margin-left:17%;">A short (usually one line)
description of the application or package. If unavailable
this is returned as an empty string
<tt>&quot;&quot;</tt>.</p>


<p style="margin-left:11%;">&quot;app2_description&quot;</p>

<p style="margin-left:17%;">A longer description of the
application or package. If unavailable this is returned as
an empty string <tt>&quot;&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>inspect-os</b></p>

<pre style="margin-left:11%;"> inspect&minus;os</pre>

<p style="margin-left:11%; margin-top: 1em">This function
uses other libguestfs functions and certain heuristics to
inspect the disk(s) (usually disks belonging to a virtual
machine), looking for operating systems.</p>

<p style="margin-left:11%; margin-top: 1em">The list
returned is empty if no operating systems were found.</p>

<p style="margin-left:11%; margin-top: 1em">If one
operating system was found, then this returns a list with a
single element, which is the name of the root filesystem of
this operating system. It is also possible for this function
to return a list containing more than one element,
indicating a dual-boot or multi-boot virtual machine, with
each element being the root filesystem of one of the
operating systems.</p>

<p style="margin-left:11%; margin-top: 1em">You can pass
the root string(s) returned to other
&quot;inspect&minus;get&minus;*&quot; functions in order to
query further information about each operating system, such
as the name and version.</p>

<p style="margin-left:11%; margin-top: 1em">This function
uses other libguestfs features such as &quot;mount-ro&quot;
and &quot;umount-all&quot; in order to mount and unmount
filesystems and look at the contents. This should be called
with no disks currently mounted. The function may also use
Augeas, so any existing Augeas handle will be closed.</p>

<p style="margin-left:11%; margin-top: 1em">This function
cannot decrypt encrypted disks. The caller must do that
first (supplying the necessary keys) if the disk is
encrypted.</p>

<p style="margin-left:11%; margin-top: 1em">Please read
&quot; <small>INSPECTION&quot;</small> in <i>guestfs</i>(3)
for more details.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-blockdev
<br>
is-blockdev-opts</b></p>

<pre style="margin-left:11%;"> is&minus;blockdev path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a block
device with the given <tt>&quot;path&quot;</tt> name.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a block device
also causes the function to return true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-chardev
<br>
is-chardev-opts</b></p>

<pre style="margin-left:11%;"> is&minus;chardev path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a
character device with the given <tt>&quot;path&quot;</tt>
name.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a chardev also
causes the function to return true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-config</b></p>

<pre style="margin-left:11%;"> is&minus;config</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
true iff this handle is being configured (in the
<tt>&quot;CONFIG&quot;</tt> state).</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on states, see <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-dir <br>
is-dir-opts</b></p>

<pre style="margin-left:11%;"> is&minus;dir path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a
directory with the given <tt>&quot;path&quot;</tt> name.
Note that it returns false for other objects like files.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a directory
also causes the function to return true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-fifo <br>
is-fifo-opts</b></p>

<pre style="margin-left:11%;"> is&minus;fifo path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a
<small>FIFO</small> (named pipe) with the given
<tt>&quot;path&quot;</tt> name.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a
<small>FIFO</small> also causes the function to return
true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-file <br>
is-file-opts</b></p>

<pre style="margin-left:11%;"> is&minus;file path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a regular
file with the given <tt>&quot;path&quot;</tt> name. Note
that it returns false for other objects like
directories.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a file also
causes the function to return true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-lv</b></p>

<pre style="margin-left:11%;"> is&minus;lv device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
tests whether <tt>&quot;device&quot;</tt> is a logical
volume, and returns true iff this is the case.</p>

<p style="margin-left:11%; margin-top: 1em"><b>is-socket
<br>
is-socket-opts</b></p>

<pre style="margin-left:11%;"> is&minus;socket path [followsymlinks:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a Unix
domain socket with the given <tt>&quot;path&quot;</tt>
name.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
flag <tt>&quot;followsymlinks&quot;</tt> is true, then a
symlink (or chain of symlinks) that ends with a socket also
causes the function to return true.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-symlink</b></p>

<pre style="margin-left:11%;"> is&minus;symlink path</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if there is a symbolic
link with the given <tt>&quot;path&quot;</tt> name.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;stat&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-whole-device</b></p>


<pre style="margin-left:11%;"> is&minus;whole&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
<tt>&quot;true&quot;</tt> if and only if
<tt>&quot;device&quot;</tt> refers to a whole block device.
That is, not a partition or a logical device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-zero</b></p>

<pre style="margin-left:11%;"> is&minus;zero path</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
true iff the file exists and the file is empty or it
contains all zero bytes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>is-zero-device</b></p>


<pre style="margin-left:11%;"> is&minus;zero&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
true iff the device exists and contains all zero bytes.</p>

<p style="margin-left:11%; margin-top: 1em">Note that for
large devices this can take a long time to run.</p>


<p style="margin-left:11%; margin-top: 1em"><b>isoinfo</b></p>

<pre style="margin-left:11%;"> isoinfo isofile</pre>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;isoinfo-device&quot; except that it works for
an <small>ISO</small> file located inside some other mounted
filesystem. Note that in the common case where you have
added an <small>ISO</small> file as a libguestfs device, you
would <i>not</i> call this. Instead you would call
&quot;isoinfo-device&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>isoinfo-device</b></p>


<pre style="margin-left:11%;"> isoinfo&minus;device device</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;device&quot;
is an <small>ISO</small> device. This returns a struct of
information read from the primary volume descriptor (the
<small>ISO</small> equivalent of the superblock) of the
device.</p>

<p style="margin-left:11%; margin-top: 1em">Usually it is
more efficient to use the <i>isoinfo</i>(1) command with the
<i>&minus;d</i> option on the host to analyze
<small>ISO</small> files, instead of going through
libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">For information
on the primary volume descriptor fields, see
http://wiki.osdev.org/ISO_9660#The_Primary_Volume_Descriptor</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-close</b></p>

<pre style="margin-left:11%;"> journal&minus;close</pre>

<p style="margin-left:11%; margin-top: 1em">Close the
journal handle.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-get</b></p>

<pre style="margin-left:11%;"> journal&minus;get</pre>

<p style="margin-left:11%; margin-top: 1em">Read the
current journal entry. This returns all the fields in the
journal as a set of <tt>&quot;(attrname, attrval)&quot;</tt>
pairs. The <tt>&quot;attrname&quot;</tt> is the field name
(a string).</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;attrval&quot;</tt> is the field value (a binary
blob, often but not always a string). Please note that
<tt>&quot;attrval&quot;</tt> is a byte array, <i>not</i> a
\0&minus;terminated C string.</p>

<p style="margin-left:11%; margin-top: 1em">The length of
data may be truncated to the data threshold (see:
&quot;journal-set-data-threshold&quot;,
&quot;journal-get-data-threshold&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">If you set the
data threshold to unlimited (<tt>0</tt>) then this call can
read a journal entry of any size, ie. it is not limited by
the libguestfs protocol.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-get-data-threshold</b></p>


<pre style="margin-left:11%;"> journal&minus;get&minus;data&minus;threshold</pre>


<p style="margin-left:11%; margin-top: 1em">Get the current
data threshold for reading journal entries. This is a hint
to the journal that it may truncate data fields to this size
when reading them (note also that it may not truncate them).
If this returns <tt>0</tt>, then the threshold is
unlimited.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;journal-set-data-threshold&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-get-realtime-usec</b></p>


<pre style="margin-left:11%;"> journal&minus;get&minus;realtime&minus;usec</pre>


<p style="margin-left:11%; margin-top: 1em">Get the
realtime (wallclock) timestamp of the current journal
entry.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-next</b></p>

<pre style="margin-left:11%;"> journal&minus;next</pre>

<p style="margin-left:11%; margin-top: 1em">Move to the
next journal entry. You have to call this at least once
after opening the handle before you are able to read
data.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
boolean tells you if there are any more journal records to
read. <tt>&quot;true&quot;</tt> means you can read the next
record (eg. using &quot;journal-get-data&quot;), and
<tt>&quot;false&quot;</tt> means you have reached the end of
the journal.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-open</b></p>


<pre style="margin-left:11%;"> journal&minus;open directory</pre>


<p style="margin-left:11%; margin-top: 1em">Open the
systemd journal located in <tt>&quot;directory&quot;</tt>.
Any previously opened journal handle is closed.</p>

<p style="margin-left:11%; margin-top: 1em">The contents of
the journal can be read using &quot;journal-next&quot; and
&quot;journal-get&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">After you have
finished using the journal, you should close the handle by
calling &quot;journal-close&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-set-data-threshold</b></p>


<pre style="margin-left:11%;"> journal&minus;set&minus;data&minus;threshold threshold</pre>


<p style="margin-left:11%; margin-top: 1em">Set the data
threshold for reading journal entries. This is a hint to the
journal that it may truncate data fields to this size when
reading them (note also that it may not truncate them). If
you set this to <tt>0</tt>, then the threshold is
unlimited.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;journal-get-data-threshold&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>journal-skip</b></p>


<pre style="margin-left:11%;"> journal&minus;skip skip</pre>


<p style="margin-left:11%; margin-top: 1em">Skip forwards
(<tt>&quot;skip &ge; 0&quot;</tt>) or backwards
(<tt>&quot;skip &lt; 0&quot;</tt>) in the journal.</p>

<p style="margin-left:11%; margin-top: 1em">The number of
entries actually skipped is returned (note
<tt>&quot;rskip&nbsp;&ge;&nbsp;0&quot;</tt>). If this is not
the same as the absolute value of the skip parameter
(<tt>&quot;|skip|&quot;</tt>) you passed in then it means
you have reached the end or the start of the journal.</p>


<p style="margin-left:11%; margin-top: 1em"><b>kill-subprocess</b></p>

<pre style="margin-left:11%;"> kill&minus;subprocess</pre>

<p style="margin-left:11%; margin-top: 1em">This kills the
hypervisor.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this. See: &quot;shutdown&quot; instead.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;shutdown&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>launch <br>
run</b></p>
<pre style="margin-left:11%;"> launch</pre>

<p style="margin-left:11%; margin-top: 1em">You should call
this after configuring the handle (eg. adding drives) but
before performing any actions.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
&quot;launch&quot; twice on the same handle. Although it
will not give an error (for historical reasons), the precise
behaviour when you do this is not well defined. Handles are
very cheap to create, so create a new one for each
launch.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lchown</b></p>


<pre style="margin-left:11%;"> lchown owner group path</pre>


<p style="margin-left:11%; margin-top: 1em">Change the file
owner to <tt>&quot;owner&quot;</tt> and group to
<tt>&quot;group&quot;</tt>. This is like &quot;chown&quot;
but if <tt>&quot;path&quot;</tt> is a symlink then the link
itself is changed, not the target.</p>

<p style="margin-left:11%; margin-top: 1em">Only numeric
uid and gid are supported. If you want to use names, you
will need to locate and parse the password file yourself
(Augeas support makes this relatively easy).</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-create-all</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;create&minus;all</pre>


<p style="margin-left:11%; margin-top: 1em">This function
scans all block devices looking for Windows dynamic disk
volumes and partitions, and creates devices for any that
were found.</p>

<p style="margin-left:11%; margin-top: 1em">Call
&quot;list-ldm-volumes&quot; and
&quot;list-ldm-partitions&quot; to return all devices.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
<b>don&rsquo;t</b> normally need to call this explicitly,
since it is done automatically at &quot;launch&quot; time.
However you might want to call this function if you have
hotplugged disks or have just created a Windows dynamic
disk.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-diskgroup-disks</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;diskgroup&minus;disks diskgroup</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
disks in a Windows dynamic disk group. The
<tt>&quot;diskgroup&quot;</tt> parameter should be the
<small>GUID</small> of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-diskgroup-name</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;diskgroup&minus;name diskgroup</pre>


<p style="margin-left:11%; margin-top: 1em">Return the name
of a Windows dynamic disk group. The
<tt>&quot;diskgroup&quot;</tt> parameter should be the
<small>GUID</small> of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-diskgroup-volumes</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;diskgroup&minus;volumes diskgroup</pre>


<p style="margin-left:11%; margin-top: 1em">Return the
volumes in a Windows dynamic disk group. The
<tt>&quot;diskgroup&quot;</tt> parameter should be the
<small>GUID</small> of a disk group, one element from the
list returned by &quot;ldmtool-scan&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-remove-all</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;remove&minus;all</pre>


<p style="margin-left:11%; margin-top: 1em">This is
essentially the opposite of &quot;ldmtool-create-all&quot;.
It removes the device mapper mappings for all Windows
dynamic disk volumes</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-scan</b></p>

<pre style="margin-left:11%;"> ldmtool&minus;scan</pre>

<p style="margin-left:11%; margin-top: 1em">This function
scans for Windows dynamic disks. It returns a list of
identifiers (GUIDs) for all disk groups that were found.
These identifiers can be passed to other
&quot;ldmtool&minus;*&quot; functions.</p>

<p style="margin-left:11%; margin-top: 1em">This function
scans all block devices. To scan a subset of block devices,
call &quot;ldmtool-scan-devices&quot; instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-scan-devices</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;scan&minus;devices 'devices ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This function
scans for Windows dynamic disks. It returns a list of
identifiers (GUIDs) for all disk groups that were found.
These identifiers can be passed to other
&quot;ldmtool&minus;*&quot; functions.</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
<tt>&quot;devices&quot;</tt> is a list of block devices
which are scanned. If this list is empty, all block devices
are scanned.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-volume-hint</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;volume&minus;hint diskgroup volume</pre>


<p style="margin-left:11%; margin-top: 1em">Return the hint
field of the volume named <tt>&quot;volume&quot;</tt> in the
disk group with <small>GUID</small>
<tt>&quot;diskgroup&quot;</tt>. This may not be defined, in
which case the empty string is returned. The hint field is
often, though not always, the name of a Windows drive, eg.
<tt>&quot;E:&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-volume-partitions</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;volume&minus;partitions diskgroup volume</pre>


<p style="margin-left:11%; margin-top: 1em">Return the list
of partitions in the volume named
<tt>&quot;volume&quot;</tt> in the disk group with
<small>GUID</small> <tt>&quot;diskgroup&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldmtool-volume-type</b></p>


<pre style="margin-left:11%;"> ldmtool&minus;volume&minus;type diskgroup volume</pre>


<p style="margin-left:11%; margin-top: 1em">Return the type
of the volume named <tt>&quot;volume&quot;</tt> in the disk
group with <small>GUID</small>
<tt>&quot;diskgroup&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Possible volume
types that can be returned here include:
<tt>&quot;simple&quot;</tt>, <tt>&quot;spanned&quot;</tt>,
<tt>&quot;striped&quot;</tt>, <tt>&quot;mirrored&quot;</tt>,
<tt>&quot;raid5&quot;</tt>. Other types may also be
returned.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lgetxattr</b></p>

<pre style="margin-left:11%;"> lgetxattr path name</pre>

<p style="margin-left:11%; margin-top: 1em">Get a single
extended attribute from file <tt>&quot;path&quot;</tt> named
<tt>&quot;name&quot;</tt>. If <tt>&quot;path&quot;</tt> is a
symlink, then this call returns an extended attribute from
the symlink.</p>

<p style="margin-left:11%; margin-top: 1em">Normally it is
better to get all extended attributes from a file in one go
by calling &quot;getxattrs&quot;. However some Linux
filesystem implementations are buggy and do not provide a
way to list out attributes. For these filesystems (notably
ntfs&minus;3g) you have to know the names of the extended
attributes you want in advance and call this function.</p>

<p style="margin-left:11%; margin-top: 1em">Extended
attribute values are blobs of binary data. If there is no
extended attribute named <tt>&quot;name&quot;</tt>, this
returns an error.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;lgetxattrs&quot;, &quot;getxattr&quot;,
<i>attr</i>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><b>lgetxattrs</b></p>

<pre style="margin-left:11%;"> lgetxattrs path</pre>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;getxattrs&quot;, but if
<tt>&quot;path&quot;</tt> is a symbolic link, then it
returns the extended attributes of the link itself.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-devices</b></p>

<pre style="margin-left:11%;"> list&minus;devices</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
block devices.</p>

<p style="margin-left:11%; margin-top: 1em">The full block
device names are returned, eg.
<tt>&quot;/dev/sda&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-disk-labels</b></p>


<pre style="margin-left:11%;"> list&minus;disk&minus;labels</pre>


<p style="margin-left:11%; margin-top: 1em">If you add
drives using the optional <tt>&quot;label&quot;</tt>
parameter of &quot;add-drive-opts&quot;, you can use this
call to map between disk labels, and raw block device and
partition names (like <tt>&quot;/dev/sda&quot;</tt> and
<tt>&quot;/dev/sda1&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">This returns a
hashtable, where keys are the disk labels (<i>without</i>
the <tt>&quot;/dev/disk/guestfs&quot;</tt> prefix), and the
values are the full raw block device and partition names
(eg. <tt>&quot;/dev/sda&quot;</tt> and
<tt>&quot;/dev/sda1&quot;</tt>).</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-dm-devices</b></p>


<pre style="margin-left:11%;"> list&minus;dm&minus;devices</pre>


<p style="margin-left:11%; margin-top: 1em">List all device
mapper devices.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
list contains <tt>&quot;/dev/mapper/*&quot;</tt> devices,
eg. ones created by a previous call to
&quot;luks-open&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Device mapper
devices which correspond to logical volumes are <i>not</i>
returned in this list. Call &quot;lvs&quot; if you want to
list logical volumes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-filesystems</b></p>

<pre style="margin-left:11%;"> list&minus;filesystems</pre>

<p style="margin-left:11%; margin-top: 1em">This inspection
command looks for filesystems on partitions, block devices
and logical volumes, returning a list of
<tt>&quot;mountables&quot;</tt> containing filesystems and
their type.</p>

<p style="margin-left:11%; margin-top: 1em">The return
value is a hash, where the keys are the devices containing
filesystems, and the values are the filesystem types. For
example:</p>

<pre style="margin-left:11%; margin-top: 1em"> &quot;/dev/sda1&quot; =&gt; &quot;ntfs&quot;
 &quot;/dev/sda2&quot; =&gt; &quot;ext2&quot;
 &quot;/dev/vg_guest/lv_root&quot; =&gt; &quot;ext4&quot;
 &quot;/dev/vg_guest/lv_swap&quot; =&gt; &quot;swap&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">The key is not
necessarily a block device. It may also be an opaque
&rsquo;mountable&rsquo; string which can be passed to
&quot;mount&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The value can
have the special value &quot;unknown&quot;, meaning the
content of the device is undetermined or empty.
&quot;swap&quot; means a Linux swap partition.</p>

<p style="margin-left:11%; margin-top: 1em">This command
runs other libguestfs commands, which might include
&quot;mount&quot; and &quot;umount&quot;, and therefore you
should use this soon after launch and only when nothing is
mounted.</p>

<p style="margin-left:11%; margin-top: 1em">Not all of the
filesystems returned will be mountable. In particular, swap
partitions are returned in the list. Also this command does
not check that each filesystem found is valid and mountable,
and some filesystems might be mountable but require special
options. Filesystems may not all belong to a single logical
operating system (use &quot;inspect-os&quot; to look for
OSes).</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-ldm-partitions</b></p>


<pre style="margin-left:11%;"> list&minus;ldm&minus;partitions</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns all Windows dynamic disk partitions that were found
at launch time. It returns a list of device names.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-ldm-volumes</b></p>


<pre style="margin-left:11%;"> list&minus;ldm&minus;volumes</pre>


<p style="margin-left:11%; margin-top: 1em">This function
returns all Windows dynamic disk volumes that were found at
launch time. It returns a list of device names.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-md-devices</b></p>


<pre style="margin-left:11%;"> list&minus;md&minus;devices</pre>


<p style="margin-left:11%; margin-top: 1em">List all Linux
md devices.</p>


<p style="margin-left:11%; margin-top: 1em"><b>list-partitions</b></p>

<pre style="margin-left:11%;"> list&minus;partitions</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
partitions detected on all block devices.</p>

<p style="margin-left:11%; margin-top: 1em">The full
partition device names are returned, eg.
<tt>&quot;/dev/sda1&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">This does not
return logical volumes. For that you will need to call
&quot;lvs&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;list-filesystems&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ll</b></p>
<pre style="margin-left:11%;"> ll directory</pre>

<p style="margin-left:11%; margin-top: 1em">List the files
in <tt>&quot;directory&quot;</tt> (relative to the root
directory, there is no cwd) in the format of &rsquo;ls
&minus;la&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
mostly useful for interactive sessions. It is <i>not</i>
intended that you try to parse the output string.</p>

<p style="margin-left:11%; margin-top: 1em"><b>llz</b></p>
<pre style="margin-left:11%;"> llz directory</pre>

<p style="margin-left:11%; margin-top: 1em">List the files
in <tt>&quot;directory&quot;</tt> in the format of &rsquo;ls
&minus;laZ&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
mostly useful for interactive sessions. It is <i>not</i>
intended that you try to parse the output string.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ln</b></p>
<pre style="margin-left:11%;"> ln target linkname</pre>

<p style="margin-left:11%; margin-top: 1em">This command
creates a hard link using the <tt>&quot;ln&quot;</tt>
command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ln-f</b></p>


<pre style="margin-left:11%;"> ln&minus;f target linkname</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a hard link using the <tt>&quot;ln
&minus;f&quot;</tt> command. The <i>&minus;f</i> option
removes the link (<tt>&quot;linkname&quot;</tt>) if it
exists already.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ln-s</b></p>


<pre style="margin-left:11%;"> ln&minus;s target linkname</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a symbolic link using the <tt>&quot;ln
&minus;s&quot;</tt> command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ln-sf</b></p>


<pre style="margin-left:11%;"> ln&minus;sf target linkname</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a symbolic link using the <tt>&quot;ln
&minus;sf&quot;</tt> command, The <i>&minus;f</i> option
removes the link (<tt>&quot;linkname&quot;</tt>) if it
exists already.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lremovexattr</b></p>


<pre style="margin-left:11%;"> lremovexattr xattr path</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;removexattr&quot;, but if
<tt>&quot;path&quot;</tt> is a symbolic link, then it
removes an extended attribute of the link itself.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ls</b></p>
<pre style="margin-left:11%;"> ls directory</pre>

<p style="margin-left:11%; margin-top: 1em">List the files
in <tt>&quot;directory&quot;</tt> (relative to the root
directory, there is no cwd). The &rsquo;.&rsquo; and
&rsquo;..&rsquo; entries are not returned, but hidden files
are shown.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ls0</b></p>

<pre style="margin-left:11%;"> ls0 dir (filenames|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This
specialized command is used to get a listing of the
filenames in the directory <tt>&quot;dir&quot;</tt>. The
list of filenames is written to the local file
<tt>&quot;filenames&quot;</tt> (on the host).</p>

<p style="margin-left:11%; margin-top: 1em">In the output
file, the filenames are separated by <tt>&quot;\0&quot;</tt>
characters.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;.&quot;</tt>
and <tt>&quot;..&quot;</tt> are not returned. The filenames
are not sorted.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lsetxattr</b></p>


<pre style="margin-left:11%;"> lsetxattr xattr val vallen path</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;setxattr&quot;, but if
<tt>&quot;path&quot;</tt> is a symbolic link, then it sets
an extended attribute of the link itself.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lstat</b></p>

<pre style="margin-left:11%;"> lstat path</pre>

<p style="margin-left:11%; margin-top: 1em">Returns file
information for the given <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;stat&quot; except that if
<tt>&quot;path&quot;</tt> is a symbolic link, then the link
is stat-ed, not the file it refers to.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as the <tt>lstat(2)</tt> system call.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;lstatns&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lstatlist</b></p>


<pre style="margin-left:11%;"> lstatlist path 'names ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to perform the &quot;lstat&quot; operation on
multiple files, where all files are in the directory
<tt>&quot;path&quot;</tt>. <tt>&quot;names&quot;</tt> is the
list of files from this directory.</p>

<p style="margin-left:11%; margin-top: 1em">On return you
get a list of stat structs, with a one-to-one correspondence
to the <tt>&quot;names&quot;</tt> list. If any name did not
exist or could not be lstat&rsquo;d, then the
<tt>&quot;st_ino&quot;</tt> field of that structure is set
to <tt>&quot;&minus;1&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This call is
intended for programs that want to efficiently list a
directory contents without making many round-trips. See also
&quot;lxattrlist&quot; for a similarly efficient call for
getting extended attributes.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;lstatnslist&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lstatns</b></p>

<pre style="margin-left:11%;"> lstatns path</pre>

<p style="margin-left:11%; margin-top: 1em">Returns file
information for the given <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;statns&quot; except that if
<tt>&quot;path&quot;</tt> is a symbolic link, then the link
is stat-ed, not the file it refers to.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as the <tt>lstat(2)</tt> system call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lstatnslist</b></p>


<pre style="margin-left:11%;"> lstatnslist path 'names ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to perform the &quot;lstatns&quot; operation on
multiple files, where all files are in the directory
<tt>&quot;path&quot;</tt>. <tt>&quot;names&quot;</tt> is the
list of files from this directory.</p>

<p style="margin-left:11%; margin-top: 1em">On return you
get a list of stat structs, with a one-to-one correspondence
to the <tt>&quot;names&quot;</tt> list. If any name did not
exist or could not be lstat&rsquo;d, then the
<tt>&quot;st_ino&quot;</tt> field of that structure is set
to <tt>&quot;&minus;1&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This call is
intended for programs that want to efficiently list a
directory contents without making many round-trips. See also
&quot;lxattrlist&quot; for a similarly efficient call for
getting extended attributes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-add-key</b></p>


<pre style="margin-left:11%;"> luks&minus;add&minus;key device keyslot</pre>


<p style="margin-left:11%; margin-top: 1em">This command
adds a new key on <small>LUKS</small> device
<tt>&quot;device&quot;</tt>. <tt>&quot;key&quot;</tt> is any
existing key, and is used to access the device.
<tt>&quot;newkey&quot;</tt> is the new key to add.
<tt>&quot;keyslot&quot;</tt> is the key slot that will be
replaced.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
<tt>&quot;keyslot&quot;</tt> already contains a key, then
this command will fail. You have to use
&quot;luks-kill-slot&quot; first to remove that key.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-close</b></p>


<pre style="margin-left:11%;"> luks&minus;close device</pre>


<p style="margin-left:11%; margin-top: 1em">This closes a
<small>LUKS</small> device that was created earlier by
&quot;luks-open&quot; or &quot;luks-open-ro&quot;. The
<tt>&quot;device&quot;</tt> parameter must be the name of
the <small>LUKS</small> mapping device (ie.
<tt>&quot;/dev/mapper/mapname&quot;</tt>) and <i>not</i> the
name of the underlying block device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-format</b></p>


<pre style="margin-left:11%;"> luks&minus;format device keyslot</pre>


<p style="margin-left:11%; margin-top: 1em">This command
erases existing data on <tt>&quot;device&quot;</tt> and
formats the device as a <small>LUKS</small> encrypted
device. <tt>&quot;key&quot;</tt> is the initial key, which
is added to key slot <tt>&quot;slot&quot;</tt>. (
<small>LUKS</small> supports 8 key slots, numbered
0&minus;7).</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-format-cipher</b></p>


<pre style="margin-left:11%;"> luks&minus;format&minus;cipher device keyslot cipher</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
the same as &quot;luks-format&quot; but it also allows you
to set the <tt>&quot;cipher&quot;</tt> used.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-kill-slot</b></p>


<pre style="margin-left:11%;"> luks&minus;kill&minus;slot device keyslot</pre>


<p style="margin-left:11%; margin-top: 1em">This command
deletes the key in key slot <tt>&quot;keyslot&quot;</tt>
from the encrypted <small>LUKS</small> device
<tt>&quot;device&quot;</tt>. <tt>&quot;key&quot;</tt> must
be one of the <i>other</i> keys.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-open</b></p>


<pre style="margin-left:11%;"> luks&minus;open device mapname</pre>


<p style="margin-left:11%; margin-top: 1em">This command
opens a block device which has been encrypted according to
the Linux Unified Key Setup ( <small>LUKS</small> )
standard.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;device&quot;</tt>
is the encrypted block device or partition.</p>

<p style="margin-left:11%; margin-top: 1em">The caller must
supply one of the keys associated with the
<small>LUKS</small> block device, in the
<tt>&quot;key&quot;</tt> parameter.</p>

<p style="margin-left:11%; margin-top: 1em">This creates a
new block device called
<tt>&quot;/dev/mapper/mapname&quot;</tt>. Reads and writes
to this block device are decrypted from and encrypted to the
underlying <tt>&quot;device&quot;</tt> respectively.</p>

<p style="margin-left:11%; margin-top: 1em">If this block
device contains <small>LVM</small> volume groups, then
calling &quot;vgscan&quot; followed by
&quot;vg-activate-all&quot; will make them visible.</p>

<p style="margin-left:11%; margin-top: 1em">Use
&quot;list-dm-devices&quot; to list all device mapper
devices.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>luks-open-ro</b></p>


<pre style="margin-left:11%;"> luks&minus;open&minus;ro device mapname</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;luks-open&quot; except that a read-only
mapping is created.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more key or passphrase parameters. Guestfish will
prompt for these separately.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvcreate</b></p>


<pre style="margin-left:11%;"> lvcreate logvol volgroup mbytes</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
<small>LVM</small> logical volume called
<tt>&quot;logvol&quot;</tt> on the volume group
<tt>&quot;volgroup&quot;</tt>, with
<tt>&quot;size&quot;</tt> megabytes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvcreate-free</b></p>


<pre style="margin-left:11%;"> lvcreate&minus;free logvol volgroup percent</pre>


<p style="margin-left:11%; margin-top: 1em">Create an
<small>LVM</small> logical volume called
<tt>&quot;/dev/volgroup/logvol&quot;</tt>, using
approximately <tt>&quot;percent&quot;</tt> % of the free
space remaining in the volume group. Most usefully, when
<tt>&quot;percent&quot;</tt> is <tt>100</tt> this will
create the largest possible <small>LV.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>lvm-canonical-lv-name</b></p>


<pre style="margin-left:11%;"> lvm&minus;canonical&minus;lv&minus;name lvname</pre>


<p style="margin-left:11%; margin-top: 1em">This converts
alternative naming schemes for LVs that you might find to
the canonical name. For example,
<tt>&quot;/dev/mapper/VG&minus;LV&quot;</tt> is converted to
<tt>&quot;/dev/VG/LV&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
returns an error if the <tt>&quot;lvname&quot;</tt>
parameter does not refer to a logical volume.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;is-lv&quot;, &quot;canonical-device-name&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvm-clear-filter</b></p>


<pre style="margin-left:11%;"> lvm&minus;clear&minus;filter</pre>


<p style="margin-left:11%; margin-top: 1em">This undoes the
effect of &quot;lvm-set-filter&quot;. <small>LVM</small>
will be able to see every block device.</p>

<p style="margin-left:11%; margin-top: 1em">This command
also clears the <small>LVM</small> cache and performs a
volume group scan.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvm-remove-all</b></p>


<pre style="margin-left:11%;"> lvm&minus;remove&minus;all</pre>


<p style="margin-left:11%; margin-top: 1em">This command
removes all <small>LVM</small> logical volumes, volume
groups and physical volumes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvm-set-filter</b></p>


<pre style="margin-left:11%;"> lvm&minus;set&minus;filter 'devices ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
<small>LVM</small> device filter so that <small>LVM</small>
will only be able to &quot;see&quot; the block devices in
the list <tt>&quot;devices&quot;</tt>, and will ignore all
other attached block devices.</p>

<p style="margin-left:11%; margin-top: 1em">Where disk
image(s) contain duplicate PVs or VGs, this command is
useful to get <small>LVM</small> to ignore the duplicates,
otherwise <small>LVM</small> can get confused. Note also
there are two types of duplication possible: either cloned
PVs/VGs which have identical UUIDs; or VGs that are not
cloned but just happen to have the same name. In normal
operation you cannot create this situation, but you can do
it outside <small>LVM,</small> eg. by cloning disk images or
by bit twiddling inside the <small>LVM</small> metadata.</p>

<p style="margin-left:11%; margin-top: 1em">This command
also clears the <small>LVM</small> cache and performs a
volume group scan.</p>

<p style="margin-left:11%; margin-top: 1em">You can filter
whole block devices or individual partitions.</p>

<p style="margin-left:11%; margin-top: 1em">You cannot use
this if any <small>VG</small> is currently in use (eg.
contains a mounted filesystem), even if you are not
filtering out that <small>VG.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>lvremove</b></p>

<pre style="margin-left:11%;"> lvremove device</pre>

<p style="margin-left:11%; margin-top: 1em">Remove an
<small>LVM</small> logical volume
<tt>&quot;device&quot;</tt>, where
<tt>&quot;device&quot;</tt> is the path to the
<small>LV,</small> such as
<tt>&quot;/dev/VG/LV&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
remove all LVs in a volume group by specifying the
<small>VG</small> name, <tt>&quot;/dev/VG&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvrename</b></p>


<pre style="margin-left:11%;"> lvrename logvol newlogvol</pre>


<p style="margin-left:11%; margin-top: 1em">Rename a
logical volume <tt>&quot;logvol&quot;</tt> with the new name
<tt>&quot;newlogvol&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvresize</b></p>

<pre style="margin-left:11%;"> lvresize device mbytes</pre>

<p style="margin-left:11%; margin-top: 1em">This resizes
(expands or shrinks) an existing <small>LVM</small> logical
volume to <tt>&quot;mbytes&quot;</tt>. When reducing, data
in the reduced part is lost.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvresize-free</b></p>


<pre style="margin-left:11%;"> lvresize&minus;free lv percent</pre>


<p style="margin-left:11%; margin-top: 1em">This expands an
existing logical volume <tt>&quot;lv&quot;</tt> so that it
fills <tt>&quot;pc&quot;</tt>% of the remaining free space
in the volume group. Commonly you would call this with pc =
100 which expands the logical volume as much as possible,
using all remaining free space in the volume group.</p>

<p style="margin-left:11%; margin-top: 1em"><b>lvs</b></p>
<pre style="margin-left:11%;"> lvs</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
logical volumes detected. This is the equivalent of the
<i>lvs</i>(8) command.</p>

<p style="margin-left:11%; margin-top: 1em">This returns a
list of the logical volume device names (eg.
<tt>&quot;/dev/VolGroup00/LogVol00&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;lvs-full&quot;, &quot;list-filesystems&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvs-full</b></p>

<pre style="margin-left:11%;"> lvs&minus;full</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
logical volumes detected. This is the equivalent of the
<i>lvs</i>(8) command. The &quot;full&quot; version includes
all fields.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lvuuid</b></p>

<pre style="margin-left:11%;"> lvuuid device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns the <small>UUID</small> of the <small>LVM LV</small>
<tt>&quot;device&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>lxattrlist</b></p>


<pre style="margin-left:11%;"> lxattrlist path 'names ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to get the extended attributes of multiple files,
where all files are in the directory
<tt>&quot;path&quot;</tt>. <tt>&quot;names&quot;</tt> is the
list of files from this directory.</p>

<p style="margin-left:11%; margin-top: 1em">On return you
get a flat list of xattr structs which must be interpreted
sequentially. The first xattr struct always has a
zero-length <tt>&quot;attrname&quot;</tt>.
<tt>&quot;attrval&quot;</tt> in this struct is zero-length
to indicate there was an error doing
<tt>&quot;lgetxattr&quot;</tt> for this file, <i>or</i> is a
C string which is a decimal number (the number of following
attributes for this file, which could be
<tt>&quot;0&quot;</tt>). Then after the first xattr struct
are the zero or more attributes for the first named file.
This repeats for the second and subsequent files.</p>

<p style="margin-left:11%; margin-top: 1em">This call is
intended for programs that want to efficiently list a
directory contents without making many round-trips. See also
&quot;lstatlist&quot; for a similarly efficient call for
getting standard stats.</p>


<p style="margin-left:11%; margin-top: 1em"><b>max-disks</b></p>

<pre style="margin-left:11%;"> max&minus;disks</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
maximum number of disks that may be added to a handle (eg.
by &quot;add-drive-opts&quot; and similar calls).</p>

<p style="margin-left:11%; margin-top: 1em">This function
was added in libguestfs 1.19.7. In previous versions of
libguestfs the limit was 25.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>MAXIMUM NUMBER OF DISKS&quot;</small> in
<i>guestfs</i>(3) for additional information on this
topic.</p>


<p style="margin-left:11%; margin-top: 1em"><b>md-create</b></p>


<pre style="margin-left:11%;"> md&minus;create name 'devices ...' [missingbitmap:N] [nrdevices:N] [spare:N] [chunk:N] [level:..]</pre>


<p style="margin-left:11%; margin-top: 1em">Create a Linux
md ( <small>RAID</small> ) device named
<tt>&quot;name&quot;</tt> on the devices in the list
<tt>&quot;devices&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are: <br>
&quot;missingbitmap&quot;</p>

<p style="margin-left:17%;">A bitmap of missing devices. If
a bit is set it means that a missing device is added to the
array. The least significant bit corresponds to the first
device in the array.</p>

<p style="margin-left:17%; margin-top: 1em">As
examples:</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;devices = [&quot;/dev/sda&quot;]&quot;</tt> and
<tt>&quot;missingbitmap = 0x1&quot;</tt> then the resulting
array would be <tt>&quot;[&lt;missing&gt;,
&quot;/dev/sda&quot;]&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;devices = [&quot;/dev/sda&quot;]&quot;</tt> and
<tt>&quot;missingbitmap = 0x2&quot;</tt> then the resulting
array would be <tt>&quot;[&quot;/dev/sda&quot;,
&lt;missing&gt;]&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">This defaults
to <tt>0</tt> (no missing devices).</p>

<p style="margin-left:17%; margin-top: 1em">The length of
<tt>&quot;devices&quot;</tt> + the number of bits set in
<tt>&quot;missingbitmap&quot;</tt> must equal
<tt>&quot;nrdevices&quot;</tt> +
<tt>&quot;spare&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;nrdevices&quot;</p>

<p style="margin-left:17%;">The number of active
<small>RAID</small> devices.</p>

<p style="margin-left:17%; margin-top: 1em">If not set,
this defaults to the length of <tt>&quot;devices&quot;</tt>
plus the number of bits set in
<tt>&quot;missingbitmap&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;spare&quot;</p>

<p style="margin-left:17%;">The number of spare
devices.</p>

<p style="margin-left:17%; margin-top: 1em">If not set,
this defaults to <tt>0</tt>.</p>

<p style="margin-left:11%;">&quot;chunk&quot;</p>

<p style="margin-left:17%;">The chunk size in bytes.</p>

<p style="margin-left:11%;">&quot;level&quot;</p>

<p style="margin-left:17%;">The <small>RAID</small> level,
which can be one of: <i>linear</i>, <i>raid0</i>, <i>0</i>,
<i>stripe</i>, <i>raid1</i>, <i>1</i>, <i>mirror</i>,
<i>raid4</i>, <i>4</i>, <i>raid5</i>, <i>5</i>,
<i>raid6</i>, <i>6</i>, <i>raid10</i>, <i>10</i>. Some of
these are synonymous, and more levels may be added in
future.</p>

<p style="margin-left:17%; margin-top: 1em">If not set,
this defaults to <tt>&quot;raid1&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>md-detail</b></p>

<pre style="margin-left:11%;"> md&minus;detail md</pre>

<p style="margin-left:11%; margin-top: 1em">This command
exposes the output of &rsquo;mdadm &minus;DY
&lt;md&gt;&rsquo;. The following fields are usually present
in the returned hash. Other fields may also be present. <br>
&quot;level&quot;</p>

<p style="margin-left:17%;">The raid level of the
<small>MD</small> device.</p>

<p style="margin-left:11%;">&quot;devices&quot;</p>

<p style="margin-left:17%;">The number of underlying
devices in the <small>MD</small> device.</p>

<p style="margin-left:11%;">&quot;metadata&quot;</p>

<p style="margin-left:17%;">The metadata version used.</p>

<p style="margin-left:11%;">&quot;uuid&quot;</p>

<p style="margin-left:17%;">The <small>UUID</small> of the
<small>MD</small> device.</p>

<p style="margin-left:11%;">&quot;name&quot;</p>

<p style="margin-left:17%;">The name of the
<small>MD</small> device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>md-stat</b></p>

<pre style="margin-left:11%;"> md&minus;stat md</pre>

<p style="margin-left:11%; margin-top: 1em">This call
returns a list of the underlying devices which make up the
single software <small>RAID</small> array device
<tt>&quot;md&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">To get a list
of software <small>RAID</small> devices, call
&quot;list-md-devices&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Each structure
returned corresponds to one device along with additional
status information: <br>
&quot;mdstat_device&quot;</p>

<p style="margin-left:17%;">The name of the underlying
device.</p>

<p style="margin-left:11%;">&quot;mdstat_index&quot;</p>

<p style="margin-left:17%;">The index of this device within
the array.</p>

<p style="margin-left:11%;">&quot;mdstat_flags&quot;</p>

<p style="margin-left:17%;">Flags associated with this
device. This is a string containing (in no specific order)
zero or more of the following flags:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p>&quot;W&quot;</p></td>
<td width="1%"></td>
<td width="34%">


<p>write-mostly</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p>&quot;F&quot;</p></td>
<td width="1%"></td>
<td width="34%">


<p>device is faulty</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p>&quot;S&quot;</p></td>
<td width="1%"></td>
<td width="34%">


<p>device is a <small>RAID</small> spare</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="5%">


<p>&quot;R&quot;</p></td>
<td width="1%"></td>
<td width="34%">


<p>replacement</p></td>
<td width="43%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>md-stop</b></p>

<pre style="margin-left:11%;"> md&minus;stop md</pre>

<p style="margin-left:11%; margin-top: 1em">This command
deactivates the <small>MD</small> array named
<tt>&quot;md&quot;</tt>. The device is stopped, but it is
not destroyed or zeroed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkdir</b></p>

<pre style="margin-left:11%;"> mkdir path</pre>

<p style="margin-left:11%; margin-top: 1em">Create a
directory named <tt>&quot;path&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkdir-mode</b></p>


<pre style="margin-left:11%;"> mkdir&minus;mode path mode</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a directory, setting the initial permissions of the
directory to <tt>&quot;mode&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">For common
Linux filesystems, the actual mode which is set will be
<tt>&quot;mode &amp; ~umask &amp; 01777&quot;</tt>.
Non-native-Linux filesystems may interpret the mode in other
ways.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;mkdir&quot;, &quot;umask&quot;</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkdir-p</b></p>

<pre style="margin-left:11%;"> mkdir&minus;p path</pre>

<p style="margin-left:11%; margin-top: 1em">Create a
directory named <tt>&quot;path&quot;</tt>, creating any
parent directories as necessary. This is like the
<tt>&quot;mkdir &minus;p&quot;</tt> shell command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkdtemp</b></p>

<pre style="margin-left:11%;"> mkdtemp tmpl</pre>

<p style="margin-left:11%; margin-top: 1em">This command
creates a temporary directory. The <tt>&quot;tmpl&quot;</tt>
parameter should be a full pathname for the temporary
directory name with the final six characters being &quot;
<small>XXXXXX&quot;.</small></p>

<p style="margin-left:11%; margin-top: 1em">For example:
&quot;/tmp/myprogXXXXXX&quot; or
&quot;/Temp/myprogXXXXXX&quot;, the second one being
suitable for Windows filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">The name of the
temporary directory that was created is returned.</p>

<p style="margin-left:11%; margin-top: 1em">The temporary
directory is created with mode 0700 and is owned by
root.</p>

<p style="margin-left:11%; margin-top: 1em">The caller is
responsible for deleting the temporary directory and its
contents after use.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
<i>mkdtemp</i>(3)</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2fs</b></p>


<pre style="margin-left:11%;"> mke2fs device [blockscount:N] [blocksize:N] [fragsize:N] [blockspergroup:N] [numberofgroups:N] [bytesperinode:N] [inodesize:N] [journalsize:N] [numberofinodes:N] [stridesize:N] [stripewidth:N] [maxonlineresize:N] [reservedblockspercentage:N] [mmpupdateinterval:N] [journaldevice:..] [label:..] [lastmounteddir:..] [creatoros:..] [fstype:..] [usagetype:..] [uuid:..] [forcecreate:true|false] [writesbandgrouponly:true|false] [lazyitableinit:true|false] [lazyjournalinit:true|false] [testfs:true|false] [discard:true|false] [quotatype:true|false] [extent:true|false] [filetype:true|false] [flexbg:true|false] [hasjournal:true|false] [journaldev:true|false] [largefile:true|false] [quota:true|false] [resizeinode:true|false] [sparsesuper:true|false] [uninitbg:true|false]</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;mke2fs&quot;
is used to create an ext2, ext3, or ext4 filesystem on
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;blockscount&quot;</tt> is the size of the
filesystem in blocks. If omitted it defaults to the size of
<tt>&quot;device&quot;</tt>. Note if the filesystem is too
small to contain a journal, <tt>&quot;mke2fs&quot;</tt> will
silently create an ext2 filesystem instead.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2fs&minus;J</b></p>


<pre style="margin-left:11%;"> mke2fs&minus;J fstype blocksize device journal</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2/3/4 filesystem on <tt>&quot;device&quot;</tt> with an
external journal on <tt>&quot;journal&quot;</tt>. It is
equivalent to the command:</p>

<pre style="margin-left:11%; margin-top: 1em"> mke2fs &minus;t fstype &minus;b blocksize &minus;J device=&lt;journal&gt; &lt;device&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">See also
&quot;mke2journal&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2fs&minus;JL</b></p>


<pre style="margin-left:11%;"> mke2fs&minus;JL fstype blocksize device label</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2/3/4 filesystem on <tt>&quot;device&quot;</tt> with an
external journal on the journal labeled
<tt>&quot;label&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;mke2journal&minus;L&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2fs&minus;JU</b></p>


<pre style="margin-left:11%;"> mke2fs&minus;JU fstype blocksize device uuid</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2/3/4 filesystem on <tt>&quot;device&quot;</tt> with an
external journal on the journal with <small>UUID</small>
<tt>&quot;uuid&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;mke2journal&minus;U&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2journal</b></p>


<pre style="margin-left:11%;"> mke2journal blocksize device</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2 external journal on <tt>&quot;device&quot;</tt>. It is
equivalent to the command:</p>

<pre style="margin-left:11%; margin-top: 1em"> mke2fs &minus;O journal_dev &minus;b blocksize device</pre>


<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2journal&minus;L</b></p>


<pre style="margin-left:11%;"> mke2journal&minus;L blocksize label device</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2 external journal on <tt>&quot;device&quot;</tt> with
label <tt>&quot;label&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mke2journal&minus;U</b></p>


<pre style="margin-left:11%;"> mke2journal&minus;U blocksize uuid device</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
ext2 external journal on <tt>&quot;device&quot;</tt> with
<small>UUID</small> <tt>&quot;uuid&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mke2fs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkfifo</b></p>

<pre style="margin-left:11%;"> mkfifo mode path</pre>

<p style="margin-left:11%; margin-top: 1em">This call
creates a <small>FIFO</small> (named pipe) called
<tt>&quot;path&quot;</tt> with mode
<tt>&quot;mode&quot;</tt>. It is just a convenient wrapper
around &quot;mknod&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The mode
actually set is affected by the umask.</p>

<p style="margin-left:11%; margin-top: 1em"><b>mkfs <br>
mkfs-opts</b></p>

<pre style="margin-left:11%;"> mkfs fstype device [blocksize:N] [features:..] [inode:N] [sectorsize:N]</pre>


<p style="margin-left:11%; margin-top: 1em">This function
creates a filesystem on <tt>&quot;device&quot;</tt>. The
filesystem type is <tt>&quot;fstype&quot;</tt>, for example
<tt>&quot;ext3&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are: <br>
&quot;blocksize&quot;</p>

<p style="margin-left:17%;">The filesystem block size.
Supported block sizes depend on the filesystem type, but
typically they are <tt>1024</tt>, <tt>2048</tt> or
<tt>4096</tt> for Linux ext2/3 filesystems.</p>

<p style="margin-left:17%; margin-top: 1em">For
<small>VFAT</small> and <small>NTFS</small> the
<tt>&quot;blocksize&quot;</tt> parameter is treated as the
requested cluster size.</p>

<p style="margin-left:17%; margin-top: 1em">For
<small>UFS</small> block sizes, please see
<i>mkfs.ufs</i>(8).</p>

<p style="margin-left:11%;">&quot;features&quot;</p>

<p style="margin-left:17%;">This passes the <i>&minus;O</i>
parameter to the external mkfs program.</p>

<p style="margin-left:17%; margin-top: 1em">For certain
filesystem types, this allows extra filesystem features to
be selected. See <i>mke2fs</i>(8) and <i>mkfs.ufs</i>(8) for
more details.</p>

<p style="margin-left:17%; margin-top: 1em">You cannot use
this optional parameter with the <tt>&quot;gfs&quot;</tt> or
<tt>&quot;gfs2&quot;</tt> filesystem type.</p>

<p style="margin-left:11%;">&quot;inode&quot;</p>

<p style="margin-left:17%;">This passes the <i>&minus;I</i>
parameter to the external <i>mke2fs</i>(8) program which
sets the inode size (only for ext2/3/4 filesystems at
present).</p>

<p style="margin-left:11%;">&quot;sectorsize&quot;</p>

<p style="margin-left:17%;">This passes the <i>&minus;S</i>
parameter to external <i>mkfs.ufs</i>(8) program, which sets
sector size for ufs filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkfs-b</b></p>


<pre style="margin-left:11%;"> mkfs&minus;b fstype blocksize device</pre>


<p style="margin-left:11%; margin-top: 1em">This call is
similar to &quot;mkfs&quot;, but it allows you to control
the block size of the resulting filesystem. Supported block
sizes depend on the filesystem type, but typically they are
<tt>1024</tt>, <tt>2048</tt> or <tt>4096</tt> only.</p>

<p style="margin-left:11%; margin-top: 1em">For
<small>VFAT</small> and <small>NTFS</small> the
<tt>&quot;blocksize&quot;</tt> parameter is treated as the
requested cluster size.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mkfs&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkfs-btrfs</b></p>


<pre style="margin-left:11%;"> mkfs&minus;btrfs 'devices ...' [allocstart:N] [bytecount:N] [datatype:..] [leafsize:N] [label:..] [metadata:..] [nodesize:N] [sectorsize:N]</pre>


<p style="margin-left:11%; margin-top: 1em">Create a btrfs
filesystem, allowing all configurables to be set. For more
information on the optional arguments, see
<i>mkfs.btrfs</i>(8).</p>

<p style="margin-left:11%; margin-top: 1em">Since btrfs
filesystems can span multiple devices, this takes a
non-empty list of devices.</p>

<p style="margin-left:11%; margin-top: 1em">To create
general filesystems, use &quot;mkfs&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>mklost-and-found</b></p>


<pre style="margin-left:11%;"> mklost&minus;and&minus;found mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">Make the
<tt>&quot;lost+found&quot;</tt> directory, normally in the
root directory of an ext2/3/4 filesystem.
<tt>&quot;mountpoint&quot;</tt> is the directory under which
we try to create the <tt>&quot;lost+found&quot;</tt>
directory.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkmountpoint</b></p>


<pre style="margin-left:11%;"> mkmountpoint exemptpath</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;mkmountpoint&quot;
and &quot;rmmountpoint&quot; are specialized calls that can
be used to create extra mountpoints before mounting the
first filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">These calls are
<i>only</i> necessary in some very limited circumstances,
mainly the case where you want to mount a mix of unrelated
and/or read-only filesystems together.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
live CDs often contain a &quot;Russian doll&quot; nest of
filesystems, an <small>ISO</small> outer layer, with a
squashfs image inside, with an ext2/3 image inside that. You
can unpack this as follows in guestfish:</p>

<pre style="margin-left:11%; margin-top: 1em"> add&minus;ro Fedora&minus;11&minus;i686&minus;Live.iso
 run
 mkmountpoint /cd
 mkmountpoint /sqsh
 mkmountpoint /ext3fs
 mount /dev/sda /cd
 mount&minus;loop /cd/LiveOS/squashfs.img /sqsh
 mount&minus;loop /sqsh/LiveOS/ext3fs.img /ext3fs</pre>


<p style="margin-left:11%; margin-top: 1em">The inner
filesystem is now unpacked under the /ext3fs mountpoint.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;mkmountpoint&quot;
is not compatible with &quot;umount-all&quot;. You may get
unexpected errors if you try to mix these calls. It is
safest to manually unmount filesystems and remove
mountpoints after use.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;umount-all&quot;
unmounts filesystems by sorting the paths longest first, so
for this to work for manual mountpoints, you must ensure
that the innermost mountpoints have the longest pathnames,
as in the example code above.</p>

<p style="margin-left:11%; margin-top: 1em">For more
details see
https://bugzilla.redhat.com/show_bug.cgi?id=599503</p>

<p style="margin-left:11%; margin-top: 1em">Autosync [see
&quot;set-autosync&quot;, this is set by default on handles]
can cause &quot;umount-all&quot; to be called when the
handle is closed which can also trigger these issues.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mknod</b></p>


<pre style="margin-left:11%;"> mknod mode devmajor devminor path</pre>


<p style="margin-left:11%; margin-top: 1em">This call
creates block or character special devices, or named pipes
(FIFOs).</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;mode&quot;</tt> parameter should be the mode,
using the standard constants. <tt>&quot;devmajor&quot;</tt>
and <tt>&quot;devminor&quot;</tt> are the device major and
minor numbers, only used when creating block and character
special devices.</p>

<p style="margin-left:11%; margin-top: 1em">Note that, just
like <i>mknod</i>(2), the mode must be bitwise
<small>OR</small> &rsquo;d with S_IFBLK, S_IFCHR, S_IFIFO or
S_IFSOCK (otherwise this call just creates a regular file).
These constants are available in the standard Linux header
files, or you can use &quot;mknod-b&quot;,
&quot;mknod-c&quot; or &quot;mkfifo&quot; which are wrappers
around this command which bitwise <small>OR</small> in the
appropriate constant for you.</p>

<p style="margin-left:11%; margin-top: 1em">The mode
actually set is affected by the umask.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mknod-b</b></p>


<pre style="margin-left:11%;"> mknod&minus;b mode devmajor devminor path</pre>


<p style="margin-left:11%; margin-top: 1em">This call
creates a block device node called <tt>&quot;path&quot;</tt>
with mode <tt>&quot;mode&quot;</tt> and device major/minor
<tt>&quot;devmajor&quot;</tt> and
<tt>&quot;devminor&quot;</tt>. It is just a convenient
wrapper around &quot;mknod&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The mode
actually set is affected by the umask.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mknod-c</b></p>


<pre style="margin-left:11%;"> mknod&minus;c mode devmajor devminor path</pre>


<p style="margin-left:11%; margin-top: 1em">This call
creates a char device node called <tt>&quot;path&quot;</tt>
with mode <tt>&quot;mode&quot;</tt> and device major/minor
<tt>&quot;devmajor&quot;</tt> and
<tt>&quot;devminor&quot;</tt>. It is just a convenient
wrapper around &quot;mknod&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The mode
actually set is affected by the umask.</p>

<p style="margin-left:11%; margin-top: 1em"><b>mkswap <br>
mkswap-opts</b></p>

<pre style="margin-left:11%;"> mkswap device [label:..] [uuid:..]</pre>


<p style="margin-left:11%; margin-top: 1em">Create a Linux
swap partition on <tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The option
arguments <tt>&quot;label&quot;</tt> and
<tt>&quot;uuid&quot;</tt> allow you to set the label and/or
<small>UUID</small> of the new swap partition.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkswap-L</b></p>


<pre style="margin-left:11%;"> mkswap&minus;L label device</pre>


<p style="margin-left:11%; margin-top: 1em">Create a swap
partition on <tt>&quot;device&quot;</tt> with label
<tt>&quot;label&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
cannot attach a swap label to a block device (eg.
<tt>&quot;/dev/sda&quot;</tt>), just to a partition. This
appears to be a limitation of the kernel or swap tools.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mkswap&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkswap-U</b></p>


<pre style="margin-left:11%;"> mkswap&minus;U uuid device</pre>


<p style="margin-left:11%; margin-top: 1em">Create a swap
partition on <tt>&quot;device&quot;</tt> with
<small>UUID</small> <tt>&quot;uuid&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;mkswap&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mkswap-file</b></p>

<pre style="margin-left:11%;"> mkswap&minus;file path</pre>

<p style="margin-left:11%; margin-top: 1em">Create a swap
file.</p>

<p style="margin-left:11%; margin-top: 1em">This command
just writes a swap file signature to an existing file. To
create the file itself, use something like
&quot;fallocate&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mktemp</b></p>


<pre style="margin-left:11%;"> mktemp tmpl [suffix:..]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates a temporary file. The <tt>&quot;tmpl&quot;</tt>
parameter should be a full pathname for the temporary
directory name with the final six characters being &quot;
<small>XXXXXX&quot;.</small></p>

<p style="margin-left:11%; margin-top: 1em">For example:
&quot;/tmp/myprogXXXXXX&quot; or
&quot;/Temp/myprogXXXXXX&quot;, the second one being
suitable for Windows filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">The name of the
temporary file that was created is returned.</p>

<p style="margin-left:11%; margin-top: 1em">The temporary
file is created with mode 0600 and is owned by root.</p>

<p style="margin-left:11%; margin-top: 1em">The caller is
responsible for deleting the temporary file after use.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
<tt>&quot;suffix&quot;</tt> parameter is given, then the
suffix (eg. <tt>&quot;.txt&quot;</tt>) is appended to the
temporary name.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;mkdtemp&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>modprobe</b></p>

<pre style="margin-left:11%;"> modprobe modulename</pre>

<p style="margin-left:11%; margin-top: 1em">This loads a
kernel module in the appliance.</p>

<p style="margin-left:11%; margin-top: 1em">The kernel
module must have been whitelisted when libguestfs was built
(see <tt>&quot;appliance/kmod.whitelist.in&quot;</tt> in the
source).</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount</b></p>


<pre style="margin-left:11%;"> mount mountable mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">Mount a guest
disk at a position in the filesystem. Block devices are
named <tt>&quot;/dev/sda&quot;</tt>,
<tt>&quot;/dev/sdb&quot;</tt> and so on, as they were added
to the guest. If those block devices contain partitions,
they will have the usual names (eg.
<tt>&quot;/dev/sda1&quot;</tt>). Also <small>LVM</small>
<tt>&quot;/dev/VG/LV&quot;</tt>&minus;style names can be
used, or &rsquo;mountable&rsquo; strings returned by
&quot;list-filesystems&quot; or
&quot;inspect-get-mountpoints&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The rules are
the same as for <i>mount</i>(2): A filesystem must first be
mounted on <tt>&quot;/&quot;</tt> before others can be
mounted. Other filesystems can only be mounted on
directories which already exist.</p>

<p style="margin-left:11%; margin-top: 1em">The mounted
filesystem is writable, if we have sufficient permissions on
the underlying device.</p>

<p style="margin-left:11%; margin-top: 1em">Before
libguestfs 1.13.16, this call implicitly added the options
<tt>&quot;sync&quot;</tt> and <tt>&quot;noatime&quot;</tt>.
The <tt>&quot;sync&quot;</tt> option greatly slowed writes
and caused many problems for users. If your program might
need to work with older versions of libguestfs, use
&quot;mount-options&quot; instead (using an empty string for
the first parameter if you don&rsquo;t want any
options).</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-local</b></p>


<pre style="margin-left:11%;"> mount&minus;local localmountpoint [readonly:true|false] [options:..] [cachetimeout:N] [debugcalls:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This call
exports the libguestfs-accessible filesystem to a local
mountpoint (directory) called
<tt>&quot;localmountpoint&quot;</tt>. Ordinary reads and
writes to files and directories under
<tt>&quot;localmountpoint&quot;</tt> are redirected through
libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
<tt>&quot;readonly&quot;</tt> flag is set to true, then
writes to the filesystem return error
<tt>&quot;EROFS&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;options&quot;</tt>
is a comma-separated list of mount options. See
<i>guestmount</i>(1) for some useful options.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;cachetimeout&quot;</tt>
sets the timeout (in seconds) for cached directory entries.
The default is 60 seconds. See <i>guestmount</i>(1) for
further information.</p>

<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;debugcalls&quot;</tt> is set to true, then
additional debugging information is generated for every
<small>FUSE</small> call.</p>

<p style="margin-left:11%; margin-top: 1em">When
&quot;mount-local&quot; returns, the filesystem is ready,
but is not processing requests (access to it will block).
You have to call &quot;mount-local-run&quot; to run the main
loop.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>MOUNT LOCAL&quot;</small> in <i>guestfs</i>(3) for
full documentation.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-local-run</b></p>


<pre style="margin-left:11%;"> mount&minus;local&minus;run</pre>


<p style="margin-left:11%; margin-top: 1em">Run the main
loop which translates kernel calls to libguestfs calls.</p>

<p style="margin-left:11%; margin-top: 1em">This should
only be called after &quot;mount-local&quot; returns
successfully. The call will not return until the filesystem
is unmounted.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b> you
must <i>not</i> make concurrent libguestfs calls on the same
handle from another thread.</p>

<p style="margin-left:11%; margin-top: 1em">You may call
this from a different thread than the one which called
&quot;mount-local&quot;, subject to the usual rules for
threads and libguestfs (see &quot; <small>MULTIPLE HANDLES
AND MULTIPLE THREADS&quot;</small> in
<i>guestfs</i>(3)).</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>MOUNT LOCAL&quot;</small> in <i>guestfs</i>(3) for
full documentation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-loop</b></p>


<pre style="margin-left:11%;"> mount&minus;loop file mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">This command
lets you mount <tt>&quot;file&quot;</tt> (a filesystem image
in a file) on a mount point. It is entirely equivalent to
the command <tt>&quot;mount &minus;o loop file
mountpoint&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-options</b></p>


<pre style="margin-left:11%;"> mount&minus;options options mountable mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as the &quot;mount&quot; command, but it allows you to
set the mount options as for the <i>mount</i>(8)
<i>&minus;o</i> flag.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>&quot;options&quot;</tt> parameter is an empty string,
then no options are passed (all options default to whatever
the filesystem uses).</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-ro</b></p>


<pre style="margin-left:11%;"> mount&minus;ro mountable mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as the &quot;mount&quot; command, but it mounts the
filesystem with the read-only (<i>&minus;o ro</i>) flag.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mount-vfs</b></p>


<pre style="margin-left:11%;"> mount&minus;vfs options vfstype mountable mountpoint</pre>


<p style="margin-left:11%; margin-top: 1em">This is the
same as the &quot;mount&quot; command, but it allows you to
set both the mount options and the vfstype as for the
<i>mount</i>(8) <i>&minus;o</i> and <i>&minus;t</i>
flags.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mountpoints</b></p>

<pre style="margin-left:11%;"> mountpoints</pre>

<p style="margin-left:11%; margin-top: 1em">This call is
similar to &quot;mounts&quot;. That call returns a list of
devices. This one returns a hash table (map) of device name
to directory where the device is mounted.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mounts</b></p>

<pre style="margin-left:11%;"> mounts</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the list of currently mounted filesystems. It returns the
list of devices (eg. <tt>&quot;/dev/sda1&quot;</tt>,
<tt>&quot;/dev/VG/LV&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">Some internal
mounts are not shown.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;mountpoints&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><b>mv</b></p>
<pre style="margin-left:11%;"> mv src dest</pre>

<p style="margin-left:11%; margin-top: 1em">This moves a
file from <tt>&quot;src&quot;</tt> to
<tt>&quot;dest&quot;</tt> where <tt>&quot;dest&quot;</tt> is
either a destination filename or destination directory.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;rename&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>nr-devices</b></p>

<pre style="margin-left:11%;"> nr&minus;devices</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the number of whole block devices that were added. This is
the same as the number of devices that would be returned if
you called &quot;list-devices&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To find out the
maximum number of devices that could be added, call
&quot;max-disks&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ntfs&minus;3g&minus;probe</b></p>


<pre style="margin-left:11%;"> ntfs&minus;3g&minus;probe true|false device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
runs the <i>ntfs&minus;3g.probe</i>(8) command which probes
an <small>NTFS</small> <tt>&quot;device&quot;</tt> for
mountability. (Not all <small>NTFS</small> volumes can be
mounted read-write, and some cannot be mounted at all).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;rw&quot;</tt>
is a boolean flag. Set it to true if you want to test if the
volume can be mounted read-write. Set it to false if you
want to test if the volume can be mounted read-only.</p>

<p style="margin-left:11%; margin-top: 1em">The return
value is an integer which <tt>0</tt> if the operation would
succeed, or some non-zero value documented in the
<i>ntfs&minus;3g.probe</i>(8) manual page.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ntfsclone-in</b></p>


<pre style="margin-left:11%;"> ntfsclone&minus;in (backupfile|&minus;) device</pre>


<p style="margin-left:11%; margin-top: 1em">Restore the
<tt>&quot;backupfile&quot;</tt> (from a previous call to
&quot;ntfsclone-out&quot;) to <tt>&quot;device&quot;</tt>,
overwriting any existing contents of this device.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ntfsclone-out</b></p>


<pre style="margin-left:11%;"> ntfsclone&minus;out device (backupfile|&minus;) [metadataonly:true|false] [rescue:true|false] [ignorefscheck:true|false] [preservetimestamps:true|false] [force:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">Stream the
<small>NTFS</small> filesystem <tt>&quot;device&quot;</tt>
to the local file <tt>&quot;backupfile&quot;</tt>. The
format used for the backup file is a special format used by
the <i>ntfsclone</i>(8) tool.</p>

<p style="margin-left:11%; margin-top: 1em">If the optional
<tt>&quot;metadataonly&quot;</tt> flag is true, then
<i>only</i> the metadata is saved, losing all the user data
(this is useful for diagnosing some filesystem
problems).</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;rescue&quot;</tt>,
<tt>&quot;ignorefscheck&quot;</tt>,
<tt>&quot;preservetimestamps&quot;</tt> and
<tt>&quot;force&quot;</tt> flags have precise meanings
detailed in the <i>ntfsclone</i>(8) man page.</p>

<p style="margin-left:11%; margin-top: 1em">Use
&quot;ntfsclone-in&quot; to restore the file back to a
libguestfs device.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>ntfsfix</b></p>


<pre style="margin-left:11%;"> ntfsfix device [clearbadsectors:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
repairs some fundamental <small>NTFS</small>
inconsistencies, resets the <small>NTFS</small> journal
file, and schedules an <small>NTFS</small> consistency check
for the first boot into Windows.</p>

<p style="margin-left:11%; margin-top: 1em">This is
<i>not</i> an equivalent of Windows
<tt>&quot;chkdsk&quot;</tt>. It does <i>not</i> scan the
filesystem for inconsistencies.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;clearbadsectors&quot;</tt> flag clears the list of
bad sectors. This is useful after cloning a disk with bad
sectors to a new disk.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>ntfsresize
<br>
ntfsresize-opts</b></p>

<pre style="margin-left:11%;"> ntfsresize device [size:N] [force:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
resizes an <small>NTFS</small> filesystem, expanding or
shrinking it to the size of the underlying device.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are: <br>
&quot;size&quot;</p>

<p style="margin-left:17%;">The new size (in bytes) of the
filesystem. If omitted, the filesystem is resized to fit the
container (eg. partition).</p>

<p style="margin-left:11%;">&quot;force&quot;</p>

<p style="margin-left:17%;">If this option is true, then
force the resize of the filesystem even if the filesystem is
marked as requiring a consistency check.</p>

<p style="margin-left:17%; margin-top: 1em">After the
resize operation, the filesystem is always marked as
requiring a consistency check (for safety). You have to boot
into Windows to perform this check and clear this condition.
If you <i>don&rsquo;t</i> set the <tt>&quot;force&quot;</tt>
option then it is not possible to call
&quot;ntfsresize&quot; multiple times on a single filesystem
without booting into Windows between each resize.</p>

<p style="margin-left:11%; margin-top: 1em">See also
<i>ntfsresize</i>(8).</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>ntfsresize-size</b></p>


<pre style="margin-left:11%;"> ntfsresize&minus;size device size</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
the same as &quot;ntfsresize&quot; except that it allows you
to specify the new size (in bytes) explicitly.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;ntfsresize&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>parse-environment</b></p>


<pre style="margin-left:11%;"> parse&minus;environment</pre>


<p style="margin-left:11%; margin-top: 1em">Parse the
program&rsquo;s environment and set flags in the handle
accordingly. For example if
<tt>&quot;LIBGUESTFS_DEBUG=1&quot;</tt> then the
&rsquo;verbose&rsquo; flag is set in the handle.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Most
programs do not need to call this</i>. It is done implicitly
when you call &quot;create&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>ENVIRONMENT VARIABLES&quot;</small> in
<i>guestfs</i>(3) for a list of environment variables that
can affect libguestfs handles. See also
&quot;guestfs_create_flags&quot; in <i>guestfs</i>(3), and
&quot;parse-environment-list&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>parse-environment-list</b></p>


<pre style="margin-left:11%;"> parse&minus;environment&minus;list 'environment ...'</pre>


<p style="margin-left:11%; margin-top: 1em">Parse the list
of strings in the argument <tt>&quot;environment&quot;</tt>
and set flags in the handle accordingly. For example if
<tt>&quot;LIBGUESTFS_DEBUG=1&quot;</tt> is a string in the
list, then the &rsquo;verbose&rsquo; flag is set in the
handle.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;parse-environment&quot; except that it parses
an explicit list of strings instead of the program&rsquo;s
environment.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-add</b></p>


<pre style="margin-left:11%;"> part&minus;add device prlogex startsect endsect</pre>


<p style="margin-left:11%; margin-top: 1em">This command
adds a partition to <tt>&quot;device&quot;</tt>. If there is
no partition table on the device, call &quot;part-init&quot;
first.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;prlogex&quot;</tt> parameter is the type of
partition. Normally you should pass <tt>&quot;p&quot;</tt>
or <tt>&quot;primary&quot;</tt> here, but <small>MBR</small>
partition tables also support <tt>&quot;l&quot;</tt> (or
<tt>&quot;logical&quot;</tt>) and <tt>&quot;e&quot;</tt> (or
<tt>&quot;extended&quot;</tt>) partition types.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;startsect&quot;</tt>
and <tt>&quot;endsect&quot;</tt> are the start and end of
the partition in <i>sectors</i>.
<tt>&quot;endsect&quot;</tt> may be negative, which means it
counts backwards from the end of the disk
(<tt>&quot;&minus;1&quot;</tt> is the last sector).</p>

<p style="margin-left:11%; margin-top: 1em">Creating a
partition which covers the whole disk is not so easy. Use
&quot;part-disk&quot; to do that.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-del</b></p>


<pre style="margin-left:11%;"> part&minus;del device partnum</pre>


<p style="margin-left:11%; margin-top: 1em">This command
deletes the partition numbered <tt>&quot;partnum&quot;</tt>
on <tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that in
the case of <small>MBR</small> partitioning, deleting an
extended partition also deletes any logical partitions it
contains.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-disk</b></p>


<pre style="margin-left:11%;"> part&minus;disk device parttype</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
simply a combination of &quot;part-init&quot; followed by
&quot;part-add&quot; to create a single primary partition
covering the whole disk.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;parttype&quot;</tt>
is the partition table type, usually
<tt>&quot;mbr&quot;</tt> or <tt>&quot;gpt&quot;</tt>, but
other possible values are described in
&quot;part-init&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-get-bootable</b></p>


<pre style="margin-left:11%;"> part&minus;get&minus;bootable device partnum</pre>


<p style="margin-left:11%; margin-top: 1em">This command
returns true if the partition <tt>&quot;partnum&quot;</tt>
on <tt>&quot;device&quot;</tt> has the bootable flag
set.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;part-set-bootable&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-get-gpt-type</b></p>


<pre style="margin-left:11%;"> part&minus;get&minus;gpt&minus;type device partnum</pre>


<p style="margin-left:11%; margin-top: 1em">Return the type
<small>GUID</small> of numbered <small>GPT</small> partition
<tt>&quot;partnum&quot;</tt>. For <small>MBR</small>
partitions, return an appropriate <small>GUID</small>
corresponding to the <small>MBR</small> type. Behaviour is
undefined for other partition types.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-get-mbr-id</b></p>


<pre style="margin-left:11%;"> part&minus;get&minus;mbr&minus;id device partnum</pre>


<p style="margin-left:11%; margin-top: 1em">Returns the
<small>MBR</small> type byte (also known as the
<small>ID</small> byte) from the numbered partition
<tt>&quot;partnum&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that only
<small>MBR</small> (old DOS-style) partitions have type
bytes. You will get undefined results for other partition
table types (see &quot;part-get-parttype&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-get-name</b></p>


<pre style="margin-left:11%;"> part&minus;get&minus;name device partnum</pre>


<p style="margin-left:11%; margin-top: 1em">This gets the
partition name on partition numbered
<tt>&quot;partnum&quot;</tt> on device
<tt>&quot;device&quot;</tt>. Note that partitions are
numbered from 1.</p>

<p style="margin-left:11%; margin-top: 1em">The partition
name can only be read on certain types of partition table.
This works on <tt>&quot;gpt&quot;</tt> but not on
<tt>&quot;mbr&quot;</tt> partitions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-get-parttype</b></p>


<pre style="margin-left:11%;"> part&minus;get&minus;parttype device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
examines the partition table on <tt>&quot;device&quot;</tt>
and returns the partition table type (format) being
used.</p>

<p style="margin-left:11%; margin-top: 1em">Common return
values include: <tt>&quot;msdos&quot;</tt> (a DOS/Windows
style <small>MBR</small> partition table),
<tt>&quot;gpt&quot;</tt> (a GPT/EFI&minus;style partition
table). Other values are possible, although unusual. See
&quot;part-init&quot; for a full list.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-init</b></p>


<pre style="margin-left:11%;"> part&minus;init device parttype</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
empty partition table on <tt>&quot;device&quot;</tt> of one
of the partition types listed below. Usually
<tt>&quot;parttype&quot;</tt> should be either
<tt>&quot;msdos&quot;</tt> or <tt>&quot;gpt&quot;</tt> (for
large disks).</p>

<p style="margin-left:11%; margin-top: 1em">Initially there
are no partitions. Following this, you should call
&quot;part-add&quot; for each partition required.</p>

<p style="margin-left:11%; margin-top: 1em">Possible values
for <tt>&quot;parttype&quot;</tt> are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>efi</b></p></td>
<td width="2%"></td>
<td width="49%">
</td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>gpt</b></p></td>
<td width="2%"></td>
<td width="49%">


<p>Intel <small>EFI / GPT</small> partition table.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This is
recommended for &gt;= 2 <small>TB</small> partitions that
will be accessed from Linux and Intel-based Mac <small>OS
X.</small> It also has limited backwards compatibility with
the <tt>&quot;mbr&quot;</tt> format.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>mbr</b></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>msdos</b></p>

<p style="margin-left:17%;">The standard <small>PC</small>
&quot;Master Boot Record&quot; ( <small>MBR</small> ) format
used by MS-DOS and Windows. This partition type will
<b>only</b> work for device sizes up to 2 <small>TB.</small>
For large disks we recommend using
<tt>&quot;gpt&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Other partition
table types that may work but are not supported include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>aix</b></p></td>
<td width="2%"></td>
<td width="25%">


<p><small>AIX</small> disk labels.</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>amiga</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>rdb</b></p></td>
<td width="2%"></td>
<td width="49%">


<p>Amiga &quot;Rigid Disk Block&quot; format.</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>bsd</b></p></td>
<td width="2%"></td>
<td width="49%">


<p><small>BSD</small> disk labels.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>dasd</b></p>

<p style="margin-left:17%;"><small>DASD,</small> used on
<small>IBM</small> mainframes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>dvh</b></p></td>
<td width="2%"></td>
<td width="75%">


<p><small>MIPS/SGI</small> volumes.</p></td>
<td width="8%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>mac</b></p></td>
<td width="2%"></td>
<td width="75%">


<p>Old Mac partition format. Modern Macs use
<tt>&quot;gpt&quot;</tt>.</p> </td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>pc98</b></p>

<p style="margin-left:17%;"><small>NEC PC&minus;98</small>
format, common in Japan apparently.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>sun</b></p></td>
<td width="2%"></td>
<td width="25%">


<p>Sun disk labels.</p></td>
<td width="58%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>part-list</b></p>

<pre style="margin-left:11%;"> part&minus;list device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
parses the partition table on <tt>&quot;device&quot;</tt>
and returns the list of partitions found.</p>

<p style="margin-left:11%; margin-top: 1em">The fields in
the returned structure are: <b><br>
part_num</b></p>

<p style="margin-left:17%;">Partition number, counting from
1.</p>

<p style="margin-left:11%;"><b>part_start</b></p>

<p style="margin-left:17%;">Start of the partition <i>in
bytes</i>. To get sectors you have to divide by the
device&rsquo;s sector size, see
&quot;blockdev-getss&quot;.</p>

<p style="margin-left:11%;"><b>part_end</b></p>

<p style="margin-left:17%;">End of the partition in
bytes.</p>

<p style="margin-left:11%;"><b>part_size</b></p>

<p style="margin-left:17%;">Size of the partition in
bytes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-set-bootable</b></p>


<pre style="margin-left:11%;"> part&minus;set&minus;bootable device partnum true|false</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
bootable flag on partition numbered
<tt>&quot;partnum&quot;</tt> on device
<tt>&quot;device&quot;</tt>. Note that partitions are
numbered from 1.</p>

<p style="margin-left:11%; margin-top: 1em">The bootable
flag is used by some operating systems (notably Windows) to
determine which partition to boot from. It is by no means
universally recognized.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-set-gpt-type</b></p>


<pre style="margin-left:11%;"> part&minus;set&minus;gpt&minus;type device partnum guid</pre>


<p style="margin-left:11%; margin-top: 1em">Set the type
<small>GUID</small> of numbered <small>GPT</small> partition
<tt>&quot;partnum&quot;</tt> to <tt>&quot;guid&quot;</tt>.
Return an error if the partition table of
<tt>&quot;device&quot;</tt> isn&rsquo;t <small>GPT,</small>
or if <tt>&quot;guid&quot;</tt> is not a valid
<small>GUID.</small></p>

<p style="margin-left:11%; margin-top: 1em">See
http://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs
for a useful list of type GUIDs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-set-mbr-id</b></p>


<pre style="margin-left:11%;"> part&minus;set&minus;mbr&minus;id device partnum idbyte</pre>


<p style="margin-left:11%; margin-top: 1em">Sets the
<small>MBR</small> type byte (also known as the
<small>ID</small> byte) of the numbered partition
<tt>&quot;partnum&quot;</tt> to <tt>&quot;idbyte&quot;</tt>.
Note that the type bytes quoted in most documentation are in
fact hexadecimal numbers, but usually documented without any
leading &quot;0x&quot; which might be confusing.</p>

<p style="margin-left:11%; margin-top: 1em">Note that only
<small>MBR</small> (old DOS-style) partitions have type
bytes. You will get undefined results for other partition
table types (see &quot;part-get-parttype&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-set-name</b></p>


<pre style="margin-left:11%;"> part&minus;set&minus;name device partnum name</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
partition name on partition numbered
<tt>&quot;partnum&quot;</tt> on device
<tt>&quot;device&quot;</tt>. Note that partitions are
numbered from 1.</p>

<p style="margin-left:11%; margin-top: 1em">The partition
name can only be set on certain types of partition table.
This works on <tt>&quot;gpt&quot;</tt> but not on
<tt>&quot;mbr&quot;</tt> partitions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-to-dev</b></p>


<pre style="margin-left:11%;"> part&minus;to&minus;dev partition</pre>


<p style="margin-left:11%; margin-top: 1em">This function
takes a partition name (eg. &quot;/dev/sdb1&quot;) and
removes the partition number, returning the device name (eg.
&quot;/dev/sdb&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">The named
partition must exist, for example as a string returned from
&quot;list-partitions&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;part-to-partnum&quot;, &quot;device-index&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>part-to-partnum</b></p>


<pre style="margin-left:11%;"> part&minus;to&minus;partnum partition</pre>


<p style="margin-left:11%; margin-top: 1em">This function
takes a partition name (eg. &quot;/dev/sdb1&quot;) and
returns the partition number (eg. <tt>1</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">The named
partition must exist, for example as a string returned from
&quot;list-partitions&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;part-to-dev&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ping-daemon</b></p>

<pre style="margin-left:11%;"> ping&minus;daemon</pre>

<p style="margin-left:11%; margin-top: 1em">This is a test
probe into the guestfs daemon running inside the hypervisor.
Calling this function checks that the daemon responds to the
ping message, without affecting the daemon or attached block
device(s) in any other way.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pread</b></p>


<pre style="margin-left:11%;"> pread path count offset</pre>


<p style="margin-left:11%; margin-top: 1em">This command
lets you read part of a file. It reads
<tt>&quot;count&quot;</tt> bytes of the file, starting at
<tt>&quot;offset&quot;</tt>, from file
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This may read
fewer bytes than requested. For further details see the
<i>pread</i>(2) system call.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;pwrite&quot;, &quot;pread-device&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>pread-device</b></p>


<pre style="margin-left:11%;"> pread&minus;device device count offset</pre>


<p style="margin-left:11%; margin-top: 1em">This command
lets you read part of a block device. It reads
<tt>&quot;count&quot;</tt> bytes of
<tt>&quot;device&quot;</tt>, starting at
<tt>&quot;offset&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This may read
fewer bytes than requested. For further details see the
<i>pread</i>(2) system call.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;pread&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvchange-uuid</b></p>


<pre style="margin-left:11%;"> pvchange&minus;uuid device</pre>


<p style="margin-left:11%; margin-top: 1em">Generate a new
random <small>UUID</small> for the physical volume
<tt>&quot;device&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvchange-uuid-all</b></p>


<pre style="margin-left:11%;"> pvchange&minus;uuid&minus;all</pre>


<p style="margin-left:11%; margin-top: 1em">Generate new
random UUIDs for all physical volumes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvcreate</b></p>

<pre style="margin-left:11%;"> pvcreate device</pre>

<p style="margin-left:11%; margin-top: 1em">This creates an
<small>LVM</small> physical volume on the named
<tt>&quot;device&quot;</tt>, where
<tt>&quot;device&quot;</tt> should usually be a partition
name such as <tt>&quot;/dev/sda1&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvremove</b></p>

<pre style="margin-left:11%;"> pvremove device</pre>

<p style="margin-left:11%; margin-top: 1em">This wipes a
physical volume <tt>&quot;device&quot;</tt> so that
<small>LVM</small> will no longer recognise it.</p>

<p style="margin-left:11%; margin-top: 1em">The
implementation uses the <tt>&quot;pvremove&quot;</tt>
command which refuses to wipe physical volumes that contain
any volume groups, so you have to remove those first.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvresize</b></p>

<pre style="margin-left:11%;"> pvresize device</pre>

<p style="margin-left:11%; margin-top: 1em">This resizes
(expands or shrinks) an existing <small>LVM</small> physical
volume to match the new size of the underlying device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvresize-size</b></p>


<pre style="margin-left:11%;"> pvresize&minus;size device size</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
the same as &quot;pvresize&quot; except that it allows you
to specify the new size (in bytes) explicitly.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pvs</b></p>
<pre style="margin-left:11%;"> pvs</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
physical volumes detected. This is the equivalent of the
<i>pvs</i>(8) command.</p>

<p style="margin-left:11%; margin-top: 1em">This returns a
list of just the device names that contain PVs (eg.
<tt>&quot;/dev/sda2&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;pvs-full&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvs-full</b></p>

<pre style="margin-left:11%;"> pvs&minus;full</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
physical volumes detected. This is the equivalent of the
<i>pvs</i>(8) command. The &quot;full&quot; version includes
all fields.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pvuuid</b></p>

<pre style="margin-left:11%;"> pvuuid device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns the <small>UUID</small> of the <small>LVM PV</small>
<tt>&quot;device&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pwrite</b></p>


<pre style="margin-left:11%;"> pwrite path content offset</pre>


<p style="margin-left:11%; margin-top: 1em">This command
writes to part of a file. It writes the data buffer
<tt>&quot;content&quot;</tt> to the file
<tt>&quot;path&quot;</tt> starting at offset
<tt>&quot;offset&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
implements the <i>pwrite</i>(2) system call, and like that
system call it may not write the full data requested. The
return value is the number of bytes that were actually
written to the file. This could even be 0, although short
writes are unlikely for regular files in ordinary
circumstances.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;pread&quot;, &quot;pwrite-device&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>pwrite-device</b></p>


<pre style="margin-left:11%;"> pwrite&minus;device device content offset</pre>


<p style="margin-left:11%; margin-top: 1em">This command
writes to part of a device. It writes the data buffer
<tt>&quot;content&quot;</tt> to <tt>&quot;device&quot;</tt>
starting at offset <tt>&quot;offset&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command
implements the <i>pwrite</i>(2) system call, and like that
system call it may not write the full data requested
(although short writes to disk devices and partitions are
probably impossible with standard Linux kernels).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;pwrite&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>read-file</b></p>

<pre style="margin-left:11%;"> read&minus;file path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls
returns the contents of the file <tt>&quot;path&quot;</tt>
as a buffer.</p>

<p style="margin-left:11%; margin-top: 1em">Unlike
&quot;cat&quot;, this function can correctly handle files
that contain embedded <small>ASCII NUL</small>
characters.</p>


<p style="margin-left:11%; margin-top: 1em"><b>read-lines</b></p>

<pre style="margin-left:11%;"> read&minus;lines path</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
contents of the file named <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The file
contents are returned as a list of lines. Trailing
<tt>&quot;LF&quot;</tt> and <tt>&quot;CRLF&quot;</tt>
character sequences are <i>not</i> returned.</p>

<p style="margin-left:11%; margin-top: 1em">Note that this
function cannot correctly handle binary files (specifically,
files containing <tt>&quot;\0&quot;</tt> character which is
treated as end of string). For those you need to use the
&quot;read-file&quot; function and split the buffer into
lines yourself.</p>


<p style="margin-left:11%; margin-top: 1em"><b>readdir</b></p>

<pre style="margin-left:11%;"> readdir dir</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the list of directory entries in directory
<tt>&quot;dir&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">All entries in
the directory are returned, including <tt>&quot;.&quot;</tt>
and <tt>&quot;..&quot;</tt>. The entries are <i>not</i>
sorted, but returned in the same order as the underlying
filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">Also this call
returns basic file type information about each file. The
<tt>&quot;ftyp&quot;</tt> field will contain one of the
following characters:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;b&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Block special</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;c&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Char special</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;d&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;f&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p><small>FIFO</small> (named pipe)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;l&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Symbolic link</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;r&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Regular file</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;s&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Socket</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;u&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>Unknown file type</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>&rsquo;?&rsquo;</p></td>
<td width="2%"></td>
<td width="83%">


<p>The <i>readdir</i>(3) call returned a
<tt>&quot;d_type&quot;</tt> field with an unexpected
value</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This function
is primarily intended for use by programs. To get a simple
list of names, use &quot;ls&quot;. To get a printable
directory for human consumption, use &quot;ll&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>readlink</b></p>

<pre style="margin-left:11%;"> readlink path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
reads the target of a symbolic link.</p>


<p style="margin-left:11%; margin-top: 1em"><b>readlinklist</b></p>


<pre style="margin-left:11%;"> readlinklist path 'names ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to do a <tt>&quot;readlink&quot;</tt> operation
on multiple files, where all files are in the directory
<tt>&quot;path&quot;</tt>. <tt>&quot;names&quot;</tt> is the
list of files from this directory.</p>

<p style="margin-left:11%; margin-top: 1em">On return you
get a list of strings, with a one-to-one correspondence to
the <tt>&quot;names&quot;</tt> list. Each string is the
value of the symbolic link.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>readlink(2)</tt> operation fails on any name, then the
corresponding result string is the empty string
<tt>&quot;&quot;</tt>. However the whole operation is
completed even if there were <tt>readlink(2)</tt> errors,
and so you can call this function with names where you
don&rsquo;t know if they are symbolic links already (albeit
slightly less efficient).</p>

<p style="margin-left:11%; margin-top: 1em">This call is
intended for programs that want to efficiently list a
directory contents without making many round-trips.</p>


<p style="margin-left:11%; margin-top: 1em"><b>realpath</b></p>

<pre style="margin-left:11%;"> realpath path</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
canonicalized absolute pathname of
<tt>&quot;path&quot;</tt>. The returned path has no
<tt>&quot;.&quot;</tt>, <tt>&quot;..&quot;</tt> or symbolic
link path elements.</p>


<p style="margin-left:11%; margin-top: 1em"><b>remount</b></p>


<pre style="margin-left:11%;"> remount mountpoint [rw:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to change the <tt>&quot;rw&quot;</tt>
(readonly/read&minus;write) flag on an already mounted
filesystem at <tt>&quot;mountpoint&quot;</tt>, converting a
readonly filesystem to be read-write, or vice-versa.</p>

<p style="margin-left:11%; margin-top: 1em">Note that at
the moment you must supply the &quot;optional&quot;
<tt>&quot;rw&quot;</tt> parameter. In future we may allow
other flags to be adjusted.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>remove-drive</b></p>


<pre style="margin-left:11%;"> remove&minus;drive label</pre>


<p style="margin-left:11%; margin-top: 1em">This function
is conceptually the opposite of &quot;add-drive-opts&quot;.
It removes the drive that was previously added with label
<tt>&quot;label&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that in
order to remove drives, you have to add them with labels
(see the optional <tt>&quot;label&quot;</tt> argument to
&quot;add-drive-opts&quot;). If you didn&rsquo;t use a
label, then they cannot be removed.</p>

<p style="margin-left:11%; margin-top: 1em">You can call
this function before or after launching the handle. If
called after launch, if the backend supports it, we try to
hot unplug the drive: see &quot;
<small>HOTPLUGGING&quot;</small> in <i>guestfs</i>(3). The
disk <b>must not</b> be in use (eg. mounted) when you do
this. We try to detect if the disk is in use and stop you
from doing this.</p>


<p style="margin-left:11%; margin-top: 1em"><b>removexattr</b></p>

<pre style="margin-left:11%;"> removexattr xattr path</pre>

<p style="margin-left:11%; margin-top: 1em">This call
removes the extended attribute named
<tt>&quot;xattr&quot;</tt> of the file
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;lremovexattr&quot;, <i>attr</i>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><b>rename</b></p>

<pre style="margin-left:11%;"> rename oldpath newpath</pre>

<p style="margin-left:11%; margin-top: 1em">Rename a file
to a new place on the same filesystem. This is the same as
the Linux <i>rename</i>(2) system call. In most cases you
are better to use &quot;mv&quot; instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>resize2fs</b></p>

<pre style="margin-left:11%;"> resize2fs device</pre>

<p style="margin-left:11%; margin-top: 1em">This resizes an
ext2, ext3 or ext4 filesystem to match the size of the
underlying device.</p>

<p style="margin-left:11%; margin-top: 1em">See also &quot;
<small>RESIZE2FS ERRORS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>resize2fs&minus;M</b></p>


<pre style="margin-left:11%;"> resize2fs&minus;M device</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
the same as &quot;resize2fs&quot;, but the filesystem is
resized to its minimum size. This works like the
<i>&minus;M</i> option to the <tt>&quot;resize2fs&quot;</tt>
command.</p>

<p style="margin-left:11%; margin-top: 1em">To get the
resulting size of the filesystem you should call
&quot;tune2fs&minus;l&quot; and read the <tt>&quot;Block
size&quot;</tt> and <tt>&quot;Block count&quot;</tt> values.
These two numbers, multiplied together, give the resulting
size of the minimal filesystem in bytes.</p>

<p style="margin-left:11%; margin-top: 1em">See also &quot;
<small>RESIZE2FS ERRORS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>resize2fs&minus;size</b></p>


<pre style="margin-left:11%;"> resize2fs&minus;size device size</pre>


<p style="margin-left:11%; margin-top: 1em">This command is
the same as &quot;resize2fs&quot; except that it allows you
to specify the new size (in bytes) explicitly.</p>

<p style="margin-left:11%; margin-top: 1em">See also &quot;
<small>RESIZE2FS ERRORS&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>rm</b></p>
<pre style="margin-left:11%;"> rm path</pre>

<p style="margin-left:11%; margin-top: 1em">Remove the
single file <tt>&quot;path&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rm-f</b></p>

<pre style="margin-left:11%;"> rm&minus;f path</pre>

<p style="margin-left:11%; margin-top: 1em">Remove the file
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If the file
doesn&rsquo;t exist, that error is ignored. (Other errors,
eg. I/O errors or bad paths, are not ignored)</p>

<p style="margin-left:11%; margin-top: 1em">This call
cannot remove directories. Use &quot;rmdir&quot; to remove
an empty directory, or &quot;rm-rf&quot; to remove
directories recursively.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rm-rf</b></p>

<pre style="margin-left:11%;"> rm&minus;rf path</pre>

<p style="margin-left:11%; margin-top: 1em">Remove the file
or directory <tt>&quot;path&quot;</tt>, recursively removing
the contents if its a directory. This is like the
<tt>&quot;rm &minus;rf&quot;</tt> shell command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rmdir</b></p>

<pre style="margin-left:11%;"> rmdir path</pre>

<p style="margin-left:11%; margin-top: 1em">Remove the
single directory <tt>&quot;path&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rmmountpoint</b></p>


<pre style="margin-left:11%;"> rmmountpoint exemptpath</pre>


<p style="margin-left:11%; margin-top: 1em">This calls
removes a mountpoint that was previously created with
&quot;mkmountpoint&quot;. See &quot;mkmountpoint&quot; for
full details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>rsync</b></p>


<pre style="margin-left:11%;"> rsync src dest [archive:true|false] [deletedest:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This call may
be used to copy or synchronize two directories under the
same libguestfs handle. This uses the <i>rsync</i>(1)
program which uses a fast algorithm that avoids copying
files unnecessarily.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;src&quot;</tt>
and <tt>&quot;dest&quot;</tt> are the source and destination
directories. Files are copied from <tt>&quot;src&quot;</tt>
to <tt>&quot;dest&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are: <br>
&quot;archive&quot;</p>

<p style="margin-left:17%;">Turns on archive mode. This is
the same as passing the <i>&minus;&minus;archive</i> flag to
<tt>&quot;rsync&quot;</tt>.</p>

<p style="margin-left:11%;">&quot;deletedest&quot;</p>

<p style="margin-left:17%;">Delete files at the destination
that do not exist at the source.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>rsync-in</b></p>


<pre style="margin-left:11%;"> rsync&minus;in remote dest [archive:true|false] [deletedest:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This call may
be used to copy or synchronize the filesystem on the host or
on a remote computer with the filesystem within libguestfs.
This uses the <i>rsync</i>(1) program which uses a fast
algorithm that avoids copying files unnecessarily.</p>

<p style="margin-left:11%; margin-top: 1em">This call only
works if the network is enabled. See &quot;set-network&quot;
or the <i>&minus;&minus;network</i> option to various tools
like <i>guestfish</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Files are
copied from the remote server and directory specified by
<tt>&quot;remote&quot;</tt> to the destination directory
<tt>&quot;dest&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The format of
the remote server string is defined by <i>rsync</i>(1). Note
that there is no way to supply a password or passphrase so
the target must be set up not to require one.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are the same as those of &quot;rsync&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>rsync-out</b></p>


<pre style="margin-left:11%;"> rsync&minus;out src remote [archive:true|false] [deletedest:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This call may
be used to copy or synchronize the filesystem within
libguestfs with a filesystem on the host or on a remote
computer. This uses the <i>rsync</i>(1) program which uses a
fast algorithm that avoids copying files unnecessarily.</p>

<p style="margin-left:11%; margin-top: 1em">This call only
works if the network is enabled. See &quot;set-network&quot;
or the <i>&minus;&minus;network</i> option to various tools
like <i>guestfish</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Files are
copied from the source directory <tt>&quot;src&quot;</tt> to
the remote server and directory specified by
<tt>&quot;remote&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The format of
the remote server string is defined by <i>rsync</i>(1). Note
that there is no way to supply a password or passphrase so
the target must be set up not to require one.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are the same as those of &quot;rsync&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Globbing does
not happen on the <tt>&quot;src&quot;</tt> parameter. In
programs which use the <small>API</small> directly you have
to expand wildcards yourself (see &quot;glob-expand&quot;).
In guestfish you can use the <tt>&quot;glob&quot;</tt>
command (see &quot;glob&quot; in <i>guestfish</i>(1)), for
example:</p>

<pre style="margin-left:11%; margin-top: 1em"> &gt;&lt;fs&gt; glob rsync&minus;out /* rsync://remote/</pre>


<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>scrub-device</b></p>


<pre style="margin-left:11%;"> scrub&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
writes patterns over <tt>&quot;device&quot;</tt> to make
data retrieval more difficult.</p>

<p style="margin-left:11%; margin-top: 1em">It is an
interface to the <i>scrub</i>(1) program. See that manual
page for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>scrub-file</b></p>

<pre style="margin-left:11%;"> scrub&minus;file file</pre>

<p style="margin-left:11%; margin-top: 1em">This command
writes patterns over a file to make data retrieval more
difficult.</p>

<p style="margin-left:11%; margin-top: 1em">The file is
<i>removed</i> after scrubbing.</p>

<p style="margin-left:11%; margin-top: 1em">It is an
interface to the <i>scrub</i>(1) program. See that manual
page for more details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>scrub-freespace</b></p>


<pre style="margin-left:11%;"> scrub&minus;freespace dir</pre>


<p style="margin-left:11%; margin-top: 1em">This command
creates the directory <tt>&quot;dir&quot;</tt> and then
fills it with files until the filesystem is full, and scrubs
the files as for &quot;scrub-file&quot;, and deletes them.
The intention is to scrub any free space on the partition
containing <tt>&quot;dir&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">It is an
interface to the <i>scrub</i>(1) program. See that manual
page for more details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-append
<br>
append</b></p>

<pre style="margin-left:11%;"> set&minus;append append</pre>


<p style="margin-left:11%; margin-top: 1em">This function
is used to add additional options to the libguestfs
appliance kernel command line.</p>

<p style="margin-left:11%; margin-top: 1em">The default is
<tt>&quot;NULL&quot;</tt> unless overridden by setting
<tt>&quot;LIBGUESTFS_APPEND&quot;</tt> environment
variable.</p>

<p style="margin-left:11%; margin-top: 1em">Setting
<tt>&quot;append&quot;</tt> to <tt>&quot;NULL&quot;</tt>
means <i>no</i> additional options are passed (libguestfs
always adds a few of its own).</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-attach-method
<br>
attach-method</b></p>

<pre style="margin-left:11%;"> set&minus;attach&minus;method backend</pre>


<p style="margin-left:11%; margin-top: 1em">Set the method
that libguestfs uses to connect to the backend guestfsd
daemon.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;set-backend&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-autosync
<br>
autosync</b></p>

<pre style="margin-left:11%;"> set&minus;autosync true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;autosync&quot;</tt> is true, this enables
autosync. Libguestfs will make a best effort attempt to make
filesystems consistent and synchronized when the handle is
closed (also if the program exits without closing
handles).</p>

<p style="margin-left:11%; margin-top: 1em">This is enabled
by default (since libguestfs 1.5.24, previously it was
disabled by default).</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-backend
<br>
backend</b></p>

<pre style="margin-left:11%;"> set&minus;backend backend</pre>


<p style="margin-left:11%; margin-top: 1em">Set the method
that libguestfs uses to connect to the backend guestfsd
daemon.</p>

<p style="margin-left:11%; margin-top: 1em">This handle
property was previously called the &quot;attach
method&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-backend-setting</b></p>


<pre style="margin-left:11%;"> set&minus;backend&minus;setting name val</pre>


<p style="margin-left:11%; margin-top: 1em">Append
<tt>&quot;name=value&quot;</tt> to the backend settings
string list. However if a string already exists matching
<tt>&quot;name&quot;</tt> or beginning with
<tt>&quot;name=&quot;</tt>, then that setting is
replaced.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-backend-settings</b></p>


<pre style="margin-left:11%;"> set&minus;backend&minus;settings 'settings ...'</pre>


<p style="margin-left:11%; margin-top: 1em">Set a list of
zero or more settings which are passed through to the
current backend. Each setting is a string which is
interpreted in a backend-specific way, or ignored if not
understood by the backend.</p>

<p style="margin-left:11%; margin-top: 1em">The default
value is an empty list, unless the environment variable
<tt>&quot;LIBGUESTFS_BACKEND_SETTINGS&quot;</tt> was set
when the handle was created. This environment variable
contains a colon-separated list of settings.</p>

<p style="margin-left:11%; margin-top: 1em">This call
replaces all backend settings. If you want to replace a
single backend setting, see &quot;set-backend-setting&quot;.
If you want to clear a single backend setting, see
&quot;clear-backend-setting&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-cachedir
<br>
cachedir</b></p>

<pre style="margin-left:11%;"> set&minus;cachedir cachedir</pre>


<p style="margin-left:11%; margin-top: 1em">Set the
directory used by the handle to store the appliance cache,
when using a supermin appliance. The appliance is cached and
shared between all handles which have the same effective
user <small>ID.</small></p>

<p style="margin-left:11%; margin-top: 1em">The environment
variables <tt>&quot;LIBGUESTFS_CACHEDIR&quot;</tt> and
<tt>&quot;TMPDIR&quot;</tt> control the default value: If
<tt>&quot;LIBGUESTFS_CACHEDIR&quot;</tt> is set, then that
is the default. Else if <tt>&quot;TMPDIR&quot;</tt> is set,
then that is the default. Else <tt>&quot;/var/tmp&quot;</tt>
is the default.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-direct
<br>
direct</b></p>

<pre style="margin-left:11%;"> set&minus;direct true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If the direct
appliance mode flag is enabled, then stdin and stdout are
passed directly through to the appliance once it is
launched.</p>

<p style="margin-left:11%; margin-top: 1em">One consequence
of this is that log messages aren&rsquo;t caught by the
library and handled by &quot;set-log-message-callback&quot;,
but go straight to stdout.</p>

<p style="margin-left:11%; margin-top: 1em">You probably
don&rsquo;t want to use this unless you know what you are
doing.</p>

<p style="margin-left:11%; margin-top: 1em">The default is
disabled.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set&minus;e2attrs</b></p>


<pre style="margin-left:11%;"> set&minus;e2attrs file attrs [clear:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This sets or
clears the file attributes <tt>&quot;attrs&quot;</tt>
associated with the inode <tt>&quot;file&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;attrs&quot;</tt>
is a string of characters representing file attributes. See
&quot;get&minus;e2attrs&quot; for a list of possible
attributes. Not all attributes can be changed.</p>

<p style="margin-left:11%; margin-top: 1em">If optional
boolean <tt>&quot;clear&quot;</tt> is not present or false,
then the <tt>&quot;attrs&quot;</tt> listed are set in the
inode.</p>

<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;clear&quot;</tt> is true, then the
<tt>&quot;attrs&quot;</tt> listed are cleared in the
inode.</p>

<p style="margin-left:11%; margin-top: 1em">In both cases,
other attributes not present in the
<tt>&quot;attrs&quot;</tt> string are left unchanged.</p>

<p style="margin-left:11%; margin-top: 1em">These
attributes are only present when the file is located on an
ext2/3/4 filesystem. Using this call on other filesystem
types will result in an error.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>set&minus;e2generation</b></p>


<pre style="margin-left:11%;"> set&minus;e2generation file generation</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
ext2 file generation of a file.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;get&minus;e2generation&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set&minus;e2label</b></p>


<pre style="margin-left:11%;"> set&minus;e2label device label</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
ext2/3/4 filesystem label of the filesystem on
<tt>&quot;device&quot;</tt> to <tt>&quot;label&quot;</tt>.
Filesystem labels are limited to 16 characters.</p>

<p style="margin-left:11%; margin-top: 1em">You can use
either &quot;tune2fs&minus;l&quot; or
&quot;get&minus;e2label&quot; to return the existing label
on a filesystem.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;set-label&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set&minus;e2uuid</b></p>


<pre style="margin-left:11%;"> set&minus;e2uuid device uuid</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
ext2/3/4 filesystem <small>UUID</small> of the filesystem on
<tt>&quot;device&quot;</tt> to <tt>&quot;uuid&quot;</tt>.
The format of the <small>UUID</small> and alternatives such
as <tt>&quot;clear&quot;</tt>, <tt>&quot;random&quot;</tt>
and <tt>&quot;time&quot;</tt> are described in the
<i>tune2fs</i>(8) manpage.</p>

<p style="margin-left:11%; margin-top: 1em">You can use
&quot;vfs-uuid&quot; to return the existing
<small>UUID</small> of a filesystem.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;set-uuid&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-hv <br>
hv</b></p>
<pre style="margin-left:11%;"> set&minus;hv hv</pre>

<p style="margin-left:11%; margin-top: 1em">Set the
hypervisor binary that we will use. The hypervisor depends
on the backend, but is usually the location of the qemu/KVM
hypervisor. For the uml backend, it is the location of the
<tt>&quot;linux&quot;</tt> or <tt>&quot;vmlinux&quot;</tt>
binary.</p>

<p style="margin-left:11%; margin-top: 1em">The default is
chosen when the library was compiled by the configure
script.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
override this by setting the
<tt>&quot;LIBGUESTFS_HV&quot;</tt> environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
should call this function as early as possible after
creating the handle. This is because some pre-launch
operations depend on testing qemu features (by running
<tt>&quot;qemu &minus;help&quot;</tt>). If the qemu binary
changes, we don&rsquo;t retest features, and so you might
see inconsistent results. Using the environment variable
<tt>&quot;LIBGUESTFS_HV&quot;</tt> is safest of all since
that picks the qemu binary at the same time as the handle is
created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-label</b></p>


<pre style="margin-left:11%;"> set&minus;label mountable label</pre>


<p style="margin-left:11%; margin-top: 1em">Set the
filesystem label on <tt>&quot;mountable&quot;</tt> to
<tt>&quot;label&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Only some
filesystem types support labels, and libguestfs supports
setting labels on only a subset of these. <br>
ext2, ext3, ext4</p>

<p style="margin-left:17%;">Labels are limited to 16
bytes.</p>

<p style="margin-left:11%;"><small>NTFS</small></p>

<p style="margin-left:17%;">Labels are limited to 128
unicode characters.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><small>XFS</small></p></td>
<td width="2%"></td>
<td width="83%">


<p>The label is limited to 12 bytes. The filesystem must
not be mounted when trying to set the label.</p></td></tr>
</table>

<p style="margin-left:11%;">btrfs</p>

<p style="margin-left:17%;">The label is limited to 256
bytes and some characters are not allowed. Setting the label
on a btrfs subvolume will set the label on its parent
filesystem. The filesystem must not be mounted when trying
to set the label.</p>

<p style="margin-left:11%; margin-top: 1em">To read the
label on a filesystem, call &quot;vfs-label&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-libvirt-requested-credential</b></p>


<pre style="margin-left:11%;"> set&minus;libvirt&minus;requested&minus;credential index cred</pre>


<p style="margin-left:11%; margin-top: 1em">After
requesting the <tt>&quot;index&quot;</tt>&rsquo;th
credential from the user, call this function to pass the
answer back to libvirt.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-libvirt-supported-credentials</b></p>


<pre style="margin-left:11%;"> set&minus;libvirt&minus;supported&minus;credentials 'creds ...'</pre>


<p style="margin-left:11%; margin-top: 1em">Call this
function before setting an event handler for
<tt>&quot;GUESTFS_EVENT_LIBVIRT_AUTH&quot;</tt>, to supply
the list of credential types that the program knows how to
process.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;creds&quot;</tt> list must be a non-empty list of
strings. Possible strings are: <br>
&quot;username&quot; <br>
&quot;authname&quot; <br>
&quot;language&quot; <br>
&quot;cnonce&quot; <br>
&quot;passphrase&quot; <br>
&quot;echoprompt&quot; <br>
&quot;noechoprompt&quot; <br>
&quot;realm&quot; <br>
&quot;external&quot;</p>

<p style="margin-left:11%; margin-top: 1em">See libvirt
documentation for the meaning of these credential types.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>LIBVIRT AUTHENTICATION&quot;</small> in
<i>guestfs</i>(3) for documentation and example code.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-memsize
<br>
memsize</b></p>

<pre style="margin-left:11%;"> set&minus;memsize memsize</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
memory size in megabytes allocated to the hypervisor. This
only has any effect if called before &quot;launch&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
change this by setting the environment variable
<tt>&quot;LIBGUESTFS_MEMSIZE&quot;</tt> before the handle is
created.</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on the architecture of libguestfs, see
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-network
<br>
network</b></p>

<pre style="margin-left:11%;"> set&minus;network true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;network&quot;</tt> is true, then the network is
enabled in the libguestfs appliance. The default is
false.</p>

<p style="margin-left:11%; margin-top: 1em">This affects
whether commands are able to access the network (see &quot;
<small>RUNNING COMMANDS&quot;</small> in
<i>guestfs</i>(3)).</p>

<p style="margin-left:11%; margin-top: 1em">You must call
this before calling &quot;launch&quot;, otherwise it has no
effect.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-path
<br>
path</b></p>

<pre style="margin-left:11%;"> set&minus;path searchpath</pre>


<p style="margin-left:11%; margin-top: 1em">Set the path
that libguestfs searches for kernel and initrd.img.</p>

<p style="margin-left:11%; margin-top: 1em">The default is
<tt>&quot;$libdir/guestfs&quot;</tt> unless overridden by
setting <tt>&quot;LIBGUESTFS_PATH&quot;</tt> environment
variable.</p>

<p style="margin-left:11%; margin-top: 1em">Setting
<tt>&quot;path&quot;</tt> to <tt>&quot;NULL&quot;</tt>
restores the default path.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-pgroup
<br>
pgroup</b></p>

<pre style="margin-left:11%;"> set&minus;pgroup true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;pgroup&quot;</tt> is true, child processes are
placed into their own process group.</p>

<p style="margin-left:11%; margin-top: 1em">The practical
upshot of this is that signals like
<tt>&quot;SIGINT&quot;</tt> (from users pressing
<tt>&quot;^C&quot;</tt>) won&rsquo;t be received by the
child process.</p>

<p style="margin-left:11%; margin-top: 1em">The default for
this flag is false, because usually you want
<tt>&quot;^C&quot;</tt> to kill the subprocess. Guestfish
sets this flag to true when used interactively, so that
<tt>&quot;^C&quot;</tt> can cancel long-running commands
gracefully (see &quot;user-cancel&quot;).</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-program
<br>
program</b></p>

<pre style="margin-left:11%;"> set&minus;program program</pre>


<p style="margin-left:11%; margin-top: 1em">Set the program
name. This is an informative string which the main program
may optionally set in the handle.</p>

<p style="margin-left:11%; margin-top: 1em">When the handle
is created, the program name in the handle is set to the
basename from <tt>&quot;argv[0]&quot;</tt>. If that was not
possible, it is set to the empty string (but never
<tt>&quot;NULL&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-qemu
<br>
qemu</b></p>
<pre style="margin-left:11%;"> set&minus;qemu hv</pre>

<p style="margin-left:11%; margin-top: 1em">Set the
hypervisor binary (usually qemu) that we will use.</p>

<p style="margin-left:11%; margin-top: 1em">The default is
chosen when the library was compiled by the configure
script.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
override this by setting the
<tt>&quot;LIBGUESTFS_HV&quot;</tt> environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Setting
<tt>&quot;hv&quot;</tt> to <tt>&quot;NULL&quot;</tt>
restores the default qemu binary.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
should call this function as early as possible after
creating the handle. This is because some pre-launch
operations depend on testing qemu features (by running
<tt>&quot;qemu &minus;help&quot;</tt>). If the qemu binary
changes, we don&rsquo;t retest features, and so you might
see inconsistent results. Using the environment variable
<tt>&quot;LIBGUESTFS_HV&quot;</tt> is safest of all since
that picks the qemu binary at the same time as the handle is
created.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;set-hv&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-recovery-proc
<br>
recovery-proc</b></p>

<pre style="margin-left:11%;"> set&minus;recovery&minus;proc true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If this is
called with the parameter <tt>&quot;false&quot;</tt> then
&quot;launch&quot; does not create a recovery process. The
purpose of the recovery process is to stop runaway
hypervisor processes in the case where the main program
aborts abruptly.</p>

<p style="margin-left:11%; margin-top: 1em">This only has
any effect if called before &quot;launch&quot;, and the
default is true.</p>

<p style="margin-left:11%; margin-top: 1em">About the only
time when you would want to disable this is if the main
process will fork itself into the background
(&quot;daemonize&quot; itself). In this case the recovery
process thinks that the main program has disappeared and so
kills the hypervisor, which is not very helpful.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-selinux
<br>
selinux</b></p>

<pre style="margin-left:11%;"> set&minus;selinux true|false</pre>


<p style="margin-left:11%; margin-top: 1em">This sets the
selinux flag that is passed to the appliance at boot time.
The default is <tt>&quot;selinux=0&quot;</tt>
(disabled).</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
SELinux is enabled, it is always in Permissive mode
(<tt>&quot;enforcing=0&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">For more
information on the architecture of libguestfs, see
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-smp <br>
smp</b></p>
<pre style="margin-left:11%;"> set&minus;smp smp</pre>

<p style="margin-left:11%; margin-top: 1em">Change the
number of virtual CPUs assigned to the appliance. The
default is <tt>1</tt>. Increasing this may improve
performance, though often it has no effect.</p>

<p style="margin-left:11%; margin-top: 1em">This function
must be called before &quot;launch&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-tmpdir
<br>
tmpdir</b></p>

<pre style="margin-left:11%;"> set&minus;tmpdir tmpdir</pre>


<p style="margin-left:11%; margin-top: 1em">Set the
directory used by the handle to store temporary files.</p>

<p style="margin-left:11%; margin-top: 1em">The environment
variables <tt>&quot;LIBGUESTFS_TMPDIR&quot;</tt> and
<tt>&quot;TMPDIR&quot;</tt> control the default value: If
<tt>&quot;LIBGUESTFS_TMPDIR&quot;</tt> is set, then that is
the default. Else if <tt>&quot;TMPDIR&quot;</tt> is set,
then that is the default. Else <tt>&quot;/tmp&quot;</tt> is
the default.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-trace
<br>
trace</b></p>

<pre style="margin-left:11%;"> set&minus;trace true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If the command
trace flag is set to 1, then libguestfs calls, parameters
and return values are traced.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
trace C <small>API</small> calls into libguestfs (and other
libraries) then possibly a better way is to use the external
<i>ltrace</i>(1) command.</p>

<p style="margin-left:11%; margin-top: 1em">Command traces
are disabled unless the environment variable
<tt>&quot;LIBGUESTFS_TRACE&quot;</tt> is defined and set to
<tt>1</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Trace messages
are normally sent to <tt>&quot;stderr&quot;</tt>, unless you
register a callback to send them somewhere else (see
&quot;set-event-callback&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>set-uuid</b></p>


<pre style="margin-left:11%;"> set&minus;uuid device uuid</pre>


<p style="margin-left:11%; margin-top: 1em">Set the
filesystem <small>UUID</small> on
<tt>&quot;device&quot;</tt> to
<tt>&quot;uuid&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Only some
filesystem types support setting UUIDs.</p>

<p style="margin-left:11%; margin-top: 1em">To read the
<small>UUID</small> on a filesystem, call
&quot;vfs-uuid&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>set-verbose
<br>
verbose</b></p>

<pre style="margin-left:11%;"> set&minus;verbose true|false</pre>


<p style="margin-left:11%; margin-top: 1em">If
<tt>&quot;verbose&quot;</tt> is true, this turns on verbose
messages.</p>

<p style="margin-left:11%; margin-top: 1em">Verbose
messages are disabled unless the environment variable
<tt>&quot;LIBGUESTFS_DEBUG&quot;</tt> is defined and set to
<tt>1</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Verbose
messages are normally sent to <tt>&quot;stderr&quot;</tt>,
unless you register a callback to send them somewhere else
(see &quot;set-event-callback&quot;).</p>


<p style="margin-left:11%; margin-top: 1em"><b>setcon</b></p>

<pre style="margin-left:11%;"> setcon context</pre>

<p style="margin-left:11%; margin-top: 1em">This sets the
SELinux security context of the daemon to the string
<tt>&quot;context&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See the
documentation about <small>SELINUX</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>setxattr</b></p>


<pre style="margin-left:11%;"> setxattr xattr val vallen path</pre>


<p style="margin-left:11%; margin-top: 1em">This call sets
the extended attribute named <tt>&quot;xattr&quot;</tt> of
the file <tt>&quot;path&quot;</tt> to the value
<tt>&quot;val&quot;</tt> (of length
<tt>&quot;vallen&quot;</tt>). The value is arbitrary 8 bit
data.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;lsetxattr&quot;, <i>attr</i>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdisk</b></p>


<pre style="margin-left:11%;"> sfdisk device cyls heads sectors 'lines ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This is a
direct interface to the <i>sfdisk</i>(8) program for
creating partitions on block devices.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;device&quot;</tt>
should be a block device, for example
<tt>&quot;/dev/sda&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;cyls&quot;</tt>,
<tt>&quot;heads&quot;</tt> and <tt>&quot;sectors&quot;</tt>
are the number of cylinders, heads and sectors on the
device, which are passed directly to sfdisk as the
<i>&minus;C</i>, <i>&minus;H</i> and <i>&minus;S</i>
parameters. If you pass <tt>0</tt> for any of these, then
the corresponding parameter is omitted. Usually for
&rsquo;large&rsquo; disks, you can just pass <tt>0</tt> for
these, but for small (floppy-sized) disks, sfdisk (or
rather, the kernel) cannot work out the right geometry and
you will need to tell it.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;lines&quot;</tt>
is a list of lines that we feed to
<tt>&quot;sfdisk&quot;</tt>. For more information refer to
the <i>sfdisk</i>(8) manpage.</p>

<p style="margin-left:11%; margin-top: 1em">To create a
single partition occupying the whole disk, you would pass
<tt>&quot;lines&quot;</tt> as a single element list, when
the single element being the string <tt>&quot;,&quot;</tt>
(comma).</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;sfdisk-l&quot;, &quot;sfdisk-N&quot;,
&quot;part-init&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;part-add&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdiskM</b></p>


<pre style="margin-left:11%;"> sfdiskM device 'lines ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This is a
simplified interface to the &quot;sfdisk&quot; command,
where partition sizes are specified in megabytes only
(rounded to the nearest cylinder) and you don&rsquo;t need
to specify the cyls, heads and sectors parameters which were
rarely if ever used anyway.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;sfdisk&quot;, the <i>sfdisk</i>(8) manpage and
&quot;part-disk&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;part-add&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdisk-N</b></p>


<pre style="margin-left:11%;"> sfdisk&minus;N device partnum cyls heads sectors line</pre>


<p style="margin-left:11%; margin-top: 1em">This runs
<i>sfdisk</i>(8) option to modify just the single partition
<tt>&quot;n&quot;</tt> (note: <tt>&quot;n&quot;</tt> counts
from 1).</p>

<p style="margin-left:11%; margin-top: 1em">For other
parameters, see &quot;sfdisk&quot;. You should usually pass
<tt>0</tt> for the cyls/heads/sectors parameters.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;part-add&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;part-add&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdisk-disk-geometry</b></p>


<pre style="margin-left:11%;"> sfdisk&minus;disk&minus;geometry device</pre>


<p style="margin-left:11%; margin-top: 1em">This displays
the disk geometry of <tt>&quot;device&quot;</tt> read from
the partition table. Especially in the case where the
underlying block device has been resized, this can be
different from the kernel&rsquo;s idea of the geometry (see
&quot;sfdisk-kernel-geometry&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">The result is
in human-readable format, and not designed to be parsed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdisk-kernel-geometry</b></p>


<pre style="margin-left:11%;"> sfdisk&minus;kernel&minus;geometry device</pre>


<p style="margin-left:11%; margin-top: 1em">This displays
the kernel&rsquo;s idea of the geometry of
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The result is
in human-readable format, and not designed to be parsed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sfdisk-l</b></p>

<pre style="margin-left:11%;"> sfdisk&minus;l device</pre>

<p style="margin-left:11%; margin-top: 1em">This displays
the partition table on <tt>&quot;device&quot;</tt>, in the
human-readable output of the <i>sfdisk</i>(8) command. It is
not intended to be parsed.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;part-list&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;part-list&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>sh</b></p>
<pre style="margin-left:11%;"> sh command</pre>

<p style="margin-left:11%; margin-top: 1em">This call runs
a command from the guest filesystem via the guest&rsquo;s
<tt>&quot;/bin/sh&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is like
&quot;command&quot;, but passes the command to:</p>

<pre style="margin-left:11%; margin-top: 1em"> /bin/sh &minus;c &quot;command&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Depending on
the guest&rsquo;s shell, this usually results in wildcards
being expanded, shell expressions being interpolated and so
on.</p>

<p style="margin-left:11%; margin-top: 1em">All the
provisos about &quot;command&quot; apply to this call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sh-lines</b></p>

<pre style="margin-left:11%;"> sh&minus;lines command</pre>

<p style="margin-left:11%; margin-top: 1em">This is the
same as &quot;sh&quot;, but splits the result into a list of
lines.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;command-lines&quot;</p>


<p style="margin-left:11%; margin-top: 1em"><b>shutdown</b></p>

<pre style="margin-left:11%;"> shutdown</pre>

<p style="margin-left:11%; margin-top: 1em">This is the
opposite of &quot;launch&quot;. It performs an orderly
shutdown of the backend process(es). If the autosync flag is
set (which is the default) then the disk image is
synchronized.</p>

<p style="margin-left:11%; margin-top: 1em">If the
subprocess exits with an error then this function will
return an error, which should <i>not</i> be ignored (it may
indicate that the disk image could not be written out
properly).</p>

<p style="margin-left:11%; margin-top: 1em">It is safe to
call this multiple times. Extra calls are ignored.</p>

<p style="margin-left:11%; margin-top: 1em">This call does
<i>not</i> close or free up the handle. You still need to
call &quot;close&quot; afterwards.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;close&quot;
will call this if you don&rsquo;t do it explicitly, but note
that any errors are ignored in that case.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sleep</b></p>

<pre style="margin-left:11%;"> sleep secs</pre>

<p style="margin-left:11%; margin-top: 1em">Sleep for
<tt>&quot;secs&quot;</tt> seconds.</p>


<p style="margin-left:11%; margin-top: 1em"><b>stat</b></p>

<pre style="margin-left:11%;"> stat path</pre>

<p style="margin-left:11%; margin-top: 1em">Returns file
information for the given <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as the <tt>stat(2)</tt> system call.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;statns&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>statns</b></p>

<pre style="margin-left:11%;"> statns path</pre>

<p style="margin-left:11%; margin-top: 1em">Returns file
information for the given <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as the <tt>stat(2)</tt> system call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>statvfs</b></p>

<pre style="margin-left:11%;"> statvfs path</pre>

<p style="margin-left:11%; margin-top: 1em">Returns file
system statistics for any mounted file system.
<tt>&quot;path&quot;</tt> should be a file or directory in
the mounted file system (typically it is the mount point
itself, but it doesn&rsquo;t need to be).</p>

<p style="margin-left:11%; margin-top: 1em">This is the
same as the <tt>statvfs(2)</tt> system call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>strings</b></p>

<pre style="margin-left:11%;"> strings path</pre>

<p style="margin-left:11%; margin-top: 1em">This runs the
<i>strings</i>(1) command on a file and returns the list of
printable strings found.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>strings-e</b></p>


<pre style="margin-left:11%;"> strings&minus;e encoding path</pre>


<p style="margin-left:11%; margin-top: 1em">This is like
the &quot;strings&quot; command, but allows you to specify
the encoding of strings that are looked for in the source
file <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Allowed
encodings are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>s</p></td>
<td width="5%"></td>
<td width="83%">


<p>Single 7&minus;bit&minus;byte characters like
<small>ASCII</small> and the ASCII-compatible parts of
<small>ISO&minus;8859&minus;X</small> (this is what
&quot;strings&quot; uses).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>S</p></td>
<td width="5%"></td>
<td width="83%">


<p>Single 8&minus;bit&minus;byte characters.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>b</p></td>
<td width="5%"></td>
<td width="83%">


<p>16&minus;bit big endian strings such as those encoded in
<small>UTF&minus;16BE</small> or
<small>UCS&minus;2BE.</small></p> </td></tr>
</table>

<p style="margin-left:11%;">l (lower case letter L)</p>

<p style="margin-left:17%;">16&minus;bit little endian such
as <small>UTF&minus;16LE</small> and
<small>UCS&minus;2LE.</small> This is useful for examining
binaries in Windows guests.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>B</p></td>
<td width="5%"></td>
<td width="57%">


<p>32&minus;bit big endian such as
<small>UCS&minus;4BE.</small></p> </td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>L</p></td>
<td width="5%"></td>
<td width="57%">


<p>32&minus;bit little endian such as
<small>UCS&minus;4LE.</small></p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The returned
strings are transcoded to <small>UTF&minus;8.</small></p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapoff-device</b></p>


<pre style="margin-left:11%;"> swapoff&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
disables the libguestfs appliance swap device or partition
named <tt>&quot;device&quot;</tt>. See
&quot;swapon-device&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapoff-file</b></p>


<pre style="margin-left:11%;"> swapoff&minus;file file</pre>


<p style="margin-left:11%; margin-top: 1em">This command
disables the libguestfs appliance swap on file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapoff-label</b></p>


<pre style="margin-left:11%;"> swapoff&minus;label label</pre>


<p style="margin-left:11%; margin-top: 1em">This command
disables the libguestfs appliance swap on labeled swap
partition.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapoff-uuid</b></p>


<pre style="margin-left:11%;"> swapoff&minus;uuid uuid</pre>


<p style="margin-left:11%; margin-top: 1em">This command
disables the libguestfs appliance swap partition with the
given <small>UUID.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>swapon-device</b></p>


<pre style="margin-left:11%;"> swapon&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
enables the libguestfs appliance to use the swap device or
partition named <tt>&quot;device&quot;</tt>. The increased
memory is made available for all commands, for example those
run using &quot;command&quot; or &quot;sh&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
should not swap to existing guest swap partitions unless you
know what you are doing. They may contain hibernation
information, or other information that the guest
doesn&rsquo;t want you to trash. You also risk leaking
information about the host to the guest this way. Instead,
attach a new host device to the guest and swap on that.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapon-file</b></p>

<pre style="margin-left:11%;"> swapon&minus;file file</pre>

<p style="margin-left:11%; margin-top: 1em">This command
enables swap to a file. See &quot;swapon-device&quot; for
other notes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapon-label</b></p>


<pre style="margin-left:11%;"> swapon&minus;label label</pre>


<p style="margin-left:11%; margin-top: 1em">This command
enables swap to a labeled swap partition. See
&quot;swapon-device&quot; for other notes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>swapon-uuid</b></p>

<pre style="margin-left:11%;"> swapon&minus;uuid uuid</pre>

<p style="margin-left:11%; margin-top: 1em">This command
enables swap to a swap partition with the given
<small>UUID.</small> See &quot;swapon-device&quot; for other
notes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sync</b></p>

<pre style="margin-left:11%;"> sync</pre>

<p style="margin-left:11%; margin-top: 1em">This syncs the
disk, so that any writes are flushed through to the
underlying disk image.</p>

<p style="margin-left:11%; margin-top: 1em">You should
always call this if you have modified a disk image, before
closing the handle.</p>


<p style="margin-left:11%; margin-top: 1em"><b>syslinux</b></p>


<pre style="margin-left:11%;"> syslinux device [directory:..]</pre>


<p style="margin-left:11%; margin-top: 1em">Install the
<small>SYSLINUX</small> bootloader on
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The device
parameter must be either a whole disk formatted as a
<small>FAT</small> filesystem, or a partition formatted as a
<small>FAT</small> filesystem. In the latter case, the
partition should be marked as &quot;active&quot;
(&quot;part-set-bootable&quot;) and a Master Boot Record
must be installed (eg. using &quot;pwrite-device&quot;) on
the first sector of the whole disk. The
<small>SYSLINUX</small> package comes with some suitable
Master Boot Records. See the <i>syslinux</i>(1) man page for
further information.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
arguments are: <br>
&quot;directory&quot;</p>

<p style="margin-left:17%;">Install <small>SYSLINUX</small>
in the named subdirectory, instead of in the root directory
of the <small>FAT</small> filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
configuration can be supplied to <small>SYSLINUX</small> by
placing a file called <tt>&quot;syslinux.cfg&quot;</tt> on
the <small>FAT</small> filesystem, either in the root
directory, or under <tt>&quot;directory&quot;</tt> if that
optional argument is being used. For further information
about the contents of this file, see <i>syslinux</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;extlinux&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>tail</b></p>

<pre style="margin-left:11%;"> tail path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns up to the last 10 lines of a file as a list of
strings.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>tail-n</b></p>


<pre style="margin-left:11%;"> tail&minus;n nrlines path</pre>


<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is a positive number,
this returns the last <tt>&quot;nrlines&quot;</tt> lines of
the file <tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is a negative number,
this returns lines from the file <tt>&quot;path&quot;</tt>,
starting with the <tt>&quot;&minus;nrlines&quot;</tt>th
line.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <tt>&quot;nrlines&quot;</tt> is zero, this returns
an empty list.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><b>tar-in <br>
tar-in-opts</b></p>

<pre style="margin-left:11%;"> tar&minus;in (tarfile|&minus;) directory [compress:..]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
uploads and unpacks local file <tt>&quot;tarfile&quot;</tt>
into <tt>&quot;directory&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;compress&quot;</tt> flag controls compression. If
not given, then the input should be an uncompressed tar
file. Otherwise one of the following strings may be given to
select the compression type of the input file:
<tt>&quot;compress&quot;</tt>, <tt>&quot;gzip&quot;</tt>,
<tt>&quot;bzip2&quot;</tt>, <tt>&quot;xz&quot;</tt>,
<tt>&quot;lzop&quot;</tt>. (Note that not all builds of
libguestfs will support all of these compression types).</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>tar-out <br>
tar-out-opts</b></p>

<pre style="margin-left:11%;"> tar&minus;out directory (tarfile|&minus;) [compress:..] [numericowner:true|false] [excludes:..]</pre>


<p style="margin-left:11%; margin-top: 1em">This command
packs the contents of <tt>&quot;directory&quot;</tt> and
downloads it to local file <tt>&quot;tarfile&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
<tt>&quot;compress&quot;</tt> flag controls compression. If
not given, then the output will be an uncompressed tar file.
Otherwise one of the following strings may be given to
select the compression type of the output file:
<tt>&quot;compress&quot;</tt>, <tt>&quot;gzip&quot;</tt>,
<tt>&quot;bzip2&quot;</tt>, <tt>&quot;xz&quot;</tt>,
<tt>&quot;lzop&quot;</tt>. (Note that not all builds of
libguestfs will support all of these compression types).</p>

<p style="margin-left:11%; margin-top: 1em">The other
optional arguments are: <br>
&quot;excludes&quot;</p>

<p style="margin-left:17%;">A list of wildcards. Files are
excluded if they match any of the wildcards.</p>

<p style="margin-left:11%;">&quot;numericowner&quot;</p>

<p style="margin-left:17%;">If set to true, the output tar
file will contain <small>UID/GID</small> numbers instead of
user/group names.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>tgz-in</b></p>


<pre style="margin-left:11%;"> tgz&minus;in (tarball|&minus;) directory</pre>


<p style="margin-left:11%; margin-top: 1em">This command
uploads and unpacks local file <tt>&quot;tarball&quot;</tt>
(a <i>gzip compressed</i> tar file) into
<tt>&quot;directory&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;tar-in&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>tgz-out</b></p>


<pre style="margin-left:11%;"> tgz&minus;out directory (tarball|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This command
packs the contents of <tt>&quot;directory&quot;</tt> and
downloads it to local file <tt>&quot;tarball&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;tar-out&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>touch</b></p>

<pre style="margin-left:11%;"> touch path</pre>

<p style="margin-left:11%; margin-top: 1em">Touch acts like
the <i>touch</i>(1) command. It can be used to update the
timestamps on a file, or, if the file does not exist, to
create a new zero-length file.</p>

<p style="margin-left:11%; margin-top: 1em">This command
only works on regular files, and will fail on other file
types such as directories, symbolic links, block special
etc.</p>


<p style="margin-left:11%; margin-top: 1em"><b>truncate</b></p>

<pre style="margin-left:11%;"> truncate path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
truncates <tt>&quot;path&quot;</tt> to a zero-length file.
The file must exist already.</p>


<p style="margin-left:11%; margin-top: 1em"><b>truncate-size</b></p>


<pre style="margin-left:11%;"> truncate&minus;size path size</pre>


<p style="margin-left:11%; margin-top: 1em">This command
truncates <tt>&quot;path&quot;</tt> to size
<tt>&quot;size&quot;</tt> bytes. The file must exist
already.</p>

<p style="margin-left:11%; margin-top: 1em">If the current
file size is less than <tt>&quot;size&quot;</tt> then the
file is extended to the required size with zero bytes. This
creates a sparse file (ie. disk blocks are not allocated for
the file until you write to it). To create a non-sparse file
of zeroes, use &quot;fallocate64&quot; instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>tune2fs</b></p>


<pre style="margin-left:11%;"> tune2fs device [force:true|false] [maxmountcount:N] [mountcount:N] [errorbehavior:..] [group:N] [intervalbetweenchecks:N] [reservedblockspercentage:N] [lastmounteddirectory:..] [reservedblockscount:N] [user:N]</pre>


<p style="margin-left:11%; margin-top: 1em">This call
allows you to adjust various filesystem parameters of an
ext2/ext3/ext4 filesystem called
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The optional
parameters are: <br>
&quot;force&quot;</p>

<p style="margin-left:17%;">Force tune2fs to complete the
operation even in the face of errors. This is the same as
the tune2fs <tt>&quot;&minus;f&quot;</tt> option.</p>

<p style="margin-left:11%;">&quot;maxmountcount&quot;</p>

<p style="margin-left:17%;">Set the number of mounts after
which the filesystem is checked by <i>e2fsck</i>(8). If this
is <tt>0</tt> then the number of mounts is disregarded. This
is the same as the tune2fs <tt>&quot;&minus;c&quot;</tt>
option.</p>

<p style="margin-left:11%;">&quot;mountcount&quot;</p>

<p style="margin-left:17%;">Set the number of times the
filesystem has been mounted. This is the same as the tune2fs
<tt>&quot;&minus;C&quot;</tt> option.</p>

<p style="margin-left:11%;">&quot;errorbehavior&quot;</p>

<p style="margin-left:17%;">Change the behavior of the
kernel code when errors are detected. Possible values
currently are: <tt>&quot;continue&quot;</tt>,
<tt>&quot;remount&minus;ro&quot;</tt>,
<tt>&quot;panic&quot;</tt>. In practice these options
don&rsquo;t really make any difference, particularly for
write errors.</p>

<p style="margin-left:17%; margin-top: 1em">This is the
same as the tune2fs <tt>&quot;&minus;e&quot;</tt>
option.</p>

<p style="margin-left:11%;">&quot;group&quot;</p>

<p style="margin-left:17%;">Set the group which can use
reserved filesystem blocks. This is the same as the tune2fs
<tt>&quot;&minus;g&quot;</tt> option except that it can only
be specified as a number.</p>


<p style="margin-left:11%;">&quot;intervalbetweenchecks&quot;</p>

<p style="margin-left:17%;">Adjust the maximal time between
two filesystem checks (in seconds). If the option is passed
as <tt>0</tt> then time-dependent checking is disabled.</p>

<p style="margin-left:17%; margin-top: 1em">This is the
same as the tune2fs <tt>&quot;&minus;i&quot;</tt>
option.</p>


<p style="margin-left:11%;">&quot;reservedblockspercentage&quot;</p>

<p style="margin-left:17%;">Set the percentage of the
filesystem which may only be allocated by privileged
processes. This is the same as the tune2fs
<tt>&quot;&minus;m&quot;</tt> option.</p>


<p style="margin-left:11%;">&quot;lastmounteddirectory&quot;</p>

<p style="margin-left:17%;">Set the last mounted directory.
This is the same as the tune2fs
<tt>&quot;&minus;M&quot;</tt> option.</p>


<p style="margin-left:11%;">&quot;reservedblockscount&quot;
Set the number of reserved filesystem blocks. <br>
This is the same as the tune2fs &quot;&minus;r&quot; option.
<br>
&quot;user&quot;</p>

<p style="margin-left:17%;">Set the user who can use the
reserved filesystem blocks. This is the same as the tune2fs
<tt>&quot;&minus;u&quot;</tt> option except that it can only
be specified as a number.</p>

<p style="margin-left:11%; margin-top: 1em">To get the
current values of filesystem parameters, see
&quot;tune2fs&minus;l&quot;. For precise details of how
tune2fs works, see the <i>tune2fs</i>(8) man page.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>tune2fs&minus;l</b></p>

<pre style="margin-left:11%;"> tune2fs&minus;l device</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the contents of the ext2, ext3 or ext4 filesystem superblock
on <tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">It is the same
as running <tt>&quot;tune2fs &minus;l device&quot;</tt>. See
<i>tune2fs</i>(8) manpage for more details. The list of
fields returned isn&rsquo;t clearly defined, and depends on
both the version of <tt>&quot;tune2fs&quot;</tt> that
libguestfs was built against, and the filesystem itself.</p>


<p style="margin-left:11%; margin-top: 1em"><b>txz-in</b></p>


<pre style="margin-left:11%;"> txz&minus;in (tarball|&minus;) directory</pre>


<p style="margin-left:11%; margin-top: 1em">This command
uploads and unpacks local file <tt>&quot;tarball&quot;</tt>
(an <i>xz compressed</i> tar file) into
<tt>&quot;directory&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;tar-in&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>txz-out</b></p>


<pre style="margin-left:11%;"> txz&minus;out directory (tarball|&minus;)</pre>


<p style="margin-left:11%; margin-top: 1em">This command
packs the contents of <tt>&quot;directory&quot;</tt> and
downloads it to local file <tt>&quot;tarball&quot;</tt> (as
an xz compressed tar archive).</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;tar-out&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>umask</b></p>

<pre style="margin-left:11%;"> umask mask</pre>

<p style="margin-left:11%; margin-top: 1em">This function
sets the mask used for creating new files and device nodes
to <tt>&quot;mask &amp; 0777&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Typical umask
values would be <tt>022</tt> which creates new files with
permissions like
&quot;&minus;rw&minus;r--r&minus;&minus;&quot; or
&quot;&minus;rwxr&minus;xr&minus;x&quot;, and <tt>002</tt>
which creates new files with permissions like
&quot;&minus;rw&minus;rw&minus;r&minus;&minus;&quot; or
&quot;&minus;rwxrwxr&minus;x&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The default
umask is <tt>022</tt>. This is important because it means
that directories and device nodes will be created with
<tt>0644</tt> or <tt>0755</tt> mode even if you specify
<tt>0777</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;get-umask&quot;, <i>umask</i>(2), &quot;mknod&quot;,
&quot;mkdir&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This call
returns the previous umask.</p>

<p style="margin-left:11%; margin-top: 1em"><b>umount <br>
unmount <br>
umount-opts</b></p>

<pre style="margin-left:11%;"> umount pathordevice [force:true|false] [lazyunmount:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">This unmounts
the given filesystem. The filesystem may be specified either
by its mountpoint (path) or the device which contains the
filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>umount-all
<br>
unmount-all</b></p>
<pre style="margin-left:11%;"> umount&minus;all</pre>

<p style="margin-left:11%; margin-top: 1em">This unmounts
all mounted filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">Some internal
mounts are not unmounted by this call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>umount-local</b></p>


<pre style="margin-left:11%;"> umount&minus;local [retry:true|false]</pre>


<p style="margin-left:11%; margin-top: 1em">If libguestfs
is exporting the filesystem on a local mountpoint, then this
unmounts it.</p>

<p style="margin-left:11%; margin-top: 1em">See &quot;
<small>MOUNT LOCAL&quot;</small> in <i>guestfs</i>(3) for
full documentation.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>upload</b></p>


<pre style="margin-left:11%;"> upload (filename|&minus;) remotefilename</pre>


<p style="margin-left:11%; margin-top: 1em">Upload local
file <tt>&quot;filename&quot;</tt> to
<tt>&quot;remotefilename&quot;</tt> on the filesystem.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;filename&quot;</tt>
can also be a named pipe.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;download&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>upload-offset</b></p>


<pre style="margin-left:11%;"> upload&minus;offset (filename|&minus;) remotefilename offset</pre>


<p style="margin-left:11%; margin-top: 1em">Upload local
file <tt>&quot;filename&quot;</tt> to
<tt>&quot;remotefilename&quot;</tt> on the filesystem.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;remotefilename&quot;</tt>
is overwritten starting at the byte
<tt>&quot;offset&quot;</tt> specified. The intention is to
overwrite parts of existing files or devices, although if a
non-existent file is specified then it is created with a
&quot;hole&quot; before <tt>&quot;offset&quot;</tt>. The
size of the data written is implicit in the size of the
source <tt>&quot;filename&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that there
is no limit on the amount of data that can be uploaded with
this call, unlike with &quot;pwrite&quot;, and this call
always writes the full amount unless an error occurs.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;upload&quot;, &quot;pwrite&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;&minus;&quot;</tt> instead of a filename to
read/write from stdin/stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>user-cancel</b></p>

<pre style="margin-left:11%;"> user&minus;cancel</pre>

<p style="margin-left:11%; margin-top: 1em">This function
cancels the current upload or download operation.</p>

<p style="margin-left:11%; margin-top: 1em">Unlike most
other libguestfs calls, this function is signal safe and
thread safe. You can call it from a signal handler or from
another thread, without needing to do any locking.</p>

<p style="margin-left:11%; margin-top: 1em">The transfer
that was in progress (if there is one) will stop shortly
afterwards, and will return an error. The errno (see
&quot;guestfs_last_errno&quot;) is set to
<tt>&quot;EINTR&quot;</tt>, so you can test for this to find
out if the operation was cancelled or failed because of
another error.</p>

<p style="margin-left:11%; margin-top: 1em">No cleanup is
performed: for example, if a file was being uploaded then
after cancellation there may be a partially uploaded file.
It is the caller&rsquo;s responsibility to clean up if
necessary.</p>

<p style="margin-left:11%; margin-top: 1em">There are two
common places that you might call
&quot;user-cancel&quot;:</p>

<p style="margin-left:11%; margin-top: 1em">In an
interactive text-based program, you might call it from a
<tt>&quot;SIGINT&quot;</tt> signal handler so that pressing
<tt>&quot;^C&quot;</tt> cancels the current operation. (You
also need to call &quot;guestfs_set_pgroup&quot; so that
child processes don&rsquo;t receive the
<tt>&quot;^C&quot;</tt> signal).</p>

<p style="margin-left:11%; margin-top: 1em">In a graphical
program, when the main thread is displaying a progress bar
with a cancel button, wire up the cancel button to call this
function.</p>


<p style="margin-left:11%; margin-top: 1em"><b>utimens</b></p>


<pre style="margin-left:11%;"> utimens path atsecs atnsecs mtsecs mtnsecs</pre>


<p style="margin-left:11%; margin-top: 1em">This command
sets the timestamps of a file with nanosecond precision.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;atsecs,
atnsecs&quot;</tt> are the last access time (atime) in secs
and nanoseconds from the epoch.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;mtsecs,
mtnsecs&quot;</tt> are the last modification time (mtime) in
secs and nanoseconds from the epoch.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>*nsecs</tt> field contains the special value
<tt>&quot;&minus;1&quot;</tt> then the corresponding
timestamp is set to the current time. (The <tt>*secs</tt>
field is ignored in this case).</p>

<p style="margin-left:11%; margin-top: 1em">If the
<tt>*nsecs</tt> field contains the special value
<tt>&quot;&minus;2&quot;</tt> then the corresponding
timestamp is left unchanged. (The <tt>*secs</tt> field is
ignored in this case).</p>


<p style="margin-left:11%; margin-top: 1em"><b>utsname</b></p>

<pre style="margin-left:11%;"> utsname</pre>

<p style="margin-left:11%; margin-top: 1em">This returns
the kernel version of the appliance, where this is
available. This information is only useful for debugging.
Nothing in the returned structure is defined by the
<small>API.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>version</b></p>

<pre style="margin-left:11%;"> version</pre>

<p style="margin-left:11%; margin-top: 1em">Return the
libguestfs version number that the program is linked
against.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
because of dynamic linking this is not necessarily the
version of libguestfs that you compiled against. You can
compile the program, and then at runtime dynamically link
against a completely different
<tt>&quot;libguestfs.so&quot;</tt> library.</p>

<p style="margin-left:11%; margin-top: 1em">This call was
added in version <tt>1.0.58</tt>. In previous versions of
libguestfs there was no way to get the version number. From
C code you can use dynamic linker functions to find out if
this symbol exists (if it doesn&rsquo;t, then it&rsquo;s an
earlier version).</p>

<p style="margin-left:11%; margin-top: 1em">The call
returns a structure with four elements. The first three
(<tt>&quot;major&quot;</tt>, <tt>&quot;minor&quot;</tt> and
<tt>&quot;release&quot;</tt>) are numbers and correspond to
the usual version triplet. The fourth element
(<tt>&quot;extra&quot;</tt>) is a string and is normally
empty, but may be used for distro-specific information.</p>

<p style="margin-left:11%; margin-top: 1em">To construct
the original version string:
<tt>&quot;$major.$minor.$release$extra&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot; <small>LIBGUESTFS VERSION NUMBERS&quot;</small> in
<i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Note:</i>
Don&rsquo;t use this call to test for availability of
features. In enterprise distributions we backport features
from later versions into earlier versions, making this an
unreliable way to test for features. Use
&quot;available&quot; or &quot;feature-available&quot;
instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vfs-label</b></p>


<pre style="margin-left:11%;"> vfs&minus;label mountable</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the label of the filesystem on
<tt>&quot;mountable&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
filesystem is unlabeled, this returns the empty string.</p>

<p style="margin-left:11%; margin-top: 1em">To find a
filesystem from the label, use &quot;findfs-label&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vfs-type</b></p>


<pre style="margin-left:11%;"> vfs&minus;type mountable</pre>


<p style="margin-left:11%; margin-top: 1em">This command
gets the filesystem type corresponding to the filesystem on
<tt>&quot;mountable&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">For most
filesystems, the result is the name of the Linux
<small>VFS</small> module which would be used to mount this
filesystem if you mounted it without specifying the
filesystem type. For example a string such as
<tt>&quot;ext3&quot;</tt> or <tt>&quot;ntfs&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vfs-uuid</b></p>


<pre style="margin-left:11%;"> vfs&minus;uuid mountable</pre>


<p style="margin-left:11%; margin-top: 1em">This returns
the filesystem <small>UUID</small> of the filesystem on
<tt>&quot;mountable&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
filesystem does not have a <small>UUID,</small> this returns
the empty string.</p>

<p style="margin-left:11%; margin-top: 1em">To find a
filesystem from the <small>UUID,</small> use
&quot;findfs-uuid&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vg-activate</b></p>


<pre style="margin-left:11%;"> vg&minus;activate true|false 'volgroups ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This command
activates or (if <tt>&quot;activate&quot;</tt> is false)
deactivates all logical volumes in the listed volume groups
<tt>&quot;volgroups&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
the same as running <tt>&quot;vgchange &minus;a y|n
volgroups...&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Note that if
<tt>&quot;volgroups&quot;</tt> is an empty list then
<b>all</b> volume groups are activated or deactivated.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vg-activate-all</b></p>


<pre style="margin-left:11%;"> vg&minus;activate&minus;all true|false</pre>


<p style="margin-left:11%; margin-top: 1em">This command
activates or (if <tt>&quot;activate&quot;</tt> is false)
deactivates all logical volumes in all volume groups.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
the same as running <tt>&quot;vgchange &minus;a
y|n&quot;</tt></p>


<p style="margin-left:11%; margin-top: 1em"><b>vgchange-uuid</b></p>

<pre style="margin-left:11%;"> vgchange&minus;uuid vg</pre>

<p style="margin-left:11%; margin-top: 1em">Generate a new
random <small>UUID</small> for the volume group
<tt>&quot;vg&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgchange-uuid-all</b></p>


<pre style="margin-left:11%;"> vgchange&minus;uuid&minus;all</pre>


<p style="margin-left:11%; margin-top: 1em">Generate new
random UUIDs for all volume groups.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgcreate</b></p>


<pre style="margin-left:11%;"> vgcreate volgroup 'physvols ...'</pre>


<p style="margin-left:11%; margin-top: 1em">This creates an
<small>LVM</small> volume group called
<tt>&quot;volgroup&quot;</tt> from the non-empty list of
physical volumes <tt>&quot;physvols&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vglvuuids</b></p>

<pre style="margin-left:11%;"> vglvuuids vgname</pre>

<p style="margin-left:11%; margin-top: 1em">Given a
<small>VG</small> called <tt>&quot;vgname&quot;</tt>, this
returns the UUIDs of all the logical volumes created in this
volume group.</p>

<p style="margin-left:11%; margin-top: 1em">You can use
this along with &quot;lvs&quot; and &quot;lvuuid&quot; calls
to associate logical volumes and volume groups.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;vgpvuuids&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgmeta</b></p>

<pre style="margin-left:11%;"> vgmeta vgname</pre>


<p style="margin-left:11%; margin-top: 1em">&quot;vgname&quot;
is an <small>LVM</small> volume group. This command examines
the volume group and returns its metadata.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
metadata is an internal structure used by
<small>LVM,</small> subject to change at any time, and is
provided for information only.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgpvuuids</b></p>

<pre style="margin-left:11%;"> vgpvuuids vgname</pre>

<p style="margin-left:11%; margin-top: 1em">Given a
<small>VG</small> called <tt>&quot;vgname&quot;</tt>, this
returns the UUIDs of all the physical volumes that this
volume group resides on.</p>

<p style="margin-left:11%; margin-top: 1em">You can use
this along with &quot;pvs&quot; and &quot;pvuuid&quot; calls
to associate physical volumes and volume groups.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;vglvuuids&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgremove</b></p>

<pre style="margin-left:11%;"> vgremove vgname</pre>

<p style="margin-left:11%; margin-top: 1em">Remove an
<small>LVM</small> volume group <tt>&quot;vgname&quot;</tt>,
(for example <tt>&quot;VG&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">This also
forcibly removes all logical volumes in the volume group (if
any).</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgrename</b></p>


<pre style="margin-left:11%;"> vgrename volgroup newvolgroup</pre>


<p style="margin-left:11%; margin-top: 1em">Rename a volume
group <tt>&quot;volgroup&quot;</tt> with the new name
<tt>&quot;newvolgroup&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>vgs</b></p>
<pre style="margin-left:11%;"> vgs</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
volumes groups detected. This is the equivalent of the
<i>vgs</i>(8) command.</p>

<p style="margin-left:11%; margin-top: 1em">This returns a
list of just the volume group names that were detected (eg.
<tt>&quot;VolGroup00&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;vgs-full&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgs-full</b></p>

<pre style="margin-left:11%;"> vgs&minus;full</pre>

<p style="margin-left:11%; margin-top: 1em">List all the
volumes groups detected. This is the equivalent of the
<i>vgs</i>(8) command. The &quot;full&quot; version includes
all fields.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vgscan</b></p>

<pre style="margin-left:11%;"> vgscan</pre>

<p style="margin-left:11%; margin-top: 1em">This rescans
all block devices and rebuilds the list of
<small>LVM</small> physical volumes, volume groups and
logical volumes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vguuid</b></p>

<pre style="margin-left:11%;"> vguuid vgname</pre>

<p style="margin-left:11%; margin-top: 1em">This command
returns the <small>UUID</small> of the <small>LVM VG</small>
named <tt>&quot;vgname&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>wc-c</b></p>

<pre style="margin-left:11%;"> wc&minus;c path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
counts the characters in a file, using the <tt>&quot;wc
&minus;c&quot;</tt> external command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>wc-l</b></p>

<pre style="margin-left:11%;"> wc&minus;l path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
counts the lines in a file, using the <tt>&quot;wc
&minus;l&quot;</tt> external command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>wc-w</b></p>

<pre style="margin-left:11%;"> wc&minus;w path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
counts the words in a file, using the <tt>&quot;wc
&minus;w&quot;</tt> external command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>wipefs</b></p>

<pre style="margin-left:11%;"> wipefs device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
erases filesystem or <small>RAID</small> signatures from the
specified <tt>&quot;device&quot;</tt> to make the filesystem
invisible to libblkid.</p>

<p style="margin-left:11%; margin-top: 1em">This does not
erase the filesystem itself nor any other data from the
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Compare with
&quot;zero&quot; which zeroes the first few blocks of a
device.</p>


<p style="margin-left:11%; margin-top: 1em"><b>write</b></p>

<pre style="margin-left:11%;"> write path content</pre>

<p style="margin-left:11%; margin-top: 1em">This call
creates a file called <tt>&quot;path&quot;</tt>. The content
of the file is the string <tt>&quot;content&quot;</tt>
(which can contain any 8 bit data).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;write-append&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>write-append</b></p>


<pre style="margin-left:11%;"> write&minus;append path content</pre>


<p style="margin-left:11%; margin-top: 1em">This call
appends <tt>&quot;content&quot;</tt> to the end of file
<tt>&quot;path&quot;</tt>. If <tt>&quot;path&quot;</tt> does
not exist, then a new file is created.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;write&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>write-file</b></p>


<pre style="margin-left:11%;"> write&minus;file path content size</pre>


<p style="margin-left:11%; margin-top: 1em">This call
creates a file called <tt>&quot;path&quot;</tt>. The
contents of the file is the string
<tt>&quot;content&quot;</tt> (which can contain any 8 bit
data), with length <tt>&quot;size&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">As a special
case, if <tt>&quot;size&quot;</tt> is <tt>0</tt> then the
length is calculated using <tt>&quot;strlen&quot;</tt> (so
in this case the content cannot contain embedded
<small>ASCII</small> NULs).</p>


<p style="margin-left:11%; margin-top: 1em"><i><small>NB.</small></i>
Owing to a bug, writing content containing <small>ASCII
NUL</small> characters does <i>not</i> work, even if the
length is specified.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;write&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>xfs-admin</b></p>


<pre style="margin-left:11%;"> xfs&minus;admin device [extunwritten:true|false] [imgfile:true|false] [v2log:true|false] [projid32bit:true|false] [lazycounter:true|false] [label:..] [uuid:..]</pre>


<p style="margin-left:11%; margin-top: 1em">Change the
parameters of the <small>XFS</small> filesystem on
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Devices that
are mounted cannot be modified. Administrators must unmount
filesystems before this call can modify parameters.</p>

<p style="margin-left:11%; margin-top: 1em">Some of the
parameters of a mounted filesystem can be examined and
modified using the &quot;xfs-info&quot; and
&quot;xfs-growfs&quot; calls.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>xfs-growfs</b></p>


<pre style="margin-left:11%;"> xfs&minus;growfs path [datasec:true|false] [logsec:true|false] [rtsec:true|false] [datasize:N] [logsize:N] [rtsize:N] [rtextsize:N] [maxpct:N]</pre>


<p style="margin-left:11%; margin-top: 1em">Grow the
<small>XFS</small> filesystem mounted at
<tt>&quot;path&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
struct contains geometry information. Missing fields are
returned as <tt>&quot;&minus;1&quot;</tt> (for numeric
fields) or empty string.</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>xfs-info</b></p>


<pre style="margin-left:11%;"> xfs&minus;info pathordevice</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;pathordevice&quot;
is a mounted <small>XFS</small> filesystem or a device
containing an <small>XFS</small> filesystem. This command
returns the geometry of the filesystem.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
struct contains geometry information. Missing fields are
returned as <tt>&quot;&minus;1&quot;</tt> (for numeric
fields) or empty string.</p>


<p style="margin-left:11%; margin-top: 1em"><b>xfs-repair</b></p>


<pre style="margin-left:11%;"> xfs&minus;repair device [forcelogzero:true|false] [nomodify:true|false] [noprefetch:true|false] [forcegeometry:true|false] [maxmem:N] [ihashsize:N] [bhashsize:N] [agstride:N] [logdev:..] [rtdev:..]</pre>


<p style="margin-left:11%; margin-top: 1em">Repair corrupt
or damaged <small>XFS</small> filesystem on
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The filesystem
is specified using the <tt>&quot;device&quot;</tt> argument
which should be the device name of the disk partition or
volume containing the filesystem. If given the name of a
block device, <tt>&quot;xfs_repair&quot;</tt> will attempt
to find the raw device associated with the specified block
device and will use the raw device instead.</p>

<p style="margin-left:11%; margin-top: 1em">Regardless, the
filesystem to be repaired must be unmounted, otherwise, the
resulting filesystem may be inconsistent or corrupt.</p>

<p style="margin-left:11%; margin-top: 1em">The returned
status indicates whether filesystem corruption was detected
(returns <tt>1</tt>) or was not detected (returns
<tt>0</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">This command
has one or more optional arguments. See &quot;
<small>OPTIONAL ARGUMENTS&quot;</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>zegrep</b></p>

<pre style="margin-left:11%;"> zegrep regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zegrep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zegrepi</b></p>

<pre style="margin-left:11%;"> zegrepi regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zegrep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zero</b></p>

<pre style="margin-left:11%;"> zero device</pre>

<p style="margin-left:11%; margin-top: 1em">This command
writes zeroes over the first few blocks of
<tt>&quot;device&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">How many blocks
are zeroed isn&rsquo;t specified (but it&rsquo;s <i>not</i>
enough to securely wipe the device). It should be sufficient
to remove any partition tables, filesystem superblocks and
so on.</p>

<p style="margin-left:11%; margin-top: 1em">If blocks are
already zero, then this command avoids writing zeroes. This
prevents the underlying device from becoming non-sparse or
growing unnecessarily.</p>

<p style="margin-left:11%; margin-top: 1em">See also:
&quot;zero-device&quot;, &quot;scrub-device&quot;,
&quot;is-zero-device&quot;</p>


<p style="margin-left:11%; margin-top: 1em"><b>zero-device</b></p>


<pre style="margin-left:11%;"> zero&minus;device device</pre>


<p style="margin-left:11%; margin-top: 1em">This command
writes zeroes over the entire <tt>&quot;device&quot;</tt>.
Compare with &quot;zero&quot; which just zeroes the first
few blocks of a device.</p>

<p style="margin-left:11%; margin-top: 1em">If blocks are
already zero, then this command avoids writing zeroes. This
prevents the underlying device from becoming non-sparse or
growing unnecessarily.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zero-free-space</b></p>


<pre style="margin-left:11%;"> zero&minus;free&minus;space directory</pre>


<p style="margin-left:11%; margin-top: 1em">Zero the free
space in the filesystem mounted on
<tt>&quot;directory&quot;</tt>. The filesystem must be
mounted read-write.</p>

<p style="margin-left:11%; margin-top: 1em">The filesystem
contents are not affected, but any free space in the
filesystem is freed.</p>

<p style="margin-left:11%; margin-top: 1em">Free space is
not &quot;trimmed&quot;. You may want to call
&quot;fstrim&quot; either as an alternative to this, or
after calling this, depending on your requirements.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zerofree</b></p>

<pre style="margin-left:11%;"> zerofree device</pre>

<p style="margin-left:11%; margin-top: 1em">This runs the
<i>zerofree</i> program on <tt>&quot;device&quot;</tt>. This
program claims to zero unused inodes and disk blocks on an
ext2/3 filesystem, thus making it possible to compress the
filesystem more effectively.</p>

<p style="margin-left:11%; margin-top: 1em">You should
<b>not</b> run this program if the filesystem is
mounted.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
that using this program can damage the filesystem or data on
the filesystem.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zfgrep</b></p>

<pre style="margin-left:11%;"> zfgrep pattern path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zfgrep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zfgrepi</b></p>

<pre style="margin-left:11%;"> zfgrepi pattern path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zfgrep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zfile</b></p>

<pre style="margin-left:11%;"> zfile meth path</pre>

<p style="margin-left:11%; margin-top: 1em">This command
runs <tt>&quot;file&quot;</tt> after first decompressing
<tt>&quot;path&quot;</tt> using
<tt>&quot;method&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;method&quot;</tt>
must be one of <tt>&quot;gzip&quot;</tt>,
<tt>&quot;compress&quot;</tt> or
<tt>&quot;bzip2&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Since 1.0.63,
use &quot;file&quot; instead which can now process
compressed files.</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;file&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zgrep</b></p>

<pre style="margin-left:11%;"> zgrep regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zgrep&quot;</tt> program and returns the
matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zgrepi</b></p>

<pre style="margin-left:11%;"> zgrepi regex path</pre>

<p style="margin-left:11%; margin-top: 1em">This calls the
external <tt>&quot;zgrep &minus;i&quot;</tt> program and
returns the matching lines.</p>

<p style="margin-left:11%; margin-top: 1em">Because of the
message protocol, there is a transfer limit of somewhere
between 2MB and 4MB. See &quot; <small>PROTOCOL
LIMITS&quot;</small> in <i>guestfs</i>(3).</p>

<p style="margin-left:11%; margin-top: 1em"><i>This
function is deprecated.</i> In new code, use the
&quot;grep&quot; call instead.</p>

<p style="margin-left:11%; margin-top: 1em">Deprecated
functions will not be removed from the <small>API,</small>
but the fact that they are deprecated indicates that there
are problems with correct use of these functions.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">guestfish
returns 0 if the commands completed without error, or 1 if
there was an error.</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>EDITOR</small></p>

<p style="margin-left:17%;">The <tt>&quot;edit&quot;</tt>
command uses <tt>$EDITOR</tt> as the editor. If not set, it
uses <tt>&quot;vi&quot;</tt>.</p>

<p style="margin-left:11%;"><small>FEBOOTSTRAP_KERNEL <br>
FEBOOTSTRAP_MODULES</small></p>

<p style="margin-left:17%;">When using supermin &ge; 4.1.0,
these have been renamed &quot;
<small>SUPERMIN_KERNEL&quot;</small> and &quot;
<small>SUPERMIN_MODULES&quot;</small> .</p>


<p style="margin-left:11%;"><small>GUESTFISH_DISPLAY_IMAGE</small></p>

<p style="margin-left:17%;">The
<tt>&quot;display&quot;</tt> command uses
<tt>$GUESTFISH_DISPLAY_IMAGE</tt> to display images. If not
set, it uses <i>display</i>(1).</p>


<p style="margin-left:11%;"><small>GUESTFISH_INIT</small></p>

<p style="margin-left:17%;">Printed when guestfish starts.
See &quot; <small>PROMPT&quot;</small> .</p>


<p style="margin-left:11%;"><small>GUESTFISH_OUTPUT</small></p>

<p style="margin-left:17%;">Printed before guestfish
output. See &quot; <small>PROMPT&quot;</small> .</p>


<p style="margin-left:11%;"><small>GUESTFISH_PID</small></p>

<p style="margin-left:17%;">Used with the
<i>&minus;&minus;remote</i> option to specify the remote
guestfish process to control. See section &quot;
<small>REMOTE CONTROL GUESTFISH OVER A SOCKET&quot;</small>
.</p>


<p style="margin-left:11%;"><small>GUESTFISH_PS1</small></p>

<p style="margin-left:17%;">Set the command prompt. See
&quot; <small>PROMPT&quot;</small> .</p>


<p style="margin-left:11%;"><small>GUESTFISH_RESTORE</small></p>

<p style="margin-left:17%;">Printed before guestfish exits.
See &quot; <small>PROMPT&quot;</small> .</p>

<p style="margin-left:11%;"><small>HEXEDITOR</small></p>

<p style="margin-left:17%;">The &quot;hexedit&quot; command
uses <tt>$HEXEDITOR</tt> as the external hex editor. If not
specified, the external <i>hexedit</i>(1) program is
used.</p>

<p style="margin-left:11%;"><small>HOME</small></p>

<p style="margin-left:17%;">If compiled with
<small>GNU</small> readline support, various files in the
home directory can be used. See &quot;
<small>FILES&quot;</small> .</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_APPEND</small></p>

<p style="margin-left:17%;">Pass additional options to the
guest kernel.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_ATTACH_METHOD</small></p>

<p style="margin-left:17%;">This is the old way to set
<tt>&quot;LIBGUESTFS_BACKEND&quot;</tt>.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_BACKEND</small></p>

<p style="margin-left:17%;">Choose the default way to
create the appliance. See &quot;guestfs_set_backend&quot; in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_BACKEND_SETTINGS</small></p>

<p style="margin-left:17%;">A colon-separated list of
backend-specific settings. See &quot;
<small>BACKEND&quot;</small> in <i>guestfs</i>(3), &quot;
<small>BACKEND SETTINGS&quot;</small> in
<i>guestfs</i>(3).</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_CACHEDIR</small></p>

<p style="margin-left:17%;">The location where libguestfs
will cache its appliance, when using a supermin appliance.
The appliance is cached and shared between all handles which
have the same effective user <small>ID.</small></p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;LIBGUESTFS_CACHEDIR&quot;</tt> is not set, then
<tt>&quot;TMPDIR&quot;</tt> is used. If
<tt>&quot;TMPDIR&quot;</tt> is not set, then
<tt>&quot;/var/tmp&quot;</tt> is used.</p>

<p style="margin-left:17%; margin-top: 1em">See also &quot;
<small>LIBGUESTFS_TMPDIR&quot;</small> ,
&quot;set-cachedir&quot;.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_DEBUG</small></p>

<p style="margin-left:17%;">Set
<tt>&quot;LIBGUESTFS_DEBUG=1&quot;</tt> to enable verbose
messages. This has the same effect as using the
<b>&minus;v</b> option.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_HV</small></p>

<p style="margin-left:17%;">Set the default hypervisor
(usually qemu) binary that libguestfs uses. If not set, then
the qemu which was found at compile time by the configure
script is used.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_MEMSIZE</small></p>

<p style="margin-left:17%;">Set the memory allocated to the
qemu process, in megabytes. For example:</p>

<pre style="margin-left:17%; margin-top: 1em"> LIBGUESTFS_MEMSIZE=700</pre>



<p style="margin-left:11%;"><small>LIBGUESTFS_PATH</small></p>

<p style="margin-left:17%;">Set the path that guestfish
uses to search for kernel and initrd.img. See the discussion
of paths in <i>guestfs</i>(3).</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_QEMU</small></p>

<p style="margin-left:17%;">This is the old way to set
<tt>&quot;LIBGUESTFS_HV&quot;</tt>.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_TMPDIR</small></p>

<p style="margin-left:17%;">The location where libguestfs
will store temporary files used by each handle.</p>

<p style="margin-left:17%; margin-top: 1em">If
<tt>&quot;LIBGUESTFS_TMPDIR&quot;</tt> is not set, then
<tt>&quot;TMPDIR&quot;</tt> is used. If
<tt>&quot;TMPDIR&quot;</tt> is not set, then
<tt>&quot;/tmp&quot;</tt> is used.</p>

<p style="margin-left:17%; margin-top: 1em">See also &quot;
<small>LIBGUESTFS_CACHEDIR&quot;</small> ,
&quot;set-tmpdir&quot;.</p>


<p style="margin-left:11%;"><small>LIBGUESTFS_TRACE</small></p>

<p style="margin-left:17%;">Set
<tt>&quot;LIBGUESTFS_TRACE=1&quot;</tt> to enable command
traces.</p>

<p style="margin-left:11%;"><small>PAGER</small></p>

<p style="margin-left:17%;">The <tt>&quot;more&quot;</tt>
command uses <tt>$PAGER</tt> as the pager. If not set, it
uses <tt>&quot;more&quot;</tt>.</p>

<p style="margin-left:11%;"><small>PATH</small></p>

<p style="margin-left:17%;">Libguestfs and guestfish may
run some external programs, and rely on <tt>$PATH</tt> being
set to a reasonable value. If using the libvirt backend,
libvirt will not work at all unless <tt>$PATH</tt> contains
the path of qemu/KVM.</p>

<p style="margin-left:11%;"><small>SUPERMIN_KERNEL <br>
SUPERMIN_MODULES</small></p>

<p style="margin-left:17%;">These two environment variables
allow the kernel that libguestfs uses in the appliance to be
selected. If <tt>$SUPERMIN_KERNEL</tt> is not set, then the
most recent host kernel is chosen. For more information
about kernel selection, see <i>supermin</i>(1). This feature
is only available in supermin / febootstrap &ge; 3.8.</p>

<p style="margin-left:11%;"><small>TMPDIR</small></p>

<p style="margin-left:17%;">See &quot;
<small>LIBGUESTFS_CACHEDIR&quot;</small> , &quot;
<small>LIBGUESTFS_TMPDIR&quot;</small> .</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">$XDG_CONFIG_HOME/libguestfs/libguestfs&minus;tools.conf
<br>
$HOME/.libguestfs&minus;tools.rc <br>
$XDG_CONFIG_DIRS/libguestfs/libguestfs&minus;tools.conf <br>
/etc/libguestfs&minus;tools.conf</p>

<p style="margin-left:17%;">This configuration file
controls the default read-only or read-write mode
(<i>&minus;&minus;ro</i> or <i>&minus;&minus;rw</i>).</p>

<p style="margin-left:17%; margin-top: 1em">See
<i>libguestfs&minus;tools.conf</i>(5).</p>

<p style="margin-left:11%;">$HOME/.guestfish</p>

<p style="margin-left:17%;">If compiled with
<small>GNU</small> readline support, then the command
history is saved in this file.</p>

<p style="margin-left:11%;">$HOME/.inputrc <br>
/etc/inputrc</p>

<p style="margin-left:17%;">If compiled with
<small>GNU</small> readline support, then these files can be
used to configure readline. For further information, please
see &quot; <small>INITIALIZATION FILE&quot;</small> in
<i>readline</i>(3).</p>

<p style="margin-left:17%; margin-top: 1em">To write rules
which only apply to guestfish, use:</p>

<pre style="margin-left:17%; margin-top: 1em"> $if guestfish
 ...
 $endif</pre>


<p style="margin-left:17%; margin-top: 1em">Variables that
you can set in inputrc that change the behaviour of
guestfish in useful ways include: <br>
completion-ignore-case (default: on)</p>

<p style="margin-left:23%;">By default, guestfish will
ignore case when tab-completing paths on the disk. Use:</p>

<pre style="margin-left:23%; margin-top: 1em"> set completion&minus;ignore&minus;case off</pre>


<p style="margin-left:23%; margin-top: 1em">to make
guestfish case sensitive.</p>

<p style="margin-left:11%;">test1.img <br>
test2.img (etc)</p>

<p style="margin-left:17%;">When using the <i>&minus;N</i>
or <i>&minus;&minus;new</i> option, the prepared disk or
filesystem will be created in the file
<tt>&quot;test1.img&quot;</tt> in the current directory. The
second use of <i>&minus;N</i> will use
<tt>&quot;test2.img&quot;</tt> and so on. Any existing file
with the same name will be overwritten. You can use a
different filename by using the
<tt>&quot;filename=&quot;</tt> prefix.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>guestfs</i>(3),
http://libguestfs.org/,
<i>virt&minus;alignment&minus;scan</i>(1),
<i>virt&minus;builder</i>(1), <i>virt&minus;cat</i>(1),
<i>virt&minus;copy&minus;in</i>(1),
<i>virt&minus;copy&minus;out</i>(1),
<i>virt&minus;customize</i>(1), <i>virt&minus;df</i>(1),
<i>virt&minus;diff</i>(1), <i>virt&minus;edit</i>(1),
<i>virt&minus;filesystems</i>(1),
<i>virt&minus;inspector</i>(1),
<i>virt&minus;list&minus;filesystems</i>(1),
<i>virt&minus;list&minus;partitions</i>(1),
<i>virt&minus;log</i>(1), <i>virt&minus;ls</i>(1),
<i>virt&minus;make&minus;fs</i>(1),
<i>virt&minus;p2v</i>(1), <i>virt&minus;rescue</i>(1),
<i>virt&minus;resize</i>(1), <i>virt&minus;sparsify</i>(1),
<i>virt&minus;sysprep</i>(1), <i>virt&minus;tar</i>(1),
<i>virt&minus;tar&minus;in</i>(1),
<i>virt&minus;tar&minus;out</i>(1),
<i>virt&minus;v2v</i>(1),
<i>virt&minus;win&minus;reg</i>(1),
<i>libguestfs&minus;tools.conf</i>(5), <i>display</i>(1),
<i>hexedit</i>(1), <i>supermin</i>(1).</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Richard W.M.
Jones (<tt>&quot;rjones at redhat dot com&quot;</tt>)</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2009&minus;2014 Red Hat Inc.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program is
free software; you can redistribute it and/or modify it
under the terms of the <small>GNU</small> General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
distributed in the hope that it will be useful, but
<small>WITHOUT ANY WARRANTY</small> ; without even the
implied warranty of <small>MERCHANTABILITY</small> or
<small>FITNESS FOR A PARTICULAR PURPOSE.</small> See the
<small>GNU</small> General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the <small>GNU</small> General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, <small>MA 02110&minus;1301 USA.</small></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">When reporting
a bug, please supply:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The version of libguestfs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Describe the bug accurately and give a way to reproduce
it.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Run <i>libguestfs&minus;test&minus;tool</i>(1) and paste
the <b>complete, unedited</b> output into the bug
report.</p> </td></tr>
 </table>
<hr>
</body>
</html>
