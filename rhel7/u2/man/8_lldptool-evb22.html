<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:32:56 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>lldptool</title>

</head>
<body>

<h1 align="center">lldptool</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#Theory of Operation">Theory of Operation</a><br>
<a href="#EXAMPLE &amp; USAGE">EXAMPLE &amp; USAGE</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">evb22 &minus;
Show / manipulate EVB IEEE 802.1 Ratified Standard TLV
configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c enabletx</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c enabletx=[yes|no]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c evbmode</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c evbmode=[bridge|station]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c evbrrreq</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c evbrrreq=[yes|no]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c evbrrcap</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c evbrrcap=[yes|no]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c evbgpid</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c evbgpid=[yes|no]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c ecpretries</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c ecpretries=[0..7]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c ecprte</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c ecprte=[0..31]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c vdprwd</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c vdprwd=[0..31]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -t
-i ethx -g ncb -V evb -c vdprka</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>lldptool -T
-i ethx -g ncb -V evb -c vdprka=[0..31]</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Edge
Virtual Bridge (EVB) TLV is a TLV to announce the station
and bridge&rsquo;s edge virtual bridging (EVB) capabilities
and may request the bridge port to be set into reflective
relay (hairpin) mode. If both sides agree on the modes and
time out values, the edge control protocol (ECP) will be
used to exchange VSI discovery protocol (VDP) data using ECP
frames between the host interface and the adjacent switch
port facing the host interface.</p>

<p style="margin-left:11%; margin-top: 1em">This man pages
describes the IEEE 802.1 Qbg ratified standard dated from
July 5th, 2012. The arguments and parameters differ from the
IEEE 802.1 Qbg draft 0.2, which is also implemented. The EVB
protocol version to be used depends on the organizational
unique identifier (OUI) of the EVB TLV in the LLDP data
stream. A OUI value of 0x001b3f stands for the IEEE 802.1
Qbg draft 0.2, a OUI value of 0x0080c2 stands for the IEEE
802.1 Qbg ratified standard. The version of the ECP and VDP
protocols are determined by the ethernet type field in the
ethernet header. The ethernet type value for IEEE 802.1 Qbg
draft 0.2 is 0x88b7, the value for IEEE 802.1 Qbg ratified
standard is 0x8890. Note that the EVB protocol is exchanged
between nearest customer bridges only, employing the
reserved multicast MAC address 01:80:c2:00:00:00 as
destination MAC address. <b>lldpad</b>(8) supports both
versions, the switch port configuration determines which
version will be used. The switch port configuration should
select only one protocol version, never both.</p>

<p style="margin-left:11%; margin-top: 1em">The command
line options and arguments are explained in the
<b>lldptool</b>(8) man pages. Only the EVB, ECP and VDP
protocol specific parameters are detailed in this manual
page.</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The invocation
without command line option &rsquo;-c&rsquo; and argument
displays the complete EVB, ECP and VDP protocol settings in
a pretty print out. See below for a detailed description on
how to interpret the output. <b><br>
&minus;c</b> <i>text</i></p>

<p style="margin-left:22%;">Use of the command line option
&rsquo;-c&rsquo; without any argument displays all known
parameters in the format of <i>key</i>=<i>value</i>, which
is suitable for post processing. Use command line option
&rsquo;-c&rsquo; and one of the following arguments to
display and set individual parameters. <i>Text</i> can be
one of the following values:</p>

<p style="margin-left:11%;"><b>enabletx</b></p>

<p style="margin-left:22%;">Enables or disables the EVB TLV
to be transmitted. When set to disabled no EVB TLV will be
included in the LLDP data stream. Furthermore the output of
the complete EVB settings without option &rsquo;-c&rsquo;
will be empty.</p>

<p style="margin-left:11%;"><b>evbmode</b></p>

<p style="margin-left:22%;">Display the current role or
sets the role the to given value. Supported values are
either &quot;station&quot; or &quot;bridge&quot;.</p>

<p style="margin-left:11%;"><b>evbrrreq</b></p>

<p style="margin-left:22%;">Shows the current reflective
relay (hairpin) request mode or sets the reflective relay
(hairpin) request mode. If the value is &quot;yes&quot;, the
station requests the interface facing switch port to be set
in reflective relay (hairpin) mode. This field is only valid
for stations, the output of evbmode equals
&quot;station&quot;.</p>

<p style="margin-left:11%;"><b>evbrrcap</b></p>

<p style="margin-left:22%;">Shows the current reflective
relay (hairpin) capabilities or sets the reflective relay
(hairpin) capabilities. If the value is &quot;yes&quot;, the
switch port will be set in reflective relay (hairpin) mode.
This field is only valid for switches, the output of evbmode
equals &quot;bridge&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>gpid</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Shows the current station or switch support for grouping
or turns on/off the station or switch support for grouping.
If set to true, the station or switch wants to use group
identifiers in VDP protocols.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ecpretries</b></p>

<p style="margin-left:22%;">Shows or sets the maximum
number of retries for ECP frames to be retransmitted. A
retransmit occurs when no ECP acknowledgement message has
been received during a given time period.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ecprte</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Shows or sets the local run time exponent (RTE). The RTE
will be used as the base for the timing of the ECP protocol
time outs and retransmits. The wait time is calculated as
10*2<i>ecprte</i> micro seconds.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>vdprwd</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Shows or sets the number of resource wait delay value.
This value is calculated as 10*2<i>vdprwd</i> micro seconds
and determines the maximum wait time for VDP protocol
acknowledgements.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>vdprka</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Shows or sets the number of re-init keep alive value.
This value is calculated as 10*2<i>vdprka</i> micro seconds
and determines the wait time for VDP protocol to send a keep
alive message.</p></td></tr>
</table>

<h2>Theory of Operation
<a name="Theory of Operation"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The EVB TLV is
used to announce and exchange supported parameters between
the station and an adjacent switch. If
<i>reflectiverelay</i> is active, the switch sends back
ethernet frames on the very same port it received the frame
on. This is an extension to the current bridging standard
and allows communication between virtual machines on the
same host through the switch port.</p>

<h2>EXAMPLE &amp; USAGE
<a name="EXAMPLE &amp; USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Display locally
configured values for <i>eth0</i></p>

<p style="margin-left:22%;"><b>lldptool -t -g ncb -i eth0
-V evb</b> <br>
EVB Configuration TLV</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>bridge:(00)</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>station:rrreq,rrstat(0x5)</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>retries:7 rte:31</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>mode:station r/l:0 rwd:31</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>r/l:0 rka:8</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This output is
displayed when enabletx has been enabled. The first line
shows the currently known status of the bridge. The second
line shows the currently known status of the station. The
status is displayed verbose appended by the hexadecimal
value in parenthesis. The verbose output uses the bit naming
convention used in the standard document. The third line
displays the values for the ECP protocol number of
retransmits (retries) and the retransmit timeout exponent.
The forth line shows the current mode of operation, either
bridge or station, the resource wait delay value (rwd) and
an indication if the local (0) or remote (1) rwd value is
used. The fifth line displays the value of the re-init keep
alive counter (rka) and an indication if the local (0) or
remote (1) rka value is used. <br>
Display the currently requested forwarding mode for
<i>eth0</i></p>

<p style="margin-left:22%;"><b>lldptool -t -g ncb -i eth0
-V evb -c evbrrreq</b></p>

<p style="margin-left:11%;">Display the locally configured
value for RTE</p>

<p style="margin-left:22%;"><b>lldptool -t -g ncb -i eth0
-V evb -c evbrte</b></p>

<p style="margin-left:11%;">Set the value for RTE to its
maximum value</p>

<p style="margin-left:22%;"><b>lldptool -T -g ncb -i eth0
-V evb -c rte=7</b></p>

<p style="margin-left:11%;">Set the value for enabletx to
yes</p>

<p style="margin-left:22%;"><b>lldptool -T -g ncb -i eth0
-V evb -c enabletx=yes</b></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Currently the
code in lldpad reflects IEEE 802.1 Qbg draft 0.2 of the
upcoming standard. Wireshark support for IEEE 802.1 Qbg
ratified standard TLVs is currently missing. Support for the
IEEE 802.1 Qbg ratified standard protocols ECP and VDP is
currently under development and not fully functional.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>lldptool-vdp</b>(8),
<b>lldptool</b>(8), <b>lldpad</b>(8) <br>
IEEE 802.1Qbg
(http://www.ieee802.org/1/pages/802.1bg.html)</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Thomas
Richter</p>
<hr>
</body>
</html>
