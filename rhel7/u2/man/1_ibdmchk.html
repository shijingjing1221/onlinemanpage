<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:48:22 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IBDMCHK</title>

</head>
<body>

<h1 align="center">IBDMCHK</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSYS">SYNOPSYS</a><br>
<a href="#DESIGN MODE DESCRIPTION">DESIGN MODE DESCRIPTION</a><br>
<a href="#ARGUMENTS:">ARGUMENTS:</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#VERIFICATION MODE DESCRIPTION">VERIFICATION MODE DESCRIPTION</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>IBDM &minus;
Network Checker and Attributes Analyzer</b></p>

<h2>SYNOPSYS
<a name="SYNOPSYS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ibdmchk has two
operation modes: design and verification.</p>


<p style="margin-left:11%; margin-top: 1em"><small>DESIGN:</small></p>

<p style="margin-left:11%; margin-top: 1em">ibdmchk
[&minus;v][&minus;h][&minus;u][&minus;r &lt;roots file&gt;]
&minus;t &lt;topology file&gt; &minus;n &lt;
<small>SM</small> Node&gt; <br>
&minus;p &lt; <small>SM</small> Port&gt; [&minus;e]
[&minus;l &lt;lmc&gt;]</p>


<p style="margin-left:11%; margin-top: 1em"><small>VERIFICATION:</small></p>

<p style="margin-left:11%; margin-top: 1em">ibdmchk
[&minus;v][&minus;h][&minus;r &lt;roots file&gt;] [&minus;s
&lt;subnet file&gt;] [&minus;f &lt;fdb file&gt;] <br>
[&minus;m &lt;mcfdbs file&gt; [&minus;l &lt;lmc&gt;]
[&minus;u] [&minus;M] [&minus;a] <br>
[&minus;c &lt;path sl file&gt;] [&minus;d &lt;sl2vl tables
file&gt;]</p>

<h2>DESIGN MODE DESCRIPTION
<a name="DESIGN MODE DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Design mode
is intended to be used before the cluster is built. It
provides basic checks of the specified network as described
by a topology file. After simulating the <small>SM
LID</small> assignment and routing algorithms it provides
reports of the (H)CA to (H)CA paths depth histogram and
credit deadlock potential in the resulting routing
scheme.</p>

<h2>ARGUMENTS:
<a name="ARGUMENTS:"></a>
</h2>



<p style="margin-top: 1em">&minus;t&#9130;&minus;&minus;topo
&lt;topo file&gt; <br>
The <b>topology file</b> specifying the network. See man
<b>ibdm-topology-file</b> <br>
&minus;n&#9130;&minus;&minus;node &lt; <small>SM</small>
Node&gt; <br>
The name of the Subnet Manager node (syntax:
&lt;Topo&minus;File&minus;System&gt;/U1) <br>
&minus;p&#9130;&minus;&minus;port &lt; <small>SM</small>
Port&gt; <br>
The port number by which the <small>SM</small> nodes is
attached to the fabric.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-top: 1em">&minus;v&#9130;&minus;&minus;verbose
<br>
Verbsoe mode <br>
&minus;h&#9130;&minus;&minus;help <br>
Provides this help message <br>
&minus;l&#9130;&minus;&minus;lmc &lt;lmc&gt; <small><br>
LMC</small> value &gt; 0 means assigning 2^lmc lids to each
port. <br>
&minus;e&#9130;&minus;&minus;enh <br>
Use enhanced routing algorithm when <small>LMC</small> &gt;
0 and report the resulting paths correlation (using same
system/node) histogram <br>
&minus;r&#9130;&minus;&minus;roots &lt;roots file&gt; A file
with all the roots node names (one on each <br>
line).</p>

<h2>VERIFICATION MODE DESCRIPTION
<a name="VERIFICATION MODE DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">After the
cluster is built and OpenSM is run (using flag &minus;D
0x43) it reports the subnet and <small>FDB</small> tables
into the files osm&minus;subnet.lst, osm.fdbs and osm.fdbs
in /var/log/ (or subnet.lst, osm.fdbs and osm.mcfdbs into
/var/cache/ibutils in older OpenSM versions). ibdiagnet is
also producing the same files in its output directory. Based
on these files the utility checks all <small>CA</small> to
<small>CA</small> connectivity. Further analysis for credit
deadlock potential is performed and reported. In case of an
<small>LMC</small> &gt; 0 it reports histograms for how many
systems and nodes are common between the different paths for
the same port pairs.</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>



<p style="margin-top: 1em">&minus;l&#9130;&minus;&minus;lmc
&lt;lmc&gt; <br>
The <small>LMC</small> value used while running OpenSM.
Mandatory if not the default 0.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-top: 1em">&minus;v&#9130;&minus;&minus;verbose
<br>
Verbsoe mode <br>
&minus;h&#9130;&minus;&minus;help <br>
Provides this help message <br>
&minus;s&#9130;&minus;&minus;subnet &lt;file&gt; <br>
OpenSM subnet.lst file (default is
/var/log/osm&minus;subnet.lst or
/var/cache/ibutils/subnet.lst) <br>
&minus;f&#9130;&minus;&minus;fdb &lt;file&gt; <br>
OpenSM dump of Ucast <small>LFDB</small> . Use &minus;D 0x41
to generate it (default is /var/log/osm.fdbs or
/var/cache/ibutils/osm.fdbs). <br>
&minus;m&#9130;&minus;&minus;mcfdb &lt;file&gt; <br>
OpenSM dump of Multicast <small>LFDB</small> . Use &minus;D
0x41 to generate it (default is /var/log/osm.mcfdbs or
/var/cache/ibutils/osm.mcfdbs). <br>
&minus;c&#9130;&minus;&minus;psl &lt;file&gt; <br>
Source Guid to <small>DLID</small> &minus;&gt; Path
<small>SL</small> mapping. Each line holds: src_node_guid
dlid sl. Used by the credit loop check to accuartly model
<small>SL/VL</small> based routing. <br>
&minus;d&#9130;&minus;&minus;slvl &lt;file&gt; <small><br>
SL2VL</small> mapping of all switces. Each line holds:
swguid iport oport 0x(sl0)(sl1) 0x(sl2)(sl3)... Used by the
credit loop check to accuartly model <small>SL/VL</small>
based routing. <br>
&minus;r&#9130;&minus;&minus;roots &lt;roots file&gt; <br>
A file holding all root nodes guids (one per line). <br>
&minus;u&#9130;&minus;&minus;updn <br>
Use Up/Down based credit loop check algorithm instead of the
generic one. <br>
&minus;M&#9130;&minus;&minus;MFT <br>
Include multicast routing in credit loops analysis. <br>
&minus;a&#9130;&minus;&minus;all <br>
Verify not only CA-CA paths but also
<small>SW&minus;SW</small> , CA-SW and
<small>SW&minus;CA</small> . Both check for
<small>FDB</small> path connectivity and also for credit
loops.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Eitan Zahavi,
Mellanox Technologies <small>LTD</small> ,
eitan@mellanox.co.il</p>
<hr>
</body>
</html>
