<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:00:59 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MYISAMCHK</title>

</head>
<body>

<h1 align="center">MYISAMCHK</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#MYISAMCHK GENERAL OPTIONS">MYISAMCHK GENERAL OPTIONS</a><br>
<a href="#MYISAMCHK CHECK OPTIONS">MYISAMCHK CHECK OPTIONS</a><br>
<a href="#MYISAMCHK REPAIR OPTIONS">MYISAMCHK REPAIR OPTIONS</a><br>
<a href="#OTHER MYISAMCHK OPTIONS">OTHER MYISAMCHK OPTIONS</a><br>
<a href="#MYISAMCHK TABLE INFORMATION">MYISAMCHK TABLE INFORMATION</a><br>
<a href="#MYISAMCHK MEMORY USAGE">MYISAMCHK MEMORY USAGE</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">myisamchk
&minus; MyISAM table&minus;maintenance utility</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="49%">


<p style="margin-top: 1em"><b>myisamchk
[</b><i>options</i><b>]</b> <i>tbl_name</i> <b>...</b></p></td>
<td width="40%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>myisamchk</b> utility gets information about your
database tables or checks, repairs, or optimizes them.
<b>myisamchk</b> works with MyISAM tables (tables that have
.MYD and .MYI files for storing data and indexes).</p>

<p style="margin-left:11%; margin-top: 1em">The use of
<b>myisamchk</b> with partitioned tables is not
supported.</p>


<p style="margin-left:17%; margin-top: 1em"><b><big>Caution</big></b>
<br>
It is best to make a backup of a table before performing a
table repair operation; under some circumstances the
operation might cause data loss. Possible causes include but
are not limited to file system errors.</p>

<p style="margin-left:11%; margin-top: 1em">Invoke
<b>myisamchk</b> like this:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk [</b><i>options</i><b>]</b> <i>tbl_name</i>
<b>...</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<i>options</i> specify what you want <b>myisamchk</b> to do.
They are described in the following sections. You can also
get a list of options by invoking <b>myisamchk
&minus;&minus;help</b>.</p>

<p style="margin-left:11%; margin-top: 1em">With no
options, <b>myisamchk</b> simply checks your table as the
default operation. To get more information or to tell
<b>myisamchk</b> to take corrective action, specify options
as described in the following discussion.</p>


<p style="margin-left:11%; margin-top: 1em"><i>tbl_name</i>
is the database table you want to check or repair. If you
run <b>myisamchk</b> somewhere other than in the database
directory, you must specify the path to the database
directory, because <b>myisamchk</b> has no idea where the
database is located. In fact, <b>myisamchk</b> does not
actually care whether the files you are working on are
located in a database directory. You can copy the files that
correspond to a database table into some other location and
perform recovery operations on them there.</p>

<p style="margin-left:11%; margin-top: 1em">You can name
several tables on the <b>myisamchk</b> command line if you
wish. You can also specify a table by naming its index file
(the file with the .MYI suffix). This allows you to specify
all tables in a directory by using the pattern *.MYI. For
example, if you are in a database directory, you can check
all the MyISAM tables in that directory like this:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk *.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">If you are not
in the database directory, you can check all the tables
there by specifying the path to the directory:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk</b>
<i>/path/to/database_dir/</i><b>*.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">You can even
check all tables in all databases by specifying a wildcard
with the path to the MySQL data directory:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk</b> <i>/path/to/datadir/*/*</i><b>.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">The recommended
way to quickly check all MyISAM tables is:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk &minus;&minus;silent &minus;&minus;fast</b>
<i>/path/to/datadir/*/*</i><b>.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">If you want to
check all MyISAM tables and repair any that are corrupted,
you can use the following command:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk &minus;&minus;silent &minus;&minus;force
&minus;&minus;fast &minus;&minus;update&minus;state \ <br>
&minus;&minus;key_buffer_size=64M
&minus;&minus;sort_buffer_size=64M \ <br>
&minus;&minus;read_buffer_size=1M
&minus;&minus;write_buffer_size=1M \</b> <i><br>
/path/to/datadir/*/*</i><b>.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">This command
assumes that you have more than 64MB free. For more
information about memory allocation with <b>myisamchk</b>,
see the section called &ldquo;MYISAMCHK MEMORY
USAGE&rdquo;.</p>


<p style="margin-left:17%; margin-top: 1em"><b><big>Important</big></b>
<i><br>
You must ensure that no other program is using the tables
while you are running</i> <b>myisamchk</b>. The most
effective means of doing so is to shut down the MySQL server
while running <b>myisamchk</b>, or to lock all tables that
<b>myisamchk</b> is being used on.</p>

<p style="margin-left:17%; margin-top: 1em">Otherwise, when
you run <b>myisamchk</b>, it may display the following error
message:</p>

<p style="margin-left:23%; margin-top: 1em">warning:
clients are using or haven&acute;t closed the table
properly</p>

<p style="margin-left:17%; margin-top: 1em">This means that
you are trying to check a table that has been updated by
another program (such as the <b>mysqld</b> server) that
hasn&acute;t yet closed the file or that has died without
closing the file properly, which can sometimes lead to the
corruption of one or more MyISAM tables.</p>

<p style="margin-left:17%; margin-top: 1em">If
<b>mysqld</b> is running, you must force it to flush any
table modifications that are still buffered in memory by
using FLUSH TABLES. You should then ensure that no one is
using the tables while you are running <b>myisamchk</b></p>

<p style="margin-left:17%; margin-top: 1em">However, the
easiest way to avoid this problem is to use CHECK TABLE
instead of <b>myisamchk</b> to check tables. See
Section&nbsp;12.4.2.3, &ldquo;CHECK TABLE Syntax&rdquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>myisamchk</b>
supports the following options, which can be specified on
the command line or in the [myisamchk] option file group.
<b>myisamchk</b> also supports the options for processing
option files described at Section&nbsp;4.2.3.3.1,
&ldquo;Command-Line Options that Affect Option-File
Handling&rdquo;.</p>

<h2>MYISAMCHK GENERAL OPTIONS
<a name="MYISAMCHK GENERAL OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
described in this section can be used for any type of table
maintenance operation performed by <b>myisamchk</b>. The
sections following this one describe options that pertain
only to specific operations, such as table checking or
repairing.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;help</b>, <b>&minus;?</b></p>

<p style="margin-left:17%; margin-top: 1em">Display a help
message and exit. Options are grouped by type of
operation.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;HELP</b>, <b>&minus;H</b></p>

<p style="margin-left:17%; margin-top: 1em">Display a help
message and exit. Options are presented in a single
list.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;debug=</b><i>debug_options</i>,
<b>&minus;#</b> <i>debug_options</i></p>

<p style="margin-left:17%; margin-top: 1em">Write a
debugging log. A typical <i>debug_options</i> string is
&acute;d:t:o,<i>file_name</i>&acute;. The default is
&acute;d:t:o,/tmp/myisamchk.trace&acute;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;silent</b>, <b>&minus;s</b></p>

<p style="margin-left:17%; margin-top: 1em">Silent mode.
Write output only when errors occur. You can use
<b>&minus;s</b> twice (<b>&minus;ss</b>) to make
<b>myisamchk</b> very silent.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;verbose</b>, <b>&minus;v</b></p>

<p style="margin-left:17%; margin-top: 1em">Verbose mode.
Print more information about what the program does. This can
be used with <b>&minus;d</b> and <b>&minus;e</b>. Use
<b>&minus;v</b> multiple times (<b>&minus;vv</b>,
<b>&minus;vvv</b>) for even more output.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;version</b>, <b>&minus;V</b></p>

<p style="margin-left:17%; margin-top: 1em">Display version
information and exit.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;wait</b>, <b>&minus;w</b></p>

<p style="margin-left:17%; margin-top: 1em">Instead of
terminating with an error if the table is locked, wait until
the table is unlocked before continuing. If you are running
<b>mysqld</b> with external locking disabled, the table can
be locked only by another <b>myisamchk</b> command.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
set the following variables by using
<b>&minus;&minus;</b><i>var_name</i><b>=</b><i>value</i>
syntax:</p> </table>


<p align="center" style="margin-top: 1em"><img src="grohtml-253711.png" alt="Image grohtml-253711.png"></p>

<p style="margin-left:11%;">The possible <b>myisamchk</b>
variables and their default values can be examined with
<b>myisamchk &minus;&minus;help</b>:</p>


<p style="margin-left:11%; margin-top: 1em">sort_buffer_size
is used when the keys are repaired by sorting keys, which is
the normal case when you use
<b>&minus;&minus;recover</b>.</p>


<p style="margin-left:11%; margin-top: 1em">key_buffer_size
is used when you are checking the table with
<b>&minus;&minus;extend&minus;check</b> or when the keys are
repaired by inserting keys row by row into the table (like
when doing normal inserts). Repairing through the key buffer
is used in the following cases:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; You use
<b>&minus;&minus;safe&minus;recover</b>.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; The
temporary files needed to sort the keys would be more than
twice as big as when creating the key file directly. This is
often the case when you have large key values for CHAR,
VARCHAR, or TEXT columns, because the sort operation needs
to store the complete key values as it proceeds. If you have
lots of temporary space and you can force <b>myisamchk</b>
to repair by sorting, you can use the
<b>&minus;&minus;sort&minus;recover</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">Repairing
through the key buffer takes much less disk space than using
sorting, but is also much slower.</p>

<p style="margin-left:11%; margin-top: 1em">If you want a
faster repair, set the key_buffer_size and sort_buffer_size
variables to about 25% of your available memory. You can set
both variables to large values, because only one of them is
used at a time.</p>


<p style="margin-left:11%; margin-top: 1em">myisam_block_size
is the size used for index blocks.</p>

<p style="margin-left:11%; margin-top: 1em">stats_method
influences how NULL values are treated for index statistics
collection when the <b>&minus;&minus;analyze</b> option is
given. It acts like the myisam_stats_method system variable.
For more information, see the description of
myisam_stats_method in Section&nbsp;5.1.4, &ldquo;Server
System Variables&rdquo;, and Section&nbsp;7.4.7,
&ldquo;MyISAM Index Statistics Collection&rdquo;.</p>


<p style="margin-left:11%; margin-top: 1em">ft_min_word_len
and ft_max_word_len indicate the minimum and maximum word
length for FULLTEXT indexes. ft_stopword_file names the
stopword file. These need to be set under the following
circumstances.</p>

<p style="margin-left:11%; margin-top: 1em">If you use
<b>myisamchk</b> to perform an operation that modifies table
indexes (such as repair or analyze), the FULLTEXT indexes
are rebuilt using the default full&minus;text parameter
values for minimum and maximum word length and the stopword
file unless you specify otherwise. This can result in
queries failing.</p>

<p style="margin-left:11%; margin-top: 1em">The problem
occurs because these parameters are known only by the
server. They are not stored in MyISAM index files. To avoid
the problem if you have modified the minimum or maximum word
length or the stopword file in the server, specify the same
ft_min_word_len, ft_max_word_len, and ft_stopword_file
values to <b>myisamchk</b> that you use for <b>mysqld</b>.
For example, if you have set the minimum word length to 3,
you can repair a table with <b>myisamchk</b> like this:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk &minus;&minus;recover
&minus;&minus;ft_min_word_len=3</b>
<i>tbl_name</i><b>.MYI</b></p>

<p style="margin-left:11%; margin-top: 1em">To ensure that
<b>myisamchk</b> and the server use the same values for
full&minus;text parameters, you can place each one in both
the [mysqld] and [myisamchk] sections of an option file:</p>

<p style="margin-left:17%; margin-top: 1em">[mysqld] <br>
ft_min_word_len=3 <br>
[myisamchk] <br>
ft_min_word_len=3</p>

<p style="margin-left:11%; margin-top: 1em">An alternative
to using <b>myisamchk</b> is to use the REPAIR TABLE,
ANALYZE TABLE, OPTIMIZE TABLE, or ALTER TABLE. These
statements are performed by the server, which knows the
proper full&minus;text parameter values to use.</p>

<h2>MYISAMCHK CHECK OPTIONS
<a name="MYISAMCHK CHECK OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>myisamchk</b>
supports the following options for table checking
operations:</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;check</b>, <b>&minus;c</b></p>

<p style="margin-left:17%; margin-top: 1em">Check the table
for errors. This is the default operation if you specify no
option that selects an operation type explicitly.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;check&minus;only&minus;changed</b>,
<b>&minus;C</b></p>

<p style="margin-left:17%; margin-top: 1em">Check only
tables that have changed since the last check.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;extend&minus;check</b>, <b>&minus;e</b></p>

<p style="margin-left:17%; margin-top: 1em">Check the table
very thoroughly. This is quite slow if the table has many
indexes. This option should only be used in extreme cases.
Normally, <b>myisamchk</b> or <b>myisamchk
&minus;&minus;medium&minus;check</b> should be able to
determine whether there are any errors in the table.</p>

<p style="margin-left:17%; margin-top: 1em">If you are
using <b>&minus;&minus;extend&minus;check</b> and have
plenty of memory, setting the key_buffer_size variable to a
large value helps the repair operation run faster.</p>

<p style="margin-left:17%; margin-top: 1em">For a
description of the output format, see the section called
&ldquo;MYISAMCHK TABLE INFORMATION&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;fast</b>, <b>&minus;F</b></p>

<p style="margin-left:17%; margin-top: 1em">Check only
tables that haven&acute;t been closed properly.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;force</b>, <b>&minus;f</b></p>

<p style="margin-left:17%; margin-top: 1em">Do a repair
operation automatically if <b>myisamchk</b> finds any errors
in the table. The repair type is the same as that specified
with the <b>&minus;&minus;recover</b> or <b>&minus;r</b>
option.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;information</b>, <b>&minus;i</b></p>

<p style="margin-left:17%; margin-top: 1em">Print
informational statistics about the table that is
checked.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;medium&minus;check</b>, <b>&minus;m</b></p>

<p style="margin-left:17%; margin-top: 1em">Do a check that
is faster than an <b>&minus;&minus;extend&minus;check</b>
operation. This finds only 99.99% of all errors, which
should be good enough in most cases.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;read&minus;only</b>, <b>&minus;T</b></p>

<p style="margin-left:17%; margin-top: 1em">Do not mark the
table as checked. This is useful if you use <b>myisamchk</b>
to check a table that is in use by some other application
that does not use locking, such as <b>mysqld</b> when run
with external locking disabled.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;update&minus;state</b>, <b>&minus;U</b></p>

<p style="margin-left:17%; margin-top: 1em">Store
information in the .MYI file to indicate when the table was
checked and whether the table crashed. This should be used
to get full benefit of the
<b>&minus;&minus;check&minus;only&minus;changed</b> option,
but you shouldn&acute;t use this option if the <b>mysqld</b>
server is using the table and you are running it with
external locking disabled.</p>

<h2>MYISAMCHK REPAIR OPTIONS
<a name="MYISAMCHK REPAIR OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>myisamchk</b>
supports the following options for table repair operations
(operations performed when an option such as
<b>&minus;&minus;recover</b> or
<b>&minus;&minus;safe&minus;recover</b> is given):</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;backup</b>, <b>&minus;B</b></p>

<p style="margin-left:17%; margin-top: 1em">Make a backup
of the .MYD file as
<i>file_name</i>&minus;<i>time</i>.BAK</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;character&minus;sets&minus;dir=</b><i>path</i></p>

<p style="margin-left:17%; margin-top: 1em">The directory
where character sets are installed. See Section&nbsp;9.5,
&ldquo;Character Set Configuration&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;correct&minus;checksum</b></p>

<p style="margin-left:17%; margin-top: 1em">Correct the
checksum information for the table.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;data&minus;file&minus;length=</b><i>len</i>,
<b>&minus;D</b> <i>len</i></p>

<p style="margin-left:17%; margin-top: 1em">The maximum
length of the data file (when re&minus;creating data file
when it is &ldquo;full&rdquo;).</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;extend&minus;check</b>, <b>&minus;e</b></p>

<p style="margin-left:17%; margin-top: 1em">Do a repair
that tries to recover every possible row from the data file.
Normally, this also finds a lot of garbage rows. Do not use
this option unless you are desperate.</p>

<p style="margin-left:17%; margin-top: 1em">For a
description of the output format, see the section called
&ldquo;MYISAMCHK TABLE INFORMATION&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;force</b>, <b>&minus;f</b></p>

<p style="margin-left:17%; margin-top: 1em">Overwrite old
intermediate files (files with names like
<i>tbl_name</i>.TMD) instead of aborting.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;keys&minus;used=</b><i>val</i>,
<b>&minus;k</b> <i>val</i></p>

<p style="margin-left:17%; margin-top: 1em">For
<b>myisamchk</b>, the option value is a bit&minus;value that
indicates which indexes to update. Each binary bit of the
option value corresponds to a table index, where the first
index is bit 0. An option value of 0 disables updates to all
indexes, which can be used to get faster inserts.
Deactivated indexes can be reactivated by using <b>myisamchk
&minus;r</b>.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;no&minus;symlinks</b>, <b>&minus;l</b></p>

<p style="margin-left:17%; margin-top: 1em">Do not follow
symbolic links. Normally <b>myisamchk</b> repairs the table
that a symlink points to. This option does not exist as of
MySQL 4.0 because versions from 4.0 on do not remove
symlinks during repair operations.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;max&minus;record&minus;length=</b><i>len</i></p>

<p style="margin-left:17%; margin-top: 1em">Skip rows
larger than the given length if <b>myisamchk</b> cannot
allocate memory to hold them.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;parallel&minus;recover</b>,
<b>&minus;p</b></p>

<p style="margin-left:17%; margin-top: 1em">Use the same
technique as <b>&minus;r</b> and <b>&minus;n</b>, but create
all the keys in parallel, using different threads. <i>This
is beta&minus;quality code. Use at your own risk!</i></p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;quick</b>, <b>&minus;q</b></p>

<p style="margin-left:17%; margin-top: 1em">Achieve a
faster repair by modifying only the index file, not the data
file. You can specify this option twice to force
<b>myisamchk</b> to modify the original data file in case of
duplicate keys.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;recover</b>, <b>&minus;r</b></p>

<p style="margin-left:17%; margin-top: 1em">Do a repair
that can fix almost any problem except unique keys that are
not unique (which is an extremely unlikely error with MyISAM
tables). If you want to recover a table, this is the option
to try first. You should try
<b>&minus;&minus;safe&minus;recover</b> only if
<b>myisamchk</b> reports that the table cannot be recovered
using <b>&minus;&minus;recover</b>. (In the unlikely case
that <b>&minus;&minus;recover</b> fails, the data file
remains intact.)</p>

<p style="margin-left:17%; margin-top: 1em">If you have
lots of memory, you should increase the value of
sort_buffer_size.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;safe&minus;recover</b>, <b>&minus;o</b></p>

<p style="margin-left:17%; margin-top: 1em">Do a repair
using an old recovery method that reads through all rows in
order and updates all index trees based on the rows found.
This is an order of magnitude slower than
<b>&minus;&minus;recover</b>, but can handle a couple of
very unlikely cases that <b>&minus;&minus;recover</b>
cannot. This recovery method also uses much less disk space
than <b>&minus;&minus;recover</b>. Normally, you should
repair first using <b>&minus;&minus;recover</b>, and then
with <b>&minus;&minus;safe&minus;recover</b> only if
<b>&minus;&minus;recover</b> fails.</p>

<p style="margin-left:17%; margin-top: 1em">If you have
lots of memory, you should increase the value of
key_buffer_size.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;set&minus;character&minus;set=</b><i>name</i></p>

<p style="margin-left:17%; margin-top: 1em">Change the
character set used by the table indexes. This option was
replaced by <b>&minus;&minus;set&minus;collation</b> in
MySQL 5.0.3.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;set&minus;collation=</b><i>name</i></p>

<p style="margin-left:17%; margin-top: 1em">Specify the
collation to use for sorting table indexes. The character
set name is implied by the first part of the collation
name.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;sort&minus;recover</b>, <b>&minus;n</b></p>

<p style="margin-left:17%; margin-top: 1em">Force
<b>myisamchk</b> to use sorting to resolve the keys even if
the temporary files would be very large.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;tmpdir=</b><i>path</i>, <b>&minus;t</b>
<i>path</i></p>

<p style="margin-left:17%; margin-top: 1em">The path of the
directory to be used for storing temporary files. If this is
not set, <b>myisamchk</b> uses the value of the TMPDIR
environment variable. tmpdir can be set to a list of
directory paths that are used successively in
round&minus;robin fashion for creating temporary files. The
separator character between directory names is the colon
(&ldquo;:&rdquo;) on Unix and the semicolon
(&ldquo;;&rdquo;) on Windows, NetWare, and OS/2.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;unpack</b>, <b>&minus;u</b></p>

<p style="margin-left:17%; margin-top: 1em">Unpack a table
that was packed with <b>myisampack</b>.</p>

<h2>OTHER MYISAMCHK OPTIONS
<a name="OTHER MYISAMCHK OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>myisamchk</b>
supports the following options for actions other than table
checks and repairs:</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;analyze</b>, <b>&minus;a</b></p>

<p style="margin-left:17%; margin-top: 1em">Analyze the
distribution of key values. This improves join performance
by enabling the join optimizer to better choose the order in
which to join the tables and which indexes it should use. To
obtain information about the key distribution, use a
<b>myisamchk &minus;&minus;description
&minus;&minus;verbose</b> <i>tbl_name</i> command or the
SHOW INDEX FROM <i>tbl_name</i> statement.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;block&minus;search=</b><i>offset</i>,
<b>&minus;b</b> <i>offset</i></p>

<p style="margin-left:17%; margin-top: 1em">Find the record
that a block at the given offset belongs to.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;description</b>, <b>&minus;d</b></p>

<p style="margin-left:17%; margin-top: 1em">Print some
descriptive information about the table. Specifying the
<b>&minus;&minus;verbose</b> option once or twice produces
additional information. See the section called
&ldquo;MYISAMCHK TABLE INFORMATION&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;set&minus;auto&minus;increment[=</b><i>value</i><b>]</b>,
<b>&minus;A[</b><i>value</i><b>]</b></p>

<p style="margin-left:17%; margin-top: 1em">Force
AUTO_INCREMENT numbering for new records to start at the
given value (or higher, if there are existing records with
AUTO_INCREMENT values this large). If <i>value</i> is not
specified, AUTO_INCREMENT numbers for new records begin with
the largest value currently in the table, plus one.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;sort&minus;index</b>, <b>&minus;S</b></p>

<p style="margin-left:17%; margin-top: 1em">Sort the index
tree blocks in high&minus;low order. This optimizes seeks
and makes table scans that use indexes faster.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;sort&minus;records=</b><i>N</i>,
<b>&minus;R</b> <i>N</i></p>

<p style="margin-left:17%; margin-top: 1em">Sort records
according to a particular index. This makes your data much
more localized and may speed up range&minus;based SELECT and
ORDER BY operations that use this index. (The first time you
use this option to sort a table, it may be very slow.) To
determine a table&acute;s index numbers, use SHOW INDEX,
which displays a table&acute;s indexes in the same order
that <b>myisamchk</b> sees them. Indexes are numbered
beginning with 1.</p>

<p style="margin-left:17%; margin-top: 1em">If keys are not
packed (PACK_KEYS=0), they have the same length, so when
<b>myisamchk</b> sorts and moves records, it just overwrites
record offsets in the index. If keys are packed
(PACK_KEYS=1), <b>myisamchk</b> must unpack key blocks
first, then re&minus;create indexes and pack the key blocks
again. (In this case, re&minus;creating indexes is faster
than updating offsets for each index.)</p>

<h2>MYISAMCHK TABLE INFORMATION
<a name="MYISAMCHK TABLE INFORMATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To obtain a
description of a MyISAM table or statistics about it, use
the commands shown here. The output from these commands is
explained later in this section.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>myisamchk &minus;d</b> <i>tbl_name</i></p>

<p style="margin-left:17%; margin-top: 1em">Runs
<b>myisamchk</b> in &ldquo;describe mode&rdquo; to produce a
description of your table. If you start the MySQL server
with external locking disabled, <b>myisamchk</b> may report
an error for a table that is updated while it runs. However,
because <b>myisamchk</b> does not change the table in
describe mode, there is no risk of destroying data.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>myisamchk &minus;dv</b> <i>tbl_name</i></p>

<p style="margin-left:17%; margin-top: 1em">Adding
<b>&minus;v</b> runs <b>myisamchk</b> in verbose mode so
that it produces more information about the table. Adding
<b>&minus;v</b> a second time produces even more
information.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>myisamchk &minus;eis</b> <i>tbl_name</i></p>

<p style="margin-left:17%; margin-top: 1em">Shows only the
most important information from a table. This operation is
slow because it must read the entire table.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>myisamchk &minus;eiv</b> <i>tbl_name</i></p>

<p style="margin-left:17%; margin-top: 1em">This is like
<b>&minus;eis</b>, but tells you what is being done.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>tbl_name</i> argument can be either the name of a MyISAM
table or the name of its index file, as described in
<b>myisamchk</b>(1). Multiple <i>tbl_name</i> arguments can
be given.</p>

<p style="margin-left:11%; margin-top: 1em">Suppose that a
table named person has the following structure. (The
MAX_ROWS table option is included so that in the example
output from <b>myisamchk</b> shown later, some values are
smaller and fit the output format more easily.)</p>

<p style="margin-left:17%; margin-top: 1em">CREATE TABLE
person <br>
( <br>
id INT NOT NULL AUTO_INCREMENT, <br>
last_name VARCHAR(20) NOT NULL, <br>
first_name VARCHAR(20) NOT NULL, <br>
birth DATE, <br>
death DATE, <br>
PRIMARY KEY (id), <br>
INDEX (last_name, first_name), <br>
INDEX (birth) <br>
) MAX_ROWS = 1000000;</p>

<p style="margin-left:11%; margin-top: 1em">Suppose also
that the table has these data and index file sizes:</p>


<p style="margin-left:17%; margin-top: 1em">&minus;rw&minus;rw&minus;&minus;&minus;&minus;
1 mysql mysql 9347072 Aug 19 11:47 person.MYD <br>
&minus;rw&minus;rw&minus;&minus;&minus;&minus; 1 mysql mysql
6066176 Aug 19 11:47 person.MYI</p>

<p style="margin-left:11%; margin-top: 1em">Example of
<b>myisamchk &minus;dvv</b> output:</p>

<p style="margin-left:17%; margin-top: 1em">MyISAM file:
person <br>
Record format: Packed <br>
Character set: latin1_swedish_ci (8) <br>
File&minus;version: 1 <br>
Creation time: 2009&minus;08&minus;19 16:47:41 <br>
Recover time: 2009&minus;08&minus;19 16:47:56 <br>
Status: checked,analyzed,optimized keys <br>
Auto increment key: 1 Last value: 306688 <br>
Data records: 306688 Deleted blocks: 0 <br>
Datafile parts: 306688 Deleted data: 0 <br>
Datafile pointer (bytes): 4 Keyfile pointer (bytes): 3 <br>
Datafile length: 9347072 Keyfile length: 6066176 <br>
Max datafile length: 4294967294 Max keyfile length:
17179868159 <br>
Recordlength: 54 <br>
table description: <br>
Key Start Len Index Type Rec/key Root Blocksize <br>
1 2 4 unique long 1 99328 1024 <br>
2 6 20 multip. varchar prefix 512 3563520 1024 <br>
27 20 varchar 512 <br>
3 48 3 multip. uint24 NULL 306688 6065152 1024 <br>
Field Start Length Nullpos Nullbit Type <br>
1 1 1 <br>
2 2 4 no zeros <br>
3 6 21 varchar <br>
4 27 21 varchar <br>
5 48 3 1 1 no zeros <br>
6 51 3 1 2 no zeros</p>

<p style="margin-left:11%; margin-top: 1em">Explanations
for the types of information <b>myisamchk</b> produces are
given here. &ldquo;Keyfile&rdquo; refers to the index file.
&ldquo;Record&rdquo; and &ldquo;row&rdquo; are synonymous,
as are &ldquo;field&rdquo; and &ldquo;column.&rdquo;</p>

<p style="margin-left:11%; margin-top: 1em">The initial
part of the table description contains these values:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; MyISAM
file</p>

<p style="margin-left:17%; margin-top: 1em">Name of the
MyISAM (index) file.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Record
format</p>

<p style="margin-left:17%; margin-top: 1em">The format used
to store table rows. The preceding examples use Fixed
length. Other possible values are Compressed and Packed.
(Packed corresponds to what SHOW TABLE STATUS reports as
Dynamic.)</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Chararacter set</p>

<p style="margin-left:17%; margin-top: 1em">The table
default character set.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
File&minus;version</p>

<p style="margin-left:17%; margin-top: 1em">Version of
MyISAM format. Currently always 1.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Creation
time</p>

<p style="margin-left:17%; margin-top: 1em">When the data
file was created.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Recover
time</p>

<p style="margin-left:17%; margin-top: 1em">When the
index/data file was last reconstructed.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Status</p>

<p style="margin-left:17%; margin-top: 1em">Table status
flags. Possible values are crashed, open, changed, analyzed,
optimized keys, and sorted index pages.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Auto
increment key, Last value</p>

<p style="margin-left:17%; margin-top: 1em">The key number
associated the table&acute;s AUTO_INCREMENT column, and the
most recently generated value for this column. These fields
do not appear if there is no such column.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Data
records</p>

<p style="margin-left:17%; margin-top: 1em">The number of
rows in the table.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Deleted
blocks</p>

<p style="margin-left:17%; margin-top: 1em">How many
deleted blocks still have reserved space. You can optimize
your table to minimize this space. See Section&nbsp;6.6.4,
&ldquo;MyISAM Table Optimization&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Datafile
parts</p>

<p style="margin-left:17%; margin-top: 1em">For
dynamic&minus;row format, this indicates how many data
blocks there are. For an optimized table without fragmented
rows, this is the same as Data records.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Deleted
data</p>

<p style="margin-left:17%; margin-top: 1em">How many bytes
of unreclaimed deleted data there are. You can optimize your
table to minimize this space. See Section&nbsp;6.6.4,
&ldquo;MyISAM Table Optimization&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Datafile
pointer</p>

<p style="margin-left:17%; margin-top: 1em">The size of the
data file pointer, in bytes. It is usually 2, 3, 4, or 5
bytes. Most tables manage with 2 bytes, but this cannot be
controlled from MySQL yet. For fixed tables, this is a row
address. For dynamic tables, this is a byte address.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Keyfile
pointer</p>

<p style="margin-left:17%; margin-top: 1em">The size of the
index file pointer, in bytes. It is usually 1, 2, or 3
bytes. Most tables manage with 2 bytes, but this is
calculated automatically by MySQL. It is always a block
address.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Max
datafile length</p>

<p style="margin-left:17%; margin-top: 1em">How long the
table data file can become, in bytes.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Max
keyfile length</p>

<p style="margin-left:17%; margin-top: 1em">How long the
table index file can become, in bytes.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Recordlength</p>

<p style="margin-left:17%; margin-top: 1em">How much space
each row takes, in bytes.</p>

<p style="margin-left:11%; margin-top: 1em">The table
description part of the output includes a list of all keys
in the table. For each key, <b>myisamchk</b> displays some
low&minus;level information:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Key</p>

<p style="margin-left:17%; margin-top: 1em">This
key&acute;s number. This value is shown only for the first
column of the key. If this value is missing, the line
corresponds to the second or later column of a
multiple&minus;column key. For the table shown in the
example, there are two table description lines for the
second index. This indicates that it is a
multiple&minus;part index with two parts.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Start</p>

<p style="margin-left:17%; margin-top: 1em">Where in the
row this portion of the index starts.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Len</p>

<p style="margin-left:17%; margin-top: 1em">How long this
portion of the index is. For packed numbers, this should
always be the full length of the column. For strings, it may
be shorter than the full length of the indexed column,
because you can index a prefix of a string column. The total
length of a multiple&minus;part key is the sum of the Len
values for all key parts.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Index</p>

<p style="margin-left:17%; margin-top: 1em">Whether a key
value can exist multiple times in the index. Possible values
are unique or multip. (multiple).</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Type</p>

<p style="margin-left:17%; margin-top: 1em">What data type
this portion of the index has. This is a MyISAM data type
with the possible values packed, stripped, or empty.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Root</p>

<p style="margin-left:17%; margin-top: 1em">Address of the
root index block.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Blocksize</p>

<p style="margin-left:17%; margin-top: 1em">The size of
each index block. By default this is 1024, but the value may
be changed at compile time when MySQL is built from
source.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Rec/key</p>

<p style="margin-left:17%; margin-top: 1em">This is a
statistical value used by the optimizer. It tells how many
rows there are per value for this index. A unique index
always has a value of 1. This may be updated after a table
is loaded (or greatly changed) with <b>myisamchk
&minus;a</b>. If this is not updated at all, a default value
of 30 is given.</p>

<p style="margin-left:11%; margin-top: 1em">The last part
of the output provides information about each column:</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Field</p>

<p style="margin-left:17%; margin-top: 1em">The column
number.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Start</p>

<p style="margin-left:17%; margin-top: 1em">The byte
position of the column within table rows.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Length</p>

<p style="margin-left:17%; margin-top: 1em">The length of
the column in bytes.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Nullpos,
Nullbit</p>

<p style="margin-left:17%; margin-top: 1em">For columns
that can be NULL, MyISAM stores NULL values as a flag in a
byte. Depending on how many nullable columns there are,
there can be one or more bytes used for this purpose. The
Nullpos and Nullbit values, if nonempty, indicate which byte
and bit contains that flag indicating whether the column is
NULL.</p>

<p style="margin-left:17%; margin-top: 1em">The position
and number of bytes used to store NULL flags is shown in the
line for field 1. This is why there are six Field lines for
the person table even though it has only five columns.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Type</p>

<p style="margin-left:17%; margin-top: 1em">The data type.
The value may contain any of the following descriptors:</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
constant</p>

<p style="margin-left:23%; margin-top: 1em">All rows have
the same value.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; no
endspace</p>

<p style="margin-left:23%; margin-top: 1em">Do not store
endspace.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; no
endspace, not_always</p>

<p style="margin-left:23%; margin-top: 1em">Do not store
endspace and do not do endspace compression for all
values.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; no
endspace, no empty</p>

<p style="margin-left:23%; margin-top: 1em">Do not store
endspace. Do not store empty values.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
table&minus;lookup</p>

<p style="margin-left:23%; margin-top: 1em">The column was
converted to an ENUM.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
zerofill(<i>N</i>)</p>

<p style="margin-left:23%; margin-top: 1em">The most
significant <i>N</i> bytes in the value are always 0 and are
not stored.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; no
zeros</p>

<p style="margin-left:23%; margin-top: 1em">Do not store
zeros.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; always
zero</p>

<p style="margin-left:23%; margin-top: 1em">Zero values are
stored using one bit.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Huff
tree</p>

<p style="margin-left:17%; margin-top: 1em">The number of
the Huffman tree associated with the column.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Bits</p>

<p style="margin-left:17%; margin-top: 1em">The number of
bits used in the Huffman tree.</p>

<p style="margin-left:11%; margin-top: 1em">The Huff tree
and Bits fields are displayed if the table has been
compressed with <b>myisampack</b>. See <b>myisampack</b>(1),
for an example of this information.</p>

<p style="margin-left:11%; margin-top: 1em">Example of
<b>myisamchk &minus;eiv</b> output:</p>

<p style="margin-left:17%; margin-top: 1em">Checking MyISAM
file: person <br>
Data records: 306688 Deleted blocks: 0 <br>
&minus; check file&minus;size <br>
&minus; check record delete&minus;chain <br>
No recordlinks <br>
&minus; check key delete&minus;chain <br>
block_size 1024: <br>
&minus; check index reference <br>
&minus; check data record references index: 1 <br>
Key: 1: Keyblocks used: 98% Packed: 0% Max levels: 3 <br>
&minus; check data record references index: 2 <br>
Key: 2: Keyblocks used: 99% Packed: 97% Max levels: 3 <br>
&minus; check data record references index: 3 <br>
Key: 3: Keyblocks used: 98% Packed: &minus;14% Max levels: 3
<br>
Total: Keyblocks used: 98% Packed: 89% <br>
&minus; check records and index references <i><br>
*** LOTS OF ROW NUMBERS DELETED ***</i> <br>
Records: 306688 M.recordlength: 25 Packed: 83% <br>
Recordspace used: 97% Empty space: 2% Blocks/Record: 1.00
<br>
Record blocks: 306688 Delete blocks: 0 <br>
Record data: 7934464 Deleted data: 0 <br>
Lost space: 256512 Linkdata: 1156096 <br>
User time 43.08, System time 1.68 <br>
Maximum resident set size 0, Integral resident set size 0
<br>
Non&minus;physical pagefaults 0, Physical pagefaults 0,
Swaps 0 <br>
Blocks in 0 out 7, Messages in 0 out 0, Signals 0 <br>
Voluntary context switches 0, Involuntary context switches 0
<br>
Maximum memory usage: 1046926 bytes (1023k)</p>

<p style="margin-left:11%; margin-top: 1em"><b>myisamchk
&minus;eiv</b> output includes the following
information:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Data
records</p>

<p style="margin-left:17%; margin-top: 1em">The number of
rows in the table.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Deleted
blocks</p>

<p style="margin-left:17%; margin-top: 1em">How many
deleted blocks still have reserved space. You can optimize
your table to minimize this space. See Section&nbsp;6.6.4,
&ldquo;MyISAM Table Optimization&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Key</p>

<p style="margin-left:17%; margin-top: 1em">The key
number.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Keyblocks used</p>

<p style="margin-left:17%; margin-top: 1em">What percentage
of the keyblocks are used. When a table has just been
reorganized with <b>myisamchk</b>, the values are very high
(very near theoretical maximum).</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Packed</p>

<p style="margin-left:17%; margin-top: 1em">MySQL tries to
pack key values that have a common suffix. This can only be
used for indexes on CHAR and VARCHAR columns. For long
indexed strings that have similar leftmost parts, this can
significantly reduce the space used. In the preceding
example, the second key is 40 bytes long and a 97% reduction
in space is achieved.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Max
levels</p>

<p style="margin-left:17%; margin-top: 1em">How deep the
B&minus;tree for this key is. Large tables with long key
values get high values.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Records</p>

<p style="margin-left:17%; margin-top: 1em">How many rows
are in the table.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
M.recordlength</p>

<p style="margin-left:17%; margin-top: 1em">The average row
length. This is the exact row length for tables with
fixed&minus;length rows, because all rows have the same
length.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Packed</p>

<p style="margin-left:17%; margin-top: 1em">MySQL strips
spaces from the end of strings. The Packed value indicates
the percentage of savings achieved by doing this.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Recordspace used</p>

<p style="margin-left:17%; margin-top: 1em">What percentage
of the data file is used.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Empty
space</p>

<p style="margin-left:17%; margin-top: 1em">What percentage
of the data file is unused.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Blocks/Record</p>

<p style="margin-left:17%; margin-top: 1em">Average number
of blocks per row (that is, how many links a fragmented row
is composed of). This is always 1.0 for fixed&minus;format
tables. This value should stay as close to 1.0 as possible.
If it gets too large, you can reorganize the table. See
Section&nbsp;6.6.4, &ldquo;MyISAM Table
Optimization&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Recordblocks</p>

<p style="margin-left:17%; margin-top: 1em">How many blocks
(links) are used. For fixed&minus;format tables, this is the
same as the number of rows.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Deleteblocks</p>

<p style="margin-left:17%; margin-top: 1em">How many blocks
(links) are deleted.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Recorddata</p>

<p style="margin-left:17%; margin-top: 1em">How many bytes
in the data file are used.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Deleted
data</p>

<p style="margin-left:17%; margin-top: 1em">How many bytes
in the data file are deleted (unused).</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Lost
space</p>

<p style="margin-left:17%; margin-top: 1em">If a row is
updated to a shorter length, some space is lost. This is the
sum of all such losses, in bytes.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Linkdata</p>

<p style="margin-left:17%; margin-top: 1em">When the
dynamic table format is used, row fragments are linked with
pointers (4 to 7 bytes each). Linkdata is the sum of the
amount of storage used by all such pointers.</p>

<h2>MYISAMCHK MEMORY USAGE
<a name="MYISAMCHK MEMORY USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Memory
allocation is important when you run <b>myisamchk</b>.
<b>myisamchk</b> uses no more memory than its
memory&minus;related variables are set to. If you are going
to use <b>myisamchk</b> on very large tables, you should
first decide how much memory you want it to use. The default
is to use only about 3MB to perform repairs. By using larger
values, you can get <b>myisamchk</b> to operate faster. For
example, if you have more than 32MB RAM, you could use
options such as these (in addition to any other options you
might specify):</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>myisamchk &minus;&minus;sort_buffer_size=16M \ <br>
&minus;&minus;key_buffer_size=16M \ <br>
&minus;&minus;read_buffer_size=1M \ <br>
&minus;&minus;write_buffer_size=1M ...</b></p>

<p style="margin-left:11%; margin-top: 1em">Using
<b>&minus;&minus;sort_buffer_size=16M</b> should probably be
enough for most cases.</p>

<p style="margin-left:11%; margin-top: 1em">Be aware that
<b>myisamchk</b> uses temporary files in TMPDIR. If TMPDIR
points to a memory file system, out of memory errors can
easily occur. If this happens, run <b>myisamchk</b> with the
<b>&minus;&minus;tmpdir=</b><i>path</i> option to specify a
directory located on a file system that has more space.</p>

<p style="margin-left:11%; margin-top: 1em">When performing
repair operations, <b>myisamchk</b> also needs a lot of disk
space:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Twice
the size of the data file (the original file and a copy).
This space is not needed if you do a repair with
<b>&minus;&minus;quick</b>; in this case, only the index
file is re&minus;created. <i>This space must be available on
the same file system as the original data file</i>, as the
copy is created in the same directory as the original.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Space
for the new index file that replaces the old one. The old
index file is truncated at the start of the repair
operation, so you usually ignore this space. This space must
be available on the same file system as the original data
file.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; When
using <b>&minus;&minus;recover</b> or
<b>&minus;&minus;sort&minus;recover</b> (but not when using
<b>&minus;&minus;safe&minus;recover</b>), you need space on
disk for sorting. This space is allocated in the temporary
directory (specified by TMPDIR or
<b>&minus;&minus;tmpdir=</b><i>path</i>). The following
formula yields the amount of space required:</p>


<p style="margin-left:23%; margin-top: 1em">(<i>largest_key</i>
+ <i>row_pointer_length</i>) &times; <i>number_of_rows</i>
&times; 2</p>

<p style="margin-left:17%; margin-top: 1em">You can check
the length of the keys and the <i>row_pointer_length</i>
with <b>myisamchk &minus;dv</b> <i>tbl_name</i> (see the
section called &ldquo;MYISAMCHK TABLE INFORMATION&rdquo;).
The <i>row_pointer_length</i> and <i>number_of_rows</i>
values are the Datafile pointer and Data records values in
the table description. To determine the <i>largest_key</i>
value, check the Key lines in the table description. The Len
column indicates the number of bytes for each key part. For
a multiple&minus;column index, the key size is the sum of
the Len values for all key parts.</p>

<p style="margin-left:11%; margin-top: 1em">If you have a
problem with disk space during repair, you can try
<b>&minus;&minus;safe&minus;recover</b> instead of
<b>&minus;&minus;recover</b>.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2007-2008 MySQL AB, 2008-2010 Sun Microsystems, Inc.</p>

<p style="margin-left:11%; margin-top: 1em">This
documentation is free software; you can redistribute it
and/or modify it only under the terms of the GNU General
Public License as published by the Free Software Foundation;
version 2 of the License.</p>

<p style="margin-left:11%; margin-top: 1em">This
documentation is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the GNU General Public License along with
the program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA or see http://www.gnu.org/licenses/.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For more
information, please refer to the MySQL Reference Manual,
which may already be installed locally and which is also
available online at http://dev.mysql.com/doc/.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sun
Microsystems, Inc. (http://www.mysql.com/).</p>
<hr>
</body>
</html>
