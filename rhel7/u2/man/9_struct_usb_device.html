<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:28:28 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>STRUCT USB_DEVICE</title>

</head>
<body>

<h1 align="center">STRUCT USB_DEVICE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#MEMBERS">MEMBERS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">struct_usb_device
&minus; kernel's representation of a USB device</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">struct
usb_device { <br>
int devnum; <br>
char devpath[16]; <br>
u32 route; <br>
enum usb_device_state state; <br>
enum usb_device_speed speed; <br>
struct usb_tt * tt; <br>
int ttport; <br>
unsigned int toggle[2]; <br>
struct usb_device * parent; <br>
struct usb_bus * bus; <br>
struct usb_host_endpoint ep0; <br>
struct device dev; <br>
struct usb_device_descriptor descriptor; <br>
struct usb_host_bos * bos; <br>
struct usb_host_config * config; <br>
struct usb_host_config * actconfig; <br>
struct usb_host_endpoint * ep_in[16]; <br>
struct usb_host_endpoint * ep_out[16]; <br>
char ** rawdescriptors; <br>
unsigned short bus_mA; <br>
u8 portnum; <br>
u8 level; <br>
unsigned can_submit:1; <br>
unsigned persist_enabled:1; <br>
unsigned have_langid:1; <br>
unsigned authorized:1; <br>
unsigned authenticated:1; <br>
unsigned wusb:1; <br>
unsigned lpm_capable:1; <br>
unsigned usb2_hw_lpm_capable:1; <br>
unsigned usb2_hw_lpm_besl_capable:1; <br>
unsigned usb2_hw_lpm_enabled:1; <br>
unsigned usb2_hw_lpm_allowed:1; <br>
unsigned usb3_lpm_enabled:1; <br>
int string_langid; <br>
char * product; <br>
char * manufacturer; <br>
char * serial; <br>
struct list_head filelist; <br>
int maxchild; <br>
u32 quirks; <br>
atomic_t urbnum; <br>
unsigned long active_duration; <br>
#ifdef CONFIG_PM <br>
unsigned long connect_time; <br>
unsigned do_remote_wakeup:1; <br>
unsigned reset_resume:1; <br>
unsigned port_is_suspended:1; <br>
#endif <br>
struct wusb_dev * wusb_dev; <br>
int slot_id; <br>
enum usb_device_removable removable; <br>
struct usb2_lpm_parameters l1_params; <br>
struct usb3_lpm_parameters u1_params; <br>
struct usb3_lpm_parameters u2_params; <br>
unsigned lpm_disable_count; <br>
};</p>

<h2>MEMBERS
<a name="MEMBERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">devnum</p>

<p style="margin-left:17%;">device number; address on a USB
bus</p>


<p style="margin-left:11%; margin-top: 1em">devpath[16]</p>

<p style="margin-left:17%;">device ID string for use in
messages (e.g., /port/...)</p>

<p style="margin-left:11%; margin-top: 1em">route</p>

<p style="margin-left:17%;">tree topology hex string for
use with xHCI</p>

<p style="margin-left:11%; margin-top: 1em">state</p>

<p style="margin-left:17%;">device state: configured, not
attached, etc.</p>

<p style="margin-left:11%; margin-top: 1em">speed</p>

<p style="margin-left:17%;">device speed: high/full/low (or
error)</p>

<p style="margin-left:11%; margin-top: 1em">tt</p>

<p style="margin-left:17%;">Transaction Translator info;
used with low/full speed dev, highspeed hub</p>

<p style="margin-left:11%; margin-top: 1em">ttport</p>

<p style="margin-left:17%;">device port on that tt hub</p>

<p style="margin-left:11%; margin-top: 1em">toggle[2]</p>

<p style="margin-left:17%;">one bit for each endpoint, with
([0] = IN, [1] = OUT) endpoints</p>

<p style="margin-left:11%; margin-top: 1em">parent</p>

<p style="margin-left:17%;">our hub, unless we're the
root</p>

<p style="margin-left:11%; margin-top: 1em">bus</p>

<p style="margin-left:17%;">bus we're part of</p>

<p style="margin-left:11%; margin-top: 1em">ep0</p>

<p style="margin-left:17%;">endpoint 0 data (default
control pipe)</p>

<p style="margin-left:11%; margin-top: 1em">dev</p>

<p style="margin-left:17%;">generic device interface</p>

<p style="margin-left:11%; margin-top: 1em">descriptor</p>

<p style="margin-left:17%;">USB device descriptor</p>

<p style="margin-left:11%; margin-top: 1em">bos</p>

<p style="margin-left:17%;">USB device BOS descriptor
set</p>

<p style="margin-left:11%; margin-top: 1em">config</p>

<p style="margin-left:17%;">all of the device's configs</p>

<p style="margin-left:11%; margin-top: 1em">actconfig</p>

<p style="margin-left:17%;">the active configuration</p>

<p style="margin-left:11%; margin-top: 1em">ep_in[16]</p>

<p style="margin-left:17%;">array of IN endpoints</p>

<p style="margin-left:11%; margin-top: 1em">ep_out[16]</p>

<p style="margin-left:17%;">array of OUT endpoints</p>


<p style="margin-left:11%; margin-top: 1em">rawdescriptors</p>

<p style="margin-left:17%;">raw descriptors for each
config</p>

<p style="margin-left:11%; margin-top: 1em">bus_mA</p>

<p style="margin-left:17%;">Current available from the
bus</p>

<p style="margin-left:11%; margin-top: 1em">portnum</p>

<p style="margin-left:17%;">parent port number (origin
1)</p>

<p style="margin-left:11%; margin-top: 1em">level</p>

<p style="margin-left:17%;">number of USB hub ancestors</p>

<p style="margin-left:11%; margin-top: 1em">can_submit</p>

<p style="margin-left:17%;">URBs may be submitted</p>


<p style="margin-left:11%; margin-top: 1em">persist_enabled</p>

<p style="margin-left:17%;">USB_PERSIST enabled for this
device</p>


<p style="margin-left:11%; margin-top: 1em">have_langid</p>

<p style="margin-left:17%;">whether string_langid is
valid</p>

<p style="margin-left:11%; margin-top: 1em">authorized</p>

<p style="margin-left:17%;">policy has said we can use it;
(user space) policy determines if we authorize this device
to be used or not. By default, wired USB devices are
authorized. WUSB devices are not, until we authorize them
from user space. FIXME &minus;&minus; complete doc</p>


<p style="margin-left:11%; margin-top: 1em">authenticated</p>

<p style="margin-left:17%;">Crypto authentication
passed</p>

<p style="margin-left:11%; margin-top: 1em">wusb</p>

<p style="margin-left:17%;">device is Wireless USB</p>


<p style="margin-left:11%; margin-top: 1em">lpm_capable</p>

<p style="margin-left:17%;">device supports LPM</p>


<p style="margin-left:11%; margin-top: 1em">usb2_hw_lpm_capable</p>

<p style="margin-left:17%;">device can perform USB2
hardware LPM</p>


<p style="margin-left:11%; margin-top: 1em">usb2_hw_lpm_besl_capable</p>

<p style="margin-left:17%;">device can perform USB2
hardware BESL LPM</p>


<p style="margin-left:11%; margin-top: 1em">usb2_hw_lpm_enabled</p>

<p style="margin-left:17%;">USB2 hardware LPM is
enabled</p>


<p style="margin-left:11%; margin-top: 1em">usb2_hw_lpm_allowed</p>

<p style="margin-left:17%;">Userspace allows USB 2.0 LPM to
be enabled</p>


<p style="margin-left:11%; margin-top: 1em">usb3_lpm_enabled</p>

<p style="margin-left:17%;">USB3 hardware LPM enabled</p>


<p style="margin-left:11%; margin-top: 1em">string_langid</p>

<p style="margin-left:17%;">language ID for strings</p>

<p style="margin-left:11%; margin-top: 1em">product</p>

<p style="margin-left:17%;">iProduct string, if present
(static)</p>


<p style="margin-left:11%; margin-top: 1em">manufacturer</p>

<p style="margin-left:17%;">iManufacturer string, if
present (static)</p>

<p style="margin-left:11%; margin-top: 1em">serial</p>

<p style="margin-left:17%;">iSerialNumber string, if
present (static)</p>

<p style="margin-left:11%; margin-top: 1em">filelist</p>

<p style="margin-left:17%;">usbfs files that are open to
this device</p>

<p style="margin-left:11%; margin-top: 1em">maxchild</p>

<p style="margin-left:17%;">number of ports if hub</p>

<p style="margin-left:11%; margin-top: 1em">quirks</p>

<p style="margin-left:17%;">quirks of the whole device</p>

<p style="margin-left:11%; margin-top: 1em">urbnum</p>

<p style="margin-left:17%;">number of URBs submitted for
the whole device</p>


<p style="margin-left:11%; margin-top: 1em">active_duration</p>

<p style="margin-left:17%;">total time device is not
suspended</p>


<p style="margin-left:11%; margin-top: 1em">connect_time</p>

<p style="margin-left:17%;">time device was first
connected</p>


<p style="margin-left:11%; margin-top: 1em">do_remote_wakeup</p>

<p style="margin-left:17%;">remote wakeup should be
enabled</p>


<p style="margin-left:11%; margin-top: 1em">reset_resume</p>

<p style="margin-left:17%;">needs reset instead of
resume</p>


<p style="margin-left:11%; margin-top: 1em">port_is_suspended</p>

<p style="margin-left:17%;">the upstream port is suspended
(L2 or U3)</p>

<p style="margin-left:11%; margin-top: 1em">wusb_dev</p>

<p style="margin-left:17%;">if this is a Wireless USB
device, link to the WUSB specific data for the device.</p>

<p style="margin-left:11%; margin-top: 1em">slot_id</p>

<p style="margin-left:17%;">Slot ID assigned by xHCI</p>

<p style="margin-left:11%; margin-top: 1em">removable</p>

<p style="margin-left:17%;">Device can be physically
removed from this port</p>

<p style="margin-left:11%; margin-top: 1em">l1_params</p>

<p style="margin-left:17%;">best effor service latency for
USB2 L1 LPM state, and L1 timeout.</p>

<p style="margin-left:11%; margin-top: 1em">u1_params</p>

<p style="margin-left:17%;">exit latencies for USB3 U1 LPM
state, and hub&minus;initiated timeout.</p>

<p style="margin-left:11%; margin-top: 1em">u2_params</p>

<p style="margin-left:17%;">exit latencies for USB3 U2 LPM
state, and hub&minus;initiated timeout.</p>


<p style="margin-left:11%; margin-top: 1em">lpm_disable_count</p>

<p style="margin-left:17%;">Ref count used by
<b>usb_disable_lpm</b> and <b>usb_enable_lpm</b> to keep
track of the number of functions that require USB 3.0 Link
Power Management to be disabled for this usb_device. This
count should only be manipulated by those functions, with
the bandwidth_mutex is held.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Usbcore drivers
should not set usbdev&minus;&gt;state directly. Instead use
<b>usb_set_device_state</b>.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<hr>
</body>
</html>
