<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:59:13 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>mip6d.conf</title>

</head>
<body>

<h1 align="center">mip6d.conf</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMON OPTIONS">COMMON OPTIONS</a><br>
<a href="#OPTIONS COMMON TO HOME AGENT AND MOBILE NODE">OPTIONS COMMON TO HOME AGENT AND MOBILE NODE</a><br>
<a href="#HOME AGENT SPECIFIC OPTIONS">HOME AGENT SPECIFIC OPTIONS</a><br>
<a href="#MOBILE NODE SPECIFIC OPTIONS">MOBILE NODE SPECIFIC OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">mip6d.conf
&minus; UMIP Mobile IPv6 and NEMO Configuration file</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/etc/mip6d.conf</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">UMIP Mobile
IPv6 and NEMO daemon&rsquo;s configuration file</p>

<p style="margin-left:11%; margin-top: 1em">Below is a list
of currently supported configuration options. All
configuration lines are terminated with a semicolon.
Sub-sections are enclosed in &rsquo;{&rsquo; and
&rsquo;}&rsquo;. Optional parameters are designated with
square brackets (you must omit them if you set the optional
parameter). Strings are quoted with double quotes.</p>

<p style="margin-left:11%; margin-top: 1em">Default value
is given when available. Support for dynamic reload of the
option through SIGHUP is also indicated.</p>

<h2>COMMON OPTIONS
<a name="COMMON OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The file
contains the following common definitions: <b><br>
include</b> &quot;&lt;pattern&gt;&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Includes
content from other files based on provided pattern. Usual
shell wildcards are supported (&rsquo;?&rsquo;,
&rsquo;*&rsquo;, &rsquo;[&rsquo;). See man (7) glob for
details. The number of included files is virtually unlimited
but only five levels of recursion are authorized to prevent
loops. Note that if given pattern does not match any file, a
simple warning is issued but parsing continues. Unlike most
configuration statements, no &rsquo;;&rsquo; is expected
after the pattern.</p>

<p style="margin-left:22%; margin-top: 1em">Example:
include &quot;/etc/mip6d.conf.d/*.conf&quot;</p>

<p style="margin-left:11%;"><b>NodeConfig</b> CN | HA |
MN<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
the daemon should run in Correspondent Node, Home Agent or
Mobile Node mode.</p>

<p style="margin-left:22%; margin-top: 1em">Default: CN</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported. Daemon must be restarted.</p>

<p style="margin-left:11%;"><b>DebugLevel</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates the
debug level of the daemon. If the value is greater than
zero, the daemon will not detach from tty (i.e. debug
messages will be printed on the controlling tty).</p>

<p style="margin-left:22%; margin-top: 1em">Default: 0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Cannot detach from tty afterwards.</p>

<p style="margin-left:11%;"><b>DebugLogFile</b>
&quot;/path/to/log/file&quot;<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates where
debug logs should be stored.</p>

<p style="margin-left:22%; margin-top: 1em">Default: empty
(output is redirected to stderr)</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported. Daemon must be restarted.</p>

<p style="margin-left:11%;"><b>DoRouteOptimizationCN</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if a
node should participate in route optimization with a Mobile
Node, i.e. if it should accept a binding proposed by a peer.
The value is used as the default binding policy value, if no
<b>CnBindingPolicySet</b> have been defined for the proposed
binding.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported but does not affect existing bindings.</p>

<p style="margin-left:11%;"><b>CnBindingPolicySet {</b></p>

<p style="margin-left:22%;"><b>peer_hoa</b> [ local_addr ]
<b>boolean</b>; <b><br>
... <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">The decision to
accept a binding from a MN and participate in route
optimization with it is governed on a global basis by
<b>DoRouteOptimizationCN</b> parameter, i.e. which is used
as the default binding policy value.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>CnBindingPolicySet</b> section can be used to define
specific binding policies for some given peers. In that
context, each line is dedicated to a MN. The address (HoA)
of the MN is given as first element of the line (i.e.
<b>peer_hoa</b> ). The local address <b>local_addr</b> at
which the Binding Update messages are expected to be
received can be optionally specified as second argument (If
we are acting as a MN, this will be one of our HoA). If it
is not provided, the local address to which the BU from that
MN are sent is not taken into account. The last argument
<b>boolean</b> specifies if the node should perform route
optimization with that peer.</p>

<p style="margin-left:22%; margin-top: 1em">Note that a MN
must have at most a single entry defined in that section
i.e. having more than one line starting with the same
address is not allowed.</p>

<p style="margin-left:22%; margin-top: 1em">Default: by
default, the set is empty and the default value provided by
<b>DoRouteOptimizationCN</b> configuration parameter applies
for all peers.</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported.</p>

<p style="margin-left:11%;"><b>NonVolatileBindingCache</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">This option is
currently ignored. Binding cache is always stored in
volatile memory, and is not retained between shutdown and
startup.</p>

<h2>OPTIONS COMMON TO HOME AGENT AND MOBILE NODE
<a name="OPTIONS COMMON TO HOME AGENT AND MOBILE NODE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These options
are used both in the Home Agent and Mobile Node: <b><br>
Interface</b> name<b>; <br>
Interface</b> name <b>{</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>MnIfPreference</b> number<b>;</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>IfType</b> CN | HA | MN<b>;</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>Tunnel</b> boolean<b>;</b></p></td></tr>
</table>

<p style="margin-left:22%;"><b>}</b></p>

<p style="margin-left:22%; margin-top: 1em">Specifies an
interface and options associated with it. If no options are
present, <b>Interface</b> can be terminated with semi-colon.
This is used for home agent to specify which interfaces are
used for HA operation. For the home agent to function
properly, a Router Advertisement daemon (e.g. radvd) must
broadcast advertisements with the Home Agent bit and Home
Agent Information Option set on these interfaces. This
option is also used by multihomed Mobile Nodes to define
which interfaces are used by it. For MN and CN, it is
posible to provide interfaces that are not already available
when the daemon is started. Those will be used when
available.</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only new inet6 interfaces will use the
new configuration.</p>


<p style="margin-left:22%; margin-top: 1em"><b>MnIfPreference</b>
sets the interface preference value for an interface in a
multi-homed Mobile Node. The most preferred interfaces have
preference 1, the second most preferred have 2, etc. Values
between 0 and 10 are allowed. A preference of zero means the
interface will not be used.</p>

<p style="margin-left:22%; margin-top: 1em">The interface
preference has a direct impact on the metric of default
routes configured by the daemon from RA information. Note
that if two interfaces with associated default routes have
the same preference value, the routes will end up having the
same metric, except if different default router preference
(RFC 4191) values are provided in RA. In a sense,
MnIfPreference value value is the primary selector for
interface and default route selection and default router
preference value provided in RA can then be used to break a
tie.</p>

<p style="margin-left:22%; margin-top: 1em">Default: 10</p>

<p style="margin-left:22%; margin-top: 1em"><b>IfType</b>
overrides the default node behavior for this interface. If a
MN doesn&rsquo;t wish to use this interface for mobility, or
a node doesn&rsquo;t act as HA on this interface, the
interface type should be set to CN.</p>

<p style="margin-left:22%; margin-top: 1em">Default: same
as <b>NodeConfig</b></p>


<p style="margin-left:22%; margin-top: 1em"><b>Tunnel</b></p>

<p style="margin-left:22%; margin-top: 1em">When enabled,
this flag explicitly marks the interface as a tunnel
interface and modify the behavior of UMIP regarding the
router discovery, address configuration and route addition
steps for the interface. Those are expected to be done
externally (manually or by another automatic process (for
instance when using a Teredo interface). Note that the
handling of routing via the interface is still partly
handled by UMIP but leaves some latitude to the user or the
automatic process that setup the interface. UMIP looks for
default routes in the main table that use the interface as
output device and replaces them by a default route with a
proper preference. If a gateway was present for the route
(there is one for 6to4, but none when miredo is used), it is
kept in the new route. Other routes that are defined for the
device (including other default routes in other tables) are
left untouched.</p>

<p style="margin-left:22%; margin-top: 1em">Limitations and
details:</p>

<p style="margin-left:22%; margin-top: 1em">1) Tunnel
interfaces are only allowed for MN and CN (not HA).</p>

<p style="margin-left:22%; margin-top: 1em">2) They are
never considered as home link (i.e. you will never be at
home on a tunnel).</p>

<p style="margin-left:22%; margin-top: 1em">3) Unlike for
physical interfaces, link detection is not reliable for
tunnel interfaces. If the tunnel interface state is directly
dependent of some physical interface link status, that
status must be monitored externally (i.e. not by UMIP) and
reflected by having either the interface being set down/up
or address being removed/added for UMIP to detect the change
in interface configuration.</p>

<p style="margin-left:22%; margin-top: 1em">4) An address
must be configured on the interface for it to be selected.
If no adress is available, UMIP will simply not consider the
interface at all (even if it provides a default route).</p>

<p style="margin-left:22%; margin-top: 1em">5) Routes that
include specific sources are not considered by UMIP.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<p style="margin-left:22%; margin-top: 1em">When using a
teredo interface, the default route through the teredo
device is found and its preference changed. Link local
routes are kept unchanged. Address configuration is kept
unmodified.</p>

<p style="margin-left:22%; margin-top: 1em">When using a
6to4 tunnel interface, a default route through the 6to4
device exists. It uses the 6to4 relay address (::192.88.99.1
anycast address or another specific one) as gateway. UMIP
finds this default route and install a new default one with
the same gateway but an updated metric.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:11%;"><b>UseMnHaIPsec</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
the MN-HA MIPv6 signalling should be protected with
IPsec.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported.</p>

<p style="margin-left:11%;"><b>KeyMngMobCapability</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">If dynamic
keying with MIPv6-aware IKE is used, this options should be
enabled. It turns on the K-bit for binding updates and
binding acknowledgements.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>IPsecPolicySet {</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>HomeAgentAddress</b> address<b>;</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>HomeAddress</b> address/length<b>;</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>IPsecPolicy ...</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>...</b></p></td></tr>
</table>

<p style="margin-left:22%;"><b>}</b></p>


<p style="margin-left:22%; margin-top: 1em"><b>IPsecPolicySet</b>
is a set of policies to apply for matching packets. A policy
set can contain multiple <b>HomeAddress</b> options, but
only one <b>HomeAgentAddress</b> option. For home agent,
home agent address field contains its own address, and home
address fields may contain any number of mobile nodes for
which the same policy applies.</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported. The sets can be changed, added or removed.
Removing rules for established bindings may have unpredicted
effects.</p>


<p style="margin-left:22%; margin-top: 1em"><b>IPsecPolicy</b>
has the following format:</p>

<p style="margin-left:11%;"><b>IPsecPolicy</b> type
<b>UseESP</b> number number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Field
<b>type</b> can be one of <b>HomeRegBinding</b> (for
protecting BU/BH), <b>Mh</b> (for protecting all MH packets:
BU, BA, BE), <b>MobPfxDisc</b> (for protecting MPS/MPA),
<b>ICMP</b> (for protecting all ICMP packets, including
MPS/MPA), <b>any</b> (for protecting all transport mode
communication), <b>TunnelHomeTesting</b> (for protecting the
HoTI/HoT messages), <b>TunnelMh</b> (for protecting all
tunneled MH packets, including HoTI/HoT), or
<b>TunnelPayload</b> (for protecting all tunneled packets
including tunneled MH packets).</p>

<p style="margin-left:22%; margin-top: 1em">Currently only
the ESP IPsec protocol is supported, but in the future AH
and IPComp might also be available. The two remaining
numeric fields are the IPsec reqid values, the first one
used for MN - HA, the second one for HA - MN communication.
If just one value is defined, the same reqid will be used in
both directions. If no reqid is given, reqid will not be
used.</p>

<p style="margin-left:22%; margin-top: 1em">If more that
one IPsec transport mode or tunnel mode policy is defined
between the MN and HA in each direction, reqid can be used
to provide an unambiguous one-to-one mapping between IPsec
policies and SAs. Otherwise the policies will just share a
common SA.</p>

<h2>HOME AGENT SPECIFIC OPTIONS
<a name="HOME AGENT SPECIFIC OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
definitions are ignored unless the node is configured as a
HA: <b><br>
HaMaxBindingLife</b> number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Limits the
maximum lifetime (in seconds) for Mobile Node home
registrations.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
262140</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<p style="margin-left:11%;"><b>SendMobPfxAdvs</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Controls
whether home agent sends Mobile Prefix Advertisements to
mobile nodes in foreign networks.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<p style="margin-left:11%;"><b>SendUnsolMobPfxAdvs</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Controls
whether home agent send unsolicited Mobile Prefix
Advertisements to mobile nodes in foreign networks.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<p style="margin-left:11%;"><b>MinMobPfxAdvInterval</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Sets a minimum
interval (in seconds) for Mobile Prefix Advertisements.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
600</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new scheduled MPA.</p>

<p style="margin-left:11%;"><b>MaxMobPfxAdvInterval</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Sets a maximum
interval (in seconds) for Mobile Prefix Advertisements.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
86400</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
Partially supported. Only affects new scheduled MPA.</p>

<p style="margin-left:11%;"><b>HaAcceptMobRtr</b> enabled |
disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
the HA accepts Mobile Router bindings.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>HaServedPrefix</b>
prefix/length<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Prefix is an
IPv6 prefix and length is the prefix length. Defines the
whole aggregated or extended prefix the HA serves. This
option is only used for MR bindings and is only needed if
the MRs derive their Home Addresses from their Mobile
Network Prefixes, instead of one of the home link
prefixes.</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>BindingAclPolicy</b> address
<b>[ MNP-list ]</b> allow | deny<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Defines if a MN
is allowed to register with the HA or not. The home address
of the MN is given in the address field. The mobile network
prefixes belonging a NEMO Mobile Router are optionally
listed in <b>MNP-list</b> for example:
<b>(3ffe:2620:6:3::/64, 3ffe:2620:6:4::/64)</b></p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Does not affect existing bindings until
they expire.</p>

<p style="margin-left:11%;"><b>DefaultBindingAclPolicy</b>
allow | deny<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Defines the
default policy if no matching BindingAclPolicy entry is
found for a MN.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
allow</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<h2>MOBILE NODE SPECIFIC OPTIONS
<a name="MOBILE NODE SPECIFIC OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
definitions are ignored unless the node is configured as a
MN: <b><br>
MnMaxHaBindingLife</b> number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Limits the
maximum lifetime (in seconds) for Mobile Node home
registrations.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
262140</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<p style="margin-left:11%;"><b>MnMaxCnBindingLife</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Limits the
maximum lifetime (in seconds) for Mobile Node Correspondent
Node registrations.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
420</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>

<p style="margin-left:11%;"><b>MnDiscardHaParamProb</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Toggles if the
Mobile Node should discard ICMPv6 Parameter Problem messages
from its Home Agent. As the ICMPv6 error messages
won&rsquo;t normally be protected by IPsec, a malicious
third party can quite easily impersonate the HA to the MN.
Having the MN accept these messages therefore leaves it open
to Denial of Service attacks, even though its home
registration signalling is protected by IPsec.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>MnResetDhaadAtHome</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">If the MN uses
DHAAD, then enabling this option will force UMIP to set the
Home Agent Address to the unspecified address every time the
MN returns home. As a consequence, the MN will run DHAAD
every time it moves from home to a foreign network. If
disabled, the HA address obtained from the very first DHAAD
exchange will be remembered even if the MN returns home.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>MnFlushAllAtHome</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Enabling this
option allows the MN to flush all uncertain registrations
upon returning home, instead of keeping trying to complete
them from home until the retry counters expire. Also, this
option forces the returning home procedure for valid
registrations in the case the HA does not reply to DAD probe
when returning home.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>


<p style="margin-left:11%;"><b>MnMaxCnConsecutiveResends</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">By default, if
the MN does not receives a BA from a CN, it resends the BU
indefinitely. Setting this option to 1 or more allows to
stop trying after the specified number. 1 resend is the
minimum, as 0 is a reserved value to indicate that resend
should be performed indefinitely.</p>

<p style="margin-left:22%; margin-top: 1em">Default: 0
(resend indefinitely)</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>


<p style="margin-left:11%;"><b>MnMaxHaConsecutiveResends</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">By default, if
the MN learnt the HA address through DHAAD and did not
receive a BA from a HA after 5 retries, it invalidates the
HA and tries to switch to another HA. This option allows to
tune the number of retry before switching. Note that if
DHAAD is not used, this option has no effect, and the MN
retries sending the BU indefinitely.</p>

<p style="margin-left:22%; margin-top: 1em">Default: 5</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>SendMobPfxSols</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Controls
whether mobile node sends Mobile Prefix Solicitations to the
home network.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>DoRouteOptimizationMN</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
the Mobile Node should initialize route optimization with
Correspondent Nodes.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported, disabling is not supported.</p>

<p style="margin-left:11%;"><b>MnUseAllInterfaces</b>
enabled | disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
all interfaces should be used for mobility. The preference
of these interfaces is always 1. Unless you use dynamically
created and named network interfaces you should normally
disable this option and use <b>Interface</b> options to
explicitly list the used interfaces.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
same support as &quot;Interface&quot; directive.</p>

<p style="margin-left:11%;"><b>MobRtrUseExplicitMode</b>
enabled | disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Toggles between
explicit or implicit mode home registrations in the MR.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
enabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>UseCnBuAck</b>
boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates if
the Acknowledge bit should be set in Binding Updates sent to
Correspondent Nodes.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>


<p style="margin-left:11%;"><b>InterfaceInitialInitDelay</b>
decimal<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Defines the
delay (in seconds) for initial interface configuration at
startup before any movement decision occurs.</p>

<p style="margin-left:22%; margin-top: 1em">At startup,
UMIP gathers information on interfaces available on the
system. Then, for interfaces listed in the configuration, it
either learn CoA (for those marked as <b>Tunnel</b>) or send
RS to receive RA (asynchronously) and then configured
CoA.</p>

<p style="margin-left:22%; margin-top: 1em">At startup, if
the MN has multiple interfaces, UMIP may first select a CoA
on a given interface and then change its mind and switch to
another CoA. This may result in the emission of multiple
useless BU. Additionally, when Dynamic Keying (IKE) is used
for negotiating protection of traffic, a CoA change
occurring during the initial negotiation only leads to
additional delays.</p>

<p style="margin-left:22%; margin-top: 1em">By introducing
an initial default delay at startup, that side effect is
avoided. If your MN is configured to use only a single
interface, or do not use IKE and startup delay matters, you
may set the parameter to 0.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
2.0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported (only valid at daemon startup).</p>

<p style="margin-left:11%;"><b>MnRouterProbes</b>
number<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates how
many times the MN should send Neighbor Unreachability
Detection (NUD) probes to its old router after receiving a
Router Advertisement (RA) from a new one. If the option is
set to zero or the new router advertises a strictly higher
default preference value than the old one (as defined in RFC
4191), the MN will move to the new router straight away.</p>

<p style="margin-left:22%; margin-top: 1em">Default: 0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>MnRouterProbeTimeout</b>
decimal<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates how
long (in seconds) the MN should wait for a reply during a
access router Neighbor Unreachability Detection probe. If
set, it overrides any default Neighbor Solicitation
Retransmit Timer value greater than MnRouterProbeTimeout.
For example, if the interface Retransmit Timer is 1 second,
but MnRouterProbeTimeout is just 0.2 seconds, the MN will
only wait 0.2 seconds for a Neighbor Advertisement before
proceeding with the handoff.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
0.0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>


<p style="margin-left:11%;"><b>InitialBindackTimeoutFirstReg</b>
decimal<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Upon the first
registration attempt, indicates how long (in seconds) the MN
should wait before re-sending the Binding Update when no
Binding Ack has been received. For subsequent registrations,
you may set the <b>InitialBindackTimeoutReReg</b>
option.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
1.5</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Only affects new bindings.</p>


<p style="margin-left:11%;"><b>InitialBindackTimeoutReReg</b>
decimal<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates how
long (in seconds) the MN should wait before re-sending the
Binding Update when no Binding Ack has been received. For
the first registration attempt, you may set the
<b>InitialBindackTimeoutFirstReg</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
1.0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
partially supported. Does not affect existing bindings until
they expire.</p>

<p style="margin-left:11%;"><b>InitialSolicitTimer</b>
decimal<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Indicates how
long (in seconds) the MN should wait before re-sending the
initial Mobile Prefix Solitication message when no answers
have been received. Option <b>SendMobPfxSols</b> must be
enabled.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
3.0</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported.</p>

<p style="margin-left:11%;"><b>OptimisticHandoff</b>
enabled | disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">When a Mobile
Node sends a Binding Update to the Home Agent, no Route
Optimized or reverse tunneled traffic is sent until a
Binding Acknowledgement is received. When enabled, this
option allows the Mobile Node to assume that the binding was
successful right after the BU has been sent, and does not
wait for a positive acknowledgement before using RO or
reverse tunneling.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported.</p>

<p style="margin-left:11%;"><b>NoHomeReturn</b> enabled |
disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">When a MN
returns Home, it usually deregisters its binding.
Additionally, when IPsec is in use to protect data traffic,
a MN also deinstall the IPsec Security Policies protecting
data traffic. One problem with that expected behavior is
that an insecure trigger (Home Link Detection mechanism,
based on prefix announced in RA messages) is used for the
removal of IPsec Security Policies for data traffic.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>NoHomeReturn</b> option can be used to change that
behavior. When enabled, the MN will never consider itself at
home. That way, if IPsec is used to protect data traffic,
associated Security Policies will never be removed.</p>

<p style="margin-left:22%; margin-top: 1em">Note that for
the option to work when the MN really returns home (i.e. on
the subnet where the Home Agent is defending MN&rsquo;s
HoA), the two following conditions must be met:</p>

<p style="margin-left:22%; margin-top: 1em">1) The HoA of
the MN must be different from the CoA the MN will
automatically configure itself on its interface that
connects to its home network,</p>

<p style="margin-left:22%; margin-top: 1em">2) The
interface that connects to the home subnet must not be the
<b>MnHomeLink</b> interface (because the MN configures its
HoA on that interface, which will in turn make DAD fail on
the HA for the HoA).</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
supported (for the next home return).</p>

<p style="margin-left:11%;"><b>MnHomeLink</b> name
<b>{</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>HomeAddress</b> address/length <b>[ MNP-list
]</b>;</p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>HomeAgentAddress</b> address<b>;</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>MnRoPolicy ...</b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>...</b></p></td></tr>
</table>

<p style="margin-left:22%;"><b>}</b></p>

<p style="margin-left:22%; margin-top: 1em">Each
<b>MnHomeLink</b> definition has a name. This is the name
(enclosed in double quotes) of the interface used for
connecting to the physical home link. To set up multiple
Home Addresses on the Mobile Node, you need to define
multiple <b>MnHomeLink</b> structures. The interface names
don&rsquo;t have to be unique in these definitions.</p>

<p style="margin-left:22%; margin-top: 1em">Dynamic reload:
not supported. The daemon has to be restarted for the
changes in this directive to take effect.</p>

<p style="margin-left:22%; margin-top: 1em">All the home
link specific definitions are detailed below:</p>

<p style="margin-left:11%;"><b>HomeAddress</b>
address/length <b>[ MNP-list ]</b>;</p>

<p style="margin-left:22%; margin-top: 1em">Address is an
IPv6 address, and length the prefix length of the address,
usually 64. The MNP-list contains the mobile network
prefixes belonging to that particular NEMO Mobile Router.
The MNP-list is optional and is of the same format as in
<b>BindingAclPolicy.</b> This option must be included in a
home link definition.</p>

<p style="margin-left:11%;"><b>HomeAgentAddress</b>
address<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Address is the
IPv6 address of the Mobile Node&rsquo;s Home Agent. DHAAD is
used if it is the unspecified address ::.</p>

<p style="margin-left:22%; margin-top: 1em">Default: ::</p>

<p style="margin-left:11%;"><b>IsMobRtr</b> enabled |
disabled<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Defines if the
MN is a NEMO MR.</p>

<p style="margin-left:22%; margin-top: 1em">Default:
disabled</p>

<p style="margin-left:11%;">The route optimization policies
are of the form: <b><br>
MnRoPolicy</b> address boolean<b>;</b></p>

<p style="margin-left:22%; margin-top: 1em">Any number of
these policies may be defined. If no policies are defined
default behavior depends on the <b>DoRouteOptimizationMN</b>
option.</p>

<p style="margin-left:22%; margin-top: 1em">The fields for
a route optimization policy entry are as follows:
<b>address</b> defines the Correspondent Node this policy
applies to, if left undefined the uspecified address is used
as a wildcard value <b>boolean</b> sets route optimization
either enabled or disabled for packets matching this
entry.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>A NEMO Home
Agent example (without IPsec):</b></p>

<p style="margin-left:22%; margin-top: 1em">NodeConfig
HA;</p>

<p style="margin-left:22%; margin-top: 1em">Interface
&quot;eth0&quot;;</p>

<p style="margin-left:22%; margin-top: 1em">HaAcceptMobRtr
enabled;</p>

<p style="margin-left:22%; margin-top: 1em">HaServedPrefix
3ffe:2620:6::/48;</p>


<p style="margin-left:22%; margin-top: 1em">DefaultBindingAclPolicy
deny; <br>
BindingAclPolicy 3ffe:2620:6:1::1234 (3ffe:2620:6:2::/64,
3ffe:2620:6:3::/64) allow; <br>
BindingAclPolicy 3ffe:2620:6:1::1235 allow;</p>

<p style="margin-left:22%; margin-top: 1em">UseMnHaIPsec
disabled;</p>

<p style="margin-left:11%;"><b>A NEMO Mobile Router example
(without IPsec):</b></p>

<p style="margin-left:22%; margin-top: 1em">NodeConfig
MN;</p>


<p style="margin-left:22%; margin-top: 1em">DoRouteOptimizationCN
disabled; <br>
DoRouteOptimizationMN disabled;</p>

<p style="margin-left:22%; margin-top: 1em">Interface
&quot;eth0&quot;;</p>

<p style="margin-left:22%; margin-top: 1em">MnRouterProbes
1;</p>


<p style="margin-left:22%; margin-top: 1em">MobRtrUseExplicitMode
enabled;</p>

<p style="margin-left:22%; margin-top: 1em">MnHomeLink
&quot;eth0&quot; { <br>
IsMobRtr enabled; <br>
HomeAgentAddress 3ffe:2620:6:1::1; <br>
HomeAddress 3ffe:2620:6:1::1234/64 (3ffe:2620:6:2::/64,
3ffe:2620:6:3::/64); <br>
}</p>

<p style="margin-left:22%; margin-top: 1em">UseMnHaIPsec
disabled;</p>

<p style="margin-left:11%;"><b>A Correspondent Node example
(without IPsec):</b></p>

<p style="margin-left:22%; margin-top: 1em">NodeConfig
CN;</p>


<p style="margin-left:22%; margin-top: 1em">DoRouteOptimizationCN
enabled;</p>

<p style="margin-left:11%;"><b>A Home Agent example (with
IPsec static keying):</b></p>

<p style="margin-left:22%; margin-top: 1em">NodeConfig
HA;</p>

<p style="margin-left:22%; margin-top: 1em">Interface
&quot;eth0&quot;;</p>


<p style="margin-left:22%; margin-top: 1em">BindingAclPolicy
3ffe:2620:6:1::1234 allow;</p>

<p style="margin-left:22%; margin-top: 1em">UseMnHaIPsec
enabled;</p>

<p style="margin-left:22%; margin-top: 1em">IPsecPolicySet
{ <br>
HomeAgentAddress 3ffe:2620:6:1::1; <br>
HomeAddress 3ffe:2620:6:1::1234/64;</p>

<p style="margin-left:22%; margin-top: 1em"># All MH
packets (BU/BA/BERR) <br>
IPsecPolicy Mh UseESP 111 112; <br>
# All tunneled packets (HoTI/HoT, payload) <br>
IPsecPolicy TunnelPayload UseESP 113 114; <br>
# All ICMP packets (MPS/MPA, ICMPv6) <br>
IPsecPolicy ICMP UseESP 115 116; <br>
}</p>

<p style="margin-left:11%;"><b>A Mobile Node example (with
IPsec static keying):</b></p>

<p style="margin-left:22%; margin-top: 1em">NodeConfig
MN;</p>


<p style="margin-left:22%; margin-top: 1em">DoRouteOptimizationCN
enabled; <br>
# DoRouteOptimizationMN cannot be used <br>
# with TunnelPayload IPsecPolicy <br>
DoRouteOptimizationMN disabled;</p>

<p style="margin-left:22%; margin-top: 1em">UseCnBuAck
enabled;</p>

<p style="margin-left:22%; margin-top: 1em">MnHomeLink
&quot;eth0&quot; { <br>
HomeAgentAddress 3ffe:2620:6:1::1; <br>
HomeAddress 3ffe:2620:6:1::1234/64;</p>

<p style="margin-left:22%; margin-top: 1em"># address opt.
<br>
#MnRoPolicy 3ffe:2060:6:1::3 enabled; <br>
#MnRoPolicy disabled; <br>
}</p>

<p style="margin-left:22%; margin-top: 1em">UseMnHaIPsec
enabled;</p>

<p style="margin-left:22%; margin-top: 1em">IPsecPolicySet
{ <br>
HomeAgentAddress 3ffe:2620:6:1::1; <br>
HomeAddress 3ffe:2620:6:1::1234/64;</p>

<p style="margin-left:22%; margin-top: 1em"># All MH
packets (BU/BA/BERR) <br>
IPsecPolicy Mh UseESP 111 112; <br>
# All tunneled packets (HoTI/HoT, payload) <br>
IPsecPolicy TunnelPayload UseESP 113 114; <br>
# All ICMP packets (MPS/MPA, ICMPv6) <br>
IPsecPolicy ICMP UseESP 115 116; <br>
}</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mip6d</b>(1),
<b>mipv6</b>(7),</p>

<p style="margin-left:11%; margin-top: 1em">RFC6275:
Mobility Support in IPv6</p>

<p style="margin-left:11%; margin-top: 1em">RFC3776: Using
IPsec to Protect Mobile IPv6 Signaling Between Mobile Nodes
and Home Agents</p>

<p style="margin-left:11%; margin-top: 1em">RFC4877: Mobile
IPv6 Operation with IKEv2 and the Revised IPsec
Architecture</p>

<p style="margin-left:11%; margin-top: 1em">RFC3963:
Network Mobility (NEMO) Basic Support Protocol</p>
<hr>
</body>
</html>
