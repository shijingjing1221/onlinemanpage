<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:35:19 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>UMAD_REGISTER2</title>

</head>
<body>

<h1 align="center">UMAD_REGISTER2</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#REGISTRATION ATTRIBUTE STRUCTURE">REGISTRATION ATTRIBUTE STRUCTURE</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">umad_register2
&minus; register the specified management class and version
for port</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;infiniband/umad.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
umad_register2(int</b> <i>port_fd</i><b>, struct
umad_reg_attr *</b><i>attr</i><b>, uint32_t
*</b><i>agent_id</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>umad_register2()</b>
registers for a MAD agent using the provided registration
attributes</p>

<p style="margin-left:11%; margin-top: 1em"><i>port_fd</i>
the port on which to register the agent</p>

<p style="margin-left:11%; margin-top: 1em"><i>attr</i> The
registration attributes as defined by the structure passed.
See below for details of this structure.</p>


<p style="margin-left:11%; margin-top: 1em"><i>agent_id</i>
returned on success. agent_id identifies the kernel MAD
agent a MAD is received by or to be sent by. agent_id is
returned in the umad header &quot;struct ib_user_mad&quot;
on recv and specified in umad_send when sending.</p>

<h2>REGISTRATION ATTRIBUTE STRUCTURE
<a name="REGISTRATION ATTRIBUTE STRUCTURE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">struct
umad_reg_attr {</p>

<p style="margin-left:23%;">uint8_t mgmt_class; <br>
uint8_t mgmt_class_version; <br>
uint32_t flags; <br>
uint64_t method_mask[2]; <br>
uint32_t oui; <br>
uint8_t rmpp_version;</p>

<p style="margin-left:11%;">};</p>


<p style="margin-left:11%; margin-top: 1em"><i>mgmt_class</i>
<br>
Management class to register for.</p>


<p style="margin-left:11%; margin-top: 1em"><i>mgmt_class_version</i>
<br>
Management class version to register for.</p>

<p style="margin-left:11%; margin-top: 1em"><i>flags</i>
<br>
Registration flags. If a flag specified is not supported by
the kernel, <br>
an error is returned, and the supported flags are returned
in this field.</p>

<p style="margin-left:11%; margin-top: 1em">Current flags
are:</p>

<p style="margin-left:23%;">UMAD_USER_RMPP -- flag to
indicate the kernel should not process <br>
RMPP packets. All RMPP packets will be treated like
individual <br>
MADs. The user is responsible for implementing the RMPP <br>
protocol.</p>


<p style="margin-left:11%; margin-top: 1em"><i>method_mask</i>
<br>
A bit mask which indicates which unsolicited methods this
agent should <br>
receive. Setting this array to 0 will result in the agent
only <br>
receiving response MADs for which a request was sent.</p>

<p style="margin-left:11%; margin-top: 1em"><i>oui</i> <br>
The oui (in host order) to use for vendor classes 0x30 -
0x4f. <br>
Otherwise ignored.</p>


<p style="margin-left:11%; margin-top: 1em"><i>rmpp_version</i>
<br>
If the class supports RMPP and kernel RMPP is enabled (the
default) <br>
indicate which rmpp_version to use.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>umad_register2()</b>
returns 0 on success and +ERRNO on failure.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>umad_unregister</b>(3)</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Ira Weiny
&lt;ira.weiny@intel.com&gt;</p>
<hr>
</body>
</html>
