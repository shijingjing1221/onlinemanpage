<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:25:32 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SSSD&minus;AD</title>

</head>
<body>

<h1 align="center">SSSD&minus;AD</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONFIGURATION OPTIONS">CONFIGURATION OPTIONS</a><br>
<a href="#FAILOVER">FAILOVER</a><br>
<a href="#SERVICE DISCOVERY">SERVICE DISCOVERY</a><br>
<a href="#ID MAPPING">ID MAPPING</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sssd-ad &minus;
SSSD Active Directory provider</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page describes the configuration of the AD provider for
<b>sssd</b>(8). For a detailed syntax reference, refer to
the &ldquo;FILE FORMAT&rdquo; section of the
<b>sssd.conf</b>(5) manual page.</p>

<p style="margin-left:11%; margin-top: 1em">The AD provider
is a back end used to connect to an Active Directory server.
This provider requires that the machine be joined to the AD
domain and a keytab is available.</p>

<p style="margin-left:11%; margin-top: 1em">The AD provider
supports connecting to Active Directory 2008 R2 or later.
Earlier versions may work, but are unsupported.</p>

<p style="margin-left:11%; margin-top: 1em">The AD provider
is able to provide identity information and authentication
for entities from trusted domains as well. Currently only
trusted domains in the same forest are recognized.</p>

<p style="margin-left:11%; margin-top: 1em">The AD provider
accepts the same options used by the <b>sssd-ldap</b>(5)
identity provider and the <b>sssd-krb5</b>(5) authentication
provider with some exceptions described below.</p>

<p style="margin-left:11%; margin-top: 1em">However, it is
neither necessary nor recommended to set these options. The
AD provider can also be used as an access, chpass and sudo
provider. No configuration of the access provider is
required on the client side.</p>

<p style="margin-left:11%; margin-top: 1em">By default, the
AD provider will map UID and GID values from the objectSID
parameter in Active Directory. For details on this, see the
&ldquo;ID MAPPING&rdquo; section below. If you want to
disable ID mapping and instead rely on POSIX attributes
defined in Active Directory, you should set</p>


<p style="margin-left:17%; margin-top: 1em">ldap_id_mapping
= False</p>

<p style="margin-left:11%; margin-top: 1em">In order to
retrieve users and groups using POSIX attributes from
trusted domains, the AD administrator must make sure that
the POSIX attributes are replicated to the Global
Catalog.</p>

<p style="margin-left:11%; margin-top: 1em">Users, groups
and other entities served by SSSD are always treated as
case&minus;insensitive in the AD provider for compatibility
with Active Directory's LDAP implementation.</p>

<h2>CONFIGURATION OPTIONS
<a name="CONFIGURATION OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Refer to the
section &ldquo;DOMAIN SECTIONS&rdquo; of the
<b>sssd.conf</b>(5) manual page for details on the
configuration of an SSSD domain.</p>

<p style="margin-left:11%; margin-top: 1em">ad_domain
(string)</p>

<p style="margin-left:17%;">Specifies the name of the
Active Directory domain. This is optional. If not provided,
the configuration domain name is used.</p>

<p style="margin-left:17%; margin-top: 1em">For proper
operation, this option should be specified as the
lower&minus;case version of the long version of the Active
Directory domain.</p>

<p style="margin-left:17%; margin-top: 1em">The short
domain name (also known as the NetBIOS or the flat name) is
autodetected by the SSSD.</p>

<p style="margin-left:11%; margin-top: 1em">ad_server,
ad_backup_server (string)</p>

<p style="margin-left:17%;">The comma&minus;separated list
of hostnames of the AD servers to which SSSD should connect
in order of preference. For more information on failover and
server redundancy, see the &ldquo;FAILOVER&rdquo; section.
This is optional if autodiscovery is enabled. For more
information on service discovery, refer to the
&ldquo;SERVICE DISCOVERY&rdquo; section.</p>

<p style="margin-left:11%; margin-top: 1em">ad_hostname
(string)</p>

<p style="margin-left:17%;">Optional. May be set on
machines where the hostname(5) does not reflect the fully
qualified name used in the Active Directory domain to
identify this host.</p>

<p style="margin-left:17%; margin-top: 1em">This field is
used to determine the host principal in use in the keytab.
It must match the hostname for which the keytab was
issued.</p>


<p style="margin-left:11%; margin-top: 1em">ad_enable_dns_sites
(boolean)</p>

<p style="margin-left:17%;">Enables DNS sites &minus;
location based service discovery.</p>

<p style="margin-left:17%; margin-top: 1em">If true and
service discovery (see Service Discovery paragraph at the
bottom of the man page) is enabled, the SSSD will first
attempt to discover the Active Directory server to connect
to using the Active Directory Site Discovery and fall back
to the DNS SRV records if no AD site is found. The DNS SRV
configuration, including the discovery domain, is used
during site discovery as well.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
true</p>


<p style="margin-left:11%; margin-top: 1em">ad_access_filter
(string)</p>

<p style="margin-left:17%;">This option specifies LDAP
access control filter that the user must match in order to
be allowed access. Please note that the
&ldquo;access_provider&rdquo; option must be explicitly set
to &ldquo;ad&rdquo; in order for this option to have an
effect.</p>

<p style="margin-left:17%; margin-top: 1em">The option also
supports specifying different filters per domain or forest.
This extended filter would consist of:
&ldquo;KEYWORD:NAME:FILTER&rdquo;. The keyword can be either
&ldquo;DOM&rdquo;, &ldquo;FOREST&rdquo; or missing.</p>

<p style="margin-left:17%; margin-top: 1em">If the keyword
equals to &ldquo;DOM&rdquo; or is missing, then
&ldquo;NAME&rdquo; specifies the domain or subdomain the
filter applies to. If the keyword equals to
&ldquo;FOREST&rdquo;, then the filter equals to all domains
from the forest specified by &ldquo;NAME&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">Multiple
filters can be separated with the &ldquo;?&rdquo; character,
similarly to how search bases work.</p>

<p style="margin-left:17%; margin-top: 1em">The most
specific match is always used. For example, if the option
specified filter for a domain the user is a member of and a
global filter, the per&minus;domain filter would be applied.
If there are more matches with the same specification, the
first one is used.</p>

<p style="margin-left:17%; margin-top: 1em">Examples:</p>

<p style="margin-left:23%; margin-top: 1em"># apply filter
on domain called dom1 only: <br>
dom1:(memberOf=cn=admins,ou=groups,dc=dom1,dc=com)</p>

<p style="margin-left:23%; margin-top: 1em"># apply filter
on domain called dom2 only: <br>
DOM:dom2:(memberOf=cn=admins,ou=groups,dc=dom2,dc=com)</p>

<p style="margin-left:23%; margin-top: 1em"># apply filter
on forest called EXAMPLE.COM only: <br>

FOREST:EXAMPLE.COM:(memberOf=cn=admins,ou=groups,dc=example,dc=com)</p>

<p style="margin-left:17%; margin-top: 1em">Default: Not
set</p>

<p style="margin-left:11%; margin-top: 1em">ad_site
(string)</p>

<p style="margin-left:17%;">Specify AD site to which client
should try to connect. If this option is not provided, the
AD site will be auto&minus;discovered.</p>

<p style="margin-left:17%; margin-top: 1em">Default: Not
set</p>

<p style="margin-left:11%; margin-top: 1em">ad_enable_gc
(boolean)</p>

<p style="margin-left:17%;">By default, the SSSD connects
to the Global Catalog first to retrieve users from trusted
domains and uses the LDAP port to retrieve group memberships
or as a fallback. Disabling this option makes the SSSD only
connect to the LDAP port of the current AD server.</p>

<p style="margin-left:17%; margin-top: 1em">Please note
that disabling Global Catalog support does not disable
retrieving users from trusted domains. The SSSD would
connect to the LDAP port of trusted domains instead.
However, Global Catalog must be used in order to resolve
cross&minus;domain group memberships.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
true</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_access_control
(string)</p>

<p style="margin-left:17%;">This option specifies the
operation mode for GPO&minus;based access control
functionality: whether it operates in disabled mode,
enforcing mode, or permissive mode. Please note that the
&ldquo;access_provider&rdquo; option must be explicitly set
to &ldquo;ad&rdquo; in order for this option to have an
effect.</p>


<p style="margin-left:17%; margin-top: 1em">GPO&minus;based
access control functionality uses GPO policy settings to
determine whether or not a particular user is allowed to
logon to a particular host.</p>

<p style="margin-left:17%; margin-top: 1em">NOTE: If the
operation mode is set to enforcing, it is possible that
users that were previously allowed logon access will now be
denied logon access (as dictated by the GPO policy
settings). In order to facilitate a smooth transition for
administrators, a permissive mode is available that will not
enforce the access control rules, but will evaluate them and
will output a syslog message if access would have been
denied. By examining the logs, administrators can then make
the necessary changes before setting the mode to
enforcing.</p>

<p style="margin-left:17%; margin-top: 1em">There are three
supported values for this option:</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
disabled: GPO&minus;based access control rules are neither
evaluated nor enforced.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
enforcing: GPO&minus;based access control rules are
evaluated and enforced.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
permissive: GPO&minus;based access control rules are
evaluated, but not enforced. Instead, a syslog message will
be emitted indicating that the user would have been denied
access if this option's value were set to enforcing.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
permissive</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_cache_timeout
(integer)</p>

<p style="margin-left:17%;">The amount of time between
lookups of GPO policy files against the AD server. This will
reduce the latency and load on the AD server if there are
many access&minus;control requests made in a short
period.</p>

<p style="margin-left:17%; margin-top: 1em">Default: 5
(seconds)</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_interactive
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access control
is evaluated based on the InteractiveLogonRight and
DenyInteractiveLogonRight policy settings.</p>

<p style="margin-left:17%; margin-top: 1em">Note: Using the
Group Policy Management Editor this value is called
&quot;Allow log on locally&quot; and &quot;Deny log on
locally&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add another PAM service name to the default set by using
&ldquo;+service_name&rdquo; or to explicitly remove a PAM
service name from the default set by using
&ldquo;&minus;service_name&rdquo;. For example, in order to
replace a default PAM service name for this logon right
(e.g. &ldquo;login&rdquo;) with a custom pam service name
(e.g. &ldquo;my_pam_service&rdquo;), you would use the
following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_interactive
= +my_pam_service, &minus;login</p>

<p style="margin-left:17%; margin-top: 1em">Default: the
default set of PAM service names includes:</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
login</p>

<p style="margin-left:23%; margin-top: 1em">&bull; su</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
su&minus;l</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
gdm&minus;fingerprint</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
gdm&minus;password</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
gdm&minus;smartcard</p>

<p style="margin-left:23%; margin-top: 1em">&bull; kdm</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_remote_interactive
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access control
is evaluated based on the RemoteInteractiveLogonRight and
DenyRemoteInteractiveLogonRight policy settings.</p>

<p style="margin-left:17%; margin-top: 1em">Note: Using the
Group Policy Management Editor this value is called
&quot;Allow log on through Remote Desktop Services&quot; and
&quot;Deny log on through Remote Desktop Services&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add another PAM service name to the default set by using
&ldquo;+service_name&rdquo; or to explicitly remove a PAM
service name from the default set by using
&ldquo;&minus;service_name&rdquo;. For example, in order to
replace a default PAM service name for this logon right
(e.g. &ldquo;sshd&rdquo;) with a custom pam service name
(e.g. &ldquo;my_pam_service&rdquo;), you would use the
following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_remote_interactive
= +my_pam_service, &minus;sshd</p>

<p style="margin-left:17%; margin-top: 1em">Default: the
default set of PAM service names includes:</p>

<p style="margin-left:23%; margin-top: 1em">&bull; sshd</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_network
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access control
is evaluated based on the NetworkLogonRight and
DenyNetworkLogonRight policy settings.</p>

<p style="margin-left:17%; margin-top: 1em">Note: Using the
Group Policy Management Editor this value is called
&quot;Access this computer from the network&quot; and
&quot;Deny access to this computer from the
network&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add another PAM service name to the default set by using
&ldquo;+service_name&rdquo; or to explicitly remove a PAM
service name from the default set by using
&ldquo;&minus;service_name&rdquo;. For example, in order to
replace a default PAM service name for this logon right
(e.g. &ldquo;ftp&rdquo;) with a custom pam service name
(e.g. &ldquo;my_pam_service&rdquo;), you would use the
following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_network
= +my_pam_service, &minus;ftp</p>

<p style="margin-left:17%; margin-top: 1em">Default: the
default set of PAM service names includes:</p>

<p style="margin-left:23%; margin-top: 1em">&bull; ftp</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
samba</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_batch
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access control
is evaluated based on the BatchLogonRight and
DenyBatchLogonRight policy settings.</p>

<p style="margin-left:17%; margin-top: 1em">Note: Using the
Group Policy Management Editor this value is called
&quot;Allow log on as a batch job&quot; and &quot;Deny log
on as a batch job&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add another PAM service name to the default set by using
&ldquo;+service_name&rdquo; or to explicitly remove a PAM
service name from the default set by using
&ldquo;&minus;service_name&rdquo;. For example, in order to
replace a default PAM service name for this logon right
(e.g. &ldquo;crond&rdquo;) with a custom pam service name
(e.g. &ldquo;my_pam_service&rdquo;), you would use the
following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_batch
= +my_pam_service, &minus;crond</p>

<p style="margin-left:17%; margin-top: 1em">Default: the
default set of PAM service names includes:</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
crond</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_service
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access control
is evaluated based on the ServiceLogonRight and
DenyServiceLogonRight policy settings.</p>

<p style="margin-left:17%; margin-top: 1em">Note: Using the
Group Policy Management Editor this value is called
&quot;Allow log on as a service&quot; and &quot;Deny log on
as a service&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add a PAM service name to the default set by using
&ldquo;+service_name&rdquo;. Since the default set is empty,
it is not possible to remove a PAM service name from the
default set. For example, in order to add a custom pam
service name (e.g. &ldquo;my_pam_service&rdquo;), you would
use the following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_service
= +my_pam_service</p>

<p style="margin-left:17%; margin-top: 1em">Default: not
set</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_permit
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access is always
granted, regardless of any GPO Logon Rights.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add another PAM service name to the default set by using
&ldquo;+service_name&rdquo; or to explicitly remove a PAM
service name from the default set by using
&ldquo;&minus;service_name&rdquo;. For example, in order to
replace a default PAM service name for unconditionally
permitted access (e.g. &ldquo;sudo&rdquo;) with a custom pam
service name (e.g. &ldquo;my_pam_service&rdquo;), you would
use the following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_permit
= +my_pam_service, &minus;sudo</p>

<p style="margin-left:17%; margin-top: 1em">Default: the
default set of PAM service names includes:</p>

<p style="margin-left:23%; margin-top: 1em">&bull; sudo</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
sudo&minus;i</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
systemd&minus;user</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_map_deny
(string)</p>

<p style="margin-left:17%;">A comma&minus;separated list of
PAM service names for which GPO&minus;based access is always
denied, regardless of any GPO Logon Rights.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to add a PAM service name to the default set by using
&ldquo;+service_name&rdquo;. Since the default set is empty,
it is not possible to remove a PAM service name from the
default set. For example, in order to add a custom pam
service name (e.g. &ldquo;my_pam_service&rdquo;), you would
use the following configuration:</p>


<p style="margin-left:23%; margin-top: 1em">ad_gpo_map_deny
= +my_pam_service</p>

<p style="margin-left:17%; margin-top: 1em">Default: not
set</p>


<p style="margin-left:11%; margin-top: 1em">ad_gpo_default_right
(string)</p>

<p style="margin-left:17%;">This option defines how access
control is evaluated for PAM service names that are not
explicitly listed in one of the ad_gpo_map_* options. This
option can be set in two different manners. First, this
option can be set to use a default logon right. For example,
if this option is set to 'interactive', it means that
unmapped PAM service names will be processed based on the
InteractiveLogonRight and DenyInteractiveLogonRight policy
settings. Alternatively, this option can be set to either
always permit or always deny access for unmapped PAM service
names.</p>

<p style="margin-left:17%; margin-top: 1em">Supported
values for this option include:</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
interactive</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
remote_interactive</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
network</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
batch</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
service</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
permit</p>

<p style="margin-left:23%; margin-top: 1em">&bull; deny</p>

<p style="margin-left:17%; margin-top: 1em">Default:
deny</p>

<p style="margin-left:11%; margin-top: 1em">dyndns_update
(boolean)</p>

<p style="margin-left:17%;">Optional. This option tells
SSSD to automatically update the Active Directory DNS server
with the IP address of this client. The update is secured
using GSS&minus;TSIG. As a consequence, the Active Directory
administrator only needs to allow secure updates for the DNS
zone. The IP address of the AD LDAP connection is used for
the updates, if it is not otherwise specified by using the
&ldquo;dyndns_iface&rdquo; option.</p>

<p style="margin-left:17%; margin-top: 1em">NOTE: On older
systems (such as RHEL 5), for this behavior to work
reliably, the default Kerberos realm must be set properly in
/etc/krb5.conf</p>

<p style="margin-left:17%; margin-top: 1em">Default:
true</p>

<p style="margin-left:11%; margin-top: 1em">dyndns_ttl
(integer)</p>

<p style="margin-left:17%;">The TTL to apply to the client
DNS record when updating it. If dyndns_update is false this
has no effect. This will override the TTL serverside if set
by an administrator.</p>

<p style="margin-left:17%; margin-top: 1em">Default: 3600
(seconds)</p>

<p style="margin-left:11%; margin-top: 1em">dyndns_iface
(string)</p>

<p style="margin-left:17%;">Optional. Applicable only when
dyndns_update is true. Choose the interface or a list of
interfaces whose IP addresses should be used for dynamic DNS
updates. Special value &ldquo;*&rdquo; implies that IPs from
all interfaces should be used.</p>

<p style="margin-left:17%; margin-top: 1em">Default: Use
the IP addresses of the interface which is used for AD LDAP
connection</p>

<p style="margin-left:17%; margin-top: 1em">Example:
dyndns_iface = em1, vnet1, vnet2</p>


<p style="margin-left:11%; margin-top: 1em">dyndns_refresh_interval
(integer)</p>

<p style="margin-left:17%;">How often should the back end
perform periodic DNS update in addition to the automatic
update performed when the back end goes online. This option
is optional and applicable only when dyndns_update is
true.</p>

<p style="margin-left:17%; margin-top: 1em">Default: 86400
(24 hours)</p>


<p style="margin-left:11%; margin-top: 1em">dyndns_update_ptr
(bool)</p>

<p style="margin-left:17%;">Whether the PTR record should
also be explicitly updated when updating the client's DNS
records. Applicable only when dyndns_update is true.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
True</p>


<p style="margin-left:11%; margin-top: 1em">dyndns_force_tcp
(bool)</p>

<p style="margin-left:17%;">Whether the nsupdate utility
should default to using TCP for communicating with the DNS
server.</p>

<p style="margin-left:17%; margin-top: 1em">Default: False
(let nsupdate choose the protocol)</p>

<p style="margin-left:11%; margin-top: 1em">dyndns_server
(string)</p>

<p style="margin-left:17%;">The DNS server to use when
performing a DNS update. In most setups, it's recommended to
leave this option unset.</p>

<p style="margin-left:17%; margin-top: 1em">Setting this
option makes sense for environments where the DNS server is
different from the identity server.</p>

<p style="margin-left:17%; margin-top: 1em">Please note
that this option will be only used in fallback attempt when
previous attempt using autodetected settings failed.</p>

<p style="margin-left:17%; margin-top: 1em">Default: None
(let nsupdate choose the server)</p>


<p style="margin-left:11%; margin-top: 1em">override_homedir
(string)</p>

<p style="margin-left:17%;">Override the user's home
directory. You can either provide an absolute value or a
template. In the template, the following sequences are
substituted:</p>

<p style="margin-left:17%; margin-top: 1em">%u</p>

<p style="margin-left:23%;">login name</p>

<p style="margin-left:17%; margin-top: 1em">%U</p>

<p style="margin-left:23%;">UID number</p>

<p style="margin-left:17%; margin-top: 1em">%d</p>

<p style="margin-left:23%;">domain name</p>

<p style="margin-left:17%; margin-top: 1em">%f</p>

<p style="margin-left:23%;">fully qualified user name
(user@domain)</p>

<p style="margin-left:17%; margin-top: 1em">%P</p>

<p style="margin-left:23%;">UPN &minus; User Principal Name
(name@REALM)</p>

<p style="margin-left:17%; margin-top: 1em">%o</p>

<p style="margin-left:23%;">The original home directory
retrieved from the identity provider.</p>

<p style="margin-left:17%; margin-top: 1em">%H</p>

<p style="margin-left:23%;">The value of configure option
<i>homedir_substring</i>.</p>

<p style="margin-left:17%; margin-top: 1em">%%</p>

<p style="margin-left:23%;">a literal '%'</p>

<p style="margin-left:17%; margin-top: 1em">This option can
also be set per&minus;domain.</p>

<p style="margin-left:17%; margin-top: 1em">example:</p>


<p style="margin-left:23%; margin-top: 1em">override_homedir
= /home/%u</p>

<p style="margin-left:17%; margin-top: 1em">Default: Not
set (SSSD will use the value retrieved from LDAP)</p>


<p style="margin-left:11%; margin-top: 1em">homedir_substring
(string)</p>

<p style="margin-left:17%;">The value of this option will
be used in the expansion of the <i>override_homedir</i>
option if the template contains the format string <i>%H</i>.
An LDAP directory entry can directly contain this template
so that this option can be used to expand the home directory
path for each client machine (or operating system). It can
be set per&minus;domain or globally in the [nss] section. A
value specified in a domain section will override one set in
the [nss] section.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
/home</p>


<p style="margin-left:11%; margin-top: 1em">krb5_use_enterprise_principal
(boolean)</p>

<p style="margin-left:17%;">Specifies if the user principal
should be treated as enterprise principal. See section 5 of
RFC 6806 for more details about enterprise principals.</p>

<p style="margin-left:17%; margin-top: 1em">Default:
true</p>

<p style="margin-left:17%; margin-top: 1em">Note that this
default differs from the traditional Kerberos provider back
end.</p>


<p style="margin-left:11%; margin-top: 1em">krb5_confd_path
(string)</p>

<p style="margin-left:17%;">Absolute path of a directory
where SSSD should place Kerberos configuration snippets.</p>

<p style="margin-left:17%; margin-top: 1em">To disable the
creation of the configuration snippets set the parameter to
'none'.</p>

<p style="margin-left:17%; margin-top: 1em">Default: not
set (krb5.include.d subdirectory of SSSD's pubconf
directory)</p>

<h2>FAILOVER
<a name="FAILOVER"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The failover
feature allows back ends to automatically switch to a
different server if the current server fails.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Failover
Syntax</b> <br>
The list of servers is given as a comma&minus;separated
list; any number of spaces is allowed around the comma. The
servers are listed in order of preference. The list can
contain any number of servers.</p>

<p style="margin-left:11%; margin-top: 1em">For each
failover&minus;enabled config option, two variants exist:
<i>primary</i> and <i>backup</i>. The idea is that servers
in the primary list are preferred and backup servers are
only searched if no primary servers can be reached. If a
backup server is selected, a timeout of 31 seconds is set.
After this timeout SSSD will periodically try to reconnect
to one of the primary servers. If it succeeds, it will
replace the current active (backup) server.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The Failover
Mechanism</b> <br>
The failover mechanism distinguishes between a machine and a
service. The back end first tries to resolve the hostname of
a given machine; if this resolution attempt fails, the
machine is considered offline. No further attempts are made
to connect to this machine for any other service. If the
resolution attempt succeeds, the back end tries to connect
to a service on this machine. If the service connection
attempt fails, then only this particular service is
considered offline and the back end automatically switches
over to the next service. The machine is still considered
online and might still be tried for another service.</p>

<p style="margin-left:11%; margin-top: 1em">Further
connection attempts are made to machines or services marked
as offline after a specified period of time; this is
currently hard coded to 30 seconds.</p>

<p style="margin-left:11%; margin-top: 1em">If there are no
more machines to try, the back end as a whole switches to
offline mode, and then attempts to reconnect every 30
seconds.</p>

<h2>SERVICE DISCOVERY
<a name="SERVICE DISCOVERY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The service
discovery feature allows back ends to automatically find the
appropriate servers to connect to using a special DNS query.
This feature is not supported for backup servers.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
If no servers are specified, the back end automatically uses
service discovery to try to find a server. Optionally, the
user may choose to use both fixed server addresses and
service discovery by inserting a special keyword,
&ldquo;_srv_&rdquo;, in the list of servers. The order of
preference is maintained. This feature is useful if, for
example, the user prefers to use service discovery whenever
possible, and fall back to a specific server when no servers
can be discovered using DNS.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The domain
name</b> <br>
Please refer to the &ldquo;dns_discovery_domain&rdquo;
parameter in the <b>sssd.conf</b>(5) manual page for more
details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
protocol</b> <br>
The queries usually specify _tcp as the protocol. Exceptions
are documented in respective option description.</p>

<p style="margin-left:11%; margin-top: 1em"><b>See Also</b>
<br>
For more information on the service discovery mechanism,
refer to RFC 2782.</p>

<h2>ID MAPPING
<a name="ID MAPPING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
ID&minus;mapping feature allows SSSD to act as a client of
Active Directory without requiring administrators to extend
user attributes to support POSIX attributes for user and
group identifiers.</p>

<p style="margin-left:11%; margin-top: 1em">NOTE: When
ID&minus;mapping is enabled, the uidNumber and gidNumber
attributes are ignored. This is to avoid the possibility of
conflicts between automatically&minus;assigned and
manually&minus;assigned values. If you need to use
manually&minus;assigned values, ALL values must be
manually&minus;assigned.</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that changing the ID mapping related configuration options
will cause user and group IDs to change. At the moment, SSSD
does not support changing IDs, so the SSSD database must be
removed. Because cached passwords are also stored in the
database, removing the database should only be performed
while the authentication servers are reachable, otherwise
users might get locked out. In order to cache the password,
an authentication must be performed. It is not sufficient to
use <b>sss_cache</b>(8) to remove the database, rather the
process consists of:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Making
sure the remote servers are reachable</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Stopping
the SSSD service</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Removing
the database</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Starting
the SSSD service</p>

<p style="margin-left:11%; margin-top: 1em">Moreover, as
the change of IDs might necessitate the adjustment of other
system properties such as file and directory ownership, it's
advisable to plan ahead and test the ID mapping
configuration thoroughly.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Mapping
Algorithm</b> <br>
Active Directory provides an objectSID for every user and
group object in the directory. This objectSID can be broken
up into components that represent the Active Directory
domain identity and the relative identifier (RID) of the
user or group object.</p>

<p style="margin-left:11%; margin-top: 1em">The SSSD
ID&minus;mapping algorithm takes a range of available UIDs
and divides it into equally&minus;sized component sections
&minus; called &quot;slices&quot;&minus;. Each slice
represents the space available to an Active Directory
domain.</p>

<p style="margin-left:11%; margin-top: 1em">When a user or
group entry for a particular domain is encountered for the
first time, the SSSD allocates one of the available slices
for that domain. In order to make this
slice&minus;assignment repeatable on different client
machines, we select the slice based on the following
algorithm:</p>

<p style="margin-left:11%; margin-top: 1em">The SID string
is passed through the murmurhash3 algorithm to convert it to
a 32&minus;bit hashed value. We then take the modulus of
this value with the total number of available slices to pick
the slice.</p>

<p style="margin-left:11%; margin-top: 1em">NOTE: It is
possible to encounter collisions in the hash and subsequent
modulus. In these situations, we will select the next
available slice, but it may not be possible to reproduce the
same exact set of slices on other machines (since the order
that they are encountered will determine their slice). In
this situation, it is recommended to either switch to using
explicit POSIX attributes in Active Directory (disabling
ID&minus;mapping) or configure a default domain to guarantee
that at least one is always consistent. See
&ldquo;Configuration&rdquo; for details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
Minimum configuration (in the
&ldquo;[domain/DOMAINNAME]&rdquo; section):</p>


<p style="margin-left:17%; margin-top: 1em">ldap_id_mapping
= True <br>
ldap_schema = ad</p>

<p style="margin-left:11%; margin-top: 1em">The default
configuration results in configuring 10,000 slices, each
capable of holding up to 200,000 IDs, starting from 10,001
and going up to 2,000,100,000. This should be sufficient for
most deployments.</p>


<p style="margin-left:11%; margin-top: 1em"><b><big>Advanced
Configuration</big></b></p>

<p style="margin-left:17%;">ldap_idmap_range_min
(integer)</p>

<p style="margin-left:23%;">Specifies the lower bound of
the range of POSIX IDs to use for mapping Active Directory
user and group SIDs.</p>

<p style="margin-left:23%; margin-top: 1em">NOTE: This
option is different from &ldquo;min_id&rdquo; in that
&ldquo;min_id&rdquo; acts to filter the output of requests
to this domain, whereas this option controls the range of ID
assignment. This is a subtle distinction, but the good
general advice would be to have &ldquo;min_id&rdquo; be
less&minus;than or equal to
&ldquo;ldap_idmap_range_min&rdquo;</p>

<p style="margin-left:23%; margin-top: 1em">Default:
200000</p>


<p style="margin-left:17%; margin-top: 1em">ldap_idmap_range_max
(integer)</p>

<p style="margin-left:23%;">Specifies the upper bound of
the range of POSIX IDs to use for mapping Active Directory
user and group SIDs.</p>

<p style="margin-left:23%; margin-top: 1em">NOTE: This
option is different from &ldquo;max_id&rdquo; in that
&ldquo;max_id&rdquo; acts to filter the output of requests
to this domain, whereas this option controls the range of ID
assignment. This is a subtle distinction, but the good
general advice would be to have &ldquo;max_id&rdquo; be
greater&minus;than or equal to
&ldquo;ldap_idmap_range_max&rdquo;</p>

<p style="margin-left:23%; margin-top: 1em">Default:
2000200000</p>


<p style="margin-left:17%; margin-top: 1em">ldap_idmap_range_size
(integer)</p>

<p style="margin-left:23%;">Specifies the number of IDs
available for each slice. If the range size does not divide
evenly into the min and max values, it will create as many
complete slices as it can.</p>

<p style="margin-left:23%; margin-top: 1em">NOTE: The value
of this option must be at least as large as the highest user
RID planned for use on the Active Directory server. User
lookups and login will fail for any user whose RID is
greater than this value.</p>

<p style="margin-left:23%; margin-top: 1em">For example, if
your most recently&minus;added Active Directory user has
objectSid=S&minus;1&minus;5&minus;21&minus;2153326666&minus;2176343378&minus;3404031434&minus;1107,
&ldquo;ldap_idmap_range_size&rdquo; must be at least
1107.</p>

<p style="margin-left:23%; margin-top: 1em">It is important
to plan ahead for future expansion, as changing this value
will result in changing all of the ID mappings on the
system, leading to users with different local IDs than they
previously had.</p>

<p style="margin-left:23%; margin-top: 1em">Default:
200000</p>


<p style="margin-left:17%; margin-top: 1em">ldap_idmap_default_domain_sid
(string)</p>

<p style="margin-left:23%;">Specify the domain SID of the
default domain. This will guarantee that this domain will
always be assigned to slice zero in the ID map, bypassing
the murmurhash algorithm described above.</p>

<p style="margin-left:23%; margin-top: 1em">Default: not
set</p>


<p style="margin-left:17%; margin-top: 1em">ldap_idmap_default_domain
(string)</p>

<p style="margin-left:23%;">Specify the name of the default
domain.</p>

<p style="margin-left:23%; margin-top: 1em">Default: not
set</p>


<p style="margin-left:17%; margin-top: 1em">ldap_idmap_autorid_compat
(boolean)</p>

<p style="margin-left:23%;">Changes the behavior of the
ID&minus;mapping algorithm to behave more similarly to
winbind's &ldquo;idmap_autorid&rdquo; algorithm.</p>

<p style="margin-left:23%; margin-top: 1em">When this
option is configured, domains will be allocated starting
with slice zero and increasing monatomically with each
additional domain.</p>

<p style="margin-left:23%; margin-top: 1em">NOTE: This
algorithm is non&minus;deterministic (it depends on the
order that users and groups are requested). If this mode is
required for compatibility with machines running winbind, it
is recommended to also use the
&ldquo;ldap_idmap_default_domain_sid&rdquo; option to
guarantee that at least one domain is consistently allocated
to slice zero.</p>

<p style="margin-left:23%; margin-top: 1em">Default:
False</p>


<p style="margin-left:11%; margin-top: 1em"><b>Well&minus;Known
SIDs</b> <br>
SSSD supports to look up the names of Well&minus;Known SIDs,
i.e. SIDs with a special hardcoded meaning. Since the
generic users and groups related to those Well&minus;Known
SIDs have no equivalent in a Linux/UNIX environment no POSIX
IDs are available for those objects.</p>

<p style="margin-left:11%; margin-top: 1em">The SID name
space is organized in authorities which can be seen as
different domains. The authorities for the Well&minus;Known
SIDs are</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Null
Authority</p>

<p style="margin-left:17%; margin-top: 1em">&bull; World
Authority</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Local
Authority</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Creator
Authority</p>

<p style="margin-left:17%; margin-top: 1em">&bull; NT
Authority</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Built&minus;in</p>

<p style="margin-left:11%; margin-top: 1em">The capitalized
version of these names are used as domain names when
returning the fully qualified name of a Well&minus;Known
SID.</p>

<p style="margin-left:11%; margin-top: 1em">Since some
utilities allow to modify SID based access control
information with the help of a name instead of using the SID
directly SSSD supports to look up the SID by the name as
well. To avoid collisions only the fully qualified names can
be used to look up Well&minus;Known SIDs. As a result the
domain names &ldquo;NULL AUTHORITY&rdquo;, &ldquo;WORLD
AUTHORITY&rdquo;, &ldquo; LOCAL AUTHORITY&rdquo;,
&ldquo;CREATOR AUTHORITY&rdquo;, &ldquo;NT AUTHORITY&rdquo;
and &ldquo;BUILTIN&rdquo; should not be used as domain names
in sssd.conf.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example assumes that SSSD is correctly configured and
example.com is one of the domains in the <i>[sssd]</i>
section. This example shows only the AD
provider&minus;specific options.</p>


<p style="margin-left:17%; margin-top: 1em">[domain/EXAMPLE]
<br>
id_provider = ad <br>
auth_provider = ad <br>
access_provider = ad <br>
chpass_provider = ad</p>

<p style="margin-left:17%; margin-top: 1em">ad_server =
dc1.example.com <br>
ad_hostname = client.example.com <br>
ad_domain = example.com</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The AD access
control provider checks if the account is expired. It has
the same effect as the following configuration of the LDAP
provider:</p>


<p style="margin-left:17%; margin-top: 1em">access_provider
= ldap <br>
ldap_access_order = expire <br>
ldap_account_expire_policy = ad</p>

<p style="margin-left:11%; margin-top: 1em">However, unless
the &ldquo;ad&rdquo; access control provider is explicitly
configured, the default access provider is
&ldquo;permit&rdquo;. Please note that if you configure an
access provider other than &ldquo;ad&rdquo;, you need to set
all the connection parameters (such as LDAP URIs and
encryption details) manually.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sssd</b>(8),
<b>sssd.conf</b>(5), <b>sssd-ldap</b>(5),
<b>sssd-krb5</b>(5), <b>sssd-simple</b>(5),
<b>sssd-ipa</b>(5), <b>sssd-ad</b>(5),
<b>sssd-sudo</b>(5),<b>sss_cache</b>(8),
<b>sss_debuglevel</b>(8), <b>sss_groupadd</b>(8),
<b>sss_groupdel</b>(8), <b>sss_groupshow</b>(8),
<b>sss_groupmod</b>(8), <b>sss_useradd</b>(8),
<b>sss_userdel</b>(8), <b>sss_usermod</b>(8),
<b>sss_obfuscate</b>(8), <b>sss_seed</b>(8),
<b>sssd_krb5_locator_plugin</b>(8),
<b>sss_ssh_authorizedkeys</b>(8),
<b>sss_ssh_knownhostsproxy</b>(8),<b>sssd-ifp</b>(5),<b>pam_sss</b>(8).
<b>sss_rpcidmapd</b>(5)</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>The SSSD
upstream &minus; http://fedorahosted.org/sssd</b></p>
<hr>
</body>
</html>
