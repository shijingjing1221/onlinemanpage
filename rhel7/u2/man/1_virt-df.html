<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:37:15 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>virt-df</title>

</head>
<body>

<h1 align="center">virt-df</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#STATVFS NUMBERS">STATVFS NUMBERS</a><br>
<a href="#NOTE ABOUT CSV FORMAT">NOTE ABOUT CSV FORMAT</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virt&minus;df
&minus; Display free space on virtual filesystems</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All guests:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;df [&minus;&minus;options]</pre>


<p style="margin-left:11%; margin-top: 1em">Single
guest:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;df [&minus;&minus;options] &minus;d domname
 virt&minus;df [&minus;&minus;options] &minus;a disk.img [&minus;a disk.img ...]</pre>


<p style="margin-left:11%; margin-top: 1em">Old style:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;df [&minus;&minus;options] domname
 virt&minus;df [&minus;&minus;options] disk.img [disk.img ...]</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><tt>&quot;virt&minus;df&quot;</tt>
is a command line tool to display free space on virtual
machine filesystems. Unlike other tools, it doesn&rsquo;t
just display the size of disk allocated to a virtual
machine, but can look inside disk images to see how much
space is really being used.</p>

<p style="margin-left:11%; margin-top: 1em">If used without
any <i>&minus;a</i> or <i>&minus;d</i> arguments,
<tt>&quot;virt&minus;df&quot;</tt> checks with libvirt to
get a list of all active and inactive guests, and performs a
<tt>&quot;df&quot;</tt>&minus;type operation on each one in
turn, printing out the results.</p>

<p style="margin-left:11%; margin-top: 1em">If any
<i>&minus;a</i> or <i>&minus;d</i> arguments are specified,
<tt>&quot;virt&minus;df&quot;</tt> performs a
<tt>&quot;df&quot;</tt>&minus;type operation on either the
single named libvirt domain, or on the disk image(s) listed
on the command line (which must all belong to a single
<small>VM</small> ). <b>In this mode (with arguments),
&quot;virt&minus;df&quot; will only work for a single
guest</b>. If you want to run on multiple guests, then you
have to invoke <tt>&quot;virt&minus;df&quot;</tt> multiple
times.</p>

<p style="margin-left:11%; margin-top: 1em">Use the
<i>&minus;&minus;csv</i> option to get a format which can be
easily parsed by other programs. Other options are similar
to the standard <i>df</i>(1) command.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Show disk usage
for a single libvirt guest called
<tt>&quot;F14x64&quot;</tt>. Make the output
human-readable:</p>

<pre style="margin-left:11%; margin-top: 1em"> # virt&minus;df &minus;d F14x64 &minus;h
 Filesystem                       Size     Used  Available  Use%
 F14x64:/dev/sda1                 484M      66M       393M   14%
 F14x64:/dev/vg_f13x64/lv_root    7.4G     3.4G       4.0G   46%</pre>


<p style="margin-left:11%; margin-top: 1em">Show disk usage
for a disk image file called
<tt>&quot;test.img&quot;</tt>:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ virt&minus;df &minus;a test1.img
 Filesystem                  1K&minus;blocks     Used  Available  Use%
 test1.img:/dev/sda1             99099     1551      92432    2%</pre>


<p style="margin-left:11%; margin-top: 1em">If a single
guest has multiple disks, use the <i>&minus;a</i> option
repeatedly. A plus sign (<tt>&quot;+&quot;</tt>) is
displayed for each additional disk. <b>Note: Do not do this
with unrelated guest disks.</b></p>

<pre style="margin-left:11%; margin-top: 1em"> $ virt&minus;df &minus;a Win7x32TwoDisks&minus;a &minus;a Win7x32TwoDisks&minus;b
 Filesystem                   1K&minus;blocks    Used  Available  Use%
 Win7x32TwoDisks&minus;a+:/dev/sda1    102396   24712      77684   25%
 Win7x32TwoDisks&minus;a+:/dev/sda2  12478460 7403416    5075044   60%
 Win7x32TwoDisks&minus;a+:/dev/sdb1    521212   55728     465484   11%</pre>


<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Display brief help.</p>

<p style="margin-left:11%;"><b>&minus;a</b> file <b><br>
&minus;&minus;add</b> file</p>

<p style="margin-left:17%;">Add <i>file</i> which should be
a disk image from a virtual machine. If the virtual machine
has multiple block devices, you must supply all of them with
separate <i>&minus;a</i> options.</p>

<p style="margin-left:17%; margin-top: 1em">The format of
the disk image is auto-detected. To override this and force
a particular format use the <i>&minus;&minus;format=..</i>
option.</p>

<p style="margin-left:11%;"><b>&minus;a <small>URI</small>
<br>
&minus;&minus;add <small>URI</small></b></p>

<p style="margin-left:17%;">Add a remote disk. See &quot;
<small>ADDING REMOTE STORAGE&quot;</small> in
<i>guestfish</i>(1).</p>

<p style="margin-left:11%;"><b>&minus;c</b>
<small>URI</small> <b><br>
&minus;&minus;connect</b> <small>URI</small></p>

<p style="margin-left:17%;">If using libvirt, connect to
the given <i><small>URI</small></i> . If omitted, then we
connect to the default libvirt hypervisor.</p>

<p style="margin-left:17%; margin-top: 1em">If you specify
guest block devices directly (<i>&minus;a</i>), then libvirt
is not used at all.</p>

<p style="margin-left:11%;"><b>&minus;&minus;csv</b></p>

<p style="margin-left:17%;">Write out the results in
<small>CSV</small> format (comma-separated values). This
format can be imported easily into databases and
spreadsheets, but read &quot; <small>NOTE ABOUT CSV
FORMAT&quot;</small> below.</p>

<p style="margin-left:11%;"><b>&minus;d</b> guest <b><br>
&minus;&minus;domain</b> guest</p>

<p style="margin-left:17%;">Add all the disks from the
named libvirt guest. Domain UUIDs can be used instead of
names.</p>


<p style="margin-left:11%;"><b>&minus;&minus;format=raw|qcow2|..
<br>
&minus;&minus;format</b></p>

<p style="margin-left:17%;">The default for the
<i>&minus;a</i> option is to auto-detect the format of the
disk image. Using this forces the disk format for
<i>&minus;a</i> options which follow on the command line.
Using <i>&minus;&minus;format</i> with no argument switches
back to auto-detection for subsequent <i>&minus;a</i>
options.</p>

<p style="margin-left:17%; margin-top: 1em">For
example:</p>

<pre style="margin-left:17%; margin-top: 1em"> virt&minus;df &minus;&minus;format=raw &minus;a disk.img</pre>


<p style="margin-left:17%; margin-top: 1em">forces raw
format (no auto-detection) for
<tt>&quot;disk.img&quot;</tt>.</p>

<pre style="margin-left:17%; margin-top: 1em"> virt&minus;df &minus;&minus;format=raw &minus;a disk.img &minus;&minus;format &minus;a another.img</pre>


<p style="margin-left:17%; margin-top: 1em">forces raw
format (no auto-detection) for <tt>&quot;disk.img&quot;</tt>
and reverts to auto-detection for
<tt>&quot;another.img&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">If you have
untrusted raw-format guest disk images, you should use this
option to specify the disk format. This avoids a possible
security problem with malicious guests (
<small>CVE&minus;2010&minus;3851</small> ).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;human&minus;readable</b></p>

<p style="margin-left:17%;">Print sizes in human-readable
format.</p>

<p style="margin-left:17%; margin-top: 1em">You are not
allowed to use <i>&minus;h</i> and <i>&minus;&minus;csv</i>
at the same time.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;inodes</b></p>

<p style="margin-left:17%;">Print inodes instead of
blocks.</p>


<p style="margin-left:11%;"><b>&minus;&minus;one&minus;per&minus;guest</b></p>

<p style="margin-left:17%;">Since libguestfs 1.22, this is
the default. This option does nothing and is left here for
backwards compatibility with older scripts.</p>

<p style="margin-left:11%;"><b>&minus;P</b> nr_threads</p>

<p style="margin-left:17%;">Since libguestfs 1.22, virt-df
is multithreaded and examines guests in parallel. By default
the number of threads to use is chosen based on the amount
of free memory available at the time that virt-df is
started. You can force virt-df to use at most
<tt>&quot;nr_threads&quot;</tt> by using the <i>&minus;P</i>
option.</p>

<p style="margin-left:17%; margin-top: 1em">Note that
<i>&minus;P 0</i> means to autodetect, and <i>&minus;P 1</i>
means to use a single thread.</p>

<p style="margin-left:11%;"><b>&minus;&minus;uuid</b></p>

<p style="margin-left:17%;">Print UUIDs instead of names.
This is useful for following a guest even when the guest is
migrated or renamed, or when two guests happen to have the
same name.</p>

<p style="margin-left:17%; margin-top: 1em">Note that only
domains that we fetch from libvirt come with UUIDs. For disk
images, we still print the disk image name even when this
option is specified.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;verbose</b></p>

<p style="margin-left:17%;">Enable verbose messages for
debugging.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="86%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:17%;">Display version number and
exit.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="3%"></td>
<td width="60%">


<p>Enable tracing of libguestfs <small>API</small>
calls.</p> </td>
<td width="23%">
</td></tr>
</table>

<h2>STATVFS NUMBERS
<a name="STATVFS NUMBERS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><tt>&quot;virt&minus;df&quot;</tt>
(and <i>df</i>(1)) get information by issuing a
<i>statvfs</i>(3) system call. You can get the same
information directly, either from the host (using
libguestfs) or inside the guest: <br>
From the host</p>

<p style="margin-left:17%;">Run this command:</p>

<pre style="margin-left:17%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;d GuestName &minus;i statvfs /</pre>


<p style="margin-left:17%; margin-top: 1em">(change
<tt>&quot;/&quot;</tt> to see stats for other
filesystems).</p>

<p style="margin-left:11%;">From inside the guest</p>

<p style="margin-left:17%;">Run this command:</p>

<pre style="margin-left:17%; margin-top: 1em"> python &minus;c 'import os; s = os.statvfs (&quot;/&quot;); print s'</pre>


<p style="margin-left:17%; margin-top: 1em">(change
<tt>&quot;/&quot;</tt> to see stats for other
filesystems).</p>

<h2>NOTE ABOUT CSV FORMAT
<a name="NOTE ABOUT CSV FORMAT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Comma-separated
values ( <small>CSV</small> ) is a deceptive format. It
<i>seems</i> like it should be easy to parse, but it is
definitely not easy to parse.</p>

<p style="margin-left:11%; margin-top: 1em">Myth: Just
split fields at commas. Reality: This does <i>not</i> work
reliably. This example has two columns:</p>

<pre style="margin-left:11%; margin-top: 1em"> &quot;foo,bar&quot;,baz</pre>


<p style="margin-left:11%; margin-top: 1em">Myth: Read the
file one line at a time. Reality: This does <i>not</i> work
reliably. This example has one row:</p>

<pre style="margin-left:11%; margin-top: 1em"> &quot;foo
 bar&quot;,baz</pre>


<p style="margin-left:11%; margin-top: 1em">For shell
scripts, use <tt>&quot;csvtool&quot;</tt>
(http://merjis.com/developers/csv also packaged in major
Linux distributions).</p>

<p style="margin-left:11%; margin-top: 1em">For other
languages, use a <small>CSV</small> processing library (eg.
<tt>&quot;Text::CSV&quot;</tt> for Perl or Python&rsquo;s
built-in csv library).</p>

<p style="margin-left:11%; margin-top: 1em">Most
spreadsheets and databases can import <small>CSV</small>
directly.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program
returns 0 if successful, or non-zero if there was an
error.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>df</i>(1),
<i>guestfs</i>(3), <i>guestfish</i>(1),
<i>virt&minus;filesystems</i>(1),
http://libguestfs.org/.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Richard W.M.
Jones http://people.redhat.com/~rjones/</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2009&minus;2014 Red Hat Inc.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program is
free software; you can redistribute it and/or modify it
under the terms of the <small>GNU</small> General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
distributed in the hope that it will be useful, but
<small>WITHOUT ANY WARRANTY</small> ; without even the
implied warranty of <small>MERCHANTABILITY</small> or
<small>FITNESS FOR A PARTICULAR PURPOSE.</small> See the
<small>GNU</small> General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the <small>GNU</small> General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, <small>MA 02110&minus;1301 USA.</small></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">When reporting
a bug, please supply:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The version of libguestfs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Describe the bug accurately and give a way to reproduce
it.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Run <i>libguestfs&minus;test&minus;tool</i>(1) and paste
the <b>complete, unedited</b> output into the bug
report.</p> </td></tr>
 </table>
<hr>
</body>
</html>
