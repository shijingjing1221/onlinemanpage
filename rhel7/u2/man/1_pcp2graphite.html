<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:05:34 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PCP2GRAPHITE</title>

</head>
<body>

<h1 align="center">PCP2GRAPHITE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcp2graphite</b>
&minus; pcp-to-graphite data pump</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcp2graphite</b>
[<b>&minus;h</b> <i>HOST</i>] [<b>&minus;a</b>
<i>ARCHIVE</i>] [<b>&minus;O</b> <i>TIMEORIGIN</i>]
[<b>&minus;T</b> <i>TIMEFINISH</i>] [<b>&minus;s</b>
<i>SAMPLES</i>] [<b>&minus;t</b> <i>DELTA</i>]
[<b>&minus;g</b> <i>GRAPHITEHOST</i>] [<b>&minus;p</b>
<i>PICKLEPORT</i>] [<b>&minus;P</b> <i>TEXTPORT</i>]
[<b>&minus;u</b> <i>UNITS</i>] [<b>&minus;m</b>
<i>PREFIX</i>] <i>metricname</i> ...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The program
<i>pcp2graphite</i> is PCP monitor / data exporter program
based on the Python PMAPI bindings. It relays whole
hierarchies of the PMNS to a designated Graphite
(Carbon/Whisper) database by periodically polling, then
copying/converting relevant numerical metrics across the
Graphite &quot;text&quot; or &quot;pickled&quot; TCP
protocols. Metric values are optionally scaled to a given
unit/scale, but are not rate-converted. Metric names may be
prefixed and are somewhat canonicalized to fit the Graphite
namespace rules. One-shot conversion runs such as from
archives are not currently supported.</p>

<p style="margin-left:11%; margin-top: 1em">The data
transfer will continue on a best-effort basis until the
program is interrupted. Temporary errors are ignored.
Multiple copies of this program may be run in parallel, to
populate different Graphite databases or subtrees, with
different scaling or sampling intervals.</p>

<p style="margin-left:11%; margin-top: 1em">Example of a
systemd service file that can be used to have systemd
managing a single instance of pcp2graphite:</p>

<p style="margin-left:17%; margin-top: 1em">[Unit] <br>
Description=Performance Co-Pilot data pump to Graphite <br>
Documentation=man:pcp2graphite(8) <br>
After=pmcd.service</p>

<p style="margin-left:17%; margin-top: 1em">[Service] <br>
ExecStart=/opt/pcp/pcp2graphite.py &lt;OPTIONS&gt;</p>

<p style="margin-left:17%; margin-top: 1em">[Install] <br>
WantedBy=multi&minus;user.target</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;h
HOST</b></p>

<p style="margin-left:22%;">Extract metrics from given PMCD
server. Default <i>local:</i>.</p>

<p style="margin-left:11%;"><b>&minus;a ARCHIVE</b></p>

<p style="margin-left:22%;">Extract metrics from given
archive.</p>

<p style="margin-left:11%;"><b>&minus;t DELTA</b></p>

<p style="margin-left:22%;">Specify the polling interval in
seconds. If live, polling is aligned to natural multiples of
this interval. Default <i>60</i></p>

<p style="margin-left:11%;"><b>&minus;O TIMEORIGIN</b></p>

<p style="margin-left:22%;">Set the time origin for archive
scanning. The default is the start of the archive.</p>

<p style="margin-left:11%;"><b>&minus;T TIMEFINISH</b></p>

<p style="margin-left:22%;">Set the time finish for archive
scanning. The default is the end of the archive.</p>

<p style="margin-left:11%;"><b>&minus;s SAMPLES</b></p>

<p style="margin-left:22%;">Set the maximum number of
samples to relay. The default is unlimited.</p>

<p style="margin-left:11%;"><b>&minus;g
GRAPHITEHOST</b></p>

<p style="margin-left:22%;">Specify the graphite
carbon-cache server where the relayed data is to be relayed.
Default <i>localhost</i>.</p>

<p style="margin-left:11%;"><b>&minus;p PICKLEPORT</b></p>

<p style="margin-left:22%;">Select the more efficient
&quot;pickled&quot; encoding for carbon-cache communication,
and use the given TCP port. This is default, using port
<i>2004</i>.</p>

<p style="margin-left:11%;"><b>&minus;P TEXTPORT</b></p>

<p style="margin-left:22%;">Alternately, select the less
efficient &quot;text&quot; encoding for carbon-cache
communication, and use the given TCP port. This protocol is
not default, because it requires a separate TCP connection
for each metric. The typical port is <i>2003</i>.</p>

<p style="margin-left:11%;"><b>&minus;u UNITS</b></p>

<p style="margin-left:22%;">Rescale the metrics to the
given UNITS string, as parsed by the <i>pmParseUnitsStr</i>
function. This must be dimensionally consistent with the
underlying PCP metric. Default is no scaling.</p>

<p style="margin-left:11%;"><b>&minus;m PREFIX</b></p>

<p style="margin-left:22%;">Use the given string as a
prefix for all PMNS metrics relayed to Graphite. Default is
<i>pcp.</i> (note the period at the end).</p>

<p style="margin-left:11%;"><b>metricname ...</b></p>

<p style="margin-left:22%;">Relay all numeric metrics
nested at or below the given name in the PMNS. This option
may be repeated. This is a compulsory option, having no
default.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PCPIntro</b>(1),
<b>python</b>(1), <b>pmcd</b>(1), <b>pmParseUnitsStr</b>(3),
<b>http://graphite.wikidot.com/</b>, <b>pmval</b>(1),
<b>PMAPI</b>(3), and <b>pcp.conf</b>(5).</p>
<hr>
</body>
</html>
