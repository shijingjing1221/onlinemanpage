<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:15:29 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>RESTORE</title>

</head>
<body>

<h1 align="center">RESTORE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#AVAILABILITY">AVAILABILITY</a><br>
<a href="#HISTORY">HISTORY</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">restore &minus;
restore files or file systems from backups made with
dump</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;C</b> [<b>&minus;cdHklMvVy</b>] [<b>&minus;b</b>
<i>blocksize</i>] [<b>&minus;D</b> <i>filesystem</i>]
[<b>&minus;f</b> <i>file</i>] [<b>&minus;F</b>
<i>script</i>] [<b>&minus;L</b> <i>limit</i>]
[<b>&minus;s</b> <i>fileno</i>] [<b>&minus;T</b>
<i>directory</i>]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;i</b> [<b>&minus;acdhHklmMNouvVy</b>]
[<b>&minus;A</b> <i>file</i>] [<b>&minus;b</b>
<i>blocksize</i>] [<b>&minus;f</b> <i>file</i>]
[<b>&minus;F</b> <i>script</i>] [<b>&minus;Q</b>
<i>file</i>] [<b>&minus;s</b> <i>fileno</i>]
[<b>&minus;T</b> <i>directory</i>]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;P</b> <i>file</i> [<b>&minus;acdhHklmMNuvVy</b>]
[<b>&minus;b</b> <i>blocksize</i>] [<b>&minus;f</b>
<i>file</i>] [<b>&minus;F</b> <i>script</i>]
[<b>&minus;s</b> <i>fileno</i>] [<b>&minus;T</b>
<i>directory</i>] [<b>&minus;X</b> <i>filelist</i>] [
<i>file ...</i> ]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;R</b> [<b>&minus;cdHklMNuvVy</b>] [<b>&minus;b</b>
<i>blocksize</i>] [<b>&minus;f</b> <i>file</i>]
[<b>&minus;F</b> <i>script</i>] [<b>&minus;s</b>
<i>fileno</i>] [<b>&minus;T</b> <i>directory</i>]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;r</b> [<b>&minus;cdHklMNuvVy</b>] [<b>&minus;b</b>
<i>blocksize</i>] [<b>&minus;f</b> <i>file</i>]
[<b>&minus;F</b> <i>script</i>] [<b>&minus;s</b>
<i>fileno</i>] [<b>&minus;T</b> <i>directory</i>]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;t</b> [<b>&minus;cdhHklMNuvVy</b>] [<b>&minus;A</b>
<i>file</i>] [<b>&minus;b</b> <i>blocksize</i>]
[<b>&minus;f</b> <i>file</i>] [<b>&minus;F</b>
<i>script</i>] [<b>&minus;Q</b> <i>file</i>]
[<b>&minus;s</b> <i>fileno</i>] [<b>&minus;T</b>
<i>directory</i>] [<b>&minus;X</b> <i>filelist</i>] [
<i>file ...</i> ]</p>

<p style="margin-left:11%; margin-top: 1em"><b>restore
&minus;x</b> [<b>&minus;adchHklmMNouvVy</b>]
[<b>&minus;A</b> <i>file</i>] [<b>&minus;b</b>
<i>blocksize</i>] [<b>&minus;f</b> <i>file</i>]
[<b>&minus;F</b> <i>script</i>] [<b>&minus;Q</b>
<i>file</i>] [<b>&minus;s</b> <i>fileno</i>]
[<b>&minus;T</b> <i>directory</i>] [<b>&minus;X</b>
<i>filelist</i>] [ <i>file ...</i> ]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>restore</b> command performs the inverse function of
<b>dump</b>(8). A full backup of a file system may be
restored and subsequent incremental backups layered on top
of it. Single files and directory subtrees may be restored
from full or partial backups. <b>Restore</b> works across a
network; to do this see the <b>&minus;f</b> flag described
below. Other arguments to the command are file or directory
names specifying the files that are to be restored. Unless
the <b>&minus;h</b> flag is specified (see below), the
appearance of a directory name refers to the files and
(recursively) subdirectories of that directory.</p>

<p style="margin-left:11%; margin-top: 1em">Exactly one of
the following flags is required:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This mode allows comparison of files from a dump.
<b>Restore</b> reads the backup and compares its contents
with files present on the disk. It first changes its working
directory to the root of the filesystem that was dumped and
compares the tape with the files in its new current
directory. See also the <b>&minus;L</b> flag described
below.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This mode allows interactive restoration of files from a
dump. After reading in the directory information from the
dump, <b>restore</b> provides a shell like interface that
allows the user to move around the directory tree selecting
files to be extracted. The available commands are given
below; for those commands that require an argument, the
default is the current directory.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>add</b> [<i>arg</i>]</p>

<p style="margin-left:32%;">The current directory or
specified argument is added to the list of files to be
extracted. If a directory is specified, then it and all its
descendants are added to the extraction list (unless the
<b>&minus;h</b> flag is specified on the command line).
Files that are on the extraction list are prepended with a
&ldquo;*&rdquo; when they are listed by <b>ls</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>cd</b> <i>arg</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>Change the current working directory to the specified
argument.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>delete</b> [<i>arg</i>]</p>

<p style="margin-left:32%;">The current directory or
specified argument is deleted from the list of files to be
extracted. If a directory is specified, then it and all its
descendants are deleted from the extraction list (unless the
<b>&minus;h</b> flag is specified on the command line). The
most expedient way to extract most of the files from a
directory is to add the directory to the extraction list and
then delete those files that are not needed.</p>

<p style="margin-left:22%;"><b>extract</b></p>

<p style="margin-left:32%;">All files on the extraction
list are extracted from the dump. <b>Restore</b> will ask
which volume the user wishes to mount. The fastest way to
extract a few files is to start with the last volume and
work towards the first volume.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>help</b></p></td>
<td width="4%"></td>
<td width="63%">


<p>List a summary of the available commands.</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>ls</b> [<i>arg</i>]</p>

<p style="margin-left:32%;">List the current or specified
directory. Entries that are directories are appended with a
&ldquo;/&rdquo;. Entries that have been marked for
extraction are prepended with a &ldquo;*&rdquo;. If the
verbose flag is set, the inode number of each entry is also
listed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>pwd</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the full pathname of the current working
directory.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>quit</b></p></td>
<td width="4%"></td>
<td width="68%">


<p><b>Restore</b> immediately exits, even if the extraction
list is not empty.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>setmodes</b></p>

<p style="margin-left:32%;">All directories that have been
added to the extraction list have their owner, modes, and
times set; nothing is extracted from the dump. This is
useful for cleaning up after a <b>restore</b> has been
prematurely aborted.</p>

<p style="margin-left:22%;"><b>verbose</b></p>

<p style="margin-left:32%;">The sense of the
<b>&minus;v</b> flag is toggled. When set, the verbose flag
causes the <b>ls</b> command to list the inode numbers of
all entries. It also causes <b>restore</b> to print out
information about each file as it is extracted.</p>

<p style="margin-left:11%;"><b>&minus;P</b> <i>file</i></p>

<p style="margin-left:22%;"><b>Restore</b> creates a new
Quick File Access file <i>file</i> from an existing dump
file without restoring its contents.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p><b>Restore</b> requests a particular tape of a
multi-volume set on which to restart a full restore (see the
<b>&minus;r</b> flag below). This is useful if the restore
has been interrupted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Restore (rebuild) a file system. The target file system
should be made pristine with <b>mke2fs</b>(8), mounted, and
the user <b>cd</b>&rsquo;d into the pristine file system
before starting the restoration of the initial level 0
backup. If the level 0 restores successfully, the
<b>&minus;r</b> flag may be used to restore any necessary
incremental backups on top of the level 0. The
<b>&minus;r</b> flag precludes an interactive file
extraction and can be detrimental to one&rsquo;s health (not
to mention the disk) if not used carefully. An example:</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>mke2fs
/dev/sda1 <br>
mount /dev/sda1 /mnt <br>
cd /mnt <br>
restore rf /dev/st0</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>restore</b> leaves a file <i>restoresymtable</i> in the
root directory to pass information between incremental
restore passes. This file should be removed when the last
incremental has been restored.</p>


<p style="margin-left:22%; margin-top: 1em"><b>Restore</b>,
in conjunction with <b>mke2fs</b>(8) and <b>dump</b>(8), may
be used to modify file system parameters such as size or
block size.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The names of the specified files are listed if they
occur on the backup. If no file argument is given, the root
directory is listed, which results in the entire content of
the backup being listed, unless the <b>&minus;h</b> flag has
been specified. Note that the <b>&minus;t</b> flag replaces
the function of the old <b>dumpdir</b>(8) program. See also
the <b>&minus;X</b> option below.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The named files are read from the given media. If a
named file matches a directory whose contents are on the
backup and the <b>&minus;h</b> flag is not specified, the
directory is recursively extracted. The owner, modification
time, and mode are restored (if possible). If no file
argument is given, the root directory is extracted, which
results in the entire content of the backup being extracted,
unless the <b>&minus;h</b> flag has been specified. See also
the <b>&minus;X</b> option below.</p></td></tr>
</table>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
additional options may be specified:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">In <b>&minus;i</b> or
<b>&minus;x</b> mode, <b>restore</b> does ask the user for
the volume number on which the files to be extracted are
supposed to be (in order to minimise the time by reading
only the interesting volumes). The <b>&minus;a</b> option
disables this behaviour and reads all the volumes starting
with 1. This option is useful when the operator does not
know on which volume the files to be extracted are and/or
when he prefers the longer unattended mode rather than the
shorter interactive mode.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;A</b>
<i>archive_file</i></p>

<p style="margin-left:22%;">Read the table of contents from
<i>archive_file</i> instead of the media. This option can be
used in combination with the <b>&minus;t</b>,
<b>&minus;i</b>, or <b>&minus;x</b> options, making it
possible to check whether files are on the media without
having to mount the media.</p>

<p style="margin-left:11%;"><b>&minus;b</b>
<i>blocksize</i></p>

<p style="margin-left:22%;">The number of kilobytes per
dump record. If the <b>&minus;b</b> option is not specified,
<b>restore</b> tries to determine the media block size
dynamically.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Normally, <b>restore</b> will try to determine
dynamically whether the dump was made from an old (pre-4.4)
or new format file system. The <b>&minus;c</b> flag disables
this check, and only allows reading a dump in the old
format.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;d</b> (debug) flag causes <b>restore</b>
to print debug information.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;D</b>
<i>filesystem</i></p>

<p style="margin-left:22%;">The <b>&minus;D</b> flag allows
the user to specify the filesystem name when using
<b>restore</b> with the <b>&minus;C</b> option to check the
backup.</p>

<p style="margin-left:11%;"><b>&minus;f</b> <i>file</i></p>

<p style="margin-left:22%;">Read the backup from
<i>file</i>; <i>file</i> may be a special device file like
<i>/dev/st0</i> (a tape drive), <i>/dev/sda1</i> (a disk
drive), an ordinary file, or <i>&minus;</i> (the standard
input). If the name of the file is of the form
<i>host:file</i> or <i>user@host:file</i>, <b>restore</b>
reads from the named file on the remote host using
<b>rmt</b>(8).</p>

<p style="margin-left:11%;"><b>&minus;F</b>
<i>script</i></p>

<p style="margin-left:22%;">Run script at the beginning of
each tape. The device name and the current volume number are
passed on the command line. The script must return 0 if
<b>restore</b> should continue without asking the user to
change the tape, 1 if <b>restore</b> should continue but ask
the user to change the tape. Any other exit code will cause
<b>restore</b> to abort. For security reasons,
<b>restore</b> reverts back to the real user ID and the real
group ID before running the script.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Extract the actual directory, rather than the files that
it references. This prevents hierarchical restoration of
complete subtrees from the dump.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;H</b>
<i>hash_size</i></p>

<p style="margin-left:22%;">Use a hashtable having the
specified number of entries for storing the directories
entries instead of a linked list. This hashtable will
considerably speed up inode lookups (visible especially in
interactive mode when adding/removing files from the restore
list), but at the price of much more memory usage. The
default value is 1, meaning no hashtable is used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;k</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Use Kerberos authentication when contacting the remote
tape server. (Only available if this options was enabled
when <b>restore</b> was compiled.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>When doing remote restores, assume the remote file is a
regular file (instead of a tape device). If you&rsquo;re
restoring a remote compressed file, you will need to specify
this option or <b>restore</b> will fail to access it
correctly.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;L</b>
<i>limit</i></p>

<p style="margin-left:22%;">The <b>&minus;L</b> flag allows
the user to specify a maximal number of miscompares when
using <b>restore</b> with the <b>&minus;C</b> option to
check the backup. If this limit is reached, <b>restore</b>
will abort with an error message. A value of 0 (the default
value) disables the check.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Extract by inode numbers rather than by file name. This
is useful if only a few files are being extracted, and one
wants to avoid regenerating the complete pathname to the
file.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Enables the multi-volume feature (for reading dumps made
using the <b>&minus;M</b> option of dump). The name
specified with <b>&minus;f</b> is treated as a prefix and
<b>restore</b> tries to read in sequence from
<i>&lt;prefix&gt;001, &lt;prefix&gt;002</i> etc.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;N</b> flag causes <b>restore</b> to
perform a full execution as requested by one of
<b>&minus;i</b>, <b>&minus;R</b>, <b>&minus;r</b>, <b>t</b>
or <b>x</b> command without actually writing any file on
disk.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;o</b> flag causes <b>restore</b> to
automatically restore the current directory permissions
without asking the operator whether to do so in one of
<b>&minus;i</b> or <b>&minus;x</b> modes.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;Q</b> <i>file</i></p>

<p style="margin-left:22%;">Use the file <i>file</i> in
order to read tape position as stored using the dump Quick
File Access mode, in one of <b>&minus;i</b>, <b>&minus;x</b>
or <b>&minus;t</b> mode.</p>

<p style="margin-left:22%; margin-top: 1em">It is
recommended to set up the st driver to return logical tape
positions rather than physical before calling
<b>dump/restore</b> with parameter <b>&minus;Q</b>. Since
not all tape devices support physical tape positions those
tape devices return an error during <b>dump/restore</b> when
the st driver is set to the default physical setting. Please
see the <b>st</b>(4) man page, option <b>MTSETDRVBUFFER</b>
, or the <b>mt(1)</b> man page, on how to set the driver to
return logical tape positions.</p>

<p style="margin-left:22%; margin-top: 1em">Before calling
<b>restore</b> with parameter <b>&minus;Q</b>, always make
sure the st driver is set to return the same type of tape
position used during the call to <b>dump</b>. Otherwise
<b>restore</b> may be confused.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be used when restoring from local or remote tapes (see
above) or from local or remote files.</p>

<p style="margin-left:11%;"><b>&minus;s</b>
<i>fileno</i></p>

<p style="margin-left:22%;">Read from the specified
<i>fileno</i> on a multi-file tape. File numbering starts at
1.</p>

<p style="margin-left:11%;"><b>&minus;T</b>
<i>directory</i></p>

<p style="margin-left:22%;">The <b>&minus;T</b> flag allows
the user to specify a directory to use for the storage of
temporary files. The default value is <i>/tmp</i>. This flag
is most useful when restoring files after having booted from
a floppy. There might be little or no space on the floppy
filesystem, but another source of space might exist.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>When creating certain types of files, <b>restore</b> may
generate a warning diagnostic if they already exist in the
target directory. To prevent this, the <b>&minus;u</b>
(unlink) flag causes <b>restore</b> to remove old entries
before attempting to create new ones.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Normally <b>restore</b> does its work silently. The
<b>&minus;v</b> (verbose) flag causes it to type the name of
each file it treats preceded by its file type.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Enables reading multi-volume non-tape mediums like
CDROMs.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;X</b>
<i>filelist</i></p>

<p style="margin-left:22%;">Read list of files to be listed
or extracted from the text file <i>filelist</i> in addition
to those specified on the command line. This can be used in
conjunction with the <b>&minus;t</b> or <b>&minus;x</b>
commands. The file <i>filelist</i> should contain file names
separated by newlines. <i>filelist</i> may be an ordinary
file or <i>-</i> (the standard input).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Do not ask the user whether to abort the restore in the
event of an error. Always try to skip over the bad block(s)
and continue.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">(The 4.3BSD
option syntax is implemented for backward compatibility but
is not documented here.)</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Complains if it
gets a read error. If <b>y</b> has been specified, or the
user responds <b>y</b>, <b>restore</b> will attempt to
continue the restore.</p>

<p style="margin-left:11%; margin-top: 1em">If a backup was
made using more than one tape volume, <b>restore</b> will
notify the user when it is time to mount the next volume. If
the <b>&minus;x</b> or <b>&minus;i</b> flag has been
specified, <b>restore</b> will also ask which volume the
user wishes to mount. The fastest way to extract a few files
is to start with the last volume, and work towards the first
volume.</p>

<p style="margin-left:11%; margin-top: 1em">There are
numerous consistency checks that can be listed by
<b>restore</b>. Most checks are self-explanatory or can
&ldquo;never happen&rdquo;. Common errors are given below:
<i><br>
Converting to new file system format</i></p>

<p style="margin-left:22%;">A dump tape created from the
old file system has been loaded. It is automatically
converted to the new file system format.</p>

<p style="margin-left:11%;"><i>&lt;filename&gt;: not found
on tape</i></p>

<p style="margin-left:22%;">The specified file name was
listed in the tape directory, but was not found on the tape.
This is caused by tape read errors while looking for the
file, and from using a dump tape created on an active file
system.</p>

<p style="margin-left:11%;"><i>expected next file
&lt;inumber&gt;, got &lt;inumber&gt;</i></p>

<p style="margin-left:22%;">A file that was not listed in
the directory showed up. This can occur when using a dump
created on an active file system.</p>

<p style="margin-left:11%;"><i>Incremental dump too
low</i></p>

<p style="margin-left:22%;">When doing an incremental
restore, a dump that was written before the previous
incremental dump, or that has too low an incremental level
has been loaded.</p>

<p style="margin-left:11%;"><i>Incremental dump too
high</i></p>

<p style="margin-left:22%;">When doing an incremental
restore, a dump that does not begin its coverage where the
previous incremental dump left off, or that has too high an
incremental level has been loaded.</p>

<p style="margin-left:11%;"><i>Tape read error while
restoring &lt;filename&gt; <br>
Tape read error while skipping over inode &lt;inumber&gt;
<br>
Tape read error while trying to resynchronize</i></p>

<p style="margin-left:22%;">A tape (or other media) read
error has occurred. If a file name is specified, its
contents are probably partially wrong. If an inode is being
skipped or the tape is trying to resynchronize, no extracted
files have been corrupted, though files may not be found on
the tape.</p>

<p style="margin-left:11%;"><i>resync restore, skipped
&lt;num&gt; blocks</i></p>

<p style="margin-left:22%;">After a dump read error,
<b>restore</b> may have to resynchronize itself. This
message lists the number of blocks that were skipped
over.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Restore</b>
exits with zero status on success. Tape errors are indicated
with an exit code of 1.</p>

<p style="margin-left:11%; margin-top: 1em">When doing a
comparison of files from a dump, an exit code of 2 indicates
that some files were modified or deleted since the dump was
made.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the
following environment variable exists it will be utilized by
<b>restore</b>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>TAPE</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If no <b>&minus;f</b> option was specified,
<b>restore</b> will use the device specified via <b>TAPE</b>
as the dump device. <b>TAPE</b> may be of the form
<i>tapename</i>, <i>host:tapename</i> or
<i>user@host:tapename</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>TMPDIR</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The directory given in <b>TMPDIR</b> will be used
instead of <i>/tmp</i> to store temporary files.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>RMT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The environment variable <b>RMT</b> will be used to
determine the pathname of the remote <b>rmt</b>(8)
program.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>RSH</b></p></td>
<td width="2%"></td>
<td width="78%">


<p><b>Restore</b> uses the contents of this variable to
determine the name of the remote shell command to use when
doing a network restore (rsh, ssh etc.). If this variable is
not set, <b>rcmd</b>(3) will be used, but only root will be
able to do a network restore.</p></td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>/dev/st0</i></p>

<p style="margin-left:22%;">the default tape drive</p>

<p style="margin-left:11%;"><i>/tmp/rstdir*</i></p>

<p style="margin-left:22%;">file containing directories on
the tape</p>

<p style="margin-left:11%;"><i>/tmp/rstmode*</i></p>

<p style="margin-left:22%;">owner, mode, and time stamps
for directories</p>

<p style="margin-left:11%;"><i>./restoresymtable</i></p>

<p style="margin-left:22%;">information passed between
incremental restores</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dump</b>(8),
<b>mount</b>(8), <b>mke2fs</b>(8), <b>rmt</b>(8)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Restore</b>
can get confused when doing incremental restores from dumps
that were made on active file systems.</p>

<p style="margin-left:11%; margin-top: 1em">A level 0 dump
must be done after a full restore. Because <b>restore</b>
runs in user code, it has no control over inode allocation;
thus a full dump must be done to get a new set of
directories reflecting the new inode numbering, even though
the content of the files is unchanged.</p>

<p style="margin-left:11%; margin-top: 1em">The temporary
files <i>/tmp/rstdir*</i> and <i>/tmp/rstmode*</i> are
generated with a unique name based on the date of the dump
and the process ID (see <b>mktemp</b>(3)<b>),</b> except
when <b>&minus;r</b> or <b>&minus;R</b> is used. Because
<b>&minus;R</b> allows you to restart a <b>&minus;r</b>
operation that may have been interrupted, the temporary
files should be the same across different processes. In all
other cases, the files are unique because it is possible to
have two different dumps started at the same time, and
separate operations shouldn&rsquo;t conflict with each
other.</p>

<p style="margin-left:11%; margin-top: 1em">To do a network
restore, you have to run <b>restore</b> as root or use a
remote shell replacement (see <b>RSH</b> variable). This is
due to the previous security history of <b>dump</b> and
<b>restore</b>. ( <b>restore</b> is written to be setuid
root, but we are not certain all bugs are gone from the code
- run setuid at your own risk.)</p>

<p style="margin-left:11%; margin-top: 1em">At the end of
restores in <b>&minus;i</b> or <b>&minus;x</b> modes (unless
<b>&minus;o</b> option is in use), <b>restore</b> will ask
the operator whether to set the permissions on the current
directory. If the operator confirms this action, the
permissions on the directory from where <b>restore</b> was
launched will be replaced by the permissions on the dumped
root inode. Although this behaviour is not really a bug, it
has proven itself to be confusing for many users, so it is
recommended to answer &rsquo;no&rsquo;, unless you&rsquo;re
performing a full restore and you do want to restore the
permissions on &rsquo;/&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">It should be
underlined that because it runs in user code, <b>restore</b>
, when run with the <b>&minus;C</b> option, sees the files
as the kernel presents them, whereas <b>dump</b> sees all
the files on a given filesystem. In particular, this can
cause some confusion when comparing a dumped filesystem a
part of which is hidden by a filesystem mounted on top of
it.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>dump/restore</b> backup suite was ported to Linux&rsquo;s
Second Extended File System by Remy Card
&lt;card@Linux.EU.Org&gt;. He maintained the initial
versions of <b>dump</b> (up and including 0.4b4, released in
January 1997).</p>

<p style="margin-left:11%; margin-top: 1em">Starting with
0.4b5, the new maintainer is Stelian Pop
&lt;stelian@popies.net&gt;.</p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>dump/restore</b> backup suite is available from
&lt;http://dump.sourceforge.net&gt;</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>restore</b> command appeared in 4.2BSD.</p>
<hr>
</body>
</html>
