<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:08:09 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PM&minus;ACTION</title>

</head>
<body>

<h1 align="center">PM&minus;ACTION</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SLEEP HOOK ORDERING CONVENTION">SLEEP HOOK ORDERING CONVENTION</a><br>
<a href="#CONFIGURATION VARIABLES">CONFIGURATION VARIABLES</a><br>
<a href="#RETURN VALUES">RETURN VALUES</a><br>
<a href="#DEBUGGING">DEBUGGING</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pm-action
&minus; Suspend or Hibernate your computer</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="58%">


<p style="margin-top: 1em"><b>pm&minus;hibernate</b>
[&minus;&minus;help]</p> </td>
<td width="31%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="58%">


<p style="margin-top: 1em"><b>pm&minus;suspend</b>
[&minus;&minus;quirk&minus;*] [&minus;&minus;help]</p></td>
<td width="31%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="58%">



<p style="margin-top: 1em"><b>pm&minus;suspend&minus;hybrid</b>
[&minus;&minus;quirk&minus;*] [&minus;&minus;help]</p></td>
<td width="31%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page documents briefly the <b>pm&minus;action</b>,
<b>pm&minus;hibernate</b>, <b>pm&minus;suspend</b> and
<b>pm&minus;suspend&minus;hybrid</b> commands. This manual
page was originally written for the Debian(TM) distribution
and has been adopted by the pm&minus;utils project.</p>

<p style="margin-left:11%; margin-top: 1em">These commands
can be used to put the machine in a sleep state. The precise
way how this is done can be influenced by installing
executables and configuration snippets. For some options
external programs are needed.</p>

<p style="margin-left:11%; margin-top: 1em">These commands
will usually be called by <b>UPower</b> or <b>hald</b> when
triggered to do so by a program in a desktop session such as
<b>gnome&minus;power&minus;manager</b>. Calling them from
the command line is also possible, but it is not guaranteed
that all programs in your desktop session keep working as
expected.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pm&minus;suspend</b></p>

<p style="margin-left:17%;">During suspend most devices are
shutdown, and system state is saved in RAM. The system still
requires power in this state. Most modern systems require 3
to 5 seconds to enter and leave suspend, and most laptops
can stay in suspend mode for 1 to 3 days before exhausting
their battery.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pm&minus;hibernate</b></p>

<p style="margin-left:17%;">During hibernate the system is
fully powered off, and system state is saved to disk. The
system does not require power, and can stay in hibernate
mode indefinitely. Most modern systems require 15 to 45
seconds to enter and leave hibernate, and entering and
leaving hibernate takes longer when you have more
memory.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pm&minus;suspend&minus;hybrid</b></p>

<p style="margin-left:17%;">Hybrid&minus;suspend is the
process where the system does everything it needs to
hibernate, but suspends instead of shutting down. This means
that your computer can wake up quicker than for normal
hibernation if you do not run out of power, and you can
resume even if you run out of power. s2both(8) is an
hybrid&minus;suspend implementation.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On some
hardware putting the video card in the suspend state and
recovering from it needs some special quirk handling. With
the &minus;&minus;quirk&minus;* options of the
<b>pm&minus;suspend</b> and
<b>pm&minus;suspend&minus;hybrid</b> commands you can select
which quirks should be used.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>pm&minus;suspend</b>, <b>pm&minus;hibernate</b>, or
<b>pm&minus;suspend&minus;hybrid</b> are invoked without any
commandline parameters, they will try to grab the correct
quirks from the internal quirk database.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;dpms&minus;on</b></p>

<p style="margin-left:17%;">This option forces the video
hardware to turn on the screen during resume. Most video
adapters turn on the screen themselves, but if you get a
blank screen on resume that can be turned back on by moving
the mouse or typing then this option may be useful.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;dpms&minus;suspend</b></p>

<p style="margin-left:17%;">This option forces the video
hardware to turn off the screen when suspending. Most video
adapters seem to do this correctly, but some do not, which
wastes lots of power. If your screen is still on after
successfully suspending you may need to use this option.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;none</b></p>

<p style="margin-left:17%;">This option disables
quirks.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;radeon&minus;off</b></p>

<p style="margin-left:17%;">This option forces Radeon
hardware to turn off the display during suspend and turn it
back on during resume. You only need to do this on some old
ThinkPads of the &acute;30 series (T30, X31, R32,... ) with
Radeon video hardware.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;reset&minus;brigthness</b></p>

<p style="margin-left:17%;">This option resets display
brightness during resume (i.e. sets the brightness to 0 and
returns it to the previous value).</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;s3&minus;bios</b></p>

<p style="margin-left:17%;">This option calls the video
BIOS during S3 resume. Unfortunately, it is not always
allowed to call the video BIOS at this point, so sometimes
adding this option can actually break resume on some
systems.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;s3&minus;mode</b></p>

<p style="margin-left:17%;">This option initializes the
video card into a VGA text mode, and then uses the BIOS to
set the video mode. On some systems S3 BIOS only initializes
the video BIOS to text mode, and so both S3 BIOS and S3 MODE
are needed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;vbe&minus;post</b></p>

<p style="margin-left:17%;">This option will attempt to
reinitialize the video card when resuming from suspend,
using the same code the system BIOS uses at boot in order to
initialize the video hardware. Not all video cards need
this, and using this option on systems where it is not
needed can cause a system to lock up when resuming.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;vbemode&minus;restore</b></p>

<p style="margin-left:17%;">This option will save and
restore the current VESA mode which may be necessary to
avoid X screen corruption. Using this feature on Intel
graphics hardware is probably a bad idea.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;vbestate&minus;restore</b></p>

<p style="margin-left:17%;">This option saves and restores
some low level hardware state which may be invalid after
suspend.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;vga&minus;mode&minus;3</b></p>

<p style="margin-left:17%;">This option will try to force
the video card into a standard text mode on resume.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;quirk&minus;save&minus;pci</b></p>

<p style="margin-left:17%;">Save the PCI config space for
the VGA card.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;store&minus;quirks&minus;as&minus;lkw</b></p>

<p style="margin-left:17%;">Save the quirks the video
adaptor required by <b>pm&minus;suspend</b> or
<b>pm&minus;suspend&minus;hybrid</b> as an .quirkdb file
that is specific to this system. The file will be saved in
/etc/pm/last_known_working.quirkdb. This parameter will only
save the actual quirks that were used to successfully
suspend/resume a system, and will be specific to the exact
configuration of that system, including the video hardware,
video driver, and whether or not kernel modesetting was
used.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/pm/config.d</p>

<p style="margin-left:17%;">The files in this directory are
evaluated in C sort order. These files can be provided by
individual packages outside of pm&minus;utils. If a global
configuration variable is set, the value set to will be
appended to the previous value. If any other variable is
set, it will be ignored. The syntax is simply:
VAR_NAME=value. See the CONFIGURATION VARIABLES section for
valid variables defined by pm&minus;utils. External packages
can define others, see their respective documentation for
more information.</p>


<p style="margin-left:11%; margin-top: 1em">/etc/pm/sleep.d,
/usr/lib/pm&minus;utils/sleep.d</p>

<p style="margin-left:17%;">Programs in these directories
(called hooks) are combined and executed in C sort order
before suspend and hibernate with as argument
&acute;suspend&acute; or &acute;hibernate&acute;. Afterwards
they are called in reverse order with argument
&acute;resume&acute; and &acute;thaw&acute; respectively. If
both directories contain a similar named file, the one in
/etc/pm/sleep.d will get preference. It is possible to
disable a hook in the distribution directory by putting a
non&minus;executable file in /etc/pm/sleep.d, or by adding
it to the HOOK_BLACKLIST configuration variable.</p>


<p style="margin-left:11%; margin-top: 1em">/var/log/pm&minus;suspend.log</p>

<p style="margin-left:17%;">The log file shows what was
done on the last suspend/hibernate and resume/thaw.</p>

<h2>SLEEP HOOK ORDERING CONVENTION
<a name="SLEEP HOOK ORDERING CONVENTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">00 &minus;
49</p>

<p style="margin-left:17%;">User and most package supplied
hooks. If a hook assumes that all of the usual services and
userspace infrastructure is still running, it should be
here.</p>

<p style="margin-left:11%; margin-top: 1em">50 &minus;
74</p>

<p style="margin-left:17%;">Service handling hooks. Hooks
that start or stop a service belong in this range. At or
before 50, hooks can assume that all services are still
enabled.</p>

<p style="margin-left:11%; margin-top: 1em">75 &minus;
89</p>

<p style="margin-left:17%;">Module and non&minus;core
hardware handling. If a hook needs to load/unload a module,
or if it needs to place non&minus;video hardware that would
otherwise break suspend or hibernate into a safe state, it
belongs in this range. At or before 75, hooks can assume all
modules are still loaded.</p>

<p style="margin-left:11%; margin-top: 1em">90 &minus;
99</p>

<p style="margin-left:17%;">Reserved for critical suspend
hooks.</p>

<h2>CONFIGURATION VARIABLES
<a name="CONFIGURATION VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Configuration
variables defined by pm&minus;utils. These can be set in any
file in /etc/pm/config.d/.</p>


<p style="margin-left:11%; margin-top: 1em"><b>SLEEP_MODULE
[=kernel]</b></p>

<p style="margin-left:17%;">The default suspend backend to
use. Valid values are:</p>


<p style="margin-left:17%; margin-top: 1em"><i>kernel</i></p>

<p style="margin-left:23%;">The built&minus;in kernel
suspend/resume support. Use this if nothing else is
supported on your system. The kernel backend is always used
if nothing else is available.</p>


<p style="margin-left:17%; margin-top: 1em"><i>uswsusp</i></p>

<p style="margin-left:23%;">If your system has support for
the userspace suspend programs (s2ram/s2disk/s2both), then
use this.</p>


<p style="margin-left:17%; margin-top: 1em"><i>tuxonice</i></p>

<p style="margin-left:23%;">If your system has support for
tuxonice/suspend2, use this.</p>


<p style="margin-left:11%; margin-top: 1em"><b>HIBERNATE_RESUME_POST_VIDEO
[=no]</b></p>

<p style="margin-left:17%;">If video should be posted after
hibernate, just like after suspend. You should not normally
need to set this.</p>


<p style="margin-left:11%; margin-top: 1em"><b>SUSPEND_MODULES</b></p>

<p style="margin-left:17%;">Space separated list of modules
to unload before suspend.</p>


<p style="margin-left:11%; margin-top: 1em"><b>HOOK_BLACKLIST</b></p>

<p style="margin-left:17%;">Space separated list of hooks
that should be disabled.</p>


<p style="margin-left:11%; margin-top: 1em"><b>HIBERNATE_MODE</b></p>

<p style="margin-left:17%;">Default method to power down
the system when hibernating. If not set, the system will use
the kernel default as a default value. Check /sys/power/disk
for valid values. The default value will be surrounded by
[square brackets].</p>


<p style="margin-left:11%; margin-top: 1em"><b>NEED_CLOCK_SYNC</b></p>

<p style="margin-left:17%;">If your system clock drifts
across a suspend/resume or hibernate/thaw cycle, you should
set this to true. This will cause pm&minus;utils to
synchronize the system clock whenever going through a
sleep/wake cycle at the expense of making suspend/resume
take longer.</p>


<p style="margin-left:11%; margin-top: 1em"><b>PM_HIBERNATE_DELAY
[=900]</b></p>

<p style="margin-left:17%;">If you are using kernel
suspend/resume and invoke
<b>pm&minus;suspend&minus;hybrid</b>, this environment
variable controls how many seconds the system will wait
after going into suspend before waking back up and
hibernating. By default, this is set to 900 seconds (15
minutes).</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Return values
less than 128 mean that pm&minus;action failed before trying
to put the system in the requested power saving state. A
return value of 128 means that pm&minus;action tried to put
the machine in the requested power state but failed. A
return value greater than 128 means pm&minus;action
encountered an error and also failed to enter the requested
power saving state.</p>

<h2>DEBUGGING
<a name="DEBUGGING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Debugging
suspend/resume can be a tricky process, and is covered in
more detail in
/usr/share/doc/pm&minus;utils/README.debugging.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The upstream
BTS can be found at
<b><font color="#0000FF">https://bugs.freedesktop.org/</font></b><font color="#000000">.
Select &acute;pm&minus;utils&acute; as product.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>s2ram</b>(8),
<b>s2disk</b>(8), <b>s2both</b>(8),
<b>pm-is-supported</b>(1), <b>pm-powersave</b>(8),
<b>vbetool</b>(8), <b>radeontool</b>(8)</font></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Tim
Dijkstra</b> &lt;tim@famdijkstra.org&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">Manpage
author.</font></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Copyright
&copy; 2007 Tim Dijkstra</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
manual page was originally written for the Debian(TM)
system, and has been adopted by the pm&minus;utils
project.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Permission
is granted to copy, distribute and/or modify this document
under the terms of the GNU General Public License, Version 2
or (at your option) any later version published by the Free
Software Foundation.</font></p>
<hr>
</body>
</html>
