<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:37:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GDBUS&minus;CODEGEN</title>

</head>
<body>

<h1 align="center">GDBUS&minus;CODEGEN</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERATING C CODE">GENERATING C CODE</a><br>
<a href="#GENERATING DOCBOOK DOCUMENTATION">GENERATING DOCBOOK DOCUMENTATION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SUPPORTED D-BUS ANNOTATIONS">SUPPORTED D-BUS ANNOTATIONS</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#C TYPE MAPPING">C TYPE MAPPING</a><br>
<a href="#STABILITY GUARANTEES">STABILITY GUARANTEES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#NOTES">NOTES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">gdbus-codegen
&minus; D&minus;Bus code and documentation generator</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>gdbus&minus;codegen</b>
[<b>&minus;h</b>,&nbsp;<b>&minus;&minus;help</b>]
[<b>&minus;&minus;interface&minus;prefix&nbsp;</b><i>org.project.Prefix</i>]
[<b>&minus;&minus;generate&minus;c&minus;code&nbsp;</b><i>OUTFILES</i>]
[<b>&minus;&minus;c&minus;namespace&nbsp;</b><i>YourProject</i>]
[<b>&minus;&minus;c&minus;generate&minus;object&minus;manager</b>]
[<b>&minus;&minus;generate&minus;docbook&nbsp;</b><i>OUTFILES</i>]
[<b>&minus;&minus;xml&minus;files&nbsp;</b><i>FILE</i>]
[<b>&minus;&minus;annotate&nbsp;</b><i>ELEMENT&nbsp;KEY&nbsp;VALUE</i>]...
FILE [FILE...]</p></td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>gdbus&minus;codegen</b>
is used to generate code and/or documentation for one or
more D&minus;Bus interfaces. The tool reads
<b><font color="#0000FF">D&minus;Bus Introspection
XML</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">files and generates output files. The
tool currently supports generating C code (via
<b>&minus;&minus;generate&minus;c&minus;code</b>) and
Docbook XML (via
<b>&minus;&minus;generate&minus;docbook</b>).</font></p>

<h2>GENERATING C CODE
<a name="GENERATING C CODE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">When
generating C code, a #GInterface &minus;derived type is
generated for each D&minus;Bus interface. Additionally, for
every generated type, <b>FooBar</b>, two concrete
instantiable types, <b>FooBarProxy</b> and
<b>FooBarSkeleton</b>, implementing said interface are also
generated. The former is derived from #GDBusProxy and
intended for use on the client side while the latter is
derived from the #GDBusInterfaceSkeleton type making it easy
to export on a #GDBusConnection either directly or via a
#GDBusObjectManagerServer instance.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
name of each generated C type is derived from the
D&minus;Bus interface name stripped with the prefix given
with <b>&minus;&minus;interface&minus;prefix</b> and with
the dots removed and initial characters capitalized. For
example, for the D&minus;Bus interface com.acme.Coyote the
name used is ComAcmeCoyote. For the D&minus;Bus interface
org.project.Bar.Frobnicator with
<b>&minus;&minus;interface&minus;prefix</b>org.project., the
name used is BarFrobnicator.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">For
methods, signals and properties, if not specified, the name
defaults to the name of the method, signal or
property.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Two
forms of the name are used &minus; the CamelCase form and
the lower&minus;case form. The CamelCase form is used for
the #GType and struct name, while lower&minus;case form is
used in function names. The lower&minus;case form is
calculated by converting from CamelCase to lower&minus;case
and inserting underscores at word boundaries (using certain
heuristics).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
the value given by the org.gtk.GDBus.C.Name annotation or
the <b>&minus;&minus;c&minus;namespace</b> option contains
an underscore (sometimes called <i>Ugly_Case</i>), then the
camel&minus;case name is derived by removing all
underscores, and the lower&minus;case name is derived by
lower&minus;casing the string. This is useful in some
situations where abbreviations are used. For example, if the
annotation is used on the interface
net.MyCorp.MyApp.iSCSITarget with the value iSCSI_Target the
CamelCase form is iSCSITarget while the lower&minus;case
form is iscsi_target. If the annotation is used on the
method EjectTheiPod with the value Eject_The_iPod, the
lower&minus;case form is eject_the_ipod.</font></p>

<h2>GENERATING DOCBOOK DOCUMENTATION
<a name="GENERATING DOCBOOK DOCUMENTATION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Each
generated Docbook XML file (see the
<b>&minus;&minus;generate&minus;docbook</b> option for
details) is a</font>
<b><font color="#0000FF">RefEntry</font></b>
<small><font color="#000000">[2]</font></small>
<font color="#000000">article describing the D&minus;Bus
interface.</font></p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
following options are supported:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;h</b>,
<b>&minus;&minus;help</b></font></p>

<p style="margin-left:17%;"><font color="#000000">Show help
and exit.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;xml&minus;files</b>
<i>FILE</i></font></p>

<p style="margin-left:17%;"><font color="#000000">The
D&minus;Bus introspection XML file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;interface&minus;prefix</b>
<i>org.project.Prefix.</i></font></p>

<p style="margin-left:17%;"><font color="#000000">A prefix
to strip from all D&minus;Bus interface names when
calculating the typename for the C binding and the
Docbook</font> <b><font color="#0000FF">sortas
attribute</font></b>
<small><font color="#000000">[3]</font></small>
<font color="#000000">.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;generate&minus;docbook</b>
<i>OUTFILES</i></font></p>

<p style="margin-left:17%;"><font color="#000000">Generate
Docbook Documentation for each D&minus;Bus interface and put
it in OUTFILES&minus;NAME.xml where NAME is a
place&minus;holder for the interface name, e.g.
net.Corp.FooBar and so on.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;generate&minus;c&minus;code</b>
<i>OUTFILES</i></font></p>

<p style="margin-left:17%;"><font color="#000000">Generate
C code for all D&minus;Bus interfaces and put it in
OUTFILES.c and OUTFILES.h.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;c&minus;namespace</b>
<i>YourProject</i></font></p>

<p style="margin-left:17%;"><font color="#000000">The
namespace to use for generated C code. This is expected to
be in</font> <b><font color="#0000FF">CamelCase</font></b>
<small><font color="#000000">[4]</font></small>
<font color="#000000">or <i>Ugly_Case</i> (see
above).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;c&minus;generate&minus;object&minus;manager</b></font></p>

<p style="margin-left:17%;"><font color="#000000">If this
option is passed, suitable #GDBusObject, #GDBusObjectProxy,
#GDBusObjectSkeleton and #GDBusObjectManagerClient
subclasses are generated.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;&minus;annotate</b>
<i>ELEMENT KEY VALUE</i></font></p>

<p style="margin-left:17%;"><font color="#000000">Used to
inject D&minus;Bus annotations into the given XML files. It
can be used with interfaces, methods, signals, properties
and arguments in the following way:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">gdbus&minus;codegen
&minus;&minus;c&minus;namespace MyApp \ <br>
&minus;&minus;generate&minus;c&minus;code
myapp&minus;generated \ <br>
&minus;&minus;annotate &quot;org.project.InterfaceName&quot;
\ <br>
org.gtk.GDBus.C.Name MyFrobnicator \ <br>
&minus;&minus;annotate
&quot;org.project.InterfaceName:Property&quot; \ <br>
bar bat \ <br>
&minus;&minus;annotate
&quot;org.project.InterfaceName.Method()&quot; \ <br>
org.freedesktop.DBus.Deprecated true \ <br>
&minus;&minus;annotate
&quot;org.project.InterfaceName.Method()[arg_name]&quot; \
<br>
snake hiss \ <br>
&minus;&minus;annotate
&quot;org.project.InterfaceName::Signal&quot; \ <br>
cat meow \ <br>
&minus;&minus;annotate
&quot;org.project.InterfaceName::Signal[arg_name]&quot; \
<br>
dog wuff \ <br>
myapp&minus;dbus&minus;interfaces.xml</font></p>

<p style="margin-left:17%;"><font color="#000000">Any
UTF&minus;8 string can be used for <i>KEY</i> and
<i>VALUE</i>.</font></p>

<h2>SUPPORTED D-BUS ANNOTATIONS
<a name="SUPPORTED D-BUS ANNOTATIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
following D&minus;Bus annotations are supported by
<b>gdbus&minus;codegen</b>:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.freedesktop.DBus.Deprecated</font></p>

<p style="margin-left:17%;"><font color="#000000">Can be
used on any &lt;interface&gt;, &lt;method&gt;,
&lt;signal&gt; and &lt;property&gt; element to specify that
the element is deprecated if its value is true. Note that
this annotation is defined in the</font>
<b><font color="#0000FF">D&minus;Bus
specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">and can only assume the values true
and false. In particular, you cannot specify the version
that the element was deprecated in nor any helpful
deprecation message. Such information should be added to the
element documentation instead.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
generating C code, this annotation is used to add
#G_GNUC_DEPRECATED to generated functions for the
element.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
generating Docbook XML, a deprecation warning will appear
along the documentation for the element.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.Since</font></p>

<p style="margin-left:17%;"><font color="#000000">Can be
used on any &lt;interface&gt;, &lt;method&gt;,
&lt;signal&gt; and &lt;property&gt; element to specify the
version (any free&minus;form string but compared using a
version&minus;aware sort function) the element appeared
in.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
generating C code, this field is used to ensure function
pointer order for preserving ABI/API, see the section called
&ldquo;STABILITY GUARANTEES&rdquo;.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
generating Docbook XML, the value of this tag appears in the
documentation.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.DocString</font></p>

<p style="margin-left:17%;"><font color="#000000">A string
with Docbook content for documentation. This annotation can
be used on &lt;interface&gt;, &lt;method&gt;,
&lt;signal&gt;, &lt;property&gt; and &lt;arg&gt;
elements.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.DocString.Short</font></p>

<p style="margin-left:17%;"><font color="#000000">A string
with Docbook content for short/brief documentation. This
annotation can only be used on &lt;interface&gt;
elements.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.C.Name</font></p>

<p style="margin-left:17%;"><font color="#000000">Can be
used on any &lt;interface&gt;, &lt;method&gt;,
&lt;signal&gt; and &lt;property&gt; element to specify the
name to use when generating C code. The value is expected to
be in</font> <b><font color="#0000FF">CamelCase</font></b>
<small><font color="#000000">[4]</font></small>
<font color="#000000">or <i>Ugly_Case</i> (see
above).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.C.ForceGVariant</font></p>

<p style="margin-left:17%;"><font color="#000000">If set to
a non&minus;empty string, a #GVariant instance will be used
instead of the natural C type. This annotation can be used
on any &lt;arg&gt; and &lt;property&gt; element.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">org.gtk.GDBus.C.UnixFD</font></p>

<p style="margin-left:17%;"><font color="#000000">If set to
a non&minus;empty string, the generated code will include
parameters to exchange file descriptors using the
#GUnixFDList type. This annotation can be used on
&lt;method&gt; elements.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">As
an easier alternative to using the org.gtk.GDBus.DocString
annotation, note that parser used by
<b>gdbus&minus;codegen</b> parses XML comments in a way
similar to</font>
<b><font color="#0000FF">gtk&minus;doc</font></b>
<small><font color="#000000">[5]</font></small>
<font color="#000000">:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note
that @since can be used in any inline documentation bit
(e.g. for interfaces, methods, signals and properties) to
set the org.gtk.GDBus.Since annotation. For the
org.gtk.GDBus.DocString annotation (and inline comments),
note that substrings of the form #net.Corp.Bar,
net.Corp.Bar.FooMethod(), #net.Corp.Bar::BarSignal and
#net.Corp.InlineDocs:BazProperty are all expanded to links
to the respective interface, method, signal and property.
Additionally, substrings starting with @ and % characters
are rendered as</font>
<b><font color="#0000FF">parameter</font></b>
<small><font color="#000000">[6]</font></small>
<font color="#000000">and</font>
<b><font color="#0000FF">constant</font></b>
<small><font color="#000000">[7]</font></small>
<font color="#000000">respectively.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
both XML comments and org.gtk.GDBus.DocString or
org.gtk.GDBus.DocString.Short annotations are present, the
latter wins.</font></p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Consider
the following D&minus;Bus Introspection XML.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;node&gt;
<br>
&lt;interface name=&quot;net.Corp.MyApp.Frobber&quot;&gt;
<br>
&lt;method name=&quot;HelloWorld&quot;&gt; <br>
&lt;arg name=&quot;greeting&quot; direction=&quot;in&quot;
type=&quot;s&quot;/&gt; <br>
&lt;arg name=&quot;response&quot; direction=&quot;out&quot;
type=&quot;s&quot;/&gt; <br>
&lt;/method&gt;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;signal
name=&quot;Notification&quot;&gt; <br>
&lt;arg name=&quot;icon_blob&quot; type=&quot;ay&quot;/&gt;
<br>
&lt;arg name=&quot;height&quot; type=&quot;i&quot;/&gt; <br>
&lt;arg name=&quot;messages&quot; type=&quot;as&quot;/&gt;
<br>
&lt;/signal&gt;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;property
name=&quot;Verbose&quot; type=&quot;b&quot;
access=&quot;readwrite&quot;/&gt; <br>
&lt;/interface&gt; <br>
&lt;/node&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
<b>gdbus&minus;codegen</b> is used on this file like
this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">gdbus&minus;codegen
&minus;&minus;generate&minus;c&minus;code
myapp&minus;generated \ <br>
&minus;&minus;c&minus;namespace MyApp \ <br>
&minus;&minus;interface&minus;prefix net.corp.MyApp. \ <br>
net.Corp.MyApp.Frobber.xml</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">two
files called myapp&minus;generated.[ch] are generated. The
files provide an abstract #GTypeInterface &minus;derived
type called <b>MyAppFrobber</b> as well as two instantiable
types with the same name but suffixed with <b>Proxy</b> and
<b>Skeleton</b>. The generated file, roughly, contains the
following facilities:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
GType macros for the three generated types */ <br>
#define MY_APP_TYPE_FROBBER (my_app_frobber_get_type ())
<br>
#define MY_APP_TYPE_FROBBER_SKELETON
(my_app_frobber_skeleton_get_type ()) <br>
#define MY_APP_TYPE_FROBBER_PROXY
(my_app_frobber_proxy_get_type ())</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">typedef
struct _MyAppFrobber MyAppFrobber; /* Dummy typedef
*/</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">typedef
struct <br>
{ <br>
GTypeInterface parent_iface;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Signal handler for the ::notification signal */ <br>
void (*notification) (MyAppFrobber *proxy, <br>
GVariant *icon_blob, <br>
gint height, <br>
const gchar* const *messages);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Signal handler for the ::handle&minus;hello&minus;world
signal */ <br>
gboolean (*handle_hello_world) (MyAppFrobber *proxy, <br>
GDBusMethodInvocation *invocation, <br>
const gchar *greeting); <br>
} MyAppFrobberIface;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Asynchronously calls HelloWorld() */ <br>
void <br>
my_app_frobber_call_hello_world (MyAppFrobber *proxy, <br>
const gchar *greeting, <br>
GCancellable *cancellable, <br>
GAsyncReadyCallback callback, <br>
gpointer user_data); <br>
gboolean <br>
my_app_frobber_call_hello_world_finish (MyAppFrobber *proxy,
<br>
gchar **out_response, <br>
GAsyncResult *res, <br>
GError **error);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Synchronously calls HelloWorld(). Blocks calling thread. */
<br>
gboolean <br>
my_app_frobber_call_hello_world_sync (MyAppFrobber *proxy,
<br>
const gchar *greeting, <br>
gchar **out_response, <br>
GCancellable *cancellable, <br>
GError **error);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Completes handling the HelloWorld() method call */ <br>
void <br>
my_app_frobber_complete_hello_world (MyAppFrobber *object,
<br>
GDBusMethodInvocation *invocation, <br>
const gchar *response);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Emits the ::notification signal / Notification() D&minus;Bus
signal */ <br>
void <br>
my_app_frobber_emit_notification (MyAppFrobber *object, <br>
GVariant *icon_blob, <br>
gint height, <br>
const gchar* const *messages);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Gets the :verbose GObject property / Verbose D&minus;Bus
property. <br>
* Does no blocking I/O. <br>
*/ <br>
gboolean my_app_frobber_get_verbose (MyAppFrobber
*object);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Sets the :verbose GObject property / Verbose D&minus;Bus
property. <br>
* Does no blocking I/O. <br>
*/ <br>
void my_app_frobber_set_verbose (MyAppFrobber *object, <br>
gboolean value);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Gets the interface info */ <br>
GDBusInterfaceInfo *my_app_frobber_interface_info
(void);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Creates a new skeleton object, ready to be exported */ <br>
MyAppFrobber *my_app_frobber_skeleton_new (void);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">/*
Client&minus;side proxy constructors. <br>
* <br>
* Additionally, _new_for_bus(), _new_for_bus_finish() and
<br>
* _new_for_bus_sync() proxy constructors are also generated.
<br>
*/ <br>
void <br>
my_app_frobber_proxy_new (GDBusConnection *connection, <br>
GDBusProxyFlags flags, <br>
const gchar *name, <br>
const gchar *object_path, <br>
GCancellable *cancellable, <br>
GAsyncReadyCallback callback, <br>
gpointer user_data); <br>
MyAppFrobber * <br>
my_app_frobber_proxy_new_finish (GAsyncResult *res, <br>
GError **error); <br>
MyAppFrobber * <br>
my_app_frobber_proxy_new_sync (GDBusConnection *connection,
<br>
GDBusProxyFlags flags, <br>
const gchar *name, <br>
const gchar *object_path, <br>
GCancellable *cancellable, <br>
GError **error);</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Thus,
for every D&minus;Bus method, there will be three C
functions for calling the method, one #GObject signal for
handling an incoming call and one C function for completing
an incoming call. For every D&minus;Bus signal, there's one
#GObject signal and one C function for emitting it. For
every D&minus;Bus property, two C functions are generated
(one setter, one getter) and one #GObject property. The
following table summarizes the generated facilities and
where they are applicable:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&nbsp;</font></p> </table>


<p align="center"><font color="#000000"><img src="grohtml-25071.png" alt="Image grohtml-25071.png"></font></p>


<p style="margin-left:11%;"><font color="#000000"><b>Client&minus;side
usage</b> <br>
You can use the generated proxy type with the generated
constructors:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">MyAppFrobber
*proxy; <br>
GError *error;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">error
= NULL; <br>
proxy = my_app_frobber_proxy_new_for_bus_sync ( <br>
G_BUS_TYPE_SESSION, <br>
G_DBUS_PROXY_FLAGS_NONE, <br>
&quot;net.Corp.MyApp&quot;, /* bus name */ <br>
&quot;/net/Corp/MyApp/SomeFrobber&quot;, /* object */ <br>
NULL, /* GCancellable* */ <br>
&amp;error); <br>
/* do stuff with proxy */ <br>
g_object_unref (proxy);</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Instead
of using the generic #GDBusProxy facilities, one can use the
generated methods such as
<b>my_app_frobber_call_hello_world()</b> to invoke the
<b>net.Corp.MyApp.Frobber.HelloWorld()</b> D&minus;Bus
method, connect to the the <b>::notification</b> GObject
signal to receive the
<b>net.Corp.MyApp.Frobber::Notication</b> D&minus;Bus signal
and get/set the <i>net.Corp.MyApp.Frobber:Verbose</i>
D&minus;Bus Property using either the GObject property
<i>:verbose</i> or the <b>my_app_get_verbose()</b> and
<b>my_app_set_verbose()</b> methods. Use the standard
#GObject::notify signal to listen to property
changes.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note
that all property access is via #GDBusProxy 's property
cache so no I/O is ever done when reading properties. Also
note that setting a property will cause the</font>
<b><font color="#0000FF">org.freedesktop.DBus.Properties.Set</font></b>
<small><font color="#000000">[8]</font></small>
<font color="#000000">method to be called on the remote
object. This call, however, is asynchronous so setting a
property won't block. Further, the change is delayed and no
error checking is possible.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Server&minus;side
usage</b> <br>
The generated <b>MyAppFrobber</b> interface is designed so
it is easy to implement it in a #GObject subclass. For
example, to handle <b>HelloWorld()</b> method invocations,
set the vfunc for <b>handle_hello_hello_world()</b> in the
<b>MyAppFrobberIface</b> structure. Similary, to handle the
<i>net.Corp.MyApp.Frobber:Verbose</i> property override the
<i>:verbose</i> #GObject property from the subclass. To emit
a signal, use e.g. <b>my_app_emit_signal()</b> or
g_signal_emit_by_name().</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Instead
of subclassing, it is often easier to use the generated
<b>MyAppFrobberSkeleton</b> subclass. To handle incoming
method calls, use <b>g_signal_connect()</b> with the
<b>::handle&minus;*</b> signals and instead of overriding
#GObject 's <b>get_property()</b> and <b>set_property()</b>
vfuncs, use g_object_get() and g_object_set() or the
generated property getters and setters (the generated class
has an internal property bag implementation).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">static
gboolean <br>
on_handle_hello_world (MyAppFrobber *interface, <br>
GDBusMethodInvocation *invocation, <br>
const gchar *greeting, <br>
gpointer user_data) <br>
{ <br>
if (g_strcmp0 (greeting, &quot;Boo&quot;) != 0) <br>
{ <br>
gchar *response; <br>
response = g_strdup_printf (&quot;Word! You said
&lsquo;%s'.&quot;, greeting); <br>
my_app_complete_hello_world (interface, invocation,
response); <br>
g_free (response); <br>
} <br>
else <br>
{ <br>
g_dbus_method_invocation_return_error (invocation, <br>
MY_APP_ERROR, <br>
MY_APP_ERROR_NO_WHINING, <br>
&quot;Hey, %s, there will be no whining!&quot;, <br>
g_dbus_method_invocation_get_sender (invocation)); <br>
} <br>
return TRUE; <br>
}</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">[...]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">interface
= my_app_frobber_skeleton_new (); <br>
my_app_frobber_set_verbose (interface, TRUE);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">g_signal_connect
(interface, <br>
&quot;handle&minus;hello&minus;world&quot;, <br>
G_CALLBACK (on_handle_hello_world), <br>
some_user_data);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">[...]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">error
= NULL; <br>
if (!g_dbus_interface_skeleton_export
(G_DBUS_INTERFACE_SKELETON (interface), <br>
connection, <br>
&quot;/path/of/dbus_object&quot;, <br>
&amp;error)) <br>
{ <br>
/* handle error */ <br>
}</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">To
facilitate atomic changesets (multiple properties changing
at the same time), #GObject::notify signals are queued up
when received. The queue is drained in an idle handler
(which is called from the thread-default main loop of the
thread where the skeleton object was contructed) and will
cause emissions of the</font>
<b><font color="#0000FF">org.freedesktop.DBus.Properties::PropertiesChanged</font></b>
<small><font color="#000000">[8]</font></small>
<font color="#000000">signal with all the properties that
have changed. Use g_dbus_interface_skeleton_flush() or
g_dbus_object_skeleton_flush() to empty the queue
immediately. Use g_object_freeze_notify() and
g_object_thaw_notify() for atomic changesets if on a
different thread.</font></p>

<h2>C TYPE MAPPING
<a name="C TYPE MAPPING"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Scalar
types (type&minus;strings and and and gchar*, gchar** and so
on. Everything else is mapped to the #GVariant
type.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
automatic mapping can be turned off by using the annotation
org.gtk.GDBus.C.ForceGVariant &minus; if used then a
#GVariant is always exchanged instead of the corresponding
native C type. This annotation may be convenient to use when
using bytestrings (type&minus;string</font></p>

<h2>STABILITY GUARANTEES
<a name="STABILITY GUARANTEES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
generated C functions are guaranteed to not change their ABI
that is, if a method, signal or property does not change its
signature in the introspection XML, the generated C
functions will not change its C ABI either. The ABI of the
generated instance and class structures will be preserved as
well.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
ABI of the generated #GType s will be preserved only if the
org.gtk.GDBus.Since annotation is used judiciously &mdash;
this is because the VTable for the #GInterface relies on
functions pointers for signal handlers. Specifically, if a
D&minus;Bus method, property or signal or is added to a
D&minus;Bus interface, then ABI of the generated #GInterface
type is preserved if, and only if, each added method,
property signal is annotated with they org.gtk.GDBus.Since
annotation using a greater version number than previous
versions.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
generated C code currently happens to be annotated
with</font>
<b><font color="#0000FF">gtk&minus;doc</font></b>
<small><font color="#000000">[5]</font></small>
<font color="#000000">/</font>
<b><font color="#0000FF">GObject Introspection</font></b>
<small><font color="#000000">[9]</font></small>
<font color="#000000">comments / annotations. The layout and
contents might change in the future so no guarantees about
e.g. SECTION usage etc. is given.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">While
the generated Docbook for D&minus;Bus interfaces isn't
expected to change, no guarantees are given at this
point.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">It
is important to note that the generated code should not be
checked into revision control systems, nor it should be
included in distributed source archives.</font></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Please
send bug reports to either the distribution bug tracker or
the upstream bug tracker at</font>
<b><font color="#0000FF">https://bugzilla.gnome.org/enter_bug.cgi?product=glib</font></b><font color="#000000">.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>gdbus</b>(1)</font></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="2%"></td>
<td width="35%">


<p style="margin-top: 1em"><font color="#000000">D-Bus
Introspection XML</font></p></td>
<td width="48%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://dbus.freedesktop.org/doc/dbus-specification.html#introspection-format</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">2.</font></p> </td>
<td width="2%"></td>
<td width="12%">



<p style="margin-top: 1em"><font color="#000000">RefEntry</font></p> </td>
<td width="71%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://www.docbook.org/tdg/en/html/refentry.html</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">3.</font></p> </td>
<td width="2%"></td>
<td width="25%">


<p style="margin-top: 1em"><font color="#000000">sortas
attribute</font></p> </td>
<td width="58%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://www.docbook.org/tdg/en/html/primary.html</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">4.</font></p> </td>
<td width="2%"></td>
<td width="14%">



<p style="margin-top: 1em"><font color="#000000">CamelCase</font></p> </td>
<td width="69%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://en.wikipedia.org/wiki/CamelCase</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">5.</font></p> </td>
<td width="2%"></td>
<td width="11%">



<p style="margin-top: 1em"><font color="#000000">gtk-doc</font></p> </td>
<td width="72%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://www.gtk.org/gtk-doc/</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">6.</font></p> </td>
<td width="2%"></td>
<td width="14%">



<p style="margin-top: 1em"><font color="#000000">parameter</font></p> </td>
<td width="69%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://www.docbook.org/tdg/en/html/parameter.html</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">7.</font></p> </td>
<td width="2%"></td>
<td width="12%">



<p style="margin-top: 1em"><font color="#000000">constant</font></p> </td>
<td width="71%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://www.docbook.org/tdg/en/html/constant.html</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">8.</font></p> </td>
<td width="2%"></td>
<td width="54%">



<p style="margin-top: 1em"><font color="#000000">org.freedesktop.DBus.Properties.Set</font></p> </td>
<td width="29%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">http://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-properties</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">9.</font></p> </td>
<td width="2%"></td>
<td width="32%">


<p style="margin-top: 1em"><font color="#000000">GObject
Introspection</font></p> </td>
<td width="51%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">https://wiki.gnome.org/Projects/GObjectIntrospection</font></p>
<hr>
</body>
</html>
