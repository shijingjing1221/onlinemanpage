<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:52:03 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>JOURNAL_ABORT</title>

</head>
<body>

<h1 align="center">JOURNAL_ABORT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">journal_abort
&minus; Shutdown the journal immediately.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="78%">


<p style="margin-top: 1em"><b>void
journal_abort(journal_t&nbsp;*&nbsp;</b><i>journal</i><b>,
int&nbsp;</b><i>errno</i><b>);</b></p> </td>
<td width="11%">
</td></tr>
</table>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>journal</i></b></p>

<p style="margin-left:17%;">the journal to shutdown.</p>


<p style="margin-left:11%; margin-top: 1em"><i>errno</i></p>

<p style="margin-left:17%;">an error number to record in
the journal indicating the reason for the shutdown.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Perform a
complete, immediate shutdown of the ENTIRE journal (not of a
single transaction). This operation cannot be undone without
closing and reopening the journal.</p>

<p style="margin-left:11%; margin-top: 1em">The
journal_abort function is intended to support higher level
error recovery mechanisms such as the ext2/ext3
remount&minus;readonly error mode.</p>

<p style="margin-left:11%; margin-top: 1em">Journal abort
has very specific semantics. Any existing dirty, unjournaled
buffers in the main filesystem will still be written to disk
by bdflush, but the journaling mechanism will be suspended
immediately and no further transaction commits will be
honoured.</p>

<p style="margin-left:11%; margin-top: 1em">Any dirty,
journaled buffers will be written back to disk without
hitting the journal. Atomicity cannot be guaranteed on an
aborted filesystem, but we _do_ attempt to leave as much
data as possible behind for fsck to use for cleanup.</p>

<p style="margin-left:11%; margin-top: 1em">Any attempt to
get a new transaction handle on a journal which is in ABORT
state will just result in an &minus;EROFS error return. A
journal_stop on an existing handle will return &minus;EIO if
we have entered abort state during the update.</p>

<p style="margin-left:11%; margin-top: 1em">Recursive
transactions are not disturbed by journal abort until the
final journal_stop, which will receive the &minus;EIO
error.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, the
journal_abort call allows the caller to supply an errno
which will be recorded (if possible) in the journal
superblock. This allows a client to record failure
conditions in the middle of a transaction without having to
complete the transaction to record the failure to disk.
ext3_error, for example, now uses this functionality.</p>

<p style="margin-left:11%; margin-top: 1em">Errors which
originate from within the journaling layer will NOT supply
an errno; a null errno implies that absolutely no further
writes are done to the journal (unless there are any already
in progress).</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Roger
Gammans</b> &lt;rgammans@computer-surgery.co.uk&gt;</p>

<p style="margin-left:17%;">Author.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Stephen
Tweedie</b> &lt;sct@redhat.com&gt;</p>

<p style="margin-left:17%;">Author.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<hr>
</body>
</html>
