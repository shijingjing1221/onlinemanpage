<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:03:18 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opasaquery</title>

</head>
<body>

<h1 align="center">opasaquery</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#-h and -p options permit a variety of selections:--&gt;">-h and -p options permit a variety of selections:--&gt;</a><br>
<a href="#Node Types">Node Types</a><br>
<a href="#GIDs">GIDs</a><br>
<a href="#Output Types">Output Types</a><br>
<a href="#Input Options vs. Output Permitted">Input Options vs. Output Permitted</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opasaquery</p>

<p style="margin-left:11%; margin-top: 1em"><b>(All)</b>
opasaquery can perform various queries of the subnet
manager/subnet agent and provide detailed fabric
information.</p>

<p style="margin-left:11%; margin-top: 1em">In many cases
opareport and opareports provide a more powerful tool,
however in some cases opasaquery is preferred, especially
when dealing with virtual fabrics, service records and
multicast.</p>

<p style="margin-left:11%; margin-top: 1em">The command
opasaquery is installed on all hosts as part of the Intel(R)
Omni-Path Fabric Host Software , but it is also included in
Intel(R) Omni-Path Fabric Suite FastFabric Toolset.</p>

<p style="margin-left:11%; margin-top: 1em">By default
opasaquery uses the first active port on the local system.
However, if the Fabric Management Node is connected to more
than one fabric (for example, a subnet), the Intel(R)
Omni-Path Host Fabric Interface (HFI) and port may be
specified to select the fabric whose SA is to be
queried.</p>

<h2>Syntax
<a name="Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opasaquery [-v
[-v] [-v]] [-I] [-h <i>hfi</i>] [-p <i>port</i>] [-o
<i>type</i>] [-l <i>lid</i>] [-t <i>type</i>] [-s
<i>guid</i>] [-n <i>guid</i>] [-g <i>guid</i>] [-k
<i>pkey</i>] [-i <i>vfIndex</i>] [-S <i>serviceId</i>] [-L
<i>sl</i>] [-u <i>gid</i>] [-m <i>gid</i>] [-d <i>name</i>]
[-P &acute; <i>guid guid</i>&acute;] [-G &acute; <i>gid
gid</i>&acute;] [-a &acute; <i>sguid</i>...;
<i>dguid</i>...&acute;] [-A &acute; <i>sgid</i>...;
<i>dgid</i>...&acute;]</p>

<p style="margin-left:11%; margin-top: 1em">or <br>
opasaquery --help</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">--help</p></td>
<td width="6%"></td>
<td width="34%">


<p style="margin-top: 1em">Produce full help text</p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:11%;">-v/--verbose</p>

<p style="margin-left:26%;">Verbose output. A second
invocation will activate openib debugging, a third will
activate libibumad debugging.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-I/--IB</p></td>
<td width="4%"></td>
<td width="63%">


<p>Issue query in legacy InfiniBand* format.</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:11%;">-h/--hfi <i>hfi</i></p>

<p style="margin-left:26%;">HFI , numbered 1..n. Using 0
specifies that the -p <i>port</i> port will be a system wide
port number (default is 0).</p>

<p style="margin-left:11%;">-p/--port <i>port</i></p>

<p style="margin-left:26%;">Port, numbered 1..n. If -h
<i>hfi</i> is 0 then <i>port</i> will be a system wide port
number (default is 1).</p>

<p style="margin-left:11%;">-o/--output <i>type</i></p>

<p style="margin-left:26%;">Output type for query (default
is node ). See <i>Output Types</i></p>

<p style="margin-left:11%;">-l/--lid <i>lid</i></p>

<p style="margin-left:26%;">Query a specific LID.</p>

<p style="margin-left:11%;">-t/--type <i>node_type</i></p>

<p style="margin-left:26%;">Query by node type. See <i>Node
Type</i></p>

<p style="margin-left:11%;">-s/--sysguid
<i>system_image_guid</i></p>

<p style="margin-left:26%;">Query by system image guid.</p>

<p style="margin-left:11%;">-n/--nodeguid
<i>node_guid</i></p>

<p style="margin-left:26%;">Query by node guid.</p>

<p style="margin-left:11%;">-g/--portguid
<i>port_guid</i></p>

<p style="margin-left:26%;">Query by port guid.</p>

<p style="margin-left:11%;">-k/--pkey <i>pkey</i></p>

<p style="margin-left:26%;">Query a specific PKey.</p>

<p style="margin-left:11%;">-i/--vfindex <i>vfIndex</i></p>

<p style="margin-left:26%;">Query a specific vfindex.</p>

<p style="margin-left:11%;">-S/--serviceId
<i>serviceId</i></p>

<p style="margin-left:26%;">Query a specific service
id.</p>

<p style="margin-left:11%;">-L/--SL <i>SL</i></p>

<p style="margin-left:26%;">Query by service level.</p>

<p style="margin-left:11%;">-u/--portgid
<i>port_gid</i></p>

<p style="margin-left:26%;">Query by port GID. See
<i>GIDs</i></p>

<p style="margin-left:11%;">-m/--mcgid
<i>multicast_gid</i></p>

<p style="margin-left:26%;">Query by multicast GID. See
<i>GIDs</i></p>

<p style="margin-left:11%;">-d/--desc
<i>node_description</i></p>

<p style="margin-left:26%;">Query by node
name/description.</p>

<p style="margin-left:11%;">-P/--guidpair <i>guid
guid</i></p>

<p style="margin-left:26%;">Query by a pair of port
GUIIDs.</p>

<p style="margin-left:11%;">-G/--gidpair <i>gid gid</i></p>

<p style="margin-left:26%;">Query by a pair of GIDs. See
<i>GIDs</i></p>

<p style="margin-left:11%;">-a/--guidlist <i>sguid
...;dguid ...</i></p>

<p style="margin-left:26%;">Query by a list of port
GUIDs.</p>

<p style="margin-left:11%;">-A/--gidlist <i>sgid ...;dgid
...</i></p>

<p style="margin-left:26%;">Query by a list of GIDs. See
<i>GIDs</i></p>

<h2>-h and -p options permit a variety of selections:--&gt;
<a name="-h and -p options permit a variety of selections:--&gt;"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em">-h 0</p></td>
<td width="1%"></td>
<td width="74%">


<p style="margin-top: 1em">First active port in system
(this is the default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p 0</p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port in system.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port on HFI <i>x</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i>-p 0</p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port on HFI <i>x</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p <i>y</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>Port <i>y</i>within system (irrespective of which ports
are active).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i>-p <i>y</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>HFI <i>x</i>, port <i>y</i></p></td></tr>
</table>

<h2>Node Types
<a name="Node Types"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">ca</p></td>
<td width="11%"></td>
<td width="25%">


<p style="margin-top: 1em">Channel adapter.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>sw</p></td>
<td width="11%"></td>
<td width="25%">


<p>Switch.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>rtr</p></td>
<td width="11%"></td>
<td width="25%">


<p>Router.</p></td>
<td width="49%">
</td></tr>
</table>

<h2>GIDs
<a name="GIDs"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Specify a 64
bit subnet and 64 bit interface ID as:</p>

<p style="margin-left:11%; margin-top: 1em"><i>subnet</i>:
<i>interface</i> .</p>

<p style="margin-left:11%; margin-top: 1em">For example:
0xfe80000000000000:0x00066a00a0000380</p>

<h2>Output Types
<a name="Output Types"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">classportinfo</p>

<p style="margin-left:26%;">classportinfo of the SA.</p>

<p style="margin-left:11%;">systemguid</p>

<p style="margin-left:26%;">List of system image GUIDs.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>nodeguid</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of node GUIDs.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>portguid</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of port GUIDs.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>lid</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of LIDs.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>desc</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of node descriptions/names.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>path</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of path records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>node</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of node records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>portinfo</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of port info records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>sminfo</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SM info records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>swinfo</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of switch info records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>link</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of link records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>scsc</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SC to SC mapping table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>slsc</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SL to SC mapping table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>scsl</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SC to SL mapping table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>scvlt</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SC to VLt table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>scvlnt</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of SC to VLnt table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>vlarb</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of VL arbitration table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>pkey</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of PKey table records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>service</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of service records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>mcmember</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of multicast member records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>inform</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of inform info records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>linfdb</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of switch linear FDB records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>ranfdb</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of switch random FDB records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>mcfdb</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of switch multicast FDB records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>trace</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of trace records.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>vfinfo</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of vFabrics.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>vfinfocsv</p></td>
<td width="1%"></td>
<td width="60%">


<p>List of vFabrics in CSV format.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:11%;">vfinfocsv2</p>

<p style="margin-left:26%;">List of vFabrics in CSV format
with enums.</p>

<p style="margin-left:11%;">quarantine</p>

<p style="margin-left:26%;">List of quarantined nodes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>conginfo</p></td>
<td width="1%"></td>
<td width="54%">


<p>List of Congestion Info Records.</p></td>
<td width="20%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>swcongset</p></td>
<td width="1%"></td>
<td width="54%">


<p>List of Switch Congestion Settings.</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:11%;">hficongset</p>

<p style="margin-left:26%;">List of HFI Congestion
Settings.</p>

<p style="margin-left:11%;">hficongcon</p>

<p style="margin-left:26%;">List of HFI Congesting Control
Settings.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>bfrctrl</p></td>
<td width="1%"></td>
<td width="46%">


<p>List of buffer control tables.</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>cableinfo</p></td>
<td width="1%"></td>
<td width="46%">


<p>List of Cable Info records.</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>portgroup</p></td>
<td width="1%"></td>
<td width="46%">


<p>List of AR Port Group records.</p></td>
<td width="28%">
</td></tr>
</table>

<p style="margin-left:11%;">portgroupfdb</p>

<p style="margin-left:26%;">Llist of AR Port Group FWD
records.</p>

<p style="margin-left:11%; margin-top: 1em">The vfinfocsv
and vfinfocsv2 output formats are designed to make it easier
to script vfinfo queries. One line is output per vFabric of
the form: name:index:pkey:sl:mtu:rate</p>

<p style="margin-left:11%; margin-top: 1em">The only
difference between these two formats is how the mtu and rate
are output. vfinfocsv outputs them in human/text format such
as 2048 and 40g. vfinfocsv2 outputs them as the IBTA
enumerations defined for the SMA protocol such as 4 and 7.
The opagetvf command can be a useful tool which is based on
this capability of opasaquery .</p>

<h2>Input Options vs. Output Permitted
<a name="Input Options vs. Output Permitted"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
list shows the input (assorted query by options) and outputs
( -o ) that are permitted.</p>
<hr>
</body>
</html>
