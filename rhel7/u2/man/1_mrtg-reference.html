<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:00:22 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MRTG-REFERENCE</title>

</head>
<body>

<h1 align="center">MRTG-REFERENCE</h1>

<a href="#NAME">NAME</a><br>
<a href="#OVERVIEW">OVERVIEW</a><br>
<a href="#SYNTAX">SYNTAX</a><br>
<a href="#GLOBAL KEYWORDS">GLOBAL KEYWORDS</a><br>
<a href="#OPTIONAL GLOBAL KEYWORDS">OPTIONAL GLOBAL KEYWORDS</a><br>
<a href="#PER TARGET CONFIGURATION">PER TARGET CONFIGURATION</a><br>
<a href="#OPTIONAL PER TARGET KEYWORDS">OPTIONAL PER TARGET KEYWORDS</a><br>
<a href="#THRESHOLD CHECKING">THRESHOLD CHECKING</a><br>
<a href="#PER TARGET DEFAULT VALUES">PER TARGET DEFAULT VALUES</a><br>
<a href="#COMMAND LINE OPTIONS">COMMAND LINE OPTIONS</a><br>
<a href="#EXIT CODES">EXIT CODES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">mrtg&minus;reference
&minus; MRTG 2.17.4 configuration reference</p>

<h2>OVERVIEW
<a name="OVERVIEW"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The runtime
behaviour of <small>MRTG</small> is governed by a
configuration file. Run-of-the-mill configuration files can
be generated with <b>cfgmaker</b>. (Check cfgmaker). But for
more elaborate configurations some hand-tuning is
required.</p>

<p style="margin-left:11%; margin-top: 1em">This document
describes all the configuration options understood by the
mrtg software.</p>

<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>MRTG</small>
configuration file syntax follows some simple rules:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Keywords must start at the beginning of a line.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lines which follow a keyword line which start with a
blank are appended to the keyword line</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Empty Lines are ignored</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lines starting with a # sign are comments.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>You can add other files into the configuration file
using</p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><b>Include:</b>
<i>file</i></p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Include: base&minus;options.inc</pre>


<p style="margin-left:17%; margin-top: 1em">If included
files are specified with relative paths, both the current
working directory and the directory containing the main
config file will be searched for the files. The current
working directory will be searched first.</p>

<p style="margin-left:17%; margin-top: 1em">If the included
filename contains an asterisk, then this is taken as a
wildcard for zero or more characters, and all matching files
are included. Thus, you can use this statement to include
all files in a specified subdirectory.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Include: servers/*.cfg</pre>


<p style="margin-left:17%; margin-top: 1em">In this case,
you should be very careful that your wildcard pattern does
not find a match relative to the current working directory
if you mean it to be relative to the main config file
directory, since the working directory is checked for a
match first (as with a normal Include directive). Therefore,
use of something like &rsquo;*/*&rsquo; is discouraged.</p>

<h2>GLOBAL KEYWORDS
<a name="GLOBAL KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>WorkDir</b>
<br>
WorkDir specifies where the logfiles and the webpages should
be created.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> WorkDir: /usr/tardis/pub/www/stats/mrtg</pre>


<h2>OPTIONAL GLOBAL KEYWORDS
<a name="OPTIONAL GLOBAL KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>HtmlDir</b>
<br>
HtmlDir specifies the directory where the html (or shtml,
but we&rsquo;ll get on to those later) lives.</p>


<p style="margin-left:11%; margin-top: 1em"><small>NOTE:</small>
Workdir overrides the settings for htmldir, imagedir and
logdir.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Htmldir: /www/mrtg/</pre>



<p style="margin-left:11%; margin-top: 1em"><b>ImageDir</b>
<br>
ImageDir specifies the directory where the images live. They
should be under the html directory.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Imagedir: /www/mrtg/images</pre>


<p style="margin-left:11%; margin-top: 1em"><b>LogDir</b>
<br>
LogDir specifies the directory where the logs are stored.
This need not be under htmldir directive.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Logdir: /www/mrtg/logs</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Forks (
<small>UNIX</small> only)</b> <br>
With system that supports fork ( <small>UNIX</small> for
example), mrtg can fork itself into multiple instances while
it is acquiring data via snmp.</p>

<p style="margin-left:11%; margin-top: 1em">For situations
with high latency or a great number of devices this will
speed things up considerably. It will not make things
faster, though, if you query a single switch sitting next
door.</p>

<p style="margin-left:11%; margin-top: 1em">As far as I
know <small>NT</small> can not fork so this option is not
available on <small>NT</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Forks: 4</pre>



<p style="margin-left:11%; margin-top: 1em"><b>EnableIPv6</b>
<br>
When set to yes, IPv6 support is enabled if the required
libraries are present (see the mrtg&minus;ipv6 manpage).
When IPv6 is enabled, mrtg can talk to routers using
<small>SNMP</small> over IPv6 and targets may be specified
by their numeric IPv6 addresses as well as by hostname or
IPv4 address.</p>

<p style="margin-left:11%; margin-top: 1em">If IPv6 is
enabled and the target is a hostname, mrtg will try to
resolve the hostname to an IPv6 address and, if this fails,
to an IPv4 address. Note that mrtg will only use IPv4 if you
specify an IPv4 address or a hostname with no corresponding
IPv6 address; it will not fall back to IPv4 if it simply
fails to communicate with the target using IPv6. This is by
design.</p>

<p style="margin-left:11%; margin-top: 1em">Note that many
routers do not currently support <small>SNMP</small> over
IPv6. Use the <i>IPv4Only</i> per target option for these
routers.</p>

<p style="margin-left:11%; margin-top: 1em">IPv6 is
disabled by default.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> EnableIPv6: Yes</pre>



<p style="margin-left:11%; margin-top: 1em"><b>EnableSnmpV3</b>
<br>
When set to yes, uses the Net::SNMP module instead of the
<small>SNMP_SESSION</small> module for generating snmp
queries. This allows the use of SNMPv3 if other snmpv3
parameters are set.</p>

<p style="margin-left:11%; margin-top: 1em">SNMPv3 is
disabled by default.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> EnableSnmpV3: yes</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Refresh</b>
<br>
How many seconds apart should the browser (Netscape) be
instructed to reload the page? If this is not defined, the
default is 300 seconds (5 minutes).</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Refresh: 600</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Interval</b>
<br>
How often do you call mrtg? The default is 5 minutes. If you
call it less often, you should specify it here. This does
two things:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The generated
<small>HTML</small> page contains the right information
about the calling interval ...</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A <small>META</small> header in the generated
<small>HTML</small> page will instruct caches about the
time-to-live of this page .....</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In this
example, we tell mrtg that we will be calling it every 10
minutes. If you are calling mrtg every 5 minutes, you can
leave this line commented out.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Interval: 10</pre>


<p style="margin-left:11%; margin-top: 1em">Note that
unless you are using rrdtool you can not set Interval to
less than 5 minutes. If you are using rrdtool you can set
interval in the format</p>

<pre style="margin-left:11%; margin-top: 1em"> Interval: MM[:SS]</pre>


<p style="margin-left:11%; margin-top: 1em">Down to 1
second. Note though, setting the Interval for an
rrdtool/mrtg setup will influence the initial creation of
the database. If you change the interval later, all existing
databases will remain at the resolution they were initially
created with. Also note that you must make sure that your
mrtg-rrd Web-frontend can deal with this kind of Interval
setting.</p>

<p style="margin-left:11%; margin-top: 1em"><b>MaxAge</b>
<small><br>
MRTG</small> relies heavily on the real time clock of your
computer. If the time is set to a wrong value, especially if
it is advanced far into the future, this will cause mrtg to
expire lots of supposedly old data from the log files.</p>

<p style="margin-left:11%; margin-top: 1em">To prevent
this, you can add a &rsquo;reasonability&rsquo; check by
specifying a maximum age for log files. If a file seems to
be older, mrtg will not touch it but complain instead,
giving you a chance to investigate the cause.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> MaxAge: 7200</pre>


<p style="margin-left:11%; margin-top: 1em">The example
above will make mrtg refuse to update log files older than 2
hours (7200 seconds).</p>


<p style="margin-left:11%; margin-top: 1em"><b>WriteExpires</b>
<br>
With this switch mrtg will generate .meta files for
<small>CERN</small> and Apache servers which contain
Expiration tags for the html and gif files. The *.meta files
will be created in the same directory as the other files, so
you will have to set &quot;MetaDir .&quot; and
&quot;MetaFiles on&quot; in your apache.conf or .htaccess
file for this to work</p>


<p style="margin-left:11%; margin-top: 1em"><small>NOTE:</small>
If you are running Apache&minus;1.2 or later, you can use
the mod_expire to achieve the same effect ... see the file
htaccess.txt</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> WriteExpires: Yes</pre>


<p style="margin-left:11%; margin-top: 1em"><b>NoMib2</b>
<br>
Normally we ask the <small>SNMP</small> device for
&rsquo;sysUptime&rsquo; and &rsquo;sysName&rsquo;
properties. Some do not have these. If you want to avoid
getting complaints from mrtg about these missing properties,
specify the nomib2 option.</p>

<p style="margin-left:11%; margin-top: 1em">An example of
agents which do not implement base mib2 attributes are
Computer Associates &minus; Unicenter <small>TNG</small>
Agents. <small>CA</small> relies on using the base <small>OS
SNMP</small> agent in addition to its own agents to
supplement the management of a system.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> NoMib2: Yes</pre>



<p style="margin-left:11%; margin-top: 1em"><b>SingleRequest</b>
<br>
Some <small>SNMP</small> implementations can not deal with
requests asking for multiple snmp variables in one go. Set
this in your cfg file to force mrtg to only ask for one
variable per request.</p>

<p style="margin-left:11%; margin-top: 1em">Examples</p>

<pre style="margin-left:11%; margin-top: 1em"> SingleRequest: Yes</pre>



<p style="margin-left:11%; margin-top: 1em"><b>SnmpOptions</b>
<br>
Apart from the per target timeout options, you can also
configure the behaviour of the snmpget process on a more
profound level. SnmpOptions accepts a hash of options. The
following options are currently supported:</p>

<pre style="margin-left:11%; margin-top: 1em"> timeout                   =&gt; $default_timeout,
 retries                   =&gt; $default_retries,
 backoff                   =&gt; $default_backoff,
 default_max_repetitions   =&gt; $max_repetitions,
 use_16bit_request_ids     =&gt; 1,
 lenient_source_port_matching =&gt; 0,
 lenient_source_address_matching =&gt; 1</pre>


<p style="margin-left:11%; margin-top: 1em">The values
behind the options indicate the current default value. Note
that these settings <small>OVERRIDE</small> the per target
timeout settings.</p>

<p style="margin-left:11%; margin-top: 1em">A per-target
SnmpOptions[] keyword will override the global settings.
That keyword is primarily for SNMPv3.</p>

<p style="margin-left:11%; margin-top: 1em">The 16bit
request ids are the only way to query the broken
<small>SNMP</small> implementation of <small>SMC</small>
Barricade routers.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> SnmpOptions: retries =&gt; 2, only_ip_address_matching =&gt; 0</pre>


<p style="margin-left:11%; margin-top: 1em">Note that
<small>AS/400</small> snmp seems to be broken in a way which
prevents mrtg from working with it unless</p>

<pre style="margin-left:11%; margin-top: 1em"> SnmpOptions: lenient_source_port_matching =&gt; 1</pre>


<p style="margin-left:11%; margin-top: 1em">is set.</p>

<p style="margin-left:11%; margin-top: 1em"><b>IconDir</b>
<br>
If you want to keep the mrtg icons in someplace other than
the working (or imagedir) directory, use the <i>IconDir</i>
variable for defining the url of the icons directory.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> IconDir: /mrtgicons/</pre>



<p style="margin-left:11%; margin-top: 1em"><b>LoadMIBs</b>
<br>
Load the <small>MIB</small> file(s) specified and make its
OIDs available as symbolic names. For better efficiancy, a
cache of MIBs is maintained in the WorkDir.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> LoadMIBs: /dept/net/mibs/netapp.mib,/usr/local/lib/ft100m.mib</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Language</b>
<br>
Switch output format to the selected Language (Check the
<i>translate</i> directory to see which languages are
supported at the moment. In this directory you can also find
instructions on how to create new translations).</p>

<p style="margin-left:11%; margin-top: 1em">Currently the
following laguages are supported:</p>

<p style="margin-left:11%; margin-top: 1em">big5 brazilian
bulgarian catalan chinese croatian czech danish dutch eucjp
french galician gb gb2312 german greek hungarian icelandic
indonesia iso2022jp italian korean lithuanian malay
norwegian polish portuguese romanian russian russian1251
serbian slovak slovenian spanish swedish turkish
ukrainian</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Language: danish</pre>



<p style="margin-left:11%; margin-top: 1em"><b>LogFormat</b>
<br>
Setting LogFormat to &rsquo;rrdtool&rsquo; in your mrtg.cfg
file enables rrdtool mode. In rrdtool mode, mrtg relies on
<b>rrdtool</b> to do its logging. See mrtg-rrd.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> LogFormat: rrdtool</pre>


<p style="margin-left:11%; margin-top: 1em"><b>LibAdd</b>
<br>
If you are using rrdtool mode and your <b>rrdtool</b> Perl
module (RRDs.pm) is not installed in a location where perl
can find it on its own, you can use LibAdd to supply an
appropriate path.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> LibAdd: /usr/local/rrdtool/lib/perl/</pre>


<p style="margin-left:11%; margin-top: 1em"><b>PathAdd</b>
<br>
If the <b>rrdtool</b> executable can not be found in the
normal <tt>&quot;PATH&quot;</tt>, you can use this keyword
to add a suitable directory to your path.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> PathAdd: /usr/local/rrdtool/bin/</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDCached</b>
<br>
If you are running RRDTool 1.4 or later with
<b>rrdcached</b>, then you can configure <small>MRTG</small>
to take advantage of this for updates, either by using the
<small>RRDCACHED_ADDRESS</small> environment variable, or by
setting the RRDCached keyword in the configuration file.
Note that, if both are set, the configuration file keyword
will take precedence.</p>

<p style="margin-left:11%; margin-top: 1em">Only
<small>UNIX</small> domain sockets are fully supported prior
to RRDTool v1.5, and you should note that using RRDCached
mode will disable all Threshold checking normally done by
<small>MRTG</small> . Appropriate warning messages will be
printed if necessary.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDCached: unix:/var/tmp/rrdcached.sock
 RRDCached: localhost:42217</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RunAsDaemon</b>
<br>
The RunAsDaemon keyword enables daemon mode operation. The
purpose of daemon mode is that <small>MRTG</small> is
launched once and not repeatedly (as it is with cron). This
behavior saves computing resourses as loading and parsing of
configuration files happens only once on startup, and if the
configuration file is modified.</p>

<p style="margin-left:11%; margin-top: 1em">Using daemon
mode <small>MRTG</small> itself is responible for timing the
measurement intervals. Therfore its important to set the
Interval keyword to an apropiate value.</p>

<p style="margin-left:11%; margin-top: 1em">Note that when
using daemon mode <small>MRTG</small> should no longer be
started from cron as each new process runs forever. Instead
<small>MRTG</small> should be started from the command
prompt or by a system startup script.</p>

<p style="margin-left:11%; margin-top: 1em">If you want
mrtg to run under a particular user and group (it is not
recomended to run <small>MRTG</small> as root) then you can
use the <b>&minus;&minus;user=</b><i>user_name</i> and
<b>&minus;&minus;group=</b><i>group_name</i> options on the
mrtg commandline.</p>

<pre style="margin-left:11%; margin-top: 1em"> mrtg &minus;&minus;user=mrtg_user &minus;&minus;group=mrtg_group mrtg.cfg</pre>


<p style="margin-left:11%; margin-top: 1em">Also note that
in daemon mode restarting the process is required in order
to activate changes in the config file.</p>

<p style="margin-left:11%; margin-top: 1em">Under
<small>UNIX</small> , the Daemon switch causes mrtg to fork
into background after checking its config file. On Windows
<small>NT</small> the <small>MRTG</small> process will
detach from the console, but because the
<small>NT/2000</small> shell waits for its children you have
to use this special start sequence when you launch the
program:</p>

<pre style="margin-left:11%; margin-top: 1em"> start /b perl mrtg mrtg.cfg</pre>


<p style="margin-left:11%; margin-top: 1em">You may have to
add path information equal to what you add when you run mrtg
from the commandline.</p>

<p style="margin-left:11%; margin-top: 1em">Example</p>

<pre style="margin-left:11%; margin-top: 1em"> RunAsDaemon: Yes
 Interval:    5</pre>


<p style="margin-left:11%; margin-top: 1em">This makes
<small>MRTG</small> run as a daemon beginning data
collection every 5 minutes</p>

<p style="margin-left:11%; margin-top: 1em">If you are
daemontools and still want to run mrtg as a daemon you can
additionally specify</p>

<pre style="margin-left:11%; margin-top: 1em"> NoDetach:     Yes</pre>


<p style="margin-left:11%; margin-top: 1em">this will make
mrtg run but without detaching it from the terminal.</p>

<p style="margin-left:11%; margin-top: 1em">If the
modification date on the configuration file changes during
operation, then <small>MRTG</small> will re-read the
configuration on the next polling cycle. Note that sub-files
which are included from the main configuration do not have
their modification times monitored, only the top-level file
is so checked.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ConversionCode</b>
<br>
Some devices may produce non-numeric values that would
nevertheless be useful to graph with <small>MRTG</small> if
those values could be converted to numbers. The
ConversionCode keyword specifies the path to a file
containing Perl code to perform such conversions. The code
in this file must consist of one or more Perl subroutines.
Each subroutine must accept a single string argument and
return a single numeric value. When RRDtool is in use, a
decimal value may be returned. When the name of one of these
subroutines is specified in a target definition (see below),
<small>MRTG</small> calls it twice for that target, once to
convert the the input value being monitored and a second
time to convert the output value. The subroutine must return
an undefined value if the conversion fails. In case of
failure, a warning may be posted to the <small>MRTG</small>
log file using Perl&rsquo;s warn function.
<small>MRTG</small> imports the subroutines into a separate
name space (package MRTGConversion), so the user need not
worry about pollution of <small>MRTG</small> &rsquo;s global
name space. <small>MRTG</small> automatically prepends this
package declaration to the user-supplied code.</p>

<p style="margin-left:11%; margin-top: 1em">Example:
Suppose a particular <small>OID</small> returns a character
string whose length is proportional to the value to be
monitored. To convert this string to a number that can be
graphed by <small>MRTG</small> , create a file arbitrarily
named &quot;MyConversions.pl&quot; containing the following
code:</p>

<pre style="margin-left:11%; margin-top: 1em"> # Return the length of the string argument
 sub Length2Int {
   my $value = shift;
   return length( $value );
 }</pre>


<p style="margin-left:11%; margin-top: 1em">Then include
the following global keyword in the <small>MRTG</small>
configuration file (assuming that the conversion code file
is saved in the mrtg/bin directory along with mrtg
itself):</p>

<pre style="margin-left:11%; margin-top: 1em"> ConversionCode: MyConversions.pl</pre>


<p style="margin-left:11%; margin-top: 1em">This will cause
<small>MRTG</small> to include the definition of the
subroutine Length2Int in its execution environment.
Length2Int can then be invoked on any target by appending
&quot;|Length2Int&quot; to the target definition as
follows:</p>

<pre style="margin-left:11%; margin-top: 1em"> Target[myrouter]: 1.3.6.1.4.1.999.1&amp;1.3.6.1.4.1.999.1:public@mydevice|Length2Int</pre>


<p style="margin-left:11%; margin-top: 1em">See
&quot;Extended Host Name Syntax&quot; below for complete
target definition syntax information.</p>

<h2>PER TARGET CONFIGURATION
<a name="PER TARGET CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each monitoring
target must be identified by a unique name. This name must
be appended to each parameter belonging to the same target.
The name will also be used for naming the generated
webpages, logfiles and images for this target.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Target</b>
<br>
With the <i>Target</i> keyword you tell mrtg what it should
monitor. The <i>Target</i> keyword takes arguments in a wide
range of formats: <br>
Basic</p>

<p style="margin-left:17%;">The most basic format is
&quot;port:community@router&quot; This will generate a
traffic graph for the interface &rsquo;port&rsquo; of the
host &rsquo;router&rsquo; (dns name or <small>IP</small>
address) and it will use the community
&rsquo;community&rsquo; (snmp password) for the snmp
query.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: 2:public@wellfleet&minus;fddi.domain</pre>


<p style="margin-left:17%; margin-top: 1em">If your
community contains a &quot;@&quot; or a &quot; &quot; these
characters must be escaped with a &quot;\&quot;.</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[bla]: 2:stu\ pi\@d@router</pre>


<p style="margin-left:11%;">SNMPv2c</p>

<p style="margin-left:17%;">If you have a fast router you
might want to try to poll the ifHC* counters. This feature
gets activated by switching to SNMPv2c. Unfortunately not
all devices support SNMPv2c yet. If it works, this will
prevent your counters from wraping within the 5 minute
polling interval, since we now use 64 bit instead of the
normal 32 bit.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: 2:public@router1:::::2</pre>


<p style="margin-left:11%;">SNMPv3</p>

<p style="margin-left:17%;">As an alternative to SNMPv2c,
SNMPv3 provides access to the ifHC* counters, along with
encryption. Not all devices support SNMPv3, and you will
also need the perl Net::SNMP library in order to use it. It
is recommended that cfgmaker be used to generate
configurations involving SNMPv3, as it will check if the
Net::SNMP library is loadable, and will switch to SNMPv2c if
v3 is unavailable.</p>


<p style="margin-left:17%; margin-top: 1em"><small>SNMP</small>
v3 requires additional authentication parameters, passed
using the SnmpOptions[] per-target keyword.</p>

<p style="margin-left:17%; margin-top: 1em">Example: <br>
Target[myrouter]: 2:router1:::::3 <br>
SnmpOptions[myrouter]: username=&gt;&rsquo;user1&rsquo;</p>

<p style="margin-left:11%;">noHC</p>

<p style="margin-left:17%;">Not all routers that support
SNMPv2 or SNMPv3 provide the ifHC* counters on every
interface. The noHC[] per-target keyword signals that the
low-speed counters ifInOctets and ifOutOctets should be
queried instead. cfgmaker will automatically insert this tag
if SNMPv2 or SNMPv3 is specified but the ifHC* counters are
unavailable.</p>

<p style="margin-left:17%; margin-top: 1em">Example: <br>
Target[myrouter]: #Bri0:router1:::::3 <br>
SnmpOptions[myrouter]: username=&gt;&rsquo;user1&rsquo; <br>
noHC[myrouter]: yes</p>

<p style="margin-left:11%;">Reversing</p>

<p style="margin-left:17%;">Sometimes you are sitting on
the wrong side of the link, and you would like to have mrtg
report Incoming traffic as Outgoing and vice versa. This can
be achieved by adding the &rsquo;&minus;&rsquo; sign in
front of the &quot;Target&quot; description. It flips the
incoming and outgoing traffic rates.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[ezci]: &minus;1:public@ezci&minus;ether.domain</pre>


<p style="margin-left:11%;">Explicit OIDs</p>

<p style="margin-left:17%;">You can also explicitly define
which <small>OID</small> to query by using the following
syntax &rsquo;OID_1&amp;OID_2:community@router&rsquo; The
following example will retrieve error counts for input and
output on interface 1. <small>MRTG</small> needs to graph
two variables, so you need to specify two <small>OID</small>
&rsquo;s such as temperature and humidity or error input and
error output.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: 1.3.6.1.2.1.2.2.1.14.1&amp;1.3.6.1.2.1.2.2.1.20.1:public@myrouter</pre>


<p style="margin-left:11%;"><small>MIB</small>
Variables</p>

<p style="margin-left:17%;"><small>MRTG</small> knows a
number of symbolic <small>SNMP</small> variable names. See
the file mibhelp.txt for a list of known names. One example
are the ifInErrors and ifOutErrors. This means you can
specify the above as:</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: ifInErrors.1&amp;ifOutErrors.1:public@myrouter</pre>


<p style="margin-left:11%;">SnmpWalk</p>

<p style="margin-left:17%;">It may be that you want to
monitor an snmp object that is only reachable by
&rsquo;walking&rsquo;. You can get mrtg to walk by
prepending the <small>OID</small> with the string
<b>WaLK</b> or if you want a particular entry from the table
returned by the walk you can use <b>WaLK</b><i>x</i> where
<i>x</i> is a number starting from 0 (!).</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em">  Target[myrouter]: WaLKstrangeOid.1&amp;WaLKstrangeOid.2:public@myrouter
  Target[myrouter]: WaLK3strangeOid.1&amp;WaLK4strangeOid.2:public@myrouter</pre>


<p style="margin-left:11%;">SnmpGetNext</p>

<p style="margin-left:17%;">A special case of an snmp
object that is only reachable by &rsquo;walking&rsquo;
occurs when a single snmpgetnext will return the correct
value, but snmpwalk fails. This may occur with snmp V2 or
V3, as the snmpgetbulk method is used in these versions. You
can get mrtg to use getnext instead of getbulk by prepending
the <small>OID</small> with the string <b>GeTNEXT</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em">  Target[myrouter]: GeTNEXTstrangeOid&amp;GeTNEXTstrangeOid:public@myrouter</pre>


<p style="margin-left:11%;">Counted <small>SNMP</small>
Walk</p>

<p style="margin-left:17%;">In other situations, an
snmpwalk is needed to count rows, but the actual data is
uninteresting. For example, counting the number of
mac-addresses in a <small>CAM</small> table, or the number
of simultaneous dialup sessions. You can get
<small>MRTG</small> to count the number of instances by
prepending the <small>OID</small> with the string
<b>CnTWaLK</b>. The following will retrieve the number of
simultaneous <small>VOIP</small> calls on some routers:</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em">   Target[myrouter]: CnTWaLK1.3.6.1.4.1.9.10.55.1.1.1.1.3&amp;CnTWaLK1.3.6.1.4.1.9.10.55.1.1.1.1.3:public@myrouter</pre>


<p style="margin-left:11%;">Interface by
<small>IP</small></p>

<p style="margin-left:17%;">Sometimes <small>SNMP</small>
interface index can change, like when new interfaces are
added or removed. This can cause all Target entries in your
config file to become offset, causing <small>MRTG</small> to
graphs wrong instances etc. <small>MRTG</small> supports
<small>IP</small> address instead of ifindex in target
definition. Then <small>MRTG</small> will query snmp device
and try to map <small>IP</small> address to the current
ifindex. You can use <small>IP</small> addresses in every
type of target definition by adding <small>IP</small>
address of the numbered interface after <small>OID</small>
and separation char &rsquo;/&rsquo;.</p>

<p style="margin-left:17%; margin-top: 1em">Make sure that
the given <small>IP</small> address is used on your same
target router, especially when graphing two different OIDs
and/or interface split by &rsquo;&amp;&rsquo; delimiter.</p>

<p style="margin-left:17%; margin-top: 1em">You can tell
cfgmaker to generate such references with the option
<b>&minus;&minus;ifref=ip</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: /1.2.3.4:public@wellfleet&minus;fddi.domain
 Target[ezci]: &minus;/1.2.3.4:public@ezci&minus;ether.domain
 Target[myrouter]: ifInErrors/1.2.3.4&amp;ifOutErrors/1.2.3.4:public@myrouter</pre>


<p style="margin-left:11%;">Interface by Description</p>

<p style="margin-left:17%;">If you can not use
<small>IP</small> addresses you might want to use the
interface names. This works similar to the <small>IP</small>
address aproach except that the prefix to use is a \ instead
of a /</p>

<p style="margin-left:17%; margin-top: 1em">You can tell
cfgmaker to generate such references with the option
<b>&minus;&minus;ifref=descr</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: \My&minus;Interface2:public@wellfleet&minus;fddi.domain
 Target[ezci]: &minus;\My&minus;Interface2:public@ezci&minus;ether.domain
 Target[myrouter]: ifInErrors\My&minus;If2&amp;ifOutErrors\My&minus;If3:public@myrouter</pre>


<p style="margin-left:17%; margin-top: 1em">If your
description contains a &quot;&amp;&quot;, a &quot;:&quot;, a
&quot;@&quot; or a &quot; &quot; you can include them but
you must escape with a backlash:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: \fun\:\ ney\&amp;ddd:public@hello.router</pre>


<p style="margin-left:11%;">Interface by Name</p>

<p style="margin-left:17%;">This is the only sensible way
to reference the interfaces of your switches.</p>

<p style="margin-left:17%; margin-top: 1em">You can tell
cfgmaker to generate such references with the option
<b>&minus;&minus;ifref=name</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: #2/11:public@wellfleet&minus;fddi.domain
 Target[ezci]: &minus;#2/11:public@ezci&minus;ether.domain
 Target[myrouter]: ifInErrors#3/7&amp;ifOutErrors#3/7:public@myrouter</pre>


<p style="margin-left:17%; margin-top: 1em">If your
description contains a &quot;&amp;&quot;, a &quot;:&quot;, a
&quot;@&quot; or a &quot; &quot; you can include them but
you must escape with a backlash:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: #\:\ fun:public@hello.router</pre>


<p style="margin-left:17%; margin-top: 1em">Note that the #
sign will be interpreted as a comment character if it is the
first non white-space character on the line.</p>

<p style="margin-left:11%;">Interface by Ethernet
Address</p>

<p style="margin-left:17%;">When the <small>SNMP</small>
interface index changes, you can key that interface by its
&rsquo;Physical Address&rsquo;, sometimes called a
&rsquo;hard address&rsquo;, which is the <small>SNMP</small>
variable &rsquo;ifPhysAddress&rsquo;. Internally,
<small>MRTG</small> matches the Physical Address from the
*.cfg file to its current index, and then uses that index
for the rest of the session.</p>

<p style="margin-left:17%; margin-top: 1em">You can use the
Physical Address in every type of target definition by
adding the Physical Address after the <small>OID</small> and
the separation char &rsquo;!&rsquo; (analogous to the
<small>IP</small> address option). The Physical address is
specified as &rsquo;&minus;&rsquo; delimited octets, such as
&quot;0a&minus;0&minus;f1&minus;5&minus;23&minus;18&quot;
(omit the double quotes). Note that some routers use the
same Hardware Ethernet Address for all of their Interfaces
which prevents unique interface identification. Mrtg will
notice such problems and alert you.</p>

<p style="margin-left:17%; margin-top: 1em">You can tell
cfgmaker to generate configuration files with hardware
ethernet address references by using the option
<b>&minus;&minus;ifref=eth</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: !0a&minus;0b&minus;0c&minus;0d:public@wellfleet&minus;fddi.domain
 Target[ezci]: &minus;!0&minus;f&minus;bb&minus;05&minus;71&minus;22:public@ezci&minus;ether.domain
 Target[myrouter]: 1.3.6.1.2.1.2.2.1.14!0a&minus;00&minus;10&minus;23&minus;44&minus;51&amp; *BREAK*
            1.3.6.1.2.1.2.2.1.14!0a&minus;00&minus;10&minus;23&minus;44&minus;51:public@myrouter
 Target[myrouter]: ifInErrors!0a&minus;00&minus;10&minus;23&minus;44&minus;51&amp; *BREAK*
            ifOutErrors!0a&minus;00&minus;10&minus;23&minus;44&minus;51:public@myrouter</pre>


<p style="margin-left:17%; margin-top: 1em">Join the lines
at *BREAK* ...</p>

<p style="margin-left:11%;">Interface by Type</p>

<p style="margin-left:17%;">It seems that there are devices
that try to defy all monitoring efforts: the interesting
interfaces have neither ifName nor a constant ifDescr not to
mention a persistent ifIndex. The only way to get a constant
mapping is by looking at the interface type, because the
interface you are interested in is unique in the device you
are looking at ...</p>

<p style="margin-left:17%; margin-top: 1em">You can tell
cfgmaker to generate such references with the option
<b>&minus;&minus;ifref=type</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: %13:public@wellfleet&minus;fddi.domain
 Target[ezci]: &minus;%13:public@ezci&minus;ether.domain
 Target[myrouter]: ifInErrors%13&amp;ifOutErrors%14:public@myrouter</pre>


<p style="margin-left:11%;">Extended positioning of
ifIndex</p>

<p style="margin-left:17%;">There are OIDs that contain the
interface index at some inner position within the
<small>OID</small> . To use the above mentioned Interface by
IP/Description/Name/Type methods in the target definition
the keyword &rsquo;IndexPOS&rsquo; can be used to indicate
the position of ifIndex. If &rsquo;IndexPOS&rsquo; is not
used the ifIndex will be appended at the end of the
<small>OID</small> .</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: OID.IndexPOS.1/1.2.3.4&amp;OID.IndexPOS.1/1.2.3.4:public@myrouter</pre>


<p style="margin-left:17%; margin-top: 1em">Replace
<small>OID</small> by your numeric <small>OID</small> .</p>

<p style="margin-left:11%;">Extended Host Name Syntax</p>

<p style="margin-left:17%;">In all places where
&lsquo;&lsquo;community@router&rsquo;&rsquo; is accepted,
you can add additional parameters for the
<small>SNMP</small> communication using colon-separated
suffixes. You can also append a pipe symbol ( | ) and the
name of a numeric conversion subroutine as described under
the global keyword &quot;ConversionCode&quot; above. The
full syntax is as follows:</p>

<pre style="margin-left:17%; margin-top: 1em"> community@router[:[port][:[timeout][:[retries][:[backoff][:[version]][|name]]]]]</pre>


<p style="margin-left:17%; margin-top: 1em">where the
meaning of each parameter is as follows: <br>
port</p>

<p style="margin-left:23%;">the <small>UDP</small> port
under which to contact the <small>SNMP</small> agent
(default: 161)</p>

<p style="margin-left:23%; margin-top: 1em">The complete
syntax of the port parameter is</p>

<pre style="margin-left:23%; margin-top: 1em"> remote_port[!local_address[!local_port]]</pre>


<p style="margin-left:23%; margin-top: 1em">Some machines
have additional security features that only allow
<small>SNMP</small> queries to come from certain
<small>IP</small> addresses. If the host doing the query has
multiple interface, it may be necessary to specify the
interface the query should come from.</p>

<p style="margin-left:23%; margin-top: 1em">The port
parameter allows the specification of the port of the
machine being queried. In addition, the <small>IP</small>
address (or hostname) and port of the machine doing the
query may be specified.</p>

<p style="margin-left:23%; margin-top: 1em">Examples:</p>

<pre style="margin-left:23%; margin-top: 1em"> somehost
 somehost:161
 somehost:161!192.168.2.4!4000 use 192.168.2.4 and port 4000 as source
 somehost:!192.168.2.4 use 192.168.2.4 as source
 somehost:!!4000 use port 4000 as source</pre>


<p style="margin-left:17%;">timeout</p>

<p style="margin-left:23%;">initial timeout for
<small>SNMP</small> queries, in seconds (default: 2.0)</p>

<p style="margin-left:17%;">retries</p>

<p style="margin-left:23%;">number of times a timed-out
request will be retried (default: 5)</p>

<p style="margin-left:17%;">backoff</p>

<p style="margin-left:23%;">factor by which the timeout is
multiplied on every retry (default: 1.0).</p>

<p style="margin-left:17%;">version</p>

<p style="margin-left:23%;">for <small>SNMP</small>
version. If you have a fast router you might want to put a
&rsquo;2&rsquo; here. For authenticated or encrypted
<small>SNMP</small> , you can try to put a &rsquo;3&rsquo;
here. This will make mrtg try to poll the 64 bit counters
and thus prevent excessive counter wrapping. Not all routers
support this though. <small>SNMP</small> v3 requires
additional setup, see SnmpOptions[] for full details.</p>

<p style="margin-left:23%; margin-top: 1em">Example:</p>

<pre style="margin-left:23%; margin-top: 1em"> 3:public@router1:::::2</pre>


<p style="margin-left:17%;">name</p>

<p style="margin-left:23%;">the name of the subroutine that
<small>MRTG</small> will call to convert the input and
output values to integers. See the complete example under
the global keyword &quot;ConversionCode&quot; above.</p>

<p style="margin-left:23%; margin-top: 1em">Example:</p>

<pre style="margin-left:23%; margin-top: 1em"> 1.3.6.1.4.1.999.1&amp;1.3.6.1.4.1.999.2:public@mydevice:161::::2|Length2Int</pre>


<p style="margin-left:23%; margin-top: 1em">This would
retrieve values from the <small>OID</small>
1.3.6.1.4.1.999.1 for input and .2 for output on mydevice
using <small>UDP</small> port 161 and <small>SNMP</small>
version 2, and would execute the user-defined numeric
conversion subroutine Length2Int to convert those values to
integers.</p>

<p style="margin-left:17%; margin-top: 1em">A value that
equals the default value can be omitted. Trailing colons can
be omitted, too. The pipe symbol followed by the name
parameter, if present, must come at the end. There must be
no spaces around the colons or pipe symbol.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em">  Target[ezci]: 1:public@ezci&minus;ether.domain:9161::4</pre>


<p style="margin-left:17%; margin-top: 1em">This would
refer to the input/output octet counters for the interface
with <i>ifIndex 1</i> on <i>ezci&minus;ether.domain</i>, as
known by the <small>SNMP</small> agent listening on
<small>UDP</small> port 9161. The standard initial timeout
(2.0 seconds) is used, but the number of retries is set to
four. The backoff value is the default.</p>

<p style="margin-left:11%;">Numeric IPv6 addresses</p>

<p style="margin-left:17%;">If IPv6 is enabled you may also
specify a target using its IPv6 address. To avoid ambiguity
with the port number, numeric IPv6 addresses must be placed
in square brackets.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[IPv6test]: 2:public@[2001:760:4::]:6161::4</pre>


<p style="margin-left:11%;">External Monitoring Scripts</p>

<p style="margin-left:17%;">If you want to monitor
something which does not provide data via snmp you can use
some external program to do the data gathering.</p>

<p style="margin-left:17%; margin-top: 1em">The external
command must return 4 lines of output: <br>
Line 1</p>

<p style="margin-left:23%;">current state of the first
variable, normally &rsquo;incoming bytes count&rsquo;</p>

<p style="margin-left:17%;">Line 2</p>

<p style="margin-left:23%;">current state of the second
variable, normally &rsquo;outgoing bytes count&rsquo;</p>

<p style="margin-left:17%;">Line 3</p>

<p style="margin-left:23%;">string (in any human readable
format), telling the uptime of the target.</p>

<p style="margin-left:17%;">Line 4</p>

<p style="margin-left:23%;">string, telling the name of the
target.</p>

<p style="margin-left:17%; margin-top: 1em">Depending on
the type of data your script returns you might want to use
the &rsquo;gauge&rsquo; or &rsquo;absolute&rsquo; arguments
for the <i>Options</i> keyword.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: `/usr/local/bin/df2mrtg /dev/dsk/c0t2d0s0`</pre>


<p style="margin-left:17%; margin-top: 1em">Note the use of
the backticks (&lsquo;), not apostrophes (&rsquo;) around
the command.</p>

<p style="margin-left:17%; margin-top: 1em">If you want to
use a backtick in the command name this can be done but you
must escape it with a backslash ...</p>

<p style="margin-left:17%; margin-top: 1em">If your script
does not have any data to return but does not want mrtg to
complain about invalid data, it can return &rsquo;
<small>UNKNOWN</small> &rsquo; instead of a number. Note
though that only rrdtool is realy equipped to handle unknown
data well.</p>

<p style="margin-left:11%;">Multi Target Syntax</p>

<p style="margin-left:17%;">You can also combine several
target definitions in a mathematical expression. Any
syntactically correct expression that the Perl interpreter
can evaluate to will work. An expression could be used, for
example, to aggregate both B channels in an
<small>ISDN</small> connection or to calculate the
percentage hard disk utilization of a server from the
absolute used space and total capacity.</p>

<p style="margin-left:17%; margin-top: 1em">Examples:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[myrouter]: 2:public@wellfleetA + 1:public@wellfleetA
 Target[myrouter]: .1.3.6.1.4.1.999.1&amp;.1.3.6.1.4.1.999.2:public@mydevice /
     .1.3.6.1.4.1.999.3&amp;.1.3.6.1.4.1.999.4:public@mydevice * 100</pre>


<p style="margin-left:17%; margin-top: 1em">Note that
whitespace must surround each target definition in the
expression. Target definitions themselves must not contain
whitespace, except in interface descriptions and interface
names, where each whitespace character is escaped by a
backslash.</p>


<p style="margin-left:17%; margin-top: 1em"><small>MRTG</small>
automatically rounds the result of the expression to an
integer unless RRDTool logging is in use and the gauge
option is in effect for the target. Internally
<small>MRTG</small> uses Perl&rsquo;s Math::BigFloat package
to calculate the result of the expression with 40 digits of
precision. Even in extreme cases, where, for example, you
take the difference of two 64&minus;bit integers, the result
of the expression should be accurate.</p>

<p style="margin-left:11%;"><small>SNMP</small> Request
Optimization</p>

<p style="margin-left:17%;"><small>MRTG</small> is designed
to economize on its <small>SNMP</small> requests. Where a
target definition appears more than once in the
configuration file, <small>MRTG</small> requests the data
from the device only once per round of data collection and
uses the collected data for each instance of a particular
target. Recognition of two target definitions as being
identical is based on a simple string match rather than any
kind of deeper semantic analysis.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> Target[Targ1]: 1:public@CiscoA
 Target[Targ2]: 2:public@CiscoA
 Target[Targ3]: 1:public@CiscoA + 2:public@CiscoA
 Target[Targ4]: 1:public@CISCOA</pre>


<p style="margin-left:17%; margin-top: 1em">This results in
a total of three <small>SNMP</small> requests. Data for
1:public@CiscoA and 2:public@CiscoA are requested only once
each, and used for Targ1, Targ2, and Targ3. Targ4 causes
another <small>SNMP</small> request for 1:public@CISCOA,
which is not recognized as being identical to
1:public@CiscoA.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MaxBytes</b>
<br>
The maximum value either of the two variables monitored are
allowed to reach. For monitoring router traffic this is
normally the bytes per second this interface port can
carry.</p>

<p style="margin-left:11%; margin-top: 1em">If a number
higher than <i>MaxBytes</i> is returned, it is ignored. Also
read the section on <i>AbsMax</i> for further info. The
<i>MaxBytes</i> value is also used in calculating the Y
range for unscaled graphs (see the section on
<i>Unscaled</i>).</p>

<p style="margin-left:11%; margin-top: 1em">Since most
links are rated in bits per second, you need to divide their
maximum bandwidth (in bits) by eight (8) in order to get
bytes per second. This is very important to make your
unscaled graphs display realistic information. T1 = 193000,
56K = 7000, 10 <small>MB</small> Ethernet = 1250000, 100
<small>MB</small> Ethernet = 12500000. The <i>MaxBytes</i>
value will be used by mrtg to decide whether it got a valid
response from the router.</p>

<p style="margin-left:11%; margin-top: 1em">If you need two
different MaxBytes values for the two monitored variables,
you can use MaxBytes1 and MaxBytes2 instead of MaxBytes.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> MaxBytes[myrouter]: 1250000</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Title</b>
<br>
Title for the <small>HTML</small> page which gets generated
for the graph.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Title[myrouter]: Traffic Analysis for Our Nice Company</pre>


<h2>OPTIONAL PER TARGET KEYWORDS
<a name="OPTIONAL PER TARGET KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>PageTop</b>
<br>
Things to add to the top of the generated
<small>HTML</small> page. Note that you can have several
lines of text as long as the first column is empty.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
continuation lines will all end up on the same line in the
html page. If you want linebreaks in the generated html use
the &rsquo;\n&rsquo; sequence.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> PageTop[myrouter]: &lt;H1&gt;Traffic Analysis for ETZ C95.1&lt;/H1&gt;
   Our Campus Backbone runs over an FDDI line\n
   with a maximum transfer rate of 12.5 megabytes per
   Second.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RouterUptime</b>
<br>
In cases where you calculate the used bandwidth from several
interfaces you normally don&rsquo;t get the router uptime
and router name displayed on the web page.</p>

<p style="margin-left:11%; margin-top: 1em">If these
interfaces are on the same router and the uptime and name
should be displayed you have to specify its community and
address again with the <i>RouterUptime</i> keyword.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
use a special <small>OID</small> for querying the router
uptime, use prepend the oid.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Target[kacisco.comp.edu]: 1:public@194.64.66.250 + 2:public@194.64.66.250
 RouterUptime[kacisco.comp.edu]: public@194.64.66.250
 RouterUptime[kacisco.comp.edu]: hrSystemUptime.0:public@194.64.66.250</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RouterName</b>
<br>
If the default name of the router is
incorrect/uninformative, you can use RouterName to specify a
different <small>OID</small> on either the same or a
different host.</p>

<p style="margin-left:11%; margin-top: 1em">A practical
example: sysName on BayTech <small>DS72</small> units always
display &quot;ds72&quot;, no matter what you set the Unit
<small>ID</small> to be. Instead, the Unit <small>ID</small>
is stored at 1.3.6.1.4.1.4779.1.1.3.0, so we can have
<small>MRTG</small> display this instead of sysName.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RouterName[kacisco.comp.edu]: 1.3.6.1.4.1.4779.1.1.3.0</pre>


<p style="margin-left:11%; margin-top: 1em">A different
<small>OID</small> on a different host can also be
specified:</p>

<pre style="margin-left:11%; margin-top: 1em"> RouterName[kacisco.comp.edu]: 1.3.6.1.4.1.4779.1.1.3.0:public@194.64.66.251</pre>



<p style="margin-left:11%; margin-top: 1em"><b>MaxBytes1</b>
<br>
Same as MaxBytes, for variable 1.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MaxBytes2</b>
<br>
Same as MaxBytes, for variable 2.</p>


<p style="margin-left:11%; margin-top: 1em"><b>IPv4Only</b>
<br>
Many IPv6 routers do not currently support
<small>SNMP</small> over IPv6 and must be monitored using
IPv4. The IPv4Only option forces mrtg to use IPv4 when
communicating with the target, even if IPv6 is enabled. This
is useful if the target is a hostname with both IPv4 and
IPv6 addresses; without the IPv4Only keyword, monitoring
such a router will not work if IPv6 is enabled.</p>

<p style="margin-left:11%; margin-top: 1em">If set to no
(the default), mrtg will use IPv6 unless the target has no
IPv6 addresses, in which case it will use IPv4. If set to
yes, mrtg will only use IPv4.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
this option is set to yes and the target does not have an
IPv4 address, communication with the target will fail.</p>

<p style="margin-left:11%; margin-top: 1em">This option has
no effect if IPv6 is not enabled.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Target[v4onlyrouter_1]: 1:public@v4onlyrouter
 IPv4Only[v4onlyrouter_1]: Yes</pre>


<p style="margin-left:11%; margin-top: 1em"><b>SnmpOptions
(V3)</b> <br>
SNMPv3 requires a fairly rich set of options. This
per-target keyword allows access to the User Security Model
of SNMPv3. Options are listed in the same syntax as a perl
hash.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Security
Modes</i></p>

<p style="margin-left:11%; margin-top: 1em">SNMPv3 has
three security modes, defined on the device being polled.
For example, on Cisco routers the security mode is defined
by the snmp-server group global configuration command. <br>
NoAuthNoPriv</p>

<p style="margin-left:17%;">Neither Authentication nor
Privacy is defined. Only the Username option is specified
for this mode.</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> SnmpOptions[myrouter]: username=&gt;'user1'</pre>


<p style="margin-left:11%;">AuthNoPriv</p>

<p style="margin-left:17%;">Uses a Username and a password.
The password can be hashed using the snmpkey application, or
passed in plain text along with the ContextEngineID</p>

<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> SnmpOptions[myrouter]: username=&gt;'user1',authpassword=&gt;'example',
   contextengineid=&gt;'80000001110000004000000'</pre>


<p style="margin-left:11%;">Priv</p>

<p style="margin-left:17%;">Both Authentication and Privacy
is defined. The default privacy protocol is des.</p>

<p style="margin-left:17%; margin-top: 1em">Example: <br>
SnmpOptions[myrouter]:
authkey=&gt;&rsquo;0x1e93ab5a396e2af234c8920e61cfe2028072c0e2&rsquo;,
<br>

authprotocol=&gt;&rsquo;sha&rsquo;,privprotocol=&gt;&rsquo;des&rsquo;,username=&gt;&rsquo;user1&rsquo;,
<br>

privkey=&gt;&rsquo;0x498d74940c5872ed387201d74b9b25e2&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em"><i>snmp
options</i></p>

<p style="margin-left:11%; margin-top: 1em">The following
option keywords are recognized: <br>
username</p>

<p style="margin-left:17%;">The user associated with the
User Security Model</p>

<p style="margin-left:11%;">contextname</p>

<p style="margin-left:17%;">An <small>SNMP</small> agent
can define multiple contexts. This keyword allows them to be
polled.</p>

<p style="margin-left:11%;">contextengineid</p>

<p style="margin-left:17%;">A unique 24&minus;byte string
identifying the snmp-agent.</p>

<p style="margin-left:11%;">authpassword</p>

<p style="margin-left:17%;">The plaintext password for a
user in either AuthNoPriv or Priv mode.</p>

<p style="margin-left:11%;">authkey</p>

<p style="margin-left:17%;">A md5 or sha hash of the
plain-text password, along with the engineid. Use the
snmpkey commandline program to generate this hash, or use
Net::SNMP::Security::USM in a script.</p>

<p style="margin-left:11%;">authprotocol {sha|md5}</p>

<p style="margin-left:17%;">The hashing algorithm defined
on the <small>SNMP</small> client. Defaults to md5.</p>

<p style="margin-left:11%;">privpassword</p>

<p style="margin-left:17%;">A plaintext pre-shared key for
encrypting snmp packets in Priv mode.</p>

<p style="margin-left:11%;">privkey</p>

<p style="margin-left:17%;">A hash of the plain-text
pre-shared key, along with the engineid. Use the snmpkey
commandline program to generate this hash, or use
Net::SNMP::Security::USM in a script.</p>

<p style="margin-left:11%;">privprotocol
{des|3desede|aescfb128|aescfb192|aescfb256}</p>

<p style="margin-left:17%;">Specifies the encryption method
defined on the snmp agent. The default is des.</p>


<p style="margin-left:11%; margin-top: 1em"><b>PageFoot</b>
<br>
Things to add to the bottom of the generated
<small>HTML</small> page. Note that you can have several
lines of text as long as the first column is empty.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
continuation lines will all end up on the same line in the
html page. If you want linebreaks in the generated html use
the &rsquo;\n&rsquo; sequence.</p>

<p style="margin-left:11%; margin-top: 1em">The material
will be added just before the &lt;/BODY&gt; tag:</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> PageFoot[myrouter]: Contact &lt;A HREF=&quot;mailto:peter@x.yz&quot;&gt;Peter&lt;/A&gt;
  if you have questions regarding this page</pre>


<p style="margin-left:11%; margin-top: 1em"><b>AddHead</b>
<br>
Use this tag like the <i>PageTop</i> header, but its
contents will be added between &lt;/TITLE&gt; and
&lt;/HEAD&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> AddHead[myrouter]: &lt;link rev=&quot;made&quot; href=&quot;mailto:mrtg@blabla.edu&quot;&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>BodyTag</b>
<br>
BodyTag lets you supply your very own &lt;body ...&gt; tag
for the generated webpages.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> BodyTag[myrouter]: &lt;BODY LEFTMARGIN=&quot;1&quot; TOPMARGIN=&quot;1&quot;
                      BACKGROUND=&quot;/stats/images/bg.neo2.gif&quot;&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>AbsMax</b>
<br>
If you are monitoring a link which can handle more traffic
than the <i>MaxBytes</i> value. Eg, a line which uses
compression or some frame relay link, you can use the
<i>AbsMax</i> keyword to give the absolute maximum value
ever to be reached. We need to know this in order to sort
out unrealistic values returned by the routers. If you do
not set <i>AbsMax</i>, rateup will ignore values higher than
<i>MaxBytes</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> AbsMax[myrouter]: 2500000</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Unscaled</b>
<br>
By default each graph is scaled vertically to make the
actual data visible even when it is much lower than
<i>MaxBytes</i>. With the <i>Unscaled</i> variable you can
suppress this. It&rsquo;s argument is a string, containing
one letter for each graph you don&rsquo;t want to be scaled:
d=day w=week m=month y=year. There is also a special case to
unset the variable completely: n=none. This could be useful
in the event you need to override a global configuration. In
the example scaling for the yearly and the monthly graph are
suppressed.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Unscaled[myrouter]: ym</pre>



<p style="margin-left:11%; margin-top: 1em"><b>WithPeak</b>
<br>
By default the graphs only contain the average values of the
monitored variables &minus; normally the transfer rates for
incoming and outgoing traffic. The following option
instructs mrtg to display the peak 5 minute values in the
[w]eekly, [m]onthly and [y]early graph. In the example we
define the monthly and the yearly graph to contain peak as
well as average values.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<pre style="margin-left:11%; margin-top: 1em"> WithPeak[myrouter]: ym</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Suppress</b>
<br>
By default mrtg produces 4 graphs. With this option you can
suppress the generation of selected graphs. The option value
syntax is analogous to the above two options. In this
example we suppress the yearly graph as it is quite empty in
the beginning.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Suppress[myrouter]: y</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Extension</b>
<br>
By default, mrtg creates .html files. Use this option to
tell mrtg to use a different extension. For example you
could set the extension to php3, then you will be able to
enclose <small>PHP</small> tags into the output (useful for
getting a router name out of a database).</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Extension[myrouter]: phtml</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Directory</b>
<br>
By default, mrtg puts all the files that it generates for
each target (the GIFs, the <small>HTML</small> page, the log
file, etc.) in <i>WorkDir</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>Directory</i> option is specified, the files are instead
put into a directory under <i>WorkDir</i> or Log&minus;,
Image&minus; and HtmlDir). (For example the <i>Directory</i>
option below would cause all the files for a target myrouter
to be put into directory
/usr/tardis/pub/www/stats/mrtg/myrouter/ .)</p>

<p style="margin-left:11%; margin-top: 1em">The directory
must already exist; mrtg will not create it.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> WorkDir: /usr/tardis/pub/www/stats/mrtg
 Directory[myrouter]: myrouter</pre>



<p style="margin-left:11%; margin-top: 1em"><small>NOTE:</small>
the Directory option must always be &rsquo;relative&rsquo;
or bad things will happen.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Clonedirectory</b>
<br>
If the <i>Directory</i> option is specified, the
<i>Clonedirectory</i> option will copy all the contents of
<i>Directory</i> to the <i>Clonedirectory</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> WorkDir: /usr/tardis/pub/www/stats/mrtg
 Directory[myrouter]: myrouter
 Clonedirectory[myrouter]: myclonedirectory</pre>


<p style="margin-left:11%; margin-top: 1em">Optionally the
target name can be changed in the cloning process.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> WorkDir: /usr/tardis/pub/www/stats/mrtg
 Directory[myrouter]: myrouter
 Clonedirectory[myrouter]: myclonedirectory mynewtarget</pre>



<p style="margin-left:11%; margin-top: 1em"><small>NOTE1:</small>
The clone directory must already exist; mrtg will not create
it.</p>


<p style="margin-left:11%; margin-top: 1em"><small>NOTE2:</small>
The Clonedirectory option must also always be
&rsquo;relative&rsquo; or bad things will happen.</p>


<p style="margin-left:11%; margin-top: 1em"><small>NOTE3:</small>
This requires the File::Copy module</p>

<p style="margin-left:11%; margin-top: 1em"><b>XSize and
YSize</b> <br>
By default mrtgs graphs are 100 by 400 pixels wide (plus
some more for the labels. In the example we get almost
square graphs ...</p>

<p style="margin-left:11%; margin-top: 1em">Note: XSize
must be between 20 and 600; YSize must be larger than 20</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> XSize[myrouter]: 300
 YSize[myrouter]: 300</pre>


<p style="margin-left:11%; margin-top: 1em"><b>XZoom and
YZoom</b> <br>
If you want your graphs to have larger pixels, you can
&quot;Zoom&quot; them.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> XZoom[myrouter]: 2.0
 YZoom[myrouter]: 2.0</pre>


<p style="margin-left:11%; margin-top: 1em"><b>XScale and
YScale</b> <br>
If you want your graphs to be actually scaled use
<i>XScale</i> and <i>YScale</i>. (Beware: while this works,
the results look ugly (to be frank) so if someone wants to
fix this: patches are welcome.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> XScale[myrouter]: 1.5
 YScale[myrouter]: 1.5</pre>


<p style="margin-left:11%; margin-top: 1em"><b>YTics and
YTicsFactor</b> <br>
If you want to show more than 4 lines per graph, use YTics.
If you want to scale the value used for the YLegend of these
tics, use YTicsFactor. The default value for YTics is 4 and
the default value for YTicsFactor is 1.0 .</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<p style="margin-left:11%; margin-top: 1em">Suppose you get
values ranging from 0 to 700. You want to plot 7 lines and
want to show 0, 1, 2, 3, 4, 5, 6, 7 instead of 0, 100, 200,
300, 400, 500, 600, 700. You should write then:</p>

<pre style="margin-left:11%; margin-top: 1em">  YTics[myrouter]: 7
  YTicsFactor[myrouter]: 0.01</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Factor</b>
<br>
If you want to multiply all numbers shown below the graph
with a constant factor, use this directive to define it
..</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em">  Factor[as400]: 4096</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Step</b>
<br>
Change the default step from 5 * 60 seconds to something
else (I have not tested this much ...)</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Step[myrouter]: 60</pre>



<p style="margin-left:11%; margin-top: 1em"><b>PNGTitle</b>
<br>
When using rateup for graph generation, this will print the
given title in the graph it generates.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> PNGTitle[myrouter]: WAN Link UK&minus;US</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Options</b>
<br>
The <i>Options</i> Keyword allows you to set some boolean
switches: <br>
growright</p>

<p style="margin-left:17%;">The graph grows to the left by
default. This option flips the direction of growth causing
the current time to be at the right edge of the graph and
the history values to the left of it.</p>

<p style="margin-left:11%;">bits</p>

<p style="margin-left:17%;">All the monitored variable
values are multiplied by 8 (i.e. shown in bits instead of
bytes) ... looks much more impressive :&minus;) It also
affects the &rsquo;factory default&rsquo; labeling and units
for the given target.</p>

<p style="margin-left:11%;">perminute</p>

<p style="margin-left:17%;">All the monitored variable
values are multiplied by 60 (i.e. shown in units per minute
instead of units per second) in case of small values more
accurate graphs are displayed. It also affects the
&rsquo;factory default&rsquo; labeling and units for the
given target.</p>

<p style="margin-left:11%;">perhour</p>

<p style="margin-left:17%;">All the monitored variable
values are multiplied by 3600 (i.e. shown in units per hour
instead of units per second) in case of small values more
accurate graphs are displayed. It also affects the
&rsquo;factory default&rsquo; labeling and units for the
given target.</p>

<p style="margin-left:11%;">noinfo</p>

<p style="margin-left:17%;">Suppress the information about
uptime and device name in the generated webpage.</p>

<p style="margin-left:11%;">nopercent</p>

<p style="margin-left:17%;">Don&rsquo;t print usage
percentages.</p>

<p style="margin-left:11%;">transparent</p>

<p style="margin-left:17%;">Make the background of the
generated gifs transparent.</p>

<p style="margin-left:11%;">integer</p>

<p style="margin-left:17%;">Print summary lines below graph
as integers without commas.</p>

<p style="margin-left:11%;">dorelpercent</p>

<p style="margin-left:17%;">The relative percentage of
IN-traffic to OUT-traffic is calculated and displayed in the
graph as an additional line. Note: Only a fixed scale is
available (from 0 to 100%). Therefore if IN-traffic is
greater than OUT-traffic then 100% is displayed. If you
suspect that your IN-traffic is not always less than or
equal to your OUT-traffic you are urged to not use this
options. Note: If you use this option in combination with
the <i>Colours</i> options, a fifth colour-name colour-value
pair is required there.</p>

<p style="margin-left:11%;">avgpeak</p>

<p style="margin-left:17%;">There are some ISPs who use the
average Peak values to bill their customers. Using this
option <small>MRTG</small> displays these values for each
graph. The value is built by averaging the max 5 minute
traffic average for each &rsquo;step&rsquo; shown in the
graph. For the Weekly graph this means that it builds the
average of all 2 hour intervals 5 minute peak values.
(Confused? Thought so!)</p>

<p style="margin-left:11%;">gauge</p>

<p style="margin-left:17%;">Treat the values gathered from
target as &rsquo;current status&rsquo; measurements and not
as ever incrementing counters. This would be useful to
monitor things like disk space, processor load, temperature,
and the like ...</p>

<p style="margin-left:17%; margin-top: 1em">In the absence
of &rsquo;gauge&rsquo; or &rsquo;absolute&rsquo; options,
<small>MRTG</small> treats variables as a counters and
calculates the difference between the current and the
previous value and divides that by the elapsed time between
the last two readings to get the value to be plotted.</p>

<p style="margin-left:11%;">absolute</p>

<p style="margin-left:17%;">This is for counter type data
sources which reset their value when they are read. This
means that rateup does not have to build the difference
between the current and the last value read from the data
source. The value obtained is still divided by the elapsed
time between the current and the last reading, which makes
it different from the &rsquo;gauge&rsquo; option. Useful for
external data gatherers.</p>

<p style="margin-left:11%;">derive</p>

<p style="margin-left:17%;">If you are using rrdtool as
logger/grapher you can use a third type of data source.
Derive is like counter, except that it is not required to go
<small>UP</small> all the time. It is useful for situations
where the change of some value should be graphed.</p>

<p style="margin-left:11%;">unknaszero</p>

<p style="margin-left:17%;">Log unknown data as zero
instead of the default behaviour of repeating the last value
seen. Be careful with this, often a flat line in the graph
is much more obvious than a line at 0.</p>

<p style="margin-left:11%;">withzeroes</p>

<p style="margin-left:17%;">Normally we ignore all values
which are zero when calculating the average transfer rate on
a line. If this is not desirable use this option.</p>

<p style="margin-left:11%;">noborder</p>

<p style="margin-left:17%;">If you are using rateup to log
data, <small>MRTG</small> will create the graph images.
Normally these images have a shaded border around them. If
you do not want the border to be drawn, enable this option.
This option has no effect if you are not using rateup.</p>

<p style="margin-left:11%;">noarrow</p>

<p style="margin-left:17%;">As with the option above, this
effects rateup graph generation only. Normally rateup will
generate graphs with a small arrow showing the direction of
the data. If you do not want this arrow to be drawn, enable
this option. This option has no effect if you are not using
rateup.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>noi</p></td>
<td width="2%"></td>
<td width="83%">


<p>When using rateup for graph generation, you can use this
option to stop rateup drawing a graph for the
&rsquo;I&rsquo; or first variable. This also removes entries
for this variable in the <small>HTML</small> page
<small>MRTG</small> generates, and will remove the peaks for
this variable if they are enabled. This allows you to hide
this data, or can be very useful if you are only graphing
one line of data rather than two. This option is not
destructive &minus; any data received for the the variable
continued to be logged, it just isn&rsquo;t shown.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>noo</p></td>
<td width="2%"></td>
<td width="83%">


<p>Same as above, except relating to the &rsquo;O&rsquo; or
second variable.</p></td></tr>
</table>

<p style="margin-left:11%;">nobanner</p>

<p style="margin-left:17%;">When using rateup for graph
generation, this option disables <small>MRTG</small> adding
the <small>MRTG</small> banner to the <small>HTML</small>
pages it generates.</p>

<p style="margin-left:11%;">nolegend</p>

<p style="margin-left:17%;">When using rateup for graph
generation, this option will stop <small>MRTG</small> from
creating a legend at the bottom of the <small>HTML</small>
pages it generates.</p>

<p style="margin-left:11%;">printrouter</p>

<p style="margin-left:17%;">When using rateup for graph
generation, this option will print the router name in the
graph it generates. This option is overridden by the value
of PNGTitle if one is given</p>

<p style="margin-left:11%;">pngdate</p>

<p style="margin-left:17%;">When using rateup for graph
generation, this option will print a timestamp in the graph
it generates, including a timezone if one is specified by
the &rsquo;Timezone&rsquo; parameter. This is aequivalent to
setting TimeStrPost[x]: <small>RU</small></p>

<p style="margin-left:11%;">logscale</p>

<p style="margin-left:17%;">The <b>logscale</b> option
causes rateup to display the data with the Y axis scaled
logarithmically. Doing so allows the normal traffic to
occupy the majority of the vertical range, while still
showing any spikes at their full height.</p>


<p style="margin-left:17%; margin-top: 1em"><b>logscale</b>
displays all the available data and will always produce
well-behaved graphs. People often consider a logarithmically
scaled graph counterintuitive, however, and thus hard to
interpret.</p>

<p style="margin-left:11%;">expscale</p>

<p style="margin-left:17%;">The <b>expscale</b> option
causes rateup to display the data with the Y axis scaled
exponentially. Doing so emphasizes small changes at the top
of the scale; this can be useful when graphing values that
fluctuate by a small amount near the top of the scale, such
as line voltage.</p>


<p style="margin-left:17%; margin-top: 1em"><b>expscale</b>
is essentially the inverse of <b>logscale</b>.</p>

<p style="margin-left:11%;">secondmean</p>

<p style="margin-left:17%;">The <b>secondmean</b> option
sets the maximum value on the graph to the mean of the data
greater than the mean of all data. This produces a graph
that focuses more on the typical data, while clipping large
peaks.</p>

<p style="margin-left:17%; margin-top: 1em">Using
<b>secondmean</b> will give a more intutive linearly scaled
graph, but can result in a uselessly high or low scale in
some rare situations (specifically, when the data includes a
large portion of values far from the actual mean)</p>

<p style="margin-left:17%; margin-top: 1em">If a target
includes both <b>logscale</b> and <b>secondmean</b> in the
options, the <b>secondmean</b> takes precedence.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Options[myrouter]: growright, bits</pre>


<p style="margin-left:11%; margin-top: 1em"><b>kilo</b>
<br>
Use this option to change the multiplier value for building
prefixes. Defaultvalue is 1000. This tag is for the special
case that 1kB = 1024B, 1MB = 1024kB and so far.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> kilo[myrouter]: 1024</pre>


<p style="margin-left:11%; margin-top: 1em"><b>kMG</b> <br>
Change the default multiplier prefixes (,k,M,G,T,P). In the
tag <i>ShortLegend</i> define only the basic units. Format:
Comma separated list of prefixed. Two consecutive commas or
a comma at start or end of the line gives no prefix on this
item. If you do not want prefixes, just put two consecutive
commas. If you want to skip a magnitude select
&rsquo;&minus;&rsquo; as value.</p>

<p style="margin-left:11%; margin-top: 1em">Example:
velocity in nm/s (nanometers per second) displayed in
nm/h.</p>

<pre style="margin-left:11%; margin-top: 1em"> ShortLegend[myrouter]: m/h
 kMG[myrouter]: n,u,m,,k,M,G,T,P
 options[myrouter]: perhour</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Colours</b>
<br>
The <i>Colours</i> tag allows you to override the default
colour scheme. Note: All 4 of the required colours must be
specified here. The colour name (&rsquo;Colourx&rsquo;
below) is the legend name displayed, while the
<small>RGB</small> value is the real colour used for the
display, both on the graph and in the html doc.</p>

<p style="margin-left:11%; margin-top: 1em">Format is:
Col1#RRGGBB,Col2#RRGGBB,Col3#RRGGBB,Col4#RRGGBB</p>

<p style="margin-left:11%; margin-top: 1em">Important: If
you use the <i>dorelpercent</i> options tag a fifth colour
name colour value pair is required:
Col1#RRGGBB,Col2#RRGGBB,Col3#RRGGBB,Col4#RRGGBB,Col5#RRGGBB
<br>
Colour1</p>

<p style="margin-left:17%;">First variable (normally Input)
on default graph.</p>

<p style="margin-left:11%;">Colour2</p>

<p style="margin-left:17%;">Second variable (normally
Output) on default graph.</p>

<p style="margin-left:11%;">Colour3</p>

<p style="margin-left:17%;">Max first variable (input).</p>

<p style="margin-left:11%;">Colour4</p>

<p style="margin-left:17%;">Max second variable
(output).</p>

<p style="margin-left:11%;"><small>RRGGBB</small></p>

<p style="margin-left:17%;">2 digit hex values for Red,
Green and Blue.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Colours[myrouter]: GREEN#00eb0c,BLUE#1000ff,DARK GREEN#006600,VIOLET#ff00ff</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Background</b>
<br>
With the <i>Background</i> tag you can configure the
background colour of the generated <small>HTML</small>
page.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Background[myrouter]: #a0a0a0a</pre>


<p style="margin-left:11%; margin-top: 1em"><b>YLegend,
ShortLegend, Legend[1234]</b> <br>
The following keywords allow you to override the text
displayed for the various legends of the graph and in the
<small>HTML</small> document: <br>
YLegend</p>

<p style="margin-left:17%;">The Y&minus;axis label of the
graph. Note that a text which is too long to fit in the
graph will be silently ignored.</p>

<p style="margin-left:11%;">ShortLegend</p>

<p style="margin-left:17%;">The units string (default
&rsquo;b/s&rsquo;) used for Max, Average and Current</p>

<p style="margin-left:11%;">Legend[1234IO]</p>

<p style="margin-left:17%;">The strings for the colour
legend.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em">  YLegend[myrouter]: Bits per Second
  ShortLegend[myrouter]: b/s
  Legend1[myrouter]: Incoming Traffic in Bits per Second
  Legend2[myrouter]: Outgoing Traffic in Bits per Second
  Legend3[myrouter]: Maximal 5 Minute Incoming Traffic
  Legend4[myrouter]: Maximal 5 Minute Outgoing Traffic
  LegendI[myrouter]: &amp;nbsp;In:
  LegendO[myrouter]: &amp;nbsp;Out:</pre>


<p style="margin-left:11%; margin-top: 1em">Note, if
<i>LegendI</i> or <i>LegendO</i> are set to an empty string
with</p>

<pre style="margin-left:11%; margin-top: 1em"> LegendO[myrouter]:</pre>


<p style="margin-left:11%; margin-top: 1em">The
corresponding line below the graph will not be printed at
all.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Timezone</b>
<br>
If you live in an international world, you might want to
generate the graphs in different timezones. This is set in
the <small>TZ</small> variable. Under certain operating
systems like Solaris, this will provoke the localtime call
to give the time in the selected timezone.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Timezone[myrouter]: Japan</pre>


<p style="margin-left:11%; margin-top: 1em">The Timezone is
the standard timezone of your system, ie Japan, Hongkong,
<small>GMT</small> , <small>GMT+1</small> etc etc.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Weekformat</b>
<br>
By default, mrtg (actually rateup) uses the
<i>strftime</i>(3) &rsquo;%V&rsquo; option to format week
numbers in the monthly graphs. The exact semantics of this
format option vary between systems. If you find that the
week numbers are wrong, and your system&rsquo;s
<i>strftime</i>(3) routine supports it, you can try another
format option. The <small>POSIX</small> &rsquo;%V&rsquo;
option correspond to the widely used <small>ISO</small> 8601
week numbering standard. The week format character should be
specified as a single letter; either W, V, or U.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>UNIX</small> version of rateup uses the libc
implementation of strftime. On Windows, the native strftime
implementation does not know about <tt>%V</tt>. So there we
use a different implementation of strftime that does support
<tt>%V</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> Weekformat[myrouter]: W</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDRowCount</b>
<br>
This affects the creation of new rrd files. By default rrds
are created to hold about 1 day&rsquo;s worth of high
resolution data. (plus 1 week of 30 minute data, 2 months of
2 hour data and 2 years of 1 day data). With this Keyword
you can change the number of base interval entries
configured for new rrds as they get created. Note that you
must take the interval time into account.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDRowCount[myrouter]: 1600</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDRowCount30m</b>
<br>
As per RRDRowCount, but for the <small>RRA</small> &rsquo;s
&minus;typically&minus; used for 30 minute data. Even so,
you must still take the base interval into account. Leaving
out this keyword will force the old default of 800 rows.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDRowCount30m[myrouter]: 800</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDRowCount2h</b>
<br>
As per RRDRowCount, but for the <small>RRA</small> &rsquo;s
&minus;typically&minus; used for 2 hour data. Even so, you
must still take the base interval into account. Leaving out
this keyword will force the old default of 800 rows.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDRowCount2h[myrouter]: 400</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDRowCount1d</b>
<br>
As per RRDRowCount, but for the <small>RRA</small> &rsquo;s
&minus;typically&minus; used for 1 day data. Even so, you
must still take the base interval into account. Leaving out
this keyword will force the old default of 800 rows.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDRowCount1d[myrouter]: 200</pre>



<p style="margin-left:11%; margin-top: 1em"><b>RRDHWRRAs</b>
<br>
Normally the RRDs created by <small>MRTG</small> will just
contain the information gathered directly from the
respective target. With this option you can tap into
rrdtools advanced aberrant behaviour detection module based
on Holt-Winters forecasting. The RRDHWRRAs property
specifies the Holt-Winters RRAs as described in the
rrdcreate manual page.</p>

<p style="margin-left:11%; margin-top: 1em">Note, this
setting will only affect newly created RRDs (targets).</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> RRDHWRRAs[myrouter]: RRA:HWPREDICT:1440:0.1:0.0035:288</pre>



<p style="margin-left:11%; margin-top: 1em"><b>TimeStrPos</b>
<br>
This defines placement of the timestamp string on the image.
Possible values are <small>RU</small> , <small>LU</small> ,
<small>RL</small> , <small>LL</small> (which stand,
respectively, for RightUpper, LeftUpper, RightLower and
LeftLower corner) and <small>NO</small> (for no timestamp).
By default, no timestamp is placed on the image.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> TimeStrPos[myrouter]: RU</pre>



<p style="margin-left:11%; margin-top: 1em"><b>TimeStrFmt</b>
<br>
Using this keyword you may specify format of the timestamp
to be placed on the image (if enabled by the TimeStrPos
keyword). Specified string will be used by the
<i>strftime()</i> function &minus; see <i>strftime</i>(3)
documentation for conversion specifiers available on your
system. Default format: <tt>%Y</tt>&minus;%m&minus;%d
<tt>%H:</tt>%M</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> TimeStrFmt[myrouter]: %H:%M:%S</pre>


<h2>THRESHOLD CHECKING
<a name="THRESHOLD CHECKING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Through its
threshold checking functionality mrtg is able to detect
threshold problems for the various targets and can call
external scripts to handle those problems (e.g. send email
or a page to an administrator).</p>

<p style="margin-left:11%; margin-top: 1em">Threshold
checking is configured through the following parameters:</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshDir (
<small>GLOBAL</small> )</b> <br>
By defining ThreshDir to point to a writable directory,
<small>MRTG</small> will only alert you when a threshold
boundary has been crossed.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshDir: /var/mrtg/thresh</pre>


<p style="margin-left:11%; margin-top: 1em"><b>ThreshHyst (
<small>GLOBAL</small> )</b> <br>
If a threshold is broken, and you have a threshdir defined,
then mrtg will send mail once the threshold becomes
&rsquo;unborken&rsquo; to avoid situations where broken and
unbroken messages get sent in close succession, we only send
an unbroken message once the curent value is 0.1 (10%) away
from the threshold. using the ThreshHyst config variable you
can customize this value.</p>

<p style="margin-left:11%; margin-top: 1em">Example for
5%:</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshHyst: 0.05</pre>



<p style="margin-left:11%; margin-top: 1em"><b>ThreshMailServer
( <small>GLOBAL</small> )</b> <br>
Adderss of an <small>SMTP</small> server which is going to
accept mail about Thresholds being broken and unbroken.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ThreshMailSender
( <small>GLOBAL</small> )</b> <br>
What is the sender address of the threshold mail.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshMailSender: mrtg@example.com</pre>



<p style="margin-left:11%; margin-top: 1em"><b>ThreshMailAddress
( <small>PER TARGET</small> )</b> <br>
Email address for Threshold related Mails. This will only
work if a mailserver has been configured.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshMailAddress[_]: admin@example.com
 ThreshMailAddress[router]:</pre>


<p style="margin-left:11%; margin-top: 1em">This would
bring threshold releaed mail to all but the target called
&rsquo;router&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshMinI (
<small>PER TARGET</small> )</b> <br>
This is the minimum acceptable value for the Input (first)
parameter. If the parameter falls below this value, the
program specified in ThreshProgI will be run and a mail will
be sent to the ThreshMailAddress if specified. If the value
ends in &rsquo;%&rsquo; then the threshold is defined
relative to MaxBytes.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshMaxI (
<small>PER TARGET</small> )</b> <br>
Works the same as TheshMinI but it acts when the value is
higher than ThreshMaxI.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshDesc (
<small>PER TARGET</small> )</b> <br>
Its value will be assigned to the environment variable
<small>THRESH_DESC</small> before any of the programs
mentioned below are called. The programs can use the value
of this variable to produce more user-friendly output.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshProgI
( <small>PER TARGET</small> )</b> <br>
This defines a program to be run if ThreshMinI or ThreshMaxI
is broken. <small>MRTG</small> passes 3 arguments: the
<tt>$router</tt> variable, the threshold value broken, and
the current parameter value.</p>


<p style="margin-left:11%; margin-top: 1em"><b>ThreshProgOKI
( <small>PER TARGET</small> )</b> <br>
This defines a program to be run if the parameter is
currently <small>OK</small> (based on ThreshMinI and
ThreshMaxI), but wasn&rsquo;t <small>OK</small> on the
previous running -- based on the files found in ThreshDir.
<small>MRTG</small> passes 3 arguments: the <tt>$router</tt>
variable the unbroken threshold value, and the current
parameter value.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ThreshMinO,
ThreshMaxO, ThreshProgO, and ThreshProgOKO</b> <br>
These work the same as their *I counterparts, except on the
Output (second) parameter.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SetEnv</b>
<br>
When calling threshold scripts from within your cfg file you
might want to pass some data on to the script. This can be
done with the SetEnv configuration option which takes a
series of environment variable assignments. Note that the
quotes are mandatory. This does not work for external
scripts. It is not possible to set environment variables per
target.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> SetEnv[myrouter]:  EMAIL=&quot;contact_email@someplace.net&quot;
                    HOST=&quot;www.some_server.net&quot;</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>HW</small>
Failure Bassed Threshold Checking</b> <br>
When using rrd based logging with <small>HW</small> RRAs
defined. You can use the confidence bounds violations stored
in the <small>FAILURES RRA</small> for threshold based
alerts.</p>

<p style="margin-left:11%; margin-top: 1em">There the all
target specific threshold variables have a Hold-Winters
counterpart:</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshMailAddress &minus;&gt; HWThreshMailAddress
 ThreshMinI        &minus;&gt; HWThreshMinI
 ...</pre>


<p style="margin-left:11%; margin-top: 1em">The global
variables for threshold checking are shared except for
the</p>

<pre style="margin-left:11%; margin-top: 1em"> ThreshHyst        &minus;&gt; HWThreshHyst</pre>


<p style="margin-left:11%; margin-top: 1em">And
HWThreshDesc sets the <small>HWTHRESH_DESC</small>
variable.</p>

<h2>PER TARGET DEFAULT VALUES
<a name="PER TARGET DEFAULT VALUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Pre&minus;
and Postfix</b> <br>
To save yourself some typing you can define a target called
&rsquo;^&rsquo;. The text of every Keyword you define for
this target will be <small>PREPENDED</small> to the
corresponding Keyword of all the targets defined below this
line. The same goes for a Target called &rsquo;$&rsquo; but
its text will be <small>APPENDED</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Note that a
space is inserted between the prepended text and the Keyword
value, as well as between the Keyword value and the appended
text. This works well for text-valued Keywords, but is not
very useful for other Keywords. See the &quot;default&quot;
target description below.</p>

<p style="margin-left:11%; margin-top: 1em">The example
will make mrtg use a common header and a common contact
person in all the pages generated from targets defined later
in this file.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> PageTop[^]: &lt;H1&gt;NoWhere Unis Traffic Stats&lt;/H1&gt;&lt;HR&gt;
 PageTop[$]: Contact Peter Norton if you have any questions&lt;HR&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">To remove the
prepend/append value, specify an empty value, e.g.:</p>

<pre style="margin-left:11%; margin-top: 1em"> PageTop[^]:
 PageTop[$]:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>NoSpaceChar</b>
<br>
With <small>PREPEND</small> and <small>APPEND</small> (see
below) there is normally a space inserted between the local
value and the <small>PRE&minus;</small> or
<small>APPEND</small> value. Sometimes this is not
desirable. You can use the global option <i>NoSpaceChar</i>
to define a character which can be mentioned at the end of a
$ or ^ definition in order to supress the space.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em">  NoSpaceChar: ~
  Target[^]: 1.3.6.1.4.1.482.50.2.4.20.0&amp;1.3.6.1.4.1.482.50.2.4.21.0:get@~
  Target[a]: a.tolna.net
  Target[b]: b.tolna.net
  Target[c]: c.tolna.net
  Target[d]: d.tolna.net</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Default
Values</b> <br>
The target name &rsquo;_&rsquo; specifies a default value
for that Keyword. In the absence of explicit Keyword value,
the prepended and the appended keyword value, the default
value will be used.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> YSize[_]: 150
 Options[_]: growright,bits,nopercent
 WithPeak[_]: ymw
 Suppress[_]: y
 MaxBytes[_]: 1250000</pre>


<p style="margin-left:11%; margin-top: 1em">To remove the
default value and return to the &rsquo;factory
default&rsquo;, specify an empty value, e.g.:</p>

<pre style="margin-left:11%; margin-top: 1em"> YLegend[_]:</pre>


<p style="margin-left:11%; margin-top: 1em">There can be
several instances of setting the default/prepend/append
values in the configuration file. The later setting replaces
the previous one for the rest of the configuration file. The
default/prepend/append values used for a given
keyword/target pair are the ones that were in effect at the
point in the configuration file where the target was
mentioned for the first time.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:11%; margin-top: 1em"> MaxBytes[_]: 1250000
 Target[myrouter.somplace.edu.2]: 2:public@myrouter.somplace.edu
 MaxBytes[_]: 8000
 Title[myrouter.somplace.edu.2]: Traffic Analysis for myrouter.somplace.edu IF 2</pre>


<p style="margin-left:11%; margin-top: 1em">The default
<i>MaxBytes</i> for the target myrouter.someplace.edu.2 in
the above example will be 1250000, which was in effect where
the target name myrouter.someplace.edu.2 first appeared in
the config file.</p>

<h2>COMMAND LINE OPTIONS
<a name="COMMAND LINE OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;user</b>
<i>username</i> and <b>&minus;&minus;group</b>
<i>groupname</i></p>

<p style="margin-left:17%;">Run as the given user and/or
group. (Unix Only)</p>


<p style="margin-left:11%;"><b>&minus;&minus;lock&minus;file</b>
<i>filename</i></p>

<p style="margin-left:17%;">Use an alternate lock-file (the
default is to use the configuration-file appended with
<tt>&quot;_l&quot;</tt>).</p>


<p style="margin-left:11%;"><b>&minus;&minus;confcache&minus;file</b>
<i>filename</i></p>

<p style="margin-left:17%;">Use an alternate confcache-file
(the default is to use the configuration-file appended with
<tt>&quot;.ok&quot;</tt>)</p>

<p style="margin-left:11%;"><b>&minus;&minus;logging</b>
<i>filename</i>|<b>eventlog</b></p>

<p style="margin-left:17%;">If this is set to writable
filename, all output from mrtg (warnings, debug messages,
errors) will go to <i>filename</i>. If you are running on
Win32 you can specify <b>eventlog</b> instead of a filename
which will send all error to the windows event log.</p>


<p style="margin-left:17%; margin-top: 1em"><b><small>NOTE:</small></b>
Note, there is no Message <small>DLL</small> for mrtg
included with mrtg. This has the side effect that the
windows event logger will display a nice message with every
entry in the event log, complaing about the fact that mrtg
has no message dll. If you go to the mrtg contrib download
area (on the website) you will find the
mrtg&minus;message&minus;dll.zip which does contain such a
thing.</p>


<p style="margin-left:11%;"><b>&minus;&minus;daemon</b></p>

<p style="margin-left:17%;">Put <small>MRTG</small> into
the background, running as a daemon. This works the same way
as the config file option, but the switch is required for
proper <small>FHS</small> operation (because /var/run is
writable only by root)</p>

<p style="margin-left:11%;"><b>&minus;&minus;fhs</b></p>

<p style="margin-left:17%;">Configure all mrtg paths to
conform to the <small>FHS</small> specification;
http://www.pathname.com/fhs/</p>

<p style="margin-left:11%;"><b>&minus;&minus;check</b></p>

<p style="margin-left:17%;">Only check the cfg file for
errors. Do not do anything.</p>


<p style="margin-left:11%;"><b>&minus;&minus;pid&minus;file=s</b></p>

<p style="margin-left:17%;">Define the name and path of the
pid file for mrtg running as a daemon</p>


<p style="margin-left:11%;"><b>&minus;&minus;debug=s</b></p>

<p style="margin-left:17%;">Enable debug options. The
argument of the debug option is a comma separated list of
debug values:</p>

<pre style="margin-left:17%; margin-top: 1em"> cfg  &minus; watch the config file reading
 dir  &minus; directory mangeling
 base &minus; basic program flow
 tarp &minus; target parser
 snpo &minus; snmp polling
 coca &minus; confcache operations
 fork &minus; forking view
 time &minus; some timing info
 log  &minus; logging of data via rateup or rrdtool
 eval &minus; print eval strings before evaluting them
 prof &minus; add hires timing info the rrd calls</pre>


<p style="margin-left:17%; margin-top: 1em">Example:</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus;&minus;debug=&quot;cfg,snpo&quot;</pre>


<h2>EXIT CODES
<a name="EXIT CODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An exit code of
0 indicates that all targets were successful. Generally
speaking, most codes greater than 0 indicate that there was
an unrecoverable problem. One exception to this is code 91,
which indicates that at least one of the targets was
successful. A partial listing of the codes follows:</p>

<pre style="margin-left:11%; margin-top: 1em">  0: All targets sucessful
  2: Config error (can't read, fatal error in config, etc)
 17: Another MRTG process is processing config
 91: At least one target sucessful
 92: No targets were sucessful</pre>


<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Minimal
mrtg.cfg</b></p>

<pre style="margin-left:11%;"> WorkDir: /usr/tardis/pub/www/stats/mrtg
 Target[r1]: 2:public@myrouter.somplace.edu
 MaxBytes[r1]: 8000
 Title[r1]: Traffic Analysis ISDN
 PageTop[r1]: &lt;H1&gt;Stats for our ISDN Line&lt;/H1&gt;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Cfg for
several Routers.</b></p>

<pre style="margin-left:11%;"> WorkDir: /usr/tardis/pub/www/stats/mrtg
 Title[^]: Traffic Analysis for
 PageTop[^]: &lt;H1&gt;Stats for
 PageTop[$]: Contact The Chief if you notice anybody&lt;HR&gt;
 MaxBytes[_]: 8000
 Options[_]: growright
 Title[isdn]: our ISDN Line
 PageTop[isdn]: our ISDN Line&lt;/H1&gt;
 Target[isdn]: 2:public@router.somplace.edu
 Title[backb]: our Campus Backbone
 PageTop[backb]: our Campus Backbone&lt;/H1&gt;
 Target[backb]: 1:public@router.somplace.edu
 MaxBytes[backb]: 1250000
 # the following line removes the default prepend value
 # defined above
 Title[^]:
 Title[isdn2]: Traffic for the Backup ISDN Line
 PageTop[isdn2]: our ISDN Line&lt;/H1&gt;
 Target[isdn2]: 3:public@router.somplace.edu</pre>


<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Tobias Oetiker
&lt;tobi@oetiker.ch&gt; and many contributors</p>
<hr>
</body>
</html>
