<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:47:45 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>HWLOC-GATHER-TOPOLOGY</title>

</head>
<body>

<h1 align="center">HWLOC-GATHER-TOPOLOGY</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">hwloc-gather-topology
&minus; Saves the relevant Linux topology files and the
lstopo output for later (possibly offline) usage</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>hwloc-gather-topology
[</b><i>options</i>] <i>&lt;path&gt;</i></p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i><b>&minus;h
&minus;&minus;help</b></i> display help message and exit</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>hwloc-gather-topology</b>
saves all the relevant topology files into an archive
(<b>&lt;path&gt;.tar.bz2</b>) and the lstopo output
(<b>&lt;path&gt;.output</b>). The utility for example stores
the <b>/proc/cpuinfo</b> file and the entire
<b>/sys/devices/system/node/</b> directory tree.</p>

<p style="margin-left:11%; margin-top: 1em">These files can
be used later to explore the machine topology offline. Once
the tarball has been extracted, it may for instance be given
to some hwloc command-line utilities through their
<b>&minus;&minus;input</b> option. It is also possible to
override the default topology that the hwloc library will
read by setting the extracted path in the
<b>HWLOC_FSROOT</b> environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Both archive
and lstopo output may also be submitted to hwloc developers
to debug issues remotely.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hwloc-gather-topology</b>
is a Linux specific tool, it is not installed on other
operating systems.</p>

<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b> It
is highly recommended that you read the hwloc(7) overview
page before reading this man page.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To store
topology information to be used later (possibly on a
different host) please run:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>hwloc-gather-topology /tmp/myhost</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">It will store
all relevant topology files in the
<b>/tmp/myhost.tar.bz2</b> archive and the lstopo output in
the <b>/tmp/myhost.output</b> file. These files can be
transferred on another host for later/offline analysis
and/or as the input to various hwloc utilities.</p>

<p style="margin-left:11%; margin-top: 1em">To use these
data with hwloc utilities you have to unpack
<b>myhost.tar.bz2</b> archive first:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>tar jxvf /tmp/myhost.tar.bz2</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">A new directory
named <b>myhost</b> now contains all topology files. Then
you ask various hwloc utilities to use this topology instead
of the one of the real machine by passing
<b>&minus;&minus;input myhost</b>. To display the topology
just run:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>lstopo --input ./myhost</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">It is not
necessary that the topology is extracted in the current
directory, absolute or relative paths are also
supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>lstopo --input
/path/to/remote/host/extracted/topology/</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To see how
hwloc would distribute 8 parallel jobs on the original
host:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>hwloc-distrib --input myhost --single 8</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To get the
corresponding physical indexes in the previous command:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>hwloc-calc --input myhost --po --li --proclist
$(hwloc-distrib --input myhost --single 8)</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Any program may
actually override the default topology with a given archived
one even if it does not have a <b>&minus;&minus;input</b>
option. The <b>HWLOC_FSROOT</b> environment variable should
be used to do so:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>HWLOC_FSROOT=myhost hwloc-calc --po --li --proclist
$(hwloc-distrib --single 8)</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">All these
commands will produce the same output as if executed
directly on the host on which the topology information was
originally gathered by the <b>hwloc-gather-topology</b>
script.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Upon successful
execution, <b>hwloc-gather-topology</b> will exit with the
code 0.</p>


<p style="margin-left:11%; margin-top: 1em"><b>hwloc-gather-topology</b>
will return nonzero exit status if any kind of error occurs,
such as (but not limited to) failure to create the archive
or output file.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">hwloc(7),
lstopo(1), hwloc-calc(1), hwloc-distrib(1)</p>
<hr>
</body>
</html>
