<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:48:46 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IDMAP_LDAP</title>

</head>
<body>

<h1 align="center">IDMAP_LDAP</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#IDMAP OPTIONS">IDMAP OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#NOTE">NOTE</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">idmap_ldap
&minus; Samba's idmap_ldap Backend for Winbind</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The idmap_ldap
plugin provides a means for Winbind to store and retrieve
SID/uid/gid mapping tables in an LDAP directory service.</p>

<p style="margin-left:11%; margin-top: 1em">In contrast to
read only backends like idmap_rid, it is an allocating
backend: This means that it needs to allocate new user and
group IDs in order to create new mappings.</p>

<h2>IDMAP OPTIONS
<a name="IDMAP OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ldap_base_dn =
DN</p>

<p style="margin-left:17%;">Defines the directory base
suffix to use for SID/uid/gid mapping entries. If not
defined, idmap_ldap will default to using the &quot;ldap
idmap suffix&quot; option from smb.conf.</p>

<p style="margin-left:11%; margin-top: 1em">ldap_user_dn =
DN</p>

<p style="margin-left:17%;">Defines the user DN to be used
for authentication. The secret for authenticating this user
should be stored with net idmap secret (see <b>net</b>(8)).
If absent, the ldap credentials from the ldap passdb
configuration are used, and if these are also absent, an
anonymous bind will be performed as last fallback.</p>

<p style="margin-left:11%; margin-top: 1em">ldap_url =
ldap://server/</p>

<p style="margin-left:17%;">Specifies the LDAP server to
use for SID/uid/gid map entries. If not defined, idmap_ldap
will assume that ldap://localhost/ should be used.</p>

<p style="margin-left:11%; margin-top: 1em">range = low
&minus; high</p>

<p style="margin-left:17%;">Defines the available matching
uid and gid range for which the backend is
authoritative.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example shows how an ldap directory is used as the default
idmap backend. It also configures the idmap range and base
directory suffix. The secret for the ldap_user_dn has to be
set with &quot;net idmap secret '*' password&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>[global]</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>idmap config * : backend = ldap</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>idmap config * : range = 1000000&minus;1999999</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>idmap config * : ldap_url = ldap://localhost/</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>idmap config * : ldap_base_dn =
ou=idmap,dc=example,dc=com</p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>idmap config * : ldap_user_dn =
cn=idmap_admin,dc=example,dc=com</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">This example
shows how ldap can be used as a readonly backend while tdb
is the default backend used to store the mappings. It adds
an explicit configuration for some domain DOM1, that uses
the ldap idmap backend. Note that a range disjoint from the
default range is used.</p>

<p style="margin-left:17%; margin-top: 1em">[global]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p># &quot;backend = tdb&quot; is redundant here since it
is the default</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config * : backend = tdb</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config * : range = 1000000&minus;1999999</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : backend = ldap</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : range = 2000000&minus;2999999</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : read only = yes</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : ldap_url = ldap://server/</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : ldap_base_dn =
ou=idmap,dc=dom1,dc=example,dc=com</p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>idmap config DOM1 : ldap_user_dn =
cn=idmap_admin,dc=dom1,dc=example,dc=com</p> </td></tr>
</table>

<h2>NOTE
<a name="NOTE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In order to use
authentication against ldap servers you may need to provide
a DN and a password. To avoid exposing the password in plain
text in the configuration file we store it into a security
store. The &quot;net idmap &quot; command is used to store a
secret for the DN specified in a specific idmap domain.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The original
Samba software and related utilities were created by Andrew
Tridgell. Samba is now developed by the Samba Team as an
Open Source project similar to the way the Linux kernel is
developed.</p>
<hr>
</body>
</html>
