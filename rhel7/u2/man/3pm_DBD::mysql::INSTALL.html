<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 01:11:41 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DBD::mysql::INSTALL</title>

</head>
<body>

<h1 align="center">DBD::mysql::INSTALL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#PREREQUISITES">PREREQUISITES</a><br>
<a href="#BINARY INSTALLATION">BINARY INSTALLATION</a><br>
<a href="#SOURCE INSTALLATION">SOURCE INSTALLATION</a><br>
<a href="#SPECIAL SYSTEMS">SPECIAL SYSTEMS</a><br>
<a href="#KNOWN PROBLEMS">KNOWN PROBLEMS</a><br>
<a href="#SUPPORT">SUPPORT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">INSTALL &minus;
How to install and configure DBD::mysql</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">  perl Makefile.PL [options]
  make
  make test
  make install</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes the installation and configuration of DBD::mysql,
the Perl <small>DBI</small> driver for the MySQL database.
Before reading on, make sure that you have the prerequisites
available: Perl, MySQL and <small>DBI.</small> For details
see the separate section. &quot;
<small>PREREQUISITES&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Depending on
your version of Perl, it might be possible to use a binary
distribution of DBD::mysql. If possible, this is
recommended. Otherwise you need to install from the sources.
If so, you will definitely need a C compiler. Installation
from binaries and sources are both described in separate
sections. &quot; <small>BINARY INSTALLATION&quot;</small> .
&quot; <small>SOURCE INSTALLATION&quot;</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Finally, if you
encounter any problems, do not forget to read the section on
known problems. &quot; <small>KNOWN PROBLEMS&quot;</small> .
If that doesn&rsquo;t help, you should look into the archive
of the mailing list <b>perl@lists.mysql.com</b>. See
http://www.mysql.com for archive locations. And if that
still doesn&rsquo;t help, please post a question on this
mailing list.</p>

<h2>PREREQUISITES
<a name="PREREQUISITES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Perl</p>

<p style="margin-left:17%;">Preferrably a version of Perl,
that comes preconfigured with your system. For example, all
Linux and FreeBSD distributions come with Perl. For Windows,
ActivePerl is recommended, see http://www.activestate.com
for details.</p>

<p style="margin-left:11%;">MySQL</p>

<p style="margin-left:17%;">You need not install the actual
MySQL database server, the client files and the devlopment
files are sufficient. For example, Fedora Core 4 Linux
distribution comes with <small>RPM</small> files (using
<small>YUM</small> ) <b>mysql.i386</b> and
<b>mysql&minus;server.i386</b> (use &quot;yum search&quot;
to find exact package names). These are sufficient, if the
MySQL server is located on a foreign machine. You may also
create client files by compiling from the MySQL source
distribution and using</p>

<pre style="margin-left:17%; margin-top: 1em">  configure &minus;&minus;without&minus;server</pre>


<p style="margin-left:17%; margin-top: 1em">If you are
using Windows and need to compile from sources (which is
only the case if you are not using ActivePerl), then you
must ensure that the header and library files are installed.
This may require choosing a &quot;Custom installation&quot;
and selecting the appropriate option when running the MySQL
setup program.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><small>DBI</small></p></td>
<td width="2%"></td>
<td width="83%">


<p>DBD::mysql is a <small>DBI</small> driver, hence you
need <small>DBI.</small> It is available from the same
source where you got the DBD::mysql distribution from.</p></td></tr>
</table>

<p style="margin-left:11%;">C compiler</p>

<p style="margin-left:17%;">A C compiler is only required,
if you install from source. In most cases there are binary
distributions of DBD::mysql available. However, if you need
a C compiler, make sure, that it is the same C compiler that
was used for compiling Perl and MySQL! Otherwise you will
almost definitely encounter problems because of differences
in the underlying C runtime libraries.</p>

<p style="margin-left:17%; margin-top: 1em">In the worst
case, this might mean to compile Perl and MySQL yourself.
But believe me, experience shows that a lot of problems are
fixed this way.</p>

<p style="margin-left:11%;">Gzip libraries</p>

<p style="margin-left:17%;">Late versions of MySQL come
with support for compression. Thus it <b>may</b> be required
that you have install an <small>RPM</small> package like
libz-devel, libgz-devel or something similar.</p>

<h2>BINARY INSTALLATION
<a name="BINARY INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Binary
installation is possible in the most cases, depending on
your system. I give some examples:</p>

<p style="margin-left:11%; margin-top: 1em"><b>Windows</b>
<br>
ActivePerl offers a <small>PPM</small> archive of
DBD::mysql. All you need to do is typing</p>

<pre style="margin-left:11%; margin-top: 1em">  ppm
  install DBI
  install DBD&minus;mysql</pre>


<p style="margin-left:11%; margin-top: 1em">This will fetch
the modules via <small>HTTP</small> and install them. If you
need to use a <small>WWW</small> proxy server, the
environment variable HTTP_proxy must be set:</p>

<pre style="margin-left:11%; margin-top: 1em">  set HTTP_proxy=http://my.proxy.server:8000/
  ppm
  install DBI
  install DBD&minus;mysql</pre>


<p style="margin-left:11%; margin-top: 1em">Of course you
need to replace the host name
<tt>&quot;my.proxy.server&quot;</tt> and the port number
<tt>8000</tt> with your local values.</p>

<p style="margin-left:11%; margin-top: 1em">If the above
procedure doesn&rsquo;t work, please upgrade to the latest
version of ActivePerl. Versions before build 623 are known
to have problems.</p>

<p style="margin-left:11%; margin-top: 1em"><small>PPM
3</small> is said to miss DBD::mysql in the repository. Thus
use of <small>PPM 3</small> is discouraged, in favour of
<small>PPM 2.</small> If you need to use <small>PPM
3,</small> try</p>

<pre style="margin-left:11%; margin-top: 1em">  ppm
  rep add PPM2 http://ppm.activestate.com/PPMPackages/5.6plus/
  rep 2
  install DBI
  install DBD&minus;mysql</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Red Hat
Linux</b> <br>
As of version 7.1, Red Hat Linux comes with MySQL and
DBD::mysql. You need to ensure that the following
<small>RPM</small> &rsquo;s are installed:</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql
  perl&minus;DBI
  perl&minus;DBD&minus;MySQL</pre>


<p style="margin-left:11%; margin-top: 1em">For
installation from source the following <small>RPM</small>
&rsquo;s are required</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql&minus;devel
  libz&minus;devel</pre>


<p style="margin-left:11%; margin-top: 1em">Optional
are</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql&minus;server</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Fedora Core
Linux</b> <br>
As of version 3, Fedora Linux comes with MySQL and
DBD::mysql. You need to ensure that the following
<small>RPM</small> &rsquo;s are installed:</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql or mysql&minus;server
  perl&minus;DBD&minus;MySQL</pre>


<p style="margin-left:11%; margin-top: 1em">For
installation from source the following <small>RPM</small>
&rsquo;s are required</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql&minus;devel
  libz&minus;devel</pre>


<p style="margin-left:11%; margin-top: 1em">Please try</p>

<pre style="margin-left:11%; margin-top: 1em">  yum search mysql</pre>


<p style="margin-left:11%; margin-top: 1em">To see the
exact names</p>

<p style="margin-left:11%; margin-top: 1em">Note:
(important) <small>FC 3</small> comes with MySQL 3.x, and
some people have upgraded using MySQL RPMs for newer
versions. If you do this, you must re-compile you DBD::mysql
because your existing DBD::mysql will be linked against the
old version of MySQL&rsquo;s client libs.
<small>CPAN</small> has no way to know or detect that you
have upgraded MySQL.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Other
systems</b> <br>
In the case of Linux or FreeBSD distributions it is very
likely that all you need comes with your distribution, as in
the case of Red Hat Linux. I just cannot give you names, as
I am not using these systems.</p>

<p style="margin-left:11%; margin-top: 1em">Please let me
know if you find the files in your SuSE Linux, Debian Linux
or FreeBSD distribution so that I can extend the above
list.</p>

<h2>SOURCE INSTALLATION
<a name="SOURCE INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">So you need to
install from sources. If you are lucky, the Perl module
<tt>&quot;CPAN&quot;</tt> will do all for you, thanks to the
excellent work of Andreas Koenig. Otherwise you will need to
do a manual installation. Some of you, in particular system
administrators of multiple sites, will choose automatic
installation. All of these installation types have an own
section. &quot; <small>CPAN</small> installation&quot;.
&quot;Manual installation&quot;.
&quot;Configuration&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The DBD::mysql
Makefile.PL needs to know where to find your MySQL
installation. This may be achieved using command line
switches (see &quot;Configuration&quot;) or automatically
using the mysql_config binary which comes with most MySQL
distributions. If your MySQL distribution contains
mysql_config the easiest method is to ensure this binary is
on your path.</p>

<p style="margin-left:11%; margin-top: 1em">e.g.</p>

<pre style="margin-left:11%; margin-top: 1em">  PATH=$PATH:/usr/local/mysql/bin
  export PATH</pre>



<p style="margin-left:11%; margin-top: 1em"><b><small>CPAN</small>
installation</b> <br>
Installation of DBD::mysql can be incredibly easy:</p>

<pre style="margin-left:11%; margin-top: 1em">  cpan
  install DBD::mysql</pre>


<p style="margin-left:11%; margin-top: 1em">If you are
using the <small>CPAN</small> module for the first time,
just answer the questions by accepting the defaults which
are fine in most cases. If you are using an older version of
Perl, you might instead need a</p>

<pre style="margin-left:11%; margin-top: 1em">  perl &minus;MCPAN &minus;e shell
  install DBD::mysql</pre>


<p style="margin-left:11%; margin-top: 1em">If you cannot
get the <small>CPAN</small> module working, you might try
manual installation. If installation with
<small>CPAN</small> fails because the your local settings
have been guessed wrong, you need to ensure MySQL&rsquo;s
mysql_config is on your path (see &quot; <small>SOURCE
INSTALLATION&quot;</small> ) or alternatively create a
script called <tt>&quot;mysql_config&quot;</tt>. This is
described in more details later.
&quot;Configuration&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Manual
installation</b> <br>
For a manual installation you need to fetch the DBD::mysql
source distribution. The latest version is always available
from</p>

<pre style="margin-left:11%; margin-top: 1em">  http://www.cpan.org/modules/by&minus;module/DBD/</pre>


<p style="margin-left:11%; margin-top: 1em">The name is
typically something like</p>

<pre style="margin-left:11%; margin-top: 1em">  DBD&minus;mysql&minus;1.2216.tar.gz</pre>


<p style="margin-left:11%; margin-top: 1em">The archive
needs to be extracted. On Windows you may use a tool like
WinZip, on Unix you type</p>

<pre style="margin-left:11%; margin-top: 1em">  gzip &minus;cd DBD&minus;mysql&minus;1.2216.tar.gz | tar xf &minus;</pre>


<p style="margin-left:11%; margin-top: 1em">This will
create a subdirectory DBD&minus;mysql&minus;1.2216. Enter
this subdirectory and type</p>

<pre style="margin-left:11%; margin-top: 1em">  perl Makefile.PL
  make
  make test</pre>


<p style="margin-left:11%; margin-top: 1em">(On Windows you
may need to replace &quot;make&quot; with &quot;nmake&quot;
or &quot;dmake&quot;.) If the tests seem to look fine, you
may continue with</p>

<pre style="margin-left:11%; margin-top: 1em">  make install</pre>


<p style="margin-left:11%; margin-top: 1em">If the
compilation (make) or tests fail, you might need to
configure some settings.</p>

<p style="margin-left:11%; margin-top: 1em">For example you
might choose a different database, the C compiler or the
linker might need some flags. &quot;Configuration&quot;.
&quot;Compiler flags&quot;. &quot;Linker flags&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">For
Windows/CygWin there is a special section below.
&quot;CygWin&quot; in Windows.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
The install script &quot;Makefile.PL&quot; can be configured
via a lot of switches. All switches can be used on the
command line. For example, the test database:</p>

<pre style="margin-left:11%; margin-top: 1em">  perl Makefile.PL &minus;&minus;testdb=&lt;db&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">If you do not
like configuring these switches on the command line, you may
alternatively create a script called
<tt>&quot;mysql_config&quot;</tt>. This is described later
on.</p>

<p style="margin-left:11%; margin-top: 1em">Available
switches are: <br>
testdb</p>

<p style="margin-left:17%;">Name of the test database,
defaults to <b>test</b>.</p>

<p style="margin-left:11%;">testuser</p>

<p style="margin-left:17%;">Name of the test user, defaults
to empty. If the name is empty, then the currently logged in
users name will be used.</p>

<p style="margin-left:11%;">testpassword</p>

<p style="margin-left:17%;">Password of the test user,
defaults to empty.</p>

<p style="margin-left:11%;">testhost</p>

<p style="margin-left:17%;">Host name or <small>IP</small>
number of the test database; defaults to localhost.</p>

<p style="margin-left:11%;">testport</p>

<p style="margin-left:17%;">Port number of the test
database</p>

<p style="margin-left:11%;">ps&minus;protcol=1 or 0</p>

<p style="margin-left:17%;">Whether to run the test suite
using server prepared statements or driver emulated prepared
statemetns. ps&minus;protocol=1 means use server prepare,
ps&minus;protocol=0 means driver emulated.</p>

<p style="margin-left:11%;">cflags</p>

<p style="margin-left:17%;">This is a list of flags that
you want to give to the C compiler. The most important flag
is the location of the MySQL header files. For example, on
Red Hat Linux the header files are in /usr/include/mysql and
you might try</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;I/usr/include/mysql</pre>


<p style="margin-left:17%; margin-top: 1em">On Windows the
header files may be in C:\mysql\include and you might
try</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;IC:\mysql\include</pre>


<p style="margin-left:17%; margin-top: 1em">The default
flags are determined by running</p>

<pre style="margin-left:17%; margin-top: 1em">  mysql_config &minus;&minus;cflags</pre>


<p style="margin-left:17%; margin-top: 1em">More details on
the C compiler flags can be found in the following section.
&quot;Compiler flags&quot;.</p>

<p style="margin-left:11%;">libs</p>

<p style="margin-left:17%;">This is a list of flags that
you want to give to the linker or loader. The most important
flags are the locations and names of additional libraries.
For example, on Red Hat Linux your MySQL client libraries
are in /usr/lib/mysql and you might try</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;L/usr/lib/mysql &minus;lmysqlclient &minus;lz</pre>


<p style="margin-left:17%; margin-top: 1em">On Windows the
libraries may be in C:\mysql\lib and</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;LC:\mysql\lib &minus;lmysqlclient</pre>


<p style="margin-left:17%; margin-top: 1em">might be a good
choice. The default flags are determined by running</p>

<pre style="margin-left:17%; margin-top: 1em">  mysql_config &minus;&minus;libs</pre>


<p style="margin-left:17%; margin-top: 1em">More details on
the linker flags can be found in a separate section.
&quot;Linker flags&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">If a switch is
not present on the command line, then the script
<tt>&quot;mysql_config&quot;</tt> will be executed. This
script comes as part of the MySQL distribution. For example,
to determine the C compiler flags, we are executing</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql_config &minus;&minus;cflags
  mysql_config &minus;&minus;libs</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
configure your own settings for database name, database user
and so on, then you have to create a script with the same
name, that replies</p>

<p style="margin-left:11%; margin-top: 1em"><b>Compiler
flags</b> <br>
Note: the folling info about compiler and linker flags, you
shouldn&rsquo;t have to use these options because
Makefile.PL is pretty good at utilising mysql_config to get
the flags that you need for a successful compile.</p>

<p style="margin-left:11%; margin-top: 1em">It is typically
not so difficult to determine the appropriate flags for the
C compiler. The linker flags, which you find in the next
section, are another story.</p>

<p style="margin-left:11%; margin-top: 1em">The
determination of the C compiler flags is usually left to a
configuration script called <i>mysql_config</i>, which can
be invoked with</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql_config &minus;&minus;cflags</pre>


<p style="margin-left:11%; margin-top: 1em">When doing so,
it will emit a line with suggested C compiler flags, for
example like this:</p>

<pre style="margin-left:11%; margin-top: 1em">  &minus;L/usr/include/mysql</pre>


<p style="margin-left:11%; margin-top: 1em">The C compiler
must find some header files. Header files have the extension
<tt>&quot;.h&quot;</tt>. MySQL header files are, for
example, <i>mysql.h</i> and <i>mysql_version.h</i>. In most
cases the header files are not installed by default. For
example, on Windows it is an installation option of the
MySQL setup program (Custom installation), whether the
header files are installed or not. On Red Hat Linux, you
need to install an <small>RPM</small> archive
<i>mysql-devel</i> or <i>MySQL-devel</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If you know the
location of the header files, then you will need to add an
option</p>

<pre style="margin-left:11%; margin-top: 1em">  &minus;L&lt;header directory&gt;</pre>


<p style="margin-left:11%; margin-top: 1em">to the C
compiler flags, for example
<tt>&quot;&minus;L/usr/include/mysql&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Linker
flags</b> <br>
Appropriate linker flags are the most common source of
problems while installing DBD::mysql. I will only give a
rough overview, you&rsquo;ll find more details in the
troubleshooting section. &quot; <small>KNOWN
PROBLEMS&quot;</small></p>

<p style="margin-left:11%; margin-top: 1em">The
determination of the C compiler flags is usually left to a
configuration script called <i>mysql_config</i>, which can
be invoked with</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql_config &minus;&minus;libs</pre>


<p style="margin-left:11%; margin-top: 1em">When doing so,
it will emit a line with suggested C compiler flags, for
example like this:</p>

<pre style="margin-left:11%; margin-top: 1em">   &minus;L'/usr/lib/mysql' &minus;lmysqlclient &minus;lnsl &minus;lm   &minus;lz &minus;lcrypt</pre>


<p style="margin-left:11%; margin-top: 1em">The following
items typically need to be configured for the linker: <br>
The mysqlclient library</p>

<p style="margin-left:17%;">The MySQL client library comes
as part of the MySQL distribution. Depending on your system
it may be a file called</p>

<pre style="margin-left:17%; margin-top: 1em">  F&lt;libmysqlclient.a&gt;   statically linked library, Unix
  F&lt;libmysqlclient.so&gt;  dynamically linked library, Unix
  F&lt;mysqlclient.lib&gt;    statically linked library, Windows
  F&lt;mysqlclient.dll&gt;    dynamically linked library, Windows</pre>


<p style="margin-left:17%; margin-top: 1em">or something
similar.</p>

<p style="margin-left:17%; margin-top: 1em">As in the case
of the header files, the client library is typically not
installed by default. On Windows you will need to select
them while running the MySQL setup program (Custom
installation). On Red Hat Linux an <small>RPM</small>
archive <i>mysql-devel</i> or <i>MySQL-devel</i> must be
installed.</p>

<p style="margin-left:17%; margin-top: 1em">The linker
needs to know the location and name of the mysqlclient
library. This can be done by adding the flags</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;L&lt;lib directory&gt; &minus;lmysqlclient</pre>


<p style="margin-left:17%; margin-top: 1em">or by adding
the complete path name. Examples:</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;L/usr/lib/mysql &minus;lmysqlclient
  &minus;LC:\mysql\lib &minus;lmysqlclient</pre>


<p style="margin-left:17%; margin-top: 1em">If you would
like to use the static libraries (and there are excellent
reasons to do so), you need to create a separate directory,
copy the static libraries to that place and use the &minus;L
switch above to point to your new directory. For
example:</p>

<pre style="margin-left:17%; margin-top: 1em">  mkdir /tmp/mysql&minus;static
  cp /usr/lib/mysql/*.a /tmp/mysql&minus;static
  perl Makefile.PL &minus;&minus;libs=&quot;&minus;L/tmp/mysql&minus;static &minus;lmysqlclient&quot;
  make
  make test
  make install
  rm &minus;rf /tmp/mysql&minus;static</pre>


<p style="margin-left:11%;">The gzip library</p>

<p style="margin-left:17%;">The MySQL client can use
compression when talking to the MySQL server, a nice feature
when sending or receiving large texts over a slow
network.</p>

<p style="margin-left:17%; margin-top: 1em">On Unix you
typically find the appropriate file name by running</p>

<pre style="margin-left:17%; margin-top: 1em">  ldconfig &minus;p | grep libz
  ldconfig &minus;p | grep libgz</pre>


<p style="margin-left:17%; margin-top: 1em">Once you know
the name (libz.a or libgz.a is best), just add it to the
list of linker flags. If this seems to be causing problem
you may also try to link without gzip libraries.</p>

<h2>SPECIAL SYSTEMS
<a name="SPECIAL SYSTEMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Below you find
information on particular systems:</p>


<p style="margin-left:11%; margin-top: 1em"><b>Windows/CygWin</b>
<br>
If you are a user of Cygwin (the Redhat distribution) you
already know, it contains a nicely running perl 5.6.1,
installation of additional modules usually works as a charme
via the standard procedure of</p>

<pre style="margin-left:11%; margin-top: 1em">    perl makefile.PL
    make
    make test
    make install</pre>


<p style="margin-left:11%; margin-top: 1em">The Windows
binary distribution of MySQL runs smoothly under Cygwin. You
can start/stop the server and use all Windows clients
without problem. But to install DBD::mysql you have to take
a little special action.</p>

<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t
attempt to build DBD::mysql against either the MySQL Windows
or Linux/Unix <small>BINARY</small> distributions: neither
will work!</p>

<p style="margin-left:11%; margin-top: 1em">You
<small>MUST</small> compile the MySQL clients yourself under
Cygwin, to get a &rsquo;libmysqlclient.a&rsquo; compiled
under Cygwin. Really! You&rsquo;ll only need that library
and the header files, you don&rsquo;t need any other client
parts. Continue to use the Windows binaries. And don&rsquo;t
attempt (currently) to build the MySQL Server part, it is
unneccessary, as MySQL <small>AB</small> does an excellent
job to deliver optimized binaries for the mainstream
operating systems, and it is told, that the server compiled
under Cygwin is unstable.</p>

<p style="margin-left:11%; margin-top: 1em">Install MySQL
(if you havn&rsquo;t already)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>download the MySQL Windows Binaries from
http://www.mysql.com/downloads/index.html</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>unzip mysql&minus;&lt;version&gt;&minus;win.zip into
some temporary location</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>start the setup.exe there and follow the
instructions</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>start the server</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>alternatively download, install and start the server on
a remote server, on what supported <small>OS</small>
ever</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Build MySQL
clients under Cygwin:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="80%">


<p style="margin-top: 1em">download the MySQL
<small>LINUX</small> source from
http://www.mysql.com/downloads/index.html</p> </td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="80%">


<p>unpack mysql&minus;&lt;version&gt;.tar.gz into some tmp
location</p> </td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="80%">


<p>cd into the unpacked dir mysql&minus;&lt;version&gt;</p></td>
<td width="3%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  ./configure &minus;&minus;prefix=/usr/local/mysql &minus;&minus;without&minus;server</pre>


<p style="margin-left:17%; margin-top: 1em">This prepares
the Makefile with the installed Cygwin features. It takes
some time, but should finish without error. The
&rsquo;prefix&rsquo;, as given, installs the whole
Cygwin/MySQL thingy into a location not normally in your
<small>PATH,</small> so that you continue to use already
installed Windows binaries. The
&minus;&minus;without&minus;server parameter tells configure
to only build the clients.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="6%">

<pre style="margin-top: 1em">  make</td>
<td width="74%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">This builds all
MySQL client parts ... be patient. It should finish finally
without any error.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="18%">

<pre style="margin-top: 1em">  make install</td>
<td width="62%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">This installs
the compiled client files under /usr/local/mysql/. Remember,
you don&rsquo;t need anything except the library under
/usr/local/mysql/lib and the headers under
/usr/local/mysql/include!</p>

<p style="margin-left:17%; margin-top: 1em">Essentially you
are now done with this part. If you want, you may try your
compiled binaries shortly; for that, do:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="35%">

<pre style="margin-top: 1em">  cd /usr/local/mysql/bin</td>
<td width="45%">
</td></tr>
</table></pre>

<p style="margin-left:17%;">./mysql &minus;h 127.0.0.1</p>

<p style="margin-left:17%; margin-top: 1em">The host
(&minus;h) parameter 127.0.0.1 targets the local host, but
forces the mysql client to use a <small>TCP/IP</small>
connection. The default would be a pipe/socket connection
(even if you say &rsquo;&minus;h localhost&rsquo;) and this
doesn&rsquo;t work between Cygwin and Windows (as far as I
know).</p>

<p style="margin-left:17%; margin-top: 1em">If you have
your MySQL server running on some other box, then please
substitute &rsquo;127.0.0.1&rsquo; with the name or
IP-number of that box.</p>

<p style="margin-left:11%; margin-top: 1em">Please note, in
my environment the &rsquo;mysql&rsquo; client did not accept
a simple <small>RETURN, I</small> had to use CTRL-RETURN to
send commands ... strange, but I didn&rsquo;t attempt to fix
that, as we are only interested in the built lib and
headers.</p>

<p style="margin-left:11%; margin-top: 1em">At the
&rsquo;mysql&gt;&rsquo; prompt do a quick check:</p>

<pre style="margin-left:11%; margin-top: 1em">  mysql&gt; use mysql
  mysql&gt; show tables;
  mysql&gt; select * from db;
  mysql&gt; exit</pre>


<p style="margin-left:11%; margin-top: 1em">You are now
ready to build DBD::mysql!</p>

<p style="margin-left:11%; margin-top: 1em">Build
DBD::mysql:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">download
DBD&minus;mysql&minus;&lt;version&gt;.tar.gz from
<small>CPAN</small></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>unpack DBD&minus;mysql&minus;&lt;version&gt;.tar.gz</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>cd into unpacked dir
DBD&minus;mysql&minus;&lt;version&gt; you probably did that
already, if you are reading this!</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">

<pre style="margin-top: 1em">  cp /usr/local/mysql/bin/mysql_config .</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">This copies the
executable script mentioned in the DBD::mysql docs from your
just built Cywin/MySQL client directory; it knows about your
Cygwin installation, especially about the right libraries to
link with.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="57%">

<pre style="margin-top: 1em">  perl Makefile.PL &minus;&minus;testhost=127.0.0.1</td>
<td width="23%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">The
&minus;&minus;testhost=127.0.0.1 parameter again forces a
<small>TCP/IP</small> connection to the MySQL server on the
local host instead of a pipe/socket connection for the
&rsquo;make test&rsquo; phase.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="6%">

<pre style="margin-top: 1em">  make</td>
<td width="74%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">This should run
without error</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="14%">

<pre style="margin-top: 1em">  make test</td>
<td width="66%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">with
DBD&minus;mysql&minus;2.1022 or earlier you will see several
errors in dbdadmin.t, mysql.t and mysql2.t; with later
versions you should not get errors (except possibly one,
indicating, that some tables could not be dropped. I&rsquo;m
hunting for a solution to that problem, but have none
yet).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="8%"></td>
<td width="18%">

<pre style="margin-top: 1em">  make install</td>
<td width="62%">
</td></tr>
</table></pre>

<p style="margin-left:17%; margin-top: 1em">This installs
DBD::mysql into the Perl hierarchy.</p>

<p style="margin-left:11%; margin-top: 1em">Notes:</p>

<p style="margin-left:11%; margin-top: 1em">This was tested
with MySQL version 3.23.54a and DBD::mysql version 2.1022. I
patched the above mentioned test scripts and sent the
patches to the author of DBD::mysql Jochen Wiedman.</p>

<p style="margin-left:11%; margin-top: 1em">Georg Rehfeld
15. Jan. 2003</p>

<h2>KNOWN PROBLEMS
<a name="KNOWN PROBLEMS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">1.)</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">Some Linux distributions
don&rsquo;t come with a gzip library by default. Running
&quot;make&quot; terminates with an error message like</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  LD_RUN_PATH=&quot;/usr/lib/mysql:/lib:/usr/lib&quot; gcc
    &minus;o blib/arch/auto/DBD/mysql/mysql.so  &minus;shared
    &minus;L/usr/local/lib dbdimp.o mysql.o &minus;L/usr/lib/mysql
    &minus;lmysqlclient &minus;lm &minus;L/usr/lib/gcc&minus;lib/i386&minus;redhat&minus;linux/2.96
    &minus;lgcc &minus;lz
  /usr/bin/ld: cannot find &minus;lz
  collect2: ld returned 1 exit status
  make: *** [blib/arch/auto/DBD/mysql/mysql.so] Error 1</pre>


<p style="margin-left:17%; margin-top: 1em">If this is the
case for you, install an <small>RPM</small> archive like
libz-devel, libgz-devel, zlib-devel or gzlib-devel or
something similar.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">2.)</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">If Perl was compiled with gcc or
egcs, but MySQL was compiled with another compiler or on
another system, an error message like this is very likely
when running &quot;Make test&quot;:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  t/00base............install_driver(mysql) failed: Can't load
  '../blib/arch/auto/DBD/mysql/mysql.so' for module DBD::mysql:
  ../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol: _umoddi3
  at /usr/local/perl&minus;5.005/lib/5.005/i586&minus;linux&minus;thread/DynaLoader.pm
  line 168.</pre>


<p style="margin-left:17%; margin-top: 1em">This means,
that your linker doesn&rsquo;t include libgcc.a. You have
the following options:</p>

<p style="margin-left:17%; margin-top: 1em">The solution is
telling the linker to use libgcc. Run</p>

<pre style="margin-left:17%; margin-top: 1em">  gcc &minus;&minus;print&minus;libgcc&minus;file</pre>


<p style="margin-left:17%; margin-top: 1em">to determine
the exact location of libgcc.a or for older versions of
gcc</p>

<pre style="margin-left:17%; margin-top: 1em">  gcc &minus;v</pre>


<p style="margin-left:17%; margin-top: 1em">to determine
the directory. If you know the directory, add a</p>

<pre style="margin-left:17%; margin-top: 1em">  &minus;L&lt;directory&gt; &minus;lgcc</pre>


<p style="margin-left:17%; margin-top: 1em">to the list of
C compiler flags. &quot;Configuration&quot;. &quot;Linker
flags&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">3.)</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">There are known problems with
shared versions of libmysqlclient, at least on some Linux
boxes. If you receive an error message similar to</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  install_driver(mysql) failed: Can't load
  '/usr/lib/perl5/site_perl/i586&minus;linux/auto/DBD/mysql/mysql.so'
  for module DBD::mysql: File not found at
  /usr/lib/perl5/i586&minus;linux/5.00404/DynaLoader.pm line 166</pre>


<p style="margin-left:17%; margin-top: 1em">then this error
message can be misleading: It&rsquo;s not mysql.so that
fails being loaded, but libmysqlclient.so! The usual problem
is that this file is located in a directory like</p>

<pre style="margin-left:17%; margin-top: 1em">  /usr/lib/mysql</pre>


<p style="margin-left:17%; margin-top: 1em">where the
linker doesn&rsquo;t look for it.</p>

<p style="margin-left:17%; margin-top: 1em">The best
workaround is using a statically linked mysqlclient library,
for example</p>

<pre style="margin-left:17%; margin-top: 1em">  /usr/lib/mysql/libmysqlclient.a</pre>


<p style="margin-left:17%; margin-top: 1em">The use of a
statically linked library is described in the previous
section on linker flags. &quot;Configuration&quot;.
&quot;Linker flags&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">4.)</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">Red Hat 8 &amp; 9 set the
Default locale to <small>UTF</small> which causes problems
with MakeMaker. To build DBD::mysql on these systems, do a
&rsquo;unset <small>LANG</small> &rsquo; before runing
&rsquo;perl Makefile.PL&rsquo;</p></td></tr>
</table>

<h2>SUPPORT
<a name="SUPPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Finally, if
everything else fails, you are not alone. First of all, for
an immediate answer, you should look into the archives of
the mailing list <b>perl@lists.mysql.com</b>. See
http://www.mysql.com for archive locations.</p>

<p style="margin-left:11%; margin-top: 1em">If you
don&rsquo;t find an appropriate posting and reply in the
mailing list, please post a question. Typically a reply will
be seen within one or two days.</p>
<hr>
</body>
</html>
