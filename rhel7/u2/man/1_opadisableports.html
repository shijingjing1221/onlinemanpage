<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:03:17 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opadisableports</title>

</head>
<body>

<h1 align="center">opadisableports</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#Environment">Environment</a><br>
<a href="#Examples">Examples</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opadisableports</p>

<p style="margin-left:11%; margin-top: 1em"><b>(Linux)</b>
Accepts a csv file listing links to disable. For each HFI-SW
link, the switch side of the link is disabled. For each
SW-SW link, the side of the link with the lower LID (that is
typically the side closest to the SM) is disabled. This
approach generally permits a future opaenable_ports
operation to re-enable the port once the issue is corrected
or ready to be retested. When using the -R option this tool
does not look at the routes, it disables the switch ports
with the lower value LID. The list of disabled ports is
tracked in /etc/sysconfig/opa/disabled*.csv .</p>

<h2>Syntax
<a name="Syntax"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opadisableports
[-R] [-t <i>portsfile</i>] [-p <i>ports</i>] [
<i>reason</i>] &lt; disable.csv</p>

<p style="margin-left:11%; margin-top: 1em">or <br>
opadisableports --help</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">--help</p></td>
<td width="6%"></td>
<td width="74%">


<p style="margin-top: 1em">Produce full help text.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>-R</p></td>
<td width="6%"></td>
<td width="74%">


<p>Do not attempt to get routes for computation of distance
instead just disable switch port with lower LID assuming
that will be closer to this node.</p></td></tr>
</table>

<p style="margin-left:11%;">-t <i>portsfile</i></p>

<p style="margin-left:26%;">File with list of local HFI
ports used to access fabric(s) for operation, default is
/etc/sysconfig/opa/ports .</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-p <i>ports</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>List of local HFI ports used to access fabric(s) for
analysis default is first active port.This is specified as
hfi:port</p> </td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">0:0 First
active port in system.</p>

<p style="margin-left:26%; margin-top: 1em">0:y Port y
within system.</p>

<p style="margin-left:26%; margin-top: 1em">x:0 First
active port on HFI x.</p>

<p style="margin-left:26%; margin-top: 1em">x:y HFI x, port
y.</p>

<p style="margin-left:26%; margin-top: 1em">The first HFI
in the system is 1. The first port on an HFI is 1.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="10%">


<p style="margin-top: 1em"><i>reason</i></p></td>
<td width="4%"></td>
<td width="74%">


<p style="margin-top: 1em">Optional text description of
reason ports are being disabled, will be saved at the end of
any new lines in the disabled file. For ports already in the
disabled file, this is ignored.</p></td></tr>
</table>

<p style="margin-left:11%;">disable.csv</p>

<p style="margin-left:26%;">File listing the links to
disable. The list is of the form:
NodeGUID;PortNum;NodeType;NodeDesc;NodeGUID;PortNum;
NodeType;NodeDesc;Reason</p>

<p style="margin-left:26%; margin-top: 1em">For each listed
link, the switch port with the lower LID (closer to the SM)
will be disabled. The <i>reason</i> field is optional. The
<i>reason</i> field and any additional fields provided will
be saved in the disabled file. An input file such as this
can be generated by using opaextract_bad_links or
opaextract_sel_links .</p>

<h2>Environment
<a name="Environment"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables are also used by this command:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>PORTS</b></p></td>
<td width="8%"></td>
<td width="69%">


<p>List of ports, used in absence of -t and -p .</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>PORTS_FILE</b></p>

<p style="margin-left:26%;">File containing list of ports,
used in absence of -t and -p .</p>

<h2>Examples
<a name="Examples"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opadisableports
&acute;bad cable&acute; &lt; disable.csv opadisableports -p
&acute;1:1 1:2 2:1 2:2&acute; &acute;dead servers&acute;
&lt; disable.csv</p>
<hr>
</body>
</html>
