<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:03:17 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opapmaquery</title>

</head>
<body>

<h1 align="center">opapmaquery</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#-h and -p options permit a variety of selections:--&gt;">-h and -p options permit a variety of selections:--&gt;</a><br>
<a href="#otype options vary by report--&gt;">otype options vary by report--&gt;</a><br>
<a href="#Examples">Examples</a><br>
<a href="#Additional examples--&gt;">Additional examples--&gt;</a><br>
<a href="#Sample Output">Sample Output</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opapmaquery</p>

<p style="margin-left:11%; margin-top: 1em">(All) This is a
low level tool which can perform individual PMA queries
against a specific LID. It is very useful in displaying port
runtime information.</p>

<h2>Syntax
<a name="Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opapmaquery
[-v] [-s <i>sl</i>] [-l <i>lid</i>] [-h <i>hfi</i></p>

<p style="margin-left:11%; margin-top: 1em">] [-p
<i>port</i>][-o <i>otype</i>] [-m <i>port</i>] [-n
<i>mask</i>] [-e <i>mask</i>] [-w <i>mask</i>] [-c
<i>mode</i>]</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em">-v</p></td>
<td width="3%"></td>
<td width="74%">


<p style="margin-top: 1em">Verbose output. Can be specified
more than once for additional openib debugging and libibumad
debugging.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-s <i>sl</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Specify different Service Level (default is 0)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-l <i>lid</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Destination lid, default is local port .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-h <i>hfi</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>HFI , numbered 1..n. Using 0 specifies that the -p
<i>port</i> port will be a system wide port number (default
is 0).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-p <i>port</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Port, numbered 1..n. If -h <i>hfi</i> is 0 then
<i>port</i> will be a system wide port number (default is
1).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-o <i>otype</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Output type. Default is getportstatus .Valid output
types are: :</p></td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">classportinfo
List of port info records.</p>

<p style="margin-left:26%; margin-top: 1em">getportstatus
List of port status records. [-m port] [-w vl mask]</p>

<p style="margin-left:26%; margin-top: 1em">clearportstats
Clears the port status. [-n port mask] [-e counter mask] [-w
vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">getdatacounters
List of data counters. [-n port mask] [-w vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">geterrorcounters
List of error counters. [-n port mask] [-w vl mask]</p>

<p style="margin-left:26%; margin-top: 1em">geterrorinfo
List of error info. [-n port mask]</p>

<p style="margin-left:26%; margin-top: 1em">clearerrorinfo
Clears the error info. [-n port mask] [-e counter mask]</p>

<h2>-h and -p options permit a variety of selections:--&gt;
<a name="-h and -p options permit a variety of selections:--&gt;"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em">-h 0</p></td>
<td width="1%"></td>
<td width="74%">


<p style="margin-top: 1em">First active port in system
(this is the default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p 0</p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port in system.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port on HFI <i>x</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i>-p 0</p></td>
<td width="1%"></td>
<td width="74%">


<p>First active port on HFI <i>x</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p <i>y</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>Port <i>y</i>within system (irrespective of which ports
are active).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i>-p <i>y</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>HFI <i>x</i>, port <i>y</i></p></td></tr>
</table>

<h2>otype options vary by report--&gt;
<a name="otype options vary by report--&gt;"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em">-m <i>port</i></p></td>
<td width="4%"></td>
<td width="74%">


<p style="margin-top: 1em">Port in destination device to
query/clear required when using -l option for all but -o
classportinfo .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-n <i>mask</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Port Mask, in hex, bits represent ports 31-0 (For
example: 0x2 for port 1, 0x6 for ports 1,2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-e <i>mask</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Counter/error Select Mask, in hex, bit positions as
shown below. Default is all bits set (e.g. 0xffffffe0).</p></td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">0x80000000 For
Counters - Xmit DataFor Error Info - Rcv Error Info</p>

<p style="margin-left:26%; margin-top: 1em">0x40000000 For
Counters - Rcv DataFor Error Info - Excessive Buffer
Overrun</p>

<p style="margin-left:26%; margin-top: 1em">0x20000000 For
Counters - Xmit PktsFor Error Info - Xmit Const Error
Info</p>

<p style="margin-left:26%; margin-top: 1em">0x10000000 For
Counters - Rcv PktsFor Error Info - Rcv Const Error Info</p>

<p style="margin-left:26%; margin-top: 1em">0x08000000 For
Counters - Multicast Xmit PktsFor Error Info - Rcv Switch
Relay Error Info</p>

<p style="margin-left:26%; margin-top: 1em">0x04000000 For
Counters - Multicast Rcv PktsFor Error Info - Uncorrectable
Error Info</p>

<p style="margin-left:26%; margin-top: 1em">0x02000000 For
Counters - Xmit WaitFor Error Info - FM Config Error
Info</p>

<p style="margin-left:26%; margin-top: 1em">0x01000000 For
Counters - Congestion Discards</p>

<p style="margin-left:26%; margin-top: 1em">0x00800000 For
Counters - Rcv FECN</p>

<p style="margin-left:26%; margin-top: 1em">0x00400000 For
Counters - Rcv BECN</p>

<p style="margin-left:26%; margin-top: 1em">0x00200000 For
Counters - Xmit Time Cong.</p>

<p style="margin-left:26%; margin-top: 1em">0x00100000 For
Counters - Xmit Time Wasted BW</p>

<p style="margin-left:26%; margin-top: 1em">0x00080000 For
Counters - Xmit Time Wait Data</p>

<p style="margin-left:26%; margin-top: 1em">0x00040000 For
Counters - Rcv Bubble</p>

<p style="margin-left:26%; margin-top: 1em">0x00020000 For
Counters - Mark FECN</p>

<p style="margin-left:26%; margin-top: 1em">0x00010000 For
Counters - Rcv Constraint Errors</p>

<p style="margin-left:26%; margin-top: 1em">0x00008000 For
Counters - Rcv Switch Relay</p>

<p style="margin-left:26%; margin-top: 1em">0x00004000 For
Counters - Xmit Discards</p>

<p style="margin-left:26%; margin-top: 1em">0x00002000 For
Counters - Xmt Constraint Errors</p>

<p style="margin-left:26%; margin-top: 1em">0x00001000 For
Counters - Rcv Rmt Phys. Errors</p>

<p style="margin-left:26%; margin-top: 1em">0x00000800 For
Counters - Local Link Integrity</p>

<p style="margin-left:26%; margin-top: 1em">0x00000400 For
Counters - Rcv Errors</p>

<p style="margin-left:26%; margin-top: 1em">0x00000200 For
Counters - Exc. Buffer Overrun</p>

<p style="margin-left:26%; margin-top: 1em">0x00000100 For
Counters - FM Config Errors</p>

<p style="margin-left:26%; margin-top: 1em">0x00000080 For
Counters - Link Error Recovery</p>

<p style="margin-left:26%; margin-top: 1em">0x00000040 For
Counters - Link Error Downed</p>

<p style="margin-left:26%; margin-top: 1em">0x00000020 For
Counters - Uncorrectable Errors</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em">-w <i>mask</i></p></td>
<td width="4%"></td>
<td width="74%">


<p style="margin-top: 1em">Virtual Lane Select Mask, in
hex, bits represent VL number 31-0 (e.g. 0x1 for VL 0, 0x3
for VL 0,1). Default is none.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-c <i>mode</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Counter Size Mode for get/display. 0= 64bit (default),
1= 32 bit.</p></td></tr>
</table>

<h2>Examples
<a name="Examples"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
classportinfo # get PMA classportinfo opapmaquery -o
getportstatus # get data and error counts, local port
opapmaquery -o getdatacounters -n 0x2 # get data counts,
local port 1 opapmaquery -o geterrorcounters -n 0x2 # get
error counts, local port 1 opapmaquery -o clearportstatus -n
0x2 # clear all counters local port 1 opapmaquery -o
geterrorinfo -n 0x2 # get error info for local port 1
opapmaquery -o clearerrorinfo -n 0x2 # clear all error info,
local port 1</p>

<h2>Additional examples--&gt;
<a name="Additional examples--&gt;"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For device at
lid 6, get data counters on ports 1-6, inclusive of VL 0
data: <br>
opapmaquery -o getdatacounters -l 6 -n 0x7e -w 0x1</p>

<p style="margin-left:11%; margin-top: 1em">For device at
lid 6, on port 1, clear only error counters: <br>
opapmaquery -o clearportstatus -l 6 -n 0x2 -e 0x1ffff</p>

<p style="margin-left:11%; margin-top: 1em">For device at
lid 6, on ports 1, clear Uncorrectable Error Info: <br>
opapmaquery -o clearerrorinfo -l 6 -n 0x2 -e 0x04000000</p>

<h2>Sample Output
<a name="Sample Output"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">[root@luanne
~]# opapmaquery Performance: Transmit Xmit Data 0 MiB (72
Quads) Xmit Pkts 1 Performance: Receive Rcv Data 0 MiB (0
Quads) Rcv Pkts 0 Errors: Symbol Errors 0 Link Error
Recovery 0 Link Downed 0 Port Rcv Errors 0 Port Rcv Rmt Phys
Err 0 Port Rcv Sw Relay Err 0 Port Xmit Discards 2 Port Xmit
Constraint 0 Port Rcv Constraint 0 Local Link Integrity 0
Exc. Buffer Overrun 0 VL15 Dropped 2</p>
<hr>
</body>
</html>
