<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 02:02:22 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NFS4_SETFACL</title>

</head>
<body>

<h1 align="center">NFS4_SETFACL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#PERMISSIONS ALIASES">PERMISSIONS ALIASES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#CONTACT">CONTACT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">nfs4_setfacl,
nfs4_editfacl &minus; manipulate NFSv4 file/directory access
control lists</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>nfs4_setfacl</b>
[OPTIONS] COMMAND <i>file</i>... <b><br>
nfs4_editfacl</b> [OPTIONS] <i>file</i>...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>nfs4_setfacl</b>
manipulates the NFSv4 Access Control List (ACL) of one or
more <i>files</i> (or directories), provided they are on a
mounted NFSv4 filesystem which supports ACLs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>nfs4_editfacl</b>
is equivalent to <b>nfs4_setfacl -e</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Refer to the
<b>nfs4_acl</b>(5) manpage for information about NFSv4 ACL
terminology and syntax.</p>

<p style="margin-left:11%; margin-top: 1em"><b>COMMANDS
<br>
-a</b> <i>acl_spec</i> [<i>index</i>]</p>

<p style="margin-left:22%;">add the ACEs from
<i>acl_spec</i> to <i>file</i>&rsquo;s ACL. ACEs are
inserted starting at the <i>index</i>th position (DEFAULT:
1) of <i>file</i>&rsquo;s ACL.</p>

<p style="margin-left:11%;"><b>-A</b> <i>acl_file</i>
[<i>index</i>]</p>

<p style="margin-left:22%;">add the ACEs from the acl_spec
in <i>acl_file</i> to <i>file</i>&rsquo;s ACL. ACEs are
inserted starting at the <i>index</i>th position (DEFAULT:
1) of <i>file</i>&rsquo;s ACL.</p>

<p style="margin-left:11%;"><b>-x</b> <i>acl_spec</i> |
<i>index</i></p>

<p style="margin-left:22%;">delete ACEs matched from
<i>acl_spec</i> - or delete the <i>index</i>th ACE - from
<i>file</i>&rsquo;s ACL. Note that the ordering of the ACEs
in <i>acl_spec</i> does not matter.</p>

<p style="margin-left:11%;"><b>-X</b> <i>acl_file</i></p>

<p style="margin-left:22%;">delete ACEs matched from the
acl_spec in <i>acl_file</i> from <i>file</i>&rsquo;s ACL.
Note that the ordering of the ACEs in the acl_spec does not
matter.</p>

<p style="margin-left:11%;"><b>-s</b> <i>acl_spec</i></p>

<p style="margin-left:22%;">set <i>file</i>&rsquo;s ACL to
<i>acl_spec</i>.</p>

<p style="margin-left:11%;"><b>-S</b> <i>acl_file</i></p>

<p style="margin-left:22%;">set <i>file</i>&rsquo;s ACL to
the acl_spec in <i>acl_file</i>.</p>

<p style="margin-left:11%;"><b>-e</b>, <b>--edit</b></p>

<p style="margin-left:22%;">edit <i>file</i>&rsquo;s ACL in
the editor defined in the EDITOR environment variable
(DEFAULT: <b>vi</b>(1)) and set the resulting ACL upon a
clean exit, assuming changes made in the editor were saved.
Note that if multiple <i>files</i> are specified, the editor
will be serially invoked once per <i>file</i>.</p>

<p style="margin-left:11%;"><b>-m</b> <i>from_ace
to_ace</i></p>

<p style="margin-left:22%;">modify <i>file</i>&rsquo;s ACL
in-place by replacing <i>from_ace</i> with
<i>to_ace</i>.</p>

<p style="margin-left:11%;"><b>-?</b>, <b>-h</b>,
<b>--help</b></p>

<p style="margin-left:22%;">display help text and exit.</p>

<p style="margin-left:11%;"><b>--version</b></p>

<p style="margin-left:22%;">display this program&rsquo;s
version and exit.</p>

<p style="margin-left:11%; margin-top: 1em">NOTE: if
&rsquo;-&rsquo; is given as the <i>acl_file</i> with the
<b>-A</b>/<b>-X</b>/<b>-S</b> flags, the acl_spec will be
read from stdin.</p>

<p style="margin-left:11%; margin-top: 1em"><b>OPTIONS <br>
-R</b>, <b>--recursive</b></p>

<p style="margin-left:22%;">recursively apply to a
directory&rsquo;s files and subdirectories. Similar to
<b>setfacl</b>(1), the default behavior is to follow
symlinks given on the command line and to skip symlinks
encountered while recursing through directories.</p>

<p style="margin-left:11%;"><b>-L</b>, <b>--logical</b></p>

<p style="margin-left:22%;">in conjunction with
<b>-R</b>/<b>--recursive</b>, a logical walk follows all
symbolic links.</p>

<p style="margin-left:11%;"><b>-P</b>,
<b>--physical</b></p>

<p style="margin-left:22%;">in conjunction with
<b>-R</b>/<b>--recursive</b>, a physical walk skips all
symbolic links.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p><b>--test</b></p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:22%;">display results of
<b>COMMAND</b>, but do not save changes.</p>

<h2>PERMISSIONS ALIASES
<a name="PERMISSIONS ALIASES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">With
<b>nfs4_setfacl</b>, one can use simple abbreviations
(&quot;aliases&quot;) to express generic &quot;read&quot;
(<b>R</b>), generic &quot;write&quot; (<b>W</b>), and
generic &quot;execute&quot; (<b>X</b>) <i>permissions</i>,
familiar from the POSIX mode bits used by, e.g.,
<b>chmod</b>(1). To use these aliases, one can put them in
the <i>permissions</i> field of an NFSv4 ACE and
<b>nfs4_setfacl</b> will convert them: an <b>R</b> is
expanded to <b>rntcy</b>, a <b>W</b> is expanded to
<b>watTNcCy</b> (with <b>D</b> added to directory ACEs), and
an <b>X</b> is expanded to <b>xtcy</b>. Please refer to the
<b>nfs4_acl</b>(5) manpage for information on specific NFSv4
ACE <i>permissions</i>.</p>

<p style="margin-left:11%; margin-top: 1em">For example, if
one wanted to grant generic &quot;read&quot; and
&quot;write&quot; access on a file, the NFSv4
<i>permissions</i> field would normally contain something
like <b>rwatTnNcCy</b>. Instead, one might use aliases to
accomplish the same goal with <b>RW</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The two
<i>permissions</i> not included in any of the aliases are
<b>d</b> (delete) and <b>o</b> (write-owner). However, they
can still be used: e.g., a <i>permissions</i> field
consisting of <b>Wdo</b> expresses generic &quot;write&quot;
access as well as the ability to delete and change
ownership.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Assume that the
file &lsquo;foo&rsquo; has the following NFSv4 ACL for the
following examples:</p>


<p style="margin-left:22%; margin-top: 1em">A::OWNER@:rwatTnNcCy
<br>
D::OWNER@:x <br>
A:g:GROUP@:rtncy <br>
D:g:GROUP@:waxTC <br>
A::EVERYONE@:rtncy <br>
D::EVERYONE@:waxTC</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>-</p></td>
<td width="2%"></td>
<td width="86%">


<p>add ACE granting &lsquo;alice@nfsdomain.org&rsquo;
generic &quot;read&quot; and &quot;execute&quot; access
(defaults to prepending ACE to ACL):</p></td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -a
A::alice@nfsdomain.org:rxtncy foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="69%">


<p style="margin-top: 1em">add the same ACE as above, but
using aliases:</p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -a
A::alice@nfsdomain.org:RX foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em">edit existing ACL in a text
editor and set modified ACL on clean save/exit:</p></td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -e foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em">set ACL (overwrites original) to
contents of a <i>spec_file</i> named
&lsquo;newacl.txt&rsquo;:</p> </td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -S newacl.txt
foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em">recursively set the ACLs of all
files and subdirectories in the current directory, skipping
all symlinks encountered, to the ACL contained in the
<i>spec_file</i> named &lsquo;newacl.txt&rsquo;:</p></td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -R -P -S
newacl.txt *</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="86%">


<p style="margin-top: 1em">delete the first ACE, but only
print the resulting ACL (does not save changes):</p></td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl --test -x 1
foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="48%">


<p style="margin-top: 1em">delete the last two ACEs
above:</p> </td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -x
&quot;A::EVERYONE@rtncy, D::EVERYONE@:waxTC&quot; foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="60%">


<p style="margin-top: 1em">modify (in-place) the second ACE
above:</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_setfacl -m D::OWNER@:x
D::OWNER@:xo foo</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">-</p></td>
<td width="2%"></td>
<td width="72%">


<p style="margin-top: 1em">set ACLs of &lsquo;bar&rsquo;
and &lsquo;frobaz&rsquo; to ACL of &lsquo;foo&rsquo;:</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:14%;">$ nfs4_getfacl foo |
nfs4_setfacl -S - bar frobaz</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>nfs4_setfacl</b>
was written by people at CITI, the Center for Information
Technology Integration (<i>http://www.citi.umich.edu</i>).
This manpage was written by David Richter.</p>

<h2>CONTACT
<a name="CONTACT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please send bug
reports, feature requests, and comments to
&lt;<i>nfsv4@linux-nfs.org</i>&gt;.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>nfs4_getfacl</b>(1),
<b>nfs4_acl</b>(5), <i>RFC3530</i> (NFSv4.0), NFSv4.1 Minor
Version Draft.</p>
<hr>
</body>
</html>
