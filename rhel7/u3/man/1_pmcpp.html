<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:09:15 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMCPP</title>

</head>
<body>

<h1 align="center">PMCPP</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#PCP ENVIRONMENT">PCP ENVIRONMENT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pmcpp</b>
&minus; simple preprocessor for the Performance Co-Pilot</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pmcpp</b>
[<b>&minus;Prs</b>] [<b>&minus;D</b>
<i>name</i>[=<i>value</i>] ...] [<b>&minus;I</b> <i>dir</i>
...] [<i>infile</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pmcpp</b>
provides a very simple pre-processor originally designed for
manipulating Performance Metric Name Space (PMNS) files for
the Performance Co-Pilot (PCP), but later generalized to
provide conditional blocks, include file processing, in-line
shell command execution and macro substitution for arbitrary
files. It is most commonly used internally to process the
PMNS file(s) after <b>pmLoadNameSpace</b>(3) or
<b>pmLoadASCIINameSpace</b>(3) is called and to pre-process
the configuration files for <b>pmlogger</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Input lines are
read from <i>infile</i> (or standard input if <i>infile</i>
is not specified), processed and written to standard
output.</p>

<p style="margin-left:11%; margin-top: 1em">All C-style
comments of the form /* ... */ are stripped from the input
stream.</p>

<p style="margin-left:11%; margin-top: 1em">There are no
predefined macros for <b>pmcpp</b> although macros may be
defined on the command line using the <b>&minus;D</b>
option, where <i>name</i> and <i>value</i> must follow the
same rules as described below for the <b>#define</b>
directive.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pmcpp</b>
accepts the following directives in the input stream (like
<b>cpp</b>(1)):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="30%">


<p><b>#include &quot;</b><i>filename</i><b>&quot;</b></p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:15%;">or <b><br>
#include &lt;</b><i>filename</i><b>&gt;</b> <br>
In either case the directory search path for <i>filename</i>
tries <i>filename</i> first, then the directory for the
command line <i>infile</i> (if any), followed by any
directories named in <b>&minus;I</b> command line arguments,
and finally the <b>$PCP_VAR_DIR/pmns</b> directory (the
latter is for backwards compatibility with earlier versions
of <b>pmcpp</b> and the implied used from
<b>pmLoadASCIINameSpace</b>(3)). <b>#include</b> directives
may be nested, up to a maximum depth of 5.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="25%">


<p style="margin-top: 1em"><b>#shell
&quot;</b><i>command</i><b>&quot;</b></p> </td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:15%;">or <b><br>
#shell &rsquo;</b><i>command</i><b>&rsquo; <br>
The shell</b> <i>command</i> will be executed and the
standard output is inserted into the stream of data to be
processed by <b>pmcpp</b>. Functionally this is similar to a
<b>#include</b> directive, except input lines are read from
a <i>command</i> rather than a file. The <b>#shell</b>
directive is most useful for including or excluding
<b>#define</b> or <b>#undef</b> directives based on run-time
logic in the <i>command</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="28%">


<p style="margin-top: 1em"><b>#define</b> <i>name
value</i></p> </td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:15%;">or <b><br>
#define</b> <i>name</i>
<b>&quot;</b><i>value</i><b>&quot;</b> <br>
or <b><br>
#define</b> <i>name</i>
<b>&rsquo;</b><i>value</i><b>&rsquo;</b> <br>
Defines a value for the macro <i>name</i> which must be a
valid C-style name, so leading alphabetic or underscore
followed by zero or more alphanumerics or underscores.
<i>value</i> is optional (and defaults to an empty string).
There is no character escape mechanism, but either single
quotes or double quotes may be used to define a <i>value</i>
with special characters or embedded horizontal white space
(no newlines).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>#undef</b> <i>name</i></p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:15%;">Removes the macro definition,
if any, for <i>name</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="17%">


<p style="margin-top: 1em"><b>#ifdef</b> <i>name</i></p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:15%;">... <b><br>
#endif</b> <br>
or <b><br>
#ifndef</b> <i>name</i> <br>
... <b><br>
#endif</b> <br>
The enclosing lines will be stripped or included, depending
if the macro <i>name</i> is defined or not.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="8%">


<p style="margin-top: 1em"><b>#else</b></p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:15%;">Within a <b>#ifdef</b> or
<b>#ifndef</b> block, <b>#else</b> may be used to delimit
lines to be included if the preceding
&lsquo;&lsquo;if&rsquo;&rsquo; condition is false.</p>

<p style="margin-left:11%; margin-top: 1em">Macro
substitution is achieved by breaking the input stream into
words separated by white space or characters that are not
valid in a macro name, i.e. not alphanumeric and not
underscore. Each word is checked and if it matches a macro
name, the word is replaced by the macro value, otherwise the
word is unchanged.</p>

<p style="margin-left:11%; margin-top: 1em">There is
generally one output line for each input line, although the
line may be empty if the text has been stripped due to the
handling of comments or conditional directives. When there
is a change in the input stream, an additional output line
is generated of the form:</p>

<p style="margin-left:11%; margin-top: 1em"># lineno
&quot;filename&quot;</p>

<p style="margin-left:11%; margin-top: 1em">to indicate the
<i>following</i> line of output corresponds to line number
<i>lineno</i> of the input file <i>filename</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;P</b> argument suppresses the generation of these
linemarker lines.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;s</b> argument changes the expected input style
from C-like to shell-like (where # is a comment prefix).
This forces the following changes in <b>pmcpp</b>
behaviour:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p style="margin-top: 1em">The control prefix character
changes from <b>#</b> to <b>%</b>, so <b>%include</b> for
example.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>No comment stripping is performed.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To provide
finer control of macro expansion, the <b>&minus;r</b> option
restricts macro substitution to words that match the
patterns <b>#</b>name or <b>#{</b>name<b>}</b> or if
<b>&minus;s</b> is specified, then <b>%</b>name or
<b>%{</b>name<b>}</b>. In this mode, the macro <i>name</i>
alone in the input stream will never be expanded, however in
control lines (like <b>#ifdef</b>) the macro <i>name</i>
should appear alone with out the prefix character or the
curly braces (refer to the EXAMPLES below).</p>

<p style="margin-left:11%; margin-top: 1em">Important
<b>cpp</b>(1) features that are <b>not</b> supported by
<b>pmcpp</b> include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p style="margin-top: 1em">Macros with parameters &minus;
the <b>pmcpp</b> macros support only parameterless string
substitution.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p><b>#if</b> <i>expr</i></p></td></tr>
</table>

<p style="margin-left:15%;">... <b><br>
#endif</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p style="margin-top: 1em">Nested use of <b>#ifdef</b> or
<b>#ifndef</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>Stripping C++ style comments, as in // comment.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>Error recovery - the first error encountered by
<b>pmcpp</b> will be fatal.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p><b>cpp</b>(1) command line options like <b>&minus;o</b>,
<b>&minus;W</b>, <b>&minus;U</b>, and <b>&minus;x</b>.</p></td></tr>
</table>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p align="center" style="margin-top: 1em"><b><img src="grohtml-324011.png" alt="Image grohtml-324011.png"></b></p>

<p style="margin-left:11%;">For the following examples, the
file <i>frequencies</i> contains the lines:</p>

<pre style="margin-left:23%;">%define dk_freq 1minute
%define cpu_freq &rsquo;15 sec&rsquo;</pre>



<p align="center" style="margin-top: 1em"><img src="grohtml-324012.png" alt="Image grohtml-324012.png"></p>


<p align="center" style="margin-top: 1em"><img src="grohtml-324013.png" alt="Image grohtml-324013.png"></p>

<h2>PCP ENVIRONMENT
<a name="PCP ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Environment
variables with the prefix <b>PCP_</b> are used to
parameterize the file and directory names used by PCP. On
each installation, the file <i>/etc/pcp.conf</i> contains
the local values for these variables. The <b>$PCP_CONF</b>
variable may be used to specify an alternative configuration
file, as described in <b>pcp.conf</b>(5).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>cpp</b>(1),
<b>pmLoadASCIINameSpace</b>(3), <b>pmLoadNameSpace</b>(3),
<b>pmns</b>(5), <b>pcp.conf</b>(5) and
<b>pcp.env</b>(5).</p>
<hr>
</body>
</html>
