<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:28:14 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SLAPD-SHELL</title>

</head>
<body>

<h1 align="center">SLAPD-SHELL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#WARNING">WARNING</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#ACCESS CONTROL">ACCESS CONTROL</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#LIMITATIONS">LIMITATIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">slapd&minus;shell
&minus; Shell backend to slapd</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Shell
backend to <b>slapd</b>(8) executes external programs to
implement operations, and is designed to make it easy to tie
an existing database to the <b>slapd</b> front-end.</p>

<p style="margin-left:11%; margin-top: 1em">This backend is
primarily intended to be used in prototypes.</p>

<h2>WARNING
<a name="WARNING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>abandon</b> shell command has been removed since OpenLDAP
2.1.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
<b>slapd.conf</b> options apply to the SHELL backend
database. That is, they must follow a &quot;database
shell&quot; line and come before any subsequent
&quot;backend&quot; or &quot;database&quot; lines. Other
database options are described in the <b>slapd.conf</b>(5)
manual page.</p>

<p style="margin-left:11%; margin-top: 1em">These options
specify the pathname and arguments of the program to execute
in response to the given LDAP operation. Each option is
followed by the input lines that the program receives:
<b><br>
add &lt;pathname&gt; &lt;argument&gt;...</b></p>

<p style="margin-left:22%;">ADD <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
&lt;entry in LDIF format&gt;</p>

<p style="margin-left:11%;"><b>bind &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">BIND <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;DN&gt; <br>
method: &lt;method number&gt; <br>
credlen: &lt;length of &lt;credentials&gt;&gt; <br>
cred: &lt;credentials&gt;</p>

<p style="margin-left:11%;"><b>compare &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">COMPARE <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;DN&gt; <br>
&lt;attribute&gt;: &lt;value&gt;</p>

<p style="margin-left:11%;"><b>delete &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">DELETE <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;DN&gt;</p>

<p style="margin-left:11%;"><b>modify &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">MODIFY <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;DN&gt; <br>
&lt;repeat { <br>

&lt;&quot;add&quot;/&quot;delete&quot;/&quot;replace&quot;&gt;:
&lt;attribute&gt; <br>
&lt;repeat { &lt;attribute&gt;: &lt;value&gt; }&gt; <br>
&minus; <br>
}&gt;</p>

<p style="margin-left:11%;"><b>modrdn &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">MODRDN <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;DN&gt; <br>
newrdn: &lt;new RDN&gt; <br>
deleteoldrdn: &lt;0 or 1&gt; <br>
&lt;if new superior is specified: &quot;newSuperior:
&lt;DN&gt;&quot;&gt;</p>

<p style="margin-left:11%;"><b>search &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">SEARCH <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
base: &lt;base DN&gt; <br>
scope: &lt;0-2, see ldap.h&gt; <br>
deref: &lt;0-3, see ldap.h&gt; <br>
sizelimit: &lt;size limit&gt; <br>
timelimit: &lt;time limit&gt; <br>
filter: &lt;filter&gt; <br>
attrsonly: &lt;0 or 1&gt; <br>
attrs: &lt;&quot;all&quot; or space-separated attribute
list&gt;</p>

<p style="margin-left:11%;"><b>unbind &lt;pathname&gt;
&lt;argument&gt;...</b></p>

<p style="margin-left:22%;">UNBIND <br>
msgid: &lt;message id&gt; <br>
&lt;repeat { &quot;suffix:&quot; &lt;database suffix DN&gt;
}&gt; <br>
dn: &lt;bound DN&gt;</p>

<p style="margin-left:11%; margin-top: 1em">Note that you
need only supply configuration lines for those commands you
want the backend to handle. Operations for which a command
is not supplied will be refused with an &quot;unwilling to
perform&quot; error.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>search</b> command should output the entries in LDIF
format, each entry followed by a blank line, and after these
the RESULT below.</p>

<p style="margin-left:11%; margin-top: 1em">All commands
except <b>unbind</b> should then output:</p>

<p style="margin-left:22%;">RESULT <br>
code: &lt;integer&gt; <br>
matched: &lt;matched DN&gt; <br>
info: &lt;text&gt;</p>

<p style="margin-left:11%;">where only the RESULT line is
mandatory. Lines starting with &lsquo;#&rsquo; or
&lsquo;DEBUG:&rsquo; are ignored.</p>

<h2>ACCESS CONTROL
<a name="ACCESS CONTROL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>shell</b> backend does not honor all ACL semantics as
described in <b>slapd.access</b>(5). In general, access to
objects is checked by using a dummy object that contains
only the DN, so access rules that rely on the contents of
the object are not honored. In detail:</p>

<p style="margin-left:11%; margin-top: 1em">The <b>add</b>
operation does not require <b>write (=w)</b> access to the
<b>children</b> pseudo-attribute of the parent entry.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>bind</b>
operation requires <b>auth (=x)</b> access to the
<b>entry</b> pseudo-attribute of the entry whose identity is
being assessed; <b>auth (=x)</b> access to the credentials
is not checked, but rather delegated to the underlying shell
script.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>compare</b> operation requires <b>read (=r)</b> access
(FIXME: wouldn&rsquo;t <b>compare (=c)</b> be a more
appropriate choice?) to the <b>entry</b> pseudo-attribute of
the object whose value is being asserted; <b>compare
(=c)</b> access to the attribute whose value is being
asserted is not checked.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>delete</b> operation does not require <b>write (=w)</b>
access to the <b>children</b> pseudo-attribute of the parent
entry.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>modify</b> operation requires <b>write (=w)</b> access to
the <b>entry</b> pseudo-attribute; <b>write (=w)</b> access
to the specific attributes that are modified is not
checked.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>modrdn</b> operation does not require <b>write (=w)</b>
access to the <b>children</b> pseudo-attribute of the parent
entry, nor to that of the new parent, if different; <b>write
(=w)</b> access to the distinguished values of the naming
attributes is not checked.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>search</b> operation does not require <b>search (=s)</b>
access to the <b>entry</b> pseudo_attribute of the
searchBase; <b>search (=s)</b> access to the attributes and
values used in the filter is not checked.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There is an
example search script in the slapd/back&minus;shell/
directory in the OpenLDAP source tree.</p>

<h2>LIMITATIONS
<a name="LIMITATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell
backend does not support threaded environments. When using
the shell backend, <b>slapd</b>(8) should be built
<i>&minus;&minus;without&minus;threads</i>.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<p style="margin-left:22%;">default slapd configuration
file</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>slapd.conf</b>(5),
<b>slapd</b>(8), <b>sh</b>(1).</p>
<hr>
</body>
</html>
