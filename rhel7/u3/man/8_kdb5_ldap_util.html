<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:47:10 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>KDB5_LDAP_UTIL</title>

</head>
<body>

<h1 align="center">KDB5_LDAP_UTIL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMAND-LINE OPTIONS">COMMAND-LINE OPTIONS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">kdb5_ldap_util
&minus; Kerberos configuration utility</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>kdb5_ldap_util</b>
[<b>&minus;D</b> <i>user_dn</i> [<b>&minus;w</b>
<i>passwd</i>]] [<b>&minus;H</b> <i>ldapuri</i>]
<b>command</b> [<i>command_options</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">kdb5_ldap_util
allows an administrator to manage realms, Kerberos services
and ticket policies.</p>

<h2>COMMAND-LINE OPTIONS
<a name="COMMAND-LINE OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;D</b>
<i>user_dn</i></p>

<p style="margin-left:22%;">Specifies the Distinguished
Name (DN) of the user who has sufficient rights to perform
the operation on the LDAP server.</p>

<p style="margin-left:11%;"><b>&minus;w</b>
<i>passwd</i></p>

<p style="margin-left:22%;">Specifies the password of
<i>user_dn</i>. This option is not recommended.</p>

<p style="margin-left:11%;"><b>&minus;H</b>
<i>ldapuri</i></p>

<p style="margin-left:22%;">Specifies the URI of the LDAP
server. It is recommended to use <b>ldapi://</b> or
<b>ldaps://</b> to connect to the LDAP server.</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>create</b></p>

<p style="margin-left:15%;"><b>create</b>
[<b>&minus;subtrees</b> <i>subtree_dn_list</i>]
[<b>&minus;sscope</b> <i>search_scope</i>]
[<b>&minus;containerref</b> <i>container_reference_dn</i>]
[<b>&minus;k</b> <i>mkeytype</i>] [<b>&minus;kv</b>
<i>mkeyVNO</i>] [<b>&minus;m|&minus;P</b>
<i>password</i>|<b>&minus;sf</b> <i>stashfilename</i>]
[<b>&minus;s</b>] [<b>&minus;r</b> <i>realm</i>]
[<b>&minus;maxtktlife</b> <i>max_ticket_life</i>]
[<b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i>] [<i>ticket_flags</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Creates realm
in directory. Options: <b><br>
&minus;subtrees</b> <i>subtree_dn_list</i></p>

<p style="margin-left:22%;">Specifies the list of subtrees
containing the principals of a realm. The list contains the
DNs of the subtree objects separated by colon
(<b>:</b>).</p>

<p style="margin-left:11%;"><b>&minus;sscope</b>
<i>search_scope</i></p>

<p style="margin-left:22%;">Specifies the scope for
searching the principals under the subtree. The possible
values are 1 or one (one level), 2 or sub (subtrees).</p>

<p style="margin-left:11%;"><b>&minus;containerref</b>
<i>container_reference_dn</i></p>

<p style="margin-left:22%;">Specifies the DN of the
container object in which the principals of a realm will be
created. If the container reference is not configured for a
realm, the principals will be created in the realm
container.</p>

<p style="margin-left:11%;"><b>&minus;k</b>
<i>mkeytype</i></p>

<p style="margin-left:22%;">Specifies the key type of the
master key in the database. The default is given by the
<b>master_key_type</b> variable in <i>kdc.conf(5)</i>.</p>

<p style="margin-left:11%;"><b>&minus;kv</b>
<i>mkeyVNO</i></p>

<p style="margin-left:22%;">Specifies the version number of
the master key in the database; the default is 1. Note that
0 is not allowed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Specifies that the master database password should be
read from the TTY rather than fetched from a file on the
disk.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;P</b>
<i>password</i></p>

<p style="margin-left:22%;">Specifies the master database
password. This option is not recommended.</p>

<p style="margin-left:11%;"><b>&minus;r</b>
<i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%;"><b>&minus;sf</b>
<i>stashfilename</i></p>

<p style="margin-left:22%;">Specifies the stash file of the
master database password.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="72%">


<p>Specifies that the stash file is to be created.</p></td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;maxtktlife</b>
<i>max_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum ticket life for principals in this
realm.</p>

<p style="margin-left:11%;"><b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum renewable life of tickets for principals
in this realm.</p>

<p style="margin-left:11%;"><i>ticket_flags</i></p>

<p style="margin-left:22%;">Specifies global ticket flags
for the realm. Allowable flags are documented in the
description of the <b>add_principal</b> command in
<i>kadmin(1)</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    create &minus;subtrees o=org &minus;sscope SUB &minus;r ATHENA.MIT.EDU
Password for &quot;cn=admin,o=org&quot;:
Initializing database for realm 'ATHENA.MIT.EDU'
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.
Enter KDC database master key:
Re&minus;enter KDC database master key to verify:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>modify</b></p>

<p style="margin-left:15%;"><b>modify</b>
[<b>&minus;subtrees</b> <i>subtree_dn_list</i>]
[<b>&minus;sscope</b> <i>search_scope</i>]
[<b>&minus;containerref</b> <i>container_reference_dn</i>]
[<b>&minus;r</b> <i>realm</i>] [<b>&minus;maxtktlife</b>
<i>max_ticket_life</i>] [<b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i>] [<i>ticket_flags</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Modifies the
attributes of a realm. Options: <b><br>
&minus;subtrees</b> <i>subtree_dn_list</i></p>

<p style="margin-left:22%;">Specifies the list of subtrees
containing the principals of a realm. The list contains the
DNs of the subtree objects separated by colon (<b>:</b>).
This list replaces the existing list.</p>

<p style="margin-left:11%;"><b>&minus;sscope</b>
<i>search_scope</i></p>

<p style="margin-left:22%;">Specifies the scope for
searching the principals under the subtrees. The possible
values are 1 or one (one level), 2 or sub (subtrees).</p>

<p style="margin-left:11%;"><b>&minus;containerref</b>
<i>container_reference_dn</i> <b>Specifies the DN of
the</b></p>

<p style="margin-left:22%;">container object in which the
principals of a realm will be created.</p>

<p style="margin-left:11%;"><b>&minus;r</b>
<i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%;"><b>&minus;maxtktlife</b>
<i>max_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum ticket life for principals in this
realm.</p>

<p style="margin-left:11%;"><b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum renewable life of tickets for principals
in this realm.</p>

<p style="margin-left:11%;"><i>ticket_flags</i></p>

<p style="margin-left:22%;">Specifies global ticket flags
for the realm. Allowable flags are documented in the
description of the <b>add_principal</b> command in
<i>kadmin(1)</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">shell% kdb5_ldap_util &minus;D cn=admin,o=org &minus;H
    ldaps://ldap&minus;server1.mit.edu modify +requires_preauth &minus;r
    ATHENA.MIT.EDU
Password for &quot;cn=admin,o=org&quot;:
shell%</pre>



<p style="margin-left:11%; margin-top: 1em"><b>view</b></p>

<p style="margin-left:15%;"><b>view</b> [<b>&minus;r</b>
<i>realm</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Displays the
attributes of a realm. Options: <b><br>
&minus;r</b> <i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    view &minus;r ATHENA.MIT.EDU
Password for &quot;cn=admin,o=org&quot;:
Realm Name: ATHENA.MIT.EDU
Subtree: ou=users,o=org
Subtree: ou=servers,o=org
SearchScope: ONE
Maximum ticket life: 0 days 01:00:00
Maximum renewable life: 0 days 10:00:00
Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE</pre>



<p style="margin-left:11%; margin-top: 1em"><b>destroy</b></p>

<p style="margin-left:15%;"><b>destroy</b>
[<b>&minus;f</b>] [<b>&minus;r</b> <i>realm</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Destroys an
existing realm. Options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If specified, will not prompt the user for
confirmation.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;r</b>
<i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">shell% kdb5_ldap_util &minus;D cn=admin,o=org &minus;H
    ldaps://ldap&minus;server1.mit.edu destroy &minus;r ATHENA.MIT.EDU
Password for &quot;cn=admin,o=org&quot;:
Deleting KDC database of 'ATHENA.MIT.EDU', are you sure?
(type 'yes' to confirm)? yes
OK, deleting database of 'ATHENA.MIT.EDU'...
shell%</pre>



<p style="margin-left:11%; margin-top: 1em"><b>list</b></p>

<p style="margin-left:15%;"><b>list</b></p>

<p style="margin-left:11%; margin-top: 1em">Lists the name
of realms.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">shell% kdb5_ldap_util &minus;D cn=admin,o=org &minus;H
    ldaps://ldap&minus;server1.mit.edu list
Password for &quot;cn=admin,o=org&quot;:
ATHENA.MIT.EDU
OPENLDAP.MIT.EDU
MEDIA&minus;LAB.MIT.EDU
shell%</pre>



<p style="margin-left:11%; margin-top: 1em"><b>stashsrvpw</b></p>

<p style="margin-left:15%;"><b>stashsrvpw</b>
[<b>&minus;f</b> <i>filename</i>] <i>name</i></p>

<p style="margin-left:11%; margin-top: 1em">Allows an
administrator to store the password for service object in a
file so that KDC and Administration server can use it to
authenticate to the LDAP server. Options: <b><br>
&minus;f</b> <i>filename</i></p>

<p style="margin-left:22%;">Specifies the complete path of
the service password file. By default,
<b>/usr/local/var/service_passwd</b> is used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><i>name</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>Specifies the name of the object whose password is to be
stored. If <i>krb5kdc(8)</i> or <i>kadmind(8)</i> are
configured for simple binding, this should be the
distinguished name it will use as given by the
<b>ldap_kdc_dn</b> or <b>ldap_kadmind_dn</b> variable in
<i>kdc.conf(5)</i>. If the KDC or kadmind is configured for
SASL binding, this should be the authentication name it will
use as given by the <b>ldap_kdc_sasl_authcid</b> or
<b>ldap_kadmind_sasl_authcid</b> variable.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util stashsrvpw &minus;f /home/andrew/conf_keyfile
    cn=service&minus;kdc,o=org
Password for &quot;cn=service&minus;kdc,o=org&quot;:
Re&minus;enter password for &quot;cn=service&minus;kdc,o=org&quot;:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>create_policy</b></p>

<p style="margin-left:15%;"><b>create_policy</b>
[<b>&minus;r</b> <i>realm</i>] [<b>&minus;maxtktlife</b>
<i>max_ticket_life</i>] [<b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i>] [<i>ticket_flags</i>]
<i>policy_name</i></p>

<p style="margin-left:11%; margin-top: 1em">Creates a
ticket policy in the directory. Options: <b><br>
&minus;r</b> <i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%;"><b>&minus;maxtktlife</b>
<i>max_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum ticket life for principals.</p>

<p style="margin-left:11%;"><b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i></p>

<p style="margin-left:22%;">(<i>getdate</i> string)
Specifies maximum renewable life of tickets for
principals.</p>

<p style="margin-left:11%;"><i>ticket_flags</i></p>

<p style="margin-left:22%;">Specifies the ticket flags. If
this option is not specified, by default, no restriction
will be set by the policy. Allowable flags are documented in
the description of the <b>add_principal</b> command in
<i>kadmin(1)</i>.</p>

<p style="margin-left:11%;"><i>policy_name</i></p>

<p style="margin-left:22%;">Specifies the name of the
ticket policy.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    create_policy &minus;r ATHENA.MIT.EDU &minus;maxtktlife &quot;1 day&quot;
    &minus;maxrenewlife &quot;1 week&quot; &minus;allow_postdated +needchange
    &minus;allow_forwardable tktpolicy
Password for &quot;cn=admin,o=org&quot;:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>modify_policy</b></p>

<p style="margin-left:15%;"><b>modify_policy</b>
[<b>&minus;r</b> <i>realm</i>] [<b>&minus;maxtktlife</b>
<i>max_ticket_life</i>] [<b>&minus;maxrenewlife</b>
<i>max_renewable_ticket_life</i>] [<i>ticket_flags</i>]
<i>policy_name</i></p>

<p style="margin-left:11%; margin-top: 1em">Modifies the
attributes of a ticket policy. Options are same as for
<b>create_policy</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H
    ldaps://ldap&minus;server1.mit.edu modify_policy &minus;r ATHENA.MIT.EDU
    &minus;maxtktlife &quot;60 minutes&quot; &minus;maxrenewlife &quot;10 hours&quot;
    +allow_postdated &minus;requires_preauth tktpolicy
Password for &quot;cn=admin,o=org&quot;:</pre>



<p style="margin-left:11%; margin-top: 1em"><b>view_policy</b></p>

<p style="margin-left:15%;"><b>view_policy</b>
[<b>&minus;r</b> <i>realm</i>] <i>policy_name</i></p>

<p style="margin-left:11%; margin-top: 1em">Displays the
attributes of a ticket policy. Options: <i><br>
policy_name</i></p>

<p style="margin-left:22%;">Specifies the name of the
ticket policy.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    view_policy &minus;r ATHENA.MIT.EDU tktpolicy
Password for &quot;cn=admin,o=org&quot;:
Ticket policy: tktpolicy
Maximum ticket life: 0 days 01:00:00
Maximum renewable life: 0 days 10:00:00
Ticket flags: DISALLOW_FORWARDABLE REQUIRES_PWCHANGE</pre>



<p style="margin-left:11%; margin-top: 1em"><b>destroy_policy</b></p>

<p style="margin-left:15%;"><b>destroy_policy</b>
[<b>&minus;r</b> <i>realm</i>] [<b>&minus;force</b>]
<i>policy_name</i></p>

<p style="margin-left:11%; margin-top: 1em">Destroys an
existing ticket policy. Options: <b><br>
&minus;r</b> <i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;force</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Forces the deletion of the policy object. If not
specified, the user will be prompted for confirmation before
deleting the policy.</p></td></tr>
</table>

<p style="margin-left:11%;"><i>policy_name</i></p>

<p style="margin-left:22%;">Specifies the name of the
ticket policy.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    destroy_policy &minus;r ATHENA.MIT.EDU tktpolicy
Password for &quot;cn=admin,o=org&quot;:
This will delete the policy object 'tktpolicy', are you sure?
(type 'yes' to confirm)? yes
** policy object 'tktpolicy' deleted.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>list_policy</b></p>

<p style="margin-left:15%;"><b>list_policy</b>
[<b>&minus;r</b> <i>realm</i>]</p>

<p style="margin-left:11%; margin-top: 1em">Lists the
ticket policies in realm if specified or in the default
realm. Options: <b><br>
&minus;r</b> <i>realm</i></p>

<p style="margin-left:22%;">Specifies the Kerberos realm of
the database.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<pre style="margin-left:15%; margin-top: 1em">kdb5_ldap_util &minus;D cn=admin,o=org &minus;H ldaps://ldap&minus;server1.mit.edu
    list_policy &minus;r ATHENA.MIT.EDU
Password for &quot;cn=admin,o=org&quot;:
tktpolicy
tmppolicy
userpolicy</pre>


<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>kadmin(1)</i></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">MIT</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1985-2016,
MIT</p>
<hr>
</body>
</html>
