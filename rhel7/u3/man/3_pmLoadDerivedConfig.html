<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:08:56 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMLOADDERIVEDCONFIG</title>

</head>
<body>

<h1 align="center">PMLOADDERIVEDCONFIG</h1>

<a href="#NAME">NAME</a><br>
<a href="#C SYNOPSIS">C SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmLoadDerivedConfig</b>
&minus; load derived metric definitions from files</p>

<h2>C SYNOPSIS
<a name="C SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;pcp/pmapi.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pmLoadDerivedConfig(char *</b><i>path</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>cc ...
&minus;lpcp</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Derived metrics
may be used to extend the available metrics with new
(derived) metrics using simple arithmetic expressions. The
definitions of these metrics can be persisted and loaded
programatically by monitor tools using
<b>pmLoadDerivedConfig</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The <i>path</i>
parameter defines a colon separated list of files and/or
directories (the syntax is the same as for the <b>$PATH</b>
variable for <b>sh</b>(1)), from which derived metric
specifications are to be sourced. The <i>path</i> components
are expanded into a list of files as follows: if a component
is a file, then that file is added to the list, else if a
component is a directory then recursive descent is used to
enumerate all files below that directory and these are added
to the list. Each file in the resulting list is parsed in
order, and according to the derived metrics syntax described
below.</p>

<p style="margin-left:11%; margin-top: 1em">Each line of
the file(s) identified by <i>path</i> is either a comment
line (with a &lsquo;&lsquo;#&rsquo;&rsquo; in the first
position of the line) or the declaration of a derived
performance metric, specified as:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="2%"></td>
<td width="86%">


<p>the name of the derived metric, using the same
&lsquo;&lsquo;dot notation&rsquo;&rsquo; syntax that is used
for PCP performance metrics, see <b>PCPIntro</b>(1) and
<b>pmns</b>(5).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="2%"></td>
<td width="86%">


<p>an equals sign (&lsquo;&lsquo;=&rsquo;&rsquo;)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="2%"></td>
<td width="86%">


<p>a valid expression for a derived metric, as described in
<b>pmRegisterDerived</b>(3).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">White space is
ignored in the lines.</p>

<p style="margin-left:11%; margin-top: 1em">For each line
containing a derived metric definition,
<b>pmRegisterDerived</b>(3) is called to register the new
derived metric.</p>

<p style="margin-left:11%; margin-top: 1em">Because
<b>pmLoadDerivedConfig</b> may process many files, each of
which may contain many derived metric specifications, it is
not possible to provide very specific error status on
return. Hence the result from <b>pmLoadDerivedConfig</b>
will be the number of derived metrics successfully loaded
from files on the given <i>path</i>. Catastrophic errors
such as not being able to open one of the files on the given
<i>path</i> will cause an immediate return with a negative
return value that can be passed to <b>pmErrStr</b>(3) to
obtain the associated error message.</p>

<p style="margin-left:11%; margin-top: 1em">When errors are
encountered in the derived metric specifications diagnostic
messages are generated by <b>pmRegisterDerived</b>(3) and
displayed via <b>pmprintf</b>(3).</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"># sample
derived metric definitions <br>
bad_in_pkts = network.interface.in.errors +
network.interface.in.drops <br>
# note the following would need to be on a single line ...
<br>
disk.dev.read_pct = 100 * delta(disk.dev.read) / <br>
(delta(disk.dev.read) + delta(disk.dev.write))</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>sh</b>(1),
<b>PCPIntro</b>(1), <b>PMAPI</b>(3),
<b>pmRegisterDerived</b>(3), <b>pmprintf</b>(3) and
<b>pmns</b>(5).</p>
<hr>
</body>
</html>
