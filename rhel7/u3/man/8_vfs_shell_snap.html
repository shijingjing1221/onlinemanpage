<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:50:32 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VFS_SHELL_SNAP</title>

</head>
<body>

<h1 align="center">VFS_SHELL_SNAP</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">vfs_shell_snap
&minus; Shell script callouts for snapshot creation and
deletion</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p style="margin-top: 1em">vfs objects = shell_snap</p></td>
<td width="52%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This VFS module
is part of the <b>samba</b>(8) suite.</p>

<p style="margin-left:11%; margin-top: 1em">The
vfs_shell_snap VFS provides shell&minus;script callouts for
snapshot creation and deletion operations issued by remote
clients using the File Server Remote VSS Protocol
(FSRVP).</p>

<p style="margin-left:11%; margin-top: 1em">The following
shell callouts may be configured in smb.conf:</p>


<p style="margin-left:11%; margin-top: 1em"><b><font color="#0000FF">shell_snap:check
path command</font></b></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Called when an FSRVP client wishes to check whether a given
share supports snapshot create/delete requests.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command is called with a single <i>share_path</i>
argument.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command must return 0 if <i>share_path</i> is capable of
being snapshotted.</font></p>


<p style="margin-left:11%; margin-top: 1em"><b><font color="#0000FF">shell_snap:create
command</font></b></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Called when an FSRVP client wishes to create a
snapshot.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command is called with a single <i>share_path</i>
argument.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command must return 0 status if the snapshot was
successfully taken.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command must output the path of the newly created
snapshot to stdout.</font></p>


<p style="margin-left:11%; margin-top: 1em"><b><font color="#0000FF">shell_snap:delete
command</font></b></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Called when an FSRVP client wishes to delete a
snapshot.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command is called with <i>base_share_path</i> and
<i>snapshot_share_path</i> arguments.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The command must return 0 status if the snapshot was
successfully removed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">All
commands are executed as the authenticated FSRVP client
user.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
module is stackable.</font></p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><font color="#000000"><i>[share]</i></font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">vfs objects =
shell_snap</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">shell_snap:check path command =
snap_check_path.sh</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">shell_snap:create command =
snap_create.sh</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">shell_snap:delete command =
snap_delete.sh</font></b></p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Samba's
FSRVP server must be configured in the [global]
section:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>[global]</i></font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">rpc_daemon:fssd =
fork</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">registry shares =
yes</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">


<p><b><font color="#0000FF">include =
registry</font></b></p> </td></tr>
</table>

<h2>VERSION
<a name="VERSION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
man page is correct for version 4.2.0 of the Samba
suite.</font></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba software and related utilities were created
by Andrew Tridgell. Samba is now developed by the Samba Team
as an Open Source project similar to the way the Linux
kernel is developed.</font></p>
<hr>
</body>
</html>
