<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:01:46 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opafabricinfo</title>

</head>
<body>

<h1 align="center">opafabricinfo</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#Environment Variables">Environment Variables</a><br>
<a href="#Example">Example</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opafabricinfo</p>

<p style="margin-left:11%; margin-top: 1em">Provides a
brief summary of the components in the fabric, using the
first active port on the given local host to perform its
analysis. opafabricinfo is supplied in both:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>Intel(R) Omni-Path Fabric Suite FastFabric Toolset In
this situation, the command can manage more than one fabric
(subnet).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>FastFabric Tools In this situation, the command performs
analysis against the first active port on the system only.
It takes no options and uses no environment variables.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">opafabricinfo
can be very useful as a quick assessment of the fabric
state. It can be run against a known good fabric to identify
its components and then later run to see if anything has
changed about the fabric configuration or state.</p>

<p style="margin-left:11%; margin-top: 1em">For more
extensive fabric analysis, use <i>opareport</i> and
<i>opareports Intel(R) Omni-Path Fabric Suite FastFabric
User Guide</i></p>

<h2>Syntax
<a name="Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opafabricinfo
[-t <i>portsfile</i>] [-p <i>ports</i>]</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">--help</p></td>
<td width="6%"></td>
<td width="37%">


<p style="margin-top: 1em">Produces full help text.</p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%;">-t <i>portsfile</i></p>

<p style="margin-left:26%;">File with list of local HFI
ports used to access fabric(s) for analysis. Default is
/etc/sysconfig/opa/ports file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-p <i>ports</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>List of local HFI ports used to access fabric(s) for
analysis. Default is first active port. The first HFI in the
system is 1. The first port on an HFI is 1.</p></td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">Uses the format
hfi:port, for example:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="5%">


<p style="margin-top: 1em">0:0</p></td>
<td width="11%"></td>
<td width="43%">


<p style="margin-top: 1em">First active port in system.</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="5%">


<p>0:y</p></td>
<td width="11%"></td>
<td width="43%">


<p>Port <i>y</i> within system.</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="5%">


<p>x:0</p></td>
<td width="11%"></td>
<td width="43%">


<p>First active port on HFI <i>x</i>.</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="5%">


<p>x:y</p></td>
<td width="11%"></td>
<td width="43%">


<p>HFI <i>x</i>, port <i>y</i>.</p></td>
<td width="15%">
</td></tr>
</table>

<h2>Environment Variables
<a name="Environment Variables"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables are also used by this command:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>PORTS</b></p></td>
<td width="8%"></td>
<td width="68%">


<p style="margin-top: 1em">List of ports, used in absence
of -t and -p.</p></td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>PORTS_FILE</b></p>

<p style="margin-left:26%;">File containing list of ports,
used in absence of -t and -p.</p>

<p style="margin-left:26%; margin-top: 1em">For simple
fabrics, the Intel(R) Omni-Path Fabric Suite FastFabric
Toolset host is connected to a single fabric. By default,
the first active port on the FastFabric Toolset host is used
to analyze the fabric. However, in more complex fabrics, the
FastFabric Toolset host may be connected to more than one
fabric or subnet. In this case, you can specify the ports or
HFIs to use with one of the following methods:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>On the command line using the -p option.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>In a file specified using the -t option.</p></td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>Through the environment variables <b>PORTS</b> or
<b>PORTS_FILE</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="26%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>Using the ports_file configuration option in
opafastfabric.conf.</p> </td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">If the
specified port does not exist or is empty, the first active
port on the local system is used. In more complex
configurations, you must specify the exact ports to use for
all fabrics to be analyzed.</p>

<h2>Example
<a name="Example"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opafabricinfo
<br>
opafabricinfo -p '1:1 1:2 2:1 2:2'</p>

<p style="margin-left:11%; margin-top: 1em"><b>Output
example</b></p>

<p style="margin-left:11%; margin-top: 1em"># opafabricinfo
<br>
Fabric 0:0 Information: <br>
SM: hds1fnb6241 hfi1_0 Guid: 0x0011750101575ffe State:
Master <br>
Number of HFIs: 8 <br>
Number of Switches: 1 <br>
Number of Links: 8 <br>
Number of HFI Links: 8 (Internal: 0 External: 8) <br>
Number of ISLs: 0 (Internal: 0 External: 0) <br>
Number of Degraded Links: 0 (HFI Links: 0 ISLs: 0) <br>
Number of Omitted Links: 0 (HFI Links: 0 ISLs: 0)</p>
<hr>
</body>
</html>
