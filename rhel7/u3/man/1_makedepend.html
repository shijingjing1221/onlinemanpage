<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:54:54 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MAKEDEPEND</title>

</head>
<body>

<h1 align="center">MAKEDEPEND</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ALGORITHM">ALGORITHM</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">makedepend
&minus; create dependencies in makefiles</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>makedepend</b>
[ <b>&minus;D</b><i>name</i><b>=</b><i>def</i> ] [
<b>&minus;D</b><i>name</i> ] [
<b>&minus;I</b><i>includedir</i> ] [
<b>&minus;Y</b><i>includedir</i> ] [ <b>&minus;a</b> ] [
<b>&minus;f</b><i>makefile</i> ] [
<b>&minus;include&nbsp;</b><i>file</i> ] [
<b>&minus;o</b><i>objsuffix</i> ] [
<b>&minus;p</b><i>objprefix</i> ] [
<b>&minus;s</b><i>string</i> ] [ <b>&minus;w</b><i>width</i>
] [ <b>&minus;v</b> ] [ <b>&minus;m</b> ] [ &minus;&minus;
<i>otheroptions</i> &minus;&minus; ] <i>sourcefile</i>
...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>makedepend</b> program reads each <i>sourcefile</i> in
sequence and parses it like a C-preprocessor, processing all
<i>#include, #define, #undef, #ifdef, #ifndef, #endif, #if,
#elif</i> and <i>#else</i> directives so that it can
correctly tell which <i>#include,</i> directives would be
used in a compilation. Any <i>#include,</i> directives can
reference files having other <i>#include</i> directives, and
parsing will occur in these files as well.</p>

<p style="margin-left:11%; margin-top: 1em">Every file that
a <i>sourcefile</i> includes, directly or indirectly, is
what <b>makedepend</b> calls a <i>dependency.</i> These
dependencies are then written to a <i>makefile</i> in such a
way that <b>make(1)</b> will know which object files must be
recompiled when a dependency has changed.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
<b>makedepend</b> places its output in the file named
<i>makefile</i> if it exists, otherwise <i>Makefile.</i> An
alternate makefile may be specified with the <b>&minus;f</b>
option. It first searches the makefile for the line</p>

<p style="margin-left:11%; margin-top: 1em"># DO NOT DELETE
THIS LINE &minus;&minus; make depend depends on it.</p>

<p style="margin-left:11%; margin-top: 1em">or one provided
with the <b>&minus;s</b> option, as a delimiter for the
dependency output. If it finds it, it will delete everything
following this to the end of the makefile and put the output
after this line. If it doesn&rsquo;t find it, the program
will append the string to the end of the makefile and place
the output following that. For each <i>sourcefile</i>
appearing on the command line, <b>makedepend</b> puts lines
in the makefile of the form</p>

<p style="margin-left:11%; margin-top: 1em">sourcefile.o:
dfile ...</p>

<p style="margin-left:11%; margin-top: 1em">Where
<i>sourcefile.o</i> is the name from the command line with
its suffix replaced with &lsquo;&lsquo;.o&rsquo;&rsquo;, and
<i>dfile</i> is a dependency discovered in a <i>#include</i>
directive while parsing <i>sourcefile</i> or one of the
files it included.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Normally,
<b>makedepend</b> will be used in a makefile target so that
typing &lsquo;&lsquo;make depend&rsquo;&rsquo; will bring
the dependencies up to date for the makefile. For example,
<br>
SRCS = file1.c file2.c ... <br>
CFLAGS = &minus;O &minus;DHACK &minus;I../foobar &minus;xyz
<br>
depend: <br>
makedepend &minus;&minus; $(CFLAGS) &minus;&minus;
$(SRCS)</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The program
will ignore any option that it does not understand so that
you may use the same arguments that you would for <b>cc(1).
<br>
&minus;D</b><i>name</i><b>=</b><i>def</i> or
<b>&minus;D</b><i>name</i></p>

<p style="margin-left:18%;">Define. This places a
definition for <i>name</i> in <b>makedepend&rsquo;s</b>
symbol table. Without <i>=def</i> the symbol becomes defined
as &lsquo;&lsquo;1&rsquo;&rsquo;.</p>


<p style="margin-left:11%;"><b>&minus;I</b><i>includedir</i></p>

<p style="margin-left:18%;">Include directory. This option
tells <b>makedepend</b> to prepend <i>includedir</i> to its
list of directories to search when it encounters a
<i>#include</i> directive. By default, <b>makedepend</b>
only searches the standard include directories (usually
/usr/include and possibly a compiler-dependent
directory).</p>


<p style="margin-left:11%;"><b>&minus;Y</b><i>includedir</i></p>

<p style="margin-left:18%;">Replace all of the standard
include directories with the single specified include
directory; you can omit the <i>includedir</i> to simply
prevent searching the standard include directories.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Append the dependencies to the end of the file instead
of replacing them.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;f</b><i>makefile</i></p>

<p style="margin-left:18%;">Filename. This allows you to
specify an alternate makefile in which <b>makedepend</b> can
place its output. Specifying
&lsquo;&lsquo;&minus;&rsquo;&rsquo; as the file name (i.e.,
<b>&minus;f&minus;</b>) sends the output to standard output
instead of modifying an existing file.</p>

<p style="margin-left:11%;"><b>&minus;include</b>
<i>file</i></p>

<p style="margin-left:18%;">Process file as input, and
include all the resulting output before processing the
regular input file. This has the same affect as if the
specified file is an include statement that appears before
the very first line of the regular input file.</p>


<p style="margin-left:11%;"><b>&minus;o</b><i>objsuffix</i></p>

<p style="margin-left:18%;">Object file suffix. Some
systems may have object files whose suffix is something
other than &lsquo;&lsquo;.o&rsquo;&rsquo;. This option
allows you to specify another suffix, such as
&lsquo;&lsquo;.b&rsquo;&rsquo; with <i>&minus;o.b</i> or
&lsquo;&lsquo;:obj&rsquo;&rsquo; with <i>&minus;o:obj</i>
and so forth.</p>


<p style="margin-left:11%;"><b>&minus;p</b><i>objprefix</i></p>

<p style="margin-left:18%;">Object file prefix. The prefix
is prepended to the name of the object file. This is usually
used to designate a different directory for the object file.
The default is the empty string.</p>


<p style="margin-left:11%;"><b>&minus;s</b><i>string</i></p>

<p style="margin-left:18%;">Starting string delimiter. This
option permits you to specify a different string for
<b>makedepend</b> to look for in the makefile.</p>


<p style="margin-left:11%;"><b>&minus;w</b><i>width</i></p>

<p style="margin-left:18%;">Line width. Normally,
<b>makedepend</b> will ensure that every output line that it
writes will be no wider than 78 characters for the sake of
readability. This option enables you to change this
width.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Verbose operation. This option causes <b>makedepend</b>
to emit the list of files included by each input file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Warn about multiple inclusion. This option causes
<b>makedepend</b> to produce a warning if any input file
includes another file more than once. In previous versions
of <b>makedepend</b> this was the default behavior; the
default has been changed to better match the behavior of the
C compiler, which does not consider multiple inclusion to be
an error. This option is provided for backward
compatibility, and to aid in debugging problems related to
multiple inclusion.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;&minus;</b>
<i>options</i> <b>&minus;&minus;</b></p>

<p style="margin-left:18%;">If <b>makedepend</b> encounters
a double hyphen (&minus;&minus;) in the argument list, then
any unrecognized argument following it will be silently
ignored; a second double hyphen terminates this special
treatment. In this way, <b>makedepend</b> can be made to
safely ignore esoteric compiler arguments that might
normally be found in a CFLAGS <b>make</b> macro (see the
<b>EXAMPLE</b> section above). All options that
<b>makedepend</b> recognizes and appear between the pair of
double hyphens are processed normally.</p>

<h2>ALGORITHM
<a name="ALGORITHM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The approach
used in this program enables it to run an order of magnitude
faster than any other &lsquo;&lsquo;dependency
generator&rsquo;&rsquo; I have ever seen. Central to this
performance are two assumptions: that all files compiled by
a single makefile will be compiled with roughly the same
<i>&minus;I</i> and <i>&minus;D</i> options; and that most
files in a single directory will include largely the same
files.</p>

<p style="margin-left:11%; margin-top: 1em">Given these
assumptions, <b>makedepend</b> expects to be called once for
each makefile, with all source files that are maintained by
the makefile appearing on the command line. It parses each
source and include file exactly once, maintaining an
internal symbol table for each. Thus, the first file on the
command line will take an amount of time proportional to the
amount of time that a normal C preprocessor takes. But on
subsequent files, if it encounters an include file that it
has already parsed, it does not parse it again.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
imagine you are compiling two files, <i>file1.c</i> and
<i>file2.c,</i> they each include the header file
<i>header.h,</i> and the file <i>header.h</i> in turn
includes the files <i>def1.h</i> and <i>def2.h.</i> When you
run the command</p>

<p style="margin-left:11%; margin-top: 1em">makedepend
file1.c file2.c</p>


<p style="margin-left:11%; margin-top: 1em"><b>makedepend</b>
will parse <i>file1.c</i> and consequently, <i>header.h</i>
and then <i>def1.h</i> and <i>def2.h.</i> It then decides
that the dependencies for this file are</p>

<p style="margin-left:11%; margin-top: 1em">file1.o:
header.h def1.h def2.h</p>

<p style="margin-left:11%; margin-top: 1em">But when the
program parses <i>file2.c</i> and discovers that it, too,
includes <i>header.h,</i> it does not parse the file, but
simply adds <i>header.h, def1.h</i> and <i>def2.h</i> to the
list of dependencies for <i>file2.o.</i></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">cc(1),
make(1)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>makedepend</b>
parses, but does not currently evaluate, the SVR4
#predicate(token-list) preprocessor expression; such
expressions are simply assumed to be true. This may cause
the wrong <i>#include</i> directives to be evaluated.</p>

<p style="margin-left:11%; margin-top: 1em">Imagine you are
parsing two files, say <i>file1.c</i> and <i>file2.c,</i>
each includes the file <i>def.h.</i> The list of files that
<i>def.h</i> includes might truly be different when
<i>def.h</i> is included by <i>file1.c</i> than when it is
included by <i>file2.c.</i> But once <b>makedepend</b>
arrives at a list of dependencies for a file, it is cast in
concrete.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Todd Brunhoff,
Tektronix, Inc. and MIT Project Athena</p>
<hr>
</body>
</html>
