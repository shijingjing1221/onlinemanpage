<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:09:17 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMDAATTRIBUTE</title>

</head>
<body>

<h1 align="center">PMDAATTRIBUTE</h1>

<a href="#NAME">NAME</a><br>
<a href="#C SYNOPSIS">C SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#CAVEAT">CAVEAT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmdaAttribute</b>
&minus; informs a PMDA about client connection
attributes</p>

<h2>C SYNOPSIS
<a name="C SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;pcp/pmapi.h&gt; <br>
#include &lt;pcp/impl.h&gt; <br>
#include &lt;pcp/pmda.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pmdaAttribute(int</b> <i>context</i><b>, int</b>
<i>key</i><b>, char *</b><i>value</i><b>, int</b>
<i>length</i><b>, pmdaExt *</b><i>pmda</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>cc ...
&minus;lpcp_pmda &minus;lpcp</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As part of the
Performance Metrics Domain Agent (PMDA) API (see
<b>PMDA</b>(3)), <b>pmdaAttribute</b> is the generic
callback for responding to client connection attributes.
These attributes include client credential information, such
as user ID and group ID.</p>

<p style="margin-left:11%; margin-top: 1em">A PMDA that
supports connection attributes will provide a private
<b>pmdaAttribute</b> callback by assignment to
<i>version.six.attribute</i> of the <i>pmdaInterface</i>
structure, and implement custom logic for any of the
attribute <i>key</i>&minus;<i>value</i> pairs of interest to
it.</p>

<p style="margin-left:11%; margin-top: 1em">All attributes
are associated with a specific client context, and these can
be uniquely identified using the <i>ctx</i> first argument.
The PMDA should track client connections, and disconnections
using the <b>pmdaSetEndContextCallBack</b>(3) interface, as
a result. The <b>pmdaGetContext</b>(3) interface may be
particularly helpful also.</p>

<p style="margin-left:11%; margin-top: 1em">All attributes
are passed as <i>key</i>&minus;<i>value</i> pairs and the
<i>value</i> is always passed as a null-terminated string of
given <i>length</i>. This includes numeric attributes like
the user ID.</p>

<p style="margin-left:11%; margin-top: 1em">The most
commonly used attributes would be PCP_ATTR_USERID and
PCP_ATTR_GROUPID but others may also be optionally passed
(such as PCP_ATTR_USERNAME) if they are available. Some
attributes will be consumed by <b>pmcd</b> and never through
passed to PMDAs, such as PCP_ATTR_PASSWORD. A complete list
of all possible attributes can be found in the headers
listed above, all are prefixed by PCP_ATTR.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmdaAttribute</b>
should return either zero on success, or a negative return
code to indicate an error in handling the attribute. This
return code cannot be used to indicate a client should be
disallowed access &minus; such functionality must be
performed by the agent in response to callbacks for the
client in question (using PM_ERR_PERMISSION for those
specific callbacks, for that specific client. In other
words, errors will be be passed to PMCD but there is no
guarantee made that the error will be return to the client
and result in termination of the client, for example.</p>

<h2>CAVEAT
<a name="CAVEAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The PMDA must
be using <b>PMDA_PROTOCOL_6</b> or later, as specified in
the call to <b>pmdaDSO</b>(3) or <b>pmdaDaemon</b>(3).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PMAPI</b>(3),
<b>PMDA</b>(3), <b>pmdaDaemon</b>(3), <b>pmdaDSO</b>(3),
<b>pmdaMain</b>(3) and <b>pmdaGetContext</b>(3).</p>
<hr>
</body>
</html>
