<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:01:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opapmaquery</title>

</head>
<body>

<h1 align="center">opapmaquery</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#Examples">Examples</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">opapmaquery</p>

<p style="margin-left:11%; margin-top: 1em"><b>(All)</b>
Performs individual PMA queries against a specific LID. It
is very useful in displaying port runtime information.</p>

<h2>Syntax
<a name="Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opapmaquery
[-v] [-s <i>sl</i>] [-l <i>lid</i>] [-h <i>hfi</i>] [-p
<i>port</i>] [-o <i>otype</i>] <br>
[-m <i>port</i>] [-n <i>mask</i>] [-e <i>mask</i>] [-w
<i>mask</i>]</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em">-v</p></td>
<td width="3%"></td>
<td width="74%">


<p style="margin-top: 1em">Verbose output. Can be specified
more than once for additional openib debugging and libibumad
debugging.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-s <i>sl</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Specifies different service level. Default is 0.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-l <i>lid</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Destination LID. Default is local port.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-h <i>hfi</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>HFI, numbered 1..n. Using 0 specifies that the -p
<i>port</i> port is a system-wide port number. Default is
0.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-p <i>port</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Port, numbered 1..n. If -h <i>hfi</i> is 0, then
<i>port</i> is a system-wide port number. Default is first
active port.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>-o <i>otype</i></p></td>
<td width="3%"></td>
<td width="74%">


<p>Output type. Default is getportstatus.</p></td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">Valid output
types are:</p>


<p style="margin-left:26%; margin-top: 1em">classportinfo</p>

<p style="margin-left:42%;">List of port info records.</p>


<p style="margin-left:26%; margin-top: 1em">getportstatus</p>

<p style="margin-left:42%;">List of port status
records.</p>

<p style="margin-left:42%; margin-top: 1em">[-m port] [-w
vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">clearportstatus</p>

<p style="margin-left:42%;">Clears the port status.</p>

<p style="margin-left:42%; margin-top: 1em">[-n port mask]
[-e counter mask] [-w vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">getdatacounters</p>

<p style="margin-left:42%;">List of data counters.</p>

<p style="margin-left:42%; margin-top: 1em">[-n port mask]
[-w vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">geterrorcounters</p>

<p style="margin-left:42%;">List of error counters.</p>

<p style="margin-left:42%; margin-top: 1em">[-n port mask]
[-w vl mask]</p>


<p style="margin-left:26%; margin-top: 1em">geterrorinfo</p>

<p style="margin-left:42%;">List of error info.</p>

<p style="margin-left:42%; margin-top: 1em">[-n port
mask]</p>


<p style="margin-left:26%; margin-top: 1em">clearerrorinfo</p>

<p style="margin-left:42%;">Clears the error info.</p>

<p style="margin-left:42%; margin-top: 1em">[-n port mask]
[-e counter mask]</p>

<p style="margin-left:11%;"><b>-h and -p options permit a
variety of selections:</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0</p></td>
<td width="1%"></td>
<td width="59%">


<p>First active port in system (default).</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p 0</p></td>
<td width="1%"></td>
<td width="59%">


<p>First active port in system.</p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>x</i></p></td>
<td width="1%"></td>
<td width="59%">


<p>First active port on HFI <i>x</i>.</p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:11%;">-h <i>x</i>#8217#160;-p 0</p>

<p style="margin-left:26%;">First active port on HFI
<i>x</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h 0 -p <i>y</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>Port <i>y</i>#8217#160;within system (no matter which
ports are active).</p></td></tr>
</table>

<p style="margin-left:11%;">-h <i>x</i>#8217#160;-p
<i>y</i></p>

<p style="margin-left:26%;">HFI <i>x</i>, port
<i>y</i>.</p>

<p style="margin-left:11%;"><b>otype options vary by
report</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-m <i>port</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Port in destination device to query/clear. Required when
using -l option for all but -o classportinfo.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-n <i>mask</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Port mask, in hexadecimal. Bits represent ports 63-0.
For example: 0x2 for port 1, 0x6 for ports 1, 2.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-e <i>mask</i></p></td>
<td width="4%"></td>
<td width="74%">


<p>Counter/error select mask, in hexadecimal. The following
lists &quot;Mask - Bit - Location for Counters&quot;. Where
applicable, location &quot;for Error Info&quot; is
presented. The default is all bits set (0xffffffe0).</p></td></tr>
</table>

<p style="margin-left:26%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%"></td>
<td width="9%"></td>
<td width="63%">


<p style="margin-top: 1em">0x80000000 - 31 - Transmit Data
For Error Info: Receive Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x40000000 - 30 - Receive Data For Error Info: Excessive
Buffer Overrun</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x20000000 - 29 - Transmit Packets For Error Info:
Transmit Const Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x10000000 - 28 - Receive Packets For Error Info:
Receive Const Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x08000000 - 27 - Multicast Transmit Packets For Error
Info: Receive Switch Relay Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x04000000 - 26 - Multicast Receive Packets For Error
Info: Uncorrectable Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x02000000 - 25 - Transmit Wait For Error Info: FM
Configuration Error Info</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x01000000 - 24 - Congestion Discards</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00800000 - 23 - Receive FECN</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00400000 - 22 - Receive BECN</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00200000 - 21 - Transmit Time Cong.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00100000 - 20 - Transmit Time Wasted BW</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00080000 - 19 - Transmit Time Wait Data</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00040000 - 18 - Receive Bubble</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00020000 - 17 - Mark FECN</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00010000 - 16 - Receive Constraint Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00008000 - 15 - Receive Switch Relay</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00004000 - 14 - Transmit Discards</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00002000 - 13 - Transmit Constraint Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00001000 - 12 - Receive Remote Physical Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000800 - 11 - Local Link Integrity</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000400 - 10 - Receive Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000200 - 9 - Exc. Buffer Overrun</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000100 - 8 - FM Configuration Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000080 - 7 - Link Error Recovery</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000040 - 6 - Link Error Downed</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>&bull;</p></td>
<td width="9%"></td>
<td width="63%">


<p>0x00000020 - 5 - Uncorrectable Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">


<p>-w <i>mask</i></p></td>
<td width="9%"></td>
<td width="63%">
</td></tr>
</table>

<p style="margin-left:26%; margin-top: 1em">Virtual Lane
Select Mask, in hexadecimal. Bits represent VL number 31-0.
For example, 0x1 for VL 0, 0x3 for VL 0,1. Default is
none.</p>

<h2>Examples
<a name="Examples"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
classportinfo</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
getportstatus <br>
# get data and error counts, local port</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
getdatacounters -n 0x2 <br>
# get data counts, local port 1</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
geterrorcounters -n 0x2 <br>
# get error counts, local port 1</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
clearportstatus -n 0x2 <br>
# clear all counters local port 1</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
geterrorinfo -n 0x2 <br>
# get error info for local port 1</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
clearerrorinfo -n 0x2 <br>
# clear all error info, local port 1</p>

<p style="margin-left:11%; margin-top: 1em"><b>Additional
Examples</b></p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
getdatacounters -l 6 -n 0x7e -w 0x1 <br>
# for device at LID 6, get data counters on ports 1-6,
inclusive of VL 0 data</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
clearportstatus -l 6 -n 0x2 -e 0x1ffff <br>
# for device at LID 6, on port 1, clear only error
counters</p>

<p style="margin-left:11%; margin-top: 1em">opapmaquery -o
clearerrorinfo -l 6 -n 0x2 -e 0x04000000 <br>
# for device at LID 6, on ports 1, clear uncorrectable error
info</p>
<hr>
</body>
</html>
