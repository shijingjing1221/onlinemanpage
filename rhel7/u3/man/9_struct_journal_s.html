<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:38:20 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>STRUCT JOURNAL_S</title>

</head>
<body>

<h1 align="center">STRUCT JOURNAL_S</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#MEMBERS">MEMBERS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">struct_journal_s
&minus; this is the concrete type associated with
journal_t.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">struct
journal_s { <br>
unsigned long j_flags; <br>
int j_errno; <br>
struct buffer_head * j_sb_buffer; <br>
journal_superblock_t * j_superblock; <br>
int j_format_version; <br>
spinlock_t j_state_lock; <br>
int j_barrier_count; <br>
transaction_t * j_running_transaction; <br>
transaction_t * j_committing_transaction; <br>
transaction_t * j_checkpoint_transactions; <br>
wait_queue_head_t j_wait_transaction_locked; <br>
wait_queue_head_t j_wait_logspace; <br>
wait_queue_head_t j_wait_done_commit; <br>
wait_queue_head_t j_wait_checkpoint; <br>
wait_queue_head_t j_wait_commit; <br>
wait_queue_head_t j_wait_updates; <br>
struct mutex j_checkpoint_mutex; <br>
unsigned int j_head; <br>
unsigned int j_tail; <br>
unsigned int j_free; <br>
unsigned int j_first; <br>
unsigned int j_last; <br>
struct block_device * j_dev; <br>
int j_blocksize; <br>
unsigned int j_blk_offset; <br>
struct block_device * j_fs_dev; <br>
unsigned int j_maxlen; <br>
spinlock_t j_list_lock; <br>
struct inode * j_inode; <br>
tid_t j_tail_sequence; <br>
tid_t j_transaction_sequence; <br>
tid_t j_commit_sequence; <br>
tid_t j_commit_request; <br>
tid_t j_commit_waited; <br>
__u8 j_uuid[16]; <br>
struct task_struct * j_task; <br>
int j_max_transaction_buffers; <br>
unsigned long j_commit_interval; <br>
struct timer_list j_commit_timer; <br>
spinlock_t j_revoke_lock; <br>
struct jbd_revoke_table_s * j_revoke; <br>
struct jbd_revoke_table_s * j_revoke_table[2]; <br>
struct buffer_head ** j_wbuf; <br>
int j_wbufsize; <br>
pid_t j_last_sync_writer; <br>
u64 j_average_commit_time; <br>
void * j_private; <br>
};</p>

<h2>MEMBERS
<a name="MEMBERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">j_flags</p>

<p style="margin-left:17%;">General journaling state
flags</p>

<p style="margin-left:11%; margin-top: 1em">j_errno</p>

<p style="margin-left:17%;">Is there an outstanding
uncleared error on the journal (from a prior abort)?</p>


<p style="margin-left:11%; margin-top: 1em">j_sb_buffer</p>

<p style="margin-left:17%;">First part of superblock
buffer</p>


<p style="margin-left:11%; margin-top: 1em">j_superblock</p>

<p style="margin-left:17%;">Second part of superblock
buffer</p>


<p style="margin-left:11%; margin-top: 1em">j_format_version</p>

<p style="margin-left:17%;">Version of the superblock
format</p>


<p style="margin-left:11%; margin-top: 1em">j_state_lock</p>

<p style="margin-left:17%;">Protect the various scalars in
the journal</p>


<p style="margin-left:11%; margin-top: 1em">j_barrier_count</p>

<p style="margin-left:17%;">Number of processes waiting to
create a barrier lock</p>


<p style="margin-left:11%; margin-top: 1em">j_running_transaction</p>

<p style="margin-left:17%;">The current running
transaction..</p>


<p style="margin-left:11%; margin-top: 1em">j_committing_transaction</p>

<p style="margin-left:17%;">the transaction we are pushing
to disk</p>


<p style="margin-left:11%; margin-top: 1em">j_checkpoint_transactions</p>

<p style="margin-left:17%;">a linked circular list of all
transactions waiting for checkpointing</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_transaction_locked</p>

<p style="margin-left:17%;">Wait queue for waiting for a
locked transaction to start committing, or for a barrier
lock to be released</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_logspace</p>

<p style="margin-left:17%;">Wait queue for waiting for
checkpointing to complete</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_done_commit</p>

<p style="margin-left:17%;">Wait queue for waiting for
commit to complete</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_checkpoint</p>

<p style="margin-left:17%;">Wait queue to trigger
checkpointing</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_commit</p>

<p style="margin-left:17%;">Wait queue to trigger
commit</p>


<p style="margin-left:11%; margin-top: 1em">j_wait_updates</p>

<p style="margin-left:17%;">Wait queue to wait for updates
to complete</p>


<p style="margin-left:11%; margin-top: 1em">j_checkpoint_mutex</p>

<p style="margin-left:17%;">Mutex for locking against
concurrent checkpoints</p>

<p style="margin-left:11%; margin-top: 1em">j_head</p>

<p style="margin-left:17%;">Journal head &minus; identifies
the first unused block in the journal</p>

<p style="margin-left:11%; margin-top: 1em">j_tail</p>

<p style="margin-left:17%;">Journal tail &minus; identifies
the oldest still&minus;used block in the journal.</p>

<p style="margin-left:11%; margin-top: 1em">j_free</p>

<p style="margin-left:17%;">Journal free &minus; how many
free blocks are there in the journal?</p>

<p style="margin-left:11%; margin-top: 1em">j_first</p>

<p style="margin-left:17%;">The block number of the first
usable block</p>

<p style="margin-left:11%; margin-top: 1em">j_last</p>

<p style="margin-left:17%;">The block number one beyond the
last usable block</p>

<p style="margin-left:11%; margin-top: 1em">j_dev</p>

<p style="margin-left:17%;">Device where we store the
journal</p>


<p style="margin-left:11%; margin-top: 1em">j_blocksize</p>

<p style="margin-left:17%;">blocksize for the location
where we store the journal.</p>


<p style="margin-left:11%; margin-top: 1em">j_blk_offset</p>

<p style="margin-left:17%;">starting block offset for into
the device where we store the journal</p>

<p style="margin-left:11%; margin-top: 1em">j_fs_dev</p>

<p style="margin-left:17%;">Device which holds the client
fs. For internal journal this will be equal to j_dev</p>

<p style="margin-left:11%; margin-top: 1em">j_maxlen</p>

<p style="margin-left:17%;">Total maximum capacity of the
journal region on disk.</p>


<p style="margin-left:11%; margin-top: 1em">j_list_lock</p>

<p style="margin-left:17%;">Protects the buffer lists and
internal buffer state.</p>

<p style="margin-left:11%; margin-top: 1em">j_inode</p>

<p style="margin-left:17%;">Optional inode where we store
the journal. If present, all journal block numbers are
mapped into this inode via <b>bmap</b>.</p>


<p style="margin-left:11%; margin-top: 1em">j_tail_sequence</p>

<p style="margin-left:17%;">Sequence number of the oldest
transaction in the log</p>


<p style="margin-left:11%; margin-top: 1em">j_transaction_sequence</p>

<p style="margin-left:17%;">Sequence number of the next
transaction to grant</p>


<p style="margin-left:11%; margin-top: 1em">j_commit_sequence</p>

<p style="margin-left:17%;">Sequence number of the most
recently committed transaction</p>


<p style="margin-left:11%; margin-top: 1em">j_commit_request</p>

<p style="margin-left:17%;">Sequence number of the most
recent transaction wanting commit</p>


<p style="margin-left:11%; margin-top: 1em">j_commit_waited</p>

<p style="margin-left:17%;">Sequence number of the most
recent transaction someone is waiting for to commit.</p>

<p style="margin-left:11%; margin-top: 1em">j_uuid[16]</p>

<p style="margin-left:17%;">Uuid of client object.</p>

<p style="margin-left:11%; margin-top: 1em">j_task</p>

<p style="margin-left:17%;">Pointer to the current commit
thread for this journal</p>


<p style="margin-left:11%; margin-top: 1em">j_max_transaction_buffers</p>

<p style="margin-left:17%;">Maximum number of metadata
buffers to allow in a single compound commit transaction</p>


<p style="margin-left:11%; margin-top: 1em">j_commit_interval</p>

<p style="margin-left:17%;">What is the maximum transaction
lifetime before we begin a commit?</p>


<p style="margin-left:11%; margin-top: 1em">j_commit_timer</p>

<p style="margin-left:17%;">The timer used to wakeup the
commit thread</p>


<p style="margin-left:11%; margin-top: 1em">j_revoke_lock</p>

<p style="margin-left:17%;">Protect the revoke table</p>

<p style="margin-left:11%; margin-top: 1em">j_revoke</p>

<p style="margin-left:17%;">The revoke table &minus;
maintains the list of revoked blocks in the current
transaction.</p>


<p style="margin-left:11%; margin-top: 1em">j_revoke_table[2]</p>

<p style="margin-left:17%;">alternate revoke tables for
j_revoke</p>

<p style="margin-left:11%; margin-top: 1em">j_wbuf</p>

<p style="margin-left:17%;">array of buffer_heads for
journal_commit_transaction</p>

<p style="margin-left:11%; margin-top: 1em">j_wbufsize</p>

<p style="margin-left:17%;">maximum number of buffer_heads
allowed in j_wbuf, the number that will fit in
j_blocksize</p>


<p style="margin-left:11%; margin-top: 1em">j_last_sync_writer</p>

<p style="margin-left:17%;">most recent pid which did a
synchronous write</p>


<p style="margin-left:11%; margin-top: 1em">j_average_commit_time</p>

<p style="margin-left:17%;">the average amount of time in
nanoseconds it takes to commit a transaction to the
disk.</p>

<p style="margin-left:11%; margin-top: 1em">j_private</p>

<p style="margin-left:17%;">An opaque pointer to
fs&minus;private information.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Roger
Gammans</b> &lt;rgammans@computer-surgery.co.uk&gt;</p>

<p style="margin-left:17%;">Author.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Stephen
Tweedie</b> &lt;sct@redhat.com&gt;</p>

<p style="margin-left:17%;">Author.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<hr>
</body>
</html>
