<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:29:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMRSH</title>

</head>
<body>

<h1 align="center">SMRSH</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">smrsh &minus;
restricted shell for sendmail</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>smrsh
&minus;c</b> command</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>smrsh</i> program is intended as a replacement for
<i>sh</i> for use in the &lsquo;&lsquo;prog&rsquo;&rsquo;
mailer in <i>sendmail</i>(8) configuration files. It sharply
limits the commands that can be run using the
&lsquo;&lsquo;|program&rsquo;&rsquo; syntax of
<i>sendmail</i> in order to improve the over all security of
your system. Briefly, even if a &lsquo;&lsquo;bad
guy&rsquo;&rsquo; can get sendmail to run a program without
going through an alias or forward file, <i>smrsh</i> limits
the set of programs that he or she can execute.</p>

<p style="margin-left:11%; margin-top: 1em">Briefly,
<i>smrsh</i> limits programs to be in a single directory, by
default /etc/smrsh, allowing the system administrator to
choose the set of acceptable commands, and to the shell
builtin commands &lsquo;&lsquo;exec&rsquo;&rsquo;,
&lsquo;&lsquo;exit&rsquo;&rsquo;, and
&lsquo;&lsquo;echo&rsquo;&rsquo;. It also rejects any
commands with the characters &lsquo;`&rsquo;,
&lsquo;&lt;&rsquo;, &lsquo;&gt;&rsquo;, &lsquo;;&rsquo;,
&lsquo;$&rsquo;, &lsquo;(&rsquo;, &lsquo;)&rsquo;,
&lsquo;\r&rsquo; (carriage return), or &lsquo;\n&rsquo;
(newline) on the command line to prevent &lsquo;&lsquo;end
run&rsquo;&rsquo; attacks. It allows
&lsquo;&lsquo;||&rsquo;&rsquo; and
&lsquo;&lsquo;&amp;&amp;&rsquo;&rsquo; to enable commands
like: &lsquo;&lsquo;&quot;|exec /usr/local/bin/filter ||
exit 75&quot;&rsquo;&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">Initial
pathnames on programs are stripped, so forwarding to
&lsquo;&lsquo;/usr/ucb/vacation&rsquo;&rsquo;,
&lsquo;&lsquo;/usr/bin/vacation&rsquo;&rsquo;,
&lsquo;&lsquo;/home/server/mydir/bin/vacation&rsquo;&rsquo;,
and &lsquo;&lsquo;vacation&rsquo;&rsquo; all actually
forward to
&lsquo;&lsquo;/etc/smrsh/vacation&rsquo;&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">System
administrators should be conservative about populating the
/etc/smrsh directory. For example, a reasonable additions is
<i>vacation</i>(1), and the like. No matter how brow-beaten
you may be, never include any shell or shell-like program
(such as <i>perl</i>(1)) in the /etc/smrsh directory. Note
that this does not restrict the use of shell or perl scripts
in the sm.bin directory (using the
&lsquo;&lsquo;#!&rsquo;&rsquo; syntax); it simply disallows
execution of arbitrary programs. Also, including mail
filtering programs such as <i>procmail</i>(1) is a very bad
idea. <i>procmail</i>(1) allows users to run arbitrary
programs in their <i>procmailrc</i>(5).</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">/etc/smrsh
&minus; directory for restricted programs</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">sendmail(8)</p>
<hr>
</body>
</html>
