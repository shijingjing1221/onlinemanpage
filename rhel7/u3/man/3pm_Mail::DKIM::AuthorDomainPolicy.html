<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:54:21 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Mail::DKIM::AuthorDomainPolicy</title>

</head>
<body>

<h1 align="center">Mail::DKIM::AuthorDomainPolicy</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONSTRUCTORS">CONSTRUCTORS</a><br>
<a href="#METHODS">METHODS</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT AND LICENSE">COPYRIGHT AND LICENSE</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Mail::DKIM::AuthorDomainPolicy
&minus; represents an Author Domain Signing Practices (ADSP)
record</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Author
Domain Signing Policies ( <small>ADSP</small> ) record can
be published by any domain to help a receiver know what to
do when it encounters an unsigned message claiming to
originate from that domain.</p>

<p style="margin-left:11%; margin-top: 1em">The record is
published as a <small>DNS TXT</small> record at
_adsp._domainkey.DOMAIN where <small>DOMAIN</small> is the
domain of the message&rsquo;s &quot;From&quot; address.</p>

<p style="margin-left:11%; margin-top: 1em">More details
about this record can be found by reading the specification
itself at &lt;http://tools.ietf.org/html/rfc5617&gt;.</p>

<h2>CONSTRUCTORS
<a name="CONSTRUCTORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>fetch()</i>
<br>
Lookup an <small>ADSP</small> record in
<small>DNS.</small></p>

<pre style="margin-left:11%; margin-top: 1em">  my $policy = Mail::DKIM::AuthorDomainPolicy&minus;&gt;fetch(
            Protocol =&gt; &quot;dns&quot;,
            Author =&gt; 'jsmith@example.org',
          );</pre>


<p style="margin-left:11%; margin-top: 1em">If the
<small>ADSP</small> record is found and appears to be valid,
an object containing that record&rsquo;s information will be
constructed and returned. If the <small>ADSP</small> record
is blank or simply does not exist, an object representing
the default policy will be returned instead. (See also
&quot;<i>is_implied_default_policy()</i>&quot;.) If a
<small>DNS</small> error occurs (e.g.
<small>SERVFAIL</small> or time-out), this method will
&quot;die&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>new()</i>
<br>
Construct a default policy object.</p>

<pre style="margin-left:11%; margin-top: 1em">  my $policy = Mail::DKIM::AuthorDomainPolicy&minus;&gt;new;</pre>


<p style="margin-left:11%; margin-top: 1em"><i>parse()</i>
<br>
Construct an <small>ADSP</small> record from a string.</p>

<pre style="margin-left:11%; margin-top: 1em">  my $policy = Mail::DKIM::AuthorDomainPolicy&minus;&gt;parse(
          String =&gt; &quot;dkim=all&quot;,
          Domain =&gt; &quot;aaa.example&quot;,
      );</pre>


<h2>METHODS
<a name="METHODS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>apply()</i>
<br>
Apply the policy to the results of a <small>DKIM</small>
verifier.</p>

<pre style="margin-left:11%; margin-top: 1em">  my $result = $policy&minus;&gt;apply($dkim_verifier);</pre>


<p style="margin-left:11%; margin-top: 1em">The caller must
provide an instance of Mail::DKIM::Verifier, one which has
already been fed the message being verified.</p>

<p style="margin-left:11%; margin-top: 1em">Possible
results are: <br>
accept</p>

<p style="margin-left:17%;">The message is approved by the
sender signing policy.</p>

<p style="margin-left:11%;">reject</p>

<p style="margin-left:17%;">The message is rejected by the
sender signing policy. It can be considered very
suspicious.</p>

<p style="margin-left:11%;">neutral</p>

<p style="margin-left:17%;">The message is neither approved
nor rejected by the sender signing policy. It can be
considered somewhat suspicious.</p>

<p style="margin-left:11%; margin-top: 1em">Note: in the
future, these values may become: <br>
none &minus; no <small>ADSP</small> record is published <br>
pass &minus; a passing signature is present <br>
fail &minus; <small>ADSP</small> record is &quot;all&quot;
and no passing signature is found <br>
discard &minus; <small>ADSP</small> record is
&quot;discardable&quot; and no passing signature is found
<br>
nxdomain &minus; the <small>DNS</small> domain does not
exist <br>
temperror &minus; transient error occurred <br>
permerror &minus; non-transient error occurred</p>


<p style="margin-left:11%; margin-top: 1em"><i>is_implied_default_policy()</i>
<br>
Tells whether this policy implied.</p>

<pre style="margin-left:11%; margin-top: 1em">  my $is_implied = $policy&minus;&gt;is_implied_default_policy;</pre>


<p style="margin-left:11%; margin-top: 1em">If you fetch
the policy for a particular domain, but that domain does not
have a policy published, then the &quot;default policy&quot;
is in effect. Use this method to detect when that
happens.</p>


<p style="margin-left:11%; margin-top: 1em"><i>location()</i>
<br>
Tells where the policy was fetched from.</p>

<p style="margin-left:11%; margin-top: 1em">If the policy
is domain-wide, this will be domain where the policy was
published.</p>

<p style="margin-left:11%; margin-top: 1em">If the policy
is user-specific, <small>TBD.</small></p>

<p style="margin-left:11%; margin-top: 1em">If nothing is
published for the domain, and the default policy was
returned instead, the location will be
<tt>&quot;undef&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><i>policy()</i>
<br>
Get or set the outbound signing policy (dkim=) tag.</p>

<pre style="margin-left:11%; margin-top: 1em">  my $sp = $policy&minus;&gt;policy;</pre>


<p style="margin-left:11%; margin-top: 1em">Outbound
signing policy for the entity. Possible values are: <br>
&quot;unknown&quot;</p>

<p style="margin-left:17%;">The default. The entity may
sign some or all email.</p>

<p style="margin-left:11%;">&quot;all&quot;</p>

<p style="margin-left:17%;">All mail from the domain is
expected to be signed, using a valid Author signature, but
the author does not suggest discarding mail without a valid
signature.</p>

<p style="margin-left:11%;">&quot;discardable&quot;</p>

<p style="margin-left:17%;">All mail from the domain is
expected to be signed, using a valid Author signature, and
the author is so confident that non-signed mail claiming to
be from this domain can be automatically discarded by the
recipient&rsquo;s mail server.</p>

<p style="margin-left:11%;">&quot;NXDOMAIN&quot;</p>

<p style="margin-left:17%;">The domain is out of scope,
i.e., the domain does not exist in the
<small>DNS.</small></p>


<p style="margin-left:11%; margin-top: 1em"><i>signall()</i>
<br>
True if policy is &quot;all&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><i>signall_discardable()</i>
<br>
True if policy is &quot;strict&quot;.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Section 4.3 of the specification
says to perform a query on the domain itself just to see if
it exists. This class is not currently doing that, i.e. it
might report <small>NXDOMAIN</small> because
_adsp._domainkey.example.org is nonexistent, but it should
not be treated the same as example.org being
nonexistent.</p> </td></tr>
</table>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jason Long,
&lt;jlong@messiah.edu&gt;</p>

<h2>COPYRIGHT AND LICENSE
<a name="COPYRIGHT AND LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2006&minus;2009 by Messiah College</p>

<p style="margin-left:11%; margin-top: 1em">This library is
free software; you can redistribute it and/or modify it
under the same terms as Perl itself, either Perl version
5.8.6 or, at your option, any later version of Perl 5 you
may have available.</p>
<hr>
</body>
</html>
