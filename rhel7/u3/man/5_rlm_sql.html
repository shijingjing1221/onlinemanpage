<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:18:08 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>rlm_sql</title>

</head>
<body>

<h1 align="center">rlm_sql</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#SECTIONS">SECTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rlm_sql &minus;
FreeRADIUS Module</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>rlm_sql</i> module provides an SQL interface to retrieve
authorization information and store accounting information.
It can be used in conjunction with, or in lieu of the files
and detail modules. The SQL module has drivers to support
the following SQL databases:</p>

<p style="margin-left:11%; margin-top: 1em">db2 <br>
iodbc <br>
mysql <br>
oracle <br>
postgresql <br>
sybase <br>
unixodbc</p>

<p style="margin-left:11%; margin-top: 1em">Due to the size
of the configuration variables, the sql module is usually
configured in a separate file, which is included in the main
radiusd.conf via an include directive.</p>

<p style="margin-left:11%; margin-top: 1em">The main
configuration items to be aware of are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>driver</p></td>
<td width="2%"></td>
<td width="73%">


<p>This variable specifies the driver to be loaded.</p></td>
<td width="5%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>server</p></td>
<td width="2%"></td>
<td width="73%">
</td>
<td width="5%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>login</p></td>
<td width="2%"></td>
<td width="73%"></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%;">password</p>

<p style="margin-left:22%;">These specify the servername,
username, and password the module will use to connect to the
database.</p>

<p style="margin-left:11%;">radius_db</p>

<p style="margin-left:22%;">The name of the database where
the radius tables are stored.</p>

<p style="margin-left:11%;">acct_table1 <br>
acct_table2</p>

<p style="margin-left:22%;">These specify the tables names
for accounting records. acct_table1 specifies the table
where Start records are stored. acct_table2 specifies the
table where Stop records are stored. In most cases, this
should be the same table.</p>

<p style="margin-left:11%;">postauth_table</p>

<p style="margin-left:22%;">The name of the table to store
post-authentication data.</p>

<p style="margin-left:11%;">authcheck_table <br>
authreply_table</p>

<p style="margin-left:22%;">The tables where individual
Check-Items and Reply-Items are stored.</p>

<p style="margin-left:11%;">groupcheck_table <br>
groupreply_table</p>

<p style="margin-left:22%;">The tables where group
Check-Items and Reply-Items are stored.</p>

<p style="margin-left:11%;">usergroup_table</p>

<p style="margin-left:22%;">The table where username to
group relationships are stored.</p>

<p style="margin-left:11%;">deletestatlesessions</p>

<p style="margin-left:22%;">This option is set to
&rsquo;yes&rsquo; or &rsquo;no&rsquo;. If you are doing
Simultaneous-Use checking, and this is set to yes, stale
sessions ( defined as sessions for which a Stop record was
not received ) will be cleared.</p>

<p style="margin-left:11%;">logfile</p>

<p style="margin-left:22%;">This option is useful for
debugging sql problems. If logfile is set then all sql
queries for the containing section are written to the file
specified. This is useful for debugging and bulk
inserts.</p>

<p style="margin-left:11%;">num_sql_socks</p>

<p style="margin-left:22%;">The number of sql connections
to make to the database.</p>


<p style="margin-left:11%;">connect_failure_retry_delay</p>

<p style="margin-left:22%;">The number of seconds to wait
before attempting to reconnect to a failed database
connection.</p>

<p style="margin-left:11%;">sql_user_name</p>

<p style="margin-left:22%;">This is the definition of the
SQL-User-Name attribute. This is set once, so that you can
use %{SQL-User-Name} in the SQL queries, rather than the
nested username substitution. This ensures that Username is
parsed consistently for all SQL queries executed.</p>

<p style="margin-left:11%;">default_user_profile</p>

<p style="margin-left:22%;">This is the default profile
name that will be applied to all users if set. This is not
set by default.</p>

<p style="margin-left:11%;">query_on_not_found</p>

<p style="margin-left:22%;">This option is set to
&rsquo;yes&rsquo; or &rsquo;no&rsquo;. If set to yes, then
the default user profile is returned if no specific match
was found for the user.</p>

<p style="margin-left:11%;">authorize_check_query <br>
authorize_reply_query</p>

<p style="margin-left:22%;">These queries are run during
the authorization stage to extract the user authorization
information from the ${authcheck_table} and
${authreply_table}.</p>

<p style="margin-left:11%;">authorize_group_check_query
<br>
authorize_group_reply_query</p>

<p style="margin-left:22%;">These queries are run during
the authorization stage to extract the group authorization
information from the ${groupcheck_table} and
${groupreply_table}.</p>

<p style="margin-left:11%;">accounting_onoff_query</p>

<p style="margin-left:22%;">The query to be run when
receiving an Accounting On or Accounting Off packet.</p>

<p style="margin-left:11%;">accounting_update_query <br>
accounting_update_query_alt</p>

<p style="margin-left:22%;">The query to be run when
receiving an Accounting Update packet. If the primary query
fails, the alt query is run.</p>

<p style="margin-left:11%;">accounting_start_query <br>
accounting_start_query_alt</p>

<p style="margin-left:22%;">The query to be run when
receiving an Accounting Start packet. If the primary query
fails, the alt query is run.</p>

<p style="margin-left:11%;">accounting_stop_query <br>
accounting_stop_query_alt</p>

<p style="margin-left:22%;">The query to be run when
receiving an Accounting Stop packet. If the primary query
fails, the alt query is run.</p>

<p style="margin-left:11%;">simul_count_query</p>

<p style="margin-left:22%;">The query to be run to return
the number simultaneous sessions for the purposes of
limiting Simultaneous Use.</p>

<p style="margin-left:11%;">simul_verify_query</p>

<p style="margin-left:22%;">The query to return the detail
information needed to confirm that all suspected connected
sessions are valid, and are not stale sessions.</p>

<p style="margin-left:11%;">group_membership_query</p>

<p style="margin-left:22%;">The query to run to check user
group membership.</p>

<p style="margin-left:11%;">postauth_query</p>

<p style="margin-left:22%;">The query to run during the
post-authentication stage.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Due to the size
of the configuration for this module, it is not included in
this manual page. Please review the supplied configuration
files for example queries and configuration details.</p>

<h2>SECTIONS
<a name="SECTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>authorization,
accounting, checksimul, post-authentication</b></p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>/etc/raddb/radiusd.conf,
/etc/raddb/sql.conf, /etc/raddb/sql/&lt;DB&gt;/dialup.conf,
/etc/raddb/sql/&lt;DB&gt;/schema.sql,</i></b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>radiusd</i></b>(8),
<b>radiusd.conf</b>(5),</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Chris Parker,
cparker@segv.org</p>
<hr>
</body>
</html>
