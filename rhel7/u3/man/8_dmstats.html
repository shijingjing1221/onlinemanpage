<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:16:31 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DMSTATS</title>

</head>
<body>

<h1 align="center">DMSTATS</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#REGIONS, AREAS, AND GROUPS">REGIONS, AREAS, AND GROUPS</a><br>
<a href="#REPORT FIELDS">REPORT FIELDS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">dmstats &mdash;
device-mapper statistics management</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>dmsetup
stats</b> <i>command</i> [<b>options</b>]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em"><b>dmstats</b></p></td>
<td width="78%">


<p style="margin-top: 1em"><i>command</i>
[<i>device_name</i> |<b>&minus;&minus;uuid</b>
<i>uuid</i>|<b>&minus;&minus;major</b> <i>major</i>
<b>&minus;&minus;minor</b> <i>minor</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>clear</b> <i>device_name</i>
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>create</b> [<b>device_name...</b>
|<b>file_path...</b>] [<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;areas</b>
<i>nr_areas</i>|<b>&minus;&minus;areasize</b>
<i>area_size</i>] [<b>&minus;&minus;bounds</b>
<i>histogram_boundaries</i>] [<b>&minus;&minus;filemap</b>]
[<b>&minus;&minus;nogroup</b>]
[<b>&minus;&minus;precise</b>] [<b>&minus;&minus;start</b>
<i>start_sector</i> <b>&minus;&minus;length</b>
<i>length</i>|<b>&minus;&minus;segments</b>]
[<b>&minus;&minus;userdata</b> <i>user_data</i>]
[<b>&minus;&minus;programid</b> <i>id</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>delete</b> [<i>device_name</i>]
[<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>group</b> [<i>device_name</i>]
[<b>&minus;&minus;alias</b> <i>name</i>]
[<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;regions</b> <i>regions</i>]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>help</b>
[<b>&minus;c</b>|<b>&minus;C</b>|<b>&minus;&minus;columns</b>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>list</b> [<i>device_name</i>]
[<b>&minus;&minus;histogram</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>] [<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;area</b>] [<b>&minus;&minus;region</b>]
[<b>&minus;&minus;group</b>] [<b>&minus;&minus;nosuffix</b>]
[<b>&minus;&minus;notimesuffix</b>]
[<b>&minus;v</b>|<b>&minus;&minus;verbose</b>[<b>&minus;v</b>|<b>&minus;&minus;verbose</b>]]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>print</b> [<i>device_name</i>]
[<b>&minus;&minus;clear</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>report</b> [<i>device_name</i>]
[<b>&minus;&minus;interval</b> <i>seconds</i>]
[<b>&minus;&minus;count</b> <i>count</i>]
[<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;histogram</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>] [<b>&minus;&minus;area</b>]
[<b>&minus;&minus;region</b>] [<b>&minus;&minus;group</b>]
[<b>&minus;O</b>|<b>&minus;&minus;sort</b>
<i>sort_fields</i>]
[<b>&minus;S</b>|<b>&minus;&minus;select</b>
<i>selection</i>] [<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;nosuffix</b>]
[<b>&minus;&minus;notimesuffix</b>]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dmstats</b></p></td>
<td width="78%">


<p><b>ungroup</b> [<i>device_name</i>]
[<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;groupid</b> <i>id</i>]</p></td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The dmstats
program manages IO statistics regions for devices that use
the device-mapper driver. Statistics regions may be created,
deleted, listed and reported on using the tool.</p>

<p style="margin-left:11%; margin-top: 1em">The first
argument to dmstats is a <i>command</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The second
argument is the <i>device name</i>, <i>uuid</i> or
<i>major</i> and <i>minor</i> numbers.</p>

<p style="margin-left:11%; margin-top: 1em">Further options
permit the selection of regions, output format control, and
reporting behaviour.</p>

<p style="margin-left:11%; margin-top: 1em">When no device
argument is given dmstats will by default operate on all
device-mapper devices present. The <b>create</b> and
<b>delete</b> commands require the use of
<b>&minus;&minus;alldevices</b> when used in this way.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p style="margin-top: 1em"><b>&minus;&minus;alias</b>
<i>name</i></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify an alias name for a
group.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">



<p style="margin-top: 1em"><b>&minus;&minus;alldevices</b></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:22%;">If no device arguments are
given allow operation on all devices when creating or
deleting regions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="20%">



<p style="margin-top: 1em"><b>&minus;&minus;allprograms</b></p> </td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:22%;">Include regions from all
program IDs for list and report operations.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">



<p style="margin-top: 1em"><b>&minus;&minus;allregions</b></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:22%;">Include all present regions for
commands that normally accept a single region
identifier.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>&minus;&minus;area</b></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:22%;">When peforming a list or
report, include objects of type area in the results.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">


<p style="margin-top: 1em"><b>&minus;&minus;areas</b>
<i>nr_areas</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the number of
statistics areas to create within a new region.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="81%">


<p style="margin-top: 1em"><b>&minus;&minus;areasize</b>
<i>area_size</i>[<b>b</b>|<b>B</b>|<b>s</b>|<b>S</b>|<b>k</b>|<b>K</b>|<b>m</b>|<b>M</b>|<b>g</b>|<b>G</b>|<b>t</b>|<b>T</b>|<b>p</b>|<b>P</b>|<b>e</b>|<b>E</b>]</p> </td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the size of areas into
which a new region should be divided. An optional suffix
selects units of: (<b>b</b>)ytes, (<b>s</b>)ectors,
(<b>k</b>)ilobytes, (<b>m</b>)egabytes, (<b>g</b>)igabytes,
(<b>t</b>)erabytes, (<b>p</b>)etabytes, (<b>e</b>)xabytes.
Capitalise to use multiples of 1000 (S.I.) instead of
1024.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em"><b>&minus;&minus;clear</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:22%;">When printing statistics
counters, also atomically reset them to zero.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="20%">


<p style="margin-top: 1em"><b>&minus;&minus;count</b>
<i>count</i></p> </td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the iteration count for
repeating reports. If the count argument is zero reports
will continue to repeat until interrupted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em"><b>&minus;&minus;group</b></p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:22%;">When peforming a list or
report, include objects of type group in the results.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">



<p style="margin-top: 1em"><b>&minus;&minus;filemap</b></p> </td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Instead of creating regions on
a device as specified by command line options, open the file
found at each <b>file_path</b> argument, and create regions
corresponding to the locations of the on-disk extents
allocated to the file(s).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p style="margin-top: 1em"><b>&minus;&minus;groupid</b>
<i>id</i></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the group to operate
on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="63%">


<p style="margin-top: 1em"><b>&minus;&minus;bounds</b>
<i>histogram_boundaries</i>[<b>ns</b>|<b>us</b>|<b>ms</b>|<b>s</b>]</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the boundaries of a
latency histogram to be tracked for the region as a comma
separated list of latency values. Latency values are given
in nanoseconds. An optional unit suffix of <b>ns</b>,
<b>us</b>, <b>ms</b>, or <b>s</b> may be given after each
value to specify units of nanoseconds, microseconds,
miliseconds or seconds respectively.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="17%">



<p style="margin-top: 1em"><b>&minus;&minus;histogram</b></p> </td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:22%;">When used with the
<b>report</b> and <b>list</b> commands select default fields
that emphasize latency histogram data.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="27%">


<p style="margin-top: 1em"><b>&minus;&minus;interval</b>
<i>seconds</i></p> </td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the interval in seconds
between successive iterations for repeating reports. If
<b>&minus;&minus;interval</b> is specified but
<b>&minus;&minus;count</b> is not, reports will continue to
repeat until interrupted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="74%">


<p style="margin-top: 1em"><b>&minus;&minus;length</b>
<i>length</i>[<b>b</b>|<b>B</b>|<b>s</b>|<b>S</b>|<b>k</b>|<b>K</b>|<b>m</b>|<b>M</b>|<b>g</b>|<b>G</b>|<b>t</b>|<b>T</b>|<b>p</b>|<b>P</b>|<b>e</b>|<b>E</b>]</p> </td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the length of a new
statistics region in sectors. An optional suffix selects
units of: (<b>b</b>)ytes, (<b>s</b>)ectors,
(<b>k</b>)ilobytes, (<b>m</b>)egabytes, (<b>g</b>)igabytes,
(<b>t</b>)erabytes, (<b>p</b>)etabytes, (<b>e</b>)xabytes.
Capitalise to use multiples of 1000 (S.I.) instead of
1024.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">



<p style="margin-top: 1em"><b>&minus;j</b>|<b>&minus;&minus;major</b>
<i>major</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the major number.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="24%">



<p style="margin-top: 1em"><b>&minus;m</b>|<b>&minus;&minus;minor</b>
<i>minor</i></p> </td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the minor number.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">



<p style="margin-top: 1em"><b>&minus;&minus;nogroup</b></p> </td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">When creating regions mapping
the extents of a file in the file system, do not create a
group or set an alias.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">



<p style="margin-top: 1em"><b>&minus;&minus;nosuffix</b></p> </td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:22%;">Suppress the suffix on output
sizes. Use with <b>&minus;&minus;units</b> (except h and H)
if processing the output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">



<p style="margin-top: 1em"><b>&minus;&minus;notimesuffix</b></p> </td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%;">Suppress the suffix on output
time values. Histogram boundary values will be reported in
units of nanoseconds.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">



<p style="margin-top: 1em"><b>&minus;o</b>|<b>&minus;&minus;options</b></p> </td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify which report fields to
display.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">



<p style="margin-top: 1em"><b>&minus;O</b>|<b>&minus;&minus;sort</b>
<i>sort_fields</i></p> </td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:22%;">Sort output according to the
list of fields given. Precede any sort field with
&rsquo;<b>-</b>&rsquo; for a reverse sort on that
column.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">



<p style="margin-top: 1em"><b>&minus;&minus;precise</b></p> </td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Attempt to use nanosecond
precision counters when creating new statistics regions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p style="margin-top: 1em"><b>&minus;&minus;programid</b>
<i>id</i></p> </td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify a program ID string.
When creating new statistics regions this string is stored
with the region. Subsequent operations may supply a program
ID in order to select only regions with a matching value.
The default program ID for dmstats-managed regions is
&quot;dmstats&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em"><b>&minus;&minus;region</b></p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:22%;">When peforming a list or
report, include objects of type region in the results.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="20%">


<p style="margin-top: 1em"><b>&minus;&minus;regionid</b>
<i>id</i></p> </td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the region to operate
on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p style="margin-top: 1em"><b>&minus;&minus;regions</b>
<i>region_list</i></p> </td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify a list of regions to
group. The group list is a comma-separated list of region
identifiers. Continuous sequences of identifiers may be
expressed as a hyphen separated range, for example:
&rsquo;1-10&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">



<p style="margin-top: 1em"><b>&minus;&minus;relative</b></p> </td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:22%;">If displaying the histogram
report show relative (percentage) values instead of absolute
counts.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">



<p style="margin-top: 1em"><b>&minus;S</b>|<b>&minus;&minus;select</b>
<i>selection</i></p> </td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:22%;">Display only rows that match
<i>selection</i> criteria. All rows with the additional
&quot;selected&quot; column (<b>&minus;o selected</b>)
showing 1 if the row matches the <i>selection</i> and 0
otherwise. The selection criteria are defined by specifying
column names and their valid values while making use of
supported comparison operators.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="71%">


<p style="margin-top: 1em"><b>&minus;&minus;start</b>
<i>start</i>[<b>b</b>|<b>B</b>|<b>s</b>|<b>S</b>|<b>k</b>|<b>K</b>|<b>m</b>|<b>M</b>|<b>g</b>|<b>G</b>|<b>t</b>|<b>T</b>|<b>p</b>|<b>P</b>|<b>e</b>|<b>E</b>]</p> </td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the start offset of a
new statistics region in sectors. An optional suffix selects
units of: (<b>b</b>)ytes, (<b>s</b>)ectors,
(<b>k</b>)ilobytes, (<b>m</b>)egabytes, (<b>g</b>)igabytes,
(<b>t</b>)erabytes, (<b>p</b>)etabytes, (<b>e</b>)xabytes.
Capitalise to use multiples of 1000 (S.I.) instead of
1024.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">



<p style="margin-top: 1em"><b>&minus;&minus;segments</b></p> </td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:22%;">When used with <b>create</b>,
create a new statistics region for each target contained in
the given device(s). This causes a separate region to be
allocated for each segment of the device.</p>

<p style="margin-left:22%; margin-top: 1em">The newly
created regions are automatically placed into a group unless
the <b>&minus;&minus;nogroup</b> option is given. When
grouping is enabled a group alias may be specified using the
<b>&minus;&minus;alias</b> option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="80%">


<p style="margin-top: 1em"><b>&minus;&minus;units</b>
[<i>units</i>][<b>h</b>|<b>H</b>|<b>b</b>|<b>B</b>|<b>s</b>|<b>S</b>|<b>k</b>|<b>K</b>|<b>m</b>|<b>M</b>|<b>g</b>|<b>G</b>|<b>t</b>|<b>T</b>|<b>p</b>|<b>P</b>|<b>e</b>|<b>E</b>]</p> </td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:22%;">Set the display units for
report output. All sizes are output in these units:
(<b>h</b>)uman-readable, (<b>b</b>)ytes, (<b>s</b>)ectors,
(<b>k</b>)ilobytes, (<b>m</b>)egabytes, (<b>g</b>)igabytes,
(<b>t</b>)erabytes, (<b>p</b>)etabytes, (<b>e</b>)xabytes.
Capitalise to use multiples of 1000 (S.I.) instead of 1024.
Can also specify custom units e.g.
<b>&minus;&minus;units&nbsp;3M</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="31%">


<p style="margin-top: 1em"><b>&minus;&minus;userdata</b>
<i>user_data</i></p> </td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify user data (a word) to
be stored with a new region. The value is added to any
internal auxilliary data (for example, group information),
and stored with the region in the aux_data field provided by
the kernel. Whitespace is not permitted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">



<p style="margin-top: 1em"><b>&minus;u</b>|<b>&minus;&minus;uuid</b></p> </td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">Specify the uuid.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">



<p style="margin-top: 1em"><b>&minus;v</b>|<b>&minus;&minus;verbose</b>
[<b>&minus;v</b>|<b>&minus;&minus;verbose</b>]</p> </td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:22%;">Produce additional output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>
<td width="11%"></td>
<td width="74%"></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="74%">


<p><b>clear</b> <i>device_name</i>
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:22%;">Instructs the kernel to clear
statistics counters for the speficied regions (with the
exception of in-flight IO counters).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>create</b>
[<b>device_name...</b> |<b>file_path...</b>]
[<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;areas</b>
<i>nr_areas</i>|<b>&minus;&minus;areasize</b>
<i>area_size</i>] [<b>&minus;&minus;bounds</b>
<i>histogram_boundaries</i>] [<b>&minus;&minus;filemap</b>]
[<b>&minus;&minus;nogroup</b>]
[<b>&minus;&minus;precise</b>] [<b>&minus;&minus;start</b>
<i>start_sector</i> <b>&minus;&minus;length</b>
<i>length</i>|<b>&minus;&minus;segments</b>]
[<b>&minus;&minus;userdata</b> <i>user_data</i>]
[<b>&minus;&minus;programid</b> <i>id</i>]</p></td></tr>
</table>

<p style="margin-left:22%;">Creates one or more new
statistics regions on the specified device(s).</p>

<p style="margin-left:22%; margin-top: 1em">The region will
span the entire device unless <b>&minus;&minus;start</b> and
<b>&minus;&minus;length</b> or <b>&minus;&minus;segments</b>
are given. The <b>&minus;&minus;start</b> an
<b>&minus;&minus;length</b> options allow a region of
arbitrary length to be placed at an arbitrary offset into
the device. The <b>&minus;&minus;segments</b> option causes
a new region to be created for each target in the
corresponding device-mapper device&rsquo;s table.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;precise</b> option is used the command will
attempt to create a region using nanosecond precision
counters.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;&minus;bounds</b> is given a latency histogram
will be tracked for the new region. The boundaries of the
histogram bins are given as a comma separated list of
latency values. There is an implicit lower bound of zero on
the first bin and an implicit upper bound of infinity (or
the configured interval duration) on the final bin.</p>

<p style="margin-left:22%; margin-top: 1em">Latencies are
given in nanoseconds. An optional unit suffix of ns, us, ms,
or s may be given after each value to specify units of
nanoseconds, microseconds, miliseconds or seconds
respectively, so for example, 10ms is equivalent to
10000000. Latency values with a precision of less than one
milisecond can only be used when precise timestamps are
enabled: if <b>&minus;&minus;precise</b> is not given and
values less than one milisecond are used it will be enabled
automatically.</p>

<p style="margin-left:22%; margin-top: 1em">An optional
<b>program_id</b> or <b>user_data</b> string may be
associated with the region. A <b>program_id</b> may then be
used to select regions for subsequent list, print, and
report operations. The <b>user_data</b> stores an arbitrary
string and is not used by dmstats or the device-mapper
kernel statistics subsystem.</p>

<p style="margin-left:22%; margin-top: 1em">By default
dmstats creates regions with a <b>program_id</b> of
&quot;dmstats&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">On success the
<b>region_id</b> of the newly created region is printed to
stdout.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;filemap</b> option is given with a regular
file, or list of files, as the <b>file_path</b> argument,
instead of creating regions with parameters specified on the
command line, <b>dmstats</b> will open the files located at
<b>file_path</b> and create regions corresponding to the
physical extents allocated to the file. This can be used to
monitor statistics for individual files in the file system,
for example, virtual machine images, swap areas, or large
database files.</p>

<p style="margin-left:22%; margin-top: 1em">To work with
the <b>&minus;&minus;filemap</b> option, files must be
located on a local file system, backed by a device-mapper
device, that supports physical extent data using the FIEMAP
ioctl (Ext4 and XFS for e.g.).</p>

<p style="margin-left:22%; margin-top: 1em">By default
regions that map a file are placed into a group and the
group alias is set to the basename of the file. This
behaviour can be overridden with the
<b>&minus;&minus;alias</b> and <b>&minus;&minus;nogroup</b>
options.</p>

<p style="margin-left:22%; margin-top: 1em">Use the
<b>&minus;&minus;group</b> option to only display
information for groups when listing and reporting.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>delete</b>
[<i>device_name</i>] [<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td></tr>
</table>

<p style="margin-left:22%;">Delete the specified statistics
region. All counters and resources used by the region are
released and the region will not appear in the output of
subsequent list, print, or report operations.</p>

<p style="margin-left:22%; margin-top: 1em">All regions
registered on a device may be removed using
<b>&minus;&minus;allregions</b>.</p>

<p style="margin-left:22%; margin-top: 1em">To remove all
regions on all devices both <b>&minus;&minus;allregions</b>
and <b>&minus;&minus;alldevices</b> must be used.</p>

<p style="margin-left:22%; margin-top: 1em">If a
<b>&minus;&minus;groupid</b> is given instead of a
<b>&minus;&minus;regionid</b> the command will attempt to
delete the group and all regions that it contains.</p>

<p style="margin-left:22%; margin-top: 1em">If a deleted
region is the first member of a group of regions the group
will also be removed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>group</b>
[<i>device_name</i>] [<b>&minus;&minus;alias</b>
<i>name</i>] [<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;regions</b> <i>regions</i>]</p></td></tr>
</table>

<p style="margin-left:22%;">Combine one or more statistics
regions on the specified device into a group.</p>

<p style="margin-left:22%; margin-top: 1em">The list of
regions to be grouped is specified with
<b>&minus;&minus;regions</b> and an optional alias may be
assigned with <b>&minus;&minus;alias</b>. The set of regions
is given as a comma-separated list of region identifiers. A
continuous range of identifers spanning from <b>R1</b> to
<b>R2</b> may be expressed as
&rsquo;<b>R1</b>-<b>R2</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Regions that
have a histogram configured can be grouped: in this case the
number of histogram bins and their bounds must match
exactly.</p>

<p style="margin-left:22%; margin-top: 1em">On success the
group list and newly created <b>group_id</b> are printed to
stdout.</p>

<p style="margin-left:22%; margin-top: 1em">The group
metadata is stored with the first (lowest numbered)
<b>region_id</b> in the group: deleting this region will
also delete the group and other group members will be
returned to their prior state.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p style="margin-top: 1em"><b>help</b>
[<b>&minus;c</b>|<b>&minus;C</b>|<b>&minus;&minus;columns</b>]</p> </td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:22%;">Outputs a summary of the
commands available, optionally including the list of report
fields.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>list</b> [<i>device_name</i>]
[<b>&minus;&minus;histogram</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>] [<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;area</b>] [<b>&minus;&minus;region</b>]
[<b>&minus;&minus;group</b>] [<b>&minus;&minus;nosuffix</b>]
[<b>&minus;&minus;notimesuffix</b>]
[<b>&minus;v</b>|<b>&minus;&minus;verbose</b>[<b>&minus;v</b>|<b>&minus;&minus;verbose</b>]]</p> </td></tr>
</table>

<p style="margin-left:22%;">List the statistics regions,
areas, or groups registered on the device. If the
<b>&minus;&minus;allprograms</b> switch is given all regions
will be listed regardless of region program ID values.</p>

<p style="margin-left:22%; margin-top: 1em">By default only
regions and groups are included in list output. If
<b>&minus;v</b> or <b>&minus;&minus;verbose</b> is given the
report will also include a row of information for each
configured group and for each area contained in each region
displayed.</p>

<p style="margin-left:22%; margin-top: 1em">Regions that
contain a single area are by default omitted from the
verbose list since their properties are identical to the
area that they contain - to view all regions regardless of
the number of areas present use
<b>&minus;&minus;region</b>). To also view the areas
contained within regions use <b>&minus;&minus;area</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;&minus;histogram</b> is given the report will
include the bin count and latency boundary values for any
configured histograms.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>print</b>
[<i>device_name</i>] [<b>&minus;&minus;clear</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>]</p> </td></tr>
</table>

<p style="margin-left:22%;">Print raw statistics counters
for the specified region or for all present regions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>report</b>
[<i>device_name</i>] [<b>&minus;&minus;interval</b>
<i>seconds</i>] [<b>&minus;&minus;count</b> <i>count</i>]
[<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;histogram</b>]
[<b>&minus;&minus;allprograms</b>|<b>&minus;&minus;programid</b>
<i>id</i>]
[<b>&minus;&minus;allregions</b>|<b>&minus;&minus;regionid</b>
<i>id</i>] [<b>&minus;&minus;area</b>]
[<b>&minus;&minus;region</b>] [<b>&minus;&minus;group</b>]
[<b>&minus;O</b>|<b>&minus;&minus;sort</b>
<i>sort_fields</i>]
[<b>&minus;S</b>|<b>&minus;&minus;select</b>
<i>selection</i>] [<b>&minus;&minus;units</b> <i>units</i>]
[<b>&minus;&minus;nosuffix</b>]
[<b>&minus;&minus;notimesuffix</b>]</p> </td></tr>
</table>

<p style="margin-left:22%;">Start a report for the
specified object or for all present objects. If the count
argument is specified, the report will repeat at a fixed
interval set by the <b>&minus;&minus;interval</b> option.
The default interval is one second.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;allprograms</b> switch is given, all
regions will be listed, regardless of region program ID
values.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;histogram</b> is given the report will
include the histogram values and latency boundaries.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;relative</b> is used the default histogram
field displays bin values as a percentage of the total
number of I/Os.</p>

<p style="margin-left:22%; margin-top: 1em">Object types
(areas, regions and groups) to include in the report are
selected using the <b>&minus;&minus;area</b>,
<b>&minus;&minus;region</b>, and <b>&minus;&minus;group</b>
options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="78%">


<p style="margin-top: 1em"><b>ungroup</b>
[<i>device_name</i>] [<b>&minus;&minus;alldevices</b>]
[<b>&minus;&minus;groupid</b> <i>id</i>]</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:22%;">Remove an existing group and
return all the group&rsquo;s regions to their original
state.</p>

<p style="margin-left:22%; margin-top: 1em">The group to be
removed is specified using <b>&minus;&minus;groupid</b>.</p>

<h2>REGIONS, AREAS, AND GROUPS
<a name="REGIONS, AREAS, AND GROUPS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
device-mapper statistics facility allows separate
performance counters to be maintained for arbitrary regions
of devices. A region may span any range: from a single
sector to the whole device. A region may be further
sub-divided into a number of distinct areas (one or more),
each with its own counter set. In this case a summary value
for the entire region is also available for use in
reports.</p>

<p style="margin-left:11%; margin-top: 1em">In addition,
one or more regions on one device can be combined into a
statistics group. Groups allow several regions to be
aggregated and reported as a single entity; counters for all
regions and areas are summed and used to report totals for
all group members. Groups also permit the assignment of an
optional alias, allowing meaningful names to be associated
with sets of regions.</p>

<p style="margin-left:11%; margin-top: 1em">The group
metadata is stored with the first (lowest numbered)
<b>region_id</b> in the group: deleting this region will
also delete the group and other group members will be
returned to their prior state.</p>

<p style="margin-left:11%; margin-top: 1em">By default new
regions span the entire device. The
<b>&minus;&minus;start</b> and <b>&minus;&minus;length</b>
options allows a region of any size to be placed at any
location on the device.</p>

<p style="margin-left:11%; margin-top: 1em">Using offsets
it is possible to create regions that map individual objects
within a block device (for example: partitions, files in a
file system, or stripes or other structures in a RAID
volume). Groups allow several non-contiguous regions to be
assembled together for reporting and data aggregation.</p>

<p style="margin-left:11%; margin-top: 1em">A region may be
either divided into the specified number of equal-sized
areas, or into areas of the given size by specifying one of
<b>&minus;&minus;areas</b> or <b>&minus;&minus;areasize</b>
when creating a region with the <b>create</b> command.
Depending on the size of the areas and the device region the
final area within the region may be smaller than
requested.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Region
identifiers</b></p>

<p style="margin-left:11%; margin-top: 1em">Each region is
assigned an identifier when it is created that is used to
reference the region in subsequent operations. Region
identifiers are unique within a given device (including
across different <b>program_id</b> values).</p>

<p style="margin-left:11%; margin-top: 1em">Depending on
the sequence of create and delete operations, gaps may exist
in the sequence of <b>region_id</b> values for a particular
device.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>region_id</b> should be treated as an opaque identifier
used to reference the region.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Group
identifiers</b></p>

<p style="margin-left:11%; margin-top: 1em">Groups are also
assigned an integer identifier at creation time; like region
identifiers, group identifiers are unique within the
containing device.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>group_id</b> should be treated as an opaque identifier
used to reference the group.</p>

<h2>REPORT FIELDS
<a name="REPORT FIELDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The dmstats
report provides several types of field that may be added to
the default field set, or used to create custom reports.</p>

<p style="margin-left:11%; margin-top: 1em">All performance
counters and metrics are calculated per-area.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Derived
metrics</b> <br>
A number of metrics fields are included that provide high
level performance indicators. These are based on the fields
provided by the conventional Linux iostat program and are
derived from the basic counter values provided by the kernel
for each area. <b><br>
reads_merged_per_sec</b></p>

<p style="margin-left:22%;">Reads merged per second.</p>


<p style="margin-left:11%;"><b>writes_merged_per_sec</b></p>

<p style="margin-left:22%;">Writes merged per second.</p>

<p style="margin-left:11%;"><b>reads_per_sec</b></p>

<p style="margin-left:22%;">Reads completed per second.</p>

<p style="margin-left:11%;"><b>writes_per_sec</b></p>

<p style="margin-left:22%;">Writes completed per
second.</p>

<p style="margin-left:11%;"><b>read_size_per_sec</b></p>

<p style="margin-left:22%;">Size of data read per
second.</p>

<p style="margin-left:11%;"><b>write_size_per_sec</b></p>

<p style="margin-left:22%;">Size of data written per
second.</p>

<p style="margin-left:11%;"><b>avg_request_size</b></p>

<p style="margin-left:22%;">Average request size.</p>

<p style="margin-left:11%;"><b>queue_size</b></p>

<p style="margin-left:22%;">Average queue size.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>await</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>The average wait time for read and write operations.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>r_await</b></p>

<p style="margin-left:22%;">The average wait time for read
operations.</p>

<p style="margin-left:11%;"><b>w_await</b></p>

<p style="margin-left:22%;">The average wait time for write
operations.</p>

<p style="margin-left:11%;"><b>throughput</b></p>

<p style="margin-left:22%;">The device throughput in
operations per second.</p>

<p style="margin-left:11%;"><b>service_time</b></p>

<p style="margin-left:22%;">The average service time (in
milliseconds) for operations issued to the device.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>util</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Percentage of CPU time during which I/O requests were
issued to the device (bandwidth utilization for the device).
Device saturation occurs when this value is close to
100%.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Group,
region and area meta fields</b> <br>
Meta fields provide information about the groups, regions,
or areas that the statistics values relate to. This includes
the region and area identifier, start, length, and counts,
as well as the program ID and user data values. <b><br>
region_id</b></p>

<p style="margin-left:22%;">Region identifier. This is a
non-negative integer returned by the kernel when a
statistics region is created.</p>

<p style="margin-left:11%;"><b>region_start</b></p>

<p style="margin-left:22%;">The region start location.
Display units are selected by the <b>&minus;&minus;units</b>
option.</p>

<p style="margin-left:11%;"><b>region_len</b></p>

<p style="margin-left:22%;">The length of the region.
Display units are selected by the <b>&minus;&minus;units</b>
option.</p>

<p style="margin-left:11%;"><b>area_id</b></p>

<p style="margin-left:22%;">Area identifier. Area
identifiers are assigned by the device-mapper statistics
library and uniquely identify each area within a region.
Each ID corresponds to a distinct set of performance
counters for that area of the statistics region. Area
identifiers are always monotonically increasing within a
region so that higher ID values correspond to greater sector
addresses within the area and no gaps in the sequence of
identifiers exist.</p>

<p style="margin-left:11%;"><b>area_start</b></p>

<p style="margin-left:22%;">The area start location.
Display units are selected by the <b>&minus;&minus;units</b>
option.</p>

<p style="margin-left:11%;"><b>area_len</b></p>

<p style="margin-left:22%;">The length of the area. Display
units are selected by the <b>&minus;&minus;units</b>
option.</p>

<p style="margin-left:11%;"><b>area_count</b></p>

<p style="margin-left:22%;">The number of areas in this
region.</p>

<p style="margin-left:11%;"><b>program_id</b></p>

<p style="margin-left:22%;">The program ID value associated
with this region.</p>

<p style="margin-left:11%;"><b>user_data</b></p>

<p style="margin-left:22%;">The user data value associated
with this region.</p>

<p style="margin-left:11%;"><b>group_id</b></p>

<p style="margin-left:22%;">Group identifier. This is a
non-negative integer returned by the dmstats <b>group</b>
command when a statistics group is created.</p>

<p style="margin-left:11%;"><b>interval_ns</b></p>

<p style="margin-left:22%;">The estimated interval over
which the current counter values have accumulated. The value
is reported as an interger expressed in units of
nanoseconds.</p>

<p style="margin-left:11%;"><b>interval</b></p>

<p style="margin-left:22%;">The estimated interval over
which the current counter values have accumulated. The value
is reported as a real number in units of seconds.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Basic
counters</b> <br>
Basic counters provide access to the raw counter data from
the kernel, allowing further processing to be carried out by
another program.</p>

<p style="margin-left:11%; margin-top: 1em">The kernel
provides thirteen separate counters for each statistics
area. The first eleven of these match the counters provided
in /proc/diskstats or /sys/block/*/*/stat. The final pair
provide separate counters for read and write time. <b><br>
read_count</b></p>

<p style="margin-left:22%;">Count of reads completed this
interval.</p>

<p style="margin-left:11%;"><b>reads_merged_count</b></p>

<p style="margin-left:22%;">Count of reads merged this
interval.</p>

<p style="margin-left:11%;"><b>read_sector_count</b></p>

<p style="margin-left:22%;">Count of 512 byte sectors read
this interval.</p>

<p style="margin-left:11%;"><b>read_time</b></p>

<p style="margin-left:22%;">Accumulated duration of all
read requests (ns).</p>

<p style="margin-left:11%;"><b>write_count</b></p>

<p style="margin-left:22%;">Count of writes completed this
interval.</p>

<p style="margin-left:11%;"><b>writes_merged_count</b></p>

<p style="margin-left:22%;">Count of writes merged this
interval.</p>

<p style="margin-left:11%;"><b>write_sector_count</b></p>

<p style="margin-left:22%;">Count of 512 byte sectors
written this interval.</p>

<p style="margin-left:11%;"><b>write_nsecs</b></p>

<p style="margin-left:22%;">Accumulated duration of all
write requests (ns).</p>

<p style="margin-left:11%;"><b>in_progress_count</b></p>

<p style="margin-left:22%;">Count of requests currently in
progress.</p>

<p style="margin-left:11%;"><b>io_ticks</b></p>

<p style="margin-left:22%;">Nanoseconds spent servicing
requests.</p>

<p style="margin-left:11%;"><b>queue_ticks</b></p>

<p style="margin-left:22%;">This field is incremented at
each I/O start, I/O completion, I/O merge, or read of these
stats by the number of I/Os in progress multiplied by the
number of milliseconds spent doing I/O since the last update
of this field. This can provide an easy measure of both I/O
completion time and the backlog that may be
accumulating.</p>

<p style="margin-left:11%;"><b>read_ticks</b></p>

<p style="margin-left:22%;">Nanoseconds spent servicing
reads.</p>

<p style="margin-left:11%;"><b>write_ticks</b></p>

<p style="margin-left:22%;">Nanoseconds spent servicing
writes.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Histogram
fields</b> <br>
Histograms measure the frequency distribution of user
specified I/O latency intervals. Histogram bin boundaries
are specified when a region is created.</p>

<p style="margin-left:11%; margin-top: 1em">A brief
representation of the histogram values and latency intervals
can be included in the report using these fields. <b><br>
hist_count</b></p>

<p style="margin-left:22%;">A list of the histogram counts
for the current statistics area in order of ascending
latency value. Each value represents the number of I/Os with
latency times falling into that bin&rsquo;s time range
during the sample period.</p>

<p style="margin-left:11%;"><b>hist_count_bounds</b></p>

<p style="margin-left:22%;">A list of the histogram counts
for the current statistics area in order of ascending
latency value including bin boundaries: each count is
prefixed by the lower bound of the corresponding histogram
bin.</p>

<p style="margin-left:11%;"><b>hist_count_ranges</b></p>

<p style="margin-left:22%;">A list of the histogram counts
for the current statistics area in order of ascending
latency value including bin boundaries: each count is
prefixed by both the lower and upper bounds of the
corresponding histogram bin.</p>

<p style="margin-left:11%;"><b>hist_percent</b></p>

<p style="margin-left:22%;">A list of the relative
histogram values for the current statistics area in order of
ascending latency value, expressed as a percentage. Each
value represents the proportion of I/Os with latency times
falling into that bin&rsquo;s time range during the sample
period.</p>

<p style="margin-left:11%;"><b>hist_percent_bounds</b></p>

<p style="margin-left:22%;">A list of the relative
histogram values for the current statistics area in order of
ascending latency value, expressed as a percentage and
including bin boundaries. Each value represents the
proportion of I/Os with latency times falling into that
bin&rsquo;s time range during the sample period and is
prefixed with the corresponding bin&rsquo;s lower bound.</p>

<p style="margin-left:11%;"><b>hist_percent_ranges</b></p>

<p style="margin-left:22%;">A list of the relative
histogram values for the current statistics area in order of
ascending latency value, expressed as a percentage and
including bin boundaries. Each value represents the
proportion of I/Os with latency times falling into that
bin&rsquo;s time range during the sample period and is
prefixed with the corresponding bin&rsquo;s lower and upper
bounds.</p>

<p style="margin-left:11%;"><b>hist_bounds</b></p>

<p style="margin-left:22%;">A list of the histogram
boundary values for the current statistics area in order of
ascending latency value. The values are expressed in whole
units of seconds, miliseconds, microseconds or nanoseconds
with a suffix indicating the unit.</p>

<p style="margin-left:11%;"><b>hist_ranges</b></p>

<p style="margin-left:22%;">A list of the histogram bin
ranges for the current statistics area in order of ascending
latency value. The values are expressed as
&quot;LOWER-UPPER&quot; in whole units of seconds,
miliseconds, microseconds or nanoseconds with a suffix
indicating the unit.</p>

<p style="margin-left:11%;"><b>hist_bins</b></p>

<p style="margin-left:22%;">The number of latency histogram
bins configured for the area.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Create a
whole-device region with one area on vg00/lvol1 <br>
# <b>dmstats create vg00/lvol1</b> <br>
vg00/lvol1: Created new region with 1 area(s) as region ID
0</p>

<p style="margin-left:11%; margin-top: 1em">Create a 32M
region 1G into device d0 <br>
# <b>dmstats create &minus;&minus;start 1G
&minus;&minus;length 32M d0</b> <br>
d0: Created new region with 1 area(s) as region ID 0</p>

<p style="margin-left:11%; margin-top: 1em">Create a
whole-device region with 8 areas on every device <br>
# <b>dmstats create &minus;&minus;areas 8</b> <br>
vg00-lvol1: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol2: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol3: Created new region with 8 area(s) as region ID 0
<br>
vg01-lvol0: Created new region with 8 area(s) as region ID 2
<br>
vg01-lvol1: Created new region with 8 area(s) as region ID 0
<br>
vg00-lvol2: Created new region with 8 area(s) as region ID
1</p>

<p style="margin-left:11%; margin-top: 1em">Delete all
regions on all devices <br>
# <b>dmstats delete &minus;&minus;alldevices
&minus;&minus;allregions</b></p>

<p style="margin-left:11%; margin-top: 1em">Create a
whole-device region with areas 10GiB in size on vg00/lvol1
using dmsetup <br>
# <b>dmsetup stats create &minus;&minus;areasize 10G
vg00/lvol1</b> <br>
vg00-lvol1: Created new region with 5 area(s) as region ID
1</p>

<p style="margin-left:11%; margin-top: 1em">Create a 1GiB
region with 16 areas at the start of vg00/lvol1 <br>
# <b>dmstats create &minus;&minus;start 0 &minus;&minus;len
1G &minus;&minus;areas=16 vg00/lvol1</b> <br>
vg00-lvol1: Created new region with 16 area(s) as region ID
0</p>

<p style="margin-left:11%; margin-top: 1em">List the
statistics regions registered on vg00/lvol1 <br>
# <b>dmstats list vg00/lvol1</b> <br>
Name RgID RStart RSize #Areas ASize ProgID <br>
vg00-lvol1 0 0 61.00g 1 61.00g dmstats <br>
vg00-lvol1 1 61.00g 19.20g 1 19.20g dmstats <br>
vg00-lvol1 2 80.20g 2.14g 1 2.14g dmstats</p>

<p style="margin-left:11%; margin-top: 1em">Display five
statistics reports for vg00/lvol1 at an interval of one
second <br>
# <b>dmstats report &minus;&minus;interval 1
&minus;&minus;count 5 vg00/lvol1</b> <br>
# <b>dmstats report</b> <br>
Name RgID ArID AStart ASize RRqM/s WRqM/s R/s W/s RSz/s
WSz/s AvRqSz QSize Util% AWait RdAWa WrAWa <br>
vg_hex-lv_home 0 0 0 61.00g 0.00 0.00 0.00 218.00 0 1.04m
4.50k 2.97 81.70 13.62 0.00 13.62 <br>
vg_hex-lv_home 1 0 61.00g 19.20g 0.00 0.00 0.00 5.00 0
548.00k 109.50k 0.14 11.00 27.40 0.00 27.40 <br>
vg_hex-lv_home 2 0 80.20g 2.14g 0.00 0.00 0.00 14.00 0 1.15m
84.00k 0.39 18.70 27.71 0.00 27.71</p>

<p style="margin-left:11%; margin-top: 1em">Create one
region for reach target contained in device vg00/lvol1 <br>
# <b>dmstats create &minus;&minus;segments vg00/lvol1</b>
<br>
vg00-lvol1: Created new region with 1 area(s) as region ID 0
<br>
vg00-lvol1: Created new region with 1 area(s) as region ID 1
<br>
vg00-lvol1: Created new region with 1 area(s) as region ID
2</p>

<p style="margin-left:11%; margin-top: 1em">Create regions
mapping each file in the directory images/ and place them
into separate groups, each named after the corresponding
file <br>
# <b>dmstats create --filemap images/*</b> <br>
images/vm1.qcow2: Created new group with 87 region(s) as
group ID 0. <br>
images/vm1-1.qcow2: Created new group with 8 region(s) as
group ID 87. <br>
images/vm2.qcow2: Created new group with 11 region(s) as
group ID 95. <br>
images/vm2-1.qcow2: Created new group with 1454 region(s) as
group ID 106. <br>
images/vm3.img: Created new group with 2 region(s) as group
ID 1560.</p>

<p style="margin-left:11%; margin-top: 1em">Print raw
counters for region 4 on device d0 <br>
# <b>dmstats print &minus;&minus;regionid 4 d0</b> <br>
2097152+65536 0 0 0 0 29 0 264 701 0 41 701 0 41</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Bryn M. Reeves
&lt;bmr@redhat.com&gt;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dmsetup</b>(8)</p>

<p style="margin-left:11%; margin-top: 1em">LVM2 resource
page: https://www.sourceware.org/lvm2/ <br>
Device-mapper resource page:
http://sources.redhat.com/dm/</p>

<p style="margin-left:11%; margin-top: 1em">Device-mapper
statistics kernel documentation <i><br>
 Documentation/device-mapper/statistics.txt</i></p>
<hr>
</body>
</html>
