<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 20:59:23 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CGI::Push</title>

</head>
<body>

<h1 align="center">CGI::Push</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#USING CGI::Push">USING CGI::Push</a><br>
<a href="#INSTALLING CGI::Push SCRIPTS">INSTALLING CGI::Push SCRIPTS</a><br>
<a href="#AUTHOR INFORMATION">AUTHOR INFORMATION</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Push
&minus; Simple Interface to Server Push</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">    use CGI::Push qw(:standard);
    do_push(&minus;next_page=&gt;\&amp;next_page,
            &minus;last_page=&gt;\&amp;last_page,
            &minus;delay=&gt;0.5);
    sub next_page {
        my($q,$counter) = @_;
        return undef if $counter &gt;= 10;
        return start_html('Test'),
               h1('Visible'),&quot;\n&quot;,
               &quot;This page has been called &quot;, strong($counter),&quot; times&quot;,
               end_html();
    }
    sub last_page {
        my($q,$counter) = @_;
        return start_html('Done'),
               h1('Finished'),
               strong($counter &minus; 1),' iterations.',
               end_html;
    }</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Push is a
subclass of the <small>CGI</small> object created by
<small>CGI</small> .pm. It is specialized for server push
operations, which allow you to create animated pages whose
content changes at regular intervals.</p>

<p style="margin-left:11%; margin-top: 1em">You provide
CGI::Push with a pointer to a subroutine that will draw one
page. Every time your subroutine is called, it generates a
new page. The contents of the page will be transmitted to
the browser in such a way that it will replace what was
there beforehand. The technique will work with
<small>HTML</small> pages as well as with graphics files,
allowing you to create animated GIFs.</p>

<p style="margin-left:11%; margin-top: 1em">Only Netscape
Navigator supports server push. Internet Explorer browsers
do not.</p>

<h2>USING CGI::Push
<a name="USING CGI::Push"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Push adds
one new method to the standard <small>CGI</small> suite,
<i>do_push()</i>. When you call this method, you pass it a
reference to a subroutine that is responsible for drawing
each new page, an interval delay, and an optional subroutine
for drawing the last page. Other optional parameters include
most of those recognized by the <small>CGI</small>
<i>header()</i> method.</p>

<p style="margin-left:11%; margin-top: 1em">You may call
<i>do_push()</i> in the object oriented manner or not, as
you prefer:</p>

<pre style="margin-left:11%; margin-top: 1em">    use CGI::Push;
    $q = new CGI::Push;
    $q&minus;&gt;do_push(&minus;next_page=&gt;\&amp;draw_a_page);
        &minus;or&minus;
    use CGI::Push qw(:standard);
    do_push(&minus;next_page=&gt;\&amp;draw_a_page);</pre>


<p style="margin-left:11%; margin-top: 1em">Parameters are
as follows: <br>
&minus;next_page</p>

<pre style="margin-left:17%;">    do_push(&minus;next_page=&gt;\&amp;my_draw_routine);</pre>


<p style="margin-left:17%; margin-top: 1em">This required
parameter points to a reference to a subroutine responsible
for drawing each new page. The subroutine should expect two
parameters consisting of the <small>CGI</small> object and a
counter indicating the number of times the subroutine has
been called. It should return the contents of the page as an
<b>array</b> of one or more items to print. It can return a
false value (or an empty array) in order to abort the
redrawing loop and print out the final page (if any)</p>

<pre style="margin-left:17%; margin-top: 1em">    sub my_draw_routine {
        my($q,$counter) = @_;
        return undef if $counter &gt; 100;
        return start_html('testing'),
               h1('testing'),
               &quot;This page called $counter times&quot;;
    }</pre>


<p style="margin-left:17%; margin-top: 1em">You are of
course free to refer to create and use global variables
within your draw routine in order to achieve special
effects.</p>

<p style="margin-left:11%;">&minus;last_page</p>

<p style="margin-left:17%;">This optional parameter points
to a reference to the subroutine responsible for drawing the
last page of the series. It is called after the
&minus;next_page routine returns a false value. The
subroutine itself should have exactly the same calling
conventions as the &minus;next_page routine.</p>

<p style="margin-left:11%;">&minus;type</p>

<p style="margin-left:17%;">This optional parameter
indicates the content type of each page. It defaults to
&quot;text/html&quot;. Normally the module assumes that each
page is of a homogeneous <small>MIME</small> type. However
if you provide either of the magic values
&quot;heterogeneous&quot; or &quot;dynamic&quot; (the latter
provided for the convenience of those who hate long
parameter names), you can specify the <small>MIME</small>
type -- and other header fields -- on a per-page basis. See
&quot;heterogeneous pages&quot; for more details.</p>

<p style="margin-left:11%;">&minus;delay</p>

<p style="margin-left:17%;">This indicates the delay, in
seconds, between frames. Smaller delays refresh the page
faster. Fractional values are allowed.</p>

<p style="margin-left:17%; margin-top: 1em"><b>If not
specified, &minus;delay will default to 1 second</b></p>

<p style="margin-left:11%;">&minus;cookie, &minus;target,
&minus;expires, &minus;nph</p>

<p style="margin-left:17%;">These have the same meaning as
the like-named parameters in <i>CGI::header()</i>.</p>

<p style="margin-left:17%; margin-top: 1em">If not
specified, &minus;nph will default to 1 (as needed for many
servers, see below).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Heterogeneous
Pages</b> <br>
Ordinarily all pages displayed by CGI::Push share a common
<small>MIME</small> type. However by providing a value of
&quot;heterogeneous&quot; or &quot;dynamic&quot; in the
<i>do_push()</i> &minus;type parameter, you can specify the
<small>MIME</small> type of each page on a case-by-case
basis.</p>

<p style="margin-left:11%; margin-top: 1em">If you use this
option, you will be responsible for producing the
<small>HTTP</small> header for each page. Simply modify your
draw routine to look like this:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub my_draw_routine {
        my($q,$counter) = @_;
        return header('text/html'),   # note we're producing the header here
               start_html('testing'),
               h1('testing'),
               &quot;This page called $counter times&quot;;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">You can add any
header fields that you like, but some (cookies and status
fields included) may not be interpreted by the browser. One
interesting effect is to display a series of pages, then,
after the last page, to redirect the browser to a new
<small>URL.</small> Because <i>redirect()</i> does
b&lt;not&gt; work, the easiest way is with a &minus;refresh
header field, as shown below:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub my_draw_routine {
        my($q,$counter) = @_;
        return undef if $counter &gt; 10;
        return header('text/html'),   # note we're producing the header here
               start_html('testing'),
               h1('testing'),
               &quot;This page called $counter times&quot;;
    }
    sub my_last_page {
        return header(&minus;refresh=&gt;'5; URL=http://somewhere.else/finished.html',
                      &minus;type=&gt;'text/html'),
               start_html('Moved'),
               h1('This is the last page'),
               'Goodbye!'
               hr,
               end_html;
    }</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Changing the
Page Delay on the Fly</b> <br>
If you would like to control the delay between pages on a
page-by-page basis, call <i>push_delay()</i> from within
your draw routine. <i>push_delay()</i> takes a single
numeric argument representing the number of seconds you wish
to delay after the current page is displayed and before
displaying the next one. The delay may be fractional.
Without parameters, <i>push_delay()</i> just returns the
current delay.</p>

<h2>INSTALLING CGI::Push SCRIPTS
<a name="INSTALLING CGI::Push SCRIPTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Server push
scripts must be installed as no-parsed-header (
<small>NPH</small> ) scripts in order to work correctly on
many servers. On Unix systems, this is most often
accomplished by prefixing the script&rsquo;s name with
&quot;nph&minus;&quot;. Recognition of <small>NPH</small>
scripts happens automatically with WebSTAR and Microsoft
<small>IIS.</small> Users of other servers should see their
documentation for help.</p>

<p style="margin-left:11%; margin-top: 1em">Apache web
server from version 1.3b2 on does not need server push
scripts installed as <small>NPH</small> scripts: the
&minus;nph parameter to <i>do_push()</i> may be set to a
false value to disable the extra headers needed by an
<small>NPH</small> script.</p>

<h2>AUTHOR INFORMATION
<a name="AUTHOR INFORMATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
1995&minus;1998, Lincoln D. Stein. All rights reserved.</p>

<p style="margin-left:11%; margin-top: 1em">This library is
free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>

<p style="margin-left:11%; margin-top: 1em">Address bug
reports and comments to: lstein@cshl.org</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
intentionally left blank.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CGI::Carp,
<small>CGI</small></p>
<hr>
</body>
</html>
