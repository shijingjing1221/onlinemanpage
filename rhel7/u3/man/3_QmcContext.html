<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:15:20 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>QMC_CONTEXT</title>

</head>
<body>

<h1 align="center">QMC_CONTEXT</h1>

<a href="#NAME">NAME</a><br>
<a href="#C++ SYNOPSIS">C++ SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONSTRUCTORS">CONSTRUCTORS</a><br>
<a href="#DESCRIPTOR LOOKUP">DESCRIPTOR LOOKUP</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>QmcContext</b>
&minus; container for a PMAPI context and its metrics</p>

<h2>C++ SYNOPSIS
<a name="C++ SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;QmcContext.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>CC ...
&minus;lqmc &minus;lpcp</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
<b>QmcContext</b> object is a container for a single
<b>PMAPI</b>(3) context. The object maintains a list of all
the metric descriptors (<b>QmcDesc</b>), instance domains
(<b>QmcIndom</b>) and metrics (<b>QmcMetric</b>) using the
context to minimize the duplication of these objects.</p>

<h2>CONSTRUCTORS
<a name="CONSTRUCTORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
<b>QmcContext</b> object should be constructed through the
<b>QmcGroup::use</b> interface.</p>

<h2>DESCRIPTOR LOOKUP
<a name="DESCRIPTOR LOOKUP"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The metric and
instance domain descriptors are cached by the
<b>QmcContext</b> object to reduce duplicate
<b>QmcDesc</b>(3) and <b>QmcIndom</b>(3) objects and
<b>PMAPI</b>(3) calls required to create them. Also the
mapping from metrics names to <b>pmID</b>s is also
maintained to avoid <b>pmLookupName</b>(3) calls. <b><br>
int lookupDesc(const char *name, pmID&amp; id);</b></p>

<p style="margin-left:17%;">Search for the metric
<i>name</i> in the name list and set <b>id</b> to the known
<b>pmID</b>. If not found, use <b>pmLookupName</b>(3) to get
the mapping. If this call fails, the <b>PMAPI</b>(3) error
code will be returned.</p>

<p style="margin-left:11%;"><b>int lookupDesc(const char
*name, uint_t&amp; desc, uint_t&amp; indom);</b></p>

<p style="margin-left:17%;">Find the index <i>desc</i> and
<i>indom</i> to the <b>QmcDesc</b> object and the
<b>QmcIndom</b> object for the metric <i>name</i>. The
indexes can then be used with <b>QmcContext::desc</b> and
<b>QmcContext::indom</b> to obtain references to the real
objects. The methods will return a <b>PMAPI</b>(3) error
code if the metric descriptor or instance domain could not
be obtained.</p>

<p style="margin-left:11%;"><b>int lookupDesc(pmID pmid,
uint_t&amp; desc, uint_t&amp; indom);</b></p>

<p style="margin-left:17%;">Find the index <i>desc</i> and
<i>indom</i> to the <b>QmcDesc</b> object and the
<b>QmcIndom</b> object for the metric <i>pmid</i>. The
indexes can then be used with <b>QmcContext::desc</b> and
<b>QmcContext::indom</b> to obtain references to the real
objects. The methods will return a <b>PMAPI</b>(3) error
code if the metric descriptor or instance domain could not
be obtained.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PMAPI</b>(3),
<b>QMC</b>(3), <b>QmcDesc</b>(3), <b>QmcGroup</b>(3),
<b>QmcIndom</b>(3), <b>QmcMetric</b>(3), <b>pmflush</b>(3),
<b>pmLookupName</b>(3) and <b>pmprintf</b>(3).</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Error messages
are generated using <b>pmprintf</b>(3) but are not flushed.
It is the responsibility of the user to call
<b>pmflush</b>(3) to output any messages.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
diagnostics may be activated by adding <b>DBG_TRACE_PMC</b>
and <b>DBG_TRACE_OPTFETCH</b> to the global
<i>pmDebug</i>.</p>
<hr>
</body>
</html>
