<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:38:31 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>STRUCT SOCK</title>

</head>
<body>

<h1 align="center">STRUCT SOCK</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#MEMBERS">MEMBERS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">struct_sock
&minus; network layer representation of sockets</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">struct sock {
<br>
struct sock_common __sk_common;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_node</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_node</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_nulls_node</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_nulls_node</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_refcnt</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_refcnt</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_tx_queue_mapping</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="46%">


<p>__sk_common.skc_tx_queue_mapping</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_dontcopy_begin</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="46%">


<p>__sk_common.skc_dontcopy_begin</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_dontcopy_end</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_dontcopy_end</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_hash</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_hash</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_portpair</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_portpair</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_num</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_num</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_dport</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_dport</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_addrpair</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_addrpair</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_daddr</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_daddr</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_rcv_saddr</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_rcv_saddr</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_family</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_family</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_state</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_state</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_reuse</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_reuse</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_reuseport</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_reuseport</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_bound_dev_if</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_bound_dev_if</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_bind_node</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_bind_node</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_prot</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="46%">


<p>__sk_common.skc_prot</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_net</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_net</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_v6_daddr</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">


<p>__sk_common.skc_v6_daddr</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="-3%">


<p>#define sk_v6_rcv_saddr</p></td>
<td width="15%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%">


<p>__sk_common.skc_v6_rcv_saddr</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;">socket_lock_t sk_lock; <br>
struct sk_buff_head sk_receive_queue; <br>
struct sk_backlog; <br>
#define sk_rmem_alloc sk_backlog.rmem_alloc <br>
int sk_forward_alloc; <br>
#ifdef CONFIG_RPS <br>
__u32 sk_rxhash; <br>
#endif <br>
#ifdef CONFIG_NET_RX_BUSY_POLL <br>
unsigned int sk_napi_id; <br>
unsigned int sk_ll_usec; <br>
#endif <br>
atomic_t sk_drops; <br>
int sk_rcvbuf; <br>
struct sk_filter __rcu * sk_filter; <br>
struct socket_wq __rcu * sk_wq; <br>
#ifdef CONFIG_NET_DMA_RH_KABI <br>
#ifdef CONFIG_XFRM <br>
struct xfrm_policy * sk_policy[2]; <br>
#endif <br>
unsigned long sk_flags; <br>
struct dst_entry * sk_rx_dst; <br>
struct dst_entry __rcu * sk_dst_cache; <br>
RH_KABI_DEPRECATE(spinlock_t# sk_dst_lock)atomic_t
sk_wmem_alloc; <br>
atomic_t sk_omem_alloc; <br>
int sk_sndbuf; <br>
struct sk_buff_head sk_write_queue; <br>
unsigned int sk_shutdown:2; <br>
#ifdef __GENKSYMS__ <br>
#else <br>
#endif <br>
#define SK_PROTOCOL_MAX U8_MAX <br>
int sk_wmem_queued; <br>
gfp_t sk_allocation; <br>
u32 sk_pacing_rate; <br>
netdev_features_t sk_route_caps; <br>
netdev_features_t sk_route_nocaps; <br>
int sk_gso_type; <br>
unsigned int sk_gso_max_size; <br>
u16 sk_gso_max_segs; <br>
int sk_rcvlowat; <br>
unsigned long sk_lingertime; <br>
struct sk_buff_head sk_error_queue; <br>
struct proto * sk_prot_creator; <br>
rwlock_t sk_callback_lock; <br>
int sk_err; <br>
int sk_err_soft; <br>
unsigned short sk_ack_backlog; <br>
unsigned short sk_max_ack_backlog; <br>
__u32 sk_priority; <br>
#if IS_ENABLED(CONFIG_NETPRIO_CGROUP) <br>
__u32 sk_cgrp_prioidx; <br>
#endif <br>
struct pid * sk_peer_pid; <br>
const struct cred * sk_peer_cred; <br>
long sk_rcvtimeo; <br>
long sk_sndtimeo; <br>
void * sk_protinfo; <br>
struct timer_list sk_timer; <br>
ktime_t sk_stamp; <br>
struct socket * sk_socket; <br>
void * sk_user_data; <br>
struct page_frag sk_frag; <br>
struct sk_buff * sk_send_head; <br>
__s32 sk_peek_off; <br>
int sk_write_pending; <br>
#ifdef CONFIG_SECURITY <br>
void * sk_security; <br>
#endif <br>
__u32 sk_mark; <br>
u32 sk_classid; <br>
struct cg_proto * sk_cgrp; <br>
void (* sk_state_change) (struct sock *sk); <br>
void (* sk_data_ready) (struct sock *sk, int bytes); <br>
void (* sk_write_space) (struct sock *sk); <br>
void (* sk_error_report) (struct sock *sk); <br>
int (* sk_backlog_rcv) (struct sock *sk,struct sk_buff
*skb); <br>
void (* sk_destruct) (struct sock *sk); <br>
};</p>

<h2>MEMBERS
<a name="MEMBERS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">__sk_common</p>

<p style="margin-left:17%;">shared layout with
inet_timewait_sock</p>

<p style="margin-left:11%; margin-top: 1em">sk_lock</p>

<p style="margin-left:17%;">synchronizer</p>


<p style="margin-left:11%; margin-top: 1em">sk_receive_queue</p>

<p style="margin-left:17%;">incoming packets</p>

<p style="margin-left:11%; margin-top: 1em">sk_backlog</p>

<p style="margin-left:17%;">always used with the
per&minus;socket spinlock held</p>


<p style="margin-left:11%; margin-top: 1em">sk_forward_alloc</p>

<p style="margin-left:17%;">space allocated forward</p>

<p style="margin-left:11%; margin-top: 1em">sk_rxhash</p>

<p style="margin-left:17%;">flow hash received from netif
layer</p>

<p style="margin-left:11%; margin-top: 1em">sk_napi_id</p>

<p style="margin-left:17%;">id of the last napi context to
receive data for sk</p>

<p style="margin-left:11%; margin-top: 1em">sk_ll_usec</p>

<p style="margin-left:17%;">usecs to busypoll when there is
no data</p>

<p style="margin-left:11%; margin-top: 1em">sk_drops</p>

<p style="margin-left:17%;">raw/udp drops counter</p>

<p style="margin-left:11%; margin-top: 1em">sk_rcvbuf</p>

<p style="margin-left:17%;">size of receive buffer in
bytes</p>

<p style="margin-left:11%; margin-top: 1em">sk_filter</p>

<p style="margin-left:17%;">socket filtering
instructions</p>

<p style="margin-left:11%; margin-top: 1em">sk_wq</p>

<p style="margin-left:17%;">sock wait queue and async
head</p>


<p style="margin-left:11%; margin-top: 1em">sk_policy[2]</p>

<p style="margin-left:17%;">flow policy</p>

<p style="margin-left:11%; margin-top: 1em">sk_flags</p>

<p style="margin-left:17%;"><b>SO_LINGER</b> (l_onoff),
<b>SO_BROADCAST</b>, <b>SO_KEEPALIVE</b>,
<b>SO_OOBINLINE</b> settings, <b>SO_TIMESTAMPING</b>
settings</p>

<p style="margin-left:11%; margin-top: 1em">sk_rx_dst</p>

<p style="margin-left:17%;">receive input route used by
early demux</p>


<p style="margin-left:11%; margin-top: 1em">sk_dst_cache</p>

<p style="margin-left:17%;">destination cache</p>


<p style="margin-left:11%; margin-top: 1em">sk_wmem_alloc</p>

<p style="margin-left:17%;">transmit queue bytes
committed</p>


<p style="margin-left:11%; margin-top: 1em">sk_omem_alloc</p>

<p style="margin-left:17%;">&quot;o&ldquo; is
&rdquo;option&ldquo; or &rdquo;other&quot;</p>

<p style="margin-left:11%; margin-top: 1em">sk_sndbuf</p>

<p style="margin-left:17%;">size of send buffer in
bytes</p>


<p style="margin-left:11%; margin-top: 1em">sk_write_queue</p>

<p style="margin-left:17%;">Packet sending queue</p>


<p style="margin-left:11%; margin-top: 1em">sk_shutdown</p>

<p style="margin-left:17%;">mask of <b>SEND_SHUTDOWN</b>
and/or <b>RCV_SHUTDOWN</b></p>


<p style="margin-left:11%; margin-top: 1em">sk_wmem_queued</p>

<p style="margin-left:17%;">persistent queue size</p>


<p style="margin-left:11%; margin-top: 1em">sk_allocation</p>

<p style="margin-left:17%;">allocation mode</p>


<p style="margin-left:11%; margin-top: 1em">sk_pacing_rate</p>

<p style="margin-left:17%;">Pacing rate (if supported by
transport/packet scheduler)</p>


<p style="margin-left:11%; margin-top: 1em">sk_route_caps</p>

<p style="margin-left:17%;">route capabilities (e.g.
<b>NETIF_F_TSO</b>)</p>


<p style="margin-left:11%; margin-top: 1em">sk_route_nocaps</p>

<p style="margin-left:17%;">forbidden route capabilities
(e.g NETIF_F_GSO_MASK)</p>


<p style="margin-left:11%; margin-top: 1em">sk_gso_type</p>

<p style="margin-left:17%;">GSO type (e.g.
<b>SKB_GSO_TCPV4</b>)</p>


<p style="margin-left:11%; margin-top: 1em">sk_gso_max_size</p>

<p style="margin-left:17%;">Maximum GSO segment size to
build</p>


<p style="margin-left:11%; margin-top: 1em">sk_gso_max_segs</p>

<p style="margin-left:17%;">Maximum number of GSO
segments</p>


<p style="margin-left:11%; margin-top: 1em">sk_rcvlowat</p>

<p style="margin-left:17%;"><b>SO_RCVLOWAT</b> setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_lingertime</p>

<p style="margin-left:17%;"><b>SO_LINGER</b> l_linger
setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_error_queue</p>

<p style="margin-left:17%;">rarely used</p>


<p style="margin-left:11%; margin-top: 1em">sk_prot_creator</p>

<p style="margin-left:17%;">sk_prot of original sock
creator (see ipv6_setsockopt, IPV6_ADDRFORM for
instance)</p>


<p style="margin-left:11%; margin-top: 1em">sk_callback_lock</p>

<p style="margin-left:17%;">used with the callbacks in the
end of this struct</p>

<p style="margin-left:11%; margin-top: 1em">sk_err</p>

<p style="margin-left:17%;">last error</p>


<p style="margin-left:11%; margin-top: 1em">sk_err_soft</p>

<p style="margin-left:17%;">errors that don't cause failure
but are the cause of a persistent failure not just 'timed
out'</p>


<p style="margin-left:11%; margin-top: 1em">sk_ack_backlog</p>

<p style="margin-left:17%;">current listen backlog</p>


<p style="margin-left:11%; margin-top: 1em">sk_max_ack_backlog</p>

<p style="margin-left:17%;">listen backlog set in
<b>listen</b></p>


<p style="margin-left:11%; margin-top: 1em">sk_priority</p>

<p style="margin-left:17%;"><b>SO_PRIORITY</b> setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_cgrp_prioidx</p>

<p style="margin-left:17%;">socket group's priority map
index</p>


<p style="margin-left:11%; margin-top: 1em">sk_peer_pid</p>

<p style="margin-left:17%;">struct pid for this socket's
peer</p>


<p style="margin-left:11%; margin-top: 1em">sk_peer_cred</p>

<p style="margin-left:17%;"><b>SO_PEERCRED</b> setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_rcvtimeo</p>

<p style="margin-left:17%;"><b>SO_RCVTIMEO</b> setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_sndtimeo</p>

<p style="margin-left:17%;"><b>SO_SNDTIMEO</b> setting</p>


<p style="margin-left:11%; margin-top: 1em">sk_protinfo</p>

<p style="margin-left:17%;">private area, net family
specific, when not using slab</p>

<p style="margin-left:11%; margin-top: 1em">sk_timer</p>

<p style="margin-left:17%;">sock cleanup timer</p>

<p style="margin-left:11%; margin-top: 1em">sk_stamp</p>

<p style="margin-left:17%;">time stamp of last packet
received</p>

<p style="margin-left:11%; margin-top: 1em">sk_socket</p>

<p style="margin-left:17%;">Identd and reporting IO
signals</p>


<p style="margin-left:11%; margin-top: 1em">sk_user_data</p>

<p style="margin-left:17%;">RPC layer private data</p>

<p style="margin-left:11%; margin-top: 1em">sk_frag</p>

<p style="margin-left:17%;">cached page frag</p>


<p style="margin-left:11%; margin-top: 1em">sk_send_head</p>

<p style="margin-left:17%;">front of stuff to transmit</p>


<p style="margin-left:11%; margin-top: 1em">sk_peek_off</p>

<p style="margin-left:17%;">current peek_offset value</p>


<p style="margin-left:11%; margin-top: 1em">sk_write_pending</p>

<p style="margin-left:17%;">a write to stream socket waits
to start</p>


<p style="margin-left:11%; margin-top: 1em">sk_security</p>

<p style="margin-left:17%;">used by security modules</p>

<p style="margin-left:11%; margin-top: 1em">sk_mark</p>

<p style="margin-left:17%;">generic packet mark</p>

<p style="margin-left:11%; margin-top: 1em">sk_classid</p>

<p style="margin-left:17%;">this socket's cgroup
classid</p>

<p style="margin-left:11%; margin-top: 1em">sk_cgrp</p>

<p style="margin-left:17%;">this socket's
cgroup&minus;specific proto data</p>


<p style="margin-left:11%; margin-top: 1em">sk_state_change</p>

<p style="margin-left:17%;">callback to indicate change in
the state of the sock</p>


<p style="margin-left:11%; margin-top: 1em">sk_data_ready</p>

<p style="margin-left:17%;">callback to indicate there is
data to be processed</p>


<p style="margin-left:11%; margin-top: 1em">sk_write_space</p>

<p style="margin-left:17%;">callback to indicate there is
bf sending space available</p>


<p style="margin-left:11%; margin-top: 1em">sk_error_report</p>

<p style="margin-left:17%;">callback to indicate errors
(e.g. <b>MSG_ERRQUEUE</b>)</p>


<p style="margin-left:11%; margin-top: 1em">sk_backlog_rcv</p>

<p style="margin-left:17%;">callback to process the
backlog</p>


<p style="margin-left:11%; margin-top: 1em">sk_destruct</p>

<p style="margin-left:17%;">called at sock freeing time,
i.e. when all refcnt == 0</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<hr>
</body>
</html>
