<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:41:45 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IBMSSH</title>

</head>
<body>

<h1 align="center">IBMSSH</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#IBMgtSim Constants">IBMgtSim Constants</a><br>
<a href="#Message Manager Objects">Message Manager Objects</a><br>
<a href="#Random Manager Functions">Random Manager Functions</a><br>
<a href="#IBMgtSim Simulator Objects">IBMgtSim Simulator Objects</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ibmssh</b>
IB MANAGEMENT SIMULATOR &minus; Extentended TCL shell</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ibmssh</b>
is a <small>TCL</small> shell extended with interface for
the <small>IB</small> Management Simulator facilities.
Normally you will not run this shell directly &minus; but
instead it will be invoked by the <b>IBMgtSim</b> utility.
However, in order to write simulation flows that interacts
closely with the simulated model, a simulation flow should
be provided. This flow is loaded by IBMgtSim and excersize
the <small>API</small> provided by this shell.</p>

<p style="margin-left:11%; margin-top: 1em">The following
sub sections provide detailed definition for those objects
and <small>API</small> .</p>

<h2>IBMgtSim Constants
<a name="IBMgtSim Constants"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These constants
are provided by IBMgtSim</p>

<p style="margin-left:11%; margin-top: 1em"><b>Massage
Manager Log Verbosity Flags</b> <br>
[ Constant : int ] $MsgShowFatal = 0x01 <br>
[ Constant : int ] $MsgShowError = 0x02 <br>
[ Constant : int ] $MsgShowWarning = 0x04 <br>
[ Constant : int ] $MsgShowInfo = 0x08 <br>
[ Constant : int ] $MsgShowVerbose = 0x10 <br>
[ Constant : int ] $MsgShowContext = 0x20 <br>
[ Constant : int ] $MsgShowSource = 0x40 <br>
[ Constant : int ] $MsgShowTime = 0x80 <br>
[ Constant : int ] $MsgShowModule = 0x100 <br>
[ Constant : int ] $MsgShowMads = 0x200 <br>
[ Constant : int ] $MsgShowFrames = 0x400 <br>
[ Constant : int ] $MsgShowAll = 0xffff <br>
[ Constant : int ] $MsgDefault = 0x62f</p>

<h2>Message Manager Objects
<a name="Message Manager Objects"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>class
msgManager</b></p>

<p style="margin-left:17%; margin-top: 1em">This is the
Message Manager class</p>

<p style="margin-left:11%;">[ Member : returns int ]
getVerbLevel ?module? <br>
[ Member : returns int ] clrVerbLevel ?module? <br>
[ Member : returns void ] setVerbLevel vl ?module? <br>
[ Member : returns int ] outstandingMsgCount ?vl? <br>
[ Member : returns string ] outstandingMsgs ?vl? <br>
[ Member : returns string ] getNextMessage <br>
[ Member : returns void ] nullOutstandingMsgs <br>
[ Member : returns int ] setLogFile fileName</p>

<h2>Random Manager Functions
<a name="Random Manager Functions"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">[ returns float
] rmRand</p>

<p style="margin-left:22%;">obtain a random number in the
range 0.0 &minus; 1.0</p>

<p style="margin-left:11%;">[ returns int ] rmSeed seed</p>

<p style="margin-left:22%;">initialize the seed for the
random manager</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_node_info_t</b> <br>
[ Member data: returns uint8_t * ] &minus;base_version <br>
[ Member data: returns uint8_t * ] &minus;class_version <br>
[ Member data: returns uint8_t * ] &minus;node_type <br>
[ Member data: returns uint8_t * ] &minus;num_ports <br>
[ Member data: returns ib_net64_t * ] &minus;sys_guid <br>
[ Member data: returns ib_net64_t * ] &minus;node_guid <br>
[ Member data: returns ib_net64_t * ] &minus;port_guid <br>
[ Member data: returns ib_net16_t * ] &minus;partition_cap
<br>
[ Member data: returns ib_net16_t * ] &minus;device_id <br>
[ Member data: returns ib_net32_t * ] &minus;revision <br>
[ Member data: returns ib_net32_t * ]
&minus;port_num_vendor_id</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_switch_info_t</b> <br>
[ Member data: returns ib_net16_t * ] &minus;lin_cap <br>
[ Member data: returns ib_net16_t * ] &minus;rand_cap <br>
[ Member data: returns ib_net16_t * ] &minus;mcast_cap <br>
[ Member data: returns ib_net16_t * ] &minus;lin_top <br>
[ Member data: returns uint8_t * ] &minus;def_port <br>
[ Member data: returns uint8_t * ] &minus;def_mcast_pri_port
<br>
[ Member data: returns uint8_t * ] &minus;def_mcast_not_port
<br>
[ Member data: returns uint8_t * ] &minus;life_state <br>
[ Member data: returns ib_net16_t * ] &minus;lids_per_port
<br>
[ Member data: returns ib_net16_t * ] &minus;enforce_cap
<br>
[ Member data: returns uint8_t * ] &minus;flags</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_port_info_t</b> <br>
[ Member data: returns ib_net64_t * ] &minus;m_key <br>
[ Member data: returns ib_net64_t * ] &minus;subnet_prefix
<br>
[ Member data: returns ib_net16_t * ] &minus;base_lid <br>
[ Member data: returns ib_net16_t * ]
&minus;master_sm_base_lid <br>
[ Member data: returns ib_net32_t * ] &minus;capability_mask
<br>
[ Member data: returns ib_net16_t * ] &minus;diag_code <br>
[ Member data: returns ib_net16_t * ]
&minus;m_key_lease_period <br>
[ Member data: returns uint8_t * ] &minus;local_port_num
<br>
[ Member data: returns uint8_t * ] &minus;link_width_enabled
<br>
[ Member data: returns uint8_t * ]
&minus;link_width_supported <br>
[ Member data: returns uint8_t * ] &minus;link_width_active
<br>
[ Member data: returns uint8_t * ] &minus;state_info1 <br>
[ Member data: returns uint8_t * ] &minus;state_info2</p>

<p style="margin-left:17%;">LinkSpeedSupported and
PortState</p>

<p style="margin-left:11%;">[ Member data: returns uint8_t
* ] &minus;mkey_lmc</p>

<p style="margin-left:17%;">PortPhysState and
LinkDownDefaultState</p>

<p style="margin-left:11%;">[ Member data: returns uint8_t
* ] &minus;link_speed <br>
[ Member data: returns uint8_t * ] &minus;mtu_smsl</p>

<p style="margin-left:17%;">LinkSpeedEnabled and
LinkSpeedActive</p>

<p style="margin-left:11%;">[ Member data: returns uint8_t
* ] &minus;vl_cap <br>
[ Member data: returns uint8_t * ] &minus;vl_high_limit</p>

<p style="margin-left:17%;">VlCap and InitType</p>

<p style="margin-left:11%;">[ Member data: returns uint8_t
* ] &minus;vl_arb_high_cap <br>
[ Member data: returns uint8_t * ] &minus;vl_arb_low_cap
<br>
[ Member data: returns uint8_t * ] &minus;mtu_cap <br>
[ Member data: returns uint8_t * ] &minus;vl_stall_life <br>
[ Member data: returns uint8_t * ] &minus;vl_enforce <br>
[ Member data: returns ib_net16_t * ]
&minus;m_key_violations <br>
[ Member data: returns ib_net16_t * ]
&minus;p_key_violations <br>
[ Member data: returns ib_net16_t * ]
&minus;q_key_violations <br>
[ Member data: returns uint8_t * ] &minus;guid_cap <br>
[ Member data: returns uint8_t * ] &minus;subnet_timeout
<br>
[ Member data: returns uint8_t * ] &minus;resp_time_value
<br>
[ Member data: returns uint8_t * ]
&minus;error_threshold</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_node_desc_t</b> <br>
[ Member data: returns uint8_array_t * ]
&minus;description</p>

<p style="margin-left:17%;">Node String is an array of
<small>UTF&minus;8</small> character that describes the node
in text format Note that this string is <small>NOT NULL
TERMINATED</small> !</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_lft_record_t</b> <br>
[ Member data: returns ib_net16_t * ] &minus;lid <br>
[ Member data: returns ib_net16_t * ] &minus;block_num <br>
[ Member data: returns uint32_t * ] &minus;resv0 <br>
[ Member data: returns uint8_array_t * ] &minus;lft</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
ib_pm_counters_t</b> <br>
[ Member data: returns ib_mad_t * ] &minus;mad_header <br>
[ Member data: returns uint32_array_t * ] &minus;reserved0
<br>
[ Member data: returns uint8_t * ] &minus;reserved1 <br>
[ Member data: returns uint8_t * ] &minus;port_select <br>
[ Member data: returns ib_net16_t * ] &minus;counter_select
<br>
[ Member data: returns ib_net16_t * ]
&minus;symbol_error_counter <br>
[ Member data: returns uint8_t * ]
&minus;link_error_recovery_counter <br>
[ Member data: returns uint8_t * ] &minus;link_down_counter
<br>
[ Member data: returns ib_net16_t * ] &minus;port_rcv_errors
<br>
[ Member data: returns ib_net16_t * ]
&minus;port_rcv_remote_physical_errors <br>
[ Member data: returns ib_net16_t * ]
&minus;port_rcv_switch_relay_errors <br>
[ Member data: returns ib_net16_t * ]
&minus;port_xmit_discard <br>
[ Member data: returns uint8_t * ]
&minus;port_xmit_constraint_errors <br>
[ Member data: returns uint8_t * ]
&minus;port_rcv_constraint_errors <br>
[ Member data: returns uint8_t * ] &minus;reserved2 <br>
[ Member data: returns uint8_t * ]
&minus;lli_errors_exc_buf_errors <br>
[ Member data: returns ib_net16_t * ] &minus;reserved3 <br>
[ Member data: returns ib_net16_t * ] &minus;vl15_dropped
<br>
[ Member data: returns ib_net32_t * ] &minus;port_xmit_data
<br>
[ Member data: returns ib_net32_t * ] &minus;port_rcv_data
<br>
[ Member data: returns ib_net32_t * ] &minus;port_xmit_pkts
<br>
[ Member data: returns ib_net32_t * ] &minus;port_rcv_pkts
<br>
[ Member data: returns uint32_array_t * ]
&minus;reserved5</p>

<h2>IBMgtSim Simulator Objects
<a name="IBMgtSim Simulator Objects"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>class
IBMgtSim</b> <br>
[ Member : returns IBFabric * ] getFabric <br>
[ Member : returns IBMSServer * ] getServer <br>
[ Member : returns IBMSDispatcher * ] getDispatcher <br>
[ Member : returns int ] init topoFileName serverPortNum
numWorkers</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
IBMSNode</b> <br>
[ Member : returns IBNode * ] getIBNode</p>

<p style="margin-left:17%;">get the IBNode of the
IBMSNode</p>

<p style="margin-left:11%;">[ Member : returns int ]
getLinkStatus outPortNum</p>

<p style="margin-left:17%;">get the link status of the
given port</p>

<p style="margin-left:11%;">[ Member : returns int ]
setPhyPortErrProfile portNum errProfileIn</p>

<p style="margin-left:17%;">set a particular port err
profile</p>

<p style="margin-left:11%;">[ Member : returns int ]
getPhyPortErrProfile portNum</p>

<p style="margin-left:17%;">get a particular port err
profile</p>

<p style="margin-left:11%;">[ Member : returns int ]
setPhyPortPMCounter portNum counterSelect <br>
countersVal</p>

<p style="margin-left:17%;">set a specific port counter</p>

<p style="margin-left:11%;">[ Member : returns
ib_pm_counters_t * ] getPhyPortPMCounter portNum <br>
counterSelect get a specific port counter <br>
[ Member : returns ib_port_info_t * ] getPortInfo
portNum</p>

<p style="margin-left:17%;">get a specific port info</p>

<p style="margin-left:11%;">[ Member : returns int ]
setLinkStatus portNum newState</p>

<p style="margin-left:17%;">set the Link status including
sending trap128</p>

<p style="margin-left:11%;">[ Member : returns
ib_node_info_t * ] getNodeInfo</p>

<p style="margin-left:17%;">get the node info</p>

<p style="margin-left:11%;">[ Member : returns
ib_switch_info_t * ] getSwitchInfo</p>

<p style="margin-left:17%;">get the switch info</p>

<p style="margin-left:11%;">[ Member : returns
ib_pkey_table_t * ] getPKeyTblBlock portNum blockNum</p>

<p style="margin-left:17%;">get pkey table block</p>

<p style="margin-left:11%;">[ Member : returns int ]
setPKeyTblBlock portNum blockNum tbl</p>

<p style="margin-left:17%;">set pkey table block</p>

<p style="margin-left:11%;">[ Member : returns int ]
setCrSpace startAddr length data</p>

<p style="margin-left:17%;">set <small>CR</small> Space
Value</p>

<p style="margin-left:11%;">[ Member : returns int ]
getCrSpace startAddr length data</p>

<p style="margin-left:17%;">get <small>CR</small> Space
Value</p>

<p style="margin-left:11%;">[ Member : returns int ]
getMFTBlock blockIdx portIdx</p>

<p style="margin-left:17%;">get <small>MFT</small>
block</p>

<p style="margin-left:11%;">[ Member : returns int ]
setMFTBlock blockIdx portIdx inMftBlock</p>

<p style="margin-left:17%;">set <small>MFT</small>
block</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madMcMemberRec</b> <br>
[ Constructor: returns madMcMemberRec * ] madMcMemberRec
name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns ib_gid_t * ] &minus;mgid <br>
[ Member data: returns ib_gid_t * ] &minus;port_gid <br>
[ Member data: returns ib_net32_t * ] &minus;qkey <br>
[ Member data: returns ib_net16_t * ] &minus;mlid <br>
[ Member data: returns uint8_t * ] &minus;mtu <br>
[ Member data: returns uint8_t * ] &minus;tclass <br>
[ Member data: returns ib_net16_t * ] &minus;pkey <br>
[ Member data: returns uint8_t * ] &minus;rate <br>
[ Member data: returns uint8_t * ] &minus;pkt_life <br>
[ Member data: returns ib_net32_t * ] &minus;sl_flow_hop
<br>
[ Member data: returns uint8_t * ] &minus;scope_state <br>
[ Member : returns int ] send_set pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_del pFromNode fromPort destLid
comp_mask</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madPathRec</b> <br>
[ Constructor: returns madPathRec * ] madPathRec name <br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_array_t * ] &minus;resv0 <br>
[ Member data: returns ib_gid_t * ] &minus;dgid <br>
[ Member data: returns ib_gid_t * ] &minus;sgid <br>
[ Member data: returns ib_net16_t * ] &minus;dlid <br>
[ Member data: returns ib_net16_t * ] &minus;slid <br>
[ Member data: returns ib_net32_t * ] &minus;hop_flow_raw
<br>
[ Member data: returns uint8_t * ] &minus;tclass <br>
[ Member data: returns uint8_t * ] &minus;num_path <br>
[ Member data: returns ib_net16_t * ] &minus;pkey <br>
[ Member data: returns ib_net16_t * ] &minus;sl <br>
[ Member data: returns uint8_t * ] &minus;mtu <br>
[ Member data: returns uint8_t * ] &minus;rate <br>
[ Member data: returns uint8_t * ] &minus;pkt_life <br>
[ Member data: returns uint8_t * ] &minus;preference <br>
[ Member data: returns uint8_array_t * ] &minus;resv2 <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madServiceRec</b> <br>
[ Constructor: returns madServiceRec * ] madServiceRec name
<br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns ib_net64_t * ] &minus;service_id <br>
[ Member data: returns ib_gid_t * ] &minus;service_gid <br>
[ Member data: returns ib_net16_t * ] &minus;service_pkey
<br>
[ Member data: returns ib_net16_t * ] &minus;resv <br>
[ Member data: returns ib_net32_t * ] &minus;service_lease
<br>
[ Member data: returns uint8_array_t * ] &minus;service_key
<br>
[ Member data: returns uint8_array_t * ] &minus;service_name
<br>
[ Member data: returns uint8_array_t * ]
&minus;service_data8 <br>
[ Member data: returns uint16_array_t * ]
&minus;service_data16 <br>
[ Member data: returns uint32_array_t * ]
&minus;service_data32 <br>
[ Member data: returns uint64_array_t * ]
&minus;service_data64 <br>
[ Member : returns int ] send_set pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_get pFromNode fromPort destLid
comp_mask <br>
[ Member : returns int ] send_del pFromNode fromPort destLid
comp_mask</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madNotice128</b> <br>
[ Constructor: returns madNotice128 * ] madNotice128 name
<br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] &minus;generic_type <br>
[ Member data: returns uint8_t * ] &minus;prod_type_msb <br>
[ Member data: returns ib_net16_t * ] &minus;prod_type_lsb
<br>
[ Member data: returns ib_net16_t * ] &minus;trap_num <br>
[ Member data: returns ib_net16_t * ] &minus;issuer_lid <br>
[ Member data: returns ib_net16_t * ] &minus;toggle_count
<br>
[ Member data: returns ib_net16_t * ] &minus;sw_lid</p>

<p style="margin-left:17%;">the sw lid of which link state
changed &minus; for 128 only</p>

<p style="margin-left:11%;">[ Member data: returns ib_gid_t
* ] &minus;issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madNotice129</b> <br>
[ Constructor: returns madNotice129 * ] madNotice129 name
<br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] &minus;generic_type <br>
[ Member data: returns uint8_t * ] &minus;prod_type_msb <br>
[ Member data: returns ib_net16_t * ] &minus;prod_type_lsb
<br>
[ Member data: returns ib_net16_t * ] &minus;trap_num <br>
[ Member data: returns ib_net16_t * ] &minus;issuer_lid <br>
[ Member data: returns ib_net16_t * ] &minus;toggle_count
<br>
[ Member data: returns ib_net16_t * ] &minus;pad <br>
[ Member data: returns ib_net16_t * ] &minus;lid</p>

<p style="margin-left:17%;">lid and port number of the
violation</p>

<p style="margin-left:11%;">[ Member data: returns uint8_t
* ] &minus;port_num <br>
[ Member data: returns ib_gid_t * ] &minus;issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
madNotice144</b> <br>
[ Constructor: returns madNotice144 * ] madNotice144 name
<br>
[ Destructor: returns void ] rename obj {} <br>
[ Member data: returns uint8_t * ] &minus;generic_type <br>
[ Member data: returns uint8_t * ] &minus;prod_type_msb <br>
[ Member data: returns ib_net16_t * ] &minus;prod_type_lsb
<br>
[ Member data: returns ib_net16_t * ] &minus;trap_num <br>
[ Member data: returns ib_net16_t * ] &minus;issuer_lid <br>
[ Member data: returns ib_net16_t * ] &minus;toggle_count
<br>
[ Member data: returns ib_net16_t * ] &minus;pad1 <br>
[ Member data: returns ib_net16_t * ] &minus;lid</p>

<p style="margin-left:17%;">lid where capability mask
changed</p>

<p style="margin-left:11%;">[ Member data: returns
ib_net16_t * ] &minus;pad2 <br>
[ Member data: returns ib_net32_t * ]
&minus;new_cap_mask</p>

<p style="margin-left:17%;">new capability mask</p>

<p style="margin-left:11%;">[ Member data: returns ib_gid_t
* ] &minus;issuer_gid <br>
[ Member : returns int ] send_trap pFromNode fromPort
destLid</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Eitan Zahavi,
Mellanox Technologies <small>LTD</small> ,
eitan@mellanox.co.il</p>
<hr>
</body>
</html>
