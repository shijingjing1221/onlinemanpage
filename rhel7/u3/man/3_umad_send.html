<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:48:21 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>UMAD_SEND</title>

</head>
<body>

<h1 align="center">UMAD_SEND</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">umad_send
&minus; send umad</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;infiniband/umad.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
umad_send(int</b> <i>portid</i><b>, int</b>
<i>agentid</i><b>, void</b> <i>*umad</i><b>, int</b>
<i>length</i><b>, int</b> <i>timeout_ms</i><b>, int</b>
<i>retries</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>umad_send()</b>
sends <i>length</i> bytes from the specified <i>umad</i>
buffer from the port specified by <i>portid</i>, and using
the agent specified by <i>agentid</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The buffer can
contain a RMPP transmission which is larger than a single
MAD packet when the agentid specifies a class which utilizes
RMPP and the header flags indicate RMPP is active. NOTE
currently only RMPPFlags.Active is meaningful in the header
in user space. All other RMPP fields are ignored. The data
section of the buffer will be sent in multiple RMPP MAD
packets with headers built for the user.</p>


<p style="margin-left:11%; margin-top: 1em"><i>timeout_ms</i>
controls the solicited MADs behavior as follows: zero value
means not solicited. Positive value makes kernel indicate
timeout in milliseconds. If reply is not received within the
specified value, the original buffer is returned in the read
channel with the status field set (to non zero). Negative
<i>timeout_ms</i> makes kernel wait forever for the reply.
<i>retries</i> indicates the number of times the MAD will be
retried before giving up.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>umad_send()</b>
returns 0 on success; on error, errno is set and a negative
value is returned as follows: <br>
-EINVAL invalid port handle or agentid <br>
-EIO send operation failed</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Hal Rosenstock
&lt;halr@voltaire.com&gt;</p>
<hr>
</body>
</html>
