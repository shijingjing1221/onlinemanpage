<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:10:31 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMLOGCHECK</title>

</head>
<body>

<h1 align="center">PMLOGCHECK</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#Pass 0">Pass 0</a><br>
<a href="#Pass 1">Pass 1</a><br>
<a href="#Pass 2">Pass 2</a><br>
<a href="#Pass 3">Pass 3</a><br>
<a href="#FILES">FILES</a><br>
<a href="#PCP ENVIRONMENT">PCP ENVIRONMENT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmlogcheck</b>
&minus; checks for invalid data in a PCP archive</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmlogcheck</b>
[<b>&minus;lz</b>] [<b>&minus;n</b> <i>pmnsfile</i>]
[<b>&minus;S</b> <i>start</i>] [<b>&minus;T</b>
<i>finish</i>] [<b>&minus;Z</b> <i>timezone</i>]
<i>archive</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b>pmlogcheck</b></i>
prints information about the nature of any invalid data
which it detects in the files of a PCP archive.</p>

<p style="margin-left:11%; margin-top: 1em">The archive has
the base name <i>archive</i> and must have been previously
created using <b>pmlogger</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Normally
<b>pmlogcheck</b> operates on the default Performance
Metrics Name Space (<b>pmns</b>(5)), however if the
<b>&minus;n</b> option is specified an alternative namespace
is loaded from the file <i>pmnsfile</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The command
line options <b>&minus;S</b> and <b>&minus;T</b> can be used
to specify a time window over which metrics should be
checked in Pass 3 (see below). These options are common to
many Performance Co-Pilot tools and are fully described in
<b>PCPIntro</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;l</b> option prints the archive label, showing the
log format version, the time and date for the start and
(current) end of the archive, and the host from which the
performance metrics values were collected.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
<b>pmlogcheck</b> reports the time of day according to the
local timezone on the system where <b>pmlogcheck</b> is run.
The <b>&minus;Z</b> option changes the timezone to
<i>timezone</i> in the format of the environment variable
<b>TZ</b> as described in <b>environ</b>(7). The
<b>&minus;z</b> option changes the timezone to the local
timezone at the host that is the source of the performance
metrics, as specified in the label record of the archive
log.</p>

<p style="margin-left:11%; margin-top: 1em">The checking
proceeds in a number of passes, each designed to validate
progressively more complex semantic relationships between
the information in a PCP archive.</p>

<h2>Pass 0
<a name="Pass 0"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each physical
file of the PCP archive is processed to ensure the label
records are valid and consistent, and that each file
contains an integral number of physical records with correct
header and trailer fields.</p>

<p style="margin-left:11%; margin-top: 1em">Any errors at
this stage are usually fatal. The PCP archive is probably
damaged beyond repair, and no more passes of
<b>pmlogcheck</b> are attempted.</p>

<h2>Pass 1
<a name="Pass 1"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Validates the
integrity of the temporal index, usually
<i>archive</i><b>.index</b>.</p>

<p style="margin-left:11%; margin-top: 1em">As the temporal
index is (strictly speaking) optional, errors at this stage
are handled by marking the index as bad and ignoring it for
the remainder of the <b>pmlogcheck</b> passes.</p>

<p style="margin-left:11%; margin-top: 1em">Permanent
repair can be achieved by removing the temporal index file
and then making a copy of the PCP archive using
<b>pmlogrewrite</b>(1) or <b>pmlogextract</b>(1). This will
create a new temporal index for the copied archive as a
side-effect.</p>

<h2>Pass 2
<a name="Pass 2"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Validates the
integrity of the metadata file, usually
<i>archive</i><b>.meta</b>.</p>

<h2>Pass 3
<a name="Pass 3"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Validates the
integrity of each of the log volumes of the PCP archive,
usually <i>archive</i><b>.0</b>, <i>archive</i><b>.1</b>,
etc.</p>

<p style="margin-left:11%; margin-top: 1em">There is some
basic integrity checks to ensure the encoding of values for
each metric remains consistent and the values are well
formed across all the observations in the archive.</p>

<p style="margin-left:11%; margin-top: 1em">Also the
timestamps for the observations are expected to be
monotonically increasing as the archive is tranversed.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
attention is given to counter metrics (<i>type</i> from
<b>pmLookupDesc</b>(3) is <b>PM_SEM_COUNTER</b>) which are
expected to have monotonically increasing values. If the
values are not monotonic increasing this may suggest a
counter wrap has happened or there has been some
interruption or reset to the underlying source of the
performance data that is no captured in the archive.</p>

<p style="margin-left:11%; margin-top: 1em">For each
counter metric which has been detected as having wrapped at
some point in the archive, <b>pmlogcheck</b> produces output
describing the metric name (with instance identifiers where
appropriate), the internal storage type for the metric, the
value of the metric before the counter wrap (with its
associated timestamp), and the value of the metric after the
wrap (also with a timestamp).</p>


<p style="margin-left:11%; margin-top: 1em"><b>pmlogcheck</b>
produces two different timestamp formats, depending on the
interval over which it is run. For an interval greater than
24 hours, the date is displayed in addition to the time at
which the counter wrap occurred. If the extent of the data
being checked is less than 24 hours, a more precise format
is used (time is displayed with millisecond precision, but
without the date).</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>$PCP_VAR_DIR/pmns/</b><i>*</i></p>

<p style="margin-left:26%;">default PMNS specification
files</p>


<p style="margin-left:11%;"><b>$PCP_LOG_DIR/pmlogger/</b><i>hostname</i></p>

<p style="margin-left:26%;">default directory for PCP
archives containing performance data collected from the host
<i>hostname</i>.</p>

<h2>PCP ENVIRONMENT
<a name="PCP ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Environment
variables with the prefix <b>PCP_</b> are used to
parameterize the file and directory names used by PCP. On
each installation, the file <i>/etc/pcp.conf</i> contains
the local values for these variables. The <b>$PCP_CONF</b>
variable may be used to specify an alternative configuration
file, as described in <b>pcp.conf</b>(5).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PCPIntro</b>(1),
<b>pmdumplog</b>(1), <b>pmlogextract</b>(1),
<b>pmlogger</b>(1), <b>pmlogrewrite</b>(1),
<b>pmlogsummary</b>(1), <b>pmval</b>(1),
<b>pmLookupDesc</b>(3), <b>pcp.conf</b>(5),
<b>pcp.env</b>(5) and <b>pmns</b>(5).</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All are
generated on standard error and are intended to be self-
explanatory.</p>
<hr>
</body>
</html>
