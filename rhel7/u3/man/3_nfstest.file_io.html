<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:00:24 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>FILE_IO</title>

</head>
<body>

<h1 align="center">FILE_IO</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CLASSES">CLASSES</a><br>
<a href="#FUNCTIONS">FUNCTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">nfstest.file_io
- File I/O module</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Provides an
interface to create and manipulate files of different types.
The arguments allow running for a specified period of time
as well as running multiple processes. Each process modifies
a single file at a time and the file name space is different
for each process so there are no collisions between two
different processes modifying the same file.</p>

<p style="margin-left:11%; margin-top: 1em">File types:
<br>
- Regular file <br>
- Hard link <br>
- Symbolic link</p>

<p style="margin-left:11%; margin-top: 1em">File
operations: <br>
- Open (create or re-open) <br>
- Open downgrade <br>
This is done by opening the file for read and write, then
the file is <br>
opened again as read only and finally closing the read and
write file <br>
descriptor <br>
- Read (sequential or random access) <br>
- Write (sequential or random access) <br>
- Remove <br>
- Rename <br>
- Truncate (path or file descriptor) <br>
- Readdir <br>
- Lock <br>
- Unlock <br>
- Tlock</p>

<h2>CLASSES
<a name="CLASSES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>class
FileIO(baseobj.BaseObj)</b> <br>
FileIO object</p>

<p style="margin-left:11%; margin-top: 1em">Usage: <br>
from nfstest.file_io import FileIO</p>

<p style="margin-left:11%; margin-top: 1em"># Instantiate
FileIO object given top level directory <br>
x = FileIO(datadir=&quot;/tmp/data&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Run workload
creating the top level directory if necessary <br>
x.run()</p>

<p style="margin-left:11%; margin-top: 1em"><b>Methods
defined here:</b> <br>
---------------------</p>


<p style="margin-left:11%; margin-top: 1em"><b>__del__(self)</b>
<br>
Destructor</p>


<p style="margin-left:11%; margin-top: 1em"><b>__init__(self,
**kwargs)</b> <br>
Constructor</p>

<p style="margin-left:11%; margin-top: 1em">Initialize
object&rsquo;s private data</p>

<p style="margin-left:22%;"><b>datadir:</b></p>

<p style="margin-left:32%;">Top level directory where files
will be created, <br>
it will be created if it does not exist</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>seed:</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Seed to initialized the random number generator</p></td></tr>
</table>

<p style="margin-left:32%;">[default: automatically
generated]</p>

<p style="margin-left:22%;"><b>nprocs:</b></p>

<p style="margin-left:32%;">Number of processes to use
[default: 1]</p>

<p style="margin-left:22%;"><b>runtime:</b></p>

<p style="margin-left:32%;">Run time [default: 0
(indefinitely)]</p>

<p style="margin-left:22%;"><b>verbose:</b></p>

<p style="margin-left:32%;">Verbose level:
none|info|debug|dbg1-7|all [default: &rsquo;none&rsquo;]</p>

<p style="margin-left:22%;"><b>exiterr:</b></p>

<p style="margin-left:32%;">Exit on first error [default:
False]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>read:</b></p></td>
<td width="1%"></td>
<td width="62%">


<p>Read file percentage [default: 40]</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>write:</b></p></td>
<td width="1%"></td>
<td width="62%">


<p>Write file percentage [default: 40]</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>rdwr:</b></p></td>
<td width="1%"></td>
<td width="62%">


<p>Read/write file percentage [default: 20]</p></td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>randio:</b></p>

<p style="margin-left:32%;">Random file access percentage
[default: 50]</p>

<p style="margin-left:22%;"><b>iodelay:</b></p>

<p style="margin-left:32%;">Seconds to delay I/O operations
[default: 0.0]</p>

<p style="margin-left:22%;"><b>direct:</b></p>

<p style="margin-left:32%;">Use direct I/O [default:
False]</p>

<p style="margin-left:22%;"><b>rdwronly:</b></p>

<p style="margin-left:32%;">Use read and write only, no
rename, remove, etc. [default: False]</p>

<p style="margin-left:22%;"><b>create:</b></p>

<p style="margin-left:32%;">Create file percentage
[default: 5]</p>

<p style="margin-left:22%;"><b>odgrade:</b></p>

<p style="margin-left:32%;">Open downgrade percentage
[default: 10]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>osync:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Open file with O_SYNC [default: 20]</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>fsync:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Percentage of fsync after write [default: 5]</p></td></tr>
</table>

<p style="margin-left:22%;"><b>rename:</b></p>

<p style="margin-left:32%;">Rename file percentage
[default: 5]</p>

<p style="margin-left:22%;"><b>remove:</b></p>

<p style="margin-left:32%;">Remove file percentage
[default: 5]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>trunc:</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>Truncate file percentage [default: 5]</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>ftrunc:</b></p>

<p style="margin-left:32%;">Truncate opened file percentage
[default: 5]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>link:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Create hard link percentage [default: 2]</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>slink:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Create symbolic link percentage [default: 1]</p></td></tr>
</table>

<p style="margin-left:22%;"><b>readdir:</b></p>

<p style="margin-left:32%;">List contents of directory
percentage [default: 1]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>lock:</b></p></td>
<td width="3%"></td>
<td width="53%">


<p>Lock file percentage [default: 20]</p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>unlock:</b></p>

<p style="margin-left:32%;">Unlock file percentage
[default: 80]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>tlock:</b></p></td>
<td width="1%"></td>
<td width="53%">


<p>Lock test percentage [default: 50]</p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>lockfull:</b></p>

<p style="margin-left:32%;">Lock full file percentage
[default: 50]</p>

<p style="margin-left:22%;"><b>minfiles:</b></p>

<p style="margin-left:32%;">Mininum number of files to
create before any file operation <br>
is executed [default: 10]</p>

<p style="margin-left:22%;"><b>fsizeavg:</b></p>

<p style="margin-left:32%;">File size average [default:
1m]</p>

<p style="margin-left:22%;"><b>fsizedev:</b></p>

<p style="margin-left:32%;">File size standard deviation
[default: 256k]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>rsize:</b></p></td>
<td width="1%"></td>
<td width="46%">


<p>Read block size [default: 64k]</p></td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>rsizedev:</b></p>

<p style="margin-left:32%;">Read block size standard
deviation [default: 8k]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>wsize:</b></p></td>
<td width="1%"></td>
<td width="48%">


<p>Write block size [default: 64k]</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>wsizedev:</b></p>

<p style="margin-left:32%;">Write block size standard
deviation [default: 8k]</p>

<p style="margin-left:22%;"><b>sizemult:</b></p>

<p style="margin-left:32%;">Size multiplier [default:
1]</p>

<p style="margin-left:22%;"><b>createlog:</b></p>

<p style="margin-left:32%;">Create log file [default:
False]</p>

<p style="margin-left:22%;"><b>createlogs:</b></p>

<p style="margin-left:32%;">Create a log file for each
process [default: False]</p>

<p style="margin-left:22%;"><b>logdir:</b></p>

<p style="margin-left:32%;">Log directory [default:
&rsquo;/tmp&rsquo;]</p>


<p style="margin-left:11%; margin-top: 1em"><b>run(self)</b>
<br>
Main function where all processes are started</p>


<p style="margin-left:11%; margin-top: 1em"><b>run_process(self,
tid=0)</b> <br>
Main loop for each process</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
FileObj(baseobj.BaseObj)</b> <br>
# File object</p>

<p style="margin-left:11%; margin-top: 1em"><b>class
TermSignal(exceptions.Exception)</b> <br>
Exception to be raised on SIGTERM signal</p>

<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>stop_handler(signum,
frame)</b> <br>
Signal handler to catch SIGTERM and allow for gracefull
termination of subprocesses</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>baseobj(3),
formatstr(3)</b></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">No known
bugs.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jorge Mora
(mora@netapp.com)</p>
<hr>
</body>
</html>
