<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:22:32 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>p11tool</title>

</head>
<body>

<h1 align="center">p11tool</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#NOTES">NOTES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>p11tool</b>
&minus; GnuTLS PKCS #11 tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>p11tool</b>
[<b>&minus;flags</b>] [<b>&minus;flag</b> [<i>value</i>]]
[<b>&minus;&minus;option-name</b>[[=| ]<i>value</i>]]
[url]</p>

<p style="margin-left:11%; margin-top: 1em">Operands and
options may be intermixed. They will be reordered.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Program that
allows operations on PKCS #11 smart cards and security
modules.</p>

<p style="margin-left:11%; margin-top: 1em">To use PKCS #11
tokens with GnuTLS the p11-kit configuration files need to
be setup. That is create a .module file in
/etc/pkcs11/modules with the contents &rsquo;module:
/path/to/pkcs11.so&rsquo;. Alternatively the configuration
file /etc/gnutls/pkcs11.conf has to exist and contain a
number of lines of the form
&rsquo;load=/usr/lib/opensc-pkcs11.so&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">You can provide
the PIN to be used for the PKCS #11 operations with the
environment variables GNUTLS_PIN and GNUTLS_SO_PIN.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;d</b>
<i>number</i>, <b>&minus;&minus;debug</b>=<i>number</i></p>

<p style="margin-left:22%;">Enable debugging. This option
takes an integer number as its argument. The value of
<i>number</i> is constrained to being:</p>

<p style="margin-left:28%;">in the range 0 through 9999</p>

<p style="margin-left:22%; margin-top: 1em">Specifies the
debug level.</p>


<p style="margin-left:11%;"><b>&minus;&minus;outfile</b>=<i>string</i></p>

<p style="margin-left:22%;">Output file.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;tokens</b></p>

<p style="margin-left:22%;">List all available tokens.</p>


<p style="margin-left:11%;"><b>&minus;&minus;export</b></p>

<p style="margin-left:22%;">Export the object specified by
the URL.</p>


<p style="margin-left:11%;"><b>&minus;&minus;export&minus;chain</b></p>

<p style="margin-left:22%;">Export the certificate
specified by the URL and its chain of trust.</p>

<p style="margin-left:22%; margin-top: 1em">Exports the
certificate specified by the URL and generates its chain of
trust based on the stored certificates in the module.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;mechanisms</b></p>

<p style="margin-left:22%;">List all available mechanisms
in a token.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;info</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>List information on an available object in a token.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;all</b></p>

<p style="margin-left:22%;">List all available objects in a
token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;all&minus;certs</b></p>

<p style="margin-left:22%;">List all available certificates
in a token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;certs</b></p>

<p style="margin-left:22%;">List all certificates that have
an associated private key.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;all&minus;privkeys</b></p>

<p style="margin-left:22%;">List all available private keys
in a token.</p>

<p style="margin-left:22%; margin-top: 1em">Lists all the
private keys in a token that match the specified URL.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list-privkeys</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--list-all-privkeys</i> option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list-keys</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--list-all-privkeys</i> option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;all&minus;trusted</b></p>

<p style="margin-left:22%;">List all available certificates
marked as trusted.</p>

<p style="margin-left:11%;"><b>&minus;&minus;write</b></p>

<p style="margin-left:22%;">Writes the loaded objects to a
PKCS #11 token.</p>

<p style="margin-left:22%; margin-top: 1em">It can be used
to write private keys, certificates or secret keys to a
token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete</b></p>

<p style="margin-left:22%;">Deletes the objects matching
the PKCS #11 URL.</p>


<p style="margin-left:11%;"><b>&minus;&minus;generate&minus;random</b>=<i>number</i></p>

<p style="margin-left:22%;">Generate random data. This
option takes an integer number as its argument.</p>

<p style="margin-left:22%; margin-top: 1em">Asks the token
to generate a number of bytes of random bytes.</p>


<p style="margin-left:11%;"><b>&minus;&minus;generate&minus;rsa</b></p>

<p style="margin-left:22%;">Generate an RSA private-public
key pair.</p>

<p style="margin-left:22%; margin-top: 1em">Generates an
RSA private-public key pair on the specified token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;generate&minus;dsa</b></p>

<p style="margin-left:22%;">Generate a DSA private-public
key pair.</p>

<p style="margin-left:22%; margin-top: 1em">Generates a DSA
private-public key pair on the specified token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;generate&minus;ecc</b></p>

<p style="margin-left:22%;">Generate an ECDSA
private-public key pair.</p>

<p style="margin-left:22%; margin-top: 1em">Generates an
ECDSA private-public key pair on the specified token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;export&minus;pubkey</b></p>

<p style="margin-left:22%;">Export the public key for a
private key.</p>

<p style="margin-left:22%; margin-top: 1em">Exports the
public key for the specified private key</p>


<p style="margin-left:11%;"><b>&minus;&minus;label</b>=<i>string</i></p>

<p style="margin-left:22%;">Sets a label for the write
operation.</p>


<p style="margin-left:11%;"><b>&minus;&minus;mark&minus;wrap</b>,
<b>&minus; Fl &minus;no&minus;mark&minus;wrap</b></p>

<p style="margin-left:22%;">Marks the generated key to be a
wrapping key. The <i>no&minus;mark&minus;wrap</i> form will
disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">Marks the
generated key with the CKA_WRAP flag.</p>


<p style="margin-left:11%;"><b>&minus;&minus;mark&minus;trusted</b>,
<b>&minus; Fl &minus;no&minus;mark&minus;trusted</b></p>

<p style="margin-left:22%;">Marks the object to be written
as trusted. The <i>no&minus;mark&minus;trusted</i> form will
disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">Marks the
object to be generated/copied with the CKA_TRUST flag.</p>


<p style="margin-left:11%;"><b>&minus;&minus;mark&minus;ca</b>,
<b>&minus; Fl &minus;no&minus;mark&minus;ca</b></p>

<p style="margin-left:22%;">Marks the object to be written
as a CA. The <i>no&minus;mark&minus;ca</i> form will disable
the option.</p>

<p style="margin-left:22%; margin-top: 1em">Marks the
object to be generated/copied with the
CKA_CERTIFICATE_CATEGORY as CA.</p>


<p style="margin-left:11%;"><b>&minus;&minus;mark&minus;private</b>,
<b>&minus; Fl &minus;no&minus;mark&minus;private</b></p>

<p style="margin-left:22%;">Marks the object to be written
as private. The <i>no&minus;mark&minus;private</i> form will
disable the option. This option is enabled by default.</p>

<p style="margin-left:22%; margin-top: 1em">Marks the
object to be generated/copied with the CKA_PRIVATE flag. The
written object will require a PIN to be used.</p>


<p style="margin-left:11%;"><b>&minus;&minus;trusted</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--mark-trusted</i> option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;&minus;ca</b></p></td>
<td width="5%"></td>
<td width="64%">


<p>This is an alias for the <i>--mark-ca</i> option.</p></td>
<td width="14%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;private</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--mark-private</i> option.</p>

<p style="margin-left:11%;"><b>&minus;&minus;login</b>,
<b>&minus; Fl &minus;no&minus;login</b></p>

<p style="margin-left:22%;">Force (user) login to token.
The <i>no&minus;login</i> form will disable the option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;so&minus;login</b>,
<b>&minus; Fl &minus;no&minus;so&minus;login</b></p>

<p style="margin-left:22%;">Force security officer login to
token. The <i>no&minus;so&minus;login</i> form will disable
the option.</p>

<p style="margin-left:22%; margin-top: 1em">Forces login to
the token as security officer (admin).</p>


<p style="margin-left:11%;"><b>&minus;&minus;admin-login</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--so-login</i> option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;detailed&minus;url</b>,
<b>&minus; Fl &minus;no&minus;detailed&minus;url</b></p>

<p style="margin-left:22%;">Print detailed URLs. The
<i>no&minus;detailed&minus;url</i> form will disable the
option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;secret&minus;key</b>=<i>string</i></p>

<p style="margin-left:22%;">Provide a hex encoded secret
key.</p>


<p style="margin-left:11%;"><b>&minus;&minus;load&minus;privkey</b>=<i>file</i></p>

<p style="margin-left:22%;">Private key file to use.</p>


<p style="margin-left:11%;"><b>&minus;&minus;load&minus;pubkey</b>=<i>file</i></p>

<p style="margin-left:22%;">Public key file to use.</p>


<p style="margin-left:11%;"><b>&minus;&minus;load&minus;certificate</b>=<i>file</i></p>

<p style="margin-left:22%;">Certificate file to use.</p>

<p style="margin-left:11%;"><b>&minus;8</b>,
<b>&minus;&minus;pkcs8</b></p>

<p style="margin-left:22%;">Use PKCS #8 format for private
keys.</p>


<p style="margin-left:11%;"><b>&minus;&minus;bits</b>=<i>number</i></p>

<p style="margin-left:22%;">Specify the number of bits for
key generate. This option takes an integer number as its
argument.</p>


<p style="margin-left:11%;"><b>&minus;&minus;curve</b>=<i>string</i></p>

<p style="margin-left:22%;">Specify the curve used for EC
key generation.</p>

<p style="margin-left:22%; margin-top: 1em">Supported
values are secp192r1, secp224r1, secp256r1, secp384r1 and
secp521r1.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sec&minus;param</b>=<i>security
parameter</i></p>

<p style="margin-left:22%;">Specify the security level.</p>

<p style="margin-left:22%; margin-top: 1em">This is
alternative to the bits option. Available options are [low,
legacy, medium, high, ultra].</p>

<p style="margin-left:11%;"><b>&minus;&minus;inder</b>,
<b>&minus; Fl &minus;no&minus;inder</b></p>

<p style="margin-left:22%;">Use DER/RAW format for input.
The <i>no&minus;inder</i> form will disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">Use DER/RAW
format for input certificates and private keys.</p>

<p style="margin-left:11%;"><b>&minus;&minus;inraw</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--inder</i> option.</p>

<p style="margin-left:11%;"><b>&minus;&minus;outder</b>,
<b>&minus; Fl &minus;no&minus;outder</b></p>

<p style="margin-left:22%;">Use DER format for output
certificates, private keys, and DH parameters. The
<i>no&minus;outder</i> form will disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">The output will
be in DER or RAW format.</p>


<p style="margin-left:11%;"><b>&minus;&minus;outraw</b></p>

<p style="margin-left:22%;">This is an alias for the
<i>--outder</i> option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;initialize</b></p>

<p style="margin-left:22%;">Initializes a PKCS #11
token.</p>


<p style="margin-left:11%;"><b>&minus;&minus;set&minus;pin</b>=<i>string</i></p>

<p style="margin-left:22%;">Specify the PIN to use on token
initialization.</p>

<p style="margin-left:22%; margin-top: 1em">Alternatively
the GNUTLS_PIN environment variable may be used.</p>


<p style="margin-left:11%;"><b>&minus;&minus;set&minus;so&minus;pin</b>=<i>string</i></p>

<p style="margin-left:22%;">Specify the Security
Officer&rsquo;s PIN to use on token initialization.</p>

<p style="margin-left:22%; margin-top: 1em">Alternatively
the GNUTLS_SO_PIN environment variable may be used.</p>


<p style="margin-left:11%;"><b>&minus;&minus;provider</b>=<i>file</i></p>

<p style="margin-left:22%;">Specify the PKCS #11 provider
library.</p>

<p style="margin-left:22%; margin-top: 1em">This will
override the default options in /etc/gnutls/pkcs11.conf</p>

<p style="margin-left:11%;"><b>&minus;&minus;batch</b></p>

<p style="margin-left:22%;">Disable all interaction with
the tool. All parameters need to be specified on command
line..</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">Display usage information and
exit.</p>

<p style="margin-left:11%;"><b>&minus;!</b>,
<b>&minus;&minus;more-help</b></p>

<p style="margin-left:22%;">Pass the extended usage
information through a pager.</p>

<p style="margin-left:11%;"><b>&minus;v</b> [{<i>v|c|n</i>
<b>&minus;&minus;version</b> [{<i>v|c|n</i>}]}]</p>

<p style="margin-left:22%;">Output version of program and
exit. The default mode is &lsquo;v&rsquo;, a simple version.
The &lsquo;c&rsquo; mode will print copyright information
and &lsquo;n&rsquo; will print the full copyright
notice.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To view all
tokens in your system use:</p>

<p style="margin-left:17%;">$ p11tool
&minus;&minus;list&minus;tokens</p>

<p style="margin-left:11%; margin-top: 1em">To view all
objects in a token use:</p>

<p style="margin-left:17%;">$ p11tool &minus;&minus;login
&minus;&minus;list&minus;all
&quot;pkcs11:TOKEN&minus;URL&quot;</p>

<p style="margin-left:11%; margin-top: 1em">To store a
private key and a certificate in a token run:</p>

<p style="margin-left:17%;">$ p11tool &minus;&minus;login
&minus;&minus;write &quot;pkcs11:URL&quot;
&minus;&minus;load&minus;privkey key.pem &minus;&minus;label
&quot;Mykey&quot; <br>
$ p11tool &minus;&minus;login &minus;&minus;write
&quot;pkcs11:URL&quot; &minus;&minus;load&minus;certificate
cert.pem &minus;&minus;label &quot;Mykey&quot;</p>

<p style="margin-left:11%;">Note that some tokens require
the same label to be used for the certificate and its
corresponding private key.</p>

<p style="margin-left:11%; margin-top: 1em">To generate an
RSA private key inside the token use:</p>

<p style="margin-left:17%;">$ p11tool &minus;&minus;login
&minus;&minus;generate&minus;rsa &minus;&minus;bits 1024
&minus;&minus;label &quot;MyNewKey&quot;
&minus;&minus;outfile MyNewKey.pub
&quot;pkcs11:TOKEN&minus;URL&quot;</p>

<p style="margin-left:11%;">The bits parameter in the above
example is explicitly set because some tokens only support
limited choices in the bit length. The output file is the
corresponding public key. This key can be used to general a
certificate request with certtool.</p>

<p style="margin-left:17%;">certtool
&minus;&minus;generate&minus;request
&minus;&minus;load&minus;privkey
&quot;pkcs11:KEY&minus;URL&quot;
&minus;&minus;load&minus;pubkey MyNewKey.pub
&minus;&minus;outfile request.pem</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">One of the
following exit values will be returned: <br>
0 (EXIT_SUCCESS)</p>

<p style="margin-left:22%;">Successful program
execution.</p>

<p style="margin-left:11%;">1 (EXIT_FAILURE)</p>

<p style="margin-left:22%;">The operation failed or the
command syntax was not valid.</p>

<p style="margin-left:11%;">70 (EX_SOFTWARE)</p>

<p style="margin-left:22%;">libopts had an internal
operational error. Please report it to
autogen-users@lists.sourceforge.net. Thank you.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">certtool
(1)</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Nikos
Mavrogiannopoulos, Simon Josefsson and others; see
/usr/share/doc/gnutls/AUTHORS for a complete list.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2000-2016 Free Software Foundation, and others all rights
reserved. This program is released under the terms of the
GNU General Public License, version 3 or later.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please send bug
reports to: bugs@gnutls.org</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page was <i>AutoGen</i>-erated from the <b>p11tool</b>
option definitions.</p>
<hr>
</body>
</html>
