<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:34:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>STAPREF</title>

</head>
<body>

<h1 align="center">STAPREF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#LANGUAGE">LANGUAGE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">stapref &minus;
systemtap language reference</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>stapref</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The reference
for the systemtap scripting language.</p>

<h2>LANGUAGE
<a name="LANGUAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Keywords</p>

<p style="margin-left:22%;">&bull; <b>break</b> <br>
&bull; <b>continue</b> <br>
&bull; <b>delete</b> <br>
&bull; <b>else</b> <br>
&bull; <b>exit</b> <br>
&bull; <b>foreach</b> <br>
&bull; <b>for</b> <br>
&bull; <b>function</b> <br>
&bull; <b>global</b> <br>
&bull; <b>private</b> <br>
&bull; <b>if</b> <br>
&bull; <b>in</b> <br>
&bull; <b>next</b> <br>
&bull; <b>probe</b> <br>
&bull; <b>return</b> <br>
&bull; <b>try/catch</b> <br>
&bull; <b>while</b></p>

<p style="margin-left:11%; margin-top: 1em">Data Types and
Operators</p>

<p style="margin-left:22%;">Integers <br>
&bull; var1 = 5 <br>
&bull; <b>global</b> var2 = 10</p>

<p style="margin-left:22%; margin-top: 1em">Strings <br>
&bull; var1 = &quot;string1&quot; <br>
&bull; <b>global</b> var2 = &quot;string2&quot;</p>

<p style="margin-left:22%; margin-top: 1em">Associative
Arrays <br>
&bull; <b>global</b> array1[] <br>
&bull; <b>global</b> array2[SIZE] <br>
&bull; array[index] = 5</p>

<p style="margin-left:22%; margin-top: 1em">Context
Variables <br>
&bull; <b>$</b>var <br>
&bull; <b>$</b>var<b>$</b> (pretty printed string form)</p>

<p style="margin-left:22%; margin-top: 1em">Binary numeric
operators <br>
&bull; <b>* / % + &minus; &lt;&lt; &gt;&gt; &amp; ^ |
&amp;&amp; ||</b></p>

<p style="margin-left:22%; margin-top: 1em">Binary string
operators <br>
&bull; <b>.</b> (string concatenation)</p>

<p style="margin-left:22%; margin-top: 1em">Numeric
assignment operators <br>
&bull; <b>= += -= *= /= %= &gt;&gt;= &lt;&lt;= &amp;= ^=
|=</b></p>

<p style="margin-left:22%; margin-top: 1em">String
assignment operators <br>
&bull; <b>= .=</b></p>

<p style="margin-left:22%; margin-top: 1em">Unary numeric
operators <br>
&bull; <b>+ &minus; ! ~ ++ &minus;&minus;</b></p>

<p style="margin-left:22%; margin-top: 1em">Numeric &amp;
string comparison operators <br>
&bull; <b>&lt; &gt; &lt;= &gt;= == !=</b></p>

<p style="margin-left:22%; margin-top: 1em">Regular
expression matching operators <br>
&bull; <b>=~ !~</b></p>

<p style="margin-left:22%; margin-top: 1em">Ternary
operator <br>
&bull; cond <b>?</b> exp1 <b>:</b> exp2</p>

<p style="margin-left:22%; margin-top: 1em">Grouping
operator <br>
&bull; <b>(</b> expression <b>)</b></p>

<p style="margin-left:22%; margin-top: 1em">Array operators
<br>
&bull; array<b>[</b>index<b>]</b> (array read/write) <br>
&bull; [index] <b>in</b> array</p>

<p style="margin-left:22%; margin-top: 1em">Aggregation
operator <br>
&bull; var <b>&lt;&lt;&lt;</b> value</p>

<p style="margin-left:11%; margin-top: 1em">Statements</p>

<p style="margin-left:22%;">Jump Statements <br>
&bull; <b>continue</b> <br>
&bull; <b>break</b> <br>
&bull; <b>next</b> <br>
&bull; <b>return</b> expression <br>
&bull; <b>try</b> statement <b>catch</b> (message)</p>

<p style="margin-left:22%; margin-top: 1em">Selection
Statements <br>
&bull; <b>if</b> (expression) statement <br>
&bull; <b>else</b> statement</p>

<p style="margin-left:22%; margin-top: 1em">Iteration
Statements <br>
&bull; <b>foreach</b> (variable <b>in</b> array) statement
<br>
&bull; <b>foreach</b> ([var1,var2,...] <b>in</b> array)
statement <br>
&bull; <b>for</b> (expression; expression; expression)
statement <br>
&bull; <b>while</b> (expression) statement</p>

<p style="margin-left:22%; margin-top: 1em">Declaration
Statements <br>
&bull; <b>function</b> name (variable : type, ...) {
statement } <br>
&bull; <b>function</b> name : type (variable : type, ...) {
statement } <br>
&bull; <b>function</b> name : type (variable : type, ...) %{
c_statement %} <br>
&bull; <b>probe</b> probepoint { statement } <br>
&bull; <b>probe</b> label = probepoint { statement }</p>

<p style="margin-left:11%; margin-top: 1em">Lexical
Structure</p>

<p style="margin-left:22%;">Comments <br>
&bull; <b>#</b> ... comment <br>
&bull; <b>//</b> ... comment <br>
&bull; <b>/*</b> ... comment ... <b>*/</b></p>

<p style="margin-left:22%; margin-top: 1em">Preprocessor
<br>
&bull; <b>%(</b> expression <b>%?</b> true_tokens <b>%:</b>
false_tokens <b>%)</b> <br>
&bull; <b>@define</b> label (variable, ...) %{ statement
%}</p>

<p style="margin-left:11%; margin-top: 1em">Builtin
Functions</p>

<p style="margin-left:22%;">Aggregation Builtin Functions
<br>
&bull; <b>@avg</b> (variable) <br>
&bull; <b>@count</b> (variable) <br>
&bull; <b>@hist_linear</b> (variable, N, N, N) <br>
&bull; <b>@hist_log</b> (variable) <br>
&bull; <b>@max</b> (variable) <br>
&bull; <b>@min</b> (variable) <br>
&bull; <b>@sum</b> (variable)</p>

<p style="margin-left:22%; margin-top: 1em">Output Builtin
Functions <br>
&bull; <b>print</b> (variable) <br>
&bull; <b>printf</b> (format:string, variable, ...) &nbsp;
<br>
where format is of the form:
%[flags][width][.precision][length]specifier <br>
&bull; <b>printd</b> (delimiter:string, variable, ...) <br>
&bull; <b>printdln</b> (delimiter:string, variable, ...)
<br>
&bull; <b>println</b> () <br>
&bull; <b>sprint</b>:string (variable) <br>
&bull; <b>sprintf</b>:string (format:string, variable,
...)</p>

<p style="margin-left:22%; margin-top: 1em">Variable Access
Builtin Functions <br>
&bull; <b>@cast</b> (variable, &quot;type_name&quot;[,
&quot;module&quot;]) <br>
&bull; <b>@defined</b> (variable)</p>


<p style="margin-left:11%; margin-top: 1em">Probepoints</p>

<p style="margin-left:22%;">Some of the more commonly used
probepoints <br>
&bull; kernel.function(PATTERN)
kernel.function(PATTERN).call <br>
&bull; kernel.function(PATTERN).return <br>
&bull; kernel.FUNCTION (PATTERN).return.maxactive(VALUE)
<br>
&bull; kernel.FUNCTION (PATTERN).inline <br>
&bull; kernel.FUNCTION (PATTERN).label(LPATTERN) <br>
&bull; module(MPATTERN).FUNCTION (PATTERN) <br>
&bull; module(MPATTERN).FUNCTION (PATTERN).call <br>
&bull; module(MPATTERN).FUNCTION
(PATTERN).return.maxactive(VALUE) <br>
&bull; module(MPATTERN).FUNCTION (PATTERN).inline <br>
&bull; kernel.statement(PATTERN) <br>
&bull; kernel.statement(ADDRESS).absolute <br>
&bull; module(MPATTERN).statement(PATTERN) <br>
&bull; kprobe.FUNCTION (FUNCTION) <br>
&bull; kprobe.FUNCTION (FUNCTION).return <br>
&bull; kprobe.module(NAME).FUNCTION (FUNCTION) <br>
&bull; kprobe.module(NAME).FUNCTION (FUNCTION).return <br>
&bull; kprobe.statement(ADDRESS).absolute <br>
&bull; process.begin process(&quot;PATH&quot;).begin <br>
&bull; process(PID).begin process.thread.begin <br>
&bull; process(&quot;PATH&quot;).thread.begin <br>
&bull; process(PID).thread.begin <br>
&bull; process.end <br>
&bull; process(&quot;PATH&quot;).end <br>
&bull; process(PID).end <br>
&bull; process.thread.end <br>
&bull; process(&quot;PATH&quot;).thread.end <br>
&bull; process(PID).thread.end <br>
&bull; process(&quot;PATH&quot;).syscall <br>
&bull; process(PID).syscall <br>
&bull; process.syscall.return <br>
&bull; process(&quot;PATH&quot;).syscall.return <br>
&bull; process(PID).syscall.return <br>
&bull; process(&quot;PATH&quot;).FUNCTION (&quot;NAME&quot;)
<br>
&bull;
process(&quot;PATH&quot;).statement(&quot;*@FILE.c:123&quot;)
<br>
&bull; process(&quot;PATH&quot;).FUNCTION
(&quot;*&quot;).return <br>
&bull; process(&quot;PATH&quot;).FUNCTION
(&quot;myfun&quot;).label(&quot;foo&quot;) <br>
&bull; process(&quot;PATH&quot;).mark(&quot;LABEL&quot;)
<br>
&bull;
java(&quot;PNAME&quot;).class(&quot;CLASSNAME&quot;).method(&quot;PATTERN&quot;)
<br>
&bull;
java(&quot;PNAME&quot;).class(&quot;CLASSNAME&quot;).method(&quot;PATTERN&quot;).return
<br>
&bull;
java(PID).class(&quot;CLASSNAME&quot;).method(&quot;PATTERN&quot;)
<br>
&bull;
java(PID).class(&quot;CLASSNAME&quot;).method(&quot;PATTERN&quot;).return</p>

<p style="margin-left:11%; margin-top: 1em">Tapset
Functions</p>

<p style="margin-left:22%;">Some of the more commonly used
tapset functions <br>
&bull; addr:long () <br>
&bull; backtrace:string () <br>
&bull; caller:string () <br>
&bull; caller_addr:long () <br>
&bull; cmdline_arg:string (N:long) <br>
&bull; cmdline_args:string (N:long,m:long,delim:string) <br>
&bull; cmdline_str:string () <br>
&bull; env_var:string (name:string) <br>
&bull; execname:string () <br>
&bull; int_arg:long (N:long) <br>
&bull; isinstr:long(s1:string,s2:string) <br>
&bull; long_arg:long (N:long) <br>
&bull; modname:string () <br>
&bull; module_name:string () <br>
&bull; pid:long () <br>
&bull; pn:string () <br>
&bull; pointer_arg:string (N:long) <br>
&bull; pp:string () <br>
&bull; print_backtrace () <br>
&bull; probefunc:string () <br>
&bull; register:long(name:string) <br>
&bull;
str_replace:string(prnt_str:string,srch_str:string,rplc_str:string)
<br>
&bull; stringat:long(str:string,pos:long) <br>
&bull; strlen:long(str:string) <br>
&bull; strtol:long(str:string,base:long) <br>
&bull; substr:string(str:string,start:long,length:long) <br>
&bull; user_long:long(addr:long) <br>
&bull; user_string:string(addr:long)</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>stap</i>(1)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use the
Bugzilla link of the project web page or our mailing list.
<b>http://sourceware.org/systemtap/</b>,<b>&lt;systemtap@sourceware.org&gt;</b>.</p>
<hr>
</body>
</html>
