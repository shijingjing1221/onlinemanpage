<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:39:37 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>guestfs-recipes</title>

</head>
<body>

<h1 align="center">guestfs-recipes</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#Access a remote disk image using guestfish">Access a remote disk image using guestfish</a><br>
<a href="#Audit a virtual machine for setuid files">Audit a virtual machine for setuid files</a><br>
<a href="#Audit a virtual machine for vulnerabilities and security problems">Audit a virtual machine for vulnerabilities and security problems</a><br>
<a href="#Change the background image in a Windows XP VM">Change the background image in a Windows XP VM</a><br>
<a href="#Checksum a file or device within a disk image">Checksum a file or device within a disk image</a><br>
<a href="#Cloning a virtual machine">Cloning a virtual machine</a><br>
<a href="#Convert a CD-ROM / DVD / ISO to a tarball">Convert a CD-ROM / DVD / ISO to a tarball</a><br>
<a href="#Convert from one format/filesystem to another">Convert from one format/filesystem to another</a><br>
<a href="#Convert Windows DVD to bootable USB key">Convert Windows DVD to bootable USB key</a><br>
<a href="#Convert Xen-style partitionless image to partitioned disk image">Convert Xen-style partitionless image to partitioned disk image</a><br>
<a href="#Create empty disk images">Create empty disk images</a><br>
<a href="#Delete a file (or other simple file operations)">Delete a file (or other simple file operations)</a><br>
<a href="#Diff two guests; compare a snapshot to the current version">Diff two guests; compare a snapshot to the current version</a><br>
<a href="#Disable a systemd service">Disable a systemd service</a><br>
<a href="#Drive letters over FUSE">Drive letters over FUSE</a><br>
<a href="#Dump raw filesystem content from inside a disk image or VM">Dump raw filesystem content from inside a disk image or VM</a><br>
<a href="#Edit grub configuration in a VM">Edit grub configuration in a VM</a><br>
<a href="#Export any directory from a VM">Export any directory from a VM</a><br>
<a href="#Export external kernel and initramfs (initrd)">Export external kernel and initramfs (initrd)</a><br>
<a href="#Find out which user is using the most space">Find out which user is using the most space</a><br>
<a href="#Get DHCP address from a VM">Get DHCP address from a VM</a><br>
<a href="#Get the operating system product name string">Get the operating system product name string</a><br>
<a href="#Get the default boot kernel for a Linux VM">Get the default boot kernel for a Linux VM</a><br>
<a href="#Hanging guests">Hanging guests</a><br>
<a href="#Hex-dumping sectors from the guest">Hex-dumping sectors from the guest</a><br>
<a href="#Hex-editing sectors in the guest">Hex-editing sectors in the guest</a><br>
<a href="#Install packages (RPMs, Debian packages) in a guest">Install packages (RPMs, Debian packages) in a guest</a><br>
<a href="#Install packages from an alternate repository">Install packages from an alternate repository</a><br>
<a href="#Install SYSLINUX bootloader in a guest">Install SYSLINUX bootloader in a guest</a><br>
<a href="#List applications installed in a VM">List applications installed in a VM</a><br>
<a href="#List files and directories in a VM">List files and directories in a VM</a><br>
<a href="#List services in a Windows VM">List services in a Windows VM</a><br>
<a href="#Make a disk image sparse">Make a disk image sparse</a><br>
<a href="#Monitor disk usage over time">Monitor disk usage over time</a><br>
<a href="#Reading the Windows Event Log from Windows Vista (or later)">Reading the Windows Event Log from Windows Vista (or later)</a><br>
<a href="#Remove root password (Linux)">Remove root password (Linux)</a><br>
<a href="#Remove Administrator password (Windows)">Remove Administrator password (Windows)</a><br>
<a href="#Sysprepping a virtual machine (Windows)">Sysprepping a virtual machine (Windows)</a><br>
<a href="#Unpack a live CD">Unpack a live CD</a><br>
<a href="#Uploading and downloading files">Uploading and downloading files</a><br>
<a href="#Uploading raw filesystem content">Uploading raw filesystem content</a><br>
<a href="#Use libguestfs tools on VMware ESX guests">Use libguestfs tools on VMware ESX guests</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">guestfs&minus;recipes
&minus; libguestfs, guestfish and virt tools recipes</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This page
contains recipes for and links to things you can do using
libguestfs, <i>guestfish</i>(1) and the virt tools.</p>

<h2>Access a remote disk image using guestfish
<a name="Access a remote disk image using guestfish"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the disk
image is on a remote server which is accessible using
<small>SSH, HTTP, FTP, NBD,</small> iSCSI, or similar, then
you can open it directly. See &quot; <small>ADDING REMOTE
STORAGE&quot;</small> in <i>guestfish</i>(1) for several
examples. This requires libguestfs &ge; 1.22 and qemu &ge;
1.5.</p>

<h2>Audit a virtual machine for setuid files
<a name="Audit a virtual machine for setuid files"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See: &quot;
<small>EXAMPLES&quot;</small> in
<i>virt&minus;ls</i>(1).</p>

<h2>Audit a virtual machine for vulnerabilities and security problems
<a name="Audit a virtual machine for vulnerabilities and security problems"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See:
https://rwmj.wordpress.com/2013/05/16/scanning&minus;offline&minus;guests&minus;using&minus;openscap&minus;and&minus;guestmount/#content</p>

<h2>Change the background image in a Windows XP VM
<a name="Change the background image in a Windows XP VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The links below
explain how to use <i>guestfish</i>(1) to change the
background image for a user of a Windows <small>XP
VM.</small> Unfortunately the technique appears to be
substantially different for each version of Windows.</p>


<p style="margin-left:11%; margin-top: 1em">https://lists.fedoraproject.org/pipermail/virt/2011&minus;May/002655.html
https://lists.fedoraproject.org/pipermail/virt/2011&minus;May/002658.html</p>

<h2>Checksum a file or device within a disk image
<a name="Checksum a file or device within a disk image"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To checksum a
whole device, or a partition, <small>LV</small> etc within a
disk image:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img run : checksum&minus;device md5 /dev/sda1</pre>


<p style="margin-left:11%; margin-top: 1em">Replace
<tt>&quot;md5&quot;</tt> with the type of checksum you want.
See &quot;guestfs_checksum_device&quot; in <i>guestfs</i>(3)
for a list of supported types.</p>


<p style="margin-left:11%; margin-top: 1em"><i>/dev/sda1</i>
means &quot;the first partition&quot;. You could use
<i>/dev/sda</i> to checksum the whole disk image, or the
name of a logical volume or <small>RAID</small> device.</p>

<p style="margin-left:11%; margin-top: 1em">To checksum a
single file:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img &minus;i checksum sha256 /etc/passwd</pre>


<p style="margin-left:11%; margin-top: 1em">or for a
Windows guest:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img &minus;i \
   checksum sha256 'win:\windows\system32\config\SOFTWARE'</pre>


<h2>Cloning a virtual machine
<a name="Cloning a virtual machine"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use a
combination of tools like <i>cp</i>(1), <i>dd</i>(1), and
virt tools like <i>virt&minus;sysprep</i>(1),
<i>virt&minus;sparsify</i>(1) and
<i>virt&minus;resize</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">For more
details, see: &quot; <small>COPYING AND
CLONING&quot;</small> in <i>virt&minus;sysprep</i>(1).</p>

<h2>Convert a CD-ROM / DVD / ISO to a tarball
<a name="Convert a CD-ROM / DVD / ISO to a tarball"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This converts
input <i>cd.iso</i> to output <i>cd.tar.gz</i>:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a cd.iso &minus;m /dev/sda tgz&minus;out / cd.tar.gz</pre>


<p style="margin-left:11%; margin-top: 1em">To export just
a subdirectory, eg. <i>/files</i>, do:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a cd.iso &minus;m /dev/sda tgz&minus;out /files cd.tar.gz</pre>


<h2>Convert from one format/filesystem to another

<a name="Convert from one format/filesystem to another"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you have a
data disk in one format / filesystem / partition / volume
manager, you can convert it another using this
technique.</p>

<p style="margin-left:11%; margin-top: 1em">In this
example, we start with a data disk that has a single
partition containing a filesystem, and we want to create
another disk that contains the same files but on an ext3
filesystem embedded in a logical volume on a sparse
raw-format disk.</p>

<p style="margin-left:11%; margin-top: 1em">First create
the formatted-but-empty target disk:</p>

<pre style="margin-left:11%; margin-top: 1em"> truncate &minus;s 10G target.img
 virt&minus;format &minus;a target.img &minus;&minus;partition=mbr &minus;&minus;lvm &minus;&minus;filesystem=ext3</pre>


<p style="margin-left:11%; margin-top: 1em">Now, pipe two
guestfish instances together to transfer the old data to the
new disk:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a source.img &minus;m /dev/sda1  &minus;&minus; tar&minus;out / &minus; | \
 guestfish &minus;&minus;rw &minus;a target.img &minus;m /dev/VG/LV &minus;&minus; tar&minus;in &minus; /</pre>


<p style="margin-left:11%; margin-top: 1em">To browse the
final disk image, do:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a target.img &minus;m /dev/VG/LV
 &gt;&lt;fs&gt; ll /</pre>


<p style="margin-left:11%; margin-top: 1em">This technique
is quite powerful, allowing you for example to split up
source directories over the target filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">Note this
won&rsquo;t work (at least, not directly) for bootable
virtual machine disks because it doesn&rsquo;t copy over the
boot loader.</p>

<h2>Convert Windows DVD to bootable USB key
<a name="Convert Windows DVD to bootable USB key"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">http://rwmj.wordpress.com/2013/05/09/tip&minus;convert&minus;a&minus;windows&minus;dvd&minus;iso&minus;to&minus;a&minus;bootable&minus;usb&minus;key&minus;using&minus;guestfish/#content</p>

<h2>Convert Xen-style partitionless image to partitioned disk image
<a name="Convert Xen-style partitionless image to partitioned disk image"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Xen disk images
are often partitionless, meaning that the filesystem starts
directly at the beginning of the disk with no partition
table. You can in fact use these directly in
<small>KVM</small> (provided the guest isn&rsquo;t Windows),
but some people like to convert them to regular partitioned
disk images, and this is required for Windows guests. Here
is how to use guestfish to do this:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish
 &gt;&lt;fs&gt; add&minus;ro input.img
 &gt;&lt;fs&gt; sparse output.img 10G     # adjust the output size
 &gt;&lt;fs&gt; run
 # Create a partition table on the output disk:
 &gt;&lt;fs&gt; part&minus;init /dev/sdb mbr
 &gt;&lt;fs&gt; part&minus;add /dev/sdb p 2048 &minus;2048
 # Copy the data to the target partition:
 &gt;&lt;fs&gt; copy&minus;device&minus;to&minus;device /dev/sda /dev/sdb1 sparse:true
 # Optionally resize the target filesystem.  Use ntfsresize
 # for Windows guests:
 &gt;&lt;fs&gt; resize2fs /dev/sdb1</pre>


<p style="margin-left:11%; margin-top: 1em">Such a disk
image won&rsquo;t be directly bootable. You may need to boot
it with an external kernel and initramfs (see below). Or you
can use the guestfish commands <tt>&quot;syslinux&quot;</tt>
or <tt>&quot;extlinux&quot;</tt> to install a
<small>SYSLINUX</small> bootloader.</p>

<h2>Create empty disk images
<a name="Create empty disk images"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>virt&minus;format</i>(1) tool can do this directly.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<i>virt&minus;make&minus;fs</i>(1) to create a disk image
with content. This can also create some standard disk images
such as virtual floppy devices (VFDs).</p>

<p style="margin-left:11%; margin-top: 1em">You can also
use the <i>guestfish</i>(1) <i>&minus;N</i> option to create
empty disk images. The useful guide below explains the
options available.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2010/09/08/new&minus;guestfish&minus;n&minus;options&minus;in&minus;1&minus;5&minus;9/#content</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;builder</i>(1)
can create minimal guests.</p>

<h2>Delete a file (or other simple file operations)
<a name="Delete a file (or other simple file operations)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use guestfish.
To delete a file:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;i rm /file/to/delete</pre>


<p style="margin-left:11%; margin-top: 1em">To touch a file
(bring it up to date or create it):</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;i touch /file/to/touch</pre>


<p style="margin-left:11%; margin-top: 1em">To stat a file.
Since this is a read-only operation, we can make it safer by
adding the <i>&minus;&minus;ro</i> flag.</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img &minus;i stat /file/to/stat</pre>


<p style="margin-left:11%; margin-top: 1em">There are
dozens of these commands. See <i>guestfish</i>(1) or the
output of <tt>&quot;guestfish &minus;h&quot;</tt></p>

<h2>Diff two guests; compare a snapshot to the current version
<a name="Diff two guests; compare a snapshot to the current version"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Since
libguestfs &ge; 1.26, use <i>virt&minus;diff</i>(1) to look
for differences between two guests (for example if they were
originally cloned from the same source), or between two
snapshots from the same guest. In earlier versions of
libguestfs, use <i>virt&minus;ls</i>(1).</p>

<h2>Disable a systemd service
<a name="Disable a systemd service"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
is the equivalent of <tt>&quot;systemctl mask
...&quot;</tt>. To disable the
<tt>&quot;cloud&minus;init&quot;</tt> service so it
doesn&rsquo;t start at next boot:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;i \
     ln&minus;sf /dev/null /etc/systemd/system/cloud&minus;init.service</pre>


<p style="margin-left:11%; margin-top: 1em">To disable
tmp-on-tmpfs:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;i \
     ln&minus;sf /dev/null /etc/systemd/system/tmp.mount</pre>


<p style="margin-left:11%; margin-top: 1em">One problem
with the commands above is there is no feedback if you get
the name of the service you are trying to mask wrong. But
you can use <i>virt&minus;ls</i>(1) to list the available
systemd services like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;ls &minus;a /tmp/fedora&minus;19.img &minus;R /lib/systemd/system</pre>


<h2>Drive letters over FUSE
<a name="Drive letters over FUSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You have a
Windows guest, and you want to expose the drive letters as
<small>FUSE</small> mountpoints (<i>/C/...</i>,
<i>/D/...</i> etc). Instead of <i>guestmount</i>(1), use
this Perl script:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/usr/bin/perl &minus;w
 use strict;
 use Sys::Guestfs;
 $| = 1;
 die &quot;usage: $0 mountpoint disk.img&quot; if @ARGV &lt; 2;
 my $mp = shift @ARGV;
 my $g = new Sys::Guestfs;
 $g&minus;&gt;add_drive_opts ($_) foreach @ARGV;
 $g&minus;&gt;launch;
 my @roots = $g&minus;&gt;inspect_os;
 die &quot;$0: no operating system found&quot; if @roots != 1;
 my $root = $roots[0];
 die &quot;$0: not Windows&quot; if $g&minus;&gt;inspect_get_type ($root) ne &quot;windows&quot;;
 my %map = $g&minus;&gt;inspect_get_drive_mappings ($root);
 foreach (keys %map) {
     $g&minus;&gt;mkmountpoint (&quot;/$_&quot;);
     eval { $g&minus;&gt;mount ($map{$_}, &quot;/$_&quot;) };
     warn &quot;$@ (ignored)\n&quot; if $@;
 }
 $g&minus;&gt;mount_local ($mp);
 print &quot;filesystem ready on $mp\n&quot;;
 $g&minus;&gt;mount_local_run;
 $g&minus;&gt;shutdown;</pre>


<p style="margin-left:11%; margin-top: 1em">You can use the
script like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ mkdir /tmp/mnt
 $ ./drive&minus;letters.pl /tmp/mnt windows7.img
 filesystem ready on /tmp/mnt</pre>


<p style="margin-left:11%; margin-top: 1em">In another
window:</p>

<pre style="margin-left:11%; margin-top: 1em"> $ cd /tmp/mnt
 $ ls
 C  D
 $ cd C
 $ ls
 Documents and Settings
 PerfLogs
 ProgramData
 Program Files
 [etc]
 $ cd ../..
 $ guestunmount /tmp/mnt</pre>



<h2>Dump raw filesystem content from inside a disk image or VM

<a name="Dump raw filesystem content from inside a disk image or VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can use the
<i>guestfish</i>(1) <tt>&quot;download&quot;</tt> command to
extract the raw filesystem content from any filesystem in a
disk image or a <small>VM</small> (even one which is
encrypted or buried inside an <small>LV</small> or
<small>RAID</small> device):</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img run : download /dev/sda1 sda1.img
 guestfish &minus;&minus;ro &minus;d Guest run : download /dev/vg_guest/lv_root lv.img</pre>


<p style="margin-left:11%; margin-top: 1em">To download to
stdout, replace the filename with a
<tt>&quot;&minus;&quot;</tt> character:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img run : download /dev/sda1 &minus; | gzip &gt; sda1.gz</pre>


<p style="margin-left:11%; margin-top: 1em">To list the
filesystems in a disk image, use
<i>virt&minus;filesystems</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;Uploading raw filesystem content&quot;.</p>

<h2>Edit grub configuration in a VM
<a name="Edit grub configuration in a VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can use
this to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>Fix a virtual machine that does not boot.</p></td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>Change which kernel is used to boot the
<small>VM.</small></p> </td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="66%">


<p>Change kernel command line options.</p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Use
<i>virt&minus;edit</i>(1) to edit the grub
configuration:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;edit &minus;d BrokenGuest /boot/grub2/grub.cfg</pre>


<p style="margin-left:11%; margin-top: 1em">or for general
tinkering inside an unbootable <small>VM</small> use
<i>virt&minus;rescue</i>(1) like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;rescue &minus;d BrokenGuest</pre>


<h2>Export any directory from a VM
<a name="Export any directory from a VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To export
<i>/home</i> from a <small>VM</small> into a local directory
use <i>virt&minus;copy&minus;out</i>(1):</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;copy&minus;out &minus;d Guest /home .</pre>


<p style="margin-left:11%; margin-top: 1em">Notes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The final dot of the command is
not a printing error. It means we want to copy out to the
current directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>This creates a directory called
<tt>&quot;home&quot;</tt> under the current directory.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If the guest is
a Windows guest then you can use drive letters and
backslashes, but you must prefix the path with
<tt>&quot;win:&quot;</tt> and quote it to protect it from
the shell, like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;copy&minus;out &minus;d WinGuest 'win:c:\windows\system32\config' .</pre>


<p style="margin-left:11%; margin-top: 1em">To get the
output as a compressed tarball, do:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;tar&minus;out &minus;d Guest /home &minus; | gzip &minus;&minus;best &gt; home.tar.gz</pre>


<p style="margin-left:11%; margin-top: 1em">Although it
sounds tempting, this is usually not a reliable way to get a
backup from a running guest. See the entry in the
<small>FAQ:</small>
http://libguestfs.org/FAQ.html#backup</p>

<h2>Export external kernel and initramfs (initrd)
<a name="Export external kernel and initramfs (initrd)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a Linux
guest doesn&rsquo;t have a boot loader or it is broken, then
you can usually boot it using an external kernel and
initramfs. In this configuration, the hypervisor acts like a
bootloader, loading the kernel from the host disk into guest
memory and jumping straight into the kernel.</p>

<p style="margin-left:11%; margin-top: 1em">However you may
wonder how to get the right kernel corresponding to the disk
image you have. Since libguestfs &ge; 1.24
<i>virt&minus;builder</i>(1) can get the latest kernel and
corresponding initramfs for you:</p>

<pre style="margin-left:11%; margin-top: 1em"> mkdir outputdir
 virt&minus;builder &minus;&minus;get&minus;kernel disk.img &minus;o outputdir
 ls &minus;lh outputdir</pre>


<h2>Find out which user is using the most space
<a name="Find out which user is using the most space"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This simple
script examines a Linux guest to find out which user is
using the most space in their home directory:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/bin/sh &minus;
 set &minus;e
 vm=&quot;$1&quot;
 dir=/home
 eval $(guestfish &minus;&minus;ro &minus;d &quot;$vm&quot; &minus;i &minus;&minus;listen)
 for d in $(guestfish &minus;&minus;remote ls &quot;$dir&quot;); do
     echo &minus;n &quot;$dir/$d&quot;
     echo &minus;ne '\t'
     guestfish &minus;&minus;remote du &quot;$dir/$d&quot;;
 done | sort &minus;nr &minus;k 2
 guestfish &minus;&minus;remote exit</pre>


<h2>Get DHCP address from a VM
<a name="Get DHCP address from a VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
explains the many different possible techniques for getting
the last assigned <small>DHCP</small> address of a virtual
machine.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2011/03/31/tip&minus;code&minus;for&minus;getting&minus;dhcp&minus;address&minus;from&minus;a&minus;virtual&minus;machine&minus;disk&minus;image/#content</p>

<p style="margin-left:11%; margin-top: 1em">In the
libguestfs source examples directory you will find the
latest version of the <i>virt&minus;dhcp&minus;address.c</i>
program.</p>

<h2>Get the operating system product name string
<a name="Get the operating system product name string"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Save the
following script into a file called
<i>product&minus;name.sh</i>:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/bin/sh &minus;
 set &minus;e
 eval &quot;$(guestfish &minus;&minus;ro &minus;d &quot;$1&quot; &minus;&minus;i &minus;&minus;listen)&quot;
 root=&quot;$(guestfish &minus;&minus;remote inspect&minus;get&minus;roots)&quot;
 guestfish &minus;&minus;remote inspect&minus;get&minus;product&minus;name &quot;$root&quot;
 guestfish &minus;&minus;remote exit</pre>


<p style="margin-left:11%; margin-top: 1em">Make the script
executable and run it on a named guest:</p>

<pre style="margin-left:11%; margin-top: 1em"> # product&minus;name.sh RHEL60x64
 Red Hat Enterprise Linux Server release 6.0 (Santiago)</pre>


<p style="margin-left:11%; margin-top: 1em">You can also
use an XPath query on the <i>virt&minus;inspector</i>(1)
<small>XML</small> using the <tt>&quot;xpath&quot;</tt>
command line tool or from your favourite programming
language:</p>

<pre style="margin-left:11%; margin-top: 1em"> # virt&minus;inspector RHEL60x64 &gt; xml
 # xpath '//product_name' &lt; xml
 Found 1 nodes:
 &minus;&minus; NODE &minus;&minus;
 &lt;product_name&gt;Red Hat Enterprise Linux Server release 6.0 (Santiago)&lt;/product_name&gt;</pre>


<h2>Get the default boot kernel for a Linux VM
<a name="Get the default boot kernel for a Linux VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
contains a program to print the default boot kernel for a
Linux <small>VM.</small></p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2010/10/30/tip&minus;use&minus;augeas&minus;to&minus;get&minus;the&minus;default&minus;boot&minus;kernel&minus;for&minus;a&minus;vm/#content</p>

<p style="margin-left:11%; margin-top: 1em">It uses Augeas,
and the technique is generally applicable for many different
tasks, such as:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="72%">


<p style="margin-top: 1em">listing the user accounts in the
guest</p> </td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="72%">


<p>what repositories is it configured to use</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="72%">


<p>what <small>NTP</small> servers does it connect to</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="72%">


<p>what were the boot messages last time it booted</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="72%">


<p>listing who was logged in recently</p></td>
<td width="11%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em">http://augeas.net/</p>

<h2>Hanging guests
<a name="Hanging guests"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are
various ways to use libguestfs to find out why a guest is
hanging or unresponsive:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="3%"></td>
<td width="52%">


<p style="margin-top: 1em">Read the log files using
virt-cat:</p> </td>
<td width="31%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> virt&minus;cat Guest /var/log/messages | less</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="3%"></td>
<td width="83%">


<p style="margin-top: 1em">Read the Windows Event Log
(Windows Vista or later only):</p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em">https://rwmj.wordpress.com/2011/04/17/decoding&minus;the&minus;windows&minus;event&minus;log&minus;using&minus;guestfish/#content</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">3.</p></td>
<td width="3%"></td>
<td width="77%">


<p style="margin-top: 1em">Find out which files were last
updated in a guest:</p></td>
<td width="6%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em">https://rwmj.wordpress.com/2012/02/27/using&minus;libguestfs&minus;to&minus;find&minus;out&minus;why&minus;a&minus;windows&minus;guest&minus;was&minus;hanging/#content</p>

<p style="margin-left:17%; margin-top: 1em">This might give
you a clue as to what program is running.</p>

<h2>Hex-dumping sectors from the guest
<a name="Hex-dumping sectors from the guest"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Hex-dump the
boot partition (Master Boot Record / first sector):</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img run : pread&minus;device /dev/sda 0x200 0 |
   hexdump &minus;C</pre>



<p style="margin-left:11%; margin-top: 1em">(<tt>0x200</tt>
= 512 bytes which is the size of traditional
<small>PC</small> sectors)</p>

<p style="margin-left:11%; margin-top: 1em">To hexdump the
N&rsquo;th partition, substitute a number for
<tt>&quot;N&quot;</tt> in the following command:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;ro &minus;a disk.img \
     run : pread&minus;device /dev/sda 0x200 $((N*0x200)) |
   hexdump &minus;C</pre>


<h2>Hex-editing sectors in the guest
<a name="Hex-editing sectors in the guest"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Hex-edit the
boot partition (Master Boot Record / first sector):</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;a disk.img run : hexedit /dev/sda 0x200</pre>


<h2>Install packages (RPMs, Debian packages) in a guest

<a name="Install packages (RPMs, Debian packages) in a guest"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Since
libguestfs 1.26, <i>virt&minus;builder</i>(1),
<i>virt&minus;customize</i>(1) and
<i>virt&minus;sysprep</i>(1) have an
<i>&minus;&minus;install</i> option for installing packages
in Linux guests. (Use virt-customize if you have an existing
guest, or virt-builder if you want to create a guest from
scratch).</p>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;builder fedora&minus;20 &minus;&minus;install emacs</pre>


<h2>Install packages from an alternate repository

<a name="Install packages from an alternate repository"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Since
libguestfs 1.26, you can use <i>virt&minus;builder</i>(1),
<i>virt&minus;customize</i>(1) or
<i>virt&minus;sysprep</i>(1) <i>&minus;&minus;edit</i>
option to edit repository metadata before installing
packages</p>

<p style="margin-left:11%; margin-top: 1em">For example
this would install packages from the updates-testing
repository in Fedora:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;builder fedora&minus;20 \
   &minus;&minus;edit '/etc/yum.repos.d/fedora&minus;updates&minus;testing.repo:
             s/enabled=0/enabled=1/' \
   &minus;&minus;install emacs</pre>


<h2>Install SYSLINUX bootloader in a guest
<a name="Install SYSLINUX bootloader in a guest"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>SYSLINUX</small>
is a small, easy to configure bootloader for Linux and
Windows guests. If your guest is not bootable, you can
install the <small>SYSLINUX</small> bootloader using either
the guestfish commands <tt>&quot;syslinux&quot;</tt> (for
FAT-based guests) or <tt>&quot;extlinux&quot;</tt> (for
ext2/3/4 and btrfs-based guests).</p>

<p style="margin-left:11%; margin-top: 1em">This guide
assumes a Linux guest where <i>/dev/sda1</i> is
<i>/boot</i>, <i>/boot/vmlinuz</i> is the guest kernel, and
<i>/dev/sda3</i> is the root partition. For a Windows guest
you would need a FAT-formatted boot partition and you would
need to use the <tt>&quot;syslinux&quot;</tt> command
instead.</p>

<p style="margin-left:11%; margin-top: 1em">Create a
<i>syslinux.cfg</i> configuration file. You should check the
<small>SYSLINUX</small> documentation at
http://www.syslinux.org but it may look something like
this:</p>

<pre style="margin-left:11%; margin-top: 1em"> DEFAULT linux
 LABEL linux
   SAY Booting the kernel
   KERNEL vmlinuz
   INITRD initrd
   APPEND ro root=/dev/sda3</pre>


<p style="margin-left:11%; margin-top: 1em">Locate the
syslinux master boot record (a file called something like
<i>/usr/share/syslinux/mbr.bin</i>).</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a disk.img &minus;i
 # Upload the master boot record and configuration file:
 &gt;&lt;fs&gt; upload ..../mbr.bin /boot/mbr.bin
 &gt;&lt;fs&gt; upload ..../syslinux.cfg /boot/syslinux.cfg
 # Put the MBR into the boot sector:
 &gt;&lt;fs&gt; copy&minus;file&minus;to&minus;device /boot/mbr.bin /dev/sda size:440
 # Install syslinux on the first partition:
 &gt;&lt;fs&gt; extlinux /boot
 # Set the first partition as bootable:
 &gt;&lt;fs&gt; part&minus;set&minus;bootable /dev/sda 1 true</pre>


<p style="margin-left:11%; margin-top: 1em">See also:
http://rwmj.wordpress.com/2013/04/04/new&minus;in&minus;libguestfs&minus;use&minus;syslinux&minus;or&minus;extlinux&minus;to&minus;make&minus;bootable&minus;guests/#content</p>

<h2>List applications installed in a VM
<a name="List applications installed in a VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Save the
following to a file <i>list&minus;apps.sh</i>:</p>

<pre style="margin-left:11%; margin-top: 1em"> #!/bin/sh &minus;
 set &minus;e
 eval &quot;$(guestfish &minus;&minus;ro &minus;d &quot;$1&quot; &minus;&minus;i &minus;&minus;listen)&quot;
 root=&quot;$(guestfish &minus;&minus;remote inspect&minus;get&minus;roots)&quot;
 guestfish &minus;&minus;remote inspect&minus;list&minus;applications &quot;$root&quot;
 guestfish &minus;&minus;remote exit</pre>


<p style="margin-left:11%; margin-top: 1em">Make the file
executable and then you can run it on any named virtual
machine:</p>

<pre style="margin-left:11%; margin-top: 1em"> # list&minus;apps.sh WinGuest
 [0] = {
   app_name: Mozilla Firefox (3.6.12)
   app_display_name: Mozilla Firefox (3.6.12)
   app_epoch: 0
   app_version: 3.6.12 (en&minus;GB)
   app_release:
   app_install_path: C:\Program Files\Mozilla Firefox
   app_trans_path:
   app_publisher: Mozilla
   app_url: http://www.mozilla.com/en&minus;GB/
   app_source_package:
   app_summary:
   app_description: Mozilla Firefox
 }
 [1] = {
   app_name: VLC media player
   app_display_name: VLC media player 1.1.5
   app_epoch: 0
   app_version: 1.1.5
   app_release:
   app_install_path: C:\Program Files\VideoLAN\VLC
   app_trans_path:
   app_publisher: VideoLAN
   app_url: http://www.videolan.org/
   app_source_package:
   app_summary:
   app_description:
 }</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
run the script on disk images (instead of libvirt virtual
machines), change <tt>&quot;&minus;d
&quot;$1&quot;&quot;</tt> to <tt>&quot;&minus;a
&quot;$1&quot;&quot;</tt>. See also
<i>virt&minus;inspector</i>(1).</p>

<h2>List files and directories in a VM
<a name="List files and directories in a VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use
<i>virt&minus;ls</i>(1).</p>

<h2>List services in a Windows VM
<a name="List services in a Windows VM"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
contains a script that can be used to list out the services
from a Windows <small>VM,</small> and whether those services
run at boot time or are loaded on demand.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2010/12/10/tip&minus;list&minus;services&minus;in&minus;a&minus;windows&minus;guest/#content</p>

<h2>Make a disk image sparse
<a name="Make a disk image sparse"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use
<i>virt&minus;sparsify</i>(1).</p>

<h2>Monitor disk usage over time
<a name="Monitor disk usage over time"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can use
<i>virt&minus;df</i>(1) to monitor disk usage of your guests
over time. The link below contains a guide.</p>


<p style="margin-left:11%; margin-top: 1em">http://virt&minus;tools.org/learning/advanced&minus;virt&minus;df/</p>

<h2>Reading the Windows Event Log from Windows Vista (or later)
<a name="Reading the Windows Event Log from Windows Vista (or later)"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1)
plus the tools described in the link below can be used to
read out the Windows Event Log from any virtual machine
running Windows Vista or a later version.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2011/04/17/decoding&minus;the&minus;windows&minus;event&minus;log&minus;using&minus;guestfish/#content</p>

<h2>Remove root password (Linux)
<a name="Remove root password (Linux)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Using the
<i>virt&minus;edit</i>(1) <i>&minus;e</i> option you can do
simple replacements on files. One use is to remove the root
password from a Linux guest:</p>

<pre style="margin-left:11%; margin-top: 1em"> virt&minus;edit &minus;d domname /etc/passwd &minus;e 's/^root:.*?:/root::/'
 virt&minus;edit &minus;a disk.img /etc/passwd &minus;e 's/^root:.*?:/root::/'</pre>


<h2>Remove Administrator password (Windows)
<a name="Remove Administrator password (Windows)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
contains one technique for removing the Administrator
password from a Windows <small>VM,</small> or to be more
precise, it gives you a command prompt the next time you log
in which you can use to bypass any security:</p>


<p style="margin-left:11%; margin-top: 1em">https://mdbooth.wordpress.com/2010/10/18/resetting&minus;a&minus;windows&minus;guests&minus;administrator&minus;password&minus;with&minus;guestfish/</p>

<h2>Sysprepping a virtual machine (Windows)
<a name="Sysprepping a virtual machine (Windows)"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is possible
to do a &quot;sysprep&quot; using libguestfs alone, although
not straightforward. Currently there is code in the Aeolus
Oz project which does this (using libguestfs). It is likely
we will add this to <i>virt&minus;sysprep</i>(1) in
future.</p>


<p style="margin-left:11%; margin-top: 1em">https://github.com/clalancette/oz
https://www.redhat.com/archives/virt&minus;tools&minus;list/2011&minus;May/msg00019.html</p>

<h2>Unpack a live CD
<a name="Unpack a live CD"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Linux live CDs
often contain multiple layers of disk images wrapped like a
Russian doll. You can use <i>guestfish</i>(1) to look inside
these multiple layers, as outlined in the guide below.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2009/07/15/unpack&minus;the&minus;russian&minus;doll&minus;of&minus;a&minus;f11&minus;live&minus;cd/#content</p>

<h2>Uploading and downloading files
<a name="Uploading and downloading files"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
contains general tips on uploading (copying in) and
downloading (copying out) files from VMs.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2010/12/02/tip&minus;uploading&minus;and&minus;downloading/#content</p>

<h2>Uploading raw filesystem content
<a name="Uploading raw filesystem content"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can use
<i>guestfish</i>(1) to upload whole filesystems into a
<small>VM,</small> even into a filesystem which is encrypted
or buried inside an <small>LV</small> or <small>RAID</small>
device:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;a disk.img run : upload sda1.img /dev/sda1
 guestfish &minus;&minus;rw &minus;d Guest run : upload lv.img /dev/vg_guest/lv_root</pre>


<p style="margin-left:11%; margin-top: 1em">One common
problem is that the filesystem isn&rsquo;t the right size
for the target. If it is too large, there&rsquo;s not much
you can do with libguestfs &minus; you have to prepare the
filesystem differently. But if the filesystem needs to
expand into the target, you can use guestfish to resize it
to the right size:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;&minus;rw &minus;d Guest run : \
   upload lv.img /dev/vg_guest/lv_root : \
   resize2fs /dev/vg_guest/lv_root</pre>


<p style="margin-left:11%; margin-top: 1em">(or use
<tt>&quot;ntfsresize&quot;</tt> if the filesystem is
<small>NTFS</small> ).</p>

<h2>Use libguestfs tools on VMware ESX guests
<a name="Use libguestfs tools on VMware ESX guests"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The link below
explains how to use libguestfs, <i>guestfish</i>(1) and the
virt tools on any VMware <small>ESX</small> guests, by first
sharing the VMware <small>VMFS</small> over sshfs.</p>


<p style="margin-left:11%; margin-top: 1em">https://rwmj.wordpress.com/2011/05/10/tip&minus;use&minus;libguestfs&minus;on&minus;vmware&minus;esx&minus;guests/#content</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>guestfs</i>(3),
<i>guestfish</i>(1), <i>guestfs&minus;examples</i>(3),
<i>guestfs&minus;erlang</i>(3),
<i>guestfs&minus;golang</i>(3),
<i>guestfs&minus;java</i>(3), <i>guestfs&minus;lua</i>(3),
<i>guestfs&minus;ocaml</i>(3), <i>guestfs&minus;perl</i>(3),
<i>guestfs&minus;python</i>(3),
<i>guestfs&minus;ruby</i>(3), http://libguestfs.org/.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Richard W.M.
Jones (<tt>&quot;rjones at redhat dot com&quot;</tt>)</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2009&minus;2016 Red Hat Inc.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page contains examples which we hope you will use in your
programs. The examples may be freely copied, modified and
distributed for any purpose without any restrictions.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">When reporting
a bug, please supply:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The version of libguestfs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Describe the bug accurately and give a way to reproduce
it.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Run <i>libguestfs&minus;test&minus;tool</i>(1) and paste
the <b>complete, unedited</b> output into the bug
report.</p> </td></tr>
 </table>
<hr>
</body>
</html>
