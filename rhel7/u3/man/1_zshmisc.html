<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 23:18:23 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ZSHMISC</title>

</head>
<body>

<h1 align="center">ZSHMISC</h1>

<a href="#NAME">NAME</a><br>
<a href="#SIMPLE COMMANDS &amp; PIPELINES">SIMPLE COMMANDS &amp; PIPELINES</a><br>
<a href="#PRECOMMAND MODIFIERS">PRECOMMAND MODIFIERS</a><br>
<a href="#COMPLEX COMMANDS">COMPLEX COMMANDS</a><br>
<a href="#ALTERNATE FORMS FOR COMPLEX COMMANDS">ALTERNATE FORMS FOR COMPLEX COMMANDS</a><br>
<a href="#RESERVED WORDS">RESERVED WORDS</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#COMMENTS">COMMENTS</a><br>
<a href="#ALIASING">ALIASING</a><br>
<a href="#QUOTING">QUOTING</a><br>
<a href="#REDIRECTION">REDIRECTION</a><br>
<a href="#OPENING FILE DESCRIPTORS USING PARAMETERS">OPENING FILE DESCRIPTORS USING PARAMETERS</a><br>
<a href="#MULTIOS">MULTIOS</a><br>
<a href="#REDIRECTIONS WITH NO COMMAND">REDIRECTIONS WITH NO COMMAND</a><br>
<a href="#COMMAND EXECUTION">COMMAND EXECUTION</a><br>
<a href="#FUNCTIONS">FUNCTIONS</a><br>
<a href="#AUTOLOADING FUNCTIONS">AUTOLOADING FUNCTIONS</a><br>
<a href="#ANONYMOUS FUNCTIONS">ANONYMOUS FUNCTIONS</a><br>
<a href="#SPECIAL FUNCTIONS">SPECIAL FUNCTIONS</a><br>
<a href="#JOBS">JOBS</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#ARITHMETIC EVALUATION">ARITHMETIC EVALUATION</a><br>
<a href="#CONDITIONAL EXPRESSIONS">CONDITIONAL EXPRESSIONS</a><br>
<a href="#EXPANSION OF PROMPT SEQUENCES">EXPANSION OF PROMPT SEQUENCES</a><br>
<a href="#SIMPLE PROMPT ESCAPES">SIMPLE PROMPT ESCAPES</a><br>
<a href="#CONDITIONAL SUBSTRINGS IN PROMPTS">CONDITIONAL SUBSTRINGS IN PROMPTS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshmisc &minus;
everything and then some</p>

<h2>SIMPLE COMMANDS &amp; PIPELINES
<a name="SIMPLE COMMANDS &amp; PIPELINES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A <i>simple
command</i> is a sequence of optional parameter assignments
followed by blank&minus;separated words, with optional
redirections interspersed. The first word is the command to
be executed, and the remaining words, if any, are arguments
to the command. If a command name is given, the parameter
assignments modify the environment of the command when it is
executed. The value of a simple command is its exit status,
or 128 plus the signal number if terminated by a signal. For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo
foo</b></p>

<p style="margin-left:11%; margin-top: 1em">is a simple
command with arguments.</p>

<p style="margin-left:11%; margin-top: 1em">A
<i>pipeline</i> is either a simple command, or a sequence of
two or more simple commands where each command is separated
from the next by &lsquo;<b>|</b>&rsquo; or
&lsquo;<b>|&amp;</b>&rsquo;. Where commands are separated by
&lsquo;<b>|</b>&rsquo;, the standard output of the first
command is connected to the standard input of the next.
&lsquo;<b>|&amp;</b>&rsquo; is shorthand for
&lsquo;<b>2&gt;&amp;1 |</b>&rsquo;, which connects both the
standard output and the standard error of the command to the
standard input of the next. The value of a pipeline is the
value of the last command, unless the pipeline is preceded
by &lsquo;<b>!</b>&rsquo; in which case the value is the
logical inverse of the value of the last command. For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo foo |
sed &rsquo;s/foo/bar/&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">is a pipeline,
where the output (&lsquo;<b>foo</b>&rsquo; plus a newline)
of the first command will be passed to the input of the
second.</p>

<p style="margin-left:11%; margin-top: 1em">If a pipeline
is preceded by &lsquo;<b>coproc</b>&rsquo;, it is executed
as a coprocess; a two&minus;way pipe is established between
it and the parent shell. The shell can read from or write to
the coprocess by means of the
&lsquo;<b>&gt;&amp;p</b>&rsquo; and
&lsquo;<b>&lt;&amp;p</b>&rsquo; redirection operators or
with &lsquo;<b>print &minus;p</b>&rsquo; and &lsquo;<b>read
&minus;p</b>&rsquo;. A pipeline cannot be preceded by both
&lsquo;<b>coproc</b>&rsquo; and &lsquo;<b>!</b>&rsquo;. If
job control is active, the coprocess can be treated in other
than input and output as an ordinary background job.</p>

<p style="margin-left:11%; margin-top: 1em">A
<i>sublist</i> is either a single pipeline, or a sequence of
two or more pipelines separated by
&lsquo;<b>&amp;&amp;</b>&rsquo; or &lsquo;<b>||</b>&rsquo;.
If two pipelines are separated by
&lsquo;<b>&amp;&amp;</b>&rsquo;, the second pipeline is
executed only if the first succeeds (returns a zero status).
If two pipelines are separated by &lsquo;<b>||</b>&rsquo;,
the second is executed only if the first fails (returns a
nonzero status). Both operators have equal precedence and
are left associative. The value of the sublist is the value
of the last pipeline executed. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>dmesg | grep
panic &amp;&amp; print yes</b></p>

<p style="margin-left:11%; margin-top: 1em">is a sublist
consisting of two pipelines, the second just a simple
command which will be executed if and only if the
<b>grep</b> command returns a zero status. If it does not,
the value of the sublist is that return status, else it is
the status returned by the <b>print</b> (almost certainly
zero).</p>

<p style="margin-left:11%; margin-top: 1em">A <i>list</i>
is a sequence of zero or more sublists, in which each
sublist is terminated by &lsquo;<b>;</b>&rsquo;,
&lsquo;<b>&amp;</b>&rsquo;, &lsquo;<b>&amp;|</b>&rsquo;,
&lsquo;<b>&amp;!</b>&rsquo;, or a newline. This terminator
may optionally be omitted from the last sublist in the list
when the list appears as a complex command inside
&lsquo;<b>(</b>...<b>)</b>&rsquo; or
&lsquo;<b>{</b>...<b>}</b>&rsquo;. When a sublist is
terminated by &lsquo;<b>;</b>&rsquo; or newline, the shell
waits for it to finish before executing the next sublist. If
a sublist is terminated by a &lsquo;<b>&amp;</b>&rsquo;,
&lsquo;<b>&amp;|</b>&rsquo;, or &lsquo;<b>&amp;!</b>&rsquo;,
the shell executes the last pipeline in it in the
background, and does not wait for it to finish (note the
difference from other shells which execute the whole sublist
in the background). A backgrounded pipeline returns a status
of zero.</p>

<p style="margin-left:11%; margin-top: 1em">More generally,
a list can be seen as a set of any shell commands
whatsoever, including the complex commands below; this is
implied wherever the word &lsquo;list&rsquo; appears in
later descriptions. For example, the commands in a shell
function form a special sort of list.</p>

<h2>PRECOMMAND MODIFIERS
<a name="PRECOMMAND MODIFIERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A simple
command may be preceded by a <i>precommand modifier</i>,
which will alter how the command is interpreted. These
modifiers are shell builtin commands with the exception of
<b>nocorrect</b> which is a reserved word.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>&minus;</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>The command is executed with a
&lsquo;<b>&minus;</b>&rsquo; prepended to its <b>argv[0]</b>
string.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>builtin</b></p>

<p style="margin-left:22%;">The command word is taken to be
the name of a builtin command, rather than a shell function
or external command.</p>

<p style="margin-left:11%;"><b>command</b> [
<b>&minus;pvV</b> ]</p>

<p style="margin-left:22%;">The command word is taken to be
the name of an external command, rather than a shell
function or builtin. If the <b>POSIX_BUILTINS</b> option is
set, builtins will also be executed but certain special
properties of them are suppressed. The <b>&minus;p</b> flag
causes a default path to be searched instead of that in
<b>$path</b>. With the <b>&minus;v</b> flag, <b>command</b>
is similar to <b>whence</b> and with <b>&minus;V</b>, it is
equivalent to <b>whence &minus;v</b>.</p>

<p style="margin-left:11%;"><b>exec</b> [ <b>&minus;cl</b>
] [ <b>&minus;a</b> <i>argv0</i> ]</p>

<p style="margin-left:22%;">The following command together
with any arguments is run in place of the current process,
rather than as a sub&minus;process. The shell does not fork
and is replaced. The shell does not invoke <b>TRAPEXIT</b>,
nor does it source <b>zlogout</b> files. The options are
provided for compatibility with other shells.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;c</b> option clears the environment.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;l</b> option is equivalent to the <b>&minus;</b>
precommand modifier, to treat the replacement command as a
login shell; the command is executed with a <b>&minus;</b>
prepended to its <b>argv[0]</b> string. This flag has no
effect if used together with the <b>&minus;a</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;a</b> option is used to specify explicitly the
<b>argv[0]</b> string (the name of the command as seen by
the process itself) to be used by the replacement command
and is directly equivalent to setting a value for the
<b>ARGV0</b> environment variable.</p>

<p style="margin-left:11%;"><b>nocorrect</b></p>

<p style="margin-left:22%;">Spelling correction is not done
on any of the words. This must appear before any other
precommand modifier, as it is interpreted immediately,
before any parsing is done. It has no effect in
non&minus;interactive shells.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>noglob</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Filename generation (globbing) is not performed on any
of the words.</p></td></tr>
</table>

<h2>COMPLEX COMMANDS
<a name="COMPLEX COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A <i>complex
command</i> in zsh is one of the following: <b><br>
if</b> <i>list</i> <b>then</b> <i>list</i> [ <b>elif</b>
<i>list</i> <b>then</b> <i>list</i> ] ... [ <b>else</b>
<i>list</i> ] <b>fi</b></p>

<p style="margin-left:22%;">The <b>if</b> <i>list</i> is
executed, and if it returns a zero exit status, the
<b>then</b> <i>list</i> is executed. Otherwise, the
<b>elif</b> <i>list</i> is executed and if its status is
zero, the <b>then</b> <i>list</i> is executed. If each
<b>elif</b> <i>list</i> returns nonzero status, the
<b>else</b> <i>list</i> is executed.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ... [
<b>in</b> <i>word</i> ... ] <i>term</i> <b>do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. Expand the list of <i>word</i>s,
and set the parameter <i>name</i> to each of them in turn,
executing <i>list</i> each time. If the <b>in</b>
<i>word</i> is omitted, use the positional parameters
instead of the <i>word</i>s.</p>

<p style="margin-left:22%; margin-top: 1em">More than one
parameter <i>name</i> can appear before the list of
<i>word</i>s. If <i>N name</i>s are given, then on each
execution of the loop the next <b>N</b> <i>word</i>s are
assigned to the corresponding parameters. If there are more
<i>name</i>s than remaining <i>word</i>s, the remaining
parameters are each set to the empty string. Execution of
the loop ends when there is no remaining <i>word</i> to
assign to the first <i>name</i>. It is only possible for
<b>in</b> to appear as the first <i>name</i> in the list,
else it will be treated as marking the end of the list.</p>

<p style="margin-left:11%;"><b>for ((</b> [<i>expr1</i>]
<b>;</b> [<i>expr2</i>] <b>;</b> [<i>expr3</i>] <b>)) do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">The arithmetic expression
<i>expr1</i> is evaluated first (see the section
&lsquo;Arithmetic Evaluation&rsquo;). The arithmetic
expression <i>expr2</i> is repeatedly evaluated until it
evaluates to zero and when non&minus;zero, <i>list</i> is
executed and the arithmetic expression <i>expr3</i>
evaluated. If any expression is omitted, then it behaves as
if it evaluated to 1.</p>

<p style="margin-left:11%;"><b>while</b> <i>list</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;">Execute the <b>do</b>
<i>list</i> as long as the <b>while</b> <i>list</i> returns
a zero exit status.</p>

<p style="margin-left:11%;"><b>until</b> <i>list</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;">Execute the <b>do</b>
<i>list</i> as long as <b>until</b> <i>list</i> returns a
nonzero exit status.</p>

<p style="margin-left:11%;"><b>repeat</b> <i>word</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;"><i>word</i> is expanded and
treated as an arithmetic expression, which must evaluate to
a number <i>n</i>. <i>list</i> is then executed <i>n</i>
times.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>repeat</b> syntax is disabled by default when the shell
starts in a mode emulating another shell. It can be enabled
with the command &lsquo;<b>enable &minus;r
repeat</b>&rsquo;</p>

<p style="margin-left:11%;"><b>case</b> <i>word</i>
<b>in</b> [ [<b>(</b>] <i>pattern</i> [ <b>|</b>
<i>pattern</i> ] ... <b>)</b> <i>list</i>
(<b>;;</b>|<b>;&amp;</b>|<b>;|</b>) ] ... <b><br>
esac</b></p>

<p style="margin-left:22%;">Execute the <i>list</i>
associated with the first <i>pattern</i> that matches
<i>word</i>, if any. The form of the patterns is the same as
that used for filename generation. See the section
&lsquo;Filename Generation&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>list</i> that is executed is terminated with
<b>;&amp;</b> rather than <b>;;</b>, the following list is
also executed. The rule for the terminator of the following
list <b>;;</b>, <b>;&amp;</b> or <b>;|</b> is applied unless
the <b>esac</b> is reached.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>list</i> that is executed is terminated with <b>;|</b>
the shell continues to scan the <i>pattern</i>s looking for
the next match, executing the corresponding <i>list</i>, and
applying the rule for the corresponding terminator
<b>;;</b>, <b>;&amp;</b> or <b>;|</b>. Note that <i>word</i>
is not re&minus;expanded; all applicable <i>pattern</i>s are
tested with the same <i>word</i>.</p>

<p style="margin-left:11%;"><b>select</b> <i>name</i> [
<b>in</b> <i>word</i> ... <i>term</i> ] <b>do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">where <i>term</i> is one or
more newline or <b>;</b> to terminate the <i>word</i>s.
Print the set of <i>word</i>s, each preceded by a number. If
the <b>in</b> <i>word</i> is omitted, use the positional
parameters. The <b>PROMPT3</b> prompt is printed and a line
is read from the line editor if the shell is interactive and
that is active, or else standard input. If this line
consists of the number of one of the listed <i>word</i>s,
then the parameter <i>name</i> is set to the <i>word</i>
corresponding to this number. If this line is empty, the
selection list is printed again. Otherwise, the value of the
parameter <i>name</i> is set to null. The contents of the
line read from standard input is saved in the parameter
<b>REPLY</b>. <i>list</i> is executed for each selection
until a break or end&minus;of&minus;file is encountered.</p>

<p style="margin-left:11%;"><b>(</b> <i>list</i>
<b>)</b></p>

<p style="margin-left:22%;">Execute <i>list</i> in a
subshell. Traps set by the <b>trap</b> builtin are reset to
their default values while executing <i>list</i>.</p>

<p style="margin-left:11%;"><b>{</b> <i>list</i>
<b>}</b></p>

<p style="margin-left:22%;">Execute <i>list</i>.</p>

<p style="margin-left:11%;"><b>{</b> <i>try&minus;list</i>
<b>} always {</b> <i>always&minus;list</i> <b>}</b></p>

<p style="margin-left:22%;">First execute
<i>try&minus;list</i>. Regardless of errors, or
<b>break</b>, <b>continue</b>, or <b>return</b> commands
encountered within <i>try&minus;list</i>, execute
<i>always&minus;list</i>. Execution then continues from the
result of the execution of <i>try&minus;list</i>; in other
words, any error, or <b>break</b>, <b>continue</b>, or
<b>return</b> command is treated in the normal way, as if
<i>always&minus;list</i> were not present. The two chunks of
code are referred to as the &lsquo;try block&rsquo; and the
&lsquo;always block&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Optional
newlines or semicolons may appear after the <b>always</b>;
note, however, that they may <i>not</i> appear between the
preceding closing brace and the <b>always</b>.</p>

<p style="margin-left:22%; margin-top: 1em">An
&lsquo;error&rsquo; in this context is a condition such as a
syntax error which causes the shell to abort execution of
the current function, script, or list. Syntax errors
encountered while the shell is parsing the code do not cause
the <i>always&minus;list</i> to be executed. For example, an
erroneously constructed <b>if</b> block in
<b>try&minus;list</b> would cause the shell to abort during
parsing, so that <b>always&minus;list</b> would not be
executed, while an erroneous substitution such as
<b>${*foo*}</b> would cause a run&minus;time error, after
which <b>always&minus;list</b> would be executed.</p>

<p style="margin-left:22%; margin-top: 1em">An error
condition can be tested and reset with the special integer
variable <b>TRY_BLOCK_ERROR</b>. Outside an
<b>always&minus;list</b> the value is irrelevant, but it is
initialised to <b>&minus;1</b>. Inside
<b>always&minus;list</b>, the value is 1 if an error
occurred in the <b>try&minus;list</b>, else 0. If
<b>TRY_BLOCK_ERROR</b> is set to 0 during the
<b>always&minus;list</b>, the error condition caused by the
<b>try&minus;list</b> is reset, and shell execution
continues normally after the end of
<b>always&minus;list</b>. Altering the value during the
<b>try&minus;list</b> is not useful (unless this forms part
of an enclosing <b>always</b> block).</p>

<p style="margin-left:22%; margin-top: 1em">Regardless of
<b>TRY_BLOCK_ERROR</b>, after the end of
<b>always&minus;list</b> the normal shell status <b>$?</b>
is the value returned from <b>always&minus;list</b>. This
will be non&minus;zero if there was an error, even if
<b>TRY_BLOCK_ERROR</b> was set to zero.</p>

<p style="margin-left:22%; margin-top: 1em">The following
executes the given code, ignoring any errors it causes. This
is an alternative to the usual convention of protecting code
by executing it in a subshell.</p>

<p style="margin-left:32%; margin-top: 1em"><b>{ <br>
# code which may cause an error <br>
} always { <br>
# This code is executed regardless of the error. <br>
(( TRY_BLOCK_ERROR = 0 )) <br>
} <br>
# The error condition has been reset.</b></p>

<p style="margin-left:22%; margin-top: 1em">An <b>exit</b>
command (or a <b>return</b> command executed at the
outermost function level of a script) encountered in
<b>try&minus;list</b> does <i>not</i> cause the execution of
<i>always&minus;list</i>. Instead, the shell exits
immediately after any <b>EXIT</b> trap has been
executed.</p>

<p style="margin-left:11%;"><b>function</b> <i>word</i> ...
[ <b>()</b> ] [ <i>term</i> ] <b>{</b> <i>list</i> <b>}</b>
<i><br>
word</i> ... <b>()</b> [ <i>term</i> ] <b>{</b> <i>list</i>
<b>}</b> <i><br>
word</i> ... <b>()</b> [ <i>term</i> ] <i>command</i></p>

<p style="margin-left:22%;">where <i>term</i> is one or
more newline or <b>;</b>. Define a function which is
referenced by any one of <i>word</i>. Normally, only one
<i>word</i> is provided; multiple <i>word</i>s are usually
only useful for setting traps. The body of the function is
the <i>list</i> between the <b>{</b> and <b>}</b>. See the
section &lsquo;Functions&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>SH_GLOB</b> is set for compatibility with other shells,
then whitespace may appear between between the left and
right parentheses when there is a single <i>word</i>;
otherwise, the parentheses will be treated as forming a
globbing pattern in that case.</p>

<p style="margin-left:11%;"><b>time</b> [ <i>pipeline</i>
]</p>

<p style="margin-left:22%;">The <i>pipeline</i> is
executed, and timing statistics are reported on the standard
error in the form specified by the <b>TIMEFMT</b> parameter.
If <i>pipeline</i> is omitted, print statistics about the
shell process and its children.</p>

<p style="margin-left:11%;"><b>[[</b> <i>exp</i>
<b>]]</b></p>

<p style="margin-left:22%;">Evaluates the conditional
expression <i>exp</i> and return a zero exit status if it is
true. See the section &lsquo;Conditional Expressions&rsquo;
for a description of <i>exp</i>.</p>

<h2>ALTERNATE FORMS FOR COMPLEX COMMANDS
<a name="ALTERNATE FORMS FOR COMPLEX COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Many of
zsh&rsquo;s complex commands have alternate forms. These are
non&minus;standard and are likely not to be obvious even to
seasoned shell programmers; they should not be used anywhere
that portability of shell code is a concern.</p>

<p style="margin-left:11%; margin-top: 1em">The short
versions below only work if <i>sublist</i> is of the form
&lsquo;<b>{</b> <i>list</i> <b>}</b>&rsquo; or if the
<b>SHORT_LOOPS</b> option is set. For the <b>if</b>,
<b>while</b> and <b>until</b> commands, in both these cases
the test part of the loop must also be suitably delimited,
such as by &lsquo;<b>[[ ... ]]</b>&rsquo; or &lsquo;<b>((
... ))</b>&rsquo;, else the end of the test will not be
recognized. For the <b>for</b>, <b>repeat</b>, <b>case</b>
and <b>select</b> commands no such special form for the
arguments is necessary, but the other condition (the special
form of <i>sublist</i> or use of the <b>SHORT_LOOPS</b>
option) still applies. <b><br>
if</b> <i>list</i> <b>{</b> <i>list</i> <b>}</b> [
<b>elif</b> <i>list</i> <b>{</b> <i>list</i> <b>}</b> ] ...
[ <b>else {</b> <i>list</i> <b>}</b> ]</p>

<p style="margin-left:22%;">An alternate form of <b>if</b>.
The rules mean that</p>

<p style="margin-left:32%; margin-top: 1em"><b>if [[
&minus;o ignorebraces ]] { <br>
print yes <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">works, but</p>

<p style="margin-left:32%; margin-top: 1em"><b>if true { #
Does not work! <br>
print yes <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">does
<i>not</i>, since the test is not suitably delimited.</p>

<p style="margin-left:11%;"><b>if</b> <i>list
sublist</i></p>

<p style="margin-left:22%;">A short form of the alternate
&lsquo;if&rsquo;. The same limitations on the form of
<i>list</i> apply as for the previous form.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ...
<b>(</b> <i>word</i> ... <b>)</b> <i>sublist</i></p>

<p style="margin-left:22%;">A short form of <b>for</b>.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ... [
<b>in</b> <i>word</i> ... ] <i>term sublist</i></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. Another short form of
<b>for</b>.</p>

<p style="margin-left:11%;"><b>for ((</b> [<i>expr1</i>]
<b>;</b> [<i>expr2</i>] <b>;</b> [<i>expr3</i>] <b>))</b>
<i>sublist</i></p>

<p style="margin-left:22%;">A short form of the arithmetic
<b>for</b> command.</p>

<p style="margin-left:11%;"><b>foreach</b> <i>name</i> ...
<b>(</b> <i>word</i> ... <b>)</b> <i>list</i> <b>end</b></p>

<p style="margin-left:22%;">Another form of <b>for</b>.</p>

<p style="margin-left:11%;"><b>while</b> <i>list</i>
<b>{</b> <i>list</i> <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>while</b>. Note the limitations on the form of
<i>list</i> mentioned above.</p>

<p style="margin-left:11%;"><b>until</b> <i>list</i>
<b>{</b> <i>list</i> <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>until</b>. Note the limitations on the form of
<i>list</i> mentioned above.</p>

<p style="margin-left:11%;"><b>repeat</b> <i>word
sublist</i></p>

<p style="margin-left:22%;">This is a short form of
<b>repeat</b>.</p>

<p style="margin-left:11%;"><b>case</b> <i>word</i>
<b>{</b> [ [<b>(</b>] <i>pattern</i> [ <b>|</b>
<i>pattern</i> ] ... <b>)</b> <i>list</i>
(<b>;;</b>|<b>;&amp;</b>|<b>;|</b>) ] ... <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>case</b>.</p>

<p style="margin-left:11%;"><b>select</b> <i>name</i> [
<b>in</b> <i>word term</i> ] <i>sublist</i></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. A short form of <b>select</b>.</p>

<h2>RESERVED WORDS
<a name="RESERVED WORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
words are recognized as reserved words when used as the
first word of a command unless quoted or disabled using
<b>disable &minus;r</b>:</p>

<p style="margin-left:11%; margin-top: 1em"><b>do done esac
then elif else fi for case if while function repeat time
until select coproc nocorrect foreach end ! [[ { }</b></p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
&lsquo;<b>}</b>&rsquo; is recognized in any position if
neither the <b>IGNORE_BRACES</b> option nor the
<b>IGNORE_CLOSE_BRACES</b> option is set.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certain errors
are treated as fatal by the shell: in an interactive shell,
they cause control to return to the command line, and in a
non&minus;interactive shell they cause the shell to be
aborted. In older versions of zsh, a non&minus;interactive
shell running a script would not abort completely, but would
resume execution at the next command to be read from the
script, skipping the remainder of any functions or shell
constructs such as loops or conditions; this somewhat
illogical behaviour can be recovered by setting the option
<b>CONTINUE_ON_ERROR</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Fatal errors
found in non&minus;interactive shells include: <br>
Failure to parse shell options passed when invoking the
shell <br>
Failure to change options with the <b>set</b> builtin <br>
Parse errors of all sorts, including failures to parse</p>

<p style="margin-left:22%;">mathematical expressions</p>

<p style="margin-left:11%;">Failures to set or modify
variable behaviour with <b>typeset</b>,</p>

<p style="margin-left:22%;"><b>local</b>, <b>declare</b>,
<b>export</b>, <b>integer</b>, <b>float</b></p>

<p style="margin-left:11%;">Execution of incorrectly
positioned loop control structures</p>

<p style="margin-left:22%;">(<b>continue</b>,
<b>break</b>)</p>

<p style="margin-left:11%;">Attempts to use regular
expression with no regular expression</p>

<p style="margin-left:22%;">module available</p>

<p style="margin-left:11%;">Disallowed operations when the
<b>RESTRICTED</b> options is set <br>
Failure to create a pipe needed for a pipeline <br>
Failure to create a multio <br>
Failure to autoload a module needed for a declared shell
feature <br>
Errors creating command or process substitutions <br>
Syntax errors in glob qualifiers <br>
File generation errors where not caught by the option
<b>BAD_PATTERN</b> <br>
All bad patterns used for matching within case statements
<br>
File generation failures where not caused by <b>NO_MATCH</b>
or <br>
All file generation errors where the pattern was used to
create a</p>

<p style="margin-left:22%;">multio</p>

<p style="margin-left:11%;">Memory errors where detected by
the shell <br>
Invalid subscripts to shell variables <br>
Attempts to assign read&minus;only variables <br>
Logical errors with variables such as assignment to the
wrong type <br>
Use of invalid variable names <br>
Errors in variable substitution syntax <br>
Failure to convert characters in
<b>$&rsquo;</b>...<b>&rsquo;</b> expressions</p>

<p style="margin-left:22%;">similar options</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>POSIX_BUILTINS</b> option is set, more errors associated
with shell builtin commands are treated as fatal, as
specified by the POSIX standard.</p>

<h2>COMMENTS
<a name="COMMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In
non&minus;interactive shells, or in interactive shells with
the <b>INTERACTIVE_COMMENTS</b> option set, a word beginning
with the third character of the <b>histchars</b> parameter
(&lsquo;<b>#</b>&rsquo; by default) causes that word and all
the following characters up to a newline to be ignored.</p>

<h2>ALIASING
<a name="ALIASING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Every token in
the shell input is checked to see if there is an alias
defined for it. If so, it is replaced by the text of the
alias if it is in command position (if it could be the first
word of a simple command), or if the alias is global. If the
text ends with a space, the next word in the shell input is
treated as though it were in command position for purposes
of alias expansion. An alias is defined using the
<b>alias</b> builtin; global aliases may be defined using
the <b>&minus;g</b> option to that builtin.</p>

<p style="margin-left:11%; margin-top: 1em">Alias expansion
is done on the shell input before any other expansion except
history expansion. Therefore, if an alias is defined for the
word <b>foo</b>, alias expansion may be avoided by quoting
part of the word, e.g. <b>\foo</b>. Any form of quoting
works, although there is nothing to prevent an alias being
defined for the quoted form such as <b>\foo</b> as well. For
use with completion, which would remove an initial backslash
followed by a character that isn&rsquo;t special, it may be
more convenient to quote the word by starting with a single
quote, i.e. <b>&rsquo;foo</b>; completion will automatically
add the trailing single quote.</p>

<p style="margin-left:11%; margin-top: 1em">There is a
commonly encountered problem with aliases illustrated by the
following code:</p>

<p style="margin-left:22%; margin-top: 1em"><b>alias
echobar=&rsquo;echo bar&rsquo;; echobar</b></p>

<p style="margin-left:11%; margin-top: 1em">This prints a
message that the command <b>echobar</b> could not be found.
This happens because aliases are expanded when the code is
read in; the entire line is read in one go, so that when
<b>echobar</b> is executed it is too late to expand the
newly defined alias. This is often a problem in shell
scripts, functions, and code executed with
&lsquo;<b>source</b>&rsquo; or &lsquo;<b>.</b>&rsquo;.
Consequently, use of functions rather than aliases is
recommended in non&minus;interactive code.</p>

<p style="margin-left:11%; margin-top: 1em">Note also the
unhelpful interaction of aliases and function
definitions:</p>

<p style="margin-left:22%; margin-top: 1em"><b>alias
func=&rsquo;noglob func&rsquo; <br>
func() { <br>
echo Do something with $* <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">Because aliases
are expanded in function definitions, this causes the
following command to be executed:</p>

<p style="margin-left:22%; margin-top: 1em"><b>noglob
func() { <br>
echo Do something with $* <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">which defines
<b>noglob</b> as well as <b>func</b> as functions with the
body given. To avoid this, either quote the name <b>func</b>
or use the alternative function definition form
&lsquo;<b>function func</b>&rsquo;. Ensuring the alias is
defined after the function works but is problematic if the
code fragment might be re&minus;executed.</p>

<h2>QUOTING
<a name="QUOTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A character may
be <i>quoted</i> (that is, made to stand for itself) by
preceding it with a &lsquo;<b>\</b>&rsquo;.
&lsquo;<b>\</b>&rsquo; followed by a newline is ignored.</p>

<p style="margin-left:11%; margin-top: 1em">A string
enclosed between &lsquo;<b>$&rsquo;</b>&rsquo; and
&lsquo;<b>&rsquo;</b>&rsquo; is processed the same way as
the string arguments of the <b>print</b> builtin, and the
resulting string is considered to be entirely quoted. A
literal &lsquo;<b>&rsquo;</b>&rsquo; character can be
included in the string by using the
&lsquo;<b>\&rsquo;</b>&rsquo; escape.</p>

<p style="margin-left:11%; margin-top: 1em">All characters
enclosed between a pair of single quotes
(<b>&rsquo;&rsquo;</b>) that is not preceded by a
&lsquo;<b>$</b>&rsquo; are quoted. A single quote cannot
appear within single quotes unless the option
<b>RC_QUOTES</b> is set, in which case a pair of single
quotes are turned into a single quote. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
&rsquo;&rsquo;&rsquo;&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs nothing
apart from a newline if <b>RC_QUOTES</b> is not set, but one
single quote if it is set.</p>

<p style="margin-left:11%; margin-top: 1em">Inside double
quotes (<b>&quot;&quot;</b>), parameter and command
substitution occur, and &lsquo;<b>\</b>&rsquo; quotes the
characters &lsquo;<b>\</b>&rsquo;,
&lsquo;<b>&lsquo;</b>&rsquo;, &lsquo;<b>&quot;</b>&rsquo;,
and &lsquo;<b>$</b>&rsquo;.</p>

<h2>REDIRECTION
<a name="REDIRECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a command is
followed by <b>&amp;</b> and job control is not active, then
the default standard input for the command is the empty file
<b>/dev/null</b>. Otherwise, the environment for the
execution of a command contains the file descriptors of the
invoking shell as modified by input/output
specifications.</p>

<p style="margin-left:11%; margin-top: 1em">The following
may appear anywhere in a simple command or may precede or
follow a complex command. Expansion occurs before
<i>word</i> or <i>digit</i> is used except as noted below.
If the result of substitution on <i>word</i> produces more
than one filename, redirection occurs for each separate
filename in turn.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&lt;</b> <i>word</i></p></td>
<td width="2%"></td>
<td width="69%">


<p>Open file <i>word</i> for reading as standard input.</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Open file <i>word</i> for
reading and writing as standard input. If the file does not
exist then it is created.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&gt;</b> <i>word</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Open file <i>word</i> for writing as standard output. If
the file does not exist then it is created. If the file
exists, and the <b>CLOBBER</b> option is unset, this causes
an error; otherwise, it is truncated to zero length.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&gt;|</b> <i>word</i>
<b><br>
&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Same as <b>&gt;</b>, except
that the file is truncated to zero length if it exists, even
if <b>CLOBBER</b> is unset.</p>

<p style="margin-left:11%;"><b>&gt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Open file <i>word</i> for
writing in append mode as standard output. If the file does
not exist, and the <b>CLOBBER</b> option is unset, this
causes an error; otherwise, the file is created.</p>

<p style="margin-left:11%;"><b>&gt;&gt;|</b> <i>word</i>
<b><br>
&gt;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Same as <b>&gt;&gt;</b>, except
that the file is created if it does not exist, even if
<b>CLOBBER</b> is unset.</p>


<p style="margin-left:11%;"><b>&lt;&lt;</b>[<b>&minus;</b>]
<i>word</i></p>

<p style="margin-left:22%;">The shell input is read up to a
line that is the same as <i>word</i>, or to an
end&minus;of&minus;file. No parameter expansion, command
substitution or filename generation is performed on
<i>word</i>. The resulting document, called a
<i>here&minus;document</i>, becomes the standard input.</p>

<p style="margin-left:22%; margin-top: 1em">If any
character of <i>word</i> is quoted with single or double
quotes or a &lsquo;<b>\</b>&rsquo;, no interpretation is
placed upon the characters of the document. Otherwise,
parameter and command substitution occurs,
&lsquo;<b>\</b>&rsquo; followed by a newline is removed, and
&lsquo;<b>\</b>&rsquo; must be used to quote the characters
&lsquo;<b>\</b>&rsquo;, &lsquo;<b>$</b>&rsquo;,
&lsquo;<b>&lsquo;</b>&rsquo; and the first character of
<i>word</i>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<i>word</i> itself does not undergo shell expansion.
Backquotes in <i>word</i> do not have their usual effect;
instead they behave similarly to double quotes, except that
the backquotes themselves are passed through unchanged.
(This information is given for completeness and it is not
recommended that backquotes be used.) Quotes in the form
<b>$&rsquo;</b><i>...</i><b>&rsquo;</b> have their standard
effect of expanding backslashed references to special
characters.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&lt;&lt;&minus;</b> is used, then all leading tabs are
stripped from <i>word</i> and from the document.</p>

<p style="margin-left:11%;"><b>&lt;&lt;&lt;</b>
<i>word</i></p>

<p style="margin-left:22%;">Perform shell expansion on
<i>word</i> and pass the result to standard input. This is
known as a <i>here&minus;string</i>. Compare the use of
<i>word</i> in here&minus;documents above, where <i>word</i>
does not undergo shell expansion.</p>

<p style="margin-left:11%;"><b>&lt;&amp;</b> <i>number</i>
<b><br>
&gt;&amp;</b> <i>number</i></p>

<p style="margin-left:22%;">The standard input/output is
duplicated from file descriptor <i>number</i> (see
<i>dup2</i>(2)).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&lt;&amp; &minus;</b></p></td>
<td width="5%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&gt;&amp; &minus;</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Close the standard input/output.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&lt;&amp; p</b></p></td>
<td width="5%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&gt;&amp; p</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The input/output from/to the coprocess is moved to the
standard input/output.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&gt;&amp;</b> <i>word</i>
<b><br>
&amp;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">(Except where
&lsquo;<b>&gt;&amp;</b> <i>word</i>&rsquo; matches one of
the above syntaxes; &lsquo;<b>&amp;&gt;</b>&rsquo; can
always be used to avoid this ambiguity.) Redirects both
standard output and standard error (file descriptor 2) in
the manner of &lsquo;<b>&gt;</b> <i>word</i>&rsquo;. Note
that this does <i>not</i> have the same effect as
&lsquo;<b>&gt;</b> <i>word</i> <b>2&gt;&amp;1</b>&rsquo; in
the presence of multios (see the section below).</p>

<p style="margin-left:11%;"><b>&gt;&amp;|</b> <i>word</i>
<b><br>
&gt;&amp;!</b> <i>word</i> <b><br>
&amp;&gt;|</b> <i>word</i> <b><br>
&amp;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;|</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>&gt;&gt;&amp;</b>
<i>word</i> <b><br>
&amp;&gt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;&gt;</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>&gt;&gt;&amp;|</b>
<i>word</i> <b><br>
&gt;&gt;&amp;!</b> <i>word</i> <b><br>
&amp;&gt;&gt;|</b> <i>word</i> <b><br>
&amp;&gt;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;&gt;|</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If one of the
above is preceded by a digit, then the file descriptor
referred to is that specified by the digit instead of the
default 0 or 1. The order in which redirections are
specified is significant. The shell evaluates each
redirection in terms of the (<i>file descriptor</i>,
<i>file</i>) association at the time of evaluation. For
example:</p>

<p style="margin-left:22%; margin-top: 1em">...
<b>1&gt;</b><i>fname</i> <b>2&gt;&amp;1</b></p>

<p style="margin-left:11%; margin-top: 1em">first
associates file descriptor 1 with file <i>fname</i>. It then
associates file descriptor 2 with the file associated with
file descriptor 1 (that is, <i>fname</i>). If the order of
redirections were reversed, file descriptor 2 would be
associated with the terminal (assuming file descriptor 1 had
been) and then file descriptor 1 would be associated with
file <i>fname</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>|&amp;</b>&rsquo; command separator described in
<i>Simple Commands &amp; Pipelines</i> in <i>zshmisc</i>(1)
is a shorthand for &lsquo;<b>2&gt;&amp;1 |</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The various
forms of process substitution,
&lsquo;<b>&lt;(</b><i>list</i><b>)</b>&rsquo;, and
&lsquo;<b>=(</b><i>list</i>())&rsquo; for input and
&lsquo;<b>&gt;(</b><i>list</i><b>)</b>&rsquo; for output,
are often used together with redirection. For example, if
<i>word</i> in an output redirection is of the form
&lsquo;<b>&gt;(</b><i>list</i><b>)</b>&rsquo; then the
output is piped to the command represented by <i>list</i>.
See <i>Process Substitution</i> in <i>zshexpn</i>(1).</p>

<h2>OPENING FILE DESCRIPTORS USING PARAMETERS
<a name="OPENING FILE DESCRIPTORS USING PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When the shell
is parsing arguments to a command, and the shell option
<b>IGNORE_BRACES</b> is not set, a different form of
redirection is allowed: instead of a digit before the
operator there is a valid shell identifier enclosed in
braces. The shell will open a new file descriptor that is
guaranteed to be at least 10 and set the parameter named by
the identifier to the file descriptor opened. No whitespace
is allowed between the closing brace and the redirection
character. For example:</p>

<p style="margin-left:22%; margin-top: 1em">...
{myfd}&gt;&amp;1</p>

<p style="margin-left:11%; margin-top: 1em">This opens a
new file descriptor that is a duplicate of file descriptor 1
and sets the parameter <b>myfd</b> to the number of the file
descriptor, which will be at least 10. The new file
descriptor can be written to using the syntax
<b>&gt;&amp;$myfd</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The syntax
<b>{</b><i>varid</i><b>}&gt;&amp;&minus;</b>, for example
<b>{myfd}&gt;&amp;&minus;</b>, may be used to close a file
descriptor opened in this fashion. Note that the parameter
given by <i>varid</i> must previously be set to a file
descriptor in this case.</p>

<p style="margin-left:11%; margin-top: 1em">It is an error
to open or close a file descriptor in this fashion when the
parameter is readonly. However, it is not an error to read
or write a file descriptor using
<b>&lt;&amp;$</b><i>param</i> or
<b>&gt;&amp;$</b><i>param</i> if <i>param</i> is
readonly.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>CLOBBER</b> is unset, it is an error to open a file
descriptor using a parameter that is already set to an open
file descriptor previously allocated by this mechanism.
Unsetting the parameter before using it for allocating a
file descriptor avoids the error.</p>

<p style="margin-left:11%; margin-top: 1em">Note that this
mechanism merely allocates or closes a file descriptor; it
does not perform any redirections from or to it. It is
usually convenient to allocate a file descriptor prior to
use as an argument to <b>exec</b>. The syntax does not in
any case work when used around complex commands such as
parenthesised subshells or loops, where the opening brace is
interpreted as part of a command list to be executed in the
current shell.</p>

<p style="margin-left:11%; margin-top: 1em">The following
shows a typical sequence of allocation, use, and closing of
a file descriptor:</p>

<p style="margin-left:22%; margin-top: 1em"><b>integer myfd
<br>
exec {myfd}&gt;~/logs/mylogfile.txt <br>
print This is a log message. &gt;&amp;$myfd <br>
exec {myfd}&gt;&amp;&minus;</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that the
expansion of the variable in the expression
<b>&gt;&amp;$myfd</b> occurs at the point the redirection is
opened. This is after the expansion of command arguments and
after any redirections to the left on the command line have
been processed.</p>

<h2>MULTIOS
<a name="MULTIOS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the user
tries to open a file descriptor for writing more than once,
the shell opens the file descriptor as a pipe to a process
that copies its input to all the specified outputs, similar
to <b>tee</b>, provided the <b>MULTIOS</b> option is set, as
it is by default. Thus:</p>

<p style="margin-left:22%; margin-top: 1em"><b>date &gt;foo
&gt;bar</b></p>

<p style="margin-left:11%; margin-top: 1em">writes the date
to two files, named &lsquo;<b>foo</b>&rsquo; and
&lsquo;<b>bar</b>&rsquo;. Note that a pipe is an implicit
redirection; thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>date &gt;foo
| cat</b></p>

<p style="margin-left:11%; margin-top: 1em">writes the date
to the file &lsquo;<b>foo</b>&rsquo;, and also pipes it to
cat.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>MULTIOS</b> option is set, the word after a redirection
operator is also subjected to filename generation
(globbing). Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>: &gt;
*</b></p>

<p style="margin-left:11%; margin-top: 1em">will truncate
all files in the current directory, assuming there&rsquo;s
at least one. (Without the <b>MULTIOS</b> option, it would
create an empty file called &lsquo;<b>*</b>&rsquo;.)
Similarly, you can do</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo exit 0
&gt;&gt; *.sh</b></p>

<p style="margin-left:11%; margin-top: 1em">If the user
tries to open a file descriptor for reading more than once,
the shell opens the file descriptor as a pipe to a process
that copies all the specified inputs to its output in the
order specified, similar to <b>cat</b>, provided the
<b>MULTIOS</b> option is set. Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>sort &lt;foo
&lt;fubar</b></p>

<p style="margin-left:11%; margin-top: 1em">or even</p>

<p style="margin-left:22%; margin-top: 1em"><b>sort
&lt;f{oo,ubar}</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to &lsquo;<b>cat foo fubar | sort</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Expansion of
the redirection argument occurs at the point the redirection
is opened, at the point described above for the expansion of
the variable in <b>&gt;&amp;$myfd</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that a
pipe is an implicit redirection; thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>cat bar |
sort &lt;foo</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to &lsquo;<b>cat bar foo | sort</b>&rsquo; (note the order
of the inputs).</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>MULTIOS</b> option is <i>un</i>set, each redirection
replaces the previous redirection for that file descriptor.
However, all files redirected to are actually opened, so</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo foo
&gt; bar &gt; baz</b></p>

<p style="margin-left:11%; margin-top: 1em">when
<b>MULTIOS</b> is unset will truncate bar, and write
&lsquo;<b>foo</b>&rsquo; into baz.</p>

<p style="margin-left:11%; margin-top: 1em">There is a
problem when an output multio is attached to an external
program. A simple example shows this:</p>

<p style="margin-left:22%; margin-top: 1em"><b>cat file
&gt;file1 &gt;file2 <br>
cat file1 file2</b></p>

<p style="margin-left:11%; margin-top: 1em">Here, it is
possible that the second &lsquo;<b>cat</b>&rsquo; will not
display the full contents of <b>file1</b> and <b>file2</b>
(i.e. the original contents of <b>file</b> repeated
twice).</p>

<p style="margin-left:11%; margin-top: 1em">The reason for
this is that the multios are spawned after the <b>cat</b>
process is forked from the parent shell, so the parent shell
does not wait for the multios to finish writing data. This
means the command as shown can exit before <b>file1</b> and
<b>file2</b> are completely written. As a workaround, it is
possible to run the <b>cat</b> process as part of a job in
the current shell:</p>

<p style="margin-left:22%; margin-top: 1em"><b>{ cat file }
&gt;file &gt;file2</b></p>

<p style="margin-left:11%; margin-top: 1em">Here, the
<b>{</b><i>...</i><b>}</b> job will pause to wait for both
files to be written.</p>

<h2>REDIRECTIONS WITH NO COMMAND
<a name="REDIRECTIONS WITH NO COMMAND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When a simple
command consists of one or more redirection operators and
zero or more parameter assignments, but no command name, zsh
can behave in several ways.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>NULLCMD</b> is not set or the option
<b>CSH_NULLCMD</b> is set, an error is caused. This is the
<b>csh</b> behavior and <b>CSH_NULLCMD</b> is set by default
when emulating <b>csh</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>SH_NULLCMD</b> is set, the builtin &lsquo;<b>:</b>&rsquo;
is inserted as a command with the given redirections. This
is the default when emulating <b>sh</b> or <b>ksh</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, if
the parameter <b>NULLCMD</b> is set, its value will be used
as a command with the given redirections. If both
<b>NULLCMD</b> and <b>READNULLCMD</b> are set, then the
value of the latter will be used instead of that of the
former when the redirection is an input. The default for
<b>NULLCMD</b> is &lsquo;<b>cat</b>&rsquo; and for
<b>READNULLCMD</b> is &lsquo;<b>more</b>&rsquo;. Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>&lt;
file</b></p>

<p style="margin-left:11%; margin-top: 1em">shows the
contents of <b>file</b> on standard output, with paging if
that is a terminal. <b>NULLCMD</b> and <b>READNULLCMD</b>
may refer to shell functions.</p>

<h2>COMMAND EXECUTION
<a name="COMMAND EXECUTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a command
name contains no slashes, the shell attempts to locate it.
If there exists a shell function by that name, the function
is invoked as described in the section
&lsquo;Functions&rsquo;. If there exists a shell builtin by
that name, the builtin is invoked.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, the
shell searches each element of <b>$path</b> for a directory
containing an executable file by that name. If the search is
unsuccessful, the shell prints an error message and returns
a nonzero exit status.</p>

<p style="margin-left:11%; margin-top: 1em">If execution
fails because the file is not in executable format, and the
file is not a directory, it is assumed to be a shell script.
<b>/bin/sh</b> is spawned to execute it. If the program is a
file beginning with &lsquo;<b>#!</b>&rsquo;, the remainder
of the first line specifies an interpreter for the program.
The shell will execute the specified interpreter on
operating systems that do not handle this executable format
in the kernel.</p>

<p style="margin-left:11%; margin-top: 1em">If no external
command is found but a function
<b>command_not_found_handler</b> exists the shell executes
this function with all command line arguments. The function
should return status zero if it successfully handled the
command, or non&minus;zero status if it failed. In the
latter case the standard handling is applied: &lsquo;command
not found&rsquo; is printed to standard error and the shell
exits with status 127. Note that the handler is executed in
a subshell forked to execute an external command, hence
changes to directories, shell parameters, etc. have no
effect on the main shell.</p>

<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Shell functions
are defined with the <b>function</b> reserved word or the
special syntax &lsquo;<i>funcname</i> <b>()</b>&rsquo;.
Shell functions are read in and stored internally. Alias
names are resolved when the function is read. Functions are
executed like commands with the arguments passed as
positional parameters. (See the section &lsquo;Command
Execution&rsquo;.)</p>

<p style="margin-left:11%; margin-top: 1em">Functions
execute in the same process as the caller and share all
files and present working directory with the caller. A trap
on <b>EXIT</b> set inside a function is executed after the
function completes in the environment of the caller.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>return</b> builtin is used to return from function
calls.</p>

<p style="margin-left:11%; margin-top: 1em">Function
identifiers can be listed with the <b>functions</b> builtin.
Functions can be undefined with the <b>unfunction</b>
builtin.</p>

<h2>AUTOLOADING FUNCTIONS
<a name="AUTOLOADING FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A function can
be marked as <i>undefined</i> using the <b>autoload</b>
builtin (or &lsquo;<b>functions &minus;u</b>&rsquo; or
&lsquo;<b>typeset &minus;fu</b>&rsquo;). Such a function has
no body. When the function is first executed, the shell
searches for its definition using the elements of the
<b>fpath</b> variable. Thus to define functions for
autoloading, a typical sequence is:</p>


<p style="margin-left:22%; margin-top: 1em"><b>fpath=(~/myfuncs
$fpath) <br>
autoload myfunc1 myfunc2 ...</b></p>

<p style="margin-left:11%; margin-top: 1em">The usual alias
expansion during reading will be suppressed if the
<b>autoload</b> builtin or its equivalent is given the
option <b>&minus;U</b>. This is recommended for the use of
functions supplied with the zsh distribution. Note that for
functions precompiled with the <b>zcompile</b> builtin
command the flag <b>&minus;U</b> must be provided when the
<b>.zwc</b> file is created, as the corresponding
information is compiled into the latter.</p>

<p style="margin-left:11%; margin-top: 1em">For each
<i>element</i> in <b>fpath</b>, the shell looks for three
possible files, the newest of which is used to load the
definition for the function: <i><br>
element</i><b>.zwc</b></p>

<p style="margin-left:22%;">A file created with the
<b>zcompile</b> builtin command, which is expected to
contain the definitions for all functions in the directory
named <i>element</i>. The file is treated in the same manner
as a directory containing files for functions and is
searched for the definition of the function. If the
definition is not found, the search for a definition
proceeds with the other two possibilities described
below.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>element</i> already includes a <b>.zwc</b> extension
(i.e. the extension was explicitly given by the user),
<i>element</i> is searched for the definition of the
function without comparing its age to that of other files;
in fact, there does not need to be any directory named
<i>element</i> without the suffix. Thus including an element
such as &lsquo;<b>/usr/local/funcs.zwc</b>&rsquo; in
<b>fpath</b> will speed up the search for functions, with
the disadvantage that functions included must be explicitly
recompiled by hand before the shell notices any changes.</p>


<p style="margin-left:11%;"><i>element</i><b>/</b><i>function</i><b>.zwc</b></p>

<p style="margin-left:22%;">A file created with
<b>zcompile</b>, which is expected to contain the definition
for <i>function</i>. It may include other function
definitions as well, but those are neither loaded nor
executed; a file found in this way is searched <i>only</i>
for the definition of <i>function</i>.</p>


<p style="margin-left:11%;"><i>element</i><b>/</b><i>function</i></p>

<p style="margin-left:22%;">A file of zsh command text,
taken to be the definition for <i>function</i>.</p>

<p style="margin-left:11%; margin-top: 1em">In summary, the
order of searching is, first, in the <i>parents of</i>
directories in <b>fpath</b> for the newer of either a
compiled directory or a directory in <b>fpath</b>; second,
if more than one of these contains a definition for the
function that is sought, the leftmost in the <b>fpath</b> is
chosen; and third, within a directory, the newer of either a
compiled function or an ordinary function definition is
used.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>KSH_AUTOLOAD</b> option is set, or the file contains only
a simple definition of the function, the file&rsquo;s
contents will be executed. This will normally define the
function in question, but may also perform initialization,
which is executed in the context of the function execution,
and may therefore define local parameters. It is an error if
the function is not defined by loading the file.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, the
function body (with no surrounding
&lsquo;<i>funcname</i><b>() {</b><i>...</i><b>}</b>&rsquo;)
is taken to be the complete contents of the file. This form
allows the file to be used directly as an executable shell
script. If processing of the file results in the function
being re&minus;defined, the function itself is not
re&minus;executed. To force the shell to perform
initialization and then call the function defined, the file
should contain initialization code (which will be executed
then discarded) in addition to a complete function
definition (which will be retained for subsequent calls to
the function), and a call to the shell function, including
any arguments, at the end.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
suppose the autoload file <b>func</b> contains</p>

<p style="margin-left:22%; margin-top: 1em"><b>func() {
print This is func; } <br>
print func is initialized</b></p>

<p style="margin-left:11%; margin-top: 1em">then
&lsquo;<b>func; func</b>&rsquo; with <b>KSH_AUTOLOAD</b> set
will produce both messages on the first call, but only the
message &lsquo;<b>This is func</b>&rsquo; on the second and
subsequent calls. Without <b>KSH_AUTOLOAD</b> set, it will
produce the initialization message on the first call, and
the other message on the second and subsequent calls.</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to create a function that is not marked as
autoloaded, but which loads its own definition by searching
<b>fpath</b>, by using &lsquo;<b>autoload
&minus;X</b>&rsquo; within a shell function. For example,
the following are equivalent:</p>

<p style="margin-left:22%; margin-top: 1em"><b>myfunc() {
<br>
autoload &minus;X <br>
} <br>
myfunc args...</b></p>

<p style="margin-left:11%; margin-top: 1em">and</p>

<p style="margin-left:22%; margin-top: 1em"><b>unfunction
myfunc # if myfunc was defined <br>
autoload myfunc <br>
myfunc args...</b></p>

<p style="margin-left:11%; margin-top: 1em">In fact, the
<b>functions</b> command outputs &lsquo;<b>builtin autoload
&minus;X</b>&rsquo; as the body of an autoloaded function.
This is done so that</p>

<p style="margin-left:22%; margin-top: 1em"><b>eval
&quot;$(functions)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">produces a
reasonable result. A true autoloaded function can be
identified by the presence of the comment &lsquo;<b>#
undefined</b>&rsquo; in the body, because all comments are
discarded from defined functions.</p>

<p style="margin-left:11%; margin-top: 1em">To load the
definition of an autoloaded function <b>myfunc</b> without
executing <b>myfunc</b>, use:</p>

<p style="margin-left:22%; margin-top: 1em"><b>autoload +X
myfunc</b></p>

<h2>ANONYMOUS FUNCTIONS
<a name="ANONYMOUS FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If no name is
given for a function, it is &lsquo;anonymous&rsquo; and is
handled specially. Either form of function definition may be
used: a &lsquo;<b>()</b>&rsquo; with no preceding name, or a
&lsquo;<b>function</b>&rsquo; with an immediately following
open brace. The function is executed immediately at the
point of definition and is not stored for future use. The
function name is set to &lsquo;<b>(anon)</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Arguments to
the function may be specified as words following the closing
brace defining the function, hence if there are none no
arguments (other than <b>$0</b>) are set. This is a
difference from the way other functions are parsed: normal
function definitions may be followed by certain keywords
such as &lsquo;<b>else</b>&rsquo; or
&lsquo;<b>fi</b>&rsquo;, which will be treated as arguments
to anonymous functions, so that a newline or semicolon is
needed to force keyword interpretation.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
the argument list of any enclosing script or function is
hidden (as would be the case for any other function called
at this point).</p>

<p style="margin-left:11%; margin-top: 1em">Redirections
may be applied to the anonymous function in the same manner
as to a current&minus;shell structure enclosed in braces.
The main use of anonymous functions is to provide a scope
for local variables. This is particularly convenient in
start&minus;up files as these do not provide their own local
variable scope.</p>

<p style="margin-left:11%; margin-top: 1em">For
example,</p>


<p style="margin-left:22%; margin-top: 1em"><b>variable=outside
<br>
function { <br>
local variable=inside <br>
print &quot;I am $variable with arguments $*&quot; <br>
} this and that <br>
print &quot;I am $variable&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs the
following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>I am inside
with arguments this and that <br>
I am outside</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that
function definitions with arguments that expand to nothing,
for example &lsquo;<b>name=; function $name {</b> <i>...</i>
<b>}</b>&rsquo;, are not treated as anonymous functions.
Instead, they are treated as normal function definitions
where the definition is silently discarded.</p>

<h2>SPECIAL FUNCTIONS
<a name="SPECIAL FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certain
functions, if defined, have special meaning to the
shell.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Hook
Functions</b> <br>
For the functions below, it is possible to define an array
that has the same name as the function with
&lsquo;<b>_functions</b>&rsquo; appended. Any element in
such an array is taken as the name of a function to execute;
it is executed in the same context and with the same
arguments as the basic function. For example, if
<b>$chpwd_functions</b> is an array containing the values
&lsquo;<b>mychpwd</b>&rsquo;,
&lsquo;<b>chpwd_save_dirstack</b>&rsquo;, then the shell
attempts to execute the functions
&lsquo;<b>chpwd</b>&rsquo;, &lsquo;<b>mychpwd</b>&rsquo; and
&lsquo;<b>chpwd_save_dirstack</b>&rsquo;, in that order. Any
function that does not exist is silently ignored. A function
found by this mechanism is referred to elsewhere as a
&lsquo;hook function&rsquo;. An error in any function causes
subsequent functions not to be run. Note further that an
error in a <b>precmd</b> hook causes an immediately
following <b>periodic</b> function not to run (though it may
run at the next opportunity).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>chpwd</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Executed whenever the current working directory is
changed.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>periodic</b></p>

<p style="margin-left:22%;">If the parameter <b>PERIOD</b>
is set, this function is executed every <b>$PERIOD</b>
seconds, just before a prompt. Note that if multiple
functions are defined using the array
<b>periodic_functions</b> only one period is applied to the
complete set of functions, and the scheduled time is not
reset if the list of functions is altered. Hence the set of
functions is always called together.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>precmd</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Executed before each prompt. Note that precommand
functions are not re&minus;executed simply because the
command line is redrawn, as happens, for example, when a
notification about an exiting job is displayed.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>preexec</b></p>

<p style="margin-left:22%;">Executed just after a command
has been read and is about to be executed. If the history
mechanism is active (and the line was not discarded from the
history buffer), the string that the user typed is passed as
the first argument, otherwise it is an empty string. The
actual command that will be executed (including expanded
aliases) is passed in two different forms: the second
argument is a single&minus;line, size&minus;limited version
of the command (with things like function bodies elided);
the third argument contains the full text that is being
executed.</p>

<p style="margin-left:11%;"><b>zshaddhistory</b></p>

<p style="margin-left:22%;">Executed when a history line
has been read interactively, but before it is executed. The
sole argument is the complete history line (so that any
terminating newline will still be present).</p>

<p style="margin-left:22%; margin-top: 1em">If any of the
hook functions return a non&minus;zero value the history
line will not be saved, although it lingers in the history
until the next line is executed allow you to reuse or edit
it immediately.</p>

<p style="margin-left:22%; margin-top: 1em">A hook function
may call &lsquo;<b>fc &minus;p</b> <i>...</i>&rsquo; to
switch the history context so that the history is saved in a
different file from the that in the global <b>HISTFILE</b>
parameter. This is handled specially: the history context is
automatically restored after the processing of the history
line is finished.</p>

<p style="margin-left:22%; margin-top: 1em">The following
example function first adds the history line to the normal
history with the newline stripped, which is usually the
correct behaviour. Then it switches the history context so
that the line will be written to a history file in the
current directory.</p>


<p style="margin-left:32%; margin-top: 1em"><b>zshaddhistory()
{ <br>
print &minus;sr &minus;&minus; ${1%%$&rsquo;\n&rsquo;} <br>
fc &minus;p .zsh_local_history <br>
}</b></p>

<p style="margin-left:11%;"><b>zshexit</b></p>

<p style="margin-left:22%;">Executed at the point where the
main shell is about to exit normally. This is not called by
exiting subshells, nor when the <b>exec</b> precommand
modifier is used before an external command. Also, unlike
<b>TRAPEXIT</b>, it is not called when functions exit.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Trap
Functions</b> <br>
The functions below are treated specially but do not have
corresponding hook arrays. <b><br>
TRAP</b><i>NAL</i></p>

<p style="margin-left:22%;">If defined and non&minus;null,
this function will be executed whenever the shell catches a
signal <b>SIG</b><i>NAL</i>, where <i>NAL</i> is a signal
name as specified for the <b>kill</b> builtin. The signal
number will be passed as the first parameter to the
function.</p>

<p style="margin-left:22%; margin-top: 1em">If a function
of this form is defined and null, the shell and processes
spawned by it will ignore <b>SIG</b><i>NAL</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status from the function is handled specially. If it is
zero, the signal is assumed to have been handled, and
execution continues normally. Otherwise, the shell will
behave as interrupted except that the return status of the
trap is retained.</p>

<p style="margin-left:22%; margin-top: 1em">Programs
terminated by uncaught signals typically return the status
128 plus the signal number. Hence the following causes the
handler for <b>SIGINT</b> to print a message, then mimic the
usual effect of the signal.</p>

<p style="margin-left:32%; margin-top: 1em"><b>TRAPINT() {
<br>
print &quot;Caught SIGINT, aborting.&quot; <br>
return $(( 128 + $1 )) <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">The functions
<b>TRAPZERR</b>, <b>TRAPDEBUG</b> and <b>TRAPEXIT</b> are
never executed inside other traps.</p>

<p style="margin-left:11%;"><b>TRAPDEBUG</b></p>

<p style="margin-left:22%;">If the option
<b>DEBUG_BEFORE_CMD</b> is set (as it is by default),
executed before each command; otherwise executed after each
command. See the description of the <b>trap</b> builtin in
<i>zshbuiltins</i>(1) for details of additional features
provided in debug traps.</p>

<p style="margin-left:11%;"><b>TRAPEXIT</b></p>

<p style="margin-left:22%;">Executed when the shell exits,
or when the current function exits if defined inside a
function. The value of <b>$?</b> at the start of execution
is the exit status of the shell or the return status of the
function exiting.</p>

<p style="margin-left:11%;"><b>TRAPZERR</b></p>

<p style="margin-left:22%;">Executed whenever a command has
a non&minus;zero exit status. However, the function is not
executed if the command occurred in a sublist followed by
&lsquo;<b>&amp;&amp;</b>&rsquo; or &lsquo;<b>||</b>&rsquo;;
only the final command in a sublist of this type causes the
trap to be executed. The function <b>TRAPERR</b> acts the
same as <b>TRAPZERR</b> on systems where there is no
<b>SIGERR</b> (this is the usual case).</p>

<p style="margin-left:11%; margin-top: 1em">The functions
beginning &lsquo;<b>TRAP</b>&rsquo; may alternatively be
defined with the <b>trap</b> builtin: this may be preferable
for some uses. Setting a trap with one form removes any trap
of the other form for the same signal; removing a trap in
either form removes all traps for the same signal. The
forms</p>

<p style="margin-left:22%; margin-top: 1em"><b>TRAPNAL() {
<br>
# code <br>
}</b></p>


<p style="margin-left:11%; margin-top: 1em">(&rsquo;function
traps&rsquo;) and</p>

<p style="margin-left:22%; margin-top: 1em"><b>trap &rsquo;
<br>
# code <br>
&rsquo; NAL</b></p>

<p style="margin-left:11%; margin-top: 1em">(&rsquo;list
traps&rsquo;) are equivalent in most ways, the exceptions
being the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>Function traps have all the properties of normal
functions, appearing in the list of functions and being
called with their own function context rather than the
context where the trap was triggered.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The return status from function traps is special,
whereas a return from a list trap causes the surrounding
context to return with the given status.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>Function traps are not reset within subshells, in
accordance with zsh behaviour; list traps are reset, in
accordance with POSIX behaviour.</p></td></tr>
</table>

<h2>JOBS
<a name="JOBS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the
<b>MONITOR</b> option is set, an interactive shell
associates a <i>job</i> with each pipeline. It keeps a table
of current jobs, printed by the <b>jobs</b> command, and
assigns them small integer numbers. When a job is started
asynchronously with &lsquo;<b>&amp;</b>&rsquo;, the shell
prints a line to standard error which looks like:</p>

<p style="margin-left:22%; margin-top: 1em"><b>[1]
1234</b></p>

<p style="margin-left:11%; margin-top: 1em">indicating that
the job which was started asynchronously was job number 1
and had one (top&minus;level) process, whose process ID was
1234.</p>

<p style="margin-left:11%; margin-top: 1em">If a job is
started with &lsquo;<b>&amp;|</b>&rsquo; or
&lsquo;<b>&amp;!</b>&rsquo;, then that job is immediately
disowned. After startup, it does not have a place in the job
table, and is not subject to the job control features
described here.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
running a job and wish to do something else you may hit the
key ^Z (control&minus;Z) which sends a <b>TSTP</b> signal to
the current job: this key may be redefined by the
<b>susp</b> option of the external <b>stty</b> command. The
shell will then normally indicate that the job has been
&lsquo;suspended&rsquo;, and print another prompt. You can
then manipulate the state of this job, putting it in the
background with the <b>bg</b> command, or run some other
commands and then eventually bring the job back into the
foreground with the foreground command <b>fg</b>. A ^Z takes
effect immediately and is like an interrupt in that pending
output and unread input are discarded when it is typed.</p>

<p style="margin-left:11%; margin-top: 1em">A job being run
in the background will suspend if it tries to read from the
terminal.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
the job running in the foreground is a shell function, then
suspending it will have the effect of causing the shell to
fork. This is necessary to separate the function&rsquo;s
state from that of the parent shell performing the job
control, so that the latter can return to the command line
prompt. As a result, even if <b>fg</b> is used to continue
the job the function will no longer be part of the parent
shell, and any variables set by the function will not be
visible in the parent shell. Thus the behaviour is different
from the case where the function was never suspended. Zsh is
different from many other shells in this regard.</p>

<p style="margin-left:11%; margin-top: 1em">The same
behaviour is found when the shell is executing code as the
right hand side of a pipeline or any complex shell construct
such as <b>if</b>, <b>for</b>, etc., in order that the
entire block of code can be managed as a single job.
Background jobs are normally allowed to produce output, but
this can be disabled by giving the command &lsquo;<b>stty
tostop</b>&rsquo;. If you set this tty option, then
background jobs will suspend when they try to produce output
like they do when they try to read input.</p>

<p style="margin-left:11%; margin-top: 1em">When a command
is suspended and continued later with the <b>fg</b> or
<b>wait</b> builtins, zsh restores tty modes that were in
effect when it was suspended. This (intentionally) does not
apply if the command is continued via &lsquo;<b>kill
&minus;CONT</b>&rsquo;, nor when it is continued with
<b>bg</b>.</p>

<p style="margin-left:11%; margin-top: 1em">There are
several ways to refer to jobs in the shell. A job can be
referred to by the process ID of any process of the job or
by one of the following: <b><br>
%</b><i>number</i></p>

<p style="margin-left:22%;">The job with the given
number.</p>

<p style="margin-left:11%;"><b>%</b><i>string</i></p>

<p style="margin-left:22%;">Any job whose command line
begins with <i>string</i>.</p>

<p style="margin-left:11%;"><b>%?</b><i>string</i></p>

<p style="margin-left:22%;">Any job whose command line
contains <i>string</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Current job.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%+</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Equivalent to &lsquo;<b>%%</b>&rsquo;.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%&minus;</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Previous job.</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The shell
learns immediately whenever a process changes state. It
normally informs you whenever a job becomes blocked so that
no further progress is possible. If the <b>NOTIFY</b> option
is not set, it waits until just before it prints a prompt
before it informs you. All such notifications are sent
directly to the terminal, not to the standard output or
standard error.</p>

<p style="margin-left:11%; margin-top: 1em">When the
monitor mode is on, each background job that completes
triggers any trap set for <b>CHLD</b>.</p>

<p style="margin-left:11%; margin-top: 1em">When you try to
leave the shell while jobs are running or suspended, you
will be warned that &lsquo;You have suspended (running)
jobs&rsquo;. You may use the <b>jobs</b> command to see what
they are. If you do this or immediately try to exit again,
the shell will not warn you a second time; the suspended
jobs will be terminated, and the running jobs will be sent a
<b>SIGHUP</b> signal, if the <b>HUP</b> option is set.</p>

<p style="margin-left:11%; margin-top: 1em">To avoid having
the shell terminate the running jobs, either use the
<b>nohup</b> command (see <i>nohup</i>(1)) or the
<b>disown</b> builtin.</p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>INT</b>
and <b>QUIT</b> signals for an invoked command are ignored
if the command is followed by &lsquo;<b>&amp;</b>&rsquo; and
the <b>MONITOR</b> option is not active. The shell itself
always ignores the <b>QUIT</b> signal. Otherwise, signals
have the values inherited by the shell from its parent (but
see the <b>TRAP</b><i>NAL</i> special functions in the
section &lsquo;Functions&rsquo;).</p>

<h2>ARITHMETIC EVALUATION
<a name="ARITHMETIC EVALUATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell can
perform integer and floating point arithmetic, either using
the builtin <b>let</b>, or via a substitution of the form
<b>$((...))</b>. For integers, the shell is usually compiled
to use 8&minus;byte precision where this is available,
otherwise precision is 4 bytes. This can be tested, for
example, by giving the command &lsquo;<b>print &minus; $((
12345678901 ))</b>&rsquo;; if the number appears unchanged,
the precision is at least 8 bytes. Floating point arithmetic
always uses the &lsquo;double&rsquo; type with whatever
corresponding precision is provided by the compiler and the
library.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>let</b>
builtin command takes arithmetic expressions as arguments;
each is evaluated separately. Since many of the arithmetic
operators, as well as spaces, require quoting, an
alternative form is provided: for any command which begins
with a &lsquo;<b>((</b>&rsquo;, all the characters until a
matching &lsquo;<b>))</b>&rsquo; are treated as a quoted
expression and arithmetic expansion performed as for an
argument of <b>let</b>. More precisely,
&lsquo;<b>((</b><i>...</i><b>))</b>&rsquo; is equivalent to
&lsquo;<b>let &quot;</b><i>...</i><b>&quot;</b>&rsquo;. The
return status is 0 if the arithmetic value of the expression
is non&minus;zero, 1 if it is zero, and 2 if an error
occurred.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the following statement</p>

<p style="margin-left:22%; margin-top: 1em"><b>(( val = 2 +
1 ))</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to</p>

<p style="margin-left:22%; margin-top: 1em"><b>let
&quot;val = 2 + 1&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">both assigning
the value 3 to the shell variable <b>val</b> and returning a
zero status.</p>

<p style="margin-left:11%; margin-top: 1em">Integers can be
in bases other than 10. A leading &lsquo;<b>0x</b>&rsquo; or
&lsquo;<b>0X</b>&rsquo; denotes hexadecimal. Integers may
also be of the form
&lsquo;<i>base</i><b>#</b><i>n</i>&rsquo;, where <i>base</i>
is a decimal number between two and thirty&minus;six
representing the arithmetic base and <i>n</i> is a number in
that base (for example, &lsquo;<b>16#ff</b>&rsquo; is 255 in
hexadecimal). The <i>base</i><b>#</b> may also be omitted,
in which case base 10 is used. For backwards compatibility
the form &lsquo;<b>[</b><i>base</i><b>]</b><i>n</i>&rsquo;
is also accepted.</p>

<p style="margin-left:11%; margin-top: 1em">An integer
expression or a base given in the form
&lsquo;<i>base</i><b>#</b><i>n</i>&rsquo; may contain
underscores (&lsquo;<b>_</b>&rsquo;) after the leading digit
for visual guidance; these are ignored in computation.
Examples are <b>1_000_000</b> or <b>0xffff_ffff</b> which
are equivalent to <b>1000000</b> and <b>0xffffffff</b>
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to specify a base to be used for output in the form
&lsquo;<b>[#</b><i>base</i><b>]</b>&rsquo;, for example
&lsquo;<b>[#16]</b>&rsquo;. This is used when outputting
arithmetical substitutions or when assigning to scalar
parameters, but an explicitly defined integer or floating
point parameter will not be affected. If an integer variable
is implicitly defined by an arithmetic expression, any base
specified in this way will be set as the variable&rsquo;s
output arithmetic base as if the option
&lsquo;<b>&minus;i</b> <i>base</i>&rsquo; to the
<b>typeset</b> builtin had been used. The expression has no
precedence and if it occurs more than once in a mathematical
expression, the last encountered is used. For clarity it is
recommended that it appear at the beginning of an
expression. As an example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;i 16 y <br>
print $(( [#8] x = 32, y = 32 )) <br>
print $x $y</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs first
&lsquo;<b>8#40</b>&rsquo;, the rightmost value in the given
output base, and then &lsquo;<b>8#40 16#20</b>&rsquo;,
because <b>y</b> has been explicitly declared to have output
base 16, while <b>x</b> (assuming it does not already exist)
is implicitly typed by the arithmetic evaluation, where it
acquires the output base 8.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>C_BASES</b> option is set, hexadecimal numbers in the
standard C format, for example <b>0xFF</b> instead of the
usual &lsquo;<b>16#FF</b>&rsquo;. If the option
<b>OCTAL_ZEROES</b> is also set (it is not by default),
octal numbers will be treated similarly and hence appear as
&lsquo;<b>077</b>&rsquo; instead of
&lsquo;<b>8#77</b>&rsquo;. This option has no effect on the
output of bases other than hexadecimal and octal, and these
formats are always understood on input.</p>

<p style="margin-left:11%; margin-top: 1em">When an output
base is specified using the
&lsquo;<b>[#</b><i>base</i><b>]</b>&rsquo; syntax, an
appropriate base prefix will be output if necessary, so that
the value output is valid syntax for input. If the <b>#</b>
is doubled, for example &lsquo;<b>[##16]</b>&rsquo;, then no
base prefix is output.</p>

<p style="margin-left:11%; margin-top: 1em">Floating point
constants are recognized by the presence of a decimal point
or an exponent. The decimal point may be the first character
of the constant, but the exponent character <b>e</b> or
<b>E</b> may not, as it will be taken for a parameter name.
All numeric parts (before and after the decimal point and in
the exponent) may contain underscores after the leading
digit for visual guidance; these are ignored in
computation.</p>

<p style="margin-left:11%; margin-top: 1em">An arithmetic
expression uses nearly the same syntax and associativity of
expressions as in C.</p>

<p style="margin-left:11%; margin-top: 1em">In the native
mode of operation, the following operators are supported
(listed in decreasing order of precedence): <b><br>
+ &minus; ! ~ ++ &minus;&minus;</b></p>

<p style="margin-left:22%;">unary plus/minus, logical NOT,
complement, {pre,post}{in,de}crement</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&lt;&lt; &gt;&gt;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise shift left, right</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise AND</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise XOR</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise OR</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>**</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>exponentiation</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>* / %</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>multiplication, division, modulus (remainder)</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>+ &minus;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>addition, subtraction</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt; &gt; &lt;=
&gt;=</b></p>

<p style="margin-left:22%;">comparison</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>== !=</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>equality and inequality</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|| ^^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical OR, XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>? :</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>ternary operator</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>= += &minus;= *= /= %=
&amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^=
**=</b></p>

<p style="margin-left:22%;">assignment</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>,</b></p></td>
<td width="10%"></td>
<td width="21%">


<p>comma operator</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The operators
&lsquo;<b>&amp;&amp;</b>&rsquo;, &lsquo;<b>||</b>&rsquo;,
&lsquo;<b>&amp;&amp;=</b>&rsquo;, and
&lsquo;<b>||=</b>&rsquo; are short&minus;circuiting, and
only one of the latter two expressions in a ternary operator
is evaluated. Note the precedence of the bitwise AND, OR,
and XOR operators.</p>

<p style="margin-left:11%; margin-top: 1em">With the option
<b>C_PRECEDENCES</b> the precedences (but no other
properties) of the operators are altered to be the same as
those in most other languages that support the relevant
operators: <b><br>
+ &minus; ! ~ ++ &minus;&minus;</b></p>

<p style="margin-left:22%;">unary plus/minus, logical NOT,
complement, {pre,post}{in,de}crement</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>**</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>exponentiation</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>* / %</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>multiplication, division, modulus (remainder)</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>+ &minus;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>addition, subtraction</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&lt;&lt; &gt;&gt;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise shift left, right</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt; &gt; &lt;=
&gt;=</b></p>

<p style="margin-left:22%;">comparison</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>== !=</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>equality and inequality</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise OR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>||</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical OR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>? :</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>ternary operator</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>= += &minus;= *= /= %=
&amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^=
**=</b></p>

<p style="margin-left:22%;">assignment</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>,</b></p></td>
<td width="10%"></td>
<td width="21%">


<p>comma operator</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note the
precedence of exponentiation in both cases is below that of
unary operators, hence &lsquo;<b>&minus;3**2</b>&rsquo;
evaluates as &lsquo;<b>9</b>&rsquo;, not <b>&minus;9</b>.
Use parentheses where necessary:
&lsquo;<b>&minus;(3**2)</b>&rsquo;. This is for
compatibility with other shells.</p>

<p style="margin-left:11%; margin-top: 1em">Mathematical
functions can be called with the syntax
&lsquo;<i>func</i><b>(</b><i>args</i><b>)</b>&rsquo;, where
the function decides if the <i>args</i> is used as a string
or a comma&minus;separated list of arithmetic expressions.
The shell currently defines no mathematical functions by
default, but the module <b>zsh/mathfunc</b> may be loaded
with the <b>zmodload</b> builtin to provide standard
floating point mathematical functions.</p>

<p style="margin-left:11%; margin-top: 1em">An expression
of the form &lsquo;<b>##</b><i>x</i>&rsquo; where <i>x</i>
is any character sequence such as &lsquo;<b>a</b>&rsquo;,
&lsquo;<b>^A</b>&rsquo;, or
&lsquo;<b>\M&minus;\C&minus;x</b>&rsquo; gives the value of
this character and an expression of the form
&lsquo;<b>#</b><i>foo</i>&rsquo; gives the value of the
first character of the contents of the parameter <i>foo</i>.
Character values are according to the character set used in
the current locale; for multibyte character handling the
option <b>MULTIBYTE</b> must be set. Note that this form is
different from &lsquo;<b>$#</b><i>foo</i>&rsquo;, a standard
parameter substitution which gives the length of the
parameter <i>foo</i>. &lsquo;<b>#\</b>&rsquo; is accepted
instead of &lsquo;<b>##</b>&rsquo;, but its use is
deprecated.</p>

<p style="margin-left:11%; margin-top: 1em">Named
parameters and subscripted arrays can be referenced by name
within an arithmetic expression without using the parameter
expansion syntax. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>((val2 =
val1 * 2))</b></p>

<p style="margin-left:11%; margin-top: 1em">assigns twice
the value of <b>$val1</b> to the parameter named
<b>val2</b>.</p>

<p style="margin-left:11%; margin-top: 1em">An internal
integer representation of a named parameter can be specified
with the <b>integer</b> builtin. Arithmetic evaluation is
performed on the value of each assignment to a named
parameter declared integer in this manner. Assigning a
floating point number to an integer results in rounding down
to the next integer.</p>

<p style="margin-left:11%; margin-top: 1em">Likewise,
floating point numbers can be declared with the <b>float</b>
builtin; there are two types, differing only in their output
format, as described for the <b>typeset</b> builtin. The
output format can be bypassed by using arithmetic
substitution instead of the parameter substitution, i.e.
&lsquo;<b>${</b><i>float</i><b>}</b>&rsquo; uses the defined
format, but &lsquo;<b>$((</b><i>float</i><b>))</b>&rsquo;
uses a generic floating point format.</p>

<p style="margin-left:11%; margin-top: 1em">Promotion of
integer to floating point values is performed where
necessary. In addition, if any operator which requires an
integer (&lsquo;<b>~</b>&rsquo;, &lsquo;<b>&amp;</b>&rsquo;,
&lsquo;<b>|</b>&rsquo;, &lsquo;<b>^</b>&rsquo;,
&lsquo;<b>%</b>&rsquo;, &lsquo;<b>&lt;&lt;</b>&rsquo;,
&lsquo;<b>&gt;&gt;</b>&rsquo; and their equivalents with
assignment) is given a floating point argument, it will be
silently rounded down to the next integer.</p>

<p style="margin-left:11%; margin-top: 1em">Scalar
variables can hold integer or floating point values at
different times; there is no memory of the numeric type in
this case.</p>

<p style="margin-left:11%; margin-top: 1em">If a variable
is first assigned in a numeric context without previously
being declared, it will be implicitly typed as
<b>integer</b> or <b>float</b> and retain that type either
until the type is explicitly changed or until the end of the
scope. This can have unforeseen consequences. For example,
in the loop</p>

<p style="margin-left:22%; margin-top: 1em"><b>for (( f =
0; f &lt; 1; f += 0.1 )); do <br>
# use $f <br>
done</b></p>

<p style="margin-left:11%; margin-top: 1em">if <b>f</b> has
not already been declared, the first assignment will cause
it to be created as an integer, and consequently the
operation &lsquo;<b>f += 0.1</b>&rsquo; will always cause
the result to be truncated to zero, so that the loop will
fail. A simple fix would be to turn the initialization into
&lsquo;<b>f = 0.0</b>&rsquo;. It is therefore best to
declare numeric variables with explicit types.</p>

<h2>CONDITIONAL EXPRESSIONS
<a name="CONDITIONAL EXPRESSIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
<i>conditional expression</i> is used with the <b>[[</b>
compound command to test attributes of files and to compare
strings. Each expression can be constructed from one or more
of the following unary or binary expressions: <b><br>
&minus;a</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists.</p>

<p style="margin-left:11%;"><b>&minus;b</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a block special file.</p>

<p style="margin-left:11%;"><b>&minus;c</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a character special file.</p>

<p style="margin-left:11%;"><b>&minus;d</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a directory.</p>

<p style="margin-left:11%;"><b>&minus;e</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists.</p>

<p style="margin-left:11%;"><b>&minus;f</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a regular file.</p>

<p style="margin-left:11%;"><b>&minus;g</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its setgid bit set.</p>

<p style="margin-left:11%;"><b>&minus;h</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a symbolic link.</p>

<p style="margin-left:11%;"><b>&minus;k</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its sticky bit set.</p>

<p style="margin-left:11%;"><b>&minus;n</b>
<i>string</i></p>

<p style="margin-left:22%;">true if length of <i>string</i>
is non&minus;zero.</p>

<p style="margin-left:11%;"><b>&minus;o</b>
<i>option</i></p>

<p style="margin-left:22%;">true if option named
<i>option</i> is on. <i>option</i> may be a single
character, in which case it is a single letter option name.
(See the section &lsquo;Specifying Options&rsquo;.)</p>

<p style="margin-left:11%;"><b>&minus;p</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a FIFO special file (named pipe).</p>

<p style="margin-left:11%;"><b>&minus;r</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is readable by current process.</p>

<p style="margin-left:11%;"><b>&minus;s</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has size greater than zero.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;t</b> <i>fd</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>true if file descriptor number <i>fd</i> is open and
associated with a terminal device. (note: <i>fd</i> is not
optional)</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;u</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its setuid bit set.</p>

<p style="margin-left:11%;"><b>&minus;w</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is writable by current process.</p>

<p style="margin-left:11%;"><b>&minus;x</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is executable by current process. If <i>file</i> exists and
is a directory, then the current process has permission to
search in the directory.</p>

<p style="margin-left:11%;"><b>&minus;z</b>
<i>string</i></p>

<p style="margin-left:22%;">true if length of <i>string</i>
is zero.</p>

<p style="margin-left:11%;"><b>&minus;L</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a symbolic link.</p>

<p style="margin-left:11%;"><b>&minus;O</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is owned by the effective user ID of this process.</p>

<p style="margin-left:11%;"><b>&minus;G</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
its group matches the effective group ID of this
process.</p>

<p style="margin-left:11%;"><b>&minus;S</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a socket.</p>

<p style="margin-left:11%;"><b>&minus;N</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
its access time is not newer than its modification time.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;nt</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> exists and
is newer than <i>file2</i>.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;ot</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> exists and
is older than <i>file2</i>.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;ef</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> and
<i>file2</i> exist and refer to the same file.</p>

<p style="margin-left:11%;"><i>string</i> <b>=</b>
<i>pattern <br>
string</i> <b>==</b> <i>pattern</i></p>

<p style="margin-left:22%;">true if <i>string</i> matches
<i>pattern</i>. The &lsquo;<b>==</b>&rsquo; form is the
preferred one. The &lsquo;<b>=</b>&rsquo; form is for
backward compatibility and should be considered
obsolete.</p>

<p style="margin-left:11%;"><i>string</i> <b>!=</b>
<i>pattern</i></p>

<p style="margin-left:22%;">true if <i>string</i> does not
match <i>pattern</i>.</p>

<p style="margin-left:11%;"><i>string</i> <b>=~</b>
<i>regexp</i></p>

<p style="margin-left:22%;">true if <i>string</i> matches
the regular expression <i>regexp</i>. If the option
<b>RE_MATCH_PCRE</b> is set <i>regexp</i> is tested as a
PCRE regular expression using the <b>zsh/pcre</b> module,
else it is tested as a POSIX extended regular expression
using the <b>zsh/regex</b> module. Upon successful match,
some variables will be updated; no variables are changed if
the matching fails.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>BASH_REMATCH</b> is not set the scalar parameter
<b>MATCH</b> is set to the substring that matched the
pattern and the integer parameters <b>MBEGIN</b> and
<b>MEND</b> to the index of the start and end, respectively,
of the match in <i>string</i>, such that if <i>string</i> is
contained in variable <b>var</b> the expression
&lsquo;${var[$MBEGIN,$MEND]}&rsquo; is identical to
&lsquo;$MATCH&rsquo;. The setting of the option
<b>KSH_ARRAYS</b> is respected. Likewise, the array
<b>match</b> is set to the substrings that matched
parenthesised subexpressions and the arrays <b>mbegin</b>
and <b>mend</b> to the indices of the start and end
positions, respectively, of the substrings within
<i>string</i>. The arrays are not set if there were no
parenthesised subexpresssions. For example, if the string
&lsquo;<b>a short string</b>&rsquo; is matched against the
regular expression &lsquo;<b>s(...)t</b>&rsquo;, then
(assuming the option <b>KSH_ARRAYS</b> is not set)
<b>MATCH</b>, <b>MBEGIN</b> and <b>MEND</b> are
&lsquo;<b>short</b>&rsquo;, 3 and 7, respectively, while
<b>match</b>, <b>mbegin</b> and <b>mend</b> are single entry
arrays containing the strings &lsquo;<b>hor</b>&rsquo;,
&lsquo;<b>4</b>&rsquo; and &lsquo;<b>6</b>,
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>BASH_REMATCH</b> is set the array <b>BASH_REMATCH</b> is
set to the substring that matched the pattern followed by
the substrings that matched parenthesised subexpressions
within the pattern.</p>

<p style="margin-left:11%;"><i>string1</i> <b>&lt;</b>
<i>string2</i></p>

<p style="margin-left:22%;">true if <i>string1</i> comes
before <i>string2</i> based on ASCII value of their
characters.</p>

<p style="margin-left:11%;"><i>string1</i> <b>&gt;</b>
<i>string2</i></p>

<p style="margin-left:22%;">true if <i>string1</i> comes
after <i>string2</i> based on ASCII value of their
characters.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;eq</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically equal to <i>exp2</i>. Note that for purely
numeric comparisons use of the <b>((</b><i>...</i><b>))</b>
builtin described in the section &lsquo;ARITHMETIC
EVALUATION&rsquo; is more convenient than conditional
expressions.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;ne</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically not equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;lt</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically less than <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;gt</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically greater than <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;le</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically less than or equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;ge</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically greater than or equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><b>(</b> <i>exp</i>
<b>)</b></p>

<p style="margin-left:22%;">true if <i>exp</i> is true.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>!</b> <i>exp</i></p></td>
<td width="4%"></td>
<td width="32%">


<p>true if <i>exp</i> is false.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><i>exp1</i> <b>&amp;&amp;</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> and
<i>exp2</i> are both true.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>||</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if either <i>exp1</i> or
<i>exp2</i> is true.</p>

<p style="margin-left:11%; margin-top: 1em">Normal shell
expansion is performed on the <i>file</i>, <i>string</i> and
<i>pattern</i> arguments, but the result of each expansion
is constrained to be a single word, similar to the effect of
double quotes. Filename generation is not performed on any
form of argument to conditions. However, pattern
metacharacters are active for the <i>pattern</i> arguments;
the patterns are the same as those used for filename
generation, see <i>zshexpn</i>(1), but there is no special
behaviour of &lsquo;<b>/</b>&rsquo; nor initial dots, and no
glob qualifiers are allowed.</p>

<p style="margin-left:11%; margin-top: 1em">In each of the
above expressions, if <i>file</i> is of the form
&lsquo;<b>/dev/fd/</b><i>n</i>&rsquo;, where <i>n</i> is an
integer, then the test applied to the open file whose
descriptor number is <i>n</i>, even if the underlying system
does not support the <b>/dev/fd</b> directory.</p>

<p style="margin-left:11%; margin-top: 1em">In the forms
which do numeric comparison, the expressions <i>exp</i>
undergo arithmetic expansion as if they were enclosed in
<b>$((...))</b>.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>[[ (
&minus;f foo || &minus;f bar ) &amp;&amp; $report = y* ]]
&amp;&amp; print File exists.</b></p>

<p style="margin-left:11%; margin-top: 1em">tests if either
file <b>foo</b> or file <b>bar</b> exists, and if so, if the
value of the parameter <b>report</b> begins with
&lsquo;<b>y</b>&rsquo;; if the complete condition is true,
the message &lsquo;<b>File exists.</b>&rsquo; is
printed.</p>

<h2>EXPANSION OF PROMPT SEQUENCES
<a name="EXPANSION OF PROMPT SEQUENCES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Prompt
sequences undergo a special form of expansion. This type of
expansion is also available using the <b>&minus;P</b> option
to the <b>print</b> builtin.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_SUBST</b> option is set, the prompt string is
first subjected to <i>parameter expansion</i>, <i>command
substitution</i> and <i>arithmetic expansion</i>. See
<i>zshexpn</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Certain escape
sequences may be recognised in the prompt string.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_BANG</b> option is set, a &lsquo;<b>!</b>&rsquo;
in the prompt is replaced by the current history event
number. A literal &lsquo;<b>!</b>&rsquo; may then be
represented as &lsquo;<b>!!</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_PERCENT</b> option is set, certain escape
sequences that start with &lsquo;<b>%</b>&rsquo; are
expanded. Many escapes are followed by a single character,
although some of these take an optional integer argument
that should appear between the &lsquo;<b>%</b>&rsquo; and
the next character of the sequence. More complicated escape
sequences are available to provide conditional
expansion.</p>

<h2>SIMPLE PROMPT ESCAPES
<a name="SIMPLE PROMPT ESCAPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Special
characters</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="8%"></td>
<td width="9%">


<p>A &lsquo;<b>%</b>&rsquo;.</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%)</b></p></td>
<td width="8%"></td>
<td width="9%">


<p>A &lsquo;<b>)</b>&rsquo;.</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Login
information</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%l</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The line (tty) the user is
logged in on, without &lsquo;<b>/dev/</b>&rsquo; prefix. If
the name starts with &lsquo;<b>/dev/tty</b>&rsquo;, that
prefix is stripped.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The full machine hostname.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The hostname up to the first &lsquo;<b>.</b>&rsquo;. An
integer may follow the &lsquo;<b>%</b>&rsquo; to specify how
many components of the hostname are desired. With a negative
integer, trailing components of the hostname are shown.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p><b>$USERNAME</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line (tty) the user is logged in on, without
&lsquo;<b>/dev/</b>&rsquo; prefix. This does not treat
&lsquo;<b>/dev/tty</b>&rsquo; names specially.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Shell
state</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%#</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">A &lsquo;<b>#</b>&rsquo; if the
shell is running with privileges, a &lsquo;<b>%</b>&rsquo;
if not. Equivalent to &lsquo;<b>%(!.#.%%)</b>&rsquo;. The
definition of &lsquo;privileged&rsquo;, for these purposes,
is that either the effective user ID is zero, or, if
POSIX.1e capabilities are supported, that at least one
capability is raised in either the Effective or Inheritable
capability vectors.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%?</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The return status of the last command executed just
before the prompt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%_</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The status of the parser, i.e. the shell constructs
(like &lsquo;<b>if</b>&rsquo; and &lsquo;<b>for</b>&rsquo;)
that have been started on the command line. If given an
integer number that many strings will be printed; zero or
negative or no integer means print as many as there are.
This is most useful in prompts <b>PS2</b> for continuation
lines and <b>PS4</b> for debugging with the <b>XTRACE</b>
option; in the latter case it will also work
non&minus;interactively.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%d</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>/</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current working directory. If an integer follows the
&lsquo;<b>%</b>&rsquo;, it specifies a number of trailing
components of the current working directory to show; zero
means the whole path. A negative integer specifies leading
components, i.e. <b>%&minus;1d</b> specifies the first
component.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%~</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>As <b>%d</b> and <b>%/</b>, but if the current working
directory has a named directory as its prefix, that part is
replaced by a &lsquo;<b>~</b>&rsquo; followed by the name of
the directory. If it starts with <b>$HOME</b>, that part is
replaced by a &lsquo;<b>~</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%h</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%!</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current history event number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line number currently being executed in the script,
sourced file, or shell function given by <b>%N</b>. This is
most useful for debugging as part of <b>$PS4</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%I</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line number currently being executed in the file
<b>%x</b>. This is similar to <b>%i</b>, but the line number
is always a line number in the file where the code was
defined, even if the code is a shell function.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%j</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of jobs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%L</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current value of <b>$SHLVL</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the script, sourced file, or shell function
that zsh is currently executing, whichever was started most
recently. If there is none, this is equivalent to the
parameter <b>$0</b>. An integer may follow the
&lsquo;<b>%</b>&rsquo; to specify a number of trailing path
components to show; zero means the full path. A negative
integer specifies leading components.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%x</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the file containing the source code
currently being executed. This behaves as <b>%N</b> except
that function and eval command names are not shown, instead
the file where they were defined.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%.</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%C</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Trailing component of the current working directory. An
integer may follow the &lsquo;<b>%</b>&rsquo; to get more
than one component. Unless &lsquo;<b>%C</b>&rsquo; is used,
tilde contraction is performed first. These are deprecated
as <b>%c</b> and <b>%C</b> are equivalent to <b>%1~</b> and
<b>%1/</b>, respectively, while explicit positive integers
have the same effect as for the latter two sequences.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Date and
time</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The date in
<i>yy</i><b>&minus;</b><i>mm</i><b>&minus;</b><i>dd</i>
format.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day, in 24&minus;hour format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%t</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%@</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day, in 12&minus;hour, am/pm format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%*</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day in 24&minus;hour format, with
seconds.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The date in <i>day</i><b>&minus;</b><i>dd</i>
format.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%W</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The date in <i>mm</i><b>/</b><i>dd</i><b>/</b><i>yy</i>
format.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>%D{</b><i>string</i><b>}</b></p>

<p style="margin-left:22%;"><i>string</i> is formatted
using the <b>strftime</b> function. See <i>strftime</i>(3)
for more details. Various zsh extensions provide numbers
with no leading zero or space if the number is a single
digit:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%f</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>a day of the month</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%K</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>the hour of the day on the 24&minus;hour clock</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%L</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>the hour of the day on the 12&minus;hour clock</p></td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The GNU
extension that a &lsquo;<b>&minus;</b>&rsquo; between the
<b>%</b> and the format character causes a leading zero or
space to be stripped is handled directly by the shell for
the format characters <b>d</b>, <b>f</b>, <b>H</b>,
<b>k</b>, <b>l</b>, <b>m</b>, <b>M</b>, <b>S</b> and
<b>y</b>; any other format characters are provided to
<b>strftime()</b> with any leading
&lsquo;<b>&minus;</b>&rsquo;, present, so the handling is
system dependent. Further GNU extensions are not supported
at present.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Visual
effects <br>
%B</b> (<b>%b</b>)</p>

<p style="margin-left:22%;">Start (stop) boldface mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%E</b></p></td>
<td width="8%"></td>
<td width="32%">


<p>Clear to end of line.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>%U</b> (<b>%u</b>)</p>

<p style="margin-left:22%;">Start (stop) underline
mode.</p>

<p style="margin-left:11%;"><b>%S</b> (<b>%s</b>)</p>

<p style="margin-left:22%;">Start (stop) standout mode.</p>

<p style="margin-left:11%;"><b>%F</b> (<b>%f</b>)</p>

<p style="margin-left:22%;">Start (stop) using a different
foreground colour, if supported by the terminal. The colour
may be specified two ways: either as a numeric argument, as
normal, or by a sequence in braces following the <b>%F</b>,
for example <b>%F{red}</b>. In the latter case the values
allowed are as described for the <b>fg zle_highlight</b>
attribute; see <i>Character Highlighting</i> in
<i>zshzle</i>(1). This means that numeric colours are
allowed in the second format also.</p>

<p style="margin-left:11%;"><b>%K</b> (<b>%k</b>)</p>

<p style="margin-left:22%;">Start (stop) using a different
bacKground colour. The syntax is identical to that for
<b>%F</b> and <b>%f</b>.</p>

<p style="margin-left:11%;"><b>%{</b>...<b>%}</b></p>

<p style="margin-left:22%;">Include a string as a literal
escape sequence. The string within the braces should not
change the cursor position. Brace pairs can nest.</p>

<p style="margin-left:22%; margin-top: 1em">A positive
numeric argument between the <b>%</b> and the <b>{</b> is
treated as described for <b>%G</b> below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%G</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Within a <b>%{</b>...<b>%}</b> sequence, include a
&lsquo;glitch&rsquo;: that is, assume that a single
character width will be output. This is useful when
outputting characters that otherwise cannot be correctly
handled by the shell, such as the alternate character set on
some terminals. The characters in question can be included
within a <b>%{</b>...<b>%}</b> sequence together with the
appropriate number of <b>%G</b> sequences to indicate the
correct width. An integer between the &lsquo;<b>%</b>&rsquo;
and &lsquo;<b>G</b>&rsquo; indicates a character width other
than one. Hence <b>%{</b><i>seq</i><b>%2G%}</b> outputs
<i>seq</i> and assumes it takes up the width of two standard
characters.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Multiple uses
of <b>%G</b> accumulate in the obvious fashion; the position
of the <b>%G</b> is unimportant. Negative integers are not
handled.</p>

<p style="margin-left:22%; margin-top: 1em">Note that when
prompt truncation is in use it is advisable to divide up
output into single characters within each
<b>%{</b>...<b>%}</b> group so that the correct truncation
point can be found.</p>

<h2>CONDITIONAL SUBSTRINGS IN PROMPTS
<a name="CONDITIONAL SUBSTRINGS IN PROMPTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The value of the first element
of the <b>psvar</b> array parameter. Following the
&lsquo;<b>%</b>&rsquo; with an integer gives that element of
the array. Negative integers count from the end of the
array.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>%(</b><i>x.true&minus;text.false&minus;text</i><b>)</b></p>

<p style="margin-left:22%;">Specifies a ternary expression.
The character following the <i>x</i> is arbitrary; the same
character is used to separate the text for the
&lsquo;true&rsquo; result from that for the
&lsquo;false&rsquo; result. This separator may not appear in
the <i>true&minus;text</i>, except as part of a
%&minus;escape sequence. A &lsquo;<b>)</b>&rsquo; may appear
in the <i>false&minus;text</i> as &lsquo;<b>%)</b>&rsquo;.
<i>true&minus;text</i> and <i>false&minus;text</i> may both
contain arbitrarily&minus;nested escape sequences, including
further ternary expressions.</p>

<p style="margin-left:22%; margin-top: 1em">The left
parenthesis may be preceded or followed by a positive
integer <i>n</i>, which defaults to zero. A negative integer
will be multiplied by &minus;1. The test character <i>x</i>
may be any of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>!</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the shell is running with privileges.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>#</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the effective uid of the current process is
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>?</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the exit status of the last command was
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>_</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if at least <i>n</i> shell constructs were
started.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>C</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>/</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the current absolute path has at least <i>n</i>
elements relative to the root directory, hence <b>/</b> is
counted as 0 elements.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>c</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>.</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>~</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the current path, with prefix replacement, has
at least <i>n</i> elements relative to the root directory,
hence <b>/</b> is counted as 0 elements.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the month is equal to <i>n</i> (January =
0).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>d</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the day of the month is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>g</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the effective gid of the current process is
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>j</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the number of jobs is at least <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>L</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the <b>SHLVL</b> parameter is at least
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>l</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if at least <i>n</i> characters have already been
printed on the current line.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the <b>SECONDS</b> parameter is at least
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>T</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the time in hours is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>t</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the time in minutes is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>v</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the array <b>psvar</b> has at least <i>n</i>
elements.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>V</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if element <i>n</i> of the array <b>psvar</b> is
set and non&minus;empty.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>w</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the day of the week is equal to <i>n</i> (Sunday
= 0).</p></td></tr>
</table>


<p style="margin-left:11%;"><b>%&lt;</b><i>string</i><b>&lt;
<br>
%&gt;</b><i>string</i><b>&gt; <br>
%[</b><i>xstring</i><b>]</b></p>

<p style="margin-left:22%;">Specifies truncation behaviour
for the remainder of the prompt string. The third,
deprecated, form is equivalent to
&lsquo;<b>%</b><i>xstringx</i>&rsquo;, i.e. <i>x</i> may be
&lsquo;<b>&lt;</b>&rsquo; or &lsquo;<b>&gt;</b>&rsquo;. The
numeric argument, which in the third form may appear
immediately after the &lsquo;<b>[</b>&rsquo;, specifies the
maximum permitted length of the various strings that can be
displayed in the prompt. The <i>string</i> will be displayed
in place of the truncated portion of any string; note this
does not undergo prompt expansion.</p>

<p style="margin-left:22%; margin-top: 1em">The forms with
&lsquo;<b>&lt;</b>&rsquo; truncate at the left of the
string, and the forms with &lsquo;<b>&gt;</b>&rsquo;
truncate at the right of the string. For example, if the
current directory is &lsquo;<b>/home/pike</b>&rsquo;, the
prompt &lsquo;<b>%8&lt;..&lt;%/</b>&rsquo; will expand to
&lsquo;<b>..e/pike</b>&rsquo;. In this string, the
terminating character (&lsquo;<b>&lt;</b>&rsquo;,
&lsquo;<b>&gt;</b>&rsquo; or &lsquo;<b>]</b>&rsquo;), or in
fact any character, may be quoted by a preceding
&lsquo;<b>\</b>&rsquo;; note when using <b>print
&minus;P</b>, however, that this must be doubled as the
string is also subject to standard <b>print</b> processing,
in addition to any backslashes removed by a double quoted
string: the worst case is therefore &lsquo;<b>print &minus;P
&quot;%&lt;\\\\&lt;&lt;...&quot;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>string</i> is longer than the specified truncation
length, it will appear in full, completely replacing the
truncated string.</p>

<p style="margin-left:22%; margin-top: 1em">The part of the
prompt string to be truncated runs to the end of the string,
or to the end of the next enclosing group of the
&lsquo;<b>%(</b>&rsquo; construct, or to the next truncation
encountered at the same grouping level (i.e. truncations
inside a &lsquo;<b>%(</b>&rsquo; are separate), which ever
comes first. In particular, a truncation with argument zero
(e.g. &lsquo;<b>%&lt;&lt;</b>&rsquo;) marks the end of the
range of the string to be truncated while turning off
truncation from there on. For example, the prompt
&rsquo;%10&lt;...&lt;%~%&lt;&lt;%# &rsquo; will print a
truncated representation of the current directory, followed
by a &lsquo;<b>%</b>&rsquo; or &lsquo;<b>#</b>&rsquo;,
followed by a space. Without the
&lsquo;<b>%&lt;&lt;</b>&rsquo;, those two characters would
be included in the string to be truncated.</p>
<hr>
</body>
</html>
