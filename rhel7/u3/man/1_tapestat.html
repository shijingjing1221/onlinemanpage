<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:40:41 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>TAPESTAT</title>

</head>
<body>

<h1 align="center">TAPESTAT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#REPORT">REPORT</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONSIDERATIONS">CONSIDERATIONS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">tapestat
&minus; Report tape statistics.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>tapestat [
-k | -m ] [ -t ] [ -V ] [ -y ] [ -z ] [</b> <i>interval</i>
<b>[</b> <i>count</i> <b>] ]</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>tapestat</b> command is used for monitoring the activity
of tape drives connected to a system.</p>

<p style="margin-left:11%; margin-top: 1em">The first
report generated by the <b>tapestat</b> command provides
statistics concerning the time since the system was booted,
unless the <b>-y</b> option is used, when this first report
is omitted. Each subsequent report covers the time since the
previous report.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>interval</i> parameter specifies the amount of time in
seconds between each report. The <i>count</i> parameter can
be specified in conjunction with the <i>interval</i>
parameter. If the <i>count</i> parameter is specified, the
value of <i>count</i> determines the number of reports
generated at <i>interval</i> seconds apart. If the
<i>interval</i> parameter is specified without the
<i>count</i> parameter, the <b>tapestat</b> command
generates reports continuously.</p>

<h2>REPORT
<a name="REPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>tapestat</b> report provides statistics for each tape
drive connected to the system. The following data are
displayed:</p>

<p style="margin-left:11%; margin-top: 1em"><b>r/s</b></p>

<p style="margin-left:22%;">The number of reads issued
expressed as the number per second averaged over the
interval.</p>

<p style="margin-left:11%; margin-top: 1em"><b>w/s</b></p>

<p style="margin-left:22%;">The number of writes issued
expressed as the number per second averaged over the
interval.</p>

<p style="margin-left:11%; margin-top: 1em"><b>kB_read/s |
MB_read/s</b></p>

<p style="margin-left:22%;">The amount of data read
expressed in kilobytes (by default or if option -k used) or
megabytes (if option -m used) per second averaged over the
interval.</p>

<p style="margin-left:11%; margin-top: 1em"><b>kB_wrtn/s |
MB_wrtn/s</b></p>

<p style="margin-left:22%;">The amount of data written
expressed in kilobytes (by default or if option -k used) or
megabytes (if option -m used) per second averaged over the
interval.</p>

<p style="margin-left:11%; margin-top: 1em"><b>%Rd</b></p>

<p style="margin-left:22%;">Read percentage wait - The
percentage of time over the interval spent waiting for read
requests to complete. The time is measured from when the
request is dispatched to the SCSI mid-layer until it signals
that it completed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>%Wr</b></p>

<p style="margin-left:22%;">Write percentage wait - The
percentage of time over the interval spent waiting for write
requests to complete. The time is measured from when the
request is dispatched to the SCSI mid-layer until it signals
that it completed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>%Oa</b></p>

<p style="margin-left:22%;">Overall percentage wait - The
percentage of time over the interval spent waiting for any
I/O request to complete (read, write, and other).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Rs/s</b></p>

<p style="margin-left:22%;">The number of I/Os, expressed
as the number per second averaged over the interval, where a
non-zero residual value was encountered.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Ot/s</b></p>

<p style="margin-left:22%;">The number of I/Os, expressed
as the number per second averaged over the interval, that
were included as &quot;other&quot;. Other I/O includes ioctl
calls made to the tape driver and implicit operations
performed by the tape driver such as rewind on close (for
tape devices that implement rewind on close). It does not
include any I/O performed using methods outside of the tape
driver (e.g. via sg ioctls).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">-k</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Show the amount of data written
or read in kilobytes per second instead of megabytes. This
option is mutually exclusive with -m.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-m</p></td>
<td width="8%"></td>
<td width="78%">


<p>Show the amount of data written or read in megabytes per
second instead of kilobytes. This option is mutually
exclusive with -k.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-t</p></td>
<td width="8%"></td>
<td width="78%">


<p>Display time stamps. The time stamp format may depend on
the value of the S_TIME_FORMAT environment variable (see
below).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-V</p></td>
<td width="8%"></td>
<td width="78%">


<p>Print version and exit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-y</p></td>
<td width="8%"></td>
<td width="78%">


<p>Omit the initial statistic showing values since
boot.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-z</p></td>
<td width="8%"></td>
<td width="78%">


<p>Tell <b>tapestat</b> to omit output for any tapes for
which there was no activity during the sample period.</p></td></tr>
</table>

<h2>CONSIDERATIONS
<a name="CONSIDERATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is possible
for a percentage value (read, write, or other) to be greater
than 100 percent (the <b>tapestat</b> command will never
show a percentage value more than 999). If rewinding a tape
takes 40 seconds where the interval time is 5 seconds the
%Oa value would show as 0 in the intervals before the rewind
completed and then show as approximately 800 percent when
the rewind completes.</p>

<p style="margin-left:11%; margin-top: 1em">Similar values
will be observed for %Rd and %Wr if a tape drive stops
reading or writing and then restarts (that is it stopped
streaming). In such a case you may see the r/s or w/s drop
to zero and the %Rd/%Wr value could be higher than 100 when
reading or writing continues (depending on how long it takes
to restart writing or reading). This is only an issue if it
happens a lot as it may cause tape wear and will impact on
the backup times.</p>

<p style="margin-left:11%; margin-top: 1em">For fast tape
drives you may see low percentage wait times. This does not
indicate an issue with the tape drive. For a slower tape
drive (e.g. an older generation DDS drive) the speed of the
tape (and tape drive) is much slower than filesystem I/O,
percent wait times are likely to be higher. For faster tape
drives (e.g. LTO) the percentage wait times are likely to be
lower as program writing to or reading from tape is going to
be doing a lot more filesystem I/O because of the higher
throughput.</p>

<p style="margin-left:11%; margin-top: 1em">Although tape
statistics are implemented in the kernel using atomic
variables they cannot be read atomically as a group. All of
the statistics values are read from different files under
/sys, because of this there may be I/O completions while
reading the different files for the one tape drive. This may
result in a set of statistics for a device that contain some
values before an I/O completed and some after.</p>

<p style="margin-left:11%; margin-top: 1em">This command
uses rounding down as the rounding method when calculating
per second statistics. If, for example, you are using dd to
copy one tape to another and running <b>tapestat</b> with an
interval of 5 seconds and over the interval there were 3210
writes and 3209 reads then w/s would show 642 and r/s 641
(641.8 rounded down to 641). In such a case if it was a tar
archive being copied (with a 10k block size) you would also
see a difference between the kB_read/s and kB_wrtn/s of 2
(one I/O 10k in size divided by the interval period of 5
seconds). If instead there were 3210 writes and 3211 reads
both w/s and r/s would both show 642 but you would still see
a difference between the kB_read/s and kB_wrtn/s values of 2
kB/s.</p>

<p style="margin-left:11%; margin-top: 1em">This command is
provided with an interval in seconds. However internally the
interval is tracked per device and can potentially have an
effect on the per second statistics reported. The time each
set of statistics is captured is kept with those statistics.
The difference between the current and previous time is
converted to milliseconds for use in calculations. We can
look at how this can impact the statistics reported if we
use an example of a tar archive being copied between two
tape drives using dd. If both devices reported 28900
kilobytes transferred and the reading tape drive had an
interval of 5001 milliseconds and the writing tape drive
5000 milliseconds that would calculate out as 5778 kB_read/s
and 5780 kB_wrtn/s.</p>

<p style="margin-left:11%; margin-top: 1em">The impact of
some retrieving statistics during an I/O completion,
rounding down, and small differences in the interval period
on the statistics calculated should be minimal but may be
non-zero.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>tapestat</b> command takes into account the following
environment variable: <br>
S_TIME_FORMAT</p>

<p style="margin-left:22%;">If this variable exists and its
value is <b>ISO</b> then the current locale will be ignored
when printing the date in the report header. The
<b>tapestat</b> command will use the ISO 8601 format
(YYYY-MM-DD) instead. The timestamp displayed with option -t
will also be compliant with ISO 8601 format.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>/sys</i>
filesystem must be mounted for <b>tapestat</b> to work. It
will not work on kernels that do not have sysfs support</p>

<p style="margin-left:11%; margin-top: 1em">This command
requires kernel version 4.2 or later (or tape statistics
support backported for an earlier kernel version).</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>/sys/class/scsi_tape/st&lt;num&gt;/stats/*</i>
Statistics files for tape devices.</p>


<p style="margin-left:11%; margin-top: 1em"><i>/proc/uptime</i>
contains system uptime.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Initial
revision by Shane M. SEYMOUR (shane.seymour &lt;at&gt;
hpe.com) <br>
Modified for sysstat by Sebastien Godard (sysstat &lt;at&gt;
orange.fr)</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>iostat</b>(1),
<b>mpstat</b>(1)</p>


<p style="margin-left:11%; margin-top: 1em"><i>http://pagesperso-orange.fr/sebastien.godard/</i></p>
<hr>
</body>
</html>
