<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 20:58:04 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CFGMAKER</title>

</head>
<body>

<h1 align="center">CFGMAKER</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">cfgmaker
&minus; Creates mrtg.cfg files (for mrtg&minus;2.17.4)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">cfgmaker
[options] [community@]router [[options] [community@]router
...]</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em"> &minus;&minus;ifref=nr    interface references by Interface Number (default)
 &minus;&minus;ifref=ip                     ... by Ip Address
 &minus;&minus;ifref=eth                        ... by Ethernet Number
 &minus;&minus;ifref=descr                      ... by Interface Description
 &minus;&minus;ifref=name                       ... by Interface Name
 &minus;&minus;ifref=type                       ... by Interface Type
                You may also use multiple options separated by commas,
               in which case the first available one is used:
               e.g.  &minus;&minus;ifref=ip,name,nr
 &minus;&minus;ifdesc=nr       interface description uses Interface Number (default)
 &minus;&minus;ifdesc=ip                        ... uses Ip Address
 &minus;&minus;ifdesc=eth                       ... uses Ethernet Number
 &minus;&minus;ifdesc=descr                     ... uses Interface Description
 &minus;&minus;ifdesc=name                      ... uses Interface Name
 &minus;&minus;ifdesc=catname                   ... uses CatOS Interface Name
 &minus;&minus;ifdesc=ppname                    ... uses Passport Port Name
 &minus;&minus;ifdesc=alias                     ... uses Interface Alias
 &minus;&minus;ifdesc=type                      ... uses Interface Type
                You may also use multiple options separated by commas,
               in which case the first available one is used:
               e.g.  &minus;&minus;ifdesc=catname,ppname,descr,alias,ip,name,nr
 &minus;&minus;if&minus;filter=f     Test every interface against filter f to decide wether
                   or not to include that interface into the collection.
                   Currently f is being evaluated as a Perl expression
                   and it's truth value is used to reject or accept the
                   interface.
                   (Experimental, under development, might change)
 &minus;&minus;if&minus;template=templatefile
                   Replace the normal target entries for the interfaces
                   with an entry as specified by the contents in the file
                   templatefile.  The file is supposed to contain Perl
                   code to be executed to generate the lines for the
                   target in the configuration file.
                   (Experimental, under development, might change)
 &minus;&minus;host&minus;template=templatefile
                   In addition to creating targets for a host's interfaces
                   do also create targets for the host itself as specified
                   by the contents in the file templatefile.  The file is
                   supposed to contain Perl code to be executed to generate
                   the lines for the host related targets (such as CPU,
                   ping response time measurements etc.) in the config&minus;
                   uration file.
                   (Experimental, under development, might change)
 &minus;&minus;global &quot;x: a&quot;   add global config entries
 &minus;&minus;no&minus;down         do not look at admin or opr status of interfaces
 &minus;&minus;show&minus;op&minus;down    show interfaces which are operatively down
 &minus;&minus;zero&minus;speed=spd  use this speed in bits&minus;per&minus;second as the interface
                   speed for all interfaces that return a speed of 0
                   via ifSpeed/ifHighSpeed.  100Mbps = 100000000
 &minus;&minus;subdirs=format  give each router its own subdirectory, naming each per
                   &quot;format&quot;, in which HOSTNAME and SNMPNAME will be
                   replaced by the values of those items &minus;&minus; for instance,
                   &minus;&minus;subdirs=HOSTNAME or &minus;&minus;subdirs=&quot;HOSTNAME (SNMPNAME)&quot;
 &minus;&minus;noreversedns    do not reverse lookup ip numbers
 &minus;&minus;community=cmty  Set the default community string to &quot;cmty&quot; instead of
                   &quot;public&quot;.
 &minus;&minus;enable&minus;ipv6     Enable IPv6 support, if the required libraries are
                   present. Numeric IPv6 addresses must be enclosed
                   in square brackets, e.g. public@[2001:760:4::1]:161
 &minus;&minus;use&minus;16bit       Use 16bit SNMP request IDs to query all routers.
 &minus;&minus;snmp&minus;options=:[&lt;port&gt;][:[&lt;tmout&gt;][:[&lt;retr&gt;][:[&lt;backoff&gt;][:&lt;ver&gt;]]]]
                   Specify default SNMP options to be appended to all
                   routers following.  Individual fields can be empty.
                   Routers following might override some or all of the
           options given to &minus;&minus;snmp&minus;options.
 &minus;&minus;dns&minus;domain=domain
           Specifies a domain to append to the name of all
           routers following.
 &minus;&minus;nointerfaces    Don't do generate any configuration lines for interfaces,
                   skip the step of gathering interface information and
                   don't run any interface template code.
 &minus;&minus;interfaces      Generate configuration lines for interfaces (this is the
                   default).  The main purpose of this option is to negate
                   an &minus;&minus;nointerfaces appearing earlier on the command line.
 &minus;&minus;help            brief help message
 &minus;&minus;man             full documentation
 &minus;&minus;version         print the version of cfgmaker
 &minus;&minus;output=file     output filename default is STDOUT</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Cfgmaker</b>
creates <small>MRTG</small> configuration files based on
information pulled from a router or another
<small>SNMP</small> manageable device.</p>


<p style="margin-left:11%; margin-top: 1em">[<i>community</i><b>@</b>]<i>router</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>Community</i>
is the community name of the device you want to create a
configuration for. If not specified, it defaults to
&rsquo;<b>public</b>&rsquo;; you might want to try this
first if you do not know the community name of a device. If
you are using the wrong community name you will get no
response from the device.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Router</i>
is the <small>DNS</small> name or the <small>IP</small>
number of an SNMP-managable device. Following the name you
can specify 6 further options separated by colons. The full
syntax looks like this:</p>


<p style="margin-left:11%; margin-top: 1em"><b>router</b>[:[<b>prt</b>][:[<b>tmout</b>][:[<b>retr</b>][:[<b>backoff</b>][:<b>vers</b>]]]]]</p>

<p style="margin-left:11%; margin-top: 1em">Of special
interest may be the last parameter, <b>vers</b>. If you set
this to &rsquo;2&rsquo; then your device will be queried
with <small>SNMP</small> version 2 requests. This allows you
to poll the 64 bit traffic counters in the device and will
thus work much better with fast interfaces (no more counter
overrun). Note that the order in which the routers are
specified on the command line do matter as the same order is
used when the configuration file is generated. The first
specified router has it&rsquo;s configuration lines genrated
first, followed by the lines belonging to the next router
and so on.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
first line of the generated cfg file will contain all the
commandline options you used for generating it. This is to
allow for the easy &rsquo;regeneration&rsquo; in case you
want to add newhosts or make some other global change.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
Except for the <b>&minus;&minus;output</b> and
<b>&minus;&minus;global</b> options, all options affect only
the routers following them on the command line. If an option
specified earlier on the command line reappears later on the
command line with another value, the new value overrides the
old value as far as remaining routers are concerned. This
way options might be tailored for groups of routers or for
individual routers.</p>

<p style="margin-left:11%; margin-top: 1em">See
<b>&minus;&minus;output</b> and <b>&minus;&minus;global</b>
for how their behaviour is affected by where or how many
times they appear on the command line.</p>

<p style="margin-left:11%; margin-top: 1em">See the
<b>Examples</b> below on how to set an option differently
for multiple routers. <b><br>
&minus;&minus;help</b></p>

<p style="margin-left:17%;">Print a brief help message and
exit.</p>

<p style="margin-left:11%;"><b>&minus;&minus;man</b></p>

<p style="margin-left:17%;">Prints the manual page and
exits.</p>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:17%;">Print the version of cfgmaker.
This should match the version of <small>MRTG</small> for
which config files are being created.</p>

<p style="margin-left:11%;"><b>&minus;&minus;ifref
nr</b>|<b>ip</b>|<b>eth</b>|<b>descr</b>|<b>name</b></p>

<p style="margin-left:17%;">Select the interface
identification method. Default is <b>nr</b> which identifies
the router interfaces by their number. Unfortunately the
interface numbering scheme in an <small>SNMP</small> tree
can change. Some routers change their numbering when new
interfaces are added, others change thier numbering every
full moon just for fun.</p>

<p style="margin-left:17%; margin-top: 1em">To work around
this sad problem <small>MRTG</small> can identify interfaces
by 4 other properties. None of these works for all
interfaces, but you should be able to find one which does
fine for you. Note that especially ethernet addrsses can be
problematic as some routers have the same ethernet address
on most of their interface cards.</p>

<p style="margin-left:17%; margin-top: 1em">Select
<b>ip</b> to identify the interface by its <small>IP</small>
number. Use <b>eth</b> to use the ethernet address for
identification. Use <b>descr</b> to use the Interface
description. Or use <b>name</b> to use the Interface
name.</p>

<p style="margin-left:17%; margin-top: 1em">You can specify
multiple properties if you wish, separated by commas. In
this case, cfgmaker will use the first item in the list
which can provide unique identification. This allows you to
specify, for example, to use <small>IP</small> address and
to use ifName if this is not defined: <br>
&minus;&minus;ifref ip,name</p>

<p style="margin-left:17%; margin-top: 1em">If your chosen
method does not allow unique interface identification on the
device you are querying, <b>cfgmaker</b> will tell you about
it.</p>

<p style="margin-left:11%;"><b>&minus;&minus;ifdesc
nr</b>|<b>ip</b>|<b>eth</b>|<b>descr</b>|<b>name</b>|<b>type</b>|<b>alias</b></p>

<p style="margin-left:17%;">Select what to use as the
description of the interface. The description appears in the
<tt>&quot;Title[]&quot;</tt> property for the target as well
as the text header in the <small>HTML</small> code defined
in the target&rsquo;s <tt>&quot;PageTop[]&quot;</tt>.
Default is to use <b>nr</b> which is just the interface
number which isn&rsquo;t always useful to the viewer of the
graphs.</p>

<p style="margin-left:17%; margin-top: 1em">There are 6
other properties which could be used. Use <b>ip</b> if you
want to use the interface&rsquo;s IP-address. Use <b>eth</b>
if you want to use the interface&rsquo;s ethernet address.
If you want a better description, you can use either
<b>descr</b>, <b>name</b> or <b>alias</b>. Exactly what each
of these do varies between different equipment so you might
need to experiment. For instance, for a serial interface on
a Cisco router running <small>IOS</small> using <b>name</b>
might result in <tt>&quot;S0&quot;</tt> being the interface
description , <b>descr</b> might result in
<tt>&quot;Serial0&quot;</tt> and <b>alias</b> might result
in <tt>&quot;Link to HQ&quot;</tt> (provided that is what is
used as the interface&rsquo;s
<tt>&quot;description&quot;</tt> in the router&rsquo;s
configuration).</p>

<p style="margin-left:17%; margin-top: 1em">Finally, if you
want to describe the interface by it&rsquo;s Btype (i.e
<tt>&quot;ethernetCSMA&quot;</tt>,
<tt>&quot;propPointtoPoint&quot;</tt> etc) you can use
<b>type</b>.</p>

<p style="margin-left:17%; margin-top: 1em">You can specify
multiple properties if you wish, separated by commas. In
this case, cfgmaker will use the first item in the list
which is available for this interface. This allows you to
specify, for example, to use any of the different aliases in
order of preference.</p>


<p style="margin-left:11%;"><b>&minus;&minus;if&minus;filter</b>
&rsquo;<b>filter-expression</b>&rsquo;</p>

<p style="margin-left:17%;">First of all, this is under
some development and is experimental.</p>

<p style="margin-left:17%; margin-top: 1em">Use this if you
want to have better control over what interfaces gets
included into the configuration. The
<b>filter-expression</b> is evaluated as a piece of Perl
code and is expected to return a truth value. If true,
include the interface and if false, exclude the
interface.</p>

<p style="margin-left:17%; margin-top: 1em">For a further
discussion on how these filters work, see the section
&quot;Details on Filters&quot; below.</p>


<p style="margin-left:11%;"><b>&minus;&minus;if&minus;template
template-file</b></p>

<p style="margin-left:17%;">First of all, this is under
some development and is experimental.</p>

<p style="margin-left:17%; margin-top: 1em">Use this if you
want to control what the line for each target should look
like in the configuration file. The contents of the file
<b>template-file</b> will be evaluated as a Perl program
which generates the lines using certain variables for input
and output.</p>

<p style="margin-left:17%; margin-top: 1em">For a further
discussion on how these templates work, see the section
&quot;Details on Temaplates&quot; below.</p>


<p style="margin-left:11%;"><b>&minus;&minus;host&minus;template
template-file</b></p>

<p style="margin-left:17%;">First of all, this is under
some development and is experimental.</p>

<p style="margin-left:17%; margin-top: 1em">Use this if you
want to have some extra targets related to the host itself
such as <small>CPU</small> utilization, ping response time
to the host, number of busy modems etc. The contents of the
file <b>template-file</b> will be evaluated once per host as
a Perl program which generates the lines using certain
variables for input and output.</p>

<p style="margin-left:17%; margin-top: 1em">For a further
discussion on how these templates work, see the section
&quot;Details on Templates&quot; below.</p>

<p style="margin-left:11%;"><b>&minus;&minus;community
community-string</b></p>

<p style="margin-left:17%;">Use this to set the community
for the routers following on the command line to
<b>community-string</b>. Individual routers might overrride
this community string by using the syntax
<b>community@router</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;enable&minus;ipv6</b></p>

<p style="margin-left:17%;">This option enables IPv6
support. It requires the appropriate perl modules; if they
are not found then IPv6 is disabled (see the ipv6
documentation).</p>

<p style="margin-left:17%; margin-top: 1em">cfgmaker will
use IPv6 or IPv4 depending on the target. If the target is a
numeric address, the protocol depends on the type of
address. If the target is a hostname, cfgmaker will try to
resolve the name first to an IPv6 address then to an IPv4
address.</p>

<p style="margin-left:17%; margin-top: 1em">IPv6 numeric
addresses must be specified between square braces.</p>

<p style="margin-left:17%; margin-top: 1em">For
example:</p>

<pre style="margin-left:17%; margin-top: 1em"> cfgmaker &minus;&minus;enable&minus;ipv6 [2001:760:4::1]:165:::2</pre>


<p style="margin-left:17%; margin-top: 1em">If the target
has both an IPv6 address and an IPv4 address with the same
hostname, cfgmaker first queries the target using IPv6 and
falls back to IPv4 if it fails. This is useful for targets
which don&rsquo;t support <small>SNMP</small> over IPv6.</p>


<p style="margin-left:11%;"><b>&minus;&minus;use&minus;16bit</b></p>

<p style="margin-left:17%;">This option forces the use of
16bit <small>SNMP</small> request IDs. Some broken
<small>SNMP</small> agents do not accept 32bit request IDs.
Try to avoid this option as much as possible, complain to
your agent vendor instead.</p>


<p style="margin-left:11%;"><b>&minus;&minus;snmp&minus;options</b>
:[<b>port</b>][:[<b>timeout</b>][:[<b>retries</b>][:[<b>backoff</b>][:<b>version</b>]]]]</p>

<p style="margin-left:17%;">Use this to set the default
<small>SNMP</small> options for all routers following on the
command line. Individual values might be omitted as well as
trailing colons. Note that routers might override individual
(or all) values specified by
<b>&minus;&minus;snmp&minus;options</b> by using the
syntax</p>


<p style="margin-left:17%; margin-top: 1em"><b>router</b>[:[<b>port</b>][:[<b>timeout</b>][:[<b>retries</b>][:[<b>backoff</b>][:<b>version</b>]]]]]</p>

<p style="margin-left:11%;"><b>&minus;&minus;global
&quot;</b><i>bla: abc</i><b>&quot;</b></p>

<p style="margin-left:17%;">Use this to add global options
to the generated config file. You can call
<b>&minus;&minus;global</b> several times to add multiple
options. The line will appear in the configuration just
before the config for the next router appearing on the
command line.</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus;&minus;global &quot;workdir: /home/mrtg&quot;</pre>


<p style="margin-left:17%; margin-top: 1em">If you want
some default Options you might want to put</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus;&minus;global &quot;options[_]: growright,bits&quot;</pre>


<p style="margin-left:17%; margin-top: 1em">Specifying
<b>&minus;&minus;global</b> after the last router on the
command line will create a line in the configuration file
which will appear after all the routers.</p>


<p style="margin-left:11%;"><b>&minus;&minus;noreversedns</b></p>

<p style="margin-left:17%;">Do not try to reverse lookup
<small>IP</small> numbers ... a must for <small>DNS</small>
free environments.</p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;down</b></p>

<p style="margin-left:17%;">Normally cfgmaker will not
include interfaces which are marked anything but
administratively and operationally <small>UP</small> . With
this switch you get them all.</p>


<p style="margin-left:11%;"><b>&minus;&minus;show&minus;op&minus;down</b></p>

<p style="margin-left:17%;">Include interfaces which are
operatively down.</p>


<p style="margin-left:11%;"><b>&minus;&minus;zero&minus;speed</b>
<i>speed</i></p>

<p style="margin-left:17%;">Assign this speed in
bits-per-second to all interfaces which return 0 for ifSpeed
and ifHighSpeed. Some switches, notably Foundry equipment,
return a speed of zero for some interfaces. For example, to
have all interfaces reporting zero set to 100Mbps, use
&minus;&minus;zero&minus;speed=100000000.</p>

<p style="margin-left:11%;"><b>&minus;&minus;subdirs</b>
<i>format</i></p>

<p style="margin-left:17%;">Give each router its own
subdirectory for the <small>HTML</small> and graphics (or
.rrd) files. The directory name is the given <i>format</i>
string with a couple of pattern replacements. The string
&quot; <small>HOSTNAME</small> &quot; will be replaced by
the hostname of the router (however you specified it on the
<b>cfgmaker</b> commandline -- it may be an actual hostname
or just an <small>IP</small> address), and &quot;
<small>SNMPNAME</small> &quot; will be replaced with the
device&rsquo;s idea of its own name (the same name that
appears on the right side of the &quot;Title&quot; lines).
For instance, a call like:</p>

<pre style="margin-left:17%; margin-top: 1em"> cfgmaker &minus;&minus;subdirs=HOSTNAME__SNMPNAME public@10.10.0.18</pre>


<p style="margin-left:17%; margin-top: 1em">would result in
the generation of lines looking something like:</p>

<pre style="margin-left:17%; margin-top: 1em"> Directory[10.10.0.18_1]: 10.10.0.18__fp2200&minus;bothrip&minus;1.3</pre>


<p style="margin-left:11%;"><b>&minus;&minus;output</b>
<i>file</i></p>

<p style="margin-left:17%;">Write the output from
<b>cfgmaker</b> into the file <i>file</i>. The default is to
use <tt>&quot;STDOUT&quot;</tt>. <b>&minus;&minus;output</b>
is expected to appear only once on the command line. If used
multiple times, the file specified by the last
<b>&minus;&minus;output</b> will be used.</p>


<p style="margin-left:11%;"><b>&minus;&minus;nointerfaces</b></p>

<p style="margin-left:17%;">Don&rsquo;t generate
configuration lines for interfaces.</p>

<p style="margin-left:17%; margin-top: 1em">This makes
cfgmaker skip all steps related to interfaces which means it
will not do any polling of the router to retrieve interface
information which speeds up the execution of cfgmaker and it
will neither run any interface templates.</p>


<p style="margin-left:11%;"><b>&minus;&minus;interfaces</b></p>

<p style="margin-left:17%;">This makes cfgmaker generate
configuration lines for interfaces (the default
behaviour).</p>

<p style="margin-left:17%; margin-top: 1em">The main usage
of this option is to negate an &minus;&minus;nointerfaces
appearing earlier on the command line.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>SNMP</small>
V3 Options <br>
Cfgmaker</b> supports <small>SNMP</small> V3 using the
<b>Net:SNMP</b> perl module. There are optional parameters
affecting <small>SNMP</small> operation. <br>
&minus;&minus;enablesnmpv3 {yes|no}</p>

<p style="margin-left:17%;">The
<b>&minus;&minus;enablesnmpv3</b> option is an optional flag
to check for the presence of the <b>Net::SNMP</b> libraries.
<b>Cfgmaker</b> will try to determine whether this flag is
required and will set the values automatically.</p>

<p style="margin-left:11%; margin-top: 1em"><i>SNMPv3
Arguments</i></p>

<p style="margin-left:11%; margin-top: 1em">A
<small>SNMP</small> context is a collection of management
information accessible by a <small>SNMP</small> entity. An
item of management information may exist in more than one
context and a <small>SNMP</small> entity potentially has
access to many contexts. The combination of a
contextEngineID and a contextName unambiguously identifies a
context within an administrative domain. In a SNMPv3
message, the contextEngineID and contextName are included as
part of the scopedPDU. All methods that generate a
<small>SNMP</small> message optionally take a
<b>&minus;&minus;contextengineid</b> and
<b>&minus;&minus;contextname</b> argument to configure these
fields. <br>
Context Engine <small>ID</small></p>

<p style="margin-left:17%;">The
<b>&minus;&minus;contextengineid</b> argument expects a
hexadecimal string representing the desired contextEngineID.
The string must be 10 to 64 characters (5 to 32 octets) long
and can be prefixed with an optional &quot;0x&quot;. Once
the <b>&minus;&minus;contextengineid</b> is specified it
stays with the object until it is changed again or reset to
default by passing in the undefined value. By default, the
contextEngineID is set to match the authoritativeEngineID of
the authoritative <small>SNMP</small> engine.</p>

<p style="margin-left:11%;">Context Name</p>

<p style="margin-left:17%;">The contextName is passed as a
string which must be 0 to 32 octets in length using the
<b>&minus;&minus;contextname</b> argument. The contextName
stays with the object until it is changed. The contextName
defaults to an empty string which represents the
&quot;default&quot; context.</p>

<p style="margin-left:11%; margin-top: 1em"><i>User-based
Security Model Arguments</i></p>

<p style="margin-left:11%; margin-top: 1em">The User-based
Security Model ( <small>USM</small> ) used by SNMPv3
requires that a securityName be specified using the
<b>&minus;&minus;username</b> argument. The creation of a
Net::SNMP object with the version set to SNMPv3 will fail if
the <b>&minus;&minus;username</b> argument is not present.
The <b>&minus;&minus;username</b> argument expects a string
1 to 32 octets in length.</p>

<p style="margin-left:11%; margin-top: 1em">Different
levels of security are allowed by the User-based Security
Model which address authentication and privacy concerns. A
SNMPv3 target will derive the security level (securityLevel)
based on which of the following arguments are specified.</p>

<p style="margin-left:11%; margin-top: 1em">By default a
securityLevel of &rsquo;noAuthNoPriv&rsquo; is assumed. If
the <b>&minus;&minus;authkey</b> or
<b>&minus;&minus;authpassword</b> arguments are specified,
the securityLevel becomes &rsquo;authNoPriv&rsquo;. The
<b>&minus;&minus;authpassword</b> argument expects a string
which is at least 1 octet in length. Optionally, the
<b>&minus;&minus;authkey</b> argument can be used so that a
plain text password does not have to be specified in a
script. The <b>&minus;&minus;authkey</b> argument expects a
hexadecimal string produced by localizing the password with
the authoritativeEngineID for the specific destination
device. The <tt>&quot;snmpkey&quot;</tt> utility included
with the Net::SNMP distribution can be used to create the
hexadecimal string (see snmpkey).</p>

<p style="margin-left:11%; margin-top: 1em">Two different
hash algorithms are defined by SNMPv3 which can be used by
the Security Model for authentication. These algorithms are
<small>HMAC&minus;MD5&minus;96</small> &quot;
<small>MD5</small> &quot; ( <small>RFC</small> 1321) and
<small>HMAC&minus;SHA&minus;96</small> &quot;
<small>SHA&minus;1</small> &quot; ( <small>NIST FIPS
PUB</small> 180&minus;1). The default algorithm used by the
module is <small>HMAC&minus;MD5&minus;96</small> . This
behavior can be changed by using the
<b>&minus;&minus;authprotocol</b> argument. This argument
expects either the string &rsquo;md5&rsquo; or
&rsquo;sha&rsquo; to be passed to modify the hash
algorithm.</p>

<p style="margin-left:11%; margin-top: 1em">By specifying
the arguments <b>&minus;&minus;privkey</b> or
<b>&minus;&minus;privpassword</b> the securityLevel
associated with the object becomes &rsquo;authPriv&rsquo;.
According to SNMPv3, privacy requires the use of
authentication. Therefore, if either of these two arguments
are present and the <b>&minus;&minus;authkey</b> or
<b>&minus;&minus;authpassword</b> arguments are missing, the
creation of the object fails. The
<b>&minus;&minus;privkey</b> and
<b>&minus;&minus;privpassword</b> arguments expect the same
input as the <b>&minus;&minus;authkey</b> and
<b>&minus;&minus;authpassword</b> arguments
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">The User-based
Security Model described in <small>RFC</small> 3414 defines
a single encryption protocol to be used for privacy. This
protocol, CBC-DES &quot; <small>DES</small> &quot; (
<small>NIST FIPS PUB</small> 46&minus;1), is used by default
or if the string &rsquo;des&rsquo; is passed to the
<b>&minus;&minus;privprotocol</b> argument. By working with
the Extended Security Options Consortium
http://www.snmp.com/eso/, the module also supports
additional protocols which have been defined in draft
specifications. The draft
http://www.snmp.com/eso/draft&minus;reeder&minus;snmpv3&minus;usm&minus;3desede&minus;00.txt
defines the support of
<small>CBC&minus;3DES&minus;EDE</small>
&quot;Triple-DES&quot; ( <small>NIST FIPS</small>
46&minus;3) in the User-based Security Model. This protocol
can be selected using the <b>&minus;&minus;privprotocol</b>
argument with the string &rsquo;3desede&rsquo;. The draft
http://www.snmp.com/eso/draft&minus;blumenthal&minus;aes&minus;usm&minus;04.txt
describes the use of
<small>CFB128&minus;AES&minus;128/192/256</small> &quot;
<small>AES</small> &quot; ( <small>NIST FIPS PUB</small>
197) in the <small>USM</small> . The three
<small>AES</small> encryption protocols, differentiated by
their key sizes, can be selected by passing
&rsquo;aescfb128&rsquo;, &rsquo;aescfb192&rsquo;, or
&rsquo;aescfb256&rsquo; to the <b>&minus;privprotocol</b>
argument.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Details on
Filters</b> <br>
The purpose of the filters is to decide which interfaces to
accept and which interfaces to reject. This decision is done
for each interface by evaluating the filter expression as a
piece of Perl code and investigating the result of the
evaluation. If true, accept the interface otherwise reject
it.</p>

<p style="margin-left:11%; margin-top: 1em">When working
with filters, remember that Perl has it&rsquo;s own idea of
what truth and false is. The empty string &quot;&quot; and
the string &quot;0&quot; are false, all other strings are
true. This further imples that any integer value of 0 is
false as well as any undef value. It also implies that all
references are considered true.</p>

<p style="margin-left:11%; margin-top: 1em">As the filter
is evaluated as a Perl expression, several useful constructs
in Perl are worth mentioning:</p>

<p style="margin-left:11%; margin-top: 1em">Expressions
might be grouped by using parentheses &quot;()&quot;.
Expressions might be combined using boolean operators such
as the following: <br>
&quot;<b>and</b>&quot; (equivalent with
&quot;<b>&amp;&amp;</b>&quot;)</p>

<p style="margin-left:17%;">Boolean &quot;and&quot; of the
two expressions, is only true if both expressions are true.
Example: <i>expression1</i> <b>and</b>
<i>expression2</i></p>

<p style="margin-left:11%;">&quot;<b>or</b>&quot;
(equivalent with &quot;<b>||</b>&quot;)</p>

<p style="margin-left:17%;">Boolean &quot;or&quot; of the
two expressions, is true if either or both expressions are
true. Example: <i>expression1</i> <b>or</b>
<i>expression2</i></p>

<p style="margin-left:11%;">&quot;<b>not</b>&quot;
(equivalent with &quot;<b>!</b>&quot;)</p>

<p style="margin-left:17%;">Boolean negation of a single
expression. Example: <b>not</b> <i>expression</i> . Yet
another example: <b>!</b><i>expression</i></p>

<p style="margin-left:11%; margin-top: 1em">(For more
details on this I recommend a book on Perl)</p>

<p style="margin-left:11%; margin-top: 1em"><i>Predefined
Filter Variables</i></p>

<p style="margin-left:11%; margin-top: 1em">To facilitate,
there are a number of predefined values available to use in
the filter. Note that these variables are also available
when templates interfaces are evaluated (but not host
templates).</p>

<p style="margin-left:11%; margin-top: 1em">Caveat: All
these variables&rsquo; names begin with a dollar sign ($),
which is a syntactic requirement for scalar variables in
Perl. The danger here is that the dollar sign in many shells
is an active character (often used for shell variables
exactly as in Perl variables) so it is important to ensure
that the Perl expression isn&rsquo;t evaluated by the
command line shell as shell code before being passed to
cfgmaker as command line arguments. In shells like Bourne
shell, ksh shell or bash shell, placing the entire
expression within single qoutes will avoid such accidental
evaluation:</p>

<pre style="margin-left:11%; margin-top: 1em"> '&minus;&minus;if&minus;filter=($default_iftype &amp;&amp; $if_admin)'</pre>


<p style="margin-left:11%;"><b>$if_type</b></p>

<p style="margin-left:17%;">This is an integer specifying
the interface type as per the <small>SNMP</small> standards
and as reported by the polled device. A complete list of
interface types would be impractical for this document , but
there are a number predefined varables below. Normally,
cfgmaker puts in the target&rsquo;s PageTop this iftype
value within paranthesis after the name of the interface
type. (e.g &quot;propPointToPointSerial (22)&quot;).</p>

<p style="margin-left:17%; margin-top: 1em">Here&rsquo;s a
list of some of the most common interface types by
number:</p>

<pre style="margin-left:17%; margin-top: 1em">   6 ethernetCsmacd
   7 iso88023Csmacd
   9 iso88025TokenRing
  15 fddi
  19 E1
  20 basicISDN
  21 primaryISDN
  22 propPointToPointSerial
  23 ppp
  24 softwareLoopback
  30 ds3
  32 frame&minus;relay
  33 rs232
  37 atm
  39 sonet
  44 frameRelayService
  46 hssi
  49 aal5
  53 propVirtual
  62 Fast Ethernet (100BaseT)
  63 ISDN &amp; X.25
  69 Full Duplex Fast Ethernet (100BaseFX)
  94 Asymetric Digital Subscriber Loop (ADSL)
 117 Gigabit Ethernet
 134 ATM Sub Interface</pre>


<p style="margin-left:11%;"><b>$default</b></p>

<p style="margin-left:17%;">True if and only if cfgmaker
normally should accepted the interface based on the
interfaces administrative and operational state (taking the
flags <b>&minus;&minus;no&minus;down</b> and
<b>&minus;&minus;show&minus;op&minus;down</b> into account)
and it&rsquo;s type (and a few other things).</p>

<p style="margin-left:11%;"><b>$default_ifstate</b></p>

<p style="margin-left:17%;">True if and only if cfgmaker
would have accepted the interface based on it&rsquo;s
operational and administrative states (also taking into
account the presence of the flags
<b>&minus;&minus;no&minus;down</b> and
<b>&minus;&minus;show&minus;op&minus;down</b>).</p>

<p style="margin-left:11%;"><b>$default_iftype</b></p>

<p style="margin-left:17%;">True if and only if cfgmaker
would have accepted the interface based on it&rsquo;s type
(and a few type specific details in addition).</p>

<p style="margin-left:11%;"><b>$if_admin</b></p>

<p style="margin-left:17%;">True if and only if the
interface is in an adminstrative up state.</p>

<p style="margin-left:11%;"><b>$if_oper</b></p>

<p style="margin-left:17%;">True if and only if the
interface is in an operational up state.</p>

<p style="margin-left:11%; margin-top: 1em">A number of
variables are also predefined to easily decide if an
interface belong to a certain cathegory or not. Below is all
those variables listed together with which if_type numbers
each variable will be true for. Note that some variables
refer to other variables as well. <b><br>
$if_is_ethernet</b></p>

<p style="margin-left:17%;">True for ethernet interfaces
(nr 6, 7, 26, 62, 69 and 117).</p>

<p style="margin-left:11%;"><b>$if_is_isdn</b></p>

<p style="margin-left:17%;">True for various
<small>ISDN</small> interface types (nr 20, 21, 63, 75, 76
and 77)</p>

<p style="margin-left:11%;"><b>$if_is_dialup</b></p>

<p style="margin-left:17%;">True for dial-up interfaces
such as <small>PPP</small> as well as <small>ISDN</small> .
(nr 23, 81, 82 and 108 in addition to the numbers of
<b>$if_is_isdn</b>).</p>

<p style="margin-left:11%;"><b>$if_is_atm</b></p>

<p style="margin-left:17%;">True for miscellaneous
<small>ATM</small> related interface types (nr 37, 49, 107,
105, 106, 114 and 134).</p>

<p style="margin-left:11%;"><b>$if_is_wan</b></p>

<p style="margin-left:17%;">True for <small>WAN</small>
interfaces point to point, Frame Relay and High Speed Serial
( 22,32,44,46)</p>

<p style="margin-left:11%;"><b>$if_is_lan</b></p>

<p style="margin-left:17%;">True for <small>LAN</small>
interfaces (8, 9, 11, 15, 26, 55, 59, 60 and 115 in addition
to the numbers of <b>$if_is_ethernet</b>).</p>

<p style="margin-left:11%;"><b>$if_is_dsl</b></p>

<p style="margin-left:17%;">True for <small>ADSL</small> ,
<small>RDSL</small> , <small>HDSL</small> and
<small>SDSL</small> (nr 94, 95, 96, 97)</p>

<p style="margin-left:11%;"><b>$if_is_loopback</b></p>

<p style="margin-left:17%;">True for software loopback
interfaces (nr 24)</p>

<p style="margin-left:11%;"><b>$if_is_ciscovlan</b></p>

<p style="margin-left:17%;">True for Cisco
<small>VLAN</small> interfaces (interfaces with the word
Vlan or <small>VLAN</small> in their ifdescs)</p>

<p style="margin-left:11%;"><b>$if_vlan_id</b></p>

<p style="margin-left:17%;">Returns the vlan id associated
with a specific port on Cisco Catalyst switches under both
Catalyst <small>OS</small> and <small>IOS</small> , and 3Com
switches. If it is not a vlan interface, will return
undef.</p>

<p style="margin-left:11%;"><b>$if_cisco_trunk</b></p>

<p style="margin-left:17%;">Returns the trunking state of a
specific port on Cisco Catalyst switches under both Catalyst
<small>OS</small> and <small>IOS</small> . Returns
&quot;1&quot; if the interface is a trunk, undef
otherwise.</p>

<p style="margin-left:11%;"><b>$if_MTU</b></p>

<p style="margin-left:17%;">Returns the Maximum Transfer
Unit associated with a specific port.</p>

<p style="margin-left:11%; margin-top: 1em">Besides that,
you can also use the variables defined for templates below.
Further, all the variables available in cfgmaker is at the
scripts disposal even if the use of such features is
discouraged. More &quot;shortcuts&quot; in the form of
variables and functions will be made available in the future
instead.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Examples on
Filters</i></p>

<p style="margin-left:11%; margin-top: 1em">The following
filter will not affect which interfaces get&rsquo;s included
or excluded, it will make cfgmaker behave as normally.</p>

<pre style="margin-left:11%; margin-top: 1em"> '&minus;&minus;if&minus;filter=$default'</pre>


<p style="margin-left:11%; margin-top: 1em">The following
filter will make cfgmaker exclude <small>PPP</small> (23)
interfaces:</p>

<pre style="margin-left:11%; margin-top: 1em"> '&minus;&minus;if&minus;filter=$default &amp;&amp; $if_type!=23'</pre>


<p style="margin-left:11%; margin-top: 1em">The following
filter will make cfgmaker behave as usual except that it
will consider the operational state of an interface
irrelevant but still reject all interfaces which are
administratively down.</p>

<pre style="margin-left:11%; margin-top: 1em"> '&minus;&minus;if&minus;filter=$if_admin &amp;&amp; $default_iftype'</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Details on
Templates</b> <br>
The contents of the template files are evaluated as a Perl
program. A number or Perl variables are available for the
program to read and others are used to be written to.</p>

<p style="margin-left:11%; margin-top: 1em">As quite a few
of the predefined variables has values which are are
supposed to be used in <small>HTML</small> code some of them
have an &quot;HTML-escaped&quot; variant, e.g
<tt>$html_syslocation</tt> is the <small>HTML</small>
escaped variant of <tt>$syslocation</tt>. The
<small>HTML</small> escaping means that the chars
&quot;&lt;&quot;, &quot;&gt;&quot; and &quot;&amp;&quot; are
replaced by &quot;&amp;lt;&quot;, &quot;&amp;gt;&quot; and
&quot;&amp;amp;&quot; and that newlines embedded in the
string are prepended with &quot;&lt; <small>BR</small>
&gt;&quot; and appended with a space character (if a newline
is last in the string it is not touched).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Writable
Template Variables</i></p>

<p style="margin-left:11%; margin-top: 1em">These are the
variables available to store the configuration lines in.
Some of them are initialized prior to the evaluation of the
template but such content normally is comments for inclusion
in the final configuration file so those variables might be
reset to the empty string in the template code to eliminate
the comments. The other way around is also possible, the
contents of these variables might be extended with further
information for various reasons such as debugging etc.</p>

<p style="margin-left:11%; margin-top: 1em">Once the
template has been evaluated, the following happens: if the
template is a interface template and the actual interface
for some reason is rejected and thus needs to be commented
out, all the lines in the variable <b>$target_lines</b> are
turned into comments by adding a hash mark (&quot;#&quot;)
at their beginning. Then all the variables
<b>$head_lines</b>, <b>$problem_lines</b> ,
<b>$target_lines</b> and <b>$separator_lines</b> are
concatenated together to form the lines to add to the
configuration file. <b><br>
$target_lines</b></p>

<p style="margin-left:17%;">This variable is the
placeholder for the configuration lines created by the
template. <b>$target_lines</b> is predefined to be empty
when the template code is evaluated.</p>

<p style="margin-left:11%;"><b>$head_lines</b></p>

<p style="margin-left:17%;">This variable is intended to be
the placeholder for the comment line appearing just before
the target in the configuration file. It is initialized with
that comment line before the evaluation of the template code
and if the template doesn&rsquo;t modify <b>$head_lines</b>
during evaluation, the comment will look like usual in the
config file.</p>

<p style="margin-left:11%;"><b>$problem_lines</b></p>

<p style="margin-left:17%;">This variable is intended to be
the placholder for the comment lines describing any problems
which might have been encountered when trying to add the
target into the configuration. For host templates it&rsquo;s
normally not used and for those it&rsquo;s predefined as the
empty string. For interface templates <b>$problem_lines</b>
is predefined with the error description comments which
cfgmaker normally would use for rejected interfaces or as
the empty string for accepted interfaces.</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to test against <b>$problem_lines</b> to find out if an
interface will be included or rejected but this is not
recommended. Test against <b>$if_ok</b> instead.</p>

<p style="margin-left:11%;"><b>$separator_lines</b></p>

<p style="margin-left:17%;">This variable is the
placeholder for the string to use as the separator between
the code for individual targets. The contents of this
variable is put after each target (so the lines will appear
after the end of the last target in the config as well).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Predefined
Template Variables</i></p>

<p style="margin-left:11%; margin-top: 1em">All the
variables below are available for interface templates to
use. For host templates, only those listed under &quot;Host
and System Variables&quot; are available.</p>

<p style="margin-left:11%; margin-top: 1em">For interface
templates the variables listed under &quot;Predefined Filter
Variables&quot; are also available.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Host and
System Variables</i> <b><br>
$router_name</b></p>

<p style="margin-left:17%;">This is the fully qualified
name for the router. It is affected by the following items
on the command line: the router name itself and
<b>&minus;&minus;dns&minus;domain</b>.</p>

<p style="margin-left:11%;"><b>$router_connect</b></p>

<p style="margin-left:17%;">This is the reference string
for the router being polled. It is on the form
community@router possibly followed by some snmp options. It
is affected by the following items on the command line: the
router name itself, <b>&minus;&minus;community</b>,
<b>&minus;&minus;snmp&minus;options</b> and
<b>&minus;&minus;dns&minus;domain</b>. (There&rsquo;s no
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$directory_name</b></p>

<p style="margin-left:17%;">This variable should contain
the directory name as cfgmaker normally would use as the
value for the &quot;Directory[]&quot; directive. The value
is determined by the <b>&minus;&minus;subdirs</b> command
line option. If <b>&minus;&minus;subdirs</b> isn&rsquo;t
specified <b>$directory_name</b> will be the empty string.
(There&rsquo;s no <small>HTML</small> escaped variant
available)</p>

<p style="margin-left:11%;"><b>$syscontact</b></p>

<p style="margin-left:17%;">This variable is the
router&rsquo;s <small>SNMP</small> sysContact value. (
<small>HTML</small> escaped variant:
<b>$html_syscontact</b>)</p>

<p style="margin-left:11%;"><b>$sysname</b></p>

<p style="margin-left:17%;">This variable is the
router&rsquo;s <small>SNMP</small> sysName value. (No
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$syslocation</b></p>

<p style="margin-left:17%;">This variable is the
router&rsquo;s <small>SNMP</small> sysLocation value. (
<small>HTML</small> escaped variant:
<b>$html_syslocation</b>)</p>

<p style="margin-left:11%;"><b>$sysdescr</b></p>

<p style="margin-left:17%;">This variable is the
router&rsquo;s <small>SNMP</small> sysDescr value. It is
normally not used by cfgmaker but might be useful in a
template. ( <small>HTML</small> escaped variant:
<b>$html_sysdescr</b>)</p>

<p style="margin-left:11%; margin-top: 1em"><i>Interface
Target Related Variables</i> <b><br>
$target_name</b></p>

<p style="margin-left:17%;">This is what cfgmaker normally
would use as the the name of the target. The target name is
what is found within the square brackets, &quot;[]&quot;,
for target directives. (There&rsquo;s no <small>HTML</small>
escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_ref</b></p>

<p style="margin-left:17%;">This the reference string for
the interface. It is expected to be used in the
&quot;Target[xyz]&quot; directive to distinguish what
interface to use. The value of this variable is affected by
the <b>&minus;&minus;ifref</b> command line option. It is
normally used together with <b>$router_connect</b>.
(There&rsquo;s no <small>HTML</small> escaped variant
available)</p>

<p style="margin-left:11%;"><b>$if_ok</b></p>

<p style="margin-left:17%;">This variable is true if the
interface is going to be included into the configuration
file, otherwise false. Don&rsquo;t test against other
variables such as <b>$problem_lines</b> to find out if an
interface will be rejected or not, use this <b>$if_ok</b>
instead.</p>


<p style="margin-left:11%;"><b>$default_target_lines</b></p>

<p style="margin-left:17%;">This variable contains all the
target lines which cfgmaker by default outputs for this
interface. It&rsquo;s useful if you want to have the
&quot;standard target&quot; but want to add some extra lines
to it by using a template.</p>

<p style="margin-left:11%; margin-top: 1em">By default
cfgmaker uses the following directives for each target it
generates: Target[], SetEnv[], MaxBytes[], Title[],
PageTop[] and if there is any directory specified also the
Directory[] directive.</p>

<p style="margin-left:11%; margin-top: 1em">To facilitate
the creation of templates which generates target configs
which are similar to the default one, each of the above
mentioned directive lines have a corresponding variable
containing the line as cfgmaker would have output it by
default.</p>

<p style="margin-left:11%; margin-top: 1em">Note that none
of these have a <small>HTML</small> escaped variant, text in
them is <small>HTML</small> escaped where needed. Also note
that they do not have any newline at the end. <b><br>
$default_target_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the Target[] directive line.</p>


<p style="margin-left:11%;"><b>$default_setenv_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the SetEnv[] directive line.</p>


<p style="margin-left:11%;"><b>$default_directory_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the Directory[] directive line which
means it is an empty string (with no newline) if
there&rsquo;s no directory.</p>


<p style="margin-left:11%;"><b>$default_maxbytes_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the MaxBytes[] directive line.</p>


<p style="margin-left:11%;"><b>$default_title_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the Title[] directive line.</p>


<p style="margin-left:11%;"><b>$default_pagetop_directive</b></p>

<p style="margin-left:17%;">This variable contains the
default string for the PageTop[] directive lines.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Interface
Network Configuration Variables</i> <b><br>
$if_ip</b></p>

<p style="margin-left:17%;">This variable should contain
the IP-address of the interface, if any has been assigned to
it. (There&rsquo;s no <small>HTML</small> escaped variant
available)</p>

<p style="margin-left:11%;"><b>$ifindex</b></p>

<p style="margin-left:17%;">This variable is the
<small>SNMP</small> ifIndex for the interface which per
definition always is an integer. (There&rsquo;s no
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_index</b></p>

<p style="margin-left:17%;">Equivalent with
<b>$ifindex</b>.</p>

<p style="margin-left:11%;"><b>$if_eth</b></p>

<p style="margin-left:17%;">Contains the ethernet address
of the interface, if any. (There&rsquo;s no
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_speed</b></p>

<p style="margin-left:17%;">This variable is the speed in
bytes/second (with prefixes). (There&rsquo;s no
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_speed_str</b></p>

<p style="margin-left:17%;">This variable is a cooked speed
description which is either in bits or bytes depending on
wether or not the bits option is active and also with the
proper prefix for the speed (k, M, G etc). (No
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_type_desc</b></p>

<p style="margin-left:17%;">This variable is a textual
description of the interface type. ( <small>HTML</small>
escaped variant: <b>$html_if_type_desc</b>)</p>

<p style="margin-left:11%;"><b>$if_type_num</b></p>

<p style="margin-left:17%;">This variable the integer value
corresponding to the interface type (for a listing for the
value for the more common interface types, see the section
<small>DETAILS ON FILTERS</small> above). (No
<small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_dns_name</b></p>

<p style="margin-left:17%;">This is the <small>DNS</small>
name for the interface. (No <small>HTML</small> escaped
variant available)</p>

<p style="margin-left:11%; margin-top: 1em"><i>Interface
Name, Description and Alias Variables</i></p>

<p style="margin-left:11%; margin-top: 1em">It might seem
confusing with both <i>Name</i>, <i>Description</i> and
<i>Alias</i> in this context and to some extent it is.
<i>Name</i> and <i>Description</i> are usually supported on
most equipment but how they are used varies, both between
manufacturers as well as between different cathegories of
equipment from the same manufacturer. The <i>Alias</i> is at
least supported by Cisco <small>IOS</small> , and that
variable contains whatever is used in the <small>IOS</small>
statement called &quot;description&quot; for the interface
(not to be confused with the <small>SNMP</small> variables
for <i>Description</i>).</p>

<p style="margin-left:11%; margin-top: 1em">For better
control from the command line consider <b>$if_title_desc</b>
which contents are controlled by the
<b>&minus;&minus;if&minus;descr</b> command line option.
<b><br>
$if_snmp_descr</b></p>

<p style="margin-left:17%;">This variable should contain
the &quot;raw&quot; description of the interface as
determined by the <small>SNMP</small> polling of the router.
( <small>HTML</small> escaped variant:
<b>$html_if_snmp_descr</b>)</p>

<p style="margin-left:11%;"><b>$if_snmp_name</b></p>

<p style="margin-left:17%;">The &quot;raw&quot; name for
the interface as provided by <small>SNMP</small> polling. (
<small>HTML</small> escaped variant:
<b>$html_if_snmp_name</b>)</p>

<p style="margin-left:11%;"><b>$if_snmp_alias</b></p>

<p style="margin-left:17%;">The &quot;raw&quot; ifAlias for
the interface as provided by <small>SNMP</small> polling. (
<small>HTML</small> escaped variant:
<b>$html_if_snmp_alias</b>)</p>

<p style="margin-left:11%;"><b>$if_cisco_descr</b></p>

<p style="margin-left:17%;">The &quot;raw&quot;
CiscolocIfDescr for the interface as provided by
<small>SNMP</small> polling. ( <small>HTML</small> escaped
variant: <b>$html_if_cisco_descr</b>)</p>

<p style="margin-left:11%;"><b>$if_description</b></p>

<p style="margin-left:17%;">This is the &quot;cooked&quot;
description string for the interface, taking into account
the <small>SNMP</small> values found for the
interface&rsquo;s RDescr, ifAlias and CiscolocIfDescr. (
<small>HTML</small> escaped variant:
<b>$html_if_description</b>)</p>

<p style="margin-left:11%;"><b>$if_title</b></p>

<p style="margin-left:17%;">The full string cfgmaker by
default would have used for the Title[] directive in the
configuration as well as the content of the topmost H1 tag
in the PageTop[]. Is composed by the contents of
<b>$desc_prefix</b>, <b>$if_title_desc</b> and
<b>$sysname</b>.</p>

<p style="margin-left:17%; margin-top: 1em">As
<b>$if_title</b> depends on <b>$if_title_desc</b>, it is
possible to indirectly control <b>$if_title</b> by using the
command line option <b>&minus;&minus;if&minus;descr</b>.</p>

<p style="margin-left:17%; margin-top: 1em">(
<small>HTML</small> escaped variant:
<b>$html_if_title</b>)</p>

<p style="margin-left:11%;"><b>$if_port_name</b></p>

<p style="margin-left:17%;">If the host is a Cisco Catalyst
<small>LAN</small> switch, this variable is the name of that
port. (No <small>HTML</small> escaped variant available)</p>

<p style="margin-left:11%;"><b>$if_pp_port_name</b></p>

<p style="margin-left:17%;">If the host is a Nortel
Passport <small>LAN</small> switch, this variable is the
name of that port. (No <small>HTML</small> escaped variant
available)</p>

<p style="margin-left:11%;"><b>$desc_prefix</b></p>

<p style="margin-left:17%;">This variable is a prefix of
the description of what the target is to use in the
&quot;Title[]&quot; directive and in the H1 section of the
&quot;PageTop[]&quot;. Default is &quot;Traffic analysis for
&quot;. ( <small>HTML</small> escaped variant:
<b>$html_desc_prefix</b>)</p>

<p style="margin-left:11%;"><b>$if_title_desc</b></p>

<p style="margin-left:17%;">This is the description of the
interface normally used by cfgmaker as part of the variable
<b>$if_title</b>. The latter is used as the full string in
the &quot;Title[]&quot; directove and the H1 section in the
PageTop[].</p>


<p style="margin-left:17%; margin-top: 1em"><b>$if_title_desc</b>
is controlled by the command line option
<b>&minus;&minus;if&minus;descr</b> which indirectly
controls the contents of <b>$if_title</b></p>

<p style="margin-left:17%; margin-top: 1em">(
<small>HTML</small> escaped variant:
<b>$html_if_title_desc</b>)</p>

<p style="margin-left:11%; margin-top: 1em"><i>Help
Functions for Templates</i></p>

<p style="margin-left:11%; margin-top: 1em">The following
functions exists to facilitate the writing of host and
interface templates. <b><br>
html_escape(</b><b><i>string</i></b><b>)</b></p>

<p style="margin-left:17%;"><b><i>html_escape()</i></b>
takes a string as an argument and returns a new string where
the following substitutions has been done: the chars
&quot;&lt;&quot;, &quot;&gt;&quot; and &quot;&amp;&quot; are
replaced by &quot;&amp;lt;&quot;, &quot;&amp;gt;&quot; and
&quot;&amp;amp;&quot; and that newlines embedded in the
string are prepended with &quot;&lt; <small>BR</small>
&gt;&quot; and appended with a space character (newlines at
the end of the string are not touched).</p>


<p style="margin-left:11%;"><b>oid_pick($router_connect,$v3opt,&quot;oid1&quot;,&quot;oid2&quot;...)</b></p>

<p style="margin-left:17%;">This function will try to poll
each of the oids specified until it is successful or has run
out of oids. It will return the name of the first oid that
worked or undef if it is not successful</p>

<p style="margin-left:11%; margin-top: 1em"><i>Example
Template Files</i></p>

<p style="margin-left:11%; margin-top: 1em">Template
Example 1: Eliminating Rejected Targets From Appearing</p>

<p style="margin-left:11%; margin-top: 1em">This template
file generates exactly the same configuration code per
interface as cfgmaker does by default, with the exception
that it eliminates all lines (comments as well as config
code) for an interface if the interface happens to be
rejected.</p>

<pre style="margin-left:11%; margin-top: 1em"> if(not $problem_lines)
 {
   $target_lines .= &lt;&lt;ECHO;
 Target[$target_name]: $if_ref:$router_connect
 SetEnv[$target_name]: MRTG_INT_IP=&quot;$if_ip&quot; MRTG_INT_DESCR=&quot;$if_snmp_descr&quot;
 ECHO
   if ($directory_name) {
       $target_lines .= &quot;Directory[$target_name]: $directory_name\n&quot;;
   }
   $target_lines .= &lt;&lt;ECHO;
 MaxBytes[$target_name]: $if_speed
 Title[$target_name]: $html_desc_prefix$html_if_title_desc &minus;&minus; $sysname
 PageTop[$target_name]: &lt;h1&gt;$html_desc_prefix$html_if_title_desc &minus;&minus; $sysname&lt;/h1&gt;
                &lt;div id=&quot;sysdetails&quot;&gt;
                        &lt;table&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;System:&lt;/td&gt;
                                        &lt;td&gt;$sysname in $html_syslocation&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Maintainer:&lt;/td&gt;
                                        &lt;td&gt;$html_syscontact&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Description:&lt;/td&gt;
                                        &lt;td&gt;$html_if_description&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;ifType:&lt;/td&gt;
                                        &lt;td&gt;$html_if_type_desc ($if_type_num)&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;ifName:&lt;/td&gt;
                                        &lt;td&gt;$html_if_snmp_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if defined $if_port_name;
                                &lt;tr&gt;
                                        &lt;td&gt;Port Name:&lt;/td&gt;
                                        &lt;td&gt;$if_port_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if defined $if_pp_port_name;
                                &lt;tr&gt;
                                        &lt;td&gt;Port Name:&lt;/td&gt;
                                        &lt;td&gt;$if_pp_port_name&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO;
                                &lt;tr&gt;
                                        &lt;td&gt;Max Speed:&lt;/td&gt;
                                        &lt;td&gt;$if_speed_str&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO if $if_ip;
                                &lt;tr&gt;
                                        &lt;td&gt;Ip:&lt;/td&gt;
                                        &lt;td&gt;$if_ip ($if_dns_name)&lt;/td&gt;
                                &lt;/tr&gt;
 ECHO
   $target_lines .= &lt;&lt;ECHO;
                        &lt;/table&gt;
                &lt;/div&gt;
 ECHO
 } else {
   $head_lines=&quot;&quot;;
   $problem_lines=&quot;&quot;;
   $target_lines=&quot;&quot;;
   $separator_lines=&quot;&quot;;
 }</pre>


<p style="margin-left:11%; margin-top: 1em"><i>Template
Example 2: Simplier Version of Example 1</i></p>

<p style="margin-left:11%; margin-top: 1em">Example 1 was
partly intended to demonstrate how to customize the
generation of interface targets but also to provide a hint
of how the variables are used in the &quot;default&quot;
template which one could consider that cfgmaker normally
uses.</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
only intrested in the easiest way of entirely eliminating
those reject interfaces, the template below would do the job
as well by using <b>$default_target_lines</b>.</p>

<pre style="margin-left:11%; margin-top: 1em"> if($if_ok) {
  $target_lines = $default_target_lines;
 } else {
   $head_lines=&quot;&quot;;
   $problem_lines=&quot;&quot;;
   $target_lines=&quot;&quot;;
   $separator_lines=&quot;&quot;;
 }</pre>


<p style="margin-left:11%; margin-top: 1em"><i>Template
Example 3: Creating <small>CPU</small> Targets for
Hosts</i></p>

<p style="margin-left:11%; margin-top: 1em">Below is an
example of a host template.</p>

<pre style="margin-left:11%; margin-top: 1em"> $head_lines .= &lt;&lt;ECHO;
 #&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
 ECHO
 my $target_name = $router_name . &quot;.cpu&quot;;
 $target_lines .= &lt;&lt;ECHO;
 YLegend[$target_name]: Percentage CPU load
 ShortLegend[$target_name]: %
 Legend1[$target_name]: CPU load in %
 Legend2[$target_name]:
 Legend3[$target_name]: Max Observed CPU load
 Legend4[$target_name]:
 LegendI[$target_name]: &amp;nbsp;CPU Load:
 LegendO[$target_name]:
 WithPeak[$target_name]: ywm
 MaxBytes[$target_name]: 100
 Options[$target_name]: growright, gauge, nopercent
 Title[$target_name]: $router_name CPU load
 Target[$target_name]: 1.3.6.1.4.1.9.2.1.58.0&amp;1.3.6.1.4.1.9.2.1.58.0:$router_connect
 PageTop[$target_name]: &lt;h1&gt;$router_name CPU load&lt;/h1&gt;
                &lt;div&gt;
                        &lt;table&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;System:&lt;/td&gt;
                                        &lt;td&gt;$router_name in $html_syslocation&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Maintainer:&lt;/td&gt;
                                        &lt;td&gt;$html_syscontact&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Description:&lt;/td&gt;
                                        &lt;td&gt;$html_sysdescr&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                        &lt;td&gt;Resource:&lt;/td&gt;
                                        &lt;td&gt;CPU.&lt;/td&gt;
                                &lt;/tr&gt;
                        &lt;/table&gt;
                &lt;/div&gt;
 ECHO</pre>


<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The first
example creates a config file for <i>router.place.xyz</i>:
the router has the community name <i>public</i>. Interfaces
get identified by their <small>IP</small> number. Two global
options get added to the config file. The config file gets
redirected to <i>mrtg.conf</i>. The &rsquo;\&rsquo; signs at
the end of the line mean that this command should be written
on a single line.</p>

<pre style="margin-left:11%; margin-top: 1em"> cfgmaker &minus;&minus;global &quot;WorkDir: /home/tobi&quot;           \
          &minus;&minus;global &quot;Options[_]: growright,bits&quot;    \
          &minus;&minus;ifref=ip                               \
          public@router.place.xyz &gt; mrtg.cfg</pre>


<p style="margin-left:11%; margin-top: 1em">Note: if
cfgmaker is not in your path, but you are in the directory
where cfgmaker is stored, you can start it with
./cfgmaker</p>

<p style="margin-left:11%; margin-top: 1em">The next
example creates a config file for four devices:
<i>router1.place.xyz</i>, <i>router2.place.xyz</i>,
<i>switch1.place.xyz</i> and <i>switch2.place.xyz</i> all
with the community <i>public</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The two routers
will have <b>&minus;&minus;ifref</b> set to <b>descr</b>
whilst the two switches will use <b>&minus;&minus;ifref</b>
set to <b>name</b>. Further the routers will use
<b>&minus;&minus;ifdesc</b> set to <b>alias</b> and
<i>switch1.place.xyz</i> will use
<b>&minus;&minus;ifdesc</b> set to <b>descr</b> whilst
<i>switch2.place.xyz</i> use <b>name</b> instead.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, there
will be two Options lines inserted in the configuration: One
will be in the beginning, whilst the other will be inserted
after the lines related to the two routers but before those
lines related to the switches.</p>

<pre style="margin-left:11%; margin-top: 1em"> cfgmaker &minus;&minus;global &quot;WorkDir: /home/tobi&quot;           \
          &minus;&minus;global &quot;Options[_]: growright,bits&quot;    \
          &minus;&minus;ifref=descr                            \
          &minus;&minus;ifdesc=alias                           \
          public@router1.place.xyz                 \
          public@router2.place.xyz                 \
          &minus;&minus;global &quot;Options[_]: growright&quot;         \
          &minus;&minus;ifref=name                             \
          &minus;&minus;ifdesc=descr                           \
          public@switch1.place.xyz                 \
          &minus;&minus;ifdesc=name                            \
          public@switch2.place.xyz &gt; mrtg.cfg</pre>


<p style="margin-left:11%; margin-top: 1em">The next
example demonstrates how to use the
<b>&minus;&minus;community</b>,
<b>&minus;&minus;snmp&minus;options</b> and
<b>&minus;&minus;dns&minus;domain</b> to make the command
line simpler. All the equipment will use the community
<i>hidden</i>, except for the ppp-server which use community
<i>access</i>. All equipment uses these <small>SNMP</small>
options: <b>1s timeout</b>, <b>1 retry</b> and
<b><small>SNMP</small> version 2</b> (<b>backoff</b> and
<b>port</b> is unspecified which means they use the default
values). The exception again is the ppp-server which uses
<b><small>SNMP</small> version 1</b>. Finally, all the
equipment is part of the domain <i>place.xyz</i>, except for
the ppp-server which is part of the domain
<i>remote.place.xyz</i>. Note that the latter is achieved
simply by specifying the name of the ppp-server to be
<i>ppp-server.</i><b><i>remote</i></b> .</p>

<pre style="margin-left:11%; margin-top: 1em"> cfgmaker &minus;&minus;global &quot;WorkDir: /home/tobi&quot;           \
          &minus;&minus;global &quot;Options[_]: growright,bits&quot;    \
          &minus;&minus;dns&minus;domain=place.xyz                   \
          &minus;&minus;community=hidden                       \
          &minus;&minus;snmp&minus;options=::1:1::2                  \
          router1                                  \
          router2                                  \
          router3                                  \
          router4                                  \
          router5                                  \
          switch1                                  \
          switch2                                  \
          switch3                                  \
          switch4                                  \
          switch5                                  \
          switch6                                  \
          switch7                                  \
          access@ppp&minus;server.remote:::::1 &gt; mrtg.cfg</pre>


<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">mrtg-reference</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Tobias Oetiker
&lt;tobi@oetiker.ch&gt; and Jakob Ilves
&lt;jakob.ilves@oracle.com&gt;</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>GNU</small>
General Public License</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Cfgmaker is
Copyright 2000 by Tobias Oetiker &lt;tobi@oetiker.ch&gt;</p>
<hr>
</body>
</html>
