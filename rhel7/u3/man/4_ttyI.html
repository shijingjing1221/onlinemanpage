<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:47:47 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ttyi</title>

</head>
<body>

<h1 align="center">ttyi</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AT COMMAND SET">AT COMMAND SET</a><br>
<a href="#ESCAPE SEQUENCE">ESCAPE SEQUENCE</a><br>
<a href="#REGISTERS">REGISTERS</a><br>
<a href="#NOTE">NOTE</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ttyI &minus;
ISDN character devices with modem emulator</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>ttyI</i><b>[</b><i>0-63</i><b>]</b>
are emulated tty devices of the Linux <small>ISDN</small>
subsystem. These devices can be used in the same way as the
traditional serial devices <i>ttySx.</i> The official major
device numbers are <b>43</b> for <i>ttyI .</i> The minor
device numbers start with <b>0</b> and end with
<b>63</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>ISDN</small> tty devices are equipped with a modem
emulation implementing a set of traditional and some special
AT commands. This provides easy use together with almost all
communication software that uses modem commands:
<b>minicom</b>(1), <b>seyon</b>(1), <b>XCept</b>(1),
<b>uucico</b>(8), <b>mgetty</b>(8), <b>dip</b>(8),
<b>pppd</b>(8) and more. When enabled during kernel
configuration, the emulator is capable of a reduced set of
commands to support audio. To use audio features, an
<small>ISDN</small> card with a audio-capable low-level
driver is needed. Currently the only audio-capable drivers
are the teles and HiSax driver.</p>

<p style="margin-left:11%; margin-top: 1em">The line
disciplines are handled by the kernel so that SLIP, CSLIP
and asynchronous PPP are possible.</p>

<p style="margin-left:11%; margin-top: 1em">The port speed
of the <small>ISDN</small> tty devices is always 64000
bps.</p>

<h2>AT COMMAND SET
<a name="AT COMMAND SET"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The description
of <b>AT commands</b> here does <b>not</b> cover audio
related commands. For a description of audio related
commands, see <b>isdn_audio</b>(4). The following <b>AT
commands</b> are supported by <small>ISDN</small> tty
devices:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATA</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Answer an incoming call.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATD</b><i>num</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Dial number <i>num</i>. Allowed are digits [0-9] and the
characters &quot;,&quot;, &quot;#&quot;, &quot;.&quot;,
&quot;*&quot;, &quot;W&quot;, &quot;P&quot;, &quot;T&quot;,
&quot;S&quot;, &quot;-&quot;. The characters are ignored
except of &quot;S&quot; which indicates a SPV if it precedes
the number (<b>only</b> German 1TR6 ISDN).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATE0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Echo off.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATE1</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Echo on (default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATH</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Hang up.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATH0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Hang up.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATH1</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Off hook (ignored).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATI</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Return device Information (&quot;ISDN for
Linux...&quot;).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATI0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Return device Information (&quot;ISDN for
Linux...&quot;).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATI1</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Return device Information (&quot;ISDN for
Linux...&quot;).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATI2</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Return Statistics of last connection.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATO</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Return from command mode to online mode (data mode).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATQ0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Enable result codes (default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATQ1</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Disable result codes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATS</b><i>x</i><b>=</b><i>y</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set register <i>x</i> to value <i>y</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ATS</b><i>x</i><b>?</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Show content of register <i>x</i>.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>ATS</b><i>x</i><b>.</b><i>y</i><b>=</b><i>z</i></p>

<p style="margin-left:22%;">Set register <i>x</i>, bit
<i>y</i> to value <i>z</i></p>


<p style="margin-left:11%;"><b>ATS</b><i>x</i><b>.</b><i>y</i><b>?</b></p>

<p style="margin-left:22%;">Show bit <i>y</i> of register
<i>x</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ATV0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Print result code as number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ATV1</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Print result code as text (default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ATZ</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Reset all registers and load profile values.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;B</b><i>x</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>Set packet size of outgoing packets to value <i>x</i>
(maximum 4000). The actual packet size depends on the
hardware driver and may be smaller than <i>x</i> (e.g. with
the teles driver). There will be <b>no</b> error message if
the value is bigger than the hardware driver can process.
However the size of the outgoing packets will be set
correctly.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;D2</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>DTR falling edge: hang up and return to command mode
(default).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;D3</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>DTR falling edge: hang up, return to command mode and
reset all registers.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;E</b><i>x</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>Set MSN (Euro-ISDN, EDSS1) or EAZ (German 1TR6) to value
<i>x</i>. For MSNs, <i>x</i> is a string of digits
representing the local phone number, while for EAZs <i>x</i>
should be only the last digit of the Number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;F</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Set all registers and profile to
&quot;factory-defaults&quot;.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>AT&amp;L</b><i>plist</i></p>

<p style="margin-left:22%;">Set list of phone numbers to
listen on. <i>plist</i> is a list of wildcard patterns
separated by semicolon. If this is set, it has precedence
over the MSN set by AT&amp;E.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;V</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Show current register settings.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;W0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Write registers and EAZ/MSN to profile. (You need to run
<b>iprofd</b>(8) for making changes permanent.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;X0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Disable BTX-Mode (default).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>AT&amp;X1</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Enable BTX-Mode.</p></td></tr>
</table>

<h2>ESCAPE SEQUENCE
<a name="ESCAPE SEQUENCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">During a data
connection, the driver can be set to command mode by typing
in <i>delay</i><b>+++</b><i>delay</i>. The escape character
(default &quot;+&quot;) may be set via register 2. The
<i>delay</i> must be at least 1.5 seconds and between each
escape character the pause must not exceed 0.5 seconds.
<i>ATO</i> brings the modem emulation back to data mode.</p>

<h2>REGISTERS
<a name="REGISTERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>0</b>
(default 0)</p>

<p style="margin-left:22%;">Number of rings on which the
&quot;modem&quot; will answer. (S0=0 will disable auto
answering).</p>

<p style="margin-left:11%;"><b>1</b> (default 0)</p>

<p style="margin-left:22%;">Counts and stores the number of
rings from an incoming call.</p>

<p style="margin-left:11%;"><b>2</b> (default 43 =
&rsquo;+&rsquo;)</p>

<p style="margin-left:22%;">ASCII code of the escape
character.</p>

<p style="margin-left:11%;"><b>3</b> (default 13 = CR)</p>

<p style="margin-left:22%;">ASCII code of Carriage
Return.</p>

<p style="margin-left:11%;"><b>4</b> (default 10 = LF)</p>

<p style="margin-left:22%;">ASCII code of Line Feed.</p>

<p style="margin-left:11%;"><b>5</b> (default 8 = BS)</p>

<p style="margin-left:22%;">ASCII code of Backspace.</p>

<p style="margin-left:11%;"><b>6</b> (default 3)</p>

<p style="margin-left:22%;">Duration, in number of seconds,
modem waits before dialling.</p>

<p style="margin-left:11%;"><b>7</b> (default 60)</p>

<p style="margin-left:22%;">Wait time for carrier in
seconds.</p>

<p style="margin-left:11%;"><b>8</b> (default 2)</p>

<p style="margin-left:22%;">Pause time for comma
(&rsquo;,&rsquo;) in dial command in seconds (ignored).</p>

<p style="margin-left:11%;"><b>9</b> (default 6)</p>

<p style="margin-left:22%;">Carrier detect time in tenths
of seconds (ignored).</p>

<p style="margin-left:11%;"><b>10</b> (default 7)</p>

<p style="margin-left:22%;">Wait time until hangup after
carrier loss in tenths of seconds (ignored).</p>

<p style="margin-left:11%;"><b>11</b> (default 70)</p>

<p style="margin-left:22%;">Duration and delay in
milliseconds for touch tone dialling (ignored).</p>

<p style="margin-left:11%;"><b>12</b> (default 69)</p>

<p style="margin-left:22%;">Bit-mapped register. <br>
Bit Description <br>
0 0 = Suppress response messages. <br>
1 = Show response messages. <br>
1 0 = Response messages as text. <br>
1 = Numeric response messages. <br>
2 0 = Echo off. <br>
1 = Echo on. <br>
3 0 = DCD always on. <br>
1 = DCD follows carrier. <br>
4 0 = CTS follows RTS. <br>
1 = Ignore RTS, CTS always on. <br>
5 0 = Low-edge on DTR: Hangup and return <br>
to command mode. <br>
1 = Same as 0 but also resets all <br>
registers. <br>
6 0 = DSR always on. <br>
1 = DSR on only if channel is available. <br>
7 0 = Cisco-PPP-flag-hack off. <br>
1 = Cisco-PPP-flag-hack on.</p>

<p style="margin-left:11%;"><b>13</b> (default 4)</p>

<p style="margin-left:22%;">Bit-mapped register. <br>
Bit Description <br>
0 0 = Use delayed sending of data. <br>
1 = Immediately send data. <br>
1 0 = T.70 protocol off. <br>
1 = T.70 protocol on. <br>
2 0 = Don&rsquo;t hangup on DTR low. <br>
1 = Hangup on DTR low. <br>
3 0 = Standard response messages. <br>
1 = Extended response messages. <br>
4 0 = CALLER NUMBER before every RING. <br>
1 = CALLER NUMBER after first RING. <br>
5 0 = Disable extended T.70 protocol. <br>
1 = Enable extended T.70 protocol. <br>
6 0 = Disable RUNG message. <br>
1 = RUNG on cancelled incoming call. <br>
7 0 = Disable display messages from net. <br>
1 = Enable disable messages from net.</p>

<p style="margin-left:11%;"><b>14</b> (default 0)</p>

<p style="margin-left:22%;">Layer-2 protocol. <br>
0 = X75/LAPB with I-frames. <br>
1 = X75/LAPB with UI-frames. <br>
2 = X75/LAPB with BUI-frames. <br>
3 = HDLC. <br>
4 = TRANSPARENT. <br>
10 = Analog Modem. (only if hardware supports this) <br>
11 = Fax G3. (only if hardware supports this)</p>

<p style="margin-left:11%;"><b>15</b> (default 0)</p>

<p style="margin-left:22%;">Layer-3 protocol. <br>
0 = transparent <br>
1 = transparent with audio features (e.g. DSP) <br>
2 = Fax G3</p>

<p style="margin-left:11%;"><b>16</b> (default 250)</p>

<p style="margin-left:22%;">Outgoing packet size / 16.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>17</b></p></td>
<td width="8%"></td>
<td width="13%">


<p>reserved.</p></td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>18</b> (default 4)</p>

<p style="margin-left:22%;">Service-Octet-1 to accept or to
be used on dial out. <br>
Bit-mapped register. <br>
Bit Description <br>
0 Service 1 (audio) when set. <br>
1 Service 5 (BTX) when set. <br>
2 Service 7 (data) when set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p style="margin-top: 1em">Note: It is possible to set more
than one bit. In this case, on outgoing calls, the most
significant 1-bit is chosen to select the outgoing service
octet. On incoming calls the selected services are accepted,
contents of register 14 is ignored and the Layer-2-protocol
is automatically set with the following values to match the
service of the incoming call:</p></td></tr>
</table>

<p>Incoming service <i>audio</i> (Reg. 20.0 = 1)</p></table>

<p style="margin-left:43%;">L2-protocol is set to 4
(TRANSPARENT).</p>

<p style="margin-left:32%;">Incoming service <i>BTX</i>
(Reg. 20.1 = 1)</p>

<p style="margin-left:43%;">L2-protocol is set to 0
(X75/LAPB with I-frames).</p>

<p style="margin-left:32%;">Incoming service <i>date</i>
(Reg. 20.2 = 1)</p>

<p style="margin-left:43%;">L2-protocol is set to 0
(X75/LAPB with I-frames).</p>

<p style="margin-left:11%;"><b>19</b> (default 0)</p>

<p style="margin-left:22%;">Service-Octet-2 (ignored when
using EDSS1).</p>

<p style="margin-left:11%;"><b>20</b> (read only)</p>

<p style="margin-left:22%;">Service-Octet-1 of last
incoming call. This bit-mapped register is set on incoming
call (during RING). Mapping is the same like register
18.</p>

<p style="margin-left:11%;"><b>21</b> (read only)</p>

<p style="margin-left:22%;">Bit-mapped register. Set on
incoming call (during RING) to the value of octet 3 of
calling party number Information Element (Numbering plan).
See section <b>4.5.10</b> of <b>ITU Q.931</b>.</p>

<p style="margin-left:11%;"><b>22</b> (read only)</p>

<p style="margin-left:22%;">Bit-mapped register. Set on
incoming call (during RING) to the value of octet 3a of
calling party number Information Element (Screening info).
See section <b>4.5.10</b> of <b>ITU Q.931</b>.</p>

<p style="margin-left:11%;"><b>23</b> (default 0)</p>

<p style="margin-left:22%;">Bit-mapped register. <br>
Bit Description <br>
0 0 = Disable CPN extended RING. <br>
1 = Enable CPN extended RING. <br>
1 0 = Disable CPN extended FCON. <br>
1 = Enable CPN extended FCON.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<h2>NOTE
<a name="NOTE"></a>
</h2>
</td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">There used also be <i>cui</i>
devices (major device number 44), but since the <i>cua</i>
devices for regular tty devices are no longer supported in
the kernel, these are also no longer supported for
ISDN4linux.</p> </td></tr>
</table>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fritz Elfert
&lt;fritz@isdn4linux.de&gt; <br>
modified by Paul Slootman &lt;paul@isdn4linux.de&gt;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>icnctrl</b>(8),
<b>telesctrl</b>(8), <b>isdninfo</b>(4),
<b>isdn_audio</b>(4), <b>isdnctrl</b>(8).</p>
<hr>
</body>
</html>
