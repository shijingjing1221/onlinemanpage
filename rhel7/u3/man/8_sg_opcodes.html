<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:24:34 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SG_OPCODES</title>

</head>
<body>

<h1 align="center">SG_OPCODES</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#OLDER COMMAND LINE OPTIONS">OLDER COMMAND LINE OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sg_opcodes
&minus; report supported SCSI commands or task management
functions</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_opcodes</b>
[<i>&minus;&minus;alpha</i>] [<i>&minus;&minus;help</i>]
[<i>&minus;&minus;hex</i>] [<i>&minus;&minus;no-inquiry</i>]
[<i>&minus;&minus;opcode=OP</i>] [<i>&minus;&minus;raw</i>]
[<i>&minus;&minus;rctd</i>] [<i>&minus;&minus;repd</i>]
[<i>&minus;&minus;sa=SA</i>] [<i>&minus;&minus;tmf</i>]
[<i>&minus;&minus;unsorted</i>]
[<i>&minus;&minus;verbose</i>]
[<i>&minus;&minus;version</i>] <i>DEVICE</i></p>


<p style="margin-left:11%; margin-top: 1em"><b>sg_opcodes</b>
[<i>&minus;a</i>] [<i>&minus;n</i>] [<i>&minus;o=OP</i>]
[<i>&minus;q</i>] [<i>&minus;R</i>] [<i>&minus;s=SA</i>]
[<i>&minus;t</i>] [<i>&minus;u</i>] [<i>&minus;v</i>]
[<i>&minus;V</i>] [<i>&minus;?</i>] <i>DEVICE</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This utility
sends a SCSI REPORT SUPPORTED OPERATION CODES or a REPORT
SUPPORTED TASK MANAGEMENT FUNCTIONS command to the
<i>DEVICE</i> and then outputs the response. The default
action is to report supported operation codes. In this mode
it will either list all supported commands or give detailed
information on a specific command identified by the
<i>&minus;&minus;opcode=OP</i> option (perhaps with
additional information from the <i>&minus;&minus;sa=SA</i>
option).</p>

<p style="margin-left:11%; margin-top: 1em">The name of a
SCSI command depends on its peripheral device type (e.g. a
disk). The REPORT SUPPORTED OPERATION CODES and REPORT
SUPPORTED TASK MANAGEMENT FUNCTIONS commands are not
supported in the MMC command set for CD and DVD devices.
This utility does an INQUIRY to obtain the peripheral device
type and prints out the vendor, product and revision
strings.</p>

<p style="margin-left:11%; margin-top: 1em">A similar
facility to query supported operation codes previously was
available via the CmdDt bit in the SCSI INQUIRY command (see
sg_inq(8)). However that facility was made obsolete and
replaced by the REPORT SUPPORTED OPERATION CODES command in
SPC&minus;3 (revision 4) during February 2002.</p>

<p style="margin-left:11%; margin-top: 1em">This utility
supports two command line syntaxes, the preferred one is
shown first in the synopsis and explained in this section. A
later section on the old command line syntax outlines the
second group of options.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Arguments to
long options are mandatory for short options as well.
<b><br>
&minus;a</b>, <b>&minus;&minus;alpha</b></p>

<p style="margin-left:22%;">when all supported commands are
being listed there is no requirement for the device server
(i.e. the <i>DEVICE</i>) to sort the list of commands. When
this option is given the list of supported commands is
sorted by name (alphabetically). When this option and the
<b>&minus;&minus;unsorted</b> option are both _not_ given
then the list of supported commands is sorted numerically
(first by operation code and then by service action).</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">outputs the usage message
summarizing command line options then exits. Ignores
<i>DEVICE</i> if given.</p>

<p style="margin-left:11%;"><b>&minus;H</b>,
<b>&minus;&minus;hex</b></p>

<p style="margin-left:22%;">outputs the response in ASCII
hexadecimal to stdout.</p>

<p style="margin-left:11%;"><b>&minus;n</b>,
<b>&minus;&minus;no-inquiry</b></p>

<p style="margin-left:22%;">Prior to calling a SCSI REPORT
SUPPORTED OPERATION CODES or a REPORT SUPPORTED TASK
MANAGEMENT FUNCTIONS command, a SCSI INQUIRY command is
performed. The reason is to determine the peripheral device
type (pdt) of the <i>DEVICE</i> as this is helpful in
translating operation codes to the command names. By default
this utility prints a summary of INQUIRY command response on
stdout. If this option (or the <i>&minus;&minus;raw</i>
option) is given then that summary is not printed on
stdout.</p>

<p style="margin-left:11%;"><b>&minus;O</b>,
<b>&minus;&minus;old</b></p>

<p style="margin-left:22%;">switch to older style
options.</p>

<p style="margin-left:11%;"><b>&minus;o</b>,
<b>&minus;&minus;opcode</b>=<i>OP</i></p>

<p style="margin-left:22%;">the <i>DEVICE</i> will be
queried for the given operation code ( i.e. the <i>OP</i>
value) which is the first byte of a SCSI command. <i>OP</i>
is decimal unless prefixed by &quot;0x&quot; or it has a
trailing &quot;h&quot;. <i>OP</i> should be in the range 0
to 255 (0xff) inclusive. When this option is not given then
all available SCSI commands supported by the <i>DEVICE</i>
are listed.</p>

<p style="margin-left:11%;"><b>&minus;r</b>,
<b>&minus;&minus;raw</b></p>

<p style="margin-left:22%;">output the response in binary
to stdout. Error messages and warnings, if any, are sent to
stderr.</p>

<p style="margin-left:11%;"><b>&minus;R</b>,
<b>&minus;&minus;rctd</b></p>

<p style="margin-left:22%;">set report command timeout
descriptor (RCTD) bit in the cdb. The response may or may
not contain command timeout descriptors. If available they
are output. If supported there are two values: a nominal
command timeout and a recommended command timeout. Both have
units of seconds. A value of zero means that no timeout is
indicated and this is shown in the corresponding decoded
output as &quot;&minus;&quot;.</p>

<p style="margin-left:11%;"><b>&minus;q</b>,
<b>&minus;&minus;repd</b></p>

<p style="margin-left:22%;">set read extended parameter
data (REPD) bit in the report task management functions cdb.
16 bytes rather than the default 4 bytes expected in the
response. This was added in SPC&minus;4 (revision 26).</p>

<p style="margin-left:11%;"><b>&minus;s</b>,
<b>&minus;&minus;sa</b>=<i>SA</i></p>

<p style="margin-left:22%;">the <i>DEVICE</i> will be
queried for a command with the given service action (i.e.
the <i>SA</i> value). Used in conjunction with the
<i>&minus;&minus;opcode=OP</i> option. If this option is not
given, <i>&minus;&minus;opcode=OP</i> is given and the
command in question does have a service action then a value
of 0 will be assumed. <i>SA</i> is decimal and expected to
be in the range 0 to 65535 (0xffff) inclusive.</p>

<p style="margin-left:11%;"><b>&minus;t</b>,
<b>&minus;&minus;tmf</b></p>

<p style="margin-left:22%;">list supported task management
functions. This is done with the SCSI REPORT SUPPORTED TASK
MANAGEMENT FUNCTIONS command. When this option is chosen the
<i>&minus;&minus;alpha</i>, <i>&minus;&minus;opcode=OP</i>,
<i>&minus;&minus;rctd</i>, <i>&minus;&minus;sa=SA</i> and
<i>&minus;&minus;unsorted</i> options are ignored.</p>

<p style="margin-left:11%;"><b>&minus;u</b>,
<b>&minus;&minus;unsorted</b></p>

<p style="margin-left:22%;">when all supported commands are
being listed there is no requirement for the device server
(i.e. the <i>DEVICE</i>) to sort the list of commands. When
this option is given the list of supported commands is in
the order given by the <i>DEVICE</i>. When this option is
not given the supported commands are sorted numerically
(first by operation code and then by service action).</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">increase level of verbosity.
Can be used multiple times.</p>

<p style="margin-left:11%;"><b>&minus;V</b>,
<b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">print out version string then
exit.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As of
SPC&minus;4 revision 7a the recognized task management
functions are: abort set, abort task set, clear ACA, clear
task set, I_T nexus reset, logical unit reset, query task,
target reset and wakeup. As of SPC&minus;4 revision 26
target reset and wakeup have been made obsolete while query
task set and query asynchronous event notification have been
added.</p>

<p style="margin-left:11%; margin-top: 1em">In the 2.4
series of Linux kernels the <i>DEVICE</i> must be a SCSI
generic (sg) device. In the 2.6 series block devices (e.g.
SCSI disks and DVD drives) can also be specified. For
example &quot;sg_opcodes /dev/sda&quot; will work in the 2.6
series kernels.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of sg_opcodes is 0 when it is successful. Otherwise see the
sg3_utils(8) man page.</p>

<h2>OLDER COMMAND LINE OPTIONS
<a name="OLDER COMMAND LINE OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options in
this section were the only ones available prior to sg3_utils
version 1.23 . In sg3_utils version 1.23 and later these
older options can be selected by either setting the
SG3_UTILS_OLD_OPTS environment variable or using
&rsquo;&minus;&minus;old&rsquo; (or &rsquo;&minus;O) as the
first option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;a</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>sort command alphabetically. Equivalent to
<i>&minus;&minus;alpha</i> in main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;n</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>don&rsquo;t print a summary of the SCSI INQUIRY response
on stdout.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;N</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>switch to the newer style options.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;o</b>=<i>OP</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>the <i>DEVICE</i> will be queried for the given
operation code (i.e. <i>OP</i>) which is the first byte of a
SCSI command. <i>OP</i> is hexadecimal and expected to be in
the range 0 to ff inclusive. When this option is not given
then all available SCSI commands supported by the
<i>DEVICE</i> are listed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;q</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>set the read extended parameter data (REPD) bit in
report TMF cdb. Equivalent to <i>&minus;&minus;repd</i> in
main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;R</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>set the report command timeout descriptor (RCTD) bit in
cdb. Equivalent to <i>&minus;&minus;rctd</i> in main
description.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;s</b>=<i>SA</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>the <i>DEVICE</i> will be queried for a command with the
given service action (i.e. <i>SA</i>). Used in conjunction
with the <i>&minus;o=OP</i> option. If this option is not
given, <i>&minus;o=OP</i> is given and the command in
question does have a service action then a value of 0 will
be assumed. <i>SA</i> is hexadecimal and expected to be in
the range 0 to ffff inclusive.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;t</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>list supported task management functions. Equivalent to
<i>&minus;&minus;tmf</i> in the main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;u</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>output all supported commands in the order given by
<i>DEVICE</i>. Equivalent to <i>&minus;&minus;unsorted</i>
in main description.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;v</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>increase level of verbosity. Can be used multiple
times.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;V</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>print out version string then exit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;?</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>output usage message. Ignore all other parameters.</p></td></tr>
</table>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The examples in
this page use Linux device names. For suitable device names
in other supported Operating Systems see the sg3_utils(8)
man page.</p>

<p style="margin-left:11%; margin-top: 1em">To see the
information about a specific command give its operation code
to the &rsquo;&minus;&minus;op=&rsquo; option. A command
line invocation is shown first followed by a typical
response:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_opcodes
&minus;&minus;op=93h /dev/sdb</p>

<p style="margin-left:11%; margin-top: 1em">Opcode=0x93
<br>
Command_name: Write same(16) <br>
Command supported [conforming to SCSI standard] <br>
Usage data: 93 e2 00 00 00 00 ff ff ff ff 00 00 ff ff 00
00</p>

<p style="margin-left:11%; margin-top: 1em">The next
example shows the supported task management functions:</p>

<p style="margin-left:11%; margin-top: 1em"># sg_opcodes
&minus;&minus;tmf &minus;n /dev/sdb</p>

<p style="margin-left:11%; margin-top: 1em">Task Management
Functions supported by device: <br>
Abort task <br>
Abort task set <br>
Clear ACA <br>
Clear task set <br>
Logical unit reset <br>
Query task</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
Douglas Gilbert</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;dgilbert at interlog dot com&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2004&minus;2012 Douglas Gilbert <br>
This software is distributed under the GPL version 2. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_inq(sg3_utils)</b></p>
<hr>
</body>
</html>
