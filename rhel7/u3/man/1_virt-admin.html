<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:50:49 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRT-ADMIN</title>

</head>
<body>

<h1 align="center">VIRT-ADMIN</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#GENERIC COMMANDS">GENERIC COMMANDS</a><br>
<a href="#SERVER COMMANDS">SERVER COMMANDS</a><br>
<a href="#CLIENT COMMANDS">CLIENT COMMANDS</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">virt&minus;admin
&minus; daemon administration interface</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>virt-admin</b>
[ <i><small>OPTION</small></i> ]... [
<i><small>COMMAND_STRING</small></i> ]</p>


<p style="margin-left:11%; margin-top: 1em"><b>virt-admin</b>
[ <i><small>OPTION</small></i> ]...
<i><small>COMMAND</small></i> [ <i><small>ARG</small></i>
]...</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>virt-admin</b> program is the main administration
interface for modifying the libvirt daemon configuration at
runtime, changing daemon behaviour as well as for monitoring
and managing all clients connected to the daemon.</p>

<p style="margin-left:11%; margin-top: 1em">The basic
structure of most virt-admin usage is:</p>

<pre style="margin-left:11%; margin-top: 1em">  virt&minus;admin [OPTION]... &lt;command&gt; [ARG]...</pre>


<p style="margin-left:11%; margin-top: 1em">Where
<i>command</i> is one of the commands listed below.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>virt-admin</b> program can be used either to run one
<i><small>COMMAND</small></i> by giving the command and its
arguments on the shell command line, or a
<i><small>COMMAND_STRING</small></i> which is a single shell
argument consisting of multiple
<i><small>COMMAND</small></i> actions and their arguments
joined with whitespace, and separated by semicolons between
commands. Within <i><small>COMMAND_STRING</small></i> ,
virt-admin understands the same single, double, and
backslash escapes as the shell, although you must add
another layer of shell escaping in creating the single shell
argument. If no command is given in the command line,
<b>virt-admin</b> will then start a minimal interpreter
waiting for your commands, and the <b>quit</b> command will
then exit the program.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>virt-admin</b> program understands the following
<i><small>OPTIONS</small></i> . <b><br>
&minus;c</b>, <b>&minus;&minus;connect</b>
<i><small>URI</small></i></p>

<p style="margin-left:17%;">Connect to the specified
<i><small>URI</small></i> , as if by the <b>connect</b>
command, instead of the default connection.</p>

<p style="margin-left:11%;"><b>&minus;d</b>,
<b>&minus;&minus;debug</b> <i><small>LEVEL</small></i></p>

<p style="margin-left:17%;">Enable debug messages at
integer <i><small>LEVEL</small></i> and above.
<i><small>LEVEL</small></i> can range from 0 to 4 (default).
See the documentation of
<b><small>VIRT_ADMIN_DEBUG</small></b> environment variable
below for the description of each
<i><small>LEVEL</small></i> .</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
behave as if the <b>help</b> command were given instead.</p>

<p style="margin-left:11%;"><b>&minus;l</b>,
<b>&minus;&minus;log</b> <i><small>FILE</small></i></p>

<p style="margin-left:17%;">Output logging details to
<i><small>FILE</small></i> .</p>

<p style="margin-left:11%;"><b>&minus;q</b>,
<b>&minus;&minus;quiet</b></p>

<p style="margin-left:17%;">Avoid extra informational
messages.</p>

<p style="margin-left:11%;"><b>&minus;v</b>,
<b>&minus;&minus;version[=short]</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
prints the version of the libvirt library virt-admin is
coming from</p>

<p style="margin-left:11%;"><b>&minus;V</b>,
<b>&minus;&minus;version=long</b></p>

<p style="margin-left:17%;">Ignore all other arguments, and
prints the version of the libvirt library virt-admin is
coming from.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Running
<b>virt-admin</b> requires root privileges due to the
communications channels used to talk to the daemon. Consider
changing the <i>unix_sock_group</i> ownership setting to
grant access to specific set of users or modifying
<i>unix_sock_rw_perms</i> permissions. Daemon configuration
file provides more information about setting
permissions.</p>

<h2>GENERIC COMMANDS
<a name="GENERIC COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
commands are generic. <b><br>
help</b> [<i>command-or-group</i>]</p>

<p style="margin-left:17%;">This lists each of the
virt-admin commands. When used without options, all commands
are listed, one per line, grouped into related categories,
displaying the keyword for each group.</p>

<p style="margin-left:17%; margin-top: 1em">To display
detailed information for a specific command, use its name as
the option.</p>

<p style="margin-left:11%;"><b>quit</b>, <b>exit</b></p>

<p style="margin-left:17%;">quit this interactive
terminal</p>

<p style="margin-left:11%;"><b>version</b></p>

<p style="margin-left:17%;">Will print out the version info
about which libvirt library was this client built from. As
opposed to <i>virsh</i> client, the output already includes
the version of the daemon.</p>


<p style="margin-left:17%; margin-top: 1em"><b>Example</b></p>


<pre style="margin-left:17%; margin-top: 1em"> $ virt&minus;admin version
 Compiled against library: libvirt 1.2.21
 Using library: libvirt 1.2.21
 Running against daemon: 1.2.20</pre>


<p style="margin-left:11%;"><b>cd</b>
[<i>directory</i>]</p>

<p style="margin-left:17%;">Will change current directory
to <i>directory</i>. The default directory for the <b>cd</b>
command is the home directory or, if there is no
<i><small>HOME</small></i> variable in the environment, the
root directory.</p>

<p style="margin-left:17%; margin-top: 1em">This command is
only available in interactive mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>pwd</b></p></td>
<td width="2%"></td>
<td width="51%">


<p>Will print the current directory.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>connect</b> [
<i><small>URI</small></i> ]</p>

<p style="margin-left:17%;">(Re)&minus;Connect to a
daemon&rsquo;s administrating server. The
<i><small>URI</small></i> parameter specifies how to connect
to the administrating server. If
<i><small>LIBVIRT_ADMIN_DEFAULT_URI</small></i> or
<i>uri_default</i> (see below) were set, <i>connect</i> is
automatically issued every time a command that requires an
active connection is executed. Note that this only applies
if there is no connection at all or there is an inactive
one.</p>

<p style="margin-left:17%; margin-top: 1em">To find the
currently used <small>URI,</small> check the <i>uri</i>
command documented below.</p>

<p style="margin-left:17%; margin-top: 1em">For remote
access see the documentation page at
&lt;http://libvirt.org/uri.html&gt; on how to make URIs.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>uri</b></p></td>
<td width="2%"></td>
<td width="83%">


<p>Prints the administrating server canonical
<small>URI,</small> can be useful in shell mode. If no
<i>uri</i> was specified, neither
<i><small>LIBVIRT_ADMIN_DEFAULT_URI</small></i> environment
variable nor <i>uri_default</i> option
(libvirt&minus;admin.conf) were set, libvirtd:///system is
used.</p> </td></tr>
</table>

<h2>SERVER COMMANDS
<a name="SERVER COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Following
commands manipulate daemon&rsquo;s server internal
configuration. The <i>server</i> is specified by its name.
<b><br>
srv-threadpool-info</b> <i>server</i></p>

<p style="margin-left:17%;">Retrieve server&rsquo;s
threadpool attributes. These attributes include: <i><br>
minWorkers</i> as the bottom limit to the number of active
workers, <i><br>
maxWorkers</i> as the top limit to the number of active
workers, <i><br>
nWorkers</i> as the current number of workers in the
threadpool, <i><br>
freeWorkers</i> as the current number of workers available
for a task, <i><br>
prioWorkers</i> as the current number of priority workers in
the <br>
threadpool, and <i><br>
jobQueueDepth</i> as the current depth of threadpool&rsquo;s
job queue.</p>


<p style="margin-left:17%; margin-top: 1em"><b>Background</b></p>

<p style="margin-left:17%; margin-top: 1em">Each daemon
server utilizes a threadpool to accomplish tasks requested
by clients connected to it. Every time a client request
arrives to the server, it checks whether there is a worker
available to accomplish the given task or it should create a
new worker for the job (rather than being destroyed, the
worker becomes free once the task is finished). Creating new
workers, however, is only possible when the current number
of workers is still below the configured upper limit.</p>

<p style="margin-left:17%; margin-top: 1em">In addition to
these &rsquo;standard&rsquo; workers, a threadpool also
contains a special set of workers called <i>priority</i>
workers. Their purpose is to perform tasks that, unlike
tasks carried out by normal workers, are within
libvirt&rsquo;s full control and libvirt guarantees that
such a task cannot hang, thus will always finish. An example
of such a task this would be destroying a domain: <br>
$ virsh destroy &lt;domain&gt;.</p>

<p style="margin-left:11%;"><b>srv-threadpool-set</b>
<i>server</i> [<i>&minus;&minus;min&minus;workers</i>
<b>count</b>] [<i>&minus;&minus;max&minus;workers</i>
<b>count</b>] <br>
[<i>&minus;&minus;priority&minus;workers</i>
<b>count</b>]</p>

<p style="margin-left:17%;">Change threadpool attributes on
a server. Only a fraction of all attributes as described in
<i>srv-threadpool-info</i> is supported for the setter.
<i><br>
&minus;&minus;min&minus;workers</i></p>

<p style="margin-left:23%;">The bottom limit to number of
active workers in a threadpool.</p>


<p style="margin-left:17%;"><i>&minus;&minus;max&minus;workers</i></p>

<p style="margin-left:23%;">The upper limit to number of
active workers in a threadpool. If used in combination with
option <i>&minus;&minus;min&minus;workers</i>, the value for
the upper limit has to be greater than the value for the
bottom limit, otherwise the command results in an error.</p>


<p style="margin-left:17%;"><i>&minus;&minus;priority&minus;workers</i></p>

<p style="margin-left:23%;">The current number of active
priority workers in a threadpool.</p>

<p style="margin-left:11%;"><b>srv-clients-list</b>
<i>server</i></p>

<p style="margin-left:17%;">Print a table showing the list
of clients connected to &lt;server&gt;, also providing
information about transport type used on client&rsquo;s
connection (supported transports include <b>unix</b>,
<b>tcp</b>, and <b>tls</b>), as well as providing
information about client&rsquo;s connection time (system
local time is used).</p>

<p style="margin-left:11%;"><b>srv-clients-info</b>
<i>server</i></p>

<p style="margin-left:17%;">Get information about the
current setting of limits regarding connections of new
clients. This information comprises of the limits to the
maximum number of clients connected to <i>server</i>,
maximum number of clients waiting for authentication, in
order to be connected to the server, as well as the current
runtime values, more specifically, the current number of
clients connected to <i>server</i> and the current number of
clients waiting for authentication.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Example</b>
<br>
# virt-admin srv-clients-info libvirtd <br>
nclients_max : 120 <br>
nclients : 3 <br>
nclients_unauth_max : 20 <br>
nclients_unauth : 0</p>

<p style="margin-left:11%;"><b>srv-clients-set</b>
<i>server</i> [<i>&minus;&minus;max&minus;clients</i>
<b>count</b>]
[<i>&minus;&minus;max&minus;unauth&minus;clients</i> <b><br>
count</b>]</p>

<p style="margin-left:17%;">Set new client-related limits
on <i>server</i>. <i><br>
&minus;&minus;max&minus;clients</i></p>

<p style="margin-left:23%;">Change the upper limit of the
maximum overall number of clients connected to <i>server</i>
to value <b>count</b>. The value for this limit has to be
always greater than the value of
<i>&minus;&minus;max&minus;unauth&minus;clients</i>.</p>


<p style="margin-left:17%;"><i>&minus;&minus;max&minus;unauth&minus;clients</i></p>

<p style="margin-left:23%;">Change the upper limit of the
maximum number of clients waiting for authentication, in
order to be connected to <i>server</i>, to value
<b>count</b>. The value for this limit has to be always
lower than the value of
<i>&minus;&minus;max&minus;clients</i>.</p>

<h2>CLIENT COMMANDS
<a name="CLIENT COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Following
commands provide management and monitoring of clients
connected to one of daemon&rsquo;s available servers.
Clients are specified by their numeric <small>ID</small>
which is obtained by listing all clients connected to a
specified server (see command <b>srv-clients-list</b>).
<b><br>
client-info</b> <i>server client</i></p>

<p style="margin-left:17%;">Retrieve identity information
about <i>client</i> from <i>server</i>. The attributes
returned may vary depending on the connection transport
used. Transport-dependent attributes include local client
process&rsquo;s pid, uid, user name, and group name, as well
as socket address of the remote peer, see <b>Examples</b>
below.</p>

<p style="margin-left:17%; margin-top: 1em">On the other
hand, transport-independent attributes include
client&rsquo;s SELinux context (if enabled on the host) and
<small>SASL</small> username (if <small>SASL</small>
authentication is enabled within daemon).</p>


<p style="margin-left:17%; margin-top: 1em"><b>Examples</b></p>


<pre style="margin-left:17%; margin-top: 1em"> # virt&minus;admin client&minus;info libvirtd 1
 id             : 1
 connection_time: 2016&minus;05&minus;03 13:27:04+0200
 transport      : unix
 readonly       : yes
 unix_user_id   : 0
 unix_user_name : root
 unix_group_id  : 0
 unix_group_name: root
 unix_process_id: 10201
 # virt&minus;admin client&minus;info libvirtd 2
 id             : 2
 connection_time: 2016&minus;05&minus;03 13:30:33+0200
 transport      : tcp
 readonly       : no
 sock_addr      : 127.0.0.1:57060</pre>


<p style="margin-left:11%;"><b>client-disconnect</b>
<i>server client</i></p>

<p style="margin-left:17%;">Close a connection originating
from <i>client</i>. The <i>server</i> argument specifies the
name of the server <i>client</i> is currently connected
to.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables can be set to alter the behaviour of
<tt>&quot;virt&minus;admin&quot;</tt> <br>
VIRT_ADMIN_DEBUG=&lt;0 to 4&gt;</p>

<p style="margin-left:17%;">Turn on verbose debugging of
virt-admin commands. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p>VIRT_ADMIN_DEBUG=0</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>DEBUG
&minus;</small> Messages at <small>ALL</small> levels get
logged</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">VIRT_ADMIN_DEBUG=1</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>INFO
&minus;</small> Logs messages at levels <small>INFO, NOTICE,
WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">VIRT_ADMIN_DEBUG=2</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>NOTICE
&minus;</small> Logs messages at levels <small>NOTICE,
WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">VIRT_ADMIN_DEBUG=3</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>WARNING
&minus;</small> Logs messages at levels
<small>WARNING</small> and <small>ERROR</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">VIRT_ADMIN_DEBUG=4</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em"><small>ERROR
&minus;</small> Messages at only <small>ERROR</small> level
gets logged.</p>


<p style="margin-left:11%;">VIRT_ADMIN_LOG_FILE=&quot;LOGFILE&quot;</p>

<p style="margin-left:17%;">The file to log virt-admin
debug messages.</p>


<p style="margin-left:11%;"><small>LIBVIRT_ADMIN_DEFAULT_URI</small></p>

<p style="margin-left:17%;">The daemon whose admin server
to connect to by default. Set this to a <small>URI,</small>
in the same format as accepted by the <b>connect</b> option.
This overrides the default <small>URI</small> set in any
client config file.</p>


<p style="margin-left:11%;"><small>VIRT_ADMIN_HISTSIZE</small></p>

<p style="margin-left:17%;">The number of commands to
remember in the command history. The default value is
500.</p>

<p style="margin-left:11%;">LIBVIRT_DEBUG=LEVEL</p>

<p style="margin-left:17%;">Turn on verbose debugging of
all libvirt <small>API</small> calls. Valid levels are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p>LIBVIRT_DEBUG=1</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>DEBUG</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=2</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>INFO</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=3</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>WARNING</small> or above</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">LIBVIRT_DEBUG=4</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Messages at
level <small>ERROR</small> or above</p>

<p style="margin-left:17%; margin-top: 1em">For further
information about debugging options consult
&lt;http://libvirt.org/logging.html&gt;</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report any bugs
discovered to the libvirt community via the mailing list
&lt;http://libvirt.org/contact.html&gt; or bug tracker
&lt;http://libvirt.org/bugs.html&gt;. Alternatively report
bugs to your software distributor / vendor.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">  Please refer to the AUTHORS file distributed with libvirt.
  Based on the virsh man page.</pre>


<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2015 Red Hat, Inc., and the authors listed in the libvirt
<small>AUTHORS</small> file.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virt-admin is
distributed under the terms of the <small>GNU LGPL</small>
v2+. This is free software; see the source for copying
conditions. There is <small>NO</small> warranty; not even
for <small>MERCHANTABILITY</small> or <small>FITNESS FOR A
PARTICULAR PURPOSE</small></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>virsh</i>(1),
<i>virt&minus;xml&minus;validate</i>(1),
<i>virt&minus;host&minus;validate</i>(1),
&lt;http://www.libvirt.org/&gt;</p>
<hr>
</body>
</html>
