<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:06:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERF&minus;STAT</title>

</head>
<body>

<h1 align="center">PERF&minus;STAT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#STAT RECORD">STAT RECORD</a><br>
<a href="#STAT REPORT">STAT REPORT</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#CSV FORMAT">CSV FORMAT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perf-stat
&minus; Run a command and gather performance counter
statistics</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>perf
stat</i> [&minus;e &lt;EVENT&gt; |
&minus;&minus;event=EVENT] [&minus;a] &lt;command&gt;
<i><br>
perf stat</i> [&minus;e &lt;EVENT&gt; |
&minus;&minus;event=EVENT] [&minus;a] &mdash;
&lt;command&gt; [&lt;options&gt;] <i><br>
perf stat</i> [&minus;e &lt;EVENT&gt; |
&minus;&minus;event=EVENT] [&minus;a] record [&minus;o file]
&mdash; &lt;command&gt; [&lt;options&gt;] <i><br>
perf stat</i> report [&minus;i file]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This command
runs a command and gathers performance counter statistics
from it.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&lt;command&gt;...</p>

<p style="margin-left:17%;">Any command you can specify in
a shell.</p>

<p style="margin-left:11%; margin-top: 1em">record</p>

<p style="margin-left:17%;">See STAT RECORD.</p>

<p style="margin-left:11%; margin-top: 1em">report</p>

<p style="margin-left:17%;">See STAT REPORT.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;e,
&minus;&minus;event=</p>

<p style="margin-left:17%;">Select the PMU event. Selection
can be:</p>

<p style="margin-left:23%; margin-top: 1em">&bull; a
symbolic event name (use <i>perf list</i> to list all
events)</p>

<p style="margin-left:23%; margin-top: 1em">&bull; a raw
PMU event (eventsel+umask) in the form of rNNN where NNN is
a hexadecimal event descriptor.</p>

<p style="margin-left:23%; margin-top: 1em">&bull; a
symbolically formed event like <i>pmu/param1=0x3,param2/</i>
where param1 and param2 are defined as formats for the PMU
in /sys/bus/event_sources/devices/&lt;pmu&gt;/format/*</p>

<p style="margin-left:23%; margin-top: 1em">&bull; a
symbolically formed event like
<i>pmu/config=M,config1=N,config2=K/</i> where M, N, K are
numbers (in decimal, hex, octal format). Acceptable values
for each of <i>config</i>, <i>config1</i> and <i>config2</i>
parameters are defined by corresponding entries in
/sys/bus/event_sources/devices/&lt;pmu&gt;/format/*</p>

<p style="margin-left:11%; margin-top: 1em">&minus;i,
&minus;&minus;no&minus;inherit</p>

<p style="margin-left:17%;">child tasks do not inherit
counters</p>

<p style="margin-left:11%; margin-top: 1em">&minus;p,
&minus;&minus;pid=&lt;pid&gt;</p>

<p style="margin-left:17%;">stat events on existing process
id (comma separated list)</p>

<p style="margin-left:11%; margin-top: 1em">&minus;t,
&minus;&minus;tid=&lt;tid&gt;</p>

<p style="margin-left:17%;">stat events on existing thread
id (comma separated list)</p>

<p style="margin-left:11%; margin-top: 1em">&minus;a,
&minus;&minus;all&minus;cpus</p>

<p style="margin-left:17%;">system&minus;wide collection
from all CPUs</p>

<p style="margin-left:11%; margin-top: 1em">&minus;c,
&minus;&minus;scale</p>

<p style="margin-left:17%;">scale/normalize counter
values</p>

<p style="margin-left:11%; margin-top: 1em">&minus;d,
&minus;&minus;detailed</p>

<p style="margin-left:17%;">print more detailed statistics,
can be specified up to 3 times</p>

<p style="margin-left:23%; margin-top: 1em">&minus;d:
detailed events, L1 and LLC data cache <br>
&minus;d &minus;d: more detailed events, dTLB and iTLB
events <br>
&minus;d &minus;d &minus;d: very detailed events, adding
prefetch events</p>

<p style="margin-left:11%; margin-top: 1em">&minus;r,
&minus;&minus;repeat=&lt;n&gt;</p>

<p style="margin-left:17%;">repeat command and print
average + stddev (max: 100). 0 means forever.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;B,
&minus;&minus;big&minus;num</p>

<p style="margin-left:17%;">print large numbers with
thousands' separators according to locale</p>

<p style="margin-left:11%; margin-top: 1em">&minus;C,
&minus;&minus;cpu=</p>

<p style="margin-left:17%;">Count only on the list of CPUs
provided. Multiple CPUs can be provided as a
comma&minus;separated list with no space: 0,1. Ranges of
CPUs are specified with &minus;: 0&minus;2. In
per&minus;thread mode, this option is ignored. The &minus;a
option is still necessary to activate system&minus;wide
monitoring. Default is to count on all CPUs.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;A,
&minus;&minus;no&minus;aggr</p>

<p style="margin-left:17%;">Do not aggregate counts across
all monitored CPUs in system&minus;wide mode (&minus;a).
This option is only valid in system&minus;wide mode.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;n,
&minus;&minus;null</p>

<p style="margin-left:17%;">null run &minus; don&rsquo;t
start any counters</p>

<p style="margin-left:11%; margin-top: 1em">&minus;v,
&minus;&minus;verbose</p>

<p style="margin-left:17%;">be more verbose (show counter
open errors, etc)</p>

<p style="margin-left:11%; margin-top: 1em">&minus;x SEP,
&minus;&minus;field&minus;separator SEP</p>

<p style="margin-left:17%;">print counts using a
CSV&minus;style output to make it easy to import directly
into spreadsheets. Columns are separated by the string
specified in SEP.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;G name,
&minus;&minus;cgroup name</p>

<p style="margin-left:17%;">monitor only in the container
(cgroup) called &quot;name&quot;. This option is available
only in per&minus;cpu mode. The cgroup filesystem must be
mounted. All threads belonging to container &quot;name&quot;
are monitored when they run on the monitored CPUs. Multiple
cgroups can be provided. Each cgroup is applied to the
corresponding event, i.e., first cgroup to first event,
second cgroup to second event and so on. It is possible to
provide an empty cgroup (monitor all the time) using, e.g.,
&minus;G foo,,bar. Cgroups must have corresponding events,
i.e., they always refer to events defined earlier on the
command line.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;o file,
&minus;&minus;output file</p>

<p style="margin-left:17%;">Print the output into the
designated file.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;append</p>

<p style="margin-left:17%;">Append to the output file
designated with the &minus;o option. Ignored if &minus;o is
not specified.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;log&minus;fd</p>

<p style="margin-left:17%;">Log output to fd, instead of
stderr. Complementary to &minus;&minus;output, and mutually
exclusive with it. &minus;&minus;append may be used here.
Examples: 3&gt;results perf stat &minus;&minus;log&minus;fd
3 &mdash; $cmd 3&gt;&gt;results perf stat
&minus;&minus;log&minus;fd 3 &minus;&minus;append &mdash;
$cmd</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;pre,
&minus;&minus;post</p>

<p style="margin-left:17%;">Pre and post measurement hooks,
e.g.:</p>

<p style="margin-left:11%; margin-top: 1em">perf stat
&minus;&minus;repeat 10 &minus;&minus;null
&minus;&minus;sync &minus;&minus;pre <i>make &minus;s
O=defconfig&minus;build/clean</i> &mdash; make &minus;s
&minus;j64 O=defconfig&minus;build/ bzImage</p>

<p style="margin-left:11%; margin-top: 1em">&minus;I msecs,
&minus;&minus;interval&minus;print msecs</p>

<p style="margin-left:17%;">Print count deltas every N
milliseconds (minimum: 10ms) The overhead percentage could
be high in some cases, for instance with small, sub 100ms
intervals. Use with caution. example: <i>perf stat &minus;I
1000 &minus;e cycles &minus;a sleep 5</i></p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;metric&minus;only</p>

<p style="margin-left:17%;">Only print computed metrics.
Print them in a single line. Don&rsquo;t show any raw
values. Not supported with
&minus;&minus;per&minus;thread.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;per&minus;socket</p>

<p style="margin-left:17%;">Aggregate counts per processor
socket for system&minus;wide mode measurements. This is a
useful mode to detect imbalance between sockets. To enable
this mode, use &minus;&minus;per&minus;socket in addition to
&minus;a. (system&minus;wide). The output includes the
socket number and the number of online processors on that
socket. This is useful to gauge the amount of
aggregation.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;per&minus;core</p>

<p style="margin-left:17%;">Aggregate counts per physical
processor for system&minus;wide mode measurements. This is a
useful mode to detect imbalance between physical cores. To
enable this mode, use &minus;&minus;per&minus;core in
addition to &minus;a. (system&minus;wide). The output
includes the core number and the number of online logical
processors on that physical processor.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;per&minus;thread</p>

<p style="margin-left:17%;">Aggregate counts per monitored
threads, when monitoring threads (&minus;t option) or
processes (&minus;p option).</p>

<p style="margin-left:11%; margin-top: 1em">&minus;D msecs,
&minus;&minus;delay msecs</p>

<p style="margin-left:17%;">After starting the program,
wait msecs before measuring. This is useful to filter out
the startup phase of the program, which is often very
different.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;T,
&minus;&minus;transaction</p>

<p style="margin-left:17%;">Print statistics of
transactional execution if supported.</p>

<h2>STAT RECORD
<a name="STAT RECORD"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Stores stat
data into perf data file.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;o file,
&minus;&minus;output file</p>

<p style="margin-left:17%;">Output file name.</p>

<h2>STAT REPORT
<a name="STAT REPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Reads and
reports stat data from perf data file.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;i file,
&minus;&minus;input file</p>

<p style="margin-left:17%;">Input file name.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;per&minus;socket</p>

<p style="margin-left:17%;">Aggregate counts per processor
socket for system&minus;wide mode measurements.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;per&minus;core</p>

<p style="margin-left:17%;">Aggregate counts per physical
processor for system&minus;wide mode measurements.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;A,
&minus;&minus;no&minus;aggr</p>

<p style="margin-left:17%;">Do not aggregate counts across
all monitored CPUs.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">$ perf stat
&mdash; make &minus;j</p>

<p style="margin-left:17%; margin-top: 1em">Performance
counter stats for 'make &minus;j':</p>

<p style="margin-left:17%; margin-top: 1em">8117.370256
task clock ticks # 11.281 CPU utilization factor <br>
678 context switches # 0.000 M/sec <br>
133 CPU migrations # 0.000 M/sec <br>
235724 pagefaults # 0.029 M/sec <br>
24821162526 CPU cycles # 3057.784 M/sec <br>
18687303457 instructions # 2302.138 M/sec <br>
172158895 cache references # 21.209 M/sec <br>
27075259 cache misses # 3.335 M/sec</p>


<p style="margin-left:17%; margin-top: 1em">Wall&minus;clock
time elapsed: 719.554352 msecs</p>

<h2>CSV FORMAT
<a name="CSV FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">With &minus;x,
perf stat is able to output a not&minus;quite&minus;CSV
format output Commas in the output are not put into
&quot;&quot;. To make it easy to parse it is recommended to
use a different character like &minus;x \;</p>

<p style="margin-left:11%; margin-top: 1em">The fields are
in this order:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
usec time stamp in fractions of second (with &minus;I
xxx)</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
CPU, core, or socket identifier</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
number of logical CPUs aggregated</p>

<p style="margin-left:17%; margin-top: 1em">&bull; counter
value</p>

<p style="margin-left:17%; margin-top: 1em">&bull; unit of
the counter value or empty</p>

<p style="margin-left:17%; margin-top: 1em">&bull; event
name</p>

<p style="margin-left:17%; margin-top: 1em">&bull; run time
of counter</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
percentage of measurement time the counter was running</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
variance if multiple values are collected with &minus;r</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
metric value</p>

<p style="margin-left:17%; margin-top: 1em">&bull; optional
unit of metric</p>

<p style="margin-left:11%; margin-top: 1em">Additional
metrics may be printed with all earlier fields being
empty.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>perf-top</b>(1),
<b>perf-list</b>(1)</p>
<hr>
</body>
</html>
