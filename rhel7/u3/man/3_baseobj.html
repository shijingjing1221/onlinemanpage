<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 20:53:28 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>BASEOBJ</title>

</head>
<body>

<h1 align="center">BASEOBJ</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CLASSES">CLASSES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">baseobj - Base
object</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Base class so
objects will inherit the methods providing the string
representation of the object and methods to change the
verbosity of such string representation. It also includes a
simple debug printing and logging mechanism including
methods to change the debug verbosity level and methods to
add debug levels.</p>

<h2>CLASSES
<a name="CLASSES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>class
BaseObj(__builtin__.object)</b> <br>
Base class so objects will inherit the methods providing the
string <br>
representation of the object and a simple debug printing and
logging <br>
mechanism.</p>

<p style="margin-left:11%; margin-top: 1em">Usage: <br>
from baseobj import BaseObj</p>

<p style="margin-left:11%; margin-top: 1em"># Named
arguments <br>
x = BaseObj(a=1, b=2)</p>

<p style="margin-left:11%; margin-top: 1em"># Dictionary
argument <br>
x = BaseObj({&rsquo;a&rsquo;:1, &rsquo;b&rsquo;:2})</p>

<p style="margin-left:11%; margin-top: 1em"># Tuple
arguments: first for keys and second for the values <br>
x = BaseObj([&rsquo;a&rsquo;, &rsquo;b&rsquo;], [1, 2])</p>

<p style="margin-left:11%; margin-top: 1em"># All of the
above will create an object having two attributes: <br>
x.a = 1 and x.b = 2</p>

<p style="margin-left:11%; margin-top: 1em"># Add attribute
name, this will be the only attribute to be displayed <br>
x.set_attrlist(&quot;a&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Add list of
attribute names to be displayed in that order <br>
x.set_attrlist([&quot;a&quot;, &quot;b&quot;])</p>

<p style="margin-left:11%; margin-top: 1em"># Set attribute
with ordered display rights <br>
x.set_attr(&quot;a&quot;, 1) <br>
# This is the same as <br>
setattr(x, &quot;a&quot;, 1) or x.a = 1 <br>
x.set_attrlist(&quot;a&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Set attribute
with switch duplicate <br>
# The following creates an extra attribute
&quot;switch&quot; with <br>
# the same value as attribute &quot;a&quot;: <br>
# x.a == x.switch <br>
# x.a is x.switch <br>
x.set_attr(&quot;a&quot;, 1, switch=True)</p>

<p style="margin-left:11%; margin-top: 1em"># Make the
current object flat by allowing all the attributes <br>
# for the new attribute to be accessed directly by the
current <br>
# object so the following is True: <br>
# x.d == x.c.d <br>
x.set_attr(&quot;c&quot;, BaseObj(d=11, e=22),
switch=True)</p>

<p style="margin-left:11%; margin-top: 1em"># Set the
comparison attribute so x == x.a is True <br>
x.set_eqattr(&quot;a&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Set verbose
level of object&rsquo;s string representation <br>
x.debug_repr(level)</p>

<p style="margin-left:11%; margin-top: 1em"># Set string
format for verbose level 1 <br>
x.set_strfmt(1, &quot;arg1:{0}&quot;) <br>
# In the above example the first positional argument is
&quot;a&quot; <br>
# so the str(x) gives &quot;arg1:1&quot;</p>

<p style="margin-left:11%; margin-top: 1em"># Set attribute
shared by all instances <br>
# If a global or shared attribute is set on one instance,
<br>
# all other instances will have access to it: <br>
# y = BaseObj(d=2, e=3) <br>
# then the following is true <br>
# x.g == y.g <br>
# x.g is y.g <br>
x.set_global(&quot;g&quot;, 5)</p>

<p style="margin-left:11%; margin-top: 1em"># Set level
mask to display all debug messages matching mask <br>
x.debug_level(0xFF)</p>

<p style="margin-left:11%; margin-top: 1em"># Add a debug
mapping for mask 0x100 <br>
x.debug_map(0x100, &rsquo;opts&rsquo;, &quot;OPTS:
&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Set global
indentation to 4 spaces for dprint <br>
x.dindent(4)</p>

<p style="margin-left:11%; margin-top: 1em"># Set global
indentation to 4 spaces for displaying objects <br>
x.sindent(4)</p>

<p style="margin-left:11%; margin-top: 1em"># Set global
truncation to 64 for displaying string objects <br>
x.strsize(64)</p>

<p style="margin-left:11%; margin-top: 1em"># Do not
display timestamp for dprint messages <br>
x.tstamp(enable=False)</p>

<p style="margin-left:11%; margin-top: 1em"># Change
timestamp format to include the date <br>
x.tstamp(fmt=&quot;{0:date:%Y-%m-%d %H:%M:%S.%q} &quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Get timestamp
if enabled, else return an empty string <br>
out = x.timestamp()</p>

<p style="margin-left:11%; margin-top: 1em"># Open log file
<br>
x.open_log(logfile)</p>

<p style="margin-left:11%; margin-top: 1em"># Close log
file <br>
x.close_log()</p>

<p style="margin-left:11%; margin-top: 1em"># Write data to
log file <br>
x.write_log(data)</p>

<p style="margin-left:11%; margin-top: 1em"># Format the
given arguments <br>
out = x.format(&quot;{0:x} - {1}&quot;, 1,
&quot;hello&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Format the
object attributes set by set_attrlist() <br>
out = x.format(&quot;{0:x} - {1}&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"># Print debug
message only if OPTS bitmap matches the current <br>
# debug level mask <br>
x.dprint(&quot;OPTS&quot;, &quot;This is an OPTS debug
message&quot;)</p>

<p style="margin-left:11%; margin-top: 1em"><b>Methods
defined here:</b> <br>
---------------------</p>


<p style="margin-left:11%; margin-top: 1em"><b>__eq__(self,
other)</b> <br>
Comparison method: this object is treated like the attribute
<br>
defined by set_eqattr()</p>


<p style="margin-left:11%; margin-top: 1em"><b>__getattr__(self,
attr)</b> <br>
Return the attribute value for which the lookup has not
found <br>
the attribute in the usual places. It checks the internal
<br>
dictionary for any attribute references, it checks if this
<br>
is a flat object and returns the appropriate attribute. <br>
And finally, if any of the attributes listed in _attrlist
<br>
does not exist it returns None as if they exist but not <br>
defined</p>


<p style="margin-left:11%; margin-top: 1em"><b>__init__(self,
*kwts, **kwds)</b> <br>
Constructor</p>

<p style="margin-left:11%; margin-top: 1em">Initialize
object&rsquo;s private data according to the arguments
given. <br>
Arguments can be given as positional, named arguments or a
<br>
combination of both.</p>


<p style="margin-left:11%; margin-top: 1em"><b>__ne__(self,
other)</b> <br>
Comparison method: this object is treated like the attribute
<br>
defined by set_eqattr()</p>


<p style="margin-left:11%; margin-top: 1em"><b>__repr__(self)</b>
<br>
String representation of object</p>

<p style="margin-left:11%; margin-top: 1em">The
representation depends on the verbose level set by
debug_repr(). <br>
If set to 0 the generic object representation is returned,
else <br>
the representation of the object includes all object
attributes <br>
and their values with proper indentation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>__str__(self)</b>
<br>
Informal string representation of object</p>

<p style="margin-left:11%; margin-top: 1em">The
representation depends on the verbose level set by
debug_repr(). <br>
If set to 0 the generic object representation is returned,
else <br>
the representation of the object includes all object
attributes <br>
and their values.</p>


<p style="margin-left:11%; margin-top: 1em"><b>close_log(self)</b>
<br>
Close log file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>debug_level(self,
level=0)</b> <br>
Set debug level mask.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>level:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Level to set. This could be a number or a string
expression</p> </td></tr>
</table>

<p style="margin-left:32%;">of names defined by
debug_map()</p>

<p style="margin-left:22%; margin-top: 1em">Examples: <br>
# Set level <br>
x.debug_level(0xFF)</p>

<p style="margin-left:22%; margin-top: 1em"># Set level
using expression <br>
x.debug_level(&rsquo;all&rsquo;) <br>
x.debug_level(&rsquo;debug ^ 1&rsquo;)</p>


<p style="margin-left:11%; margin-top: 1em"><b>dprint(self,
level, msg, indent=0)</b> <br>
Print debug message if level is allowed by the verbose level
<br>
given in debug_level().</p>


<p style="margin-left:11%; margin-top: 1em"><b>format(self,
fmt, *kwts, **kwds)</b> <br>
Format the arguments and return the string using the format
given. <br>
If no arguments are given either positional or named then
object <br>
attributes set by set_attrlist() are used as positional
arguments <br>
and all object attributes are used as named arguments</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>fmt:</b></p></td>
<td width="4%"></td>
<td width="68%">


<p style="margin-top: 1em">String format to use for the
arguments, where {0}, {1}, etc.</p></td></tr>
</table>

<p style="margin-left:32%;">are used for positional
arguments and {name1}, {name2}, etc. <br>
are used for named arguments given after fmt.</p>


<p style="margin-left:11%; margin-top: 1em"><b>open_log(self,
logfile)</b> <br>
Open log file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set_attr(self,
name, value, switch=False)</b> <br>
Add name/value as an object attribute and add the name to
the <br>
list of attributes to display</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>name:</b></p></td>
<td width="1%"></td>
<td width="23%">


<p style="margin-top: 1em">Attribute name</p></td>
<td width="45%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>value:</b></p></td>
<td width="1%"></td>
<td width="23%">


<p>Attribute value</p></td>
<td width="45%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>set_attrlist(self,
attr)</b> <br>
Add list of attribute names in object to display by str() or
repr()</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>attr:</b></p></td>
<td width="3%"></td>
<td width="68%">


<p style="margin-top: 1em">Name or list of names to add to
the list of attribute names</p></td></tr>
</table>

<p style="margin-left:32%;">to display</p>


<p style="margin-left:11%; margin-top: 1em"><b>set_eqattr(self,
attr)</b> <br>
Set the comparison attribute</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>attr:</b></p></td>
<td width="3%"></td>
<td width="59%">


<p style="margin-top: 1em">Attribute to use for object
comparison</p> </td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Examples: <br>
x = BaseObj(a=1, b=2) <br>
x.set_eqattr(&quot;a&quot;) <br>
x == 1 will return True, the same as x.a == 1</p>


<p style="margin-left:11%; margin-top: 1em"><b>set_global(self,
name, value)</b> <br>
Set global variable.</p>


<p style="margin-left:11%; margin-top: 1em"><b>set_strfmt(self,
level, format)</b> <br>
Save format for given display level</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>level:</b></p></td>
<td width="1%"></td>
<td width="60%">


<p style="margin-top: 1em">Display level given as a first
argument</p> </td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>format:</b></p>

<p style="margin-left:32%;">String format for given display
level, given as a second argument</p>

<p style="margin-left:11%; margin-top: 1em"><b>Static
methods defined here:</b> <br>
----------------------------</p>


<p style="margin-left:11%; margin-top: 1em"><b>debug_map(bitmap,
name=&rsquo;&rsquo;, disp=&rsquo;&rsquo;)</b> <br>
Add a debug mapping.</p>

<p style="margin-left:11%; margin-top: 1em">Generic debug
levels map <br>
&lt;bitmap&gt; &lt;name&gt; &lt;disp prefix&gt; <br>
0x000 &rsquo;none&rsquo; <br>
0x001 &rsquo;info&rsquo; &rsquo;INFO: &rsquo; # Display info
messages only <br>
0x0FF &rsquo;debug&rsquo; &rsquo;DBG: &rsquo; # Display info
and all debug messages (0x02-0x80) <br>
&gt;0x100 user defined verbose levels</p>


<p style="margin-left:11%; margin-top: 1em"><b>debug_repr(level=None)</b>
<br>
Return or set verbose level of object&rsquo;s string
representation. <br>
When setting the verbose level, return the verbose level
before <br>
setting it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>level:</b></p></td>
<td width="1%"></td>
<td width="39%">


<p>Level of verbosity to set</p></td>
<td width="29%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Examples: <br>
# Set verbose level to its minimal object representation
<br>
x.debug_repr(0)</p>

<p style="margin-left:22%; margin-top: 1em"># Object
representation is a bit more verbose <br>
x.debug_repr(1)</p>

<p style="margin-left:22%; margin-top: 1em"># Object
representation is a lot more verbose <br>
x.debug_repr(2)</p>


<p style="margin-left:11%; margin-top: 1em"><b>dindent(indent=None)</b>
<br>
Set global dprint indentation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>flush_log()</b>
<br>
Flush data to log file.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sindent(indent=None)</b>
<br>
Set global object indentation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>strsize(size)</b>
<br>
Set global string truncation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>timestamp(fmt=None)</b>
<br>
Return the timestamp if it is enabled.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>fmt:</b></p></td>
<td width="4%"></td>
<td width="68%">


<p style="margin-top: 1em">Timestamp format, default is
given by the format</p></td></tr>
</table>

<p style="margin-left:32%;">set by tstamp()</p>


<p style="margin-left:11%; margin-top: 1em"><b>tstamp(enable=None,
fmt=None)</b> <br>
Enable/disable timestamps on dprint messages and/or <br>
set the default format for timestamps</p>

<p style="margin-left:22%;"><b>enable:</b></p>

<p style="margin-left:32%;">Boolean to enable/disable
timestamps</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>fmt:</b></p></td>
<td width="4%"></td>
<td width="31%">


<p>Set timestamp format</p></td>
<td width="37%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>write_log(data)</b>
<br>
Write data to log file.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>formatstr(3)</b></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">No known
bugs.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jorge Mora
(mora@netapp.com)</p>
<hr>
</body>
</html>
