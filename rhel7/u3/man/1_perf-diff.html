<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:06:21 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERF&minus;DIFF</title>

</head>
<body>

<h1 align="center">PERF&minus;DIFF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#COMPARISON">COMPARISON</a><br>
<a href="#COMPARISON METHODS">COMPARISON METHODS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perf-diff
&minus; Read perf.data files and display the differential
profile</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>perf
diff</i> [baseline file] [data file1] [[data file2] ...
]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This command
displays the performance difference amongst two or more
perf.data files captured via perf record.</p>

<p style="margin-left:11%; margin-top: 1em">If no
parameters are passed it will assume perf.data.old and
perf.data.</p>

<p style="margin-left:11%; margin-top: 1em">The
differential profile is displayed only for events matching
both specified perf.data files.</p>

<p style="margin-left:11%; margin-top: 1em">If no
parameters are passed the samples will be sorted by dso and
symbol. As the perf.data files could come from different
binaries, the symbols addresses could vary. So perf diff is
based on the comparison of the files and symbols name.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">&minus;D,
&minus;&minus;dump&minus;raw&minus;trace</p>

<p style="margin-left:17%;">Dump raw trace in ASCII.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;kallsyms=&lt;file&gt;</p>

<p style="margin-left:17%;">kallsyms pathname</p>

<p style="margin-left:11%; margin-top: 1em">&minus;m,
&minus;&minus;modules</p>

<p style="margin-left:17%;">Load module symbols. WARNING:
use only with &minus;k and LIVE kernel</p>

<p style="margin-left:11%; margin-top: 1em">&minus;d,
&minus;&minus;dsos=</p>

<p style="margin-left:17%;">Only consider symbols in these
dsos. CSV that understands
<b><font color="#0000FF">file://filename</font></b>
<font color="#000000">entries. This option will affect the
percentage of the Baseline/Delta column. See
&minus;&minus;percentage for more info.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;C,
&minus;&minus;comms=</font></p>

<p style="margin-left:17%;"><font color="#000000">Only
consider symbols in these comms. CSV that understands</font>
<b><font color="#0000FF">file://filename</font></b>
<font color="#000000">entries. This option will affect the
percentage of the Baseline/Delta column. See
&minus;&minus;percentage for more info.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;S,
&minus;&minus;symbols=</font></p>

<p style="margin-left:17%;"><font color="#000000">Only
consider these symbols. CSV that understands</font>
<b><font color="#0000FF">file://filename</font></b>
<font color="#000000">entries. This option will affect the
percentage of the Baseline/Delta column. See
&minus;&minus;percentage for more info.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;s,
&minus;&minus;sort=</font></p>

<p style="margin-left:17%;"><font color="#000000">Sort by
key(s): pid, comm, dso, symbol, cpu, parent, srcline. Please
see description of &minus;&minus;sort in the
perf&minus;report man page.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;t,
&minus;&minus;field&minus;separator=</font></p>

<p style="margin-left:17%;"><font color="#000000">Use a
special separator character and don&rsquo;t pad with spaces,
replacing all occurrences of this separator in symbol names
(and other output) with a <i>.</i> character, that thus
it&rsquo;s the only non valid separator.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;v,
&minus;&minus;verbose</font></p>

<p style="margin-left:17%;"><font color="#000000">Be
verbose, for instance, show the raw counts in addition to
the diff.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;f,
&minus;&minus;force</font></p>


<p style="margin-left:17%;"><font color="#000000">Don&rsquo;t
complain, do it.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;symfs=&lt;directory&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">Look for
files with symbols relative to this directory.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;b,
&minus;&minus;baseline&minus;only</font></p>

<p style="margin-left:17%;"><font color="#000000">Show only
items with match in baseline.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;c,
&minus;&minus;compute</font></p>


<p style="margin-left:17%;"><font color="#000000">Differential
computation selection &minus; delta,ratio,wdiff (default is
delta). See COMPARISON METHODS section for more
info.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;p,
&minus;&minus;period</font></p>

<p style="margin-left:17%;"><font color="#000000">Show
period values for both compared hist entries.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;F,
&minus;&minus;formula</font></p>

<p style="margin-left:17%;"><font color="#000000">Show
formula for given computation.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;o,
&minus;&minus;order</font></p>

<p style="margin-left:17%;"><font color="#000000">Specify
compute sorting column number.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;percentage</font></p>


<p style="margin-left:17%;"><font color="#000000">Determine
how to display the overhead percentage of filtered entries.
Filters can be applied by &minus;&minus;comms,
&minus;&minus;dsos and/or &minus;&minus;symbols
options.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&quot;relative&quot;
means it's relative to filtered entries only so that the
<br>
sum of shown entries will be always 100%.
&quot;absolute&quot; means it retains <br>
the original value before and after the filter is
applied.</font></p>

<h2>COMPARISON
<a name="COMPARISON"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
comparison is governed by the baseline file. The baseline
perf.data file is iterated for samples. All other perf.data
files specified on the command line are searched for the
baseline sample pair. If the pair is found, specified
computation is made and result is displayed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">All
samples from non&minus;baseline perf.data files, that do not
match any baseline entry, are displayed with empty space
within baseline column and possible computation results
(delta) in their related column.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Example
files samples: &minus; file A with samples f1, f2, f3, f4,
f6 &minus; file B with samples f2, f4, f5 &minus; file C
with samples f1, f2, f5</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Example
output: x &minus; computation takes place for pair b &minus;
baseline sample percentage</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
perf diff A B C</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">baseline/A
compute/B compute/C samples <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
b x f1 <br>
b x x f2 <br>
b f3 <br>
b x f4 <br>
b f6 <br>
x x f5</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
perf diff B A C</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">baseline/B
compute/A compute/C samples <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
b x x f2 <br>
b x f4 <br>
b x f5 <br>
x x f1 <br>
x f3 <br>
x f6</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
perf diff C B A</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">baseline/C
compute/B compute/A samples <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
b x f1 <br>
b x x f2 <br>
b x f5 <br>
x f3 <br>
x x f4 <br>
x f6</font></p>

<h2>COMPARISON METHODS
<a name="COMPARISON METHODS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>delta</b>
<br>
If specified the <i>Delta</i> column is displayed with value
<i>d</i> computed as:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">d
= A&minus;&gt;period_percent &minus;
B&minus;&gt;period_percent</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">with:
&minus; A/B being matching hist entry from data/baseline
file specified (or perf.data/perf.data.old)
respectively.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
period_percent being the % of the hist entry period value
within single data file</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
with filtering by &minus;C, &minus;d and/or &minus;S,
period_percent might be changed relative to how entries are
filtered. Use &minus;&minus;percentage=absolute to prevent
such fluctuation.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>ratio</b>
<br>
If specified the <i>Ratio</i> column is displayed with value
<i>r</i> computed as:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">r
= A&minus;&gt;period / B&minus;&gt;period</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">with:
&minus; A/B being matching hist entry from data/baseline
file specified (or perf.data/perf.data.old)
respectively.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
period being the hist entry period value</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>wdiff:WEIGHT&minus;B,WEIGHT&minus;A</b>
<br>
If specified the <i>Weighted diff</i> column is displayed
with value <i>d</i> computed as:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">d
= B&minus;&gt;period * WEIGHT&minus;A &minus;
A&minus;&gt;period * WEIGHT&minus;B</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
A/B being matching hist entry from data/baseline file
specified (or perf.data/perf.data.old)
respectively.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
period being the hist entry period value</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
WEIGHT&minus;A/WEIGHT&minus;B being user supplied weights in
the the <i>&minus;c</i> option behind <i>:</i> separator
like <i>&minus;c wdiff:1,2</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
WEIGHT&minus;A being the weight of the data file</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
WEIGHT&minus;B being the weight of the baseline data
file</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>perf-record</b>(1),
<b>perf-report</b>(1)</font></p>
<hr>
</body>
</html>
