<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:00:27 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NFSTEST_FILE</title>

</head>
<body>

<h1 align="center">NFSTEST_FILE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">nfstest_file -
Find all packets for a specific file</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">nfstest_file
[options] -p &lt;filepath&gt; &lt;trace1.cap&gt;
[&lt;trace2.cap&gt; ...]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Display all NFS
packets for the specified path. It takes a relative path,
where it searches for each of the directory entries given in
the path until it gets the file handle for the directory
where the file is located. Once the directory file handle is
found, a LOOKUP or OPEN/CREATE is searched for the given
file name. If the file lookup or creation is found, all file
handles and state ids associated with that file are searched
and all packets found, including their respective replies
are displayed.</p>

<p style="margin-left:11%; margin-top: 1em">There are three
levels of verbosity in which they are specified using a
bitmap, where the most significant bit gives a more verbose
output. Verbose level 1 is used as a default where each
packet is displayed condensed to one line using the last
layer of the packet as the main output.</p>

<p style="margin-left:11%; margin-top: 1em">The packet
trace files are processed either serially or in parallel.
The packets are displayed using their timestamps so they are
always displayed in the correct order even if the files
given are out of order. If the packet traces were captured
one after the other the packets are displayed serially,
first the packets of the first file according to their
timestamps, then the second and so forth. If the packet
traces were captured at the same time on multiple clients
the packets are displayed in parallel, packets are
interleaved from all the files when displayed again
according to their timestamps.</p>

<p style="margin-left:11%; margin-top: 1em">Note: A packet
call can be displayed out of order if the call is not
matched by any of the file handles, state ids or names but
its reply is matched so its corresponding call is displayed
right before the reply.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">--version</p>

<p style="margin-left:22%;">show program&rsquo;s version
number and exit</p>

<p style="margin-left:11%;">-h, --help</p>

<p style="margin-left:22%;">show this help message and
exit</p>

<p style="margin-left:11%;">-p PATH, --path=PATH</p>

<p style="margin-left:22%;">Path relative to the mount
point, the path can be specified by its file handle
&rsquo;FH:0xc3f001b4&rsquo;. Also the relative path could
start with a directory file handle
&rsquo;DH:0x0c35bb58/file_name&rsquo;</p>

<p style="margin-left:11%;">--stid=STID</p>

<p style="margin-left:22%;">State id to include in the
search</p>

<p style="margin-left:11%;">-v VERBOSE,
--verbose=VERBOSE</p>

<p style="margin-left:22%;">Verbose level bitmask [default:
1]. bitmap 0x01: one line per packet. bitmap 0x02: one line
per layer. bitmap 0x04: real verbose.</p>

<p style="margin-left:11%;">-s START, --start=START</p>

<p style="margin-left:22%;">Start index [default: 0]</p>

<p style="margin-left:11%;">-e END, --end=END</p>

<p style="margin-left:22%;">End index [default: 0]</p>

<p style="margin-left:11%;">-z TZ, --tz=TZ</p>

<p style="margin-left:22%;">Time zone to use to display
timestamps</p>

<p style="margin-left:11%; margin-top: 1em"><b>Packet
display:</b> <br>
--crc16=CRC16</p>

<p style="margin-left:22%;">Display CRC16 encoded strings
[default: True]</p>

<p style="margin-left:11%;">--crc32=CRC32</p>

<p style="margin-left:22%;">Display CRC32 encoded strings
[default: True]</p>

<p style="margin-left:11%;">--strsize=STRSIZE</p>

<p style="margin-left:22%;">Truncate all strings to this
size [default: 0]</p>

<p style="margin-left:11%; margin-top: 1em"><b>Debug:</b>
<br>
--enum-check=ENUM_CHECK</p>

<p style="margin-left:22%;">If set to True, enums are
strictly enforced [default: True]</p>

<p style="margin-left:11%;">--debug-level=DEBUG_LEVEL</p>

<p style="margin-left:22%;">Set debug level messages</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"># Find all
packets for relative path: nfstest_file -p
data/name_d_1/name_d_2/name_f_13 nested_dir_v3.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Find all
packets for relative path, starting with a directory file
handle: nfstest_file -p
DH:0x34ac5f28/name_d_1/name_d_2/name_f_13
nested_dir_v3.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Find all
packets for file, starting with a directory file handle:
nfstest_file -p DH:0x0c35bb58/name_f_13
nested_dir_v3.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Find all
packets for file handle nfstest_file -p FH:0xc3f001b4
/tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Find all
packets for file, including all operations for the given
state id nfstest_file -p f00000001 --stid 0x0fd4
/tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display all
packets for file (one line per layer) nfstest_file -p
f00000001 -v 2 /tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display all
packets for file <br>
# (real verbose, all items in each layer are displayed)
nfstest_file -p f00000001 -v 4 /tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display all
packets for file (display both verbose level 1 and 2)
nfstest_file -p f00000001 -v 3 /tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display
packets for file between packets 100 through 199 <br>
$ nfstest_file -p f00000001 -s 100 -e 200 /tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display all
packets truncating all strings to 100 bytes <br>
# This is useful when some packets are very large and there
<br>
# is no need to display all the data <br>
$ nfstest_file -p f00000001 --strsize 100 -v 2
/tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display
packets using India time zone <br>
$ nfstest_file -p f00000001 --tz &quot;UTC-5:30&quot;
/tmp/trace.cap <br>
$ nfstest_file -p f00000001 --tz &quot;Asia/Kolkata&quot;
/tmp/trace.cap</p>

<p style="margin-left:11%; margin-top: 1em"># Display all
packets for file found in all trace files given <br>
# The packets are displayed in order using their timestamps
<br>
$ nfstest_file -p f00000001 trace1.cap trace2.cap
trace3.cap</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>formatstr(3),
nfstest_alloc(1), nfstest_cache(1), nfstest_delegation(1),
nfstest_dio(1), nfstest_interop(1), nfstest_io(1),
nfstest_lock(1), nfstest_pkt(1), nfstest_pnfs(1),
nfstest_posix(1), nfstest_sparse(1), nfstest_xid(1),
packet.nfs.nfs3_const(3), packet.nfs.nfs4_const(3),
packet.pktt(3), packet.utils(3)</b></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">No known
bugs.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jorge Mora
(mora@netapp.com)</p>
<hr>
</body>
</html>
