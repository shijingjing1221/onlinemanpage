<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:06:21 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERF&minus;CONFIG</title>

</head>
<body>

<h1 align="center">PERF&minus;CONFIG</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONFIGURATION FILE">CONFIGURATION FILE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perf-config
&minus; Get and set variables in a configuration file.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>perf
config</i> [&lt;file&minus;option&gt;] &minus;l |
&minus;&minus;list</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can manage
variables in a configuration file with this command.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">&minus;l,
&minus;&minus;list</p>

<p style="margin-left:17%;">Show current config variables,
name and value, for all sections.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;user</p>

<p style="margin-left:17%;">For writing and reading
options: write to user <i>$HOME/.perfconfig</i> file or read
it.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;system</p>

<p style="margin-left:17%;">For writing and reading
options: write to system&minus;wide
<i>$(sysconfdir)/perfconfig</i> or read it.</p>

<h2>CONFIGURATION FILE
<a name="CONFIGURATION FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The perf
configuration file contains many variables to change various
aspects of each of its tools, including output, disk usage,
etc. The <i>$HOME/.perfconfig</i> file is used to store a
per&minus;user configuration. The file
<i>$(sysconfdir)/perfconfig</i> can be used to store a
system&minus;wide default configuration.</p>

<p style="margin-left:11%; margin-top: 1em">When reading or
writing, the values are read from the system and user
configuration files by default, and options
<i>&minus;&minus;system</i> and <i>&minus;&minus;user</i>
can be used to tell the command to read from or write to
only that location.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Syntax</b>
<br>
The file consist of sections. A section starts with its name
surrounded by square brackets and continues till the next
section begins. Each variable must be in a section, and have
the form <i>name = value</i>, for example:</p>

<p style="margin-left:17%; margin-top: 1em">[section] <br>
name1 = value1 <br>
name2 = value2</p>

<p style="margin-left:11%; margin-top: 1em">Section names
are case sensitive and can contain any characters except
newline (double quote &quot; and backslash have to be
escaped as \&quot; and \\, respectively). Section headers
can&rsquo;t span multiple lines.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example</b>
<br>
Given a $HOME/.perfconfig like this:</p>

<p style="margin-left:11%; margin-top: 1em"># # This is the
config file, and # a <i>#</i> and <i>;</i> character
indicates a comment #</p>

<p style="margin-left:17%; margin-top: 1em">[colors] <br>
# Color variables <br>
top = red, default <br>
medium = green, default <br>
normal = lightgray, default <br>
selected = white, lightgray <br>
jump_arrows = blue, default <br>
addr = magenta, default <br>
root = white, blue</p>

<p style="margin-left:17%; margin-top: 1em">[tui] <br>
# Defaults if linked with libslang <br>
report = on <br>
annotate = on <br>
top = on</p>

<p style="margin-left:17%; margin-top: 1em">[buildid] <br>
# Default, disable using /dev/null <br>
dir = ~/.debug</p>

<p style="margin-left:17%; margin-top: 1em">[annotate] <br>
# Defaults <br>
hide_src_code = false <br>
use_offset = true <br>
jump_arrows = true <br>
show_nr_jumps = false</p>

<p style="margin-left:17%; margin-top: 1em">[help] <br>
# Format can be man, info, web or html <br>
format = man <br>
autocorrect = 0</p>

<p style="margin-left:17%; margin-top: 1em">[ui] <br>
show&minus;headers = true</p>


<p style="margin-left:17%; margin-top: 1em">[call&minus;graph]
<br>
# fp (framepointer), dwarf <br>
record&minus;mode = fp <br>
print&minus;type = graph <br>
order = caller <br>
sort&minus;key = function</p>


<p style="margin-left:11%; margin-top: 1em"><b>Variables</b>
<br>
colors.*</p>

<p style="margin-left:17%;">The variables for customizing
the colors used in the output for the <i>report</i>,
<i>top</i> and <i>annotate</i> in the TUI. They should
specify the foreground and background colors, separated by a
comma, for example:</p>

<p style="margin-left:23%; margin-top: 1em">medium = green,
lightgray</p>

<p style="margin-left:23%; margin-top: 1em">If you want to
use the color configured for you terminal, just leave it
<br>
as 'default', for example:</p>

<p style="margin-left:23%; margin-top: 1em">medium =
default, lightgray</p>

<p style="margin-left:23%; margin-top: 1em">Available
colors: <br>
red, yellow, green, cyan, gray, black, blue, <br>
white, default, magenta, lightgray</p>

<p style="margin-left:11%; margin-top: 1em">colors.top</p>

<p style="margin-left:17%;"><i>top</i> means a overhead
percentage which is more than 5%. And values of this
variable specify percentage colors. Basic key values are
foreground&minus;color <i>red</i> and background&minus;color
<i>default</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.medium</p>

<p style="margin-left:17%;"><i>medium</i> means a overhead
percentage which has more than 0.5%. Default values are
<i>green</i> and <i>default</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.normal</p>

<p style="margin-left:17%;"><i>normal</i> means the rest of
overhead percentages except <i>top</i>, <i>medium</i>,
<i>selected</i>. Default values are <i>lightgray</i> and
<i>default</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.selected</p>

<p style="margin-left:17%;">This selects the colors for the
current entry in a list of entries from sub&minus;commands
(top, report, annotate). Default values are <i>black</i> and
<i>lightgray</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.jump_arrows</p>

<p style="margin-left:17%;">Colors for jump arrows on
assembly code listings such as <i>jns</i>, <i>jmp</i>,
<i>jane</i>, etc. Default values are <i>blue</i>,
<i>default</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.addr</p>

<p style="margin-left:17%;">This selects colors for
addresses from <i>annotate</i>. Default values are
<i>magenta</i>, <i>default</i>.</p>


<p style="margin-left:11%; margin-top: 1em">colors.root</p>

<p style="margin-left:17%;">Colors for headers in the
output of a sub&minus;commands (top, report). Default values
are <i>white</i>, <i>blue</i>.</p>

<p style="margin-left:11%; margin-top: 1em">tui.<b>,
gtk.</b></p>

<p style="margin-left:17%;">Subcommands that can be
configured here are <i>top</i>, <i>report</i> and
<i>annotate</i>. These values are booleans, for example:</p>

<p style="margin-left:23%; margin-top: 1em">[tui] <br>
top = true</p>

<p style="margin-left:23%; margin-top: 1em">will make the
TUI be the default for the 'top' subcommand. Those will be
<br>
available if the required libs were detected at tool build
time.</p>

<p style="margin-left:11%; margin-top: 1em">buildid.*,
buildid.dir</p>

<p style="margin-left:17%;">Each executable and shared
library in modern distributions comes with a content based
identifier that, if available, will be inserted in a
<i>perf.data</i> file header to, at analysis time find what
is needed to do symbol resolution, code annotation, etc.</p>

<p style="margin-left:23%; margin-top: 1em">The recording
tools also stores a hard link or copy in a per&minus;user
<br>
directory, $HOME/.debug/, of binaries, shared libraries,
/proc/kallsyms <br>
and /proc/kcore files to be used at analysis time.</p>

<p style="margin-left:23%; margin-top: 1em">The buildid.dir
variable can be used to either change this directory <br>
cache location, or to disable it altogether. If you want to
disable it, <br>
set buildid.dir to /dev/null. The default is
$HOME/.debug</p>

<p style="margin-left:11%; margin-top: 1em">annotate.*</p>

<p style="margin-left:17%;">These options work only for
TUI. These are in control of addresses, jump function,
source code in lines of assembly code from a specific
program.</p>


<p style="margin-left:11%; margin-top: 1em">annotate.hide_src_code</p>

<p style="margin-left:17%;">If a program which is analyzed
has source code, this option lets <i>annotate</i> print a
list of assembly code with the source code. For example,
let&rsquo;s see a part of a program. There&rsquo;re four
lines. If this option is <i>true</i>, they can be printed
without source code from a program as below.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474; push
%rbp <br>
&#9474; mov %rsp,%rbp <br>
&#9474; sub $0x10,%rsp <br>
&#9474; mov (%rdi),%rdx</p>

<p style="margin-left:23%; margin-top: 1em">But if this
option is 'false', source code of the part <br>
can be also printed as below. Default is 'false'.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474; struct
rb_node *rb_next(const struct rb_node *node) <br>
&#9474; { <br>
&#9474; push %rbp <br>
&#9474; mov %rsp,%rbp <br>
&#9474; sub $0x10,%rsp <br>
&#9474; struct rb_node *parent; <br>
&#9474; <br>
&#9474; if (RB_EMPTY_NODE(node)) <br>
&#9474; mov (%rdi),%rdx <br>
&#9474; return n;</p>


<p style="margin-left:11%; margin-top: 1em">annotate.use_offset</p>

<p style="margin-left:17%;">Basing on a first address of a
loaded function, offset can be used. Instead of using
original addresses of assembly code, addresses subtracted
from a base address can be printed. Let&rsquo;s illustrate
an example. If a base address is 0XFFFFFFFF81624d50 as
below,</p>


<p style="margin-left:23%; margin-top: 1em">ffffffff81624d50
&lt;load0&gt;</p>

<p style="margin-left:23%; margin-top: 1em">an address on
assembly code has a specific absolute address as below</p>


<p style="margin-left:23%; margin-top: 1em">ffffffff816250b8:&#9474;
mov 0x8(%r14),%rdi</p>

<p style="margin-left:23%; margin-top: 1em">but if
use_offset is 'true', an address subtracted from a base
address is printed. <br>
Default is true. This option is only applied to TUI.</p>

<p style="margin-left:23%; margin-top: 1em">368:&#9474; mov
0x8(%r14),%rdi</p>


<p style="margin-left:11%; margin-top: 1em">annotate.jump_arrows</p>

<p style="margin-left:17%;">There can be jump instruction
among assembly code. Depending on a boolean value of
jump_arrows, arrows can be printed or not which represent
where do the instruction jump into as below.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474;
&#9484;&#9472;&#9472;jmp 1333 <br>
&#9474; &#9474; xchg %ax,%ax <br>
&#9474;1330:&#9474; mov %r15,%r10 <br>
&#9474;1333:&#9492;&#9472;&rarr;cmp %r15,%r14</p>

<p style="margin-left:23%; margin-top: 1em">If jump_arrow
is 'false', the arrows isn't printed as below. <br>
Default is 'false'.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474; &darr;
jmp 1333 <br>
&#9474; xchg %ax,%ax <br>
&#9474;1330: mov %r15,%r10 <br>
&#9474;1333: cmp %r15,%r14</p>


<p style="margin-left:11%; margin-top: 1em">annotate.show_linenr</p>

<p style="margin-left:17%;">When showing source code if
this option is <i>true</i>, line numbers are printed as
below.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474;1628 if
(type &amp; PERF_SAMPLE_IDENTIFIER) { <br>
&#9474; &darr; jne 508 <br>
&#9474;1628 data&minus;&gt;id = *array; <br>
&#9474;1629 array++; <br>
&#9474;1630 }</p>

<p style="margin-left:23%; margin-top: 1em">However if this
option is 'false', they aren't printed as below. <br>
Default is 'false'.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474; if
(type &amp; PERF_SAMPLE_IDENTIFIER) { <br>
&#9474; &darr; jne 508 <br>
&#9474; data&minus;&gt;id = *array; <br>
&#9474; array++; <br>
&#9474; }</p>


<p style="margin-left:11%; margin-top: 1em">annotate.show_nr_jumps</p>

<p style="margin-left:17%;">Let&rsquo;s see a part of
assembly code.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474;1382:
movb $0x1,&minus;0x270(%rbp)</p>

<p style="margin-left:23%; margin-top: 1em">If use this,
the number of branches jumping to that address can be
printed as below. <br>
Default is 'false'.</p>

<p style="margin-left:23%; margin-top: 1em">&#9474;1 1382:
movb $0x1,&minus;0x270(%rbp)</p>


<p style="margin-left:11%; margin-top: 1em">annotate.show_total_period</p>

<p style="margin-left:17%;">To compare two records on an
instruction base, with this option provided, display total
number of samples that belong to a line in assembly code. If
this option is <i>true</i>, total periods are printed
instead of percent values as below.</p>

<p style="margin-left:23%; margin-top: 1em">302 &#9474; mov
%eax,%eax</p>

<p style="margin-left:23%; margin-top: 1em">But if this
option is 'false', percent values for overhead are printed
i.e. <br>
Default is 'false'.</p>

<p style="margin-left:23%; margin-top: 1em">99.93 &#9474;
mov %eax,%eax</p>

<p style="margin-left:11%; margin-top: 1em">hist.*,
hist.percentage</p>

<p style="margin-left:17%;">This option control the way to
calculate overhead of filtered entries &minus; that means
the value of this option is effective only if there&rsquo;s
a filter (by comm, dso or symbol name). Suppose a following
example:</p>

<p style="margin-left:23%; margin-top: 1em">Overhead
Symbols <br>
........ ....... <br>
33.33% foo <br>
33.33% bar <br>
33.33% baz</p>

<p style="margin-left:23%; margin-top: 1em">This is an
original overhead and we'll filter out the first 'foo' <br>
entry. The value of 'relative' would increase the overhead
of 'bar' <br>
and 'baz' to 50.00% for each, while 'absolute' would show
their <br>
current overhead (33.33%).</p>

<p style="margin-left:11%; margin-top: 1em">ui.*,
ui.show&minus;headers</p>

<p style="margin-left:17%;">This option controls display of
column headers (like <i>Overhead</i> and <i>Symbol</i>) in
<i>report</i> and <i>top</i>. If this option is false, they
are hidden. This option is only applied to TUI.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.*</p>

<p style="margin-left:17%;">When sub&minus;commands
<i>top</i> and <i>report</i> work with
&minus;g/&mdash;&minus;children there&rsquo;re options in
control of call&minus;graph.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.record&minus;mode</p>

<p style="margin-left:17%;">The record&minus;mode can be
<i>fp</i> (frame pointer), <i>dwarf</i> and <i>lbr</i>. The
value of <i>dwarf</i> is effective only if perf detect
needed library (libunwind or a recent version of libdw).
<i>lbr</i> only work for cpus that support it.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.dump&minus;size</p>

<p style="margin-left:17%;">The size of stack to dump in
order to do post&minus;unwinding. Default is 8192 (byte).
When using dwarf into record&minus;mode, the default size
will be used if omitted.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.print&minus;type</p>

<p style="margin-left:17%;">The print&minus;types can be
graph (graph absolute), fractal (graph relative), flat and
folded. This option controls a way to show overhead for each
callchain entry. Suppose a following example.</p>

<p style="margin-left:23%; margin-top: 1em">Overhead
Symbols <br>
........ ....... <br>
40.00% foo <br>
| <br>
&minus;&minus;&minus;foo <br>
| <br>
|&minus;&minus;50.00%&minus;&minus;bar <br>
| main <br>
| <br>
&minus;&minus;50.00%&minus;&minus;baz <br>
main</p>

<p style="margin-left:23%; margin-top: 1em">This output is
a 'fractal' format. The 'foo' came from 'bar' and 'baz'
exactly <br>
half and half so 'fractal' shows 50.00% for each <br>
(meaning that it assumes 100% total overhead of 'foo').</p>

<p style="margin-left:23%; margin-top: 1em">The 'graph'
uses absolute overhead value of 'foo' as total so each of
<br>
'bar' and 'baz' callchain will have 20.00% of overhead. <br>
If 'flat' is used, single column and linear exposure of call
chains. <br>
'folded' mean call chains are displayed in a line, separated
by semicolons.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.order</p>

<p style="margin-left:17%;">This option controls print
order of callchains. The default is <i>callee</i> which
means callee is printed at top and then followed by its
caller and so on. The <i>caller</i> prints it in reverse
order.</p>

<p style="margin-left:23%; margin-top: 1em">If this option
is not set and report.children or top.children is <br>
set to true (or the equivalent command line option is
given), <br>
the default value of this option is changed to 'caller' for
the <br>
execution of 'perf report' or 'perf top'. Other commands
will <br>
still default to 'callee'.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.sort&minus;key</p>

<p style="margin-left:17%;">The callchains are merged if
they contain same information. The sort&minus;key option
determines a way to compare the callchains. A value of
<i>sort&minus;key</i> can be <i>function</i> or
<i>address</i>. The default is <i>function</i>.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.threshold</p>

<p style="margin-left:17%;">When there&rsquo;re many
callchains it&rsquo;d print tons of lines. So perf omits
small callchains under a certain overhead (threshold) and
this option control the threshold. Default is 0.5 (%). The
overhead is calculated by value depends on
call&minus;graph.print&minus;type.</p>


<p style="margin-left:11%; margin-top: 1em">call&minus;graph.print&minus;limit</p>

<p style="margin-left:17%;">This is a maximum number of
lines of callchain printed for a single histogram entry.
Default is 0 which means no limitation.</p>

<p style="margin-left:11%; margin-top: 1em">report.*,
report.percent&minus;limit</p>

<p style="margin-left:17%;">This one is mostly the same as
call&minus;graph.threshold but works for histogram entries.
Entries having an overhead lower than this percentage will
not be printed. Default is <i>0</i>. If percent&minus;limit
is <i>10</i>, only entries which have more than 10% of
overhead will be printed.</p>


<p style="margin-left:11%; margin-top: 1em">report.queue&minus;size</p>

<p style="margin-left:17%;">This option sets up the maximum
allocation size of the internal event queue for ordering
events. Default is 0, meaning no limit.</p>


<p style="margin-left:11%; margin-top: 1em">report.children</p>

<p style="margin-left:17%;"><i>Children</i> means functions
called from another function. If this option is true,
<i>perf report</i> cumulates callchains of children and show
(accumulated) total overhead as well as <i>Self</i>
overhead. Please refer to the <i>perf report</i> manual. The
default is <i>true</i>.</p>


<p style="margin-left:11%; margin-top: 1em">report.group</p>

<p style="margin-left:17%;">This option is to show event
group information together. Example output with this turned
on, notice that there is one column per event in the group,
ref&minus;cycles and cycles:</p>

<p style="margin-left:23%; margin-top: 1em"># group:
{ref&minus;cycles,cycles} <br>
# ======== <br>
# <br>
# Samples: 7K of event 'anon group { ref&minus;cycles,
cycles }' <br>
# Event count (approx.): 6876107743 <br>
# <br>
# Overhead Command Shared Object Symbol <br>
# ................ ....... .................
................... <br>
# <br>
99.84% 99.76% noploop noploop [.] main <br>
0.07% 0.00% noploop ld&minus;2.15.so [.] strcmp <br>
0.03% 0.00% noploop [kernel.kallsyms] [k] timerqueue_del</p>

<p style="margin-left:11%; margin-top: 1em">top.*,
top.children</p>

<p style="margin-left:17%;">Same as <i>report.children</i>.
So if it is enabled, the output of <i>top</i> command will
have <i>Children</i> overhead column as well as <i>Self</i>
overhead column by default. The default is <i>true</i>.</p>

<p style="margin-left:11%; margin-top: 1em">man.*,
man.viewer</p>

<p style="margin-left:17%;">This option can assign a tool
to view manual pages when <i>help</i> subcommand was
invoked. Supported tools are <i>man</i>, <i>woman</i> (with
emacs client) and <i>konqueror</i>. Default is
<i>man</i>.</p>

<p style="margin-left:23%; margin-top: 1em">New man viewer
tool can be also added using 'man.&lt;tool&gt;.cmd' <br>
or use different path using 'man.&lt;tool&gt;.path' config
option.</p>

<p style="margin-left:11%; margin-top: 1em">pager.*,
pager.&lt;subcommand&gt;</p>

<p style="margin-left:17%;">When the subcommand is run on
stdio, determine whether it uses pager or not based on this
value. Default is <i>unspecified</i>.</p>

<p style="margin-left:11%; margin-top: 1em">kmem.*,
kmem.default</p>

<p style="margin-left:17%;">This option decides which
allocator is to be analyzed if neither
<i>&minus;&minus;slab</i> nor <i>&minus;&minus;page</i>
option is used. Default is <i>slab</i>.</p>

<p style="margin-left:11%; margin-top: 1em">record.*,
record.build&minus;id</p>

<p style="margin-left:17%;">This option can be
<i>cache</i>, <i>no&minus;cache</i> or <i>skip</i>.
<i>cache</i> is to post&minus;process data and save/update
the binaries into the build&minus;id cache (in ~/.debug).
This is the default. But if this option is
<i>no&minus;cache</i>, it will not update the build&minus;id
cache. <i>skip</i> skips post&minus;processing and does not
update the cache.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>perf</b>(1)</p>
<hr>
</body>
</html>
