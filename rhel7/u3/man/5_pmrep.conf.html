<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:10:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PMREP.CONF</title>

</head>
<body>

<h1 align="center">PMREP.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#FILE FORMAT">FILE FORMAT</a><br>
<a href="#SPECIAL SECTIONS">SPECIAL SECTIONS</a><br>
<a href="#CUSTOM SECTIONS">CUSTOM SECTIONS</a><br>
<a href="#METRICSET SPECIFICATION">METRICSET SPECIFICATION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pmrep.conf</b>
&minus; pmrep configuration file</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pmrep</b> is
a customizable performance metrics reporting tool. Any
available performance metric, live or archived, system
and/or application, can be selected for reporting using one
of the available output alternatives together with
applicable formatting options.</p>

<p style="margin-left:11%; margin-top: 1em">The metrics of
interest are named in the <i>metricspec</i> argument(s) on
the <b>pmrep</b> command line. These metricspecs define
individual metrics or pre-defined performance metric sets to
be read from the configuration file described below. For
command line argument details see <b>pmrep</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>pmrep.conf</b> configuration file allows setting default
runtime values and defining any number of custom
<i>metricsets</i> for <b>pmrep</b>. A metricset is a
user-defined set of arbitrary performance metrics. This
allows the user to create specifically crafted metricsets
particularly relevant for their application or environment.
Instead of being dependent on what existing tools provide or
collecting the needed data with several disjoint utilities
the user can create and modify custom metricsets by editing
<b>pmrep.conf</b>. See below for the <i>metricset</i>
specification.</p>

<p style="margin-left:11%; margin-top: 1em">Configuration
file parameters override the corresponding built-in default
values (if any). Command line parameters override the
corresponding configuration file parameters (if any).</p>

<h2>FILE FORMAT
<a name="FILE FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The file has an
ini-style syntax and consists of sections and parameters. A
section begins with the name of the section in square
brackets and continues until the next section begins. An
example section with two parameters follows:</p>

<p style="margin-left:17%; margin-top: 1em"><i>[section]
<br>
key</i> = <i>value <br>
key2</i> = <i>value2</i></p>

<p style="margin-left:11%; margin-top: 1em">The data types
used are string (no quotes needed), integer, and bool (with
values of <i>yes</i> or <i>no</i>).</p>

<p style="margin-left:11%; margin-top: 1em">A line comment
starts with a hash sign (&lsquo;&lsquo;#&rsquo;&rsquo;) or a
semicolon (&lsquo;&lsquo;;&rsquo;&rsquo;). Inline comments
are not supported.</p>


<p style="margin-left:11%; margin-top: 1em"><b>pmrep.conf</b>
must be readable by the user invoking <b>pmrep</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Any parameter
described below with a corresponding command line parameter
contains additional description in <b>pmrep</b>(1).</p>

<h2>SPECIAL SECTIONS
<a name="SPECIAL SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>The
[options] section</b> <br>
The <b>[options]</b> section is read every time <b>pmrep</b>
is run and it defines the default runtime values (which may
be overridden by the corresponding command line options).
Metric specifications are not allowed in this section.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Section
parameters</b></p>

<p style="margin-left:11%; margin-top: 1em">version
(integer)</p>

<p style="margin-left:17%;">Indicates the configuration
file version. Defaults to <b>1</b>. The only currently
supported value is <b>1</b>.</p>

<p style="margin-left:11%; margin-top: 1em">source
(string)</p>

<p style="margin-left:17%;">Indicates the source for
metrics. Interpreted as a PCP archive if the string contains
a slash (&lsquo;&lsquo;/&rsquo;&rsquo;), otherwise
interpreted as a hostname. Corresponding command line
paraters are <b>-a</b> and <b>-h</b>. Defaults to
<b>local:</b> (see <b>PCPIntro</b>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">output
(string)</p>

<p style="margin-left:17%;">Indicates the output target.
Corresponding command line parameter is <b>-o</b>. For
supported output targets, see <b>pmrep</b>(1). Defaults to
<b>stdout</b>.</p>

<p style="margin-left:11%; margin-top: 1em">derived
(string)</p>

<p style="margin-left:17%;">Derived metric specifications.
Corresponding command line parameter is <b>-e</b>. For
syntax description, see <b>pmrep</b>(1). Undefined by
default.</p>

<p style="margin-left:11%; margin-top: 1em">header
(bool)</p>

<p style="margin-left:17%;">Indicates whether to print
headers. Corresponding command line parameter is <b>-H</b>.
Defaults to <b>yes</b>.</p>

<p style="margin-left:11%; margin-top: 1em">unitinfo
(bool)</p>

<p style="margin-left:17%;">Indicates whether to include
unit information as part of headers. Corresponding command
line parameter is <b>-U</b>. Defaults to <b>yes</b>.</p>

<p style="margin-left:11%; margin-top: 1em">globals
(bool)</p>

<p style="margin-left:17%;">Indicates whether to include
metrics from the <b>[global]</b> section (see below) for
reporting. Corresponding command line parameter is
<b>-G</b>. Defaults to <b>yes</b>.</p>

<p style="margin-left:11%; margin-top: 1em">timestamp
(bool)</p>

<p style="margin-left:17%;">Indicates whether to print the
timestamp. Corresponding command line parameter is
<b>-p</b>. Defaults to <b>no</b>.</p>

<p style="margin-left:11%; margin-top: 1em">samples
(integer)</p>

<p style="margin-left:17%;">Indicates the number of samples
to print. Corresponding command line parameter is <b>-s</b>.
Undefined by default (meaning unlimited number of samples if
not limited by other options).</p>

<p style="margin-left:11%; margin-top: 1em">interval
(string)</p>

<p style="margin-left:17%;">Indicates the interval between
samples. Corresponding command line parameter is <b>-o</b>.
Follows the time syntax described in <b>PCPIntro</b>(1).
Defaults to <b>1s</b>.</p>

<p style="margin-left:11%; margin-top: 1em">delay
(bool)</p>

<p style="margin-left:17%;">Indicates whether to pause
between samples when replaying from an archive rather than
replaying at full speed. Corresponding command line
parameter is <b>-d</b>. Defaults to <b>no</b>.</p>

<p style="margin-left:11%; margin-top: 1em">type
(string)</p>

<p style="margin-left:17%;">Indicates whether to output raw
metric values by disabling all rate conversions or convert
cumulative counters to rates (default). Corresponding
command line parameter is <b>-r</b>. Allowed values are
<b>default</b> or <b>raw</b>.</p>

<p style="margin-left:11%; margin-top: 1em">width
(integer)</p>

<p style="margin-left:17%;">Indicates the width of stdout
output columns. Corresponding command line parameter is
<b>-w</b>. Forced minimum is <b>3</b>. Defaults to the
shortest width that can fit the metric label.</p>

<p style="margin-left:11%; margin-top: 1em">precision
(integer)</p>

<p style="margin-left:17%;">Indicates how many decimals to
use for numeric non-integer output values. Corresponding
command line parameter is <b>-P</b>. Defaults to
<b>3</b>.</p>

<p style="margin-left:11%; margin-top: 1em">delimiter
(string)</p>

<p style="margin-left:17%;">Indicates the column separator.
Corresponding command line parameter is <b>-l</b>. Default
depends on the output target, see <b>pmrep</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">extheader
(bool)</p>

<p style="margin-left:17%;">Indicates whether to print
extended header. Corresponding command line parameter is
<b>-x</b>. Defaults to <b>no</b>.</p>

<p style="margin-left:11%; margin-top: 1em">repeat_header
(integer)</p>

<p style="margin-left:17%;">Indicates how often to repeat
the header. Corresponding command line parameter is
<b>-E</b>. Defaults to <b>0</b>.</p>

<p style="margin-left:11%; margin-top: 1em">timefmt
(string)</p>

<p style="margin-left:17%;">Indicates the format string for
formatting the timestamp. Corresponding command line
parameter is <b>-f</b>. Defaults to <b>%H:%M:%S</b>.</p>

<p style="margin-left:11%; margin-top: 1em">interpol
(bool)</p>

<p style="margin-left:17%;">Indicates whether to
interpolate reported archive values. Corresponding command
line parameter is <b>-u</b>. See <b>pmrep</b>(1) for
complete description. Defaults to <b>yes</b>.</p>

<p style="margin-left:11%; margin-top: 1em">count_scale
(string)</p>

<p style="margin-left:17%;">Indicates the unit/scale for
counter metrics. Corresponding command line parameter is
<b>-q</b>. For supported syntax, see <b>pmrep</b>(1).
Undefined (no scaling) by default.</p>

<p style="margin-left:11%; margin-top: 1em">space_scale
(string)</p>

<p style="margin-left:17%;">Indicates the unit/scale for
space metrics. Corresponding command line parameter is
<b>-b</b>. For supported syntax, see <b>pmrep</b>(1).
Undefined (no scaling) by default.</p>

<p style="margin-left:11%; margin-top: 1em">time_scale
(string)</p>

<p style="margin-left:17%;">Indicates the unit/scale for
time metrics. Corresponding command line parameter is
<b>-y</b>. For supported syntax, see <b>pmrep</b>(1).
Undefined (no scaling) by default.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Output
target specific parameters</b></p>

<p style="margin-left:17%; margin-top: 1em">The following
parameters are also accepted in the <b>[options]</b> section
but are typically used only in custom sections as they are
applicable only to certain output targets.</p>

<p style="margin-left:11%; margin-top: 1em">zabbix_server
(string) (zabbix output target only)</p>

<p style="margin-left:17%;">Hostname or IP address of
Zabbix server to send the metrics to. If a host is monitored
by a proxy, proxy hostname or IP address should be used
instead. Undefined by default.</p>

<p style="margin-left:11%; margin-top: 1em">zabbix_port
(integer) (zabbix output target only)</p>

<p style="margin-left:17%;">Specify port number of server
trapper running on the server. Default is <b>10051</b>.</p>

<p style="margin-left:11%; margin-top: 1em">zabbix_host
(string) (zabbix output target only)</p>

<p style="margin-left:17%;">Specify agent hostname as
registered in Zabbix frontend. Host IP address and DNS name
will not work. Undefined by default.</p>


<p style="margin-left:11%; margin-top: 1em">zabbix_interval
(string) (zabbix output target only)</p>

<p style="margin-left:17%;">Indicates the interval to send
the metrics to the Zabbix server. This can be longer than
the generic <i>interval</i> to minimize the overhead when
communicating with the server (as each send creates a new
connection). Follows the time syntax described in
<b>PCPIntro</b>(1). Defaults to the generic <i>interval</i>.
Zabbix tools send at most 250 metrics at a time. Ignored
when reading metrics from PCP archives, in which case
metrics will be sent roughly at 250 metric batches.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The [global]
section</b> <br>
The <b>[global]</b> section is used to define metrics that
will be reported in addition to any other separately defined
metrics or metricsets. Configuration parameters are not
allowed in this section. Global metrics are reported by
default, the command line option <b>-G</b> or the
configuration file parameter <b>globals</b> can be used to
disable global metrics.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Section
parameters</b></p>

<p style="margin-left:17%; margin-top: 1em">No predefined
parameters, only <i>metricspecs</i> allowed in this section.
See below for the metricspec specification.</p>

<h2>CUSTOM SECTIONS
<a name="CUSTOM SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Any other
section than <b>[options]</b> or <b>[global]</b> will be
interpreted as a new <i>metricset</i> specification. The
section name is arbitrary, typically a reference to its
coverage or purpose. A custom section can contain options,
metricspecs, or both.</p>

<p style="margin-left:11%; margin-top: 1em">All the metrics
specified in a custom section will be reported when
<b>pmrep</b> is instructed to use the particular custom
section. <b>pmrep</b> can be executed with more than one
custom section (i.e., metricset) defined in which case the
combination of all the metrics specified in them will be
reported.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Section
parameters</b></p>

<p style="margin-left:17%; margin-top: 1em">Any option
valid in the <b>[options]</b> section is also valid in a
custom section. Any option or metric defined in the custom
section will override the same option or metric possibly
defined earlier in the <b>[options]</b> section. See below
for the metricspec specification.</p>

<h2>METRICSET SPECIFICATION
<a name="METRICSET SPECIFICATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are three
forms of the <i>metricspec</i>. First, on the command line a
metricspec can start with a colon
(&lsquo;&lsquo;:&rsquo;&rsquo;) to indicate a reference to a
<i>metricset</i> to be read from the <b>pmrep</b>
configuration file. Second, the <i>compact form</i> of a
metricspec is a one-line metric specification which can be
used both on the command line and in the <b>[global]</b> and
custom sections of the configuration file. The only
difference of its usage in the configuration file is that
the metric name is used as the key and the optional
specifiers as values. The compact form of the metricspec is
specified in detail in <b>pmrep</b>(1). The third,
<i>verbose form</i> of a metricspec is valid only in the
configuration file.</p>

<p style="margin-left:11%; margin-top: 1em">A key
containing a dot (&lsquo;&lsquo;.&rsquo;&rsquo;) is
interpreted as a metric name (see above), a non-option key
not containing a dot is interpreted as an identifier (see
below).</p>

<p style="margin-left:11%; margin-top: 1em">The verbose
form of a metricspec starts with a declaration consisting of
a mandatory <i>identifier</i> as the key and the actual
performance metric name (a PMNS leaf node) as its value.
This equals to the compact form of the metricspec defining
the same performance metric without any of optional
specifiers defined. The identifier is arbitrary and is not
used otherwise except for binding the below specifiers and
the metric together.</p>

<p style="margin-left:11%; margin-top: 1em">The following
specifiers are optional in the verbose form and can be used
as keys in any order with an earlier declared identifier
followed by a dot and the specifier (as in
<i>identifier</i>.<i>specifier</i>):</p>

<p style="margin-left:22%;"><i>label</i></p>

<p style="margin-left:25%;">Defines a text label for the
metric used by supporting output targets.</p>

<p style="margin-left:22%;"><i>formula</i></p>

<p style="margin-left:25%;">Defines the needed arithmetic
expression for the metric. For details see
<b>pmRegisterDerived</b>(3).</p>

<p style="margin-left:22%;"><i>instance</i></p>

<p style="margin-left:25%;">This specifier is currently
recognized but not implemented.</p>

<p style="margin-left:22%;"><i>unit</i></p>

<p style="margin-left:25%;">Defines the unit/scale
conversion for the metric. Needs to be dimension-compatible
and is used with non-string and (currently) non-raw metrics.
For allowed values, see <b>pmrep</b>(1).</p>

<p style="margin-left:22%;"><i>type</i></p>

<p style="margin-left:25%;">If set to <b>raw</b> rate
conversion for the metric will be disabled.</p>

<p style="margin-left:22%;"><i>width</i></p>

<p style="margin-left:25%;">Defines the width of the output
column for the metric.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example contains a short <b>[options]</b> section setting
some locally wanted default values. It then goes on to
define the global metrics <b>kernel.all.sysfork</b> using
the <i>compact form</i> and <b>mem.util.allcache</b> using
the <i>verbose form</i> of a metricspec. The latter is a
derived metric using the later specified formula. Both of
these metrics will be included in reporting unless disabled
with <b>-G</b> or <b>globals = no</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Three different
<i>metricsets</i> are also specified: <b>db1</b>,
<b>db2</b>, and <b>sar-w</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The DB sets
define a host to be used as the source for the metrics. Both
use the <i>verbose form</i> of a metricspec (as the
non-option key <b>set</b> does not contain the dot) to
include all <b>postgresql</b> related metrics.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>sar-w</b> set is an example how to mimic an existing tool
with <b>pmrep</b>.</p>

<p style="margin-left:17%; margin-top: 1em">[options] <br>
timestamp = yes <br>
interval = 2s <br>
extheader = yes <br>
repeat_header = 20 <br>
space_scale = MB</p>

<p style="margin-left:17%; margin-top: 1em">[global] <br>
kernel.all.sysfork = forks,,,,8 <br>
allcache = mem.util.allcache <br>
allcache.formula = mem.util.bufmem + mem.util.cached +
mem.util.slab</p>

<p style="margin-left:17%; margin-top: 1em">[db1] <br>
source = db-host1.example.com <br>
set = postgresql</p>

<p style="margin-left:17%; margin-top: 1em">[db2] <br>
source = db-host2.example.com <br>
set = postgresql</p>

<p style="margin-left:17%; margin-top: 1em">[sar-w] <br>
header = yes <br>
unitinfo = no <br>
globals = no <br>
timestamp = yes <br>
interval = 1s <br>
extheader = no <br>
precision = 2 <br>
sysfork = kernel.all.sysfork <br>
sysfork.label = proc/s <br>
sysfork.width = 11 <br>
pswitch = kernel.all.pswitch <br>
pswitch.label = cswch/s <br>
pswitch.width = 8</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>./pmrep.conf</b></p>

<p style="margin-left:26%;">Default configuration file.</p>


<p style="margin-left:11%;"><b>/etc/pcp/pmrep/pmrep.conf</b></p>

<p style="margin-left:26%;">Example configuration file.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>PCPIntro</b>(1),
<b>pmrep</b>(1), <b>pmRegisterDerived</b>(3) and
<b>zbxpcp</b>(3).</p>
<hr>
</body>
</html>
