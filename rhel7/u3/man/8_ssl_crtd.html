<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:32:49 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ssl_crtd</title>

</head>
<body>

<h1 align="center">ssl_crtd</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#KNOWN ISSUES">KNOWN ISSUES</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#QUESTIONS">QUESTIONS</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ssl_crtd
&minus; SSL certificate generator for Squid.</p>

<p style="margin-left:11%; margin-top: 1em">Version 1.0</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ssl_crtd
[&minus;dhv] ssl_crtd [&minus;d] -s</b> directory
<b>[&minus;M</b> size <b>] ssl_crtd [&minus;d] &minus;c
&minus;s</b> directory <b>[&minus;n]</b> serial number
<b>ssl_crtd [&minus;d] &minus;g &minus;s</b> directory</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ssl_crtd</b>
is an installed binary.</p>

<p style="margin-left:11%; margin-top: 1em">Because the
generation and signing of SSL certificates takes time Squid
must use external process to handle the work. This process
generates new SSL certificates and uses a disk cache of
certificatess to improve response times on repeated
requests. Communication occurs via TCP sockets bound to the
loopback interface.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;b
fs_block_size</b></p>

<p style="margin-left:29%;">File system block size in
bytes. Needed for processing natural size of certificate on
disk. Default value is 2048 bytes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="15%"></td>
<td width="71%">


<p>Initialize the SSL storage database and exit. Requires
the <b>-s</b> option to determine the storage location being
created.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="15%"></td>
<td width="71%">


<p>Write debug info to stderr.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;g</b></p></td>
<td width="15%"></td>
<td width="71%">


<p>Display the current serial number using stderr and exit.
Requires <b>&minus;s</b> option to determine which storage
directory the serial is located in.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="15%"></td>
<td width="71%">


<p>Display the binary help and command line syntax info
using stderr.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;s directory</b></p>

<p style="margin-left:29%;">Directory path of disk storage
for new SSL certificates.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>&minus;M size</b></p></td>
<td width="7%"></td>
<td width="69%">


<p>Maximum size of SSL certificate disk storage.</p></td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;n serial
number</b></p>

<p style="margin-left:29%;">HEX <b>serial number</b> to use
when initializing an SSL storage database. The default value
of serial number is the number of seconds since Epoch minus
1200000000.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="15%"></td>
<td width="71%">


<p>Display the binary version details using stderr.</p></td></tr>
</table>

<h2>KNOWN ISSUES
<a name="KNOWN ISSUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>SSL errors
after changing the CA</b></p>

<p style="margin-left:11%; margin-top: 1em">Certificates
are stored in this database in signed form. After any change
to the signing CA in squid.conf be sure to erase and
re-initialize the certificate database.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Certificate
chaining</b></p>

<p style="margin-left:11%; margin-top: 1em">The version 1.0
of this helper will not add chained intermediate CA
certificates. The client must have a full chain of trust
from the root CA all the way down to the end certificate
generated by this program. Signing with an intermediate CA
needs to install both the root and the intermediate public
CA on the clients.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Before this
helper can be used the storage area for new certificates
must be initialized manually. This is done from the command
line using the <b>&minus;c</b> parameters.</p>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<p style="margin-left:22%;"><b>ssl_crtd -c -s
/var/lib/ssl_db</b></p>

<p style="margin-left:11%; margin-top: 1em">Certificates
are stored in this database in signed form. After any change
to the signing CA in squid.conf be sure to erase and
re-initialize the certificate database.</p>

<p style="margin-left:11%; margin-top: 1em">For simple
configuration the helper defaults can be used. Only HTTP
listening port options are required to enable generation and
set the signign CA certificate. For Example:</p>

<p style="margin-left:22%;"><b>http_port 3128 ssl-bump
generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB
cert=/usr/local/squid/ssl_cert/www.sample.com.pem</b></p>

<p style="margin-left:11%; margin-top: 1em">For more
customized configuration the helper certificate storage
directory location and size can be altered with the
<b>sslcrtd_program</b> configuration directive. For
example:</p>

<p style="margin-left:22%;"><b>sslcrtd_program
/usr/local/squid/libexec/ssl_crtd -s
/usr/local/squid/var/lib/ssl_db -M 4MB sslcrtd_children
5</b></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program
was written by <i>Christos Tsantilas
&lt;christos@chtsanti.net&gt;</i></p>

<p style="margin-left:11%; margin-top: 1em">This manual was
written by <i>Christos Tsantilas
&lt;christos@chtsanti.net&gt; Amos Jeffries
&lt;squid3@treenet.co.nz&gt;</i></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">* Copyright (C)
1996-2016 The Squid Software Foundation and contributors
<br>
* <br>
* Squid software is distributed under GPLv2+ license and
includes <br>
* contributions from numerous individuals and organizations.
<br>
* Please see the COPYING and CONTRIBUTORS files for
details.</p>

<h2>QUESTIONS
<a name="QUESTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Questions on
the usage of this program can be sent to the <i>Squid Users
mailing list</i> &lt;squid-users@squid-cache.org&gt;</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Bug reports
need to be made in English. See
http://wiki.squid-cache.org/SquidFaq/BugReporting for
details of what you need to include with your bug
report.</p>

<p style="margin-left:11%; margin-top: 1em">Report bugs or
bug fixes using http://bugs.squid-cache.org/</p>

<p style="margin-left:11%; margin-top: 1em">Report serious
security bugs to <i>Squid Bugs
&lt;squid-bugs@squid-cache.org&gt;</i></p>

<p style="margin-left:11%; margin-top: 1em">Report ideas
for new improvements to the <i>Squid Developers mailing
list</i> &lt;squid-dev@squid-cache.org&gt;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>squid</b>(8),
<b>GPL</b>(7), <br>
The Squid FAQ wiki http://wiki.squid-cache.org/SquidFaq <br>
The Squid Configuration Manual
http://www.squid-cache.org/Doc/config/</p>
<hr>
</body>
</html>
