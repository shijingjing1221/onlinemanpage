<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:39:38 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>guestfs-release-notes</title>

</head>
<body>

<h1 align="center">guestfs-release-notes</h1>

<a href="#NAME">NAME</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.32">RELEASE NOTES FOR LIBGUESTFS 1.32</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.30">RELEASE NOTES FOR LIBGUESTFS 1.30</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.28">RELEASE NOTES FOR LIBGUESTFS 1.28</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.26">RELEASE NOTES FOR LIBGUESTFS 1.26</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.24">RELEASE NOTES FOR LIBGUESTFS 1.24</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.22">RELEASE NOTES FOR LIBGUESTFS 1.22</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.20">RELEASE NOTES FOR LIBGUESTFS 1.20</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.18">RELEASE NOTES FOR LIBGUESTFS 1.18</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.16">RELEASE NOTES FOR LIBGUESTFS 1.16</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.14">RELEASE NOTES FOR LIBGUESTFS 1.14</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.12">RELEASE NOTES FOR LIBGUESTFS 1.12</a><br>
<a href="#Release notes for libguestfs 1.10.0">Release notes for libguestfs 1.10.0</a><br>
<a href="#Release notes for libguestfs 1.8">Release notes for libguestfs 1.8</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.6">RELEASE NOTES FOR LIBGUESTFS 1.6</a><br>
<a href="#RELEASE NOTES FOR LIBGUESTFS 1.4">RELEASE NOTES FOR LIBGUESTFS 1.4</a><br>
<a href="#RELEASE NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS">RELEASE NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#LICENSE">LICENSE</a><br>
<a href="#BUGS">BUGS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">guestfs&minus;release&minus;notes
&minus; libguestfs Release Notes</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.32
<a name="RELEASE NOTES FOR LIBGUESTFS 1.32"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.30.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
New tools</i></p>

<p style="margin-left:11%; margin-top: 1em">The new
<i>virt&minus;v2v&minus;copy&minus;to&minus;local</i>(1)
tool is an ancillary tool for <i>virt&minus;v2v</i>(1)
allowing you to convert source guests that virt&minus;v2v is
unable to access directly.</p>

<p style="margin-left:11%; margin-top: 1em"><i>New features
in existing tools</i></p>

<p style="margin-left:11%; margin-top: 1em">Virt-customize
knows how to write a random seed to CirrOS (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">On Fedora,
virt-customize runs <i>dnf</i>(8) with the
<i>&minus;&minus;best</i> flag, ensuring it always updates
to the latest available packages.</p>

<p style="margin-left:11%; margin-top: 1em">Virt-builder
now provides 32 bit Fedora templates.</p>

<p style="margin-left:11%; margin-top: 1em">Virt-builder
and virt-customize <i>&minus;&minus;install</i> option now
works on 32 bit Fedora guests. Previously it would try to
install 64 bit packages (Jan Sedl&aacute;k).</p>

<p style="margin-left:11%; margin-top: 1em">Virt-builder
can now fetch cloud images using Simple Streams v1.0
metadata (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Virt-builder
can now fetch openSUSE cloud images out of the box
(C&eacute;dric Bosdonnat).</p>

<p style="margin-left:11%; margin-top: 1em">Virt-customize
will now use stronger ( <small>SHA&minus;512</small> )
encrypted passwords by default on openSUSE &ge; 11 (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Virt-builder
will now correctly handle output filenames containing colon
characters (<tt>&quot;:&quot;</tt>), and will create
temporary files in the libguestfs cache directory instead of
defaulting to <i>/tmp</i> (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Virt-resize has
a new <i>&minus;&minus;unknown&minus;filesystems</i> option
to control what to do when asked to resize a filesystem that
libguestfs doesn&rsquo;t know how to resize.</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;v2v
now has an <i>&minus;&minus;in&minus;place</i> flag/mode,
allowing in-place conversion of guests (Roman Kagan).</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;v2v
has a <i>&minus;&minus;compressed</i> option for creating
compressed qcow2 output files.</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;v2v
can now correctly get the VMware datacenter path (dcPath)
from libvirt, instead of having to calculate it using an
algorithm that occasionally got the wrong answer (Matthias
Bolte, Tingting Zheng).</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;v2v
now processes <small>RAM</small> sizes correctly for 64 bit
guests when running on a 32 bit host.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">In Perl and
Python programs, the <tt>&quot;get_program_name&quot;</tt>
<small>API</small> now returns the true program name,
instead of the incorrect string <tt>&quot;perl&quot;</tt> or
<tt>&quot;python&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The Python
bindings can now be compiled against a different version of
libguestfs, allowing the pip module to be built against any
version of libguestfs (instead of requiring the pip module
and libguestfs to have exactly the same version).</p>

<p style="margin-left:11%; margin-top: 1em">The quality of
the Ruby rdoc (documentation) has been improved (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Perl scripts no
longer hard-code the location of perl in the shebang line,
but use <i>env</i>(1) to locate it instead (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">In OCaml
programs, the guestfs handle was incorrectly made into a
global root, meaning it could never be garbage collected. If
you didn&rsquo;t call the <tt>&quot;close&quot;</tt>
function explicitly, the handle would not be closed until
the whole program exited. This has now been fixed so handles
will be garbage collected in the usual way. This changes the
<small>API</small> of the OCaml function
<tt>&quot;Guestfs.event_callback&quot;</tt>. Note that non-C
language bindings are not covered by the libguestfs
<small>API/ABI</small> guarantee, although we try hard not
to change them, but in this case it was essential in order
to fix this very serious bug.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Alpine Linux
and the <small>APK</small> package manager,
<small>ALT</small> Linux, Frugalware, and <small>PLD</small>
Linux are now recognized (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">If it exists,
<i>/etc/os&minus;release</i> will be preferred for
inspecting Linux guests (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">The correct
kernel version is returned for Windows guests &ge; 10.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Documentation</i></p>

<p style="margin-left:11%; margin-top: 1em">The large
<i>guestfs</i>(3) man page has been split into several
separate man pages: <i>guestfs&minus;hacking</i>(1)
<i>guestfs&minus;internals</i>(1)
<i>guestfs&minus;security</i>(1). In the source tree, a new
<i>docs</i> directory contains this documentation.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Architectures
and platforms</i></p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs now
supports <small>ARM 64</small> bit platforms with
vGICv3.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<br>
See also <i>guestfs&minus;security</i>(1). <br>
&quot;CVE&minus;2015&minus;5745&quot;</p>


<p style="margin-left:17%;">https://bugzilla.redhat.com/1251157</p>

<p style="margin-left:17%; margin-top: 1em">This is not a
vulnerability in libguestfs, but because we always give a
virtio-serial port to each guest (since that is how
guest-host communication happens), an escalation from the
appliance to the host qemu process is possible. This could
affect you if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>your libguestfs program runs untrusted programs out of
the guest (using &quot;guestfs_sh&quot; etc), or</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>another exploit was found in (for example) kernel
filesystem code that allowed a malformed filesystem to take
over the appliance.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">If you use
sVirt to confine qemu, that would thwart some attacks.</p>

<p style="margin-left:11%;">Virt-customize permissions on
<i>.ssh</i>, <i>.ssh/authorized_keys</i></p>


<p style="margin-left:17%;">https://bugzilla.redhat.com/1260778.</p>

<p style="margin-left:17%; margin-top: 1em">Previously when
asked to inject an <small>SSH</small> key into a guest,
virt-customize (hence virt-builder too) would create the
<i>.ssh</i> directory and <i>.ssh/authorized_keys</i> file
with too broad permissions, allowing other users to read.
They are now created as <tt>0700</tt> and <tt>0600</tt>
respectively, which is the same as the
<i>ssh&minus;copy&minus;id</i>(1) utility.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>API</small></b>
<i><br>
New APIs</i> <br>
&quot;guestfs_get_identifier&quot; <br>
&quot;guestfs_set_identifier&quot;</p>

<p style="margin-left:17%;">Get/set a per-handle
identifier. The main effect of this is to change trace
output from:</p>

<pre style="margin-left:17%; margin-top: 1em"> libguestfs: trace: foo</pre>


<p style="margin-left:17%; margin-top: 1em">to:</p>

<pre style="margin-left:17%; margin-top: 1em"> libguestfs: trace: ID: foo</pre>


<p style="margin-left:17%; margin-top: 1em">making it
easier to follow traces in multi-threaded programs, or where
a program uses multiple handles (especially
virt&minus;v2v).</p>


<p style="margin-left:11%;">&quot;guestfs_vfs_minimum_size&quot;</p>

<p style="margin-left:17%;">Return the minimum size of a
filesystem (when shrunk). This supports ext2/3/4,
<small>XFS</small> and btrfs, and can support other
filesystem types in future (Maxim Perevedentsev).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Other
<small>API</small> changes</i> <br>
&quot;guestfs_disk_create&quot;: add
&quot;preallocation&quot; =
&quot;off&quot;/&quot;metadata&quot;/&quot;full&quot;.</p>

<p style="margin-left:17%;">For raw, this allows
<tt>&quot;off&quot;</tt> as a synonym for
<tt>&quot;sparse&quot;</tt> (making it consistent with
qcow2). For qcow2, this allows <tt>&quot;sparse&quot;</tt>
as a synonym for <tt>&quot;off&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">It also adds
<tt>&quot;full&quot;</tt>, which corresponds to fully
allocated, but uses <i>posix_fallocate</i>(3) for
efficiency.</p>

<p style="margin-left:11%;">&quot;guestfs_tar_in&quot;: new
&quot;xattrs&quot;, &quot;selinux&quot;, &quot;acl&quot;
parameters. <br>
&quot;guestfs_tar_out&quot;: new &quot;xattrs&quot;,
&quot;selinux&quot;, &quot;acl&quot; parameters.</p>

<p style="margin-left:17%;">These extra parameters control
whether extended attributes, SELinux contexts and/or
<small>POSIX</small> ACLs are restored from / saved to
tarballs.</p>


<p style="margin-left:11%;">&quot;guestfs_add_drive&quot;</p>

<p style="margin-left:17%;">The existing
<tt>&quot;username&quot;</tt> and
<tt>&quot;secret&quot;</tt> parameters can be used to supply
authentication for iSCSI (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Build
changes</b> <br>
The <tt>&quot;./configure
&minus;&minus;enable&minus;valgrind&minus;daemon&quot;</tt>
option has been removed.</p>

<p style="margin-left:11%; margin-top: 1em">You can no
longer build libguestfs on <small>RHEL</small> 5&minus;era
(c.2007) machines. See the <tt>&quot;oldlinux&quot;</tt>
branch if you need (limited) <small>RHEL 5</small>
support.</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;p2v
can now be built on <small>RHEL</small> 6&minus;era (c.2010)
Linux distros.</p>

<p style="margin-left:11%; margin-top: 1em">OCaml &ge; 3.11
(released in 2008) is now required to build from git.</p>

<p style="margin-left:11%; margin-top: 1em">Building the
Perl bindings now requires
<tt>&quot;Module::Build&quot;</tt> (instead of
<tt>&quot;ExtUtils::MakeMaker&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">Builds should
be faster (especially when incrementally rebuilding),
because work was done to reduce build times.</p>

<p style="margin-left:11%; margin-top: 1em">Both OCaml and
the OCaml findlib module are required if you need to run the
generator at build time. Previously the build would have
failed if findlib was not installed.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
check&quot;</tt> tests now run in parallel (within each test
directory).</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
install&quot;</tt> no longer installs OCaml
<i>bindtests.*</i> files incorrectly.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
install&quot;</tt> can now be run twice. Previously it would
fail on the second run.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
clean&quot;</tt> should now remove nearly every file that
<tt>&quot;make&quot;</tt> creates.</p>

<p style="margin-left:11%; margin-top: 1em">A new
<tt>&quot;make installcheck&quot;</tt> rule has been added,
allowing the installed copy of libguestfs to be tested.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
Some effort was put into minimizing the size of the
appliance, which reduces temporary disk space and time
needed by libguestfs handles.</p>

<p style="margin-left:11%; margin-top: 1em">The appliance
now passes the <small>NIC</small> name to dhcpd, fixing
hangs when running the appliance on some distros
(C&eacute;dric Bosdonnat).</p>

<p style="margin-left:11%; margin-top: 1em">OCaml
<tt>&quot;Guestfs.Errno&quot;</tt> is now generated (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">In OCaml tools,
common code now handles <i>&minus;&minus;debug&minus;gc</i>,
<i>&minus;&minus;verbose</i> and other common options (Roman
Kagan, Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">The
virt&minus;v2v test harness allows us to boot the test
guests at fixed dates in the past, ensuring that Windows
reactivation doesn&rsquo;t kick in.</p>

<p style="margin-left:11%; margin-top: 1em">There is a new
internal <small>API</small> for reading/writing a subprocess
via a pipe from library code.</p>

<p style="margin-left:11%; margin-top: 1em">Used
<tt>&quot;deheader&quot;</tt> program to remove unused
<tt>&quot;#include&quot;</tt> directives.</p>

<p style="margin-left:11%; margin-top: 1em">In OCaml tools,
the <tt>&quot;Char&quot;</tt> and
<tt>&quot;String&quot;</tt> modules now implicitly reference
the <tt>&quot;Common_utils.Char&quot;</tt> and
<tt>&quot;Common_utils.String&quot;</tt> modules (instead of
the ones from stdlib). The <tt>&quot;Common_utils&quot;</tt>
modules contain a number of extra char/string utility
functions, and also hide some unsafe functions in
stdlib.</p>

<p style="margin-left:11%; margin-top: 1em">Many more
virt&minus;v2v tests will now be run even if you don&rsquo;t
have rhsrvany and virtio-win installed (Roman Kagan).</p>

<p style="margin-left:11%; margin-top: 1em">The huge
<i>configure.ac</i> file has been split into several smaller
files called <i>m4/guestfs_*.m4</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The old
<i>tests/data</i> and <i>tests/guests</i> directories have
been moved to <i>test&minus;data/</i>. This new top level
directory carries all test data which is common, large
and/or shared between multiple tests.</p>

<p style="margin-left:11%; margin-top: 1em">There is a new
top level <i>website/</i> directory containing the public
http://libguestfs.org website (or most of it).</p>

<p style="margin-left:11%; margin-top: 1em">The fuzz
testing of inspection (<i>tests/fuzz</i>) has been
removed.</p>

<p style="margin-left:11%; margin-top: 1em">Virt&minus;p2v
now saves the source physical machine dmesg output into the
conversion server debug directory, making it simpler to
debug cases of missing drivers, firmware etc.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/1294956</p>

<p style="margin-left:17%;">set-label returns wrong error
message when set the ext3/ext4 filesystem label</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1288733</p>

<p style="margin-left:17%;">Add a Fedora 23 32&minus;bit
base image for virt-builder</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1288201</p>

<p style="margin-left:17%;">virt-builder writes temporary
files to /tmp</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1285847</p>

<p style="margin-left:17%;">virt-resize does not copy
logical partitions</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1281578</p>

<p style="margin-left:17%;">virt-inspector returns version
6.3 for win10 images (should return 10.0)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1281577</p>

<p style="margin-left:17%;">virt-inspector
&minus;&minus;xpath segfault on attribute get</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1280029</p>

<p style="margin-left:17%;">libguestfs can run commands
with stdin not open (or worse still, connected to arbitrary
guest-chosen random devices)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1279273</p>

<p style="margin-left:17%;">About compression option for
qcow2</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1278878</p>

<p style="margin-left:17%;">guestfish should be able to
handle <small>LVM</small> thin layouts</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1278382</p>

<p style="margin-left:17%;"><small>DNF</small> python
programming error when run from virt-builder</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1278371</p>

<p style="margin-left:17%;">inspection returns
arch=&quot;unknown&quot; for Windows guest if file command
is not installed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1277274</p>

<p style="margin-left:17%;">Document permissions needed for
non-admin users to use virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1277122</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-sparsify: make
&rsquo;&minus;&minus;in&minus;place&rsquo; sparsification
safe to abort (gracefully or ungracefully)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1277074</p>

<p style="margin-left:17%;">Virt&minus;p2v client
shouldn&rsquo;t present the vdsm option because it&rsquo;s
not usable</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1276540</p>

<p style="margin-left:17%;">virt&minus;v2v fails to convert
Windows raw image: error &quot;device name is not a
partition&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1275806</p>

<p style="margin-left:17%;">virt-builder: error: [file] is
not a regular file in the guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1270011</p>

<p style="margin-left:17%;">Simplestreams test fails:
virt-builder: error: the value for the key
&rsquo;size&rsquo; is not an integer</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1267032</p>

<p style="margin-left:17%;">guestfish copy-in command
behaves oddly/unexpectedly with wildcards</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1262983</p>

<p style="margin-left:17%;">python: Cannot compile pip
module if installed libguestfs != pip guestfs version</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1262127</p>

<p style="margin-left:17%;">Better diagnostic message when
virbr0 doesn&rsquo;t exist</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1261436</p>

<p style="margin-left:17%;">No warning shows when convert a
win7 guest with <small>AVG</small> AntiVirus installed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1260778</p>

<p style="margin-left:17%;">virt-builder
&minus;&minus;ssh&minus;inject doesn&rsquo;t set proper
permissions on created files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1260689</p>

<p style="margin-left:17%;"><small>RFE: V2V</small> to
check and warn user to disable group policy and anti virus
on Windows guests</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1260590</p>

<p style="margin-left:17%;">Wrong graphics protocal and
video type set for guest after convert to rhev 3.6 by
virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1258342</p>

<p style="margin-left:17%;">extra slashes in vcenter
<small>URL</small> confuses virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1257895</p>

<p style="margin-left:17%;">[ <small>RHEV</small> ][V2V]
virt&minus;v2v ignores <small>NIC</small> if interface
source/@network or source/@bridge is an empty string</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1256405</p>

<p style="margin-left:17%;">virt-builder created Fedora 22
32bit disk image cannot be updated</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1256222</p>

<p style="margin-left:17%;">virt&minus;p2v no
<small>GUI</small> mode:error opening control connection to
<tt>$ip:22:unexpected</tt> &#8230;rompt</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1251909</p>

<p style="margin-left:17%;">Option &minus;oa preallocated
&minus;of qcow2 of virt&minus;v2v didn&rsquo;t work
efficiently</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1250715</p>

<p style="margin-left:17%;">v2v: spaces need to be escaped
as <tt>%20</tt> in paths</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1248678</p>

<p style="margin-left:17%;">Close all incoming ports on
virt&minus;p2v <small>ISO</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1246882</p>

<p style="margin-left:17%;">man virt-customize shows
synopsis twice</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1242853</p>

<p style="margin-left:17%;">mount-loop failed to setup loop
device: No such file or directory</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1237136</p>

<p style="margin-left:17%;"><small>BUG:</small> unable to
handle kernel <small>NULL</small> pointer dereference at
&lt;addr&gt; in function __blkg_lookup</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1230412</p>

<p style="margin-left:17%;">virt&minus;v2v should ignore
bogus kernel entries in grub config</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1229119</p>

<p style="margin-left:17%;">Unrelated info in fstab makes
virt&minus;v2v fail with unclear error info</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1227609</p>

<p style="margin-left:17%;">virt&minus;p2v: Using
&quot;Back&quot; button causes output list to be repopulated
multiple times</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1225789</p>

<p style="margin-left:17%;">Wrong video driver is installed
for rhel5.11 guest after conversion to libvirt</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1204131</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-builder creates qcow v3 images, add build option for
qcow v2</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1176801</p>

<p style="margin-left:17%;">File /etc/sysconfig/kernel
isn&rsquo;t updated when convert XenPV guest with regular
kernel installed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1174551</p>

<p style="margin-left:17%;">&quot;lstatnslist&quot; and
&quot;lstatlist&quot; don&rsquo;t give an error if the
<small>API</small> is used wrongly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1168223</p>

<p style="margin-left:17%;">koji spin-livecd cannot build a
working live <small>CD</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1165785</p>

<p style="margin-left:17%;">mount-loop command fails: mount
failed: Unknown error &minus;1</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1164708</p>

<p style="margin-left:17%;">set-label can only set &lt;=127
bytes for btrfs and &lt;=126 bytes for ntfs filesystem which
not meet the help message. Also for ntfs it should give a
warning message when the length &gt;128 bytes</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1020216</p>

<p style="margin-left:17%;">libvirt fails to shut down
domain: could not destroy libvirt domain: Requested
operation is not valid: domain is not running</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1011907</p>

<p style="margin-left:17%;">mount-loop failed to setup loop
device: No such file or directory</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.30
<a name="RELEASE NOTES FOR LIBGUESTFS 1.30"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.28.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
New tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;dib</i>(1)
is a secure and safe alternative to the OpenStack
&quot;diskimage-builder&quot; tool. It is compatible with
diskimage-builder elements. (Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;get&minus;kernel</i>(1)
extracts the kernel and ramdisk from a disk image.
Previously this functionality was part of
<i>virt&minus;builder</i>(1), but the new tool is more
featureful. (Pino Toscano)</p>

<p style="margin-left:11%; margin-top: 1em"><i>New features
in existing tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;v2v</i>(1)
<i>&minus;i ova</i> mode can now read a wider range of
<small>OVA</small> files, and also unpacked files
(directories).</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
now securely passes options to curl, so passwords, cookies
and so on cannot be seen by users with shell access on the
same machine.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
has a new <i>&minus;&minus;password&minus;file</i> option to
allow you to securely pass in a password, and to avoid an
interactive prompt.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
disables Windows autoreboot, making debugging conversion
failures on Windows easier.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
now comes with an extensive external test suite. See
<i>virt&minus;v2v&minus;test&minus;harness</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
allows virtio drivers to come from any location (Roman
Kagan), and drivers can be read directly from the virtio
<small>ISO.</small></p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
supports conversion of Windows &ge; 8. Note this is
experimental, and possibly broken. Use with caution.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;v2v
can now convert <small>UEFI</small> guests.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;p2v</i>(1)
adds a network configuration dialog.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;p2v
now has <tt>&quot;p2v.pre&quot;</tt>,
<tt>&quot;p2v.post&quot;</tt> and
<tt>&quot;p2v.fail&quot;</tt> triggers, allowing arbitrary
scripts for preparing the host for conversion and tidying up
post-conversion.</p>

<p style="margin-left:11%; margin-top: 1em">virt&minus;p2v
now uses the more advanced metacity window manager (instead
of matchbox).</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sysprep</i>(1)
will remove <tt>&quot;/var/spool/mail/username&quot;</tt>
for non-root accounts (Hu Tao).</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;customize</i>(1),
<i>virt&minus;builder</i>(1) and virt-sysprep have the
following new options: <i><br>
&minus;&minus;commands&minus;from&minus;file</i></p>

<p style="margin-left:17%;">allow long lists of commands to
be read from a file instead of from the command line (Pino
Toscano)</p>

<p style="margin-left:11%;"><i>&minus;&minus;copy</i></p>

<p style="margin-left:17%;">copy files inside the guest
(Maros Zatko)</p>


<p style="margin-left:11%;"><i>&minus;&minus;copy&minus;in</i></p>

<p style="margin-left:17%;">copy host files recursively
into the guest (Pino Toscano)</p>

<p style="margin-left:11%;"><i>&minus;&minus;move</i></p>

<p style="margin-left:17%;">move files inside the guest
(Maros Zatko)</p>


<p style="margin-left:11%;"><i>&minus;&minus;ssh&minus;inject</i></p>

<p style="margin-left:17%;">inject <small>SSH</small> keys
into a guest (Pino Toscano)</p>


<p style="margin-left:11%;"><i>&minus;&minus;sm&minus;attach
<br>
&minus;&minus;sm&minus;credentials <br>
&minus;&minus;sm&minus;register <br>
&minus;&minus;sm&minus;remove <br>
&minus;&minus;sm&minus;unregister</i></p>

<p style="margin-left:17%;">register and unregister a guest
from subscription-manager (Pino Toscano)</p>

<p style="margin-left:11%;"><i>&minus;&minus;touch</i></p>

<p style="margin-left:17%;">touch a file in the guest (Pino
Toscano)</p>

<p style="margin-left:11%;"><i>&minus;&minus;truncate <br>
&minus;&minus;truncate&minus;recursive</i></p>

<p style="margin-left:17%;">truncate files (Maros
Zatko)</p>

<p style="margin-left:11%; margin-top: 1em">Improvements to
virt-customize firstboot support. In particular, Windows
firstboot should work as well as Linux (Roman Kagan).</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;df</i>(1)
can now use PolicyKit, <small>SASL</small> and other
authentication methods when getting the list of domains from
libvirt.</p>

<p style="margin-left:11%; margin-top: 1em">Improvements to
guestfish bash completion (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Bash completion
now completes short options as well as long options (Pino
Toscano).</p>


<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1)
now displays a command synopsis if the number of parameters
given to a command is wrong (Hu Tao).</p>

<p style="margin-left:11%; margin-top: 1em">virt-builder
now supports Red Hat Enterprise Linux versions back to
<small>RHEL 3.</small></p>

<p style="margin-left:11%; margin-top: 1em">virt-builder
supports <small>SUSE</small> guests using zypper
(C&eacute;dric Bosdonnat).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">The Java
bindings now include validated Javadoc, and other
improvements (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Multiple fixes
and improvements to the <small>PHP</small> bindings (Pino
Toscano).</p>


<p style="margin-left:11%; margin-top: 1em"><i>Inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Inspection can
now get icons from <small>RHEL 7</small> and CentOS 7.</p>


<p style="margin-left:11%; margin-top: 1em"><i>/etc/favicon.png</i>
is now allowed to be a symbolic link.</p>

<p style="margin-left:11%; margin-top: 1em">For RPM-based
guests, inspection now returns <small>RPM</small> Epoch
fields.</p>

<p style="margin-left:11%; margin-top: 1em">Debian packages
now have separate Epoch and Version fields (Nikos
Skalkotos).</p>

<p style="margin-left:11%; margin-top: 1em">OpenBSD
detection added, FreeBSD and NetBSD added as separate
&quot;distros&quot;, and other <small>BSD</small> inspection
improvements and bug fixes (Nikos Skalkotos).</p>

<p style="margin-left:11%; margin-top: 1em">CoreOS
detection added (Nikos Skalkotos).</p>

<p style="margin-left:11%; margin-top: 1em">The package
manager in Fedora &ge; 22 is <tt>&quot;dnf&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">ReactOS guests
can be inspected (Maros Zatko).</p>

<p style="margin-left:11%; margin-top: 1em">Add support for
<small>UEFI</small> guests.</p>

<p style="margin-left:11%; margin-top: 1em">Inspection now
works when kernel modules are gzip or xz compressed (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Inspection now
recognizes ppc64 and ppc64le guests (Maros Zatko).</p>

<p style="margin-left:11%; margin-top: 1em">Inspection
lists the installed applications on Archlinux guests (Nikos
Skalkotos).</p>


<p style="margin-left:11%; margin-top: 1em"><i>Architectures
and platforms</i></p>


<p style="margin-left:11%; margin-top: 1em"><small>PPC64</small>
( <small>POWER7</small> ) and <small>PPC64LE</small> (
<small>POWER8</small> ) architectures are now much better
supported, and should work out of the box.</p>

<p style="margin-left:11%; margin-top: 1em">For aarch64, we
use <small>AAVMF</small> (an open source <small>UEFI</small>
implementation based on <small>OVMF</small> ) if available
to run the appliance.</p>

<p style="margin-left:11%; margin-top: 1em">For armv7, we
now use the <i>&minus;M virt</i> machine type by
default.</p>

<p style="margin-left:11%; margin-top: 1em">There is better
support for compiling on non-Linux platforms (Pino Toscano,
Margaret Lewicka).</p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs
should now work on <small>MIPS 32</small> bit little endian
(&quot;mipsel&quot;). I have not been able to try 64 bit or
big endian.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<small><br>
CVE&minus;2014&minus;8484 <br>
CVE&minus;2014&minus;8485</small></p>

<p style="margin-left:17%;">Libguestfs previously ran the
<i>strings</i>(1) utility on untrusted files. Strings could
parse <small>BFD</small> headers in an unsafe way, leading
to possible arbitrary code execution. Libguestfs now runs
strings with a flag to ensure it does not try to parse
<small>BFD</small> headers. This could have led to
exploitation of the libguestfs appliance, but since
libguestfs further constrains the appliance through
virtualization, SELinux and other techniques, it was
unlikely to have caused any privilege escalation on the
host.</p>

<p style="margin-left:11%;">XPath injection in
virt&minus;v2v</p>

<p style="margin-left:17%;">One possible XPath injection
vulnerability was fixed in virt&minus;v2v. This might have
allowed a malicious guest which was being converted by
virt&minus;v2v to construct an arbitrary XPath expression
which would have been evaluated on the host (by the libxml2
library linked to the virt&minus;v2v binary). It is not
clear what the effects of this might be.</p>

<p style="margin-left:17%; margin-top: 1em">For further
information, see upstream commit
https://github.com/libguestfs/libguestfs/commit/6c6ce85f94c36803fe2db35a98db436bff0c14b0</p>

<p style="margin-left:11%;">Denial of service problems when
using &quot;qemu&minus;img info&quot;</p>

<p style="margin-left:17%;">When using the American Fuzzy
Lop fuzzer (<tt>&quot;afl&minus;fuzz&quot;</tt>) on the
<tt>&quot;qemu&minus;img info&quot;</tt> command, Richard
W.M. Jones found that certain files can cause the
<tt>&quot;qemu&minus;img&quot;</tt> program to use lots of
memory and time (for example 6GB of heap and 14 seconds of
<small>CPU</small> time on a fast Intel processor), and in
some cases to crash. Since libguestfs may run
<tt>&quot;qemu&minus;img info&quot;</tt> on disk images to
find out what they contain, this transitively could cause
libguestfs to hang or consume lots of memory.</p>

<p style="margin-left:17%; margin-top: 1em">Libguestfs was
modified so that it uses resource limits to limit the space
and time used by <tt>&quot;qemu&minus;img info&quot;</tt>,
to avoid this problem. If a malicious user tries to pass one
of these disk images to libguestfs,
<tt>&quot;qemu&minus;img&quot;</tt> will crash and the crash
is reported back to libguestfs callers as an error
message.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>API</small></b>
<i><br>
New APIs</i> <br>
&quot;guestfs_add_libvirt_dom&quot;</p>

<p style="margin-left:17%;">This exposes a previously
private <small>API</small> that allows you to pass a
<tt>&quot;virDomainPtr&quot;</tt> object directly from
libvirt to libguestfs.</p>


<p style="margin-left:11%;">&quot;guestfs_blockdev_setra&quot;</p>

<p style="margin-left:17%;">Adjust readahead parameter for
devices. See <tt>&quot;blockdev
&minus;&minus;setra&quot;</tt> command.</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_balance&quot;
<br>
&quot;guestfs_btrfs_balance_cancel&quot; <br>
&quot;guestfs_btrfs_balance_pause&quot; <br>
&quot;guestfs_btrfs_balance_resume&quot; <br>
&quot;guestfs_btrfs_balance_status&quot;</p>

<p style="margin-left:17%;">Balance support for Btrfs
filesystems (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_filesystem_defragment&quot;</p>

<p style="margin-left:17%;">Filesystem defragmentation
support for Btrfs filesystems (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_image&quot;</p>

<p style="margin-left:17%;">Create an image of a Btrfs
filesystem (Chen Hanxiao)</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_qgroup_assign&quot;
<br>
&quot;guestfs_btrfs_qgroup_create&quot; <br>
&quot;guestfs_btrfs_qgroup_destroy&quot; <br>
&quot;guestfs_btrfs_qgroup_limit&quot; <br>
&quot;guestfs_btrfs_qgroup_remove&quot; <br>
&quot;guestfs_btrfs_qgroup_show&quot; <br>
&quot;guestfs_btrfs_quota_enable&quot; <br>
&quot;guestfs_btrfs_quota_rescan&quot;</p>

<p style="margin-left:17%;">Quote support for Btrfs
filesystems (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_rescue_chunk_recover&quot;</p>

<p style="margin-left:17%;">Scan and recover the chunk tree
in Btrfs filesystems (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_rescue_super_recover&quot;</p>

<p style="margin-left:17%;">Restore superblocks in Btrfs
filesystems (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_replace&quot;</p>

<p style="margin-left:17%;">Replace a device in a Btrfs
filesystem (Cao Jin).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_scrub&quot;
<br>
&quot;guestfs_btrfs_scrub_cancel&quot; <br>
&quot;guestfs_btrfs_scrub_resume&quot; <br>
&quot;guestfs_btrfs_scrub_status&quot;</p>

<p style="margin-left:17%;">Scrub a Btrfs filesystem (Hu
Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_subvolume_get_default&quot;</p>

<p style="margin-left:17%;">Get the default subvolume of a
Btrfs filesystem (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfs_subvolume_show&quot;</p>

<p style="margin-left:17%;">List detailed information about
the subvolume of a Btrfs filesystem (Hu Tao).</p>


<p style="margin-left:11%;">&quot;guestfs_btrfstune_enable_extended_inode_refs&quot;
<br>

&quot;guestfs_btrfstune_enable_skinny_metadata_extent_refs&quot;
<br>
&quot;guestfs_btrfstune_seeding&quot;</p>

<p style="margin-left:17%;">Various tuning parameters for
Btrfs filesystems (Chen Hanxiao).</p>


<p style="margin-left:11%;">&quot;guestfs_c_pointer&quot;</p>

<p style="margin-left:17%;">Return the C pointer to the
underlying <tt>&quot;guestfs_h *&quot;</tt>. This allows
interworking of libguestfs bindings with bindings from other
libraries. For further information see
https://bugzilla.redhat.com/1075164</p>

<p style="margin-left:11%;">&quot;guestfs_copy_in&quot;
<br>
&quot;guestfs_copy_out&quot;</p>

<p style="margin-left:17%;">Flexible APIs for recursively
copying directories of files between the host and guest
filesystem. Previously these were available only as
guestfish commands, but now any <small>API</small> users can
call them (Pino Toscano).</p>


<p style="margin-left:11%;">&quot;guestfs_part_get_gpt_guid&quot;
<br>
&quot;guestfs_part_set_gpt_guid&quot;</p>

<p style="margin-left:17%;">Get and set the
<small>GPT</small> per-partition <small>GUID.</small></p>


<p style="margin-left:11%;">&quot;guestfs_part_get_mbr_part_type&quot;</p>

<p style="margin-left:17%;">Get <small>MBR</small>
partition type (Chen Hanxiao).</p>


<p style="margin-left:11%;">&quot;guestfs_set_uuid_random&quot;</p>

<p style="margin-left:17%;">Set the <small>UUID</small> of
a filesystem to a randomly generated value; supported
filesystems currently are ext2/3/4, <small>XFS,</small>
Btrfs, and swap partitions. (Chen Hanxiao).</p>

<p style="margin-left:11%; margin-top: 1em"><i>Other
<small>API</small> changes</i></p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_disk_create&quot;</tt>
can now use <small>VMDK</small> files as backing files.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_btrfs_subvolume_snapshot&quot;</tt>
takes extra optional parameters (all added by Hu Tao): <br>
&quot;ro&quot;</p>

<p style="margin-left:17%;">for creating a read-only Btrfs
snapshot</p>

<p style="margin-left:11%;">&quot;qgroupid&quot;</p>

<p style="margin-left:17%;">for adding the snapshot to a
qgroup</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_btrfs_subvolume_create&quot;</tt>
can also take the optional <tt>&quot;qgroupid&quot;</tt>
parameter (Hu Tao).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_set_uuid&quot;</tt>
can set <small>UUID</small> of swap partitions, Btrfs (Hu
Tao, Chen Hanxiao).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_copy_device_to_file&quot;</tt>
and <tt>&quot;guestfs_copy_file_to_file&quot;</tt> have a
new optional <tt>&quot;append&quot;</tt> parameter, allowing
you to append to the output file instead of truncating
it.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_mkfs&quot;</tt>
has a new optional <tt>&quot;label&quot;</tt> parameter to
set the initial label of the new filesystem (Pino
Toscano).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_set_label&quot;</tt>
and <tt>&quot;guestfs_set_uuid&quot;</tt> now set
<tt>&quot;ENOTSUP&quot;</tt> as errno when there is no
implemented support for the filesystem of the specified
mountable (Chen Hanxiao).</p>

<p style="margin-left:11%; margin-top: 1em">Environment
variables now let you write
<tt>&quot;LIBGUESTFS_DEBUG=true&quot;</tt>,
<tt>&quot;LIBGUESTFS_DEBUG=0&quot;</tt> and so on.</p>

<p style="margin-left:11%; margin-top: 1em">All
<tt>&quot;guestfs_sfdisk*&quot;</tt> APIs have been
deprecated. Because <i>sfdisk</i>(8) was rewritten,
incompatibly, upstream, we don&rsquo;t recommend using these
APIs in future code. Use the
<tt>&quot;guestfs_part*&quot;</tt> APIs as replacements.</p>

<p style="margin-left:11%; margin-top: 1em">APIs such as
<tt>&quot;guestfs_download&quot;</tt> do not truncate
<i>/dev/stdout</i> or <i>/dev/stderr</i> when writing to
them, meaning that if you redirect stdout or stderr to a
file, the file is no longer truncated.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Build
changes</b> <br>
The daemon no longer uses its own separate copy of gnulib.
Instead it shares a single copy with the library.</p>

<p style="margin-left:11%; margin-top: 1em">OCaml
<i>.annot</i> files are now created, so IDEs and editors
like emacs and vi can browse OCaml types in the source
code.</p>

<p style="margin-left:11%; margin-top: 1em">Various fixes
to allow different host/appliance architecture builds (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Automake is now
used directly to build all the OCaml programs, instead of ad
hoc Makefile rules. One side effect of this is to enable
warnings in all the C code used by OCaml programs.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;&minus;fno&minus;strict&minus;overflow&quot;</tt>
is used throughout the build to avoid dubious
<small>GCC</small> optimizations.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple
cleanups to support <small>GCC 5.</small></p>

<p style="margin-left:11%; margin-top: 1em">OCaml OUnit2 is
needed to run some OCaml tests.</p>

<p style="margin-left:11%; margin-top: 1em">Creating a
statically linked <i>libguestfs.a</i> should work again.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>src/api&minus;support</i> subdirectory and its scripts
are no longer used. Instead we store in the
<i>generator/actions.ml</i> when the <small>API</small> was
added to libguestfs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Internationalization</b>
<br>
The translation service has changed from Transifex to
Zanata.</p>

<p style="margin-left:11%; margin-top: 1em">Many more
translations are available now, for both library and tools
messages and documentation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
In all OCaml tools, there are now common
<tt>&quot;error&quot;</tt>, <tt>&quot;warning&quot;</tt>,
<tt>&quot;info&quot;</tt> functions, and common way to set
and get the <i>&minus;&minus;quiet</i>, <i>&minus;x</i>
(trace) and <i>&minus;v</i> (verbose) flags, and colour
highlighting used consistently.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;COMPILE_REGEXP&quot;</tt>
macros are used to simplify <small>PCRE</small> constructors
and destructors.</p>

<p style="margin-left:11%; margin-top: 1em">In the
generator, <tt>&quot;Pointer&quot;</tt> arguments have
finally been implemented.</p>

<p style="margin-left:11%; margin-top: 1em">Internal
identifiers no longer use double and triple underscores (eg.
<tt>&quot;guestfs___program_name&quot;</tt>). These
identifiers are invalid for C99 and C <small>++</small>
programs, although compilers would accept them.</p>

<p style="margin-left:11%; margin-top: 1em">The daemon no
longer parses <tt>&quot;guestfs_*&quot;</tt> options from
<i>/proc/cmdline</i>. Instead it only takes ordinary command
line options. The appliance init script turns
<i>/proc/cmdline</i> into daemon command line options.</p>

<p style="margin-left:11%; margin-top: 1em">The tests can
now run the daemon as a &quot;captive process&quot;,
allowing it to be run directly on the host. The main
advantage of this is we can run valgrind directly on the
daemon during testing.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/1239053</p>

<p style="margin-left:17%;">virt&minus;v2v error reporting
when grub.conf cannot be parsed by Augeas</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1238053</p>

<p style="margin-left:17%;">v2v:Duplicate disk target set
when convert guest with cdrom attached</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1237869</p>

<p style="margin-left:17%;">Virtio drivers are not
installed for windows 2008 guests by virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1234351</p>

<p style="margin-left:17%;">virt&minus;v2v Support for
Fedora virtio-win drivers</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1232192</p>

<p style="margin-left:17%;">Virt&minus;v2v gives an error
on a blank disk: part_get_parttype: unknown signature, of
the output: <small>BYT</small> ;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1229385</p>

<p style="margin-left:17%;">virt&minus;p2v in kernel
command line mode should power off the machine after
conversion</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1229340</p>

<p style="margin-left:17%;">virt&minus;p2v no
<small>GUI</small> mode appends \n to the final command line
parameter</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1229305</p>

<p style="margin-left:17%;">virt-sysprep at cleanup deletes
/var/spool/at/.SEQ which results in failing at</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1226794</p>

<p style="margin-left:17%;">&quot;Doing
conversion&#8230;&#8230;&quot; still shows after cancel the
conversion from virt&minus;p2v client</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1215042</p>

<p style="margin-left:17%;">Memory leak in
virNetSocketNewConnectUNIX</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1213324</p>

<p style="margin-left:17%;">virt&minus;v2v: warning:
unknown guest operating system: windows windows 6.3 when
converting win8,win8.1,win2012,win2012R2 to rhev</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1213247</p>

<p style="margin-left:17%;">virt tools should print the
same format of version string</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1212808</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-builder &minus;&minus;touch</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1212807</p>

<p style="margin-left:17%;">virt-builder
&minus;&minus;selinux&minus;relabel flag fails on
cross-architecture builds</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1212680</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-inspector xpath query should output a neat format of
the query element</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1212152</p>

<p style="margin-left:17%;">virt-builder firstboot-command
fails: File name too long</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1211996</p>

<p style="margin-left:17%;">virt-inspector gives incorrect
arch (ppc64) for ppc64le guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1203817</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-customize &minus;&minus;move and &minus;&minus;copy</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1201526</p>

<p style="margin-left:17%;">index-parser can&rsquo;t parse
systemd mount files properly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1196101</p>

<p style="margin-left:17%;">virt-builder
&minus;&minus;upload option doesn&rsquo;t work to a
<small>FAT</small> partition</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1196100</p>

<p style="margin-left:17%;">virt-builder &minus;x option on
its own does not enable tracing</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1195204</p>


<p style="margin-left:17%;">&lsquo;virt&minus;builder&lsquo;
should create <tt>$HOME</tt>/.cache directory if it already
doesn&rsquo;t exist</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1193237</p>

<p style="margin-left:17%;">Virt-builder fingerprint is
required even when no check desired</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1189284</p>

<p style="margin-left:17%;">virt-resize should preserve
<small>GPT</small> partition UUIDs, else <small>EFI</small>
guests become unbootable</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1188866</p>

<p style="margin-left:17%;">Performance regression in
virt-builder when uncompressing image</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1186800</p>

<p style="margin-left:17%;">virt&minus;v2v should support
gzip format ova as input</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1185561</p>

<p style="margin-left:17%;">virt-sparsify should ignore
read-only LVs</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1182463</p>

<p style="margin-left:17%;">&quot;mknod-b&quot;,
&quot;mknod-c&quot;, and &quot;mkfifo&quot; do not strip
non-permissions bits from &quot;mode&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1176493</p>

<p style="margin-left:17%;">virt&minus;v2v ignores sound
device when convert xen guest to local kvm</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1175676</p>

<p style="margin-left:17%;">Typo error in &rsquo;help
ping&minus;daemon&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1175196</p>

<p style="margin-left:17%;">&quot;parse-environment&quot;
and &quot;parse-environment-list&quot; fail to parse &quot;
<small>LIBGUESTFS_TRACE</small> = 0&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1175035</p>


<p style="margin-left:17%;">&quot;is&minus;blockdev&quot;/&quot;is&minus;blockdev&minus;opts&quot;
fail to detect &quot;/dev/sda&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1174280</p>

<p style="margin-left:17%;"><small>RFE:</small> Allow v2v
conversion of Oracle Linux 5.8 VMware <small>VM</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1174200</p>

<p style="margin-left:17%;">New virt&minus;v2v failure:
<small>CURL:</small> Error opening file: <small>NSS:</small>
client certificate not found (nickname not specified):
Invalid argument</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1174123</p>

<p style="margin-left:17%;">Graphics password disappear
after conversion of virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1174073</p>

<p style="margin-left:17%;">The listen address for vnc is
changed after conversion by virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1171666</p>

<p style="margin-left:17%;">inspection thinks
<small>EFI</small> partition is a separate operating
system</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1171130</p>

<p style="margin-left:17%;">virt&minus;v2v conversion of
<small>RHEL 3</small> guest fails with: All of your loopback
devices are in use</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1170685</p>

<p style="margin-left:17%;">Conversion of <small>RHEL
4</small> guest fails: rpm &minus;ql
1:kernel&minus;utils&minus;2.4&minus;23.el4: virt&minus;v2v:
error: libguestfs error: command_lines:</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1170073</p>

<p style="margin-left:17%;">virt&minus;v2v picks debug
kernels over non-debug kernels when versions are equal</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1169045</p>

<p style="margin-left:17%;">virt-sparsify: libguestfs
error: qemu-img info: &rsquo;virtual&minus;size&rsquo; is
not representable as a 64 bit integer</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1169015</p>

<p style="margin-left:17%;">virt-resize
&minus;&minus;expand fails on ubuntu&minus;14.04.img image
(regression)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1168144</p>

<p style="margin-left:17%;">warning: fstrim: fstrim:
/sysroot/: <small>FITRIM</small> ioctl failed: Operation not
supported (ignored) when convert win2003 guest from xen
server</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1167921</p>

<p style="margin-left:17%;">p2v: No Network Connection
dialog</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1167774</p>

<p style="margin-left:17%;">virt&minus;p2v fails with
error:&quot;nbd.<i>c:nbd_receive_negotiate()</i>:L501: read
failed&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1167623</p>

<p style="margin-left:17%;">Remove &quot;If reporting bugs,
run virt&minus;v2v with debugging enabled ..&quot; message
when running virt&minus;p2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1167601</p>

<p style="margin-left:17%;">&quot;Conversion was
successful&quot; pop out even virt&minus;p2v fails</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1167302</p>

<p style="margin-left:17%;">virt&minus;v2v: warning: ova
hard disk has no parent controller when convert from a ova
file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1166618</p>

<p style="margin-left:17%;">virt-resize should give out the
detail warning info to let customers know what&rsquo;s going
wrong</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1165975</p>

<p style="margin-left:17%;">File
&quot;/boot/grub2/device.map&quot; showing is not right
after converting a rhel7 guest from esx server</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1165785</p>

<p style="margin-left:17%;">mount-loop command fails: mount
failed: Unknown error &minus;1</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1165569</p>

<p style="margin-left:17%;">Disable &quot;cancel
conversion&quot; button after virt&minus;p2v conversion
finished</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1165564</p>

<p style="margin-left:17%;">Provide Reboot/Shutdown button
after virt&minus;p2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1164853</p>

<p style="margin-left:17%;">Booting in qemu found no volume
groups and failed checking the filesystems</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1164732</p>

<p style="margin-left:17%;">The description of &rsquo;help
append&rsquo; is not accurately, it add the kernel options
to libguestfs appliance not the guest kernel</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1164697</p>

<p style="margin-left:17%;">typo errors in man pages</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1164619</p>

<p style="margin-left:17%;">Inspect-get-icon failed on
<small>RHEL7</small> guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1162966</p>

<p style="margin-left:17%;">xfs should also give a warning
out to let customer know the limitation</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1161575</p>

<p style="margin-left:17%;">Failed to import guest with
&quot;rtl8139&quot; nic to openstack server after converted
by v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1159651</p>

<p style="margin-left:17%;">virt-sysprep firstboot script
is not deleted if it reboot a <small>RHEL 7</small>
guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1159258</p>

<p style="margin-left:17%;">esx win2008 32 bit guest fail
to load after conversion because the firmware isn&rsquo;t
<small>ACPI</small> compatible</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1159016</p>

<p style="margin-left:17%;">libvirt backend does not set
<small>RBD</small> password</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1158526</p>

<p style="margin-left:17%;">Use password file instead of
process interaction</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1157679</p>


<p style="margin-left:17%;">virt&minus;p2v&minus;make&minus;disk
should add firmwares</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1156449</p>

<p style="margin-left:17%;">libguestfs <small>FTBFS</small>
on f21 ppc64le</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1156301</p>

<p style="margin-left:17%;">virt-inspector support adding a
remote disk, but in its man page &minus;a <small>URI
/</small> &minus;&minus;add <small>URI</small> is
missing</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1155121</p>

<p style="margin-left:17%;">Virt&minus;v2v will fail when
using relative path for &minus;i ova</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1153844</p>

<p style="margin-left:17%;">Redundancy whitespace at the
end of directory name when use &lt; <small>TAB</small> &gt;
to complete the directory name in guestfish with a xfs
filesystem in guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1153589</p>

<p style="margin-left:17%;">virt&minus;v2v will hang when
converting esx guest before disk copy phase</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1152998</p>

<p style="margin-left:17%;">virt&minus;v2v / qemu-img fails
on ova image</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151910</p>

<p style="margin-left:17%;">virt-ls should remove
&rsquo;/&rsquo; in the output when specify the directory
name as /etc/</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151900</p>

<p style="margin-left:17%;">Should also add a field for
directory files when run virt-ls with &minus;&minus;csv
option</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151033</p>

<p style="margin-left:17%;">virt&minus;v2v conversions from
VMware vCenter server run slowly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1146832</p>

<p style="margin-left:17%;">virt&minus;v2v fail to convert
guest with disk type volume</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1146007</p>

<p style="margin-left:17%;">Input/output error during
conversion of esx guest.</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1135585</p>

<p style="margin-left:17%;">[ <small>RFE</small> ]
virt-builder should support copying in a directory/list of
files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1089566</p>

<p style="margin-left:17%;">[abrt] livecd-tools:
kickstart.py:276:apply:IOError: [Errno 2] No such file or
directory:
&rsquo;/run/media/jones/2tp001data/createlive/temp/imgcreate&minus;_dX8Us/install_root/etc/rpm/macros.imgcreate&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1079625</p>

<p style="margin-left:17%;">virt-sparsify fails if a btrfs
filesystem contains readonly snapshots</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1075164</p>

<p style="margin-left:17%;"><small>RFE:</small> allow
passing in a pre-opened libvirt connection from python</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/912499</p>

<p style="margin-left:17%;">Security context on image file
gets reset</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/889082</p>

<p style="margin-left:17%;">[ <small>RFE</small> ]
virt&minus;v2v should check whether guest with same name
exist on target first then transfer the disk</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/855059</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt&minus;p2v: display more information about network
devices such as topology, bonding, etc.</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/823758</p>

<p style="margin-left:17%;">p2v client should have largest
number restrictions for <small>CPU</small> and Memory
settings</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/709327</p>

<p style="margin-left:17%;">hivex cannot read registry
hives from ReactOS</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/709326</p>

<p style="margin-left:17%;">virt-inspector cannot detect
ReactOS</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/119673</p>

<p style="margin-left:17%;">installation via
<small>NFS</small> doesn&rsquo;t seem to work</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.28
<a name="RELEASE NOTES FOR LIBGUESTFS 1.28"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.26.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
Tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;v2v</i>(1)
and <i>virt&minus;p2v</i>(1) are tools for converting from
foreign hypervisors (such as VMware or Xen) or physical
machines, to <small>KVM.</small> These tools were previously
a separate project. The code for both tools has been
integrated into the libguestfs tree. As part of the
refactoring, virt&minus;p2v has been rewritten (from Ruby,
now C), and virt&minus;v2v now uses several modern features
of qemu which make it run many times faster than before.
<i>virt&minus;v2v</i>(1) can import from: VMware vCenter,
VMware <small>OVA</small> files, local disk files, libvirt,
<small>RHEL 5</small> Xen. It can output to: oVirt or Red
Hat Enterprise Virtualization (RHEV-M), OpenStack Glance,
libvirt, qemu, local disk files.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;log</i>(1)
is a new tool for listing log files from guests. It supports
a variety of guests including Linux traditional, Linux using
journal, and Windows event log.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;builder</i>(1)
has a new
<tt>&quot;&minus;&minus;machine&minus;readable&quot;</tt>
option to make it simpler to consume virt-builder from other
programs.</p>

<p style="margin-left:11%; margin-top: 1em">New
<i>virt&minus;builder</i>(1) and
<i>virt&minus;customize</i>(1) <i>&minus;&minus;chmod</i>
option.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sysprep</i>(1)
will now remove: systemd journals, anaconda logs, lightdm
logs, debian-installer files, apt logs, exim logs,
ConsoleKit logs, firewalld logs, grubby logs, proftpd logs,
libvirt/libxml logs, and several other log files. The
virt-sysprep <tt>&quot;user&minus;account&quot;</tt>
operation is now able to remove or keep particular user
accounts. (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">New
<i>guestmount</i>(1) <i>&minus;&minus;fd</i> option,
allowing you to run guestmount captive under another
process.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sparsify</i>(1)
has a new <i>&minus;&minus;tmp</i> option allowing you to
precisely control where temporary files are stored.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sparsify</i>(1)
can now write to a block device.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;customize</i>(1)
and <i>virt&minus;sysprep</i>(1) now support adding
firstboot scripts to Windows guests.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;cat</i>(1),
<i>virt&minus;edit</i>(1), <i>virt&minus;ls</i>(1) now
support the <i>&minus;m</i> option, allowing you to override
automatic inspection of guests and instead specify where to
mount partitions (Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">The virt tools
now have coloured output: green for <small>OK,</small> red
for errors, blue for warnings.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">You can build a
Python distribution using <tt>&quot;make &minus;C python
sdist&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Ruby bindings
have switched from <tt>&quot;Test::Unit&quot;</tt> to
<tt>&quot;MiniTest&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The Java
bindings are now compatible with OpenJDK 8 (Pino
Toscano).</p>


<p style="margin-left:11%; margin-top: 1em"><i>Inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Oracle Linux is
returned as <tt>&quot;oraclelinux&quot;</tt> (Nikos
Skalkotos).</p>

<p style="margin-left:11%; margin-top: 1em">Linux guests
which do not have <i>/etc/fstab</i> can now be handled (Pino
Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">Minix is
returned as <tt>&quot;minix&quot;</tt> (Pino Toscano).</p>


<p style="margin-left:11%; margin-top: 1em"><i>Architectures</i></p>

<p style="margin-left:11%; margin-top: 1em">Aarch64 (64 bit
<small>ARM</small> ) support has been added.</p>

<p style="margin-left:11%; margin-top: 1em">Inspection and
the <tt>&quot;guestfs_file_architecture&quot;</tt> call can
now recognize arm (32 bit) and aarch64 guests.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<small><br>
CVE&minus;2014&minus;0191</small> Network usage and entity
resolution in <small>XML</small> parsing</p>

<p style="margin-left:17%;">Libguestfs previously used
unsafe libxml2 APIs for parsing libvirt <small>XML.</small>
These APIs defaulted to allowing network connections to be
made when certain <small>XML</small> documents were
presented. Using a malformed <small>XML</small> document it
was also possible to exhaust all <small>CPU,</small> memory
or file descriptors on the machine.</p>

<p style="margin-left:17%; margin-top: 1em">Since the
libvirt <small>XML</small> comes from a trusted source (the
libvirt daemon) it is not thought that this could have been
exploitable.</p>

<p style="margin-left:17%; margin-top: 1em">This was fixed
in libguestfs &ge; 1.27.9 and the fix was backported to
stable versions &ge; 1.26.2, &ge; 1.24.9, &ge; 1.22.10 and
&ge; 1.20.13. (Thanks: Dan Berrange, Pino Toscano).</p>

<p style="margin-left:11%;">Shellshock (bash
<small>CVE&minus;2014&minus;6271</small> )</p>

<p style="margin-left:17%;">This bash bug indirectly
affects libguestfs. For more information see:
https://www.redhat.com/archives/libguestfs/2014&minus;September/msg00252.html</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>API</small></b>
<i><br>
New APIs</i> <br>
&quot;guestfs_clear_backend_setting&quot; <br>
&quot;guestfs_get_backend_setting&quot; <br>
&quot;guestfs_set_backend_setting&quot;</p>

<p style="margin-left:17%;">Use these APIs to set
individual backend settings.</p>


<p style="margin-left:11%;">&quot;guestfs_cpio_out&quot;</p>

<p style="margin-left:17%;">Convert a directory within the
disk image to cpio format.</p>


<p style="margin-left:11%;">&quot;guestfs_journal_get_realtime_usec&quot;</p>

<p style="margin-left:17%;">Fetch precise journal times,
see <i>sd_journal_get_realtime_usec</i>(3).</p>

<p style="margin-left:11%;">&quot;guestfs_lstatns&quot;
<br>
&quot;guestfs_lstatnslist&quot; <br>
&quot;guestfs_statns&quot;</p>

<p style="margin-left:17%;">Enhanced versions of
<tt>&quot;guestfs_lstat&quot;</tt>,
<tt>&quot;guestfs_lstatlist&quot;</tt>,
<tt>&quot;guestfs_stat&quot;</tt> which return nanosecond
timestamps.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Build
changes</b> <br>
Libguestfs can now be built with qemu 2.x.</p>

<p style="margin-left:11%; margin-top: 1em">Add support for
packaging the appliance on Mageia (Joseph Wang, Thierry
Vignaud).</p>

<p style="margin-left:11%; margin-top: 1em">Augeas is now a
required dependency.</p>

<p style="margin-left:11%; margin-top: 1em">Flex and bison
are now required dependencies.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
User-Mode Linux ( <small>UML</small> ) is no longer a
supported backend (although still available). It will be
supported again once someone steps in and fixes various
regressions and brokenness in the <small>UML</small> (Linux)
kernel.</p>

<p style="margin-left:11%; margin-top: 1em">You can now
connect gdb to qemu by specifying
<tt>&quot;LIBGUESTFS_BACKEND_SETTINGS=gdb&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">Serial
<small>BIOS</small> (sgabios) is now used by the libvirt
backend (on x86 only) so that we see early
<small>BIOS</small> messages.</p>

<p style="margin-left:11%; margin-top: 1em">For the OCaml
virt tools, exceptions are now handled and printed by a
common function.</p>

<p style="margin-left:11%; margin-top: 1em">A
<small>GCC</small> warning about large stack frames is now
enabled by default. Several places that used large arrays
and structures on the stack have been fixed.</p>

<p style="margin-left:11%; margin-top: 1em">There is now a
test for booting the appliance repeatedly. Useful for
finding kernel leaks. See:
<i>tests/qemu/qemu&minus;boot.c</i></p>

<p style="margin-left:11%; margin-top: 1em">There is a test
for testing the speed of various qemu features such as
virtio-serial uploads and block device writes. See:
<i>tests/qemu/qemu&minus;speed&minus;test.c</i></p>


<p style="margin-left:11%; margin-top: 1em"><small>GCC</small>
warnings are now enabled for OCaml-C bindings in the OCaml
virt tools.</p>

<p style="margin-left:11%; margin-top: 1em">The code for
editing files used by <i>virt&minus;edit</i>(1),
<i>guestfish</i>(1) <tt>&quot;edit&quot;</tt> command,
<i>virt&minus;customize</i>(1) <i>&minus;&minus;edit</i>
option and more is now shared between all these utilities
(thanks Pino Toscano).</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>FUSE</small> tests were rewritten in C to ensure
finer control over how system calls are tested.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>update&minus;bugs.sh</i> script has been fixed so it
should no longer create an empty <tt>&quot;BUGS&quot;</tt>
file if the Bugzilla server is unavailable.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>virt&minus;resize</i>(1) tests now use a stochastic
method to ensure much deeper and broader testing.</p>

<p style="margin-left:11%; margin-top: 1em">When the
network is enabled, the appliance now uses
<small>DHCP</small> to acquire an <small>IP</small>
address.</p>

<p style="margin-left:11%; margin-top: 1em">If libvirt is
being used then the appliance will connect to
<tt>&quot;virbr0&quot;</tt> (can be overridden by setting
<tt>&quot;LIBGUESTFS_BACKEND_SETTINGS=network_bridge=&lt;some_bridge&gt;&quot;</tt>).
This enables full-featured network connections, with working
<small>ICMP,</small> ping and so on.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/1153515</p>

<p style="margin-left:17%;">empty (but set)
<small>LIBGUESTFS_BACKEND</small> prints libguestfs: error:
invalid backend:</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151766</p>

<p style="margin-left:17%;">libguestfs-bash-completion
package contains file
/usr/share/bash&minus;completion/completions/virt&minus;log,
but no <i>_virt_log()</i> function in that file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151738</p>

<p style="margin-left:17%;">typo error in man page of
virt-edit</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1151033</p>

<p style="margin-left:17%;">virt&minus;v2v conversions from
VMware vCenter server run slowly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1150880</p>

<p style="margin-left:17%;">virt&minus;v2v: warning:
display &lt;graphics type=&rsquo;sdl&rsquo;&gt; was ignored
when converting rhel5 guest with sdl graphics</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1150867</p>


<p style="margin-left:17%;">&rsquo;copy&minus;file&minus;to&minus;file
/src /dest&rsquo; create file /dest even if command
&rsquo;copy&minus;file&minus;to&minus;file /src /dest&rsquo;
failed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1150815</p>

<p style="margin-left:17%;">Can not find &quot;
<small>RECURSIVE LONG LISTING&quot;</small> in &rsquo;man
virt&minus;diff&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1150701</p>

<p style="margin-left:17%;">virt&minus;v2v does not fstrim
data disks and non-mounted filesystems</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1150475</p>

<p style="margin-left:17%;">Exporting 2+ disk guest to
<small>RHEV,</small> only one disk shows after import</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1148355</p>

<p style="margin-left:17%;">virt-filesystems: incorrect
<small>LVM</small> vg name when listing Fedora 21 Alpha
Atomic image filesystems</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1148072</p>

<p style="margin-left:17%;">Option missing
&minus;&minus;no&minus;selinux&minus;relabel</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1148012</p>

<p style="margin-left:17%;"><small>RFE:</small> Allow
qemu-bridge-helper to be used to implement
guestfs_set_network</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1146815</p>

<p style="margin-left:17%;">virt&minus;v2v prints warning:
/files/etc/fstab/8/spec references unknown device
&quot;cdrom&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1146275</p>

<p style="margin-left:17%;">regression setting root
password with virt&minus;builder/virt&minus;customize</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1146017</p>

<p style="margin-left:17%;">virt&minus;v2v &minus;v
&minus;x during windows guest conversion will hang at hivex:
hivex_open: used block id &#8230;&#8230;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1145995</p>

<p style="margin-left:17%;">Improve the error info when
converting windows guest with unclean file system</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1145916</p>

<p style="margin-left:17%;">virt&minus;v2v fails to convert
win7 guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1144891</p>

<p style="margin-left:17%;"><small>RFE:</small> stat calls
do not return nanosecond timestamps</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1144766</p>

<p style="margin-left:17%;"><i>futimens()</i> is a no-op
via guestmount</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1144201</p>

<p style="margin-left:17%;">guestfish can not restore
terminal&rsquo;s output colour when exit guestfish, if the
terminal&rsquo;s background colour is black then it will
make a inconvenient</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1143949</p>

<p style="margin-left:17%;">virt-customize option
&rsquo;&minus;&minus;password&minus;crypto&rsquo; do not
work</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1143887</p>

<p style="margin-left:17%;">Warning shows when converting
guests to rhev:chown: changing ownership of
&lsquo;/tmp/v2v.u48xag/*.ovf&rsquo;: Invalid argument</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1143883</p>

<p style="margin-left:17%;">warning shows when converting
rhel7 guest:virt&minus;v2v:could not update grub2 console:
aug_get: no matching node (ignored)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1143866</p>

<p style="margin-left:17%;">virt&minus;v2v fails with
error: cannot open Packages index using db5</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1142416</p>

<p style="margin-left:17%;">part-get-name give
&rsquo;libguestfs: error: part_get_name: parted does not
support the machine output (&minus;m)&rsquo; error message
when run &rsquo;part&minus;get&minus;name /dev/sda
1&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1142186</p>

<p style="margin-left:17%;">virt-sysprep option
&rsquo;&minus;&minus;mount&minus;options&rsquo; don&rsquo;t
work well</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1142158</p>

<p style="margin-left:17%;">Illegal command
&rsquo;part&minus;get&minus;name /dev/sda1 1&rsquo; cause
libguestfs appliance crashed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1142004</p>

<p style="margin-left:17%;">virt&minus;v2v prints
warning:WARNING:/files/boot/grub/device.map references
unknown device &quot;xvda&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141723</p>

<p style="margin-left:17%;">virt&minus;v2v: error: disk sda
has no defined format shows when converting xen hvm
guest</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141680</p>

<p style="margin-left:17%;">[ <small>RFE</small> ]
virt&minus;v2 should support convert a domain with using
domain&rsquo;s <small>UUID</small> instead of domain
name</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141631</p>

<p style="margin-left:17%;">[ <small>RFE</small> ]
virt&minus;v2 should support convert a guest to a dir-pool
with using pool&rsquo;s uuid</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141157</p>

<p style="margin-left:17%;">virt-sysprep option
&rsquo;&minus;&minus;user&minus;accounts&rsquo; don&rsquo;t
work well</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141145</p>

<p style="margin-left:17%;">virt&minus;v2v fails to convert
xen pv guests.</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1141113</p>

<p style="margin-left:17%;">virt&minus;v2v fails to convert
esx guests</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1140946</p>

<p style="margin-left:17%;">qemu-img shows error message
for backing file twice</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1140894</p>

<p style="margin-left:17%;">No error messages output if
append &rsquo;&minus;&minus;format qcow2&rsquo; after
&rsquo;&minus;a guest.img&rsquo;, guest.img is a raw format
image file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1140547</p>

<p style="margin-left:17%;">virt-builder option
&rsquo;&minus;&minus;format&rsquo; don&rsquo;t work well</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1140156</p>

<p style="margin-left:17%;"><small>RFE:</small> Export to
<small>RHEV</small> data domain</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1140050</p>

<p style="margin-left:17%;">No error shows when multiple
conflicting options used with virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1139973</p>

<p style="margin-left:17%;">Improve the error info when
converting xen guest with no passwordless <small>SSH</small>
access configured</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1139543</p>

<p style="margin-left:17%;">Improve the error info when
converting guest with no space left</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1138586</p>

<p style="margin-left:17%;">No error shows when converting
running guest with virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1138184</p>

<p style="margin-left:17%;">virt&minus;v2v will fail when
converting guests with initramfs&minus;*kdump.img under
/boot</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1138182</p>

<p style="margin-left:17%;">xen guest will be kernel panic
after converted by virt&minus;v2v</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1130189</p>

<p style="margin-left:17%;">Annoying message about
permissions of /dev/kvm</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1123007</p>

<p style="margin-left:17%;">libguestfs &rsquo;direct&rsquo;
backend should close file descriptors before exec-ing qemu
to avoid leaking !O_CLOEXEC fds</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1122557</p>

<p style="margin-left:17%;">virt-sparsify overwrites block
devices if used as output files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1113156</p>

<p style="margin-left:17%;">Empty fstab breaks libguestfs
inspection</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1111662</p>


<p style="margin-left:17%;">Guestfs.Error(&quot;vgchange_uuid_all:
Volume group has active logical volumes&quot;)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1109174</p>

<p style="margin-left:17%;">virt-win-reg manual page is
corrupted</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1106548</p>

<p style="margin-left:17%;">root gets an error accessing to
a non-root dir on a snapshot guestmount <small>VMDK</small>
img</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1103877</p>

<p style="margin-left:17%;">These APIs also need to add to
&lsquo;guestfish &minus;h&lsquo; command list</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1102448</p>

<p style="margin-left:17%;">mageia package list is
incorrect</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1102447</p>

<p style="margin-left:17%;">libguestfs 1.27.13 does not
build due to libxml library order</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1100498</p>

<p style="margin-left:17%;"><small>RFE:</small> non-polling
mechanism to detect guestmount &minus;&minus;no&minus;fork
readiness</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1099490</p>

<p style="margin-left:17%;">scrub-file can&rsquo;t handle
link file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1099284</p>

<p style="margin-left:17%;">typo errors in man pages</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1098718</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt-builder aliases</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1096465</p>

<p style="margin-left:17%;">virt-builder
&quot;proxy=off&quot; setting doesn&rsquo;t turn off the
proxy for downloads</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1094746</p>

<p style="margin-left:17%;">virt-sparsify man failes to
mention what happens to snapshots within a qcow2 image (they
are discarded)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1092753</p>

<p style="margin-left:17%;">virt-builder: If several repos
contain the same os-version images, then they are duplicated
in &minus;l output</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1091803</p>

<p style="margin-left:17%;">tar-in-opts execute failed that
cause libguestfs appliance crashed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1088424</p>

<p style="margin-left:17%;">virt-resize: libguestfs error:
part_set_name: parted: /dev/sdb: Error during translation:
Invalid or incomplete multibyte or wide character</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1088262</p>

<p style="margin-left:17%;">virt-builder cannot write to a
block device</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1085029</p>

<p style="margin-left:17%;">Ruby tests fail with latest
Ruby</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1079210</p>

<p style="margin-left:17%;">virt-sparsify
&minus;&minus;in&minus;place cannot sparsify as much as it
should</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1079182</p>

<p style="margin-left:17%;">virt-df cannot report used disk
space of windows guest when updated to 6.5</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1077817</p>

<p style="margin-left:17%;">virt-builder error:
&quot;syntax error at line 3: syntax error&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1056290</p>

<p style="margin-left:17%;">virt-sparsify overwrites block
devices if used as output files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/812970</p>

<p style="margin-left:17%;">virt-rescue cannot set
&ge;&lt;rescue&gt; prompt, on Ubuntu 12.04</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.26
<a name="RELEASE NOTES FOR LIBGUESTFS 1.26"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.24.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
Tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;customize</i>(1)
is a new tool for customizing virtual machine disk images.
It lets you install packages, edit configuration files, run
scripts, set passwords and so on.
<i>virt&minus;builder</i>(1) and
<i>virt&minus;sysprep</i>(1) use virt-customize, and command
line options across all these tools are now identical.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;diff</i>(1)
is a new tool for showing the differences between the
filesystems of two virtual machines. It is mainly useful
when showing what files have been changed between
snapshots.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;builder</i>(1)
has been greatly enhanced. There are many more ways to
customize the virtual machine. It can pull templates from
multiple repositories. A parallelized internal xzcat
implementation speeds up template decompression.
Virt-builder uses an optimizing planner to choose the
fastest way to build the <small>VM.</small> It is now easier
to use virt-builder from other programs.
Internationalization support has been added to metadata.
More efficient SELinux relabelling of files. Can build
guests for multiple architectures. Error messages have been
improved. (Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sparsify</i>(1)
has a new <i>&minus;&minus;in&minus;place</i> option. This
sparsifies an image in place (without copying it) and is
also much faster. (Lots of help provided by Paolo
Bonzini)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sysprep</i>(1)
can delete and scrub files under user control. You can lock
user accounts or set random passwords on accounts. Can
remove more log files. Can unsubscribe a guest from Red Hat
Subscription Manager. New flexible way to enable and disable
operations. (Wanlong Gao, Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;win&minus;reg</i>(1)
allows you to use URIs to specify remote disk images.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;format</i>(1)
can now pass the extra space that it recovers back to the
host.</p>


<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i>(1)
has additional environment variables to give fine control
over the <tt>&quot;&gt;&lt;fs&gt;&quot;</tt> prompt.
Guestfish reads its (rarely used) configuration file in a
different order now so that local settings override global
settings. (Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;make&minus;fs</i>(1)
was rewritten in C, but is unchanged in terms of
functionality and command line usage.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">The OCaml
bindings have a new <tt>&quot;Guestfs.Errno&quot;</tt>
module, used to check the error number returned by
<tt>&quot;Guestfs.last_errno&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><small>PHP</small>
tests now work. (Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><i>Inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Inspection can
recognize Debian live images.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Architectures</i></p>

<p style="margin-left:11%; margin-top: 1em">ARMv7 (32 bit)
now supports <small>KVM</small> acceleration.</p>

<p style="margin-left:11%; margin-top: 1em">Aarch64 (
<small>ARM 64</small> bit) is supported, but the appliance
part does not work yet.</p>


<p style="margin-left:11%; margin-top: 1em"><small>PPC64</small>
support has been fixed and enhanced.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<br>
Denial of service when inspecting disk images with corrupt
btrfs <br>
volumes</p>

<p style="margin-left:17%;">It was possible to crash
libguestfs (and programs that use libguestfs as a library)
by presenting a disk image containing a corrupt btrfs
volume.</p>

<p style="margin-left:17%; margin-top: 1em">This was caused
by a <small>NULL</small> pointer dereference causing a
denial of service, and is not thought to be exploitable any
further.</p>

<p style="margin-left:17%; margin-top: 1em">See commit
d70ceb4cbea165c960710576efac5a5716055486 for the fix. This
fix is included in libguestfs stable branches
&ge;&nbsp;1.26.0, &ge;&nbsp;1.24.6 and &ge;&nbsp;1.22.8, and
also in <small>RHEL</small> &ge;&nbsp;7.0. Earlier versions
of libguestfs are not vulnerable.</p>

<p style="margin-left:11%;">Better generation of random
root passwords and random seeds</p>

<p style="margin-left:17%;">When generating random root
passwords and random seeds, two bugs were fixed which are
possibly security related. Firstly we no longer read
excessive bytes from <i>/dev/urandom</i> (most of which were
just thrown away). Secondly we changed the code to avoid
modulo bias. These issues were not thought to be
exploitable. (Both changes suggested by Edwin
T&ouml;r&ouml;k)</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>API</small></b>
<small><br>
GUID</small> parameters are now validated when they are
passed to <small>API</small> calls, whereas previously you
could have passed any string. (Pino Toscano)</p>

<p style="margin-left:11%; margin-top: 1em"><i>New APIs</i>
<br>
&quot;guestfs_add_drive_opts&quot;: new &quot;discard&quot;
parameter</p>

<p style="margin-left:17%;">The new
<tt>&quot;discard&quot;</tt> parameter allows fine-grained
control over discard/trim support for a particular disk.
This allows the host file to become more sparse (or
thin-provisioned) when you delete files or issue the
<tt>&quot;guestfs_fstrim&quot;</tt> <small>API</small>
call.</p>


<p style="margin-left:11%;">&quot;guestfs_add_domain&quot;:
new parameters: &quot;cachemode&quot;,
&quot;discard&quot;</p>

<p style="margin-left:17%;">These parameters are passed
through when adding the domain&rsquo;s disks.</p>


<p style="margin-left:11%;">&quot;guestfs_blkdiscard&quot;</p>

<p style="margin-left:17%;">Discard all blocks on a guestfs
device. Combined with the <tt>&quot;discard&quot;</tt>
parameter above, this makes the host file sparse.</p>


<p style="margin-left:11%;">&quot;guestfs_blkdiscardzeroes&quot;</p>

<p style="margin-left:17%;">Test if discarded blocks read
back as zeroes.</p>

<p style="margin-left:11%;">&quot;guestfs_compare_*&quot;
<br>
&quot;guestfs_copy_*&quot;</p>

<p style="margin-left:17%;">For each struct returned
through the <small>API,</small> libguestfs now generates
<tt>&quot;guestfs_compare_*&quot;</tt> and
<tt>&quot;guestfs_copy_*&quot;</tt> functions to allow you
to compare and copy structs.</p>


<p style="margin-left:11%;">&quot;guestfs_copy_attributes&quot;</p>

<p style="margin-left:17%;">Copy attributes (like
permissions, xattrs, ownership) from one file to another.
(Pino Toscano)</p>


<p style="margin-left:11%;">&quot;guestfs_disk_create&quot;</p>

<p style="margin-left:17%;">A flexible <small>API</small>
for creating empty disk images from scratch. This avoids the
need to call out to external programs like
<i>qemu&minus;img</i>(1).</p>


<p style="margin-left:11%;">&quot;guestfs_get_backend_settings&quot;
<br>
&quot;guestfs_set_backend_settings&quot;</p>

<p style="margin-left:17%;">Per-backend settings (can also
be set via the environment variable
<tt>&quot;LIBGUESTFS_BACKEND_SETTINGS&quot;</tt>). The main
use for this is forcing <small>TCG</small> mode in the
qemu-based backends, for example:</p>

<pre style="margin-left:17%; margin-top: 1em"> export LIBGUESTFS_BACKEND=direct
 export LIBGUESTFS_BACKEND_SETTINGS=force_tcg</pre>



<p style="margin-left:11%;">&quot;guestfs_part_get_name&quot;</p>

<p style="margin-left:17%;">Get the label or name of a
partition (for <small>GPT</small> disk images).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Build
changes</b> <br>
The following extra packages are required to build
libguestfs 1.26: <br>
supermin &ge; 5</p>

<p style="margin-left:17%;">Supermin version 5 is required
to build this version of libguestfs.</p>

<p style="margin-left:11%;">flex, bison</p>

<p style="margin-left:17%;">Virt-builder now uses a real
parser to parse its metadata file, so these tools are
required.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>xz</p></td>
<td width="3%"></td>
<td width="83%">


<p>This is now a required build dependency, where
previously it was (in theory) optional.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<small><br>
PO</small> message extraction rewritten to be more robust.
(Pino Toscano)</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;podwrapper&quot;</tt>
gives an error if the <i>&minus;&minus;insert</i> or
<i>&minus;&minus;verbatim</i> argument pattern is not
found.</p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs now
passes the qemu <i>&minus;enable&minus;fips</i> option to
enable <small>FIPS,</small> if qemu supports it.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;./configure
&minus;&minus;without&minus;qemu&quot;</tt> can be used if
you don&rsquo;t want to specify a default hypervisor.</p>

<p style="margin-left:11%; margin-top: 1em">Copy-on-write [
<small>COW</small> ] overlays, used for example for
read-only drives, are now created through an internal
backend <small>API</small>
(<tt>&quot;.create_cow_overlay&quot;</tt>).</p>

<p style="margin-left:11%; margin-top: 1em">Libvirt backend
uses some funky C macros to generate <small>XML.</small>
These are simpler and safer.</p>

<p style="margin-left:11%; margin-top: 1em">The ChangeLog
file format has changed. It is now just the same as
<tt>&quot;git log&quot;</tt>, instead of using a custom
format.</p>

<p style="margin-left:11%; margin-top: 1em">Appliance
start-up has changed:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The libguestfs appliance now
initializes <small>LVM</small> the same way as it is done on
physical machines.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The libguestfs appliance does not write an empty string
to <i>/proc/sys/kernel/hotplug</i> when starting up.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Note that you
<b>must</b> configure your kernel to have
<tt>&quot;CONFIG_UEVENT_HELPER_PATH=&quot;&quot;&quot;</tt>
otherwise you will get strange <small>LVM</small> errors
(this applies as much to any Linux machine, not just
libguestfs). (Peter Rajnoha)</p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs can
now be built on arches that have <i>ocamlc</i>(1) but not
<i>ocamlopt</i>(1). (Hilko Bengen, Olaf Hering)</p>

<p style="margin-left:11%; margin-top: 1em">You cannot use
<tt>&quot;./configure &minus;&minus;disable&minus;daemon
&minus;&minus;enable&minus;appliance&quot;</tt>. It made no
sense anyway. Now it is expressly forbidden by the configure
script.</p>

<p style="margin-left:11%; margin-top: 1em">The packagelist
file uses <tt>&quot;m4&quot;</tt> for macro expansion
instead of <tt>&quot;cpp&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/1073906</p>

<p style="margin-left:17%;">java bindings
inspect_list_applications2 throws
java.lang.ArrayIndexOutOfBoundsException:</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1063374</p>

<p style="margin-left:17%;">[ <small>RFE</small> ] enable
subscription manager clean or unregister operation to
sysprep</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1060404</p>

<p style="margin-left:17%;">virt-resize does not preserve
<small>GPT</small> partition names</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1057504</p>

<p style="margin-left:17%;">mount-local should give a
clearer error if root is not mounted</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1056290</p>

<p style="margin-left:17%;">virt-sparsify overwrites block
devices if used as output files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1055452</p>

<p style="margin-left:17%;">libguestfs: error: invalid
backend: appliance</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1054761</p>

<p style="margin-left:17%;">guestfs_pvs prints
&quot;unknown device&quot; if a physical volume is
missing</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1053847</p>

<p style="margin-left:17%;">Recommended default clock/timer
settings</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1046509</p>

<p style="margin-left:17%;">ruby-libguestfs throws
&quot;expecting 0 or 1 arguments&quot; on
Guestfs::Guestfs.new</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1045450</p>

<p style="margin-left:17%;">Cannot inspect cirros 0.3.1
disk image fully</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1045033</p>


<p style="margin-left:17%;">LIBVIRT_DEFAULT_URI=qemu:///system
breaks libguestfs</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1044585</p>

<p style="margin-left:17%;">virt-builder network (eg.
&minus;&minus;install) doesn&rsquo;t work if resolv.conf
sets nameserver 127.0.0.1</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1044014</p>

<p style="margin-left:17%;">When <small>SSSD</small> is
installed, libvirt configuration requires authentication,
but not clear to user</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1039995</p>

<p style="margin-left:17%;">virt-make-fs fails making
fat/vfat whole disk: Device partition expected, not making
filesystem on entire device &rsquo;/dev/sda&rsquo; (use
&minus;I to override)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1039540</p>

<p style="margin-left:17%;">virt-sysprep to delete more
logfiles</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1033207</p>

<p style="margin-left:17%;"><small>RFE:</small> libguestfs
inspection does not recognize Free4NAS live
<small>CD</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1028660</p>

<p style="margin-left:17%;"><small>RFE:</small>
virt&minus;sysprep/virt&minus;builder should have an option
to lock a user account</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1026688</p>

<p style="margin-left:17%;">libguestfs fails examining
libvirt guest with ceph drives: rbd: image name must begin
with a &rsquo;/&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1022431</p>

<p style="margin-left:17%;">virt-builder fails if
<tt>$HOME</tt>/.cache doesn&rsquo;t exist</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1022184</p>

<p style="margin-left:17%;">libguestfs: do not use
versioned jar file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1020806</p>

<p style="margin-left:17%;">All libguestfs
<small>LVM</small> operations fail on Debian/Ubuntu</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1008417</p>

<p style="margin-left:17%;">Need update helpout of
part-set-gpt-type</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/953907</p>

<p style="margin-left:17%;">virt-sysprep does not correctly
set the hostname on Debian/Ubuntu</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/923355</p>

<p style="margin-left:17%;">guestfish prints literal
&quot;\n&quot; in error messages</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/660687</p>

<p style="margin-left:17%;">guestmount: &quot;touch&quot;
command fails: touch: setting times of
&lsquo;timestamp&rsquo;: Invalid argument</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/593511</p>

<p style="margin-left:17%;">[ <small>RFE</small> ] function
to get partition name</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/563450</p>

<p style="margin-left:17%;">list-devices returns devices of
different types out of order</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.24
<a name="RELEASE NOTES FOR LIBGUESTFS 1.24"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.22.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <br>
User-Mode Linux ( <small>UML</small> ) can be used as an
alternative backend (ie. instead of <small>KVM</small> ).
This improves performance especially when using libguestfs
inside a <small>VM</small> (eg. in the cloud).
<small>UML</small> is supported as a first-class backend.
See &quot;USER-MODE <small>LINUX BACKEND&quot;</small> in
<i>guestfs</i>(3) for how to use this.</p>


<p style="margin-left:11%; margin-top: 1em"><small>ARM</small>
(32 bit) and <small>PPC64</small> are now fully
supported.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;builder</i>(1)
is a new tool for building virtual machine images. It lets
you rapidly and securely create guests and customize
them.</p>

<p style="margin-left:11%; margin-top: 1em">New
<i>virt&minus;sysprep</i>(1) operations: Remove files in
<i>/tmp</i> and <i>/var/tmp</i>. Remove <small>RPM</small>
database files. Change root and user passwords. More log
files are removed. New operations which are not enabled by
default: Create random UUIDs for filesystems. Reset firewall
rules. (Wanlong Gao)</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;resize</i>(1)
and virt-sysprep can now use URIs to specify a remote
disk.</p>

<p style="margin-left:11%; margin-top: 1em">Use
<tt>&quot;guestfish &minus;N filename=type&quot;</tt> to
create a named disk image (instead of the default
<i>test1.img</i> etc).</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;sparsify</i>(1)
now tests if there is enough disk space to complete the
operation, instead of possibly running out of space half way
through.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virt&minus;format</i>(1)
and <i>virt&minus;make&minus;fs</i>(1): new
<i>&minus;&minus;label</i> option for setting filesystem
label.</p>

<p style="margin-left:11%; margin-top: 1em">virt-resize
<i>&minus;&minus;no&minus;sparse</i> flag can be used to
resize on to partitions and other targets that are not
zeroed.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">New bindings
for the Go programming language.</p>


<p style="margin-left:11%; margin-top: 1em"><i><small>API</small></i></p>

<p style="margin-left:11%; margin-top: 1em">Support for the
systemd journal.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_add_drive_opts&quot;</tt>
can now control the qemu caching mode through a new
<tt>&quot;cachemode&quot;</tt> parameter. You can select
improved performance for temporary drives, or safety.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfs_set_label&quot;</tt>
now works for <small>XFS</small> and btrfs.</p>

<p style="margin-left:11%; margin-top: 1em">New
<small>GUESTFS_EVENT_WARNING</small> event for warning
messages.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Better
inspection of <small>SUSE</small> guests (Olaf Hering).</p>

<p style="margin-left:11%; margin-top: 1em">Better support
for non-standard Windows <tt>%systemroot</tt>% (Matthew
Booth).</p>

<p style="margin-left:11%; margin-top: 1em">Enhanced error
reporting for Augeas errors.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<small><br>
CVE&minus;2013&minus;2124</small></p>


<p style="margin-left:17%;">https://bugzilla.redhat.com/show_bug.cgi?id=968306</p>

<p style="margin-left:17%; margin-top: 1em">A denial of
service was possible when inspecting certain guests. The fix
has been backported to 1.20 and 1.22 branches.</p>


<p style="margin-left:11%;"><small>CVE&minus;2013&minus;4419</small></p>


<p style="margin-left:17%;">https://www.redhat.com/archives/libguestfs/2013&minus;October/msg00031.html</p>

<p style="margin-left:17%; margin-top: 1em">Fix insecure
temporary directory handling for remote guestfish. The fix
has been backported to 1.20 and 1.22 branches.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;"> add&minus;drive&minus;scratch: Add a temporary scratch drive
 aug&minus;label
 aug&minus;setm
 journal&minus;open: Systemd journal support
 journal&minus;close
 journal&minus;next
 journal&minus;skip
 journal&minus;get
 journal&minus;get&minus;data&minus;threshold
 journal&minus;set&minus;data&minus;threshold
 remount: Allow rw flag to be adjusted on mounted filesystems
 set&minus;uuid: Set UUID of filesystem</pre>



<p style="margin-left:11%; margin-top: 1em">&quot;is&minus;file&quot;,
<tt>&quot;is&minus;dir&quot;</tt>,
<tt>&quot;is&minus;blockdev&quot;</tt>,
<tt>&quot;is&minus;chardev&quot;</tt>,
<tt>&quot;is&minus;fifo&quot;</tt>,
<tt>&quot;is&minus;socket&quot;</tt> APIs now have an extra
<tt>&quot;followsymlinks&quot;</tt> flag.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;add&minus;drive&quot;</tt>
has a new <tt>&quot;cachemode&quot;</tt> parameter.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Build
changes</b> <br>
The following packages are required to build libguestfs
1.24: <br>
Augeas &ge; 1.0.0</p>

<p style="margin-left:11%; margin-top: 1em">The following
optional packages may be added to enhance functionality but
are not required: <br>
sd-journal</p>

<p style="margin-left:17%;">To read journal files from
guests which use that.</p>

<p style="margin-left:11%;">url_mkcow</p>

<p style="margin-left:17%;">For <small>UML</small>
backend.</p>

<p style="margin-left:11%;">curl</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>gpg</p></td>
<td width="2%"></td>
<td width="26%">
</td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>xz</p></td>
<td width="2%"></td>
<td width="26%">


<p>For virt-builder.</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%;">golang &ge; 1.1.1</p>

<p style="margin-left:17%;">For Go language bindings.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
New <tt>&quot;make check&minus;*&quot;</tt> rules replace
<tt>&quot;make extra&minus;tests&quot;</tt>. See
<tt>&quot;make help&quot;</tt> and <i>guestfs</i>(3) for
details.</p>

<p style="margin-left:11%; margin-top: 1em">Perl code can
now be valgrinded.</p>

<p style="margin-left:11%; margin-top: 1em">Inspection code
is now fuzz-tested.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make&quot;</tt>
no longer recurses into the generator directory in every
other directory. This reduces the overhead of builds
considerably.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
tests for Augeas, hivex.</p>

<p style="margin-left:11%; margin-top: 1em">Add a launch
timeout of 20 minutes waiting for the appliance to start
up.</p>

<p style="margin-left:11%; margin-top: 1em">Add a timeout
(4 hours) to all tests so we can catch the case where qemu
or other components hang.</p>

<p style="margin-left:11%; margin-top: 1em">Use kvmclock
and <tt>&quot;&minus;cpu host&quot;</tt>. This improves
clock stability and overall performance.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;./configure
&minus;&minus;enable&minus;packet&minus;dump&quot;</tt> mode
is fixed.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;./configure
&minus;&minus;enable&minus;valgrind&minus;daemon&quot;</tt>
mode has been rewritten. It is now feasible for developers
to keep this flag enabled at all times.</p>

<p style="margin-left:11%; margin-top: 1em">Backends have
been refactored to be modular (although they are not
actually loadable modules).</p>

<p style="margin-left:11%; margin-top: 1em">When enabled,
the network now uses resolver configuration (ie.
/etc/resolv.conf) from the host.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/1019889</p>

<p style="margin-left:17%;">libguestfs&minus;tools.conf
should have a man page</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1018149</p>

<p style="margin-left:17%;">valgrind errors in
btrfs_subvolume_list</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1002032</p>

<p style="margin-left:17%;">mke2fs can&rsquo;t return the
correct filesystem type when blockscount is less than 2048
for ext3</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1001876</p>

<p style="margin-left:17%;">Update &quot;rsync-out&quot;
helpout for using wildcard</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1001875</p>

<p style="margin-left:17%;">Argument &rsquo;excludes&rsquo;
of tar-out does not work</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1000428</p>

<p style="margin-left:17%;">virt-format uses wrong
partition type for vfat filesystems</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/1000121</p>

<p style="margin-left:17%;">&rsquo;sh&rsquo; command before
mount causes daemon to segfault</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/998513</p>

<p style="margin-left:17%;">guestfish does not work when
you mix &minus;&minus;remote and &minus;&minus;add
options</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/998482</p>

<p style="margin-left:17%;">guestfish remote prints
&quot;libguestfs: error: waitpid (qemu): No child
processes&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/995711</p>

<p style="margin-left:17%;">list-filesystems command fails
if there are no block devices</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/994517</p>

<p style="margin-left:17%;">cache=none/O_DIRECT workaround
doesn&rsquo;t work for images with backing files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/989356</p>

<p style="margin-left:17%;">cap-get-file will return error
if the file has not be set capabilities</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/986877</p>

<p style="margin-left:17%;"><small>RFE:</small> Implement
set-uuid command</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/986875</p>

<p style="margin-left:17%;"><small>RFE:</small> Implement
set-label for xfs</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/985269</p>

<p style="margin-left:17%;">Can&rsquo;t set acl value for a
specified user with
&rsquo;acl&minus;set&minus;file&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/983218</p>

<p style="margin-left:17%;">libguestfs double free when
kernel link fails during launch</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/981715</p>

<p style="margin-left:17%;">Make xfs filesystem failed with
specified blocksize, gives &quot;unknown option
&minus;b&quot; error</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/981683</p>

<p style="margin-left:17%;">&quot;hivex-commit&quot; should
fail with a relative path</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/981663</p>

<p style="margin-left:17%;">disk-format &quot;qemu-img
info: <small>JSON</small> parse error&quot; when target file
does not exist</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/978302</p>

<p style="margin-left:17%;">mke2fs&minus;J should give a
meaningful error when specified type is anything except
&rsquo;ext{2,3,4}&rsquo;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/975797</p>

<p style="margin-left:17%;">Specifying virtio interface
(&rsquo;iface&rsquo; parameter) breaks the direct backend
&minus; libguestfs hangs</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/975753</p>

<p style="margin-left:17%;">&quot;virt-resize
&minus;&minus;expand&quot; and &quot;virt-resize
&minus;&minus;resize&quot; outputs error message for Win2008
32bit <small>OS</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/975412</p>

<p style="margin-left:17%;">inspection: Augeas expressions
are broken with augeas &gt;= 0.10</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/974904</p>

<p style="margin-left:17%;">virt-resize
&minus;&minus;expand fails on Ubuntu Cloud Image</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/974489</p>

<p style="margin-left:17%;">Regression: Fedora inspection
broken by change from guestfs_exists to guestfs_is_file</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/972775</p>

<p style="margin-left:17%;">txz-out command produces a
bzip2&minus;compressed file (should be xz-compressed)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/969845</p>

<p style="margin-left:17%;">upload to a directory
occasionally hangs instead of failing</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/968875</p>

<p style="margin-left:17%;">virt-sysprep should support
URL-type arguments</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/624334</p>

<p style="margin-left:17%;">blockdev-setbsz succeeds, but
does not affect blockdev-getbsz</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.22
<a name="RELEASE NOTES FOR LIBGUESTFS 1.22"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.20.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><small><br>
API</small></i></p>

<p style="margin-left:11%; margin-top: 1em">Remote access
to disks:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>Network Block Device (nbd)</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>Secure Shell (ssh)</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p><small>HTTP</small> and <small>HTTPS</small></p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p><small>FTP</small> and <small>FTPS</small></p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>iSCSI</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>Gluster</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>Ceph/rbd (Mike Kelly)</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p>Sheepdog</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="40%">


<p><small>TFTP</small></p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The
<small>SYSLINUX</small> and <small>EXTLINUX</small>
bootloaders can now be installed in disk images using the
<small>API.</small></p>

<p style="margin-left:11%; margin-top: 1em">Inspection can
now handle filesystems such as btrfs where subvolumes are
separately mountable (Matthew Booth).</p>

<p style="margin-left:11%; margin-top: 1em">&quot;Attach
methods&quot; are now known as &quot;backends&quot;.
Compatibility with existing code is preserved.</p>

<p style="margin-left:11%; margin-top: 1em">Filenames can
contain &rsquo;:&rsquo;, as long as newer
<small>QEMU</small> is being used.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Tools</i></p>


<p style="margin-left:11%; margin-top: 1em">Virt-alignment-scan
and virt-df scan multiple guests in parallel.</p>

<p style="margin-left:11%; margin-top: 1em">Guestmount now
passes errno accurately back to userspace in almost all
cases.</p>

<p style="margin-left:11%; margin-top: 1em">Guestfish and
other tools can now use a URI-like syntax to access remote
disks, eg:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfish &minus;a ssh://example.com/path/to/disk.img</pre>


<p style="margin-left:11%; margin-top: 1em">Guestfish and
guestmount now allow you to specify the filesystem type when
mounting, which is more secure (Dave Vasilevsky).</p>

<p style="margin-left:11%; margin-top: 1em">Guestfish is
now the &quot;guest filesystem shell&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Guestfish
allows only <tt>1 &quot;true&quot; &quot;t&quot;
&quot;yes&quot; &quot;y&quot; &quot;on&quot; 0
&quot;false&quot; &quot;f&quot; &quot;no&quot; &quot;n&quot;
&quot;off&quot;</tt> for boolean values (case insensitive),
and gives an error for all other strings.</p>

<p style="margin-left:11%; margin-top: 1em">New tool
<tt>&quot;guestunmount&quot;</tt> for unmounting
<small>FUSE</small> filesystems safely.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestmount
&minus;&minus;no&minus;fork&quot;</tt> flag prevents
guestmount from daemonizing.</p>

<p style="margin-left:11%; margin-top: 1em">Virt-resize now
uses sparse copies by default, saving considerable space for
guests which are mostly empty.</p>

<p style="margin-left:11%; margin-top: 1em">Bash tab
completion has been rewritten and can now handle most tools,
and correctly tab-complete
<tt>&quot;&minus;&minus;long&quot;</tt> options. In
addition, bash completion scripts are loaded on demand.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">The Java
<small>API</small> now supports events.</p>

<p style="margin-left:11%; margin-top: 1em">The Python
object now inherits from the <tt>&quot;object&quot;</tt>
base class.</p>

<p style="margin-left:11%; margin-top: 1em">Python methods
which previously returned lists of tuples can now be made to
return a Python dict. For backwards compatibility, you have
to enable this by using the constructor option
<tt>&quot;guestfs.GuestFS&nbsp;(python_return_dict=True)&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>PHP</small> bindings are now tested properly, and
have had multiple fixes.</p>

<p style="margin-left:11%; margin-top: 1em">The
long-deprecated Perl <tt>&quot;Sys::Guestfs::Lib&quot;</tt>
library has been removed.
https://www.redhat.com/archives/libguestfs/2013&minus;April/msg00001.html</p>


<p style="margin-left:11%; margin-top: 1em"><i>Examples</i></p>

<p style="margin-left:11%; margin-top: 1em">New example
program showing how to enable debugging and capture log
messages.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Other</i></p>

<p style="margin-left:11%; margin-top: 1em">Distributors
can add arbitrary extra packages to the appliance by
doing:</p>

<pre style="margin-left:11%; margin-top: 1em"> ./configure &minus;&minus;with&minus;extra&minus;packages=&quot;list of package names&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">Distributors
can use:</p>

<pre style="margin-left:11%; margin-top: 1em"> ./configure &minus;&minus;with&minus;supermin&minus;extra&minus;options=&quot;...&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">to add
arbitrary extra options to supermin.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<br>
No security issues were found in this release.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;"> cp&minus;r
 extlinux
 feature&minus;available
 get&minus;program
 is&minus;whole&minus;device
 part&minus;get&minus;gpt&minus;type
 part&minus;set&minus;gpt&minus;type
 rename
 set&minus;program
 syslinux</pre>


<p style="margin-left:11%; margin-top: 1em">C only:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfs_event_to_string</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
The febootstrap tool has now been renamed to
&quot;supermin&quot;. Libguestfs can use either, but now
prefers &quot;supermin&quot;.
http://people.redhat.com/~rjones/supermin/</p>

<p style="margin-left:11%; margin-top: 1em">libxml2 is
required to build libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">The
hivexregedit program (from hivex) is required to build from
git.</p>

<p style="margin-left:11%; margin-top: 1em">Internal
functions can no longer be used unless the caller defines
<tt>&quot;&minus;DGUESTFS_PRIVATE=1&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Enable C
compiler warnings in Python, Ruby bindings.</p>

<p style="margin-left:11%; margin-top: 1em">Fail early and
clearly if libvirt does not support qemu/KVM (eg. if default
libvirt connection is to Xen).</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
print&minus;subdirs&quot;</tt> rule, useful for selectively
running tests.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple fixes
to allow separated (sourcedir != builddir) builds.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple fixes
to Haskell bindings.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;ln&quot;</tt>
and <tt>&quot;ln&minus;f&quot;</tt> APIs now capture
<tt>&quot;errno&quot;</tt> correctly.</p>

<p style="margin-left:11%; margin-top: 1em">Language
binding tests use (mostly) a standard numbering scheme and
aim to test the same range of features in each language.
Also the number of launches required has been reduced so
these tests should run much more quickly.</p>

<p style="margin-left:11%; margin-top: 1em">Library code
internally uses <small>GCC</small>
<tt>&quot;__attribute__((cleanup))&quot;</tt> (if available)
to simplify memory allocation.</p>

<p style="margin-left:11%; margin-top: 1em">Internal header
files have been reorganized. See the comments in
<i>src/guestfs&minus;internal*.h</i></p>

<p style="margin-left:11%; margin-top: 1em">Internal code
shared between the library and certain tools is now located
in a static <tt>&quot;libutils&quot;</tt> library.</p>

<p style="margin-left:11%; margin-top: 1em">Almost all
subdirectories can now use parallel builds, although note
that the top-level directories still build in series.</p>

<p style="margin-left:11%; margin-top: 1em">Use of
<tt>&quot;PATH_MAX&quot;</tt> and
<tt>&quot;NAME_MAX&quot;</tt> has been eliminated from the
code.</p>

<p style="margin-left:11%; margin-top: 1em">The Java
<small>API</small> now requires <small>JVM</small> &ge;
1.6.</p>

<p style="margin-left:11%; margin-top: 1em">Force use of
<tt>&quot;serial&minus;tests&quot;</tt> with automake &ge;
1.12.</p>

<p style="margin-left:11%; margin-top: 1em">Use of sockets
in the library protocol layer is abstracted, allowing other
non-POSIX layers to be added in future (see
<i>src/conn&minus;socket.c</i>).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;qemu&minus;img
info &minus;&minus;output json&quot;</tt> is used if
available, for more secure parsing of the output of this
command.</p>

<p style="margin-left:11%; margin-top: 1em">Distros can now
use <tt>&quot;make INSTALLDIRS=vendor install&quot;</tt> to
place Ruby bindings in vendordir. This eliminates a
non-upstream patch carried by both Fedora and Debian.</p>

<p style="margin-left:11%; margin-top: 1em">Valgrind log
files are now written to <i>tmp/valgrind&minus;
<small>DATE</small> &minus; <small>PID</small> .log</i></p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
clean&quot;</tt> cleans the local <tt>&quot;tmp/&quot;</tt>
directory.</p>

<p style="margin-left:11%; margin-top: 1em">The C
<small>API</small> tests have been rewritten using a more
flexible generator language that allows arbitrary C code to
be executing during tests.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/961812</p>

<p style="margin-left:17%;">Segfault in inspect&minus;fs.c
in mountable code</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/957772</p>

<p style="margin-left:17%;">tar-out and base64&minus;out
quoting error</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/957380</p>

<p style="margin-left:17%;">libguestfs: error:
btrfsvol:/dev/sda2/root: root device not found: only call
this function with a root device previously returned by
guestfs_inspect_os</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/948324</p>

<p style="margin-left:17%;">inspection fails if libosinfo
is not installed</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/928995</p>

<p style="margin-left:17%;">file on zero-sized file now
produces &quot;empty &quot; instead of &quot;empty&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/921292</p>

<p style="margin-left:17%;">qemu: could not open disk image
/tmp/.../snapshot1: Permission denied</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/921040</p>

<p style="margin-left:17%;">&quot;error: external command
failed, see earlier error messages&quot; message needs to
change</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/920225</p>

<p style="margin-left:17%;">libguestfs should use
&minus;&minus;output json (if supported) to safely parse the
output of qemu-img command</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/916780</p>

<p style="margin-left:17%;">feature request: guestmount
&minus;&minus;with&minus;cleanup&minus;pipefd</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/914934</p>

<p style="margin-left:17%;">oom-killer kills guestfsd when
tar-in a lot of data</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/914931</p>

<p style="margin-left:17%;">FileIn commands cause segfault
if appliance dies during the file copy in</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/913145</p>

<p style="margin-left:17%;">Misc leaks in
virNetClientProgramCall in libvirt 1.0.2</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/912499</p>

<p style="margin-left:17%;">Security context on image file
gets reset</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/909836</p>

<p style="margin-left:17%;">libguestfs-test-tool
&minus;&minus;qemu segfaults</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/909624</p>

<p style="margin-left:17%;">Unexpected non-tail recursion
in recv_from_daemon results in stack overflow in very
long-running <small>API</small> calls that send progress
messages</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/908322</p>

<p style="margin-left:17%;">virt-tar fails on non-existent
directory names &quot;error in chunked encoding at
/home/rjones/d/libguestfs/tools/virt&minus;tar line
272.&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/908321</p>

<p style="margin-left:17%;">virt-cat fails on directory
names &quot;/dev/stdout: error in chunked encoding&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/907554</p>

<p style="margin-left:17%;">btrfs causes subsequent
ntfs&minus;3g filesystem to fail</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/905341</p>

<p style="margin-left:17%;">&quot;No such file or
directory&quot; when execute &quot;hivex-commit&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/903620</p>

<p style="margin-left:17%;">btrfs_subvolume_list broken due
to change in subvolume list output</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/895910</p>

<p style="margin-left:17%;">guestmount: <i>rename()</i>
incorrectly follows symbolic links</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/895905</p>

<p style="margin-left:17%;">guestmount: <i>link()</i>
incorrectly returns <small>ENOENT,</small> when it should be
<small>EXDEV</small></p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/895904</p>

<p style="margin-left:17%;">checksums-out fail to compute
the checksums of all regular files in directory</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/894545</p>

<p style="margin-left:17%;">libguestfs <small>FTBFS</small>
on Fedora 19 because of new ruby</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/890027</p>

<p style="margin-left:17%;">virt-sysprep: Setting hostname,
domain name and pretty name on Fedora 18 correctly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/887971</p>

<p style="margin-left:17%;">pvcreate fails if partition
contains a swap signature</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/887520</p>

<p style="margin-left:17%;">zero_free_space: open:
/sysroot//ujqqq135.rd3: Cannot allocate memory</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/886915</p>

<p style="margin-left:17%;">libguestfs with libvirt
attach-method fails with odd error if default hypervisor is
Xen</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/847549</p>

<p style="margin-left:17%;">Adding a zero-length
virtio-scsi disk causes: qemu-kvm: hw/scsi&minus;bus.c:1568:
scsi_req_complete: Assertion &lsquo;req&minus;&gt;status ==
&minus;1&rsquo; failed.</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/811649</p>

<p style="margin-left:17%;">libguestfs cannot open disk
images which are symlinks to files that contain
&rsquo;:&rsquo; (colon) character</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/664558</p>

<p style="margin-left:17%;"><small>RFE:</small> Allow to
set log callback in Ruby bindings</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.20
<a name="RELEASE NOTES FOR LIBGUESTFS 1.20"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.18.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
libvirt and sVirt (SELinux confinement)</i></p>

<p style="margin-left:11%; margin-top: 1em">You can
<i>optionally</i> use libvirt to launch and manage the
backend appliance by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>setting
<tt>&quot;LIBGUESTFS_ATTACH_METHOD=libvirt[:URI]&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>using <tt>&quot;./configure
&minus;&minus;with&minus;default&minus;attach&minus;method=libvirt[:URI]&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>or calling the <small>API</small> method
<tt>&quot;guestfs_set_attach_method&quot;</tt></p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">SVirt (SELinux
confinement) is used to secure the libguestfs appliance, if
the libvirt backend is selected.</p>


<p style="margin-left:11%; margin-top: 1em"><i>virtio-scsi,
larger number of drives, hotplugging</i></p>

<p style="margin-left:11%; margin-top: 1em">Virtio-scsi is
now used by default, if it is available. This greatly
increases the number of drives that can be added to a single
libguestfs handle (up to 255).</p>

<p style="margin-left:11%; margin-top: 1em">You can now
hotplug drives (add and remove drives after launch).</p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs can
now handle &gt; 25 disks, in all APIs, tools and tests.</p>

<p style="margin-left:11%; margin-top: 1em">You can label
drives when adding them, then refer to them by label
(<i>/dev/disk/guestfs/LABEL</i>) instead of having to use
device names (<i>/dev/sda</i>).</p>

<p style="margin-left:11%; margin-top: 1em"><i>new library
features</i></p>


<p style="margin-left:11%; margin-top: 1em"><small>POSIX</small>
Access Control Lists (ACLs) and Linux filesystem
capabilities can now be read and written through the
<small>API.</small></p>

<p style="margin-left:11%; margin-top: 1em">Windows Dynamic
Disks are now supported. The metadata can only be read
(volumes cannot be modified or created). However the
data/filesystems in the volumes themselves can be mounted,
read and written (Matthew Booth).</p>

<p style="margin-left:11%; margin-top: 1em">Hivex (Windows
Registry editing) is now directly supported through the
<small>API,</small> making reading or editing the Windows
Registry much more efficient.</p>

<p style="margin-left:11%; margin-top: 1em">Several
libguestfs APIs were reimplemented so they no longer have
any limits on output. The reimplemented APIs are:
<tt>&quot;guestfs_cat&quot;</tt>,
<tt>&quot;guestfs_find&quot;</tt>,
<tt>&quot;guestfs_read_file&quot;</tt>,
<tt>&quot;guestfs_read_lines&quot;</tt>,
<tt>&quot;guestfs_write&quot;</tt>,
<tt>&quot;guestfs_write_append&quot;</tt>,
<tt>&quot;guestfs_lstatlist&quot;</tt>,
<tt>&quot;guestfs_lxattrlist&quot;</tt>,
<tt>&quot;guestfs_readlinklist&quot;</tt>,
<tt>&quot;guestfs_ls&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>virt
tools</i></p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfish
touch 'win:c:\new_file'&quot;</tt> now works as
expected.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestfish&quot;</tt>
has a new <i>&minus;&minus;network</i> option, which enables
the user network in libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">You can set
<tt>&quot;GUESTFISH_PS1&quot;</tt> to use fancy prompts in
<tt>&quot;guestfish&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;rsync&quot;</tt>,
<tt>&quot;ssh&quot;</tt>, <tt>&quot;less&quot;</tt> and
<tt>&quot;lrzip&quot;</tt> commands are now available in
virt-rescue. In addition, <tt>&quot;rsync&quot;</tt> can be
used through the <small>API</small> for doing incremental
copies.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;virt&minus;sparsify&quot;</tt>
uses qcow2 v3 for increased efficiency.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;virt&minus;sysprep&quot;</tt>
enhancements:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">generate new UUIDs for PVs and
VGs</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove the local machine <small>ID</small> (Wanlong
Gao)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove <small>ABRT</small> data (Wanlong Gao)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove puppet keys and log files (Wanlong Gao)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove process accounting files (Wanlong Gao)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>new <i>&minus;&minus;firstboot</i> parameter allowing
firstboot scripts for customizing guests</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove <small>HOSTNAME</small> field from
<tt>&quot;ifcfg&minus;eth*&quot;</tt> files (Wanlong
Gao)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>miscellaneous improvements for SuSE (Olaf Hering)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove man pages cache (Wanlong Gao)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>remove crash data generated by kexec-tools (Wanlong
Gao)</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;virt&minus;make&minus;fs&quot;</tt>
can now create virtual floppy disks (VFDs).</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;guestmount&quot;</tt>
has a <i>&minus;&minus;pid&minus;file</i> option, which can
be used to avoid a race condition between unmounting the
filesystem and using the underlying disk image.</p>

<p style="margin-left:11%; margin-top: 1em"><i>language
bindings</i></p>

<p style="margin-left:11%; margin-top: 1em">Full-featured
Lua bindings have been added in this release (thanks to
Jerome Vuarand for many suggestions).</p>

<p style="margin-left:11%; margin-top: 1em">In Ruby,
optional arguments hash is optional.</p>

<p style="margin-left:11%; margin-top: 1em">In Python,
optional arguments now don&rsquo;t use special
&quot;sentinel&quot; values, so any integer can be passed as
an optional argument.</p>

<p style="margin-left:11%; margin-top: 1em">Erlang bindings
now come with examples and tests.</p>

<p style="margin-left:11%; margin-top: 1em">Erlang bindings
now handle 64 bit integer parameters correctly.</p>

<p style="margin-left:11%; margin-top: 1em">The automated
&rsquo;bindtests&rsquo; now test for 64 bit cleanliness in
parameter passing. Several bugs in the bindings were found
and fixed as a result.</p>

<p style="margin-left:11%; margin-top: 1em">Better handling
of blocking and non-blocking functions should make
libguestfs calls more efficient.</p>


<p style="margin-left:11%; margin-top: 1em"><i>inspection</i></p>

<p style="margin-left:11%; margin-top: 1em">Windows guests
with unlimited-sized Registries are now supported. By adding
the hivex <small>API</small> to the libguestfs
<small>API,</small> it is much more efficient and easier to
inspect and modify the Windows Registry in guests.</p>

<p style="margin-left:11%; margin-top: 1em">Better support
for SuSE guests (Olaf Hering).</p>

<p style="margin-left:11%; margin-top: 1em">Return the
architecture of installed applications (John
Eckersberg).</p>

<p style="margin-left:11%; margin-top: 1em">Windows 8 is
now supported.</p>

<p style="margin-left:11%; margin-top: 1em">Fedora 18 is
now supported.</p>

<p style="margin-left:11%; margin-top: 1em">Inspection of
ISOs/CDs/DVDs can now use the libosinfo database.</p>


<p style="margin-left:11%; margin-top: 1em"><i>ports</i></p>

<p style="margin-left:11%; margin-top: 1em">Libguestfs
without the appliance can be compiled on Mac <small>OS
X</small> (Masami <small>HIRATA</small> ).</p>

<p style="margin-left:11%; margin-top: 1em"><small>RHEL
5</small> is now explicitly supported through the
&rsquo;oldlinux&rsquo; branch in upstream git.</p>

<p style="margin-left:11%; margin-top: 1em">PowerPC 64 bit
is now supported. Also libguestfs has been examined for
endianness bugs and these have been fixed.</p>


<p style="margin-left:11%; margin-top: 1em"><i>daemon</i></p>

<p style="margin-left:11%; margin-top: 1em">A man page for
the daemon (<i>guestfsd</i>(8)) is included.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Security</b>
<i><br>
guestfish history file</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<i>$HOME/.guestfish</i> history file is now created with
0600 permissions (instead of 0644 before) so it is no longer
world readable.</p>


<p style="margin-left:11%; margin-top: 1em"><i><small>CVE&minus;2012&minus;2690</small></i></p>

<p style="margin-left:11%; margin-top: 1em">Old versions of
both <tt>&quot;virt&minus;edit&quot;</tt> and the
<tt>&quot;guestfish&quot; &quot;edit&quot;</tt> command
created a new file containing the changes but did not set
the permissions, etc of the new file to match the old one.
The result of this was that if you edited a security
sensitive file such as <i>/etc/shadow</i> then it would be
left world-readable after the edit.</p>

<p style="margin-left:11%; margin-top: 1em">This issue was
assigned <small>CVE&minus;2012&minus;2690,</small> and is
fixed in libguestfs &ge; 1.16.</p>

<p style="margin-left:11%; margin-top: 1em">For further
information, see
https://bugzilla.redhat.com/show_bug.cgi?id=788642</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;"> acl&minus;delete&minus;def&minus;file
 acl&minus;get&minus;file
 acl&minus;set&minus;file
 canonical&minus;device&minus;name
 cap&minus;get&minus;file
 cap&minus;set&minus;file
 create&minus;flags
 device&minus;index
 disk&minus;has&minus;backing&minus;file
 disk&minus;format
 disk&minus;virtual&minus;size
 filesystem&minus;available
 fill&minus;dir
 fstrim
 get&minus;cachedir
 get&minus;libvirt&minus;requested&minus;credentials
 get&minus;libvirt&minus;requested&minus;credential&minus;prompt
 get&minus;libvirt&minus;requested&minus;credential&minus;challenge
 get&minus;libvirt&minus;requested&minus;credential&minus;defresult
 get&minus;tmpdir
 hivex&minus;close
 hivex&minus;commit
 hivex&minus;node&minus;add&minus;child
 hivex&minus;node&minus;children
 hivex&minus;node&minus;delete&minus;child
 hivex&minus;node&minus;get&minus;child
 hivex&minus;node&minus;get&minus;value
 hivex&minus;node&minus;name
 hivex&minus;node&minus;parent
 hivex&minus;node&minus;set&minus;value
 hivex&minus;node&minus;values
 hivex&minus;open
 hivex&minus;root
 hivex&minus;value&minus;key
 hivex&minus;value&minus;type
 hivex&minus;value&minus;utf8
 hivex&minus;value&minus;value
 inspect&minus;list&minus;applications2 (John Eckersberg)
 list&minus;ldm&minus;volumes
 list&minus;ldm&minus;partitions
 ldmtool&minus;create&minus;all
 ldmtool&minus;diskgroup&minus;disks
 ldmtool&minus;diskgroup&minus;name
 ldmtool&minus;diskgroup&minus;volumes
 ldmtool&minus;remove&minus;all
 ldmtool&minus;scan
 ldmtool&minus;scan&minus;devices
 ldmtool&minus;volume&minus;hint
 ldmtool&minus;volume&minus;partitions
 ldmtool&minus;volume&minus;type
 ls0
 max&minus;disks
 mke2fs (Wanlong Gao)
 mklost&minus;and&minus;found
 mkswap [added label and uuid optional arguments]
 mktemp (Wanlong Gao)
 nr&minus;devices
 parse&minus;environment
 parse&minus;environment&minus;list
 rm&minus;f
 rsync
 rsync&minus;in
 rsync&minus;out
 set&minus;cachedir
 set&minus;libvirt&minus;supported&minus;credentials
 set&minus;libvirt&minus;requested&minus;credential
 set&minus;tmpdir
 shutdown [backported to 1.16 and 1.18]
 tar&minus;in [added compress flag]
 tar&minus;out [added compress, numericowner, excludes flags]
 umount [added force and lazy optional arguments]
 utsname
 xfs&minus;admin (Wanlong Gao)
 xfs&minus;growfs (Wanlong Gao)
 xfs&minus;info (Wanlong Gao)
 xfs&minus;repair (Wanlong Gao)</pre>


<p style="margin-left:11%; margin-top: 1em">In the C
<small>API</small> only:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfs_push_error_handler
 guestfs_pop_error_handler</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b>
<br>
qemu &ge; 1.1 is required (&ge; 1.2 preferred).</p>

<p style="margin-left:11%; margin-top: 1em">febootstrap
&ge; 3.20 is required.</p>

<p style="margin-left:11%; margin-top: 1em">libvirt is
optional, but if you want to use the new libvirt backend for
launching the appliance then libvirt &ge; 0.10.2 would be
required.</p>

<p style="margin-left:11%; margin-top: 1em">Coverity has
been run over the complete codebase, and many issues fixed
(thanks Ondrej Vasik, Kamil Dudka).</p>

<p style="margin-left:11%; margin-top: 1em">Functions which
previously had no optargs can now be converted to ones with
optargs, making extending the <small>API</small> much more
flexible. Source and binary backwards compatibility is
preserved for users of the <small>API.</small></p>

<p style="margin-left:11%; margin-top: 1em">The way that
libguestfs APIs and structures are represented in the
generator has changed to use an OCaml struct instead of a
tuple. This makes generator descriptions more flexible and
easier to understand. For details see commits 39d1a7db and
eb185eef.</p>

<p style="margin-left:11%; margin-top: 1em">Separation of
the library code into more files:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Launch backends are now located
in separate files eg. <i>src/launch&minus;appliance.c</i>,
<tt>&quot;src/launch&minus;libvirt.c&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Generated action code is now split over several
<i>src/action*.c</i> files, for faster compilation.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The huge <i>src/guestfs.c</i> file is now split into
smaller logical units.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><small>POD</small>
(documentation) is now generated using a rewritten Perl
program instead of pod2* + shell scripts.</p>

<p style="margin-left:11%; margin-top: 1em">Man pages now
contain stable dates (Hilko Bengen).</p>

<p style="margin-left:11%; margin-top: 1em">Skipped tests
now exit with code 77, so they appear as
<tt>&quot;SKIP:&quot;</tt> in <tt>&quot;make
check&quot;</tt> output.</p>

<p style="margin-left:11%; margin-top: 1em">The parallel
mount-local test has been rewritten in C (RHBZ#838081).</p>

<p style="margin-left:11%; margin-top: 1em">Ruby 1.8.5 is
now supported (though Ruby &ge; 1.9 is preferred).</p>

<p style="margin-left:11%; margin-top: 1em">Perl bindings
can be disabled via <tt>&quot;./configure
&minus;&minus;disable&minus;perl&quot;</tt> (Wulf C.
Krueger). Note that Perl is still required in order to build
libguestfs.</p>

<p style="margin-left:11%; margin-top: 1em">Java bindings
are now enabled/disabled using <tt>&quot;./configure
&minus;&minus;with&minus;java&quot;</tt> or
<tt>&quot;./configure
&minus;&minus;without&minus;java&quot;</tt> (Wulf C.
Krueger).</p>

<p style="margin-left:11%; margin-top: 1em">New configure
options <tt>&quot;./configure
&minus;&minus;enable&minus;code&minus;profiling&quot;</tt>
and <tt>&quot;./configure
&minus;&minus;enable&minus;code&minus;coverage&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Multiple fixes
to use of 64 bit integers in language bindings.</p>

<p style="margin-left:11%; margin-top: 1em">The appliance
backend now uses sgabios instead of vgabios (Dan
Berrange).</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;./run&quot;</tt> script now sets enough
environment variables that you can run OCaml, Python, Ruby,
Java, <small>GJS,</small> Erlang, Lua programs.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;./run
&minus;&minus;test&quot;</tt> flag for running tests with
minimal output. It also prints the time taken to run each
test.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;./run&quot;</tt> script now builds up paths
cumulatively, meaning that you can use
<tt>&quot;./run&quot;</tt> twice, or use the libguestfs and
libvirt <tt>&quot;./run&quot;</tt> scripts together.</p>

<p style="margin-left:11%; margin-top: 1em">You can extract
a list of external commands required by the daemon, making
building the appliance on certain distros easier (Olaf
Hering).</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;virt&minus;rescue&quot;</tt> command is now tested
during <tt>&quot;make check&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">The generator
now removes unused generated files. This helps when going
back and forth with git rebase, git bisect, etc.</p>

<p style="margin-left:11%; margin-top: 1em">Tests now run
in a separate toplevel <tt>&quot;tmp/&quot;</tt> directory
in the source. This allows the directory to be labelled for
SELinux (sVirt), and also makes it easier to clean up.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;make
syntax&minus;check&quot;</tt> now works to a greater extent,
and many problems in the main code that were found by
syntax-check have been fixed (thanks Jim Meyering).</p>

<p style="margin-left:11%; margin-top: 1em">Emacs mode
(&minus;*&minus; foo &minus;*&minus;) has been added to
generated files.</p>

<p style="margin-left:11%; margin-top: 1em">Progress bar
output is now sent to <i>/dev/tty</i> so it doesn&rsquo;t
end up in the regular output of the program. virt-resize and
virt-sparsify now suppress progress bars if stdout is not a
tty.</p>

<p style="margin-left:11%; margin-top: 1em">There is now a
<tt>&quot;./configure
&minus;&minus;without&minus;libvirt&quot;</tt> option. This
is useful for testing that the code still compiles without
libvirt.</p>

<p style="margin-left:11%; margin-top: 1em">There is now an
internal mini-library for running commands. This allows us
to redirect errors from external commands into events.</p>

<p style="margin-left:11%; margin-top: 1em">Code for
handling temporary directories and the appliance cache was
completely overhauled.</p>

<p style="margin-left:11%; margin-top: 1em">Code for
temporarily ignoring/disabling errors now looks like
this:</p>

<pre style="margin-left:11%; margin-top: 1em"> guestfs_push_error_handler (g, NULL, NULL);
 guestfs_mkdir (g, &quot;/foo&quot;); /* We don't care if this fails. */
 guestfs_pop_error_handler (g);</pre>


<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;tests/extra&quot;</tt> directory has gone. The
&quot;extra tests&quot; are now split into separately
runnable targets, such as <tt>&quot;make
check&minus;valgrind&quot;</tt>. Use <tt>&quot;make
help&quot;</tt> to get a summary of the targets.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;lpj&quot;</tt> option is passed to the appliance
kernel when using <small>TCG.</small> This should improve
clock stability (thanks Marcelo Tosatti, Olaf Hering).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b> <br>
https://bugzilla.redhat.com/882417</p>

<p style="margin-left:17%;">libguestfs tools fail with odd
error messages if <small>TMPDIR</small> is not an absolute
path</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/882299</p>

<p style="margin-left:17%;">Windows 8 guest disks
can&rsquo;t be mounted: &quot;The <small>NTFS</small>
partition is in an unsafe state. Please resume and shutdown
Windows fully (no hibernation or fast restarting), or mount
the volume read-only with the &rsquo;ro&rsquo; mount
option.&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/881953</p>

<p style="margin-left:17%;">libguestfs: migration to
/etc/hostname, /etc/vconsole.conf, /etc/locale.conf</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/880801</p>

<p style="margin-left:17%;">virt-df with two &minus;a
options displays incorrect disk image name</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/879416</p>

<p style="margin-left:17%;">libguestfs-test-tool pauses
when you use &minus;&minus;help option</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/876579</p>

<p style="margin-left:17%;">mke2fs <small>API</small> does
not apply block device naming translation to journaldevice
optarg</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/860235</p>

<p style="margin-left:17%;">SELinux policy ought to allow
qemu to write to unconfined_u:object_r:user_tmp_t:s0</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/859949</p>

<p style="margin-left:17%;"><small>RFE:</small>
inspect-list-applications does not return the architecture
of <small>RPM</small> packages</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/859885</p>

<p style="margin-left:17%;">inspect-list-applications does
not list all installed <small>RPM</small> packages with same
name and different versions</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/859876</p>

<p style="margin-left:17%;">guestfish printed paths are not
canonicalized</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/859875</p>

<p style="margin-left:17%;">Progress bar output should go
to tty(?) stderr(?)</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/858696</p>

<p style="margin-left:17%;">virt-sysprep reports
Guestfs.Error(&quot;read_lines: fopen:
/etc/sysconfig/network: No such file or directory&quot;) on
some Fedora guests</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/858128</p>

<p style="margin-left:17%;">libguestfs fail to list devices
added by add-drive-ro-with-if twice</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/858126</p>

<p style="margin-left:17%;">virt-inspector fail to work
with some windows guests</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/853762</p>

<p style="margin-left:17%;">virt-sparsify should use a more
robust method to detect the input format</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/853393</p>

<p style="margin-left:17%;">libvirt doesn&rsquo;t label
console, serial sockets</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/853159</p>

<p style="margin-left:17%;">virt-rescue in Fedora 18 is
completely broken</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/852394</p>

<p style="margin-left:17%;">libguestfs inspection limits
registries to 100 MiB</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/852194</p>

<p style="margin-left:17%;">virt-sparsify
&minus;&minus;compress fails if output is raw format</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/847881</p>

<p style="margin-left:17%;"><small>RFE:</small> allow extra
arguments (like &minus;&minus;exclude) to tar-out</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/847880</p>

<p style="margin-left:17%;">tar-out should allow (or force)
&minus;&minus;numeric&minus;owner</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/845522</p>

<p style="margin-left:17%;">guestfish &quot;copy-out /
localdir&quot; command fails with &quot;No such file or
directory&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/845488</p>

<p style="margin-left:17%;">Long filenames on
<small>NTFS</small> cause tar-out, copy-out etc to fail with
error &quot;Cannot open: File name too long&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/842307</p>

<p style="margin-left:17%;"><small>RFE:</small> Need help
designing and implementing selinux policy for
libguestfs/sVirt</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/840572</p>

<p style="margin-left:17%;">virt-make-fs / tar-in should
support vfat properly</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/840115</p>

<p style="margin-left:17%;">guestfish touch problem &minus;
case_sensitive_path <small>API</small> expects the file to
exist</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/836710</p>

<p style="margin-left:17%;">Data loss when writing to
qcow2&minus;format disk files</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/834712</p>

<p style="margin-left:17%;">lvresize, lvresize-free fail
unnecessarily if you don&rsquo;t change the size of the
<small>LV:</small> &quot;New size (nn extents) matches
existing size (nn extents)&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/824716</p>

<p style="margin-left:17%;">compress-device-out
didn&rsquo;t support bzip2</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/824043</p>

<p style="margin-left:17%;">guestfish unrecognized mount
option gives confusing error message</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/823887</p>

<p style="margin-left:17%;">Filenames containing Chinese
characters can&rsquo;t be created on vfat filesystems</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/823885</p>

<p style="margin-left:17%;">virt-make-fs cannot create vfat
filesystem containing filesystems with Chinese
characters</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/823883</p>

<p style="margin-left:17%;">virt-make-fs &minus;t fat fails
with an obscure error message</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/823821</p>

<p style="margin-left:17%;">Inspection fails when
/etc/HOSTNAME is empty</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/801117</p>

<p style="margin-left:17%;">libguestfs cannot get icon for
Windows 8</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/798979</p>

<p style="margin-left:17%;">Ubuntu install CDs from oneiric
onwards are not recognized: &quot;multi-boot operating
systems are not supported&quot;</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/782167</p>

<p style="margin-left:17%;">libguestfs doesn&rsquo;t
recognize Windows Dynamic disks in some configurations, eg.
spanned</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/713678</p>

<p style="margin-left:17%;">Not all febootstrap messages
are redirected to log callbacks</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/627675</p>

<p style="margin-left:17%;">libguestfs inspector code
cannot handle /dev/disk/by&minus;id/* paths</p>


<p style="margin-left:11%;">https://bugzilla.redhat.com/602997</p>

<p style="margin-left:17%;">part-get-bootable gives wrong
result with an unordered part layout</p>

<h2>RELEASE NOTES FOR LIBGUESTFS 1.18
<a name="RELEASE NOTES FOR LIBGUESTFS 1.18"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.16.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
virt tools</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; virt&minus;sysprep has been rewritten and expanded (thanks Wanlong Gao)
     http://libguestfs.org/virt&minus;sysprep.1.html
   &minus; virt&minus;sparsify &minus;&minus;zero is a new option that zeroes the named
     partition or filesystem
   &minus; virt&minus;sparsify can now safely sparsify Linux swap partitions
   &minus; virt&minus;sparsify fixed so it cleans up after ^C
     http://libguestfs.org/virt&minus;sparsify.1.html
   &minus; a new tool 'libguestfs&minus;make&minus;fixed&minus;appliance' is provided to build
     fixed appliances that can be copied to other machines that don't
     have febootstrap support
     http://libguestfs.org/libguestfs&minus;make&minus;fixed&minus;appliance.1.html
   &minus; virt&minus;filesystems now displays the parents (containers) of MD
     devices and volume groups
   &minus; virt&minus;alignment&minus;scan, run with no args, displays alignment information
     for all libvirt domains
   &minus; virt&minus;df and virt&minus;alignment&minus;scan will display information from all
     guests even when a disk is inaccessible
   &minus; virt&minus;rescue new &minus;&minus;scratch option to make scratch disks
     https://rwmj.wordpress.com/2012/04/26/virt&minus;rescue&minus;scratch/#content
   &minus; virt&minus;make&minus;fs can now be used to create btrfs
   &minus; virt&minus;edit preserves permissions, UID, GID and SELinux context
     when editing files
   &minus; guestfish passes the close event over stdout and remote correctly
   &minus; guestfish new '&minus;&minus;pipe&minus;error' option lets you detect errors in pipe
     commands
   &minus; guestfish globs now expand device names
   &minus; comma and colon characters in filenames now handled correctly by
     all virt tools</pre>



<p style="margin-left:11%; margin-top: 1em"><i>inspection</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; added support for Fedora 17+
   &minus; added support for FreeDOS
   &minus; added support for Buildroot and Cirros
   &minus; inspection is now compatible with Windows guests that have been
     sysprepped (thanks Grant Williamson).</pre>



<p style="margin-left:11%; margin-top: 1em"><i><small>API</small></i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; broad support for btrfs added, including adding multiple devices,
     fsck, snapshots (thanks Wanlong Gao)
   &minus; the new 'mount&minus;local' API brings FUSE support directly into the
     core libguestfs API
     https://rwmj.wordpress.com/2012/05/14/tip&minus;using&minus;mount&minus;local&minus;api&minus;from&minus;c/#content
   &minus; new man page: guestfs&minus;performance(1), which contains performance
     tuning tips
     http://libguestfs.org/guestfs&minus;performance.1.html
   &minus; new man page: guestfs&minus;faq(1), Frequently Asked Questions
     http://libguestfs.org/guestfs&minus;faq.1.html
   &minus; ENOTSUP (from guestfs_last_errno) is now returned for APIs that
     are not supported</pre>



<p style="margin-left:11%; margin-top: 1em"><i>examples</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; 'copy_over' example showing how to copy between two handles
   &minus; 'display_icon' program displays the icon associated with a guest
   &minus; 'mount_local.c' example shows how to use the mount&minus;local API</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;">  (no security problems were found or fixed in this release)</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  btrfs&minus;device&minus;add: Add devices to a btrfs filesystem.
  btrfs&minus;device&minus;delete: Remove devices from a btrfs filesystem.
  btrfs&minus;filesystem&minus;sync: Sync a btrfs filesystem.
  btrfs&minus;filesystem&minus;balance: Balance a btrfs filesystem.
  btrfs&minus;fsck: Check btrfs filesystem.
  btrfs&minus;set&minus;seeding: Enable or disable seeding.
  btrfs&minus;subvolume&minus;create: Create a btrfs snapshot.
  btrfs&minus;subvolume&minus;delete: Delete a btrfs snapshot.
  btrfs&minus;subvolume&minus;list: List btrfs snapshots and subvolumes.
  btrfs&minus;subvolume&minus;set&minus;default: Set default btrfs subvolume.
  btrfs&minus;subvolume&minus;snapshot: Create a writable btrfs snapshot.
  get&minus;e2attrs: List ext2 file attributes of a file.
  get&minus;e2generation: Get ext2 file generation of a file.
  isoinfo, isoinfo&minus;device: Get information from the header of ISO files.
  llz: List files with SELinux information.
  lvcreate&minus;free: Create an LVM logical volume in % remaining free space.
  md&minus;stat: Return underlying devices from an MD device.
  mkfs&minus;brtfs: Make btrfs filesystem, with all tunables.
  mount&minus;local, mount&minus;local&minus;run, umount&minus;local: FUSE support in the API.
  ntfsclone&minus;in, ntfsclone&minus;out: Save, restore NTFS from backup.
  ntfsfix: Fix common errors and force Windows to check NTFS.
  set&minus;e2attrs: Set or clear ext2 file attributes of a file.
  set&minus;e2generation: Set ext2 file generation of a file.
  set&minus;label: Unified interface for setting filesystem label.
  vgmeta: Get volume group metadata.
  wipefs: Wipe filesystem signatures from a device.
  zero&minus;free&minus;space: Zero free space in a filesystem.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; The debian/ subdirectory has been removed.  We recommend you use
   the official Debian packages made by Hilko Bengen.
   http://people.debian.org/~bengen/libguestfs/
   http://packages.debian.org/search?keywords=libguestfs
 &minus; O_CLOEXEC / SOCK_CLOEXEC is now used for almost all file
   descriptors that the library opens.
 &minus; posix_fadvise is called when sequentially reading or writing large
   files.
 &minus; close all file descriptors and remove all signal handlers in the
   recovery process
 &minus; multiple gcc warnings and Coverity bugs have been fixed;  many
   strict&minus;overflow bugs have also been fixed
 &minus; use ./configure &minus;&minus;enable&minus;valgrind&minus;daemon to use valgrind on the
   daemon;  many errors have been fixed
 &minus; use ./configure &minus;&minus;with&minus;qemu&minus;options to pass extra options to qemu
 &minus; the daemon now has a growable strings buffer type (DECLARE_STRINGSBUF)
 &minus; the &lt;guestfs.h&gt; header file works with C++ and we have a regression
   test for this
 &minus; multiple APIs which should only be called in the CONFIG state now
   give an error if they are not
 &minus; .gitignore fixed to use absolute paths
 &minus; gobject bindings have been expanded, including mapping libguestfs
   events to gobject signals (thanks Matt Booth)
 &minus; gobject documentation is generated properly (thanks Matt Booth)
 &minus; gobject header files now live in a subdirectory
 &minus; CompareWithString test in the generator now works
 &minus; FUInt32, FUInt64 struct field types now use the correct XDR type
 &minus; OCaml tests are now run on bytecode and native code.
 &minus; java &minus;Xlint:all is used, and all warnings have been fixed
 &minus; bmptopng, wrestool (etc) missing or failure no longer prints
   warning messages
 &minus; ruby: Use RbConfig instead of Config.
 &minus; PYTHONPATH is set by the ./run script.
 &minus; appliance building is now thread&minus;safe.
 &minus; appliance now uses 'ip' instead of 'ifconfig' and 'netstat'
   commands
 &minus; several fixes to make parallel builds work properly
 &minus; guestfish &minus;&minus;listen now cleans up properly
 &minus; the BUSY state has been removed
 &minus; gettextize has been removed, replaced by a simple Makefile.am
 &minus; gettext support now covers virt&minus;resize, virt&minus;sparsify and virt&minus;sysprep
 &minus; better support for the arm architecture</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 822490 virt&minus;ls error: &quot;libguestfs: error: checksum: path: parameter cannot be NULL&quot;
 &minus; 816839 data overflow error when debug progress &minus;1
 &minus; 816098 virt&minus;make&minus;fs fails to make a btrfs filesystem because it doesn't allocate enough space
 &minus; 811872 inspection fails on ubuntu 10.04 guest with encrypted swap
 &minus; 811650 guestfs_last_error not set when qemu fails early during launch
 &minus; 811649 libguestfs cannot open disk images which are symlinks to files that contain ':' (colon) character
 &minus; 811117 [RFE][virt&minus;sysprep] net&minus;hwaddr not removed from &quot;ifcfg&minus;*&quot; files on rhel
 &minus; 811112 [RFE][virt&minus;sysprep] hostname can not be changed on rhel system
 &minus; 809361 inspection doesn't recognize Fedora 18 (grub2 + GPT)
 &minus; 807905 mkfs blocksize option breaks when creating btrfs
 &minus; 805070 virt&minus;filesystems should show 'parents' of LV and RAID devices
 &minus; 804464 libguestfs cannot be built when LINGUAS is different then ja or uk
 &minus; 803664 libguestfs inspection fails on Windows XP: libguestfs: error: hivex: could not locate HKLM\SYSTEM\MountedDevices
 &minus; 803533 guestfish: write error
 &minus; 802389 event handlers for 'close' event doesn't work in remote mode
 &minus; 802109 libguestfs uses putc on stderr, results in many individual 1 byte writes of debug messages
 &minus; 801640 [RFE] the error reported by resize2fs&minus;M need to be more clear
 &minus; 801298 Possible null dereference and resource leaks
 &minus; 801273 Document for set&minus;pgroup need to be updated
 &minus; 798196 virt&minus;resize confuses format and output_format variables; using &minus;&minus;output&minus;format sets the input format
 &minus; 797986 virt&minus;resize on Windows XP in sysprep state causes &quot;UNMOUNTABLE_BOOT_VOLUME&quot; BSOD
 &minus; 796520 [RFE] Prevent user from running some appliance configure commands after appliance boot up
 &minus; 790721 multiprovider build error: RuntimeError: link: /tmp/.guestfs&minus;0/kernel /tmp/.guestfs&minus;0/kernel.10139: File exists
 &minus; 789960 guestfsd crash when try to mount non&minus;exist disk
 &minus; 789504 virt&minus;df (other tools?) should not give up if a guest disk is missing
 &minus; 788641 virt&minus;edit doesn't preserve file permissions
 &minus; 786215 libguestfs inspection does not recognize FreeDOS operating system
 &minus; 786188 libguestfs inspection does not recognize FreeDOS install CD
 &minus; 785668 aug&minus;defnode: daemon crash
 &minus; 784647 Libguestfs uses deprecated net&minus;tools
 &minus; 769304 virt&minus;resize on RHEL 6 kernel fails to re&minus;read the partition table
 &minus; 755729 Error message for resize2fs&minus;M needs tweaking
 &minus; 701814 virt&minus;win&minus;reg fails on a libvirt guest that has no defined disk format: &quot;format parameter is empty or contains disallowed characters&quot;
 &minus; 679737 libguestfs: improve error message when zerofree is not available in the appliance
 &minus; 635971 glob mkfs ext2 /dev/vd[b&minus;t]1 does not expand</pre>


<h2>RELEASE NOTES FOR LIBGUESTFS 1.16
<a name="RELEASE NOTES FOR LIBGUESTFS 1.16"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.14.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
libguestfs</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; allow XFS filesystems to be created over an existing filesystem
     (Wanlong Gao)
   &minus; the (unspecified) default alignment for part&minus;disk has been
     changed to 64K for better support of high&minus;end network&minus;attached
     storage
   &minus; new guestfs&minus;testing(1) man page
   &minus; list&minus;filesystems returns MD devices containing filesystems
     (Matthew Booth)
   &minus; support for GCC &gt;= 4.7 (Jim Meyering)
   &minus; check user does not add the same drive twice (Wanlong Gao).</pre>


<p style="margin-left:11%; margin-top: 1em"><i>language
bindings</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; Experimental GObject bindings, with support for GObject
     Introspection.  You can now use libguestfs from Javascript.
     Please note these are not stable and final in this release.
     (Matthew Booth).
   &minus; support for Ruby &gt;= 1.9
   &minus; Ruby bindings can be disabled individually (Hilko Bengen)
   &minus; support for Python 2.6, 3.x (Richard Jones, Hilko Bengen)
   &minus; support for PHP &gt;= 5.4
   &minus; new %guestfs_introspection hash is available in Perl bindings so
     you can query which optional arguments are available</pre>



<p style="margin-left:11%; margin-top: 1em"><i>inspection</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; guests with MD devices can be inspected (Matthew Booth)
   &minus; support for GNU/Hurd guests</pre>



<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; libguestfs events (such as progress bar events and log messages) can
     be trapped and processed by user&minus;defined shell scripts.
   &minus; MD devices are tab&minus;completed (Matthew Booth)</pre>


<p style="margin-left:11%; margin-top: 1em"><i>virt
tools</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; New tool virt&minus;format for erasing and making blank disks
   &minus; virt&minus;sparsify new &minus;&minus;compress and &minus;o options to allow for compressed
     and different format output
   &minus; virt&minus;sparsify can now detect and sparsify .vdi files
   &minus; virt&minus;sysprep no longer requires xmlstarlet; a new virt&minus;inspector &minus;&minus;xpath
     option has been added to replace this functionality
   &minus; virt&minus;rescue has a new &minus;&minus;suggest option which suggests mount commands
     for the guest
   &minus; virt&minus;resize no longer requires OCaml pcre library</pre>


<p style="margin-left:11%; margin-top: 1em"><i>libguestfs
live</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; daemon will no longer try to edit your live /etc/lvm configuration
   &minus; fix a potential security problem with predictable /tmp names (Steve Kemp)</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;">  CVE&minus;2011&minus;4127, RHBZ#757071
  Mitigate possible privilege escalation via SG_IO ioctl
  For more information, see: https://github.com/libguestfs/libguestfs/commit/9a5f784d511a8f00a8386f316eab41fe660430db</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  blkid: print all attributes of a device known to blkid (Wanlong Gao)
  e2fsck: access to more features of e2fsck (Wanlong Gao)
  list&minus;md&minus;devices: list of Linux MD devices (Matthew Booth)
  md&minus;create: create an MD device
  md&minus;detail: returns metadata for an MD device (Matthew Booth)
  md&minus;stop: stop an MD device (Wanlong Gao)
  tune2fs: allow ext2/3/4 filesystems to be tuned</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;">  Git hosting has moved to http://github.com/libguestfs
  The various test directories have been rearranged logically, and now
  all appear under 'tests/'.
  There is a 'make extra&minus;tests' rule which runs ordinary tests and
  additional tests, using valgrind to check for memory problems.
  Multiple memory leaks and other problems found by valgrind and fixed.
  Support for optional arguments in the generator has been rewritten
  to provide more features and safety (Matthew Booth).
  With gcc &minus;fvisibility=hidden is used for internal symbols, avoiding
  call indirection via the PLT.
  RHashtable functions can be tested in the generator.
  ADD_ARG macro in daemon allows arg lists to be constructed without
  risk of stack smashing.
  Fix generation of OCaml functions that have more than 10 arguments.
  psmisc has been added to the appliance, allowing use of 'fuser',
  'killall' and 'pstree' for debugging.
  bindtests now cover RBufferOut and optional arguments (Matthew Booth).</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 769680 temporary directories created during appliance builds are not cleaned up on error
 &minus; 761460 guestfs_utimens hangs on named pipes
 &minus; 761451 guestfs_utimens cannot set times on a directory
 &minus; 760775 &quot;guestfish: multi&minus;boot operating systems are not supported by the &minus;i option&quot; should be more explanatory
 &minus; 760669 guestfish copy&minus;in and &lt;! (inline execution) don't mix well: pclose: No child processes
 &minus; 760000 libguestfs fails to compile with Ruby &gt;= 1.9
 &minus; 755729 Error message for resize2fs&minus;M needs tweaking
 &minus; 750889 Python code incompatible with Python v3.
 &minus; 596761 Ctrl&minus;\ causes guestfish to abort</pre>


<h2>RELEASE NOTES FOR LIBGUESTFS 1.14
<a name="RELEASE NOTES FOR LIBGUESTFS 1.14"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.12.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b></p>

<pre style="margin-left:11%;">  Erlang bindings.
  virt&minus;alignment&minus;scan is a new tool to check the alignment of
  partitions within virtual machines or disk images.
  virt&minus;sparsify is a new tool to make virtual machine disk images
  sparse.
  virt&minus;sysprep is a new tool to make cloning guests from a template
  simpler.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>guestfish</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; New commands setenv, unsetenv, to set environment variables.
   &minus; The input file and line number is printed in error messages.
   &minus; guestfish progress bars are now a &quot;mini&minus;library&quot; used by other
     tools too.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>guestmount</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; the &minus;&minus;live option (for access to live VMs) now works.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-cat</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; virt&minus;cat can now handle Windows paths and drive letters (RHBZ#693359).</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-filesystems</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; the MBR partition type byte is displayed in &minus;&minus;long output.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-make-fs</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; virt&minus;make&minus;fs now sets the MBR partition type byte correctly,
     improving compatibility with Windows (RHBZ#746295).</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-resize</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; virt&minus;resize can now work with guests using extended and logical
     partitions, in particular Ubuntu guests.
   &minus; virt&minus;resize can now align the first partition of Windows guests,
     improving performance.  The new virt&minus;resize &minus;&minus;align&minus;first option
     controls this behaviour.
   &minus; The virt&minus;resize &minus;&minus;machine&minus;readable flag makes it possible to use
     virt&minus;resize from other programs.
   &minus; Partitions are now aligned to 128 sectors (usually 64K) by
     default.  This improves efficiency on high&minus;end storage.  The new
     virt&minus;resize &minus;&minus;alignment option allows the alignment to be
     adjusted.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-win-reg</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; The syntax for deleting registry keys and values is documented
     in the man page (RHBZ#737944).</pre>



<p style="margin-left:11%; margin-top: 1em"><i>library</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; non&minus;printing characters are escaped correctly in debug output.
   &minus; GUESTFS_EVENT_ENTER is a new event type generated whenever a
     libguestfs function is called.
   &minus; the library contains systemtap/DTrace probes.
   &minus; the library can now be compiled without hivex (RHBZ#723474).</pre>



<p style="margin-left:11%; margin-top: 1em"><i>inspection</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; Improve detection of Windows disks.
   &minus; Adds support for:
         ttylinux &minus; a minimal Linux
         Mageia (thanks Michael Scherer)
         OpenSUSE and zypper (thanks Michael Scherer, Vincent Untz)
         Ubuntu logos (thanks Michael Scherer)
         NetBSD and pkgsrc (thanks Michael Scherer)
   &minus; Handle some guest types that use /dev/root in /etc/fstab.
   &minus; Fix handling of guests with &gt; 26 disks (thanks Matthew Booth)
   &minus; Add support for guests with HP Smart Array disks (thanks Matthew Booth)</pre>



<p style="margin-left:11%; margin-top: 1em"><i>febootstrap</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; FEBOOTSTRAP_KERNEL, FEBOOTSTRAP_MODULES environment variables can
     be set in order to choose which kernel to use for the appliance.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>misc</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; ArchLinux support now working with Linux 3.0 (thanks Erik Nolte)
   &minus; libvirt disks marked &lt;readonly/&gt; are now added readonly when
     using the virt&minus;tools '&minus;d' option.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;">  (no security problems were found or fixed in this release)</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  compress&minus;out, compress&minus;device&minus;out, copy&minus;device&minus;to&minus;device,
  copy&minus;device&minus;to&minus;file, copy&minus;file&minus;to&minus;device, copy&minus;file&minus;to&minus;file,
  get&minus;smp, part&minus;to&minus;partnum, set&minus;smp.
  The mount API no longer implicitly adds &minus;o sync,noatime options.
  add&minus;domain has a new 'readonlydisk' optional parameter to control
  how &lt;readonly/&gt; disks are handled.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; Coverity was run on the source and more bugs were identified and
   fixed.
 &minus; PCRE library is now required to build libguestfs.
 &minus; APIC is now the default for the appliance.  You can also enable
   SMP support in the appliance.
 &minus; OCaml bindings now correctly acquire GC lock during callbacks.
 &minus; Out of tree builds should now work correctly (thanks Hilko Bengen).
 &minus; ./configure &minus;&minus;with&minus;extra=&quot;...&quot; can be used by packagers to set
   the extra version string.
 &minus; zero, zero&minus;device APIs: if the blocks already contain zeroes,
   don't write zeroes, so that we don't unnecessarily make the
   underlying storage non&minus;sparse.
 &minus; is&minus;zero, is&minus;zero&minus;device APIs: optimize these so zero detection is
   faster.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 748266 libguestfs should detect versions of qemu which require &minus;machine pc option
 &minus; 747290 libguestfs ignores &lt;readonly/&gt; in libvirt XML
 &minus; 747287 Misleading error message when permission denied opening a disk image
 &minus; 746295 virt&minus;make&minus;fs doesn't set partition ID
 &minus; 744795 guestmount &minus;&minus;live is not usable
 &minus; 737944 virt&minus;win&minus;reg hyphen (delete key) syntax may be wrong, and is not documented
 &minus; 733297 ruby event handlers fail with &quot;exception in callback: wrong argument type Proc (expected Data)&quot;
 &minus; 731744 libguestfs should escape special/non&minus;printing characters in debug output
 &minus; 729887 appliance crashes running aug_init with flags=4
 &minus; 729075 libguestfs confuses Hp_recovery partition with Windows root filesystem
 &minus; 727178 error: luks_open: cryptsetup: error while loading shared libraries: libfipscheck.so.1: cannot open shared object file: No such file or directory
 &minus; 726739 libguestfs: error: aug_get: no matching node, trying to find hostname
 &minus; 723474 If hivex and/or pcre not installed, libguestfs fails to compile
 &minus; 693359 virt&minus;cat and virt&minus;edit don't handle case sensitive NTFS paths properly
 &minus; 678231 virt&minus;inspector reports unknown filesystem UUID
 &minus; 671082 libguestfs does not work with kernel&minus;rt
 &minus; 666578 libguestfs: unknown filesystem label SWAP&minus;sda2
 &minus; 642821 virt&minus;resize falls over on a disk image with a logical swap partition</pre>


<h2>RELEASE NOTES FOR LIBGUESTFS 1.12
<a name="RELEASE NOTES FOR LIBGUESTFS 1.12"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.10.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b> <i><br>
guestfish</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; guestfish strings can use escapes,
     eg. &gt;&lt;fs&gt; write /foo &quot;line 1\nline 2\n&quot;
   &minus; guestfish write&minus;append command can be used to append to files.
   &minus; Long&minus;running file uploads and downloads can be cancelled through the
     API or by hitting ^C in guestfish.
   &minus; New guestfish &quot;display&quot; command for displaying graphical files
     inside guests.
   &minus; In guestfish, tab completion now works on /dev/mapper devices.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-inspector</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; Inspection API can get an icon or logo for certain guests.
   &minus; virt&minus;inspector includes the logo and hostname for certain guests.
   &minus; virt&minus;inspector can now get the version and release numbers for RPM
     packages.
   &minus; CentOS and Scientific Linux are now treated as separate distros by
     the inspection API.</pre>



<p style="margin-left:11%; margin-top: 1em"><i>virt-resize</i></p>


<pre style="margin-left:11%; margin-top: 1em">   &minus; virt&minus;resize can now handle btrfs.
   &minus; New virt&minus;resize &minus;&minus;ntfsresize&minus;force option allows Windows VMs to be
     resized multiple times.</pre>


<p style="margin-left:11%; margin-top: 1em"><i>other virt
tools</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; guestfish, guestmount, virt&minus;cat, virt&minus;df, virt&minus;edit, virt&minus;filesystems,
     virt&minus;inspector, virt&minus;ls and virt&minus;rescue now allow you to use
     &quot;&minus;d UUID&quot; option to specify a guest by UUID.  This makes them more
     robust to use from other programs.
   &minus; virt&minus;ls &minus;lR option allows complex file iteration and guest analysis.
   &minus; virt&minus;win&minus;reg supports HKEY_USERS\&lt;SID&gt; and HKEY_USERS\&lt;username&gt;.
   &minus; virt&minus;win&minus;reg new option &minus;&minus;unsafe&minus;printable&minus;strings allows printable
     strings to be displayed in the output (unsafely: read the documentation
     before using).
   &minus; virt&minus;edit has been rewritten in C.</pre>



<p style="margin-left:11%; margin-top: 1em"><i><small>API</small>
and language bindings</i></p>

<pre style="margin-left:11%; margin-top: 1em">   &minus; Java is now completely supported.
     See http://libguestfs.org/guestfs&minus;java.3.html
   &minus; JRuby is supported via the Java bindings.
   &minus; guestfs_close now appears in trace messages.
   &minus; Python binding adds explicit g.close() method.
   &minus; Python programs can now use the new event API.
   &minus; Python GIL is released during libguestfs calls, allowing multithreaded
     Python programs to work properly.
   &minus; 9pfs (Plan 9 filesystems exported from the host) are now supported.
   &minus; Add &minus;DGUESTFS_WARN_DEPRECATED=1 to warn about use of deprecated API
     functions in C programs.
   &minus; New manual page guestfs&minus;recipes(1) with recipes.
   &minus; mkfs&minus;opts can now set inode size and sector size on created filesystems
     (thanks Nikita Menkovich).
   &minus; guestfs_last_errno is now accessible from OCaml (as g#last_errno ()).</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;"> &minus; optargs_bitmask is checked even for calls that have no optional
   arguments.  This closes a possible exploit in the daemon from
   untrusted callers.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  btrfs&minus;filesystem&minus;resize, get&minus;pgroup, inspect&minus;get&minus;icon, is&minus;zero,
  is&minus;zero&minus;device, list&minus;9p, list&minus;dm&minus;devices, mount&minus;9p, ntfsresize&minus;opts,
  set&minus;pgroup, write&minus;append</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; Coverity (a static analysis tool) was run across the codebase and
   many fixes were made.
 &minus; Generator can handle functions that return RBufferOut and have
   optional arguments.
 &minus; Compatible with Perl 5.14.
 &minus; Compatible with gcc 4.6.
 &minus; Perform safety checks on QEMU.
 &minus; C API tests can now fully test calls that have optional arguments.
 &minus; Use ./configure &minus;&minus;enable&minus;install&minus;daemon to install /usr/sbin/guestfsd.
 &minus; po&minus;docs directory now covers all man pages.
 &minus; stderr from qemu process is now captured by the event subsystem.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 602997 part&minus;get&minus;bootable gives wrong result with an unordered part layout
 &minus; 661280 virt&minus;rescue: panic when shutting down: &quot;/sbin/reboot: No such file or directory&quot;
 &minus; 700369 qemu&minus;system&minus;x86_64 says 'KVM not supported for this target'
 &minus; 705200 guestmount attempt results in access denied
 &minus; 714981 'list&minus;filesystems' does not know about virtio 9p filesystems or detect existing mounts
 &minus; 717786 libguestfs python bindings should have an explicit close call
 &minus; 721275 virt&minus;resize in F16 should support btrfs</pre>


<h2>Release notes for libguestfs 1.10.0
<a name="Release notes for libguestfs 1.10.0"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.8.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b></p>

<pre style="margin-left:11%;"> &minus; libguestfs and tools can be used against live virtual machines.
   See the 'guestfish &minus;&minus;live' and 'guestmount &minus;&minus;live' options, and (for
   the low&minus;level interface) the new APIs set&minus;attach&minus;method and
   get&minus;attach&minus;method.
 &minus; New virt tools:
   virt&minus;copy&minus;in, virt&minus;copy&minus;out, virt&minus;tar&minus;in, virt&minus;tar&minus;out.
 &minus; libguestfs can get the drive letter mappings for Windows guests.
 &minus; virt&minus;inspector displays drive letter mappings for Windows guests.
 &minus; Drive letters can now be used in virt&minus;edit and guestfish programs
   when operating on Windows guests.
 &minus; virt&minus;resize now works on 32 bit hosts.
 &minus; You can now inspect the install disks and live CDs of many different
   operating systems.
 &minus; guestfish &lt;! cmd which executes a shell cmd and inlines the result.
 &minus; guestfish, guestmount, virt&minus;rescue now all support &minus;&minus;ro and &minus;&minus;rw
   options, and the default for this can be chosen via a configuration
   file (/etc/libguestfs&minus;tools.conf).
 &minus; New event API allows more than one callback to be registered for
   each event, makes it possible to call the API from other languages,
   and allows nearly all log, debug and trace messages to be rerouted
   from stderr.
 &minus; Greater FHS compliance for temporary files, including using /var/tmp
   for large cached files that should survive reboot (instead of /tmp).
 &minus; guestfish, guestmount &minus;m option allows mount options to be passed
   through to the underlying filesystem.
 &minus; mkfs&minus;opts allows filesystem features to be specified.
 &minus; More intelligent handling of mountpoints, allowing mkmountpoint, mount
   and umount&minus;all commands to work together properly.
 &minus; Trace messages are prefixed with a distinct string, allowing them to
   be easily 'grepped' out from debug output.
 &minus; guestfs_launch (guestfish 'run' command) now produces progress
   messages (a guestfish progress bar) if it takes longer than 5
   seconds to run.
 &minus; Several long&minus;running commands where we are unable to estimate time
   to completion generate &quot;pulse mode&quot; progress events.  Progress bar
   in guestfish has been updated to display these.
 &minus; Publish new example code in: C, Perl, Python, OCaml, Ruby.
 &minus; New virt&minus;dhcp&minus;address example program.
 &minus; The Java and Ruby bindings have been improved greatly.
 &minus; Perl includes a way to get the errno of the last error.
 &minus; Python bindings now compatible with rpyc (thanks Erez Shinan).
 &minus; Transifex is now being used to manage translations.
   http://www.transifex.net/projects/p/libguestfs/
 &minus; Inspection now supports Red Hat Desktop, Slackware distributions.
 &minus; Inspection no longer fails for Windows guests that have two or
   more disks.
 &minus; Inspection can now tell the difference between Windows 2008 Server
   and Windows 7.
 &minus; Inspection can detect 32 bit applications installed in 64 bit
   Windows, running on the WOW64 emulator.
 &minus; A series of protocol fixes has fixed the old bug RHBZ#576879
   which used to cause errors during the upload command to lose
   protocol synchronization.
 &minus; New logo!</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>

<pre style="margin-left:11%;">  [none]</pre>

<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  first&minus;private, get&minus;attach&minus;method, inspect&minus;get&minus;drive&minus;mappings,
  inspect&minus;get&minus;product&minus;variant,
  inspect&minus;get&minus;windows&minus;current&minus;control&minus;set, next&minus;private, resize2fs&minus;M,
  set&minus;attach&minus;method.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; The 'HACKING' file is obsolete.  The contents have been moved into
   a section of the guestfs(3) manual page.
 &minus; libguestfs&minus;test&minus;tool simplified.  It no longer needs the static
   binary or tries to construct an ISO.
 &minus; rpcgen&minus;generated files are compiled with &minus;fno&minus;strict&minus;aliasing
   which should be safer (thanks Matt Booth).
 &minus; virt&minus;resize was rewritten in OCaml.
 &minus; guestfish and other tools tested with valgrind; some memory leaks
   were fixed.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 502533 Updated Polish translation of libguestfs
 &minus; 576879 libguestfs protocol loses synchronization if you 'upload' before mounting disks
 &minus; 599503 document that mkmountpoint and umount&minus;all cannot be mixed
 &minus; 617440 guestfish: fails to tilde expand '~' when the $HOME env is unset
 &minus; 664558 RFE: Allow to set log callback in Ruby bindings
 &minus; 665358 Punjabi Translation Completed (pa_IN)
 &minus; 666577 libguestfs: unknown filesystem /dev/fd0
 &minus; 667610 Multiple bugs, memory leaks in libguestfs ruby bindings
 &minus; 668112 virt&minus;filesystems command fails on guest with corrupt filesystem label
 &minus; 668574 guestfish &minus;i is trying to mount all mounts from /etc/fstab and fails with an error when device doesn't exists
 &minus; 673479 Add a grep&minus;friendly string to LIBGUESTFS_TRACE output
 &minus; 674130 Inspection code fails for Windows guest with two disks
 &minus; 682756 libguestfs trace segfaults when list&minus;filesystems returns error
 &minus; 682979 libguestfs incorrectly detects Red Hat desktop as 'redhat&minus;based' instead of 'redhat'
 &minus; 690819 mkfs fails creating a filesystem on a disk device when using a disk with 'ide' interface
 &minus; 691389 Extended attributes don't work over guestmount (FUSE)
 &minus; 691724 virt&minus;inspector reports unknown filesystem /dev/vda1
 &minus; 692545 inspect&minus;list&minus;applications fails to detect 32 bit apps installed under WOW64 emulator on 64 bit Windows
 &minus; 693324 sfdisk's python interface only accepts lists of type 'list' for the lines parameter</pre>


<h2>Release notes for libguestfs 1.8
<a name="Release notes for libguestfs 1.8"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.6.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b></p>

<pre style="margin-left:11%;"> &minus; Support and packages for Debian and Ubuntu.
 &minus; Daily builds from git repository on Debian and Ubuntu to reduce risk
   of regressions.
 &minus; Port to ArchLinux 'pacman' (thanks Thomas S Hatch).
 &minus; The following tools have been rewritten in C (originally in Perl):
     . virt&minus;cat
     . virt&minus;df
     . virt&minus;inspector
     . virt&minus;ls
     . virt&minus;rescue
 &minus; Some C tools support encrypted guests automatically.  This is
   supported in: guestfish, guestmount, virt&minus;cat, virt&minus;inspector,
   virt&minus;ls.
 &minus; New tool virt&minus;filesystems (in C) which is a replacement for
   virt&minus;list&minus;filesystems and virt&minus;list&minus;partitions, and has a superset
   of the functionality of those tools.
 &minus; guestfish, guestmount and the C tools use unified command line option
   parsing, so they support many common options such as '&minus;a disk.img',
   '&minus;d libvirt&minus;domain', '&minus;x', '&minus;v'.  The old command line option
   parsing is preserved for compatibility in scripts etc.
 &minus; guestfish no longer has any dependencies on Perl
 &minus; New man pages containing programming examples: guestfs&minus;examples(3) (C/C++),
   guestfs&minus;ocaml(3), guestfs&minus;python(3), guestfs&minus;ruby(3).
 &minus; Trace mode prints return values from API functions.
 &minus; virt&minus;inspector can list applications installed in Windows guests, along
   with a great deal of information about those applications.
 &minus; Add support for inspecting: Linux Mint, Mandriva, FreeBSD.
 &minus; guestfish &minus;&minus;rw option (with no effect currently) to make potentially
   dangerous write access explicit.
 &minus; guestfish &minus;&minus;listen &minus;&minus;csh for compatibility with csh, tcsh (thanks
   Eric Blake).
 &minus; The first upstream version that introduced each API function is now
   documented in guestfs(3).
 &minus; guestfs_last_errno allows you to retrieve the errno from the
   daemon, correctly translated to the local operating system.
 &minus; Functions can now have optional parameters.
 &minus; Progress bars and progress notifications can now happen for upload
   commands.
 &minus; Appliance builder more careful about not leaving temporary files
   around in /tmp.
 &minus; getfattr/setfattr commands added to virt&minus;rescue.
 &minus; ROADMAP file covers roadmap and goals for future releases.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;"> &minus; New SECURITY section in guestfs(3) API documentation.
 &minus; virt&minus;inspector no longer runs any guest commands.
 &minus; Inspection code is more careful about avoiding very large files
   from guests which might previously have caused a denial of service.
 &minus; FUSE calls into guestmount are now traced when using guestmount &minus;x.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;"> &minus; add&minus;domain
 &minus; add&minus;drive&minus;opts
 &minus; getxattr
 &minus; inspect&minus;get&minus;hostname
 &minus; inspect&minus;get&minus;package&minus;format
 &minus; inspect&minus;get&minus;package&minus;management
 &minus; inspect&minus;get&minus;roots
 &minus; inspect&minus;list&minus;applications
 &minus; lgetxattr
 &minus; mkfs&minus;opts</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; C programs now only link precisely with the libraries that they use.
 &minus; PCRE, libmagic, hivex and libvirt libraries are now completely
   optional for building.
 &minus; Multiple memory leaks and file descriptor leaks fixed.
 &minus; Add a POD wrapper to unify generation of man pages and HTML files
   across all programs.
 &minus; Source includes phony images of Fedora, Debian, Ubuntu and
   Windows guests.
 &minus; Ruby bindings have 'make install' rule.
 &minus; &lt;guestfs.h&gt; is now a single file.
 &minus; &lt;guestfs.h&gt; does not require XDR headers.
 &minus; ocaml xml&minus;light library is no longer required to build (thanks
   Maxim Koltsov).
 &minus; ./configure &minus;&minus;disable&minus;[...] for each language binding (thanks
   Maxim Koltsov).
 &minus; Old ocaml&minus;viewer program removed (use guestfs&minus;browser instead).
 &minus; New C API test type 'InitScratchFS' makes the tests run a little
   more quickly.
 &minus; Excluded packages in the appliance are now listed in a separate
   file appliance/excludelist.in, and can be customized per&minus;distro.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 663407 readlink and readlinklist returns /sysroot/ in some paths
 &minus; 661280 virt&minus;rescue: panic when shutting down: &quot;/sbin/reboot: No such file or directory&quot;
 &minus; 657499 checksum: wrong check sum type causes umount to fail
 &minus; 655554 Whole disk paths are not made canonical by virt&minus;inspector
 &minus; 654638 openssl updated to 1.0.0b libguestfs depends on exact file names
 &minus; 652796 ruby bindings not installed by 'make install', hence omitted from the binary distribution</pre>


<h2>RELEASE NOTES FOR LIBGUESTFS 1.6
<a name="RELEASE NOTES FOR LIBGUESTFS 1.6"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.4.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b></p>

<pre style="margin-left:11%;"> &minus; Use a new method for creating and caching the appliance.  This
   greatly improves the performance of libguestfs, often by a factor
   of x 4 to x 5.
 &minus; Support for guest inspection (like virt&minus;inspector) via the ordinary
   API and all language bindings.  'guestfish &minus;i' option is as a side&minus;
   effect much quicker.
 &minus; virt&minus;inspector and core inspection API can now detect guests running:
   Fedora, Debian, Ubuntu, Windows, Red Hat Enterprise Linux, CentOS,
   Scientific Linux, Gentoo, Pardus, Arch Linux, MeeGo.
 &minus; Support for LUKS whole&minus;disk encryption in guests.
 &minus; PHP bindings.
 &minus; Progress messages (and progress bars in guestfish and virt&minus;resize)
   for certain long&minus;running operations.
 &minus; virt&minus;df is now much more efficient.  Use '&minus;&minus;one&minus;per&minus;guest' to restore
   the old per&minus;guest isolation behaviour.
 &minus; guestfish 'copy&minus;in' and 'copy&minus;out' commands for copying files and
   directories recursively in and out of the guest.
 &minus; guestfish 'hexedit' command for doing binary edits to devices and
   files.
 &minus; Change guestfish &minus;i syntax to allow commands to be specified on the
   command line (retaining backwards compatibility).
 &minus; guestfish '&minus;d &lt;domain&gt;' for adding disks from libvirt domains.
 &minus; guestfish '&minus;N' option supports several new prepared disk image types:
         lvfs : disk with LV formatted with filesystem
           lv : disk with LV
     bootroot : boot+root
   bootrootlv : boot and root on LV
 &minus; guestfish 'more' and 'edit' commands now work with arbitrary files.
 &minus; guestfish '&minus;&minus;echo&minus;keys' option allows you to echo keys/passphrases
   while typing them.
 &minus; guestmount now supports &minus;a / &minus;d / &minus;i options, like guestfish.
 &minus; Use virtio&minus;serial for communications with the appliance.  This
   also has a major performance benefit.
 &minus; virt&minus;edit '&minus;b' option to create a backup of edited files.
 &minus; virt&minus;edit '&minus;e' option for non&minus;interactive edits to files.
 &minus; Ability to capture core dumps from the appliance (thanks Matthew Booth).
 &minus; virt&minus;rescue now shuts down cleanly (thanks Matthew Booth).
 &minus; virt&minus;rescue now has a &minus;&minus;network option to enable network access.
 &minus; virt&minus;resize can now handle guests which use GPT partition table format.
 &minus; virt&minus;resize has better support for shrinking guests.
 &minus; virt&minus;resize supports qcow2&minus;format guests.
 &minus; $TMPDIR can be used to override almost all temporary directory usage.
 &minus; OCaml users can use an alternate OO&minus;style of coding, eg. g#launch ()
 &minus; The API supports calls which take optional parameters, eg.
     $g&minus;&gt;add_drive_opts (&quot;disk&quot;, readonly =&gt; 1);
 &minus; Trace output now escapes and shortens large strings (thanks
   Matthew Booth).
 &minus; Autosync is now on by default, resulting in more reliable behaviour
   when the handle is closed.
 &minus; virt&minus;df &minus;&minus;uuid option allows you to follow a domain across migration
   and renaming.
 &minus; Translations of manual pages.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;"> &minus; CVE&minus;2010&minus;3851 libguestfs: missing disk format specifier when adding a disk
   https://www.redhat.com/archives/libguestfs/2010&minus;October/msg00036.html
   This is comprehensively fixed in this release, and the fix will be
   backported to the other stable branches after more testing.
 &minus; virt&minus;inspector no longer relies on untrusted guest code to list
   applications in some guests.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;">  download&minus;offset, file&minus;architecture, findfs&minus;label, findfs&minus;uuid,
  inspect&minus;os, inspect&minus;get&minus;arch, inspect&minus;get&minus;distro,
  inspect&minus;get&minus;filesystems, inspect&minus;get&minus;major&minus;version,
  inspect&minus;get&minus;minor&minus;version, inspect&minus;get&minus;mountpoints,
  inspect&minus;get&minus;product&minus;name, inspect&minus;get&minus;type, is&minus;blockdev, is&minus;chardev,
  is&minus;fifo, is&minus;lv, is&minus;socket, is&minus;symlink, list&minus;filesystems, luks&minus;add&minus;key,
  luks&minus;close, luks&minus;format, luks&minus;format&minus;cipher, luks&minus;kill&minus;slot,
  luks&minus;open, luks&minus;open&minus;ro, lvm&minus;clear&minus;filter, lvm&minus;canonical&minus;lv&minus;name,
  lvm&minus;set&minus;filter, part&minus;to&minus;dev, pread&minus;device, pwrite&minus;device,
  upload&minus;offset</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; Use size_t for loop iterators.
 &minus; Refactor the library code into separate files.
 &minus; Refactor the generator code into separate files.
 &minus; Generate guestfish commands.
 &minus; guestfish &amp; guestmount options processing is unified.
 &minus; Protocol changes:
     error message size increased to 64K
     send errno to library
 &minus; Add 'make bindist' to make a binary distribution.
 &minus; Cleaner behaviour under valgrind.
 &minus; More testing of the guestfish command line options and libvirt
   integration.
 &minus; The Perl inspection code is no longer used by any of the tools.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 646822 libguestfs trace mode should not print long binary strings
 &minus; 646821 virt&minus;df should have &minus;&minus;uuid option
 &minus; 646432 /dev/mapper paths should not be returned from guestfs_mountpoints
 &minus; 643624 libguestfs tools documentation should describe how to quote guest domain names from shell
 &minus; 642934 No way to specify disk format when adding a disk to libguestfs
 &minus; 642933 guestfs_list_filesystems should be used in all possible places
 &minus; 642932 guestmount options should match guestfish options
 &minus; 642930 virt&minus;inspector (Sys::Guestfs::Lib) should use C inspection APIs
 &minus; 642929 C inspection code should ignore /dev/fd* in /etc/fstab
 &minus; 642826 virt&minus;resize converts any other image format to raw without notifying user, instructions do not account for this
 &minus; 640961 Document that grub&minus;install might be needed for old Linux guests after virt&minus;resize
 &minus; 639986 virt&minus;df &minus;&minus;csv does not properly quote &quot; in libvirt domain names
 &minus; 639405 Interrupted cached appliance creation leaves libguestfs unusable
 &minus; 638901 Appliance filename should not contain repository name
 &minus; 638899 /dev/mapper paths should not be returned from C inspection APIs
 &minus; 636918 Updates to Spanish translation
 &minus; 636061 [abrt] guestfish&minus;1.2.11&minus;1.fc12: malloc_consolidate: Process /usr/bin/guestfish was killed by signal 11 (SIGSEGV)
 &minus; 635969 glob echo mkfs ext2 /dev/vd[b&minus;t]1 prints garbage
 &minus; 634246 guestfs_part_get_parttype returns &quot;loop&quot; when run against a partition, LV or filesystem
 &minus; 633766 virt&minus;resize &minus;&minus;shrink fails
 &minus; 633357 Updates to Spanish translation
 &minus; 633096 virt&minus;resize calculates block device size incorrectly, doesn't work with qcow2 target
 &minus; 629593 Dutch translation added
 &minus; 627556 Updates to Spanish translations of libguestfs
 &minus; 626843 Updates to Spanish translations
 &minus; 619793 [RFE] Need a way to determine if a particular block device is a logical volume
 &minus; 618556 virt&minus;rescue return none zero value when exit
 &minus; 617200 mount operation failed and hung on some images which running in read&minus;only mode
 &minus; 610880 libguestfs should set broader read perms on tmpdir, so works in some situations when executed with umask 077
 &minus; 599503 document that mkmountpoint and umount&minus;all cannot be mixed
 &minus; 571714 Running virt&minus;df on disk image relabels it, so qemu can no longer write to it.
 &minus; 502533 Updated Polish translation of libguestfs</pre>


<h2>RELEASE NOTES FOR LIBGUESTFS 1.4
<a name="RELEASE NOTES FOR LIBGUESTFS 1.4"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These release
notes only cover the differences from the previous
stable/dev branch split (1.2.0). For detailed changelogs,
please see the git repository, or the ChangeLog file
distributed in the tarball.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
features</b></p>

<pre style="margin-left:11%;"> &minus; guestfish lets you choose a prepared disk image, eg:
     guestfish &minus;N fs:ext4
 &minus; Add write support to guestmount (FUSE) module.
 &minus; virt&minus;resize can now resize the content of partitions and logical
   volumes in the guest, and we have better support for shrinking guests.
 &minus; Bash tab&minus;completion script for guestfish.
 &minus; Add ZFS support to virt&minus;rescue.
 &minus; New tool 'virt&minus;make&minus;fs' for creating filesystems with content.
 &minus; Allow suffixes on any guestfish number parameter, eg. &quot;1M&quot;.
 &minus; guestfish 'man' command opens the manual page.
 &minus; guestfish supports a &quot;heredoc&quot; syntax for uploading files:
     upload &minus;&lt;&lt;_end_ /foo
     content
     _end_
 &minus; Some guestfish commands now print their output in octal or hex
   where appropriate (RHBZ#583242).
 &minus; Allow dash prefix on guestfish command line.  This ignores any
   error from the second command:                   (RHBZ#578407)
     guestfish &minus;&minus; cmd1 : &minus;cmd2 : cmd3
 &minus; guestfish &minus;h / help command now returns an error for non&minus;existent
   commands (RHBZ#597145).
 &minus; New 'supported' command in guestfish to list optional groups of
   commands which are supported by the daemon / configuration.
 &minus; virt&minus;inspector and guestfish &minus;i now work for filenames which
   contain spaces (RHBZ#507810).
 &minus; Change the protocol to use link&minus;local addresses, to avoid
   conflicting with any address that the host might be using
   (RHBZ#588763).
 &minus; libguestfs now sets the correct time and timezone on filesystem
   modifications.
 &minus; Sort the domains into alphabetical order in virt&minus;df.
 &minus; Make mkfs&minus;b command work for FAT and NTFS by mapping the blocksize
   parameter to the cluster size (RHBZ#599464).
 &minus; Add version numbers to Perl modules (RHBZ#521674).
 &minus; Localization now works for all the libguestfs tools (RHBZ#559963).
 &minus; Tools now support filesystem&minus;on&minus;image VMs (RHBZ#590167).
 &minus; virt&minus;list&minus;partitions has a '&minus;t' option to show the total size of disks.
 &minus; Include extra Augeas lenses in the supermin appliance (Matthew Booth).
 &minus; Add error and close callbacks.
 &minus; Add explicit close method in the Perl API.
 &minus; Multiple fixes for RHEL 5 compatibility.
 &minus; Multiple fixes for Debian/Ubuntu compatibility.
 &minus; Multiple revisions to improve the documentation.</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Security</b></p>


<pre style="margin-left:11%;"> &minus; Fix a potential DoS in virt&minus;inspector and virt&minus;v2v if a specially
   crafted disk image contained a char device in place of one of the
   configuration files that we read under /etc (RHBZ#582484).</pre>


<p style="margin-left:11%; margin-top: 1em"><b>New
APIs</b></p>

<pre style="margin-left:11%;"> &minus; aug&minus;clear &minus; clear Augeas path
 &minus; available&minus;all&minus;groups &minus; return a list of all optional groups
 &minus; base64&minus;in &minus; upload base64&minus;encoded data to file
 &minus; base64&minus;out &minus; download file and encode as base64
 &minus; checksum&minus;device &minus; compute checksums on the contents of a device
 &minus; checksums&minus;out &minus; compute checksums of multiple files in a directory
 &minus; debug&minus;upload &minus; upload a file to the appliance
 &minus; fallocate64 &minus; preallocate a file in the guest filesystem
 &minus; fill&minus;pattern &minus; fill a file with a repeating pattern of bytes
 &minus; get&minus;umask &minus; get the current umask
 &minus; lvresize&minus;free &minus; expand an LV to fill free space
 &minus; ntfsresize &minus; resize an NTFS filesystem
 &minus; ntfsresize&minus;size &minus; resize an NTFS filesystem (with size)
 &minus; part&minus;del &minus; delete a partition
 &minus; part&minus;get&minus;bootable &minus; get the bootable flag of a partition
 &minus; part&minus;get&minus;mbr&minus;id &minus; get the MBR type byte of a partition
 &minus; part&minus;set&minus;mbr&minus;id &minus; set the MBR type byte of a partition
 &minus; pvresize&minus;size &minus; resize a physical volume (with size)
 &minus; pwrite &minus; write to part of a file
 &minus; resize2fs&minus;size &minus; resize an ext2/3/4 filesystem (with size)
 &minus; txz&minus;in &minus; unpack compressed tarball to directory (RHBZ#580556)
 &minus; txz&minus;out &minus; pack directory into compressed tarball (RHBZ#580556)
 &minus; vfs&minus;label &minus; get the filesystem label
 &minus; vfs&minus;uuid &minus; get the filesystem UUID
 &minus; vgscan &minus; rescan for LVM physical volumes, volume groups and logical volumes
 &minus; write &minus; create a new file
 &minus; zero&minus;device &minus; write zeroes to an entire device</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Internals</b></p>


<pre style="margin-left:11%;"> &minus; Extend the generator to support testing optional features.
 &minus; Stricter checks on input parameters to many calls (RHBZ#501893 RHBZ#501894)
 &minus; Extend the protocol to support sending arbitrary 8 bit data buffers.
 &minus; Ship 'BUGS' file with releases.  This is a summary of the bugs in
   the Red Hat Bugzilla database.
 &minus; Ship 'RELEASE&minus;NOTES' file with releases, containing release notes.
 &minus; Unify supermin appliance building into one place, in febootstrap 2.7.
 &minus; Fix the protocol code to handle the case where both ends send cancel
   messages at the same time.</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Bugs
fixed</b></p>

<pre style="margin-left:11%;"> &minus; 612178 guestfish: using &minus;m option in conjunction with &minus;&minus;listen option causes appliance to die
 &minus; 610880 libguestfs should set broader read perms on tmpdir, so works in some situations when executed with umask 077
 &minus; 604691 OCaml bindings are not thread safe
 &minus; 603870 Updates to Spanish translation
 &minus; 602592 [RFE] expose guestfs_close in perl bindings
 &minus; 600977 virt&minus;df &minus;h &minus;&minus;csv &quot;Argument .. isn't numeric in printf&quot;
 &minus; 599464 mkfs&minus;b does not support vfat/ntfs
 &minus; 598807 add_cdrom does not work in RHEL 6
 &minus; 598309 part&minus;list and several other cmd failed on libguestfs on RHEL5
 &minus; 597145 guestfish 'help' command should indicate error in exit status with an unknown command
 &minus; 597135 guestfish write&minus;file cmd does not check &quot;size&quot; parameter
 &minus; 597118 A warning should be given in the help of mke2journal&minus;L for the length of label
 &minus; 597112 get&minus;e2uuid should use blkid instead of &quot;tune2fs &minus;l&quot; to get filesystem UUID
 &minus; 596776 virt&minus;inspector doesn't discover modprobe aliases on RHEL 3 guests
 &minus; 596763 Updates to Spanish translation
 &minus; 593292 Updates to Spanish translation
 &minus; 592883 can not edit files on  images mounted with guestmount cmd
 &minus; 592360 Updates to Spanish translation
 &minus; 591250 virt&minus;tar prints &quot;tar_in: tar subcommand failed on directory&quot; if the archive is compressed or not in the right format
 &minus; 591155 virt&minus;tar prints &quot;tar_in: tar subcommand failed on directory&quot; if a disk image is not writable
 &minus; 591142 virt&minus;inspector should give an error for unrecognized disk images
 &minus; 590167 virt&minus;inspector and other virt tools should be able to handle filesystem&minus;on&minus;image VMs
 &minus; 589039 guestfish read&minus;file cmd will cause daemon hang when read large files
 &minus; 588851 guestfs_launch() returns &minus;1, but guestfs_last_error() == NULL
 &minus; 588763 libguestfs should use non&minus;public or link&minus;local addresses for appliance network
 &minus; 588733 Updates to Spanish translation
 &minus; 588651 guestfish 'strings&minus;e' cmd does not give proper error message or hint
 &minus; 587484 lvresize can't reduce size of a volumn
 &minus; 585961 Updates to Spanish translation
 &minus; 585223 ntfsresize should support shrinking filesystems
 &minus; 585222 pvresize should support shrinking PVs
 &minus; 585221 resize2fs should support shrinking filesystems
 &minus; 584038 Updates to Spanish translation
 &minus; 583554 [FEAT] mknod&minus;mode command is needed to set mode explicitly
 &minus; 583242 [RFE] guestfish should print outputs in a suitable base (eg. octal for modes)
 &minus; 582993 guestfish eats words when tab completing case (in)sensitive paths
 &minus; 582953 Misleading help information about lvcreate command
 &minus; 582948 mknod command doesn't make block, character or FIFO devices
 &minus; 582929 mknod doesn't check for invalid mode
 &minus; 582901 guestfish chmod/umask commands do not check invalid mode value
 &minus; 582899 guestfish:sparse is missed from command autocomplete list
 &minus; 582891 [Feature Request] behavior and return value of guestfish umask cmd should be changed
 &minus; 582548 [mknod] umask shouldn't take effect when mode is set explicitly
 &minus; 582484 some guestfish sub commands can not handle special files properly
 &minus; 582252 Updates to Spanish translation
 &minus; 581501 Updates to Spanish translation
 &minus; 580650 virt&minus;inspector warns &quot;No grub default specified at /usr/lib/perl5/Sys/Guestfs/Lib.pm at [...]&quot;
 &minus; 580556 request for libguestfs to support .txz tarballs
 &minus; 580246 tar&minus;in command hangs if uploading more than available space
 &minus; 580016 aug&minus;ls in guestfish does not take augeas variable as argument
 &minus; 579664 guestfish doesn't report error when there is not enough space for image allocation
 &minus; 579608 multiple commands in guestfish can not work for symbol links
 &minus; 579155 libguestfs hangs if qemu doesn't start (in null vmchannel mode)
 &minus; 578407 the prefix '&minus;' in sub&minus;command isn't handled by guestfish in remote control mode
 &minus; 576879 libguestfs protocol loses synchronization if you 'upload' before mounting disks
 &minus; 559963 libguestfs Perl programs do set locale, but still localization doesn't work
 &minus; 521674 Perl modules are unversioned, but should carry version numbers
 &minus; 516096 Race condition in test_swapon_label_0: /sbin/blockdev: BLKRRPART: Device or resource busy
 &minus; 507810 guestfish &minus;i / virt&minus;inspector cannot handle spaces in filenames
 &minus; 502533 Updated Polish translation of libguestfs
 &minus; 501894 Some String parameters should be OptString
 &minus; 501893 String parameters should be checked for != NULL
 &minus; 501889 write&minus;file does not support strings containing ASCII NUL
 &minus; 484986 grub&minus;install fails on virtio disk</pre>


<h2>RELEASE NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS

<a name="RELEASE NOTES FOR HISTORICAL VERSIONS OF LIBGUESTFS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Before 2010
libguestfs did not have official release notes or a
formalized version numbering system. However these are links
to historically significant versions. <br>
2009&minus;11&minus;10 (1.0.78)</p>


<p style="margin-left:17%;">https://www.redhat.com/archives/libguestfs/2009&minus;November/msg00095.html</p>

<p style="margin-left:11%;">2009&minus;09&minus;13
(1.0.67)</p>


<p style="margin-left:17%;">https://www.redhat.com/archives/libguestfs/2009&minus;August/msg00281.html</p>

<p style="margin-left:11%;">2009&minus;07&minus;23
(1.0.64)</p>


<p style="margin-left:17%;">https://www.redhat.com/archives/libguestfs/2009&minus;July/msg00059.html</p>

<p style="margin-left:11%;">2009&minus;07&minus;14
(1.0.59)</p>


<p style="margin-left:17%;">https://www.redhat.com/archives/libguestfs/2009&minus;July/msg00023.html</p>

<p style="margin-left:11%;">2009&minus;04&minus;01 (the
initial announcement)</p>


<p style="margin-left:17%;">http://rwmj.wordpress.com/2009/04/01/libguestfs&minus;access&minus;and&minus;modify&minus;virtual&minus;machine&minus;disk&minus;images/</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>guestfs&minus;examples</i>(1),
<i>guestfs&minus;faq</i>(1),
<i>guestfs&minus;performance</i>(1),
<i>guestfs&minus;recipes</i>(1),
<i>guestfs&minus;testing</i>(1), <i>guestfs</i>(3),
<i>guestfish</i>(1), http://libguestfs.org/</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Richard W.M.
Jones</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2009&minus;2016 Red Hat Inc.</p>

<h2>LICENSE
<a name="LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program is
free software; you can redistribute it and/or modify it
under the terms of the <small>GNU</small> General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
distributed in the hope that it will be useful, but
<small>WITHOUT ANY WARRANTY</small> ; without even the
implied warranty of <small>MERCHANTABILITY</small> or
<small>FITNESS FOR A PARTICULAR PURPOSE.</small> See the
<small>GNU</small> General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the <small>GNU</small> General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, <small>MA 02110&minus;1301 USA.</small></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get a list
of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">To report a new
bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&amp;product=Virtualization+Tools</p>

<p style="margin-left:11%; margin-top: 1em">When reporting
a bug, please supply:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The version of libguestfs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Where you got libguestfs (eg. which Linux distro,
compiled from source, etc)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Describe the bug accurately and give a way to reproduce
it.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Run <i>libguestfs&minus;test&minus;tool</i>(1) and paste
the <b>complete, unedited</b> output into the bug
report.</p> </td></tr>
 </table>
<hr>
</body>
</html>
