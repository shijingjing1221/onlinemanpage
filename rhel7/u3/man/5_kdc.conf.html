<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:47:11 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>KDC.CONF</title>

</head>
<body>

<h1 align="center">KDC.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#STRUCTURE">STRUCTURE</a><br>
<a href="#SECTIONS">SECTIONS</a><br>
<a href="#PKINIT OPTIONS">PKINIT OPTIONS</a><br>
<a href="#ENCRYPTION TYPES">ENCRYPTION TYPES</a><br>
<a href="#KEYSALT LISTS">KEYSALT LISTS</a><br>
<a href="#SAMPLE KDC.CONF FILE">SAMPLE KDC.CONF FILE</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">kdc.conf
&minus; Kerberos V5 KDC configuration file</p>

<p style="margin-left:11%; margin-top: 1em">The kdc.conf
file supplements <i>krb5.conf(5)</i> for programs which are
typically only used on a KDC, such as the <i>krb5kdc(8)</i>
and <i>kadmind(8)</i> daemons and the <i>kdb5_util(8)</i>
program. Relations documented here may also be specified in
krb5.conf; for the KDC programs mentioned, krb5.conf and
kdc.conf will be merged into a single configuration
profile.</p>

<p style="margin-left:11%; margin-top: 1em">Normally, the
kdc.conf file is found in the KDC state directory,
<b>/var/kerberos/krb5kdc</b>. You can override the default
location by setting the environment variable
<b>KRB5_KDC_PROFILE</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that you need to restart the KDC daemon for any
configuration changes to take effect.</p>

<h2>STRUCTURE
<a name="STRUCTURE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The kdc.conf
file is set up in the same format as the <i>krb5.conf(5)</i>
file.</p>

<h2>SECTIONS
<a name="SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The kdc.conf
file may contain the following sections:</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-89571.png" alt="Image grohtml-89571.png"></p>

<p style="margin-left:11%;"><b>[kdcdefaults]</b> <br>
With one exception, relations in the [kdcdefaults] section
specify default values for realm variables, to be used if
the [realms] subsection does not contain a relation for the
tag. See the <i>[realms]</i> section for the definitions of
these relations.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="38%">


<p><b>host_based_services</b></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="38%">


<p><b>kdc_ports</b></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="38%">


<p><b>kdc_tcp_ports</b></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="38%">


<p><b>no_host_referral</b></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="38%">


<p><b>restrict_anonymous_to_tgt</b></p></td>
<td width="48%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>kdc_max_dgram_reply_size</b></p>

<p style="margin-left:22%;">Specifies the maximum packet
size that can be sent over UDP. The default value is 4096
bytes.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[realms]</b>
<br>
Each tag in the [realms] section is the name of a Kerberos
realm. The value of the tag is a subsection where the
relations define KDC parameters for that particular realm.
The following example shows how to define one parameter for
the ATHENA.MIT.EDU realm:</p>

<pre style="margin-left:15%; margin-top: 1em">[realms]
    ATHENA.MIT.EDU = {
        max_renewable_life = 7d 0h 0m 0s
    }</pre>


<p style="margin-left:11%; margin-top: 1em">The following
tags may be specified in a [realms] subsection: <b><br>
acl_file</b></p>

<p style="margin-left:22%;">(String.) Location of the
access control list file that <i>kadmind(8)</i> uses to
determine which principals are allowed which permissions on
the Kerberos database. The default value is
<b>/var/kerberos/krb5kdc/kadm5.acl</b>. For more information
on Kerberos ACL file see <i>kadm5.acl(5)</i>.</p>

<p style="margin-left:11%;"><b>database_module</b></p>

<p style="margin-left:22%;">(String.) This relation
indicates the name of the configuration section under
<i>[dbmodules]</i> for database&minus;specific parameters
used by the loadable database library. The default value is
the realm name. If this configuration section does not
exist, default values will be used for all database
parameters.</p>

<p style="margin-left:11%;"><b>database_name</b></p>

<p style="margin-left:22%;">(String, deprecated.) This
relation specifies the location of the Kerberos database for
this realm, if the DB2 module is being used and the
<i>[dbmodules]</i> configuration section does not specify a
database name. The default value is
<b>/var/kerberos/krb5kdc/principal</b>.</p>


<p style="margin-left:11%;"><b>default_principal_expiration</b></p>

<p style="margin-left:22%;">(<i>abstime</i> string.)
Specifies the default expiration date of principals created
in this realm. The default value is 0, which means no
expiration date.</p>


<p style="margin-left:11%;"><b>default_principal_flags</b></p>

<p style="margin-left:22%;">(Flag string.) Specifies the
default attributes of principals created in this realm. The
format for this string is a comma&minus;separated list of
flags, with '+' before each flag that should be enabled and
'&minus;' before each flag that should be disabled. The
<b>postdateable</b>, <b>forwardable</b>,
<b>tgt&minus;based</b>, <b>renewable</b>, <b>proxiable</b>,
<b>dup&minus;skey</b>, <b>allow&minus;tickets</b>, and
<b>service</b> flags default to enabled.</p>

<p style="margin-left:22%; margin-top: 1em">There are a
number of possible flags: <b><br>
allow&minus;tickets</b></p>

<p style="margin-left:32%;">Enabling this flag means that
the KDC will issue tickets for this principal. Disabling
this flag essentially deactivates the principal within this
realm.</p>

<p style="margin-left:22%;"><b>dup&minus;skey</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to obtain a session key for another user,
permitting user&minus;to&minus;user authentication for this
principal.</p>

<p style="margin-left:22%;"><b>forwardable</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to obtain forwardable tickets.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>hwauth</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>If this flag is enabled, then the principal is required
to preauthenticate using a hardware device before receiving
any tickets.</p></td></tr>
</table>


<p style="margin-left:22%;"><b>no&minus;auth&minus;data&minus;required</b></p>

<p style="margin-left:32%;">Enabling this flag prevents PAC
or AD&minus;SIGNEDPATH data from being added to service
tickets for the principal.</p>


<p style="margin-left:22%;"><b>ok&minus;as&minus;delegate</b></p>

<p style="margin-left:32%;">If this flag is enabled, it
hints the client that credentials can and should be
delegated when authenticating to the service.</p>


<p style="margin-left:22%;"><b>ok&minus;to&minus;auth&minus;as&minus;delegate</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to use S4USelf tickets.</p>

<p style="margin-left:22%;"><b>postdateable</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to obtain postdateable tickets.</p>

<p style="margin-left:22%;"><b>preauth</b></p>

<p style="margin-left:32%;">If this flag is enabled on a
client principal, then that principal is required to
preauthenticate to the KDC before receiving any tickets. On
a service principal, enabling this flag means that service
tickets for this principal will only be issued to clients
with a TGT that has the preauthenticated bit set.</p>

<p style="margin-left:22%;"><b>proxiable</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to obtain proxy tickets.</p>

<p style="margin-left:22%;"><b>pwchange</b></p>

<p style="margin-left:32%;">Enabling this flag forces a
password change for this principal.</p>

<p style="margin-left:22%;"><b>pwservice</b></p>

<p style="margin-left:32%;">If this flag is enabled, it
marks this principal as a password change service. This
should only be used in special cases, for example, if a
user's password has expired, then the user has to get
tickets for that principal without going through the normal
password authentication in order to be able to change the
password.</p>

<p style="margin-left:22%;"><b>renewable</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
principal to obtain renewable tickets.</p>

<p style="margin-left:22%;"><b>service</b></p>

<p style="margin-left:32%;">Enabling this flag allows the
the KDC to issue service tickets for this principal.</p>

<p style="margin-left:22%;"><b>tgt&minus;based</b></p>

<p style="margin-left:32%;">Enabling this flag allows a
principal to obtain tickets based on a
ticket&minus;granting&minus;ticket, rather than repeating
the authentication process that was used to obtain the
TGT.</p>

<p style="margin-left:11%;"><b>dict_file</b></p>

<p style="margin-left:22%;">(String.) Location of the
dictionary file containing strings that are not allowed as
passwords. The file should contain one string per line, with
no additional whitespace. If none is specified or if there
is no policy assigned to the principal, no dictionary checks
of passwords will be performed.</p>

<p style="margin-left:11%;"><b>host_based_services</b></p>

<p style="margin-left:22%;">(Whitespace&minus; or
comma&minus;separated list.) Lists services which will get
host&minus;based referral processing even if the server
principal is not marked as host&minus;based by the
client.</p>

<p style="margin-left:11%;"><b>iprop_enable</b></p>

<p style="margin-left:22%;">(Boolean value.) Specifies
whether incremental database propagation is enabled. The
default value is false.</p>


<p style="margin-left:11%;"><b>iprop_master_ulogsize</b></p>

<p style="margin-left:22%;">(Integer.) Specifies the
maximum number of log entries to be retained for incremental
propagation. The default value is 1000. Prior to release
1.11, the maximum value was 2500.</p>

<p style="margin-left:11%;"><b>iprop_slave_poll</b></p>

<p style="margin-left:22%;">(Delta time string.) Specifies
how often the slave KDC polls for new updates from the
master. The default value is <b>2m</b> (that is, two
minutes).</p>

<p style="margin-left:11%;"><b>iprop_port</b></p>

<p style="margin-left:22%;">(Port number.) Specifies the
port number to be used for incremental propagation. This is
required in both master and slave configuration files.</p>


<p style="margin-left:11%;"><b>iprop_resync_timeout</b></p>

<p style="margin-left:22%;">(Delta time string.) Specifies
the amount of time to wait for a full propagation to
complete. This is optional in configuration files, and is
used by slave KDCs only. The default value is 5 minutes
(<b>5m</b>). New in release 1.11.</p>

<p style="margin-left:11%;"><b>iprop_logfile</b></p>

<p style="margin-left:22%;">(File name.) Specifies where
the update log file for the realm database is to be stored.
The default is to use the <b>database_name</b> entry from
the realms section of the krb5 config file, with
<b>.ulog</b> appended. (NOTE: If <b>database_name</b> isn't
specified in the realms section, perhaps because the LDAP
database back end is being used, or the file name is
specified in the [dbmodules] section, then the
hard&minus;coded default for <b>database_name</b> is used.
Determination of the <b>iprop_logfile</b> default value will
not use values from the [dbmodules] section.)</p>

<p style="margin-left:11%;"><b>kadmind_port</b></p>

<p style="margin-left:22%;">(Port number.) Specifies the
port on which the <i>kadmind(8)</i> daemon is to listen for
this realm. The assigned port for kadmind is 749, which is
used by default.</p>

<p style="margin-left:11%;"><b>key_stash_file</b></p>

<p style="margin-left:22%;">(String.) Specifies the
location where the master key has been stored (via kdb5_util
stash). The default is
<b>/var/kerberos/krb5kdc/.k5.REALM</b>, where <i>REALM</i>
is the Kerberos realm.</p>

<p style="margin-left:11%;"><b>kdc_ports</b></p>

<p style="margin-left:22%;">(Whitespace&minus; or
comma&minus;separated list.) Lists the ports on which the
Kerberos server should listen for UDP requests, as a
comma&minus;separated list of integers. The default value is
<b>88,750</b>, which are the assigned Kerberos port and the
port historically used by Kerberos V4.</p>

<p style="margin-left:11%;"><b>kdc_tcp_ports</b></p>

<p style="margin-left:22%;">(Whitespace&minus; or
comma&minus;separated list.) Lists the ports on which the
Kerberos server should listen for TCP connections, as a
comma&minus;separated list of integers. To disable listening
on TCP, set this relation to the empty string with
<b>kdc_tcp_ports = &quot;&quot;</b>. If this relation is not
specified, the default is to listen on TCP port 88 (the
standard port). Prior to release 1.13, the default was not
to listen for TCP connections at all.</p>

<p style="margin-left:11%;"><b>master_key_name</b></p>

<p style="margin-left:22%;">(String.) Specifies the name of
the principal associated with the master key. The default is
<b>K/M</b>.</p>

<p style="margin-left:11%;"><b>master_key_type</b></p>

<p style="margin-left:22%;">(Key type string.) Specifies
the master key's key type. The default value for this is
<b>aes256&minus;cts&minus;hmac&minus;sha1&minus;96</b>. For
a list of all possible values, see <i>Encryption
types</i>.</p>

<p style="margin-left:11%;"><b>max_life</b></p>

<p style="margin-left:22%;">(<i>duration</i> string.)
Specifies the maximum time period for which a ticket may be
valid in this realm. The default value is 24 hours.</p>

<p style="margin-left:11%;"><b>max_renewable_life</b></p>

<p style="margin-left:22%;">(<i>duration</i> string.)
Specifies the maximum time period during which a valid
ticket may be renewed in this realm. The default value is
0.</p>

<p style="margin-left:11%;"><b>no_host_referral</b></p>

<p style="margin-left:22%;">(Whitespace&minus; or
comma&minus;separated list.) Lists services to block from
getting host&minus;based referral processing, even if the
client marks the server principal as host&minus;based or the
service is also listed in <b>host_based_services</b>.
<b>no_host_referral = *</b> will disable referral processing
altogether.</p>


<p style="margin-left:11%;"><b>des_crc_session_supported</b></p>

<p style="margin-left:22%;">(Boolean value). If set to
true, the KDC will assume that service principals support
des&minus;cbc&minus;crc for session key enctype negotiation
purposes. If <b>allow_weak_crypto</b> in <i>libdefaults</i>
is false, or if des&minus;cbc&minus;crc is not a permitted
enctype, then this variable has no effect. Defaults to true.
New in release 1.11.</p>

<p style="margin-left:11%;"><b>reject_bad_transit</b></p>

<p style="margin-left:22%;">(Boolean value.) If set to
true, the KDC will check the list of transited realms for
cross&minus;realm tickets against the transit path computed
from the realm names and the capaths section of its
<i>krb5.conf(5)</i> file; if the path in the ticket to be
issued contains any realms not in the computed path, the
ticket will not be issued, and an error will be returned to
the client instead. If this value is set to false, such
tickets will be issued anyways, and it will be left up to
the application server to validate the realm transit
path.</p>

<p style="margin-left:22%; margin-top: 1em">If the
disable&minus;transited&minus;check flag is set in the
incoming request, this check is not performed at all. Having
the <b>reject_bad_transit</b> option will cause such ticket
requests to be rejected always.</p>

<p style="margin-left:22%; margin-top: 1em">This transit
path checking and config file option currently apply only to
TGS requests.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value is true.</p>


<p style="margin-left:11%;"><b>restrict_anonymous_to_tgt</b></p>

<p style="margin-left:22%;">(Boolean value.) If set to
true, the KDC will reject ticket requests from anonymous
principals to service principals other than the realm's
ticket&minus;granting service. This option allows anonymous
PKINIT to be enabled for use as FAST armor tickets without
allowing anonymous authentication to services. The default
value is false. New in release 1.9.</p>

<p style="margin-left:11%;"><b>supported_enctypes</b></p>

<p style="margin-left:22%;">(List of <i>key</i>:<i>salt</i>
strings.) Specifies the default key/salt combinations of
principals for this realm. Any principals created through
<i>kadmin(1)</i> will have keys of these types. The default
value for this tag is
<b>aes256&minus;cts&minus;hmac&minus;sha1&minus;96:normal
aes128&minus;cts&minus;hmac&minus;sha1&minus;96:normal
des3&minus;cbc&minus;sha1:normal
arcfour&minus;hmac&minus;md5:normal</b>. For lists of
possible values, see <i>Keysalt lists</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[dbdefaults]</b>
<br>
The [dbdefaults] section specifies default values for some
database parameters, to be used if the [dbmodules]
subsection does not contain a relation for the tag. See the
<i>[dbmodules]</i> section for the definitions of these
relations.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kerberos_container_dn</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kdc_dn</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kdc_sasl_authcid</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kdc_sasl_authzid</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kdc_sasl_mech</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kdc_sasl_realm</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kadmind_dn</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kadmind_sasl_authcid</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kadmind_sasl_authzid</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kadmind_sasl_mech</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_kadmind_sasl_realm</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_service_password_file</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_servers</b></p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="2%"></td>
<td width="40%">


<p><b>ldap_conns_per_server</b></p></td>
<td width="46%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>[dbmodules]</b>
<br>
The [dbmodules] section contains parameters used by the KDC
database library and database modules. Each tag in the
[dbmodules] section is the name of a Kerberos realm or a
section name specified by a realm's <b>database_module</b>
parameter. The following example shows how to define one
database parameter for the ATHENA.MIT.EDU realm:</p>

<pre style="margin-left:15%; margin-top: 1em">[dbmodules]
    ATHENA.MIT.EDU = {
        disable_last_success = true
    }</pre>


<p style="margin-left:11%; margin-top: 1em">The following
tags may be specified in a [dbmodules] subsection: <b><br>
database_name</b></p>

<p style="margin-left:22%;">This DB2&minus;specific tag
indicates the location of the database in the filesystem.
The default is <b>/var/kerberos/krb5kdc/principal</b>.</p>

<p style="margin-left:11%;"><b>db_library</b></p>

<p style="margin-left:22%;">This tag indicates the name of
the loadable database module. The value should be <b>db2</b>
for the DB2 module and <b>kldap</b> for the LDAP module.</p>


<p style="margin-left:11%;"><b>disable_last_success</b></p>

<p style="margin-left:22%;">If set to <b>true</b>,
suppresses KDC updates to the &quot;Last successful
authentication&quot; field of principal entries requiring
preauthentication. Setting this flag may improve
performance. (Principal entries which do not require
preauthentication never update the &quot;Last successful
authentication&quot; field.). First introduced in release
1.9.</p>

<p style="margin-left:11%;"><b>disable_lockout</b></p>

<p style="margin-left:22%;">If set to <b>true</b>,
suppresses KDC updates to the &quot;Last failed
authentication&quot; and &quot;Failed password
attempts&quot; fields of principal entries requiring
preauthentication. Setting this flag may improve
performance, but also disables account lockout. First
introduced in release 1.9.</p>


<p style="margin-left:11%;"><b>ldap_conns_per_server</b></p>

<p style="margin-left:22%;">This LDAP&minus;specific tag
indicates the number of connections to be maintained per
LDAP server.</p>

<p style="margin-left:11%;"><b>ldap_kdc_dn and
ldap_kadmind_dn</b></p>

<p style="margin-left:22%;">These LDAP&minus;specific tags
indicate the default DN for binding to the LDAP server. The
<i>krb5kdc(8)</i> daemon uses <b>ldap_kdc_dn</b>, while the
<i>kadmind(8)</i> daemon and other administrative programs
use <b>ldap_kadmind_dn</b>. The kadmind DN must have the
rights to read and write the Kerberos data in the LDAP
database. The KDC DN must have the same rights, unless
<b>disable_lockout</b> and <b>disable_last_success</b> are
true, in which case it only needs to have rights to read the
Kerberos data. These tags are ignored if a SASL mechanism is
set with <b>ldap_kdc_sasl_mech</b> or
<b>ldap_kadmind_sasl_mech</b>.</p>

<p style="margin-left:11%;"><b>ldap_kdc_sasl_mech and
ldap_kadmind_sasl_mech</b></p>

<p style="margin-left:22%;">These LDAP&minus;specific tags
specify the SASL mechanism (such as <b>EXTERNAL</b>) to use
when binding to the LDAP server. New in release 1.13.</p>

<p style="margin-left:11%;"><b>ldap_kdc_sasl_authcid and
ldap_kadmind_sasl_authcid</b></p>

<p style="margin-left:22%;">These LDAP&minus;specific tags
specify the SASL authentication identity to use when binding
to the LDAP server. Not all SASL mechanisms require an
authentication identity. If the SASL mechanism requires a
secret (such as the password for <b>DIGEST&minus;MD5</b>),
these tags also determine the name within the
<b>ldap_service_password_file</b> where the secret is
stashed. New in release 1.13.</p>

<p style="margin-left:11%;"><b>ldap_kdc_sasl_authzid and
ldap_kadmind_sasl_authzid</b></p>

<p style="margin-left:22%;">These LDAP&minus;specific tags
specify the SASL authorization identity to use when binding
to the LDAP server. In most circumstances they do not need
to be specified. New in release 1.13.</p>

<p style="margin-left:11%;"><b>ldap_kdc_sasl_realm and
ldap_kadmind_sasl_realm</b></p>

<p style="margin-left:22%;">These LDAP&minus;specific tags
specify the SASL realm to use when binding to the LDAP
server. In most circumstances they do not need to be set.
New in release 1.13.</p>


<p style="margin-left:11%;"><b>ldap_kerberos_container_dn</b></p>

<p style="margin-left:22%;">This LDAP&minus;specific tag
indicates the DN of the container object where the realm
objects will be located.</p>

<p style="margin-left:11%;"><b>ldap_servers</b></p>

<p style="margin-left:22%;">This LDAP&minus;specific tag
indicates the list of LDAP servers that the Kerberos servers
can connect to. The list of LDAP servers is
whitespace&minus;separated. The LDAP server is specified by
a LDAP URI. It is recommended to use <b>ldapi:</b> or
<b>ldaps:</b> URLs to connect to the LDAP server.</p>


<p style="margin-left:11%;"><b>ldap_service_password_file</b></p>

<p style="margin-left:22%;">This LDAP&minus;specific tag
indicates the file containing the stashed passwords (created
by <b>kdb5_ldap_util stashsrvpw</b>) for the
<b>ldap_kdc_dn</b> and <b>ldap_kadmind_dn</b> objects, or
for the <b>ldap_kdc_sasl_authcid</b> or
<b>ldap_kadmind_sasl_authcid</b> names for SASL
authentication. This file must be kept secure.</p>

<p style="margin-left:11%;"><b>unlockiter</b></p>

<p style="margin-left:22%;">If set to <b>true</b>, this
DB2&minus;specific tag causes iteration operations to
release the database lock while processing each principal.
Setting this flag to <b>true</b> can prevent extended
blocking of KDC or kadmin operations when dumps of large
databases are in progress. First introduced in release
1.13.</p>

<p style="margin-left:11%; margin-top: 1em">The following
tag may be specified directly in the [dbmodules] section to
control where database modules are loaded from: <b><br>
db_module_dir</b></p>

<p style="margin-left:22%;">This tag controls where the
plugin system looks for database modules. The value should
be an absolute path.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[logging]</b>
<br>
The [logging] section indicates how <i>krb5kdc(8)</i> and
<i>kadmind(8)</i> perform logging. The keys in this section
are daemon names, which may be one of: <b><br>
admin_server</b></p>

<p style="margin-left:22%;">Specifies how <i>kadmind(8)</i>
performs logging.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>kdc</b></p></td>
<td width="7%"></td>
<td width="64%">


<p>Specifies how <i>krb5kdc(8)</i> performs logging.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>default</b></p>

<p style="margin-left:22%;">Specifies how either daemon
performs logging in the absence of relations specific to the
daemon.</p>

<p style="margin-left:11%; margin-top: 1em">Values are of
the following forms: <b><br>
FILE=</b><i>filename</i> <b>or FILE:</b><i>filename</i></p>

<p style="margin-left:22%;">This value causes the daemon's
logging messages to go to the <i>filename</i>. If the
<b>=</b> form is used, the file is overwritten. If the
<b>:</b> form is used, the file is appended to.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>STDERR</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This value causes the daemon's logging messages to go to
its standard error stream.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>CONSOLE</b></p>

<p style="margin-left:22%;">This value causes the daemon's
logging messages to go to the console, if the system
supports it.</p>


<p style="margin-left:11%;"><b>DEVICE=</b><i>&lt;devicename&gt;</i></p>

<p style="margin-left:22%;">This causes the daemon's
logging messages to go to the specified device.</p>


<p style="margin-left:11%;"><b>SYSLOG[:</b><i>severity</i><b>[:</b><i>facility</i><b>]]</b></p>

<p style="margin-left:22%;">This causes the daemon's
logging messages to go to the system log.</p>

<p style="margin-left:22%; margin-top: 1em">The severity
argument specifies the default severity of system log
messages. This may be any of the following severities
supported by the syslog(3) call, minus the <b>LOG_</b>
prefix: <b>EMERG</b>, <b>ALERT</b>, <b>CRIT</b>, <b>ERR</b>,
<b>WARNING</b>, <b>NOTICE</b>, <b>INFO</b>, and
<b>DEBUG</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The facility
argument specifies the facility under which the messages are
logged. This may be any of the following facilities
supported by the syslog(3) call minus the LOG_ prefix:
<b>KERN</b>, <b>USER</b>, <b>MAIL</b>, <b>DAEMON</b>,
<b>AUTH</b>, <b>LPR</b>, <b>NEWS</b>, <b>UUCP</b>,
<b>CRON</b>, and <b>LOCAL0</b> through <b>LOCAL7</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If no severity
is specified, the default is <b>ERR</b>. If no facility is
specified, the default is <b>AUTH</b>.</p>

<p style="margin-left:11%; margin-top: 1em">In the
following example, the logging messages from the KDC will go
to the console and to the system log under the facility
LOG_DAEMON with default severity of LOG_INFO; and the
logging messages from the administrative server will be
appended to the file <b>/var/adm/kadmin.log</b> and sent to
the device <b>/dev/tty04</b>.</p>

<pre style="margin-left:15%; margin-top: 1em">[logging]
    kdc = CONSOLE
    kdc = SYSLOG:INFO:DAEMON
    admin_server = FILE:/var/adm/kadmin.log
    admin_server = DEVICE=/dev/tty04</pre>


<p style="margin-left:11%; margin-top: 1em"><b>[otp]</b>
<br>
Each subsection of [otp] is the name of an OTP token type.
The tags within the subsection define the configuration
required to forward a One Time Password request to a RADIUS
server.</p>

<p style="margin-left:11%; margin-top: 1em">For each token
type, the following tags may be specified:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>server</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is the server to send the RADIUS request to. It can
be a hostname with optional port, an ip address with
optional port, or a Unix domain socket address. The default
is <b>/var/kerberos/krb5kdc/&lt;name&gt;.socket</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>secret</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This tag indicates a filename (which may be relative to
<b>/var/kerberos/krb5kdc</b>) containing the secret used to
encrypt the RADIUS packets. The secret should appear in the
first line of the file by itself; leading and trailing
whitespace on the line will be removed. If the value of
<b>server</b> is a Unix domain socket address, this tag is
optional, and an empty secret will be used if it is not
specified. Otherwise, this tag is required.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>timeout</b></p>

<p style="margin-left:22%;">An integer which specifies the
time in seconds during which the KDC should attempt to
contact the RADIUS server. This tag is the total time across
all retries and should be less than the time which an OTP
value remains valid for. The default is 5 seconds.</p>

<p style="margin-left:11%;"><b>retries</b></p>

<p style="margin-left:22%;">This tag specifies the number
of retries to make to the RADIUS server. The default is 3
retries (4 tries).</p>

<p style="margin-left:11%;"><b>strip_realm</b></p>

<p style="margin-left:22%;">If this tag is <b>true</b>, the
principal without the realm will be passed to the RADIUS
server. Otherwise, the realm will be included. The default
value is <b>true</b>.</p>

<p style="margin-left:11%;"><b>indicator</b></p>

<p style="margin-left:22%;">This tag specifies an
authentication indicator to be included in the ticket if
this token type is used to authenticate. This option may be
specified multiple times. (New in release 1.14.)</p>

<p style="margin-left:11%; margin-top: 1em">In the
following example, requests are sent to a remote server via
UDP:</p>

<pre style="margin-left:15%; margin-top: 1em">[otp]
    MyRemoteTokenType = {
        server = radius.mydomain.com:1812
        secret = SEmfiajf42$
        timeout = 15
        retries = 5
        strip_realm = true
    }</pre>


<p style="margin-left:11%; margin-top: 1em">An implicit
default token type named <b>DEFAULT</b> is defined for when
the per&minus;principal configuration does not specify a
token type. Its configuration is shown below. You may
override this token type to something applicable for your
situation:</p>

<pre style="margin-left:15%; margin-top: 1em">[otp]
    DEFAULT = {
        strip_realm = false
    }</pre>


<h2>PKINIT OPTIONS
<a name="PKINIT OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b></p>

<p style="margin-left:15%;">The following are
pkinit&minus;specific options. These values may be specified
in [kdcdefaults] as global defaults, or within a
realm&minus;specific subsection of [realms]. Also note that
a realm&minus;specific value over&minus;rides, does not add
to, a generic [kdcdefaults] specification. The search order
is:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>1.</p></td>
<td width="1%"></td>
<td width="59%">


<p>realm&minus;specific subsection of [realms]:</p></td>
<td width="26%">
</td></tr>
</table>

<pre style="margin-left:20%; margin-top: 1em">[realms]
    EXAMPLE.COM = {
        pkinit_anchors = FILE:/usr/local/example.com.crt
    }</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="1%"></td>
<td width="67%">


<p style="margin-top: 1em">generic value in the
[kdcdefaults] section:</p></td>
<td width="18%">
</td></tr>
</table>

<pre style="margin-left:20%; margin-top: 1em">[kdcdefaults]
    pkinit_anchors = DIR:/usr/local/generic_trusted_cas/</pre>


<p style="margin-left:11%; margin-top: 1em">For information
about the syntax of some of these options, see <i>Specifying
PKINIT identity information</i> in <i>krb5.conf(5)</i>.
<b><br>
pkinit_anchors</b></p>

<p style="margin-left:22%;">Specifies the location of
trusted anchor (root) certificates which the KDC trusts to
sign client certificates. This option is required if pkinit
is to be supported by the KDC. This option may be specified
multiple times.</p>

<p style="margin-left:11%;"><b>pkinit_dh_min_bits</b></p>

<p style="margin-left:22%;">Specifies the minimum number of
bits the KDC is willing to accept for a client's
Diffie&minus;Hellman key. The default is 2048.</p>

<p style="margin-left:11%;"><b>pkinit_allow_upn</b></p>

<p style="margin-left:22%;">Specifies that the KDC is
willing to accept client certificates with the Microsoft
UserPrincipalName (UPN) Subject Alternative Name (SAN). This
means the KDC accepts the binding of the UPN in the
certificate to the Kerberos principal name. The default
value is false.</p>

<p style="margin-left:22%; margin-top: 1em">Without this
option, the KDC will only accept certificates with the
id&minus;pkinit&minus;san as defined in <i>RFC 4556</i>.
There is currently no option to disable SAN checking in the
KDC.</p>

<p style="margin-left:11%;"><b>pkinit_eku_checking</b></p>

<p style="margin-left:22%;">This option specifies what
Extended Key Usage (EKU) values the KDC is willing to accept
in client certificates. The values recognized in the
kdc.conf file are: <b><br>
kpClientAuth</b></p>

<p style="margin-left:32%;">This is the default value and
specifies that client certificates must have the
id&minus;pkinit&minus;KPClientAuth EKU as defined in <i>RFC
4556</i>.</p>

<p style="margin-left:22%;"><b>scLogin</b></p>

<p style="margin-left:32%;">If scLogin is specified, client
certificates with the Microsoft Smart Card Login EKU
(id&minus;ms&minus;kp&minus;sc&minus;logon) will be
accepted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>If none is specified, then client certificates will not
be checked to verify they have an acceptable EKU. The use of
this option is not recommended.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>pkinit_identity</b></p>

<p style="margin-left:22%;">Specifies the location of the
KDC's X.509 identity information. This option is required if
pkinit is to be supported by the KDC.</p>

<p style="margin-left:11%;"><b>pkinit_indicator</b></p>

<p style="margin-left:22%;">Specifies an authentication
indicator to include in the ticket if pkinit is used to
authenticate. This option may be specified multiple times.
(New in release 1.14.)</p>

<p style="margin-left:11%;"><b>pkinit_kdc_ocsp</b></p>

<p style="margin-left:22%;">Specifies the location of the
KDC's OCSP.</p>

<p style="margin-left:11%;"><b>pkinit_pool</b></p>

<p style="margin-left:22%;">Specifies the location of
intermediate certificates which may be used by the KDC to
complete the trust chain between a client's certificate and
a trusted anchor. This option may be specified multiple
times.</p>

<p style="margin-left:11%;"><b>pkinit_revoke</b></p>

<p style="margin-left:22%;">Specifies the location of
Certificate Revocation List (CRL) information to be used by
the KDC when verifying the validity of client certificates.
This option may be specified multiple times.</p>


<p style="margin-left:11%;"><b>pkinit_require_crl_checking</b></p>

<p style="margin-left:22%;">The default certificate
verification process will always check the available
revocation information to see if a certificate has been
revoked. If a match is found for the certificate in a CRL,
verification fails. If the certificate being verified is not
listed in a CRL, or there is no CRL present for its issuing
CA, and <b>pkinit_require_crl_checking</b> is false, then
verification succeeds.</p>

<p style="margin-left:22%; margin-top: 1em">However, if
<b>pkinit_require_crl_checking</b> is true and there is no
CRL information available for the issuing CA, then
verification fails.</p>


<p style="margin-left:22%; margin-top: 1em"><b>pkinit_require_crl_checking</b>
should be set to true if the policy is such that
up&minus;to&minus;date CRLs must be present for every
CA.</p>

<h2>ENCRYPTION TYPES
<a name="ENCRYPTION TYPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Any tag in the
configuration files which requires a list of encryption
types can be set to some combination of the following
strings. Encryption types marked as &quot;weak&quot; are
available for compatibility but not recommended for use.</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-89572.png" alt="Image grohtml-89572.png"></p>

<p style="margin-left:11%;">The string <b>DEFAULT</b> can
be used to refer to the default set of types for the
variable in question. Types or families can be removed from
the current list by prefixing them with a minus sign
(&quot;&minus;&quot;). Types or families can be prefixed
with a plus sign (&quot;+&quot;) for symmetry; it has the
same meaning as just listing the type or family. For
example, &quot;<b>DEFAULT &minus;des</b>&quot; would be the
default set of encryption types with DES types removed, and
&quot;<b>des3 DEFAULT</b>&quot; would be the default set of
encryption types with triple DES types moved to the
front.</p>

<p style="margin-left:11%; margin-top: 1em">While
<b>aes128&minus;cts</b> and <b>aes256&minus;cts</b> are
supported for all Kerberos operations, they are not
supported by very old versions of our GSSAPI implementation
(krb5&minus;1.3.1 and earlier). Services running versions of
krb5 without AES support must not be given AES keys in the
KDC database.</p>

<h2>KEYSALT LISTS
<a name="KEYSALT LISTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Kerberos keys
for users are usually derived from passwords. Kerberos
commands and configuration parameters that affect generation
of keys take lists of enctype&minus;salttype
(&quot;keysalt&quot;) pairs, known as <i>keysalt lists</i>.
Each keysalt pair is an enctype name followed by a salttype
name, in the format <i>enc</i>:<i>salt</i>. Individual
keysalt list members are separated by comma (&quot;,&quot;)
characters or space characters. For example:</p>

<pre style="margin-left:15%; margin-top: 1em">kadmin &minus;e aes256&minus;cts:normal,aes128&minus;cts:normal</pre>


<p style="margin-left:11%; margin-top: 1em">would start up
kadmin so that by default it would generate
password&minus;derived keys for the <b>aes256&minus;cts</b>
and <b>aes128&minus;cts</b> encryption types, using a
<b>normal</b> salt.</p>

<p style="margin-left:11%; margin-top: 1em">To ensure that
people who happen to pick the same password do not have the
same key, Kerberos 5 incorporates more information into the
key using something called a salt. The supported salt types
are as follows:</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-89573.png" alt="Image grohtml-89573.png"></p>

<h2>SAMPLE KDC.CONF FILE
<a name="SAMPLE KDC.CONF FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here's an
example of a kdc.conf file:</p>
<pre style="margin-left:15%; margin-top: 1em">[kdcdefaults]
    kdc_ports = 88

[realms]
    ATHENA.MIT.EDU = {
        kadmind_port = 749
        max_life = 12h 0m 0s
        max_renewable_life = 7d 0h 0m 0s
        master_key_type = aes256&minus;cts&minus;hmac&minus;sha1&minus;96
        supported_enctypes = aes256&minus;cts&minus;hmac&minus;sha1&minus;96:normal aes128&minus;cts&minus;hmac&minus;sha1&minus;96:normal
        database_module = openldap_ldapconf
    }

[logging]
    kdc = FILE:/usr/local/var/krb5kdc/kdc.log
    admin_server = FILE:/usr/local/var/krb5kdc/kadmin.log

[dbdefaults]
    ldap_kerberos_container_dn = cn=krbcontainer,dc=mit,dc=edu


[dbmodules]
    openldap_ldapconf = {
        db_library = kldap
        disable_last_success = true
        ldap_kdc_dn = &quot;cn=krbadmin,dc=mit,dc=edu&quot;
            # this object needs to have read rights on
            # the realm container and principal subtrees
        ldap_kadmind_dn = &quot;cn=krbadmin,dc=mit,dc=edu&quot;
            # this object needs to have read and write rights on
            # the realm container and principal subtrees
        ldap_service_password_file = /etc/kerberos/service.keyfile
        ldap_servers = ldaps://kerberos.mit.edu
        ldap_conns_per_server = 5
    }</pre>


<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/var/kerberos/krb5kdc/kdc.conf</b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><i>krb5.conf(5)</i></b>,
<i>krb5kdc(8)</i>, <i>kadm5.acl(5)</i></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">MIT</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1985-2016,
MIT</p>
<hr>
</body>
</html>
