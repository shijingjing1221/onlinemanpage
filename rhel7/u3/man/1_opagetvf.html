<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:01:47 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>opagetvf</title>

</head>
<body>

<h1 align="center">opagetvf</h1>

<a href="#NAME">NAME</a><br>
<a href="#Syntax">Syntax</a><br>
<a href="#Options">Options</a><br>
<a href="#Examples">Examples</a><br>
<a href="#Sample Outputs">Sample Outputs</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opagetvf</p>

<p style="margin-left:11%; margin-top: 1em">Used for
scripting application use of vFabrics, such as for mpirun
parameters. You can query by VF Name, VF Index, Service ID,
MGID, PKey, or SL. Fetches the Virtual Fabric info in a
delimited format. Returns exactly one matching VF. When
multiple VFs match the query, it prefers non-default VFs in
which the calling server is a full member. If multiple
choices remain, it returns the one with the lowest VF Index.
Uses the same algorithm as the Distributed SA Plug-in
(DSAP).</p>

<p style="margin-left:11%; margin-top: 1em">The tool can be
used with additional scripts to help set PKey, SL, MTU, and
Rate when running MPI jobs. Internally, this tool is based
on the opasaquery -o vfinfocsv command. For more
information, see <i>opasaquery</i></p>

<h2>Syntax
<a name="Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opagetvf [-h
<i>hfi</i>] [-p <i>port</i>] [-e] [-d <i>vfname</i>|-S
<i>serviceId</i>|-m <i>mcgid</i>|-i <i>vfIndex</i>| -k
<i>pkey</i>|-L <i>sl</i>]</p>

<h2>Options
<a name="Options"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em">--help</p></td>
<td width="1%"></td>
<td width="71%">


<p style="margin-top: 1em">Produces full help text.</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-h <i>hfi</i></p></td>
<td width="1%"></td>
<td width="71%">


<p>HFI to send by. Default is first HFI.</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-p <i>port</i></p></td>
<td width="1%"></td>
<td width="71%">


<p>Port to send by, default is first active port.</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-e</p></td>
<td width="1%"></td>
<td width="71%">


<p>Output MTU and rate as enum values.</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p>-d <i>vfname</i></p></td>
<td width="1%"></td>
<td width="71%">


<p>Queries by VirtualFabric Name.</p></td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:11%;">-S <i>serviceId</i></p>

<p style="margin-left:26%;">Queries by Application
ServiceId.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>-m <i>gid</i></p></td>
<td width="6%"></td>
<td width="57%">


<p>Queries by Application Multicast GID.</p></td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:11%;">-i <i>vfindex</i></p>

<p style="margin-left:26%;">Queries by VirtualFabric
Index.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-k <i>pkey</i></p></td>
<td width="4%"></td>
<td width="46%">


<p>Queries by VirtualFabric PKey.</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>-L <i>SL</i></p></td>
<td width="4%"></td>
<td width="46%">


<p>Queries by VirtualFabric SL.</p></td>
<td width="28%">
</td></tr>
</table>

<h2>Examples
<a name="Examples"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opagetvf -d
'Compute' <br>
opagetvf -h 2 -p 2 -d 'Compute'</p>

<h2>Sample Outputs
<a name="Sample Outputs"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The output is
of the form: name:index:pkey:sl:mtu:rate:optionflag as shown
in the following example.</p>

<p style="margin-left:11%; margin-top: 1em">Option flag
(bitmask) values include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">0x00 Indicates no bits are set.
Specifically, no QOS, no Security, and no flow control
disabled (which means flow control is enabled).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>0x01 Security</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>0x02 QOS</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>0x04 Flow Control Disable</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"># opagetvf -d
Default <br>
 Default:0:0xffff:0:unlimited:unlimited:0x0</p>
<hr>
</body>
</html>
