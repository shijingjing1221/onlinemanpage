<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 23:18:24 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ZSHMODULES</title>

</head>
<body>

<h1 align="center">ZSHMODULES</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#THE ZSH/ATTR MODULE">THE ZSH/ATTR MODULE</a><br>
<a href="#THE ZSH/CAP MODULE">THE ZSH/CAP MODULE</a><br>
<a href="#THE ZSH/CLONE MODULE">THE ZSH/CLONE MODULE</a><br>
<a href="#THE ZSH/COMPCTL MODULE">THE ZSH/COMPCTL MODULE</a><br>
<a href="#THE ZSH/COMPLETE MODULE">THE ZSH/COMPLETE MODULE</a><br>
<a href="#THE ZSH/COMPLIST MODULE">THE ZSH/COMPLIST MODULE</a><br>
<a href="#THE ZSH/COMPUTIL MODULE">THE ZSH/COMPUTIL MODULE</a><br>
<a href="#THE ZSH/CURSES MODULE">THE ZSH/CURSES MODULE</a><br>
<a href="#THE ZSH/DATETIME MODULE">THE ZSH/DATETIME MODULE</a><br>
<a href="#THE ZSH/DELTOCHAR MODULE">THE ZSH/DELTOCHAR MODULE</a><br>
<a href="#THE ZSH/EXAMPLE MODULE">THE ZSH/EXAMPLE MODULE</a><br>
<a href="#THE ZSH/FILES MODULE">THE ZSH/FILES MODULE</a><br>
<a href="#THE ZSH/LANGINFO MODULE">THE ZSH/LANGINFO MODULE</a><br>
<a href="#THE ZSH/MAPFILE MODULE">THE ZSH/MAPFILE MODULE</a><br>
<a href="#THE ZSH/MATHFUNC MODULE">THE ZSH/MATHFUNC MODULE</a><br>
<a href="#THE ZSH/NEWUSER MODULE">THE ZSH/NEWUSER MODULE</a><br>
<a href="#THE ZSH/PARAMETER MODULE">THE ZSH/PARAMETER MODULE</a><br>
<a href="#THE ZSH/PCRE MODULE">THE ZSH/PCRE MODULE</a><br>
<a href="#THE ZSH/REGEX MODULE">THE ZSH/REGEX MODULE</a><br>
<a href="#THE ZSH/SCHED MODULE">THE ZSH/SCHED MODULE</a><br>
<a href="#THE ZSH/NET/SOCKET MODULE">THE ZSH/NET/SOCKET MODULE</a><br>
<a href="#THE ZSH/STAT MODULE">THE ZSH/STAT MODULE</a><br>
<a href="#THE ZSH/SYSTEM MODULE">THE ZSH/SYSTEM MODULE</a><br>
<a href="#THE ZSH/NET/TCP MODULE">THE ZSH/NET/TCP MODULE</a><br>
<a href="#THE ZSH/TERMCAP MODULE">THE ZSH/TERMCAP MODULE</a><br>
<a href="#THE ZSH/TERMINFO MODULE">THE ZSH/TERMINFO MODULE</a><br>
<a href="#THE ZSH/ZFTP MODULE">THE ZSH/ZFTP MODULE</a><br>
<a href="#THE ZSH/ZLE MODULE">THE ZSH/ZLE MODULE</a><br>
<a href="#THE ZSH/ZLEPARAMETER MODULE">THE ZSH/ZLEPARAMETER MODULE</a><br>
<a href="#THE ZSH/ZPROF MODULE">THE ZSH/ZPROF MODULE</a><br>
<a href="#THE ZSH/ZPTY MODULE">THE ZSH/ZPTY MODULE</a><br>
<a href="#THE ZSH/ZSELECT MODULE">THE ZSH/ZSELECT MODULE</a><br>
<a href="#THE ZSH/ZUTIL MODULE">THE ZSH/ZUTIL MODULE</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshmodules
&minus; zsh loadable modules</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Some optional
parts of zsh are in modules, separate from the core of the
shell. Each of these modules may be linked in to the shell
at build time, or can be dynamically linked while the shell
is running if the installation supports this feature.
Modules are linked at runtime with the <b>zmodload</b>
command, see <i>zshbuiltins</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The modules
that are bundled with the zsh distribution are: <b><br>
zsh/attr</b></p>

<p style="margin-left:22%;">Builtins for manipulating
extended attributes (xattr).</p>

<p style="margin-left:11%;"><b>zsh/cap</b></p>

<p style="margin-left:22%;">Builtins for manipulating
POSIX.1e (POSIX.6) capability (privilege) sets.</p>

<p style="margin-left:11%;"><b>zsh/clone</b></p>

<p style="margin-left:22%;">A builtin that can clone a
running shell onto another terminal.</p>

<p style="margin-left:11%;"><b>zsh/compctl</b></p>

<p style="margin-left:22%;">The <b>compctl</b> builtin for
controlling completion.</p>

<p style="margin-left:11%;"><b>zsh/complete</b></p>

<p style="margin-left:22%;">The basic completion code.</p>

<p style="margin-left:11%;"><b>zsh/complist</b></p>

<p style="margin-left:22%;">Completion listing
extensions.</p>

<p style="margin-left:11%;"><b>zsh/computil</b></p>

<p style="margin-left:22%;">A module with utility builtins
needed for the shell function based completion system.</p>

<p style="margin-left:11%;"><b>zsh/curses</b></p>

<p style="margin-left:22%;">curses windowing commands</p>

<p style="margin-left:11%;"><b>zsh/datetime</b></p>

<p style="margin-left:22%;">Some date/time commands and
parameters.</p>

<p style="margin-left:11%;"><b>zsh/deltochar</b></p>

<p style="margin-left:22%;">A ZLE function duplicating
EMACS&rsquo; <b>zap&minus;to&minus;char</b>.</p>

<p style="margin-left:11%;"><b>zsh/example</b></p>

<p style="margin-left:22%;">An example of how to write a
module.</p>

<p style="margin-left:11%;"><b>zsh/files</b></p>

<p style="margin-left:22%;">Some basic file manipulation
commands as builtins.</p>

<p style="margin-left:11%;"><b>zsh/langinfo</b></p>

<p style="margin-left:22%;">Interface to locale
information.</p>

<p style="margin-left:11%;"><b>zsh/mapfile</b></p>

<p style="margin-left:22%;">Access to external files via a
special associative array.</p>

<p style="margin-left:11%;"><b>zsh/mathfunc</b></p>

<p style="margin-left:22%;">Standard scientific functions
for use in mathematical evaluations.</p>

<p style="margin-left:11%;"><b>zsh/newuser</b></p>

<p style="margin-left:22%;">Arrange for files for new users
to be installed.</p>

<p style="margin-left:11%;"><b>zsh/parameter</b></p>

<p style="margin-left:22%;">Access to internal hash tables
via special associative arrays.</p>

<p style="margin-left:11%;"><b>zsh/pcre</b></p>

<p style="margin-left:22%;">Interface to the PCRE
library.</p>

<p style="margin-left:11%;"><b>zsh/regex</b></p>

<p style="margin-left:22%;">Interface to the POSIX regex
library.</p>

<p style="margin-left:11%;"><b>zsh/sched</b></p>

<p style="margin-left:22%;">A builtin that provides a timed
execution facility within the shell.</p>

<p style="margin-left:11%;"><b>zsh/net/socket</b></p>

<p style="margin-left:22%;">Manipulation of Unix domain
sockets</p>

<p style="margin-left:11%;"><b>zsh/stat</b></p>

<p style="margin-left:22%;">A builtin command interface to
the <b>stat</b> system call.</p>

<p style="margin-left:11%;"><b>zsh/system</b></p>

<p style="margin-left:22%;">A builtin interface to various
low&minus;level system features.</p>

<p style="margin-left:11%;"><b>zsh/net/tcp</b></p>

<p style="margin-left:22%;">Manipulation of TCP sockets</p>

<p style="margin-left:11%;"><b>zsh/termcap</b></p>

<p style="margin-left:22%;">Interface to the termcap
database.</p>

<p style="margin-left:11%;"><b>zsh/terminfo</b></p>

<p style="margin-left:22%;">Interface to the terminfo
database.</p>

<p style="margin-left:11%;"><b>zsh/zftp</b></p>

<p style="margin-left:22%;">A builtin FTP client.</p>

<p style="margin-left:11%;"><b>zsh/zle</b></p>

<p style="margin-left:22%;">The Zsh Line Editor, including
the <b>bindkey</b> and <b>vared</b> builtins.</p>

<p style="margin-left:11%;"><b>zsh/zleparameter</b></p>

<p style="margin-left:22%;">Access to internals of the Zsh
Line Editor via parameters.</p>

<p style="margin-left:11%;"><b>zsh/zprof</b></p>

<p style="margin-left:22%;">A module allowing profiling for
shell functions.</p>

<p style="margin-left:11%;"><b>zsh/zpty</b></p>

<p style="margin-left:22%;">A builtin for starting a
command in a pseudo&minus;terminal.</p>

<p style="margin-left:11%;"><b>zsh/zselect</b></p>

<p style="margin-left:22%;">Block and return when file
descriptors are ready.</p>

<p style="margin-left:11%;"><b>zsh/zutil</b></p>

<p style="margin-left:22%;">Some utility builtins, e.g. the
one for supporting configuration via styles.</p>

<h2>THE ZSH/ATTR MODULE
<a name="THE ZSH/ATTR MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/attr</b> module is used for manipulating extended
attributes. The <b>&minus;h</b> option causes all commands
to operate on symbolic links instead of their targets. The
builtins in this module are: <b><br>
zgetattr</b> [ <b>&minus;h</b> ] <i>filename attribute</i> [
<i>parameter</i> ]</p>

<p style="margin-left:22%;">Get the extended attribute
<i>attribute</i> from the specified <i>filename</i>. If the
optional argument <i>parameter</i> is given, the attribute
is set on that parameter instead of being printed to
stdout.</p>

<p style="margin-left:11%;"><b>zsetattr</b> [
<b>&minus;h</b> ] <i>filename attribute value</i></p>

<p style="margin-left:22%;">Set the extended attribute
<i>attribute</i> on the specified <i>filename</i> to
<i>value</i>.</p>

<p style="margin-left:11%;"><b>zdelattr</b> [
<b>&minus;h</b> ] <i>filename attribute</i></p>

<p style="margin-left:22%;">Remove the extended attribute
<i>attribute</i> from the specified <i>filename</i>.</p>

<p style="margin-left:11%;"><b>zlistattr</b> [
<b>&minus;h</b> ] <i>filename</i> [ <i>parameter</i> ]</p>

<p style="margin-left:22%;">List the extended attributes
currently set on the specified <i>filename</i>. If the
optional argument <i>parameter</i> is given, the list of
attributes is set on that parameter instead of being printed
to stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zgetattr</b>
and <b>zlistattr</b> allocate memory dynamically. If the
attribute or list of attributes grows between the allocation
and the call to get them, they return 2. On all other
errors, 1 is returned. This allows the calling function to
check for this case and retry.</p>

<h2>THE ZSH/CAP MODULE
<a name="THE ZSH/CAP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/cap</b> module is used for manipulating POSIX.1e
(POSIX.6) capability sets. If the operating system does not
support this interface, the builtins defined by this module
will do nothing. The builtins in this module are: <b><br>
cap</b> [ <i>capabilities</i> ]</p>

<p style="margin-left:22%;">Change the shell&rsquo;s
process capability sets to the specified
<i>capabilities</i>, otherwise display the shell&rsquo;s
current capabilities.</p>

<p style="margin-left:11%;"><b>getcap</b> <i>filename</i>
...</p>

<p style="margin-left:22%;">This is a built&minus;in
implementation of the POSIX standard utility. It displays
the capability sets on each specified <i>filename</i>.</p>

<p style="margin-left:11%;"><b>setcap</b> <i>capabilities
filename</i> ...</p>

<p style="margin-left:22%;">This is a built&minus;in
implementation of the POSIX standard utility. It sets the
capability sets on each specified <i>filename</i> to the
specified <i>capabilities</i>.</p>

<h2>THE ZSH/CLONE MODULE
<a name="THE ZSH/CLONE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/clone</b> module makes available one builtin command:
<b><br>
clone</b> <i>tty</i></p>

<p style="margin-left:22%;">Creates a forked instance of
the current shell, attached to the specified <i>tty</i>. In
the new shell, the <b>PID</b>, <b>PPID</b> and <b>TTY</b>
special parameters are changed appropriately. <b>$!</b> is
set to zero in the new shell, and to the new shell&rsquo;s
PID in the original shell.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status of the builtin is zero in both shells if successful,
and non&minus;zero on error.</p>

<p style="margin-left:22%; margin-top: 1em">The target of
<b>clone</b> should be an unused terminal, such as an unused
virtual console or a virtual terminal created by</p>

<p style="margin-left:22%; margin-top: 1em">xterm &minus;e
sh &minus;c &rsquo;trap : INT QUIT TSTP; tty; while :; do
sleep 100000000; done&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">Some words of
explanation are warranted about this long xterm command
line: when doing clone on a pseudo&minus;terminal, some
other session (&quot;session&quot; meant as a unix session
group, or SID) is already owning the terminal. Hence the
cloned zsh cannot acquire the pseudo&minus;terminal as a
controlling tty. That means two things:</p>

<p style="margin-left:22%; margin-top: 1em">the job control
signals will go to the sh&minus;started&minus;by&minus;xterm
process <br>
group (that&rsquo;s why we disable INT QUIT and TSTP with
trap; otherwise <br>
the while loop could get suspended or killed)</p>

<p style="margin-left:22%; margin-top: 1em">the cloned
shell will have job control disabled, and the job <br>
control keys (control&minus;C, control&minus;\ and
control&minus;Z) will not work.</p>

<p style="margin-left:22%; margin-top: 1em">This does not
apply when cloning to an <b>unused</b> vc.</p>

<p style="margin-left:22%; margin-top: 1em">Cloning to a
used (and unprepared) terminal will result in two processes
reading simultaneously from the same terminal, with input
bytes going randomly to either process.</p>

<p style="margin-left:22%; margin-top: 1em"><b>clone</b> is
mostly useful as a shell built&minus;in replacement for
openvt.</p>

<h2>THE ZSH/COMPCTL MODULE
<a name="THE ZSH/COMPCTL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/compctl</b> module makes available two builtin
commands. <b>compctl</b>, is the old, deprecated way to
control completions for ZLE. See <i>zshcompctl</i>(1). The
other builtin command, <b>compcall</b> can be used in
user&minus;defined completion widgets, see
<i>zshcompwid</i>(1).</p>

<h2>THE ZSH/COMPLETE MODULE
<a name="THE ZSH/COMPLETE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/complete</b> module makes available several builtin
commands which can be used in user&minus;defined completion
widgets, see <i>zshcompwid</i>(1).</p>

<h2>THE ZSH/COMPLIST MODULE
<a name="THE ZSH/COMPLIST MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/complist</b> module offers three extensions to
completion listings: the ability to highlight matches in
such a list, the ability to scroll through long lists and a
different style of menu completion.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Colored
completion listings</b> <br>
Whenever one of the parameters <b>ZLS_COLORS</b> or
<b>ZLS_COLOURS</b> is set and the <b>zsh/complist</b> module
is loaded or linked into the shell, completion lists will be
colored. Note, however, that <b>complist</b> will not
automatically be loaded if it is not linked in: on systems
with dynamic loading, &lsquo;<b>zmodload
zsh/complist</b>&rsquo; is required.</p>

<p style="margin-left:11%; margin-top: 1em">The parameters
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> describe how
matches are highlighted. To turn on highlighting an empty
value suffices, in which case all the default values given
below will be used. The format of the value of these
parameters is the same as used by the GNU version of the
<b>ls</b> command: a colon&minus;separated list of
specifications of the form
&lsquo;<i>name</i>=<i>value</i>&rsquo;. The <i>name</i> may
be one of the following strings, most of which specify file
types for which the <i>value</i> will be used. The strings
and their default values are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>no 0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for normal text (i.e. when displaying something other
than a matched file)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fi 0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for regular files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>di 32</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for directories</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ln 36</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for symbolic links. If this has the special value
<b>target</b>, symbolic links are dereferenced and the
target file used to determine the display format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>pi 31</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for named pipes (FIFOs)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>so 33</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for sockets</p></td></tr>
</table>

<p style="margin-left:11%;"><b>bd 44;37</b></p>

<p style="margin-left:22%;">for block devices</p>

<p style="margin-left:11%;"><b>cd 44;37</b></p>

<p style="margin-left:22%;">for character devices</p>

<p style="margin-left:11%;"><b>or</b> <i>none</i></p>

<p style="margin-left:22%;">for a symlink to nonexistent
file (default is the value defined for <b>ln</b>)</p>

<p style="margin-left:11%;"><b>mi</b> <i>none</i></p>

<p style="margin-left:22%;">for a non&minus;existent file
(default is the value defined for <b>fi</b>); this code is
currently not used</p>

<p style="margin-left:11%;"><b>su 37;41</b></p>

<p style="margin-left:22%;">for files with setuid bit
set</p>

<p style="margin-left:11%;"><b>sg 30;43</b></p>

<p style="margin-left:22%;">for files with setgid bit
set</p>

<p style="margin-left:11%;"><b>tw 30;42</b></p>

<p style="margin-left:22%;">for world writable directories
with sticky bit set</p>

<p style="margin-left:11%;"><b>ow 34;43</b></p>

<p style="margin-left:22%;">for world writable directories
without sticky bit set</p>

<p style="margin-left:11%;"><b>sa</b> <i>none</i></p>

<p style="margin-left:22%;">for files with an associated
suffix alias; this is only tested after specific suffixes,
as described below</p>

<p style="margin-left:11%;"><b>st 37;44</b></p>

<p style="margin-left:22%;">for directories with sticky bit
set but not world writable</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ex 35</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for executable files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>lc \e[</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the left code (see below)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>rc m</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the right code</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>tc 0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the character indicating the file type printed after
filenames if the <b>LIST_TYPES</b> option is set</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>sp 0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the spaces printed after matches to align the next
column</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>ec</b> <i>none</i></p>

<p style="margin-left:22%;">for the end code</p>

<p style="margin-left:11%; margin-top: 1em">Apart from
these strings, the <i>name</i> may also be an asterisk
(&lsquo;<b>*</b>&rsquo;) followed by any string. The
<i>value</i> given for such a string will be used for all
files whose name ends with the string. The <i>name</i> may
also be an equals sign (&lsquo;<b>=</b>&rsquo;) followed by
a pattern; the <b>EXTENDED_GLOB</b> option will be turned on
for evaluation of the pattern. The <i>value</i> given for
this pattern will be used for all matches (not just
filenames) whose display string are matched by the pattern.
Definitions for the form with the leading equal sign take
precedence over the values defined for file types, which in
turn take precedence over the form with the leading asterisk
(file extensions).</p>

<p style="margin-left:11%; margin-top: 1em">The
leading&minus;equals form also allows different parts of the
displayed strings to be colored differently. For this, the
pattern has to use the &lsquo;<b>(#b)</b>&rsquo; globbing
flag and pairs of parentheses surrounding the parts of the
strings that are to be colored differently. In this case the
<i>value</i> may consist of more than one color code
separated by equal signs. The first code will be used for
all parts for which no explicit code is specified and the
following codes will be used for the parts matched by the
sub&minus;patterns in parentheses. For example, the
specification &lsquo;<b>=(#b)(?)*(?)=0=3=7</b>&rsquo; will
be used for all matches which are at least two characters
long and will use the code &lsquo;<b>3</b>&rsquo; for the
first character, &lsquo;<b>7</b>&rsquo; for the last
character and &lsquo;<b>0</b>&rsquo; for the rest.</p>

<p style="margin-left:11%; margin-top: 1em">All three forms
of <i>name</i> may be preceded by a pattern in parentheses.
If this is given, the <i>value</i> will be used only for
matches in groups whose names are matched by the pattern
given in the parentheses. For example,
&lsquo;<b>(g*)m*=43</b>&rsquo; highlights all matches
beginning with &lsquo;<b>m</b>&rsquo; in groups whose names
begin with &lsquo;<b>g</b>&rsquo; using the color code
&lsquo;<b>43</b>&rsquo;. In case of the
&lsquo;<b>lc</b>&rsquo;, &lsquo;<b>rc</b>&rsquo;, and
&lsquo;<b>ec</b>&rsquo; codes, the group pattern is
ignored.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
all patterns are tried in the order in which they appear in
the parameter value until the first one matches which is
then used.</p>

<p style="margin-left:11%; margin-top: 1em">When printing a
match, the code prints the value of <b>lc</b>, the value for
the file&minus;type or the last matching specification with
a &lsquo;<b>*</b>&rsquo;, the value of <b>rc</b>, the string
to display for the match itself, and then the value of
<b>ec</b> if that is defined or the values of <b>lc</b>,
<b>no</b>, and <b>rc</b> if <b>ec</b> is not defined.</p>

<p style="margin-left:11%; margin-top: 1em">The default
values are ISO 6429 (ANSI) compliant and can be used on
vt100 compatible terminals such as <b>xterm</b>s. On
monochrome terminals the default values will have no visible
effect. The <b>colors</b> function from the contribution can
be used to get associative arrays containing the codes for
ANSI terminals (see the section &lsquo;Other
Functions&rsquo; in <i>zshcontrib</i>(1)). For example,
after loading <b>colors</b>, one could use
&lsquo;<b>$colors[red]</b>&rsquo; to get the code for
foreground color red and
&lsquo;<b>$colors[bg&minus;green]</b>&rsquo; for the code
for background color green.</p>

<p style="margin-left:11%; margin-top: 1em">If the
completion system invoked by compinit is used, these
parameters should not be set directly because the system
controls them itself. Instead, the <b>list&minus;colors</b>
style should be used (see the section &lsquo;Completion
System Configuration&rsquo; in <i>zshcompsys</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Scrolling in
completion listings</b> <br>
To enable scrolling through a completion list, the
<b>LISTPROMPT</b> parameter must be set. Its value will be
used as the prompt; if it is the empty string, a default
prompt will be used. The value may contain escapes of the
form &lsquo;<b>%x</b>&rsquo;. It supports the escapes
&lsquo;<b>%B</b>&rsquo;, &lsquo;<b>%b</b>&rsquo;,
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%s</b>&rsquo;,
&lsquo;<b>%U</b>&rsquo;, &lsquo;<b>%u</b>&rsquo;,
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%f</b>&rsquo;,
&lsquo;<b>%K</b>&rsquo;, &lsquo;<b>%k</b>&rsquo; and
&lsquo;<b>%{...%}</b>&rsquo; used also in shell prompts as
well as three pairs of additional sequences: a
&lsquo;<b>%l</b>&rsquo; or &lsquo;<b>%L</b>&rsquo; is
replaced by the number of the last line shown and the total
number of lines in the form
&lsquo;<i>number</i><b>/</b><i>total</i>&rsquo;; a
&lsquo;<b>%m</b>&rsquo; or &lsquo;<b>%M</b>&rsquo; is
replaced with the number of the last match shown and the
total number of matches; and &lsquo;<b>%p</b>&rsquo; or
&lsquo;<b>%P</b>&rsquo; is replaced with
&lsquo;<b>Top</b>&rsquo;, &lsquo;<b>Bottom</b>&rsquo; or the
position of the first line shown in percent of the total
number of lines, respectively. In each of these cases the
form with the uppercase letter will be replaced with a
string of fixed width, padded to the right with spaces,
while the lowercase form will not be padded.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>LISTPROMPT</b> is set, the completion code will
not ask if the list should be shown. Instead it immediately
starts displaying the list, stopping after the first
screenful, showing the prompt at the bottom, waiting for a
keypress after temporarily switching to the
<b>listscroll</b> keymap. Some of the zle functions have a
special meaning while scrolling lists: <b><br>
send&minus;break</b></p>

<p style="margin-left:22%;">stops listing discarding the
key pressed</p>

<p style="margin-left:11%;"><b>accept&minus;line</b>,
<b>down&minus;history</b>,
<b>down&minus;line&minus;or&minus;history <br>
down&minus;line&minus;or&minus;search</b>,
<b>vi&minus;down&minus;line&minus;or&minus;history</b></p>

<p style="margin-left:22%;">scrolls forward one line</p>

<p style="margin-left:11%;"><b>complete&minus;word</b>,
<b>menu&minus;complete</b>,
<b>expand&minus;or&minus;complete <br>
expand&minus;or&minus;complete&minus;prefix</b>,
<b>menu&minus;complete&minus;or&minus;expand</b></p>

<p style="margin-left:22%;">scrolls forward one
screenful</p>

<p style="margin-left:11%;"><b>accept&minus;search</b></p>

<p style="margin-left:22%;">stop listing but take no other
action</p>

<p style="margin-left:11%; margin-top: 1em">Every other
character stops listing and immediately processes the key as
usual. Any key that is not bound in the <b>listscroll</b>
keymap or that is bound to <b>undefined&minus;key</b> is
looked up in the keymap currently selected.</p>

<p style="margin-left:11%; margin-top: 1em">As for the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters,
<b>LISTPROMPT</b> should not be set directly when using the
shell function based completion system. Instead, the
<b>list&minus;prompt</b> style should be used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Menu
selection</b> <br>
The <b>zsh/complist</b> module also offers an alternative
style of selecting matches from a list, called menu
selection, which can be used if the shell is set up to
return to the last prompt after showing a completion list
(see the <b>ALWAYS_LAST_PROMPT</b> option in
<i>zshoptions</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">Menu selection
can be invoked directly by the widget
<b>menu&minus;select</b> defined by this module. This is a
standard ZLE widget that can be bound to a key in the usual
way as described in <i>zshzle</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Alternatively,
the parameter <b>MENUSELECT</b> can be set to an integer,
which gives the minimum number of matches that must be
present before menu selection is automatically turned on.
This second method requires that menu completion be started,
either directly from a widget such as
<b>menu&minus;complete</b>, or due to one of the options
<b>MENU_COMPLETE</b> or <b>AUTO_MENU</b> being set. If
<b>MENUSELECT</b> is set, but is 0, 1 or empty, menu
selection will always be started during an ambiguous menu
completion.</p>

<p style="margin-left:11%; margin-top: 1em">When using the
completion system based on shell functions, the
<b>MENUSELECT</b> parameter should not be used (like the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters
described above). Instead, the <b>menu</b> style should be
used with the <b>select=</b><i>...</i> keyword.</p>

<p style="margin-left:11%; margin-top: 1em">After menu
selection is started, the matches will be listed. If there
are more matches than fit on the screen, only the first
screenful is shown. The matches to insert into the command
line can be selected from this list. In the list one match
is highlighted using the value for <b>ma</b> from the
<b>ZLS_COLORS</b> or <b>ZLS_COLOURS</b> parameter. The
default value for this is &lsquo;<b>7</b>&rsquo; which
forces the selected match to be highlighted using standout
mode on a vt100&minus;compatible terminal. If neither
<b>ZLS_COLORS</b> nor <b>ZLS_COLOURS</b> is set, the same
terminal control sequence as for the &lsquo;<b>%S</b>&rsquo;
escape in prompts is used.</p>

<p style="margin-left:11%; margin-top: 1em">If there are
more matches than fit on the screen and the parameter
<b>MENUPROMPT</b> is set, its value will be shown below the
matches. It supports the same escape sequences as
<b>LISTPROMPT</b>, but the number of the match or line shown
will be that of the one where the mark is placed. If its
value is the empty string, a default prompt will be
used.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>MENUSCROLL</b> parameter can be used to specify how the
list is scrolled. If the parameter is unset, this is done
line by line, if it is set to &lsquo;<b>0</b>&rsquo; (zero),
the list will scroll half the number of lines of the screen.
If the value is positive, it gives the number of lines to
scroll and if it is negative, the list will be scrolled the
number of lines of the screen minus the (absolute)
value.</p>

<p style="margin-left:11%; margin-top: 1em">As for the
<b>ZLS_COLORS</b>, <b>ZLS_COLOURS</b> and <b>LISTPROMPT</b>
parameters, neither <b>MENUPROMPT</b> nor <b>MENUSCROLL</b>
should be set directly when using the shell function based
completion system. Instead, the <b>select&minus;prompt</b>
and <b>select&minus;scroll</b> styles should be used.</p>

<p style="margin-left:11%; margin-top: 1em">The completion
code sometimes decides not to show all of the matches in the
list. These hidden matches are either matches for which the
completion function which added them explicitly requested
that they not appear in the list (using the <b>&minus;n</b>
option of the <b>compadd</b> builtin command) or they are
matches which duplicate a string already in the list
(because they differ only in things like prefixes or
suffixes that are not displayed). In the list used for menu
selection, however, even these matches are shown so that it
is possible to select them. To highlight such matches the
<b>hi</b> and <b>du</b> capabilities in the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters are
supported for hidden matches of the first and second kind,
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">Selecting
matches is done by moving the mark around using the zle
movement functions. When not all matches can be shown on the
screen at the same time, the list will scroll up and down
when crossing the top or bottom line. The following zle
functions have special meaning during menu selection. Note
that the following always perform the same task within the
menu selection map and cannot be replaced by user defined
widgets, nor can the set of functions be extended: <b><br>
accept&minus;line</b>, <b>accept&minus;search</b></p>

<p style="margin-left:22%;">accept the current match and
leave menu selection (but do not cause the command line to
be accepted)</p>

<p style="margin-left:11%;"><b>send&minus;break</b></p>

<p style="margin-left:22%;">leaves menu selection and
restores the previous contents of the command line</p>

<p style="margin-left:11%;"><b>redisplay</b>,
<b>clear&minus;screen</b></p>

<p style="margin-left:22%;">execute their normal function
without leaving menu selection</p>


<p style="margin-left:11%;"><b>accept&minus;and&minus;hold</b>,
<b>accept&minus;and&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">accept the currently inserted
match and continue selection allowing to select the next
match to insert into the line</p>


<p style="margin-left:11%;"><b>accept&minus;and&minus;infer&minus;next&minus;history</b></p>

<p style="margin-left:22%;">accepts the current match and
then tries completion with menu selection again; in the case
of files this allows one to select a directory and
immediately attempt to complete files in it; if there are no
matches, a message is shown and one can use <b>undo</b> to
go back to completion on the previous level, every other key
leaves menu selection (including the other zle functions
which are otherwise special during menu selection)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>undo</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>removes matches inserted during the menu selection by
one of the three functions before</p></td></tr>
</table>

<p style="margin-left:11%;"><b>down&minus;history</b>,
<b>down&minus;line&minus;or&minus;history <br>
vi&minus;down&minus;line&minus;or&minus;history</b>,
<b>down&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">moves the mark one line
down</p>

<p style="margin-left:11%;"><b>up&minus;history</b>,
<b>up&minus;line&minus;or&minus;history <br>
vi&minus;up&minus;line&minus;or&minus;history</b>,
<b>up&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">moves the mark one line up</p>

<p style="margin-left:11%;"><b>forward&minus;char</b>,
<b>vi&minus;forward&minus;char</b></p>

<p style="margin-left:22%;">moves the mark one column
right</p>

<p style="margin-left:11%;"><b>backward&minus;char</b>,
<b>vi&minus;backward&minus;char</b></p>

<p style="margin-left:22%;">moves the mark one column
left</p>

<p style="margin-left:11%;"><b>forward&minus;word</b>,
<b>vi&minus;forward&minus;word <br>
vi&minus;forward&minus;word&minus;end</b>,
<b>emacs&minus;forward&minus;word</b></p>

<p style="margin-left:22%;">moves the mark one screenful
down</p>

<p style="margin-left:11%;"><b>backward&minus;word</b>,
<b>vi&minus;backward&minus;word</b>,
<b>emacs&minus;backward&minus;word</b></p>

<p style="margin-left:22%;">moves the mark one screenful
up</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;blank&minus;word</b>,
<b>vi&minus;forward&minus;blank&minus;word&minus;end</b></p>

<p style="margin-left:22%;">moves the mark to the first
line of the next group of matches</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;blank&minus;word</b></p>

<p style="margin-left:22%;">moves the mark to the last line
of the previous group of matches</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;history</b></p>

<p style="margin-left:22%;">moves the mark to the first
line</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;history</b></p>

<p style="margin-left:22%;">moves the mark to the last
line</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;buffer&minus;or&minus;history</b>,
<b>beginning&minus;of&minus;line <br>
beginning&minus;of&minus;line&minus;hist</b>,
<b>vi&minus;beginning&minus;of&minus;line</b></p>

<p style="margin-left:22%;">moves the mark to the leftmost
column</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;buffer&minus;or&minus;history</b>,
<b>end&minus;of&minus;line <br>
end&minus;of&minus;line&minus;hist</b>,
<b>vi&minus;end&minus;of&minus;line</b></p>

<p style="margin-left:22%;">moves the mark to the rightmost
column</p>

<p style="margin-left:11%;"><b>complete&minus;word</b>,
<b>menu&minus;complete</b>,
<b>expand&minus;or&minus;complete <br>
expand&minus;or&minus;complete&minus;prefix</b>,
<b>menu&minus;expand&minus;or&minus;complete</b></p>

<p style="margin-left:22%;">moves the mark to the next
match</p>


<p style="margin-left:11%;"><b>reverse&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">moves the mark to the previous
match</p>

<p style="margin-left:11%;"><b>vi&minus;insert</b></p>

<p style="margin-left:22%;">this toggles between normal and
interactive mode; in interactive mode the keys bound to
<b>self&minus;insert</b> and
<b>self&minus;insert&minus;unmeta</b> insert into the
command line as in normal editing mode but without leaving
menu selection; after each character completion is tried
again and the list changes to contain only the new matches;
the completion widgets make the longest unambiguous string
be inserted in the command line and <b>undo</b> and
<b>backward&minus;delete&minus;char</b> go back to the
previous set of matches</p>


<p style="margin-left:11%;"><b>history&minus;incremental&minus;search&minus;forward
<br>

history&minus;incremental&minus;search&minus;backward</b></p>

<p style="margin-left:22%;">this starts incremental
searches in the list of completions displayed; in this mode,
<b>accept&minus;line</b> only leaves incremental search,
going back to the normal menu selection mode</p>

<p style="margin-left:11%; margin-top: 1em">All movement
functions wrap around at the edges; any other zle function
not listed leaves menu selection and executes that function.
It is possible to make widgets in the above list do the same
by using the form of the widget with a
&lsquo;<b>.</b>&rsquo; in front. For example, the widget
&lsquo;<b>.accept&minus;line</b>&rsquo; has the effect of
leaving menu selection and accepting the entire command
line.</p>

<p style="margin-left:11%; margin-top: 1em">During this
selection the widget uses the keymap <b>menuselect</b>. Any
key that is not defined in this keymap or that is bound to
<b>undefined&minus;key</b> is looked up in the keymap
currently selected. This is used to ensure that the most
important keys used during selection (namely the cursor
keys, return, and TAB) have sensible defaults. However, keys
in the <b>menuselect</b> keymap can be modified directly
using the <b>bindkey</b> builtin command (see
<i>zshmodules</i>(1)). For example, to make the return key
leave menu selection without accepting the match currently
selected one could call</p>

<p style="margin-left:22%; margin-top: 1em"><b>bindkey
&minus;M menuselect &rsquo;^M&rsquo;
send&minus;break</b></p>

<p style="margin-left:11%; margin-top: 1em">after loading
the <b>zsh/complist</b> module.</p>

<h2>THE ZSH/COMPUTIL MODULE
<a name="THE ZSH/COMPUTIL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/computil</b> module adds several builtin commands
that are used by some of the completion functions in the
completion system based on shell functions (see
<i>zshcompsys</i>(1) ). Except for <b>compquote</b> these
builtin commands are very specialised and thus not very
interesting when writing your own completion functions. In
summary, these builtin commands are: <b><br>
comparguments</b></p>

<p style="margin-left:22%;">This is used by the
<b>_arguments</b> function to do the argument and command
line parsing. Like <b>compdescribe</b> it has an option
<b>&minus;i</b> to do the parsing and initialize some
internal state and various options to access the state
information to decide what should be completed.</p>

<p style="margin-left:11%;"><b>compdescribe</b></p>

<p style="margin-left:22%;">This is used by the
<b>_describe</b> function to build the displays for the
matches and to get the strings to add as matches with their
options. On the first call one of the options
<b>&minus;i</b> or <b>&minus;I</b> should be supplied as the
first argument. In the first case, display strings without
the descriptions will be generated, in the second case, the
string used to separate the matches from their descriptions
must be given as the second argument and the descriptions
(if any) will be shown. All other arguments are like the
definition arguments to <b>_describe</b> itself.</p>

<p style="margin-left:22%; margin-top: 1em">Once
<b>compdescribe</b> has been called with either the
<b>&minus;i</b> or the <b>&minus;I</b> option, it can be
repeatedly called with the <b>&minus;g</b> option and the
names of five arrays as its arguments. This will step
through the different sets of matches and store the options
in the first array, the strings with descriptions in the
second, the matches for these in the third, the strings
without descriptions in the fourth, and the matches for them
in the fifth array. These are then directly given to
<b>compadd</b> to register the matches with the completion
code.</p>

<p style="margin-left:11%;"><b>compfiles</b></p>

<p style="margin-left:22%;">Used by the <b>_path_files</b>
function to optimize complex recursive filename generation
(globbing). It does three things. With the <b>&minus;p</b>
and <b>&minus;P</b> options it builds the glob patterns to
use, including the paths already handled and trying to
optimize the patterns with respect to the prefix and suffix
from the line and the match specification currently used.
The <b>&minus;i</b> option does the directory tests for the
<b>ignore&minus;parents</b> style and the <b>&minus;r</b>
option tests if a component for some of the matches are
equal to the string on the line and removes all other
matches if that is true.</p>

<p style="margin-left:11%;"><b>compgroups</b></p>

<p style="margin-left:22%;">Used by the <b>_tags</b>
function to implement the internals of the
<b>group&minus;order</b> style. This only takes its
arguments as names of completion groups and creates the
groups for it (all six types: sorted and unsorted, both
without removing duplicates, with removing all duplicates
and with removing consecutive duplicates).</p>

<p style="margin-left:11%;"><b>compquote</b> [
<b>&minus;p</b> ] <i>names</i> ...</p>

<p style="margin-left:22%;">There may be reasons to write
completion functions that have to add the matches using the
<b>&minus;Q</b> option to <b>compadd</b> and perform quoting
themselves. Instead of interpreting the first character of
the <b>all_quotes</b> key of the <b>compstate</b> special
association and using the <b>q</b> flag for parameter
expansions, one can use this builtin command. The arguments
are the names of scalar or array parameters and the values
of these parameters are quoted as needed for the innermost
quoting level. If the <b>&minus;p</b> option is given,
quoting is done as if there is some prefix before the values
of the parameters, so that a leading equal sign will not be
quoted.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status is non&minus;zero in case of an error and zero
otherwise.</p>

<p style="margin-left:11%;"><b>comptags <br>
comptry</b></p>

<p style="margin-left:22%;">These implement the internals
of the tags mechanism.</p>

<p style="margin-left:11%;"><b>compvalues</b></p>

<p style="margin-left:22%;">Like <b>comparguments</b>, but
for the <b>_values</b> function.</p>

<h2>THE ZSH/CURSES MODULE
<a name="THE ZSH/CURSES MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/curses</b> module makes available one builtin command
and various parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Builtin <br>
zcurses init <br>
zcurses end <br>
zcurses addwin</b> <i>targetwin nlines ncols begin_y
begin_x</i> [ <i>parentwin</i> ] <b><br>
zcurses delwin</b> <i>targetwin</i> <b><br>
zcurses refresh</b> [ <i>targetwin</i> ... ] <b><br>
zcurses touch</b> <i>targetwin</i> ... <b><br>
zcurses move</b> <i>targetwin new_y new_x</i> <b><br>
zcurses clear</b> <i>targetwin</i> [ <b>redraw</b> |
<b>eol</b> | <b>bot</b> ] <b><br>
zcurses position</b> <i>targetwin array</i> <b><br>
zcurses char</b> <i>targetwin character</i> <b><br>
zcurses string</b> <i>targetwin string</i> <b><br>
zcurses border</b> <i>targetwin border</i> <b><br>
zcurses attr</b> <i>targetwin</i> [
<i>{+/&minus;}attribute</i> |
<i>fg_col</i><b>/</b><i>bg_col</i> ] [...] <b><br>
zcurses bg</b> <i>targetwin</i> [
<i>{+/&minus;}attribute</i> |
<i>fg_col</i><b>/</b><i>bg_col</i> | <b>@</b><i>char</i> ]
[...] <b><br>
zcurses scroll</b> <i>targetwin</i> [ <b>on</b> | <b>off</b>
| {+/&minus;}<i>lines</i> ] <b><br>
zcurses input</b> <i>targetwin</i> [ <i>param</i> [
<i>kparam</i> [ <i>mparam</i> ] ] ] <b><br>
zcurses mouse</b> [ <b>delay</b> <i>num</i> |
{+/&minus;}<b>motion</b> ] <b><br>
zcurses timeout</b> <i>targetwin intval</i> <b><br>
zcurses querychar</b> <i>targetwin</i> [ <i>param</i> ]</p>

<p style="margin-left:22%;">Manipulate curses windows. All
uses of this command should be bracketed by
&lsquo;<b>zcurses init</b>&rsquo; to initialise use of
curses, and &lsquo;<b>zcurses end</b>&rsquo; to end it;
omitting &lsquo;<b>zcurses end</b>&rsquo; can cause the
terminal to be in an unwanted state.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>addwin</b> creates a window with <i>nlines</i> lines and
<i>ncols</i> columns. Its upper left corner will be placed
at row <i>begin_y</i> and column <i>begin_x</i> of the
screen. <i>targetwin</i> is a string and refers to the name
of a window that is not currently assigned. Note in
particular the curses convention that vertical values appear
before horizontal values.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>addwin</b> is given an existing window as the final
argument, the new window is created as a subwindow of
<i>parentwin</i>. This differs from an ordinary new window
in that the memory of the window contents is shared with the
parent&rsquo;s memory. Subwindows must be deleted before
their parent. Note that the coordinates of subwindows are
relative to the screen, not the parent, as with other
windows.</p>

<p style="margin-left:22%; margin-top: 1em">Use the
subcommand <b>delwin</b> to delete a window created with
<b>addwin</b>. Note that <b>end</b> does <i>not</i>
implicitly delete windows, and that <b>delwin</b> does not
erase the screen image of the window.</p>

<p style="margin-left:22%; margin-top: 1em">The window
corresponding to the full visible screen is called
<b>stdscr</b>; it always exists after &lsquo;<b>zcurses
init</b>&rsquo; and cannot be delete with <b>delwin</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>refresh</b> will refresh window <i>targetwin</i>; this is
necessary to make any pending changes (such as characters
you have prepared for output with <b>char</b>) visible on
the screen. <b>refresh</b> without an argument causes the
screen to be cleared and redrawn. If multiple windows are
given, the screen is updated once at the end.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>touch</b> marks the <i>targetwin</i>s listed as changed.
This is necessary before <b>refresh</b>ing windows if a
window that was in front of another window (which may be
<b>stdscr</b>) is deleted.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>move</b> moves the cursor position in <i>targetwin</i> to
new coordinates <i>new_y</i> and <i>new_x</i>. Note that the
subcommand <b>string</b> (but not the subcommand
<b>char</b>) advances the cursor position over the
characters added.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>clear</b> erases the contents of <i>targetwin</i>. One
(and no more than one) of three options may be specified.
With the option <b>redraw</b>, in addition the next
<b>refresh</b> of <i>targetwin</i> will cause the screen to
be cleared and repainted. With the option <b>eol</b>,
<i>targetwin</i> is only cleared to the end of the current
cursor line. With the option <b>bot</b>, <i>targetwin</i> is
cleared to the end of the window, i.e everything to the
right and below the cursor is cleared.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>position</b> writes various positions associated with
<i>targetwin</i> into the array named <i>array</i>. These
are, in order:</p>

<p style="margin-left:22%; margin-top: 1em">The y and x
coordinates of the cursor relative to the top left</p>

<p style="margin-left:32%;">of <i>targetwin</i></p>

<p style="margin-left:22%; margin-top: 1em">The y and x
coordinates of the top left of <i>targetwin</i> on the</p>

<p style="margin-left:32%;">screen</p>

<p style="margin-left:22%; margin-top: 1em">The size of
<i>targetwin</i> in y and x dimensions.</p>

<p style="margin-left:22%; margin-top: 1em">Outputting
characters and strings are achieved by <b>char</b> and
<b>string</b> respectively.</p>

<p style="margin-left:22%; margin-top: 1em">To draw a
border around window <i>targetwin</i>, use <b>border</b>.
Note that the border is not subsequently handled specially:
in other words, the border is simply a set of characters
output at the edge of the window. Hence it can be
overwritten, can scroll off the window, etc.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>attr</b> will set <i>targetwin</i>&rsquo;s attributes or
foreground/background color pair for any successive
character output. Each <i>attribute</i> given on the line
may be prepended by a <b>+</b> to set or a <b>&minus;</b> to
unset that attribute; <b>+</b> is assumed if absent. The
attributes supported are <b>blink</b>, <b>bold</b>,
<b>dim</b>, <b>reverse</b>, <b>standout</b>, and
<b>underline</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>fg_col</i><b>/</b><i>bg_col</i> attribute (to be read as
&lsquo;<i>fg_col</i> on <i>bg_col</i>&rsquo;) sets the
foreground and background color for character output. The
color <b>default</b> is sometimes available (in particular
if the library is ncurses), specifying the foreground or
background color with which the terminal started. The color
pair <b>default/default</b> is always available.</p>

<p style="margin-left:22%; margin-top: 1em"><b>bg</b>
overrides the color and other attributes of all characters
in the window. Its usual use is to set the background
initially, but it will overwrite the attributes of any
characters at the time when it is called. In addition to the
arguments allowed with <b>attr</b>, an argument
<b>@</b><i>char</i> specifies a character to be shown in
otherwise blank areas of the window. Owing to limitations of
curses this cannot be a multibyte character (use of ASCII
characters only is recommended). As the specified set of
attributes override the existing background, turning
attributes off in the arguments is not useful, though this
does not cause an error.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>scroll</b> can be used with <b>on</b> or <b>off</b> to
enabled or disable scrolling of a window when the cursor
would otherwise move below the window due to typing or
output. It can also be used with a positive or negative
integer to scroll the window up or down the given number of
lines without changing the current cursor position (which
therefore appears to move in the opposite direction relative
to the window). In the second case, if scrolling is
<b>off</b> it is temporarily turned <b>on</b> to allow the
window to be scrolled.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>input</b> reads a single character from the window
without echoing it back. If <i>param</i> is supplied the
character is assigned to the parameter <i>param</i>, else it
is assigned to the parameter <i>REPLY</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If both
<i>param</i> and <i>kparam</i> are supplied, the key is read
in &lsquo;keypad&rsquo; mode. In this mode special keys such
as function keys and arrow keys return the name of the key
in the parameter <i>kparam</i>. The key names are the macros
defined in the <b>curses.h</b> or <b>ncurses.h</b> with the
prefix &lsquo;<b>KEY_</b>&rsquo; removed; see also the
description of the parameter <b>zcurses_keycodes</b> below.
Other keys cause a value to be set in <i>param</i> as
before. On a successful return only one of <i>param</i> or
<i>kparam</i> contains a non&minus;empty string; the other
is set to an empty string.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>mparam</i> is also supplied, <b>input</b> attempts to
handle mouse input. This is only available with the ncurses
library; mouse handling can be detected by checking for the
exit status of &lsquo;<b>zcurses mouse</b>&rsquo; with no
arguments. If a mouse button is clicked (or double&minus; or
triple&minus;clicked, or pressed or released with a
configurable delay from being clicked) then <b>kparam</b> is
set to the string <b>MOUSE</b>, and <i>mparam</i> is set to
an array consisting of the following elements:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>An identifier to discriminate different input devices;
this is only rarely useful.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>The x, y and z coordinates of the mouse click relative
to the full screen, as three elements in that order (i.e.
the y coordinate is, unusually, after the x coordinate). The
z coordinate is only available for a few unusual input
devices and is otherwise set to zero.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>Any events that occurred as separate items; usually
there will be just one. An event consists of <b>PRESSED</b>,
<b>RELEASED</b>, <b>CLICKED</b>, <b>DOUBLE_CLICKED</b> or
<b>TRIPLE_CLICKED</b> followed immediately (in the same
element) by the number of the button.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the shift key was pressed, the string
<b>SHIFT</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the control key was pressed, the string
<b>CTRL</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the alt key was pressed, the string <b>ALT</b>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Not all mouse
events may be passed through to the terminal window; most
terminal emulators handle some mouse events themselves. Note
that the ncurses manual implies that using input both with
and without mouse handling may cause the mouse cursor to
appear and disappear.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>mouse</b> can be used to configure the use of the mouse.
There is no window argument; mouse options are global.
&lsquo;<b>zcurses mouse</b>&rsquo; with no arguments returns
status 0 if mouse handling is possible, else status 1.
Otherwise, the possible arguments (which may be combined on
the same command line) are as follows. <b>delay</b>
<i>num</i> sets the maximum delay in milliseconds between
press and release events to be considered as a click; the
value 0 disables click resolution, and the default is one
sixth of a second. <b>motion</b> proceeded by an optional
&lsquo;<b>+</b>&rsquo; (the default) or <b>&minus;</b> turns
on or off reporting of mouse motion in addition to clicks,
presses and releases, which are always reported. However, it
appears reports for mouse motion are not currently
implemented.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>timeout</b> specifies a timeout value for input from
<i>targetwin</i>. If <i>intval</i> is negative,
&lsquo;<b>zcurses input</b>&rsquo; waits indefinitely for a
character to be typed; this is the default. If <i>intval</i>
is zero, &lsquo;<b>zcurses input</b>&rsquo; returns
immediately; if there is typeahead it is returned, else no
input is done and status 1 is returned. If <i>intval</i> is
positive, &lsquo;<b>zcurses input</b>&rsquo; waits
<i>intval</i> milliseconds for input and if there is none at
the end of that period returns status 1.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>querychar</b> queries the character at the current cursor
position. The return values are stored in the array named
<i>param</i> if supplied, else in the array <b>reply</b>.
The first value is the character (which may be a multibyte
character if the system supports them); the second is the
color pair in the usual <i>fg_col</i><b>/</b><i>bg_col</i>
notation, or <b>0</b> if color is not supported. Any
attributes other than color that apply to the character, as
set with the subcommand <b>attr</b>, appear as additional
elements.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Parameters
<br>
ZCURSES_COLORS</b></p>

<p style="margin-left:22%;">Readonly integer. The maximum
number of colors the terminal supports. This value is
initialised by the curses library and is not available until
the first time <b>zcurses init</b> is run.</p>

<p style="margin-left:11%;"><b>ZCURSES_COLOR_PAIRS</b></p>

<p style="margin-left:22%;">Readonly integer. The maximum
number of color pairs <i>fg_col</i><b>/</b><i>bg_col</i>
that may be defined in &lsquo;<b>zcurses attr</b>&rsquo;
commands; note this limit applies to all color pairs that
have been used whether or not they are currently active.
This value is initialised by the curses library and is not
available until the first time <b>zcurses init</b> is
run.</p>

<p style="margin-left:11%;"><b>zcurses_attrs</b></p>

<p style="margin-left:22%;">Readonly array. The attributes
supported by <b>zsh/curses</b>; available as soon as the
module is loaded.</p>

<p style="margin-left:11%;"><b>zcurses_colors</b></p>

<p style="margin-left:22%;">Readonly array. The colors
supported by <b>zsh/curses</b>; available as soon as the
module is loaded.</p>

<p style="margin-left:11%;"><b>zcurses_keycodes</b></p>

<p style="margin-left:22%;">Readonly array. The values that
may be returned in the second parameter supplied to
&lsquo;<b>zcurses input</b>&rsquo; in the order in which
they are defined internally by curses. Not all function keys
are listed, only <b>F0</b>; curses reserves space for
<b>F0</b> up to <b>F63</b>.</p>

<p style="margin-left:11%;"><b>zcurses_windows</b></p>

<p style="margin-left:22%;">Readonly array. The current
list of windows, i.e. all windows that have been created
with &lsquo;<b>zcurses addwin</b>&rsquo; and not removed
with &lsquo;<b>zcurses delwin</b>&rsquo;.</p>

<h2>THE ZSH/DATETIME MODULE
<a name="THE ZSH/DATETIME MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/datetime</b> module makes available one builtin
command: <b><br>
strftime</b> [ <b>&minus;s</b> <i>scalar</i> ] <i>format
epochtime</i> <b><br>
strftime &minus;r</b> [ <b>&minus;q</b> ] [ <b>&minus;s</b>
<i>scalar</i> ] <i>format timestring</i></p>

<p style="margin-left:22%;">Output the date denoted by
<i>epochtime</i> in the <i>format</i> specified.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;r</b> (reverse), use the format <i>format</i> to
parse the input string <i>timestring</i> and output the
number of seconds since the epoch at which the time
occurred. If no timezone is parsed, the current timezone is
used; other parameters are set to zero if not present. If
<i>timestring</i> does not match <i>format</i> the command
returns status 1; it will additionally print an error
message unless the option <b>&minus;q</b> (quiet) is given.
If <i>timestring</i> matches <i>format</i> but not all
characters in <i>timestring</i> were used, the conversion
succeeds; however, a warning is issued unless the option
<b>&minus;q</b> is given. The matching is implemented by the
system function <b>strptime</b>; see <i>strptime</i>(3).
This means that zsh format extensions are not available,
however for reverse lookup they are not required. If the
function is not implemented, the command returns status 2
and (unless <b>&minus;q</b> is given) prints a message.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;s</b> <i>scalar</i> is given, assign the date
string (or epoch time in seconds if <b>&minus;r</b> is
given) to <i>scalar</i> instead of printing it.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/datetime</b> module makes available several
parameters; all are readonly: <b><br>
EPOCHREALTIME</b></p>

<p style="margin-left:22%;">A floating point value
representing the number of seconds since the epoch. The
notional accuracy is to nanoseconds if the
<b>clock_gettime</b> call is available and to microseconds
otherwise, but in practice the range of double precision
floating point and shell scheduling latencies may be
significant effects.</p>

<p style="margin-left:11%;"><b>EPOCHSECONDS</b></p>

<p style="margin-left:22%;">An integer value representing
the number of seconds since the epoch.</p>

<p style="margin-left:11%;"><b>epochtime</b></p>

<p style="margin-left:22%;">An array value containing the
number of seconds since the epoch in the first element and
the remainder of the time since the epoch in nanoseconds in
the second element. To ensure the two elements are
consistent the array should be copied or otherwise
referenced as a single substitution before the values are
used. The following idiom may be used:</p>

<p style="margin-left:32%; margin-top: 1em"><b>for secs
nsecs in $epochtime; do <br>
... <br>
done</b></p>

<h2>THE ZSH/DELTOCHAR MODULE
<a name="THE ZSH/DELTOCHAR MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/deltochar</b> module makes available two ZLE
functions: <b><br>
delete&minus;to&minus;char</b></p>

<p style="margin-left:22%;">Read a character from the
keyboard, and delete from the cursor position up to and
including the next (or, with repeat count <i>n</i>, the
<i>n</i>th) instance of that character. Negative repeat
counts mean delete backwards.</p>


<p style="margin-left:11%;"><b>zap&minus;to&minus;char</b></p>

<p style="margin-left:22%;">This behaves like
<b>delete&minus;to&minus;char</b>, except that the final
occurrence of the character itself is not deleted.</p>

<h2>THE ZSH/EXAMPLE MODULE
<a name="THE ZSH/EXAMPLE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/example</b> module makes available one builtin
command: <b><br>
example</b> [ <b>&minus;flags</b> ] [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">Displays the flags and
arguments it is invoked with.</p>

<p style="margin-left:11%; margin-top: 1em">The purpose of
the module is to serve as an example of how to write a
module.</p>

<h2>THE ZSH/FILES MODULE
<a name="THE ZSH/FILES MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/files</b> module makes available some common commands
for file manipulation as builtins; these commands are
probably not needed for many normal situations but can be
useful in emergency recovery situations with constrained
resources. The commands do not implement all features now
required by relevant standards committees.</p>

<p style="margin-left:11%; margin-top: 1em">For all
commands, a variant beginning <b>zf_</b> is also available
and loaded automatically. Using the features capability of
zmodload will let you load only those names you want.</p>

<p style="margin-left:11%; margin-top: 1em">The commands
loaded by default are: <b><br>
chgrp</b> [ <b>&minus;hRs</b> ] <i>group filename</i>
...</p>

<p style="margin-left:22%;">Changes group of files
specified. This is equivalent to <b>chown</b> with a
<i>user&minus;spec</i> argument of
&lsquo;<b>:</b><i>group</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>chown</b> [
<b>&minus;hRs</b> ] <i>user&minus;spec filename</i> ...</p>

<p style="margin-left:22%;">Changes ownership and group of
files specified.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>user&minus;spec</i> can be in four forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; do not change group</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i><b>::</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; do not change group</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i><b>:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; change group to
<i>user</i>&rsquo;s primary group</p></td></tr>
</table>


<p style="margin-left:22%;"><i>user</i><b>:</b><i>group</i></p>

<p style="margin-left:32%;">change owner to <i>user</i>;
change group to <i>group</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>:</b><i>group</i></p></td>
<td width="1%"></td>
<td width="65%">


<p>do not change owner; change group to <i>group</i></p></td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In each case,
the &lsquo;<b>:</b>&rsquo; may instead be a
&lsquo;<b>.</b>&rsquo;. The rule is that if there is a
&lsquo;<b>:</b>&rsquo; then the separator is
&lsquo;<b>:</b>&rsquo;, otherwise if there is a
&lsquo;<b>.</b>&rsquo; then the separator is
&lsquo;<b>.</b>&rsquo;, otherwise there is no separator.</p>

<p style="margin-left:22%; margin-top: 1em">Each of
<i>user</i> and <i>group</i> may be either a username (or
group name, as appropriate) or a decimal user ID (group ID).
Interpretation as a name takes precedence, if there is an
all&minus;numeric username (or group name).</p>

<p style="margin-left:22%; margin-top: 1em">If the target
is a symbolic link, the <b>&minus;h</b> option causes
<b>chown</b> to set the ownership of the link instead of its
target.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;R</b> option causes <b>chown</b> to recursively
descend into directories, changing the ownership of all
files in the directory after changing the ownership of the
directory itself.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;s</b> option is a zsh extension to <b>chown</b>
functionality. It enables paranoid behaviour, intended to
avoid security problems involving a <b>chown</b> being
tricked into affecting files other than the ones intended.
It will refuse to follow symbolic links, so that (for
example) &lsquo;&lsquo;<b>chown luser
/tmp/foo/passwd</b>&rsquo;&rsquo; can&rsquo;t accidentally
chown <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a
link to <b>/etc</b>. It will also check where it is after
leaving directories, so that a recursive chown of a deep
directory tree can&rsquo;t end up recursively chowning
<b>/usr</b> as a result of directories being moved up the
tree.</p>

<p style="margin-left:11%;"><b>ln</b> [
<b>&minus;dfhins</b> ] <i>filename dest</i> <b><br>
ln</b> [ <b>&minus;dfhins</b> ] <i>filename</i> ...
<i>dir</i></p>

<p style="margin-left:22%;">Creates hard (or, with
<b>&minus;s</b>, symbolic) links. In the first form, the
specified <i>dest</i>ination is created, as a link to the
specified <i>filename</i>. In the second form, each of the
<i>filename</i>s is taken in turn, and linked to a pathname
in the specified <i>dir</i>ectory that has the same last
pathname component.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>ln</b> will not attempt to create hard links to
directories. This check can be overridden using the
<b>&minus;d</b> option. Typically only the super&minus;user
can actually succeed in creating hard links to directories.
This does not apply to symbolic links in any case.</p>

<p style="margin-left:22%; margin-top: 1em">By default,
existing files cannot be replaced by links. The
<b>&minus;i</b> option causes the user to be queried about
replacing existing files. The <b>&minus;f</b> option causes
existing files to be silently deleted, without querying.
<b>&minus;f</b> takes precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;h</b> and <b>&minus;n</b> options are identical
and both exist for compatibility; either one indicates that
if the target is a symlink then it should not be
dereferenced. Typically this is used in combination with
<b>&minus;sf</b> so that if an existing link points to a
directory then it will be removed, instead of followed. If
this option is used with multiple filenames and the target
is a symbolic link pointing to a directory then the result
is an error.</p>

<p style="margin-left:11%;"><b>mkdir</b> [ <b>&minus;p</b>
] [ <b>&minus;m</b> <i>mode</i> ] <i>dir</i> ...</p>

<p style="margin-left:22%;">Creates directories. With the
<b>&minus;p</b> option, non&minus;existing parent
directories are first created if necessary, and there will
be no complaint if the directory already exists. The
<b>&minus;m</b> option can be used to specify (in octal) a
set of file permissions for the created directories,
otherwise mode 777 modified by the current <b>umask</b> (see
<i>umask</i>(2)) is used.</p>

<p style="margin-left:11%;"><b>mv</b> [ <b>&minus;fi</b> ]
<i>filename dest</i> <b><br>
mv</b> [ <b>&minus;fi</b> ] <i>filename</i> ...
<i>dir</i></p>

<p style="margin-left:22%;">Moves files. In the first form,
the specified <i>filename</i> is moved to the specified
<i>dest</i>ination. In the second form, each of the
<i>filename</i>s is taken in turn, and moved to a pathname
in the specified <i>dir</i>ectory that has the same last
pathname component.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
user will be queried before replacing any file that the user
cannot write to, but writable files will be silently
removed. The <b>&minus;i</b> option causes the user to be
queried about replacing any existing files. The
<b>&minus;f</b> option causes any existing files to be
silently deleted, without querying. <b>&minus;f</b> takes
precedence.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
<b>mv</b> will not move files across devices. Historical
versions of <b>mv</b>, when actual renaming is impossible,
fall back on copying and removing files; if this behaviour
is desired, use <b>cp</b> and <b>rm</b> manually. This may
change in a future version.</p>

<p style="margin-left:11%;"><b>rm</b> [ <b>&minus;dfirs</b>
] <i>filename</i> ...</p>

<p style="margin-left:22%;">Removes files and directories
specified.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>rm</b> will not remove directories (except with the
<b>&minus;r</b> option). The <b>&minus;d</b> option causes
<b>rm</b> to try removing directories with <b>unlink</b>
(see <i>unlink</i>(2)), the same method used for files.
Typically only the super&minus;user can actually succeed in
unlinking directories in this way. <b>&minus;d</b> takes
precedence over <b>&minus;r</b>.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
user will be queried before removing any file that the user
cannot write to, but writable files will be silently
removed. The <b>&minus;i</b> option causes the user to be
queried about removing any files. The <b>&minus;f</b> option
causes files to be silently deleted, without querying, and
suppresses all error indications. <b>&minus;f</b> takes
precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;r</b> option causes <b>rm</b> to recursively
descend into directories, deleting all files in the
directory before removing the directory with the
<b>rmdir</b> system call (see <i>rmdir</i>(2)).</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;s</b> option is a zsh extension to <b>rm</b>
functionality. It enables paranoid behaviour, intended to
avoid common security problems involving a root&minus;run
<b>rm</b> being tricked into removing files other than the
ones intended. It will refuse to follow symbolic links, so
that (for example) &lsquo;&lsquo;<b>rm
/tmp/foo/passwd</b>&rsquo;&rsquo; can&rsquo;t accidentally
remove <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a
link to <b>/etc</b>. It will also check where it is after
leaving directories, so that a recursive removal of a deep
directory tree can&rsquo;t end up recursively removing
<b>/usr</b> as a result of directories being moved up the
tree.</p>

<p style="margin-left:11%;"><b>rmdir</b> <i>dir</i> ...</p>

<p style="margin-left:22%;">Removes empty directories
specified.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>sync</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Calls the system call of the same name (see
<i>sync</i>(2)), which flushes dirty buffers to disk. It
might return before the I/O has actually been completed.</p></td></tr>
</table>

<h2>THE ZSH/LANGINFO MODULE
<a name="THE ZSH/LANGINFO MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/langinfo</b> module makes available one parameter:
<b><br>
langinfo</b></p>

<p style="margin-left:22%;">An associative array that maps
langinfo elements to their values.</p>

<p style="margin-left:22%; margin-top: 1em">Your
implementation may support a number of the following
keys:</p>


<p style="margin-left:22%; margin-top: 1em"><b>CODESET</b>,
<b>D_T_FMT</b>, <b>D_FMT</b>, <b>T_FMT</b>,
<b>RADIXCHAR</b>, <b>THOUSEP</b>, <b>YESEXPR</b>,
<b>NOEXPR</b>, <b>CRNCYSTR</b>, <b>ABDAY_{1..7}</b>,
<b>DAY_{1..7}</b>, <b>ABMON_{1..12}</b>, <b>MON_{1..12}</b>,
<b>T_FMT_AMPM</b>, <b>AM_STR</b>, <b>PM_STR</b>, <b>ERA</b>,
<b>ERA_D_FMT</b>, <b>ERA_D_T_FMT</b>, <b>ERA_T_FMT</b>,
<b>ALT_DIGITS</b></p>

<h2>THE ZSH/MAPFILE MODULE
<a name="THE ZSH/MAPFILE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/mapfile</b> module provides one special associative
array parameter of the same name. <b><br>
mapfile</b></p>

<p style="margin-left:22%;">This associative array takes as
keys the names of files; the resulting value is the content
of the file. The value is treated identically to any other
text coming from a parameter. The value may also be assigned
to, in which case the file in question is written (whether
or not it originally existed); or an element may be unset,
which will delete the file in question. For example,
&lsquo;<b>vared mapfile[myfile]</b>&rsquo; works as
expected, editing the file &lsquo;<b>myfile</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">When the array
is accessed as a whole, the keys are the names of files in
the current directory, and the values are empty (to save a
huge overhead in memory). Thus <b>${(k)mapfile}</b> has the
same affect as the glob operator <b>*(D)</b>, since files
beginning with a dot are not special. Care must be taken
with expressions such as <b>rm ${(k)mapfile}</b>, which will
delete every file in the current directory without the usual
&lsquo;<b>rm *</b>&rsquo; test.</p>

<p style="margin-left:22%; margin-top: 1em">The parameter
<b>mapfile</b> may be made read&minus;only; in that case,
files referenced may not be written or deleted.</p>

<p style="margin-left:22%; margin-top: 1em">A file may
conveniently be read into an array as one line per element
with the form
&lsquo;<i>array</i><b>=(&quot;${(f)mapfile[</b><i>filename</i><b>]}&quot;)</b>&rsquo;.
The double quotes are necessary to prevent empty lines from
being removed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Limitations</b>
<br>
Although reading and writing of the file in question is
efficiently handled, zsh&rsquo;s internal memory management
may be arbitrarily baroque; however, <b>mapfile</b> is
usually very much more efficient than anything involving a
loop. Note in particular that the whole contents of the file
will always reside physically in memory when accessed
(possibly multiple times, due to standard parameter
substitution operations). In particular, this means handling
of sufficiently long files (greater than the machine&rsquo;s
swap space, or than the range of the pointer type) will be
incorrect.</p>

<p style="margin-left:11%; margin-top: 1em">No errors are
printed or flagged for non&minus;existent, unreadable, or
unwritable files, as the parameter mechanism is too low in
the shell execution hierarchy to make this convenient.</p>

<p style="margin-left:11%; margin-top: 1em">It is
unfortunate that the mechanism for loading modules does not
yet allow the user to specify the name of the shell
parameter to be given the special behaviour.</p>

<h2>THE ZSH/MATHFUNC MODULE
<a name="THE ZSH/MATHFUNC MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/mathfunc</b> module provides standard mathematical
functions for use when evaluating mathematical formulae. The
syntax agrees with normal C and FORTRAN conventions, for
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>(( f =
sin(0.3) ))</b></p>

<p style="margin-left:11%; margin-top: 1em">assigns the
sine of 0.3 to the parameter f.</p>

<p style="margin-left:11%; margin-top: 1em">Most functions
take floating point arguments and return a floating point
value. However, any necessary conversions from or to integer
type will be performed automatically by the shell. Apart
from <b>atan</b> with a second argument and the <b>abs</b>,
<b>int</b> and <b>float</b> functions, all functions behave
as noted in the manual page for the corresponding C
function, except that any arguments out of range for the
function in question will be detected by the shell and an
error reported.</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions take a single floating point argument:
<b>acos</b>, <b>acosh</b>, <b>asin</b>, <b>asinh</b>,
<b>atan</b>, <b>atanh</b>, <b>cbrt</b>, <b>ceil</b>,
<b>cos</b>, <b>cosh</b>, <b>erf</b>, <b>erfc</b>,
<b>exp</b>, <b>expm1</b>, <b>fabs</b>, <b>floor</b>,
<b>gamma</b>, <b>j0</b>, <b>j1</b>, <b>lgamma</b>,
<b>log</b>, <b>log10</b>, <b>log1p</b>, <b>logb</b>,
<b>sin</b>, <b>sinh</b>, <b>sqrt</b>, <b>tan</b>,
<b>tanh</b>, <b>y0</b>, <b>y1</b>. The <b>atan</b> function
can optionally take a second argument, in which case it
behaves like the C function <b>atan2</b>. The <b>ilogb</b>
function takes a single floating point argument, but returns
an integer.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>signgam</b> takes no arguments, and returns an integer,
which is the C variable of the same name, as described in
<i>gamma</i>(3). Note that it is therefore only useful
immediately after a call to <b>gamma</b> or <b>lgamma</b>.
Note also that &lsquo;<b>signgam(RPAR</b>&rsquo; and
&lsquo;<b>signgam</b>&rsquo; are distinct expressions.</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions take two floating point arguments:
<b>copysign</b>, <b>fmod</b>, <b>hypot</b>,
<b>nextafter</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
take an integer first argument and a floating point second
argument: <b>jn</b>, <b>yn</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
take a floating point first argument and an integer second
argument: <b>ldexp</b>, <b>scalb</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>abs</b> does not convert the type of its single argument;
it returns the absolute value of either a floating point
number or an integer. The functions <b>float</b> and
<b>int</b> convert their arguments into a floating point or
integer value (by truncation) respectively.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the C
<b>pow</b> function is available in ordinary math evaluation
as the &lsquo;<b>**</b>&rsquo; operator and is not provided
here.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>rand48</b> is available if your system&rsquo;s
mathematical library has the function <b>erand48(3)</b>. It
returns a pseudo&minus;random floating point number between
0 and 1. It takes a single string optional argument.</p>

<p style="margin-left:11%; margin-top: 1em">If the argument
is not present, the random number seed is initialised by
three calls to the <b>rand(3)</b> function
&minus;&minus;&minus; this produces the same random numbers
as the next three values of <b>$RANDOM</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the argument
is present, it gives the name of a scalar parameter where
the current random number seed will be stored. On the first
call, the value must contain at least twelve hexadecimal
digits (the remainder of the string is ignored), or the seed
will be initialised in the same manner as for a call to
<b>rand48</b> with no argument. Subsequent calls to
<b>rand48</b>(<i>param</i>) will then maintain the seed in
the parameter <i>param</i> as a string of twelve hexadecimal
digits, with no base signifier. The random number sequences
for different parameters are completely independent, and are
also independent from that used by calls to <b>rand48</b>
with no argument.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
consider</p>

<p style="margin-left:22%; margin-top: 1em"><b>print $((
rand48(seed) )) <br>
print $(( rand48() )) <br>
print $(( rand48(seed) ))</b></p>

<p style="margin-left:11%; margin-top: 1em">Assuming
<b>$seed</b> does not exist, it will be initialised by the
first call. In the second call, the default seed is
initialised; note, however, that because of the properties
of <b>rand()</b> there is a correlation between the seeds
used for the two initialisations, so for more secure uses,
you should generate your own 12&minus;byte seed. The third
call returns to the same sequence of random numbers used in
the first call, unaffected by the intervening
<b>rand48()</b>.</p>

<h2>THE ZSH/NEWUSER MODULE
<a name="THE ZSH/NEWUSER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/newuser</b> module is loaded at boot if it is
available, the <b>RCS</b> option is set, and the
<b>PRIVILEGED</b> option is not set (all three are true by
default). This takes place immediately after commands in the
global <b>zshenv</b> file (typically <b>/etc/zshenv</b>), if
any, have been executed. If the module is not available it
is silently ignored by the shell; the module may safely be
removed from <b>$MODULE_PATH</b> by the administrator if it
is not required.</p>

<p style="margin-left:11%; margin-top: 1em">On loading, the
module tests if any of the start&minus;up files
<b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b> or
<b>.zlogin</b> exist in the directory given by the
environment variable <b>ZDOTDIR</b>, or the user&rsquo;s
home directory if that is not set. The test is not performed
and the module halts processing if the shell was in an
emulation mode (i.e. had been invoked as some other shell
than zsh).</p>

<p style="margin-left:11%; margin-top: 1em">If none of the
start&minus;up files were found, the module then looks for
the file <b>newuser</b> first in a sitewide directory,
usually the parent directory of the
<b>site&minus;functions</b> directory, and if that is not
found the module searches in a version&minus;specific
directory, usually the parent of the <b>functions</b>
directory containing version&minus;specific functions.
(These directories can be configured when zsh is built using
the
<b>&minus;&minus;enable&minus;site&minus;scriptdir=</b><i>dir</i>
and <b>&minus;&minus;enable&minus;scriptdir=</b><i>dir</i>
flags to <b>configure</b>, respectively; the defaults are
<i>prefix</i><b>/share/zsh</b> and
<i>prefix</i><b>/share/zsh/$ZSH_VERSION</b> where the
default <i>prefix</i> is <b>/usr/local</b>.)</p>

<p style="margin-left:11%; margin-top: 1em">If the file
<b>newuser</b> is found, it is then sourced in the same
manner as a start&minus;up file. The file is expected to
contain code to install start&minus;up files for the user,
however any valid shell code will be executed.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/newuser</b> module is then unconditionally
unloaded.</p>

<p style="margin-left:11%; margin-top: 1em">Note that it is
possible to achieve exactly the same effect as the
<b>zsh/newuser</b> module by adding code to
<b>/etc/zshenv</b>. The module exists simply to allow the
shell to make arrangements for new users without the need
for intervention by package maintainers and system
administrators.</p>

<p style="margin-left:11%; margin-top: 1em">The script
supplied with the module invokes the shell function
<b>zsh&minus;newuser&minus;install</b>. This may be invoked
directly by the user even if the <b>zsh/newuser</b> module
is disabled. Note, however, that if the module is not
installed the function will not be installed either. The
function is documented in the section User Configuration
Functions in <i>zshcontrib</i>(1).</p>

<h2>THE ZSH/PARAMETER MODULE
<a name="THE ZSH/PARAMETER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/parameter</b> module gives access to some of the
internal hash tables used by the shell by defining some
special parameters. <b><br>
options</b></p>

<p style="margin-left:22%;">The keys for this associative
array are the names of the options that can be set and unset
using the <b>setopt</b> and <b>unsetopt</b> builtins. The
value of each key is either the string <b>on</b> if the
option is currently set, or the string <b>off</b> if the
option is unset. Setting a key to one of these strings is
like setting or unsetting the option, respectively.
Unsetting a key in this array is like setting it to the
value <b>off</b>.</p>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">This array gives access to the
command hash table. The keys are the names of external
commands, the values are the pathnames of the files that
would be executed when the command would be invoked. Setting
a key in this array defines a new entry in this table in the
same way as with the <b>hash</b> builtin. Unsetting a key as
in &lsquo;<b>unset &quot;commands[foo]&quot;</b>&rsquo;
removes the entry for the given key from the command hash
table.</p>

<p style="margin-left:11%;"><b>functions</b></p>

<p style="margin-left:22%;">This associative array maps
names of enabled functions to their definitions. Setting a
key in it is like defining a function with the name given by
the key and the body given by the value. Unsetting a key
removes the definition for the function named by the
key.</p>

<p style="margin-left:11%;"><b>dis_functions</b></p>

<p style="margin-left:22%;">Like <b>functions</b> but for
disabled functions.</p>

<p style="margin-left:11%;"><b>builtins</b></p>

<p style="margin-left:22%;">This associative array gives
information about the builtin commands currently enabled.
The keys are the names of the builtin commands and the
values are either &lsquo;<b>undefined</b>&rsquo; for builtin
commands that will automatically be loaded from a module if
invoked or &lsquo;<b>defined</b>&rsquo; for builtin commands
that are already loaded.</p>

<p style="margin-left:11%;"><b>dis_builtins</b></p>

<p style="margin-left:22%;">Like <b>builtins</b> but for
disabled builtin commands.</p>

<p style="margin-left:11%;"><b>reswords</b></p>

<p style="margin-left:22%;">This array contains the enabled
reserved words.</p>

<p style="margin-left:11%;"><b>dis_reswords</b></p>

<p style="margin-left:22%;">Like <b>reswords</b> but for
disabled reserved words.</p>

<p style="margin-left:11%;"><b>aliases</b></p>

<p style="margin-left:22%;">This maps the names of the
regular aliases currently enabled to their expansions.</p>

<p style="margin-left:11%;"><b>dis_aliases</b></p>

<p style="margin-left:22%;">Like <b>aliases</b> but for
disabled regular aliases.</p>

<p style="margin-left:11%;"><b>galiases</b></p>

<p style="margin-left:22%;">Like <b>aliases</b>, but for
global aliases.</p>

<p style="margin-left:11%;"><b>dis_galiases</b></p>

<p style="margin-left:22%;">Like <b>galiases</b> but for
disabled global aliases.</p>

<p style="margin-left:11%;"><b>saliases</b></p>

<p style="margin-left:22%;">Like <b>raliases</b>, but for
suffix aliases.</p>

<p style="margin-left:11%;"><b>dis_saliases</b></p>

<p style="margin-left:22%;">Like <b>saliases</b> but for
disabled suffix aliases.</p>

<p style="margin-left:11%;"><b>parameters</b></p>

<p style="margin-left:22%;">The keys in this associative
array are the names of the parameters currently defined. The
values are strings describing the type of the parameter, in
the same format used by the <b>t</b> parameter flag, see
<i>zshexpn</i>(1) . Setting or unsetting keys in this array
is not possible.</p>

<p style="margin-left:11%;"><b>modules</b></p>

<p style="margin-left:22%;">An associative array giving
information about modules. The keys are the names of the
modules loaded, registered to be autoloaded, or aliased. The
value says which state the named module is in and is one of
the strings &lsquo;<b>loaded</b>&rsquo;,
&lsquo;<b>autoloaded</b>&rsquo;, or
&lsquo;<b>alias:</b><i>name</i>&rsquo;, where <i>name</i> is
the name the module is aliased to.</p>

<p style="margin-left:22%; margin-top: 1em">Setting or
unsetting keys in this array is not possible.</p>

<p style="margin-left:11%;"><b>dirstack</b></p>

<p style="margin-left:22%;">A normal array holding the
elements of the directory stack. Note that the output of the
<b>dirs</b> builtin command includes one more directory, the
current working directory.</p>

<p style="margin-left:11%;"><b>history</b></p>

<p style="margin-left:22%;">This associative array maps
history event numbers to the full history lines.</p>

<p style="margin-left:11%;"><b>historywords</b></p>

<p style="margin-left:22%;">A special array containing the
words stored in the history.</p>

<p style="margin-left:11%;"><b>jobdirs</b></p>

<p style="margin-left:22%;">This associative array maps job
numbers to the directories from which the job was started
(which may not be the current directory of the job).</p>

<p style="margin-left:22%; margin-top: 1em">The keys of the
associative arrays are usually valid job numbers, and these
are the values output with, for example,
<b>${(k)jobdirs}</b>. Non&minus;numeric job references may
be used when looking up a value; for example,
<b>${jobdirs[%+]}</b> refers to the current job.</p>

<p style="margin-left:11%;"><b>jobtexts</b></p>

<p style="margin-left:22%;">This associative array maps job
numbers to the texts of the command lines that were used to
start the jobs.</p>

<p style="margin-left:22%; margin-top: 1em">Handling of the
keys of the associative array is as described for
<b>jobdirs</b> above.</p>

<p style="margin-left:11%;"><b>jobstates</b></p>

<p style="margin-left:22%;">This associative array gives
information about the states of the jobs currently known.
The keys are the job numbers and the values are strings of
the form
&lsquo;<i>job&minus;state</i>:<i>mark</i>:<i>pid</i><b>=</b><i>state</i><b>...</b>&rsquo;.
The <i>job&minus;state</i> gives the state the whole job is
currently in, one of &lsquo;<b>running</b>&rsquo;,
&lsquo;<b>suspended</b>&rsquo;, or
&lsquo;<b>done</b>&rsquo;. The <i>mark</i> is
&lsquo;<b>+</b>&rsquo; for the current job,
&lsquo;<b>&minus;</b>&rsquo; for the previous job and empty
otherwise. This is followed by one
&lsquo;<i>pid</i><b>=</b><i>state</i>&rsquo; for every
process in the job. The <i>pid</i>s are, of course, the
process IDs and the <i>state</i> describes the state of that
process.</p>

<p style="margin-left:22%; margin-top: 1em">Handling of the
keys of the associative array is as described for
<b>jobdirs</b> above.</p>

<p style="margin-left:11%;"><b>nameddirs</b></p>

<p style="margin-left:22%;">This associative array maps the
names of named directories to the pathnames they stand
for.</p>

<p style="margin-left:11%;"><b>userdirs</b></p>

<p style="margin-left:22%;">This associative array maps
user names to the pathnames of their home directories.</p>

<p style="margin-left:11%;"><b>usergroups</b></p>

<p style="margin-left:22%;">This associative array maps
names of system groups of which the current user is a member
to the corresponding group identifiers. The contents are the
same as the groups output by the <b>id</b> command.</p>

<p style="margin-left:11%;"><b>funcfiletrace</b></p>

<p style="margin-left:22%;">This array contains the
absolute line numbers and corresponding file names for the
point where the current function, sourced file, or (if
<b>EVAL_LINENO</b> is set) <b>eval</b> command was called.
The array is of the same length as <b>funcsourcetrace</b>
and <b>functrace</b>, but differs from
<b>funcsourcetrace</b> in that the line and file are the
point of call, not the point of definition, and differs from
<b>functrace</b> in that all values are absolute line
numbers in files, rather than relative to the start of a
function, if any.</p>

<p style="margin-left:11%;"><b>funcsourcetrace</b></p>

<p style="margin-left:22%;">This array contains the file
names and line numbers of the points where the functions,
sourced files, and (if <b>EVAL_LINENO</b> is set)
<b>eval</b> commands currently being executed were defined.
The line number is the line where the &lsquo;<b>function</b>
<i>name</i>&rsquo; or &lsquo;<i>name</i> <b>()</b>&rsquo;
started. In the case of an autoloaded function the line
number is reported as zero. The format of each element is
<i>filename</i><b>:</b><i>lineno</i>. For functions
autoloaded from a file in native zsh format, where only the
body of the function occurs in the file, or for files that
have been executed by the <b>source</b> or
&lsquo;<b>.</b>&rsquo; builtins, the trace information is
shown as <i>filename</i><b>:</b><i>0</i>, since the entire
file is the definition.</p>

<p style="margin-left:22%; margin-top: 1em">Most users will
be interested in the information in the <b>funcfiletrace</b>
array instead.</p>

<p style="margin-left:11%;"><b>funcstack</b></p>

<p style="margin-left:22%;">This array contains the names
of the functions, sourced files, and (if <b>EVAL_LINENO</b>
is set) <b>eval</b> commands. currently being executed. The
first element is the name of the function using the
parameter.</p>

<p style="margin-left:11%;"><b>functrace</b></p>

<p style="margin-left:22%;">This array contains the names
and line numbers of the callers corresponding to the
functions currently being executed. The format of each
element is <i>name</i><b>:</b><i>lineno</i>. Callers are
also shown for sourced files; the caller is the point where
the <b>source</b> or &lsquo;<b>.</b>&rsquo; command was
executed.</p>

<h2>THE ZSH/PCRE MODULE
<a name="THE ZSH/PCRE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/pcre</b> module makes some commands available as
builtins: <b><br>
pcre_compile</b> [ <b>&minus;aimxs</b> ] <i>PCRE</i></p>

<p style="margin-left:22%;">Compiles a
perl&minus;compatible regular expression.</p>

<p style="margin-left:22%; margin-top: 1em">Option
<b>&minus;a</b> will force the pattern to be anchored.
Option <b>&minus;i</b> will compile a case&minus;insensitive
pattern. Option <b>&minus;m</b> will compile a
multi&minus;line pattern; that is, <b>^</b> and <b>$</b>
will match newlines within the pattern. Option
<b>&minus;x</b> will compile an extended pattern, wherein
whitespace and <b>#</b> comments are ignored. Option
<b>&minus;s</b> makes the dot metacharacter match all
characters, including those that indicate newline.</p>

<p style="margin-left:11%;"><b>pcre_study</b></p>

<p style="margin-left:22%;">Studies the
previously&minus;compiled PCRE which may result in faster
matching.</p>

<p style="margin-left:11%;"><b>pcre_match</b> [
<b>&minus;v</b> <i>var</i> ] [ <b>&minus;a</b> <i>arr</i> ]
[ <b>&minus;n</b> <i>offset</i> ] [ <b>&minus;b</b> ]
<i>string</i></p>

<p style="margin-left:22%;">Returns successfully if
<b>string</b> matches the previously&minus;compiled
PCRE.</p>

<p style="margin-left:22%; margin-top: 1em">Upon successful
match, if the expression captures substrings within
parentheses, <b>pcre_match</b> will set the array
<i>$match</i> to those substrings, unless the
<b>&minus;a</b> option is given, in which case it will set
the array <i>arr</i>. Similarly, the variable <i>MATCH</i>
will be set to the entire matched portion of the string,
unless the <b>&minus;v</b> option is given, in which case
the variable <i>var</i> will be set. No variables are
altered if there is no successful match. A <b>&minus;n</b>
option starts searching for a match from the byte
<i>offset</i> position in <i>string</i>. If the
<b>&minus;b</b> option is given, the variable
<i>ZPCRE_OP</i> will be set to an offset pair string,
representing the byte offset positions of the entire matched
portion within the <i>string</i>. For example, a
<i>ZPCRE_OP</i> set to &quot;32 45&quot; indicates that the
matched portion began on byte offset 32 and ended on byte
offset 44. Here, byte offset position 45 is the position
directly after the matched portion. Keep in mind that the
byte position isn&rsquo;t necessarily the same as the
character position when UTF&minus;8 characters are involved.
Consequently, the byte offset positions are only to be
relied on in the context of using them for subsequent
searches on <i>string</i>, using an offset position as an
argument to the <b>&minus;n</b> option. This is mostly used
to implement the &quot;find all non&minus;overlapping
matches&quot; functionality.</p>

<p style="margin-left:22%; margin-top: 1em">A simple
example of &quot;find all non&minus;overlapping
matches&quot;:</p>


<p style="margin-left:32%; margin-top: 1em"><b>string=&quot;The
following zip codes: 78884 90210 99513&quot; <br>
pcre_compile &minus;m &quot;\d{5}&quot; <br>
accum=() <br>
pcre_match &minus;b &minus;&minus; $string <br>
while [[ $? &minus;eq 0 ]] do <br>
b=($=ZPCRE_OP) <br>
accum+=$MATCH <br>
pcre_match &minus;b &minus;n $b[2] &minus;&minus; $string
<br>
done <br>
print &minus;l $accum</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/pcre</b> module makes available the following test
condition: <br>
expr <b>&minus;pcre&minus;match</b> pcre</p>

<p style="margin-left:22%;">Matches a string against a
perl&minus;compatible regular expression.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:22%; margin-top: 1em">[[
&quot;$text&quot; &minus;pcre&minus;match ^d+$ ]] &amp;&amp;
print text variable contains only &quot;d&rsquo;s&quot;.</p>

<h2>THE ZSH/REGEX MODULE
<a name="THE ZSH/REGEX MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/regex</b> module makes available the following test
condition: <i><br>
expr</i> <b>&minus;regex&minus;match</b> <i>regex</i></p>

<p style="margin-left:22%;">Matches a string against a
POSIX extended regular expression. On successful match,
matched portion of the string will normally be placed in the
<b>MATCH</b> variable. If there are any capturing
parentheses within the regex, then the <b>match</b> array
variable will contain those. If the match is not successful,
then the variables will not be altered.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>[[
alphabetical &minus;regex&minus;match ^a([^a]+)a([^a]+)a ]]
&amp;&amp; <br>
print &minus;l $MATCH X $match</b></p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>REMATCH_PCRE</b> is not set, then the <b>=~</b> operator
will automatically load this module as needed and will
invoke the <b>&minus;regex&minus;match</b> operator.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>BASH_REMATCH</b> is set, then the array
<b>BASH_REMATCH</b> will be set instead of <b>MATCH</b> and
<b>match</b>.</p>

<h2>THE ZSH/SCHED MODULE
<a name="THE ZSH/SCHED MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/sched</b> module makes available one builtin command
and one parameter. <b><br>
sched</b> [<b>&minus;o</b>]
[<b>+</b>]<i>hh</i><b>:</b><i>mm</i>[:<i>ss</i>]
<i>command</i> ... <b><br>
sched</b> [<b>&minus;o</b>] [<b>+</b>]<i>seconds command</i>
... <b><br>
sched</b> [ <b>&minus;</b><i>item</i> ]</p>

<p style="margin-left:22%;">Make an entry in the scheduled
list of commands to execute. The time may be specified in
either absolute or relative time, and either as hours,
minutes and (optionally) seconds separated by a colon, or
seconds alone. An absolute number of seconds indicates the
time since the epoch (1970/01/01 00:00); this is useful in
combination with the features in the <b>zsh/datetime</b>
module, see the zsh/datetime module entry in
<i>zshmodules</i>(1).</p>

<p style="margin-left:22%; margin-top: 1em">With no
arguments, prints the list of scheduled commands. If the
scheduled command has the <b>&minus;o</b> flag set, this is
shown at the start of the command.</p>

<p style="margin-left:22%; margin-top: 1em">With the
argument &lsquo;<b>&minus;</b><i>item</i>&rsquo;, removes
the given item from the list. The numbering of the list is
continuous and entries are in time order, so the numbering
can change when entries are added or deleted.</p>

<p style="margin-left:22%; margin-top: 1em">Commands are
executed either immediately before a prompt, or while the
shell&rsquo;s line editor is waiting for input. In the
latter case it is useful to be able to produce output that
does not interfere with the line being edited. Providing the
option <b>&minus;o</b> causes the shell to clear the command
line before the event and redraw it afterwards. This should
be used with any scheduled event that produces visible
output to the terminal; it is not needed, for example, with
output that updates a terminal emulator&rsquo;s title
bar.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>sched</b> builtin is not made available by default when
the shell starts in a mode emulating another shell. It can
be made available with the command &lsquo;<b>zmodload
&minus;F zsh/sched b:sched</b>&rsquo;.</p>

<p style="margin-left:11%;">zsh_scheduled_events</p>

<p style="margin-left:22%;">A readonly array corresponding
to the events scheduled by the <b>sched</b> builtin. The
indices of the array correspond to the numbers shown when
<b>sched</b> is run with no arguments (provided that the
<b>KSH_ARRAYS</b> option is not set). The value of the array
consists of the scheduled time in seconds since the epoch
(see the section &lsquo;The zsh/datetime Module&rsquo; for
facilities for using this number), followed by a colon,
followed by any options (which may be empty but will be
preceded by a &lsquo;<b>&minus;</b>&rsquo; otherwise),
followed by a colon, followed by the command to be
executed.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>sched</b> builtin should be used for manipulating the
events. Note that this will have an immediate effect on the
contents of the array, so that indices may become
invalid.</p>

<h2>THE ZSH/NET/SOCKET MODULE
<a name="THE ZSH/NET/SOCKET MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/net/socket</b> module makes available one builtin
command: <b><br>
zsocket</b> [ <b>&minus;altv</b> ] [ <b>&minus;d</b>
<i>fd</i> ] [ <i>args</i> ]</p>

<p style="margin-left:22%;"><b>zsocket</b> is implemented
as a builtin to allow full use of shell command line
editing, file I/O, and job control mechanisms.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Outbound
Connections <br>
zsocket</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b> <i>fd</i>
] <i>filename</i></p>

<p style="margin-left:22%;">Open a new Unix domain
connection to <i>filename</i>. The shell parameter
<b>REPLY</b> will be set to the file descriptor associated
with that connection. Currently, only stream connections are
supported.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Inbound
Connections <br>
zsocket &minus;l</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b>
<i>fd</i> ] <i>filename</i></p>

<p style="margin-left:22%;"><b>zsocket &minus;l</b> will
open a socket listening on <i>filename</i>. The shell
parameter <b>REPLY</b> will be set to the file descriptor
associated with that listener.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%;"><b>zsocket &minus;a</b> [
<b>&minus;tv</b> ] [ <b>&minus;d</b> <i>targetfd</i> ]
<i>listenfd</i></p>

<p style="margin-left:22%;"><b>zsocket &minus;a</b> will
accept an incoming connection to the socket associated with
<i>listenfd</i>. The shell parameter <b>REPLY</b> will be
set to the file descriptor associated with the inbound
connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;t</b> is specified, <b>zsocket</b> will return if
no incoming connection is pending. Otherwise it will wait
for one.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<h2>THE ZSH/STAT MODULE
<a name="THE ZSH/STAT MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/stat</b> module makes available one builtin command
under two possible names: <b><br>
zstat</b> [ <b>&minus;gnNolLtTrs</b> ] [ <b>&minus;f</b>
<i>fd</i> ] [ <b>&minus;H</b> <i>hash</i> ] [
<b>&minus;A</b> <i>array</i> ] [ <b>&minus;F</b> <i>fmt</i>
] [ <b><br>
+</b><i>element</i> ] [ <i>file</i> ... ] <b><br>
stat</b> <i>...</i></p>

<p style="margin-left:22%;">The command acts as a front end
to the <b>stat</b> system call (see <i>stat</i>(2)). The
same command is provided with two names; as the name
<b>stat</b> is often used by an external command it is
recommended that only the <b>zstat</b> form of the command
is used. This can be arranged by loading the module with the
command &lsquo;<b>zmodload &minus;F zsh/stat
b:zstat</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>stat</b> call fails, the appropriate system error message
printed and status 1 is returned. The fields of <b>struct
stat</b> give information about the files provided as
arguments to the command. In addition to those available
from the <b>stat</b> call, an extra element
&lsquo;<b>link</b>&rsquo; is provided. These elements
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The number of the device on which the file resides.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>inode</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The unique number of the file on this device
(&lsquo;<i>inode</i>&rsquo; number).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>mode</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The mode of the file; that is, the file&rsquo;s type and
access permissions. With the <b>&minus;s</b> option, this
will be returned as a string corresponding to the first
column in the display of the <b>ls &minus;l</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>nlink</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The number of hard links to the file.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>uid</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The user ID of the owner of the file. With the
<b>&minus;s</b> option, this is displayed as a user
name.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>gid</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The group ID of the file. With the <b>&minus;s</b>
option, this is displayed as a group name.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>rdev</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The raw device number. This is only useful for special
devices.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>size</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The size of the file in bytes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>atime</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>mtime</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>ctime</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The last access, modification and inode change times of
the file, respectively, as the number of seconds since
midnight GMT on 1st January, 1970. With the <b>&minus;s</b>
option, these are printed as strings for the local time
zone; the format can be altered with the <b>&minus;F</b>
option, and with the <b>&minus;g</b> option the times are in
GMT.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>blksize</b></p>

<p style="margin-left:32%;">The number of bytes in one
allocation block on the device on which the file
resides.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>block</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The number of disk blocks used by the file.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>link</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>If the file is a link and the <b>&minus;L</b> option is
in effect, this contains the name of the file linked to,
otherwise it is empty. Note that if this element is selected
(&lsquo;&lsquo;<b>zstat +link</b>&rsquo;&rsquo;) then the
<b>&minus;L</b> option is automatically used.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A particular
element may be selected by including its name preceded by a
&lsquo;<b>+</b>&rsquo; in the option list; only one element
is allowed. The element may be shortened to any unique set
of leading characters. Otherwise, all elements will be shown
for all files.</p>

<p style="margin-left:22%; margin-top: 1em">Options:
<b><br>
&minus;A</b> <i>array</i></p>

<p style="margin-left:32%;">Instead of displaying the
results on standard output, assign them to an <i>array</i>,
one <b>struct stat</b> element per array element for each
file in order. In this case neither the name of the element
nor the name of the files appears in <i>array</i> unless the
<b>&minus;t</b> or <b>&minus;n</b> options were given,
respectively. If <b>&minus;t</b> is given, the element name
appears as a prefix to the appropriate array element; if
<b>&minus;n</b> is given, the file name appears as a
separate array element preceding all the others. Other
formatting options are respected.</p>

<p style="margin-left:22%;"><b>&minus;H</b> <i>hash</i></p>

<p style="margin-left:32%;">Similar to <b>&minus;A</b>, but
instead assign the values to <i>hash</i>. The keys are the
elements listed above. If the <b>&minus;n</b> option is
provided then the name of the file is included in the hash
with key <b>name</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;f</b> <i>fd</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>Use the file on file descriptor <i>fd</i> instead of
named files; no list of file names is allowed in this
case.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;F</b> <i>fmt</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>Supplies a <b>strftime</b> (see <i>strftime</i>(3))
string for the formatting of the time elements. The
<b>&minus;s</b> option is implied.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;g</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Show the time elements in the GMT time zone. The
<b>&minus;s</b> option is implied.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;l</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>List the names of the type elements (to standard output
or an array as appropriate) and return immediately; options
other than <b>&minus;A</b> and arguments are ignored.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;L</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Perform an <b>lstat</b> (see <i>lstat</i>(2)) rather
than a <b>stat</b> system call. In this case, if the file is
a link, information about the link itself rather than the
target file is returned. This option is required to make the
<b>link</b> element useful. It&rsquo;s important to note
that this is the exact opposite from <i>ls</i>(1), etc.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;n</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Always show the names of files. Usually these are only
shown when output is to standard output and there is more
than one file in the list.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;N</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Never show the names of files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;o</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>If a raw file mode is printed, show it in octal, which
is more useful for human consumption than the default of
decimal. A leading zero will be printed in this case. Note
that this does not affect whether a raw or formatted file
mode is shown, which is controlled by the <b>&minus;r</b>
and <b>&minus;s</b> options, nor whether a mode is shown at
all.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;r</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Print raw data (the default format) alongside string
data (the <b>&minus;s</b> format); the string data appears
in parentheses after the raw data.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;s</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Print <b>mode</b>, <b>uid</b>, <b>gid</b> and the three
time elements as strings instead of numbers. In each case
the format is like that of <b>ls &minus;l</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;t</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Always show the type names for the elements of <b>struct
stat</b>. Usually these are only shown when output is to
standard output and no individual element has been
selected.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;T</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Never show the type names of the <b>struct stat</b>
elements.</p> </td></tr>
</table>

<h2>THE ZSH/SYSTEM MODULE
<a name="THE ZSH/SYSTEM MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/system</b> module makes available various builtin
commands and parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Builtins
<br>
syserror [ &minus;e</b> <i>errvar</i> <b>] [ &minus;p</b>
<i>prefix</i> <b>] [</b> <i>errno</i> <b>|</b>
<i>errname</i> <b>]</b></p>

<p style="margin-left:22%;">This command prints out the
error message associated with <i>errno</i>, a system error
number, followed by a newline to standard error.</p>

<p style="margin-left:22%; margin-top: 1em">Instead of the
error number, a name <i>errname</i>, for example
<b>ENOENT</b>, may be used. The set of names is the same as
the contents of the array <b>errnos</b>, see below.</p>

<p style="margin-left:22%; margin-top: 1em">If the string
<i>prefix</i> is given, it is printed in front of the error
message, with no intervening space.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>errvar</i> is supplied, the entire message, without a
newline, is assigned to the parameter names <i>errvar</i>
and nothing is output.</p>

<p style="margin-left:22%; margin-top: 1em">A return status
of 0 indicates the message was successfully printed
(although it may not be useful if the error number was out
of the system&rsquo;s range), a return status of 1 indicates
an error in the parameters, and a return status of 2
indicates the error name was not recognised (no message is
printed for this).</p>

<p style="margin-left:11%;"><b>sysread [ &minus;c</b>
<i>countvar</i> <b>] [ &minus;i</b> <i>infd</i> <b>] [
&minus;o</b> <i>outfd</i> <b>] <br>
[ &minus;s</b> <i>bufsize</i> <b>] [ &minus;t</b>
<i>timeout</i> <b>] [</b> <i>param</i> <b>]</b></p>

<p style="margin-left:22%;">Perform a single system read
from file descriptor <i>infd</i>, or zero if that is not
given. The result of the read is stored in <i>param</i> or
<i>REPLY</i> if that is not given. If <i>countvar</i> is
given, the number of bytes read is assigned to the parameter
named by <i>countvar</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The maximum
number of bytes read is <i>bufsize</i> or 8192 if that is
not given, however the command returns as soon as any number
of bytes was successfully read.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>timeout</i> is given, it specifies a timeout in seconds,
which may be zero to poll the file descriptor. This is
handled by the <b>poll</b> system call if available,
otherwise the <b>select</b> system call if available.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>outfd</i>
is given, an attempt is made to write all the bytes just
read to the file descriptor <i>outfd</i>. If this fails,
because of a system error other than <b>EINTR</b> or because
of an internal zsh error during an interrupt, the bytes read
but not written are stored in the parameter named by
<i>param</i> if supplied (no default is used in this case),
and the number of bytes read but not written is stored in
the parameter named by <i>countvar</i> if that is supplied.
If it was successful, <i>countvar</i> contains the full
number of bytes transferred, as usual, and <i>param</i> is
not set.</p>

<p style="margin-left:22%; margin-top: 1em">The error
<b>EINTR</b> (interrupted system call) is handled internally
so that shell interrupts are transparent to the caller. Any
other error causes a return.</p>

<p style="margin-left:22%; margin-top: 1em">The possible
return statuses are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>0</p></td>
<td width="9%"></td>
<td width="68%">


<p>At least one byte of data was successfully read and, if
appropriate, written.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="68%">


<p>There was an error in the parameters to the command.
This is the only error for which a message is printed to
standard error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>2</p></td>
<td width="9%"></td>
<td width="68%">


<p>There was an error on the read, or on polling the input
file descriptor for a timeout. The parameter <b>ERRNO</b>
gives the error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>3</p></td>
<td width="9%"></td>
<td width="68%">


<p>Data were successfully read, but there was an error
writing them to <i>outfd</i>. The parameter <b>ERRNO</b>
gives the error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>4</p></td>
<td width="9%"></td>
<td width="68%">


<p>The attempt to read timed out. Note this does not set
<b>ERRNO</b> as this is not a system error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>5</p></td>
<td width="9%"></td>
<td width="68%">


<p>No system error occurred, but zero bytes were read. This
usually indicates end of file. The parameters are set
according to the usual rules; no write to <i>outfd</i> is
attempted.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>syswrite [ &minus;c</b>
<i>countvar</i> <b>] [ &minus;o</b> <i>outfd</i> <b>]</b>
<i>data</i></p>

<p style="margin-left:22%;">The data (a single string of
bytes) are written to the file descriptor <i>outfd</i>, or 1
if that is not given, using the <b>write</b> system call.
Multiple write operations may be used if the first does not
write all the data.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>countvar</i> is given, the number of byte written is
stored in the parameter named by <i>countvar</i>; this may
not be the full length of <i>data</i> if an error
occurred.</p>

<p style="margin-left:22%; margin-top: 1em">The error
<b>EINTR</b> (interrupted system call) is handled internally
by retrying; otherwise an error causes the command to
return. For example, if the file descriptor is set to
non&minus;blocking output, an error <b>EAGAIN</b> (on some
systems, <b>EWOULDBLOCK</b>) may result in the command
returning early.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status may be 0 for success, 1 for an error in the
parameters to the command, or 2 for an error on the write;
no error message is printed in the last case, but the
parameter <b>ERRNO</b> will reflect the error that
occurred.</p>

<p style="margin-left:11%;"><b>zsystem flock [ &minus;t</b>
<i>timeout</i> <b>] [ &minus;f</b> <i>var</i> <b>]
[&minus;er]</b> <i>file</i> <b><br>
zsystem flock &minus;u</b> <i>fd_expr</i></p>

<p style="margin-left:22%;">The builtin
<b>zsystem</b>&rsquo;s subcommand <b>flock</b> performs
advisory file locking (via the <i>fcntl</i>(2) system call)
over the entire contents of the given file. This form of
locking requires the processes accessing the file to
cooperate; its most obvious use is between two instances of
the shell itself.</p>

<p style="margin-left:22%; margin-top: 1em">In the first
form the named <i>file</i>, which must already exist, is
locked by opening a file descriptor to the file and applying
a lock to the file descriptor. The lock terminates when the
shell process that created the lock exits; it is therefore
often convenient to create file locks within subshells,
since the lock is automatically released when the subshell
exits. Status 0 is returned if the lock succeeds, else
status 1.</p>

<p style="margin-left:22%; margin-top: 1em">In the second
form the file descriptor given by the arithmetic expression
<b>fd_expr</b> is closed, releasing a lock. The file
descriptor can be queried by using the
&lsquo;<b>&minus;f</b> <i>var</i>&rsquo; form during the
lock; on a successful lock, the shell variable <i>var</i> is
set to the file descriptor used for locking. The lock will
be released if the file descriptor is closed by any other
means, for example using &lsquo;<b>exec
{</b><i>var</i><b>}&gt;&amp;&minus;</b>&rsquo;; however, the
form described here performs a safety check that the file
descriptor is in use for file locking.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
shell waits indefinitely for the lock to succeed. The option
<b>&minus;t</b> <i>timeout</i> specifies a timeout for the
lock in seconds; currently this must be an integer. The
shell will attempt to lock the file once a second during
this period. If the attempt times out, status 2 is
returned.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;e</b> is given, the file descriptor for the lock
is preserved when the shell uses <b>exec</b> to start a new
process; otherwise it is closed at that point and the lock
released.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;r</b> is given, the lock is only for reading,
otherwise it is for reading and writing. The file descriptor
is opened accordingly.</p>

<p style="margin-left:11%;"><b>zsystem supports</b>
<i>subcommand</i></p>

<p style="margin-left:22%;">The builtin
<b>zsystem</b>&rsquo;s subcommand <b>supports</b> tests
whether a given subcommand is supported. It returns status 0
if so, else status 1. It operates silently unless there was
a syntax error (i.e. the wrong number of arguments), in
which case status 255 is returned. Status 1 can indicate one
of two things: <i>subcommand</i> is known but not supported
by the current operating system, or <i>subcommand</i> is not
known (possibly because this is an older version of the
shell before it was implemented).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>errnos</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A readonly array of the names of errors defined on the
system. These are typically macros defined in C by including
the system header file <b>errno.h</b>. The index of each
name (assuming the option <b>KSH_ARRAYS</b> is unset)
corresponds to the error number. Error numbers <i>num</i>
before the last known error which have no name are given the
name <b>E</b><i>num</i> in the array.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that
aliases for errors are not handled; only the canonical name
is used.</p>

<p style="margin-left:11%;"><b>sysparams</b></p>

<p style="margin-left:22%;">A readonly associative array.
The keys are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>pid</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Returns the process ID of the current process, even in
subshells. Compare <b>$$</b>, which returns the process ID
of the main shell process.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>ppid</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Returns the process ID of the parent of the current
process, even in subshells. Compare <b>$PPID</b>, which
returns the process ID of the parent of the main shell
process.</p> </td></tr>
</table>

<h2>THE ZSH/NET/TCP MODULE
<a name="THE ZSH/NET/TCP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/net/tcp</b> module makes available one builtin
command: <b><br>
ztcp</b> [ <b>&minus;acflLtv</b> ] [ <b>&minus;d</b>
<i>fd</i> ] [ <i>args</i> ]</p>

<p style="margin-left:22%;"><b>ztcp</b> is implemented as a
builtin to allow full use of shell command line editing,
file I/O, and job control mechanisms.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>ztcp</b>
is run with no options, it will output the contents of its
session table.</p>

<p style="margin-left:22%; margin-top: 1em">If it is run
with only the option <b>&minus;L</b>, it will output the
contents of the session table in a format suitable for
automatic parsing. The option is ignored if given with a
command to open or close a session. The output consists of a
set of lines, one per session, each containing the following
elements separated by spaces: <br>
File descriptor</p>

<p style="margin-left:32%;">The file descriptor in use for
the connection. For normal inbound (<b>I</b>) and outbound
(<b>O</b>) connections this may be read and written by the
usual shell mechanisms. However, it should only be close
with &lsquo;<b>ztcp &minus;c</b>&rsquo;.</p>

<p style="margin-left:22%;">Connection type</p>

<p style="margin-left:32%;">A letter indicating how the
session was created:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>Z</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>A session created with the <b>zftp</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>L</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>A connection opened for listening with &lsquo;<b>ztcp
&minus;l</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>I</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>An inbound connection accepted with &lsquo;<b>ztcp
&minus;a</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>O</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>An outbound connection created with &lsquo;<b>ztcp</b>
<i>host ...</i>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:22%;">The local host</p>

<p style="margin-left:32%;">This is usually set to an
all&minus;zero IP address as the address of the localhost is
irrelevant.</p>

<p style="margin-left:22%;">The local port</p>

<p style="margin-left:32%;">This is likely to be zero
unless the connection is for listening.</p>

<p style="margin-left:22%;">The remote host</p>

<p style="margin-left:32%;">This is the fully qualified
domain name of the peer, if available, else an IP address.
It is an all&minus;zero IP address for a session opened for
listening.</p>

<p style="margin-left:22%;">The remote port</p>

<p style="margin-left:32%;">This is zero for a connection
opened for listening.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Outbound
Connections <br>
ztcp</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b> <i>fd</i> ]
<i>host</i> [ <i>port</i> ]</p>

<p style="margin-left:22%;">Open a new TCP connection to
<i>host</i>. If the <i>port</i> is omitted, it will default
to port 23. The connection will be added to the session
table and the shell parameter <b>REPLY</b> will be set to
the file descriptor associated with that connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Inbound
Connections <br>
ztcp &minus;l</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b>
<i>fd</i> ] <i>port</i></p>

<p style="margin-left:22%;"><b>ztcp &minus;l</b> will open
a socket listening on TCP <i>port</i>. The socket will be
added to the session table and the shell parameter
<b>REPLY</b> will be set to the file descriptor associated
with that listener.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%;"><b>ztcp &minus;a</b> [
<b>&minus;tv</b> ] [ <b>&minus;d</b> <i>targetfd</i> ]
<i>listenfd</i></p>

<p style="margin-left:22%;"><b>ztcp &minus;a</b> will
accept an incoming connection to the port associated with
<i>listenfd</i>. The connection will be added to the session
table and the shell parameter <b>REPLY</b> will be set to
the file descriptor associated with the inbound
connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;t</b> is specified, <b>ztcp</b> will return if no
incoming connection is pending. Otherwise it will wait for
one.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Closing
Connections <br>
ztcp &minus;cf</b> [ <b>&minus;v</b> ] [ <i>fd</i> ] <b><br>
ztcp &minus;c</b> [ <b>&minus;v</b> ] [ <i>fd</i> ]</p>

<p style="margin-left:22%;"><b>ztcp &minus;c</b> will close
the socket associated with <i>fd</i>. The socket will be
removed from the session table. If <i>fd</i> is not
specified, <b>ztcp</b> will close everything in the session
table.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
sockets registered by zftp (see <i>zshmodules</i>(1) )
cannot be closed this way. In order to force such a socket
closed, use <b>&minus;f</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example</b>
<br>
Here is how to create a TCP connection between two instances
of zsh. We need to pick an unassigned port; here we use the
randomly chosen 5123.</p>

<p style="margin-left:11%; margin-top: 1em">On
<b>host1</b>,</p>

<p style="margin-left:22%;"><b>zmodload zsh/net/tcp <br>
ztcp &minus;l 5123 <br>
listenfd=$REPLY <br>
ztcp &minus;a $listenfd <br>
fd=$REPLY</b></p>

<p style="margin-left:11%;">The second from last command
blocks until there is an incoming connection.</p>

<p style="margin-left:11%; margin-top: 1em">Now create a
connection from <b>host2</b> (which may, of course, be the
same machine):</p>

<p style="margin-left:22%;"><b>zmodload zsh/net/tcp <br>
ztcp host1 5123 <br>
fd=$REPLY</b></p>

<p style="margin-left:11%; margin-top: 1em">Now on each
host, <b>$fd</b> contains a file descriptor for talking to
the other. For example, on <b>host1</b>:</p>

<p style="margin-left:22%;"><b>print This is a message
&gt;&amp;$fd</b></p>

<p style="margin-left:11%;">and on <b>host2</b>:</p>

<p style="margin-left:22%;"><b>read &minus;r line
&lt;&amp;$fd; print &minus;r &minus; $line</b></p>

<p style="margin-left:11%;">prints &lsquo;<b>This is a
message</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">To tidy up, on
<b>host1</b>:</p>

<p style="margin-left:22%;"><b>ztcp &minus;c $listenfd <br>
ztcp &minus;c $fd</b></p>

<p style="margin-left:11%;">and on <b>host2</b></p>

<p style="margin-left:22%;"><b>ztcp &minus;c $fd</b></p>

<h2>THE ZSH/TERMCAP MODULE
<a name="THE ZSH/TERMCAP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/termcap</b> module makes available one builtin
command: <b><br>
echotc</b> <i>cap</i> [ <i>arg</i> ... ]</p>

<p style="margin-left:22%;">Output the termcap value
corresponding to the capability <i>cap</i>, with optional
arguments.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/termcap</b> module makes available one parameter:
<b><br>
termcap</b></p>

<p style="margin-left:22%;">An associative array that maps
termcap capability codes to their values.</p>

<h2>THE ZSH/TERMINFO MODULE
<a name="THE ZSH/TERMINFO MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/terminfo</b> module makes available one builtin
command: <b><br>
echoti</b> <i>cap</i> [ <i>arg</i> ]</p>

<p style="margin-left:22%;">Output the terminfo value
corresponding to the capability <i>cap</i>, instantiated
with <i>arg</i> if applicable.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/terminfo</b> module makes available one parameter:
<b><br>
terminfo</b></p>

<p style="margin-left:22%;">An associative array that maps
terminfo capability names to their values.</p>

<h2>THE ZSH/ZFTP MODULE
<a name="THE ZSH/ZFTP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zftp</b> module makes available one builtin command:
<b><br>
zftp</b> <i>subcommand</i> [ <i>args</i> ]</p>

<p style="margin-left:22%;">The <b>zsh/zftp</b> module is a
client for FTP (file transfer protocol). It is implemented
as a builtin to allow full use of shell command line
editing, file I/O, and job control mechanisms. Often, users
will access it via shell functions providing a more powerful
interface; a set is provided with the <b>zsh</b>
distribution and is described in <i>zshzftpsys</i>(1).
However, the <b>zftp</b> command is entirely usable in its
own right.</p>

<p style="margin-left:22%; margin-top: 1em">All commands
consist of the command name <b>zftp</b> followed by the name
of a subcommand. These are listed below. The return status
of each subcommand is supposed to reflect the success or
failure of the remote operation. See a description of the
variable <b>ZFTP_VERBOSE</b> for more information on how
responses from the server may be printed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Subcommands
<br>
open</b> <i>host</i>[<b>:</b><i>port</i>] [ <i>user</i> [
<i>password</i> [ <i>account</i> ] ] ]</p>

<p style="margin-left:22%;">Open a new FTP session to
<i>host</i>, which may be the name of a TCP/IP connected
host or an IP number in the standard dot notation. If the
argument is in the form <i>host</i><b>:</b><i>port</i>, open
a connection to TCP port <i>port</i> instead of the standard
FTP port 21. This may be the name of a TCP service or a
number: see the description of <b>ZFTP_PORT</b> below for
more information.</p>

<p style="margin-left:22%; margin-top: 1em">If IPv6
addresses in colon format are used, the <i>host</i> should
be surrounded by quoted square brackets to distinguish it
from the <i>port</i>, for example
<b>&rsquo;[fe80::203:baff:fe02:8b56]&rsquo;</b>. For
consistency this is allowed with all forms of
<i>host</i>.</p>

<p style="margin-left:22%; margin-top: 1em">Remaining
arguments are passed to the <b>login</b> subcommand. Note
that if no arguments beyond <i>host</i> are supplied,
<b>open</b> will <i>not</i> automatically call <b>login</b>.
If no arguments at all are supplied, <b>open</b> will use
the parameters set by the <b>params</b> subcommand.</p>

<p style="margin-left:22%; margin-top: 1em">After a
successful open, the shell variables <b>ZFTP_HOST</b>,
<b>ZFTP_PORT</b>, <b>ZFTP_IP</b> and <b>ZFTP_SYSTEM</b> are
available; see &lsquo;Variables&rsquo; below.</p>

<p style="margin-left:11%;"><b>login</b> [ <i>name</i> [
<i>password</i> [ <i>account</i> ] ] ] <b><br>
user</b> [ <i>name</i> [ <i>password</i> [ <i>account</i> ]
] ]</p>

<p style="margin-left:22%;">Login the user <i>name</i> with
parameters <i>password</i> and <i>account</i>. Any of the
parameters can be omitted, and will be read from standard
input if needed (<i>name</i> is always needed). If standard
input is a terminal, a prompt for each one will be printed
on standard error and <i>password</i> will not be echoed. If
any of the parameters are not used, a warning message is
printed.</p>

<p style="margin-left:22%; margin-top: 1em">After a
successful login, the shell variables <b>ZFTP_USER</b>,
<b>ZFTP_ACCOUNT</b> and <b>ZFTP_PWD</b> are available; see
&lsquo;Variables&rsquo; below.</p>

<p style="margin-left:22%; margin-top: 1em">This command
may be re&minus;issued when a user is already logged in, and
the server will first be reinitialized for a new user.</p>

<p style="margin-left:11%;"><b>params</b> [ <i>host</i> [
<i>user</i> [ <i>password</i> [ <i>account</i> ] ] ] ]
<b><br>
params &minus;</b></p>

<p style="margin-left:22%;">Store the given parameters for
a later <b>open</b> command with no arguments. Only those
given on the command line will be remembered. If no
arguments are given, the parameters currently set are
printed, although the password will appear as a line of
stars; the return status is one if no parameters were set,
zero otherwise.</p>

<p style="margin-left:22%; margin-top: 1em">Any of the
parameters may be specified as a &lsquo;<b>?</b>&rsquo;,
which may need to be quoted to protect it from shell
expansion. In this case, the appropriate parameter will be
read from stdin as with the <b>login</b> subcommand,
including special handling of <i>password</i>. If the
&lsquo;<b>?</b>&rsquo; is followed by a string, that is used
as the prompt for reading the parameter instead of the
default message (any necessary punctuation and whitespace
should be included at the end of the prompt). The first
letter of the parameter (only) may be quoted with a
&lsquo;<b>\</b>&rsquo;; hence an argument
<b>&quot;\\$word&quot;</b> guarantees that the string from
the shell parameter <b>$word</b> will be treated literally,
whether or not it begins with a &lsquo;<b>?</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If instead a
single &lsquo;<b>&minus;</b>&rsquo; is given, the existing
parameters, if any, are deleted. In that case, calling
<b>open</b> with no arguments will cause an error.</p>

<p style="margin-left:22%; margin-top: 1em">The list of
parameters is not deleted after a <b>close</b>, however it
will be deleted if the <b>zsh/zftp</b> module is
unloaded.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zftp params
ftp.elsewhere.xx juser &rsquo;?Password for juser:
&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">will store the
host <b>ftp.elsewhere.xx</b> and the user <b>juser</b> and
then prompt the user for the corresponding password with the
given prompt.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>test</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Test the connection; if the server has reported that it
has closed the connection (maybe due to a timeout), return
status 2; if no connection was open anyway, return status 1;
else return status 0. The <b>test</b> subcommand is silent,
apart from messages printed by the <b>$ZFTP_VERBOSE</b>
mechanism, or error messages if the connection closes. There
is no network overhead for this test.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The test is
only supported on systems with either the <b>select(2)</b>
or <b>poll(2)</b> system calls; otherwise the message
&lsquo;<b>not supported on this system</b>&rsquo; is printed
instead.</p>

<p style="margin-left:22%; margin-top: 1em">The <b>test</b>
subcommand will automatically be called at the start of any
other subcommand for the current session when a connection
is open.</p>

<p style="margin-left:11%;"><b>cd</b> <i>directory</i></p>

<p style="margin-left:22%;">Change the remote directory to
<i>directory</i>. Also alters the shell variable
<b>ZFTP_PWD</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>cdup</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Change the remote directory to the one higher in the
directory tree. Note that <b>cd ..</b> will also work
correctly on non&minus;UNIX systems.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>dir</b> [ <i>args...</i>
]</p>

<p style="margin-left:22%;">Give a (verbose) listing of the
remote directory. The <i>args</i> are passed directly to the
server. The command&rsquo;s behaviour is implementation
dependent, but a UNIX server will typically interpret
<i>args</i> as arguments to the <b>ls</b> command and with
no arguments return the result of &lsquo;<b>ls
&minus;l</b>&rsquo;. The directory is listed to standard
output.</p>

<p style="margin-left:11%;"><b>ls</b> [ <i>args</i> ]</p>

<p style="margin-left:22%;">Give a (short) listing of the
remote directory. With no <i>args</i>, produces a raw list
of the files in the directory, one per line. Otherwise, up
to vagaries of the server implementation, behaves similar to
<b>dir</b>.</p>

<p style="margin-left:11%;"><b>type</b> [ <i>type</i> ]</p>

<p style="margin-left:22%;">Change the type for the
transfer to <i>type</i>, or print the current type if
<i>type</i> is absent. The allowed values are
&lsquo;<b>A</b>&rsquo; (ASCII), &lsquo;<b>I</b>&rsquo;
(Image, i.e. binary), or &lsquo;<b>B</b>&rsquo; (a synonym
for &lsquo;<b>I</b>&rsquo;).</p>

<p style="margin-left:22%; margin-top: 1em">The FTP default
for a transfer is ASCII. However, if <b>zftp</b> finds that
the remote host is a UNIX machine with 8&minus;bit byes, it
will automatically switch to using binary for file transfers
upon <b>open</b>. This can subsequently be overridden.</p>

<p style="margin-left:22%; margin-top: 1em">The transfer
type is only passed to the remote host when a data
connection is established; this command involves no network
overhead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ascii</b></p></td>
<td width="2%"></td>
<td width="29%">


<p>The same as <b>type A</b>.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>binary</b></p></td>
<td width="2%"></td>
<td width="29%">


<p>The same as <b>type I</b>.</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mode</b> [ <b>S</b> |
<b>B</b> ]</p>

<p style="margin-left:22%;">Set the mode type to stream
(<b>S</b>) or block (<b>B</b>). Stream mode is the default;
block mode is not widely supported.</p>

<p style="margin-left:11%;"><b>remote</b> <i>files...</i>
<b><br>
local</b> [ <i>files...</i> ]</p>

<p style="margin-left:22%;">Print the size and last
modification time of the remote or local files. If there is
more than one item on the list, the name of the file is
printed first. The first number is the file size, the second
is the last modification time of the file in the format
<b>CCYYMMDDhhmmSS</b> consisting of year, month, date, hour,
minutes and seconds in GMT. Note that this format, including
the length, is guaranteed, so that time strings can be
directly compared via the <b>[[</b> builtin&rsquo;s
<b>&lt;</b> and <b>&gt;</b> operators, even if they are too
long to be represented as integers.</p>

<p style="margin-left:22%; margin-top: 1em">Not all servers
support the commands for retrieving this information. In
that case, the <b>remote</b> command will print nothing and
return status 2, compared with status 1 for a file not
found.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>local</b> command (but not <b>remote</b>) may be used
with no arguments, in which case the information comes from
examining file descriptor zero. This is the same file as
seen by a <b>put</b> command with no further
redirection.</p>

<p style="margin-left:11%;"><b>get</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">Retrieve all <i>file</i>s from
the server, concatenating them and sending them to standard
output.</p>

<p style="margin-left:11%;"><b>put</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">For each <i>file</i>, read a
file from standard input and send that to the remote host
with the given name.</p>

<p style="margin-left:11%;"><b>append</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">As <b>put</b>, but if the
remote <i>file</i> already exists, data is appended to it
instead of overwriting it.</p>

<p style="margin-left:11%;"><b>getat</b> <i>file point</i>
<b><br>
putat</b> <i>file point</i> <b><br>
appendat</b> <i>file point</i></p>

<p style="margin-left:22%;">Versions of <b>get</b>,
<b>put</b> and <b>append</b> which will start the transfer
at the given <i>point</i> in the remote <i>file</i>. This is
useful for appending to an incomplete local file. However,
note that this ability is not universally supported by
servers (and is not quite the behaviour specified by the
standard).</p>

<p style="margin-left:11%;"><b>delete</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">Delete the list of files on the
server.</p>

<p style="margin-left:11%;"><b>mkdir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Create a new directory
<i>directory</i> on the server.</p>

<p style="margin-left:11%;"><b>rmdir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Delete the directory
<i>directory</i> on the server.</p>

<p style="margin-left:11%;"><b>rename</b> <i>old&minus;name
new&minus;name</i></p>

<p style="margin-left:22%;">Rename file
<i>old&minus;name</i> to <i>new&minus;name</i> on the
server.</p>

<p style="margin-left:11%;"><b>site</b> <i>args...</i></p>

<p style="margin-left:22%;">Send a host&minus;specific
command to the server. You will probably only need this if
instructed by the server to use it.</p>

<p style="margin-left:11%;"><b>quote</b> <i>args...</i></p>

<p style="margin-left:22%;">Send the raw FTP command
sequence to the server. You should be familiar with the FTP
command set as defined in RFC959 before doing this. Useful
commands may include <b>STAT</b> and <b>HELP</b>. Note also
the mechanism for returning messages as described for the
variable <b>ZFTP_VERBOSE</b> below, in particular that all
messages from the control connection are sent to standard
error.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>close</b></p></td>
<td width="4%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>quit</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Close the current data connection. This unsets the shell
parameters <b>ZFTP_HOST</b>, <b>ZFTP_PORT</b>,
<b>ZFTP_IP</b>, <b>ZFTP_SYSTEM</b>, <b>ZFTP_USER</b>,
<b>ZFTP_ACCOUNT</b>, <b>ZFTP_PWD</b>, <b>ZFTP_TYPE</b> and
<b>ZFTP_MODE</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>session</b> [
<i>sessname</i> ]</p>

<p style="margin-left:22%;">Allows multiple FTP sessions to
be used at once. The name of the session is an arbitrary
string of characters; the default session is called
&lsquo;<b>default</b>&rsquo;. If this command is called
without an argument, it will list all the current sessions;
with an argument, it will either switch to the existing
session called <i>sessname</i>, or create a new session of
that name.</p>

<p style="margin-left:22%; margin-top: 1em">Each session
remembers the status of the connection, the set of
connection&minus;specific shell parameters (the same set as
are unset when a connection closes, as given in the
description of <b>close</b>), and any user parameters
specified with the <b>params</b> subcommand. Changing to a
previous session restores those values; changing to a new
session initialises them in the same way as if <b>zftp</b>
had just been loaded. The name of the current session is
given by the parameter <b>ZFTP_SESSION</b>.</p>

<p style="margin-left:11%;"><b>rmsession</b> [
<i>sessname</i> ]</p>

<p style="margin-left:22%;">Delete a session; if a name is
not given, the current session is deleted. If the current
session is deleted, the earliest existing session becomes
the new current session, otherwise the current session is
not changed. If the session being deleted is the only one, a
new session called &lsquo;<b>default</b>&rsquo; is created
and becomes the current session; note that this is a new
session even if the session being deleted is also called
&lsquo;<b>default</b>&rsquo;. It is recommended that
sessions not be deleted while background commands which use
<b>zftp</b> are still active.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b>
<br>
The following shell parameters are used by <b>zftp</b>.
Currently none of them are special. <b><br>
ZFTP_TMOUT</b></p>

<p style="margin-left:22%;">Integer. The time in seconds to
wait for a network operation to complete before returning an
error. If this is not set when the module is loaded, it will
be given the default value 60. A value of zero turns off
timeouts. If a timeout occurs on the control connection it
will be closed. Use a larger value if this occurs too
frequently.</p>

<p style="margin-left:11%;"><b>ZFTP_IP</b></p>

<p style="margin-left:22%;">Readonly. The IP address of the
current connection in dot notation.</p>

<p style="margin-left:11%;"><b>ZFTP_HOST</b></p>

<p style="margin-left:22%;">Readonly. The hostname of the
current remote server. If the host was opened as an IP
number, <b>ZFTP_HOST</b> contains that instead; this saves
the overhead for a name lookup, as IP numbers are most
commonly used when a nameserver is unavailable.</p>

<p style="margin-left:11%;"><b>ZFTP_PORT</b></p>

<p style="margin-left:22%;">Readonly. The number of the
remote TCP port to which the connection is open (even if the
port was originally specified as a named service). Usually
this is the standard FTP port, 21.</p>

<p style="margin-left:22%; margin-top: 1em">In the unlikely
event that your system does not have the appropriate
conversion functions, this appears in network byte order. If
your system is little&minus;endian, the port then consists
of two swapped bytes and the standard port will be reported
as 5376. In that case, numeric ports passed to <b>zftp
open</b> will also need to be in this format.</p>

<p style="margin-left:11%;"><b>ZFTP_SYSTEM</b></p>

<p style="margin-left:22%;">Readonly. The system type
string returned by the server in response to an FTP
<b>SYST</b> request. The most interesting case is a string
beginning <b>&quot;UNIX Type: L8&quot;</b>, which ensures
maximum compatibility with a local UNIX host.</p>

<p style="margin-left:11%;"><b>ZFTP_TYPE</b></p>

<p style="margin-left:22%;">Readonly. The type to be used
for data transfers , either &lsquo;<b>A</b>&rsquo; or
&lsquo;<b>I</b>&rsquo;. Use the <b>type</b> subcommand to
change this.</p>

<p style="margin-left:11%;"><b>ZFTP_USER</b></p>

<p style="margin-left:22%;">Readonly. The username
currently logged in, if any.</p>

<p style="margin-left:11%;"><b>ZFTP_ACCOUNT</b></p>

<p style="margin-left:22%;">Readonly. The account name of
the current user, if any. Most servers do not require an
account name.</p>

<p style="margin-left:11%;"><b>ZFTP_PWD</b></p>

<p style="margin-left:22%;">Readonly. The current directory
on the server.</p>

<p style="margin-left:11%;"><b>ZFTP_CODE</b></p>

<p style="margin-left:22%;">Readonly. The three digit code
of the last FTP reply from the server as a string. This can
still be read after the connection is closed, and is not
changed when the current session changes.</p>

<p style="margin-left:11%;"><b>ZFTP_REPLY</b></p>

<p style="margin-left:22%;">Readonly. The last line of the
last reply sent by the server. This can still be read after
the connection is closed, and is not changed when the
current session changes.</p>

<p style="margin-left:11%;"><b>ZFTP_SESSION</b></p>

<p style="margin-left:22%;">Readonly. The name of the
current FTP session; see the description of the
<b>session</b> subcommand.</p>

<p style="margin-left:11%;"><b>ZFTP_PREFS</b></p>

<p style="margin-left:22%;">A string of preferences for
altering aspects of <b>zftp</b>&rsquo;s behaviour. Each
preference is a single character. The following are
defined:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>P</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Passive: attempt to make the remote server initiate data
transfers. This is slightly more efficient than sendport
mode. If the letter <b>S</b> occurs later in the string,
<b>zftp</b> will use sendport mode if passive mode is not
available.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Sendport: initiate transfers by the FTP <b>PORT</b>
command. If this occurs before any <b>P</b> in the string,
passive mode will never be attempted.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Dumb: use only the bare minimum of FTP commands. This
prevents the variables <b>ZFTP_SYSTEM</b> and
<b>ZFTP_PWD</b> from being set, and will mean all
connections default to ASCII type. It may prevent
<b>ZFTP_SIZE</b> from being set during a transfer if the
server does not send it anyway (many servers do).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZFTP_PREFS</b> is not set when <b>zftp</b> is loaded, it
will be set to a default of &lsquo;<b>PS</b>&rsquo;, i.e.
use passive mode if available, otherwise fall back to
sendport mode.</p>

<p style="margin-left:11%;"><b>ZFTP_VERBOSE</b></p>

<p style="margin-left:22%;">A string of digits between 0
and 5 inclusive, specifying which responses from the server
should be printed. All responses go to standard error. If
any of the numbers 1 to 5 appear in the string, raw
responses from the server with reply codes beginning with
that digit will be printed to standard error. The first
digit of the three digit reply code is defined by RFC959 to
correspond to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>1.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive preliminary reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive completion reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive intermediate reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>4.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A transient negative completion reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>5.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A permanent negative completion reply.</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">It should be
noted that, for unknown reasons, the reply &lsquo;Service
not available&rsquo;, which forces termination of a
connection, is classified as 421, i.e. &lsquo;transient
negative&rsquo;, an interesting interpretation of the word
&lsquo;transient&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The code 0 is
special: it indicates that all but the last line of
multiline replies read from the server will be printed to
standard error in a processed format. By convention, servers
use this mechanism for sending information for the user to
read. The appropriate reply code, if it matches the same
response, takes priority.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZFTP_VERBOSE</b> is not set when <b>zftp</b> is loaded,
it will be set to the default value <b>450</b>, i.e.,
messages destined for the user and all errors will be
printed. A null string is valid and specifies that no
messages should be printed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Functions
<br>
zftp_chpwd</b></p>

<p style="margin-left:22%;">If this function is set by the
user, it is called every time the directory changes on the
server, including when a user is logged in, or when a
connection is closed. In the last case, <b>$ZFTP_PWD</b>
will be unset; otherwise it will reflect the new
directory.</p>

<p style="margin-left:11%;"><b>zftp_progress</b></p>

<p style="margin-left:22%;">If this function is set by the
user, it will be called during a <b>get</b>, <b>put</b> or
<b>append</b> operation each time sufficient data has been
received from the host. During a <b>get</b>, the data is
sent to standard output, so it is vital that this function
should write to standard error or directly to the terminal,
<i>not</i> to standard output.</p>

<p style="margin-left:22%; margin-top: 1em">When it is
called with a transfer in progress, the following additional
shell parameters are set: <b><br>
ZFTP_FILE</b></p>

<p style="margin-left:32%;">The name of the remote file
being transferred from or to.</p>

<p style="margin-left:22%;"><b>ZFTP_TRANSFER</b></p>

<p style="margin-left:32%;">A <b>G</b> for a <b>get</b>
operation and a <b>P</b> for a <b>put</b> operation.</p>

<p style="margin-left:22%;"><b>ZFTP_SIZE</b></p>

<p style="margin-left:32%;">The total size of the complete
file being transferred: the same as the first value provided
by the <b>remote</b> and <b>local</b> subcommands for a
particular file. If the server cannot supply this value for
a remote file being retrieved, it will not be set. If input
is from a pipe the value may be incorrect and correspond
simply to a full pipe buffer.</p>

<p style="margin-left:22%;"><b>ZFTP_COUNT</b></p>

<p style="margin-left:32%;">The amount of data so far
transferred; a number between zero and <b>$ZFTP_SIZE</b>, if
that is set. This number is always available.</p>

<p style="margin-left:22%; margin-top: 1em">The function is
initially called with <b>ZFTP_TRANSFER</b> set appropriately
and <b>ZFTP_COUNT</b> set to zero. After the transfer is
finished, the function will be called one more time with
<b>ZFTP_TRANSFER</b> set to <b>GF</b> or <b>PF</b>, in case
it wishes to tidy up. It is otherwise never called twice
with the same value of <b>ZFTP_COUNT</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Sometimes the
progress meter may cause disruption. It is up to the user to
decide whether the function should be defined and to use
<b>unfunction</b> when necessary.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Problems</b>
<br>
A connection may not be opened in the left hand side of a
pipe as this occurs in a subshell and the file information
is not updated in the main shell. In the case of type or
mode changes or closing the connection in a subshell, the
information is returned but variables are not updated until
the next call to <b>zftp</b>. Other status changes in
subshells will not be reflected by changes to the variables
(but should be otherwise harmless).</p>

<p style="margin-left:11%; margin-top: 1em">Deleting
sessions while a <b>zftp</b> command is active in the
background can have unexpected effects, even if it does not
use the session being deleted. This is because all shell
subprocesses share information on the state of all
connections, and deleting a session changes the ordering of
that information.</p>

<p style="margin-left:11%; margin-top: 1em">On some
operating systems, the control connection is not valid after
a fork(), so that operations in subshells, on the left hand
side of a pipeline, or in the background are not possible,
as they should be. This is presumably a bug in the operating
system.</p>

<h2>THE ZSH/ZLE MODULE
<a name="THE ZSH/ZLE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zle</b> module contains the Zsh Line Editor. See
<i>zshzle</i>(1).</p>

<h2>THE ZSH/ZLEPARAMETER MODULE
<a name="THE ZSH/ZLEPARAMETER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zleparameter</b> module defines two special
parameters that can be used to access internal information
of the Zsh Line Editor (see <i>zshzle</i>(1)). <b><br>
keymaps</b></p>

<p style="margin-left:22%;">This array contains the names
of the keymaps currently defined.</p>

<p style="margin-left:11%;"><b>widgets</b></p>

<p style="margin-left:22%;">This associative array contains
one entry per widget defined. The name of the widget is the
key and the value gives information about the widget. It is
either the string &lsquo;<b>builtin</b>&rsquo; for builtin
widgets, a string of the form
&lsquo;<b>user:</b><i>name</i>&rsquo; for user&minus;defined
widgets, where <i>name</i> is the name of the shell function
implementing the widget, or it is a string of the form
&lsquo;<b>completion:</b><i>type</i><b>:</b><i>name</i>&rsquo;,
for completion widgets. In the last case <i>type</i> is the
name of the builtin widgets the completion widget imitates
in its behavior and <i>name</i> is the name of the shell
function implementing the completion widget.</p>

<h2>THE ZSH/ZPROF MODULE
<a name="THE ZSH/ZPROF MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When loaded,
the <b>zsh/zprof</b> causes shell functions to be profiled.
The profiling results can be obtained with the <b>zprof</b>
builtin command made available by this module. There is no
way to turn profiling off other than unloading the module.
<b><br>
zprof</b> [ <b>&minus;c</b> ]</p>

<p style="margin-left:22%;">Without the <b>&minus;c</b>
option, <b>zprof</b> lists profiling results to standard
output. The format is comparable to that of commands like
<b>gprof</b>.</p>

<p style="margin-left:22%; margin-top: 1em">At the top
there is a summary listing all functions that were called at
least once. This summary is sorted in decreasing order of
the amount of time spent in each. The lines contain the
number of the function in order, which is used in other
parts of the list in suffixes of the form
&lsquo;<b>[</b><i>num</i><b>]</b>&rsquo;, then the number of
calls made to the function. The next three columns list the
time in milliseconds spent in the function and its
descendants, the average time in milliseconds spent in the
function and its descendants per call and the percentage of
time spent in all shell functions used in this function and
its descendants. The following three columns give the same
information, but counting only the time spent in the
function itself. The final column shows the name of the
function.</p>

<p style="margin-left:22%; margin-top: 1em">After the
summary, detailed information about every function that was
invoked is listed, sorted in decreasing order of the amount
of time spent in each function and its descendants. Each of
these entries consists of descriptions for the functions
that called the function described, the function itself, and
the functions that were called from it. The description for
the function itself has the same format as in the summary
(and shows the same information). The other lines
don&rsquo;t show the number of the function at the beginning
and have their function named indented to make it easier to
distinguish the line showing the function described in the
section from the surrounding lines.</p>

<p style="margin-left:22%; margin-top: 1em">The information
shown in this case is almost the same as in the summary, but
only refers to the call hierarchy being displayed. For
example, for a calling function the column showing the total
running time lists the time spent in the described function
and its descendants only for the times when it was called
from that particular calling function. Likewise, for a
called function, this columns lists the total time spent in
the called function and its descendants only for the times
when it was called from the function described.</p>

<p style="margin-left:22%; margin-top: 1em">Also in this
case, the column showing the number of calls to a function
also shows a slash and then the total number of invocations
made to the called function.</p>

<p style="margin-left:22%; margin-top: 1em">As long as the
<b>zsh/zprof</b> module is loaded, profiling will be done
and multiple invocations of the <b>zprof</b> builtin command
will show the times and numbers of calls since the module
was loaded. With the <b>&minus;c</b> option, the
<b>zprof</b> builtin command will reset its internal
counters and will not show the listing.</p>

<h2>THE ZSH/ZPTY MODULE
<a name="THE ZSH/ZPTY MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zpty</b> module offers one builtin: <b><br>
zpty</b> [ <b>&minus;e</b> ] [ <b>&minus;b</b> ] <i>name</i>
[ <i>arg ...</i> ]</p>

<p style="margin-left:22%;">The arguments following
<i>name</i> are concatenated with spaces between, then
executed as a command, as if passed to the <b>eval</b>
builtin. The command runs under a newly assigned
pseudo&minus;terminal; this is useful for running commands
non&minus;interactively which expect an interactive
environment. The <i>name</i> is not part of the command, but
is used to refer to this command in later calls to
<b>zpty</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;e</b> option, the pseudo&minus;terminal is set up
so that input characters are echoed.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;b</b> option, input to and output from the
pseudo&minus;terminal are made non&minus;blocking.</p>

<p style="margin-left:11%;"><b>zpty &minus;d</b> [
<i>names</i> ... ]</p>

<p style="margin-left:22%;">The second form, with the
<b>&minus;d</b> option, is used to delete commands
previously started, by supplying a list of their
<i>name</i>s. If no <i>names</i> are given, all commands are
deleted. Deleting a command causes the HUP signal to be sent
to the corresponding process.</p>

<p style="margin-left:11%;"><b>zpty &minus;w</b> [
<b>&minus;n</b> ] <i>name</i> [ <i>strings ...</i> ]</p>

<p style="margin-left:22%;">The <b>&minus;w</b> option can
be used to send the to command <i>name</i> the given
<i>strings</i> as input (separated by spaces). If the
<b>&minus;n</b> option is <i>not</i> given, a newline is
added at the end.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<i>strings</i> are provided, the standard input is copied to
the pseudo&minus;terminal; this may stop before copying the
full input if the pseudo&minus;terminal is
non&minus;blocking.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
command under the pseudo&minus;terminal sees this input as
if it were typed, so beware when sending special tty driver
characters such as word&minus;erase, line&minus;kill, and
end&minus;of&minus;file.</p>

<p style="margin-left:11%;"><b>zpty &minus;r</b> [
<b>&minus;mt</b> ] <i>name</i> [ <i>param</i> [
<i>pattern</i> ] ]</p>

<p style="margin-left:22%;">The <b>&minus;r</b> option can
be used to read the output of the command <i>name</i>. With
only a <i>name</i> argument, the output read is copied to
the standard output. Unless the pseudo&minus;terminal is
non&minus;blocking, copying continues until the command
under the pseudo&minus;terminal exits; when
non&minus;blocking, only as much output as is immediately
available is copied. The return status is zero if any output
is copied.</p>

<p style="margin-left:22%; margin-top: 1em">When also given
a <i>param</i> argument, at most one line is read and stored
in the parameter named <i>param</i>. Less than a full line
may be read if the pseudo&minus;terminal is
non&minus;blocking. The return status is zero if at least
one character is stored in <i>param</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If a
<i>pattern</i> is given as well, output is read until the
whole string read matches the <i>pattern</i>, even in the
non&minus;blocking case. The return status is zero if the
string read matches the pattern, or if the command has
exited but at least one character could still be read. If
the option <b>&minus;m</b> is present, the return status is
zero only if the pattern matches. As of this writing, a
maximum of one megabyte of output can be consumed this way;
if a full megabyte is read without matching the pattern, the
return status is non&minus;zero.</p>

<p style="margin-left:22%; margin-top: 1em">In all cases,
the return status is non&minus;zero if nothing could be
read, and is <b>2</b> if this is because the command has
finished.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;r</b> option is combined with the <b>&minus;t</b>
option, <b>zpty</b> tests whether output is available before
trying to read. If no output is available, <b>zpty</b>
immediately returns the status <b>1</b>. When used with a
<i>pattern</i>, the behaviour on a failed poll is similar to
when the command has exited: the return value is zero if at
least one character could still be read even if the pattern
failed to match.</p>

<p style="margin-left:11%;"><b>zpty &minus;t</b>
<i>name</i></p>

<p style="margin-left:22%;">The <b>&minus;t</b> option
without the <b>&minus;r</b> option can be used to test
whether the command <i>name</i> is still running. It returns
a zero status if the command is running and a non&minus;zero
value otherwise.</p>

<p style="margin-left:11%;"><b>zpty</b> [ <b>&minus;L</b>
]</p>

<p style="margin-left:22%;">The last form, without any
arguments, is used to list the commands currently defined.
If the <b>&minus;L</b> option is given, this is done in the
form of calls to the <b>zpty</b> builtin.</p>

<h2>THE ZSH/ZSELECT MODULE
<a name="THE ZSH/ZSELECT MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zselect</b> module makes available one builtin
command: <b><br>
zselect</b> [ <b>&minus;rwe &minus;t</b> <i>timeout</i>
<b>&minus;a</b> <i>array</i> ] [ <i>fd</i> ... ]</p>

<p style="margin-left:22%;">The <b>zselect</b> builtin is a
front&minus;end to the &lsquo;select&rsquo; system call,
which blocks until a file descriptor is ready for reading or
writing, or has an error condition, with an optional
timeout. If this is not available on your system, the
command prints an error message and returns status 2 (normal
errors return status 1). For more information, see your
systems documentation for <i>select</i>(3). Note there is no
connection with the shell builtin of the same name.</p>

<p style="margin-left:22%; margin-top: 1em">Arguments and
options may be intermingled in any order. Non&minus;option
arguments are file descriptors, which must be decimal
integers. By default, file descriptors are to be tested for
reading, i.e. <b>zselect</b> will return when data is
available to be read from the file descriptor, or more
precisely, when a read operation from the file descriptor
will not block. After a <b>&minus;r</b>, <b>&minus;w</b> and
<b>&minus;e</b>, the given file descriptors are to be tested
for reading, writing, or error conditions. These options and
an arbitrary list of file descriptors may be given in any
order.</p>

<p style="margin-left:22%; margin-top: 1em">(The presence
of an &lsquo;error condition&rsquo; is not well defined in
the documentation for many implementations of the select
system call. According to recent versions of the POSIX
specification, it is really an <i>exception</i> condition,
of which the only standard example is
out&minus;of&minus;band data received on a socket. So zsh
users are unlikely to find the <b>&minus;e</b> option
useful.)</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;t</b> <i>timeout</i>&rsquo; specifies a
timeout in hundredths of a second. This may be zero, in
which case the file descriptors will simply be polled and
<b>zselect</b> will return immediately. It is possible to
call zselect with no file descriptors and a non&minus;zero
timeout for use as a finer&minus;grained replacement for
&lsquo;sleep&rsquo;; note, however, the return status is
always 1 for a timeout.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;a</b> <i>array</i>&rsquo; indicates that
<b>array</b> should be set to indicate the file
descriptor(s) which are ready. If the option is not given,
the array <b>reply</b> will be used for this purpose. The
array will contain a string similar to the arguments for
<b>zselect</b>. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zselect
&minus;t 0 &minus;r 0 &minus;w 1</b></p>

<p style="margin-left:22%; margin-top: 1em">might return
immediately with status 0 and <b>$reply</b> containing
&lsquo;<b>&minus;r 0 &minus;w 1</b>&rsquo; to show that both
file descriptors are ready for the requested operations.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;A</b> <i>assoc</i>&rsquo; indicates that
the associative array <b>assoc</b> should be set to indicate
the file descriptor(s( which are ready. This option
overrides the option <b>&minus;a</b>, nor will <b>reply</b>
be modified. The keys of <b>assoc</b> are the file
descriptors, and the corresponding values are any of the
characters &lsquo;<b>rwe</b>&rsquo; to indicate the
condition.</p>

<p style="margin-left:22%; margin-top: 1em">The command
returns status 0 if some file descriptors are ready for
reading. If the operation timed out, or a timeout of 0 was
given and no file descriptors were ready, or there was an
error, it returns status 1 and the array will not be set
(nor modified in any way). If there was an error in the
select operation the appropriate error message is
printed.</p>

<h2>THE ZSH/ZUTIL MODULE
<a name="THE ZSH/ZUTIL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zutil</b> module only adds some builtins: <b><br>
zstyle</b> [ <b>&minus;L</b> [ <i>pattern</i> [ <i>style</i>
] ] ] <b><br>
zstyle</b> [ <b>&minus;e</b> | <b>&minus;</b> |
<b>&minus;&minus;</b> ] <i>pattern style strings</i> ...
<b><br>
zstyle &minus;d</b> [ <i>pattern</i> [ <i>styles</i> ... ] ]
<b><br>
zstyle &minus;g</b> <i>name</i> [ <i>pattern</i> [
<i>style</i> ] ] <b><br>
zstyle &minus;abs</b> <i>context style name</i> [ <i>sep</i>
] <b><br>
zstyle &minus;Tt</b> <i>context style</i> [ <i>strings</i>
...] <b><br>
zstyle &minus;m</b> <i>context style pattern</i></p>

<p style="margin-left:22%;">This builtin command is used to
define and lookup styles. Styles are pairs of names and
values, where the values consist of any number of strings.
They are stored together with patterns and lookup is done by
giving a string, called the &lsquo;context&rsquo;, which is
compared to the patterns. The definition stored for the
first matching pattern will be returned.</p>

<p style="margin-left:22%; margin-top: 1em">For ordering of
comparisons, patterns are searched from most specific to
least specific, and patterns that are equally specific keep
the order in which they were defined. A pattern is
considered to be more specific than another if it contains
more components (substrings separated by colons) or if the
patterns for the components are more specific, where simple
strings are considered to be more specific than patterns and
complex patterns are considered to be more specific than the
pattern &lsquo;<b>*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The first form
(without arguments) lists the definitions. Styles are shown
in alphabetic order and patterns are shown in the order
<b>zstyle</b> will test them.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;L</b> option is given, listing is done in the form
of calls to <b>zstyle</b>. The optional first argument is a
pattern which will be matched against the string supplied as
the pattern for the context; note that this means, for
example, &lsquo;<b>zstyle &minus;L
&quot;:completion:*&quot;</b>&rsquo; will match any supplied
pattern beginning &lsquo;<b>:completion:</b>&rsquo;, not
just <b>&quot;:completion:*&quot;</b>: use
<b>&quot;:completion:\*&quot;</b> to match that. The
optional second argument limits the output to a specific
style (not a pattern). <b>&minus;L</b> is not compatible
with any other options.</p>

<p style="margin-left:22%; margin-top: 1em">The other forms
are the following: <b><br>
zstyle</b> [ <b>&minus;</b> | <b>&minus;&minus;</b> |
<b>&minus;e</b> ] <i>pattern style strings</i> ...</p>

<p style="margin-left:32%;">Defines the given <i>style</i>
for the <i>pattern</i> with the <i>strings</i> as the value.
If the <b>&minus;e</b> option is given, the <i>strings</i>
will be concatenated (separated by spaces) and the resulting
string will be evaluated (in the same way as it is done by
the <b>eval</b> builtin command) when the style is looked
up. In this case the parameter &lsquo;<b>reply</b>&rsquo;
must be assigned to set the strings returned after the
evaluation. Before evaluating the value, <b>reply</b> is
unset, and if it is still unset after the evaluation, the
style is treated as if it were not set.</p>

<p style="margin-left:22%;"><b>zstyle &minus;d</b> [
<i>pattern</i> [ <i>styles</i> ... ] ]</p>

<p style="margin-left:32%;">Delete style definitions.
Without arguments all definitions are deleted, with a
<i>pattern</i> all definitions for that pattern are deleted
and if any <i>styles</i> are given, then only those styles
are deleted for the <i>pattern</i>.</p>

<p style="margin-left:22%;"><b>zstyle &minus;g</b>
<i>name</i> [ <i>pattern</i> [ <i>style</i> ] ]</p>

<p style="margin-left:32%;">Retrieve a style definition.
The <i>name</i> is used as the name of an array in which the
results are stored. Without any further arguments, all
<i>patterns</i> defined are returned. With a <i>pattern</i>
the styles defined for that pattern are returned and with
both a <i>pattern</i> and a <i>style</i>, the value strings
of that combination is returned.</p>

<p style="margin-left:22%; margin-top: 1em">The other forms
can be used to look up or test patterns. <b><br>
zstyle &minus;s</b> <i>context style name</i> [ <i>sep</i>
]</p>

<p style="margin-left:32%;">The parameter <i>name</i> is
set to the value of the style interpreted as a string. If
the value contains several strings they are concatenated
with spaces (or with the <i>sep</i> string if that is given)
between them.</p>

<p style="margin-left:22%;"><b>zstyle &minus;b</b>
<i>context style name</i></p>

<p style="margin-left:32%;">The value is stored in
<i>name</i> as a boolean, i.e. as the string
&lsquo;<b>yes</b>&rsquo; if the value has only one string
and that string is equal to one of &lsquo;<b>yes</b>&rsquo;,
&lsquo;<b>true</b>&rsquo;, &lsquo;<b>on</b>&rsquo;, or
&lsquo;<b>1</b>&rsquo;. If the value is any other string or
has more than one string, the parameter is set to
&lsquo;<b>no</b>&rsquo;.</p>

<p style="margin-left:22%;"><b>zstyle &minus;a</b>
<i>context style name</i></p>

<p style="margin-left:32%;">The value is stored in
<i>name</i> as an array. If <i>name</i> is declared as an
associative array, the first, third, etc. strings are used
as the keys and the other strings are used as the
values.</p>

<p style="margin-left:22%;"><b>zstyle &minus;t</b>
<i>context style</i> [ <i>strings</i> ...] <b><br>
zstyle &minus;T</b> <i>context style</i> [ <i>strings</i>
...]</p>

<p style="margin-left:32%;">Test the value of a style, i.e.
the <b>&minus;t</b> option only returns a status (sets
<b>$?</b>). Without any <i>strings</i> the return status is
zero if the style is defined for at least one matching
pattern, has only one string in its value, and that is equal
to one of &lsquo;<b>true</b>&rsquo;,
&lsquo;<b>yes</b>&rsquo;, &lsquo;<b>on</b>&rsquo; or
&lsquo;<b>1</b>&rsquo;. If any <i>strings</i> are given the
status is zero if and only if at least one of the
<i>strings</i> is equal to at least one of the strings in
the value. If the style is defined but doesn&rsquo;t match,
the return status is <b>1</b>. If the style is not defined,
the status is <b>2</b>.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>&minus;T</b> option tests the values of the style like
<b>&minus;t</b>, but it returns status zero (rather than
<b>2</b>) if the style is not defined for any matching
pattern.</p>

<p style="margin-left:22%;"><b>zstyle &minus;m</b>
<i>context style pattern</i></p>

<p style="margin-left:32%;">Match a value. Returns status
zero if the <i>pattern</i> matches at least one of the
strings in the value.</p>

<p style="margin-left:11%;"><b>zformat &minus;f</b>
<i>param format specs</i> ... <b><br>
zformat &minus;a</b> <i>array sep specs</i> ...</p>

<p style="margin-left:22%;">This builtin provides two
different forms of formatting. The first form is selected
with the <b>&minus;f</b> option. In this case the
<i>format</i> string will be modified by replacing sequences
starting with a percent sign in it with strings from the
<i>specs</i>. Each <i>spec</i> should be of the form
&lsquo;<i>char</i><b>:</b><i>string</i>&rsquo; which will
cause every appearance of the sequence
&lsquo;<b>%</b><i>char</i>&rsquo; in <i>format</i> to be
replaced by the <i>string</i>. The &lsquo;<b>%</b>&rsquo;
sequence may also contain optional minimum and maximum field
width specifications between the &lsquo;<b>%</b>&rsquo; and
the &lsquo;<i>char</i>&rsquo; in the form
&lsquo;<b>%</b><i>min</i><b>.</b><i>max</i><b>c</b>&rsquo;,
i.e. the minimum field width is given first and if the
maximum field width is used, it has to be preceded by a dot.
Specifying a minimum field width makes the result be padded
with spaces to the right if the <i>string</i> is shorter
than the requested width. Padding to the left can be
achieved by giving a negative minimum field width. If a
maximum field width is specified, the <i>string</i> will be
truncated after that many characters. After all
&lsquo;<b>%</b>&rsquo; sequences for the given <i>specs</i>
have been processed, the resulting string is stored in the
parameter <i>param</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>%</b>&minus;escapes also understand ternary expressions
in the form used by prompts. The <b>%</b> is followed by a
&lsquo;<b>(</b>&rsquo; and then an ordinary format specifier
character as described above. There may be a set of digits
either before or after the &lsquo;<b>(</b>&rsquo;; these
specify a test number, which defaults to zero. Negative
numbers are also allowed. An arbitrary delimiter character
follows the format specifier, which is followed by a piece
of &lsquo;true&rsquo; text, the delimiter character again, a
piece of &lsquo;false&rsquo; text, and a closing
parenthesis. The complete expression (without the digits)
thus looks like
&lsquo;<b>%(</b><i>X</i><b>.</b><i>text1</i><b>.</b><i>text2</i><b>)</b>&rsquo;,
except that the &lsquo;<b>.</b>&rsquo; character is
arbitrary. The value given for the format specifier in the
<i>char</i><b>:</b><i>string</i> expressions is evaluated as
a mathematical expression, and compared with the test
number. If they are the same, <i>text1</i> is output, else
<i>text2</i> is output. A parenthesis may be escaped in
<i>text2</i> as <b>%)</b>. Either of <i>text1</i> or
<i>text2</i> may contain nested <b>%</b>&minus;escapes.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zformat
&minus;f REPLY &quot;The answer is
&rsquo;%3(c.yes.no)&rsquo;.&quot; c:3</b></p>

<p style="margin-left:22%; margin-top: 1em">outputs
&quot;The answer is &rsquo;yes&rsquo;.&quot; to <b>REPLY</b>
since the value for the format specifier <b>c</b> is 3,
agreeing with the digit argument to the ternary
expression.</p>

<p style="margin-left:22%; margin-top: 1em">The second
form, using the <b>&minus;a</b> option, can be used for
aligning strings. Here, the <i>specs</i> are of the form
&lsquo;<i>left</i><b>:</b><i>right</i>&rsquo; where
&lsquo;<i>left</i>&rsquo; and &lsquo;<i>right</i>&rsquo; are
arbitrary strings. These strings are modified by replacing
the colons by the <i>sep</i> string and padding the
<i>left</i> strings with spaces to the right so that the
<i>sep</i> strings in the result (and hence the <i>right</i>
strings after them) are all aligned if the strings are
printed below each other. All strings without a colon are
left unchanged and all strings with an empty <i>right</i>
string have the trailing colon removed. In both cases the
lengths of the strings are not used to determine how the
other strings are to be aligned. The resulting strings are
stored in the <i>array</i>.</p>

<p style="margin-left:11%;"><b>zregexparse</b></p>

<p style="margin-left:22%;">This implements some internals
of the <b>_regex_arguments</b> function.</p>

<p style="margin-left:11%;"><b>zparseopts</b> [
<b>&minus;D</b> ] [ <b>&minus;K</b> ] [ <b>&minus;M</b> ] [
<b>&minus;E</b> ] [ <b>&minus;a</b> <i>array</i> ] [
<b>&minus;A</b> <i>assoc</i> ] <i>specs</i></p>

<p style="margin-left:22%;">This builtin simplifies the
parsing of options in positional parameters, i.e. the set of
arguments given by <b>$*</b>. Each <i>spec</i> describes one
option and must be of the form
&lsquo;<i>opt</i>[<b>=</b><i>array</i>]&rsquo;. If an option
described by <i>opt</i> is found in the positional
parameters it is copied into the <i>array</i> specified with
the <b>&minus;a</b> option; if the optional
&lsquo;<b>=</b><i>array</i>&rsquo; is given, it is instead
copied into that array.</p>

<p style="margin-left:22%; margin-top: 1em">Note that it is
an error to give any <i>spec</i> without an
&lsquo;<b>=</b><i>array</i>&rsquo; unless one of the
<b>&minus;a</b> or <b>&minus;A</b> options is used.</p>

<p style="margin-left:22%; margin-top: 1em">Unless the
<b>&minus;E</b> option is given, parsing stops at the first
string that isn&rsquo;t described by one of the
<i>specs</i>. Even with <b>&minus;E</b>, parsing always
stops at a positional parameter equal to
&lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>&minus;&minus;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>opt</i>
description must be one of the following. Any of the special
characters can appear in the option name provided it is
preceded by a backslash.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>name</i></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>name</i><b>+</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The <i>name</i> is the name of the option without the
leading &lsquo;<b>&minus;</b>&rsquo;. To specify a
GNU&minus;style long option, one of the usual two leading
&lsquo;<b>&minus;</b>&rsquo; must be included in
<i>name</i>; for example, a
&lsquo;<b>&minus;&minus;file</b>&rsquo; option is
represented by a <i>name</i> of
&lsquo;<b>&minus;file</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">If a
&lsquo;<b>+</b>&rsquo; appears after <i>name</i>, the option
is appended to <i>array</i> each time it is found in the
positional parameters; without the &lsquo;<b>+</b>&rsquo;
only the <i>last</i> occurrence of the option is
preserved.</p>

<p style="margin-left:32%; margin-top: 1em">If one of these
forms is used, the option takes no argument, so parsing
stops if the next positional parameter does not also begin
with &lsquo;<b>&minus;</b>&rsquo; (unless the
<b>&minus;E</b> option is used).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>name</i><b>:</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>name</i><b>:&minus;</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>name</i><b>::</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>If one or two colons are given, the option takes an
argument; with one colon, the argument is mandatory and with
two colons it is optional. The argument is appended to the
<i>array</i> after the option itself.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">An optional
argument is put into the same array element as the option
name (note that this makes empty strings as arguments
indistinguishable). A mandatory argument is added as a
separate element unless the &lsquo;<b>:&minus;</b>&rsquo;
form is used, in which case the argument is put into the
same element.</p>

<p style="margin-left:32%; margin-top: 1em">A
&lsquo;<b>+</b>&rsquo; as described above may appear between
the <i>name</i> and the first colon.</p>

<p style="margin-left:11%; margin-top: 1em">The options of
<b>zparseopts</b> itself are: <b><br>
&minus;a</b> <i>array</i></p>

<p style="margin-left:22%;">As described above, this names
the default array in which to store the recognised
options.</p>

<p style="margin-left:11%;"><b>&minus;A</b>
<i>assoc</i></p>

<p style="margin-left:22%;">If this is given, the options
and their values are also put into an associative array with
the option names as keys and the arguments (if any) as the
values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If this option is given, all options found are removed
from the positional parameters of the calling shell or shell
function, up to but not including any not described by the
<i>specs</i>. This is similar to using the <b>shift</b>
builtin.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;K</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>With this option, the arrays specified with the
<b>&minus;a</b> and <b>&minus;A</b> options and with the
&lsquo;<b>=</b><i>array</i>&rsquo; forms are kept unchanged
when none of the <i>specs</i> for them is used. This allows
assignment of default values to them before calling
<b>zparseopts</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This changes the assignment rules to implement a map
among equivalent option names. If any <i>spec</i> uses the
&lsquo;<b>=</b><i>array</i>&rsquo; form, the string
<i>array</i> is interpreted as the name of another
<i>spec</i>, which is used to choose where to store the
values. If no other <i>spec</i> is found, the values are
stored as usual. This changes only the way the values are
stored, not the way <b>$*</b> is parsed, so results may be
unpredicable if the &lsquo;<i>name</i><b>+</b>&rsquo;
specifier is used inconsistently.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This changes the parsing rules to <i>not</i> stop at the
first string that isn&rsquo;t described by one of the
<i>spec</i>s. It can be used to test for or (if used
together with <b>&minus;D</b>) extract options and their
arguments, ignoring all other options and arguments that may
be in the positional parameters.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a &minus;bx &minus;c y &minus;cz baz
&minus;cend <br>
zparseopts a=foo b:=bar c+:=bar</b></p>

<p style="margin-left:11%; margin-top: 1em">will have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>foo=(&minus;a)
<br>
bar=(&minus;b x &minus;c y &minus;c z)</b></p>

<p style="margin-left:11%; margin-top: 1em">The arguments
from &lsquo;<b>baz</b>&rsquo; on will not be used.</p>

<p style="margin-left:11%; margin-top: 1em">As an example
for the <b>&minus;E</b> option, consider:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a x &minus;b y &minus;c z arg1 arg2
<br>
zparseopts &minus;E &minus;D b:=bar</b></p>

<p style="margin-left:11%; margin-top: 1em">will have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>bar=(&minus;b
y) <br>
set &minus;&minus; &minus;a x &minus;c z arg1 arg2</b></p>

<p style="margin-left:11%; margin-top: 1em">I.e., the
option <b>&minus;b</b> and its arguments are taken from the
positional parameters and put into the array <b>bar</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;M</b> option can be used like this:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a &minus;bx &minus;c y &minus;cz baz
&minus;cend <br>
zparseopts &minus;A bar &minus;M a=foo b+: c:=b</b></p>

<p style="margin-left:11%; margin-top: 1em">to have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>foo=(&minus;a)
<br>
bar=(&minus;a &rsquo;&rsquo; &minus;b xyz)</b></p>
<hr>
</body>
</html>
