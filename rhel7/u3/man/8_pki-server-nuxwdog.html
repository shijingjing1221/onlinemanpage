<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:08:31 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>pki-server-nuxwdog</title>

</head>
<body>

<h1 align="center">pki-server-nuxwdog</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#OPERATIONS">OPERATIONS</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">pki-server-nuxwdog
&minus; Command-Line Interface for enabling CS instances to
start using <b>nuxwdog</b>.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pki-server
[CLI options] nuxwdog <br>
pki-server [CLI options] nuxwdog-enable <br>
pki-server [CLI options] nuxwdog-disable</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When a
Certificate System (CS) instance starts, it reads a plain
text configuration file (
<b>/etc/pki/&lt;instance_name&gt;/password.conf</b>) to
obtain passwords needed to initialize the server. This could
include passwords needed to access server keys in hardware
or software cryptographic modules, or passwords to establish
database connections.</p>

<p style="margin-left:11%; margin-top: 1em">While this file
is protected by file and SELinux permissions, it is even
more secure to remove this file entirely, and have the
server prompt for these passwords on startup. This means of
course that it will not be possible to start the CS instance
unattended, including on server reboots.</p>

<p style="margin-left:11%; margin-top: 1em"><b>nuxwdog</b>
is a daemon that will launch the CS instance and prompt the
administrator for the relevant passwords. These passwords
will be cached securely in the kernel keyring. If the CS
instance crashes unexpectedly, <b>nuxwdog</b> will attempt
to restart the instance using the cached passwords.</p>

<p style="margin-left:11%; margin-top: 1em">CS instances
need to be reconfigured to use <b>nuxwdog</b> to start. Not
only are changes required in instance configuration files,
but instances need to use a different systemd unit file to
start. See details in the <b>Operations</b> section.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki-server
nuxwdog</b> commands provide a mechanism to reconfigure
instances to either start or not start with
<b>nuxwdog</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki-server
[CLI options] nuxwdog</b></p>

<p style="margin-left:17%;">This command is to list
available <b>nuxwdog</b> commands.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki-server
[CLI options] nuxwdog-enable</b></p>

<p style="margin-left:17%;">This command is to reconfigure
ALL local CS instances to start using <b>nuxwdog</b>. To
reconfigure a particular CS instance only, use <b>pki-server
instance-nuxwdog-enable</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>pki-server
[CLI options] nuxwdog-disable</b></p>

<p style="margin-left:17%;">This command is to reconfigure
ALL local CS instances to start without using
<b>nuxwdog</b>. To reconfigure a particular CS instance
only, use <b>pki-server instance-nuxwdog-disable</b>. Once
this operation is complete, instances will need to read a
<b>password.conf</b> file in order to start up.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The CLI options
are described in <b>pki-server</b>(8).</p>

<h2>OPERATIONS
<a name="OPERATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Configuring a
CS instance to start using <b>nuxwdog</b> requires changes
to instance configuration files such as <b>server.xml</b>.
These changes are performed by <b>pki-server</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Once a
subsystem has been converted to using <b>nuxwdog</b>, the
<b>password.conf</b> file is no longer needed. It can be
removed from the filesystem. Be sure, of course, to note all
passwords contained therein - some of which may be randomly
generated during the install.</p>

<p style="margin-left:11%; margin-top: 1em">An instance
that is started by <b>nuxwdog</b> is started by a different
systemd unit file (<b>pki-tomcatd-nuxwdog</b>). Therefore,
to start/stop/restart an instance using the following:</p>

<p style="margin-left:11%; margin-top: 1em"><b>systemctl
start/stop/restart
pki-tomcatd-nuxwdog@&lt;instance_id&gt;.service</b></p>

<p style="margin-left:11%; margin-top: 1em">If the CS
instance is converted back to not using <b>nuxwdog</b> to
start, then the usual systemd unit scripts can be
invoked:</p>

<p style="margin-left:11%; margin-top: 1em"><b>systemctl
start/stop/restart
pki-tomcatd@&lt;instance_id&gt;.service</b></p>

<p style="margin-left:11%; margin-top: 1em">All
<b>pki-server</b> commands must be executed as the system
administrator.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Ade Lee
&lt;alee@redhat.com&gt;</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (c)
2015 Red Hat, Inc. This is licensed under the GNU General
Public License, version 2 (GPLv2). A copy of this license is
available at
http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.</p>
<hr>
</body>
</html>
