<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:29:39 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMB.CONF</title>

</head>
<body>

<h1 align="center">SMB.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#FILE FORMAT">FILE FORMAT</a><br>
<a href="#SECTION DESCRIPTIONS">SECTION DESCRIPTIONS</a><br>
<a href="#SPECIAL SECTIONS">SPECIAL SECTIONS</a><br>
<a href="#USERSHARES">USERSHARES</a><br>
<a href="#PARAMETERS">PARAMETERS</a><br>
<a href="#VARIABLE SUBSTITUTIONS">VARIABLE SUBSTITUTIONS</a><br>
<a href="#NAME MANGLING">NAME MANGLING</a><br>
<a href="#REGISTRY-BASED CONFIGURATION">REGISTRY-BASED CONFIGURATION</a><br>
<a href="#EXPLANATION OF EACH PARAMETER">EXPLANATION OF EACH PARAMETER</a><br>
<a href="#WARNINGS">WARNINGS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">smb.conf
&minus; The configuration file for the Samba suite</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The smb.conf
file is a configuration file for the Samba suite. smb.conf
contains runtime configuration information for the Samba
programs. The complete description of the file format and
possible parameters held within are here for reference
purposes.</p>

<h2>FILE FORMAT
<a name="FILE FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The file
consists of sections and parameters. A section begins with
the name of the section in square brackets and continues
until the next section begins. Sections contain parameters
of the form:</p>

<p style="margin-left:17%; margin-top: 1em"><i>name</i> =
<i>value</i></p>

<p style="margin-left:11%; margin-top: 1em">The file is
line&minus;based &minus; that is, each
newline&minus;terminated line represents either a comment, a
section name or a parameter.</p>

<p style="margin-left:11%; margin-top: 1em">Section and
parameter names are not case sensitive.</p>

<p style="margin-left:11%; margin-top: 1em">Only the first
equals sign in a parameter is significant. Whitespace before
or after the first equals sign is discarded. Leading,
trailing and internal whitespace in section and parameter
names is irrelevant. Leading and trailing whitespace in a
parameter value is discarded. Internal whitespace within a
parameter value is retained verbatim.</p>

<p style="margin-left:11%; margin-top: 1em">Any line
beginning with a semicolon (&ldquo;;&rdquo;) or a hash
(&ldquo;#&rdquo;) character is ignored, as are lines
containing only whitespace.</p>

<p style="margin-left:11%; margin-top: 1em">Any line ending
in a &ldquo;\&rdquo; is continued on the next line in the
customary UNIX fashion.</p>

<p style="margin-left:11%; margin-top: 1em">The values
following the equals sign in parameters are all either a
string (no quotes needed) or a boolean, which may be given
as yes/no, 1/0 or true/false. Case is not significant in
boolean values, but is preserved in string values. Some
items such as create masks are numeric.</p>

<h2>SECTION DESCRIPTIONS
<a name="SECTION DESCRIPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each section in
the configuration file (except for the [global] section)
describes a shared resource (known as a
&ldquo;share&rdquo;). The section name is the name of the
shared resource and the parameters within the section define
the shares attributes.</p>

<p style="margin-left:11%; margin-top: 1em">There are three
special sections, [global], [homes] and [printers], which
are described under <i>special sections</i>. The following
notes apply to ordinary section descriptions.</p>

<p style="margin-left:11%; margin-top: 1em">A share
consists of a directory to which access is being given plus
a description of the access rights which are granted to the
user of the service. Some housekeeping options are also
specifiable.</p>

<p style="margin-left:11%; margin-top: 1em">Sections are
either file share services (used by the client as an
extension of their native file systems) or printable
services (used by the client to access print services on the
host running the server).</p>

<p style="margin-left:11%; margin-top: 1em">Sections may be
designated <i>guest</i> services, in which case no password
is required to access them. A specified UNIX <i>guest
account</i> is used to define access privileges in this
case.</p>

<p style="margin-left:11%; margin-top: 1em">Sections other
than guest services will require a password to access them.
The client provides the username. As older clients only
provide passwords and not usernames, you may specify a list
of usernames to check against the password using the user =
option in the share definition. For modern clients such as
Windows 95/98/ME/NT/2000, this should not be necessary.</p>

<p style="margin-left:11%; margin-top: 1em">The access
rights granted by the server are masked by the access rights
granted to the specified or guest UNIX user by the host
system. The server does not grant more access than the host
system grants.</p>

<p style="margin-left:11%; margin-top: 1em">The following
sample section defines a file space share. The user has
write access to the path /home/bar. The share is accessed
via the share name foo:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><i>[foo]</i></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b><font color="#0000FF">path = /home/bar</font></b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b><font color="#0000FF">read only = no</font></b></p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
following sample section defines a printable share. The
share is read&minus;only, but printable. That is, the only
write access permitted is via calls to open, write to and
close a spool file. The <i>guest ok</i> parameter means
access will be permitted as the default guest user
(specified elsewhere):</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000"><i>[aprinter]</i></font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">path =
/usr/spool/public</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">read only = yes</font></b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">printable = yes</font></b></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">guest ok = yes</font></b></p></td></tr>
</table>

<h2>SPECIAL SECTIONS
<a name="SPECIAL SECTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><font color="#000000">The
[global] section</font></b> <font color="#000000"><br>
Parameters in this section apply to the server as a whole,
or are defaults for sections that do not specifically define
certain items. See the notes under PARAMETERS for more
information.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>The
[homes] section</b> <br>
If a section called [homes] is included in the configuration
file, services connecting clients to their home directories
can be created on the fly by the server.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">When
the connection request is made, the existing sections are
scanned. If a match is found, it is used. If no match is
found, the requested section name is treated as a username
and looked up in the local password file. If the name exists
and the correct password has been given, a share is created
by cloning the [homes] section.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Some
modifications are then made to the newly created
share:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The share name is changed from homes to the located
username.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
If no path was given, the path is set to the user's home
directory.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
you decide to use a <i>path =</i> line in your [homes]
section, it may be useful to use the %S macro. For
example:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><b>path
= /data/pchome/%S</b></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">is
useful if you have different home directories for your PCs
than for UNIX access.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
is a fast and simple way to give a large number of clients
access to their home directories with a minimum of
fuss.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">A
similar process occurs if the requested section name is
&ldquo;homes&rdquo;, except that the share name is not
changed to that of the requesting user. This method of using
the [homes] section works well if different users share a
client PC.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
[homes] section can specify all the parameters a normal
service section can specify, though some make more sense
than others. The following is a typical and suitable [homes]
section:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>[homes]</i></font>
<b><font color="#0000FF"><br>
read only = no</font></b></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">An
important point is that if guest access is specified in the
[homes] section, all home directories will be visible to all
clients <i>without a password</i>. In the very unlikely
event that this is actually desirable, it is wise to also
specify <i>read only access</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
<i>browseable</i> flag for auto home directories will be
inherited from the global browseable flag, not the [homes]
browseable flag. This is useful as it means setting
<i>browseable = no</i> in the [homes] section will hide the
[homes] share but make any auto home directories
visible.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>The
[printers] section</b> <br>
This section works like [homes], but for
printers.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
a [printers] section occurs in the configuration file, users
are able to connect to any printer specified in the local
host's printcap file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">When
a connection request is made, the existing sections are
scanned. If a match is found, it is used. If no match is
found, but a [homes] section exists, it is used as described
above. Otherwise, the requested section name is treated as a
printer name and the appropriate printcap file is scanned to
see if the requested section name is a valid printer share
name. If a match is found, a new printer share is created by
cloning the [printers] section.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">A
few modifications are then made to the newly created
share:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
The share name is set to the located printer name</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
If no printer name was given, the printer name is set to the
located printer name</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
If the share does not permit guest access and no username
was given, the username is set to the located printer
name.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
[printers] service MUST be printable &minus; if you specify
otherwise, the server will refuse to load the configuration
file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Typically
the path specified is that of a world&minus;writeable spool
directory with the sticky bit set on it. A typical
[printers] entry looks like this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>[printers]</i></font>
<b><font color="#0000FF"><br>
path = /usr/spool/public <br>
guest ok = yes <br>
printable = yes</font></b></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">All
aliases given for a printer in the printcap file are
legitimate printer names as far as the server is concerned.
If your printing subsystem doesn't work like that, you will
have to set up a pseudo&minus;printcap. This is a file
consisting of one or more lines like this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">alias|alias|alias|alias...</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Each
alias should be an acceptable printer name for your printing
subsystem. In the [global] section, specify the new file as
your printcap. The server will only recognize names found in
your pseudo&minus;printcap, which of course can contain
whatever aliases you like. The same technique could be used
simply to limit access to a subset of your local
printers.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">An
alias, by the way, is defined as any component of the first
entry of a printcap record. Records are separated by
newlines, components (if there are more than one) are
separated by vertical bar symbols (|).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><b><big>Note</big></b>
<br>
On SYSV systems which use lpstat to determine what printers
are defined on the system you may be able to use printcap
name = lpstat to automatically obtain a list of printers.
See the printcap name option for more details.</font></p>

<h2>USERSHARES
<a name="USERSHARES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Starting
with Samba version 3.0.23 the capability for non&minus;root
users to add, modify, and delete their own share definitions
has been added. This capability is called <i>usershares</i>
and is controlled by a set of parameters in the [global]
section of the smb.conf. The relevant parameters are
:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
allow guests</font></p>

<p style="margin-left:17%;"><font color="#000000">Controls
if usershares can permit guest access.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
max shares</font></p>

<p style="margin-left:17%;"><font color="#000000">Maximum
number of user defined shares allowed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
owner only</font></p>

<p style="margin-left:17%;"><font color="#000000">If set
only directories owned by the sharing user can be
shared.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
path</font></p>

<p style="margin-left:17%;"><font color="#000000">Points to
the directory containing the user defined share definitions.
The filesystem permissions on this directory control who can
create user defined shares.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
prefix allow list</font></p>


<p style="margin-left:17%;"><font color="#000000">Comma&minus;separated
list of absolute pathnames restricting what directories can
be shared. Only directories below the pathnames in this list
are permitted.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
prefix deny list</font></p>


<p style="margin-left:17%;"><font color="#000000">Comma&minus;separated
list of absolute pathnames restricting what directories can
be shared. Directories below the pathnames in this list are
prohibited.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">usershare
template share</font></p>

<p style="margin-left:17%;"><font color="#000000">Names a
pre&minus;existing share used as a template for creating new
usershares. All other share parameters not specified in the
user defined share definition are copied from this named
share.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">To
allow members of the UNIX group foo to create user defined
shares, create the directory to contain the share
definitions as follows:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Become
root:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">mkdir
/usr/local/samba/lib/usershares <br>
chgrp foo /usr/local/samba/lib/usershares <br>
chmod 1770 /usr/local/samba/lib/usershares</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Then
add the parameters</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">usershare path =
/usr/local/samba/lib/usershares</font></b></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><b><font color="#0000FF">usershare max shares =
10</font></b> <font color="#000000"># (or the desired number
of shares)</font></p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">to
the global section of your smb.conf. Members of the group
foo may then manipulate the user defined shares using the
following commands.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">net
usershare add sharename path [comment] [acl]
[guest_ok=[y|n]]</font></p>

<p style="margin-left:17%;"><font color="#000000">To create
or modify (overwrite) a user defined share.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">net
usershare delete sharename</font></p>

<p style="margin-left:17%;"><font color="#000000">To delete
a user defined share.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">net
usershare list wildcard&minus;sharename</font></p>

<p style="margin-left:17%;"><font color="#000000">To list
user defined shares.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">net
usershare info wildcard&minus;sharename</font></p>

<p style="margin-left:17%;"><font color="#000000">To print
information about user defined shares.</font></p>

<h2>PARAMETERS
<a name="PARAMETERS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Parameters
define the specific attributes of sections.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Some
parameters are specific to the [global] section (e.g.,
<i>security</i>). Some parameters are usable in all sections
(e.g., <i>create mask</i>). All others are permissible only
in normal sections. For the purposes of the following
descriptions the [homes] and [printers] sections will be
considered normal. The letter <i>G</i> in parentheses
indicates that a parameter is specific to the [global]
section. The letter <i>S</i> indicates that a parameter can
be specified in a service specific section. All <i>S</i>
parameters can also be specified in the [global] section
&minus; in which case they will define the default behavior
for all services.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Parameters
are arranged here in alphabetical order &minus; this may not
create best bedfellows, but at least you can find them!
Where there are synonyms, the preferred synonym is
described, others refer to the preferred synonym.</font></p>

<h2>VARIABLE SUBSTITUTIONS
<a name="VARIABLE SUBSTITUTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Many
of the strings that are settable in the config file can take
substitutions. For example the option &ldquo;path =
/tmp/%u&rdquo; is interpreted as &ldquo;path =
/tmp/john&rdquo; if the user connected with the username
john.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">These
substitutions are mostly noted in the descriptions below,
but there are some general substitutions which apply
whenever they might be relevant. These are:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%U</font></p>

<p style="margin-left:17%;"><font color="#000000">session
username (the username that the client wanted, not
necessarily the same as the one they got).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%G</font></p>

<p style="margin-left:17%;"><font color="#000000">primary
group name of %U.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%h</font></p>

<p style="margin-left:17%;"><font color="#000000">the
Internet hostname that Samba is running on.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%m</font></p>

<p style="margin-left:17%;"><font color="#000000">the
NetBIOS name of the client machine (very useful).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is not available when Samba listens on port 445,
as clients no longer send this information. If you use this
macro in an include statement on a domain that has a Samba
domain controller be sure to set in the [global] section
<i>smb ports = 139</i>. This will cause Samba to not listen
on port 445 and will permit include functionality to
function as it did with Samba 2.x.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%L</font></p>

<p style="margin-left:17%;"><font color="#000000">the
NetBIOS name of the server. This allows you to change your
config based on what the client calls you. Your server can
have a &ldquo;dual personality&rdquo;.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%M</font></p>

<p style="margin-left:17%;"><font color="#000000">the
Internet name of the client machine.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%R</font></p>

<p style="margin-left:17%;"><font color="#000000">the
selected protocol level after protocol negotiation. It can
be one of CORE, COREPLUS, LANMAN1, LANMAN2, NT1, SMB2_02,
SMB2_10, SMB2_22, SMB2_24, SMB3_00, SMB3_02, SMB3_10,
SMB3_11 or SMB2_FF.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%d</font></p>

<p style="margin-left:17%;"><font color="#000000">the
process id of the current server process.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%a</font></p>

<p style="margin-left:17%;"><font color="#000000">The
architecture of the remote machine. It currently recognizes
Samba (<b>Samba</b>), the Linux CIFS file system
(<b>CIFSFS</b>), OS/2, (<b>OS2</b>), Mac OS X (<b>OSX</b>),
Windows for Workgroups (<b>WfWg</b>), Windows 9x/ME
(<b>Win95</b>), Windows NT (<b>WinNT</b>), Windows 2000
(<b>Win2K</b>), Windows XP (<b>WinXP</b>), Windows XP
64&minus;bit(<b>WinXP64</b>), Windows 2003 including 2003R2
(<b>Win2K3</b>), and Windows Vista (<b>Vista</b>). Anything
else will be known as <b>UNKNOWN</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%I</font></p>

<p style="margin-left:17%;"><font color="#000000">the IP
address of the client machine.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Before
4.0.0 it could contain IPv4 mapped IPv6 addresses, now it
only contains IPv4 or IPv6 addresses.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%i</font></p>

<p style="margin-left:17%;"><font color="#000000">the local
IP address to which a client connected.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Before
4.0.0 it could contain IPv4 mapped IPv6 addresses, now it
only contains IPv4 or IPv6 addresses.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%T</font></p>

<p style="margin-left:17%;"><font color="#000000">the
current date and time.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%D</font></p>

<p style="margin-left:17%;"><font color="#000000">name of
the domain or workgroup of the current user.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%w</font></p>

<p style="margin-left:17%;"><font color="#000000">the
winbind separator.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%$(<i>envvar</i>)</font></p>

<p style="margin-left:17%;"><font color="#000000">the value
of the environment variable <i>envar</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
following substitutes apply only to some configuration
options (only those that are used when a connection has been
established):</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%S</font></p>

<p style="margin-left:17%;"><font color="#000000">the name
of the current service, if any.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%P</font></p>

<p style="margin-left:17%;"><font color="#000000">the root
directory of the current service, if any.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%u</font></p>

<p style="margin-left:17%;"><font color="#000000">username
of the current service, if any.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%g</font></p>

<p style="margin-left:17%;"><font color="#000000">primary
group name of %u.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%H</font></p>

<p style="margin-left:17%;"><font color="#000000">the home
directory of the user given by %u.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%N</font></p>

<p style="margin-left:17%;"><font color="#000000">the name
of your NIS home directory server. This is obtained from
your NIS auto.map entry. If you have not compiled Samba with
the <i>&minus;&minus;with&minus;automount</i> option, this
value will be the same as %L.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">%p</font></p>

<p style="margin-left:17%;"><font color="#000000">the path
of the service's home directory, obtained from your NIS
auto.map entry. The NIS auto.map entry is split up as
%N:%p.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">There
are some quite creative things that can be done with these
substitutions and other smb.conf options.</font></p>

<h2>NAME MANGLING
<a name="NAME MANGLING"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Samba
supports name mangling so that DOS and Windows clients can
use files that don't conform to the 8.3 format. It can also
be set to adjust the case of 8.3 format
filenames.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">There
are several options that control the way mangling is
performed, and they are grouped here rather than listed
separately. For the defaults look at the output of the
testparm program.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">These
options can be set separately for each service.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
options are:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">case
sensitive = yes/no/auto</font></p>

<p style="margin-left:17%;"><font color="#000000">controls
whether filenames are case sensitive. If they aren't, Samba
must do a filename search and match on passed names. The
default setting of auto allows clients that support case
sensitive filenames (Linux CIFSVFS and smbclient 3.0.5 and
above currently) to tell the Samba server on a
per&minus;packet basis that they wish to access the file
system in a case&minus;sensitive manner (to support UNIX
case sensitive semantics). No Windows or DOS system supports
case&minus;sensitive filename so setting this option to auto
is that same as setting it to no for them. Default
<i>auto</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">default
case = upper/lower</font></p>

<p style="margin-left:17%;"><font color="#000000">controls
what the default case is for new filenames (ie. files that
don't currently exist in the filesystem). Default
<i>lower</i>. IMPORTANT NOTE: As part of the optimizations
for directories containing large numbers of files, the
following special case applies. If the options</font>
<b><font color="#0000FF">case sensitive =
yes</font></b><font color="#000000">,</font>
<b><font color="#0000FF">preserve case =
No</font></b><font color="#000000">, and</font>
<b><font color="#0000FF">short preserve case = No</font></b>
<font color="#000000">are set, then the case of <i>all</i>
incoming client filenames, not just new filenames, will be
modified. See additional notes below.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">preserve
case = yes/no</font></p>

<p style="margin-left:17%;"><font color="#000000">controls
whether new files (ie. files that don't currently exist in
the filesystem) are created with the case that the client
passes, or if they are forced to be the default case.
Default <i>yes</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">short
preserve case = yes/no</font></p>

<p style="margin-left:17%;"><font color="#000000">controls
if new files (ie. files that don't currently exist in the
filesystem) which conform to 8.3 syntax, that is all in
upper case and of suitable length, are created upper case,
or if they are forced to be the default case. This option
can be used with preserve case = yes to permit long
filenames to retain their case, while short names are
lowercased. Default <i>yes</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">By
default, Samba 3.0 has the same semantics as a Windows NT
server, in that it is case insensitive but case preserving.
As a special case for directories with large numbers of
files, if the case options are set as follows, &quot;case
sensitive = yes&quot;, &quot;case preserve = no&quot;,
&quot;short preserve case = no&quot; then the &quot;default
case&quot; option will be applied and will modify all
filenames sent from the client when accessing this
share.</font></p>

<h2>REGISTRY-BASED CONFIGURATION
<a name="REGISTRY-BASED CONFIGURATION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Starting
with Samba version 3.2.0, the capability to store Samba
configuration in the registry is available. The
configuration is stored in the registry key
<i>HKLM\Software\Samba\smbconf</i>. There are two levels of
registry configuration:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">1.
Share definitions stored in registry are used. This is
triggered by setting the global parameter <i>registry
shares</i> to &ldquo;yes&rdquo; in
<i>smb.conf</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
registry shares are loaded not at startup but on demand at
runtime by <i>smbd</i>. Shares defined in <i>smb.conf</i>
take priority over shares of the same name defined in
registry.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">2.
Global <i>smb.conf</i> options stored in registry are used.
This can be activated in two different ways:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Firstly,
a registry only configuration is triggered by setting</font>
<b><font color="#0000FF">config backend =
registry</font></b> <font color="#000000">in the [global]
section of <i>smb.conf</i>. This resets everything that has
been read from config files to this point and reads the
content of the global configuration section from the
registry. This is the recommended method of using registry
based configuration.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Secondly,
a mixed configuration can be activated by a special new
meaning of the parameter</font>
<b><font color="#0000FF">include = registry</font></b>
<font color="#000000">in the [global] section of
<i>smb.conf</i>. This reads the global options from registry
with the same priorities as for an include of a text file.
This may be especially useful in cases where an initial
configuration is needed to access the registry.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Activation
of global registry options automatically activates registry
shares. So in the registry only case, shares are loaded on
demand only.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note:
To make registry&minus;based configurations foolproof at
least to a certain extent, the use of <i>lock directory</i>
and <i>config backend</i> inside the registry configuration
has been disabled: Especially by changing the <i>lock
directory</i> inside the registry configuration, one would
create a broken setup where the daemons do not see the
configuration they loaded once it is active.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
registry configuration can be accessed with tools like
<i>regedit</i> or <i>net (rpc) registry</i> in the key
<i>HKLM\Software\Samba\smbconf</i>. More conveniently, the
<i>conf</i> subcommand of the <b>net</b>(8) utility offers a
dedicated interface to read and write the registry based
configuration locally, i.e. directly accessing the database
file, circumventing the server.</font></p>

<h2>EXPLANATION OF EACH PARAMETER
<a name="EXPLANATION OF EACH PARAMETER"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">bind
interfaces only (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
global parameter allows the Samba admin to limit what
interfaces on a machine will serve SMB requests. It affects
file service <b>smbd</b>(8) and name service <b>nmbd</b>(8)
in a slightly different ways.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
name service it causes nmbd to bind to ports 137 and 138 on
the interfaces listed in the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter. nmbd also binds to the
&quot;all addresses&quot; interface (0.0.0.0) on ports 137
and 138 for the purposes of reading broadcast messages. If
this option is not set then nmbd will service name requests
on all of these sockets. If</font>
<b><font color="#0000FF">bind interfaces only</font></b>
<font color="#000000">is set then nmbd will check the source
address of any packets coming in on the broadcast sockets
and discard any that don't match the broadcast addresses of
the interfaces in the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter list. As unicast packets are
received on the other sockets it allows nmbd to refuse to
serve names to machines that send packets that arrive
through any interfaces not listed in the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">list. IP Source address spoofing does
defeat this simple check, however, so it must not be used
seriously as a security feature for nmbd.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
file service it causes <b>smbd</b>(8) to bind only to the
interface list given in the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter. This restricts the networks
that smbd will serve, to packets coming in on those
interfaces. Note that you should not use this parameter for
machines that are serving PPP or other intermittent or
non&minus;broadcast network interfaces as it will not cope
with non&minus;permanent interfaces.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If</font>
<b><font color="#0000FF">bind interfaces only</font></b>
<font color="#000000">is set and the network address
<i>127.0.0.1</i> is not added to the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter list <b>smbpasswd</b>(8) may
not work as expected due to the reasons covered
below.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">To
change a users SMB password, the smbpasswd by default
connects to the <i>localhost &minus; 127.0.0.1</i> address
as an SMB client to issue the password change request.
If</font> <b><font color="#0000FF">bind interfaces
only</font></b> <font color="#000000">is set then unless the
network address <i>127.0.0.1</i> is added to the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter list then smbpasswd will
fail to connect in it's default mode. smbpasswd can be
forced to use the primary IP interface of the local host by
using its <b>smbpasswd</b>(8)<i>&minus;r remote machine</i>
parameter, with <i>remote machine</i> set to the IP name of
the primary interface of the local host.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>bind interfaces only = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">comment
(S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a text field that is seen next to a share when a client
does a queries the server, either via the network
neighborhood or via net view to list what shares are
available.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
you want to set the string that is displayed next to the
machine name then see the</font>
<b><font color="#0000FF">server string</font></b>
<font color="#000000">parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>comment = # No comment</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>comment = Fred's Files</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">config
backend (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls the backend for storing the configuration. Possible
values are <i>file</i> (the default) and <i>registry</i>.
When</font> <b><font color="#0000FF">config backend =
registry</font></b> <font color="#000000">is encountered
while loading <i>smb.conf</i>, the configuration read so far
is dropped and the global options are read from registry
instead. So this triggers a registry only configuration.
Share definitions are not read immediately but instead
<i>registry shares</i> is set to <i>yes</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note:
This option can not be set inside the registry configuration
itself.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>config backend = file</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>config backend = registry</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">dos
charset (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DOS
SMB clients assume the server has the same charset as they
do. This option specifies which charset Samba should talk to
DOS clients.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
default depends on which charsets you have installed. Samba
tries to use charset 850 but falls back to ASCII in case it
is not available. Run <b>testparm</b>(1) to check the
default on your system.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>No
default</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">enable
core files (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies whether core dumps should be written on
internal exits. Normally set to <b>yes</b>. You should never
need to change this.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>enable core files = yes</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>enable core files = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">interfaces
(G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option allows you to override the default network interfaces
list that Samba will use for browsing, name registration and
other NetBIOS over TCP/IP (NBT) traffic. By default Samba
will query the kernel for the list of all active interfaces
and use any interfaces except 127.0.0.1 that are broadcast
capable.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
option takes a list of interface strings. Each string can be
in any of the following forms:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
a network interface name (such as eth0). This may include
shell&minus;like wildcards so eth* will match any interface
starting with the substring &quot;eth&quot;</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
an IP address. In this case the netmask is determined from
the list of interfaces obtained from the kernel</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
an IP/mask pair.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
a broadcast/mask pair.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
&quot;mask&quot; parameters can either be a bit length (such
as 24 for a C class network) or a full netmask in dotted
decimal form.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
&quot;IP&quot; parameters above can either be a full dotted
decimal IP address or a hostname which will be looked up via
the OS's normal hostname resolution mechanisms.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">By
default Samba enables all active interfaces that are
broadcast capable except the loopback adaptor (IP address
127.0.0.1).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">In
order to support SMB3 multi&minus;channel configurations,
smbd understands some extra data that can be appended after
the actual interface with this extended syntax:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">interface[;key1=value1[,key2=value2[...]]]</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Known
keys are speed, capability, and if_index. Speed is specified
in bits per second. Known capabilities are RSS and RDMA. The
if_index should be used with care: the values must not
coincide with indexes used by the kernel. Note that these
options are mainly intended for testing and development
rather than for production use. At least on Linux systems,
these values should be auto&minus;detected, but the settings
can serve as last a resort when autodetection is not working
or is not available.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
example below configures three network interfaces
corresponding to the eth0 device and IP addresses
192.168.2.10 and 192.168.3.10. The netmasks of the latter
two interfaces would be set to 255.255.255.0.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Default:
<i>interfaces =</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Example:
<i>interfaces = eth0 192.168.2.10/24
192.168.3.10/255.255.255.0</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">multicast
dns register (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
compiled with proper support for it, Samba will announce
itself with multicast DNS services like for example provided
by the Avahi daemon.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter allows disabling Samba to register
itself.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>multicast dns register = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">netbios
aliases (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a list of NetBIOS names that nmbd will advertise as
additional names by which the Samba server is known. This
allows one machine to appear in browse lists under multiple
names. If a machine is acting as a browse server or logon
server none of these names will be advertised as either
browse server or logon servers, only the primary name of the
machine will be advertised with these
capabilities.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>netbios aliases = # empty string (no additional
names)</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>netbios aliases = TEST TEST1 TEST2</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">netbios
name (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
sets the NetBIOS name by which a Samba server is known. By
default it is the same as the first component of the host's
DNS name. If a machine is a browse server or logon server
this name (or the first component of the hosts DNS name)
will be the name that these services are advertised
under.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that the maximum length for a NetBIOS name is 15
charactars.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">There
is a bug in Samba that breaks operation of browsing and
access to shares if the netbios name is set to the literal
name PIPE. To avoid this problem, do not name your Samba
server PIPE.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>netbios name = # machine DNS name</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>netbios name = MYNAME</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">netbios
scope (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
sets the NetBIOS scope that Samba will operate under. This
should not be set unless every machine on your LAN also sets
this value.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>netbios scope =</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">directory</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is a synonym for path.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">path
(S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies a directory to which the user of the
service is to be given access. In the case of printable
services, this is where print data will spool prior to being
submitted to the host for printing.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
a printable service offering guest access, the service
should be readonly and the path should be
world&minus;writeable and have the sticky bit set. This is
not mandatory of course, but you probably won't get the
results you expect if you do otherwise.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Any
occurrences of <i>%u</i> in the path will be replaced with
the UNIX username that the client is using on this
connection. Any occurrences of <i>%m</i> will be replaced by
the NetBIOS name of the machine they are connecting from.
These replacements are very useful for setting up pseudo
home directories for users.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this path will be based on</font>
<b><font color="#0000FF">root dir</font></b>
<font color="#000000">if one was specified.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>path =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>path = /home/fred</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">realm
(G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option specifies the kerberos realm to use. The realm is
used as the ADS equivalent of the NT4 domain. It is usually
set to the DNS name of the kerberos server.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>realm =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>realm = mysambabox.mycompany.com</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">server
services (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option contains the services that the Samba daemon will
run.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">An
entry in the smb.conf file can either override the previous
value completely or entries can be removed from or added to
it by prefixing them with <b>+</b> or
<b>&minus;</b>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>server services = s3fs, rpc, nbt, wrepl, ldap, cldap,
kdc, drepl, winbindd, ntp_signd, kcc, dnsupdate,
dns</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>server services = &minus;s3fs, +smb</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">server
string (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls what string will show up in the printer comment box
in print manager and next to the IPC connection in net view.
It can be any string that you wish to show to your
users.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">It
also sets what will appear in browse lists next to the
machine name.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
<i>%v</i> will be replaced with the Samba version
number.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
<i>%h</i> will be replaced with the hostname.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>server string = Samba %v</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>server string = University of GNUs Samba
Server</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">share
backend (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option specifies the backend that will be used to access the
configuration of file shares.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Traditionally,
Samba file shares have been configured in the
<b>smb.conf</b> file and this is still the
default.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">At
the moment there are no other supported backends.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>share backend = classic</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">unix
charset (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Specifies
the charset the unix machine Samba runs on uses. Samba needs
to know this in order to be able to convert text to the
charsets other SMB clients use.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is also the charset Samba will use when specifying arguments
to scripts that it invokes.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>unix charset = UTF&minus;8</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>unix charset = ASCII</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">workgroup
(G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls what workgroup your server will appear to be in
when queried by clients. Note that this parameter also
controls the Domain name used with the</font>
<b><font color="#0000FF">security = domain</font></b>
<font color="#000000">setting.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>workgroup = WORKGROUP</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>workgroup = MYGROUP</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">administrative
share (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this parameter is set to <b>yes</b> for a share, then the
share will be an administrative share. The Administrative
Shares are the default network shares created by all Windows
NT&minus;based operating systems. These are shares like C$,
D$ or ADMIN$. The type of these shares is
STYPE_DISKTREE_HIDDEN.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the section below on</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">for more information about this
option.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>administrative share = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">browsable</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is a synonym for browseable.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">browseable
(S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether this share is seen in the list of available
shares in a net view and in the browse list.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>browseable = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">browse
list (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether <b>smbd</b>(8) will serve a browse list to
a client doing a NetServerEnum call. Normally set to
<b>yes</b>. You should never need to change this.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>browse list = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">domain
master (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Tell
<b>smbd</b>(8) to enable WAN&minus;wide browse list
collation. Setting this option causes nmbd to claim a
special domain specific NetBIOS name that identifies it as a
domain master browser for its given</font>
<b><font color="#0000FF">workgroup</font></b><font color="#000000">.
Local master browsers in the same</font>
<b><font color="#0000FF">workgroup</font></b>
<font color="#000000">on broadcast&minus;isolated subnets
will give this nmbd their local browse lists, and then ask
<b>smbd</b>(8) for a complete copy of the browse list for
the whole wide area network. Browser clients will then
contact their local master browser, and will receive the
domain&minus;wide browse list, instead of just the list for
their broadcast&minus;isolated subnet.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that Windows NT Primary Domain Controllers expect to be able
to claim this</font>
<b><font color="#0000FF">workgroup</font></b>
<font color="#000000">specific special NetBIOS name that
identifies them as domain master browsers for that</font>
<b><font color="#0000FF">workgroup</font></b>
<font color="#000000">by default (i.e. there is no way to
prevent a Windows NT PDC from attempting to do this). This
means that if this parameter is set and nmbd claims the
special name for a</font>
<b><font color="#0000FF">workgroup</font></b>
<font color="#000000">before a Windows NT PDC is able to do
so then cross subnet browsing will behave strangely and may
fail.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If</font>
<b><font color="#0000FF">domain logons =
yes</font></b><font color="#000000">, then the default
behavior is to enable the</font>
<b><font color="#0000FF">domain master</font></b>
<font color="#000000">parameter. If</font>
<b><font color="#0000FF">domain logons</font></b>
<font color="#000000">is not enabled (the default setting),
then neither will</font> <b><font color="#0000FF">domain
master</font></b> <font color="#000000">be enabled by
default.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When</font>
<b><font color="#0000FF">domain logons = Yes</font></b>
<font color="#000000">the default setting for this parameter
is Yes, with the result that Samba will be a PDC. If</font>
<b><font color="#0000FF">domain master =
No</font></b><font color="#000000">, Samba will function as
a BDC. In general, this parameter should be set to 'No' only
on a BDC.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>domain master = auto</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">enhanced
browsing (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option enables a couple of enhancements to
cross&minus;subnet browse propagation that have been added
in Samba but which are not standard in Microsoft
implementations.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
first enhancement to browse propagation consists of a
regular wildcard query to a Samba WINS server for all Domain
Master Browsers, followed by a browse synchronization with
each of the returned DMBs. The second enhancement consists
of a regular randomised browse synchronization with all
currently known DMBs.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">You
may wish to disable this option if you have a problem with
empty workgroups not disappearing from browse lists. Due to
the restrictions of the browse protocols, these enhancements
can cause a empty workgroup to stay around forever which can
be annoying.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">In
general you should leave this option enabled as it makes
cross&minus;subnet browse propagation much more
reliable.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>enhanced browsing = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">lm
announce (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter determines if <b>nmbd</b>(8) will produce Lanman
announce broadcasts that are needed by OS/2 clients in order
for them to see the Samba server in their browse list. This
parameter can have three values, <b>yes</b>, <b>no</b>, or
<b>auto</b>. The default is <b>auto</b>. If set to <b>no</b>
Samba will never produce these broadcasts. If set to
<b>yes</b> Samba will produce Lanman announce broadcasts at
a frequency set by the parameter</font>
<b><font color="#0000FF">lm
interval</font></b><font color="#000000">. If set to
<b>auto</b> Samba will not send Lanman announce broadcasts
by default but will listen for them. If it hears such a
broadcast on the wire it will then start sending them at a
frequency set by the parameter</font>
<b><font color="#0000FF">lm
interval</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>lm announce = auto</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>lm announce = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">lm
interval (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
Samba is set to produce Lanman announce broadcasts needed by
OS/2 clients (see the</font> <b><font color="#0000FF">lm
announce</font></b> <font color="#000000">parameter) then
this parameter defines the frequency in seconds with which
they will be made. If this is set to zero then no Lanman
announcements will be made despite the setting of the</font>
<b><font color="#0000FF">lm announce</font></b>
<font color="#000000">parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>lm interval = 60</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>lm interval = 120</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">local
master (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option allows <b>nmbd</b>(8) to try and become a local
master browser on a subnet. If set to <b>no</b> then nmbd
will not attempt to become a local master browser on a
subnet and will also lose in all browsing elections. By
default this value is set to <b>yes</b>. Setting this value
to <b>yes</b> doesn't mean that Samba will <i>become</i> the
local master browser on a subnet, just that nmbd will
<i>participate</i> in elections for local master
browser.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Setting
this value to <b>no</b> will cause nmbd<i>never</i> to
become a local master browser.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>local master = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">os
level (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
integer value controls what level Samba advertises itself as
for browse elections. The value of this parameter determines
whether <b>nmbd</b>(8) has a chance of becoming a local
master browser for the</font>
<b><font color="#0000FF">workgroup</font></b>
<font color="#000000">in the local broadcast
area.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>Note:</i>
By default, Samba will win a local master browsing election
over all Microsoft operating systems except a Windows NT
4.0/2000 Domain Controller. This means that a misconfigured
Samba host can effectively isolate a subnet for browsing
purposes. This parameter is largely auto&minus;configured in
the Samba&minus;3 release series and it is seldom necessary
to manually override the default setting. Please refer to
the chapter on Network Browsing in the Samba&minus;3 HOWTO
document for further information regarding the use of this
parameter. <i>Note:</i> The maximum value for this parameter
is 255. If you use higher values, counting will start at
0!</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>os level = 20</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>os level = 65</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">prefered
master</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is a synonym for preferred master.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">preferred
master (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
boolean parameter controls if <b>nmbd</b>(8) is a preferred
master browser for its workgroup.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this is set to <b>yes</b>, on startup, nmbd will force an
election, and it will have a slight advantage in winning the
election. It is recommended that this parameter is used in
conjunction with</font> <b><font color="#0000FF">domain
master = yes</font></b><font color="#000000">, so that nmbd
can guarantee becoming a domain master.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Use
this option with caution, because if there are several hosts
(whether Samba servers, Windows 95 or NT) that are preferred
master browsers on the same subnet, they will each
periodically and continuously attempt to become the local
master browser. This will result in unnecessary broadcast
traffic and reduced browsing capabilities.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>preferred master = auto</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">allow
dns updates (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option determines what kind of updates to the DNS are
allowed.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DNS
updates can either be disallowed completely by setting it to
<b>disabled</b>, enabled over secure connections only by
setting it to <b>secure only</b> or allowed in all cases by
setting it to <b>nonsecure</b>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>allow dns updates = secure only</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>allow dns updates = disabled</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">dns
forwarder (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option specifies the DNS server that DNS requests will be
forwarded to if they can not be handled by Samba
itself.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
DNS forwarder is only used if the internal DNS server in
Samba is used.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>dns forwarder =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>dns forwarder = 192.168.0.1</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">dns
update command (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option sets the command that is called when there are DNS
updates. It should update the local machines DNS names using
TSIG&minus;GSS.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>dns update command =
/builddir/build/BUILD/samba&minus;4.4.4/source4/scripting/bin/samba_dnsupdate</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>dns update command =
/usr/local/sbin/dnsupdate</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">machine
password timeout (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
a Samba server is a member of a Windows NT or Active
Directory Domain (see the</font>
<b><font color="#0000FF">security = domain</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">security = ads</font></b>
<font color="#000000">parameters), then periodically a
running winbindd process will try and change the MACHINE
ACCOUNT PASSWORD stored in the TDB called secrets.tdb. This
parameter specifies how often this password will be changed,
in seconds. The default is one week (expressed in seconds),
the same as a Windows NT Domain member server.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
also <b>smbpasswd</b>(8), and the</font>
<b><font color="#0000FF">security = domain</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">security = ads</font></b>
<font color="#000000">parameters.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>machine password timeout = 604800</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">nsupdate
command (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option sets the path to the nsupdate command which is used
for GSS&minus;TSIG dynamic DNS updates.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>nsupdate command = /usr/bin/nsupdate
&minus;g</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">rndc
command (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option specifies the path to the name server control
utility.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
rndc utility should be a part of the bind
installation.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>rndc command = /usr/sbin/rndc</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>rndc command = /usr/local/bind9/sbin/rndc</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">spn
update command (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option sets the command that for updating
servicePrincipalName names from spn_update_list.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>spn update command =
/builddir/build/BUILD/samba&minus;4.4.4/source4/scripting/bin/samba_spnupdate</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>spn update command =
/usr/local/sbin/spnupdate</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">casesignames</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is a synonym for case sensitive.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">case
sensitive (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the discussion in the section</font>
<b><font color="#0000FF">name
mangling</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>case sensitive = auto</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">default
case (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the section on</font> <b><font color="#0000FF">name
mangling</font></b><font color="#000000">. Also note
the</font> <b><font color="#0000FF">short preserve
case</font></b> <font color="#000000">parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>default case = lower</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">delete
veto files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option is used when Samba is attempting to delete a
directory that contains one or more vetoed directories (see
the</font> <b><font color="#0000FF">veto files</font></b>
<font color="#000000">option). If this option is set to
<b>no</b> (the default) then if a vetoed directory contains
any non&minus;vetoed files or directories then the directory
delete will fail. This is usually what you want.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this option is set to <b>yes</b>, then Samba will attempt to
recursively delete any files and directories within the
vetoed directory. This can be useful for integration with
file serving systems such as NetAtalk which create
meta&minus;files within directories you might normally veto
DOS/Windows users from seeing (e.g. .AppleDouble)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Setting</font>
<b><font color="#0000FF">delete veto files = yes</font></b>
<font color="#000000">allows these directories to be
transparently deleted when the parent directory is deleted
(so long as the user has permissions to do so).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>delete veto files = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">hide
dot files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a boolean parameter that controls whether files starting
with a dot appear as hidden files.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>hide dot files = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">hide
files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a list of files or directories that are not visible but
are accessible. The DOS 'hidden' attribute is applied to any
files or directories that match.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Each
entry in the list must be separated by a '/', which allows
spaces to be included in the entry. '*' and '?' can be used
to specify multiple files or directories as in DOS
wildcards.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Each
entry must be a Unix path, not a DOS path and must not
include the Unix directory separator '/'.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that the case sensitivity option is applicable in hiding
files.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Setting
this parameter will affect the performance of Samba, as it
will be forced to check all files and directories for a
match as they are scanned.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
example shown above is based on files that the Macintosh SMB
client (DAVE) available from Thursby creates for internal
use, and also still hides all files beginning with a
dot.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">An
example of us of this parameter is:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">hide
files =
/.*/DesktopFolderDB/TrashFor%m/resource.frk/</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>hide files = # no file are hidden</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">hide
special files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter prevents clients from seeing special files such as
sockets, devices and fifo's in directory
listings.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>hide special files = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">hide
unreadable (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter prevents clients from seeing the existance of
files that cannot be read. Defaults to off.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Please
note that enabling this can slow down listing large
directories significantly. Samba has to evaluate the ACLs of
all directory members, which can be a lot of
effort.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>hide unreadable = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">hide
unwriteable files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter prevents clients from seeing the existance of
files that cannot be written to. Defaults to off. Note that
unwriteable directories are shown as usual.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Please
note that enabling this can slow down listing large
directories significantly. Samba has to evaluate the ACLs of
all directory members, which can be a lot of
effort.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>hide unwriteable files = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">mangled
names (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether non&minus;DOS names under UNIX should be
mapped to DOS&minus;compatible names (&quot;mangled&quot;)
and made visible, or whether non&minus;DOS names should
simply be ignored.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the section on</font> <b><font color="#0000FF">name
mangling</font></b> <font color="#000000">for details on how
to control the mangling process.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
mangling is used then the mangling method is as
follows:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
The first (up to) five alphanumeric characters before the
rightmost dot of the filename are preserved, forced to upper
case, and appear as the first (up to) five characters of the
mangled name.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
A tilde &quot;~&quot; is appended to the first part of the
mangled name, followed by a two&minus;character unique
sequence, based on the original root name (i.e., the
original filename minus its final extension). The final
extension is included in the hash calculation only if it
contains any upper case characters or is longer than three
characters.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">Note
that the character to use may be specified using the</font>
<b><font color="#0000FF">mangling char</font></b>
<font color="#000000">option, if you don't like
'~'.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
Files whose UNIX name begins with a dot will be presented as
DOS hidden files. The mangled name will be created as for
other filenames, but with the leading dot removed and
&quot;___&quot; as its extension regardless of actual
original extension (that's three underscores).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
two&minus;digit hash value consists of upper case
alphanumeric characters.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
algorithm can cause name collisions only if files in a
directory share the same first five alphanumeric characters.
The probability of such a clash is 1/1300.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
name mangling (if enabled) allows a file to be copied
between UNIX directories from Windows/DOS while retaining
the long UNIX filename. UNIX files can be renamed to a new
extension from Windows/DOS and will retain the same
basename. Mangled names do not change between
sessions.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Default:
<i>mangled names = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">mangle
prefix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">controls
the number of prefix characters from the original name used
when generating the mangled names. A larger value will give
a weaker hash and therefore more name collisions. The
minimum value is 1 and the maximum value is 6.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">mangle
prefix is effective only when mangling method is
hash2.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>mangle prefix = 1</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>mangle prefix = 4</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">mangling
char (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls what character is used as the <i>magic</i>
character in</font> <b><font color="#0000FF">name
mangling</font></b><font color="#000000">. The default is a
'~' but this may interfere with some software. Use this
option to set it to whatever you prefer. This is effective
only when mangling method is hash.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>mangling char = ~</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>mangling char = ^</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">mangling
method (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">controls
the algorithm used for the generating the mangled names. Can
take two different values, &quot;hash&quot; and
&quot;hash2&quot;. &quot;hash&quot; is the algorithm that
was used in Samba for many years and was the default in
Samba 2.2.x &quot;hash2&quot; is now the default and is
newer and considered a better algorithm (generates less
collisions) in the names. Many Win32 applications store the
mangled names and so changing to algorithms must not be done
lightly as these applications may break unless
reinstalled.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>mangling method = hash2</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>mangling method = hash</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">map
archive (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether the DOS archive attribute should be mapped
to the UNIX owner execute bit. The DOS archive bit is set
when a file has been modified since its last backup. One
motivation for this option is to keep Samba/your PC from
making any file it touches from becoming executable under
UNIX. This can be quite annoying for shared source code,
documents, etc...</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this parameter will be ignored if the</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">parameter is set, as the DOS archive
attribute will then be stored inside a UNIX extended
attribute.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this requires the</font>
<b><font color="#0000FF">create mask</font></b>
<font color="#000000">parameter to be set such that owner
execute bit is not masked out (i.e. it must include 100).
See the parameter</font> <b><font color="#0000FF">create
mask</font></b> <font color="#000000">for
details.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>map archive = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">map
hidden (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether DOS style hidden files should be mapped to
the UNIX world execute bit.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this parameter will be ignored if the</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">parameter is set, as the DOS hidden
attribute will then be stored inside a UNIX extended
attribute.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this requires the</font>
<b><font color="#0000FF">create mask</font></b>
<font color="#000000">to be set such that the world execute
bit is not masked out (i.e. it must include 001). See the
parameter</font> <b><font color="#0000FF">create
mask</font></b> <font color="#000000">for
details.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>map hidden = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">map
readonly (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls how the DOS read only attribute should be mapped
from a UNIX filesystem.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter can take three different values, which tell
<b>smbd</b>(8) how to display the read only attribute on
files, where either</font> <b><font color="#0000FF">store
dos attributes</font></b> <font color="#000000">is set to
<b>No</b>, or no extended attribute is present. If</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">is set to <b>yes</b> then this
parameter is <i>ignored</i>. This is a new parameter
introduced in Samba version 3.0.21.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
three settings are :</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<b>Yes</b> &minus; The read only DOS attribute is mapped to
the inverse of the user or owner write bit in the unix
permission mode set. If the owner write bit is not set, the
read only attribute is reported as being set on the file. If
the read only DOS attribute is set, Samba sets the owner,
group and others write bits to zero. Write bits set in an
ACL are ignored by Samba. If the read only DOS attribute is
unset, Samba simply sets the write bit of the owner to
one.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<b>Permissions</b> &minus; The read only DOS attribute is
mapped to the effective permissions of the connecting user,
as evaluated by <b>smbd</b>(8) by reading the unix
permissions and POSIX ACL (if present). If the connecting
user does not have permission to modify the file, the read
only attribute is reported as being set on the
file.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<b>No</b> &minus; The read only DOS attribute is unaffected
by permissions, and can only be set by the</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">method. This may be useful for
exporting mounted CDs.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note
that this parameter will be ignored if the</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">parameter is set, as the DOS
'read&minus;only' attribute will then be stored inside a
UNIX extended attribute.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Default:
<i>map readonly = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">map
system (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether DOS style system files should be mapped to
the UNIX group execute bit.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this parameter will be ignored if the</font>
<b><font color="#0000FF">store dos attributes</font></b>
<font color="#000000">parameter is set, as the DOS system
attribute will then be stored inside a UNIX extended
attribute.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that this requires the</font>
<b><font color="#0000FF">create mask</font></b>
<font color="#000000">to be set such that the group execute
bit is not masked out (i.e. it must include 010). See the
parameter</font> <b><font color="#0000FF">create
mask</font></b> <font color="#000000">for
details.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>map system = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">max
stat cache size (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter limits the size in memory of any <i>stat cache</i>
being used to speed up case insensitive name mappings. It
represents the number of kilobyte (1024) units the stat
cache can use. A value of zero, meaning unlimited, is not
advisable due to increased memory usage. You should not need
to change this parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>max stat cache size = 256</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>max stat cache size = 100</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">preserve
case (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls if new filenames are created with the case that the
client passes, or if they are forced to be the</font>
<b><font color="#0000FF">default
case</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the section on NAME MANGLING for a fuller
discussion.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>preserve case = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">short
preserve case (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
boolean parameter controls if new files which conform to 8.3
syntax, that is all in upper case and of suitable length,
are created upper case, or if they are forced to be
the</font> <b><font color="#0000FF">default
case</font></b><font color="#000000">. This option can be
use with</font> <b><font color="#0000FF">preserve case =
yes</font></b> <font color="#000000">to permit long
filenames to retain their case, while short names are
lowered.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
the section on NAME MANGLING.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>short preserve case = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">stat
cache (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter determines if <b>smbd</b>(8) will use a cache in
order to speed up case insensitive name mappings. You should
never need to change this parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>stat cache = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">store
dos attributes (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this parameter is set Samba attempts to first read DOS
attributes (SYSTEM, HIDDEN, ARCHIVE or READ&minus;ONLY) from
a filesystem extended attribute, before mapping DOS
attributes to UNIX permission bits (such as occurs
with</font> <b><font color="#0000FF">map hidden</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">map
readonly</font></b><font color="#000000">). When set, DOS
attributes will be stored onto an extended attribute in the
UNIX filesystem, associated with the file or directory. When
this parameter is set it will override the parameters</font>
<b><font color="#0000FF">map
hidden</font></b><font color="#000000">,</font>
<b><font color="#0000FF">map
system</font></b><font color="#000000">,</font>
<b><font color="#0000FF">map archive</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">map readonly</font></b>
<font color="#000000">and they will behave as if they were
set to off. This parameter writes the DOS attributes as a
string into the extended attribute named
&quot;user.DOSATTRIB&quot;. This extended attribute is
explicitly hidden from smbd clients requesting an EA list.
On Linux the filesystem must have been mounted with the
mount option user_xattr in order for extended attributes to
work, also extended attributes must be compiled into the
Linux kernel. In Samba 3.5.0 and above the
&quot;user.DOSATTRIB&quot; extended attribute has been
extended to store the create time for a file as well as the
DOS attributes. This is done in a backwards compatible way
so files created by Samba 3.5.0 and above can still have the
DOS attribute read from this extended attribute by earlier
versions of Samba, but they will not be able to read the
create time stored there. Storing the create time separately
from the normal filesystem meta&minus;data allows Samba to
faithfully reproduce NTFS semantics on top of a POSIX
filesystem.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>store dos attributes = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">veto
files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a list of files and directories that are neither visible
nor accessible. Each entry in the list must be separated by
a '/', which allows spaces to be included in the entry. '*'
and '?' can be used to specify multiple files or directories
as in DOS wildcards.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Each
entry must be a unix path, not a DOS path and must
<i>not</i> include the unix directory separator
'/'.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that the</font> <b><font color="#0000FF">case
sensitive</font></b> <font color="#000000">option is
applicable in vetoing files.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">One
feature of the veto files parameter that it is important to
be aware of is Samba's behaviour when trying to delete a
directory. If a directory that is to be deleted contains
nothing but veto files this deletion will <i>fail</i> unless
you also set the</font> <b><font color="#0000FF">delete veto
files</font></b> <font color="#000000">parameter to
<i>yes</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Setting
this parameter will affect the performance of Samba, as it
will be forced to check all files and directories for a
match as they are scanned.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Examples
of use include:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">;
Veto any files containing the word Security, <br>
; any ending in .tmp, and any directory containing the <br>
; word root. <br>
veto files = /*Security*/*.tmp/*root*/</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">;
Veto the Apple specific files that a NetAtalk server <br>
; creates. <br>
veto files = /.AppleDouble/.bin/.AppleDesktop/Network Trash
Folder/</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>veto files = # No files or directories are
vetoed</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">veto
oplock files (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is only valid when the</font>
<b><font color="#0000FF">oplocks</font></b>
<font color="#000000">parameter is turned on for a share. It
allows the Samba administrator to selectively turn off the
granting of oplocks on selected files that match a
wildcarded list, similar to the wildcarded list used in
the</font> <b><font color="#0000FF">veto files</font></b>
<font color="#000000">parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">You
might want to do this on files that you know will be heavily
contended for by clients. A good example of this is in the
NetBench SMB benchmark program, which causes heavy client
contention for files ending in .SEM. To cause Samba not to
grant oplocks on these files you would use the line (either
in the [global] section or in the section for the particular
NetBench share.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">An
example of use is:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">veto
oplock files = /.*SEM/</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>veto oplock files = # No files are vetoed for oplock
grants</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">client
ldap sasl wrapping (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">client ldap sasl
wrapping</font></b> <font color="#000000">defines whether
ldap traffic will be signed or signed and encrypted
(sealed). Possible values are <i>plain</i>, <i>sign</i> and
<i>seal</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
values <i>sign</i> and <i>seal</i> are only available if
Samba has been compiled against a modern OpenLDAP version
(2.3.x or higher).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option is needed in the case of Domain Controllers enforcing
the usage of signed LDAP connections (e.g. Windows 2000 SP3
or higher). LDAP sign and seal can be controlled with the
registry key
&quot;HKLM\System\CurrentControlSet\Services\NTDS\Parameters\LDAPServerIntegrity&quot;
on the Windows server side.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Depending
on the used KRB5 library (MIT and older Heimdal versions) it
is possible that the message &quot;integrity only&quot; is
not supported. In this case, <i>sign</i> is just an alias
for <i>seal</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
default value is <i>sign</i>. That implies synchronizing the
time with the KDC in the case of using
<i>Kerberos</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>client ldap sasl wrapping = sign</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
admin dn (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">ldap admin dn</font></b>
<font color="#000000">defines the Distinguished Name (DN)
name used by Samba to contact the ldap server when
retreiving user account information. The</font>
<b><font color="#0000FF">ldap admin dn</font></b>
<font color="#000000">is used in conjunction with the admin
dn password stored in the private/secrets.tdb file. See the
<b>smbpasswd</b>(8) man page for more information on how to
accomplish this.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">ldap admin dn</font></b>
<font color="#000000">requires a fully specified DN.
The</font> <b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">is not appended to the</font>
<b><font color="#0000FF">ldap admin
dn</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><i>No
default</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
connection timeout (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter tells the LDAP library calls which timeout in
seconds they should honor during initial connection
establishments to LDAP servers. It is very useful in
failover scenarios in particular. If one or more LDAP
servers are not reachable at all, we do not have to wait
until TCP timeouts are over. This feature must be supported
by your LDAP library.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is different from</font>
<b><font color="#0000FF">ldap timeout</font></b>
<font color="#000000">which affects operations on LDAP
servers using an existing connection and not establishing an
initial connection.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap connection timeout = 2</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
delete dn (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies whether a delete operation in the
ldapsam deletes the complete entry or only the attributes
specific to Samba.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap delete dn = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
deref (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option controls whether Samba should tell the LDAP library
to use a certain alias dereferencing method. The default is
<i>auto</i>, which means that the default setting of the
ldap client library will be kept. Other possible values are
<i>never</i>, <i>finding</i>, <i>searching</i> and
<i>always</i>. Grab your LDAP manual for more
information.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap deref = auto</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap deref = searching</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
follow referral (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option controls whether to follow LDAP referrals or not when
searching for entries in the LDAP database. Possible values
are <i>on</i> to enable following referrals, <i>off</i> to
disable this, and <i>auto</i>, to use the libldap default
settings. libldap's choice of following referrals or not is
set in /etc/openldap/ldap.conf with the REFERRALS parameter
as documented in ldap.conf(5).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap follow referral = auto</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap follow referral = off</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
group suffix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies the suffix that is used for groups when
these are added to the LDAP directory. If this parameter is
unset, the value of</font> <b><font color="#0000FF">ldap
suffix</font></b> <font color="#000000">will be used
instead. The suffix string is pre&minus;pended to the</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">string so use a partial DN.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap group suffix =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap group suffix = ou=Groups</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
idmap suffix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameters specifies the suffix that is used when storing
idmap mappings. If this parameter is unset, the value
of</font> <b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">will be used instead. The suffix
string is pre&minus;pended to the</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">string so use a partial DN.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap idmap suffix =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap idmap suffix = ou=Idmap</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
machine suffix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">It
specifies where machines should be added to the ldap tree.
If this parameter is unset, the value of</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">will be used instead. The suffix
string is pre&minus;pended to the</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">string so use a partial DN.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap machine suffix =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap machine suffix = ou=Computers</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
page size (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies the number of entries per
page.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
the LDAP server supports paged results, clients can request
subsets of search results (pages) instead of the entire
list. This parameter specifies the size of these
pages.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap page size = 1000</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap page size = 512</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
password sync</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter is a synonym for ldap passwd sync.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
passwd sync (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option is used to define whether or not Samba should sync
the LDAP password with the NT and LM hashes for normal
accounts (NOT for workstation, server or domain trusts) on a
password change via SAMBA.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">ldap passwd sync</font></b>
<font color="#000000">can be set to one of three
values:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<i>Yes</i> = Try to update the LDAP, NT and LM passwords and
update the pwdLastSet time.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<i>No</i> = Update NT and LM passwords and update the
pwdLastSet time.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<i>Only</i> = Only update the LDAP password and let the LDAP
server do the rest.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Default:
<i>ldap passwd sync = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
replication sleep (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
Samba is asked to write to a read&minus;only LDAP replica,
we are redirected to talk to the read&minus;write master
server. This server then replicates our changes back to the
'local' server, however the replication might take some
seconds, especially over slow links. Certain client
activities, particularly domain joins, can become confused
by the 'success' that does not immediately change the LDAP
back&minus;end's data.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option simply causes Samba to wait a short time, to allow
the LDAP server to catch up. If you have a particularly
high&minus;latency network, you may wish to time the LDAP
replication with a network sniffer, and increase this value
accordingly. Be aware that no checking is performed that the
data has actually replicated.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
value is specified in milliseconds, the maximum value is
5000 (5 seconds).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap replication sleep = 1000</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldapsam:editposix
(G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Editposix
is an option that leverages ldapsam:trusted to make it
simpler to manage a domain controller eliminating the need
to set up custom scripts to add and manage the posix users
and groups. This option will instead directly manipulate the
ldap tree to create, remove and modify user and group
entries. This option also requires a running winbindd as it
is used to allocate new uids/gids on user/group creation.
The allocation range must be therefore
configured.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">To
use this option, a basic ldap tree must be provided and the
ldap suffix parameters must be properly configured. On
virgin servers the default users and groups (Administrator,
Guest, Domain Users, Domain Admins, Domain Guests) can be
precreated with the command net sam provision. To run this
command the ldap server must be running, Winbindd must be
running and the smb.conf ldap options must be properly
configured. The typical ldap setup used with the</font>
<b><font color="#0000FF">ldapsam:trusted = yes</font></b>
<font color="#000000">option is usually sufficient to
use</font> <b><font color="#0000FF">ldapsam:editposix =
yes</font></b> <font color="#000000">as well.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">An
example configuration can be the following:</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">encrypt passwords =
true</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">passdb backend =
ldapsam</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldapsam:trusted=yes</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldapsam:editposix=yes</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap admin dn =
cn=admin,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap delete dn = yes</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap group suffix =
ou=groups</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap idmap suffix =
ou=idmap</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap machine suffix =
ou=computers</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap user suffix =
ou=users</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ldap suffix =
dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">idmap backend =
ldap:&quot;ldap://localhost&quot;</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">idmap uid =
5000&minus;50000</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">idmap gid =
5000&minus;50000</font></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
configuration assumes a directory layout like described in
the following ldif:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">dn:
dc=samba,dc=org</font></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: top</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: dcObject</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organization</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">o: samba.org</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dc: samba</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dn:
cn=admin,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
simpleSecurityObject</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organizationalRole</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">cn: admin</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">description: LDAP
administrator</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">userPassword: secret</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dn:
ou=users,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: top</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organizationalUnit</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ou: users</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dn:
ou=groups,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: top</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organizationalUnit</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ou: groups</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dn:
ou=idmap,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: top</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organizationalUnit</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ou: idmap</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">dn:
ou=computers,dc=samba,dc=org</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass: top</font></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">objectClass:
organizationalUnit</font></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><font color="#000000">ou: computers</font></p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldapsam:editposix = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldapsam:trusted
(G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">By
default, Samba as a Domain Controller with an LDAP backend
needs to use the Unix&minus;style NSS subsystem to access
user and group information. Due to the way Unix stores user
information in /etc/passwd and /etc/group this inevitably
leads to inefficiencies. One important question a user needs
to know is the list of groups he is member of. The plain
UNIX model involves a complete enumeration of the file
/etc/group and its NSS counterparts in LDAP. UNIX has
optimized functions to enumerate group membership. Sadly,
other functions that are used to deal with user and group
attributes lack such optimization.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">To
make Samba scale well in large environments, the</font>
<b><font color="#0000FF">ldapsam:trusted = yes</font></b>
<font color="#000000">option assumes that the complete user
and group database that is relevant to Samba is stored in
LDAP with the standard posixAccount/posixGroup attributes.
It further assumes that the Samba auxiliary object classes
are stored together with the POSIX data in the same LDAP
object. If these assumptions are met,</font>
<b><font color="#0000FF">ldapsam:trusted = yes</font></b>
<font color="#000000">can be activated and Samba can bypass
the NSS system to query user group memberships. Optimized
LDAP queries can greatly speed up domain logon and
administration tasks. Depending on the size of the LDAP
database a factor of 100 or more for common queries is
easily achieved.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldapsam:trusted = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
server require strong auth (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">ldap server require strong
auth</font></b> <font color="#000000">defines whether the
ldap server requires ldap traffic to be signed or signed and
encrypted (sealed). Possible values are <i>no</i>,
<i>allow_sasl_over_tls</i> and <i>yes</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
value of <i>no</i> allows simple and sasl binds over all
transports.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
value of <i>allow_sasl_over_tls</i> allows simple and sasl
binds (without sign or seal) over TLS encrypted connections.
Unencrypted connections only allow sasl binds with sign or
seal.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
value of <i>yes</i> allows only simple binds over TLS
encrypted connections. Unencrypted connections only allow
sasl binds with sign or seal.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap server require strong auth = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
ssl (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option is used to define whether or not Samba should use SSL
when connecting to the ldap server This is <i>NOT</i>
related to Samba's previous SSL support which was enabled by
specifying the &minus;&minus;with&minus;ssl option to the
configure script.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">LDAP
connections should be secured where possible. This may be
done setting <i>either</i> this parameter to
<i>Start_tlsor</i> by specifying <i>ldaps://</i> in the URL
argument of</font> <b><font color="#0000FF">passdb
backend</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The</font>
<b><font color="#0000FF">ldap ssl</font></b>
<font color="#000000">can be set to one of two
values:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<i>Off</i> = Never use SSL when querying the
directory.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">&bull;
<i>start tls</i> = Use the LDAPv3 StartTLS extended
operation (RFC2830) for communicating with the directory
server.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Please
note that this parameter does only affect <i>rpc</i>
methods. To enable the LDAPv3 StartTLS extended operation
(RFC2830) for <i>ads</i>, set</font>
<b><font color="#0000FF">ldap ssl =
yes</font></b><i><font color="#000000">and</font></i><b><font color="#0000FF">ldap
ssl ads = yes</font></b><font color="#000000">. See
smb.conf(5) for more information on</font>
<b><font color="#0000FF">ldap ssl
ads</font></b><font color="#000000">.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Default:
<i>ldap ssl = start tls</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
ssl ads (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option is used to define whether or not Samba should use SSL
when connecting to the ldap server using <i>ads</i> methods.
Rpc methods are not affected by this parameter. Please note,
that this parameter won't have any effect if</font>
<b><font color="#0000FF">ldap ssl</font></b>
<font color="#000000">is set to <i>no</i>.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">See
smb.conf(5) for more information on</font>
<b><font color="#0000FF">ldap
ssl</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap ssl ads = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
suffix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Specifies
the base for all ldap suffixes and for storing the
sambaDomain object.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
ldap suffix will be appended to the values specified for
the</font> <b><font color="#0000FF">ldap user
suffix</font></b><font color="#000000">,</font>
<b><font color="#0000FF">ldap group
suffix</font></b><font color="#000000">,</font>
<b><font color="#0000FF">ldap machine
suffix</font></b><font color="#000000">, and the</font>
<b><font color="#0000FF">ldap idmap
suffix</font></b><font color="#000000">. Each of these
should be given only a DN relative to the</font>
<b><font color="#0000FF">ldap
suffix</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap suffix =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap suffix = dc=samba,dc=org</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
timeout (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter defines the number of seconds that Samba should
use as timeout for LDAP operations.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap timeout = 15</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ldap
user suffix (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter specifies where users are added to the tree. If
this parameter is unset, the value of</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">will be used instead. The suffix
string is pre&minus;pended to the</font>
<b><font color="#0000FF">ldap suffix</font></b>
<font color="#000000">string so use a partial DN.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>ldap user suffix =</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>ldap user suffix = ou=people</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">blocking
locks (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter controls the behavior of <b>smbd</b>(8) when given
a request by a client to obtain a byte range lock on a
region of an open file, and the request has a time limit
associated with it.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this parameter is set and the lock range requested cannot be
immediately satisfied, samba will internally queue the lock
request, and periodically attempt to obtain the lock until
the timeout period expires.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
this parameter is set to <b>no</b>, then samba will behave
as previous versions of Samba would and will fail the lock
request immediately if the lock range cannot be
obtained.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>blocking locks = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">csc
policy (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
stands for <i>client&minus;side caching policy</i>, and
specifies how clients capable of offline caching will cache
the files in the share. The valid values are: manual,
documents, programs, disable.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">These
values correspond to those used on Windows
servers.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
example, shares containing roaming profiles can have offline
caching disabled using</font> <b><font color="#0000FF">csc
policy =
disable</font></b><font color="#000000">.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>csc policy = manual</i></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Example:
<i>csc policy = programs</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">fake
oplocks (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Oplocks
are the way that SMB clients get permission from a server to
locally cache file operations. If a server grants an oplock
(opportunistic lock) then the client is free to assume that
it is the only one accessing the file and it will
aggressively cache file data. With some oplock types the
client may even cache file open/close operations. This can
give enormous performance benefits.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">When
you set fake oplocks = yes, <b>smbd</b>(8) will always grant
oplock requests no matter how many clients are using the
file.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">It
is generally much better to use the real</font>
<b><font color="#0000FF">oplocks</font></b>
<font color="#000000">support rather than this
parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
you enable this option on all read&minus;only shares or
shares that you know will only be accessed from one client
at a time such as physically read&minus;only media like
CDROMs, you will see a big performance improvement on many
operations. If you enable this option on shares where
multiple clients may be accessing the files read&minus;write
at the same time you can get data corruption. Use this
option carefully!</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>fake oplocks = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">kernel
oplocks (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
UNIXes that support kernel based</font>
<b><font color="#0000FF">oplocks</font></b>
<font color="#000000">(currently only IRIX and the Linux 2.4
kernel), this parameter allows the use of them to be turned
on or off. However, this disables Level II oplocks for
clients as the Linux and IRIX kernels do not support them
properly.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Kernel
oplocks support allows Samba <i>oplocks</i> to be broken
whenever a local UNIX process or NFS operation accesses a
file that <b>smbd</b>(8) has oplocked. This allows complete
data consistency between SMB/CIFS, NFS and local file access
(and is a <i>very</i> cool feature :&minus;).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
you do not need this interaction, you should disable the
parameter on Linux and IRIX to get Level II oplocks and the
associated performance benefit.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter defaults to <b>no</b> and is translated to a
no&minus;op on systems that do not have the necessary kernel
support.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>kernel oplocks = no</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">kernel
share modes (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter controls whether SMB share modes are translated
into UNIX flocks.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Kernel
share modes provide a minimal level of interoperability with
local UNIX processes and NFS operations by preventing access
with flocks corresponding to the SMB share modes. Generally,
it is very desirable to leave this enabled.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Note
that in order to use SMB2 durable file handles on a share,
you have to turn kernel share modes off.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter defaults to <b>yes</b> and is translated to a
no&minus;op on systems that do not have the necessary kernel
flock support.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>kernel share modes = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">level2
oplocks (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
parameter controls whether Samba supports level2
(read&minus;only) oplocks on a share.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Level2,
or read&minus;only oplocks allow Windows NT clients that
have an oplock on a file to downgrade from a
read&minus;write oplock to a read&minus;only oplock once a
second client opens the file (instead of releasing all
oplocks on a second open, as in traditional, exclusive
oplocks). This allows all openers of the file that support
level2 oplocks to cache the file for read&minus;ahead only
(ie. they may not cache writes or lock requests) and
increases performance for many accesses of files that are
not commonly written (such as application .EXE
files).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Once
one of the clients which have a read&minus;only oplock
writes to the file all clients are notified (no reply is
needed or waited for) and told to break their oplocks to
&quot;none&quot; and delete any read&minus;ahead
caches.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">It
is recommended that this parameter be turned on to speed
access to shared executables.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
more discussions on level2 oplocks see the CIFS
spec.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Currently,
if</font> <b><font color="#0000FF">kernel oplocks</font></b>
<font color="#000000">are supported then level2 oplocks are
not granted (even if this parameter is set to <b>yes</b>).
Note also, the</font>
<b><font color="#0000FF">oplocks</font></b>
<font color="#000000">parameter must be set to <b>yes</b> on
this share in order for this parameter to have any
effect.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>level2 oplocks = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">locking
(S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
controls whether or not locking will be performed by the
server in response to lock requests from the
client.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
locking = no, all lock and unlock requests will appear to
succeed and all lock queries will report that the file in
question is available for locking.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
locking = yes, real locking will be performed by the
server.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
option <i>may</i> be useful for read&minus;only filesystems
which <i>may</i> not need locking (such as CDROM drives),
although setting this parameter of <b>no</b> is not really
recommended even in this case.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Be
careful about disabling locking either globally or in a
specific service, as lack of locking may result in data
corruption. You should never need to set this
parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>locking = yes</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">lock
spin time (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
time in milliseconds that smbd should keep waiting to see if
a failed lock request can be granted. This parameter has
changed in default value from Samba 3.0.23 from 10 to 200.
The associated</font> <b><font color="#0000FF">lock spin
count</font></b> <font color="#000000">parameter is no
longer used in Samba 3.0.24. You should not need to change
the value of this parameter.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Default:
<i>lock spin time = 200</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">oplock
break wait time (G)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is a tuning parameter added due to bugs in both Windows 9x
and WinNT. If Samba responds to a client too quickly when
that client issues an SMB that can cause an oplock break
request, then the network client can fail and not respond to
the break request. This tuning parameter (which is set in
milliseconds) is the amount of time Samba will wait before
sending an oplock break request to such (broken)
clients.</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000"><b><big>Warning</big></b>
<br>
DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE READ AND
UNDERSTOOD THE SAMBA OPLOCK CODE.</font></p>

<p style="margin-left:17%;"><font color="#000000">Default:
<i>oplock break wait time = 0</i></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">oplock
contention limit (S)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><big>This
is a <i>very</i> advanced <b>smbd</b>(8) tuning option to
improve the efficiency of the granting of oplocks under
multiple client contention for the same
file.</big></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><big>In
brief it specifies a number, which causes <b>smbd</b>(8)not
to grant an oplock even when requested if the approximate
number of clients contending for an oplock on the same file
goes over this limit. This causes smbd to behave in a
similar way to Windows NT.</big></font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000"><big><b><big>Warning</big></b>
<br>
DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE READ AND
UNDERSTOOD THE SAMBA OPLOCK CODE.</big></font></p>


<p style="margin-left:17%;"><font color="#000000"><big>Default:
<i>oplock contention limit = 2</i></big></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><big>oplocks
(S)</big></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><big><big>This
boolean option tells smbd whether to issue oplocks
(opportunistic locks) to file open requests on this share.
The oplock code can dramatically (approx. 30% or more)
improve the speed of access to files on Samba servers. It
allows the clients to aggressively cache files locally and
you may want to disable this option for unreliable network
environments (it is turned on by default in Windows NT
Servers).</big></big></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000"><big><big>Oplocks
may be selectively turned off on certain files with a share.
See the</big></big></font>
<big><big><b><font color="#0000FF">veto oplock
files</font></b> <font color="#000000">parameter. On some
systems oplocks are recognized by the underlying operating
system. This allows data synchronization between all access
to oplocked files, whether it be via Samba or NFS or a local
UNIX process. See the</font> <b><font color="#0000FF">kernel
oplocks</font></b> <font color="#000000">parameter for
details.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>oplocks = yes</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">posix
locking (S)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
<b>smbd</b>(8) daemon maintains an database of file locks
obtained by SMB clients. The default behavior is to map this
internal database to POSIX locks. This means that file locks
obtained by SMB clients are consistent with those seen by
POSIX compliant applications accessing the files via a
non&minus;SMB method (e.g. NFS or local file access). It is
very unlikely that you need to set this parameter to
&quot;no&quot;, unless you are sharing from an NFS mount,
which is not a good idea in the first
place.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>posix locking = yes</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">smb2
leases (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
boolean option tells smbd whether to globally negotiate SMB2
leases on file open requests. Leasing is an SMB2&minus;only
feature which allows clients to aggressively cache files
locally above and beyond the caching allowed by SMB1
oplocks. This (experimental) parameter is set to off by
default until the SMB2 leasing code is declared fully
stable.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is only available with</font>
<b><font color="#0000FF">oplocks = yes</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">kernel oplocks =
no</font></b><font color="#000000">.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that the write cache won't be used for file handles with a
smb2 write lease.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
Samba implementation of leases is currently marked as
experimental!</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>smb2 leases = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">strict
locking (S)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is an enumerated type that controls the handling of file
locking in the server. When this is set to <b>yes</b>, the
server will check every read and write access for file
locks, and deny access if locks exist. This can be slow on
some systems.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">When
strict locking is set to Auto (the default), the server
performs file lock checks only on non&minus;oplocked files.
As most Windows redirectors perform file locking checks
locally on oplocked files this is a good trade off for
improved performance.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">When
strict locking is disabled, the server performs file lock
checks only when the client explicitly asks for
them.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Well&minus;behaved
clients always ask for lock checks when it is important. So
in the vast majority of cases, strict locking = Auto or
strict locking = no is acceptable.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>strict locking = Auto</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
class (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">With
this boolean parameter enabled, the debug class (DBGC_CLASS)
will be displayed in the debug
header.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">For
more information about currently available debug classes,
see section about</font> <b><font color="#0000FF">log
level</font></b><font color="#000000">.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>debug class = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
hires timestamp (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Sometimes
the timestamps in the log messages are needed with a
resolution of higher that seconds, this boolean parameter
adds microsecond resolution to the timestamp message header
when turned on.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that the parameter</font> <b><font color="#0000FF">debug
timestamp</font></b> <font color="#000000">must be on for
this to have an effect.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>debug hires timestamp = yes</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
pid (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">When
using only one log file for more then one forked
<b>smbd</b>(8)&minus;process there may be hard to follow
which process outputs which message. This boolean parameter
is adds the process&minus;id to the timestamp message
headers in the logfile when turned
on.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that the parameter</font> <b><font color="#0000FF">debug
timestamp</font></b> <font color="#000000">must be on for
this to have an effect.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>debug pid = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
prefix timestamp (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">With
this option enabled, the timestamp message header is
prefixed to the debug message without the filename and
function information that is included with the</font>
<b><font color="#0000FF">debug timestamp</font></b>
<font color="#000000">parameter. This gives timestamps to
the messages without adding an additional
line.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that this parameter overrides the</font>
<b><font color="#0000FF">debug timestamp</font></b>
<font color="#000000">parameter.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>debug prefix timestamp = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
uid (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Samba
is sometimes run as root and sometime run as the connected
user, this boolean parameter inserts the current euid, egid,
uid and gid to the timestamp message headers in the log file
if turned on.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that the parameter</font> <b><font color="#0000FF">debug
timestamp</font></b> <font color="#000000">must be on for
this to have an effect.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>debug uid = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">ldap
debug level (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter controls the debug level of the LDAP library
calls. In the case of OpenLDAP, it is the same
bit&minus;field as understood by the server and documented
in the <b>slapd.conf</b>(5) manpage. A typical useful value
will be <i>1</i> for tracing function
calls.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
debug output from the LDAP libraries appears with the prefix
[LDAP] in Samba's logging output. The level at which LDAP
logging is printed is controlled by the parameter <i>ldap
debug threshold</i>.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>ldap debug level = 0</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>ldap debug level = 1</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">ldap
debug threshold (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter controls the Samba debug level at which the ldap
library debug output is printed in the Samba logs. See the
description of <i>ldap debug level</i> for
details.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>ldap debug threshold = 10</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>ldap debug threshold = 5</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">log
file (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option allows you to override the name of the Samba log file
(also known as the debug file).</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option takes the standard substitutions, allowing you to
have separate log files for each user or
machine.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000"><i>No
default</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>log file =
/usr/local/samba/var/log.%m</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">logging
(G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter configures logging backends. Multiple backends can
be specified at the same time, with different log levels for
each backend. The parameter is a list of backends, where
each backend is specified as
backend[:option][@loglevel].</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
'option' parameter can be used to pass
backend&minus;specific options.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
log level for a backend is optional, if it is not set for a
backend, all messages are sent to this backend. The
parameter</font> <b><font color="#0000FF">log
level</font></b> <font color="#000000">determines overall
log levels, while the log levels specified here define what
is sent to the individual backends.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">When</font>
<b><font color="#0000FF">logging</font></b>
<font color="#000000">is set, it overrides the</font>
<b><font color="#0000FF">syslog</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">syslog only</font></b>
<font color="#000000">parameters.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Some
backends are only available when Samba has been compiled
with the additional libraries. The overall list of logging
backends:</font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>syslog</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>file</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>systemd</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>lttng</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>gpfs</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>logging =</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>logging = syslog@1 file</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debuglevel</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter is a synonym for log level.</font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">log
level (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
value of the parameter (a astring) allows the debug level
(logging level) to be specified in the smb.conf
file.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter has been extended since the 2.2.x series, now it
allows one to specify the debug level for multiple debug
classes. This is to give greater flexibility in the
configuration of the system. The following debug classes are
currently implemented:</font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>all</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>tdb</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>printdrivers</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>lanman</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>smb</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>rpc_parse</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>rpc_srv</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>rpc_cli</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>passdb</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>sam</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>auth</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>winbind</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>vfs</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>idmap</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>quota</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>acls</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>locking</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>msdfs</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>dmapi</i></font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">&bull;
<i>registry</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>log level = 0</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>log level = 3 passdb:5 auth:10
winbind:2</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">max
log size (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option (an integer in kilobytes) specifies the max size the
log file should grow to. Samba periodically checks the size
and if it is exceeded it will rename the file, adding a .old
extension.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">A
size of 0 means no limit.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>max log size = 5000</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>max log size = 1000</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">syslog
(G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter maps how Samba debug messages are logged onto the
system syslog logging levels. Samba debug level zero maps
onto syslog <b>LOG_ERR</b>, debug level one maps onto
<b>LOG_WARNING</b>, debug level two maps onto
<b>LOG_NOTICE</b>, debug level three maps onto LOG_INFO. All
higher levels are mapped to
<b>LOG_DEBUG</b>.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter sets the threshold for sending messages to syslog.
Only messages with debug level less than this value will be
sent to syslog. There still will be some logging to
log.[sn]mbd even if <i>syslog only</i> is
enabled.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The</font>
<b><font color="#0000FF">logging</font></b>
<font color="#000000">parameter should be used instead.
When</font> <b><font color="#0000FF">logging</font></b>
<font color="#000000">is set, it overrides the</font>
<b><font color="#0000FF">syslog</font></b>
<font color="#000000">parameter.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>syslog = 1</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">syslog
only (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">If
this parameter is set then Samba debug messages are logged
into the system syslog only, and not to the debug log files.
There still will be some logging to log.[sn]mbd even if
<i>syslog only</i> is enabled.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The</font>
<b><font color="#0000FF">logging</font></b>
<font color="#000000">parameter should be used instead.
When</font> <b><font color="#0000FF">logging</font></b>
<font color="#000000">is set, it overrides the</font>
<b><font color="#0000FF">syslog only</font></b>
<font color="#000000">parameter.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>syslog only = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">debug
timestamp</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter is a synonym for timestamp
logs.</font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">timestamp
logs (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Samba
debug log messages are timestamped by default. If you are
running at a high</font> <b><font color="#0000FF">debug
level</font></b> <font color="#000000">these timestamps can
be distracting. This boolean parameter allows timestamping
to be turned off.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>timestamp logs = yes</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">abort
shutdown script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
a full path name to a script called by <b>smbd</b>(8) that
should stop a shutdown procedure issued by the</font>
<b><font color="#0000FF">shutdown
script</font></b><font color="#000000">.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">If
the connected user possesses the
<b>SeRemoteShutdownPrivilege</b>, right, this command will
be run as root.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>abort shutdown script =
&quot;&quot;</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>abort shutdown script = /sbin/shutdown
&minus;c</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">add
group script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is the full pathname to a script that will be run <i>AS
ROOT</i> by <b>smbd</b>(8) when a new group is requested. It
will expand any <i>%g</i> to the group name passed. This
script is only useful for installations using the Windows NT
domain administration tools. The script is free to create a
group with an arbitrary name to circumvent unix group name
restrictions. In that case the script must print the numeric
gid of the created group on stdout.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>add group script =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>add group script = /usr/sbin/groupadd
%g</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">add
machine script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is the full pathname to a script that will be run by
<b>smbd</b>(8) when a machine is added to Samba's domain and
a Unix account matching the machine's name appended with a
&quot;$&quot; does not already exist.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option is very similar to the</font>
<b><font color="#0000FF">add user
script</font></b><font color="#000000">, and likewise uses
the %u substitution for the account name. Do not use the %m
substitution.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>add machine script =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>add machine script = /usr/sbin/adduser &minus;n &minus;g
machines &minus;c Machine &minus;d /var/lib/nobody &minus;s
/bin/false %u</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">add
user script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is the full pathname to a script that will be run <i>AS
ROOT</i> by <b>smbd</b>(8) under special circumstances
described below.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Normally,
a Samba server requires that UNIX users are created for all
users accessing files on this server. For sites that use
Windows NT account databases as their primary user database
creating these users and keeping the user list in sync with
the Windows NT PDC is an onerous task. This option allows
smbd to create the required UNIX users <i>ON DEMAND</i> when
a user accesses the Samba server.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">When
the Windows user attempts to access the Samba server, at
login (session setup in the SMB protocol) time,
<b>smbd</b>(8) contacts the</font>
<b><font color="#0000FF">password server</font></b>
<font color="#000000">and attempts to authenticate the given
user with the given password. If the authentication succeeds
then smbd attempts to find a UNIX user in the UNIX password
database to map the Windows user into. If this lookup fails,
and</font> <b><font color="#0000FF">add user
script</font></b> <font color="#000000">is set then smbd
will call the specified script <i>AS ROOT</i>, expanding any
<i>%u</i> argument to be the user name to
create.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">If
this script successfully creates the user then smbd will
continue on as though the UNIX user already existed. In this
way, UNIX users are dynamically created to match existing
Windows NT accounts.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">See
also</font>
<b><font color="#0000FF">security</font></b><font color="#000000">,</font>
<b><font color="#0000FF">password
server</font></b><font color="#000000">,</font>
<b><font color="#0000FF">delete user
script</font></b><font color="#000000">.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>add user script =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>add user script = /usr/local/samba/bin/add_user
%u</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">add
user to group script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Full
path to the script that will be called when a user is added
to a group using the Windows NT domain administration tools.
It will be run by <b>smbd</b>(8)<i>AS ROOT</i>. Any
<i>%g</i> will be replaced with the group name and any
<i>%u</i> will be replaced with the user
name.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that the adduser command used in the example below does not
support the used syntax on all
systems.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>add user to group script =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>add user to group script = /usr/sbin/adduser %u
%g</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">allow
nt4 crypto (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option controls whether the netlogon server (currently only
in 'active directory domain controller' mode), will reject
clients which does not support NETLOGON_NEG_STRONG_KEYS nor
NETLOGON_NEG_SUPPORTS_AES.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option was added with Samba 4.2.0. It may lock out clients
which worked fine with Samba versions up to 4.1.x. as the
effective default was &quot;yes&quot; there, while it is
&quot;no&quot; now.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">If
you have clients without RequireStrongKey = 1 in the
registry, you may need to set &quot;allow nt4 crypto =
yes&quot;, until you have fixed all
clients.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">&quot;allow
nt4 crypto = yes&quot; allows weak crypto to be negotiated,
maybe via downgrade attacks.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option yields precedence to the 'reject md5 clients'
option.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>allow nt4 crypto = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">delete
group script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is the full pathname to a script that will be run <i>AS
ROOT</i><b>smbd</b>(8) when a group is requested to be
deleted. It will expand any <i>%g</i> to the group name
passed. This script is only useful for installations using
the Windows NT domain administration
tools.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>delete group script =</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">delete
user from group script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Full
path to the script that will be called when a user is
removed from a group using the Windows NT domain
administration tools. It will be run by <b>smbd</b>(8)<i>AS
ROOT</i>. Any <i>%g</i> will be replaced with the group name
and any <i>%u</i> will be replaced with the user
name.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>delete user from group script
=</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>delete user from group script = /usr/sbin/deluser %u
%g</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">delete
user script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
is the full pathname to a script that will be run by
<b>smbd</b>(8) when managing users with remote RPC (NT)
tools.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
script is called when a remote client removes a user from
the server, normally using 'User Manager for Domains' or
rpcclient.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
script should delete the given UNIX
username.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>delete user script =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>delete user script = /usr/local/samba/bin/del_user
%u</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">domain
logons (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">If
set to <b>yes</b>, the Samba server will provide the
netlogon service for Windows 9X network logons for
the</font> <b><font color="#0000FF">workgroup</font></b>
<font color="#000000">it is in. This will also cause the
Samba server to act as a domain controller for NT4 style
domain services. For more details on setting up this feature
see the Domain Control chapter of the Samba HOWTO
Collection.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>domain logons = no</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">enable
privileges (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
deprecated parameter controls whether or not smbd will honor
privileges assigned to specific SIDs via either net rpc
rights or one of the Windows user and group manager tools.
This parameter is enabled by default. It can be disabled to
prevent members of the Domain Admins group from being able
to assign privileges to users or groups which can then
result in certain smbd operations running as root that would
normally run under the context of the connected
user.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">An
example of how privileges can be used is to assign the right
to join clients to a Samba controlled domain without
providing root access to the server via
smbd.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Please
read the extended description provided in the Samba HOWTO
documentation.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>enable privileges = yes</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">init
logon delay (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter specifies a delay in milliseconds for the hosts
configured for delayed initial samlogon with</font>
<b><font color="#0000FF">init logon delayed
hosts</font></b><font color="#000000">.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>init logon delay = 100</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">init
logon delayed hosts (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter takes a list of host names, addresses or networks
for which the initial samlogon reply should be delayed (so
other DCs get preferred by XP workstations if there are
any).</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
length of the delay can be specified with the</font>
<b><font color="#0000FF">init logon delay</font></b>
<font color="#000000">parameter.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>init logon delayed hosts =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>init logon delayed hosts = 150.203.5.
myhost.mynet.de</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">logon
drive (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter specifies the local path to which the home
directory will be connected (see</font>
<b><font color="#0000FF">logon
home</font></b><font color="#000000">) and is only used by
NT Workstations.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that this option is only useful if Samba is set up as a
logon server.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>logon drive =</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>logon drive = h:</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">logon
home (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter specifies the home directory location when a
Win95/98 or NT Workstation logs into a Samba PDC. It allows
you to do</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">C:\&gt;<b>NET
USE H: /HOME</b></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">from
a command prompt, for example.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option takes the standard substitutions, allowing you to
have separate logon scripts for each user or
machine.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter can be used with Win9X workstations to ensure that
roaming profiles are stored in a subdirectory of the user's
home directory. This is done in the following
way:</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">logon
home = \\%N\%U\profile</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
tells Samba to return the above string, with substitutions
made when a client requests the info, generally in a
NetUserGetInfo request. Win9X clients truncate the info to
\\server\share when a user does net use /home but use the
whole string when dealing with
profiles.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Note
that in prior versions of Samba, the</font>
<b><font color="#0000FF">logon path</font></b>
<font color="#000000">was returned rather than <i>logon
home</i>. This broke net use /home but allowed profiles
outside the home directory. The current implementation is
correct, and can be used for profiles if you use the above
trick.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Disable
this feature by setting</font>
<b><font color="#0000FF">logon home =
&quot;&quot;</font></b> <font color="#000000">&minus; using
the empty string.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option is only useful if Samba is set up as a logon
server.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>logon home = \\%N\%U</i></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Example:
<i>logon home =
\\remote_smb_server\%U</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">logon
path (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
parameter specifies the directory where roaming profiles
(Desktop, NTuser.dat, etc) are stored. Contrary to previous
versions of these manual pages, it has nothing to do with
Win 9X roaming profiles. To find out how to handle roaming
profiles for Win 9X system, see the</font>
<b><font color="#0000FF">logon home</font></b>
<font color="#000000">parameter.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option takes the standard substitutions, allowing you to
have separate logon scripts for each user or machine. It
also specifies the directory from which the
&quot;Application Data&quot;, desktop, start menu, network
neighborhood, programs and other folders, and their
contents, are loaded and displayed on your Windows NT
client.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">The
share and the path must be readable by the user for the
preferences and directories to be loaded onto the Windows NT
client. The share must be writeable when the user logs in
for the first time, in order that the Windows NT client can
create the NTuser.dat and other directories. Thereafter, the
directories and any of the contents can, if required, be
made read&minus;only. It is not advisable that the
NTuser.dat file be made read&minus;only &minus; rename it to
NTuser.man to achieve the desired effect (a <i>MAN</i>datory
profile).</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Windows
clients can sometimes maintain a connection to the [homes]
share, even though there is no user logged in. Therefore, it
is vital that the logon path does not include a reference to
the homes share (i.e. setting this parameter to
\\%N\homes\profile_path will cause
problems).</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">This
option takes the standard substitutions, allowing you to
have separate logon scripts for each user or
machine.</font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000"><b><big>Warning</big></b>
<br>
Do not quote the value. Setting this as
&ldquo;\\%N\profile\%U&rdquo; will break profile handling.
Where the tdbsam or ldapsam passdb backend is used, at the
time the user account is created the value configured for
this parameter is written to the passdb backend and that
value will over&minus;ride the parameter value present in
the smb.conf file. Any error present in the passdb backend
account record must be editted using the appropriate tool
(pdbedit on the command&minus;line, or any other locally
provided system tool).</font></big></big></p>


<p style="margin-left:17%;"><big><big><font color="#000000">Note
that this option is only useful if Samba is set up as a
domain controller.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Disable
the use of roaming profiles by setting the value of this
parameter to the empty string. For example,</font>
<b><font color="#0000FF">logon path =
&quot;&quot;</font></b><font color="#000000">. Take note
that even if the default setting in the smb.conf file is the
empty string, any value specified in the user account
settings in the passdb backend will over&minus;ride the
effect of setting this parameter to null. Disabling of all
roaming profile use requires that the user account settings
must also be blank.</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">An
example of use is:</font></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><font color="#000000">logon
path = \\PROFILESERVER\PROFILE\%U</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000">Default:
<i>logon path = \\%N\%U\profile</i></font></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><font color="#000000">logon
script (G)</font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000"><big>This
parameter specifies the batch file (.bat) or NT command file
(.cmd) to be downloaded and run on a machine when a user
successfully logs in. The file must contain the DOS style
CR/LF line endings. Using a DOS&minus;style editor to create
the file is recommended.</big></font></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><font color="#000000"><big>The
script must be a relative path to the <i>[netlogon]</i>
service. If the [netlogon] service specifies a</big></font>
<big><b><font color="#0000FF">path</font></b>
<font color="#000000">of /usr/local/samba/netlogon,
and</font> <b><font color="#0000FF">logon script =
STARTUP.BAT</font></b><font color="#000000">, then the file
that will be downloaded is:</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">/usr/local/samba/netlogon/STARTUP.BAT</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
contents of the batch file are entirely your choice. A
suggested command would be to add NET TIME \\SERVER /SET
/YES, to force every machine to synchronize clocks with the
same time server. Another use would be to add NET USE U:
\\SERVER\UTILS for commonly used utilities,
or</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000"><b>NET
USE Q: \\SERVER\ISO9001_QA</b></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">for
example.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
that it is particularly important not to allow write access
to the [netlogon] share, or to grant users write permission
on the batch files in a secure environment, as this would
allow the batch files to be arbitrarily modified and
security to be breached.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option takes the standard substitutions, allowing you to
have separate logon scripts for each user or
machine.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option is only useful if Samba is set up as a logon
server.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>logon script =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>logon script =
scripts\%U.bat</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">reject
md5 clients (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option controls whether the netlogon server (currently only
in 'active directory domain controller' mode), will reject
clients which does not support
NETLOGON_NEG_SUPPORTS_AES.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">You
can set this to yes if all domain members support aes. This
will prevent downgrade attacks.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option takes precedence to the 'allow nt4 crypto'
option.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>reject md5 clients = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">set
primary group script (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Thanks
to the Posix subsystem in NT a Windows User has a primary
group in addition to the auxiliary groups. This script sets
the primary group in the unix user database when an
administrator sets the primary group from the windows user
manager or when fetching a SAM with net rpc vampire.
<i>%u</i> will be replaced with the user whose primary group
is to be set. <i>%g</i> will be replaced with the group to
set.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>set primary group script
=</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>set primary group script = /usr/sbin/usermod &minus;g
'%g' '%u'</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">shutdown
script (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
a full path name to a script called by <b>smbd</b>(8) that
should start a shutdown
procedure.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If
the connected user possesses the
<b>SeRemoteShutdownPrivilege</b>, right, this command will
be run as root.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
%z %t %r %f variables are expanded as
follows:</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>%z</i> will be substituted with the shutdown message sent
to the server.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>%t</i> will be substituted with the number of seconds to
wait before effectively starting the shutdown
procedure.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>%r</i> will be substituted with the switch
<i>&minus;r</i>. It means reboot after shutdown for
NT.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>%f</i> will be substituted with the switch
<i>&minus;f</i>. It means force the shutdown even if
applications do not respond for
NT.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Shutdown
script example:</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">#!/bin/bash</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">time=$2
<br>
let time=&quot;${time} / 60&quot; <br>
let time=&quot;${time} +
1&quot;</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">/sbin/shutdown
$3 $4 +$time $1 &amp;</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Shutdown
does not return so we need to launch it in
background.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>shutdown script =</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>shutdown script = /usr/local/samba/sbin/shutdown %m %t %r
%f</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">add
share command (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Samba
2.2.0 introduced the ability to dynamically add and delete
shares via the Windows NT 4.0 Server Manager. The <i>add
share command</i> is used to define an external program or
script which will add a new service definition to
smb.conf.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
order to successfully execute the <i>add share command</i>,
smbd requires that the administrator connects using a root
account (i.e. uid == 0) or has the SeDiskOperatorPrivilege.
Scripts defined in the <i>add share command</i> parameter
are executed as root.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">When
executed, smbd will automatically invoke the <i>add share
command</i> with five
parameters.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>configFile</i> &minus; the location of the global
smb.conf file.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>shareName</i> &minus; the name of the new
share.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>pathName</i> &minus; path to an **existing** directory on
disk.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>comment</i> &minus; comment string to associate with the
new share.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>max connections</i> Number of maximum simultaneous
connections to this share.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is only used to add file shares. To add printer
shares, see the</font> <b><font color="#0000FF">addprinter
command</font></b><font color="#000000">.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>add share command =</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>add share command =
/usr/local/bin/addshare</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">afs
share (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter controls whether special AFS features are enabled
for this share. If enabled, it assumes that the directory
exported via the <i>path</i> parameter is a local AFS
import. The special AFS features include the attempt to
hand&minus;craft an AFS token if you enabled
&minus;&minus;with&minus;fake&minus;kaserver in
configure.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>afs share = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">afs
token lifetime (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter controls the lifetime of tokens that the AFS
fake&minus;kaserver claims. In reality these never expire
but this lifetime controls when the afs client will forget
the token.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Set
this parameter to 0 to get
<b>NEVERDATE</b>.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>afs token lifetime =
604800</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">afs
username map (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If
you are using the fake kaserver AFS feature, you might want
to hand&minus;craft the usernames you are creating tokens
for. For example this is necessary if you have users from
several domain in your AFS Protection Database. One possible
scheme to code users as DOMAIN+User as it is done by winbind
with the + as a separator.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
mapped user name must contain the cell name to log into, so
without setting this parameter there will be no
token.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>afs username map =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>afs username map =
%u@afs.samba.org</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">allow
insecure wide links (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
normal operation the option</font>
<b><font color="#0000FF">wide links</font></b>
<font color="#000000">which allows the server to follow
symlinks outside of a share path is automatically disabled
when</font> <b><font color="#0000FF">unix
extensions</font></b> <font color="#000000">are enabled on a
Samba server. This is done for security purposes to prevent
UNIX clients creating symlinks to areas of the server file
system that the administrator does not wish to
export.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Setting</font>
<b><font color="#0000FF">allow insecure wide
links</font></b> <font color="#000000">to true disables the
link between these two parameters, removing this protection
and allowing a site to configure the server to follow
symlinks (by setting</font> <b><font color="#0000FF">wide
links</font></b> <font color="#000000">to &quot;true&quot;)
even when</font> <b><font color="#0000FF">unix
extensions</font></b> <font color="#000000">is turned
on.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If
is not recommended to enable this option unless you fully
understand the implications of allowing the server to follow
symbolic links created by UNIX clients. For most normal
Samba configurations this would be considered a security
hole and setting this parameter is not
recommended.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option was added at the request of sites who had
deliberately set Samba up in this way and needed to continue
supporting this functionality without having to patch the
Samba code.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>allow insecure wide links =
no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">async
smb echo handler (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies whether Samba should fork the async smb
echo handler. It can be beneficial if your file system can
block syscalls for a very long time. In some circumstances,
it prolongs the timeout that Windows uses to determine
whether a connection is dead.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>async smb echo handler =
no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">preload</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is a synonym for auto
services.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">auto
services (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
is a list of services that you want to be automatically
added to the browse lists. This is most useful for homes and
printers services that would otherwise not be
visible.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
that if you just want all printers in your printcap file
loaded then the</font> <b><font color="#0000FF">load
printers</font></b> <font color="#000000">option is
easier.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>auto services =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>auto services = fred lp
colorlp</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">available
(S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter lets you &quot;turn off&quot; a service. If
<i>available = no</i>, then <i>ALL</i> attempts to connect
to the service will fail. Such failures are
logged.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>available = yes</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">cache
directory (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Usually,
most of the TDB files are stored in the <i>lock
directory</i>. Since Samba 3.4.0, it is possible to
differentiate between TDB files with persistent data and TDB
files with non&minus;persistent data using the <i>state
directory</i> and the <i>cache directory</i>
options.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option specifies the directory where TDB files containing
non&minus;persistent data will be
stored.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>cache directory =
/var/lib/samba</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>cache directory =
/var/run/samba/locks/cache</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">change
notify (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies whether Samba should reply to a client's
file change notify requests.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">You
should never need to change this
parameter</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>change notify = yes</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">change
share command (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Samba
2.2.0 introduced the ability to dynamically add and delete
shares via the Windows NT 4.0 Server Manager. The <i>change
share command</i> is used to define an external program or
script which will modify an existing service definition in
smb.conf.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
order to successfully execute the <i>change share
command</i>, smbd requires that the administrator connects
using a root account (i.e. uid == 0) or has the
SeDiskOperatorPrivilege. Scripts defined in the <i>change
share command</i> parameter are executed as
root.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">When
executed, smbd will automatically invoke the <i>change share
command</i> with six
parameters.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>configFile</i> &minus; the location of the global
smb.conf file.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>shareName</i> &minus; the name of the new
share.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>pathName</i> &minus; path to an **existing** directory on
disk.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>comment</i> &minus; comment string to associate with the
new share.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>max connections</i> Number of maximum simultaneous
connections to this share.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>CSC policy</i> &minus; client side caching policy in
string form. Valid values are: manual, documents, programs,
disable.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is only used to modify existing file share
definitions. To modify printer shares, use the
&quot;Printers...&quot; folder as seen when browsing the
Samba host.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>change share command =</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>change share command =
/usr/local/bin/changeshare</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">cluster
addresses (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">With
this parameter you can add additional addresses nmbd will
register with a WINS server. These addresses are not
necessarily present on all nodes simultaneously, but they
will be registered with the WINS server so that clients can
contact any of the nodes.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>cluster addresses =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>cluster addresses = 10.0.0.1 10.0.0.2
10.0.0.3</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">clustering
(G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies whether Samba should contact ctdb for
accessing its tdb files and use ctdb as a backend for its
messaging backend.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Set
this parameter to yes only if you have a cluster setup with
ctdb running.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>clustering = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">config
file (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
allows you to override the config file to use, instead of
the default (usually smb.conf). There is a chicken and egg
problem here as this option is set in the config
file!</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">For
this reason, if the name of the config file has changed when
the parameters are loaded then it will reload them from the
new config file.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option takes the usual substitutions, which can be very
useful.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If
the config file doesn't exist then it won't be loaded
(allowing you to special case the config files of just a few
clients).</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>config file =
/usr/local/samba/lib/smb.conf.%m</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">copy
(S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter allows you to &quot;clone&quot; service entries.
The specified service is simply duplicated under the current
service's name. Any parameters specified in the current
section will override those in the section being
copied.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
feature lets you set up a 'template' service and create
similar services easily. Note that the service being copied
must occur earlier in the configuration file than the
service doing the copying.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>copy =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>copy = otherservice</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">ctdbd
socket (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If
you set clustering=yes, you need to tell Samba where ctdbd
listens on its unix domain socket. The default path as of
ctdb 1.0 is /tmp/ctdb.socket which you have to explicitly
set for Samba in smb.conf.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>ctdbd socket =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>ctdbd socket =
/tmp/ctdb.socket</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">ctdb
locktime warn threshold (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
a cluster environment using Samba and ctdb it is critical
that locks on central ctdb&minus;hosted databases like
locking.tdb are not held for long. With the current Samba
architecture it happens that Samba takes a lock and while
holding that lock makes file system calls into the shared
cluster file system. This option makes Samba warn if it
detects that it has held locks for the specified number of
milliseconds. If this happens, <i>smbd</i> will emit a debug
level 0 message into its logs and potentially into syslog.
The most likely reason for such a log message is that an
operation of the cluster file system Samba exports is taking
longer than expected. The messages are meant as a debugging
aid for potential cluster
problems.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
default value of 0 disables this
logging.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>ctdb locktime warn threshold =
0</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">ctdb
timeout (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies a timeout in milliseconds for the
connection between Samba and ctdb. It is only valid if you
have compiled Samba with clustering and if you have set
<i>clustering=yes</i>.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">When
something in the cluster blocks, it can happen that we wait
indefinitely long for ctdb, just adding to the blocking
condition. In a well&minus;running cluster this should never
happen, but there are too many components in a cluster that
might have hickups. Choosing the right balance for this
value is very tricky, because on a busy cluster long service
times to transfer something across the cluster might be
valid. Setting it too short will degrade the service your
cluster presents, setting it too long might make the cluster
itself not recover from something severely broken for too
long.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Be
aware that if you set this parameter, this needs to be in
the file smb.conf, it is not really helpful to put this into
a registry configuration (typical on a cluster), because to
access the registry contact to ctdb is
required.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Setting
<i>ctdb timeout</i> to n makes any process waiting longer
than n milliseconds for a reply by the cluster panic.
Setting it to 0 (the default) makes Samba block forever,
which is the highly recommended
default.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>ctdb timeout = 0</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">default</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is a synonym for default
service.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">default
service (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies the name of a service which will be
connected to if the service actually requested cannot be
found. Note that the square brackets are <i>NOT</i> given in
the parameter value (see example
below).</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">There
is no default value for this parameter. If this parameter is
not given, attempting to connect to a nonexistent service
results in an error.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Typically
the default service would be a</font>
<b><font color="#0000FF">guest
ok</font></b><font color="#000000">,</font>
<b><font color="#0000FF">read&minus;only</font></b>
<font color="#000000">service.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Also
note that the apparent service name will be changed to equal
that of the requested service, this is very useful as it
allows you to use macros like <i>%S</i> to make a wildcard
service.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
also that any &quot;_&quot; characters in the name of the
service used in the default service will get mapped to a
&quot;/&quot;. This allows for interesting
things.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>default service =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>default service = pub</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">delete
readonly (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter allows readonly files to be deleted. This is not
normal DOS semantics, but is allowed by
UNIX.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option may be useful for running applications such as rcs,
where UNIX file ownership prevents changing file
permissions, and DOS semantics prevent deletion of a read
only file.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>delete readonly = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">delete
share command (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Samba
2.2.0 introduced the ability to dynamically add and delete
shares via the Windows NT 4.0 Server Manager. The <i>delete
share command</i> is used to define an external program or
script which will remove an existing service definition from
smb.conf.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
order to successfully execute the <i>delete share
command</i>, smbd requires that the administrator connects
using a root account (i.e. uid == 0) or has the
SeDiskOperatorPrivilege. Scripts defined in the <i>delete
share command</i> parameter are executed as
root.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">When
executed, smbd will automatically invoke the <i>delete share
command</i> with two
parameters.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>configFile</i> &minus; the location of the global
smb.conf file.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">&bull;
<i>shareName</i> &minus; the name of the existing
service.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is only used to remove file shares. To delete
printer shares, see the</font>
<b><font color="#0000FF">deleteprinter
command</font></b><font color="#000000">.</font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>delete share command =</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>delete share command =
/usr/local/bin/delshare</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dfree
cache time (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
<i>dfree cache time</i> should only be used on systems where
a problem occurs with the internal disk space calculations.
This has been known to happen with Ultrix, but may occur
with other operating systems. The symptom that was seen was
an error of &quot;Abort Retry Ignore&quot; at the end of
each directory listing.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
is a new parameter introduced in Samba version 3.0.21. It
specifies in seconds the time that smbd will cache the
output of a disk free query. If set to zero (the default) no
caching is done. This allows a heavily loaded server to
prevent rapid spawning of</font>
<b><font color="#0000FF">dfree command</font></b>
<font color="#000000">scripts increasing the
load.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">By
default this parameter is zero, meaning no caching will be
done.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>dfree cache time = 60</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dfree
command (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
<i>dfree command</i> setting should only be used on systems
where a problem occurs with the internal disk space
calculations. This has been known to happen with Ultrix, but
may occur with other operating systems. The symptom that was
seen was an error of &quot;Abort Retry Ignore&quot; at the
end of each directory listing.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
setting allows the replacement of the internal routines to
calculate the total disk space and amount available with an
external routine. The example below gives a possible script
that might fulfill this
function.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">In
Samba version 3.0.21 this parameter has been changed to be a
per&minus;share parameter, and in addition the
parameter</font> <b><font color="#0000FF">dfree cache
time</font></b> <font color="#000000">was added to allow the
output of this script to be cached for systems under heavy
load.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
external program will be passed a single parameter
indicating a directory in the filesystem being queried. This
will typically consist of the string ./. The script should
return two integers in ASCII. The first should be the total
disk space in blocks, and the second should be the number of
available blocks. An optional third return value can give
the block size in bytes. The default blocksize is 1024
bytes.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note:
Your script should <i>NOT</i> be setuid or setgid and should
be owned by (and writeable only by)
root!</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Where
the script dfree (which must be made executable) could
be:</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">#!/bin/sh
<br>
df $1 | tail &minus;1 | awk '{print
$(NF&minus;4),$(NF&minus;2)}'</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">or
perhaps (on Sys V based
systems):</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">#!/bin/sh
<br>
/usr/bin/df &minus;k $1 | tail &minus;1 | awk '{print
$3&quot; &quot;$5}'</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
that you may have to replace the command names with full
path names on some systems.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">By
default internal routines for determining the disk capacity
and remaining space will be
used.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>dfree command =
/usr/local/samba/bin/dfree</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">directory
name cache size (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies the size of the directory name cache. It
will be needed to turn this off for *BSD
systems.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>directory name cache size =
100</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dmapi
support (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter specifies whether Samba should use DMAPI to
determine whether a file is offline or not. This would
typically be used in conjunction with a hierarchical storage
system that automatically migrates files to
tape.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
that Samba infers the status of a file by examining the
events that a DMAPI application has registered interest in.
This heuristic is satisfactory for a number of hierarchical
storage systems, but there may be system for which it will
fail. In this case, Samba may erroneously report files to be
offline.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter is only available if a supported DMAPI
implementation was found at compilation time. It will only
be used if DMAPI is found to enabled on the system at run
time.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>dmapi support = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dont
descend (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">There
are certain directories on some systems (e.g., the /proc
tree under Linux) that are either not of interest to clients
or are infinitely deep (recursive). This parameter allows
you to specify a comma&minus;delimited list of directories
that the server should always show as
empty.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Note
that Samba can be very fussy about the exact format of the
&quot;dont descend&quot; entries. For example you may need
./proc instead of just /proc. Experimentation is the best
policy :&minus;)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>dont descend =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>dont descend =
/proc,/dev</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dos
filemode (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
default behavior in Samba is to provide UNIX&minus;like
behavior where only the owner of a file/directory is able to
change the permissions on it. However, this behavior is
often confusing to DOS/Windows users. Enabling this
parameter allows a user who has write access to the file (by
whatever means, including an ACL permission) to modify the
permissions (including ACL) on it. Note that a user
belonging to the group owning the file will not be allowed
to change permissions if the group is only granted read
access. Ownership of the file/directory may also be changed.
Note that using the VFS modules acl_xattr or acl_tdb which
store native Windows as meta&minus;data will automatically
turn this option on for any share for which they are loaded,
as they require this option to emulate Windows ACLs
correctly.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>dos filemode = no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dos
filetime resolution (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Under
the DOS and Windows FAT filesystem, the finest granularity
on time resolution is two seconds. Setting this parameter
for a share causes Samba to round the reported time down to
the nearest two second boundary when a query call that
requires one second resolution is made to
<b>smbd</b>(8).</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option is mainly used as a compatibility option for Visual
C++ when used against Samba shares. If oplocks are enabled
on a share, Visual C++ uses two different time reading calls
to check if a file has changed since it was last read. One
of these calls uses a one&minus;second granularity, the
other uses a two second granularity. As the two second call
rounds any odd second down, then if the file has a timestamp
of an odd number of seconds then the two timestamps will not
match and Visual C++ will keep reporting the file has
changed. Setting this option causes the two timestamps to
match, and Visual C++ is happy.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>dos filetime resolution =
no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">dos
filetimes (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Under
DOS and Windows, if a user can write to a file they can
change the timestamp on it. Under POSIX semantics, only the
owner of the file or root may change the timestamp. By
default, Samba emulates the DOS semantics and allows one to
change the timestamp on a file if the user smbd is acting on
behalf has write permissions. Due to changes in Microsoft
Office 2000 and beyond, the default for this parameter has
been changed from &quot;no&quot; to &quot;yes&quot; in Samba
3.0.14 and above. Microsoft Excel will display dialog box
warnings about the file being changed by another user if
this parameter is not set to &quot;yes&quot; and files are
being shared between users.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>dos filetimes = yes</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">fake
directory create times (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">NTFS
and Windows VFAT file systems keep a create time for all
files and directories. This is not the same as the ctime
&minus; status change time &minus; that Unix keeps, so Samba
by default reports the earliest of the various times Unix
does keep. Setting this parameter for a share causes Samba
to always report midnight 1&minus;1&minus;1980 as the create
time for directories.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option is mainly used as a compatibility option for Visual
C++ when used against Samba shares. Visual C++ generated
makefiles have the object directory as a dependency for each
object file, and a make rule to create the directory. Also,
when NMAKE compares timestamps it uses the creation time
when examining a directory. Thus the object directory will
be created if it does not exist, but once it does exist it
will always have an earlier timestamp than the object files
it contains.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">However,
Unix time semantics mean that the create time reported by
Samba will be updated whenever a file is created or deleted
in the directory. NMAKE finds all object files in the object
directory. The timestamp of the last one built is then
compared to the timestamp of the object directory. If the
directory's timestamp if newer, then all object files will
be rebuilt. Enabling this option ensures directories always
predate their contents and an NMAKE build will proceed as
expected.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>fake directory create times =
no</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">follow
symlinks (S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter allows the Samba administrator to stop
<b>smbd</b>(8) from following symbolic links in a particular
share. Setting this parameter to <b>no</b> prevents any file
or directory that is a symbolic link from being followed
(the user will get an error). This option is very useful to
stop users from adding a symbolic link to /etc/passwd in
their home directory for instance. However it will slow
filename lookups down slightly.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
option is enabled (i.e. smbd will follow symbolic links) by
default.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>follow symlinks = yes</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">fss:
prune stale (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">When
enabled, Samba's File Server Remove VSS Protocol (FSRVP)
server checks all FSRVP initiated snapshots on startup, and
removes any corresponding state (including share
definitions) for nonexistent snapshot
paths.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>fss: prune stale = no</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>fss: prune stale = yes</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">fss:
sequence timeout (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">The
File Server Remove VSS Protocol (FSRVP) server includes a
message sequence timer to ensure cleanup on unexpected
client disconnect. This parameter overrides the default
timeout between FSRVP operations. FSRVP timeouts can be
completely disabled via a value of
0.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>fss: sequence timeout = 180 or 1800, depending on
operation</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>fss: sequence timeout =
0</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">fstype
(S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">This
parameter allows the administrator to configure the string
that specifies the type of filesystem a share is using that
is reported by <b>smbd</b>(8) when a client queries the
filesystem type for a share. The default type is <b>NTFS</b>
for compatibility with Windows NT but this can be changed to
other strings such as <b>Samba</b> or <b>FAT</b> if
required.</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Default:
<i>fstype = NTFS</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>fstype = Samba</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">homedir
map (G)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">If</font>
<b><font color="#0000FF">nis homedir</font></b>
<font color="#000000">is <b>yes</b>, and <b>smbd</b>(8) is
also acting as a Win95/98 <i>logon server</i> then this
parameter specifies the NIS (or YP) map from which the
server for the user's home directory should be extracted. At
present, only the Sun auto.home map format is understood.
The form of the map is:</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000">username
server:/some/file/system</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">and
the program will extract the servername from before the
first ':'. There should probably be a better parsing system
that copes with different map formats and also Amd (another
automounter) maps.</font></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
A working NIS client is required on the system for this
option to work.</font></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><font color="#000000">Default:
<i>homedir map =</i></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000">Example:
<i>homedir map =
amd.homedir</i></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000">include
(S)</font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>This
allows you to include one config file inside another. The
file is included literally, as though typed in
place.</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>It
takes the standard substitutions, except <i>%u</i>,
<i>%P</i> and <i>%S</i>.</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>The
parameter <i>include = registry</i> has a special meaning:
It does <i>not</i> include a file named <i>registry</i> from
the current working directory, but instead reads the global
configuration options from the registry. See the section on
registry&minus;based configuration for details. Note that
this option automatically activates registry
shares.</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>Default:
<i>include =</i></big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>Example:
<i>include =
/usr/local/samba/lib/admin_smb.conf</i></big></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000"><big>kernel
change notify (G)</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>This
parameter specifies whether Samba should ask the kernel for
change notifications in directories so that SMB clients can
refresh whenever the data on the server
changes.</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>This
parameter is only used when your kernel supports change
notification to user programs using the inotify
interface.</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>Default:
<i>kernel change notify =
yes</i></big></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000"><big>lock
dir</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>This
parameter is a synonym for lock
directory.</big></font></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><font color="#000000"><big>lock
directory (G)</big></font></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><font color="#000000"><big>This
option specifies the directory where lock files will be
placed. The lock files are used to implement
the</big></font> <big><b><font color="#0000FF">max
connections</font></b>
<font color="#000000">option.</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">Note:
This option can not be set inside registry
configurations.</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">Default:
<i>lock directory =
/var/lib/samba/lock</i></font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">Example:
<i>lock directory =
/var/run/samba/locks</i></font></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><font color="#000000">log
writeable files on exit
(G)</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">When
the network connection between a CIFS client and Samba dies,
Samba has no option but to simply shut down the server side
of the network connection. If this happens, there is a risk
of data corruption because the Windows client did not
complete all write operations that the Windows application
requested. Setting this option to &quot;yes&quot; makes smbd
log with a level 0 message a list of all files that have
been opened for writing when the network connection died.
Those are the files that are potentially corrupted. It is
meant as an aid for the administrator to give him a list of
files to do consistency checks
on.</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">Default:
<i>log writeable files on exit =
no</i></font></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><font color="#000000">magic
output (S)</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">This
parameter specifies the name of a file which will contain
output created by a magic script (see the</font>
<b><font color="#0000FF">magic script</font></b>
<font color="#000000">parameter
below).</font></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><font color="#000000"><b><big>Warning</big></b>
<br>
If two clients use the same <i>magic script</i> in the same
directory the output file content is
undefined.</font></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><font color="#000000">Default:
<i>magic output = # &lt;magic script
name&gt;.out</i></font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000">Example:
<i>magic output =
myfile.txt</i></font></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><font color="#000000">magic
script (S)</font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000"><big>This
parameter specifies the name of a file which, if opened,
will be executed by the server when the file is closed. This
allows a UNIX script to be sent to the Samba host and
executed on behalf of the connected
user.</big></font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000"><big>Scripts
executed in this way will be deleted upon completion
assuming that the user has the appropriate level of
privilege and the file permissions allow the
deletion.</big></font></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><font color="#000000"><big>If
the script generates output, output will be sent to the file
specified by the</big></font>
<big><b><font color="#0000FF">magic output</font></b>
<font color="#000000">parameter (see
above).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that some shells are unable to interpret scripts containing
CR/LF instead of CR as the end&minus;of&minus;line marker.
Magic scripts must be executable <i>as is</i> on the host,
which for some hosts and some shells will require filtering
at the DOS end.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Magic
scripts are <i>EXPERIMENTAL</i> and should <i>NOT</i> be
relied upon.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>magic script
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>magic script =
user.csh</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">message
command (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
specifies what command to run when the server receives a
WinPopup style
message.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
would normally be a command that would deliver the message
somehow. How this is to be done is up to your
imagination.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">An
example is:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">message
command = csh &minus;c 'xedit %s;rm %s'
&amp;</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
delivers the message using xedit, then removes it
afterwards. <i>NOTE THAT IT IS VERY IMPORTANT THAT THIS
COMMAND RETURN IMMEDIATELY</i>. That's why I have the
'&amp;' on the end. If it doesn't return immediately then
your PCs may freeze when sending messages (they should
recover after 30 seconds,
hopefully).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">All
messages are delivered as the global guest user. The command
takes the standard substitutions, although <i><br>
%u</i> won't work (<i>%U</i> may be better in this
case).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Apart
from the standard substitutions, some additional ones apply.
In particular:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>%s</i> = the filename containing the
message.</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>%t</i> = the destination that the message was sent to
(probably the server
name).</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>%f</i> = who the message is
from.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">You
could make this command send mail, or whatever else takes
your fancy. Please let us know of any really interesting
ideas you have.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Here's
a way of sending the messages as mail to
root:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">message
command = /bin/mail &minus;s 'message from %f on %m' root
&lt; %s; rm %s</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
you don't have a message command then the message won't be
delivered and Samba will tell the sender there was an error.
Unfortunately WfWg totally ignores the error code and
carries on regardless, saying that the message was
delivered.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
you want to silently delete it then
try:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">message
command = rm %s</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>message command
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>message command = csh &minus;c 'xedit %s; rm %s'
&amp;</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">socket
address</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is a synonym for nbt client socket
address.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">nbt
client socket address
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option allows you to control what address Samba will send
NBT client packets from, and process replies using,
including in nmbd.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Setting
this option should never be necessary on usual Samba servers
running only one
nmbd.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">By
default Samba will send UDP packets from the OS default
address for the destination, and accept replies on
0.0.0.0.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is deprecated. See</font>
<b><font color="#0000FF">bind interfaces only =
Yes</font></b> <font color="#000000">and</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">for the previous behaviour of
controlling the normal listening
sockets.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>nbt client socket address =
0.0.0.0</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>nbt client socket address =
192.168.2.20</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">ncalrpc
dir (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
directory will hold a series of named pipes to allow RPC
over inter&minus;process
communication.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
will allow Samba and other unix processes to interact over
DCE/RPC without using TCP/IP. Additionally a
sub&minus;directory 'np' has restricted permissions, and
allows a trusted communication channel between Samba
processes</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>ncalrpc dir =
/run/samba/ncalrpc</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>ncalrpc dir =
/var/run/samba/ncalrpc</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">NIS
homedir (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Get
the home share server from a NIS map. For UNIX systems that
use an automounter, the user's home directory will often be
mounted on a workstation on demand from a remote
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">When
the Samba logon server is not the actual home directory
server, but is mounting the home directories via NFS then
two network hops would be required to access the users home
directory if the logon server told the client to use itself
as the SMB server for home directories (one over SMB and one
over NFS). This can be very
slow.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option allows Samba to return the home share as being on a
different server to the logon server and as long as a Samba
daemon is running on the home directory server, it will be
mounted on the Samba client directly from the directory
server. When Samba is returning the home share to the
client, it will consult the NIS map specified in</font>
<b><font color="#0000FF">homedir map</font></b>
<font color="#000000">and return the server listed
there.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that for this option to work there must be a working NIS
system and the Samba server with this option must also be a
logon server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>NIS homedir =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">nmbd
bind explicit broadcast
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option causes <b>nmbd</b>(8) to explicitly bind to the
broadcast address of the local subnets. This is needed to
make nmbd work correctly in combination with the</font>
<b><font color="#0000FF">socket address</font></b>
<font color="#000000">option. You should not need to unset
this option.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>nmbd bind explicit broadcast =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">panic
action (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is a Samba developer option that allows a system command to
be called when either <b>smbd</b>(8) or <b>nmbd</b>(8)
crashes. This is usually used to draw attention to the fact
that a problem
occurred.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>panic action
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>panic action = &quot;/bin/sleep
90000&quot;</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">perfcount
module (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the perfcount backend to be used when
monitoring SMB operations. Only one perfcount module may be
used, and it must implement all of the apis contained in the
smb_perfcount_handler structure defined in
smb.h.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">pid
directory (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option specifies the directory where pid files will be
placed.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>pid directory =
/run</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>pid directory =
/var/run/</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">postexec
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option specifies a command to be run whenever the service is
disconnected. It takes the usual substitutions. The command
may be run as the root on some
systems.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">An
interesting example may be to unmount server
resources:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">postexec
= /etc/umount
/cdrom</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>postexec =</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>postexec = echo \&quot;%u disconnected from %S from %m
(%I)\&quot; &gt;&gt;
/tmp/log</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">exec</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
preexec.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">preexec
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option specifies a command to be run whenever the service is
connected to. It takes the usual
substitutions.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">An
interesting example is to send the users a welcome message
every time they log in. Maybe a message of the day? Here is
an example:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">preexec
= csh &minus;c 'echo \&quot;Welcome to %S!\&quot; |
/usr/local/samba/bin/smbclient &minus;M %m &minus;I %I'
&amp;</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Of
course, this could get annoying after a while
:&minus;)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">See
also</font> <b><font color="#0000FF">preexec
close</font></b> <font color="#000000">and</font>
<b><font color="#0000FF">postexec</font></b><font color="#000000">.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>preexec =</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>preexec = echo \&quot;%u connected to %S from %m
(%I)\&quot; &gt;&gt;
/tmp/log</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">preexec
close (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
boolean option controls whether a non&minus;zero return code
from</font> <b><font color="#0000FF">preexec</font></b>
<font color="#000000">should close the service being
connected to.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>preexec close =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">registry
shares (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
turns on or off support for share definitions read from
registry. Shares defined in <i>smb.conf</i> take precedence
over shares with the same name defined in registry. See the
section on registry&minus;based configuration for
details.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that this parameter defaults to <i>no</i>, but it is set to
<i>yes</i> when <i>config backend</i> is set to
<i>registry</i>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>registry shares =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>registry shares =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">remote
announce (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option allows you to setup <b>nmbd</b>(8) to periodically
announce itself to arbitrary IP addresses with an arbitrary
workgroup name.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is useful if you want your Samba server to appear in a
remote workgroup for which the normal browse propagation
rules don't work. The remote workgroup can be anywhere that
you can send IP packets
to.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
example:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">remote
announce = 192.168.2.255/SERVERS
192.168.4.255/STAFF</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">the
above line would cause nmbd to announce itself to the two
given IP addresses using the given workgroup names. If you
leave out the workgroup name, then the one given in
the</font> <b><font color="#0000FF">workgroup</font></b>
<font color="#000000">parameter is used
instead.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
IP addresses you choose would normally be the broadcast
addresses of the remote networks, but can also be the IP
addresses of known browse masters if your network config is
that stable.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">See
the chapter on Network Browsing in the Samba&minus;HOWTO
book.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>remote announce
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">remote
browse sync (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option allows you to setup <b>nmbd</b>(8) to periodically
request synchronization of browse lists with the master
browser of a Samba server that is on a remote segment. This
option will allow you to gain browse lists for multiple
workgroups across routed networks. This is done in a manner
that does not work with any non&minus;Samba
servers.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is useful if you want your Samba server and all local
clients to appear in a remote workgroup for which the normal
browse propagation rules don't work. The remote workgroup
can be anywhere that you can send IP packets
to.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
example:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><i>remote
browse sync = 192.168.2.255
192.168.4.255</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">the
above line would cause nmbd to request the master browser on
the specified subnets or addresses to synchronize their
browse lists with the local
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
IP addresses you choose would normally be the broadcast
addresses of the remote networks, but can also be the IP
addresses of known browse masters if your network config is
that stable. If a machine IP address is given Samba makes NO
attempt to validate that the remote machine is available, is
listening, nor that it is in fact the browse master on its
segment.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The</font>
<b><font color="#0000FF">remote browse sync</font></b>
<font color="#000000">may be used on networks where there is
no WINS server, and may be used on disjoint networks where
each network has its own WINS
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>remote browse sync
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">reset
on zero vc (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
boolean option controls whether an incoming session setup
should kill other connections coming from the same IP. This
matches the default Windows 2003 behaviour. Setting this
parameter to yes becomes necessary when you have a flaky
network and windows decides to reconnect while the old
connection still has files with share modes open. These
files become inaccessible over the new connection. The
client sends a zero VC on the new connection, and Windows
2003 kills all other connections coming from the same IP.
This way the locked files are accessible again. Please be
aware that enabling this option will kill connections behind
a masquerading
router.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>reset on zero vc =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">root
postexec (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is the same as the <i>postexec</i> parameter except that the
command is run as root. This is useful for unmounting
filesystems (such as CDROMs) after a connection is
closed.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>root postexec
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">root
preexec (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is the same as the <i>preexec</i> parameter except that the
command is run as root. This is useful for mounting
filesystems (such as CDROMs) when a connection is
opened.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>root preexec
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">root
preexec close (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
is the same as the <i>preexec close</i> parameter except
that the command is run as
root.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>root preexec close =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">rpc_daemon:DAEMON
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Defines
whether to use the embedded code or start a separate daemon
for the defined rpc services. The rpc_daemon prefix must be
followed by the server name, and a
value.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Two
possible values are currently
supported:</font></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">disabled</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">fork</font></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
classic method is to run rpc services as internal daemons
embedded in smbd, therefore the external daemons are
<i>disabled</i> by
default.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Choosing
the <i>fork</i> option will cause samba to fork a separate
process for each daemon configured this way. Each daemon may
in turn fork a number of children used to handle requests
from multiple smbds and direct tcp/ip connections (if the
Endpoint Mapper is enabled). Communication with smbd happens
over named pipes and require that said pipes are forward to
the external daemon (see</font>
<b><font color="#0000FF">rpc_server</font></b><font color="#000000">).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Forked
RPC Daemons support dynamically forking children to handle
connections. The heuristics about how many children to keep
around and how fast to allow them to fork and also how many
clients each child is allowed to handle concurrently is
defined by parametrical options named after the daemon. Five
options are currently
supported:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">prefork_min_children</font></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">prefork_max_children</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">prefork_spawn_rate</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">prefork_max_allowed_clients</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">prefork_child_min_life</font></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">To
set one of these options use the follwing
syntax:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">damonname:prefork_min_children
= 5</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Samba
includes separate daemons for spoolss, lsarpc/lsass,
netlogon, samr, FSRVP and mdssvc(Spotlight). Currently five
daemons are available and they are
called:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">epmd</font></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">lsasd</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">spoolssd</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">fssd</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="77%">



<p><big><big><big><big><big><font color="#000000">mdssd</font></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">rpc_daemon:spoolssd
= fork</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>rpc_daemon:DAEMON =
disabled</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">rpc_server:SERVER
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">With
this option you can define if a rpc service should be
running internal/embedded in smbd or should be redirected to
an external daemon like Samba4, the endpoint mapper daemon,
the spoolss daemon or the new LSA service daemon. The
rpc_server prefix must be followed by the pipe name, and a
value.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option can be set for each available rpc service in Samba.
The following list shows all available pipe names services
you can modify with this
option.</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
epmapper &minus; Endpoint
Mapper</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
winreg &minus; Remote Registry
Service</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
srvsvc &minus; Remote Server
Services</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
lsarpc &minus; Local Security
Authority</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
samr &minus; Security Account
Management</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
netlogon &minus; Netlogon Remote
Protocol</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
netdfs &minus; Settings for Distributed File
System</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
dssetup &minus; Active Directory
Setup</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
wkssvc &minus; Workstation
Services</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
spoolss &minus; Network Printing
Spooler</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
svcctl &minus; Service
Control</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
ntsvcs &minus; Plug and Play
Services</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
eventlog &minus; Event
Logger</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
initshutdown &minus; Init Shutdown
Service</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
mdssvc &minus;
Spotlight</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Three
possible values currently supported are:
embeddedexternaldisabled</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
classic method is to run every pipe as an internal function
<i>embedded</i> in smbd. The defaults may vary depending on
the service.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Choosing
the <i>external</i> option allows one to run a separate
daemon or even a completely independent (3rd party) server
capable of interfacing with samba via the MS&minus;RPC
interface over named
pipes.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Currently
in Samba3 we support four daemons, spoolssd, epmd, lsasd and
mdssd. These daemons can be enabled using the
<i>rpc_daemon</i> option. For spoolssd you have to enable
the daemon and proxy the named pipe
with:</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Examples:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">rpc_daemon:lsasd
= fork</font></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:lsarpc
= external</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:samr
= external</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:netlogon
= external</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:spoolss
= external</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:epmapper
= disabled</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_daemon:mdssd
= fork</font></big></big></big></big></big></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="69%">



<p><big><big><big><big><big><font color="#000000">rpc_server:mdssvc
= external</font></big></big></big></big></big></p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">There
is one special option which allows you to enable rpc
services to listen for ncacn_ip_tcp connections too.
Currently this is only used for testing and doesn't
scale!</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">rpc_server:tcpip
= yes</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>rpc_server:SERVER =
embedded</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">smbd
profiling level (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter allows the administrator to enable profiling
support.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Possible
values are <b>off</b>, <b>count</b> and
<b>on</b>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>smbd profiling level =
off</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>smbd profiling level =
on</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">spotlight
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter controls whether Samba allows Spotlight queries on
a share. For controlling indexing of filesystems you also
have to use Tracker's own configuration
system.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Spotlight
has several
prerequisites:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
Samba must be configured and built with Spotlight
support.</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
The <i>mdssvc</i> RPC service must be enabled, see
below.</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
Tracker intergration must be setup and the share must be
indexed by Tracker.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
a detailed set of instructions please see
https://wiki.samba.org/index.php/Spotlight.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
Spotlight RPC service can either be enabled as embedded RPC
service:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><i>[Global]</i></font>
<b><font color="#0000FF"><br>
rpc_server:mdsvc =
embedded</font></b></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Or
it can be run in a seperate RPC service
daemon:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><i>[Global]</i></font>
<b><font color="#0000FF"><br>
rpc_server:mdssd = fork <br>
rpc_server:mdsvc =
external</font></b></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>spotlight =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">state
directory (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Usually,
most of the TDB files are stored in the <i>lock
directory</i>. Since Samba 3.4.0, it is possible to
differentiate between TDB files with persistent data and TDB
files with non&minus;persistent data using the <i>state
directory</i> and the <i>cache directory</i>
options.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option specifies the directory where TDB files containing
persistent data will be
stored.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>state directory =
/var/lib/samba</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>state directory =
/var/run/samba/locks/state</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
allow guests (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter controls whether user defined shares are allowed
to be accessed by non&minus;authenticated users or not. It
is the equivalent of allowing people who can create a share
the option of setting <i>guest ok = yes</i> in a share
definition. Due to its security sensitive nature, the
default is set to
off.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare allow guests =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
max shares (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the number of user defined shares that
are allowed to be created by users belonging to the group
owning the usershare directory. If set to zero (the default)
user defined shares are
ignored.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare max shares =
0</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
owner only (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter controls whether the pathname exported by a user
defined shares must be owned by the user creating the user
defined share or not. If set to True (the default) then smbd
checks that the directory path being shared is owned by the
user who owns the usershare file defining this share and
refuses to create the share if not. If set to False then no
such check is performed and any directory path may be
exported regardless of who owns
it.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare owner only =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
path (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the absolute path of the directory on
the filesystem used to store the user defined share
definition files. This directory must be owned by root, and
have no access for other, and be writable only by the group
owner. In addition the &quot;sticky&quot; bit must also be
set, restricting rename and delete to owners of a file (in
the same way the /tmp directory is usually configured).
Members of the group owner of this directory are the users
allowed to create
usershares.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
example, a valid usershare directory might be
/usr/local/samba/lib/usershares, set up as
follows.</font></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p><big><big><big><big><big><font color="#000000">ls
&minus;ld
/usr/local/samba/lib/usershares/</font></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><font color="#000000">drwxrwx&minus;&minus;T
2 root power_users 4096 2006&minus;05&minus;05 12:27
/usr/local/samba/lib/usershares/</font></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">In
this case, only members of the group &quot;power_users&quot;
can create user defined
shares.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare path =
/var/lib/samba/usershares</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
prefix allow list
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies a list of absolute pathnames the root of
which are allowed to be exported by user defined share
definitions. If the pathname to be exported doesn't start
with one of the strings in this list, the user defined share
will not be allowed. This allows the Samba administrator to
restrict the directories on the system that can be exported
by user defined
shares.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
there is a &quot;usershare prefix deny list&quot; and also a
&quot;usershare prefix allow list&quot; the deny list is
processed first, followed by the allow list, thus leading to
the most restrictive
interpretation.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare prefix allow list
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>usershare prefix allow list = /home /data
/space</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
prefix deny list
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies a list of absolute pathnames the root of
which are NOT allowed to be exported by user defined share
definitions. If the pathname exported starts with one of the
strings in this list the user defined share will not be
allowed. Any pathname not starting with one of these strings
will be allowed to be exported as a usershare. This allows
the Samba administrator to restrict the directories on the
system that can be exported by user defined
shares.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
there is a &quot;usershare prefix deny list&quot; and also a
&quot;usershare prefix allow list&quot; the deny list is
processed first, followed by the allow list, thus leading to
the most restrictive
interpretation.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare prefix deny list
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>usershare prefix deny list = /etc /dev
/private</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">usershare
template share (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">User
defined shares only have limited possible parameters such as
path, guest ok, etc. This parameter allows usershares to
&quot;cloned&quot; from an existing share. If
&quot;usershare template share&quot; is set to the name of
an existing share, then all usershares created have their
defaults set from the parameters set on this
share.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
target share may be set to be invalid for real file sharing
by setting the parameter &quot;&minus;valid = False&quot; on
the template share definition. This causes it not to be seen
as a real exported share but to be able to be used as a
template for
usershares.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>usershare template share
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>usershare template share =
template_share</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">utmp
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
boolean parameter is only available if Samba has been
configured and compiled with the option
&minus;&minus;with&minus;utmp. If set to <b>yes</b> then
Samba will attempt to add utmp or utmpx records (depending
on the UNIX system) whenever a connection is made to a Samba
server. Sites may use this to record the user connecting to
a Samba share.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Due
to the requirements of the utmp record, we are required to
create a unique identifier for the incoming user. Enabling
this option creates an n^2 algorithm to find this number.
This may impede performance on large
installations.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>utmp = no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">utmp
directory (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only available if Samba has been configured and
compiled with the option &minus;&minus;with&minus;utmp. It
specifies a directory pathname that is used to store the
utmp or utmpx files (depending on the UNIX system) that
record user connections to a Samba server. By default this
is not set, meaning the system will use whatever utmp file
the native system is set to use (usually /var/run/utmp on
Linux).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>utmp directory = # Determined
automatically</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>utmp directory =
/var/run/utmp</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&minus;valid
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter indicates whether a share is valid and thus can be
used. When this parameter is set to false, the share will be
in no way visible nor
accessible.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option should not be used by regular users but might be of
help to developers. Samba uses this option internally to
mark shares as
deleted.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>&minus;valid =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">volume
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
allows you to override the volume label returned for a
share. Useful for CDROMs with installation programs that
insist on a particular volume
label.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>volume = # the name of the
share</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">wide
links (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter controls whether or not links in the UNIX file
system may be followed by the server. Links that point to
areas within the directory tree exported by the server are
always allowed; this parameter controls access only to areas
that are outside the directory tree being
exported.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note:
Turning this parameter on when UNIX extensions are enabled
will allow UNIX clients to create symbolic links on the
share that can point to files or directories outside
restricted path exported by the share definition. This can
cause access to areas outside of the share. Due to this
problem, this parameter will be automatically disabled (with
a message in the log file) if the</font>
<b><font color="#0000FF">unix extensions</font></b>
<font color="#000000">option is
on.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">See
the parameter</font> <b><font color="#0000FF">allow insecure
wide links</font></b> <font color="#000000">if you wish to
change this coupling between the two
parameters.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>wide links =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">wtmp
directory (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only available if Samba has been configured and
compiled with the option &minus;&minus;with&minus;utmp. It
specifies a directory pathname that is used to store the
wtmp or wtmpx files (depending on the UNIX system) that
record user connections to a Samba server. The difference
with the utmp directory is the fact that user info is kept
after a user has logged
out.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">By
default this is not set, meaning the system will use
whatever utmp file the native system is set to use (usually
/var/run/wtmp on
Linux).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>wtmp directory
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>wtmp directory =
/var/log/wtmp</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">addport
command (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Samba
3.0.23 introduced support for adding printer ports remotely
using the Windows &quot;Add Standard TCP/IP Port
Wizard&quot;. This option defines an external program to be
executed when smbd receives a request to add a new Port to
the system. The script is passed two
parameters:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>port name</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>device URI</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
deviceURI is in the format of
socket://&lt;hostname&gt;[:&lt;portnumber&gt;] or
lpd://&lt;hostname&gt;/&lt;queuename&gt;.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>addport command
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>addport command =
/etc/samba/scripts/addport.sh</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">addprinter
command (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">With
the introduction of MS&minus;RPC based printing support for
Windows NT/2000 clients in Samba 2.2, The MS Add Printer
Wizard (APW) icon is now also available in the
&quot;Printers...&quot; folder displayed a share listing.
The APW allows for printers to be add remotely to a Samba or
Windows NT/2000 print
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
a Samba host this means that the printer must be physically
added to the underlying printing system. The <i>addprinter
command</i> defines a script to be run which will perform
the necessary operations for adding the printer to the print
system and to add the appropriate service definition to the
smb.conf file in order that it can be shared by
<b>smbd</b>(8).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
<i>addprinter command</i> is automatically invoked with the
following parameter (in
order):</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>printer name</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>share name</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>port name</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>driver name</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>location</i></font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&bull;
<i>Windows 9x driver
location</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">All
parameters are filled in from the PRINTER_INFO_2 structure
sent by the Windows NT/2000 client with one exception. The
&quot;Windows 9x driver location&quot; parameter is included
for backwards compatibility only. The remaining fields in
the structure are generated from answers to the APW
questions.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Once
the <i>addprinter command</i> has been executed, smbd will
reparse the smb.conf to determine if the share defined by
the APW exists. If the sharename is still invalid, then smbd
will return an ACCESS_DENIED error to the
client.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
<i>addprinter command</i> program can output a single line
of text, which Samba will set as the port the new printer is
connected to. If this line isn't output, Samba won't reload
its printer shares.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>addprinter command
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>addprinter command =
/usr/bin/addprinter</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">cups
connection timeout
(G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable if</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">is set to
<b>cups</b>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
set, this option specifies the number of seconds that smbd
will wait whilst trying to contact to the CUPS server. The
connection will fail if it takes longer than this number of
seconds.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>cups connection timeout =
30</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>cups connection timeout =
60</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">cups
encrypt (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable if</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">is set to <b>cups</b> and if you use
CUPS newer than 1.0.x.It is used to define whether or not
Samba should use encryption when talking to the CUPS server.
Possible values are <i>auto</i>, <i>yes</i> and
<i>no</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">When
set to auto we will try to do a TLS handshake on each CUPS
connection setup. If that fails, we will fall back to
unencrypted
operation.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>cups encrypt =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">cups
options (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable if</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">is set to <b>cups</b>. Its value is a
free form string of options passed directly to the cups
library.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">You
can pass any generic print option known to CUPS (as listed
in the CUPS &quot;Software Users' Manual&quot;). You can
also pass any printer specific option (as listed in
&quot;lpoptions &minus;d printername &minus;l&quot;) valid
for the target queue. Multiple parameters should be
space&minus;delimited name/value pairs according to the PAPI
text option ABNF specification. Collection values
(&quot;name={a=... b=... c=...}&quot;) are stored with the
curley brackets
intact.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">You
should set this parameter to <b>raw</b> if your CUPS server
error_log file contains messages such as &quot;Unsupported
format 'application/octet&minus;stream'&quot; when printing
from a Windows client through Samba. It is no longer
necessary to enable system wide raw printing in
/etc/cups/mime.{convs,types}.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>cups options =
&quot;&quot;</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>cups options = &quot;raw
media=a4&quot;</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">cups
server (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable if</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">is set to
<b>cups</b>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
set, this option overrides the ServerName option in the CUPS
client.conf. This is necessary if you have virtual samba
servers that connect to different CUPS
daemons.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Optionally,
a port can be specified by separating the server name and
port number with a colon. If no port was specified, the
default port for IPP (631) will be
used.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>cups server =
&quot;&quot;</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>cups server =
mycupsserver</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>cups server =
mycupsserver:1631</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">default
devmode (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable to</font>
<b><font color="#0000FF">printable</font></b>
<font color="#000000">services. When smbd is serving Printer
Drivers to Windows NT/2k/XP clients, each printer on the
Samba server has a Device Mode which defines things such as
paper size and orientation and duplex settings. The device
mode can only correctly be generated by the printer driver
itself (which can only be executed on a Win32 platform).
Because smbd is unable to execute the driver code to
generate the device mode, the default behavior is to set
this field to NULL.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Most
problems with serving printer drivers to Windows NT/2k/XP
clients can be traced to a problem with the generated device
mode. Certain drivers will do things such as crashing the
client's Explorer.exe with a NULL devmode. However, other
printer drivers can cause the client's spooler service
(spoolsv.exe) to die if the devmode was not created by the
driver itself (i.e. smbd generates a default
devmode).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter should be used with care and tested with the
printer driver in question. It is better to leave the device
mode to NULL and let the Windows client set the correct
values. Because drivers do not do this all the time, setting
default devmode = yes will instruct smbd to generate a
default one.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
more information on Windows NT/2k printing and Device Modes,
see the MSDN
documentation.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>default devmode =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">deleteprinter
command (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">With
the introduction of MS&minus;RPC based printer support for
Windows NT/2000 clients in Samba 2.2, it is now possible to
delete a printer at run time by issuing the DeletePrinter()
RPC call.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
a Samba host this means that the printer must be physically
deleted from the underlying printing system. The</font>
<b><font color="#0000FF">deleteprinter command</font></b>
<font color="#000000">defines a script to be run which will
perform the necessary operations for removing the printer
from the print system and from
smb.conf.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The</font>
<b><font color="#0000FF">deleteprinter command</font></b>
<font color="#000000">is automatically called with only one
parameter:</font> <b><font color="#0000FF">printer
name</font></b><font color="#000000">.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Once
the</font> <b><font color="#0000FF">deleteprinter
command</font></b> <font color="#000000">has been executed,
smbd will reparse the smb.conf to check that the associated
printer no longer exists. If the sharename is still valid,
then smbd will return an ACCESS_DENIED error to the
client.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>deleteprinter command
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>deleteprinter command =
/usr/bin/removeprinter</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">disable
spoolss (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Enabling
this parameter will disable Samba's support for the SPOOLSS
set of MS&minus;RPC's and will yield identical behavior as
Samba 2.0.x. Windows NT/2000 clients will downgrade to using
Lanman style printing commands. Windows 9x/ME will be
unaffected by the parameter. However, this will also disable
the ability to upload printer drivers to a Samba server via
the Windows NT Add Printer Wizard or by using the NT printer
properties dialog window. It will also disable the
capability of Windows NT/2000 clients to download print
drivers from the Samba host upon demand. <i>Be very careful
about enabling this
parameter.</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>disable spoolss =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">enable
spoolss (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Inverted
synonym for</font> <b><font color="#0000FF">disable
spoolss</font></b><font color="#000000">.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>enable spoolss =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">enumports
command (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
concept of a &quot;port&quot; is fairly foreign to UNIX
hosts. Under Windows NT/2000 print servers, a port is
associated with a port monitor and generally takes the form
of a local port (i.e. LPT1:, COM1:, FILE:) or a remote port
(i.e. LPD Port Monitor, etc...). By default, Samba has only
one port defined&minus;&minus;<b>&quot;Samba Printer
Port&quot;</b>. Under Windows NT/2000, all printers must
have a valid port name. If you wish to have a list of ports
displayed (smbd does not use a port name for anything) other
than the default <b>&quot;Samba Printer Port&quot;</b>, you
can define <i>enumports command</i> to point to a program
which should generate a list of ports, one per line, to
standard output. This listing will then be used in response
to the level 1 and 2 EnumPorts()
RPC.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>enumports command
=</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>enumports command =
/usr/bin/listports</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">force
printername (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">When
printing from Windows NT (or later), each printer in
smb.conf has two associated names which can be used by the
client. The first is the sharename (or shortname) defined in
smb.conf. This is the only printername available for use by
Windows 9x clients. The second name associated with a
printer can be seen when browsing to the
&quot;Printers&quot; (or &quot;Printers and Faxes&quot;)
folder on the Samba server. This is referred to simply as
the printername (not to be confused with the <i>printer
name</i> option).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">When
assigning a new driver to a printer on a remote Windows
compatible print server such as Samba, the Windows client
will rename the printer to match the driver name just
uploaded. This can result in confusion for users when
multiple printers are bound to the same driver. To prevent
Samba from allowing the printer's printername to differ from
the sharename defined in smb.conf, set <i>force printername
= yes</i>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Be
aware that enabling this parameter may affect migrating
printers from a Windows server to Samba since Windows has no
way to force the sharename and printername to
match.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">It
is recommended that this parameter's value not be changed
once the printer is in use by clients as this could cause a
user not be able to delete printer connections from their
local Printers
folder.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>force printername =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">iprint
server (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is only applicable if</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">is set to
<b>iprint</b>.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
set, this option overrides the ServerName option in the CUPS
client.conf. This is necessary if you have virtual samba
servers that connect to different CUPS
daemons.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>iprint server =
&quot;&quot;</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>iprint server =
MYCUPSSERVER</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">load
printers (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">A
boolean variable that controls whether all printers in the
printcap will be loaded for browsing by default. See
the</font> <b><font color="#0000FF">printers</font></b>
<font color="#000000">section for more
details.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>load printers =
yes</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lppause
command (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to stop printing or spooling a specific print
job.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name and job number to pause the print job. One way of
implementing this is by using job priorities, where jobs
having a too low priority won't be sent to the
printer.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. A <i>%j</i> is replaced with the job number (an
integer). On HPUX (see <i>printing=hpux</i> ), if the
<i>&minus;p%p</i> option is added to the lpq command, the
job will show up with the correct status, i.e. if the job
priority is lower than the set fence priority it will have
the PAUSED status, whereas if the priority is equal or
higher it will have the SPOOLED or PRINTING
status.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
lppause command as the PATH may not be available to the
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Currently
no default value is given to this string, unless the value
of the</font> <b><font color="#0000FF">printing</font></b>
<font color="#000000">parameter is <b>SYSV</b>, in which
case the default is : lp &minus;i %p&minus;%j &minus;H hold
or if the value of the <i>printing</i> parameter is
<b>SOFTQ</b>, then the default is: qstat &minus;s &minus;j%j
&minus;h.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>lppause command = # determined by printing
parameter</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>lppause command = /usr/bin/lpalt %p&minus;%j
&minus;p0</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lpq
cache time (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
controls how long lpq info will be cached for to prevent the
lpq command being called too often. A separate cache is kept
for each variation of the lpq command used by the system, so
if you use different lpq commands for different users then
they won't share cache
information.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
cache files are stored in /tmp/lpq.xxxx where xxxx is a hash
of the lpq command in
use.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
default is 30 seconds, meaning that the cached results of a
previous identical lpq command will be used if the cached
data is less than 30 seconds old. A large value may be
advisable if your lpq command is very
slow.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">A
value of 0 will disable caching
completely.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>lpq cache time =
30</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>lpq cache time =
10</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lpq
command (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to obtain lpq&minus;style printer status
information.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name as its only parameter and outputs printer status
information.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Currently
nine styles of printer status information are supported;
BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, CUPS, and SOFTQ. This
covers most UNIX systems. You control which type is expected
using the <i>printing =</i>
option.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Some
clients (notably Windows for Workgroups) may not correctly
send the connection number for the printer they are
requesting status information about. To get around this, the
server reports on the first printer service connected to by
the client. This only happens if the connection number sent
is invalid.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. Otherwise it is placed at the end of the
command.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
<i>lpq command</i> as the <b>$PATH</b> may not be available
to the server. When compiled with the CUPS libraries, no
<i>lpq command</i> is needed because smbd will make a
library call to obtain the print queue
listing.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>lpq command = # determined by printing
parameter</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>lpq command = /usr/bin/lpq
&minus;P%p</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lpresume
command (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to restart or continue printing or spooling a
specific print job.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name and job number to resume the print job. See also
the</font> <b><font color="#0000FF">lppause
command</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. A <i>%j</i> is replaced with the job number (an
integer).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
<i>lpresume command</i> as the PATH may not be available to
the server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">See
also the</font> <b><font color="#0000FF">printing</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
Currently no default value is given to this string, unless
the value of the <i>printing</i> parameter is <b>SYSV</b>,
in which case the default
is:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lp
&minus;i %p&minus;%j &minus;H
resume</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">or
if the value of the <i>printing</i> parameter is
<b>SOFTQ</b>, then the default
is:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">qstat
&minus;s &minus;j%j
&minus;r</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>lpresume command = # determined by printing
parameter</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>lpresume command = /usr/bin/lpalt %p&minus;%j
&minus;p2</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lprm
command (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to delete a print
job.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name and job number, and deletes the print
job.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. A <i>%j</i> is replaced with the job number (an
integer).</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
<i>lprm command</i> as the PATH may not be available to the
server.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Examples
of use are:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lprm
command = /usr/bin/lprm &minus;P%p
%j</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">or</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">lprm
command = /usr/bin/cancel
%p&minus;%j</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>lprm command = # determined by printing
parameter</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">max
print jobs (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter limits the maximum number of jobs allowable in a
Samba printer queue at any given moment. If this number is
exceeded, <b>smbd</b>(8) will remote &quot;Out of
Space&quot; to the
client.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>max print jobs =
1000</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>max print jobs =
5000</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">max
reported print jobs
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter limits the maximum number of jobs displayed in a
port monitor for Samba printer queue at any given moment. If
this number is exceeded, the excess jobs will not be shown.
A value of zero means there is no limit on the number of
print jobs
reported.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>max reported print jobs =
0</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>max reported print jobs =
1000</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">os2
driver map (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
parameter is used to define the absolute path to a file
containing a mapping of Windows NT printer driver names to
OS/2 printer driver names. The format
is:</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">&lt;nt
driver name&gt; = &lt;os2 driver name&gt;.&lt;device
name&gt;</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">For
example, a valid entry using the HP LaserJet 5 printer
driver would appear as HP LaserJet 5L = LASERJET.HP LaserJet
5L.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">The
need for the file is due to the printer driver namespace
problem described in the chapter on Classical Printing in
the Samba3&minus;HOWTO book. For more details on OS/2
clients, please refer to chapter on other clients in the
Samba3&minus;HOWTO
book.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>os2 driver map
=</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">print
ok</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
printable.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">printable
(S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">If
this parameter is <b>yes</b>, then clients may open, write
to and submit spool files on the directory specified for the
service.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Note
that a printable service will ALWAYS allow writing to the
service path (user privileges permitting) via the spooling
of print data. The</font> <b><font color="#0000FF">read
only</font></b> <font color="#000000">parameter controls
only non&minus;printing access to the
resource.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>printable =
no</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">printcap
cache time (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
option specifies the number of seconds before the printing
subsystem is again asked for the known
printers.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Setting
this parameter to 0 disables any rescanning for new or
removed printers after the initial
startup.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Default:
<i>printcap cache time =
750</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>printcap cache time =
600</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">printcap</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter is a synonym for printcap
name.</font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">printcap
name (G)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">This
parameter may be used to override the compiled&minus;in
default printcap name used by the server (usually
/etc/printcap). See the discussion of the [printers] section
above for reasons why you might want to do
this.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">To
use the CUPS printing interface set printcap name = cups.
This should be supplemented by an additional setting</font>
<b><font color="#0000FF">printing = cups</font></b>
<font color="#000000">in the [global] section. printcap name
= cups will use the &quot;dummy&quot; printcap created by
CUPS, as specified in your CUPS configuration
file.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">On
System V systems that use lpstat to list available printers
you can use printcap name = lpstat to automatically obtain
lists of available printers. This is the default for systems
that define SYSV at configure time in Samba (this includes
most System V based systems). If <i><br>
printcap name</i> is set to lpstat on these systems then
Samba will launch lpstat &minus;v and attempt to parse the
output to obtain a printer
list.</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">A
minimal printcap file would look something like
this:</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000">print1|My
Printer 1 <br>
print2|My Printer 2 <br>
print3|My Printer 3 <br>
print4|My Printer 4 <br>
print5|My Printer 5</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">where
the '|' separates aliases of a printer. The fact that the
second alias has a space in it gives a hint to Samba that
it's a comment.</font></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
Under AIX the default printcap name is /etc/qconfig. Samba
will assume the file is in AIX qconfig format if the string
qconfig appears in the printcap
filename.</font></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><font color="#000000">Default:
<i>printcap name =
/etc/printcap</i></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000">Example:
<i>printcap name =
/etc/myprintcap</i></font></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><font color="#000000">print
command (S)</font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>After
a print job has finished spooling to a service, this command
will be used via a system() call to process the spool file.
Typically the command specified will submit the spool file
to the host's printing subsystem, but there is no
requirement that this be the case. The server will not
remove the spool file, so whatever command you specify
should remove the spool file when it has been processed,
otherwise you will need to manually remove old spool
files.</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>The
print command is simply a text string. It will be used
verbatim after macro substitutions have been
made:</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>%s,
%f &minus; the path to the spool file
name</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>%p
&minus; the appropriate printer
name</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>%J
&minus; the job name as transmitted by the
client.</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>%c
&minus; The number of printed pages of the spooled job (if
known).</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>%z
&minus; the size of the spooled print job (in
bytes)</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>The
print command <i>MUST</i> contain at least one occurrence of
<i>%s</i> or <i>%f</i> &minus; the <i>%p</i> is optional. At
the time a job is submitted, if no printer name is supplied
the <i>%p</i> will be silently removed from the printer
command.</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>If
specified in the [global] section, the print command given
will be used for any printable service that does not have
its own print command
specified.</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>If
there is neither a specified print command for a printable
service nor a global print command, spool files will be
created but not processed and (most importantly) not
removed.</big></font></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><font color="#000000"><big>Note
that printing may fail on some UNIXes from the <b>nobody</b>
account. If this happens then create an alternative guest
account that can print and set the</big></font>
<big><b><font color="#0000FF">guest account</font></b>
<font color="#000000">in the [global]
section.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">You
can form quite complex print commands by realizing that they
are just passed to a shell. For example the following will
log a print job, print the file, then remove it. Note that
';' is the usual separator for command in shell
scripts.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">print
command = echo Printing %s &gt;&gt; /tmp/print.log; lpr
&minus;P %p %s; rm
%s</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">You
may have to vary this command considerably depending on how
you normally print files on your system. The default for the
parameter varies depending on the setting of the</font>
<b><font color="#0000FF">printing</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
For printing = BSD, AIX, QNX, LPRNG or PLP
:</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">print
command = lpr &minus;r &minus;P%p
%s</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">For
printing = SYSV or HPUX
:</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">print
command = lp &minus;c &minus;d%p %s; rm
%s</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">For
printing = SOFTQ
:</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">print
command = lp &minus;d%p &minus;s %s; rm
%s</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">For
printing = CUPS : If SAMBA is compiled against libcups,
then</font> <b><font color="#0000FF">printcap =
cups</font></b> <font color="#000000">uses the CUPS API to
submit jobs, etc. Otherwise it maps to the System V commands
with the &minus;oraw option for printing, i.e. it uses lp
&minus;c &minus;d%p &minus;oraw; rm %s. With printing =
cups, and if SAMBA is compiled against libcups, any manually
set print command will be
ignored.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Example:
<i>print command = /usr/local/samba/bin/myprintscript %p
%s</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">printer</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for printer
name.</font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">printer
name (S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameter specifies the name of the printer to which print
jobs spooled through a printable service will be
sent.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">If
specified in the [global] section, the printer name given
will be used for any printable service that does not have
its own printer name
specified.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">The
default value of the</font> <b><font color="#0000FF">printer
name</font></b> <font color="#000000">may be lp on many
systems.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>printer name
=</i></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Example:
<i>printer name =
laserwriter</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">printing
(S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameters controls how printer status information is
interpreted on your system. It also affects the default
values for the <i>print command</i>, <i>lpq command</i>,
<i>lppause command</i> , <i>lpresume command</i>, and
<i>lprm command</i> if specified in the [global]
section.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Currently
nine printing styles are supported. They are <b>BSD</b>,
<b>AIX</b>, <b>LPRNG</b>, <b>PLP</b>, <b>SYSV</b>,
<b>HPUX</b>, <b>QNX</b>, <b>SOFTQ</b>, <b>CUPS</b> and
<b>IPRINT</b>.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Be
aware that CUPS and IPRINT are only available if the CUPS
development library was available at the time Samba was
compiled or
packaged.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">To
see what the defaults are for the other print commands when
using the various options use the <b>testparm</b>(1)
program.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
option can be set on a per printer basis. Please be aware
however, that you must place any of the various printing
commands (e.g. print command, lpq command, etc...) after
defining the value for the <i>printing</i> option since it
will reset the printing commands to default
values.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">See
also the discussion in the [printers]
section.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">See
testparm &minus;v. for the default value on your
system</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>printing = # Depends on the operating
system</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">printjob
username (S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameter specifies which user information will be passed to
the printing system. Usually, the username is sent, but in
some cases, e.g. the domain prefix is useful,
too.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>printjob username =
%U</i></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Example:
<i>printjob username =
%D\%U</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">print
notify backchannel
(S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Windows
print clients can update print queue status by expecting the
server to open a backchannel SMB connection to them. Due to
client firewall settings this can cause considerable
timeouts and will often fail, as there is no guarantee the
client is even running an SMB server. By default, the Samba
print server will not try to connect back to clients, and
will treat corresponding requests as if the connection back
to the client
failed.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>print notify backchannel =
no</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">queuepause
command (S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to pause the printer
queue.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name as its only parameter and stops the printer queue, such
that no longer jobs are submitted to the
printer.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
command is not supported by Windows for Workgroups, but can
be issued from the Printers window under Windows 95 and
NT.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. Otherwise it is placed at the end of the
command.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
command as the PATH may not be available to the
server.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>queuepause command = # determined by printing
parameter</i></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Example:
<i>queuepause command = disable
%p</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">queueresume
command (S)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
parameter specifies the command to be executed on the server
host in order to resume the printer queue. It is the command
to undo the behavior that is caused by the previous
parameter (</font><b><font color="#0000FF">queuepause
command</font></b><font color="#000000">).</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
command should be a program or script which takes a printer
name as its only parameter and resumes the printer queue,
such that queued jobs are resubmitted to the
printer.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">This
command is not supported by Windows for Workgroups, but can
be issued from the Printers window under Windows 95 and
NT.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">If
a <i>%p</i> is given then the printer name is put in its
place. Otherwise it is placed at the end of the
command.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Note
that it is good practice to include the absolute path in the
command as the PATH may not be available to the
server.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Default:
<i>queueresume command = # determined by printing
parameter</i></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Example:
<i>queueresume command = enable
%p</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">show
add printer wizard
(G)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">With
the introduction of MS&minus;RPC based printing support for
Windows NT/2000 client in Samba 2.2, a
&quot;Printers...&quot; folder will appear on Samba hosts in
the share listing. Normally this folder will contain an icon
for the MS Add Printer Wizard (APW). However, it is possible
to disable this feature regardless of the level of privilege
of the connected
user.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Under
normal circumstances, the Windows NT/2000 client will open a
handle on the printer server with OpenPrinterEx() asking for
Administrator privileges. If the user does not have
administrative access on the print server (i.e is not root
or has granted the SePrintOperatorPrivilege), the
OpenPrinterEx() call fails and the client makes another open
call with a request for a lower privilege level. This should
succeed, however the APW icon will not be
displayed.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">Disabling
the <i>show add printer wizard</i> parameter will always
cause the OpenPrinterEx() on the server to fail. Thus the
APW icon will never be
displayed.</font></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
This does not prevent the same user from having
administrative privilege on an individual
printer.</font></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><font color="#000000">Default:
<i>show add printer wizard =
yes</i></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000">spoolss:
architecture
(G)</font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Windows
spoolss print clients only allow association of
server&minus;side drivers with printers when the driver
architecture matches the advertised print server
architecture. Samba's spoolss print server architecture can
be changed using this
parameter.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>spoolss: architecture = Windows NT
x86</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>spoolss: architecture = Windows
x64</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>spoolss:
os_major
(G)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Windows
might require a new os version number. This option allows to
modify the build number. The complete default version number
is: 5.0.2195 (Windows 2000). The example is 6.1.7601
(Windows 2008
R2).</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>spoolss: os_major =
5</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>spoolss: os_major =
6</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>spoolss:
os_minor
(G)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Windows
might require a new os version number. This option allows to
modify the build number. The complete default version number
is: 5.0.2195 (Windows 2000). The example is 6.1.7601
(Windows 2008
R2).</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>spoolss: os_minor =
0</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>spoolss: os_minor =
1</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>spoolss:
os_build
(G)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Windows
might require a new os version number. This option allows to
modify the build number. The complete default version number
is: 5.0.2195 (Windows 2000). The example is 6.1.7601
(Windows 2008
R2).</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>spoolss: os_build =
2195</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>spoolss: os_build =
7601</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>use
client driver
(S)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>This
parameter applies only to Windows NT/2000 clients. It has no
effect on Windows 95/98/ME clients. When serving a printer
to Windows NT/2000 clients without first installing a valid
printer driver on the Samba host, the client will be
required to install a local printer driver. From this point
on, the client will treat the print as a local printer and
not a network printer connection. This is much the same
behavior that will occur when disable spoolss =
yes.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>The
differentiating factor is that under normal circumstances,
the NT/2000 client will attempt to open the network printer
using MS&minus;RPC. The problem is that because the client
considers the printer to be local, it will attempt to issue
the OpenPrinterEx() call requesting access rights associated
with the logged on user. If the user possesses local
administrator rights but not root privilege on the Samba
host (often the case), the OpenPrinterEx() call will fail.
The result is that the client will now display an
&quot;Access Denied; Unable to connect&quot; message in the
printer queue window (even though jobs may successfully be
printed).</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>If
this parameter is enabled for a printer, then any attempt to
open the printer with the PRINTER_ACCESS_ADMINISTER right is
mapped to PRINTER_ACCESS_USE instead. Thus allowing the
OpenPrinterEx() call to succeed. <i>This parameter MUST not
be enabled on a print share which has valid print driver
installed on the Samba
server.</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>use client driver =
no</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>acl
allow execute always
(S)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>This
boolean parameter controls the behaviour of <b>smbd</b>(8)
when receiving a protocol request of &quot;open for
execution&quot; from a Windows client. With Samba 3.6 and
older, the execution right in the ACL was not checked, so a
client could execute a file even if it did not have execute
rights on the file. In Samba 4.0, this has been fixed, so
that by default, i.e. when this parameter is set to
&quot;False&quot;, &quot;open for execution&quot; is now
denied when execution permissions are not
present.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>If
this parameter is set to &quot;True&quot;, Samba does not
check execute permissions on &quot;open for execution&quot;,
thus re&minus;establishing the behaviour of Samba 3.6. This
can be useful to smoothen upgrades from older Samba versions
to 4.0 and newer. This setting is not meant to be used as a
permanent setting, but as a temporary relief: It is
recommended to fix the permissions in the ACLs and reset
this parameter to the default after a certain transition
period.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>acl allow execute always =
no</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>acl
check permissions
(S)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Please
note this parameter is now deprecated in Samba 3.6.2 and
will be removed in a future version of
Samba.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>This
boolean parameter controls what <b>smbd</b>(8) does on
receiving a protocol request of &quot;open for delete&quot;
from a Windows client. If a Windows client doesn't have
permissions to delete a file then they expect this to be
denied at open time. POSIX systems normally only detect
restrictions on delete by actually attempting to delete the
file or directory. As Windows clients can (and do)
&quot;back out&quot; a delete request by unsetting the
&quot;delete on close&quot; bit Samba cannot delete the file
immediately on &quot;open for delete&quot; request as we
cannot restore such a deleted file. With this parameter set
to true (the default) then smbd checks the file system
permissions directly on &quot;open for delete&quot; and
denies the request without actually deleting the file if the
file system permissions would seem to deny it. This is not
perfect, as it's possible a user could have deleted a file
without Samba being able to check the permissions correctly,
but it is close enough to Windows semantics for mostly
correct behaviour. Samba will correctly check POSIX ACL
semantics in this
case.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>If
this parameter is set to &quot;false&quot; Samba doesn't
check permissions on &quot;open for delete&quot; and allows
the open. If the user doesn't have permission to delete the
file this will only be discovered at close time, which is
too late for the Windows user tools to display an error
message to the user. The symptom of this is files that
appear to have been deleted &quot;magically&quot;
re&minus;appearing on a Windows explorer refresh. This is an
extremely advanced protocol option which should not need to
be changed. This parameter was introduced in its final form
in 3.0.21, an earlier version with slightly different
semantics was introduced in 3.0.20. That older version is
not documented
here.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>acl check permissions =
yes</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>acl
map full control
(S)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>This
boolean parameter controls whether <b>smbd</b>(8) maps a
POSIX ACE entry of &quot;rwx&quot; (read/write/execute), the
maximum allowed POSIX permission set, into a Windows ACL of
&quot;FULL CONTROL&quot;. If this parameter is set to true
any POSIX ACE entry of &quot;rwx&quot; will be returned in a
Windows ACL as &quot;FULL CONTROL&quot;, is this parameter
is set to false any POSIX ACE entry of &quot;rwx&quot; will
be returned as the specific Windows ACL bits representing
read, write and
execute.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>acl map full control =
yes</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>cldap
port
(G)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>This
option controls the port used by the CLDAP
protocol.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>cldap port =
389</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>cldap port =
3389</i></big></font></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>client
ipc max protocol
(G)</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>The
value of the parameter (a string) is the highest protocol
level that will be supported for IPC$ connections as DCERPC
transport.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>The
value <b>default</b> refers to the latest supported
protocol, currently
<b>SMB3_11</b>.</big></font></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><font color="#000000"><big>See</big></font>
<big><b><font color="#0000FF">client max protocol</font></b>
<font color="#000000">for a full list of available
protocols. The values CORE, COREPLUS, LANMAN1, LANMAN2 are
silently upgraded to
NT1.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client ipc max protocol =
default</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Example:
<i>client ipc max protocol =
SMB2_10</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">client
ipc min protocol
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">This
setting controls the minimum protocol version that the will
be attempted to use for IPC$ connections as DCERPC
transport.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">The
value <b>default</b> refers to the higher value of
<b>NT1</b> and the effective value of</font>
<b><font color="#0000FF">client min
protocol</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">See</font>
<b><font color="#0000FF">client max protocol</font></b>
<font color="#000000">for a full list of available
protocols. The values CORE, COREPLUS, LANMAN1, LANMAN2 are
silently upgraded to
NT1.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client ipc min protocol =
default</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Example:
<i>client ipc min protocol =
SMB3_11</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">client
max protocol
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">The
value of the parameter (a string) is the highest protocol
level that will be supported by the
client.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Possible
values are
:</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>CORE</b>: Earliest version. No concept of user
names.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>COREPLUS</b>: Slight improvements on CORE for
efficiency.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>LANMAN1</b>: First <i>modern</i> version of the protocol.
Long filename
support.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>LANMAN2</b>: Updates to Lanman1
protocol.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>NT1</b>: Current up to date version of the protocol. Used
by Windows NT. Known as
CIFS.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2</b>: Re&minus;implementation of the SMB protocol.
Used by Windows Vista and later versions of Windows. SMB2
has sub protocols
available.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_02</b>: The earliest SMB2
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_10</b>: Windows 7 SMB2
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_22</b>: Early Windows 8 SMB2
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_24</b>: Windows 8 beta SMB2
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">By
default SMB2 selects the SMB2_10
variant.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3</b>: The same as SMB2. Used by Windows 8. SMB3 has
sub protocols
available.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_00</b>: Windows 8 SMB3 version. (mostly the same as
SMB2_24)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_02</b>: Windows 8.1 SMB3
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_10</b>: early Windows 10 technical preview SMB3
version.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_11</b>: Windows 10 technical preview SMB3 version
(maybe
final).</font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">By
default SMB3 selects the SMB3_11
variant.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">The
value <b>default</b> refers to
<b>NT1</b>.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">IPC$
connections for DCERPC e.g. in winbindd, are handled by
the</font> <b><font color="#0000FF">client ipc max
protocol</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client max protocol =
default</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Example:
<i>client max protocol =
LANMAN1</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">client
min protocol
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">This
setting controls the minimum protocol version that the
client will attempt to
use.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">See
Related command:</font> <b><font color="#0000FF">client max
protocol</font></b> <font color="#000000">for a full list of
available
protocols.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">IPC$
connections for DCERPC e.g. in winbindd, are handled by
the</font> <b><font color="#0000FF">client ipc min
protocol</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client min protocol =
CORE</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Example:
<i>client min protocol =
NT1</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">client
use spnego
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">This
variable controls whether Samba clients will try to use
Simple and Protected NEGOciation (as specified by rfc2478)
with supporting servers (including WindowsXP, Windows2000
and Samba 3.0) to agree upon an authentication mechanism.
This enables Kerberos authentication in
particular.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">When</font>
<b><font color="#0000FF">client NTLMv2 auth</font></b>
<font color="#000000">is also set to <b>yes</b> extended
security (SPNEGO) is required in order to use NTLMv2 only
within NTLMSSP. This behavior was introduced with the
patches for
CVE&minus;2016&minus;2111.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client use spnego =
yes</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">dcerpc
endpoint servers
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Specifies
which DCE/RPC endpoint servers should be
run.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>dcerpc endpoint servers = epmapper, wkssvc, rpcecho,
samr, netlogon, lsarpc, spoolss, drsuapi, dssetup, unixinfo,
browser, eventlog6, backupkey,
dnsserver</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Example:
<i>dcerpc endpoint servers =
rpcecho</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">defer
sharing violations
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Windows
allows specifying how a file will be shared with other
processes when it is opened. Sharing violations occur when a
file is opened by a different process using options that
violate the share settings specified by other processes.
This parameter causes smbd to act as a Windows server does,
and defer returning a &quot;sharing violation&quot; error
message for up to one second, allowing the client to close
the file causing the violation in the
meantime.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">UNIX
by default does not have this
behaviour.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">There
should be no reason to turn off this parameter, as it is
designed to enable Samba to more correctly emulate
Windows.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>defer sharing violations =
yes</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">dgram
port
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Specifies
which ports the server should listen on for NetBIOS datagram
traffic.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>dgram port =
138</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">disable
netbios
(G)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">Enabling
this parameter will disable netbios support in Samba.
Netbios is the only available form of browsing in all
windows versions except for 2000 and
XP.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
Clients that only support netbios won't be able to see your
samba server when netbios support is
disabled.</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><font color="#000000">Default:
<i>disable netbios =
no</i></font></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000">durable
handles
(S)</font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000"><big>This
boolean parameter controls whether Samba can grant SMB2
durable file handles on a
share.</big></font></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><font color="#000000"><big>Note
that durable handles are only enabled if</big></font>
<big><b><font color="#0000FF">kernel oplocks =
no</font></b><font color="#000000">,</font>
<b><font color="#0000FF">kernel share modes =
no</font></b><font color="#000000">, and</font>
<b><font color="#0000FF">posix locking =
no</font></b><font color="#000000">, i.e. if the share is
configured for CIFS/SMB2 only access, not supporting
interoperability features with local UNIX processes or NFS
operations.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Also
note that, for the time being, durability is not granted for
a handle that has the delete on close flag
set.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>durable handles =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">ea
support
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will allow
clients to attempt to store OS/2 style Extended attributes
on a share. In order to enable this parameter the underlying
filesystem exported by the share must support extended
attributes (such as provided on XFS and EXT3 on Linux, with
the correct kernel patches). On Linux the filesystem must
have been mounted with the mount option user_xattr in order
for extended attributes to work, also extended attributes
must be compiled into the Linux
kernel.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>ea support =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">enable
asu support
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Hosts
running the &quot;Advanced Server for Unix (ASU)&quot;
product require some special accomodations such as creating
a builtin [ADMIN$] share that only supports IPC connections.
The has been the default behavior in smbd for many years.
However, certain Microsoft applications such as the Print
Migrator tool require that the remote server support an
[ADMIN$] file share. Disabling this parameter allows for
creating an [ADMIN$] file share in
smb.conf.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>enable asu support =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">eventlog
list
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option defines a list of log names that Samba will report to
the Microsoft EventViewer utility. The listed eventlogs will
be associated with tdb file on disk in the
$(statedir)/eventlog.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
administrator must use an external process to parse the
normal Unix logs such as /var/log/messages and write then
entries to the eventlog tdb files. Refer to the
eventlogadm(8) utility for how to write eventlog
entries.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>eventlog list
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>eventlog list = Security Application Syslog
Apache</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">large
readwrite
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbd</b>(8) supports
the new 64k streaming read and write variant SMB requests
introduced with Windows 2000. Note that due to Windows 2000
client redirector bugs this requires Samba to be running on
a 64&minus;bit capable operating system such as IRIX,
Solaris or a Linux 2.4 kernel. Can improve performance by
10% with Windows 2000 clients. Defaults to on. Not as tested
as some other Samba code
paths.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>large readwrite =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">map
acl inherit
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will
attempt to map the 'inherit' and 'protected' access control
entry flags stored in Windows ACLs into an extended
attribute called user.SAMBA_PAI. This parameter only takes
effect if Samba is being run on a platform that supports
extended attributes (Linux and IRIX so far) and allows the
Windows 2000 ACL editor to correctly use inheritance with
the Samba POSIX ACL mapping
code.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>map acl inherit =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">max
mux
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option controls the maximum number of outstanding
simultaneous SMB operations that Samba tells the client it
will allow. You should never need to set this
parameter.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max mux =
50</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">max
ttl
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option tells <b>nmbd</b>(8) what the default 'time to live'
of NetBIOS names should be (in seconds) when nmbd is
requesting a name using either a broadcast packet or from a
WINS server. You should never need to change this parameter.
The default is 3
days.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max ttl =
259200</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">max
wins ttl
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option tells <b>smbd</b>(8) when acting as a WINS server
(</font><b><font color="#0000FF">wins support =
yes</font></b><font color="#000000">) what the maximum 'time
to live' of NetBIOS names that nmbd will grant will be (in
seconds). You should never need to change this parameter.
The default is 6 days (518400
seconds).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max wins ttl =
518400</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">max
xmit
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option controls the maximum packet size that will be
negotiated by Samba. The default is 16644, which matches the
behavior of Windows 2000. A value below 2048 is likely to
cause problems. You should never need to change this
parameter from its default
value.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max xmit =
16644</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>max xmit =
8192</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">min
receivefile size
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option changes the behavior of <b>smbd</b>(8) when
processing SMBwriteX calls. Any incoming SMBwriteX call on a
non&minus;signed SMB/CIFS connection greater than this value
will not be processed in the normal way but will be passed
to any underlying kernel recvfile or splice system call (if
there is no such call Samba will emulate in user space).
This allows zero&minus;copy writes directly from network
socket buffers into the filesystem buffer cache, if
available. It may improve performance but user testing is
recommended. If set to zero Samba processes SMBwriteX calls
in the normal way. To enable POSIX large write support
(SMB/CIFS writes up to 16Mb) this option must be nonzero.
The maximum value is 128k. Values greater than 128k will be
silently set to
128k.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
this option will have NO EFFECT if set on a SMB signed
connection.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
default is zero, which disables this
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>min receivefile size =
0</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">min
wins ttl
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option tells <b>nmbd</b>(8) when acting as a WINS server
(</font><b><font color="#0000FF">wins support =
yes</font></b><font color="#000000">) what the minimum 'time
to live' of NetBIOS names that nmbd will grant will be (in
seconds). You should never need to change this parameter.
The default is 6 hours (21600
seconds).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>min wins ttl =
21600</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">name
resolve order
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option is used by the programs in the Samba suite to
determine what naming services to use and in what order to
resolve host names to IP addresses. Its main purpose to is
to control how netbios name resolution is performed. The
option takes a space separated string of name resolution
options.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
options are: &quot;lmhosts&quot;, &quot;host&quot;,
&quot;wins&quot; and &quot;bcast&quot;. They cause names to
be resolved as
follows:</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>lmhosts</b> : Lookup an IP address in the Samba lmhosts
file. If the line in lmhosts has no name type attached to
the NetBIOS name (see the manpage for lmhosts for details)
then any name type matches for
lookup.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>host</b> : Do a standard host name to IP address
resolution, using the system /etc/hosts, NIS, or DNS
lookups. This method of name resolution is operating system
depended for instance on IRIX or Solaris this may be
controlled by the /etc/nsswitch.conf file. Note that this
method is used only if the NetBIOS name type being queried
is the 0x20 (server) name type or 0x1c (domain controllers).
The latter case is only useful for active directory domains
and results in a DNS query for the SRV RR entry matching
_ldap._tcp.domain.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>wins</b> : Query a name with the IP address listed in
the</font> <b><font color="#0000FF">WINSSERVER</font></b>
<font color="#000000">parameter. If no WINS server has been
specified this method will be
ignored.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>bcast</b> : Do a broadcast on each of the known local
interfaces listed in the</font>
<b><font color="#0000FF">interfaces</font></b>
<font color="#000000">parameter. This is the least reliable
of the name resolution methods as it depends on the target
host being on a locally connected
subnet.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
example below will cause the local lmhosts file to be
examined first, followed by a broadcast attempt, followed by
a normal system hostname
lookup.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
Samba is functioning in ADS security mode (security = ads)
it is advised to use following settings for <i>name resolve
order</i>:</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">name
resolve order = wins
bcast</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">DC
lookups will still be done via DNS, but fallbacks to netbios
names will not inundate your DNS servers with needless
querys for DOMAIN&lt;0x1c&gt;
lookups.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>name resolve order = lmhosts wins host
bcast</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>name resolve order = lmhosts bcast
host</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">nbt
port
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
which port the server should use for NetBIOS over IP name
services
traffic.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>nbt port =
137</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">nt
acl support
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will
attempt to map UNIX permissions into Windows NT access
control lists. The UNIX permissions considered are the
traditional UNIX owner and group permissions, as well as
POSIX ACLs set on any files or directories. This parameter
was formally a global parameter in releases prior to
2.2.2.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>nt acl support =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">nt
pipe support
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will allow
Windows NT clients to connect to the NT SMB specific
<b>IPC$</b> pipes. This is a developer debugging option and
can be left
alone.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>nt pipe support =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">nt
status support
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will
negotiate NT specific status support with Windows NT/2k/XP
clients. This is a developer debugging option and should be
left alone. If this option is set to <b>no</b> then Samba
offers exactly the same DOS error codes that versions prior
to Samba 2.2.3
reported.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">You
should not need to ever disable this
parameter.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>nt status support =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">profile
acls
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter was added to fix the problems that people
have been having with storing user profiles on Samba shares
from Windows 2000 or Windows XP clients. New versions of
Windows 2000 or Windows XP service packs do security ACL
checking on the owner and ability to write of the profile
directory stored on a local workstation when copied from a
Samba
share.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
not in domain mode with winbindd then the security info
copied onto the local workstation has no meaning to the
logged in user (SID) on that workstation so the profile
storing fails. Adding this parameter onto a share used for
profile storage changes two things about the returned
Windows ACL. Firstly it changes the owner and group owner of
all reported files and directories to be
BUILTIN\\Administrators, BUILTIN\\Users respectively (SIDs
S&minus;1&minus;5&minus;32&minus;544,
S&minus;1&minus;5&minus;32&minus;545). Secondly it adds an
ACE entry of &quot;Full Control&quot; to the SID
BUILTIN\\Users to every returned ACL. This will allow any
Windows 2000 or XP workstation user to access the
profile.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that if you have multiple users logging on to a workstation
then in order to prevent them from being able to access each
others profiles you must remove the &quot;Bypass traverse
checking&quot; advanced user right. This will prevent access
to other users profile directories as the top level profile
directory (named after the user) is created by the
workstation profile code and has an ACL restricting entry to
the directory tree to the owning
user.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that this parameter should be set to yes on dedicated
profile shares only. On other shares, it might cause
incorrect file
ownerships.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>profile acls =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">read
raw
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is ignored if</font> <b><font color="#0000FF">async smb echo
handler</font></b> <font color="#000000">is set, because
this feature is incompatible with raw read SMB
requests</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
enabled, raw reads allow reads of 65535 bytes in one packet.
This typically provides a major performance benefit for some
very, very old
clients.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">However,
some clients either negotiate the allowable block size
incorrectly or are incapable of supporting larger block
sizes, and for these clients you may need to disable raw
reads.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
general this parameter should be viewed as a system tuning
tool and left severely
alone.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>read raw =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">rpc
big endian
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Setting
this option will force the RPC client and server to transfer
data in big
endian.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
it is disabled, data will be transferred in little
endian.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
behaviour is independent of the endianness of the host
machine.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>rpc big endian =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">max
protocol</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for server max
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">protocol</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for server max
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">server
max protocol
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
value of the parameter (a string) is the highest protocol
level that will be supported by the
server.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Possible
values are
:</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>LANMAN1</b>: First <i>modern</i> version of the protocol.
Long filename
support.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>LANMAN2</b>: Updates to Lanman1
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>NT1</b>: Current up to date version of the protocol. Used
by Windows NT. Known as
CIFS.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2</b>: Re&minus;implementation of the SMB protocol.
Used by Windows Vista and later versions of Windows. SMB2
has sub protocols
available.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_02</b>: The earliest SMB2
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_10</b>: Windows 7 SMB2
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_22</b>: Early Windows 8 SMB2
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB2_24</b>: Windows 8 beta SMB2
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">By
default SMB2 selects the SMB2_10
variant.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3</b>: The same as SMB2. Used by Windows 8. SMB3 has
sub protocols
available.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_00</b>: Windows 8 SMB3 version. (mostly the same as
SMB2_24)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_02</b>: Windows 8.1 SMB3
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_10</b>: early Windows 10 technical preview SMB3
version.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>SMB3_11</b>: Windows 10 technical preview SMB3 version
(maybe
final).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">By
default SMB3 selects the SMB3_11
variant.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server max protocol =
SMB3</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>server max protocol =
LANMAN1</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">min
protocol</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for server min
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">server
min protocol
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
setting controls the minimum protocol version that the
server will allow the client to
use.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Normally
this option should not be set as the automatic negotiation
phase in the SMB protocol takes care of choosing the
appropriate
protocol.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">See
Related command:</font> <b><font color="#0000FF">server max
protocol</font></b> <font color="#000000">for a full list of
available
protocols.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server min protocol =
LANMAN1</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>server min protocol =
NT1</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">server
multi channel support
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether <b>smbd</b>(8) will
support SMB3
multi&minus;channel.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter has been added with version
4.4.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Warning:
Note that this feature is considered experimental in Samba
4.4. Use it at your own risk: Even though it may seem to
work well in testing, it may result in data corruption under
some race conditions. Future 4.4.x release may improve this
situation.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server multi channel support =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">share:fake_fscaps
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is needed to support some special application that makes
QFSINFO calls to check whether we set the SPARSE_FILES bit
(0x40). If this bit is not set that particular application
refuses to work against Samba. With</font>
<b><font color="#0000FF">share:fake_fscaps = 64</font></b>
<font color="#000000">the SPARSE_FILES file system
capability flag is set. Use other decimal values to specify
the bitmask you need to
fake.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>share:fake_fscaps =
0</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">smb2
max credits
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option controls the maximum number of outstanding
simultaneous SMB2 operations that Samba tells the client it
will allow. This is similar to the</font>
<b><font color="#0000FF">max mux</font></b>
<font color="#000000">parameter for SMB1. You should never
need to set this
parameter.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
default is 8192 credits, which is the same as a Windows
2008R2 SMB2
server.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb2 max credits =
8192</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">smb2
max read
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option specifies the protocol value that <b>smbd</b>(8) will
return to a client, informing the client of the largest size
that may be returned by a single SMB2 read
call.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
maximum is 8388608 bytes (8MiB), which is the same as a
Windows Server 2012
r2.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Please
note that the default is 8MiB, but it's limit is based on
the smb2 dialect (64KiB for SMB == 2.0, 8MiB for SMB &gt;=
2.1 with LargeMTU). Large MTU is not supported over NBT (tcp
port
139).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb2 max read =
8388608</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">smb2
max trans
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option specifies the protocol value that <b>smbd</b>(8) will
return to a client, informing the client of the largest size
of buffer that may be used in querying file meta&minus;data
via QUERY_INFO and related SMB2
calls.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
maximum is 8388608 bytes (8MiB), which is the same as a
Windows Server 2012
r2.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Please
note that the default is 8MiB, but it's limit is based on
the smb2 dialect (64KiB for SMB == 2.0, 1MiB for SMB &gt;=
2.1 with LargeMTU). Large MTU is not supported over NBT (tcp
port
139).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb2 max trans =
8388608</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">smb2
max write
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option specifies the protocol value that <b>smbd</b>(8) will
return to a client, informing the client of the largest size
that may be sent to the server by a single SMB2 write
call.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
maximum is 8388608 bytes (8MiB), which is the same as a
Windows Server 2012
r2.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Please
note that the default is 8MiB, but it's limit is based on
the smb2 dialect (64KiB for SMB == 2.0, 8MiB for SMB =&gt;
2.1 with LargeMTU). Large MTU is not supported over NBT (tcp
port
139).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb2 max write =
8388608</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">smb
ports
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
which ports the server should listen on for SMB
traffic.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb ports = 445
139</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">svcctl
list
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option defines a list of init scripts that smbd will use for
starting and stopping Unix services via the Win32
ServiceControl API. This allows Windows administrators to
utilize the MS Management Console plug&minus;ins to manage a
Unix server running
Samba.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
administrator must create a directory name svcctl in Samba's
$(libdir) and create symbolic links to the init scripts in
/etc/init.d/. The name of the links must match the names
given as part of the <i>svcctl
list</i>.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>svcctl list
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>svcctl list = cups postfix portmap
httpd</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">time
server
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines if <b>nmbd</b>(8) advertises itself as
a time server to Windows
clients.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>time server =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">unicode
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
whether the server and client should support
unicode.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
this option is set to false, the use of ASCII will be
forced.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>unicode =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">unix
extensions
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether Samba implements the CIFS
UNIX extensions, as defined by HP. These extensions enable
Samba to better serve UNIX CIFS clients by supporting
features such as symbolic links, hard links, etc... These
extensions require a similarly enabled client, and are of no
current use to Windows
clients.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
if this parameter is turned on, the</font>
<b><font color="#0000FF">wide links</font></b>
<font color="#000000">parameter will automatically be
disabled.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">See
the parameter</font> <b><font color="#0000FF">allow insecure
wide links</font></b> <font color="#000000">if you wish to
change this coupling between the two
parameters.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>unix extensions =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">use
spnego
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
deprecated variable controls whether samba will try to use
Simple and Protected NEGOciation (as specified by rfc2478)
with WindowsXP and Windows2000 clients to agree upon an
authentication
mechanism.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Unless
further issues are discovered with our SPNEGO
implementation, there is no reason this should ever be
disabled.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>use spnego =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">web
port
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
which port the Samba web server should listen
on.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>web port =
901</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>web port =
80</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">write
raw
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is ignored if</font> <b><font color="#0000FF">async smb echo
handler</font></b> <font color="#000000">is set, because
this feature is incompatible with raw write SMB
requests</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
enabled, raw writes allow writes of 65535 bytes in one
packet. This typically provides a major performance benefit
for some very, very old
clients.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">However,
some clients either negotiate the allowable block size
incorrectly or are incapable of supporting larger block
sizes, and for these clients you may need to disable raw
writes.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
general this parameter should be viewed as a system tuning
tool and left severely
alone.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>write raw =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">access
based share enum
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is <b>yes</b> for a service, then the share
hosted by the service will only be visible to users who have
read or write access to the share during share enumeration
(for example net view \\sambaserver). The share ACLs which
allow or deny the access to the share can be modified using
for example the sharesec command or using the appropriate
Windows tools. This has parallels to access based
enumeration, the main difference being that only share
permissions are evaluated, and security descriptors on files
contained on the share are not used in computing enumeration
access
rights.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>access based share enum =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">acl
group control
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
a POSIX filesystem, only the owner of a file or directory
and the superuser can modify the permissions and ACLs on a
file. If this parameter is set, then Samba overrides this
restriction, and also allows the <i>primary group owner</i>
of a file or directory to modify the permissions and ACLs on
that
file.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">On
a Windows server, groups may be the owner of a file or
directory &minus; thus allowing anyone in that group to
modify the permissions on it. This allows the delegation of
security controls on a point in the filesystem to the group
owner of a directory and anything below it also owned by
that group. This means there are multiple people with
permissions to modify ACLs on a file or directory, easing
manageability.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter allows Samba to also permit delegation of the
control over a point in the exported directory hierarchy in
much the same way as Windows. This allows all members of a
UNIX group to control the permissions on a file or directory
they have group ownership
on.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is best used with the</font>
<b><font color="#0000FF">inherit owner</font></b>
<font color="#000000">option and also on a share containing
directories with the UNIX <i>setgid bit</i> set on them,
which causes new files and directories created within it to
inherit the group ownership from the containing
directory.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter was deprecated in Samba 3.0.23, but
re&minus;activated in Samba 3.0.31 and above, as it now only
controls permission changes if the user is in the owning
primary group. It is now no longer equivalent to the <i>dos
filemode</i>
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>acl group control =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">admin
users
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of users who will be granted administrative
privileges on the share. This means that they will do all
file operations as the super&minus;user
(root).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">You
should use this option very carefully, as any user in this
list will be able to do anything they like on the share,
irrespective of file
permissions.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>admin users
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>admin users =
jason</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">algorithmic
rid base
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
determines how Samba will use its algorithmic mapping from
uids/gid to the RIDs needed to construct NT Security
Identifiers.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Setting
this option to a larger value could be useful to sites
transitioning from WinNT and Win2k, as existing user and
group rids would otherwise clash with system users
etc.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">All
UIDs and GIDs must be able to be resolved into SIDs for the
correct operation of ACLs on the server. As such the
algorithmic mapping can't be 'turned off', but pushing it
'out of the way' should resolve the issues. Users and groups
can then be assigned 'low' RIDs in arbitrary&minus;rid
supporting
backends.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>algorithmic rid base =
1000</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>algorithmic rid base =
100000</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">allow
dcerpc auth level connect
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option controls whether DCERPC services are allowed to be
used with DCERPC_AUTH_LEVEL_CONNECT, which provides
authentication, but no per message integrity nor privacy
protection.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Some
interfaces like samr, lsarpc and netlogon have a
hard&minus;coded default of <b>no</b> and epmapper, mgmt and
rpcecho have a hard&minus;coded default of
<b>yes</b>.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
behavior can be overwritten per interface name (e.g. lsarpc,
netlogon, samr, srvsvc, winreg, wkssvc ...) by using 'allow
dcerpc auth level connect:interface = yes' as
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option yields precedence to the implementation specific
restrictions. E.g. the drsuapi and backupkey protocols
require DCERPC_AUTH_LEVEL_PRIVACY. The dnsserver protocol
requires
DCERPC_AUTH_LEVEL_INTEGRITY.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>allow dcerpc auth level connect =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>allow dcerpc auth level connect =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">allow
trusted domains
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option only takes effect when the</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">option is set to <b>server</b>,
<b>domain</b> or <b>ads</b>. If it is set to no, then
attempts to connect to a resource from a domain or workgroup
other than the one which smbd is running in will fail, even
if that domain is trusted by the remote server doing the
authentication.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is useful if you only want your Samba server to serve
resources to users in the domain it is a member of. As an
example, suppose that there are two domains DOMA and DOMB.
DOMB is trusted by DOMA, which contains the Samba server.
Under normal circumstances, a user with an account in DOMB
can then access the resources of a UNIX account with the
same account name on the Samba server even if they do not
have an account in DOMA. This can make implementing a
security boundary
difficult.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>allow trusted domains =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">auth
methods
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option allows the administrator to chose what authentication
methods smbd will use when authenticating a user. This
option defaults to sensible values based on</font>
<b><font color="#0000FF">security</font></b><font color="#000000">.
This should be considered a developer option and used only
in rare circumstances. In the majority (if not all) of
production servers, the default setting should be
adequate.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Each
entry in the list attempts to authenticate the user in turn,
until the user authenticates. In practice only one method
will ever actually be able to complete the
authentication.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Possible
options include <b>guest</b> (anonymous access), <b>sam</b>
(lookups in local list of accounts based on netbios name or
domain name), <b>winbind</b> (relay authentication requests
for remote users through winbindd), <b>ntdomain</b>
(pre&minus;winbindd method of authentication for remote
domain users; deprecated in favour of winbind method),
<b>trustdomain</b> (authenticate trusted users by contacting
the remote DC directly from smbd; deprecated in favour of
winbind
method).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>auth methods
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>auth methods = guest sam
winbind</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">check
password script
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
name of a program that can be used to check password
complexity. The password is sent to the program's standard
input.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
program must return 0 on a good password, or any other value
if the password is bad. In case the password is considered
weak (the program does not return 0) the user will be
notified and the password change will
fail.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note:
In the example directory is a sample program called
crackcheck that uses cracklib to check the password
quality.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>check password script = #
Disabled</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>check password script =
/usr/local/sbin/crackcheck</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
ipc signing
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
controls whether the client is allowed or required to use
SMB signing for IPC$ connections as DCERPC transport.
Possible values are <i>auto</i>, <i>mandatory</i> and
<i>disabled</i>.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
set to mandatory or default, SMB signing is
required.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
set to auto, SMB signing is offered, but not enforced and if
set to disabled, SMB signing is not offered
either.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Connections
from winbindd to Active Directory Domain Controllers always
enforce
signing.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client ipc signing =
default</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
lanman auth
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbclient</b>(8) and
other samba client tools will attempt to authenticate itself
to servers using the weaker LANMAN password hash. If
disabled, only server which support NT password hashes (e.g.
Windows NT/2000, Samba, etc... but not Windows 95/98) will
be able to be connected from the Samba
client.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
LANMAN encrypted response is easily broken, due to its
case&minus;insensitive nature, and the choice of algorithm.
Clients without Windows 95/98 servers are advised to disable
this
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Disabling
this option will also disable the client plaintext auth
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Likewise,
if the client ntlmv2 auth parameter is enabled, then only
NTLMv2 logins will be
attempted.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client lanman auth =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
NTLMv2 auth
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbclient</b>(8) will
attempt to authenticate itself to servers using the NTLMv2
encrypted password
response.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
enabled, only an NTLMv2 and LMv2 response (both much more
secure than earlier versions) will be sent. Older servers
(including NT4 &lt; SP4, Win9x and Samba 2.2) are not
compatible with NTLMv2 when not in an NTLMv2 supporting
domain</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Similarly,
if enabled, NTLMv1, client lanman auth and client plaintext
auth authentication will be disabled. This also disables
share&minus;level
authentication.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
disabled, an NTLM response (and possibly a LANMAN response)
will be sent by the client, depending on the value of client
lanman
auth.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that Windows Vista and later versions already use NTLMv2 by
default, and some sites (particularly those following 'best
practice' security polices) only allow NTLMv2 responses, and
not the weaker LM or
NTLM.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When</font>
<b><font color="#0000FF">client use spnego</font></b>
<font color="#000000">is also set to <b>yes</b> extended
security (SPNEGO) is required in order to use NTLMv2 only
within NTLMSSP. This behavior was introduced with the
patches for
CVE&minus;2016&minus;2111.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client NTLMv2 auth =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
plaintext auth
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
whether a client should send a plaintext password if the
server does not support encrypted
passwords.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client plaintext auth =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
schannel
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
controls whether the client offers or even demands the use
of the netlogon schannel.</font>
<b><font color="#0000FF">client schannel = no</font></b>
<font color="#000000">does not offer the schannel,</font>
<b><font color="#0000FF">client schannel = auto</font></b>
<font color="#000000">offers the schannel but does not
enforce it, and</font> <b><font color="#0000FF">client
schannel = yes</font></b> <font color="#000000">denies
access if the server is not able to speak netlogon
schannel.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that for active directory domains this is hardcoded
to</font> <b><font color="#0000FF">client schannel =
yes</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
option yields precedence to the</font>
<b><font color="#0000FF">require strong key</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client schannel =
auto</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>client schannel =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
signing
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
controls whether the client is allowed or required to use
SMB signing. Possible values are <i>auto</i>,
<i>mandatory</i> and
<i>disabled</i>.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
set to auto or default, SMB signing is offered, but not
enforced.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
set to mandatory, SMB signing is required and if set to
disabled, SMB signing is not offered
either.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">IPC$
connections for DCERPC e.g. in winbindd, are handled by
the</font> <b><font color="#0000FF">client ipc
signing</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client signing =
default</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">client
use spnego principal
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbclient</b>(8) and
other samba components acting as a client will attempt to
use the server&minus;supplied principal sometimes given in
the SPNEGO
exchange.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
enabled, Samba can attempt to use Kerberos to contact
servers known only by IP address. Kerberos relies on names,
so ordinarily cannot function in this
situation.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is a VERY BAD IDEA for security reasons, and so this
parameter SHOULD NOT BE USED. It will be removed in a future
version of
Samba.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
disabled, Samba will use the name used to look up the server
when asking the KDC for a ticket. This avoids situations
where a server may impersonate another, soliciting
authentication as one principal while being known on the
network as
another.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that Windows XP SP2 and later versions already follow this
behaviour, and Windows Vista and later servers no longer
supply this 'rfc4178 hint' principal on the server
side.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is deprecated in Samba 4.2.1 and will be removed
(along with the functionality) in a later release of
Samba.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>client use spnego principal =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">create
mode</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for create
mask.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">create
mask
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
a file is created, the necessary permissions are calculated
according to the mapping from DOS modes to UNIX permissions,
and the resulting UNIX mode is then bit&minus;wise 'AND'ed
with this parameter. This parameter may be thought of as a
bit&minus;wise MASK for the UNIX modes of a file. Any bit
<i>not</i> set here will be removed from the modes set on a
file when it is
created.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
default value of this parameter removes the group and other
write and execute bits from the UNIX
modes.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Following
this Samba will bit&minus;wise 'OR' the UNIX mode created
from this parameter with the value of the</font>
<b><font color="#0000FF">force create mode</font></b>
<font color="#000000">parameter which is set to 000 by
default.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter does not affect directory masks. See the
parameter</font> <b><font color="#0000FF">directory
mask</font></b> <font color="#000000">for
details.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>create mask =
0744</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>create mask =
0775</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">dedicated
keytab file
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Specifies
the path to the kerberos keytab file when</font>
<b><font color="#0000FF">kerberos method</font></b>
<font color="#000000">is set to &quot;dedicated
keytab&quot;.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>dedicated keytab file
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>dedicated keytab file =
/usr/local/etc/krb5.keytab</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">directory
mode</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for directory
mask.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">directory
mask
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is the octal modes which are used when converting
DOS modes to UNIX modes when creating UNIX
directories.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">When
a directory is created, the necessary permissions are
calculated according to the mapping from DOS modes to UNIX
permissions, and the resulting UNIX mode is then
bit&minus;wise 'AND'ed with this parameter. This parameter
may be thought of as a bit&minus;wise MASK for the UNIX
modes of a directory. Any bit <i>not</i> set here will be
removed from the modes set on a directory when it is
created.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
default value of this parameter removes the 'group' and
'other' write bits from the UNIX mode, allowing only the
user who owns the directory to modify
it.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Following
this Samba will bit&minus;wise 'OR' the UNIX mode created
from this parameter with the value of the</font>
<b><font color="#0000FF">force directory mode</font></b>
<font color="#000000">parameter. This parameter is set to
000 by default (i.e. no extra mode bits are
added).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>directory mask =
0755</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>directory mask =
0775</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">directory
security mask
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter has been removed for Samba
4.0.0.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">encrypt
passwords
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
boolean controls whether encrypted passwords will be
negotiated with the client. Note that Windows NT 4.0 SP3 and
above and also Windows 98 will by default expect encrypted
passwords unless a registry entry is changed. To use
encrypted passwords in Samba see the chapter &quot;User
Database&quot; in the Samba HOWTO
Collection.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">MS
Windows clients that expect Microsoft encrypted passwords
and that do not have plain text password support enabled
will be able to connect only to a Samba server that has
encrypted password support enabled and for which the user
accounts have a valid encrypted password. Refer to the
smbpasswd command man page for information regarding the
creation of encrypted passwords for user
accounts.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
use of plain text passwords is NOT advised as support for
this feature is no longer maintained in Microsoft Windows
products. If you want to use plain text passwords you must
set this parameter to
no.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
order for encrypted passwords to work correctly
<b>smbd</b>(8) must either have access to a local
<b>smbpasswd</b>(5) file (see the <b>smbpasswd</b>(8)
program for information on how to set up and maintain this
file), or set the</font> <b><font color="#0000FF">security =
[domain|ads]</font></b> <font color="#000000">parameter
which causes smbd to authenticate against another
server.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>encrypt passwords =
yes</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
create mode
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies a set of UNIX mode bit permissions that
will <i>always</i> be set on a file created by Samba. This
is done by bitwise 'OR'ing these bits onto the mode bits of
a file that is being created. The default for this parameter
is (in octal) 000. The modes in this parameter are bitwise
'OR'ed onto the file mode after the mask set in the
<i>create mask</i> parameter is
applied.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
example below would force all newly created files to have
read and execute permissions set for 'group' and 'other' as
well as the read/write/execute bits set for the
'user'.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>force create mode =
0000</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>force create mode =
0755</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
directory mode
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies a set of UNIX mode bit permissions that
will <i>always</i> be set on a directory created by Samba.
This is done by bitwise 'OR'ing these bits onto the mode
bits of a directory that is being created. The default for
this parameter is (in octal) 0000 which will not add any
extra permission bits to a created directory. This operation
is done after the mode mask in the parameter <i>directory
mask</i> is
applied.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">The
example below would force all created directories to have
read and execute permissions set for 'group' and 'other' as
well as the read/write/execute bits set for the
'user'.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>force directory mode =
0000</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>force directory mode =
0755</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
directory security mode
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter has been removed for Samba
4.0.0.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">group</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for force
group.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
group
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
specifies a UNIX group name that will be assigned as the
default primary group for all users connecting to this
service. This is useful for sharing files by ensuring that
all access to files on service will use the named group for
their permissions checking. Thus, by assigning permissions
for this group to the files and directories within this
service the Samba administrator can restrict or allow
sharing of these
files.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
Samba 2.0.5 and above this parameter has extended
functionality in the following way. If the group name listed
here has a '+' character prepended to it then the current
user accessing the share only has the primary group default
assigned to this group if they are already assigned as a
member of that group. This allows an administrator to decide
that only users who are already in a particular group will
create files with group ownership set to that group. This
gives a finer granularity of ownership assignment. For
example, the setting force group = +sys means that only
users who are already in group sys will have their default
primary group assigned to sys when accessing this Samba
share. All other users will retain their ordinary primary
group.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
the</font> <b><font color="#0000FF">force user</font></b>
<font color="#000000">parameter is also set the group
specified in <i>force group</i> will override the primary
group set in <i>force
user</i>.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>force group
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>force group =
agroup</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
security mode
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter has been removed for Samba
4.0.0.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
unknown acl user
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is set, a Windows NT ACL that contains an
unknown SID (security descriptor, or representation of a
user or group id) as the owner or group owner of the file
will be silently mapped into the current UNIX uid or gid of
the currently connected
user.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is designed to allow Windows NT clients to copy files and
folders containing ACLs that were created locally on the
client machine and contain users local to that machine only
(no domain users) to be copied to a Samba server (usually
with XCOPY /O) and have the unknown userid and groupid of
the file owner map to the current connected user. This can
only be fixed correctly when winbindd allows arbitrary
mapping from any Windows NT SID to a UNIX uid or
gid.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Try
using this parameter when XCOPY /O gives an ACCESS_DENIED
error.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>force unknown acl user =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">force
user
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
specifies a UNIX user name that will be assigned as the
default user for all users connecting to this service. This
is useful for sharing files. You should also use it
carefully as using it incorrectly can cause security
problems.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
user name only gets used once a connection is established.
Thus clients still need to connect as a valid user and
supply a valid password. Once connected, all file operations
will be performed as the &quot;forced user&quot;, no matter
what username the client connected as. This can be very
useful.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">In
Samba 2.0.5 and above this parameter also causes the primary
group of the forced user to be used as the primary group for
all file activity. Prior to 2.0.5 the primary group was left
as the primary group of the connecting user (this was a
bug).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>force user
=</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>force user =
auser</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">guest
account
(G)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
is a username which will be used for access to services
which are specified as</font> <b><font color="#0000FF">guest
ok</font></b> <font color="#000000">(see below). Whatever
privileges this user has will be available to any client
connecting to the guest service. This user must exist in the
password file, but does not require a valid login. The user
account &quot;ftp&quot; is often a good choice for this
parameter.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">On
some systems the default guest account &quot;nobody&quot;
may not be able to print. Use another account in this case.
You should test this by trying to log in as your guest user
(perhaps by using the su &minus; command) and trying to
print using the system print command such as lpr(1) or
lp(1).</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter does not accept % macros, because many parts of
the system require this value to be constant for correct
operation.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>guest account = nobody # default can be changed at
compile&minus;time</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>guest account =
ftp</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">public</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for guest
ok.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">guest
ok
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is <b>yes</b> for a service, then no password
is required to connect to the service. Privileges will be
those of the</font> <b><font color="#0000FF">guest
account</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter nullifies the benefits of setting</font>
<b><font color="#0000FF">restrict anonymous =
2</font></b></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">See
the section below on</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">for more information about this
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>guest ok =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">only
guest</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for guest
only.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">guest
only
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is <b>yes</b> for a service, then only guest
connections to the service are permitted. This parameter
will have no effect if</font> <b><font color="#0000FF">guest
ok</font></b> <font color="#000000">is not set for the
service.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">See
the section below on</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">for more information about this
option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>guest only =
no</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">allow
hosts</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for hosts
allow.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
allow
(S)</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">A
synonym for this parameter is</font>
<b><font color="#0000FF">allow
hosts</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a comma, space, or tab delimited set of hosts
which are permitted to access a
service.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">If
specified in the [global] section then it will apply to all
services, regardless of whether the individual service has a
different
setting.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">You
can specify the hosts by name or IP number. For example, you
could restrict access to only the hosts on a Class C subnet
with something like allow hosts = 150.203.5.. The full
syntax of the list is described in the man page
hosts_access(5). Note that this man page may not be present
on your system, so a brief description will be given here
also.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Note
that the localhost address 127.0.0.1 will always be allowed
access unless specifically denied by a</font>
<b><font color="#0000FF">hosts deny</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">You
can also specify hosts by network/netmask pairs and by
netgroup names if your system supports netgroups. The
<i>EXCEPT</i> keyword can also be used to limit a wildcard
list. The following examples may provide some
help:</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example
1: allow all IPs in 150.203.*.*; except
one</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
allow = 150.203. EXCEPT
150.203.6.66</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example
2: allow hosts that match the given
network/netmask</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
allow =
150.203.15.0/255.255.255.0</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example
3: allow a couple of
hosts</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
allow = lapland,
arvidsjaur</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example
4: allow only hosts in NIS netgroup &quot;foonet&quot;, but
deny access from one particular
host</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
allow =
@foonet</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">hosts
deny =
pirate</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
Note that access still requires suitable user&minus;level
passwords.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><font color="#000000">See
<b>testparm</b>(1) for a way of testing your host access to
see if it does what you
expect.</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>hosts allow = # none (i.e., all hosts permitted
access)</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>hosts allow = 150.203.5.
myhost.mynet.edu.au</i></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000">deny
hosts</font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><big>This
parameter is a synonym for hosts
deny.</big></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><big>hosts
deny
(S)</big></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><big>The
opposite of <i>hosts allow</i> &minus; hosts listed here are
<i>NOT</i> permitted access to services unless the specific
services have their own lists to override this one. Where
the lists conflict, the <i>allow</i> list takes
precedence.</big></font></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><font color="#000000"><big>In
the event that it is necessary to deny all by default, use
the keyword ALL (or the netmask 0.0.0.0/0) and then
explicitly specify to the</big></font>
<big><b><font color="#0000FF">hosts allow = hosts
allow</font></b> <font color="#000000">parameter those hosts
that should be permitted
access.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>hosts deny = # none (i.e., no hosts specifically
excluded)</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>hosts deny = 150.203.4.
badhost.mynet.edu.au</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">inherit
acls
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter can be used to ensure that if default acls exist
on parent directories, they are always honored when creating
a new file or subdirectory in these parent directories. The
default behavior is to use the unix mode specified when
creating the directory. Enabling this option sets the unix
mode to 0777, thus guaranteeing that default directory acls
are propagated. Note that using the VFS modules acl_xattr or
acl_tdb which store native Windows as meta&minus;data will
automatically turn this option on for any share for which
they are loaded, as they require this option to emulate
Windows ACLs
correctly.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>inherit acls =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">inherit
owner
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
ownership of new files and directories is normally governed
by effective uid of the connected user. This option allows
the Samba administrator to specify that the ownership for
new files and directories should be controlled by the
ownership of the parent
directory.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Common
scenarios where this behavior is useful is in implementing
drop&minus;boxes, where users can create and edit files but
not delete them and ensuring that newly created files in a
user's roaming profile directory are actually owned by the
user.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>inherit owner =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">inherit
permissions
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
permissions on new files and directories are normally
governed by</font> <b><font color="#0000FF">create
mask</font></b><font color="#000000">,</font>
<b><font color="#0000FF">directory
mask</font></b><font color="#000000">,</font>
<b><font color="#0000FF">force create mode</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">force directory mode</font></b>
<font color="#000000">but the boolean inherit permissions
parameter overrides
this.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">New
directories inherit the mode of the parent directory,
including bits such as
setgid.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">New
files inherit their read/write bits from the parent
directory. Their execute bits continue to be determined
by</font> <b><font color="#0000FF">map
archive</font></b><font color="#000000">,</font>
<b><font color="#0000FF">map hidden</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">map system</font></b>
<font color="#000000">as
usual.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that the setuid bit is <i>never</i> set via inheritance (the
code explicitly prohibits
this).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
can be particularly useful on large systems with many users,
perhaps several thousand, to allow a single [homes] share to
be used flexibly by each
user.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>inherit permissions =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">invalid
users
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of users that should not be allowed to login to
this service. This is really a <i>paranoid</i> check to
absolutely ensure an improper setting does not breach your
security.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">A
name starting with a '@' is interpreted as an NIS netgroup
first (if your system supports NIS), and then as a UNIX
group if the name was not found in the NIS netgroup
database.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">A
name starting with '+' is interpreted only by looking in the
UNIX group database via the NSS getgrnam() interface. A name
starting with '&amp;' is interpreted only by looking in the
NIS netgroup database (this requires NIS to be working on
your system). The characters '+' and '&amp;' may be used at
the start of the name in either order so the value
<i>+&amp;group</i> means check the UNIX group database,
followed by the NIS netgroup database, and the value
<i>&amp;+group</i> means check the NIS netgroup database,
followed by the UNIX group database (the same as the '@'
prefix).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
current servicename is substituted for <i>%S</i>. This is
useful in the [homes]
section.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>invalid users = # no invalid
users</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>invalid users = root fred admin
@wheel</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">kerberos
method
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Controls
how kerberos tickets are
verified.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Valid
options
are:</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
secrets only &minus; use only the secrets.tdb for ticket
verification
(default)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
system keytab &minus; use only the system keytab for ticket
verification</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
dedicated keytab &minus; use a dedicated keytab for ticket
verification</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
secrets and keytab &minus; use the secrets.tdb first, then
the system
keytab</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
major difference between &quot;system keytab&quot; and
&quot;dedicated keytab&quot; is that the latter method
relies on kerberos to find the correct keytab entry instead
of filtering based on expected
principals.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">When
the kerberos method is in &quot;dedicated keytab&quot;
mode,</font> <b><font color="#0000FF">dedicated keytab
file</font></b> <font color="#000000">must be set to specify
the location of the keytab
file.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>kerberos method =
default</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">kpasswd
port
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Specifies
which ports the Kerberos server should listen on for
password
changes.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>kpasswd port =
464</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">krb5
port
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Specifies
which port the KDC should listen on for Kerberos
traffic.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>krb5 port =
88</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">lanman
auth
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbd</b>(8) will
attempt to authenticate users or permit password changes
using the LANMAN password hash. If disabled, only clients
which support NT password hashes (e.g. Windows NT/2000
clients, smbclient, but not Windows 95/98 or the MS DOS
network client) will be able to connect to the Samba
host.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
LANMAN encrypted response is easily broken, due to its
case&minus;insensitive nature, and the choice of algorithm.
Servers without Windows 95/98/ME or MS DOS clients are
advised to disable this
option.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">When
this parameter is set to no this will also result in
sambaLMPassword in Samba's passdb being blanked after the
next password change. As a result of that lanman clients
won't be able to authenticate, even if lanman auth is
re&minus;enabled later
on.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Unlike
the encrypt passwords option, this parameter cannot alter
client behaviour, and the LANMAN response will still be sent
over the network. See the client lanman auth to disable this
for Samba's clients (such as
smbclient)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
this option, and ntlm auth are both disabled, then only
NTLMv2 logins will be permited. Not all clients support
NTLMv2, and most will require special configuration to use
it.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>lanman auth =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">log
nt token command
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a command that will be called when new
nt tokens are
created.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
is only useful for development
purposes.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>log nt token command
=</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">map
to guest
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter can take four different values, which tell
<b>smbd</b>(8) what to do with user login requests that
don't match a valid UNIX user in some
way.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
four settings are
:</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>Never</b> &minus; Means user login requests with an
invalid password are rejected. This is the
default.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>Bad User</b> &minus; Means user logins with an invalid
password are rejected, unless the username does not exist,
in which case it is treated as a guest login and mapped into
the</font> <b><font color="#0000FF">guest
account</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>Bad Password</b> &minus; Means user logins with an
invalid password are treated as a guest login and mapped
into the</font> <b><font color="#0000FF">guest
account</font></b><font color="#000000">. Note that this can
cause problems as it means that any user incorrectly typing
their password will be silently logged on as
&quot;guest&quot; &minus; and will not know the reason they
cannot access files they think they should &minus; there
will have been no message given to them that they got their
password wrong. Helpdesk services will <i>hate</i> you if
you set the <i>map to guest</i> parameter this way
:&minus;).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<b>Bad Uid</b> &minus; Is only applicable when Samba is
configured in some type of domain mode security (security =
{domain|ads}) and means that user logins which are
successfully authenticated but which have no valid Unix user
account (and smbd is unable to create one) should be mapped
to the defined guest account. This was the default behavior
of Samba 2.x releases. Note that if a member server is
running winbindd, this option should never be required
because the nss_winbind library will export the Windows
domain users and groups to the underlying OS via the Name
Service Switch
interface.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this parameter is needed to set up &quot;Guest&quot;
share services. This is because in these modes the name of
the resource being requested is <i>not</i> sent to the
server until after the server has successfully authenticated
the client so the server cannot make authentication
decisions at the correct time (connection to the share) for
&quot;Guest&quot;
shares.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>map to guest =
Never</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>map to guest = Bad
User</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">map
untrusted to domain
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
a client connects to smbd using an untrusted domain name,
such as BOGUS\user, smbd replaces the BOGUS domain with it's
SAM name before attempting to authenticate that user. In the
case where smbd is acting as a PDC this will be DOMAIN\user.
In the case where smbd is acting as a domain member server
or a standalone server this will be
WORKSTATION\user.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">In
previous versions of Samba (pre 3.4), if smbd was acting as
a domain member server, the BOGUS domain name would instead
be replaced by the primary domain which smbd was a member
of. In this case authentication would be deferred off to a
DC using the credentials
DOMAIN\user.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">When
this parameter is set to <b>yes</b> smbd provides the legacy
behavior of mapping untrusted domain names to the primary
domain. When smbd is not acting as a domain member server,
this parameter has no
effect.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>map untrusted to domain =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">ntlm
auth
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbd</b>(8) will
attempt to authenticate users using the NTLM encrypted
password response. If disabled, either the lanman password
hash or an NTLMv2 response will need to be sent by the
client.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
this option, and lanman auth are both disabled, then only
NTLMv2 logins will be permited. Not all clients support
NTLMv2, and most will require special configuration to use
it.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>ntlm auth =
yes</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">ntp
signd socket directory
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
setting controls the location of the socket that the NTP
daemon uses to communicate with Samba for signing
packets.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
a non&minus;default path is specified here, then it is also
necessary to make NTP aware of the new path using the
<b>ntpsigndsocket</b> directive in
ntp.conf.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>ntp signd socket directory =
/var/lib/samba/ntp_signd</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">null
passwords
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Allow
or disallow client access to accounts that have null
passwords.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">See
also
<b>smbpasswd</b>(5).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>null passwords =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">obey
pam restrictions
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">When
Samba 3.0 is configured to enable PAM support (i.e.
&minus;&minus;with&minus;pam), this parameter will control
whether or not Samba should obey PAM's account and session
management directives. The default behavior is to use PAM
for clear text authentication only and to ignore any account
or session management. Note that Samba always ignores PAM
for authentication in the case of</font>
<b><font color="#0000FF">encrypt passwords =
yes</font></b><font color="#000000">. The reason is that PAM
modules cannot support the challenge/response authentication
mechanism needed in the presence of SMB password
encryption.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>obey pam restrictions =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">old
password allowed period
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Number
of minutes to permit an NTLM login after a password change
or reset using the old password. This allows the user to
re&minus;cache the new password on multiple clients without
disrupting a network reconnection in the
meantime.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter only applies when</font>
<b><font color="#0000FF">server role</font></b>
<font color="#000000">is set to Active Directory Domain
Controller</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>old password allowed period =
60</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">only
user
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">To
restrict a service to a particular set of users you can use
the</font> <b><font color="#0000FF">valid users</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is
deprecated</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">However,
it currently operates only in conjunction with</font>
<b><font color="#0000FF">username</font></b><font color="#000000">.
The supported way to restrict a service to a particular set
of users is the</font> <b><font color="#0000FF">valid
users</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>only user =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">pam
password change
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">With
the addition of better PAM support in Samba 2.2, this
parameter, it is possible to use PAM's password change
control flag for Samba. If enabled, then PAM will be used
for password changes when requested by an SMB client instead
of the program listed in</font>
<b><font color="#0000FF">passwd
program</font></b><font color="#000000">. It should be
possible to enable this without changing your</font>
<b><font color="#0000FF">passwd chat</font></b>
<font color="#000000">parameter for most
setups.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>pam password change =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passdb
backend
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
option allows the administrator to chose which backend will
be used for storing user and possibly group information.
This allows you to swap between different storage mechanisms
without
recompile.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
parameter value is divided into two parts, the backend's
name, and a 'location' string that has meaning only to that
particular backed. These are separated by a :
character.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Available
backends can
include:</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
smbpasswd &minus; The old plaintext passdb backend. Some
Samba features will not work if this passdb backend is used.
Takes a path to the smbpasswd file as an optional
argument.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
tdbsam &minus; The TDB based password storage backend. Takes
a path to the TDB as an optional argument (defaults to
passdb.tdb in the</font> <b><font color="#0000FF">private
dir</font></b>
<font color="#000000">directory.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
ldapsam &minus; The LDAP based passdb backend. Takes an LDAP
URL as an optional argument (defaults to
ldap://localhost)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">LDAP
connections should be secured where possible. This may be
done using either Start&minus;TLS (see</font>
<b><font color="#0000FF">ldap
ssl</font></b><font color="#000000">) or by specifying
<i>ldaps://</i> in the URL
argument.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Multiple
servers may also be specified in double&minus;quotes.
Whether multiple servers are supported or not and the exact
syntax depends on the LDAP library you
use.</font></big></big></big></big></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><big><big><big><big><font color="#000000">Examples
of use
are:</font></big></big></big></big></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passdb
backend =
tdbsam:/etc/samba/private/passdb.tdb</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">or
multi server LDAP URL with OpenLDAP
library:</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passdb
backend = ldapsam:&quot;ldap://ldap&minus;1.example.com
ldap://ldap&minus;2.example.com&quot;</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">or
multi server LDAP URL with Netscape based LDAP
library:</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passdb
backend = ldapsam:&quot;ldap://ldap&minus;1.example.com
ldap&minus;2.example.com&quot;</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passdb backend =
tdbsam</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passdb
expand explicit
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter controls whether Samba substitutes %&minus;macros
in the passdb fields if they are explicitly set. We used to
expand macros here, but this turned out to be a bug because
the Windows client can expand a variable %G_osver% in which
%G would have been substituted by the user's primary
group.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passdb expand explicit =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passwd
chat
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
string controls the <i>&quot;chat&quot;</i> conversation
that takes places between <b>smbd</b>(8) and the local
password changing program to change the user's password. The
string describes a sequence of response&minus;receive pairs
that <b>smbd</b>(8) uses to determine what to send to
the</font> <b><font color="#0000FF">passwd
program</font></b> <font color="#000000">and what to expect
back. If the expected output is not received then the
password is not
changed.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
chat sequence is often quite site specific, depending on
what local methods are used for password control (such as
NIS
etc).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this parameter only is used if the</font>
<b><font color="#0000FF">unix password sync</font></b>
<font color="#000000">parameter is set to <b>yes</b>. This
sequence is then called <i>AS ROOT</i> when the SMB password
in the smbpasswd file is being changed, without access to
the old password cleartext. This means that root must be
able to reset the user's password without knowing the text
of the previous password. In the presence of NIS/YP, this
means that the</font> <b><font color="#0000FF">passwd
program</font></b> <font color="#000000">must be executed on
the NIS
master.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
string can contain the macro <i>%n</i> which is substituted
for the new password. The old passsword (<i>%o</i>) is only
available when</font> <b><font color="#0000FF">encrypt
passwords</font></b> <font color="#000000">has been
disabled. The chat sequence can also contain the standard
macros \n, \r, \t and \s to give line&minus;feed,
carriage&minus;return, tab and space. The chat sequence
string can also contain a '*' which matches any sequence of
characters. Double quotes can be used to collect strings
with spaces in them into a single
string.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
the send string in any part of the chat sequence is a full
stop &quot;.&quot;, then no string is sent. Similarly, if
the expect string is a full stop then no string is
expected.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
the</font> <b><font color="#0000FF">pam password
change</font></b> <font color="#000000">parameter is set to
<b>yes</b>, the chat pairs may be matched in any order, and
success is determined by the PAM result, not any particular
output. The \n macro is ignored for PAM
conversions.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passwd chat = *new*password* %n\n *new*password* %n\n
*changed*</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>passwd chat = &quot;*Enter NEW password*&quot; %n\n
&quot;*Reenter NEW password*&quot; %n\n &quot;*Password
changed*&quot;</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passwd
chat debug
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
boolean specifies if the passwd chat script parameter is run
in <i>debug</i> mode. In this mode the strings passed to and
received from the passwd chat are printed in the
<b>smbd</b>(8) log with a</font>
<b><font color="#0000FF">debug level</font></b>
<font color="#000000">of 100. This is a dangerous option as
it will allow plaintext passwords to be seen in the smbd
log. It is available to help Samba admins debug their
<i>passwd chat</i> scripts when calling the <i>passwd
program</i> and should be turned off after this has been
done. This option has no effect if the</font>
<b><font color="#0000FF">pam password change</font></b>
<font color="#000000">parameter is set. This parameter is
off by
default.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passwd chat debug =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passwd
chat timeout
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
integer specifies the number of seconds smbd will wait for
an initial answer from a passwd chat script being run. Once
the initial answer is received the subsequent answers must
be received in one tenth of this time. The default it two
seconds.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passwd chat timeout =
2</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">passwd
program
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">The
name of a program that can be used to set UNIX user
passwords. Any occurrences of <i>%u</i> will be replaced
with the user name. The user name is checked for existence
before calling the password changing
program.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Also
note that many passwd programs insist in <i>reasonable</i>
passwords, such as a minimum length, or the inclusion of
mixed case chars and digits. This can pose a problem as some
clients (such as Windows for Workgroups) uppercase the
password before sending
it.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that if the <i>unix password sync</i> parameter is set to
<b>yes</b> then this program is called <i>AS ROOT</i> before
the SMB password in the smbpasswd file is changed. If this
UNIX password change fails, then smbd will fail to change
the SMB password also (this is by
design).</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
the <i>unix password sync</i> parameter is set this
parameter <i>MUST USE ABSOLUTE PATHS</i> for <i>ALL</i>
programs called, and must be examined for security
implications. Note that by default <i>unix password sync</i>
is set to
<b>no</b>.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>passwd program
=</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>passwd program = /bin/passwd
%u</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">password
server
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">By
specifying the name of a domain controller with this option,
and using security = [ads|domain] it is possible to get
Samba to do all its username/password validation using a
specific remote
server.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Ideally,
this option <i>should not</i> be used, as the default '*'
indicates to Samba to determine the best DC to contact
dynamically, just as all other hosts in an AD domain do.
This allows the domain to be maintained (addition and
removal of domain controllers) without modification to the
smb.conf file. The cryptographic protection on the
authenticated RPC calls used to verify passwords ensures
that this default is
safe.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><i>It
is strongly recommended that you use the default of '*'</i>,
however if in your particular environment you have reason to
specify a particular DC list, then the list of machines in
this option must be a list of names or IP addresses of
Domain controllers for the Domain. If you use the default of
'*', or list several hosts in the <i>password server</i>
option then smbd will try each in turn till it finds one
that responds. This is useful in case your primary server
goes
down.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
the list of servers contains both names/IP's and the '*'
character, the list is treated as a list of preferred domain
controllers, but an auto lookup of all remaining DC's will
be added to the list as well. Samba will not attempt to
optimize this list by locating the closest
DC.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
parameter is a name, it is looked up using the
parameter</font> <b><font color="#0000FF">name resolve
order</font></b> <font color="#000000">and so may resolved
by any method and order described in that
parameter.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>password server =
*</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>password server = NT&minus;PDC, NT&minus;BDC1,
NT&minus;BDC2,
*</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>password server = windc.mydomain.com:389 192.168.1.101
*</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">preload
modules
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of paths to modules that should be loaded into
smbd before a client connects. This improves the speed of
smbd when reacting to new connections
somewhat.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>preload modules
=</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>preload modules =
/usr/lib/samba/passdb/mysql.so</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">private
directory</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for private
dir.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">private
dir
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameters defines the directory smbd will use for storing
such files as smbpasswd and
secrets.tdb.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>private dir =
/var/lib/samba/private</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">raw
NTLMv2 auth
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter determines whether or not <b>smbd</b>(8) will
allow SMB1 clients without extended security (without
SPNEGO) to use NTLMv2
authentication.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
this option, lanman auth and ntlm auth are all disabled,
then only clients with SPNEGO support will be permitted.
That means NTLMv2 is only supported within
NTLMSSP.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>raw NTLMv2 auth =
no</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">read
list
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of users that are given read&minus;only access to
a service. If the connecting user is in this list then they
will not be given write access, no matter what the</font>
<b><font color="#0000FF">read only</font></b>
<font color="#000000">option is set to. The list can include
group names using the syntax described in the</font>
<b><font color="#0000FF">invalid users</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>read list
=</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>read list = mary,
@students</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">read
only
(S)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">An
inverted synonym is</font>
<b><font color="#0000FF">writeable</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is <b>yes</b>, then users of a service may
not create or modify files in the service's
directory.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that a printable service (printable = yes) will
<i>ALWAYS</i> allow writing to the directory (user
privileges permitting), but only via spooling
operations.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>read only =
yes</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">rename
user script
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">This
is the full pathname to a script that will be run as root by
<b>smbd</b>(8) under special circumstances described
below.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">When
a user with admin authority or SeAddUserPrivilege rights
renames a user (e.g.: from the NT4 User Manager for
Domains), this script will be run to rename the POSIX user.
Two variables, %uold and %unew, will be substituted with the
old and new usernames, respectively. The script should
return 0 upon successful completion, and nonzero
otherwise.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
The script has all responsibility to rename all the
necessary data that is accessible in this posix method. This
can mean different requirements for different backends. The
tdbsam and smbpasswd backends will take care of the contents
of their respective files, so the script is responsible only
for changing the POSIX username, and other data that may
required for your circumstances, such as home directory.
Please also consider whether or not you need to rename the
actual home directories themselves. The ldapsam backend will
not make any changes, because of the potential issues with
renaming the LDAP naming attribute. In this case the script
is responsible for changing the attribute that samba uses
(uid) for locating users, as well as any data that needs to
change for other applications using the same
directory.</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>rename user script
=</i></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000">restrict
anonymous
(G)</font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
setting of this parameter determines whether user and group
list information is returned for an anonymous connection.
and mirrors the effects of
the</big></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><big>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\
<br>

Control\LSA\RestrictAnonymous</big></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><big>registry
key in Windows 2000 and Windows NT. When set to 0, user and
group list information is returned to anyone who asks. When
set to 1, only an authenticated user can retrieve user and
group list information. For the value 2, supported by
Windows 2000/XP and Samba, no anonymous connections are
allowed at all. This can break third party and Microsoft
applications which expect to be allowed to perform
operations
anonymously.</big></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
security advantage of using restrict anonymous = 1 is
dubious, as user and group list information can be obtained
using other
means.</big></font></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><font color="#000000"><big><b><big>Note</big></b>
<br>
The security advantage of using restrict anonymous = 2 is
removed by setting</big></font>
<big><b><font color="#0000FF">guest ok = yes</font></b>
<font color="#000000">on any
share.</font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>restrict anonymous =
0</i></font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000">root</font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
parameter is a synonym for root
directory.</big></font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>root
dir</big></font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
parameter is a synonym for root
directory.</big></font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>root
directory
(G)</big></font></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
server will chroot() (i.e. Change its root directory) to
this directory on startup. This is not strictly necessary
for secure operation. Even without it the server will deny
access to files not in one of the service entries. It may
also check for, and deny access to, soft links to other
parts of the filesystem, or attempts to use &quot;..&quot;
in file names to access other directories (depending on the
setting of the</big></font>
<big><b><font color="#0000FF">wide smbconfoptions</font></b>
<font color="#000000">parameter).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Adding
a <i>root directory</i> entry other than &quot;/&quot; adds
an extra level of security, but at a price. It absolutely
ensures that no access is given to files not in the
sub&minus;tree specified in the <i>root directory</i>
option, <i>including</i> some files needed for complete
operation of the server. To maintain full operability of the
server you will need to mirror some system files into the
<i>root directory</i> tree. In particular you will need to
mirror /etc/passwd (or a subset of it), and any binaries or
configuration files needed for printing (if required). The
set of files that must be mirrored is operating system
dependent.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>root directory
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>root directory =
/homes/smb</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">samba
kcc command
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option specifies the path to the Samba KCC command. This
script is used for replication topology
replication.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">It
should not be necessary to modify this option except for
testing purposes or if the samba_kcc was installed in a
non&minus;default
location.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>samba kcc command =
/builddir/build/BUILD/samba&minus;4.4.4/source4/scripting/bin/samba_kcc</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>samba kcc command =
/usr/local/bin/kcc</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">security
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option affects how clients respond to Samba and is one of
the most important settings in the smb.conf
file.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
default is security = user, as this is the most common
setting, used for a standalone file server or a
DC.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
alternatives are security = ads or security = domain, which
support joining Samba to a Windows
domain</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
should use security = user and</font>
<b><font color="#0000FF">map to guest</font></b>
<font color="#000000">if you want to mainly setup shares
without a password (guest shares). This is commonly used for
a shared printer
server.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
different settings will now be
explained.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SECURITY
=
AUTO</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is the default security setting in Samba, and causes Samba
to consult the</font> <b><font color="#0000FF">server
role</font></b> <font color="#000000">parameter (if set) to
determine the security
mode.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SECURITY
=
USER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If</font>
<b><font color="#0000FF">server role</font></b>
<font color="#000000">is not specified, this is the default
security setting in Samba. With user&minus;level security a
client must first &quot;log&minus;on&quot; with a valid
username and password (which can be mapped using the</font>
<b><font color="#0000FF">username map</font></b>
<font color="#000000">parameter). Encrypted passwords (see
the</font> <b><font color="#0000FF">encrypted
passwords</font></b> <font color="#000000">parameter) can
also be used in this security mode. Parameters such
as</font> <b><font color="#0000FF">user</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">guest only</font></b>
<font color="#000000">if set are then applied and may change
the UNIX user to use on this connection, but only after the
user has been successfully
authenticated.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that the name of the resource being requested is <i>not</i>
sent to the server until after the server has successfully
authenticated the client. This is why guest shares don't
work in user level security without allowing the server to
automatically map unknown users into the</font>
<b><font color="#0000FF">guest
account</font></b><font color="#000000">. See the</font>
<b><font color="#0000FF">map to guest</font></b>
<font color="#000000">parameter for details on doing
this.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SECURITY
=
DOMAIN</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
mode will only work correctly if <b>net</b>(8) has been used
to add this machine into a Windows NT Domain. It expects
the</font> <b><font color="#0000FF">encrypted
passwords</font></b> <font color="#000000">parameter to be
set to <b>yes</b>. In this mode Samba will try to validate
the username/password by passing it to a Windows NT Primary
or Backup Domain Controller, in exactly the same way that a
Windows NT Server would
do.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that a valid UNIX user must still exist as well as the
account on the Domain Controller to allow Samba to have a
valid UNIX account to map file access
to.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that from the client's point of view security = domain is
the same as security = user. It only affects how the server
deals with the authentication, it does not in any way affect
what the client
sees.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that the name of the resource being requested is <i>not</i>
sent to the server until after the server has successfully
authenticated the client. This is why guest shares don't
work in user level security without allowing the server to
automatically map unknown users into the</font>
<b><font color="#0000FF">guest
account</font></b><font color="#000000">. See the</font>
<b><font color="#0000FF">map to guest</font></b>
<font color="#000000">parameter for details on doing
this.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">See
also the</font> <b><font color="#0000FF">password
server</font></b> <font color="#000000">parameter and
the</font> <b><font color="#0000FF">encrypted
passwords</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that the name of the resource being requested is <i>not</i>
sent to the server until after the server has successfully
authenticated the client. This is why guest shares don't
work in user level security without allowing the server to
automatically map unknown users into the</font>
<b><font color="#0000FF">guest
account</font></b><font color="#000000">. See the</font>
<b><font color="#0000FF">map to guest</font></b>
<font color="#000000">parameter for details on doing
this.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">See
also the</font> <b><font color="#0000FF">password
server</font></b> <font color="#000000">parameter and
the</font> <b><font color="#0000FF">encrypted
passwords</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SECURITY
=
ADS</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">In
this mode, Samba will act as a domain member in an ADS
realm. To operate in this mode, the machine running Samba
will need to have Kerberos installed and configured and
Samba will need to be joined to the ADS realm using the net
utility.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this mode does NOT make Samba operate as a Active
Directory Domain
Controller.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this forces</font> <b><font color="#0000FF">require
strong key = yes</font></b> <font color="#000000">and</font>
<b><font color="#0000FF">client schannel = yes</font></b>
<font color="#000000">for the primary
domain.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Read
the chapter about Domain Membership in the HOWTO for
details.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>security =
AUTO</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>security =
DOMAIN</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">security
mask
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter has been removed for Samba
4.0.0.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">server
role
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option determines the basic operating mode of a Samba server
and is one of the most important settings in the smb.conf
file.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
default is server role = auto, as causes Samba to operate
according to the</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">setting, or if not specified as a
simple file server that is not connected to any
domain.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
alternatives are server role = standalone or server role =
member server, which support joining Samba to a Windows
domain, along with server role = domain controller, which
run Samba as a Windows domain
controller.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
should use server role = standalone and</font>
<b><font color="#0000FF">map to guest</font></b>
<font color="#000000">if you want to mainly setup shares
without a password (guest shares). This is commonly used for
a shared printer
server.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE =
AUTO</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is the default server role in Samba, and causes Samba to
consult the</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">parameter (if set) to determine the
server role, giving compatible behaviours to previous Samba
versions.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE =
STANDALONE</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If</font>
<b><font color="#0000FF">security</font></b>
<font color="#000000">is also not specified, this is the
default security setting in Samba. In standalone operation,
a client must first &quot;log&minus;on&quot; with a valid
username and password (which can be mapped using the</font>
<b><font color="#0000FF">username map</font></b>
<font color="#000000">parameter) stored on this machine.
Encrypted passwords (see the</font>
<b><font color="#0000FF">encrypted passwords</font></b>
<font color="#000000">parameter) are by default used in this
security mode. Parameters such as</font>
<b><font color="#0000FF">user</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">guest only</font></b>
<font color="#000000">if set are then applied and may change
the UNIX user to use on this connection, but only after the
user has been successfully
authenticated.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE = MEMBER
SERVER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
mode will only work correctly if <b>net</b>(8) has been used
to add this machine into a Windows Domain. It expects
the</font> <b><font color="#0000FF">encrypted
passwords</font></b> <font color="#000000">parameter to be
set to <b>yes</b>. In this mode Samba will try to validate
the username/password by passing it to a Windows or Samba
Domain Controller, in exactly the same way that a Windows
Server would
do.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note</i>
that a valid UNIX user must still exist as well as the
account on the Domain Controller to allow Samba to have a
valid UNIX account to map file access to. Winbind can
provide
this.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE = CLASSIC PRIMARY DOMAIN
CONTROLLER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
mode of operation runs a classic Samba primary domain
controller, providing domain logon services to Windows and
Samba clients of an NT4&minus;like domain. Clients must be
joined to the domain to create a secure, trusted path across
the network. There must be only one PDC per NetBIOS scope
(typcially a broadcast network or clients served by a single
WINS
server).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE = CLASSIC BACKUP DOMAIN
CONTROLLER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
mode of operation runs a classic Samba backup domain
controller, providing domain logon services to Windows and
Samba clients of an NT4&minus;like domain. As a BDC, this
allows multiple Samba servers to provide redundant logon
services to a single NetBIOS
scope.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>SERVER
ROLE = ACTIVE DIRECTORY DOMAIN
CONTROLLER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
mode of operation runs Samba as an active directory domain
controller, providing domain logon services to Windows and
Samba clients of the domain. This role requires special
configuration, see the Samba4
HOWTO</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server role =
AUTO</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>server role = ACTIVE DIRECTORY DOMAIN
CONTROLLER</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">server
schannel
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
controls whether the server offers or even demands the use
of the netlogon schannel.</font>
<b><font color="#0000FF">server schannel = no</font></b>
<font color="#000000">does not offer the schannel,</font>
<b><font color="#0000FF">server schannel = auto</font></b>
<font color="#000000">offers the schannel but does not
enforce it, and</font> <b><font color="#0000FF">server
schannel = yes</font></b> <font color="#000000">denies
access if the client is not able to speak netlogon schannel.
This is only the case for Windows NT4 before
SP4.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Please
note that with this set to no, you will have to apply the
WindowsXP WinXP_SignOrSeal.reg registry patch found in the
docs/registry subdirectory of the Samba distribution
tarball.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server schannel =
auto</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>server schannel =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">server
signing
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
controls whether the client is allowed or required to use
SMB1 and SMB2 signing. Possible values are <i>default</i>,
<i>auto</i>, <i>mandatory</i> and
<i>disabled</i>.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">By
default, and when smb signing is set to <i>default</i>, smb
signing is required when</font>
<b><font color="#0000FF">server role</font></b>
<font color="#000000">is <i>active directory domain
controller</i> and disabled
otherwise.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to auto, SMB1 signing is offered, but not enforced. When
set to mandatory, SMB1 signing is required and if set to
disabled, SMB signing is not offered
either.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">For
the SMB2 protocol, by design, signing cannot be disabled. In
the case where SMB2 is negotiated, if this parameter is set
to <i>disabled</i>, it will be treated as <i>auto</i>.
Setting it to <i>mandatory</i> will still require SMB2
clients to use
signing.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>server signing =
default</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">smb
encrypt
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter controls whether a remote client is allowed or
required to use SMB encryption. It has different effects
depending on whether the connection uses SMB1 or SMB2 and
newer:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
If the connection uses SMB1, then this option controls the
use of a Samba&minus;specific extension to the SMB protocol
introduced in Samba 3.2 that makes use of the Unix
extensions.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
If the connection uses SMB2 or newer, then this option
controls the use of the SMB&minus;level encryption that is
supported in SMB version 3.0 and above and available in
Windows 8 and
newer.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter can be set globally and on a per&minus;share
bases. Possible values are <i>off</i> (or <i>disabled</i>),
<i>enabled</i> (or <i>auto</i>, or <i>if_required</i>),
<i>desired</i>, and <i>required</i> (or <i>mandatory</i>). A
special value is <i>default</i> which is the implicit
default setting of
<i>enabled</i>.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Effects
for
SMB1</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
Samba&minus;specific encryption of SMB1 connections is an
extension to the SMB protocol negotiated as part of the UNIX
extensions. SMB encryption uses the GSSAPI (SSPI on Windows)
ability to encrypt and sign every request/response in a SMB
protocol stream. When enabled it provides a secure method of
SMB/CIFS communication, similar to an ssh protected session,
but using SMB/CIFS authentication to negotiate encryption
and signing keys. Currently this is only supported smbclient
of by Samba 3.2 and newer, and hopefully soon Linux CIFSFS
and MacOS/X clients. Windows clients do not support this
feature.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
may be set on a per&minus;share basis, but clients may chose
to encrypt the entire session, not just traffic to a
specific share. If this is set to mandatory then all traffic
to a share <i>must</i> be encrypted once the connection has
been made to the share. The server would return &quot;access
denied&quot; to all non&minus;encrypted requests on such a
share. Selecting encrypted traffic reduces throughput as
smaller packet sizes must be used (no huge UNIX style
read/writes allowed) as well as the overhead of encrypting
and signing all the
data.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
SMB encryption is selected, Windows style SMB signing (see
the</font> <b><font color="#0000FF">server
signing</font></b> <font color="#000000">option) is no
longer necessary, as the GSSAPI flags use select both
signing and sealing of the
data.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to auto or default, SMB encryption is offered, but not
enforced. When set to mandatory, SMB encryption is required
and if set to disabled, SMB encryption can not be
negotiated.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Effects
for
SMB2</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Native
SMB transport encryption is available in SMB version 3.0 or
newer. It is only offered by Samba if <i>server max
protocol</i> is set to <i>SMB3</i> or newer. Clients
supporting this type of encryption include Windows 8 and
newer, Windows server 2012 and newer, and smbclient of Samba
4.1 and
newer.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
protocol implementation offers various
options:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The capability to perform SMB encryption can be negotiated
during protocol
negotiation.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Data encryption can be enabled globally. In that case, an
encryption&minus;capable connection will have all traffic in
all its sessions encrypted. In particular all share
connections will be
encrypted.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Data encryption can also be enabled per share if not enabled
globally. For an encryption&minus;capable connection, all
connections to an encryption&minus;enabled share will be
encrypted.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Encryption can be enforced. This means that session setups
will be denied on non&minus;encryption&minus;capable
connections if data encryption has been enabled globally.
And tree connections will be denied for non&minus;encryption
capable connections to shares with data encryption
enabled.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">These
features can be controlled with settings of <i>smb
encrypt</i> as
follows:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Leaving it as default, explicitly setting <i>default</i>, or
setting it to <i>enabled</i> globally will enable
negotiation of encryption but will not turn on data
encryption globally or per
share.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>desired</i> globally will enable
negotiation and will turn on data encryption on sessions and
share connections for those clients that support
it.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>required</i> globally will enable
negotiation and turn on data encryption on sessions and
share connections. Clients that do not support encryption
will be denied access to the
server.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>off</i> globally will completely disable
the encryption
feature.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>desired</i> on a share will turn on data
encryption for this share for clients that support
encryption if negotiation has been enabled
globally.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>required</i> on a share will enforce data
encryption for this share if negotiation has been enabled
globally. I.e. clients that do not support encryption will
be denied access to the
share.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this allows per&minus;share enforcing to be controlled
in Samba differently from Windows: In Windows,
<i>RejectUnencryptedAccess</i> is a global setting, and if
it is set, all shares with data encryption turned on are
automatically enforcing encryption. In order to achieve the
same effect in Samba, one has to globally set <i>smb
encrypt</i> to <i>enabled</i>, and then set all shares that
should be encrypted to <i>required</i>. Additionally, it is
possible in Samba to have some shares with encryption
<i>required</i> and some other shares with encryption only
<i>desired</i>, which is not possible in
Windows.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
Setting it to <i>off</i> or <i>enabled</i> for a share has
no
effect.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb encrypt =
default</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">smb
passwd file
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option sets the path to the encrypted smbpasswd file. By
default the path to the smbpasswd file is compiled into
Samba.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">An
example of use
is:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">smb
passwd file =
/etc/samba/smbpasswd</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>smb passwd file =
/var/lib/samba/private/smbpasswd</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
cafile
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a file (PEM format) containing CA
certificates of root CAs to trust to sign certificates or
intermediate CA
certificates.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
path is relative to</font> <b><font color="#0000FF">private
dir</font></b> <font color="#000000">if the path does not
start with a
/.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls cafile =
tls/ca.pem</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
certfile
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a file (PEM format) containing the RSA
certificate.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
path is relative to</font> <b><font color="#0000FF">private
dir</font></b> <font color="#000000">if the path does not
start with a
/.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls certfile =
tls/cert.pem</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
crlfile
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a file containing a certificate
revocation list
(CRL).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
path is relative to</font> <b><font color="#0000FF">private
dir</font></b> <font color="#000000">if the path does not
start with a
/.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls crlfile
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
dh params file
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a file with Diffie&minus;Hellman
parameters which will be used with DH
ciphers.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
path is relative to</font> <b><font color="#0000FF">private
dir</font></b> <font color="#000000">if the path does not
start with a
/.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls dh params file
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
enabled
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
this option is set to <b>yes</b>, then Samba will use TLS
when possible in
communication.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls enabled =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
keyfile
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a file (PEM format) containing the RSA
private key. This file must be accessible without a
pass&minus;phrase, i.e. it must not be
encrypted.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
path is relative to</font> <b><font color="#0000FF">private
dir</font></b> <font color="#000000">if the path does not
start with a
/.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls keyfile =
tls/key.pem</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
priority
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be set to a string describing the TLS protocols
to be supported in the parts of Samba that use GnuTLS,
specifically the AD
DC.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
default turns off SSLv3, as this protocol is no longer
considered secure after CVE&minus;2014&minus;3566 (otherwise
known as POODLE) impacted SSLv3 use in HTTPS
applications.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
valid options are described in the GNUTLS
Priority&minus;Strings documentation at
http://gnutls.org/manual/html_node/Priority&minus;Strings.html</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls priority =
NORMAL:&minus;VERS&minus;SSL3.0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tls
verify peer
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
controls if and how strict the client will verify the peer's
certificate and name. Possible values are (in increasing
order): <b>no_check</b>, <b>ca_only</b>,
<b>ca_and_name_if_available</b>, <b>ca_and_name</b> and
<b>as_strict_as_possible</b>.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to <b>no_check</b> the certificate is not verified at
all, which allows trivial man in the middle
attacks.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to <b>ca_only</b> the certificate is verified to be
signed from a ca specified in the</font>
<b><font color="#0000FF">tls ca file</font></b>
<font color="#000000">option. Setting</font>
<b><font color="#0000FF">tls ca file</font></b>
<font color="#000000">to a valid file is required. The
certificate lifetime is also verified. If the</font>
<b><font color="#0000FF">tls crl file</font></b>
<font color="#000000">option is configured, the certificate
is also verified against the ca
crl.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to <b>ca_and_name_if_available</b> all checks from
<b>ca_only</b> are performed. In addition, the peer hostname
is verified against the certificate's name, if it is
provided by the application layer and not given as an ip
address
string.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to <b>ca_and_name</b> all checks from
<b>ca_and_name_if_available</b> are performed. In addition
the peer hostname needs to be provided and even an ip
address is checked against the certificate's
name.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
set to <b>as_strict_as_possible</b> all checks from
<b>ca_and_name</b> are performed. In addition the</font>
<b><font color="#0000FF">tls crl file</font></b>
<font color="#000000">needs to be configured. Future
versions of Samba may implement additional
checks.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>tls verify peer =
as_strict_as_possible</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">unix
password sync
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
boolean parameter controls whether Samba attempts to
synchronize the UNIX password with the SMB password when the
encrypted SMB password in the smbpasswd file is changed. If
this is set to <b>yes</b> the program specified in the
<i>passwd program</i> parameter is called <i>AS ROOT</i>
&minus; to allow the new UNIX password to be set without
access to the old UNIX password (as the SMB password change
code has no access to the old password cleartext, only the
new).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>unix password sync =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">user</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
username.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">users</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
username.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">To
restrict a service to a particular set of users you can use
the</font> <b><font color="#0000FF">valid users</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is
deprecated</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">However,
it currently operates only in conjunction with</font>
<b><font color="#0000FF">only
user</font></b><font color="#000000">. The supported way to
restrict a service to a particular set of users is
the</font> <b><font color="#0000FF">valid users</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>username = # The guest account if a guest service, else
&lt;empty
string&gt;.</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>username = fred, mary, jack, jane, @users,
@pcgroup</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
level
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option helps Samba to try and 'guess' at the real UNIX
username, as many DOS clients send an all&minus;uppercase
username. By default Samba tries all lowercase, followed by
the username with the first letter capitalized, and fails if
the username is not found on the UNIX
machine.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
this parameter is set to non&minus;zero the behavior
changes. This parameter is a number that specifies the
number of uppercase combinations to try while trying to
determine the UNIX user name. The higher the number the more
combinations will be tried, but the slower the discovery of
usernames will be. Use this parameter when you have strange
usernames on your UNIX machine, such as <b>AstrangeUser</b>
.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is needed only on UNIX systems that have case
sensitive
usernames.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>username level =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>username level =
5</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
map
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option allows you to specify a file containing a mapping of
usernames from the clients to the server. This can be used
for several purposes. The most common is to map usernames
that users use on DOS or Windows machines to those that the
UNIX box uses. The other is to map multiple users to a
single username so that they can more easily share
files.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Please
note that for user mode security, the username map is
applied prior to validating the user credentials. Domain
member servers (domain or ads) apply the username map after
the user has been successfully authenticated by the domain
controller and require fully qualified entries in the map
table (e.g. biddle =
DOMAIN\foo).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
map file is parsed line by line. Each line should contain a
single UNIX username on the left then a '=' followed by a
list of usernames on the right. The list of usernames on the
right may contain names of the form @group in which case
they will match any UNIX username in that group. The special
client name '*' is a wildcard and matches any name. Each
line of the map file may be up to 1023 characters
long.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
file is processed on each line by taking the supplied
username and comparing it with each username on the right
hand side of the '=' signs. If the supplied name matches any
of the names on the right hand side then it is replaced with
the name on the left. Processing then continues with the
next
line.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
any line begins with a '#' or a ';' then it is
ignored.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
any line begins with an '!' then the processing will stop
after that line if a mapping was done by the line. Otherwise
mapping continues with every line being processed. Using '!'
is most useful when you have a wildcard mapping line later
in the
file.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">For
example to map from the name <b>admin</b> or
<b>administrator</b> to the UNIX name <b><br>
root</b> you would
use:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">root
= admin
administrator</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Or
to map anyone in the UNIX group <b>system</b> to the UNIX
name <b>sys</b> you would
use:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">sys
=
@system</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
can have as many mappings as you like in a username map
file.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
your system supports the NIS NETGROUP option then the
netgroup database is checked before the /etc/group database
for matching
groups.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
can map Windows usernames that have spaces in them by using
double quotes around the name. For
example:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">tridge
= &quot;Andrew
Tridgell&quot;</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">would
map the windows username &quot;Andrew Tridgell&quot; to the
unix username
&quot;tridge&quot;.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
following example would map mary and fred to the unix user
sys, and map the rest to guest. Note the use of the '!' to
tell Samba to stop processing if it gets a match on that
line:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">!sys
= mary fred <br>
guest =
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that the remapping is applied to all occurrences of
usernames. Thus if you connect to \\server\fred and
<b>fred</b> is remapped to <b>mary</b> then you will
actually be connecting to \\server\mary and will need to
supply a password suitable for <b>mary</b> not <b>fred</b>.
The only exception to this is the username passed to a
Domain Controller (if you have one). The DC will receive
whatever username the client supplies without
modification.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Also
note that no reverse mapping is done. The main effect this
has is with printing. Users who have been mapped may have
trouble deleting print jobs as PrintManager under WfWg will
think they don't own the print
job.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Samba
versions prior to 3.0.8 would only support reading the fully
qualified username (e.g.: DOMAIN\user) from the username map
when performing a kerberos login from a client. However,
when looking up a map entry for a user authenticated by
NTLM[SSP], only the login name would be used for matches.
This resulted in inconsistent behavior sometimes even on the
same
server.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
following functionality is obeyed in version 3.0.8 and
later:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
performing local authentication, the username map is applied
to the login name before attempting to authenticate the
connection.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
relying upon a external domain controller for validating
authentication requests, smbd will apply the username map to
the fully qualified username (i.e. DOMAIN\user) only after
the user has been successfully
authenticated.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">An
example of use
is:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
map =
/usr/local/samba/lib/users.map</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>username map = # no username
map</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
map cache time
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Mapping
usernames with the</font> <b><font color="#0000FF">username
map</font></b> <font color="#000000">or</font>
<b><font color="#0000FF">username map script</font></b>
<font color="#000000">features of Samba can be relatively
expensive. During login of a user, the mapping is done
several times. In particular, calling the</font>
<b><font color="#0000FF">username map script</font></b>
<font color="#000000">can slow down logins if external
databases have to be queried from the script being
called.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
parameter</font> <b><font color="#0000FF">username map cache
time</font></b> <font color="#000000">controls a mapping
cache. It specifies the number of seconds a mapping from the
username map file or script is to be efficiently cached. The
default of 0 means no caching is
done.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>username map cache time =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>username map cache time =
60</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">username
map script
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
script is a mutually exclusive alternative to the</font>
<b><font color="#0000FF">username map</font></b>
<font color="#000000">parameter. This parameter specifies
and external program or script that must accept a single
command line option (the username transmitted in the
authentication request) and return a line on standard output
(the name to which the account should mapped). In this way,
it is possible to store username map tables in an LDAP or
NIS directory
services.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>username map script
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>username map script =
/etc/samba/scripts/mapusers.sh</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">valid
users
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of users that should be allowed to login to this
service. Names starting with '@', '+' and '&amp;' are
interpreted using the same rules as described in the
<i>invalid users</i>
parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
this is empty (the default) then any user can login. If a
username is in both this list and the <i>invalid users</i>
list then access is denied for that
user.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
current servicename is substituted for <i>%S</i>. This is
useful in the [homes]
section.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>Note:</i>
When used in the [global] section this parameter may have
unwanted side effects. For example: If samba is configured
as a MASTER BROWSER (see <i>local master</i>, <i>os
level</i>, <i>domain master</i>, <i>preferred master</i>)
this option will prevent workstations from being able to
browse the
network.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>valid users = # No valid users list (anyone can
login)</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>valid users = greg,
@pcusers</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">writable</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
writeable.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">write
ok</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for
writeable.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">writeable
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Inverted
synonym for</font> <b><font color="#0000FF">read
only</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>writeable =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">write
list
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a list of users that are given read&minus;write access to
a service. If the connecting user is in this list then they
will be given write access, no matter what the</font>
<b><font color="#0000FF">read only</font></b>
<font color="#000000">option is set to. The list can include
group names using the @group
syntax.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that if a user is in both the read list and the write list
then they will be given write
access.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>write list
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>write list = admin, root,
@staff</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">aio
max threads
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
integer parameter specifies the maximum number of threads
each smbd process will create when doing parallel
asynchronous IO calls. If the number of outstanding calls is
greater than this number the requests will not be refused
but go onto a queue and will be scheduled in turn as
outstanding requests
complete.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">aio read
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">aio write
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>aio max threads =
100</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">aio
read size
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
Samba has been built with asynchronous I/O support and this
integer parameter is set to non&minus;zero value, Samba will
read from file asynchronously when size of request is bigger
than this value. Note that it happens only for
non&minus;chained and non&minus;chaining reads and when not
using write
cache.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Current
implementation of asynchronous I/O in Samba 3.0 does support
only up to 10 outstanding asynchronous requests, read and
write
combined.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">write cache
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">aio write
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>aio read size =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>aio read size = 16384 # Use asynchronous I/O for reads
bigger than 16KB request
size</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">aio
write behind
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
Samba has been built with asynchronous I/O support, Samba
will not wait until write requests are finished before
returning the result to the client for files listed in this
parameter. Instead, Samba will immediately return that the
write request has been finished successfully, no matter if
the operation will succeed or not. This might speed up
clients without aio support, but is really dangerous,
because data could be lost and files could be
damaged.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
syntax is identical to the</font>
<b><font color="#0000FF">veto files</font></b>
<font color="#000000">parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>aio write behind
=</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>aio write behind =
/*.tmp/</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">aio
write size
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
Samba has been built with asynchronous I/O support and this
integer parameter is set to non&minus;zero value, Samba will
write to file asynchronously when size of request is bigger
than this value. Note that it happens only for
non&minus;chained and non&minus;chaining reads and when not
using write
cache.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Current
implementation of asynchronous I/O in Samba 3.0 does support
only up to 10 outstanding asynchronous requests, read and
write
combined.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">write cache
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Related
command:</font> <b><font color="#0000FF">aio read
size</font></b></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>aio write size =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>aio write size = 16384 # Use asynchronous I/O for writes
bigger than 16KB request
size</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">allocation
roundup size
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter allows an administrator to tune the allocation
size reported to Windows clients. The default size of 1Mb
generally results in improved Windows client performance.
However, rounding the allocation size may cause difficulties
for some applications, e.g. MS Visual Studio. If the MS
Visual Studio compiler starts to crash with an internal
error, set this parameter to zero for this
share.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
integer parameter specifies the roundup size in
bytes.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>allocation roundup size =
1048576</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>allocation roundup size = 0 # (to disable
roundups)</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">block
size
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter controls the behavior of <b>smbd</b>(8) when
reporting disk free sizes. By default, this reports a disk
block size of 1024
bytes.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Changing
this parameter may have some effect on the efficiency of
client writes, this is not yet confirmed. This parameter was
added to allow advanced administrators to change it (usually
to a higher value) and test the effect it has on client
write performance without re&minus;compiling the code. As
this is an experimental option it may be removed in a future
release.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Changing
this option does not change the disk free reporting size,
just the block size unit reported to the
client.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>block size =
1024</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>block size =
4096</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">deadtime
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
value of the parameter (a decimal integer) represents the
number of minutes of inactivity before a connection is
considered dead, and it is disconnected. The deadtime only
takes effect if the number of open files is
zero.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is useful to stop a server's resources being exhausted by a
large number of inactive
connections.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Most
clients have an auto&minus;reconnect feature when a
connection is broken so in most cases this parameter should
be transparent to
users.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Using
this parameter with a timeout of a few minutes is
recommended for most
systems.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">A
deadtime of zero indicates that no auto&minus;disconnection
should be
performed.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>deadtime =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>deadtime =
15</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">getwd
cache
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a tuning option. When this is enabled a caching algorithm
will be used to reduce the time taken for getwd() calls.
This can have a significant impact on performance,
especially when the</font> <b><font color="#0000FF">wide
smbconfoptions</font></b> <font color="#000000">parameter is
set to
<b>no</b>.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>getwd cache =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">hostname
lookups
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Specifies
whether samba should use (expensive) hostname lookups or use
the ip addresses instead. An example place where hostname
lookups are currently used is when checking the hosts deny
and hosts
allow.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>hostname lookups =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>hostname lookups =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">keepalive
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
value of the parameter (an integer) represents the number of
seconds between <i>keepalive</i> packets. If this parameter
is zero, no keepalive packets will be sent. Keepalive
packets, if sent, allow the server to tell whether a client
is still present and
responding.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Keepalives
should, in general, not be needed if the socket has the
SO_KEEPALIVE attribute set on it by default. (see</font>
<b><font color="#0000FF">socket
options</font></b><font color="#000000">). Basically you
should only use this option if you strike
difficulties.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Please
note this option only applies to SMB1 client connections,
and has no effect on SMB2
clients.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>keepalive =
300</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>keepalive =
600</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">max
connections
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option allows the number of simultaneous connections to a
service to be limited. If <i>max connections</i> is greater
than 0 then connections will be refused if this number of
connections to the service are already open. A value of zero
mean an unlimited number of connections may be
made.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Record
lock files are used to implement this feature. The lock
files will be stored in the directory specified by
the</font> <b><font color="#0000FF">lock
directory</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max connections =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>max connections =
10</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">max
disk size
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option allows you to put an upper limit on the apparent size
of disks. If you set this option to 100 then all shares will
appear to be not larger than 100 MB in
size.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this option does not limit the amount of data you can
put on the disk. In the above case you could still store
much more than 100 MB on the disk, but if a client ever asks
for the amount of free disk space or the total disk size
then the result will be bounded by the amount specified in
<i>max disk
size</i>.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option is primarily useful to work around bugs in some
pieces of software that can't handle very large disks,
particularly disks over 1GB in
size.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">A
<i>max disk size</i> of 0 means no
limit.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max disk size =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>max disk size =
1000</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">max
open files
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter limits the maximum number of open files that one
<b>smbd</b>(8) file serving process may have open for a
client at any one time. This parameter can be set very high
(16384) as Samba uses only one bit per unopened file.
Setting this parameter lower than 16384 will cause Samba to
complain and set this value back to the minimum of 16384, as
Windows 7 depends on this number of open file handles being
available.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
limit of the number of open files is usually set by the UNIX
per&minus;process file descriptor limit rather than this
parameter so you should never need to touch this
parameter.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max open files =
16384</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">max
smbd processes
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter limits the maximum number of <b>smbd</b>(8)
processes concurrently running on a system and is intended
as a stopgap to prevent degrading service to clients in the
event that the server has insufficient resources to handle
more than this number of connections. Remember that under
normal operating conditions, each user will have an
<b>smbd</b>(8) associated with him or her to handle
connections to all shares from a given
host.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>max smbd processes =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>max smbd processes =
1000</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">min
print space
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
sets the minimum amount of free disk space that must be
available before a user will be able to spool a print job.
It is specified in kilobytes. The default is 0, which means
a user can always spool a print
job.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>min print space =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>min print space =
2000</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">name
cache timeout
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Specifies
the number of seconds it takes before entries in samba's
hostname resolve cache time out. If the timeout is set to 0.
the caching is
disabled.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>name cache timeout =
660</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>name cache timeout =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">socket
options
(G)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><b><big>Warning</big></b>
<br>
Modern server operating systems are tuned for high network
performance in the majority of situations; when you set
socket options you are overriding those settings. Linux in
particular has an auto&minus;tuning mechanism for buffer
sizes that will be disabled if you specify a socket buffer
size. This can potentially cripple your TCP/IP
stack.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Getting
the socket options correct can make a big difference to your
performance, but getting them wrong can degrade it by just
as much. As with any other low level setting, if you must
make changes to it, make small changes and <i>test</i> the
effect before making any large
changes.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option allows you to set socket options to be used when
talking with the
client.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Socket
options are controls on the networking layer of the
operating systems which allow the connection to be
tuned.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option will typically be used to tune your Samba server for
optimal performance for your local network. There is no way
that Samba can know what the optimal parameters are for your
net, so you must experiment and choose them yourself. We
strongly suggest you read the appropriate documentation for
your operating system first (perhaps man setsockopt will
help).</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
may find that on some systems Samba will say &quot;Unknown
socket option&quot; when you supply an option. This means
you either incorrectly typed it or you need to add an
include file to includes.h for your OS. If the latter is the
case please send the patch to
samba&minus;technical@lists.samba.org.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Any
of the supported socket options may be combined in any way
you like, as long as your OS allows
it.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is the list of socket options currently settable using this
option:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_KEEPALIVE</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_REUSEADDR</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_BROADCAST</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_NODELAY</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_KEEPCNT
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_KEEPIDLE
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_KEEPINTVL
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
IPTOS_LOWDELAY</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
IPTOS_THROUGHPUT</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_REUSEPORT</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_SNDBUF
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_RCVBUF
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_SNDLOWAT
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_RCVLOWAT
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_SNDTIMEO
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
SO_RCVTIMEO
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_FASTACK
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_QUICKACK</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_NODELAYACK</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_KEEPALIVE_THRESHOLD
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_KEEPALIVE_ABORT_THRESHOLD
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
TCP_DEFER_ACCEPT
*</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Those
marked with a <i>'*'</i> take an integer argument. The
others can optionally take a 1 or 0 argument to enable or
disable the option, by default they will be enabled if you
don't specify 1 or
0.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">To
specify an argument use the syntax SOME_OPTION = VALUE for
example SO_SNDBUF = 8192. Note that you must not have any
spaces before or after the =
sign.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
you are on a local network then a sensible option might
be:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">socket
options =
IPTOS_LOWDELAY</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
you have a local network then you could
try:</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">socket
options = IPTOS_LOWDELAY
TCP_NODELAY</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
you are on a wide area network then perhaps try setting
IPTOS_THROUGHPUT.</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that several of the options may cause your Samba server to
fail completely. Use these options with
caution!</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>socket options =
TCP_NODELAY</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>socket options =
IPTOS_LOWDELAY</i></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">strict
allocate
(S)</font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
is a boolean that controls the handling of disk space
allocation in the server. When this is set to <b>yes</b> the
server will change from UNIX behaviour of not committing
real disk storage blocks when a file is extended to the
Windows behaviour of actually forcing the disk system to
allocate real storage blocks when a file is created or
extended to be a given size. In UNIX terminology this means
that Samba will stop creating sparse
files.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
option is really designed for file systems that support fast
allocation of large numbers of blocks such as
extent&minus;based file systems. On file systems that don't
support extents (most notably ext3) this can make Samba
slower. When you work with large files over &gt;100MB on
file systems without extents you may even run into problems
with clients running into
timeouts.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>When
you have an extent based filesystem it's likely that we can
make use of unwritten extents which allows Samba to allocate
even large amounts of space very fast and you will not see
any timeout problems caused by strict allocate. With strict
allocate in use you will also get much better out of quota
messages in case you use quotas. Another advantage of
activating this setting is that it will help to reduce file
fragmentation.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>To
give you an idea on which filesystems this setting might
currently be a good option for you: XFS, ext4, btrfs, ocfs2
on Linux and JFS2 on AIX support unwritten extents. On
Filesystems that do not support it, preallocation is
probably an expensive operation where you will see reduced
performance and risk to let clients run into timeouts when
creating large files. Examples are ext3, ZFS, HFS+ and most
others, so be aware if you activate this setting on those
filesystems.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>strict allocate =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>strict
rename
(S)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>By
default a Windows SMB server prevents directory renames when
there are open file or directory handles below it in the
filesystem hierarchy. Historically Samba has always allowed
this as POSIX filesystem semantics require
it.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
boolean parameter allows Samba to match the Windows
behavior. Setting this to &quot;yes&quot; is a very
expensive change, as it forces Samba to travers the entire
open file handle database on every directory rename request.
In a clustered Samba system the cost is even greater than
the non&minus;clustered
case.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>When
set to &quot;no&quot; smbd only checks the local process the
client is attached to for open files below a directory being
renamed, instead of checking for open files across all smbd
processes.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Because
of the expense in fully searching the database, the default
is &quot;no&quot;, and it is recommended to be left that way
unless a specific Windows application requires it to be
changed.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>If
the client has requested UNIX extensions (POSIX pathnames)
then renames are always allowed and this parameter has no
effect.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>strict rename =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>strict
sync
(S)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Many
Windows applications (including the Windows 98 explorer
shell) seem to confuse flushing buffer contents to disk with
doing a sync to disk. Under UNIX, a sync call forces the
thread to be suspended until the kernel has ensured that all
outstanding data in kernel disk buffers has been safely
stored onto stable storage. This is very slow and should
only be done rarely. Setting this parameter to <b>no</b>
(the default) means that <b>smbd</b>(8) ignores the Windows
applications requests for a sync call. There is only a
possibility of losing data if the operating system itself
that Samba is running on crashes, so there is little danger
in this default setting. In addition, this fixes many
performance problems that people have reported with the new
Windows98 explorer shell file
copies.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
flush request from SMB2/3 clients is handled asynchronously,
so for these clients setting the parameter to <b>yes</b>
does not block the processing of other requests in the smbd
process.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>strict sync =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>sync
always
(S)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
is a boolean parameter that controls whether writes will
always be written to stable storage before the write call
returns. If this is <b>no</b> then the server will be guided
by the client's request in each write call (clients can set
a bit indicating that a particular write should be
synchronous). If this is <b>yes</b> then every write will be
followed by a fsync() call to ensure the data is written to
disk. Note that the <i>strict sync</i> parameter must be set
to <b>yes</b> in order for this parameter to have any
effect.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>sync always =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>use
mmap
(G)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
global parameter determines if the tdb internals of Samba
can depend on mmap working correctly on the running system.
Samba requires a coherent mmap/read&minus;write system
memory cache. Currently only HPUX does not have such a
coherent cache, and so this parameter is set to <b>no</b> by
default on HPUX. On all other systems this parameter should
be left alone. This parameter is provided to help the Samba
developers track down problems with the tdb internal
code.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>use mmap =
yes</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>use
sendfile
(S)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>If
this parameter is <b>yes</b>, and the <b>sendfile()</b>
system call is supported by the underlying operating system,
then some SMB read calls (mainly ReadAndX and ReadRaw) will
use the more efficient sendfile system call for files that
are exclusively oplocked. This may make more efficient use
of the system CPU's and cause Samba to be faster. Samba
automatically turns this off for clients that use protocol
levels lower than NT LM 0.12 and when it detects a client is
Windows 9x (using sendfile from Linux will cause these
clients to
fail).</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>use sendfile =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>write
cache size
(S)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>If
this integer parameter is set to non&minus;zero value, Samba
will create an in&minus;memory cache for each oplocked file
(it does <i>not</i> do this for non&minus;oplocked files).
All writes that the client does not request to be flushed
directly to disk will be stored in this cache if possible.
The cache is flushed onto disk when a write comes in whose
offset would not fit into the cache or when the file is
closed by the client. Reads for the file are also served
from this cache if the data is stored within
it.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
cache allows Samba to batch client writes into a more
efficient write size for RAID disks (i.e. writes may be
tuned to be the RAID stripe size) and can improve
performance on systems where the disk subsystem is a
bottleneck but there is free memory for userspace
programs.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
integer parameter specifies the size of this cache (per
oplocked file) in
bytes.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Note
that the write cache won't be used for file handles with a
smb2 write
lease.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>write cache size =
0</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>write cache size = 262144 # for a 256k cache size per
file</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>get
quota command
(G)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
get quota command should only be used whenever there is no
operating system API available from the OS that samba can
use.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
option is only available Samba was compiled with quotas
support.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
parameter should specify the path to a script that queries
the quota information for the specified user/group for the
partition that the specified directory is
on.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Such
a script is being given 3
arguments:</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
directory</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
type of
query</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
uid of user or gid of
group</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
directory is actually mostly just &quot;.&quot; &minus; It
needs to be treated relatively to the current working
directory that the script can also
query.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
type of query can be one
of:</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
1 &minus; user
quotas</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
2 &minus; user default quotas (uid =
&minus;1)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
3 &minus; group
quotas</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
4 &minus; group default quotas (gid =
&minus;1)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
script should print one line as output with spaces between
the columns. The printed columns should
be:</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
1 &minus; quota flags (0 = no quotas, 1 = quotas enabled, 2
= quotas enabled and
enforced)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
2 &minus; number of currently used
blocks</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
3 &minus; the softlimit number of
blocks</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
4 &minus; the hardlimit number of
blocks</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
5 &minus; currently used number of
inodes</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
6 &minus; the softlimit number of
inodes</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
7 &minus; the hardlimit number of
inodes</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>&bull;
8 (optional) &minus; the number of bytes in a block(default
is
1024)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>get quota command
=</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Example:
<i>get quota command =
/usr/local/sbin/query_quota</i></big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>host
msdfs
(G)</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>If
set to <b>yes</b>, Samba will act as a Dfs server, and allow
Dfs&minus;aware clients to browse Dfs trees hosted on the
server.</big></font></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>See
also the</big></font> <big><b><font color="#0000FF">msdfs
root</font></b> <font color="#000000">share level parameter.
For more information on setting up a Dfs tree on Samba,
refer to the MSFDS chapter in the book
Samba3&minus;HOWTO.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>host msdfs =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">msdfs
proxy
(S)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter indicates that the share is a stand&minus;in for
another CIFS share whose location is specified by the value
of the parameter. When clients attempt to connect to this
share, they are redirected to one or multiple, comma
separated proxied shares using the SMB&minus;Dfs
protocol.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Only
Dfs roots can act as proxy shares. Take a look at the</font>
<b><font color="#0000FF">msdfs root</font></b>
<font color="#000000">and</font>
<b><font color="#0000FF">host msdfs</font></b>
<font color="#000000">options to find out how to set up a
Dfs root
share.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>msdfs proxy =
\otherserver\someshare,\otherserver2\someshare</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">msdfs
root
(S)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
set to <b>yes</b>, Samba treats the share as a Dfs root and
allows clients to browse the distributed file system tree
rooted at the share directory. Dfs links are specified in
the share directory by symbolic links of the form
msdfs:serverA\\shareA,serverB\\shareB and so on. For more
information on setting up a Dfs tree on Samba, refer to the
MSDFS chapter in the Samba3&minus;HOWTO
book.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>msdfs root =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">msdfs
shuffle referrals
(S)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
set to <b>yes</b>, Samba will shuffle Dfs referrals for a
given Dfs link if multiple are available, allowing for load
balancing across clients. For more information on setting up
a Dfs tree on Samba, refer to the MSDFS chapter in the
Samba3&minus;HOWTO
book.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>msdfs shuffle referrals =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">ntvfs
handler
(S)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
specifies the NTVFS handlers for this
share.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
posix: Maps POSIX FS semantics to NT
semantics</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
unixuid: Sets up user credentials based on POSIX
gid/uid.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
cifs: Proxies a remote CIFS FS. Mainly useful for
testing.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
nbench: Filter module that saves data useful to the nbench
benchmark
suite.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
ipc: Allows using SMB for inter process communication. Only
used for the IPC$
share.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
posix: Maps POSIX FS semantics to NT
semantics</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
print: Allows printing over SMB. This is LANMAN&minus;style
printing, not the be confused with the spoolss DCE/RPC
interface used by later versions of
Windows.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that this option is only used when the NTVFS file server is
in use. It is not used with the (default) s3fs file
server.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>ntvfs handler = unixuid,
default</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">set
quota command
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
set quota command should only be used whenever there is no
operating system API available from the OS that samba can
use.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option is only available if Samba was compiled with quota
support.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter should specify the path to a script that can set
quota for the specified
arguments.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
specified script should take the following
arguments:</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
1 &minus; path to where the quota needs to be set. This
needs to be interpreted relative to the current working
directory that the script may also check
for.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
2 &minus; quota
type</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
1 &minus; user
quotas</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
2 &minus; user default quotas (uid =
&minus;1)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
3 &minus; group
quotas</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:29%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
4 &minus; group default quotas (gid =
&minus;1)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
3 &minus; id (uid for user, gid for group, &minus;1 if
N/A)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
4 &minus; quota state (0 = disable, 1 = enable, 2 = enable
and
enforce)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
5 &minus; block
softlimit</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
6 &minus; block
hardlimit</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
7 &minus; inode
softlimit</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
8 &minus; inode
hardlimit</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
9(optional) &minus; block size, defaults to
1024</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
script should output at least one line of data on success.
And nothing on
failure.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>set quota command
=</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>set quota command =
/usr/local/sbin/set_quota</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">vfs
object</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for vfs
objects.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">vfs
objects
(S)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the backend names which are used for
Samba VFS I/O operations. By default, normal disk I/O
operations are used but these can be overloaded with one or
more VFS
objects.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>vfs objects
=</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>vfs objects = extd_audit
recycle</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">create
krb5 conf
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Setting
this parameter to no prevents winbind from creating custom
krb5.conf files. Winbind normally does this because the krb5
libraries are not AD&minus;site&minus;aware and thus would
pick any domain controller out of potentially very many.
Winbind is site&minus;aware and makes the krb5 libraries use
a local DC by creating its own krb5.conf
files.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Preventing
winbind from doing this might become necessary if you have
to add special options into your system&minus;krb5.conf that
winbind does not
see.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>create krb5 conf =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
backend
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
idmap backend provides a plugin interface for Winbind to use
varying backends to store SID/uid/gid mapping
tables.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option specifies the default backend that is used when no
special configuration set, but it is now deprecated in
favour of the new spelling</font>
<b><font color="#0000FF">idmap config * :
backend</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>idmap backend =
tdb</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
cache time
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the number of seconds that Winbind's
idmap interface will cache positive SID/uid/gid query
results. By default, Samba will cache these results for one
week.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>idmap cache time =
604800</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
config DOMAIN : OPTION
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">ID
mapping in Samba is the mapping between Windows SIDs and
Unix user and group IDs. This is performed by Winbindd with
a configurable plugin interface. Samba's ID mapping is
configured by options starting with the</font>
<b><font color="#0000FF">idmap config</font></b>
<font color="#000000">prefix. An idmap option consists of
the</font> <b><font color="#0000FF">idmap config</font></b>
<font color="#000000">prefix, followed by a domain name or
the asterisk character (*), a colon, and the name of an
idmap setting for the chosen
domain.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
idmap configuration is hence divided into groups, one group
for each domain to be configured, and one group with the
asterisk instead of a proper domain name, which specifies
the default configuration that is used to catch all domains
that do not have an explicit idmap configuration of their
own.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">There
are three general options
available:</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">backend
=
backend_name</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%;"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
specifies the name of the idmap plugin to use as the
SID/uid/gid backend for this domain. The standard backends
are tdb (<b>idmap_tdb</b>(8)), tdb2 (<b>idmap_tdb2</b>(8)),
ldap (<b>idmap_ldap</b>(8)), rid (<b>idmap_rid</b>(8)), hash
(<b>idmap_hash</b>(8)), autorid (<b>idmap_autorid</b>(8)),
ad (<b>idmap_ad</b>(8)) and nss (<b>idmap_nss</b>(8)). The
corresponding manual pages contain the details, but here is
a
summary.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
first three of these create mappings of their own using
internal unixid counters and store the mappings in a
database. These are suitable for use in the default idmap
configuration. The rid and hash backends use a pure
algorithmic calculation to determine the unixid for a SID.
The autorid module is a mixture of the tdb and rid backend.
It creates ranges for each domain encountered and then uses
the rid algorithm for each of these automatically configured
domains individually. The ad backend uses unix ids stored in
Active Directory via the standard schema extensions. The nss
backend reverses the standard winbindd setup and gets the
unix ids via names from nsswitch which can be useful in an
ldap
setup.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">range
= low &minus;
high</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%;"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Defines
the available matching uid and gid range for which the
backend is authoritative. For allocating backends, this also
defines the start and the end of the range for allocating
new unique
IDs.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
uses this parameter to find the backend that is
authoritative for a unix ID to SID mapping, so it must be
set for each individually configured domain and for the
default configuration. The configured ranges must be
mutually
disjoint.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">read
only =
yes|no</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%;"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option can be used to turn the writing backends tdb, tdb2,
and ldap into read only mode. This can be useful e.g. in
cases where a pre&minus;filled database exists that should
not be extended
automatically.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
following example illustrates how to configure the
<b>idmap_ad</b>(8) backend for the CORP domain and the
<b>idmap_tdb</b>(8) backend for all other domains. This
configuration assumes that the admin of CORP assigns unix
ids below 1000000 via the SFU extensions, and winbind is
supposed to use the next million entries for its own
mappings from trusted domains and for local groups for
example.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
config * : backend =
tdb</font></big></big></big></big></big></big></big></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
config * : range =
1000000&minus;1999999</font></big></big></big></big></big></big></big></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
config CORP : backend =
ad</font></big></big></big></big></big></big></big></big></big></big></big></big></p> </td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">



<p><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
config CORP : range =
1000&minus;999999</font></big></big></big></big></big></big></big></big></big></big></big></big></p> </td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
gid</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for idmap
gid.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
gid
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
idmap gid parameter specifies the range of group ids for the
default idmap configuration. It is now deprecated in favour
of</font> <b><font color="#0000FF">idmap config * :
range</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">See
the</font> <b><font color="#0000FF">idmap config</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>idmap gid
=</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>idmap gid =
10000&minus;20000</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
negative cache time
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the number of seconds that Winbind's
idmap interface will cache negative SID/uid/gid query
results.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>idmap negative cache time =
120</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
uid</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is a synonym for idmap
uid.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">idmap
uid
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
idmap uid parameter specifies the range of user ids for the
default idmap configuration. It is now deprecated in favour
of</font> <b><font color="#0000FF">idmap config * :
range</font></b><font color="#000000">.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">See
the</font> <b><font color="#0000FF">idmap config</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>idmap uid
=</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>idmap uid =
10000&minus;20000</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">neutralize
nt4 emulation
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option controls whether winbindd sends the
NETLOGON_NEG_NEUTRALIZE_NT4_EMULATION flag in order to
bypass the NT4 emulation of a domain
controller.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Typically
you should not need set this. It can be useful for upgrades
from NT4 to AD
domains.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
behavior can be controlled per netbios domain by using
'neutralize nt4 emulation:NETBIOSDOMAIN = yes' as
option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>neutralize nt4 emulation =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">reject
md5 servers
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option controls whether winbindd requires support for aes
support for the netlogon secure
channel.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
following flags will be required NETLOGON_NEG_ARCFOUR,
NETLOGON_NEG_SUPPORTS_AES, NETLOGON_NEG_PASSWORD_SET2 and
NETLOGON_NEG_AUTHENTICATED_RPC.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
can set this to yes if all domain controllers support aes.
This will prevent downgrade
attacks.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
behavior can be controlled per netbios domain by using
'reject md5 servers:NETBIOSDOMAIN = yes' as
option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option takes precedence to the</font>
<b><font color="#0000FF">require strong key</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>reject md5 servers =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">require
strong key
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option controls whether winbindd requires support for md5
strong key support for the netlogon secure
channel.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
following flags will be required NETLOGON_NEG_STRONG_KEYS,
NETLOGON_NEG_ARCFOUR and
NETLOGON_NEG_AUTHENTICATED_RPC.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
can set this to no if some domain controllers only support
des. This might allows weak crypto to be negotiated, may via
downgrade
attacks.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
behavior can be controlled per netbios domain by using
'require strong key:NETBIOSDOMAIN = no' as
option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
for active directory domain this option is hardcoded to
'yes'</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option yields precedence to the</font>
<b><font color="#0000FF">reject md5 servers</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option takes precedence to the</font>
<b><font color="#0000FF">client schannel</font></b>
<font color="#000000">option.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>require strong key =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">template
homedir
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
filling out the user information for a Windows NT user, the
<b>winbindd</b>(8) daemon uses this parameter to fill in the
home directory for that user. If the string <i>%D</i> is
present it is substituted with the user's Windows NT domain
name. If the string <i>%U</i> is present it is substituted
with the user's Windows NT user
name.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>template homedir =
/home/%D/%U</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">template
shell
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
filling out the user information for a Windows NT user, the
<b>winbindd</b>(8) daemon uses this parameter to fill in the
login shell for that
user.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>template shell =
/bin/false</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
cache time
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the number of seconds the
<b>winbindd</b>(8) daemon will cache user and group
information before querying a Windows NT server
again.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
does not apply to authentication requests, these are always
evaluated in real time unless the</font>
<b><font color="#0000FF">winbind offline logon</font></b>
<font color="#000000">option has been
enabled.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind cache time =
300</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbindd
privileged socket directory
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
setting controls the location of the winbind daemon's
privileged
socket.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbindd privileged socket directory =
/var/lib/samba/winbindd_privileged</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbindd
socket directory
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
setting controls the location of the winbind daemon's
socket.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Except
within automated test scripts, this should not be altered,
as the client tools (nss_winbind etc) do not honour this
parameter. Client tools must then be advised of the altered
path with the WINBINDD_SOCKET_DIR environment
varaible.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbindd socket directory =
/run/samba/winbindd</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
enum groups
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">On
large installations using <b>winbindd</b>(8) it may be
necessary to suppress the enumeration of groups through the
setgrent(), getgrent() and endgrent() group of system calls.
If the <i>winbind enum groups</i> parameter is <b>no</b>,
calls to the getgrent() system call will not return any
data.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><b><big>Warning</big></b>
<br>
Turning off group enumeration may cause some programs to
behave
oddly.</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind enum groups =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
enum users
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>On
large installations using <b>winbindd</b>(8) it may be
necessary to suppress the enumeration of users through the
setpwent(), getpwent() and endpwent() group of system calls.
If the <i>winbind enum users</i> parameter is <b>no</b>,
calls to the getpwent system call will not return any
data.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big><b><big>Warning</big></b>
<br>
Turning off user enumeration may cause some programs to
behave oddly. For example, the finger program relies on
having access to the full user list when searching for
matching
usernames.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>winbind enum users =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>winbind
expand groups
(G)</big></font></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big><big>This
option controls the maximum depth that winbindd will
traverse when flattening nested group memberships of Windows
domain groups. This is different from the</big></big></font>
<big><big><b><font color="#0000FF">winbind nested
groups</font></b> <font color="#000000">option which
implements the Windows NT4 model of local group nesting. The
&quot;winbind expand groups&quot; parameter specifically
applies to the membership of domain
groups.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Be
aware that a high value for this parameter can result in
system slowdown as the main parent winbindd daemon must
perform the group unrolling and will be unable to answer
incoming NSS or authentication requests during this
time.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
default value was changed from 1 to 0 with Samba 4.2. Some
broken applications calculate the group memberships of users
by traversing groups, such applications will require
&quot;winbind expand groups = 1&quot;. But the new default
makes winbindd more reliable as it doesn't require SAMR
access to domain controllers of trusted
domains.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind expand groups =
0</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
max clients
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the maximum number of clients the
<b>winbindd</b>(8) daemon can connect with. The parameter is
not a hard limit. The <b>winbindd</b>(8) daemon configures
itself to be able to accept at least that many connections,
and if the limit is reached, an attempt is made to
disconnect idle
clients.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind max clients =
200</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
max domain connections
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the maximum number of simultaneous
connections that the <b>winbindd</b>(8) daemon should open
to the domain controller of one domain. Setting this
parameter to a value greater than 1 can improve scalability
with many simultaneous winbind requests, some of which might
be
slow.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that if</font> <b><font color="#0000FF">winbind offline
logon</font></b> <font color="#000000">is set to <b>Yes</b>,
then only one DC connection is allowed per domain,
regardless of this
setting.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind max domain connections =
1</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind max domain connections =
10</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
nested groups
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
set to yes, this parameter activates the support for nested
groups. Nested groups are also called local groups or
aliases. They work like their counterparts in Windows:
Nested groups are defined locally on any machine (they are
shared between DC's through their SAM) and can contain users
and global groups from any trusted SAM. To be able to use
nested groups, you need to run
nss_winbind.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind nested groups =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
normalize names
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter controls whether winbindd will replace whitespace
in user and group names with an underscore (_) character.
For example, whether the name &quot;Space Kadet&quot; should
be replaced with the string &quot;space_kadet&quot;.
Frequently Unix shell scripts will have difficulty with
usernames contains whitespace due to the default field
separator in the shell. If your domain possesses names
containing the underscore character, this option may cause
problems unless the name aliasing feature is supported by
your nss_info
plugin.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
feature also enables the name aliasing API which can be used
to make domain user and group names to a non&minus;qualified
version. Please refer to the manpage for the configured
idmap and nss_info plugin for the specifics on how to
configure name aliasing for a specific configuration. Name
aliasing takes precedence (and is mutually exclusive) over
the whitespace replacement mechanism discussed
previously.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind normalize names =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind normalize names =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
nss info
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is designed to control how Winbind retrieves Name
Service Information to construct a user's home directory and
login shell. Currently the following settings are
available:</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<i>template</i> &minus; The default, using the parameters of
<i>template shell</i> and <i>template
homedir</i>)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
<i>&lt;sfu | sfu20 | rfc2307 &gt;</i> &minus; When Samba is
running in security = ads and your Active Directory Domain
Controller does support the Microsoft &quot;Services for
Unix&quot; (SFU) LDAP schema, winbind can retrieve the login
shell and the home directory attributes directly from your
Directory Server. For SFU 3.0 or 3.5 simply choose
&quot;sfu&quot;, if you use SFU 2.0 please choose
&quot;sfu20&quot;. Note that retrieving UID and GID from
your ADS&minus;Server requires to use <i>idmap config
DOMAIN:backend</i> = ad as well. The primary group
membership is currently always calculated via the
&quot;primaryGroupID&quot; LDAP
attribute.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind nss info =
template</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind nss info =
sfu</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
offline logon
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is designed to control whether Winbind should
allow one to login with the <i>pam_winbind</i> module using
Cached Credentials. If enabled, winbindd will store user
credentials from successful logins encrypted in a local
cache.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind offline logon =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind offline logon =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
reconnect delay
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the number of seconds the
<b>winbindd</b>(8) daemon will wait between attempts to
contact a Domain controller for a domain that is determined
to be down or not
contactable.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind reconnect delay =
30</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
refresh tickets
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is designed to control whether Winbind should
refresh Kerberos Tickets retrieved using the
<i>pam_winbind</i>
module.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind refresh tickets =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind refresh tickets =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
request timeout
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies the number of seconds the
<b>winbindd</b>(8) daemon will wait before disconnecting
either a client connection with no outstanding requests
(idle) or a client connection with a request that has
remained outstanding (hung) for longer than this number of
seconds.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind request timeout =
60</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
rpc only
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Setting
this parameter to yes forces winbindd to use RPC instead of
LDAP to retrieve information from Domain
Controllers.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind rpc only =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
sealed pipes
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option controls whether any requests from winbindd to domain
controllers pipe will be sealed. Disabling sealing can be
useful for debugging
purposes.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
behavior can be controlled per netbios domain by using
'winbind sealed pipes:NETBIOSDOMAIN = no' as
option.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind sealed pipes =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
separator
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter allows an admin to define the character used when
listing a username of the form of <i>DOMAIN</i>
\<i>user</i>. This parameter is only applicable when using
the pam_winbind.so and nss_winbind.so modules for UNIX
services.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Please
note that setting this parameter to + causes problems with
group membership at least on glibc systems, as the character
+ is used as a special character for NIS in
/etc/group.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind separator =
\</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind separator =
+</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
trusted domains only
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is designed to allow Samba servers that are
members of a Samba controlled domain to use UNIX accounts
distributed via NIS, rsync, or LDAP as the uid's for
winbindd users in the hosts primary domain. Therefore, the
user DOMAIN\user1 would be mapped to the account user1 in
/etc/passwd instead of allocating a new uid for him or
her.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter is now deprecated in favor of the newer idmap_nss
backend. Refer to the <b>idmap_nss</b>(8) man page for more
information.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind trusted domains only =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">winbind
use default domain
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
parameter specifies whether the <b>winbindd</b>(8) daemon
should operate on users without domain component in their
username. Users without a domain component are treated as is
part of the winbindd server's own domain. While this does
not benefit Windows users, it makes SSH, FTP and
e&minus;mail function in a way much closer to the way they
would in a native unix
system.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
option should be avoided if possible. It can cause confusion
about responsibilities for a user or group. In many
situations it is not clear whether winbind or /etc/passwd
should be seen as authoritative for a user, likewise for
groups.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>winbind use default domain =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>winbind use default domain =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">dns
proxy
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Specifies
that <b>nmbd</b>(8) when acting as a WINS server and finding
that a NetBIOS name has not been registered, should treat
the NetBIOS name word&minus;for&minus;word as a DNS name and
do a lookup with the DNS server for that name on behalf of
the name&minus;querying
client.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Note
that the maximum length for a NetBIOS name is 15 characters,
so the DNS name (or DNS alias) can likewise only be 15
characters,
maximum.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">nmbd
spawns a second copy of itself to do the DNS name lookup
requests, as doing a name lookup is a blocking
action.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>dns proxy =
yes</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">wins
hook
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">When
Samba is running as a WINS server this allows you to call an
external program for all changes to the WINS database. The
primary use for this option is to allow the dynamic update
of external name resolution databases such as dynamic
DNS.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">The
wins hook parameter specifies the name of a script or
executable that will be called as
follows:</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">wins_hook
operation name nametype ttl
IP_list</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The first argument is the operation and is one of
&quot;add&quot;, &quot;delete&quot;, or &quot;refresh&quot;.
In most cases the operation can be ignored as the rest of
the parameters provide sufficient information. Note that
&quot;refresh&quot; may sometimes be called when the name
has not previously been added, in that case it should be
treated as an
add.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The second argument is the NetBIOS name. If the name is not
a legal name then the wins hook is not called. Legal names
contain only letters, digits, hyphens, underscores and
periods.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The third argument is the NetBIOS name type as a 2 digit
hexadecimal
number.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The fourth argument is the TTL (time to live) for the name
in
seconds.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">&bull;
The fifth and subsequent arguments are the IP addresses
currently registered for that name. If this list is empty
then the name should be
deleted.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">An
example script that calls the BIND dynamic DNS update
program nsupdate is provided in the examples directory of
the Samba source
code.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><i>No
default</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">wins
proxy
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
is a boolean that controls if <b>nmbd</b>(8) will respond to
broadcast name queries on behalf of other hosts. You may
need to set this to <b>yes</b> for some older
clients.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>wins proxy =
no</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">wins
server
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">This
specifies the IP address (or DNS name: IP address for
preference) of the WINS server that <b>nmbd</b>(8) should
register with. If you have a WINS server on your network
then you should set this to the WINS server's
IP.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">You
should point this at your WINS server if you have a
multi&minus;subnetted
network.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">If
you want to work in multiple namespaces, you can give every
wins server a 'tag'. For each tag, only one (working) server
will be queried for a name. The tag should be separated from
the ip address by a
colon.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:23%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><b><big>Note</big></b>
<br>
You need to set up Samba to point to a WINS server if you
have multiple subnets and wish cross&minus;subnet browsing
to work
correctly.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%;"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">See
the chapter in the Samba3&minus;HOWTO on Network
Browsing.</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Default:
<i>wins server
=</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>wins server = mary:192.9.200.1 fred:192.168.3.199
mary:192.168.2.61 # For this example when querying a certain
name, 192.19.200.1 will be asked first and if that doesn't
respond 192.168.2.61. If either of those doesn't know the
name 192.168.3.199 will be
queried.</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">Example:
<i>wins server = 192.9.200.1
192.168.2.61</i></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000">wins
support
(G)</font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
boolean controls if the <b>nmbd</b>(8) process in Samba will
act as a WINS server. You should not set this to <b>yes</b>
unless you have a multi&minus;subnetted network and you wish
a particular nmbd to be your WINS server. Note that you
should <i>NEVER</i> set this to <b>yes</b> on more than one
machine in your
network.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:17%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Default:
<i>wins support =
no</i></big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>

<h2>WARNINGS
<a name="WARNINGS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Although
the configuration file permits service names to contain
spaces, your client software may not. Spaces will be ignored
in comparisons anyway, so it shouldn't be a problem &minus;
but be aware of the
possibility.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>On
a similar note, many clients &minus; especially DOS clients
&minus; limit service names to eight characters.
<b>smbd</b>(8) has no such limitation, but attempts to
connect from such clients will fail if they truncate the
service names. For this reason you should probably keep your
service names down to eight characters in
length.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>Use
of the [homes] and [printers] special sections make life for
an administrator easy, but the various combinations of
default attributes can be tricky. Take extreme care when
designing these sections. In particular, ensure that the
permissions on spool directories are
correct.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>

<h2>VERSION
<a name="VERSION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>This
man page is correct for version 4 of the Samba
suite.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big><b>samba</b>(7),
<b>smbpasswd</b>(8), <b>smbd</b>(8), <b>nmbd</b>(8),
<b>winbindd</b>(8), <b>samba</b>(8), <b>samba-tool</b>(8),
<b>smbclient</b>(1), <b>nmblookup</b>(1),
<b>testparm</b>(1).</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
original Samba software and related utilities were created
by Andrew Tridgell. Samba is now developed by the Samba Team
as an Open Source project similar to the way the Linux
kernel is
developed.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>


<p style="margin-left:11%; margin-top: 1em"><big><big><big><big><big><big><big><big><big><big><big><big><big><big><font color="#000000"><big>The
original Samba man pages were written by Karl Auer. The man
page sources were converted to YODL format (another
excellent piece of Open Source software, available at
ftp://ftp.icce.rug.nl/pub/unix/) and updated for the Samba
2.0 release by Jeremy Allison. The conversion to DocBook for
Samba 2.2 was done by Gerald Carter. The conversion to
DocBook XML 4.2 for Samba 3.0 was done by Alexander
Bokovoy.</big></font></big></big></big></big></big></big></big></big></big></big></big></big></big></big></p>
<hr>
</body>
</html>
