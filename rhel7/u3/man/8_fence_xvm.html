<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 21:23:53 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>FENCE_AGENT</title>

</head>
<body>

<h1 align="center">FENCE_AGENT</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL PARAMETERS">GENERAL PARAMETERS</a><br>
<a href="#MULTICAST PARAMETERS">MULTICAST PARAMETERS</a><br>
<a href="#SERIAL/VMCHANNEL PARAMETERS">SERIAL/VMCHANNEL PARAMETERS</a><br>
<a href="#GENERAL STDIN PARAMETERS">GENERAL STDIN PARAMETERS</a><br>
<a href="#MULTICAST STDIN PARAMETERS">MULTICAST STDIN PARAMETERS</a><br>
<a href="#SERIAL/VMCHANNEL STDIN PARAMETERS">SERIAL/VMCHANNEL STDIN PARAMETERS</a><br>
<a href="#FENCING ACTIONS">FENCING ACTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">fence_virt -
Fencing agent for virtual machines using VM Channel</p>

<p style="margin-left:11%; margin-top: 1em">fence_xvm -
Fencing agent for virtual machines using multicast</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">fence_virt and
fence_xvm are an I/O Fencing agents which can be used with
virtual machines. Fence_xvm is backward compatible with
fence_xvmd.</p>

<p style="margin-left:11%; margin-top: 1em">Fence_virt and
fence_xvm talk to fence_virtd, which supports multiple
backend plugins, including: <br>
- libvirt for single-node operation <br>
- Cluster Checkpoints when using Linux-cluster release 3.0.0
or later <br>
- libvirt-qpid for multi-node, non-cluster operation</p>

<p style="margin-left:11%; margin-top: 1em">For
compatibility, fence_xvm may talk to fence_xvmd from
linux-cluster release 2 or later.</p>

<p style="margin-left:11%; margin-top: 1em">fence_virt and
fence_xvm accept options on the command line as well as from
stdin. The fencing daemon sends parameters through stdin
when it execs the agent. The agent may be run by itself with
command line options, which is useful for testing or turning
on or off virtual machines from scripts.</p>

<h2>GENERAL PARAMETERS
<a name="GENERAL PARAMETERS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Increment (command line) debug level</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-H</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Virtual machine (domain UUID or name) to fence</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-o</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Fencing action (null, off, on, reboot, status, monitor,
list, or metadata) (Default Value: reboot). See the FENCING
ACTIONS section.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-t</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Fencing timeout (in seconds) (Default Value: 30)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Fencing delay (in seconds). The fence agent will wait
the specified number of seconds before attempting a fencing
operation. (Default Value: 0)</p></td></tr>
</table>

<h2>MULTICAST PARAMETERS
<a name="MULTICAST PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
parameters are used only when using fence_virt in multicast
mode (e.g. by running fence_xvm).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">IP Family (auto, ipv4, ipv6)
(Default Value: auto)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Multicast address (Default Values: 225.0.0.12 /
ff02::3:1)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>IP port (Default Value: 1229)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Multicast time-to-live (in hops) (Default Value: 2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Multicast retransmit time (in 1/10sec) (Default Value:
20)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-C</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Authentication (none, sha1, sha256, sha512) (Default
Value: sha256)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Packet hash strength (none, sha1, sha256, sha512)
(Default Value: sha256)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-k</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Shared key file (Default Value:
/etc/cluster/fence_xvm.key)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Specify if using fence_virt with older fence_xvmd
installations which are using UUIDs. Fence_virtd ignores
this parameter.</p></td></tr>
</table>

<h2>SERIAL/VMCHANNEL PARAMETERS
<a name="SERIAL/VMCHANNEL PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
parameters are used only when using fence_virt in serial
mode (e.g. by running fence_virt).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Serial device (fence_virt mode).
On the host, the serial device must be mapped in each
domain&rsquo;s configuration file. See fence_virt.conf(5)
for more information. Specifying a serial device causes
fence_virt to use serial mode (as opposed to VMChannel
mode).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-P</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Serial parameters. (Default Value: 115200,8N1)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-A</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>VMChannel IP address (Default Value: 10.0.2.179)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>VMChannel IP port (Default Value: 1229)</p></td></tr>
</table>

<h2>GENERAL STDIN PARAMETERS
<a name="GENERAL STDIN PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
parameters are passed to fence_virt via standard input if no
command line options are present. They are presented to
fence_virt in the form:</p>

<p style="margin-left:11%; margin-top: 1em">name=value</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>debug</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Specify debugging level</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>port</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Virtual machine (domain UUID or name) to fence</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>action</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Fencing action (null, off, on, reboot, status, monitor,
list, or metadata) (Default Value: reboot). See the FENCING
ACTIONS section.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>timeout</b></p>

<p style="margin-left:22%;">Fencing timeout (in seconds)
(Default Value: 30)</p>

<h2>MULTICAST STDIN PARAMETERS
<a name="MULTICAST STDIN PARAMETERS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ip_family</b></p>

<p style="margin-left:22%;">IP Family ([auto], ipv4, ipv6)
(Default Value: auto)</p>

<p style="margin-left:11%;"><b>multicast_address</b></p>

<p style="margin-left:22%;">Multicast address (Defaults:
225.0.0.12 / ff02::3:1)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>port</b></p></td>
<td width="5%"></td>
<td width="44%">


<p>IP port (Default Value: 1229)</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>multicast_ttl</b></p>

<p style="margin-left:22%;">Multicast time-to-live (in
hops) (Default Value: 2)</p>

<p style="margin-left:11%;"><b>retrans</b></p>

<p style="margin-left:22%;">Multicast retransmit time (in
1/10sec) (Default Value: 20)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>auth</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Authentication (none, sha1, sha256, sha512) (Default
Value: sha256)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>hash</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Packet hash strength (none, sha1, sha256, sha512)
(Default Value: sha256)</p></td></tr>
</table>

<p style="margin-left:11%;"><b>key_file</b></p>

<p style="margin-left:22%;">Shared key file (Default Value:
/etc/cluster/fence_xvm.key)</p>

<p style="margin-left:11%;"><b>use_uuid</b></p>

<p style="margin-left:22%;">Specify if using fence_virt
with older fence_xvmd installations which are using UUIDs.
Fence_virtd ignores this parameter.</p>

<h2>SERIAL/VMCHANNEL STDIN PARAMETERS
<a name="SERIAL/VMCHANNEL STDIN PARAMETERS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>serial_device</b></p>

<p style="margin-left:22%;">Serial device. On the host, the
serial device must be mapped in each domain&rsquo;s
configuration file. See fence_virt.conf(5) for more
information. If specified, causes fence_virt to operate in
serial mode (not specifying causes fence_virt to operate in
VM Channel mode).</p>

<p style="margin-left:11%;"><b>serial_params</b></p>

<p style="margin-left:22%;">Serial parameters.
Default=115200,8N1.</p>

<p style="margin-left:11%;"><b>channel_ip</b></p>

<p style="margin-left:22%;">Channel IP.
Default=10.0.2.179</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ipport</b></p></td>
<td width="2%"></td>
<td width="41%">


<p>Channel port. Default=1229</p></td>
<td width="37%">
</td></tr>
</table>

<h2>FENCING ACTIONS
<a name="FENCING ACTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>off</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Destroy or turn off virtual
machine.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>reboot</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Reboot virtual machine; i.e. restart the virtual machine
on the same host where it is currently running.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>on</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Turn on a virtual machine. Note: Turning on a virtual
machine only works with some fence_virt backends.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>status</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Check whether a virtual machine is running or not.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>monitor</b></p>

<p style="margin-left:22%;">Check the health of
fence_virtd&rsquo;s backend plugin.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>list</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>List virtual machines which may be fenced by fence_virtd
(not supported on all backends).</p></td></tr>
</table>

<p style="margin-left:11%;"><b>metadata</b></p>

<p style="margin-left:22%;">Print XML metadata to standard
output.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">fence_virtd(8),
fence(8), fence_virtd.conf(5)</p>
<hr>
</body>
</html>
