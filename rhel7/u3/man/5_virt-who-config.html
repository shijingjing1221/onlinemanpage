<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Fri Nov 11 22:51:02 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>VIRT-WHO-CONFIG</title>

</head>
<body>

<h1 align="center">VIRT-WHO-CONFIG</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPISIS">SYNOPISIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL CONFIGURATION">GENERAL CONFIGURATION</a><br>
<a href="#VIRTUALIZATION BACKEND CONFIGURATION">VIRTUALIZATION BACKEND CONFIGURATION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#BACKEND SPECIFIC OPTIONS">BACKEND SPECIFIC OPTIONS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">virt-who-config
- configuration for virt-who</p>

<h2>SYNOPISIS
<a name="SYNOPISIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/virt-who.conf
/etc/virt-who.d/*</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Configuration
format is ini-like. The configuration files located at
/etc/virt-who.d/ are called virtualization backend
configurations. The configuration located at
/etc/virt-who.conf is the main configuration for virt-who.
Below are descriptions of both the required and optional
options for both kinds of configs and how they are used.</p>

<h2>GENERAL CONFIGURATION
<a name="GENERAL CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The general
configuration file (located at /etc/virt-who.conf), has two
special sections <b>global</b> and <b>defaults</b>. The
settings that can be specified in <b>defaults</b> are any
setting listed in the <b>VIRTUALIZATION BACKEND
CONFIGURATION</b> section of this manual. These settings are
applied as defaults to the configurations found in
/etc/virt-who.d/*.</p>

<p style="margin-left:11%; margin-top: 1em">The settings in
the <b>global</b> affect the overall operation of the
application. The following are options that can be specified
in the <b>global</b> section: <b><br>
interval</b></p>

<p style="margin-left:22%;">how often to check connected
hypervisors for changes (seconds). Also affects how often a
mapping is reported.</p>

<p style="margin-left:11%;"><b>reporter_id</b></p>

<p style="margin-left:22%;">The id of this virt-who
instance, reported with all mappings. Defaults to
HOSTNAME-MACHINEID</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>debug</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>Enable debugging output</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>oneshot</b></p>

<p style="margin-left:22%;">Send the list of guest IDs and
exit immediately</p>

<p style="margin-left:11%;"><b>log_per_config</b></p>

<p style="margin-left:22%;">Write a seperate log file per
configuration in the config directory</p>

<p style="margin-left:11%;"><b>log_dir</b></p>

<p style="margin-left:22%;">The absolute path of the
directory to write logs to.</p>

<p style="margin-left:11%;"><b>log_file</b></p>

<p style="margin-left:22%;">The file name to write logs to
(used only if log_per_config=False)</p>

<p style="margin-left:11%;"><b>configs</b></p>

<p style="margin-left:22%;">A list of files containing
configurations for virt-who Used to specify locations other
than default</p>

<h2>VIRTUALIZATION BACKEND CONFIGURATION
<a name="VIRTUALIZATION BACKEND CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each section
(or group), denoted by an arbitrary name for the
configuration (in square brackets), is read in</p>

<p style="margin-left:11%; margin-top: 1em">Only required
key is <b>type</b> that has to have one of the allowed
virtualization backend names, see virt-who(8).</p>

<p style="margin-left:11%; margin-top: 1em">Please note
that special characters must not be escaped (opposed to
/etc/sysconfig/virt-who).</p>

<p style="margin-left:11%; margin-top: 1em">Other options
that can be supplied are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>server</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Hostname, IP address or URL of the server that provides
virtualization information (not applicable for vdsm
mode).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>username</b></p>

<p style="margin-left:22%;">Username for authentication to
the server (not applicable for vdsm mode). May include
domain. Do not escape the backslash between domain and
username.</p>

<p style="margin-left:11%;"><b>password</b></p>

<p style="margin-left:22%;">Password for authentication to
the server (not applicable for vdsm mode).</p>

<p style="margin-left:11%;"><b>encrypted_password</b></p>

<p style="margin-left:22%;">Alternative to the password
option, encrypted password that is generated by
virt-who-password(8) utility.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>owner</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Owner for use with Subscription Asset Manager, the Red
Hat Customer Portal, or Satellite 6 (not applicable for
Satellite 5)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>env</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Environment for use with Subscription Asset Manager or
Satellite 6 (not applicable for Satellite 5)</p></td></tr>
</table>

<p style="margin-left:11%;"><b>rhsm_username</b></p>

<p style="margin-left:22%;">Optional username to use to
communicate with Subscription Asset Manager or Satellite 6
instead of the registered system&rsquo;s identity
certificate. (not applicable for Satellite 5)</p>

<p style="margin-left:11%;"><b>rhsm_password</b></p>

<p style="margin-left:22%;">Optional password to use to
communicate with Subscription Asset Manager or Satellite 6
instead of the registered system&rsquo;s identity
certificate. (not applicable for Satellite 5)</p>


<p style="margin-left:11%;"><b>rhsm_encrypted_password</b></p>

<p style="margin-left:22%;">Alternative to the
rhsm_password option, encrypted password that is generated
by virt-who-password(8) utility.</p>

<p style="margin-left:11%;"><b>rhsm_hostname</b></p>

<p style="margin-left:22%;">Optional hostname of the
Subscription Asset Manager or Satellite 6 server to use in
place of the host defined in the system&rsquo;s
rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_port</b></p>

<p style="margin-left:22%;">Optional port for the
Subscription Asset Manager or Satellite 6 server to use in
place of the port defined in the system&rsquo;s
rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_prefix</b></p>

<p style="margin-left:22%;">Optional prefix for the
Subscription Asset Manager or Satellite 6 server to use in
place of the prefix defined in the system&rsquo;s
rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_proxy_hostname</b></p>

<p style="margin-left:22%;">Optional proxy host name for
the Subscription Asset Manager or Satellite 6 server to use
in place of the proxy host name defined in the
system&rsquo;s rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_proxy_port</b></p>

<p style="margin-left:22%;">Optional proxy port for the
Subscription Asset Manager or Satellite 6 server to use in
place of the proxy port defined in the system&rsquo;s
rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_proxy_user</b></p>

<p style="margin-left:22%;">Optional proxy username for the
Subscription Asset Manager or Satellite 6 server to use in
place of the proxy username defined in the system&rsquo;s
rhsm.conf.</p>

<p style="margin-left:11%;"><b>rhsm_proxy_password</b></p>

<p style="margin-left:22%;">Optional proxy password for the
Subscription Asset Manager or Satellite 6 server to use in
place of the proxy password defined in the system&rsquo;s
rhsm.conf.</p>


<p style="margin-left:11%;"><b>rhsm_encrypted_proxy_password</b></p>

<p style="margin-left:22%;">Alternative to the
rhsm_proxy_password option; encrypted password generated by
the virt-who-password(8) utility.</p>

<p style="margin-left:11%;"><b>sat_server</b></p>

<p style="margin-left:22%;">Hostname, IP address or URL of
the Satellite 5 server.</p>

<p style="margin-left:11%;"><b>sat_username</b></p>

<p style="margin-left:22%;">Username for authentication to
the Satellite 5 server.</p>

<p style="margin-left:11%;"><b>sat_password</b></p>

<p style="margin-left:22%;">Password for authentication to
the Satellite 5 server.</p>


<p style="margin-left:11%;"><b>sat_encrypted_password</b></p>

<p style="margin-left:22%;">Alternative to sat_password
option, encrypted password that is generated by
virt-who-password(8) utility.</p>

<p style="margin-left:11%;"><b>filter_hosts</b></p>

<p style="margin-left:22%;">Only hosts which uuid (or
hostname or hwuuid, based on <b>hypervisor_id</b>) is
specified in comma-separated list in this option will be
reported. Put the value into the double-quotes if it
contains special characters (like comma).
<b>filter_host_uuids</b> is deprecated alias for this
option.</p>

<p style="margin-left:11%;"><b>exclude_hosts</b></p>

<p style="margin-left:22%;">Hosts which uuid (or hostname
or hwuuid, based on <b>hypervisor_id</b>) is specified in
comma-separated list in this option will <b>NOT</b> be
reported. Put the value into the double-quotes if it
contains special characters (like comma).
<b>exclude_host_uuids</b> is deprecated alias for this
option.</p>

<p style="margin-left:11%;"><b>hypervisor_id</b></p>

<p style="margin-left:22%;">Property that should be used as
identification of the hypervisor. Can be one of following:
<b>uuid</b>, <b>hostname</b>, <b>hwuuid</b>. Note that some
virtualization backends don&rsquo;t have all of them
implemented. Default is <b>uuid</b>. <b>hwuuid</b> is
applicable to esx and rhevm only. This property is meant to
be set up before initial run of virt-who. Changing it later
will result in duplicated entries in the subscription
manager.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">[test-esx] <br>
type=esx <br>
server=1.2.3.4 <br>
username=admin <br>
password=password <br>
owner=test <br>
env=staging <br>
rhsm_username=admin <br>
rhsm_password=password</p>

<h2>BACKEND SPECIFIC OPTIONS
<a name="BACKEND SPECIFIC OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ESX BACKEND
<br>
filter_host_parents</b></p>

<p style="margin-left:22%;">Only hosts which parent
(usually ComputeResource) name is specified in
comma-separated list in this option will be reported. Put
the name into the double-quotes if it contains special
characters (like comma).</p>


<p style="margin-left:11%;"><b>exclude_host_parents</b></p>

<p style="margin-left:22%;">Hosts which parent (usually
ComputeResource) name is specified in comma-separated list
in this option will <b>NOT</b> be reported. Put the name
into the double-quotes if it contains special characters
(like comma).</p>

<p style="margin-left:11%;"><b>simplified_vim</b></p>

<p style="margin-left:22%;">virt-who by default uses
stripped-down version of vimService.wsdl file that contains
vSphere SOAP API definition. Set this option to <b>false</b>
to use server provided wsdl file that will be retrieved
automatically.</p>

<p style="margin-left:11%; margin-top: 1em"><b>RHEV-M
BACKEND</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>server</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The default port number is 8443 (that was used the
default in RHEV-M &lt;= 3.0). Newer RHEV-M installations
uses port 443 by default. Use correct value for your server
in format:</p></td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em">server=&lt;HOSTNAME_OR_IP_ADDRESS&gt;:&lt;PORT_NUMBER&gt;</p>

<p style="margin-left:11%; margin-top: 1em"><b>FAKE
BACKEND</b> <br>
Fake backend reads host/guests associations from the file on
disk, for example:</p>

<p style="margin-left:11%; margin-top: 1em">[fake-virt]
<br>
type=fake <br>
file=/path/to/json <br>
is_hypervisor=True</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>type</b></p></td>
<td width="5%"></td>
<td width="30%">


<p style="margin-top: 1em">Must be always <b>fake</b>.</p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>is_hypervisor</b></p>

<p style="margin-left:22%;">If true (default), the option
determines that the fake data are fetched from multihost
environment.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>file</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Absolute path to the JSON file that has the same
structure as file returned from <b>virt-who --print</b>
command, for example:</p></td></tr>
</table>

<p style="margin-left:22%;">{ <br>
&quot;hypervisors&quot;: [ <br>
{ <br>
&quot;uuid&quot;:
&quot;7e98b6ea-0af1-4afa-b846-919549bb0fe2&quot;, <br>
&quot;guests&quot;: [ <br>
{ <br>
&quot;guestId&quot;:
&quot;8ae19f08-2605-b476-d42e-4bd5a39f466c&quot; <br>
}, <br>
... <br>
] <br>
}, <br>
... <br>
] <br>
}</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Radek Novacek
&lt;rnovacek at redhat dot com&gt;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">virt-who(8),
virt-who-password(8)</p>
<hr>
</body>
</html>
