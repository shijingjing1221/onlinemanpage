<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:56:08 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>gnutls_pkcs12_simple_parse</title>

</head>
<body>

<h1 align="center">gnutls_pkcs12_simple_parse</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURNS">RETURNS</a><br>
<a href="#SINCE">SINCE</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">gnutls_pkcs12_simple_parse
&minus; API function</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;gnutls/pkcs12.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
gnutls_pkcs12_simple_parse(gnutls_pkcs12_t</b>
<i>p12</i><b>, const char *</b> <i>password</i><b>,
gnutls_x509_privkey_t *</b> <i>key</i><b>, gnutls_x509_crt_t
**</b> <i>chain</i><b>, unsigned int *</b>
<i>chain_len</i><b>, gnutls_x509_crt_t **</b>
<i>extra_certs</i><b>, unsigned int *</b>
<i>extra_certs_len</i><b>, gnutls_x509_crl_t *</b>
<i>crl</i><b>, unsigned int</b> <i>flags</i><b>);</b></p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">gnutls_pkcs12_t
p12</p>

<p style="margin-left:29%;">the PKCS12 blob.</p>

<p style="margin-left:11%;">const char * password</p>

<p style="margin-left:29%;">optional password used to
decrypt PKCS12 blob, bags and keys.</p>

<p style="margin-left:11%;">gnutls_x509_privkey_t * key</p>

<p style="margin-left:29%;">a structure to store the parsed
private key.</p>

<p style="margin-left:11%;">gnutls_x509_crt_t ** chain</p>

<p style="margin-left:29%;">the corresponding to key
certificate chain (may be <b>NULL</b>)</p>

<p style="margin-left:11%;">unsigned int * chain_len</p>

<p style="margin-left:29%;">will be updated with the number
of additional (may be <b>NULL</b>)</p>

<p style="margin-left:11%;">gnutls_x509_crt_t **
extra_certs</p>

<p style="margin-left:29%;">optional pointer to receive an
array of additional certificates found in the PKCS12 blob
(may be <b>NULL</b>).</p>

<p style="margin-left:11%;">unsigned int *
extra_certs_len</p>

<p style="margin-left:29%;">will be updated with the number
of additional certs (may be <b>NULL</b>).</p>

<p style="margin-left:11%;">gnutls_x509_crl_t * crl</p>

<p style="margin-left:29%;">an optional structure to store
the parsed CRL (may be <b>NULL</b>).</p>

<p style="margin-left:11%;">unsigned int flags</p>

<p style="margin-left:29%;">should be zero or one of
GNUTLS_PKCS12_SP_*</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This function
parses a PKCS12 blob in <i>p12blob</i> and extracts the
private key, the corresponding certificate chain, and any
additional certificates and a CRL.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>extra_certs_ret</i> and <i>extra_certs_len</i> parameters
are optional and both may be set to <b>NULL</b>. If either
is non&minus;<b>NULL</b>, then both must be set.</p>

<p style="margin-left:11%; margin-top: 1em">Encrypted
PKCS12 bags and PKCS8 private keys are supported. However,
only password based security, and the same password for all
operations, are supported.</p>

<p style="margin-left:11%; margin-top: 1em">A PKCS12 file
may contain many keys and/or certificates, and there is no
way to identify which key/certificate pair you want. You
should make sure the PKCS12 file only contain one
key/certificate pair and/or one CRL.</p>

<p style="margin-left:11%; margin-top: 1em">It is believed
that the limitations of this function are acceptable for
common usage, and that any more flexibility would introduce
complexity that would make it harder to use this
functionality at all.</p>

<p style="margin-left:11%; margin-top: 1em">If the provided
structure has encrypted fields but no password is provided
then this function returns
<b>GNUTLS_E_DECRYPTION_FAILED</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
normally the chain constructed does not include self signed
certificates, to comply with TLS&rsquo; requirements. If,
however, the flag
<b>GNUTLS_PKCS12_SP_INCLUDE_SELF_SIGNED</b> is specified
then self signed certificates will be included in the
chain.</p>

<h2>RETURNS
<a name="RETURNS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On success,
<b>GNUTLS_E_SUCCESS</b> (0) is returned, otherwise a
negative error value.</p>

<h2>SINCE
<a name="SINCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">3.1</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;bug-gnutls@gnu.org&gt;. <br>
General guidelines for reporting bugs:
http://www.gnu.org/gethelp/ <br>
GnuTLS home page: http://www.gnu.org/software/gnutls/</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2012 Free Software Foundation, Inc.. <br>
Copying and distribution of this file, with or without
modification, are permitted in any medium without royalty
provided the copyright notice and this notice are
preserved.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The full
documentation for <b>gnutls</b> is maintained as a Texinfo
manual. If the <b>info</b> and <b>gnutls</b> programs are
properly installed at your site, the command</p>

<p style="margin-left:22%; margin-top: 1em"><b>info
gnutls</b></p>

<p style="margin-left:11%; margin-top: 1em">should give you
access to the complete manual. As an alternative you may
obtain the manual from:</p>


<p style="margin-left:22%; margin-top: 1em"><b>http://www.gnu.org/software/gnutls/manual/</b></p>
<hr>
</body>
</html>
