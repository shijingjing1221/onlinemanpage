<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:22:56 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SLAPO-UNIQUE</title>

</head>
<body>

<h1 align="center">SLAPO-UNIQUE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#CAVEATS">CAVEATS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">slapo&minus;unique
&minus; Attribute Uniqueness overlay to slapd</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Attribute
Uniqueness overlay can be used with a backend database such
as <b>slapd&minus;bdb</b>(5) to enforce the uniqueness of
some or all attributes within a scope. This subtree defaults
to all objects within the subtree of the database for which
the Uniqueness overlay is configured.</p>

<p style="margin-left:11%; margin-top: 1em">Uniqueness is
enforced by searching the subtree to ensure that the values
of all attributes presented with an <b>add</b>,
<b>modify</b> or <b>modrdn</b> operation are unique within
the scope. For example, if uniqueness were enforced for the
<b>uid</b> attribute, the subtree would be searched for any
other records which also have a <b>uid</b> attribute
containing the same value. If any are found, the request is
rejected.</p>

<p style="margin-left:11%; margin-top: 1em">The search is
performed using the rootdn of the database, to avoid issues
with ACLs preventing the overlay from seeing all of the
relevant data. As such, the database must have a rootdn
configured.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
<b>slapd.conf</b> options apply to the Attribute Uniqueness
overlay. They should appear after the <b>overlay</b>
directive. <b><br>
unique_uri &lt;[strict ][ignore ]URI[URI...]...&gt;</b></p>

<p style="margin-left:22%;">Configure the base, attributes,
scope, and filter for uniqueness checking. Multiple URIs may
be specified within a domain, allowing complex selections of
objects. Multiple <b>unique_uri</b> statements or
<b>olcUniqueURI</b> attributes will create independent
domains, each with their own independent lists of URIs and
ignore/strict settings.</p>

<p style="margin-left:22%; margin-top: 1em">Keywords
<b>strict</b> and <b>ignore</b> have to be enclosed in
quotes (&quot;) together with the URI.</p>

<p style="margin-left:22%; margin-top: 1em">The LDAP URI
syntax is a subset of <b>RFC-4516,</b> and takes the
form:</p>

<p style="margin-left:22%; margin-top: 1em">ldap:///[base
dn]?[attributes...]?scope[?filter]</p>

<p style="margin-left:22%; margin-top: 1em">The <b>base
dn</b> defaults to that of the back-end database. Specified
base dns must be within the subtree of the back-end
database.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<b>attributes</b> are specified, the URI applies to all
non-operational attributes.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>scope</b> component is effectively mandatory, because
LDAP URIs default to <b>base</b> scope, which is not valid
for uniqueness, because groups of one object are always
unique. Scopes of <b>sub</b> (for subtree) and <b>one</b>
for one-level are valid.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>filter</b> component causes the domain to apply
uniqueness constraints only to matching objects. e.g.
<b>ldap:///?cn?sub?(sn=e*)</b> would require unique
<b>cn</b> attributes for all objects in the subtree of the
back-end database whose <b>sn</b> starts with an e.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to assert uniqueness upon all non-operational attributes
except those listed by prepending the keyword <b>ignore</b>
If not configured, all non-operational (e.g., system)
attributes must be unique. Note that the <b>attributes</b>
list of an <b>ignore</b> URI should generally contain the
<b>objectClass</b>, <b>dc</b>, <b>ou</b> and <b>o</b>
attributes, as these will generally not be unique, nor are
they operational attributes.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to set strict checking for the uniqueness domain by
prepending the keyword <b>strict.</b> By default, uniqueness
is not enforced for null values. Enabling <b>strict</b> mode
extends the concept of uniqueness to include null values,
such that only one attribute within a subtree will be
allowed to have a null value. Strictness applies to all URIs
within a uniqueness domain, but some domains may be strict
while others are not.</p>

<p style="margin-left:11%; margin-top: 1em">It is not
possible to set both URIs and legacy slapo&minus;unique
configuration parameters simultaneously. In general, the
legacy configuration options control pieces of a single
unfiltered subtree domain. <b><br>
unique_base &lt;basedn&gt;</b></p>

<p style="margin-left:22%;">This legacy configuration
parameter should be converted to the <b>base dn</b>
component of the above <b>unique_uri</b> style of
parameter.</p>

<p style="margin-left:11%;"><b>unique_ignore
&lt;attribute...&gt;</b></p>

<p style="margin-left:22%;">This legacy configuration
parameter should be converted to a <b>unique_uri</b>
parameter with <b>ignore</b> keyword as described above.</p>

<p style="margin-left:11%;"><b>unique_attributes
&lt;attribute...&gt;</b></p>

<p style="margin-left:22%;">This legacy configuration
parameter should be converted to a <b>unique_uri</b>
parameter, as described above.</p>

<p style="margin-left:11%;"><b>unique_strict
&lt;attribute...&gt;</b></p>

<p style="margin-left:22%;">This legacy configuration
parameter should be converted to a <b>strict</b> keyword
prepended to a <b>unique_uri</b> parameter, as described
above.</p>

<h2>CAVEATS
<a name="CAVEATS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>unique_uri</b>
cannot be used with the old-style of configuration, and vice
versa. <b>unique_uri</b> can implement everything the older
system can do, however.</p>

<p style="margin-left:11%; margin-top: 1em">Typical
attributes for the <b>ignore ldap:///...</b> URIs are
intentionally not hardcoded into the overlay to allow for
maximum flexibility in meeting site-specific
requirements.</p>

<p style="margin-left:11%; margin-top: 1em">Replication and
operations with <b>manageDsaIt</b> control are allowed to
bypass this enforcement. It is therefore important that all
servers accepting writes have this overlay configured in
order to maintain uniqueness in a replicated DIT.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<p style="margin-left:22%;">default slapd configuration
file</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>slapd.conf</b>(5),
<b>slapd&minus;config</b>(5).</p>
<hr>
</body>
</html>
