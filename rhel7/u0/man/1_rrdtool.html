<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:17:51 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>RRDTOOL</title>

</head>
<body>

<h1 align="center">RRDTOOL</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RRDCACHED, THE CACHING DAEMON">RRDCACHED, THE CACHING DAEMON</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rrdtool &minus;
Round Robin Database Tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>rrdtool
&minus;</b> [workdir]| <i>function</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b><small>OVERVIEW</small></b></i>
<br>
It is pretty easy to gather status information from all
sorts of things, ranging from the temperature in your office
to the number of octets which have passed through the
<small>FDDI</small> interface of your router. But it is not
so trivial to store this data in an efficient and systematic
manner. This is where <b>RRDtool</b> comes in handy. It lets
you <i>log and analyze</i> the data you gather from all
kinds of data-sources ( <b><small>DS</small></b> ). The data
analysis part of RRDtool is based on the ability to quickly
generate graphical representations of the data values
collected over a definable time period.</p>

<p style="margin-left:11%; margin-top: 1em">In this man
page you will find general information on the design and
functionality of the Round Robin Database Tool (RRDtool).
For a more detailed description of how to use the individual
functions of <b>RRDtool</b> check the corresponding man
page.</p>

<p style="margin-left:11%; margin-top: 1em">For an
introduction to the usage of RRDtool make sure you consult
the rrdtutorial.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>FUNCTIONS</small></b>
<br>
While the man pages talk of command line switches you have
to set in order to make <b>RRDtool</b> work it is important
to note that <b>RRDtool</b> can be remotely controlled
through a set of pipes. This saves a considerable amount of
startup time when you plan to make <b>RRDtool</b> do a lot
of things quickly. Check the section on Remote_Control
further down. There is also a number of language bindings
for RRDtool which allow you to use it directly from Perl,
python, Tcl, <small>PHP</small> , etc.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>create</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Set up a new Round Robin Database ( <small>RRD</small>
). Check rrdcreate.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>update</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Store new data values into an <small>RRD</small> . Check
rrdupdate.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>updatev</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Operationally equivalent to <b>update</b> except for
output. Check rrdupdate.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>graph</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Create a graph from data stored in one or several RRDs.
Apart from generating graphs, data can also be extracted to
stdout. Check rrdgraph.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>graphv</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Create a graph from data stored in one or several RRDs.
Same as graph, but metadata are printed before the graph.
Check rrdgraph.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>dump</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Dump the contents of an <small>RRD</small> in plain
<small>ASCII</small> . In connection with restore you can
use this to move an <small>RRD</small> from one computer
architecture to another. Check rrddump.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>restore</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Restore an <small>RRD</small> in <small>XML</small>
format to a binary <small>RRD</small> . Check rrdrestore</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>fetch</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Get data for a certain time period from a
<small>RRD</small> . The graph function uses fetch to
retrieve its data from an <small>RRD</small> . Check
rrdfetch.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>tune</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Alter setup of an <small>RRD</small> . Check
rrdtune.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>first</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Find the first update time of an <small>RRD</small> .
Check rrdfirst.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><b>last</b></p></td>
<td width="1%"></td>
<td width="77%">


<p>Find the last update time of an <small>RRD</small> .
Check rrdlast.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>lastupdate</b></p>

<p style="margin-left:23%;">Find the last update time of an
<small>RRD</small> . It also returns the value stored for
each datum in the most recent update. Check
rrdlastupdate.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>info</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>Get information about an <small>RRD</small> . Check
rrdinfo.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>resize</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>Change the size of individual RRAs. This is dangerous!
Check rrdresize.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>xport</b></p></td>
<td width="3%"></td>
<td width="77%">


<p>Export data retrieved from one or several RRDs. Check
rrdxport.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>flushcached</b></p>

<p style="margin-left:23%;">Flush the values for a specific
<small>RRD</small> file from memory. Check
rrdflushcached.</p>

<p style="margin-left:11%; margin-top: 1em"><b><small>HOW
DOES RRDTOOL WORK</small> ?</b> <br>
Data Acquisition</p>

<p style="margin-left:23%;">When monitoring the state of a
system, it is convenient to have the data available at a
constant time interval. Unfortunately, you may not always be
able to fetch data at exactly the time you want to.
Therefore <b>RRDtool</b> lets you update the log file at any
time you want. It will automatically interpolate the value
of the data-source ( <b><small>DS</small></b> ) at the
latest official time-slot (interval) and write this
interpolated value to the log. The original value you have
supplied is stored as well and is also taken into account
when interpolating the next log entry.</p>

<p style="margin-left:11%;">Consolidation</p>

<p style="margin-left:23%;">You may log data at a 1 minute
interval, but you might also be interested to know the
development of the data over the last year. You could do
this by simply storing the data in 1 minute intervals for
the whole year. While this would take considerable disk
space it would also take a lot of time to analyze the data
when you wanted to create a graph covering the whole year.
<b>RRDtool</b> offers a solution to this problem through its
data consolidation feature. When setting up an Round Robin
Database ( <b><small>RRD</small></b> ), you can define at
which interval this consolidation should occur, and what
consolidation function ( <b><small>CF</small></b> )
(average, minimum, maximum, total, last) should be used to
build the consolidated values (see rrdcreate). You can
define any number of different consolidation setups within
one <b><small>RRD</small></b> . They will all be maintained
on the fly when new data is loaded into the
<b><small>RRD</small></b> .</p>

<p style="margin-left:11%;">Round Robin Archives</p>

<p style="margin-left:23%;">Data values of the same
consolidation setup are stored into Round Robin Archives (
<b><small>RRA</small></b> ). This is a very efficient manner
to store data for a certain amount of time, while using a
known and constant amount of storage space.</p>

<p style="margin-left:23%; margin-top: 1em">It works like
this: If you want to store 1&rsquo;000 values in 5 minute
interval, <b>RRDtool</b> will allocate space for 1&rsquo;000
data values and a header area. In the header it will store a
pointer telling which slots (value) in the storage area was
last written to. New values are written to the Round Robin
Archive in, you guessed it, a round robin manner. This
automatically limits the history to the last 1&rsquo;000
values (in our example). Because you can define several
<b><small>RRA</small></b> s within a single
<b><small>RRD</small></b> , you can setup another one, for
storing 750 data values at a 2 hour interval, for example,
and thus keep a log for the last two months at a lower
resolution.</p>

<p style="margin-left:23%; margin-top: 1em">The use of
<b><small>RRA</small></b> s guarantees that the
<b><small>RRD</small></b> does not grow over time and that
old data is automatically eliminated. By using the
consolidation feature, you can still keep data for a very
long time, while gradually reducing the resolution of the
data along the time axis.</p>

<p style="margin-left:23%; margin-top: 1em">Using different
consolidation functions ( <b><small>CF</small></b> ) allows
you to store exactly the type of information that actually
interests you: the maximum one minute traffic on the
<small>LAN</small> , the minimum temperature of your wine
cellar, the total minutes of down time, etc.</p>

<p style="margin-left:11%;">Unknown Data</p>

<p style="margin-left:23%;">As mentioned earlier, the
<b><small>RRD</small></b> stores data at a constant
interval. Sometimes it may happen that no new data is
available when a value has to be written to the
<b><small>RRD</small></b> . Data acquisition may not be
possible for one reason or other. With <b>RRDtool</b> you
can handle these situations by storing an <i>*UNKNOWN*</i>
value into the database. The value
&rsquo;<i>*UNKNOWN*</i>&rsquo; is supported through all the
functions of the tool. When consolidating a data set, the
amount of <i>*UNKNOWN*</i> data values is accounted for and
when a new consolidated value is ready to be written to its
Round Robin Archive ( <b><small>RRA</small></b> ), a
validity check is performed to make sure that the percentage
of unknown values in the data point is above a configurable
level. If not, an <i>*UNKNOWN*</i> value will be written to
the <b><small>RRA</small></b> .</p>

<p style="margin-left:11%;">Graphing</p>

<p style="margin-left:23%;"><b>RRDtool</b> allows you to
generate reports in numerical and graphical form based on
the data stored in one or several <b><small>RRD</small></b>
s. The graphing feature is fully configurable. Size, color
and contents of the graph can be defined freely. Check
rrdgraph for more information on this.</p>

<p style="margin-left:11%;">Aberrant Behavior Detection</p>

<p style="margin-left:23%;">by Jake Brutlag</p>

<p style="margin-left:23%; margin-top: 1em"><b>RRDtool</b>
provides the building blocks for near real-time aberrant
behavior detection. These components include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="23%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="4%"></td>
<td width="71%">


<p>An algorithm for predicting the value of a time series
one time step into the future.</p></td></tr>
<tr valign="top" align="left">
<td width="23%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="4%"></td>
<td width="71%">


<p>A measure of deviation between predicted and observed
values.</p> </td></tr>
<tr valign="top" align="left">
<td width="23%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="4%"></td>
<td width="71%">


<p>A mechanism to decide if and when an observed value or
sequence of observed values is <i>too deviant</i> from the
predicted value(s).</p></td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">Here is a brief
explanation of these components:</p>

<p style="margin-left:23%; margin-top: 1em">The
Holt-Winters time series forecasting algorithm is an on-line
(or incremental) algorithm that adaptively predicts future
observations in a time series. Its forecast is the sum of
three components: a baseline (or intercept), a linear trend
over time (or slope), and a seasonal coefficient (a periodic
effect, such as a daily cycle). There is one seasonal
coefficient for each time point in the period (cycle). After
a value is observed, each of these components is updated via
exponential smoothing. This means that the algorithm
&quot;learns&quot; from past values and uses them to predict
the future. The rate of adaptation is governed by 3
parameters, alpha (intercept), beta (slope), and gamma
(seasonal). The prediction can also be viewed as a smoothed
value for the time series.</p>

<p style="margin-left:23%; margin-top: 1em">The measure of
deviation is a seasonal weighted absolute deviation. The
term <i>seasonal</i> means deviation is measured separately
for each time point in the seasonal cycle. As with
Holt-Winters forecasting, deviation is predicted using the
measure computed from past values (but only at that point in
the seasonal cycle). After the value is observed, the
algorithm learns from the observed value via exponential
smoothing. Confidence bands for the observed time series are
generated by scaling the sequence of predicted deviation
values (we usually think of the sequence as a continuous
line rather than a set of discrete points).</p>

<p style="margin-left:23%; margin-top: 1em">Aberrant
behavior (a potential failure) is reported whenever the
number of times the observed value violates the confidence
bands meets or exceeds a specified threshold within a
specified temporal window (e.g. 5 violations during the past
45 minutes with a value observed every 5 minutes).</p>

<p style="margin-left:23%; margin-top: 1em">This
functionality is embedded in a set of related <b>RRAs</b>.
In particular, a <small>FAILURES <b>RRA</b></small> logs
potential failures. With these data you could, for example,
use a front-end application to <b>RRDtool</b> to initiate
real-time alerts.</p>

<p style="margin-left:23%; margin-top: 1em">For a detailed
description on how to set this up, see rrdcreate.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>REMOTE
CONTROL</small></b> <br>
When you start <b>RRDtool</b> with the command line option
&rsquo;<b>&minus;</b>&rsquo; it waits for input via standard
input ( <small>STDIN</small> ). With this feature you can
improve performance by attaching <b>RRDtool</b> to another
process ( <small>MRTG</small> is one example) through a set
of pipes. Over these pipes <b>RRDtool</b> accepts the same
arguments as on the command line and some special commands
like <b>quit, cd, mkdir</b> and <b>ls</b>. For detailed help
on the server commands type:</p>

<pre style="margin-left:11%; margin-top: 1em">   rrdtool help cd|mkdir|pwd|ls|quit</pre>


<p style="margin-left:11%; margin-top: 1em">When a command
is completed, RRDtool will print the string
&rsquo;<tt>&quot;OK&quot;</tt>&rsquo;, followed by timing
information of the form <b>u:</b><i>usertime</i>
<b>s:</b><i>systemtime</i>. Both values are the running
totals of seconds since RRDtool was started. If an error
occurs, a line of the form
&rsquo;<tt>&quot;ERROR:&quot;</tt> <i>Description of
error</i>&rsquo; will be printed instead. <b>RRDtool</b>
will not abort, unless something really serious happens. If
a <b>workdir</b> is specified and the <small>UID</small> is
0, RRDtool will do a chroot to that workdir. If the
<small>UID</small> is not 0, RRDtool only changes the
current directory to <b>workdir</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>RRD</small>
Server</b> <br>
If you want to create a RRD-Server, you must choose a
<small>TCP/IP</small> Service number and add them to
<i>/etc/services</i> like this:</p>

<pre style="margin-left:11%; margin-top: 1em"> rrdsrv      13900/tcp                       # RRD server</pre>


<p style="margin-left:11%; margin-top: 1em">Attention: the
<small>TCP</small> port 13900 isn&rsquo;t officially
registered for rrdsrv. You can use any unused port in your
services file, but the server and the client system must use
the same port, of course.</p>

<p style="margin-left:11%; margin-top: 1em">With this
configuration you can add RRDtool as meta-server to
<i>/etc/inetd.conf</i>. For example:</p>

<pre style="margin-left:11%; margin-top: 1em"> rrdsrv stream tcp nowait root /opt/rrd/bin/rrdtool rrdtool &minus; /var/rrd</pre>


<p style="margin-left:11%; margin-top: 1em">Don&rsquo;t
forget to create the database directory /var/rrd and
reinitialize your inetd.</p>

<p style="margin-left:11%; margin-top: 1em">If all was
setup correctly, you can access the server with Perl
sockets, tools like netcat, or in a quick interactive test
by using &rsquo;telnet localhost rrdsrv&rsquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>NOTE:</small></b>
that there is no authentication with this feature! Do not
setup such a port unless you are sure what you are
doing.</p>

<h2>RRDCACHED, THE CACHING DAEMON
<a name="RRDCACHED, THE CACHING DAEMON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For very big
setups, updating thousands of <small>RRD</small> files often
becomes a serious <small>IO</small> problem. If you run into
such problems, you might want to take a look at rrdcached, a
caching daemon for RRDtool which may help you lessen the
stress on your disks.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rrdcreate,
rrdupdate, rrdgraph, rrddump, rrdfetch, rrdtune, rrdlast,
rrdxport, rrdflushcached, rrdcached</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Bugs?
Features!</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Tobias Oetiker
&lt;tobi@oetiker.ch&gt;</p>
<hr>
</body>
</html>
