<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:20:51 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SG_MAP</title>

</head>
<body>

<h1 align="center">SG_MAP</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sg_map &minus;
displays mapping between Linux sg and other SCSI devices</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>sg_map</b>
[<i>&minus;a</i>] [<i>-h</i>] [<i>&minus;i</i>]
[<i>&minus;n</i>] [<i>&minus;scd</i>] [<i>&minus;sd</i>]
[<i>&minus;sr</i>] [<i>&minus;st</i>] [<i>&minus;V</i>]
[<i>&minus;x</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sometimes it is
difficult to determine which SCSI device a sg device name
(e.g. /dev/sg0) refers to. This command loops through the sg
devices and finds the corresponding SCSI disk, cdrom or tape
device name (if any). Scanners are an example of SCSI
devices that have no alternate SCSI device name apart from
their sg device name.</p>

<p style="margin-left:11%; margin-top: 1em">This utility is
deprecated and has not been updated for years, only very
obvious bugs will be fixed. Unless a very old version of
Linux is being used (e.g. 2.4 series or earlier), then
please use a utility like lsscsi(8) or the facilities
offered by udev(8).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>&minus;a</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">assume the sg devices have
alphabetical device names and loop through /dev/sga,
/dev/sgb, etc. Default is numeric scan. Note that sg device
nodes with an alphabetical index have been deprecated since
the Linux kernel 2.2 series.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;h</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>print usage message then exit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;i</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>in addition do a standard INQUIRY and output vendor,
product and revision strings for devices that are found.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;n</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>assume the sg devices have numeric device names and loop
through /dev/sg0, /dev/sg1, etc. Default is numeric scan</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;scd</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>display mappings to SCSI cdrom device names of the form
/dev/scd0, /dev/scd1 etc</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;sd</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>display mappings to SCSI disk device names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;sr</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>display mappings to SCSI cdrom device names of the form
/dev/sr0, /dev/sr1 etc</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;st</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>display mappings to SCSI tape device names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;V</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>print out version string then exit (without further
ado).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&minus;x</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>after each active sg device name is displayed there are
five digits: &lt;host_number&gt; &lt;bus&gt; &lt;scsi_id&gt;
&lt;lun&gt; &lt;scsi_type&gt;</p></td></tr>
</table>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If no options
starting with &quot;&minus;s&quot; are given then the
mapping to all SCSI disk, cdrom and tape device names is
shown.</p>

<p style="margin-left:11%; margin-top: 1em">If the device
file system (devfs) is present a line noting this is output.
The &quot;native&quot; devfs scsi hierarchy makes the
relationship between a sg device name and any corresponding
disk, cdrom or tape device name easy to establish. This
replaces the need for this command. However many
applications will continue to look for Linux SCSI device
names in their traditional places. [Devfs supplies a
compatibility daemon called devfsd whose default
configuration adds back the Linux device names in their
traditional positions.</p>

<p style="margin-left:11%; margin-top: 1em">Quite often the
mapping information can be derived by observing the output
of the command: &quot;cat /proc/scsi/scsi&quot;. However if
devices have been added since boot this can be
deceptive.</p>

<p style="margin-left:11%; margin-top: 1em">In the Linux
kernel 2.6 series something close to the mapping shown by
this utility can be found by analysing sysfs. The main
difference is that sysfs analysis will show the mapping
between sg nodes and other SCSI device nodes in terms of
major and minor numbers. While major 8, minor 16 will
usually be /dev/sdb this is not necessarily so. Facilities
associated with udev may assign major 8, minor 16 some other
device node name. This version of sg_map has been extended
to cope with sparse disk device node names of the form
&quot;/dev/sd&lt;str&gt;&quot; where &lt;str&gt; can be one
of [a&minus;z,aa&minus;zz,aaa&minus;zzz]. See the sg_map26
utility for a more precise way (i.e. less directory
scanning) for mapping between sg device names and higher
level names; including finding user defined names.</p>

<p style="margin-left:11%; margin-top: 1em">This utility
was written at a time when hotplugging of SCSI devices was
not supported in Linux. It used a simple algorithm to scan
sg device nodes in ascending numeric or alphabetical order,
stopping after there were 5 consecutive errors.</p>

<p style="margin-left:11%; margin-top: 1em">In the Linux
kernel 2.6 series, this utility uses sysfs to find which sg
device nodes are active and only checks those. Hence there
can be large &quot;holes&quot; in the numbering of sg device
nodes (e.g. after an adapter has been removed) and still all
active sg device nodes will be listed. This utility assumes
that sg device nodes are named using the normal conventions
and searches from /dev/sg0 to /dev/sg4095 inclusive.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">My system has a
SCSI disk, a cd writer and a dvd player: <br>
$ sg_map <br>
# Note: the devfs pseudo file system is present <br>
/dev/sg0 /dev/sda <br>
/dev/sg1 /dev/sr0 <br>
/dev/sg2 /dev/sr1</p>

<p style="margin-left:11%; margin-top: 1em">In order to
find which sg device name corresponds to the disk: <br>
$ sg_map &minus;sd <br>
# Note: the devfs pseudo file system is present <br>
/dev/sg0 /dev/sda <br>
/dev/sg1 <br>
/dev/sg2</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;&minus;x&quot; option gives the following output: <br>
sg_map &minus;x <br>
# Note: the devfs pseudo file system is present <br>
/dev/sg0 1 0 1 0 0 /dev/sda <br>
/dev/sg1 2 0 4 0 5 /dev/sr0 <br>
/dev/sg2 2 0 6 0 5 /dev/sr1</p>

<p style="margin-left:11%; margin-top: 1em">When a SCSI
scanner is added the output becomes: <br>
$ sg_map <br>
# Note: the devfs pseudo file system is present <br>
/dev/sg0 /dev/sda <br>
/dev/sg1 /dev/sr0 <br>
/dev/sg2 /dev/sr1 <br>
/dev/sg3</p>

<p style="margin-left:11%; margin-top: 1em">By process of
elimination /dev/sg3 must be the scanner.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The exit status
of sg_map is 0 when it is successful. Otherwise see the
sg3_utils(8) man page.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
Douglas Gilbert</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
&lt;dgilbert at interlog dot com&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2000&minus;2013 Douglas Gilbert <br>
This software is distributed under the GPL version 2. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sg_map26(8)</b>
, <b>scsi_info(8)</b> , <b>scsidev(8)</b> , <b>devfsd(8)</b>
, <b>lsscsi(8)</b> , <b>udev(7)</b></p>
<hr>
</body>
</html>
