<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:23:40 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SMBCACLS</title>

</head>
<body>

<h1 align="center">SMBCACLS</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#ACL FORMAT">ACL FORMAT</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">smbcacls
&minus; Set or get ACLs on an NT file or directory names</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">smbcacls {//server/share}
{/filename} [&minus;D|&minus;&minus;delete&nbsp;acls]
[&minus;M|&minus;&minus;modify&nbsp;acls]
[&minus;a|&minus;&minus;add&nbsp;acls]
[&minus;S|&minus;&minus;set&nbsp;acls]
[&minus;C|&minus;&minus;chown&nbsp;name]
[&minus;G|&minus;&minus;chgrp&nbsp;name]
[&minus;I&nbsp;allow|romove|copy] [&minus;&minus;numeric]
[&minus;t] [&minus;U&nbsp;username] [&minus;d] [&minus;e]
[&minus;m|&minus;&minus;max&minus;protocol&nbsp;LEVEL]
[&minus;&minus;query&minus;security&minus;info&nbsp;FLAGS]
[&minus;&minus;set&minus;security&minus;info&nbsp;FLAGS]
[&minus;&minus;sddl]
[&minus;&minus;domain&minus;sid&nbsp;SID]</p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This tool is
part of the <b>samba</b>(7) suite.</p>

<p style="margin-left:11%; margin-top: 1em">The smbcacls
program manipulates NT Access Control Lists (ACLs) on SMB
file shares.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
options are available to the smbcacls program. The format of
ACLs is described in the section ACL FORMAT</p>


<p style="margin-left:11%; margin-top: 1em">&minus;a|&minus;&minus;add
acls</p>

<p style="margin-left:17%;">Add the ACLs specified to the
ACL list. Existing access control entries are unchanged.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;M|&minus;&minus;modify
acls</p>

<p style="margin-left:17%;">Modify the mask value
(permissions) for the ACLs specified on the command line. An
error will be printed for each ACL specified that was not
already present in the ACL list</p>


<p style="margin-left:11%; margin-top: 1em">&minus;D|&minus;&minus;delete
acls</p>

<p style="margin-left:17%;">Delete any ACLs specified on
the command line. An error will be printed for each ACL
specified that was not already present in the ACL list.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;S|&minus;&minus;set
acls</p>

<p style="margin-left:17%;">This command sets the ACLs on
the file with only the ones specified on the command line.
All other ACLs are erased. Note that the ACL specified must
contain at least a revision, type, owner and group for the
call to succeed.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;C|&minus;&minus;chown
name</p>

<p style="margin-left:17%;">The owner of a file or
directory can be changed to the name given using the
<i>&minus;C</i> option. The name can be a sid in the form
S&minus;1&minus;x&minus;y&minus;z or a name resolved against
the server specified in the first argument.</p>

<p style="margin-left:17%; margin-top: 1em">This command is
a shortcut for &minus;M OWNER:name.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;G|&minus;&minus;chgrp
name</p>

<p style="margin-left:17%;">The group owner of a file or
directory can be changed to the name given using the
<i>&minus;G</i> option. The name can be a sid in the form
S&minus;1&minus;x&minus;y&minus;z or a name resolved against
the server specified n the first argument.</p>

<p style="margin-left:17%; margin-top: 1em">This command is
a shortcut for &minus;M GROUP:name.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;I|&minus;&minus;inherit
allow|remove|copy</p>

<p style="margin-left:17%;">Set or unset the windows
&quot;Allow inheritable permissions&quot; check box using
the <i>&minus;I</i> option. To set the check box pass allow.
To unset the check box pass either remove or copy. Remove
will remove all inherited acls. Copy will copy all the
inherited acls.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;numeric</p>

<p style="margin-left:17%;">This option displays all ACL
information in numeric format. The default is to convert
SIDs to names and ACE types and masks to a readable string
format.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;m|&minus;&minus;max&minus;protocol
PROTOCOL_NAME</p>

<p style="margin-left:17%;">This allows the user to select
the highest SMB protocol level that smbcacls will use to
connect to the server. By default this is set to NT1, which
is the highest available SMB1 protocol. To connect using
SMB2 or SMB3 protocol, use the strings SMB2 or SMB3
respectively. Note that to connect to a Windows 2012 server
with encrypted transport selecting a max&minus;protocol of
SMB3 is required.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;t|&minus;&minus;test&minus;args</p>

<p style="margin-left:17%;">Don't actually do anything,
only validate the correctness of the arguments.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;query&minus;security&minus;info
FLAGS</p>

<p style="margin-left:17%;">The security&minus;info flags
for queries.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;set&minus;security&minus;info
FLAGS</p>

<p style="margin-left:17%;">The security&minus;info flags
for queries.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;sddl</p>

<p style="margin-left:17%;">Output and input acls in sddl
format.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;domain&minus;sid
SID</p>

<p style="margin-left:17%;">SID used for sddl
processing.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;d|&minus;&minus;debuglevel=level</p>

<p style="margin-left:17%;"><i>level</i> is an integer from
0 to 10. The default value if this parameter is not
specified is 0.</p>

<p style="margin-left:17%; margin-top: 1em">The higher this
value, the more detail will be logged to the log files about
the activities of the server. At level 0, only critical
errors and serious warnings will be logged. Level 1 is a
reasonable level for day&minus;to&minus;day running &minus;
it generates a small amount of information about operations
carried out.</p>

<p style="margin-left:17%; margin-top: 1em">Levels above 1
will generate considerable amounts of log data, and should
only be used when investigating a problem. Levels above 3
are designed for use only by developers and generate HUGE
amounts of log data, most of which is extremely cryptic.</p>

<p style="margin-left:17%; margin-top: 1em">Note that
specifying this parameter here will override the
<b><font color="#0000FF">log level</font></b>
<font color="#000000">parameter in the smb.conf
file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;V|&minus;&minus;version</font></p>

<p style="margin-left:17%;"><font color="#000000">Prints
the program version number.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;s|&minus;&minus;configfile=&lt;configuration
file&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">The file
specified contains the configuration details required by the
server. The information in this file includes
server&minus;specific information such as what printcap file
to use, as well as descriptions of all the services that the
server is to provide. See smb.conf for more information. The
default configuration file name is determined at compile
time.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;l|&minus;&minus;log&minus;basename=logdirectory</font></p>

<p style="margin-left:17%;"><font color="#000000">Base
directory name for log/debug files. The extension
<b>&quot;.progname&quot;</b> will be appended (e.g.
log.smbclient, log.smbd, etc...). The log file is never
removed by the client.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;option=&lt;name&gt;=&lt;value&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">Set the
<b>smb.conf</b>(5) option &quot;&lt;name&gt;&quot; to value
&quot;&lt;value&gt;&quot; from the command line. This
overrides compiled&minus;in defaults and options read from
the configuration file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;N|&minus;&minus;no&minus;pass</font></p>

<p style="margin-left:17%;"><font color="#000000">If
specified, this parameter suppresses the normal password
prompt from the client to the user. This is useful when
accessing a service that does not require a
password.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Unless
a password is specified on the command line or this
parameter is specified, the client will request a
password.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
a password is specified on the command line and this option
is also defined the password on the command line will be
silently ingnored and no password will be used.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;k|&minus;&minus;kerberos</font></p>

<p style="margin-left:17%;"><font color="#000000">Try to
authenticate with kerberos. Only useful in an Active
Directory environment.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;C|&minus;&minus;use&minus;ccache</font></p>

<p style="margin-left:17%;"><font color="#000000">Try to
use the credentials cached by winbind.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;A|&minus;&minus;authentication&minus;file=filename</font></p>

<p style="margin-left:17%;"><font color="#000000">This
option allows you to specify a file from which to read the
username and password used in the connection. The format of
the file is</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">username
= &lt;value&gt; <br>
password = &lt;value&gt; <br>
domain = &lt;value&gt;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Make
certain that the permissions on the file restrict access
from unwanted users.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;U|&minus;&minus;user=username[%password]</font></p>

<p style="margin-left:17%;"><font color="#000000">Sets the
SMB username or username and password.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
%password is not specified, the user will be prompted. The
client will first check the <b>USER</b> environment
variable, then the <b>LOGNAME</b> variable and if either
exists, the string is uppercased. If these environmental
variables are not found, the username <b>GUEST</b> is
used.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">A
third option is to use a credentials file which contains the
plaintext of the username and password. This option is
mainly provided for scripts where the admin does not wish to
pass the credentials on the command line or via environment
variables. If this method is used, make certain that the
permissions on the file restrict access from unwanted users.
See the <i>&minus;A</i> for more details.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Be
cautious about including passwords in scripts. Also, on many
systems the command line of a running process may be seen
via the ps command. To be safe always allow rpcclient to
prompt for a password and type it in directly.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;S|&minus;&minus;signing
on|off|required</font></p>

<p style="margin-left:17%;"><font color="#000000">Set the
client signing state.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;P|&minus;&minus;machine&minus;pass</font></p>

<p style="margin-left:17%;"><font color="#000000">Use
stored machine account password.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;e|&minus;&minus;encrypt</font></p>

<p style="margin-left:17%;"><font color="#000000">This
command line parameter requires the remote server support
the UNIX extensions or that the SMB3 protocol has been
selected. Requests that the connection be encrypted.
Negotiates SMB encryption using either SMB3 or POSIX
extensions via GSSAPI. Uses the given credentials for the
encryption negotiation (either kerberos or NTLMv1/v2 if
given domain/username/password triple. Fails the connection
if encryption cannot be negotiated.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;pw&minus;nt&minus;hash</font></p>

<p style="margin-left:17%;"><font color="#000000">The
supplied password is the NT hash.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;n|&minus;&minus;netbiosname
&lt;primary NetBIOS name&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">This
option allows you to override the NetBIOS name that Samba
uses for itself. This is identical to setting the</font>
<b><font color="#0000FF">netbios name</font></b>
<font color="#000000">parameter in the smb.conf file.
However, a command line setting will take precedence over
settings in smb.conf.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;i|&minus;&minus;scope
&lt;scope&gt;</font></p>

<p style="margin-left:17%;"><font color="#000000">This
specifies a NetBIOS scope that nmblookup will use to
communicate with when generating NetBIOS names. For details
on the use of NetBIOS scopes, see rfc1001.txt and
rfc1002.txt. NetBIOS scopes are <i>very</i> rarely used,
only set this parameter if you are the system administrator
in charge of all the NetBIOS systems you communicate
with.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;W|&minus;&minus;workgroup=domain</font></p>

<p style="margin-left:17%;"><font color="#000000">Set the
SMB domain of the username. This overrides the default
domain which is the domain defined in smb.conf. If the
domain specified is the same as the servers NetBIOS name, it
causes the client to log on using the servers local SAM (as
opposed to the Domain SAM).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;O|&minus;&minus;socket&minus;options
socket options</font></p>

<p style="margin-left:17%;"><font color="#000000">TCP
socket options to set on the client socket. See the socket
options parameter in the smb.conf manual page for the list
of valid options.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;?|&minus;&minus;help</font></p>

<p style="margin-left:17%;"><font color="#000000">Print a
summary of command line options.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;usage</font></p>

<p style="margin-left:17%;"><font color="#000000">Display
brief usage message.</font></p>

<h2>ACL FORMAT
<a name="ACL FORMAT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
format of an ACL is one or more ACL entries separated by
either commas or newlines. An ACL entry is one of the
following:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">REVISION:&lt;revision
number&gt; <br>
OWNER:&lt;sid or name&gt; <br>
GROUP:&lt;sid or name&gt; <br>
ACL:&lt;sid or
name&gt;:&lt;type&gt;/&lt;flags&gt;/&lt;mask&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
revision of the ACL specifies the internal Windows NT ACL
revision for the security descriptor. If not specified it
defaults to 1. Using values other than 1 may cause strange
behaviour.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
owner and group specify the owner and group sids for the
object. If a SID in the format
S&minus;1&minus;x&minus;y&minus;z is specified this is used,
otherwise the name specified is resolved using the server on
which the file or directory resides.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">ACLs
specify permissions granted to the SID. This SID again can
be specified in S&minus;1&minus;x&minus;y&minus;z format or
as a name in which case it is resolved against the server on
which the file or directory resides. The type, flags and
mask values determine the type of access granted to the
SID.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
type can be either ALLOWED or DENIED to allow/deny access to
the SID. The flags values are generally zero for file ACLs
and either 9 or 2 for directory ACLs. Some common flags
are:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<b>#define SEC_ACE_FLAG_OBJECT_INHERIT 0x1</b></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<b>#define SEC_ACE_FLAG_CONTAINER_INHERIT 0x2</b></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<b>#define SEC_ACE_FLAG_NO_PROPAGATE_INHERIT
0x4</b></font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<b>#define SEC_ACE_FLAG_INHERIT_ONLY 0x8</b></font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">At
present flags can only be specified as decimal or
hexadecimal values.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
mask is a value which expresses the access right granted to
the SID. It can be given as a decimal or hexadecimal value,
or by using one of the following text strings which map to
the NT file permissions of the same name.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>R</i> &minus; Allow read access</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>W</i> &minus; Allow write access</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>X</i> &minus; Execute permission on the object</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>D</i> &minus; Delete the object</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>P</i> &minus; Change permissions</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>O</i> &minus; Take ownership</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
following combined permissions can be specified:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>READ</i> &minus; Equivalent to 'RX'
permissions</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>CHANGE</i> &minus; Equivalent to 'RXWD'
permissions</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
<i>FULL</i> &minus; Equivalent to 'RWXDPO'
permissions</font></p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
smbcacls program sets the exit status depending on the
success or otherwise of the operations performed. The exit
status may be one of the following values.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
the operation succeeded, smbcacls returns and exit status of
0. If smbcacls couldn't connect to the specified server, or
there was an error getting or setting the ACLs, an exit
status of 1 is returned. If there was an error parsing any
command line arguments, an exit status of 2 is
returned.</font></p>

<h2>VERSION
<a name="VERSION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
man page is correct for version 3 of the Samba
suite.</font></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
original Samba software and related utilities were created
by Andrew Tridgell. Samba is now developed by the Samba Team
as an Open Source project similar to the way the Linux
kernel is developed.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">smbcacls
was written by Andrew Tridgell and Tim Potter.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
conversion to DocBook for Samba 2.2 was done by Gerald
Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was
done by Alexander Bokovoy.</font></p>
<hr>
</body>
</html>
