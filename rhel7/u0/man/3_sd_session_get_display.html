<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:19:10 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_SESSION_IS_ACTIVE</title>

</head>
<body>

<h1 align="center">SD_SESSION_IS_ACTIVE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">sd_session_is_active,
sd_session_get_state, sd_session_get_uid,
sd_session_get_seat, sd_session_get_service,
sd_session_get_type, sd_session_get_class,
sd_session_get_display, sd_session_get_tty,
sd_session_get_vt &minus; Determine state of a specific
session</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;systemd/sd&minus;login.h&gt;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_is_active(const&nbsp;char*&nbsp;</b><i>session</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_state(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>state</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_uid(const&nbsp;char*&nbsp;</b><i>session</i><b>,
uid_t*&nbsp;</b><i>uid</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_seat(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>seat</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_service(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>service</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_type(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>type</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_class(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>class</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_display(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>display</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_tty(const&nbsp;char*&nbsp;</b><i>session</i><b>,
char**&nbsp;</b><i>tty</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_session_get_vt(const&nbsp;char*&nbsp;</b><i>session</i><b>,
unsigned&nbsp;int*&nbsp;</b><i>vt</i><b>);</b></p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sd_session_is_active()</b>
may be used to determine whether the session identified by
the specified session identifier is currently active (i.e.
currently in the foreground and available for user input) or
not.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_state()</b>
may be used to determine the state of the session identified
by the specified session identifier. The following states
are currently known: &quot;online&quot; (session logged in,
but session not active, i.e. not in the foreground),
&quot;active&quot; (session logged in and active, i.e. in
the foreground), &quot;closing&quot; (session nominally
logged out, but some processes belonging to it are still
around). In the future additional states might be defined,
client code should be written to be robust in regards to
additional state strings being returned. This function is a
more generic version of <b>sd_session_is_active()</b>. The
returned string needs to be freed with the libc
<b>free</b>(3) call after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_uid()</b>
may be used to determine the user identifier of the Unix
user the session identified by the specified session
identifier belongs to.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_seat()</b>
may be used to determine the seat identifier of the seat the
session identified by the specified session identifier
belongs to. Note that not all sessions are attached to a
seat, this call will fail for them. The returned string
needs to be freed with the libc <b>free</b>(3) call after
use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_service()</b>
may be used to determine the name of the service (as passed
during PAM session setup) that registered the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_type()</b>
may be used to determine the type of the session identified
by the specified session identifier. The returned string is
one of &quot;x11&quot;, &quot;tty&quot; or
&quot;unspecified&quot; and needs to be freed with the libc
<b>free</b>(3) call after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_class()</b>
may be used to determine the class of the session identified
by the specified session identifier. The returned string is
one of &quot;user&quot;, &quot;greeter&quot;,
&quot;lock&minus;screen&quot;, or &quot;background&quot; and
needs to be freed with the libc <b>free</b>(3) call after
use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_display()</b>
may be used to determine the X11 display of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_tty()</b>
may be used to determine the TTY device of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_session_get_vt()</b>
may be used to determine the VT number of the session
identified by the specified session identifier. This
function will return an error if the seat does not support
VTs.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>session</i> parameter of any of these functions is passed
as <b>NULL</b>, the operation is executed for the session
the calling process is a member of, if there is any.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the test
succeeds, <b>sd_session_is_active()</b> returns a positive
integer, if it fails 0. On success
<b>sd_session_get_state()</b>, <b>sd_session_get_uid()</b>,
<b>sd_session_get_seat()</b>,
<b>sd_session_get_service()</b>,
<b>sd_session_get_type()</b>, <b>sd_session_get_class()</b>,
<b>sd_session_get_display()</b> and
<b>sd_session_get_tty()</b> return 0 or a positive integer.
On failure, these calls return a negative errno&minus;style
error code.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>sd_session_is_active()</b>,
<b>sd_session_get_state()</b>, <b>sd_session_get_uid()</b>,
<b>sd_session_get_seat()</b>,
<b>sd_session_get_service()</b>,
<b>sd_session_get_type()</b>, <b>sd_session_get_class()</b>,
<b>sd_session_get_display()</b> and
<b>sd_session_get_tty()</b> interfaces are available as a
shared library, which can be compiled and linked to with the
<b>libsystemd&minus;login&nbsp;pkg-config</b>(1) file.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>systemd</b>(1),
<b>sd-login</b>(3), <b>sd_pid_get_session</b>(3)</p>
<hr>
</body>
</html>
