<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:00:34 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>isdnlog</title>

</head>
<body>

<h1 align="center">isdnlog</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RESTRICTION">RESTRICTION</a><br>
<a href="#GENERAL OPTIONS">GENERAL OPTIONS</a><br>
<a href="#DEBUG MODULE">DEBUG MODULE</a><br>
<a href="#NUMBER REWRITE MODULE">NUMBER REWRITE MODULE</a><br>
<a href="#LOG MODULE">LOG MODULE</a><br>
<a href="#LCR">LCR</a><br>
<a href="#TIME MODULE">TIME MODULE</a><br>
<a href="#CHARGEHUP MODULE">CHARGEHUP MODULE</a><br>
<a href="#START MODULE">START MODULE</a><br>
<a href="#CONNECTION LOG MODULE">CONNECTION LOG MODULE</a><br>
<a href="#SEVERAL ISDN CARDS">SEVERAL ISDN CARDS</a><br>
<a href="#UNLOADING KERNEL MODULES">UNLOADING KERNEL MODULES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">isdnlog &minus; isdn log system
(and more)</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Isdnlog gets
information from your isdn card, decodes this information,
and can do anything with it, such as logging, starting
programs, and more. All options to isdnlog can be given as
command line flags, or you can specify a file with options
(recommended).</p>

<h2>RESTRICTION
<a name="RESTRICTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Isdnlog only
works with the HiSax isdn driver. Other cards with their own
driver are not supported. Additionally you need to enable
d-channel logging (you can use &quot;hisaxctrl
&lt;DriverId&gt; 1 4&quot; to do that, e.g. &quot;hisaxctrl
line0 1 4&quot;). Isdnlog can only log outgoing calls that
originate from your isdn card, and incoming calls. To get
information about outgoing calls from other isdn devices
(e.g. telephones), you need a second Teles isdn card, with
crossed lines. Such a card is not usable for communicating,
but can log outgoing calls from any device (see dual option
below).</p>

<h2>GENERAL OPTIONS
<a name="GENERAL OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>&minus;V</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">show version information and
exit.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;f</b><i>FILE</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>read options from the config file <i>FILE</i>. This file
is also called the parameter file of isdnlog. The first line
should be &quot;[options]&quot;. You may use blank lines and
comments (starting with a #). All config files for isdnlog
have the format described in isdn.conf(5). Debug options
must be given on the command line, they cannot be stored in
a file.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>/dev/DEVICE</b></p>

<p style="margin-left:22%;">isdnlog will read from this
device and from /dev/isdninfo. You should give
/dev/isdnctrl0 for the first isdn card (or /dev/isdnctrl2
for the second).</p>

<p style="margin-left:22%; margin-top: 1em">Isdnlog has a
replay mode for debugging, where you can simulate previous
recorded events. In that case use &quot;-&quot; instead of a
device.</p>

<p style="margin-left:11%;"><b>&minus;A</b><i>x</i>
<b>amt=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Set digits necessary to get an
outside line, when connected through a PABX. You can give
several codes padded with a &quot;:&quot; (e.g.
-A0:80:81:82).</p>


<p style="margin-left:11%;"><b>areacode=&quot;value&quot;</b></p>

<p style="margin-left:22%;">(There is no commandline option
for this.) Overwrite area code from isdn.conf. A machine
connected to subscriber lines with different area codes and
thus several isdnlogs running requires this non global
setting.</p>

<p style="margin-left:11%;"><b>&minus;B</b><i>vbn</i>
<b>vbn=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Set the provider preselection
to the given value. More prefixes may be separated by a
&quot;:&quot;. <br>
Values are e.g. &quot;010&quot; for DE, &quot;10&quot; for
AT, &quot;16:17&quot; for NL, &quot;9&quot; for FR.</p>

<p style="margin-left:11%;"><b>&minus;R</b><i>prefix</i>
<b>preselected=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Set the preselected (i.e the
provider chosen, if no prefix is dialed) provider to value.
Value should be without <i>vbn</i>.</p>


<p style="margin-left:11%;"><b>skipProv=</b><i>skiplist</i></p>

<p style="margin-left:22%;">(There is no commandline option
for this.) Ignore certain providers from the rate-file. The
format of <i>skiplist</i> is the same as for Q: tags in
rate.conf and described in rate.conf(5).</p>

<p style="margin-left:11%;"><b>&minus;0</b><i>x:y</i>
<b>trim=&quot;value[:value]&quot;</b></p>

<p style="margin-left:22%;">Suppress leading digits. If
isdnlog is connected through a PABX, it is sometimes not
possible to let isdnlog distinguish between a national and
an international call, even with help of the <b>&minus;A</b>
option. <br>
This option requires two values separated with &quot;:&quot;
as an argument. These values tell isdnlog how many leading
digits to remove from incoming and outgoing calls
respectively. If only one value is given, it is used for
both incoming and outgoing calls. <br>
Don&rsquo;t use this in combination with the <b>&minus;A</b>
option! This will confuse the system (and possibly you).</p>

<p style="margin-left:22%; margin-top: 1em">Example: a PABX
in Germany shows the number of an incoming call from Hamburg
as &quot;00040...&quot;. When calling out to Hamburg, it
shows the number as &quot;0040...&quot;. This means that on
incoming calls, three zeroes must be removed, and on
outgoing calls two zeroes must be removed (the number must
be normalized to be without any leading zeroes in the case
of a national number; international numbers must have one
leading zero). So, in this case, the option <b>-03:2</b>
would be correct.</p>

<p style="margin-left:11%;"><b>&minus;i</b><i>x</i>
<b>internS0=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Telephone numbers shorter then
<i>value</i> are considered to be internal numbers on your
PABX.</p>

<p style="margin-left:11%;"><b>&minus;o
other={yes|no}</b></p>

<p style="margin-left:22%;">Normally &quot;causes&quot;
(e.g. &quot;non-selected user clearing&quot;) for other
connected ISDN devices are not displayed, only those which
are related to the connection will be shown. With this
option the causes for the other devices are also
displayed.</p>

<p style="margin-left:11%;"><b>&minus;u</b><i>x</i>
<b>ignoreRR=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Ignore &quot;housekeeping&quot;
frames. <i>x</i> may be 1 (ignore RR=Receiver ready) or 2
(ignore EMP=Euracom Management Protokoll) frames.</p>

<p style="margin-left:11%;"><b>&minus;U</b><i>x[:y]</i>
<b>ignoreCOLP=&quot;value[:value]&quot;</b></p>

<p style="margin-left:22%;">Ignore COLP/CLIP frames when
value is 1 or greater. Value 0 is default, and tells isdnlog
to not ignore COLP/CLIP frames. With value 2 the ignored
COLP/CLIP number is displayed. <br>
The first value applies to COLP the second to CLIP. If only
one value is given, it applies to COLP and CLIP. <br>
Sometimes the COLP number is a number in a different
areacode to the number that was dialled, and then the cost
calculation would be wrong.</p>

<p style="margin-left:11%;"><b>ignoreUPD={yes|no}</b></p>

<p style="margin-left:22%;">(There is no commandline option
for this.) A PABX may cause numerous messages like
&quot;Unexpected discriminator 0x47 -- ignored!&quot;
resulting from protocol discriminator values in layer 3 not
known to isdnlog. Set ignoreUPD to yes to suppress this
messages.</p>

<p style="margin-left:11%;"><b>&minus;2</b><i>x</i>
<b>dual=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Enable dual mode. You need this
if you have a second isdn card attached with crossed lines
so it can listen to what other isdn devices like telephones
are doing. With <i>x</i>=2 you can increase the debug output
- every single digit will be displayed.</p>

<p style="margin-left:22%; margin-top: 1em">Some setups may
require workarounds for reliable logging. These workarounds
are enabled by addition of the following numbers to the dual
value. They are intended for the dualmode but may also be
useful without. In this case, specify only the sum of the
following numbers without 1 or 2 for the dual mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>0x100</p></td>
<td width="3%"></td>
<td width="68%">


<p>Enable this when the destination number of an outgoing
call contains the number of the previous call, e.g. calling
222 after calling 111 before results in 111222 for the
second call.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">This may also
help in situations where an unanswered incoming call causes
incorrect logging of the following outgoing call.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p style="margin-top: 1em">0x200</p></td>
<td width="3%"></td>
<td width="68%">


<p style="margin-top: 1em">Enable this when outgoing calls
are logged without a source number (own MSN).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p>0x400</p></td>
<td width="3%"></td>
<td width="68%">


<p>Enable this when unanswered incoming calls are logged
multiple times (revealed by isdnrep -E).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>&minus;1</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A HFC-based
card is used for echo mode. Enable echo mode for the HFC
card with <i><br>
hisaxctrl id 10 1 <br>
hisaxctrl id 12 1</i></p>

<h2>DEBUG MODULE
<a name="DEBUG MODULE"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><i><b>&minus;r</b></i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Replay a debug file (e.g.
/tmp/isdnctrl0) to find bugs. With this flag you should give
a filename with the debug information instead of a device.
It will also work with files not created by isdnlog (e.g.
&quot;cat /dev/isdnctrl0&quot;).</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;n
newline={yes|no}</b></p>

<p style="margin-left:22%;">Display throughput messages on
the same line (only useful with logging to stderr or a
console device).</p>

<p style="margin-left:11%;"><b>&minus;W</b><i>X</i>
width=&quot;value&quot;</p>

<p style="margin-left:22%;">Limit all messages to X
characters per line.</p>

<p style="margin-left:11%;"><b>&minus;v</b><i>X</i>
log=X</p>

<p style="margin-left:22%;">Isdnlog can copy all
information to /tmp/DEVICE (e.g. /tmp/isdnctrl0 if you
started isdnlog with /dev/isdnctrl0). Choose what debugging
you want from the following list, add the corresponding
numbers together and use that for X:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="68%">


<p>copy all &quot;HEX:&quot; lines from the hisax isdn
device driver.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>2</p></td>
<td width="9%"></td>
<td width="68%">


<p>copy /dev/isdnctrl output (or whatever device you
specified).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>4</p></td>
<td width="9%"></td>
<td width="68%">


<p>copy /dev/isdninfo output</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>8</p></td>
<td width="9%"></td>
<td width="68%">


<p>copy transfer values
(&quot;ibyte&quot;,&quot;obyte&quot;).</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Isdnlog will
close and reopen this file after a &quot;kill
-HUP&quot;.</p>

<p style="margin-left:11%;"><b>&minus;s
flush={yes|no}</b></p>

<p style="margin-left:22%;">Isdnlog will flush the debug
file /tmp/DEVICE (e.g. /tmp/isdnctrl0) after each write
access.</p>

<p style="margin-left:11%;"><b>&minus;P
pipe={yes|no}</b></p>

<p style="margin-left:22%;">Copy the debug information to
stdout. This way you can run isdnlog as the source of a pipe
like &quot;isdnlog -P /dev/isdnctrl0 |prog ... &quot;.</p>

<p style="margin-left:11%;"><b>&minus;D
daemon={yes|no}</b></p>

<p style="margin-left:22%;">Start isdnlog as daemon: it
will fork into the background, and use syslog as the default
logging method (if you did not specify -m).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Trace mode: isdnlog will wait for a key after processing
a line from /dev/isdnctrl0 (or whatever device you
specified).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;K</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Print for every pressed key the thruput. Can not used
together with option -d.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If you are using a bilingual network terminator (NT),
you must give this flag, or isdnlog will show the own
MSN&rsquo;s incorrectly.</p></td></tr>
</table>

<h2>NUMBER REWRITE MODULE
<a name="NUMBER REWRITE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can define
aliases for telephone numbers (see callerid.conf(5) and
isdn.conf(5) for more information). Isdnlog will compare all
numbers to the list of aliases, and when a match is found,
the alias is displayed instead of the number.</p>

<h2>LOG MODULE
<a name="LOG MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Isdnlog can log
information via syslog, to stdout, and send information to
x11 clients. Calculate a code from these numbers by adding
them, and activate logging with -s, -m or -x. You can use
normal numbers or hex numbers. Default is stderr mode -m,
unless daemon mode is enabled; then it&rsquo;s syslog mode
-l.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">0x1</p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Errors</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x2</p></td>
<td width="2%"></td>
<td width="78%">


<p>Warnings</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x4</p></td>
<td width="2%"></td>
<td width="78%">


<p>Notice</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x8</p></td>
<td width="2%"></td>
<td width="78%">


<p>Log messages to /tmp/DEVICE (e.g. /tmp/isdnctrl0 if
isdnlog is started with /dev/isdnctrl0)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x10</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show telephone numbers immediately.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x20</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show charge int and telephone costs with every charge
signal (in Germany, and perhaps other countries, you have to
pay to get these signals).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x40</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show connect messages.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x80</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show hang up messages.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x100</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show cause message on hang up.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x200</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show time messages.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x400</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show throughput in bytes (every -wX seconds).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x800</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show state of B-channels (use with -M monitor).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x1000</p></td>
<td width="2%"></td>
<td width="78%">


<p>Show service indicator.</p></td></tr>
</table>

<p style="margin-left:22%;">You should log at least 0x7
(errors, warnings, notice) messages.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">0x2000</p></td>
<td width="2%"></td>
<td width="66%">


<p style="margin-top: 1em">Log estimated time till next
charge signal.</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x4000</p></td>
<td width="2%"></td>
<td width="66%">


<p>Show chargemax.</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>0x8000</p></td>
<td width="2%"></td>
<td width="66%">


<p>Enable <i>core</i> file on SIGSEGV.</p></td>
<td width="12%">
</td></tr>
</table>

<p style="margin-left:11%;">0x10000 ... 0x800000, show more
diagnostic and debug messages. <b><br>
&minus;m</b><i>X</i> <b>stdout=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Log to stderr.</p>

<p style="margin-left:11%;"><b>&minus;O</b><i>X</i>
<b>outfile=&quot;path&quot;</b></p>

<p style="margin-left:22%;">Log to file <i>X</i> instead of
stderr. Isdnlog will close this device when it gets a signal
-SIGHUP (-1). Only valid with -m option. <br>
If the name starts with a &quot;+&quot;, new data will be
appended to the existing file. Default behaviour is to
truncate the file when isdnlog opens it.</p>

<p style="margin-left:11%;"><b>&minus;C</b> <i>X</i>
<b>console=&quot;path&quot;</b></p>

<p style="margin-left:22%;">Log to console <i>X</i> instead
of stderr. You can use -O and -C together, so that isdnlog
copies output to both. Specify a full pathname. Beware: you
<i>must</i> put a space between -C and X !</p>

<p style="margin-left:11%;"><b>&minus;M
monitor={yes|no}</b></p>

<p style="margin-left:22%;">With this flag, isdnlog will
generate output for monitor programs like imon, imontty or
isdnmon. You must also give -m with 0x800 enabled.</p>

<p style="margin-left:11%;"><b>&minus;l</b><i>X</i>
<b>syslog=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Log to syslog. <i>X</i> is the
log code. You can log to syslog and to stdout at the same
time.</p>

<p style="margin-left:11%;"><b>&minus;x</b><i>X</i>
<b>xisdn=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Pass information to x11 client.
X is the log code. You can pass information to x11 clients
and log to syslog and/or stdout at the same time.</p>

<p style="margin-left:11%;"><b>&minus;p</b><i>PORT</i>
<b>port=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Pass information to x11 client
on this <i>PORT</i>.</p>

<p style="margin-left:11%;"><b>&minus;c</b><i>X</i>
<b>calls=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Only with -x<i>X</i> : save the
last <i>X</i> calls and pass this information to an x11
client. Default value is 100.</p>

<p style="margin-left:11%;"><b>&minus;L</b><i>X</i>
<b>xlog=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Only with -x<i>X</i> : save the
last <i>X</i> messages and pass this information to an x11
client. Default value is 500.</p>

<p style="margin-left:11%;"><b>&minus;w</b><i>X</i>
<b>thruput=&quot;value&quot;</b></p>

<p style="margin-left:22%;">If you enabled throughput
logging (0x400), isdnlog will log the throughput every
<i>X</i> seconds.</p>

<p style="margin-left:11%;"><b>&minus;I</b><i>x:y</i>
<b>ciinterval=&quot;value[:value]&quot;</b></p>

<p style="margin-left:22%;">Interval for printing of charge
messages (0x20). <br>
The first value is the interval for the calculated CI, the
second value for the EH (AOC-D) messages. If only one value
is given, both intervals are set to this value.</p>

<h2>LCR
<a name="LCR"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;d</b><i>x</i>
<b>abclcr=&quot;value&quot;</b></p>

<p style="margin-left:22%;">Value is a bitmap: <br>
0 ... off <br>
1 ... calls to different area / country <br>
2 ... local calls too <br>
4 ... special numbers e.g. ISP <br>
This needs a kernel patch to work. If the kernel patch is
not found a simulation is done. <br>
Note: depending on your telephone provider local area calls
may or may not be routed to alternate providers. For
changing the ISP a script is called. s. next option
&rsquo;providerchange&rsquo;</p>


<p style="margin-left:11%;"><b>providerchange=&quot;path_top_script&quot;</b></p>

<p style="margin-left:22%;">(There is no commandline option
for this.) This script is called with 3 parameters, the new
provider number (from rate-CC.dat), the number, which would
be dialed, and the servicename. The script should adjust
routing, name resolution and so on to connect to the ISP. If
the script returns non zero, LCR will not be done.</p>

<h2>TIME MODULE
<a name="TIME MODULE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;t</b><i>X</i>
<b>time={0|1|2}</b></p>

<p style="margin-left:22%;">Isdnlog will set your local
system time to the time transmitted by your isdn service
provider: -t1 = once, -t2 = every time.</p>

<h2>CHARGEHUP MODULE
<a name="CHARGEHUP MODULE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;h</b><i>X</i>
<b>hangup=&quot;value&quot;</b></p>

<p style="margin-left:22%;">The isdn kernel system has a
chargehup system, so it will hang up a few seconds before
the next charge signal. If you don&rsquo;t get a charge
signal from your phone company, isdnlog can emulate it.</p>

<p style="margin-left:22%; margin-top: 1em">On every
outgoing connection, isdnlog will calculate the charge time
from day of week, time of day and the distance zone of the
connection.</p>

<p style="margin-left:22%; margin-top: 1em">The kernel
needs to know how long the charge time is, and how many
seconds before the next charge signal it should hang up. You
have to set the second parameter with X in the form
number:number (hang up seconds before next charge signal for
charge times greater than or equal to 20 seconds : for
charge times of less than 20 seconds).</p>

<p style="margin-left:22%; margin-top: 1em">With this
information, isdnlog will call &quot;isdnctrl chargeint
&lt;device&gt; &lt;charge time&gt;&quot; and &quot;isdnctrl
huptimeout &lt;device&gt; &lt;seconds before charge
signal&gt;&quot; (it actually communicates directly with
isdn, without calling isdnctrl, but this would have the same
effect).</p>

<p style="margin-left:22%; margin-top: 1em">You should run
isdnlog with -t1 or better with -t2, so isdnlog sets the
local time in sync with telephone switching office.</p>

<p style="margin-left:22%; margin-top: 1em">If there is a
third number in value, this is the minimum connection time
for providers charging a basic rate per connection. <br>
e.g. hangup 3:5:60</p>

<h2>START MODULE
<a name="START MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">isdnlog can
react on any event and start programs. This feature is
disabled unless you activate it with: <b><br>
&minus;S start={yes|no}</b></p>

<p style="margin-left:22%;">active &quot;START&quot;
feature. Please read callerid.conf(5) for more
information.</p>

<p style="margin-left:11%;"><b>closefds={yes|no}</b></p>

<p style="margin-left:22%;">(There is no commandline option
for this.) If set to yes, isdnlog will close all
unnecessarily opened file descriptors before a
&quot;START&quot; program is executed. This closing will
also take place at isdnlog&rsquo;s restart after SIGHUP.
Default is no.</p>

<h2>CONNECTION LOG MODULE
<a name="CONNECTION LOG MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">isdnlog will
log all connections in /var/log/isdn.log. isdnrep can parse
this file and calculate costs.</p>

<h2>SEVERAL ISDN CARDS
<a name="SEVERAL ISDN CARDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you have
more than one isdn card, you need to run one isdnlog for
each card. And every process must have a different name, so
you should create a symbolic link isdnlog1 -&gt; isdnlog,
and start isdnlog1 for the second card.</p>

<h2>UNLOADING KERNEL MODULES
<a name="UNLOADING KERNEL MODULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You cannot
unload isdn kernel modules while an isdn device is in use,
e.g. a PPP interface is defined or isdnlog is running. Look
at /var/run for a file isdnlog.DEVICE.pid with the process
id of isdnlog, and kill that. After that you should be able
to unload your isdn kernel modules.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/dev/DEVICE</b></p>

<p style="margin-left:22%;">isdnlog requires a device as a
parameter to read from (e.g. /dev/isdnctrl0 for the 1st isdn
card).</p>

<p style="margin-left:11%;"><b>/tmp/DEVICE</b></p>

<p style="margin-left:22%;">isdnlog can copy everything it
reads to this file as debug information (e.g. /tmp/isdnctrl0
if you started isdnlog with /dev/isdnctrl0).</p>


<p style="margin-left:11%;"><b>/var/run/isdnlog.DEVICE.pid</b></p>

<p style="margin-left:22%;">isdnlog creates this file with
its process id. Useful to see if isdnlog is running.</p>


<p style="margin-left:11%;"><b>/var/lock/LCK..DEVICE</b></p>

<p style="margin-left:22%;">isdnlog creates a lock file for
the device, so no other processes will access that
device.</p>

<p style="margin-left:11%;"><b>/etc/isdn/isdn.conf</b></p>

<p style="margin-left:22%;">isdnlog config file. Options to
isdnlog can be given on the command line, can be stored in
this file in [options] (with command line option
-f/etc/isdn/isdn.conf), or in a different config file, but
isdnlog will look at this file for sections [global]
[variables] [isdnlog].</p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>SIGHUP
(-1)</b></p>

<p style="margin-left:22%;">On SIGHUP isdnlog restarts, and
does therefore reread it&rsquo;s config files.</p>

<p style="margin-left:11%;"><b>SIGINT (-2), SIGTERM (-15),
SIGQUIT (-3)</b></p>

<p style="margin-left:22%;">Isdnlog quits gracefully on
receiving these termination signals.</p>

<p style="margin-left:11%;"><b>SIGSEGV (-11)</b></p>

<p style="margin-left:22%;">If the log level contains
0x8000 (and your ulimits permit this) isdnlog will generate
a <i>core</i> file before terminating.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">I start isdnlog
with &quot;isdnlog -f/etc/isdn/isdn.conf
/dev/isdnctrl0&quot;. This file contains a [options]
section:</p>

<p style="margin-left:11%; margin-top: 1em">[options] <br>
#newline=no # show all throughput messages in one line. <br>
#width=80 # limit log messages to 80 characters per line
<br>
#amt=0:80:81 # digits to get a line through your PABX <br>
log=15 # maximum debug mode <br>
flush=no # flush logfile after every write <br>
pipe=no # pipe log messages to stderr <br>
daemon=yes # run isdnlog as daemon <br>
stdout=0x1ff7 # stderr logging level <br>
outfile=+/var/log/isdn.log # log to file <br>
#console= # log to a console <br>
monitor=yes # emulate output for imon/imontty/... <br>
syslog=0x1ff7 # syslog logging level <br>
#xisdn=0x07ff # x11 output level <br>
#calls= # store call information for x11 client <br>
#xlog= # store messages for x11 client <br>
thruput=60 # if throughput logging is enabled: log every X
seconds <br>
time=2 # set time: 0 = never; 1 = once; 2 = every time <br>
#hangup= # simulate charge signals <br>
start=yes # enable starting programs</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>isdnconf(1)
isdn.conf(5) callerid.conf(5) <br>
rate-files(5) rate.conf(5) <br>
isdnlog(5) isdnrep(1) isdnrate(1)</b></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page was written by Andreas Jellinghaus
&lt;aj@dungeon.inka.de&gt;, for Debian GNU/Linux and
isdn4linux, updated by Leopold Toetsch
&lt;lt@toetsch.at&gt;.</p>
<hr>
</body>
</html>
