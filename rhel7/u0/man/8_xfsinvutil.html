<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:41:14 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>xfsinvutil</title>

</head>
<body>

<h1 align="center">xfsinvutil</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">xfsinvutil
&minus; xfsdump inventory database checking and pruning
utility</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>xfsinvutil</b>
[&minus;F|&minus;i] [&minus;m <i>media_label</i>] &minus;M
<i>mount_point mm/dd/yyyy</i> <b><br>
xfsinvutil</b> [&minus;F|&minus;i] [&minus;m
<i>media_label</i>] &minus;u <i>UUID mm/dd/yyyy</i> <b><br>
xfsinvutil</b> [&minus;F] &minus;s <i>SESSION_ID</i> <b><br>
xfsinvutil</b> &minus;i <b><br>
xfsinvutil</b> &minus;C</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>xfsdump</i>
maintains an online dump inventory in
<i>/var/lib/xfsdump/inventory</i>. The <b>&minus;I</b>
option of xfsdump displays the inventory contents
hierarchically. The levels of the hierarchy are: filesystem,
dump session, stream, and media file.</p>


<p style="margin-left:11%; margin-top: 1em"><i>xfsinvutil</i>
is a utility to check this inventory database for
consistency, to remove entries of dump sessions which may no
longer be of relevance, and to browse the contents of the
inventory.</p>

<p style="margin-left:11%; margin-top: 1em">The following
command line options are available:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Don&rsquo;t prompt the operator. When <i>xfsinvutil</i>
encounters a matching dump session, <i>xfsinvutil</i> will
normally ask the operator for permission to delete the
entry. With this option the deletion is performed, no
questions asked.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>Interactive mode. Causes <i>xfsinvutil</i> to run in a
mode that will allow the operator to browse and modify the
contents of the inventory. Please refer to the
<b>Interactive Mode</b> section below for more
information.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;M</b> <i>mount_point
mm/dd/yyyy</i></p>

<p style="margin-left:18%;">Prunes dump sessions identified
by the given mount point which were created prior to the
specified date. Optionally <b>&minus;m</b> may be be
specified to further limit the matching dump sessions by
media label. <i>xfsinvutil</i> will prompt the operator
prior to pruning a dump session unless the <b>&minus;F</b>
or <b>&minus;i</b> options are given.</p>

<p style="margin-left:11%;"><b>&minus;u</b> <i>UUID
mm/dd/yyyy</i></p>

<p style="margin-left:18%;">Like <b>&minus;M</b>, except
the matching filesystem is specified using its universally
unique identifier (UUID) instead of its mount point.</p>

<p style="margin-left:11%;"><b>&minus;m</b>
<i>media_label</i></p>

<p style="margin-left:18%;">If specified, only sessions
with at least one media file whose label matches this value
will be eligible for pruning. This restriction is in
addition to those imposed by the date and the
<b>&minus;M</b> or <b>&minus;u</b> options. This option
allows the pruning of all inventory references to media
which may have been overwritten or lost. Note that this
option does not apply to sessions with no media files.</p>

<p style="margin-left:11%;"><b>&minus;s</b>
<i>SESSION_ID</i></p>

<p style="margin-left:18%;">Prunes the dump session
identified by the given session id. <i>xfsinvutil</i> will
prompt the operator prior to pruning a dump session unless
the <b>&minus;F</b> option is given.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>With this option, <i>xfsinvutil</i> performs consistency
checks for all entries in the inventory database. It fixes
any problems found. If no consistent entries are found , the
corresponding inventory database file is removed.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Interactive
Mode</b> <br>
When run with <b>-i</b>, <i>xfsinvutil</i> will present the
operator with a hierarchical representation of the
<i>xfsdump</i> inventory. In this mode, the operator can use
the arrow keys (or the <b>h j k l</b> keys) to navigate the
inventory and also use the following keys and
functionality:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>+</b></p></td>
<td width="6%"></td>
<td width="82%">


<p style="margin-top: 1em">Expand a branch of the tree.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>-</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Collapse a branch of the tree.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>*</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Fully expand a branch of the tree.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>%</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Fully collapse a branch of the tree.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>h</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Move selection to the parent entry.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>l</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Move selection to the child entry.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>j</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Move selection to next entry.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>k</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Move selection to previous entry.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>d</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Mark the current record, and all sub-records, to be
deleted.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>u</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Clear the current record and all parent records from
being deleted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>i</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Import another <i>xfsdump</i> inventory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>?</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Show help window.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>x</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Commit any changes made to the inventory, and exit the
program.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>q</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>Exit the program without committing any changes to the
inventory.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Inventories
from other hosts can be imported to create a larger common
inventory. It is recommended that the contents of
<i>/var/lib/xfsdump/inventory</i> on the remote host be
copied to a temporary local directory prior to running
<i>xfsinvutil</i>. When <i>xfsinvutil</i> is run in
interactive mode, and the operator hits <b>i</b>, they will
be prompted for the path to the inventory to be imported.
<i>xfsinvutil</i> will then add the contents of the imported
inventory to the main window, and all entries will be marked
as imported. The operator can then delete any of these
entries that are not to be imported. When the operator
commits the changes, <i>xfsinvutil</i> will import any
entries which were not marked as deleted. Deleted entries
are not actually deleted from the original imported
inventory.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Inventory</b>
<br>
Each dump session updates an inventory database in
<i>/var/lib/xfsdump/inventory</i>. <i>xfsdump</i> uses the
inventory to determine the base of incremental and resumed
dumps.</p>

<p style="margin-left:11%; margin-top: 1em">This database
can be displayed by invoking <i>xfsdump</i> with the
<b>&minus;I</b> option. The display uses tabbed indentation
to present the inventory hierarchically. The first level is
filesystem. The second level is session. The third level is
media stream (currently only one stream is supported). The
fourth level lists the media files sequentially composing
the stream.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/var/lib/xfsdump/inventory</p>

<p style="margin-left:49%;">dump inventory database</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">xfsdump(8),
xfsrestore(8).</p>
<hr>
</body>
</html>
