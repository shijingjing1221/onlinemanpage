<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:22:50 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SLAPD.CONF</title>

</head>
<body>

<h1 align="center">SLAPD.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GLOBAL CONFIGURATION OPTIONS">GLOBAL CONFIGURATION OPTIONS</a><br>
<a href="#TLS OPTIONS">TLS OPTIONS</a><br>
<a href="#GENERAL BACKEND OPTIONS">GENERAL BACKEND OPTIONS</a><br>
<a href="#GENERAL DATABASE OPTIONS">GENERAL DATABASE OPTIONS</a><br>
<a href="#DATABASE-SPECIFIC OPTIONS">DATABASE-SPECIFIC OPTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">slapd.conf
&minus; configuration file for slapd, the stand-alone LDAP
daemon</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The file
<b>/etc/openldap/slapd.conf</b> contains configuration
information for the <b>slapd</b>(8) daemon. This
configuration file is also used by the SLAPD tools
<b>slapacl</b>(8), <b>slapadd</b>(8), <b>slapauth</b>(8),
<b>slapcat</b>(8), <b>slapdn</b>(8), <b>slapindex</b>(8),
and <b>slaptest</b>(8).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>slapd.conf</b> file consists of a series of global
configuration options that apply to <b>slapd</b> as a whole
(including all backends), followed by zero or more database
backend definitions that contain information specific to a
backend instance. The configuration options are
case-insensitive; their value, on a case by case basis, may
be case-sensitive.</p>

<p style="margin-left:11%; margin-top: 1em">The general
format of <b>slapd.conf</b> is as follows:</p>

<p style="margin-left:11%; margin-top: 1em"># comment -
these options apply to every database <br>
&lt;global configuration options&gt; <br>
# first database definition &amp; configuration options <br>
database &lt;backend 1 type&gt; <br>
&lt;configuration options specific to backend 1&gt; <br>
# subsequent database definitions &amp; configuration
options <br>
...</p>

<p style="margin-left:11%; margin-top: 1em">As many
backend-specific sections as desired may be included. Global
options can be overridden in a backend (for options that
appear more than once, the last appearance in the
<b>slapd.conf</b> file is used).</p>

<p style="margin-left:11%; margin-top: 1em">If a line
begins with white space, it is considered a continuation of
the previous line. No physical line should be over 2000
bytes long.</p>

<p style="margin-left:11%; margin-top: 1em">Blank lines and
comment lines beginning with a &lsquo;#&rsquo; character are
ignored. Note: continuation lines are unwrapped before
comment processing is applied.</p>

<p style="margin-left:11%; margin-top: 1em">Arguments on
configuration lines are separated by white space. If an
argument contains white space, the argument should be
enclosed in double quotes. If an argument contains a double
quote (&lsquo;&quot;&rsquo;) or a backslash character
(&lsquo;\&rsquo;), the character should be preceded by a
backslash character.</p>

<p style="margin-left:11%; margin-top: 1em">The specific
configuration options available are discussed below in the
Global Configuration Options, General Backend Options, and
General Database Options. Backend-specific options are
discussed in the <b>slapd&minus;&lt;backend&gt;(5)</b>
manual pages. Refer to the &quot;OpenLDAP
Administrator&rsquo;s Guide&quot; for more details on the
slapd configuration file.</p>

<h2>GLOBAL CONFIGURATION OPTIONS
<a name="GLOBAL CONFIGURATION OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options
described in this section apply to all backends, unless
specifically overridden in a backend definition. Arguments
that should be replaced by actual text are shown in brackets
&lt;&gt;. <b><br>
access to &lt;what&gt; [ by &lt;who&gt; &lt;access&gt;
&lt;control&gt; ]+</b></p>

<p style="margin-left:22%;">Grant access (specified by
&lt;access&gt;) to a set of entries and/or attributes
(specified by &lt;what&gt;) by one or more requestors
(specified by &lt;who&gt;). If no access controls are
present, the default policy allows anyone and everyone to
read anything but restricts updates to rootdn. (e.g.,
&quot;access to * by * read&quot;). The rootdn can always
read and write EVERYTHING! See <b>slapd.access</b>(5) and
the &quot;OpenLDAP&rsquo;s Administrator&rsquo;s Guide&quot;
for details.</p>

<p style="margin-left:11%;"><b>allow
&lt;features&gt;</b></p>

<p style="margin-left:22%;">Specify a set of features
(separated by white space) to allow (default none).
<b>bind_v2</b> allows acceptance of LDAPv2 bind requests.
Note that <b>slapd</b>(8) does not truly implement LDAPv2
(RFC 1777), now Historic (RFC 3494). <b>bind_anon_cred</b>
allows anonymous bind when credentials are not empty (e.g.
when DN is empty). <b>bind_anon_dn</b> allows
unauthenticated (anonymous) bind when DN is not empty.
<b>update_anon</b> allows unauthenticated (anonymous) update
operations to be processed (subject to access controls and
other administrative limits). <b>proxy_authz_anon</b> allows
unauthenticated (anonymous) proxy authorization control to
be processed (subject to access controls, authorization and
other administrative limits).</p>

<p style="margin-left:11%;"><b>argsfile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">The (absolute) name of a file
that will hold the <b>slapd</b> server&rsquo;s command line
(program name and options).</p>

<p style="margin-left:11%;"><b>attributeoptions
[option-name]...</b></p>

<p style="margin-left:22%;">Define tagging attribute
options or option tag/range prefixes. Options must not end
with &lsquo;&minus;&rsquo;, prefixes must end with
&lsquo;&minus;&rsquo;. The &lsquo;lang&minus;&rsquo; prefix
is predefined. If you use the <b>attributeoptions</b>
directive, &lsquo;lang&minus;&rsquo; will no longer be
defined and you must specify it explicitly if you want it
defined.</p>

<p style="margin-left:22%; margin-top: 1em">An attribute
description with a tagging option is a subtype of that
attribute description without the option. Except for that,
options defined this way have no special semantics. Prefixes
defined this way work like the &lsquo;lang&minus;&rsquo;
options: They define a prefix for tagging options starting
with the prefix. That is, if you define the prefix
&lsquo;x&minus;foo&minus;&rsquo;, you can use the option
&lsquo;x&minus;foo&minus;bar&rsquo;. Furthermore, in a
search or compare, a prefix or range name (with a trailing
&lsquo;&minus;&rsquo;) matches all options starting with
that name, as well as the option with the range name sans
the trailing &lsquo;&minus;&rsquo;. That is,
&lsquo;x&minus;foo&minus;bar&minus;&rsquo; matches
&lsquo;x&minus;foo&minus;bar&rsquo; and
&lsquo;x&minus;foo&minus;bar&minus;baz&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">RFC 4520
reserves options beginning with &lsquo;x&minus;&rsquo; for
private experiments. Other options should be registered with
IANA, see RFC 4520 section 3.5. OpenLDAP also has the
&lsquo;binary&rsquo; option built in, but this is a transfer
option, not a tagging option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>attributetype
(&nbsp;&lt;oid&gt; [NAME&nbsp;&lt;name&gt;]
[DESC&nbsp;&lt;description&gt;] [OBSOLETE]
[SUP&nbsp;&lt;oid&gt;] [EQUALITY&nbsp;&lt;oid&gt;]
[ORDERING&nbsp;&lt;oid&gt;] [SUBSTR&nbsp;&lt;oid&gt;]
[SYNTAX&nbsp;&lt;oidlen&gt;] [SINGLE&minus;VALUE]
[COLLECTIVE] [NO&minus;USER&minus;MODIFICATION]
[USAGE&nbsp;&lt;attributeUsage&gt;]&nbsp;)</b></p> </td></tr>
</table>

<p style="margin-left:22%;">Specify an attribute type using
the LDAPv3 syntax defined in RFC 4512. The slapd parser
extends the RFC 4512 definition by allowing string forms as
well as numeric OIDs to be used for the attribute OID and
attribute syntax OID. (See the <b>objectidentifier</b>
description.)</p>


<p style="margin-left:11%;"><b>authid&minus;rewrite&lt;cmd&gt;
&lt;args&gt;</b></p>

<p style="margin-left:22%;">Used by the authentication
framework to convert simple user names to an LDAP DN used
for authorization purposes. Its purpose is analogous to that
of <b>authz-regexp</b> (see below). The prefix
<i>authid&minus;</i> is followed by a set of rules analogous
to those described in <b>slapo&minus;rwm</b>(5) for data
rewriting (replace the <i>rwm&minus;</i> prefix with
<i>authid&minus;</i>).
<b>authid&minus;rewrite&lt;cmd&gt;</b> and
<b>authz&minus;regexp</b> rules should not be
intermixed.</p>

<p style="margin-left:11%;"><b>authz&minus;policy
&lt;policy&gt;</b></p>

<p style="margin-left:22%;">Used to specify which rules to
use for Proxy Authorization. Proxy authorization allows a
client to authenticate to the server using one user&rsquo;s
credentials, but specify a different identity to use for
authorization and access control purposes. It essentially
allows user A to login as user B, using user A&rsquo;s
password. The <b>none</b> flag disables proxy authorization.
This is the default setting. The <b>from</b> flag will use
rules in the <i>authzFrom</i> attribute of the authorization
DN. The <b>to</b> flag will use rules in the <i>authzTo</i>
attribute of the authentication DN. The <b>any</b> flag, an
alias for the deprecated value of <b>both</b>, will allow
any of the above, whatever succeeds first (checked in
<b>to</b>, <b>from</b> sequence. The <b>all</b> flag
requires both authorizations to succeed.</p>

<p style="margin-left:22%; margin-top: 1em">The rules are
mechanisms to specify which identities are allowed to
perform proxy authorization. The <i>authzFrom</i> attribute
in an entry specifies which other users are allowed to proxy
login to this entry. The <i>authzTo</i> attribute in an
entry specifies which other users this user can authorize
as. Use of <i>authzTo</i> rules can be easily abused if
users are allowed to write arbitrary values to this
attribute. In general the <i>authzTo</i> attribute must be
protected with ACLs such that only privileged users can
modify it. The value of <i>authzFrom</i> and <i>authzTo</i>
describes an <b>identity</b> or a set of identities; it can
take five forms:</p>


<p style="margin-left:32%;"><b>ldap:///&lt;base&gt;??[&lt;scope&gt;]?&lt;filter&gt;
<br>
dn[.&lt;dnstyle&gt;]:&lt;pattern&gt; <br>
u[.&lt;mech&gt;[/&lt;realm&gt;]]:&lt;pattern&gt; <br>
group[/objectClass[/attributeType]]:&lt;pattern&gt; <br>
&lt;pattern&gt;</b></p>


<p style="margin-left:32%; margin-top: 1em"><b>&lt;dnstyle&gt;:={exact|onelevel|children|subtree|regex}</b></p>

<p style="margin-left:22%; margin-top: 1em">The first form
is a valid LDAP <b>URI</b> where the
<i>&lt;host&gt;:&lt;port&gt;</i>, the <i>&lt;attrs&gt;</i>
and the <i>&lt;extensions&gt;</i> portions must be absent,
so that the search occurs locally on either <i>authzFrom</i>
or <i>authzTo</i>. The second form is a <b>DN</b>, with the
optional style modifiers <i>exact</i>, <i>onelevel</i>,
<i>children</i>, and <i>subtree</i> for exact, onelevel,
children and subtree matches, which cause
<i>&lt;pattern&gt;</i> to be normalized according to the DN
normalization rules, or the special <i>regex</i> style,
which causes the <i>&lt;pattern&gt;</i> to be treated as a
POSIX (&rsquo;&rsquo;extended&rsquo;&rsquo;) regular
expression, as discussed in <b>regex</b>(7) and/or
<b>re_format</b>(7). A pattern of <i>*</i> means any
non-anonymous DN. The third form is a SASL <b>id</b>, with
the optional fields <i>&lt;mech&gt;</i> and
<i>&lt;realm&gt;</i> that allow to specify a SASL
<b>mechanism</b>, and eventually a SASL <b>realm</b>, for
those mechanisms that support one. The need to allow the
specification of a mechanism is still debated, and users are
strongly discouraged to rely on this possibility. The fourth
form is a group specification, consisting of the keyword
<b>group</b>, optionally followed by the specification of
the group <b>objectClass</b> and member
<b>attributeType</b>. The group with DN
<b>&lt;pattern&gt;</b> is searched with base scope, and in
case of match, the values of the member <b>attributeType</b>
are searched for the asserted DN. For backwards
compatibility, if no identity type is provided, i.e. only
<b>&lt;pattern&gt;</b> is present, an <i>exact DN</i> is
assumed; as a consequence, <b>&lt;pattern&gt;</b> is
subjected to DN normalization. Since the interpretation of
<i>authzFrom</i> and <i>authzTo</i> can impact security,
users are strongly encouraged to explicitly set the type of
identity specification that is being used. A subset of these
rules can be used as third arg in the
<b>authz&minus;regexp</b> statement (see below);
significantly, the <i>URI</i>, provided it results in
exactly one entry, and the <i>dn.exact:&lt;dn&gt;</i>
forms.</p>

<p style="margin-left:11%;"><b>authz&minus;regexp
&lt;match&gt; &lt;replace&gt;</b></p>

<p style="margin-left:22%;">Used by the authentication
framework to convert simple user names, such as provided by
SASL subsystem, or extracted from certificates in case of
cert-based SASL EXTERNAL, or provided within the RFC 4370
&quot;proxied authorization&quot; control, to an LDAP DN
used for authorization purposes. Note that the resulting DN
need not refer to an existing entry to be considered valid.
When an authorization request is received from the SASL
subsystem, the SASL <b>USERNAME</b>, <b>REALM</b>, and
<b>MECHANISM</b> are taken, when available, and combined
into a name of the form</p>


<p style="margin-left:32%;"><b>UID=&lt;username&gt;[[,CN=&lt;realm&gt;],CN=&lt;mechanism&gt;],CN=auth</b></p>

<p style="margin-left:22%; margin-top: 1em">This name is
then compared against the <b>match</b> POSIX
(&rsquo;&rsquo;extended&rsquo;&rsquo;) regular expression,
and if the match is successful, the name is replaced with
the <b>replace</b> string. If there are wildcard strings in
the <b>match</b> regular expression that are enclosed in
parenthesis, e.g.</p>

<p style="margin-left:32%;"><b>UID=([^,]*),CN=.*</b></p>

<p style="margin-left:22%; margin-top: 1em">then the
portion of the name that matched the wildcard will be stored
in the numbered placeholder variable $1. If there are other
wildcard strings in parenthesis, the matching strings will
be in $2, $3, etc. up to $9. The placeholders can then be
used in the <b>replace</b> string, e.g.</p>


<p style="margin-left:32%;"><b>UID=$1,OU=Accounts,DC=example,DC=com</b></p>

<p style="margin-left:22%; margin-top: 1em">The replaced
name can be either a DN, i.e. a string prefixed by
&quot;dn:&quot;, or an LDAP URI. If the latter, the server
will use the URI to search its own database(s) and, if the
search returns exactly one entry, the name is replaced by
the DN of that entry. The LDAP URI must have no hostport,
attrs, or extensions components, but the filter is
mandatory, e.g.</p>


<p style="margin-left:32%;"><b>ldap:///OU=Accounts,DC=example,DC=com??one?(UID=$1)</b></p>

<p style="margin-left:22%; margin-top: 1em">The protocol
portion of the URI must be strictly <b>ldap</b>. Note that
this search is subject to access controls. Specifically, the
authentication identity must have &quot;auth&quot; access in
the subject.</p>

<p style="margin-left:22%; margin-top: 1em">Multiple
<b>authz&minus;regexp</b> options can be given in the
configuration file to allow for multiple matching and
replacement patterns. The matching patterns are checked in
the order they appear in the file, stopping at the first
successful match.</p>

<p style="margin-left:11%;"><b>concurrency
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify a desired level of
concurrency. Provided to the underlying thread system as a
hint. The default is not to provide any hint.</p>

<p style="margin-left:11%;"><b>conn_max_pending
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum number of
pending requests for an anonymous session. If requests are
submitted faster than the server can process them, they will
be queued up to this limit. If the limit is exceeded, the
session is closed. The default is 100.</p>

<p style="margin-left:11%;"><b>conn_max_pending_auth
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum number of
pending requests for an authenticated session. The default
is 1000.</p>

<p style="margin-left:11%;"><b>defaultsearchbase
&lt;dn&gt;</b></p>

<p style="margin-left:22%;">Specify a default search base
to use when client submits a non-base search request with an
empty base DN. Base scoped search requests with an empty
base DN are not affected.</p>

<p style="margin-left:11%;"><b>disallow
&lt;features&gt;</b></p>

<p style="margin-left:22%;">Specify a set of features
(separated by white space) to disallow (default none).
<b>bind_anon</b> disables acceptance of anonymous bind
requests. Note that this setting does not prohibit anonymous
directory access (See &quot;require authc&quot;).
<b>bind_simple</b> disables simple (bind) authentication.
<b>tls_2_anon</b> disables forcing session to anonymous
status (see also <b>tls_authc</b>) upon StartTLS operation
receipt. <b>tls_authc</b> disallows the StartTLS operation
if authenticated (see also <b>tls_2_anon</b>).
<b>proxy_authz_non_critical</b> disables acceptance of the
proxied authorization control (RFC4370) when criticality is
FALSE. <b>dontusecopy_non_critical</b> disables acceptance
of the dontUseCopy control (a work in progress) when
criticality is FALSE.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>ditcontentrule
(&nbsp;&lt;oid&gt; [NAME&nbsp;&lt;name&gt;]
[DESC&nbsp;&lt;description&gt;] [OBSOLETE]
[AUX&nbsp;&lt;oids&gt;] [MUST&nbsp;&lt;oids&gt;]
[MAY&nbsp;&lt;oids&gt;]
[NOT&nbsp;&lt;oids&gt;]&nbsp;)</b></p> </td></tr>
</table>

<p style="margin-left:22%;">Specify an DIT Content Rule
using the LDAPv3 syntax defined in RFC 4512. The slapd
parser extends the RFC 4512 definition by allowing string
forms as well as numeric OIDs to be used for the attribute
OID and attribute syntax OID. (See the
<b>objectidentifier</b> description.)</p>

<p style="margin-left:11%;"><b>gentlehup { on | off
}</b></p>

<p style="margin-left:22%;">A SIGHUP signal will only cause
a &rsquo;gentle&rsquo; shutdown-attempt: <b>Slapd</b> will
stop listening for new connections, but will not close the
connections to the current clients. Future write operations
return unwilling-to-perform, though. Slapd terminates when
all clients have closed their connections (if they ever do),
or - as before - if it receives a SIGTERM signal. This can
be useful if you wish to terminate the server and start a
new <b>slapd</b> server <b>with another database,</b>
without disrupting the currently active clients. The default
is off. You may wish to use <b>idletimeout</b> along with
this option.</p>

<p style="margin-left:11%;"><b>idletimeout
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the number of seconds
to wait before forcibly closing an idle client connection. A
idletimeout of 0 disables this feature. The default is 0.
You may also want to set the <b>writetimeout</b> option.</p>

<p style="margin-left:11%;"><b>include
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Read additional configuration
information from the given file before continuing with the
next line of the current file.</p>

<p style="margin-left:11%;"><b>index_intlen
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the key length for
ordered integer indices. The most significant bytes of the
binary integer will be used for index keys. The default
value is 4, which provides exact indexing for 31 bit values.
A floating point representation is used to index too large
values.</p>

<p style="margin-left:11%;"><b>index_substr_if_minlen
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the minimum length for
subinitial and subfinal indices. An attribute value must
have at least this many characters in order to be processed
by the indexing functions. The default is 2.</p>

<p style="margin-left:11%;"><b>index_substr_if_maxlen
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum length for
subinitial and subfinal indices. Only this many characters
of an attribute value will be processed by the indexing
functions; any excess characters are ignored. The default is
4.</p>

<p style="margin-left:11%;"><b>index_substr_any_len
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the length used for
subany indices. An attribute value must have at least this
many characters in order to be processed. Attribute values
longer than this length will be processed in segments of
this length. The default is 4. The subany index will also be
used in subinitial and subfinal index lookups when the
filter string is longer than the
<i>index_substr_if_maxlen</i> value.</p>

<p style="margin-left:11%;"><b>index_substr_any_step
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the steps used in
subany index lookups. This value sets the offset for the
segments of a filter string that are processed for a subany
index lookup. The default is 2. For example, with the
default values, a search using this filter
&quot;cn=*abcdefgh*&quot; would generate index lookups for
&quot;abcd&quot;, &quot;cdef&quot;, and
&quot;efgh&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Note: Indexing
support depends on the particular backend in use. Also,
changing these settings will generally require deleting any
indices that depend on these parameters and recreating them
with <b>slapindex</b>(8).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>ldapsyntax (&nbsp;&lt;oid&gt;
[DESC&nbsp;&lt;description&gt;] [X&minus;SUBST
&lt;substitute-syntax&gt;]&nbsp;)</b></p> </td></tr>
</table>

<p style="margin-left:22%;">Specify an LDAP syntax using
the LDAPv3 syntax defined in RFC 4512. The slapd parser
extends the RFC 4512 definition by allowing string forms as
well as numeric OIDs to be used for the syntax OID. (See the
<b>objectidentifier</b> description.) The slapd parser also
honors the <b>X&minus;SUBST</b> extension (an
OpenLDAP-specific extension), which allows to use the
<b>ldapsyntax</b> statement to define a non-implemented
syntax along with another syntax, the extension value
<i>substitute-syntax</i>, as its temporary replacement. The
<i>substitute-syntax</i> must be defined. This allows to
define attribute types that make use of non-implemented
syntaxes using the correct syntax OID. Unless
<b>X&minus;SUBST</b> is used, this configuration statement
would result in an error, since no handlers would be
associated to the resulting syntax structure.</p>

<p style="margin-left:11%;"><b>listener-threads
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the number of threads
to use for the connection manager. The default is 1 and this
is typically adequate for up to 16 CPU cores. The value
should be set to a power of 2.</p>

<p style="margin-left:11%;"><b>localSSF &lt;SSF&gt;</b></p>

<p style="margin-left:22%;">Specifies the Security Strength
Factor (SSF) to be given local LDAP sessions, such as those
to the ldapi:// listener. For a description of SSF values,
see <b>sasl-secprops</b>&rsquo;s <b>minssf</b> option
description. The default is 71.</p>

<p style="margin-left:11%;"><b>logfile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specify a file for recording
debug log messages. By default these messages only go to
stderr and are not recorded anywhere else. Specifying a
logfile copies messages to both stderr and the logfile.</p>

<p style="margin-left:11%;"><b>loglevel &lt;integer&gt;
[...]</b></p>

<p style="margin-left:22%;">Specify the level at which
debugging statements and operation statistics should be
syslogged (currently logged to the <b>syslogd</b>(8)
LOG_LOCAL4 facility). They must be considered subsystems
rather than increasingly verbose log levels. Some messages
with higher priority are logged regardless of the configured
loglevel as soon as any logging is configured. Log levels
are additive, and available levels are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>1</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x1 trace)</b> trace function calls</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>2</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x2 packets)</b> debug packet handling</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>4</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x4 args)</b> heavy trace debugging (function
args)</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>8</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x8 conns)</b> connection management</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>16</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x10 BER)</b> print out packets sent and
received</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>32</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x20 filter)</b> search filter processing</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>64</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x40 config)</b> configuration file processing</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>128</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x80 ACL)</b> access control list processing</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>256</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x100 stats)</b> connections, LDAP operations,
results (recommended)</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>512</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x200 stats2)</b> stats log entries sent</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>1024</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x400 shell)</b> print communication with shell
backends</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>2048</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x800 parse)</b> entry parsing</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>16384</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x4000 sync)</b> LDAPSync replication</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>32768</b></p></td>
<td width="3%"></td>
<td width="57%">


<p><b>(0x8000 none)</b> only messages that get logged
whatever log level is set</p></td></tr>
</table>

<p style="margin-left:22%;">The desired log level can be
input as a single integer that combines the (ORed) desired
levels, both in decimal or in hexadecimal notation, as a
list of integers (that are ORed internally), or as a list of
the names that are shown between brackets, such that</p>

<p style="margin-left:22%; margin-top: 1em">loglevel 129
<br>
loglevel 0x81 <br>
loglevel 128 1 <br>
loglevel 0x80 0x1 <br>
loglevel acl trace</p>

<p style="margin-left:22%; margin-top: 1em">are equivalent.
The keyword <b>any</b> can be used as a shortcut to enable
logging at all levels (equivalent to &minus;1). The keyword
<b>none</b>, or the equivalent integer representation,
causes those messages that are logged regardless of the
configured loglevel to be logged. In fact, if loglevel is
set to 0, no logging occurs, so at least the <b>none</b>
level is required to have high priority messages logged.</p>

<p style="margin-left:22%; margin-top: 1em">The loglevel
defaults to <b>stats</b>. This level should usually also be
included when using other loglevels, to help analyze the
logs.</p>

<p style="margin-left:11%;"><b>moduleload
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specify the name of a
dynamically loadable module to load. The filename may be an
absolute path name or a simple filename. Non-absolute names
are searched for in the directories specified by the
<b>modulepath</b> option. This option and the
<b>modulepath</b> option are only usable if slapd was
compiled with &minus;&minus;enable&minus;modules.</p>

<p style="margin-left:11%;"><b>modulepath
&lt;pathspec&gt;</b></p>

<p style="margin-left:22%;">Specify a list of directories
to search for loadable modules. Typically the path is
colon-separated but this depends on the operating system.
The default is /usr/lib64/openldap, which is where the
standard OpenLDAP install will place its modules.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>objectclass
(&nbsp;&lt;oid&gt; [NAME&nbsp;&lt;name&gt;]
[DESC&nbsp;&lt;description&gt;] [OBSOLETE]
[SUP&nbsp;&lt;oids&gt;] [{ ABSTRACT | STRUCTURAL | AUXILIARY
}] [MUST&nbsp;&lt;oids&gt;] [MAY&nbsp;&lt;oids&gt;]
)</b></p> </td></tr>
</table>

<p style="margin-left:22%;">Specify an objectclass using
the LDAPv3 syntax defined in RFC 4512. The slapd parser
extends the RFC 4512 definition by allowing string forms as
well as numeric OIDs to be used for the object class OID.
(See the <b>objectidentifier</b> description.) Object
classes are &quot;STRUCTURAL&quot; by default.</p>

<p style="margin-left:11%;"><b>objectidentifier
&lt;name&gt; { &lt;oid&gt; | &lt;name&gt;[:&lt;suffix&gt;]
}</b></p>

<p style="margin-left:22%;">Define a string name that
equates to the given OID. The string can be used in place of
the numeric OID in objectclass and attribute definitions.
The name can also be used with a suffix of the form
&quot;:xx&quot; in which case the value &quot;oid.xx&quot;
will be used.</p>

<p style="margin-left:11%;"><b>password&minus;hash
&lt;hash&gt; [&lt;hash&gt;...]</b></p>

<p style="margin-left:22%;">This option configures one or
more hashes to be used in generation of user passwords
stored in the userPassword attribute during processing of
LDAP Password Modify Extended Operations (RFC 3062). The
&lt;hash&gt; must be one of <b>{SSHA}</b>, <b>{SHA}</b>,
<b>{SMD5}</b>, <b>{MD5}</b>, <b>{CRYPT}</b>, and
<b>{CLEARTEXT}</b>. The default is <b>{SSHA}</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>{SHA}</b>
and <b>{SSHA}</b> use the SHA-1 algorithm (FIPS 160-1), the
latter with a seed.</p>

<p style="margin-left:22%; margin-top: 1em"><b>{MD5}</b>
and <b>{SMD5}</b> use the MD5 algorithm (RFC 1321), the
latter with a seed.</p>

<p style="margin-left:22%; margin-top: 1em"><b>{CRYPT}</b>
uses the <b>crypt</b>(3).</p>


<p style="margin-left:22%; margin-top: 1em"><b>{CLEARTEXT}</b>
indicates that the new password should be added to
userPassword as clear text.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
option does not alter the normal user applications handling
of userPassword during LDAP Add, Modify, or other LDAP
operations.</p>


<p style="margin-left:11%;"><b>password&minus;crypt&minus;salt&minus;format
&lt;format&gt;</b></p>

<p style="margin-left:22%;">Specify the format of the salt
passed to <b>crypt</b>(3) when generating {CRYPT} passwords
(see <b>password&minus;hash</b>) during processing of LDAP
Password Modify Extended Operations (RFC 3062).</p>

<p style="margin-left:22%; margin-top: 1em">This string
needs to be in <b>sprintf</b>(3) format and may include one
(and only one) %s conversion. This conversion will be
substituted with a string of random characters from
[A&minus;Za&minus;z0&minus;9./]. For example,
&quot;%.2s&quot; provides a two character salt and
&quot;$1$%.8s&quot; tells some versions of crypt(3) to use
an MD5 algorithm and provides 8 random characters of salt.
The default is &quot;%s&quot;, which provides 31 characters
of salt.</p>

<p style="margin-left:11%;"><b>pidfile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">The (absolute) name of a file
that will hold the <b>slapd</b> server&rsquo;s process ID
(see <b>getpid</b>(2)).</p>

<p style="margin-left:11%;"><b>referral &lt;url&gt;</b></p>

<p style="margin-left:22%;">Specify the referral to pass
back when <b>slapd</b>(8) cannot find a local database to
handle a request. If specified multiple times, each url is
provided.</p>

<p style="margin-left:11%;"><b>require
&lt;conditions&gt;</b></p>

<p style="margin-left:22%;">Specify a set of conditions
(separated by white space) to require (default none). The
directive may be specified globally and/or per-database;
databases inherit global conditions, so per-database
specifications are additive. <b>bind</b> requires bind
operation prior to directory operations. <b>LDAPv3</b>
requires session to be using LDAP version 3. <b>authc</b>
requires authentication prior to directory operations.
<b>SASL</b> requires SASL authentication prior to directory
operations. <b>strong</b> requires strong authentication
prior to directory operations. The strong keyword allows
protected &quot;simple&quot; authentication as well as SASL
authentication. <b>none</b> may be used to require no
conditions (useful to clear out globally set conditions
within a particular database); it must occur first in the
list of conditions.</p>

<p style="margin-left:11%;"><b>reverse&minus;lookup on |
off</b></p>

<p style="margin-left:22%;">Enable/disable client name
unverified reverse lookup (default is <b>off</b> if compiled
with &minus;&minus;enable&minus;rlookups).</p>

<p style="margin-left:11%;"><b>rootDSE &lt;file&gt;</b></p>

<p style="margin-left:22%;">Specify the name of an LDIF(5)
file containing user defined attributes for the root DSE.
These attributes are returned in addition to the attributes
normally produced by slapd.</p>

<p style="margin-left:22%; margin-top: 1em">The root DSE is
an entry with information about the server and its
capabilities, in operational attributes. It has the empty
DN, and can be read with e.g.: <br>
ldapsearch &minus;x &minus;b &quot;&quot; &minus;s base
&quot;+&quot; <br>
See RFC 4512 section 5.1 for details.</p>

<p style="margin-left:11%;"><b>sasl&minus;auxprops
&lt;plugin&gt; [...]</b></p>

<p style="margin-left:22%;">Specify which auxprop plugins
to use for authentication lookups. The default is empty,
which just uses slapd&rsquo;s internal support. Usually no
other auxprop plugins are needed.</p>

<p style="margin-left:11%;"><b>sasl&minus;host
&lt;fqdn&gt;</b></p>

<p style="margin-left:22%;">Used to specify the fully
qualified domain name used for SASL processing.</p>

<p style="margin-left:11%;"><b>sasl&minus;realm
&lt;realm&gt;</b></p>

<p style="margin-left:22%;">Specify SASL realm. Default is
empty.</p>

<p style="margin-left:11%;"><b>sasl&minus;secprops
&lt;properties&gt;</b></p>

<p style="margin-left:22%;">Used to specify Cyrus SASL
security properties. The <b>none</b> flag (without any other
properties) causes the flag properties default,
&quot;noanonymous,noplain&quot;, to be cleared. The
<b>noplain</b> flag disables mechanisms susceptible to
simple passive attacks. The <b>noactive</b> flag disables
mechanisms susceptible to active attacks. The <b>nodict</b>
flag disables mechanisms susceptible to passive dictionary
attacks. The <b>noanonymous</b> flag disables mechanisms
which support anonymous login. The <b>forwardsec</b> flag
require forward secrecy between sessions. The
<b>passcred</b> require mechanisms which pass client
credentials (and allow mechanisms which can pass credentials
to do so). The <b>minssf=&lt;factor&gt;</b> property
specifies the minimum acceptable <i>security strength
factor</i> as an integer approximate to effective key length
used for encryption. 0 (zero) implies no protection, 1
implies integrity protection only, 56 allows DES or other
weak ciphers, 112 allows triple DES and other strong
ciphers, 128 allows RC4, Blowfish and other modern strong
ciphers. The default is 0. The <b>maxssf=&lt;factor&gt;</b>
property specifies the maximum acceptable <i>security
strength factor</i> as an integer (see minssf description).
The default is INT_MAX. The <b>maxbufsize=&lt;size&gt;</b>
property specifies the maximum security layer receive buffer
size allowed. 0 disables security layers. The default is
65536.</p>

<p style="margin-left:11%;"><b>schemadn &lt;dn&gt;</b></p>

<p style="margin-left:22%;">Specify the distinguished name
for the subschema subentry that controls the entries on this
server. The default is &quot;cn=Subschema&quot;.</p>

<p style="margin-left:11%;"><b>security
&lt;factors&gt;</b></p>

<p style="margin-left:22%;">Specify a set of security
strength factors (separated by white space) to require (see
<b>sasl&minus;secprops</b>&rsquo;s <b>minssf</b> option for
a description of security strength factors). The directive
may be specified globally and/or per-database.
<b>ssf=&lt;n&gt;</b> specifies the overall security strength
factor. <b>transport=&lt;n&gt;</b> specifies the transport
security strength factor. <b>tls=&lt;n&gt;</b> specifies the
TLS security strength factor. <b>sasl=&lt;n&gt;</b>
specifies the SASL security strength factor.
<b>update_ssf=&lt;n&gt;</b> specifies the overall security
strength factor to require for directory updates.
<b>update_transport=&lt;n&gt;</b> specifies the transport
security strength factor to require for directory updates.
<b>update_tls=&lt;n&gt;</b> specifies the TLS security
strength factor to require for directory updates.
<b>update_sasl=&lt;n&gt;</b> specifies the SASL security
strength factor to require for directory updates.
<b>simple_bind=&lt;n&gt;</b> specifies the security strength
factor required for <i>simple</i> username/password
authentication. Note that the <b>transport</b> factor is
measure of security provided by the underlying transport,
e.g. ldapi:// (and eventually IPSEC). It is not normally
used.</p>

<p style="margin-left:11%;"><b>serverID &lt;integer&gt;
[&lt;URL&gt;]</b></p>

<p style="margin-left:22%;">Specify an integer ID from 0 to
4095 for this server (limited to 3 hexadecimal digits). The
ID may also be specified as a hexadecimal ID by prefixing
the value with &quot;0x&quot;. These IDs are required when
using multimaster replication and each master must have a
unique ID. Note that this requirement also applies to
separate masters contributing to a glued set of databases.
If the URL is provided, this directive may be specified
multiple times, providing a complete list of participating
servers and their IDs. The fully qualified hostname of each
server should be used in the supplied URLs. The IDs are used
in the &quot;replica id&quot; field of all CSNs generated by
the specified server. The default value is zero.
Example:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="8%">


<p>serverID 1</p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>sizelimit
{&lt;integer&gt;|unlimited} <br>
sizelimit size[.{soft|hard|unchecked}]=&lt;integer&gt;
[...]</b></p>

<p style="margin-left:22%;">Specify the maximum number of
entries to return from a search operation. The default size
limit is 500. Use <b>unlimited</b> to specify no limits. The
second format allows a fine grain setting of the size
limits. Extra args can be added on the same line. See
<b>limits</b> for an explanation of the different flags.</p>

<p style="margin-left:11%;"><b>sockbuf_max_incoming
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum incoming
LDAP PDU size for anonymous sessions. The default is
262143.</p>

<p style="margin-left:11%;"><b>sockbuf_max_incoming_auth
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum incoming
LDAP PDU size for authenticated sessions. The default is
4194303.</p>

<p style="margin-left:11%;"><b>sortvals &lt;attr&gt;
[...]</b></p>

<p style="margin-left:22%;">Specify a list of multi-valued
attributes whose values will always be maintained in sorted
order. Using this option will allow Modify, Compare, and
filter evaluations on these attributes to be performed more
efficiently. The resulting sort order depends on the
attributes&rsquo; syntax and matching rules and may not
correspond to lexical order or any other recognizable
order.</p>

<p style="margin-left:11%;"><b>tcp-buffer
[listener=&lt;URL&gt;] [{read|write}=]&lt;size&gt;</b></p>

<p style="margin-left:22%;">Specify the size of the TCP
buffer. A global value for both read and write TCP buffers
related to any listener is defined, unless the listener is
explicitly specified, or either the read or write qualifiers
are used. See <b>tcp</b>(7) for details. Note that some
OS-es implement automatic TCP buffer tuning.</p>

<p style="margin-left:11%;"><b>threads
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum size of the
primary thread pool. The default is 16; the minimum value is
2.</p>

<p style="margin-left:11%;"><b>timelimit
{&lt;integer&gt;|unlimited} <br>
timelimit time[.{soft|hard}]=&lt;integer&gt; [...]</b></p>

<p style="margin-left:22%;">Specify the maximum number of
seconds (in real time) <b>slapd</b> will spend answering a
search request. The default time limit is 3600. Use
<b>unlimited</b> to specify no limits. The second format
allows a fine grain setting of the time limits. Extra args
can be added on the same line. See <b>limits</b> for an
explanation of the different flags.</p>

<p style="margin-left:11%;"><b>tool&minus;threads
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the maximum number of
threads to use in tool mode. This should not be greater than
the number of CPUs in the system. The default is 1.</p>

<p style="margin-left:11%;"><b>writetimeout
&lt;integer&gt;</b></p>

<p style="margin-left:22%;">Specify the number of seconds
to wait before forcibly closing a connection with an
outstanding write. This allows recovery from various network
hang conditions. A writetimeout of 0 disables this feature.
The default is 0.</p>

<h2>TLS OPTIONS
<a name="TLS OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If <b>slapd</b>
is built with support for Transport Layer Security, there
are more options you can specify. <b><br>
TLSCipherSuite &lt;cipher-suite-spec&gt;</b></p>

<p style="margin-left:22%;">Permits configuring what
ciphers will be accepted and the preference order.
&lt;cipher-suite-spec&gt; should be a cipher specification
for the TLS library in use (OpenSSL, GnuTLS, or Mozilla
NSS). Example:</p>

<p style="margin-left:32%;"><i>OpenSSL:</i></p>

<p style="margin-left:43%;">TLSCipherSuite
HIGH:MEDIUM:+SSLv2</p>

<p style="margin-left:32%;"><i>GnuTLS:</i></p>

<p style="margin-left:43%;">TLSCiphersuite
SECURE256:!AES-128-CBC</p>

<p style="margin-left:22%; margin-top: 1em">To check what
ciphers a given spec selects in OpenSSL, use:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>openssl ciphers &minus;v &lt;cipher-suite-spec&gt;</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">With GnuTLS the
available specs can be found in the manual page of
<b>gnutls&minus;cli</b>(1) (see the description of the
option <b>&minus;&minus;priority</b>).</p>

<p style="margin-left:22%; margin-top: 1em">In older
versions of GnuTLS, where gnutls&minus;cli does not support
the option &minus;&minus;priority, you can obtain the
&mdash; more limited &mdash; list of ciphers by calling:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>gnutls&minus;cli &minus;l</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">When using
Mozilla NSS, the OpenSSL cipher suite specifications are
used and translated into the format used internally by
Mozilla NSS. There isn&rsquo;t an easy way to list the
cipher suites from the command line. The authoritative list
is in the source code for Mozilla NSS in the file sslinfo.c
in the structure <br>
static const SSLCipherSuiteInfo suiteInfo[]</p>

<p style="margin-left:11%;"><b>TLSCACertificateFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specifies the file that
contains certificates for all of the Certificate Authorities
that <b>slapd</b> will recognize. The certificate for the CA
that signed the server certificate must be included among
these certificates. If the signing CA was not a top-level
(root) CA, certificates for the entire sequence of
CA&rsquo;s from the signing CA to the top-level CA should be
present. Multiple certificates are simply appended to the
file; the order is not significant.</p>

<p style="margin-left:11%;"><b>TLSCACertificatePath
&lt;path&gt;</b></p>

<p style="margin-left:22%;">Specifies the path of a
directory that contains Certificate Authority certificates
in separate individual files. Usually only one of this or
the TLSCACertificateFile is used. This directive is not
supported when using GnuTLS.</p>

<p style="margin-left:22%; margin-top: 1em">When using
Mozilla NSS, &lt;path&gt; may contain a Mozilla NSS cert/key
database. If &lt;path&gt; contains a Mozilla NSS cert/key
database and CA cert files, OpenLDAP will use the cert/key
database and will ignore the CA cert files.</p>

<p style="margin-left:11%;"><b>TLSCertificateFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specifies the file that
contains the <b>slapd</b> server certificate.</p>

<p style="margin-left:22%; margin-top: 1em">When using
Mozilla NSS, if using a cert/key database (specified with
TLSCACertificatePath), TLSCertificateFile specifies the name
of the certificate to use:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>TLSCertificateFile Server-Cert</p></td></tr>
</table>

<p style="margin-left:22%;">If using a token other than the
internal built in token, specify the token name first,
followed by a colon:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>TLSCertificateFile my hardware device:Server-Cert</p></td></tr>
</table>

<p style="margin-left:22%;">Use certutil -L to list the
certificates by name:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>certutil -d /path/to/certdbdir -L</p></td></tr>
</table>

<p style="margin-left:11%;"><b>TLSCertificateKeyFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specifies the file that
contains the <b>slapd</b> server private key that matches
the certificate stored in the <b>TLSCertificateFile</b>
file. Currently, the private key must not be protected with
a password, so it is of critical importance that it is
protected carefully.</p>

<p style="margin-left:22%; margin-top: 1em">When using
Mozilla NSS, TLSCertificateKeyFile specifies the name of a
file that contains the password for the key for the
certificate specified with TLSCertificateFile. The modutil
command can be used to turn off password protection for the
cert/key database. For example, if TLSCACertificatePath
specifes /etc/openldap/certdb as the location of the
cert/key database, use modutil to change the password to the
empty string:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>modutil -dbdir /etc/openldap/certdb -changepw &rsquo;NSS
Certificate DB&rsquo;</p></td></tr>
</table>

<p style="margin-left:22%;">You must have the old password,
if any. Ignore the WARNING about the running browser. Press
&rsquo;Enter&rsquo; for the new password.</p>

<p style="margin-left:11%;"><b>TLSDHParamFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">This directive specifies the
file that contains parameters for Diffie-Hellman ephemeral
key exchange. This is required in order to use a DSA
certificate on the server. If multiple sets of parameters
are present in the file, all of them will be processed. Note
that setting this option may also enable Anonymous
Diffie-Hellman key exchanges in certain non-default cipher
suites. You should append &quot;!ADH&quot; to your cipher
suites if you have changed them from the default, otherwise
no certificate exchanges or verification will be done. When
using GnuTLS these parameters are always generated randomly
so this directive is ignored. This directive is ignored when
using Mozilla NSS.</p>

<p style="margin-left:11%;"><b>TLSProtocolMin
&lt;major&gt;[.&lt;minor&gt;]</b></p>

<p style="margin-left:22%;">Specifies minimum SSL/TLS
protocol version that will be negotiated. If the server
doesn&rsquo;t support at least that version, the SSL
handshake will fail. To require TLS 1.x or higher, set this
option to 3.(x+1), e.g.,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>TLSProtocolMin 3.2</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">would require
TLS 1.1. Specifying a minimum that is higher than that
supported by the OpenLDAP implementation will result in it
requiring the highest level that it does support. This
directive is ignored with GnuTLS.</p>

<p style="margin-left:11%;"><b>TLSRandFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specifies the file to obtain
random bits from when /dev/[u]random is not available.
Generally set to the name of the EGD/PRNGD socket. The
environment variable RANDFILE can also be used to specify
the filename. This directive is ignored with GnuTLS and
Mozilla NSS.</p>

<p style="margin-left:11%;"><b>TLSVerifyClient
&lt;level&gt;</b></p>

<p style="margin-left:22%;">Specifies what checks to
perform on client certificates in an incoming TLS session,
if any. The <b>&lt;level&gt;</b> can be specified as one of
the following keywords:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>never</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>This is the default. <b>slapd</b> will not ask the
client for a certificate.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>allow</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The client certificate is requested. If no certificate
is provided, the session proceeds normally. If a bad
certificate is provided, it will be ignored and the session
proceeds normally.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>try</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The client certificate is requested. If no certificate
is provided, the session proceeds normally. If a bad
certificate is provided, the session is immediately
terminated.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>demand | hard | true</b></p>

<p style="margin-left:32%;">These keywords are all
equivalent, for compatibility reasons. The client
certificate is requested. If no certificate is provided, or
a bad certificate is provided, the session is immediately
terminated.</p>

<p style="margin-left:32%; margin-top: 1em">Note that a
valid client certificate is required in order to use the
SASL EXTERNAL authentication mechanism with a TLS session.
As such, a non-default <b>TLSVerifyClient</b> setting must
be chosen to enable SASL EXTERNAL authentication.</p>

<p style="margin-left:11%;"><b>TLSCRLCheck
&lt;level&gt;</b></p>

<p style="margin-left:22%;">Specifies if the Certificate
Revocation List (CRL) of the CA should be used to verify if
the client certificates have not been revoked. This requires
<b>TLSCACertificatePath</b> parameter to be set. This
directive is ignored with GnuTLS and Mozilla NSS.
<b>&lt;level&gt;</b> can be specified as one of the
following keywords:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="66%">


<p>No CRL checks are performed</p></td>
<td width="2%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>peer</b></p></td>
<td width="4%"></td>
<td width="66%">


<p>Check the CRL of the peer certificate</p></td>
<td width="2%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>all</b></p></td>
<td width="4%"></td>
<td width="66%">


<p>Check the CRL for a whole certificate chain</p></td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>TLSCRLFile
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">Specifies a file containing a
Certificate Revocation List to be used for verifying that
certificates have not been revoked. This directive is only
valid when using GnuTLS and Mozilla NSS.</p>

<h2>GENERAL BACKEND OPTIONS
<a name="GENERAL BACKEND OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options in this
section only apply to the configuration file section for the
specified backend. They are supported by every type of
backend. <b><br>
backend &lt;databasetype&gt;</b></p>

<p style="margin-left:22%;">Mark the beginning of a backend
definition. &lt;databasetype&gt; should be one of
<b>bdb</b>, <b>config</b>, <b>dnssrv</b>, <b>hdb</b>,
<b>ldap</b>, <b>ldif</b>, <b>mdb</b>, <b>meta</b>,
<b>monitor</b>, <b>null</b>, <b>passwd</b>, <b>perl</b>,
<b>relay</b>, <b>shell</b>, or <b>sql</b>, depending on
which backend will serve the database.</p>

<h2>GENERAL DATABASE OPTIONS
<a name="GENERAL DATABASE OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options in this
section only apply to the configuration file section for the
database in which they are defined. They are supported by
every type of backend. Note that the <b>database</b> and at
least one <b>suffix</b> option are mandatory for each
database. <b><br>
database &lt;databasetype&gt;</b></p>

<p style="margin-left:22%;">Mark the beginning of a new
database instance definition. &lt;databasetype&gt; should be
one of <b>bdb</b>, <b>config</b>, <b>dnssrv</b>, <b>hdb</b>,
<b>ldap</b>, <b>ldif</b>, <b>mdb</b>, <b>meta</b>,
<b>monitor</b>, <b>null</b>, <b>passwd</b>, <b>perl</b>,
<b>relay</b>, <b>shell</b>, or <b>sql</b>, depending on
which backend will serve the database.</p>

<p style="margin-left:22%; margin-top: 1em">LDAP
operations, even subtree searches, normally access only one
database. That can be changed by gluing databases together
with the <b>subordinate</b> keyword. Access controls and
some overlays can also involve multiple databases.</p>

<p style="margin-left:11%;"><b>add_content_acl on |
off</b></p>

<p style="margin-left:22%;">Controls whether Add operations
will perform ACL checks on the content of the entry being
added. This check is off by default. See the
<b>slapd.access</b>(5) manual page for more details on ACL
requirements for Add operations.</p>

<p style="margin-left:11%;"><b>extra_attrs
&lt;attrlist&gt;</b></p>

<p style="margin-left:22%;">Lists what attributes need to
be added to search requests. Local storage backends return
the entire entry to the frontend. The frontend takes care of
only returning the requested attributes that are allowed by
ACLs. However, features like access checking and so may need
specific attributes that are not automatically returned by
remote storage backends, like proxy backends and so on.
<b>&lt;attrlist&gt;</b> is a list of attributes that are
needed for internal purposes and thus always need to be
collected, even when not explicitly requested by
clients.</p>

<p style="margin-left:11%;"><b>hidden on | off</b></p>

<p style="margin-left:22%;">Controls whether the database
will be used to answer queries. A database that is hidden
will never be selected to answer any queries, and any suffix
configured on the database will be ignored in checks for
conflicts with other databases. By default, hidden is
off.</p>

<p style="margin-left:11%;"><b>lastmod on | off</b></p>

<p style="margin-left:22%;">Controls whether <b>slapd</b>
will automatically maintain the modifiersName,
modifyTimestamp, creatorsName, and createTimestamp
attributes for entries. It also controls the entryCSN and
entryUUID attributes, which are needed by the syncrepl
provider. By default, lastmod is on.</p>

<p style="margin-left:11%;"><b>limits &lt;selector&gt;
&lt;limit&gt; [&lt;limit&gt; [...]]</b></p>

<p style="margin-left:22%;">Specify time and size limits
based on the operation&rsquo;s initiator or base DN. The
argument <b>&lt;selector&gt;</b> can be any of</p>

<p style="margin-left:32%;">anonymous | users |
[&lt;dnspec&gt;=]&lt;pattern&gt; | <br>
group[/oc[/at]]=&lt;pattern&gt;</p>

<p style="margin-left:22%; margin-top: 1em">with</p>

<p style="margin-left:32%;">&lt;dnspec&gt; ::=
dn[.&lt;type&gt;][.&lt;style&gt;] <br>
&lt;type&gt; ::= self | this <br>
&lt;style&gt; ::= exact | base | onelevel | subtree |
children <br>
| regex | anonymous</p>

<p style="margin-left:22%; margin-top: 1em">DN type
<b>self</b> is the default and means the bound user, while
<b>this</b> means the base DN of the operation. The term
<b>anonymous</b> matches all unauthenticated clients. The
term <b>users</b> matches all authenticated clients;
otherwise an <b>exact</b> dn pattern is assumed unless
otherwise specified by qualifying the (optional) key string
<b>dn</b> with <b>exact</b> or <b>base</b> (which are
synonyms), to require an exact match; with <b>onelevel</b>,
to require exactly one level of depth match; with
<b>subtree</b>, to allow any level of depth match, including
the exact match; with <b>children</b>, to allow any level of
depth match, not including the exact match; <b>regex</b>
explicitly requires the (default) match based on POSIX
(&rsquo;&rsquo;extended&rsquo;&rsquo;) regular expression
pattern. Finally, <b>anonymous</b> matches unbound
operations; the <b>pattern</b> field is ignored. The same
behavior is obtained by using the <b>anonymous</b> form of
the <b>&lt;selector&gt;</b> clause. The term <b>group</b>,
with the optional objectClass <b>oc</b> and attributeType
<b>at</b> fields, followed by <b>pattern</b>, sets the
limits for any DN listed in the values of the <b>at</b>
attribute (default <b>member</b>) of the <b>oc</b> group
objectClass (default <b>groupOfNames</b>) whose DN exactly
matches <b>pattern</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The currently
supported limits are <b>size</b> and <b>time</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The syntax for
time limits is <b>time[.{soft|hard}]=&lt;integer&gt;</b>,
where <i>integer</i> is the number of seconds slapd will
spend answering a search request. If no time limit is
explicitly requested by the client, the <b>soft</b> limit is
used; if the requested time limit exceeds the <b>hard</b>
limit, the value of the limit is used instead. If the
<b>hard</b> limit is set to the keyword <i>soft</i>, the
soft limit is used in either case; if it is set to the
keyword <i>unlimited</i>, no hard limit is enforced.
Explicit requests for time limits smaller or equal to the
<b>hard</b> limit are honored. If no limit specifier is set,
the value is assigned to the <b>soft</b> limit, and the
<b>hard</b> limit is set to <i>soft</i>, to preserve the
original behavior.</p>

<p style="margin-left:22%; margin-top: 1em">The syntax for
size limits is
<b>size[.{soft|hard|unchecked}]=&lt;integer&gt;</b>, where
<i>integer</i> is the maximum number of entries slapd will
return answering a search request. If no size limit is
explicitly requested by the client, the <b>soft</b> limit is
used; if the requested size limit exceeds the <b>hard</b>
limit, the value of the limit is used instead. If the
<b>hard</b> limit is set to the keyword <i>soft</i>, the
soft limit is used in either case; if it is set to the
keyword <i>unlimited</i>, no hard limit is enforced.
Explicit requests for size limits smaller or equal to the
<b>hard</b> limit are honored. The <b>unchecked</b>
specifier sets a limit on the number of candidates a search
request is allowed to examine. The rationale behind it is
that searches for non-properly indexed attributes may result
in large sets of candidates, which must be examined by
<b>slapd</b>(8) to determine whether they match the search
filter or not. The <b>unchecked</b> limit provides a means
to drop such operations before they are even started. If the
selected candidates exceed the <b>unchecked</b> limit, the
search will abort with <i>Unwilling to perform</i>. If it is
set to the keyword <i>unlimited</i>, no limit is applied
(the default). If it is set to <i>disabled</i>, the search
is not even performed; this can be used to disallow searches
for a specific set of users. If no limit specifier is set,
the value is assigned to the <b>soft</b> limit, and the
<b>hard</b> limit is set to <i>soft</i>, to preserve the
original behavior.</p>

<p style="margin-left:22%; margin-top: 1em">In case of no
match, the global limits are used. The default values are
the same as for <b>sizelimit</b> and <b>timelimit</b>; no
limit is set on <b>unchecked</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>pagedResults</b> control is requested, the <b>hard</b>
size limit is used by default, because the request of a
specific page size is considered an explicit request for a
limitation on the number of entries to be returned. However,
the size limit applies to the total count of entries
returned within the search, and not to a single page.
Additional size limits may be enforced; the syntax is
<b>size.pr={&lt;integer&gt;|noEstimate|unlimited}</b>, where
<i>integer</i> is the max page size if no explicit limit is
set; the keyword <i>noEstimate</i> inhibits the server from
returning an estimate of the total number of entries that
might be returned (note: the current implementation does not
return any estimate). The keyword <i>unlimited</i> indicates
that no limit is applied to the pagedResults control page
size. The syntax
<b>size.prtotal={&lt;integer&gt;|unlimited|disabled}</b>
allows to set a limit on the total number of entries that a
pagedResults control allows to return. By default it is set
to the <b>hard</b> limit. When set, <i>integer</i> is the
max number of entries that the whole search with
pagedResults control can return. Use <i>unlimited</i> to
allow unlimited number of entries to be returned, e.g. to
allow the use of the pagedResults control as a means to
circumvent size limitations on regular searches; the keyword
<i>disabled</i> disables the control, i.e. no paged results
can be returned. Note that the total number of entries
returned when the pagedResults control is requested cannot
exceed the <b>hard</b> size limit of regular searches unless
extended by the <b>prtotal</b> switch.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>limits</b> statement is typically used to let an
unlimited number of entries be returned by searches
performed with the identity used by the consumer for
synchronization purposes by means of the RFC 4533 LDAP
Content Synchronization protocol (see <b>syncrepl</b> for
details).</p>

<p style="margin-left:11%;"><b>maxderefdepth
&lt;depth&gt;</b></p>

<p style="margin-left:22%;">Specifies the maximum number of
aliases to dereference when trying to resolve an entry, used
to avoid infinite alias loops. The default is 15.</p>

<p style="margin-left:11%;"><b>mirrormode on | off</b></p>

<p style="margin-left:22%;">This option puts a replica
database into &quot;mirror&quot; mode. Update operations
will be accepted from any user, not just the updatedn. The
database must already be configured as a syncrepl consumer
before this keyword may be set. This mode also requires a
<b>serverID</b> (see above) to be configured. By default,
mirrormode is off.</p>

<p style="margin-left:11%;"><b>monitoring on | off</b></p>

<p style="margin-left:22%;">This option enables
database-specific monitoring in the entry related to the
current database in the &quot;cn=Databases,cn=Monitor&quot;
subtree of the monitor database, if the monitor database is
enabled. Currently, only the BDB and the HDB databases
provide database-specific monitoring. The default depends on
the backend type.</p>

<p style="margin-left:11%;"><b>overlay
&lt;overlay-name&gt;</b></p>

<p style="margin-left:22%;">Add the specified overlay to
this database. An overlay is a piece of code that intercepts
database operations in order to extend or change them.
Overlays are pushed onto a stack over the database, and so
they will execute in the reverse of the order in which they
were configured and the database itself will receive control
last of all. See the <b>slapd.overlays</b>(5) manual page
for an overview of the available overlays. Note that all of
the database&rsquo;s regular settings should be configured
before any overlay settings.</p>

<p style="margin-left:11%;"><b>readonly on | off</b></p>

<p style="margin-left:22%;">This option puts the database
into &quot;read-only&quot; mode. Any attempts to modify the
database will return an &quot;unwilling to perform&quot;
error. By default, readonly is off.</p>

<p style="margin-left:11%;"><b>restrict
&lt;oplist&gt;</b></p>

<p style="margin-left:22%;">Specify a whitespace separated
list of operations that are restricted. If defined inside a
database specification, restrictions apply only to that
database, otherwise they are global. Operations can be any
of <b>add</b>, <b>bind</b>, <b>compare</b>, <b>delete</b>,
<b>extended[=&lt;OID&gt;]</b>, <b>modify</b>, <b>rename</b>,
<b>search</b>, or the special pseudo-operations <b>read</b>
and <b>write</b>, which respectively summarize read and
write operations. The use of <i>restrict write</i> is
equivalent to <i>readonly on</i> (see above). The
<b>extended</b> keyword allows to indicate the OID of the
specific operation to be restricted.</p>

<p style="margin-left:11%;"><b>rootdn &lt;dn&gt;</b></p>

<p style="margin-left:22%;">Specify the distinguished name
that is not subject to access control or administrative
limit restrictions for operations on this database. This DN
may or may not be associated with an entry. An empty root DN
(the default) specifies no root access is to be granted. It
is recommended that the rootdn only be specified when needed
(such as when initially populating a database). If the
rootdn is within a namingContext (suffix) of the database, a
simple bind password may also be provided using the
<b>rootpw</b> directive. Many optional features, including
syncrepl, require the rootdn to be defined for the
database.</p>

<p style="margin-left:11%;"><b>rootpw
&lt;password&gt;</b></p>

<p style="margin-left:22%;">Specify a password (or hash of
the password) for the rootdn. The password can only be set
if the rootdn is within the namingContext (suffix) of the
database. This option accepts all RFC 2307 userPassword
formats known to the server (see <b>password&minus;hash</b>
description) as well as cleartext. <b>slappasswd</b>(8) may
be used to generate a hash of a password. Cleartext and
<b>{CRYPT}</b> passwords are not recommended. If empty (the
default), authentication of the root DN is by other means
(e.g. SASL). Use of SASL is encouraged.</p>

<p style="margin-left:11%;"><b>suffix &lt;dn
suffix&gt;</b></p>

<p style="margin-left:22%;">Specify the DN suffix of
queries that will be passed to this backend database.
Multiple suffix lines can be given and at least one is
required for each database definition.</p>

<p style="margin-left:22%; margin-top: 1em">If the suffix
of one database is &quot;inside&quot; that of another, the
database with the inner suffix must come first in the
configuration file. You may also want to glue such databases
together with the <b>subordinate</b> keyword.</p>

<p style="margin-left:11%;"><b>subordinate
[advertise]</b></p>

<p style="margin-left:22%;">Specify that the current
backend database is a subordinate of another backend
database. A subordinate database may have only one suffix.
This option may be used to glue multiple databases into a
single namingContext. If the suffix of the current database
is within the namingContext of a superior database, searches
against the superior database will be propagated to the
subordinate as well. All of the databases associated with a
single namingContext should have identical rootdns. Behavior
of other LDAP operations is unaffected by this setting. In
particular, it is not possible to use moddn to move an entry
from one subordinate to another subordinate within the
namingContext.</p>

<p style="margin-left:22%; margin-top: 1em">If the optional
<b>advertise</b> flag is supplied, the naming context of
this database is advertised in the root DSE. The default is
to hide this database context, so that only the superior
context is visible.</p>

<p style="margin-left:22%; margin-top: 1em">If the slap
tools <b>slapcat</b>(8), <b>slapadd</b>(8), or
<b>slapindex</b>(8) are used on the superior database, any
glued subordinates that support these tools are opened as
well.</p>

<p style="margin-left:22%; margin-top: 1em">Databases that
are glued together should usually be configured with the
same indices (assuming they support indexing), even for
attributes that only exist in some of these databases. In
general, all of the glued databases should be configured as
similarly as possible, since the intent is to provide the
appearance of a single directory.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<i>subordinate</i> functionality is implemented internally
by the <i>glue</i> overlay and as such its behavior will
interact with other overlays in use. By default, the glue
overlay is automatically configured as the last overlay on
the superior backend. Its position on the backend can be
explicitly configured by setting an <b>overlay glue</b>
directive at the desired position. This explicit
configuration is necessary e.g. when using the
<i>syncprov</i> overlay, which needs to follow <i>glue</i>
in order to work over all of the glued databases. E.g.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>database bdb</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>suffix dc=example,dc=com</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>...</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>overlay glue</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>overlay syncprov</p></td></tr>
</table>

<p style="margin-left:11%;"><b>sync_use_subentry</b></p>

<p style="margin-left:22%;">Store the syncrepl contextCSN
in a subentry instead of the context entry of the database.
The subentry&rsquo;s RDN will be &quot;cn=ldapsync&quot;. By
default the contextCSN is stored in the context entry.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="47%">


<p style="margin-top: 1em"><b>syncrepl rid=&lt;replica
ID&gt;</b></p> </td>
<td width="7%"></td>
<td width="35%">



<p style="margin-top: 1em"><b>provider=ldap[s]://&lt;hostname&gt;[:port]</b></p> </td></tr>
</table>

<p style="margin-left:11%;"><b>searchbase=&lt;base DN&gt;
[type=refreshOnly|refreshAndPersist] [interval=dd:hh:mm:ss]
[retry=[&lt;retry interval&gt; &lt;# of retries&gt;]+]
[filter=&lt;filter str&gt;] [scope=sub|one|base|subord]
[attrs=&lt;attr list&gt;] [attrsonly]
[sizelimit=&lt;limit&gt;] [timelimit=&lt;limit&gt;]
[schemachecking=on|off]
[network&minus;timeout=&lt;seconds&gt;]
[timeout=&lt;seconds&gt;] [bindmethod=simple|sasl]
[binddn=&lt;dn&gt;] [saslmech=&lt;mech&gt;]
[authcid=&lt;identity&gt;] [authzid=&lt;identity&gt;]
[credentials=&lt;passwd&gt;] [realm=&lt;realm&gt;]
[secprops=&lt;properties&gt;]
[keepalive=&lt;idle&gt;:&lt;probes&gt;:&lt;interval&gt;]
[starttls=yes|critical] [tls_cert=&lt;file&gt;]
[tls_key=&lt;file&gt;] [tls_cacert=&lt;file&gt;]
[tls_cacertdir=&lt;path&gt;]
[tls_reqcert=never|allow|try|demand]
[tls_ciphersuite=&lt;ciphers&gt;]
[tls_crlcheck=none|peer|all]
[tls_protocol_min=&lt;major&gt;[.&lt;minor&gt;]]
[suffixmassage=&lt;real DN&gt;] [logbase=&lt;base DN&gt;]
[logfilter=&lt;filter str&gt;]
[syncdata=default|accesslog|changelog]</b></p>

<p style="margin-left:22%;">Specify the current database as
a replica which is kept up-to-date with the master content
by establishing the current <b>slapd</b>(8) as a replication
consumer site running a <b>syncrepl</b> replication engine.
The replica content is kept synchronized to the master
content using the LDAP Content Synchronization protocol.
Refer to the &quot;OpenLDAP Administrator&rsquo;s
Guide&quot; for detailed information on setting up a
replicated <b>slapd</b> directory service using the
<b>syncrepl</b> replication engine.</p>

<p style="margin-left:22%; margin-top: 1em"><b>rid</b>
identifies the current <b>syncrepl</b> directive within the
replication consumer site. It is a non-negative integer not
greater than 999 (limited to three decimal digits).</p>


<p style="margin-left:22%; margin-top: 1em"><b>provider</b>
specifies the replication provider site containing the
master content as an LDAP URI. If &lt;port&gt; is not given,
the standard LDAP port number (389 or 636) is used.</p>

<p style="margin-left:22%; margin-top: 1em">The content of
the <b>syncrepl</b> replica is defined using a search
specification as its result set. The consumer <b>slapd</b>
will send search requests to the provider <b>slapd</b>
according to the search specification. The search
specification includes <b>searchbase</b>, <b>scope</b>,
<b>filter</b>, <b>attrs</b>, <b>attrsonly</b>,
<b>sizelimit</b>, and <b>timelimit</b> parameters as in the
normal search specification. The <b>scope</b> defaults to
<b>sub</b>, the <b>filter</b> defaults to
<b>(objectclass=*)</b>, while there is no default
<b>searchbase</b>. The <b>attrs</b> list defaults to
<b>&quot;*,+&quot;</b> to return all user and operational
attributes, and <b>attrsonly</b> is unset by default. The
<b>sizelimit</b> and <b>timelimit</b> only accept
&quot;unlimited&quot; and positive integers, and both
default to &quot;unlimited&quot;. The <b>sizelimit</b> and
<b>timelimit</b> parameters define a consumer requested
limitation on the number of entries that can be returned by
the LDAP Content Synchronization operation; as such, it is
intended to implement partial replication based on the size
of the replicated database and on the time required by the
synchronization. Note, however, that any provider-side
limits for the replication identity will be enforced by the
provider regardless of the limits requested by the LDAP
Content Synchronization operation, much like for any other
search operation.</p>

<p style="margin-left:22%; margin-top: 1em">The LDAP
Content Synchronization protocol has two operation types. In
the <b>refreshOnly</b> operation, the next synchronization
search operation is periodically rescheduled at an interval
time (specified by <b>interval</b> parameter; 1 day by
default) after each synchronization operation finishes. In
the <b>refreshAndPersist</b> operation, a synchronization
search remains persistent in the provider slapd. Further
updates to the master replica will generate
<b>searchResultEntry</b> to the consumer slapd as the search
responses to the persistent synchronization search.</p>

<p style="margin-left:22%; margin-top: 1em">If an error
occurs during replication, the consumer will attempt to
reconnect according to the <b>retry</b> parameter which is a
list of the &lt;retry interval&gt; and &lt;# of retries&gt;
pairs. For example, retry=&quot;60 10 300 3&quot; lets the
consumer retry every 60 seconds for the first 10 times and
then retry every 300 seconds for the next 3 times before
stop retrying. The &lsquo;+&rsquo; in &lt;# of retries&gt;
means indefinite number of retries until success. If no
<b>retry</b> was specified, by default syncrepl retries
every hour forever.</p>

<p style="margin-left:22%; margin-top: 1em">The schema
checking can be enforced at the LDAP Sync consumer site by
turning on the <b>schemachecking</b> parameter. The default
is <b>off</b>. Schema checking <b>on</b> means that
replicated entries must have a structural objectClass, must
obey to objectClass requirements in terms of
required/allowed attributes, and that naming attributes and
distinguished values must be present. As a consequence,
schema checking should be <b>off</b> when partial
replication is used.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>network&minus;timeout</b> parameter sets how long the
consumer will wait to establish a network connection to the
provider. Once a connection is established, the
<b>timeout</b> parameter determines how long the consumer
will wait for the initial Bind request to complete. The
defaults for these parameters come from
<b>ldap.conf</b>(5).</p>

<p style="margin-left:22%; margin-top: 1em">A
<b>bindmethod</b> of <b>simple</b> requires the options
<b>binddn</b> and <b>credentials</b> and should only be used
when adequate security services (e.g. TLS or IPSEC) are in
place. <b>REMEMBER: simple bind credentials must be in
cleartext!</b> A <b>bindmethod</b> of <b>sasl</b> requires
the option <b>saslmech.</b> Depending on the mechanism, an
authentication identity and/or credentials can be specified
using <b>authcid</b> and <b>credentials.</b> The
<b>authzid</b> parameter may be used to specify an
authorization identity. Specific security properties (as
with the <b>sasl&minus;secprops</b> keyword above) for a
SASL bind can be set with the <b>secprops</b> option. A non
default SASL realm can be set with the <b>realm</b> option.
The identity used for synchronization by the consumer should
be allowed to receive an unlimited number of entries in
response to a search request. The provider, other than allow
authentication of the syncrepl identity, should grant that
identity appropriate access privileges to the data that is
being replicated (<b>access</b> directive), and appropriate
time and size limits. This can be accomplished by either
allowing unlimited <b>sizelimit</b> and <b>timelimit</b>, or
by setting an appropriate <b>limits</b> statement in the
consumer&rsquo;s configuration (see <b>sizelimit</b> and
<b>limits</b> for details).</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>keepalive</b> parameter sets the values of <i>idle</i>,
<i>probes</i>, and <i>interval</i> used to check whether a
socket is alive; <i>idle</i> is the number of seconds a
connection needs to remain idle before TCP starts sending
keepalive probes; <i>probes</i> is the maximum number of
keepalive probes TCP should send before dropping the
connection; <i>interval</i> is interval in seconds between
individual keepalive probes. Only some systems support the
customization of these values; the <b>keepalive</b>
parameter is ignored otherwise, and system-wide settings are
used.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>starttls</b> parameter specifies use of the StartTLS
extended operation to establish a TLS session before Binding
to the provider. If the <b>critical</b> argument is
supplied, the session will be aborted if the StartTLS
request fails. Otherwise the syncrepl session continues
without TLS. The tls_reqcert setting defaults to
&quot;demand&quot; and the other TLS settings default to the
same as the main slapd TLS settings.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>suffixmassage</b> parameter allows the consumer to pull
entries from a remote directory whose DN suffix differs from
the local directory. The portion of the remote
entries&rsquo; DNs that matches the <i>searchbase</i> will
be replaced with the suffixmassage DN.</p>

<p style="margin-left:22%; margin-top: 1em">Rather than
replicating whole entries, the consumer can query logs of
data modifications. This mode of operation is referred to as
<i>delta syncrepl</i>. In addition to the above parameters,
the <b>logbase</b> and <b>logfilter</b> parameters must be
set appropriately for the log that will be used. The
<b>syncdata</b> parameter must be set to either
&quot;accesslog&quot; if the log conforms to the
<b>slapo&minus;accesslog</b>(5) log format, or
&quot;changelog&quot; if the log conforms to the obsolete
<i>changelog</i> format. If the <b>syncdata</b> parameter is
omitted or set to &quot;default&quot; then the log
parameters are ignored.</p>

<p style="margin-left:11%;"><b>updatedn &lt;dn&gt;</b></p>

<p style="margin-left:22%;">This option is only applicable
in a slave database. It specifies the DN permitted to update
(subject to access controls) the replica. It is only needed
in certain push-mode replication scenarios. Generally, this
DN <i>should not</i> be the same as the <b>rootdn</b> used
at the master.</p>

<p style="margin-left:11%;"><b>updateref
&lt;url&gt;</b></p>

<p style="margin-left:22%;">Specify the referral to pass
back when <b>slapd</b>(8) is asked to modify a replicated
local database. If specified multiple times, each url is
provided.</p>

<h2>DATABASE-SPECIFIC OPTIONS
<a name="DATABASE-SPECIFIC OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each database
may allow specific configuration options; they are
documented separately in the backends&rsquo; manual pages.
See the <b>slapd.backends</b>(5) manual page for an overview
of available backends.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is a short
example of a configuration file:</p>

<p style="margin-left:22%; margin-top: 1em">include
/etc/openldap/schema/core.schema <br>
pidfile /var/run/slapd.pid</p>

<p style="margin-left:22%; margin-top: 1em"># Subtypes of
&quot;name&quot; (e.g. &quot;cn&quot; and &quot;ou&quot;)
with the <br>
# option &quot;;x&minus;hidden&quot; can be searched
for/compared, <br>
# but are not shown. See <b>slapd.access</b>(5). <br>
attributeoptions x&minus;hidden lang&minus; <br>
access to attrs=name;x&minus;hidden by * =cs</p>

<p style="margin-left:22%; margin-top: 1em"># Protect
passwords. See <b>slapd.access</b>(5). <br>
access to attrs=userPassword by * auth <br>
# Read access to other attributes and entries. <br>
access to * by * read</p>

<p style="margin-left:22%; margin-top: 1em">database bdb
<br>
suffix &quot;dc=our&minus;domain,dc=com&quot; <br>
# The database directory MUST exist prior to <br>
# running slapd AND should only be accessible <br>
# by the slapd/tools. Mode 0700 recommended. <br>
directory /var/openldap&minus;data <br>
# Indices to maintain <br>
index objectClass eq <br>
index cn,sn,mail pres,eq,approx,sub</p>

<p style="margin-left:22%; margin-top: 1em"># We serve
small clients that do not handle referrals, <br>
# so handle remote lookups on their behalf. <br>
database ldap <br>
suffix &quot;&quot; <br>
uri ldap://ldap.some&minus;server.com/ <br>
lastmod off</p>

<p style="margin-left:11%; margin-top: 1em">&quot;OpenLDAP
Administrator&rsquo;s Guide&quot; contains a longer
annotated example of a configuration file. The original
/etc/openldap/slapd.conf is another example.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/openldap/slapd.conf</p>

<p style="margin-left:22%;">default slapd configuration
file</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ldap</b>(3),
<b>gnutls&minus;cli</b>(1), <b>slapd&minus;config</b>(5),
<b>slapd.access</b>(5), <b>slapd.backends</b>(5),
<b>slapd.overlays</b>(5), <b>slapd.plugin</b>(5),
<b>slapd</b>(8), <b>slapacl</b>(8), <b>slapadd</b>(8),
<b>slapauth</b>(8), <b>slapcat</b>(8), <b>slapdn</b>(8),
<b>slapindex</b>(8), <b>slappasswd</b>(8),
<b>slaptest</b>(8).</p>

<p style="margin-left:11%; margin-top: 1em">&quot;OpenLDAP
Administrator&rsquo;s Guide&quot;
(http://www.OpenLDAP.org/doc/admin/)</p>

<h2>ACKNOWLEDGEMENTS
<a name="ACKNOWLEDGEMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>OpenLDAP
Software</b> is developed and maintained by The OpenLDAP
Project &lt;http://www.openldap.org/&gt;. <b>OpenLDAP
Software</b> is derived from University of Michigan LDAP 3.3
Release.</p>
<hr>
</body>
</html>
