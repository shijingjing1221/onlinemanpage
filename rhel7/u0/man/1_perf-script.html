<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:11:47 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERF&minus;SCRIPT</title>

</head>
<body>

<h1 align="center">PERF&minus;SCRIPT</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perf-script
&minus; Read perf.data (created by perf record) and display
trace output</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>perf
script</i> [&lt;options&gt;] <i><br>
perf script</i> [&lt;options&gt;] record &lt;script&gt;
[&lt;record&minus;options&gt;] &lt;command&gt; <i><br>
perf script</i> [&lt;options&gt;] report &lt;script&gt;
[script&minus;args] <i><br>
perf script</i> [&lt;options&gt;] &lt;script&gt;
&lt;required&minus;script&minus;args&gt;
[&lt;record&minus;options&gt;] &lt;command&gt; <i><br>
perf script</i> [&lt;options&gt;] &lt;top&minus;script&gt;
[script&minus;args]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This command
reads the input file and displays the trace recorded.</p>

<p style="margin-left:11%; margin-top: 1em">There are
several variants of perf script:</p>

<p style="margin-left:17%; margin-top: 1em">'perf script'
to see a detailed trace of the workload that was <br>
recorded.</p>

<p style="margin-left:17%; margin-top: 1em">You can also
run a set of pre&minus;canned scripts that aggregate and
<br>
summarize the raw trace data in various ways (the list of
scripts is <br>
available via 'perf script &minus;l'). The following
variants allow you to <br>
record and run those scripts:</p>

<p style="margin-left:17%; margin-top: 1em">'perf script
record &lt;script&gt; &lt;command&gt;' to record the events
required <br>
for 'perf script report'. &lt;script&gt; is the name
displayed in the <br>
output of 'perf script &minus;&minus;list' i.e. the actual
script name minus any <br>
language extension. If &lt;command&gt; is not specified, the
events are <br>
recorded using the &minus;a (system&minus;wide) 'perf
record' option.</p>

<p style="margin-left:17%; margin-top: 1em">'perf script
report &lt;script&gt; [args]' to run and display the results
<br>
of &lt;script&gt;. &lt;script&gt; is the name displayed in
the output of 'perf <br>
trace &minus;&minus;list' i.e. the actual script name minus
any language <br>
extension. The perf.data output from a previous run of 'perf
script <br>
record &lt;script&gt;' is used and should be present for
this command to <br>
succeed. [args] refers to the (mainly optional) args
expected by <br>
the script.</p>

<p style="margin-left:17%; margin-top: 1em">'perf script
&lt;script&gt; &lt;required&minus;script&minus;args&gt;
&lt;command&gt;' to both <br>
record the events required for &lt;script&gt; and to run the
&lt;script&gt; <br>
using 'live&minus;mode' i.e. without writing anything to
disk. &lt;script&gt; <br>
is the name displayed in the output of 'perf script
&minus;&minus;list' i.e. the <br>
actual script name minus any language extension. If
&lt;command&gt; is <br>
not specified, the events are recorded using the &minus;a
(system&minus;wide) <br>
'perf record' option. If &lt;script&gt; has any required
args, they <br>
should be specified before &lt;command&gt;. This mode
doesn't allow for <br>
optional script args to be specified; if optional script
args are <br>
desired, they can be specified using separate 'perf script
record' <br>
and 'perf script report' commands, with the stdout of the
record step <br>
piped to the stdin of the report script, using the '&minus;o
&minus;' and '&minus;i &minus;' <br>
options of the corresponding commands.</p>

<p style="margin-left:17%; margin-top: 1em">'perf script
&lt;top&minus;script&gt;' to both record the events required
for <br>
&lt;top&minus;script&gt; and to run the
&lt;top&minus;script&gt; using 'live&minus;mode' <br>
i.e. without writing anything to disk.
&lt;top&minus;script&gt; is the name <br>
displayed in the output of 'perf script &minus;&minus;list'
i.e. the actual <br>
script name minus any language extension; a
&lt;top&minus;script&gt; is defined <br>
as any script name ending with the string 'top'.</p>


<p style="margin-left:17%; margin-top: 1em">[&lt;record&minus;options&gt;]
can be passed to the record steps of 'perf script <br>
record' and 'live&minus;mode' variants; this isn't possible
however for <br>
&lt;top&minus;script&gt; 'live&minus;mode' or 'perf script
report' variants.</p>

<p style="margin-left:17%; margin-top: 1em">See the 'SEE
ALSO' section for links to language&minus;specific <br>
information on how to write and run your own trace
scripts.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&lt;command&gt;...</p>

<p style="margin-left:17%;">Any command you can specify in
a shell.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;D,
&minus;&minus;dump&minus;raw&minus;script=</p>

<p style="margin-left:17%;">Display verbose dump of the
trace data.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;L,
&minus;&minus;Latency=</p>

<p style="margin-left:17%;">Show latency attributes
(irqs/preemption disabled, etc).</p>

<p style="margin-left:11%; margin-top: 1em">&minus;l,
&minus;&minus;list=</p>

<p style="margin-left:17%;">Display a list of available
trace scripts.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;s
[<i>lang</i>], &minus;&minus;script=</p>

<p style="margin-left:17%;">Process trace data with the
given script ([lang]:script[.ext]). If the string
<i>lang</i> is specified in place of a script name, a list
of supported languages will be displayed instead.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;g,
&minus;&minus;gen&minus;script=</p>

<p style="margin-left:17%;">Generate
perf&minus;script.[ext] starter script for given language,
using current perf.data.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;a</p>

<p style="margin-left:17%;">Force system&minus;wide
collection. Scripts run without a &lt;command&gt; normally
use &minus;a by default, while scripts run with a
&lt;command&gt; normally don&rsquo;t &minus; this option
allows the latter to be run in system&minus;wide mode.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;i,
&minus;&minus;input=</p>

<p style="margin-left:17%;">Input file name. (default:
perf.data unless stdin is a fifo)</p>

<p style="margin-left:11%; margin-top: 1em">&minus;d,
&minus;&minus;debug&minus;mode</p>

<p style="margin-left:17%;">Do various checks like samples
ordering and lost events.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;f,
&minus;&minus;fields</p>

<p style="margin-left:17%;">Comma separated list of fields
to print. Options are: comm, tid, pid, time, cpu, event,
trace, ip, sym, dso, addr, symoff. Field list can be
prepended with the type, trace, sw or hw, to indicate to
which event type the field list applies. e.g., &minus;f
sw:comm,tid,time,ip,sym and &minus;f
trace:time,cpu,trace</p>

<p style="margin-left:23%; margin-top: 1em">perf script
&minus;f &lt;fields&gt;</p>

<p style="margin-left:23%; margin-top: 1em">is equivalent
to:</p>

<p style="margin-left:23%; margin-top: 1em">perf script
&minus;f trace:&lt;fields&gt; &minus;f sw:&lt;fields&gt;
&minus;f hw:&lt;fields&gt;</p>

<p style="margin-left:23%; margin-top: 1em">i.e., the
specified fields apply to all event types if the type string
<br>
is not given.</p>

<p style="margin-left:23%; margin-top: 1em">The arguments
are processed in the order received. A later usage can <br>
reset a prior request. e.g.:</p>

<p style="margin-left:23%; margin-top: 1em">&minus;f trace:
&minus;f comm,tid,time,ip,sym</p>

<p style="margin-left:23%; margin-top: 1em">The first
&minus;f suppresses trace events (field list is
&quot;&quot;), but then the <br>
second invocation sets the fields to comm,tid,time,ip,sym.
In this case a <br>
warning is given to the user:</p>


<p style="margin-left:23%; margin-top: 1em">&quot;Overriding
previous field request for all events.&quot;</p>

<p style="margin-left:23%; margin-top: 1em">Alternativey,
consider the order:</p>

<p style="margin-left:23%; margin-top: 1em">&minus;f
comm,tid,time,ip,sym &minus;f trace:</p>

<p style="margin-left:23%; margin-top: 1em">The first
&minus;f sets the fields for all events and the second
&minus;f <br>
suppresses trace events. The user is given a warning message
about <br>
the override, and the result of the above is that only S/W
and H/W <br>
events are displayed with the given fields.</p>

<p style="margin-left:23%; margin-top: 1em">For the
'wildcard' option if a user selected field is invalid for an
<br>
event type, a message is displayed to the user that the
option is <br>
ignored for that type. For example:</p>

<p style="margin-left:23%; margin-top: 1em">$ perf script
&minus;f comm,tid,trace <br>
'trace' not valid for hardware events. Ignoring. <br>
'trace' not valid for software events. Ignoring.</p>

<p style="margin-left:23%; margin-top: 1em">Alternatively,
if the type is given an invalid field is specified it <br>
is an error. For example:</p>

<p style="margin-left:23%; margin-top: 1em">perf script
&minus;v &minus;f sw:comm,tid,trace <br>
'trace' not valid for software events.</p>

<p style="margin-left:23%; margin-top: 1em">At this point
usage is displayed, and perf&minus;script exits.</p>

<p style="margin-left:23%; margin-top: 1em">Finally, a user
may not set fields to none for all event types. <br>
i.e., &minus;f &quot;&quot; is not allowed.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;k,
&minus;&minus;vmlinux=&lt;file&gt;</p>

<p style="margin-left:17%;">vmlinux pathname</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;kallsyms=&lt;file&gt;</p>

<p style="margin-left:17%;">kallsyms pathname</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;symfs=&lt;directory&gt;</p>

<p style="margin-left:17%;">Look for files with symbols
relative to this directory.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;G,
&minus;&minus;hide&minus;call&minus;graph</p>

<p style="margin-left:17%;">When printing symbols do not
display call chain.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;C,
&minus;&minus;cpu</p>

<p style="margin-left:17%;">Only report samples for the
list of CPUs provided. Multiple CPUs can be provided as a
comma&minus;separated list with no space: 0,1. Ranges of
CPUs are specified with &minus;: 0&minus;2. Default is to
report samples on all CPUs.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;c,
&minus;&minus;comms=</p>

<p style="margin-left:17%;">Only display events for these
comms. CSV that understands
<b><font color="#0000FF">file://filename</font></b>
<font color="#000000">entries.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;I,
&minus;&minus;show&minus;info</font></p>

<p style="margin-left:17%;"><font color="#000000">Display
extended information about the perf.data file. This adds
information which may be very large and thus may clutter the
display. It currently includes: cpu and numa topology of the
host system. It can only be used with the perf script report
mode.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">&minus;&minus;show&minus;kernel&minus;path</font></p>

<p style="margin-left:17%;"><font color="#000000">Try to
resolve the path of [kernel.kallsyms]</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>perf-record</b>(1),
<b>perf-script-perl</b>(1),
<b>perf-script-python</b>(1)</font></p>
<hr>
</body>
</html>
