<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:00:35 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>isdnrep</title>

</head>
<body>

<h1 align="center">isdnrep</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#HTML USE">HTML USE</a><br>
<a href="#EXAMPLE OUTPUT">EXAMPLE OUTPUT</a><br>
<a href="#TIME FORMAT">TIME FORMAT</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">isdnrep &minus;
report ISDN activity</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Isdnrep reads
the isdnlog log files, generates reports, does statistics,
and other things. It can also generate HTML output for use
with a web server.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;V</b></p></td>
<td width="8%"></td>
<td width="52%">


<p style="margin-top: 1em">show version information and
exit.</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;a all</b></p>

<p style="margin-left:22%;">Show all connections
registered. If this option is not given, show only the
connections made today.</p>

<p style="margin-left:11%;"><b>&minus;S Summary</b></p>

<p style="margin-left:22%;">Show a summary (no individual
calls) for selected date range. If this option is given
twice, the summaries per day are hidden too. Don&rsquo;t use
with <b>&minus;h</b></p>

<p style="margin-left:11%;"><b>&minus;h no header</b></p>

<p style="margin-left:22%;">There will be no header for
each day, nor will the summary at the end of each day and at
the end of the report be generated. This is useful if the
output is to be processed by another program.</p>

<p style="margin-left:22%; margin-top: 1em">This option
doesn&rsquo;t work if the <b>&minus;wX</b> is also
given.</p>

<p style="margin-left:11%;"><b>&minus;n numbers</b></p>

<p style="margin-left:22%;">Display numbers instead of the
aliases for those numbers.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;fFILE</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The file from which to generate the report. This is
usually /var/log/isdn.log, or whatever is configured in
/etc/isdn/isdn.conf as <b>LOGFILE = .</b> The -f option will
override the setting in /etc/isdn/isdn.conf.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;t time span
time=&quot;time span&quot;</b></p>

<p style="margin-left:22%;">With this option a specific
time span covered by the log file can be displayed, e.g. all
calls in November 1995, or on January 3rd 1996 between 03:00
and 09:45.</p>

<p style="margin-left:22%; margin-top: 1em">The format in
which times are given is described below. The time span has
the following syntax:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="13%">


<p>time-time</p></td>
<td width="2%"></td>
<td width="63%">


<p>display from begin time up to end time</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="13%">


<p>time-</p></td>
<td width="2%"></td>
<td width="63%">


<p>display from given time up to &quot;now&quot;</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="13%">


<p>-time</p></td>
<td width="2%"></td>
<td width="63%">


<p>display from beginning of log file up to given time</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="13%">


<p>time</p></td>
<td width="2%"></td>
<td width="63%">


<p>display the given month, day, hour, ...</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;d -time
delete=&quot;time&quot;</b></p>

<p style="margin-left:22%;">Delete entries from the log
file up to (but not including) the specified time. The
format is the same as for the -t option. The minus before
the time <b>must</b> be given! It is not possible to define
begin and end times; entries are always deleted from the
beginning up to the time given.</p>


<p style="margin-left:22%; margin-top: 1em"><b>Warning!</b>
Entries are <b>really</b> deleted from the file. Careless
use can result in all entries being deleted, e.g. with
&quot;isdnrep -d -&quot;.</p>

<p style="margin-left:11%;"><b>&minus;E print
Errors</b></p>

<p style="margin-left:22%;">Display all connections and
connection attempts. Without this option, only successful
connections are displayed.</p>

<p style="margin-left:11%;"><b>&minus;v verbose</b></p>

<p style="margin-left:22%;">Display warnings on
start-up.</p>

<p style="margin-left:11%;"><b>&minus;c ignore default
options</b></p>

<p style="margin-left:22%;">Do not append the
&quot;REPOPTIONS&quot; setting from /etc/isdn/isdn.conf to
the command line.</p>

<p style="margin-left:11%;"><b>&minus;p
[n][m]&rsquo;number&rsquo;[,[m]&rsquo;number&rsquo;...]
phonenumber</b></p>

<p style="margin-left:22%;">Display only selected phone
numbers.</p>


<p style="margin-left:22%; margin-top: 1em">&quot;number&quot;
is specified in the same format as in configuration files
(see isdn.conf(5)). E.g. wildcards can be used.</p>

<p style="margin-left:22%; margin-top: 1em">If the flag
&rsquo;m&rsquo; is given, the corresponding MSN is meant.
E.g.: &quot;m2&quot; means MSN#2. If &quot;m0&quot; is
given, all numbers are to be displayed.</p>

<p style="margin-left:22%; margin-top: 1em">If the flag
&rsquo;n&rsquo; is given, the given number is <b>not</b> to
be displayed.</p>

<p style="margin-left:11%;"><b>&minus;U
[_][.]&rsquo;number&rsquo; default source number</b></p>

<p style="margin-left:22%;">Use &rsquo;number&rsquo; as
source number for outgoing calls with an unknown source
number (&quot;?&quot;). &rsquo;.&rsquo; is replaced by
country and area code from isdn.conf.</p>

<p style="margin-left:22%; margin-top: 1em">With
&rsquo;_&rsquo; the default source number is used internally
(e.g. for fetching the right zone names from the ratefile)
but it is not displayed.</p>

<p style="margin-left:11%;"><b>&minus;i incoming</b></p>

<p style="margin-left:22%;">Only incoming connections are
displayed.</p>

<p style="margin-left:11%;"><b>&minus;o outgoing</b></p>

<p style="margin-left:22%;">Only outgoing connections are
displayed.</p>

<p style="margin-left:11%;"><b>&minus;xX include/exclude
calls</b></p>

<p style="margin-left:22%;">Select calls by day and/or
hour. The following selections are possible and can
specified in any combination and quantity using <b>:</b> as
separator: <br>
d<i>daylist</i></p>

<p style="margin-left:32%;">only days matching
<i>daylist</i></p>

<p style="margin-left:22%;">D<i>daylist</i></p>

<p style="margin-left:32%;">all days not matching
<i>daylist</i></p>

<p style="margin-left:22%;">h<i>timelist</i></p>

<p style="margin-left:32%;">only hours matching
<i>timelist</i></p>

<p style="margin-left:22%;">H<i>timelist</i></p>

<p style="margin-left:32%;">all hours not matching
<i>timelist</i></p>

<p style="margin-left:11%; margin-top: 1em"><i>daylist</i>
and <i>timelist</i> have the same syntax as described in
<i>rate-files(5)</i>. If a day or an hour is included and
excluded it will be excluded.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>


<p style="margin-left:22%; margin-top: 1em">-xd2-4:DH:h9-17:H12-15</p>

<p style="margin-left:11%; margin-top: 1em">This will
display all calls on Tuesdays, Wednesdays, or Thursdays that
are not holidays with a start time between 09:00 and 12:00
or 15:00 and 17:00. <b><br>
&minus;u unknown caller</b></p>

<p style="margin-left:22%;">At the end of the report, all
numbers not aliased in callerid.conf or ~/.isdn are
displayed. This option is unavailable when HTML output is
requested.</p>

<p style="margin-left:11%;"><b>&minus;LX summary
lists</b></p>

<p style="margin-left:22%;">Select the summaries in the
footer by any combination of the following letters:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>i,I</p></td>
<td width="6%"></td>
<td width="68%">


<p>foreign numbers of incoming calls</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>o,O</p></td>
<td width="6%"></td>
<td width="68%">


<p>foreign numbers of outgoing calls</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>c,C</p></td>
<td width="6%"></td>
<td width="68%">


<p>foreign numbers of all calls</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>z,Z</p></td>
<td width="6%"></td>
<td width="68%">


<p>zones of outgoing calls</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>p,P</p></td>
<td width="6%"></td>
<td width="68%">


<p>providers of outgoing calls</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>m,M</p></td>
<td width="6%"></td>
<td width="68%">


<p>MSNs (own subscriber numbers) of outgoing calls</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Upper case
letters deselect, lower case letters select a summary. With
at least one lower case letter, only the selected summaries
are shown, as long as they are not also deselected. -LiI for
example will show no summary at all. Per default all
summaries are displayed. <b><br>
&minus;rPROV recompute</b></p>

<p style="margin-left:22%;">Recompute the connection fees
with the current ratefile instead of showing the amounts
stored in the logfile as usual. The provider <b>PROV</b> for
recomputation is selected in one of the following ways:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>&minus;</p></td>
<td width="3%"></td>
<td width="63%">


<p>Use the logged provider.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>pNUM</p></td>
<td width="3%"></td>
<td width="63%">


<p>Use provider with Pnum NUM (according to P: tag in
ratefile). The provider variant is taken from rate.conf
where the provider must be enabled.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>pNUM_VAR</p></td>
<td width="3%"></td>
<td width="63%">


<p>Use provider with Pnum NUM and variant VAR (according to
P:NUM,VAR in ratefile). No requirements for rate.conf.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>vVBN</p></td>
<td width="3%"></td>
<td width="63%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>vVBN_VAR</p></td>
<td width="3%"></td>
<td width="63%">


<p>Similar to pNUM[_VAR] but the provider is selected via
VBN (B: tag in ratefile) instead of Pnum.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>b</p></td>
<td width="3%"></td>
<td width="63%">


<p>Use the cheapest of all booked providers. The provider
selection is done per call. Booked providers are those,
which are enabled in rate.conf</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>B</p></td>
<td width="3%"></td>
<td width="63%">


<p>Like b but allow all providers, not only the booked.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;m</b>[<b>*</b>|<b>/</b>]<i>number</i>
<b>modify call costs</b></p>

<p style="margin-left:22%;">Multiply (*) or divide (/) the
stored or recalculated call costs by number before
displaying them. If neither * nor / is given, multiply.</p>

<p style="margin-left:11%;"><b>&minus;wX WWW</b></p>

<p style="margin-left:22%;">isdnrep can give its output in
HTML format; this is switched on with this option. Two modes
are possible:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>0</p></td>
<td width="9%"></td>
<td width="68%">


<p>The HTML header is suppressed. Useful if the output is
to be included into an existing page.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="68%">


<p>A complete HTML page is generated.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;sX format
string</b></p>

<p style="margin-left:22%;">The output generated by isdnrep
can be modified by specifying the format of the line
generated for each connection. The syntax is similar to that
used by printf. The following parameters are possible (the
<b>x</b> where given means that a width for the field, also
known as the precision, must be given):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%X</p></td>
<td width="2%"></td>
<td width="72%">


<p>time without date, e.g. 23:54:06</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%x</p></td>
<td width="2%"></td>
<td width="72%">


<p>the date, e.g. 25/07/97</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%y</p></td>
<td width="2%"></td>
<td width="72%">


<p>date without year, e.g. Sun May 04</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%Y</p></td>
<td width="2%"></td>
<td width="72%">


<p>year, in four digits, e.g. 1997</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%D</p></td>
<td width="2%"></td>
<td width="72%">


<p>duration of connection, e.g. 00:03:34</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>H</p></td>
<td width="2%"></td>
<td width="72%">


<p>the local MSN; if an alias can be found, that will be
displayed instead</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>h</p></td>
<td width="2%"></td>
<td width="72%">


<p>the local MSN, only as a number; no aliases will be
substituted</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>F</p></td>
<td width="2%"></td>
<td width="72%">


<p>the remote number; if an alias can be found, that will
be displayed instead</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>f</p></td>
<td width="2%"></td>
<td width="72%">


<p>the remote number, only as a number; no aliases will be
substituted</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>L</p></td>
<td width="2%"></td>
<td width="72%">


<p>the town corresponding to the local MSN if known; an
empty string otherwise</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>l</p></td>
<td width="2%"></td>
<td width="72%">


<p>the town corresponding to the remote number if known; an
empty string otherwise</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%T</p></td>
<td width="2%"></td>
<td width="72%">


<p>an arrow indicating the direction of the connection
(&quot;-&gt;&quot; outgoing or &quot;&lt;-&quot; incoming);
the local MSN should be displayed on the left side of
this.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%t</p></td>
<td width="2%"></td>
<td width="72%">


<p>an arrow indicating the direction of the connection,
reversed (&quot;&lt;-&quot; outgoing or &quot;-&gt;&quot;
incoming); the local MSN should be displayed on the right
side of this.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>u</p></td>
<td width="2%"></td>
<td width="72%">


<p>the charge units, if known, e.g. 6 EH</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%U</p></td>
<td width="2%"></td>
<td width="72%">


<p>the cost, if known, e.g. 2,28 DM</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%<b>x</b>j</p></td>
<td width="2%"></td>
<td width="72%">


<p>the name of the used provider</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%v</p></td>
<td width="2%"></td>
<td width="72%">


<p>the VBN (carrier selection prefix) of the provider, e.g.
01012</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%V</p></td>
<td width="2%"></td>
<td width="72%">


<p>the VBN and variant of the provider, e.g. 01012_3</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%I</p></td>
<td width="2%"></td>
<td width="72%">


<p>amount of INPUT data</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%O</p></td>
<td width="2%"></td>
<td width="72%">


<p>amount of OUTPUT data</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%P</p></td>
<td width="2%"></td>
<td width="72%">


<p>INPUT throughput (bps)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%p</p></td>
<td width="2%"></td>
<td width="72%">


<p>OUTPUT throughput (bps)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%S</p></td>
<td width="2%"></td>
<td width="72%">


<p>Service Indicator</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>%G</p></td>
<td width="2%"></td>
<td width="72%">


<p>displays a HTTP link to the corresponding fax, when a
fax was received by mgetty. This fax can be displayed by
using the link in a HTTP browser.</p></td></tr>
</table>

<p style="margin-left:28%; margin-top: 1em">This option is
only valid when used with -wx, see below for more
information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">%C</p></td>
<td width="3%"></td>
<td width="72%">


<p style="margin-top: 1em">displays a HTTP link to the
corresponding voice file, when a call was recorded by vbox.
This option is only valid when used with -wx, see below for
more information.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The default
format string for (non-HTML output) is</p>

<p style="margin-left:22%;">&quot; %X %D %15.15H %T
%-15.15F %7u %U %I %O&quot;</p>

<p style="margin-left:11%; margin-top: 1em">With the
following string all the important data is displayed while
keeping the total length to 80:</p>

<p style="margin-left:22%; margin-top: 1em">&quot;%X%D
%10.10H%T%-14.14F%U%I %O&quot;</p>

<p style="margin-left:11%; margin-top: 1em">The above
string is put into isdn.conf at installation as
<b>REPFMTSHORT</b> and can be used with <b>-Fshort.</b></p>

<p style="margin-left:11%; margin-top: 1em">Without showing
the transferred bytes, this string also fits into 80
chars:</p>

<p style="margin-left:22%; margin-top: 1em">&quot; %X %D
%16.16H %T %-25.25F %U&quot;</p>

<p style="margin-left:11%; margin-top: 1em">It is included
as <b>REPFMTNIO. <br>
&minus;FX format</b></p>

<p style="margin-left:22%;">format strings can be specified
in isdn.conf; this option is used to select one of these.
Entries can be defined in the section [ISDNLOG] with names
beginning with &quot;REPFMT&quot;. The string after the -F
option is added to REPFMT to find the correct entry. Case is
not sensitive. E.g.:</p>

<p style="margin-left:22%; margin-top: 1em">REPFMT1 = ... #
-&gt; isdnrep -F1 <br>
REPFMTMYSTRING = ... # -&gt; isdnrep -Fmystring or <br>
isdnrep -F MYSTRING</p>

<h2>HTML USE
<a name="HTML USE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">isdnrep can
generate a HTML page containing links to files generated by
vbox and mgetty (faxes), so that the messages and faxes can
be heard or seen from within a browser. However, a couple of
things need to be configured first.</p>

<p style="margin-left:11%; margin-top: 1em"><i>answering
machine messages</i></p>

<p style="margin-left:11%; margin-top: 1em">The %C can be
used in the isdnrep output format to make a link to a voice
recording file. For this to work, the following entry is
needed in the [ISDNLOG] section in isdn.conf:</p>

<p style="margin-left:11%; margin-top: 1em">VBOXPATH=
/var/spool/vbox/fred/incoming # incoming directory
pathname</p>

<p style="margin-left:11%; margin-top: 1em">Now isdnrep can
find the file correctly. Clicking on this link will cause
the file to be sent. These files are in ZyXEL format; the
browser cannot use these directly. The type is given by
isdnrep as follows:</p>

<p style="margin-left:11%; margin-top: 1em">Content-Type:
application/x-zyxel4</p>

<p style="margin-left:11%; margin-top: 1em">The correct
application (helper) for this has to be configured in the
browser. Alternatively, a conversion program can be
specified to isdnrep which will convert the ZyXEL format.
The pathname of the file to convert is given as a parameter
to the program.</p>

<p style="margin-left:11%; margin-top: 1em">In the
[ISDNLOG] section of isdn.conf an entry as follows specifies
which conversion program to use:</p>

<p style="margin-left:11%; margin-top: 1em">VBOXCMD1 =
/usr/bin/program1</p>

<p style="margin-left:11%; margin-top: 1em">for versions
0.x and 1.x of vbox, and</p>

<p style="margin-left:11%; margin-top: 1em">VBOXCMD2 =
/usr/bin/program2</p>

<p style="margin-left:11%; margin-top: 1em">for versions
2.x of vbox. Both entries can be given, isdnrep recognizes
which version created the recording.</p>

<p style="margin-left:11%; margin-top: 1em">The program
must first output a line with the content-type, followed by
the data itself. To convert the ZyXEL format into a WAV
file, the following script may be used:</p>

<p style="margin-left:22%;">#! /bin/sh <br>
## <br>
## script to play voice messages from vbox-2.0 <br>
## <br>
## WARNING! If the paths are not set correctly, <br>
## netscape may simply crash!</p>


<p style="margin-left:22%; margin-top: 1em">PATH=$PATH:&quot;path
to sox&quot;:&quot;path to pvftools&quot;:&quot;path to
vbox&quot; <br>
FILENAME1=/tmp/voxplay.$$.voc <br>
FILENAME2=/tmp/voxplay.$$.wav <br>
VOLUME=8</p>

<p style="margin-left:22%; margin-top: 1em">vboxtoau &lt;$1
| \ <br>
autopvf | \ <br>
pvfamp $VOLUME | \ <br>
pvfcut 0.20 | \ <br>
pvftovoc &gt; $FILENAME1</p>

<p style="margin-left:22%; margin-top: 1em">sox $FILENAME1
$FILENAME2</p>

<p style="margin-left:22%; margin-top: 1em">echo
Content-Type: audio/x-wav <br>
echo <br>
cat $FILENAME2</p>

<p style="margin-left:22%; margin-top: 1em">rm -f
$FILENAME1 $FILENAME2</p>

<p style="margin-left:11%; margin-top: 1em">The script
above needs the packages sox and pvftools. Additionally, the
browser needs to be told how to handle
&quot;audio/x-wav&quot;. This is done by adding the
following lines to the files listed:</p>

<p style="margin-left:17%;"><b>~/.mime.types</b></p>

<p style="margin-left:23%;">type=audio/x-wav \ <br>
desc=&quot;auWAV Audio&quot; \ <br>
exts=&quot;wav&quot;</p>

<p style="margin-left:17%;"><b>~/.mailcap</b></p>

<p style="margin-left:23%;">audio/x-wav;/usr/bin/auplay
%s</p>

<p style="margin-left:11%; margin-top: 1em">The NAS
(Network Audio System) package may be needed.</p>

<p style="margin-left:11%; margin-top: 1em">Now, when the
browser is started, it will recognize WAV files and start
the corresponding program to handle them. The WAV format has
been chosen as it can also be played from a Windows PC.</p>

<p style="margin-left:11%; margin-top: 1em"><i>faxes
received by mgetty</i></p>

<p style="margin-left:11%; margin-top: 1em">When %G is used
in the isdnrep output format, any faxes received by mgetty
will be accessible via a HTML link, in the same manner as
the answering machine messages.</p>

<p style="margin-left:11%; margin-top: 1em">For the faxes
the following entry in the [ISDNLOG] section in isdn.conf is
needed:</p>

<p style="margin-left:11%; margin-top: 1em">MGETTYPATH =
/var/spool/fax/incoming</p>

<p style="margin-left:11%; margin-top: 1em">WARNING: if
isdnrep doesn&rsquo;t have permission to read the files,
they will not be displayed; there will be no error
message.</p>

<p style="margin-left:11%; margin-top: 1em">When isdnrep
passes these files back to the browser, they have the G3
format. The following header is used to notify the browser
of this:</p>

<p style="margin-left:11%; margin-top: 1em">Content-Type:
application/x-faxg3</p>

<p style="margin-left:11%; margin-top: 1em">As the browser
probably doesn&rsquo;t understand this format, the following
changes to the files listed are needed:</p>

<p style="margin-left:17%;"><b>~/.mime.types</b></p>

<p style="margin-left:23%;">type=application/x-faxg3 \ <br>
desc=&quot;G3-Fax Format&quot; \ <br>
exts=&quot;fax,g3&quot;</p>

<p style="margin-left:17%;"><b>~/.mailcap</b></p>


<p style="margin-left:23%;">pplication/x-faxg3;/usr/X11/bin/g3view
%s</p>

<p style="margin-left:11%; margin-top: 1em">The program
g3view has to be installed for this to work.</p>

<p style="margin-left:11%; margin-top: 1em">If now the link
is clicked on, the browser will automatically start the
external g3view to handle this data.</p>

<p style="margin-left:11%; margin-top: 1em">If you prefer
another format (instead of G3) such as JPEG, the format has
to be converted. The following entry in the [ISDNLOG]
section of isdn.conf takes care of this:</p>

<p style="margin-left:11%; margin-top: 1em">VBOXCMD =
/usr/bin/g3tojpeg # example</p>

<p style="margin-left:11%; margin-top: 1em">The script
g3tojpeg can be something like this:</p>

<p style="margin-left:22%; margin-top: 1em">#! /bin/sh <br>
## <br>
## command to display faxes in a browser <br>
## <br>
## WARNING! If the paths are not set correctly, <br>
## netscape may simply crash!</p>

<p style="margin-left:22%; margin-top: 1em">export
PATH=$PATH:&quot;path to g3topbm&quot;:&quot;path to
convert&quot;</p>

<p style="margin-left:22%; margin-top: 1em">echo
Content-Type: image/jpeg <br>
echo</p>

<p style="margin-left:22%; margin-top: 1em">g3topbm &lt; $1
| convert pbm:- jpeg:-</p>

<p style="margin-left:11%; margin-top: 1em">The packages
ImageMagick and mgetty are needed. Mgetty is probably
already installed if you want to use this feature :-)</p>

<p style="margin-left:11%; margin-top: 1em">The advantage
of the JPEG format is that it can also be displayed by a
browser running on a Windows PC.</p>


<p style="margin-left:11%; margin-top: 1em"><i>summary</i></p>

<p style="margin-left:11%; margin-top: 1em">A suitable
value for REPFMTWWW is</p>

<p style="margin-left:11%; margin-top: 1em">REPFMTWWW =
&quot;%X %D %17.17H %T %-17.17F %-20.20l SI: %S %9u %U %I %O
%G %C&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Netscape 3.0
Gold and Arena have been tested, and both work fine with
isdnrep&rsquo;s HTML output, although Arena&rsquo;s display
is not as colourful as Netscape&rsquo;s.</p>

<p style="margin-left:11%; margin-top: 1em">A known problem
(which is impossible to solve completely) is determining the
relationship between an isdn connection and a fax or vbox
recording. Unfortunately the times for isdnrep, mgetty and
vbox differ. Isdnrep tries to make the best guess, but
it&rsquo;s always possible that e.g. a fax is connected to
the wrong isdn connection.</p>

<h2>EXAMPLE OUTPUT
<a name="EXAMPLE OUTPUT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">With the
default configuration the following output can be generated
on stdout (whitespace slightly edited for clarity):</p>

<p style="margin-left:22%; margin-top: 1em">$ isdnrep -v -t
6/1/96 <br>
I S D N Connection Report - Tue Aug 26 22:21:19 1997</p>

<p style="margin-left:22%; margin-top: 1em">Sat Jan 6 1996
<br>
00:54:19 UNKNOWN -&gt; UNKNOWN No user responding <b>(4)</b>
<br>
[...] <br>
16:33:24 0:03:23 UNKNOWN -&gt; UNKNOWN 7 EH 0,84 DM <br>
17:33:47 UNKNOWN -&gt; UNKNOWN Unallocated
(unassigned)<b>(5)</b> <br>
number <br>
20:02:28 0:02:37 Phone/HDLC &lt;- UNKNOWN <b>(1)</b> <br>
20:09:53 0:07:01 Modem/X.75 -&gt; T-Online 3 EH 0,36 DM
<b>(2)</b> <br>
21:27:56 UNKNOWN -&gt; UNKNOWN User busy <b>(3)</b> <br>
22:09:41 0:29:36 UNKNOWN -&gt; UNKNOWN 43 EH 9,89 DM* <br>

======================================================================
<br>
1 IN= 0:02:37, 13 OUT= 3:40:14, 3 failed 210 EH 25,20 DM
<b><br>
(6)</b>^^^^^^^^^^^^ <b>(7)</b>^^^^^^^^^^^^^
<b>(8)</b>^^^^^^^ <b>(9)</b>^^^^^^ <b>(10)</b>^^^^^^^^</p>

<p style="margin-left:22%; margin-top: 1em">DIALOUT Summary
for Sat Jan 6 1996 <b>(11)</b> <br>
-----------------------------------------------------------
<br>
T-Online 1 call(s) 0:07:01 3 EH 0,36 DM <br>
UNKNOWN 11 call(s) 0:17:00 20 EH 2,40 DM</p>

<p style="margin-left:22%; margin-top: 1em">DIALIN Summary
for Sat Jan 6 1996 <b>(12)</b> <br>
-----------------------------------------------------------
<br>
UNKNOWN 1 call(s) 0:02:37</p>

<p style="margin-left:22%; margin-top: 1em">Zone 1 : City 2
call(s) 2:23:13 50 EH 6,00 DM <b>(13)</b> <br>
Zone x : UNKNOWN 11 call(s) 0:17:00 20 EH 2,40 DM</p>


<p style="margin-left:11%; margin-top: 1em"><b>Notes</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(1)</p></td>
<td width="2%"></td>
<td width="80%">


<p>&quot;xxx &lt;- xxx&quot; was an incoming call, so
doesn&rsquo;t cost anything</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(2)</p></td>
<td width="2%"></td>
<td width="80%">


<p>&quot;xxx -&gt; xxx&quot; was an outgoing call lasting
203 seconds, so for City zone, off-peak time (Saturday), 3
charge units = DM 0,36</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(3)</p></td>
<td width="2%"></td>
<td width="80%">


<p>there was no connection, as the called party was
busy</p> </td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(4)</p></td>
<td width="2%"></td>
<td width="80%">


<p>there was no connection, as the called party
didn&rsquo;t pick up the phone</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(5)</p></td>
<td width="2%"></td>
<td width="80%">


<p>&quot;the number you have dialed is not connected. Hang
up and dial again. ...&quot;</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(6)</p></td>
<td width="2%"></td>
<td width="80%">


<p>total time for incoming calls</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(7)</p></td>
<td width="2%"></td>
<td width="80%">


<p>total time for outgoing calls</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(8)</p></td>
<td width="2%"></td>
<td width="80%">


<p>3 calls failed; busy (3), no answer (4) and error in
dialing (5)</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(9)</p></td>
<td width="2%"></td>
<td width="80%">


<p>total charge units incurred for one day</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(10)</p></td>
<td width="2%"></td>
<td width="80%">


<p>total costs incurred for one day</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(11)</p></td>
<td width="2%"></td>
<td width="80%">


<p>outgoing calls grouped per number</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(12)</p></td>
<td width="2%"></td>
<td width="80%">


<p>incoming calls grouped per number</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="6%">


<p>(13)</p></td>
<td width="2%"></td>
<td width="80%">


<p>outgoing and incoming calls grouped per tariff zone</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If the charge
units are marked with &quot;*&quot;, the PTT switch did not
give charge info; these are the number of units guestimated
by isdnrep.</p>

<h2>TIME FORMAT
<a name="TIME FORMAT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For the -d and
-t options, the time is specified in the following formats:
<br>
[DD/][M]M/[[YY]YY]</p>

<p style="margin-left:22%;">specifies the month or day.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p>7/</p></td>
<td width="5%"></td>
<td width="63%">


<p>July of the current year</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p>8/1996</p></td>
<td width="5%"></td>
<td width="63%">


<p>August 1996</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p>29/6/05</p></td>
<td width="5%"></td>
<td width="63%">


<p>June 29th 2005</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p>6/6/</p></td>
<td width="5%"></td>
<td width="63%">


<p>error, is not June 6th of the current year; it&rsquo;s
June 1906</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="21%">


<p>[D]D</p></td>
<td width="5%"></td>
<td width="63%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">day of current
month</p>

<p style="margin-left:11%;">[D]D.[M]M.[[[CC]Y]Y]</p>

<p style="margin-left:22%;">specifies a day. If century or
year and century are missing, they will be taken from the
current date.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>23.5.</p></td>
<td width="3%"></td>
<td width="43%">


<p>May 23rd in the current year</p></td>
<td width="20%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="12%">


<p>19.01.38</p></td>
<td width="3%"></td>
<td width="43%">


<p>January 19th 2038</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:22%;">16.10.1998</p>

<p style="margin-left:37%;">October 16th 1998</p>

<p style="margin-left:11%;">[MM]DD[hhmm[[CC]YY][.ss]]</p>

<p style="margin-left:22%;">specifies an exact time.
Unspecified parts are defined as 0 when interpreted as a
begin time, and 23 or 59 when interpreted as an end
time.</p>

<p style="margin-left:22%; margin-top: 1em">If a year is to
be specified, the hours and minutes <b>must</b> also be
specified.</p>

<p style="margin-left:22%; margin-top: 1em">The format is
copied from the date command.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>0107</p></td>
<td width="4%"></td>
<td width="48%">


<p>January 1st in the current year</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:22%;">0107173196.25</p>

<p style="margin-left:32%;">January 7th 1996 17:31:25</p>

<p style="margin-left:22%;">010717311996</p>

<p style="margin-left:32%;">January 7th 1996 17:31:00 (or
17:31:59)</p>

<p style="margin-left:22%;">12141995</p>

<p style="margin-left:32%;">error: <b>not</b> December 12th
1995, but December 12th of the current year at 19:95, so
it&rsquo;s garbage.</p>

<p style="margin-left:22%; margin-top: 1em">Examples of
time spans and their meaning:</p>

<p style="margin-left:32%;">6/95-081214381996.25</p>

<p style="margin-left:43%;">all entries between June 1st
1995 00:00:00 and August 12th 14:38:25</p>

<p style="margin-left:32%;">0912030495.20-12/95</p>

<p style="margin-left:43%;">all entries between September
12th 1995 03:04:20 and December 31st 1995 23:59:59</p>

<p style="margin-left:32%;">09.06.2006-9/7/6</p>

<p style="margin-left:43%;">all entries between June 6th
2006 00:00:00 and July 7th 2006 00:00:00</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p>7/95</p></td>
<td width="5%"></td>
<td width="57%">


<p>all entries between July 1st 1995 00:00:00 and July 31st
1995 23:59:59</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p>0908</p></td>
<td width="5%"></td>
<td width="57%">


<p>all entries between September 8th in the current year
00:00:00 and September 8th in the current year 23:59:59</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p>3</p></td>
<td width="5%"></td>
<td width="57%">


<p>third day of the current month</p></td></tr>
</table>


<p style="margin-left:11%;">[CC]YY&minus;MM&minus;DDThh:mm:ss</p>

<p style="margin-left:22%;">specifies a year, a moment, or
something between. Each separator &acute;-&rsquo;,
&rsquo;T&rsquo;, and &rsquo;:&rsquo; can be omitted or not.
If the first &rsquo;-&rsquo; is missing, the century must be
given.</p>

<p style="margin-left:22%; margin-top: 1em">This notation
cannot be combined with the above notations. Time spans are
noted with &rsquo;--&rsquo; instead of &rsquo;-&rsquo;. If
no &rsquo;--&rsquo; is given, &acute;i&rsquo; must be noted
after the &minus;t option.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p>i2002</p></td>
<td width="3%"></td>
<td width="68%">


<p>the entire year 2002 from January 1st 00:00:00 to
December 31st 23:59:59</p></td></tr>
</table>

<p style="margin-left:22%;">i200306</p>

<p style="margin-left:32%;">the entire month June 2003</p>

<p style="margin-left:22%;">200308--200309</p>

<p style="margin-left:32%;">August and September 2003</p>

<p style="margin-left:22%;">2003-10-03T17--</p>

<p style="margin-left:32%;">all entries after October 3rd
2003 16:59:59</p>


<p style="margin-left:22%;">2003-08-27T11:51:25--20030827115128</p>

<p style="margin-left:32%;">4 seconds at August 27th
2003</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>200306</p></td>
<td width="1%"></td>
<td width="51%">


<p>error: neither &rsquo;i&rsquo; nor &rsquo;--&rsquo;
given</p> </td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:22%;">2003-1-4</p>

<p style="margin-left:32%;">error: leading zeros (at month
and day) must not omitted</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&quot;y&quot;</p></td>
<td width="4%"></td>
<td width="78%">


<p>yesterday,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&quot;yy&quot;</p></td>
<td width="4%"></td>
<td width="78%">


<p>the day before yesterday,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&quot;yyy&quot;</p></td>
<td width="4%"></td>
<td width="78%">


<p>three days ago and so on. For time spans these can also
be used in conjunction with the notations explained
above.</p> </td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/var/log/isdn.log</b>
or <b>/var/lib/isdn/calls</b></p>

<p style="margin-left:22%;">isdnlog log file with
information about all calls.</p>

<p style="margin-left:11%;"><b>/etc/isdn/isdn.conf</b></p>

<p style="margin-left:22%;">general configuration</p>


<p style="margin-left:11%;"><b>/etc/isdn/callerid.conf</b></p>

<p style="margin-left:22%;">aliases for telephone
numbers</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>isdnlog(5)
isdnlog(8) isdn.conf(5)</b></p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page was adapted from isdnlog/README by Paul Slootman
&lt;paul@isdn4linux.de&gt;, for Debian GNU/Linux and
isdn4linux.</p>
<hr>
</body>
</html>
