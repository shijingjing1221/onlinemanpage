<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:48:40 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ZSHALLZSHROADMAPZSHMISCZSHEXPNZSHPARAMZSHOPTIONSZSHBUILTINSZSHZLEZSHCOMPWIDZSHCOMPSYSZSHCOMPCTLZSHMODULESZSHCALSYSZSHTCPSYSZSHZFTPSYSZSHCONTRIBZSHALL</title>

</head>
<body>

<h1 align="center">ZSHALLZSHROADMAPZSHMISCZSHEXPNZSHPARAMZSHOPTIONSZSHBUILTINSZSHZLEZSHCOMPWIDZSHCOMPSYSZSHCOMPCTLZSHMODULESZSHCALSYSZSHTCPSYSZSHZFTPSYSZSHCONTRIBZSHALL</h1>

<a href="#NAME">NAME</a><br>
<a href="#OVERVIEW">OVERVIEW</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#AVAILABILITY">AVAILABILITY</a><br>
<a href="#MAILING LISTS">MAILING LISTS</a><br>
<a href="#THE ZSH FAQ">THE ZSH FAQ</a><br>
<a href="#THE ZSH WEB PAGE">THE ZSH WEB PAGE</a><br>
<a href="#THE ZSH USERGUIDE">THE ZSH USERGUIDE</a><br>
<a href="#THE ZSH WIKI">THE ZSH WIKI</a><br>
<a href="#INVOCATION">INVOCATION</a><br>
<a href="#COMPATIBILITY">COMPATIBILITY</a><br>
<a href="#RESTRICTED SHELL">RESTRICTED SHELL</a><br>
<a href="#STARTUP/SHUTDOWN FILES">STARTUP/SHUTDOWN FILES</a><br>
<a href="#NAME">NAME</a><br>
<a href="#WHEN THE SHELL STARTS">WHEN THE SHELL STARTS</a><br>
<a href="#INTERACTIVE USE">INTERACTIVE USE</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#PATTERN MATCHING">PATTERN MATCHING</a><br>
<a href="#GENERAL COMMENTS ON SYNTAX">GENERAL COMMENTS ON SYNTAX</a><br>
<a href="#PROGRAMMING">PROGRAMMING</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SIMPLE COMMANDS &amp; PIPELINES">SIMPLE COMMANDS &amp; PIPELINES</a><br>
<a href="#PRECOMMAND MODIFIERS">PRECOMMAND MODIFIERS</a><br>
<a href="#COMPLEX COMMANDS">COMPLEX COMMANDS</a><br>
<a href="#ALTERNATE FORMS FOR COMPLEX COMMANDS">ALTERNATE FORMS FOR COMPLEX COMMANDS</a><br>
<a href="#RESERVED WORDS">RESERVED WORDS</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#COMMENTS">COMMENTS</a><br>
<a href="#ALIASING">ALIASING</a><br>
<a href="#QUOTING">QUOTING</a><br>
<a href="#REDIRECTION">REDIRECTION</a><br>
<a href="#OPENING FILE DESCRIPTORS USING PARAMETERS">OPENING FILE DESCRIPTORS USING PARAMETERS</a><br>
<a href="#MULTIOS">MULTIOS</a><br>
<a href="#REDIRECTIONS WITH NO COMMAND">REDIRECTIONS WITH NO COMMAND</a><br>
<a href="#COMMAND EXECUTION">COMMAND EXECUTION</a><br>
<a href="#FUNCTIONS">FUNCTIONS</a><br>
<a href="#AUTOLOADING FUNCTIONS">AUTOLOADING FUNCTIONS</a><br>
<a href="#ANONYMOUS FUNCTIONS">ANONYMOUS FUNCTIONS</a><br>
<a href="#SPECIAL FUNCTIONS">SPECIAL FUNCTIONS</a><br>
<a href="#JOBS">JOBS</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#ARITHMETIC EVALUATION">ARITHMETIC EVALUATION</a><br>
<a href="#CONDITIONAL EXPRESSIONS">CONDITIONAL EXPRESSIONS</a><br>
<a href="#EXPANSION OF PROMPT SEQUENCES">EXPANSION OF PROMPT SEQUENCES</a><br>
<a href="#SIMPLE PROMPT ESCAPES">SIMPLE PROMPT ESCAPES</a><br>
<a href="#CONDITIONAL SUBSTRINGS IN PROMPTS">CONDITIONAL SUBSTRINGS IN PROMPTS</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#HISTORY EXPANSION">HISTORY EXPANSION</a><br>
<a href="#PROCESS SUBSTITUTION">PROCESS SUBSTITUTION</a><br>
<a href="#PARAMETER EXPANSION">PARAMETER EXPANSION</a><br>
<a href="#COMMAND SUBSTITUTION">COMMAND SUBSTITUTION</a><br>
<a href="#ARITHMETIC EXPANSION">ARITHMETIC EXPANSION</a><br>
<a href="#BRACE EXPANSION">BRACE EXPANSION</a><br>
<a href="#FILENAME EXPANSION">FILENAME EXPANSION</a><br>
<a href="#FILENAME GENERATION">FILENAME GENERATION</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#ARRAY PARAMETERS">ARRAY PARAMETERS</a><br>
<a href="#POSITIONAL PARAMETERS">POSITIONAL PARAMETERS</a><br>
<a href="#LOCAL PARAMETERS">LOCAL PARAMETERS</a><br>
<a href="#PARAMETERS SET BY THE SHELL">PARAMETERS SET BY THE SHELL</a><br>
<a href="#PARAMETERS USED BY THE SHELL">PARAMETERS USED BY THE SHELL</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SPECIFYING OPTIONS">SPECIFYING OPTIONS</a><br>
<a href="#DESCRIPTION OF OPTIONS">DESCRIPTION OF OPTIONS</a><br>
<a href="#OPTION ALIASES">OPTION ALIASES</a><br>
<a href="#SINGLE LETTER OPTIONS">SINGLE LETTER OPTIONS</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SHELL BUILTIN COMMANDS">SHELL BUILTIN COMMANDS</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#KEYMAPS">KEYMAPS</a><br>
<a href="#ZLE BUILTINS">ZLE BUILTINS</a><br>
<a href="#WIDGETS">WIDGETS</a><br>
<a href="#USER&minus;DEFINED WIDGETS">USER&minus;DEFINED WIDGETS</a><br>
<a href="#STANDARD WIDGETS">STANDARD WIDGETS</a><br>
<a href="#CHARACTER HIGHLIGHTING">CHARACTER HIGHLIGHTING</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMPLETION SPECIAL PARAMETERS">COMPLETION SPECIAL PARAMETERS</a><br>
<a href="#COMPLETION BUILTIN COMMANDS">COMPLETION BUILTIN COMMANDS</a><br>
<a href="#COMPLETION CONDITION CODES">COMPLETION CONDITION CODES</a><br>
<a href="#COMPLETION MATCHING CONTROL">COMPLETION MATCHING CONTROL</a><br>
<a href="#COMPLETION WIDGET EXAMPLE">COMPLETION WIDGET EXAMPLE</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#INITIALIZATION">INITIALIZATION</a><br>
<a href="#COMPLETION SYSTEM CONFIGURATION">COMPLETION SYSTEM CONFIGURATION</a><br>
<a href="#CONTROL FUNCTIONS">CONTROL FUNCTIONS</a><br>
<a href="#BINDABLE COMMANDS">BINDABLE COMMANDS</a><br>
<a href="#UTILITY FUNCTIONS">UTILITY FUNCTIONS</a><br>
<a href="#COMPLETION DIRECTORIES">COMPLETION DIRECTORIES</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMAND FLAGS">COMMAND FLAGS</a><br>
<a href="#OPTION FLAGS">OPTION FLAGS</a><br>
<a href="#ALTERNATIVE COMPLETION">ALTERNATIVE COMPLETION</a><br>
<a href="#EXTENDED COMPLETION">EXTENDED COMPLETION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#THE ZSH/ATTR MODULE">THE ZSH/ATTR MODULE</a><br>
<a href="#THE ZSH/CAP MODULE">THE ZSH/CAP MODULE</a><br>
<a href="#THE ZSH/CLONE MODULE">THE ZSH/CLONE MODULE</a><br>
<a href="#THE ZSH/COMPCTL MODULE">THE ZSH/COMPCTL MODULE</a><br>
<a href="#THE ZSH/COMPLETE MODULE">THE ZSH/COMPLETE MODULE</a><br>
<a href="#THE ZSH/COMPLIST MODULE">THE ZSH/COMPLIST MODULE</a><br>
<a href="#THE ZSH/COMPUTIL MODULE">THE ZSH/COMPUTIL MODULE</a><br>
<a href="#THE ZSH/CURSES MODULE">THE ZSH/CURSES MODULE</a><br>
<a href="#THE ZSH/DATETIME MODULE">THE ZSH/DATETIME MODULE</a><br>
<a href="#THE ZSH/DELTOCHAR MODULE">THE ZSH/DELTOCHAR MODULE</a><br>
<a href="#THE ZSH/EXAMPLE MODULE">THE ZSH/EXAMPLE MODULE</a><br>
<a href="#THE ZSH/FILES MODULE">THE ZSH/FILES MODULE</a><br>
<a href="#THE ZSH/LANGINFO MODULE">THE ZSH/LANGINFO MODULE</a><br>
<a href="#THE ZSH/MAPFILE MODULE">THE ZSH/MAPFILE MODULE</a><br>
<a href="#THE ZSH/MATHFUNC MODULE">THE ZSH/MATHFUNC MODULE</a><br>
<a href="#THE ZSH/NEWUSER MODULE">THE ZSH/NEWUSER MODULE</a><br>
<a href="#THE ZSH/PARAMETER MODULE">THE ZSH/PARAMETER MODULE</a><br>
<a href="#THE ZSH/PCRE MODULE">THE ZSH/PCRE MODULE</a><br>
<a href="#THE ZSH/REGEX MODULE">THE ZSH/REGEX MODULE</a><br>
<a href="#THE ZSH/SCHED MODULE">THE ZSH/SCHED MODULE</a><br>
<a href="#THE ZSH/NET/SOCKET MODULE">THE ZSH/NET/SOCKET MODULE</a><br>
<a href="#THE ZSH/STAT MODULE">THE ZSH/STAT MODULE</a><br>
<a href="#THE ZSH/SYSTEM MODULE">THE ZSH/SYSTEM MODULE</a><br>
<a href="#THE ZSH/NET/TCP MODULE">THE ZSH/NET/TCP MODULE</a><br>
<a href="#THE ZSH/TERMCAP MODULE">THE ZSH/TERMCAP MODULE</a><br>
<a href="#THE ZSH/TERMINFO MODULE">THE ZSH/TERMINFO MODULE</a><br>
<a href="#THE ZSH/ZFTP MODULE">THE ZSH/ZFTP MODULE</a><br>
<a href="#THE ZSH/ZLE MODULE">THE ZSH/ZLE MODULE</a><br>
<a href="#THE ZSH/ZLEPARAMETER MODULE">THE ZSH/ZLEPARAMETER MODULE</a><br>
<a href="#THE ZSH/ZPROF MODULE">THE ZSH/ZPROF MODULE</a><br>
<a href="#THE ZSH/ZPTY MODULE">THE ZSH/ZPTY MODULE</a><br>
<a href="#THE ZSH/ZSELECT MODULE">THE ZSH/ZSELECT MODULE</a><br>
<a href="#THE ZSH/ZUTIL MODULE">THE ZSH/ZUTIL MODULE</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#FILE AND DATE FORMATS">FILE AND DATE FORMATS</a><br>
<a href="#USER FUNCTIONS">USER FUNCTIONS</a><br>
<a href="#STYLES">STYLES</a><br>
<a href="#UTILITY FUNCTIONS">UTILITY FUNCTIONS</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#TCP USER FUNCTIONS">TCP USER FUNCTIONS</a><br>
<a href="#TCP USER&minus;DEFINED FUNCTIONS">TCP USER&minus;DEFINED FUNCTIONS</a><br>
<a href="#TCP UTILITY FUNCTIONS">TCP UTILITY FUNCTIONS</a><br>
<a href="#TCP USER PARAMETERS">TCP USER PARAMETERS</a><br>
<a href="#TCP USER&minus;DEFINED PARAMETERS">TCP USER&minus;DEFINED PARAMETERS</a><br>
<a href="#TCP UTILITY PARAMETERS">TCP UTILITY PARAMETERS</a><br>
<a href="#TCP EXAMPLES">TCP EXAMPLES</a><br>
<a href="#TCP BUGS">TCP BUGS</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#INSTALLATION">INSTALLATION</a><br>
<a href="#FUNCTIONS">FUNCTIONS</a><br>
<a href="#MISCELLANEOUS FEATURES">MISCELLANEOUS FEATURES</a><br>
<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#UTILITIES">UTILITIES</a><br>
<a href="#REMEMBERING RECENT DIRECTORIES">REMEMBERING RECENT DIRECTORIES</a><br>
<a href="#GATHERING INFORMATION FROM VERSION CONTROL SYSTEMS">GATHERING INFORMATION FROM VERSION CONTROL SYSTEMS</a><br>
<a href="#PROMPT THEMES">PROMPT THEMES</a><br>
<a href="#ZLE FUNCTIONS">ZLE FUNCTIONS</a><br>
<a href="#EXCEPTION HANDLING">EXCEPTION HANDLING</a><br>
<a href="#MIME FUNCTIONS">MIME FUNCTIONS</a><br>
<a href="#MATHEMATICAL FUNCTIONS">MATHEMATICAL FUNCTIONS</a><br>
<a href="#USER CONFIGURATION FUNCTIONS">USER CONFIGURATION FUNCTIONS</a><br>
<a href="#OTHER FUNCTIONS">OTHER FUNCTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshall &minus;
the Z shell meta&minus;man page</p>

<h2>OVERVIEW
<a name="OVERVIEW"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Because zsh
contains many features, the zsh manual has been split into a
number of sections. This manual page includes all the
separate manual pages in the following order: <i><br>
zshroadmap</i> Informal introduction to the manual <i><br>
zshmisc</i> Anything not fitting into the other sections
<i><br>
zshexpn</i> Zsh command and parameter expansion <i><br>
zshparam</i> Zsh parameters <i><br>
zshoptions</i> Zsh options <i><br>
zshbuiltins</i> Zsh built&minus;in functions <i><br>
zshzle</i> Zsh command line editing <i><br>
zshcompwid</i> Zsh completion widgets <i><br>
zshcompsys</i> Zsh completion system <i><br>
zshcompctl</i> Zsh completion control <i><br>
zshmodules</i> Zsh loadable modules <i><br>
zshcalsys</i> Zsh built&minus;in calendar functions <i><br>
zshtcpsys</i> Zsh built&minus;in TCP functions <i><br>
zshzftpsys</i> Zsh built&minus;in FTP client <i><br>
zshcontrib</i> Additional zsh functions and utilities</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh is a UNIX
command interpreter (shell) usable as an interactive login
shell and as a shell script command processor. Of the
standard shells, zsh most closely resembles <b>ksh</b> but
includes many enhancements. Zsh has command line editing,
builtin spelling correction, programmable command
completion, shell functions (with autoloading), a history
mechanism, and a host of other features.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh was
originally written by Paul Falstad
<b>&lt;pf@zsh.org&gt;</b>. Zsh is now maintained by the
members of the zsh&minus;workers mailing list
<b>&lt;zsh&minus;workers@zsh.org&gt;</b>. The development is
currently coordinated by Peter Stephenson
<b>&lt;pws@zsh.org&gt;</b>. The coordinator can be contacted
at <b>&lt;coordinator@zsh.org&gt;</b>, but matters relating
to the code should generally go to the mailing list.</p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh is
available from the following anonymous FTP sites. These
mirror sites are kept frequently up to date. The sites
marked with <i>(H)</i> may be mirroring
<b>ftp.cs.elte.hu</b> instead of the primary site. <br>
Primary site</p>

<p style="margin-left:22%;"><b>ftp://ftp.zsh.org/pub/ <br>
http://www.zsh.org/pub/</b></p>

<p style="margin-left:11%;">Australia</p>

<p style="margin-left:22%;"><b>ftp://ftp.zsh.org/pub/ <br>
http://www.zsh.org/pub/ <br>
http://mirror.dejanseo.com.au/pub/zsh/</b></p>

<p style="margin-left:11%;">Hungary</p>


<p style="margin-left:22%;"><b>ftp://ftp.cs.elte.hu/pub/zsh/
<br>
http://www.cs.elte.hu/pub/zsh/</b></p>

<p style="margin-left:22%; margin-top: 1em">The
up&minus;to&minus;date source code is available via
anonymous CVS and Git from Sourceforge. See
<b>http://sourceforge.net/projects/zsh/</b> for details. A
summary of instructions for the CVS and Git archives can be
found at <b>http://zsh.sourceforget.net/</b>.</p>

<h2>MAILING LISTS
<a name="MAILING LISTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh has 3
mailing lists: <b><br>
&lt;zsh&minus;announce@zsh.org&gt;</b></p>

<p style="margin-left:22%;">Announcements about releases,
major changes in the shell and the monthly posting of the
Zsh FAQ. (moderated)</p>


<p style="margin-left:11%;"><b>&lt;zsh&minus;users@zsh.org&gt;</b></p>

<p style="margin-left:22%;">User discussions.</p>


<p style="margin-left:11%;"><b>&lt;zsh&minus;workers@zsh.org&gt;</b></p>

<p style="margin-left:22%;">Hacking, development, bug
reports and patches.</p>

<p style="margin-left:11%; margin-top: 1em">To subscribe or
unsubscribe, send mail to the associated administrative
address for the mailing list. <b><br>
&lt;zsh&minus;announce&minus;subscribe@zsh.org&gt; <br>
&lt;zsh&minus;users&minus;subscribe@zsh.org&gt; <br>
&lt;zsh&minus;workers&minus;subscribe@zsh.org&gt; <br>
&lt;zsh&minus;announce&minus;unsubscribe@zsh.org&gt; <br>
&lt;zsh&minus;users&minus;unsubscribe@zsh.org&gt; <br>
&lt;zsh&minus;workers&minus;unsubscribe@zsh.org&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">YOU ONLY NEED
TO JOIN ONE OF THE MAILING LISTS AS THEY ARE NESTED. All
submissions to <b>zsh&minus;announce</b> are automatically
forwarded to <b>zsh&minus;users</b>. All submissions to
<b>zsh&minus;users</b> are automatically forwarded to
<b>zsh&minus;workers</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If you have
problems subscribing/unsubscribing to any of the mailing
lists, send mail to <b>&lt;listmaster@zsh.org&gt;</b>. The
mailing lists are maintained by Karsten Thygesen
<b>&lt;karthy@kom.auc.dk&gt;</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The mailing
lists are archived; the archives can be accessed via the
administrative addresses listed above. There is also a
hypertext archive, maintained by Geoff Wing
<b>&lt;gcw@zsh.org&gt;</b>, available at
<b>http://www.zsh.org/mla/</b>.</p>

<h2>THE ZSH FAQ
<a name="THE ZSH FAQ"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh has a list
of Frequently Asked Questions (FAQ), maintained by Peter
Stephenson <b>&lt;pws@zsh.org&gt;</b>. It is regularly
posted to the newsgroup <b>comp.unix.shell</b> and the
<b>zsh&minus;announce</b> mailing list. The latest version
can be found at any of the Zsh FTP sites, or at
<b>http://www.zsh.org/FAQ/</b>. The contact address for
FAQ&minus;related matters is
<b>&lt;faqmaster@zsh.org&gt;</b>.</p>

<h2>THE ZSH WEB PAGE
<a name="THE ZSH WEB PAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh has a web
page which is located at <b>http://www.zsh.org/</b>. This is
maintained by Karsten Thygesen
<b>&lt;karthy@zsh.org&gt;</b>, of SunSITE Denmark. The
contact address for web&minus;related matters is
<b>&lt;webmaster@zsh.org&gt;</b>.</p>

<h2>THE ZSH USERGUIDE
<a name="THE ZSH USERGUIDE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A userguide is
currently in preparation. It is intended to complement the
manual, with explanations and hints on issues where the
manual can be cabbalistic, hierographic, or downright
mystifying (for example, the word &lsquo;hierographic&rsquo;
does not exist). It can be viewed in its current state at
<b>http://zsh.sourceforge.net/Guide/</b>. At the time of
writing, chapters dealing with startup files and their
contents and the new completion system were essentially
complete.</p>

<h2>THE ZSH WIKI
<a name="THE ZSH WIKI"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
&lsquo;wiki&rsquo; website for zsh has been created at
<b>http://www.zshwiki.org/</b>. This is a site which can be
added to and modified directly by users without any special
permission. You can add your own zsh tips and
configurations.</p>

<h2>INVOCATION
<a name="INVOCATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
flags are interpreted by the shell when invoked to determine
where the shell will read commands from:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Take the first argument as a command to execute, rather
than reading commands from a script or standard input. If
any further arguments are given, the first one is assigned
to <b>$0</b>, rather than being used as a positional
parameter.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Force shell to be interactive. It is still possible to
specify a script to execute.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Force shell to read commands from the standard input. If
the <b>&minus;s</b> flag is not present and an argument is
given, the first argument is taken to be the pathname of a
script to execute.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If there are
any remaining arguments after option processing, and neither
of the options <b>&minus;c</b> or <b>&minus;s</b> was
supplied, the first argument is taken as the file name of a
script containing shell commands to be executed. If the
option <b>PATH_SCRIPT</b> is set, and the file name does not
contain a directory path (i.e. there is no
&lsquo;<b>/</b>&rsquo; in the name), first the current
directory and then the command path given by the variable
<b>PATH</b> are searched for the script. If the option is
not set or the file name contains a &lsquo;<b>/</b>&rsquo;
it is used directly.</p>

<p style="margin-left:11%; margin-top: 1em">After the first
one or two arguments have been appropriated as described
above, the remaining arguments are assigned to the
positional parameters.</p>

<p style="margin-left:11%; margin-top: 1em">For further
options, which are common to invocation and the <b>set</b>
builtin, see <i>zshoptions</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Options may be
specified by name using the <b>&minus;o</b> option.
<b>&minus;o</b> acts like a single&minus;letter option, but
takes a following string as the option name. For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>zsh &minus;x
&minus;o shwordsplit scr</b></p>

<p style="margin-left:11%; margin-top: 1em">runs the script
<b>scr</b>, setting the <b>XTRACE</b> option by the
corresponding letter &lsquo;<b>&minus;x</b>&rsquo; and the
<b>SH_WORD_SPLIT</b> option by name. Options may be turned
<i>off</i> by name by using <b>+o</b> instead of
<b>&minus;o</b>. <b>&minus;o</b> can be stacked up with
preceding single&minus;letter options, so for example
&lsquo;<b>&minus;xo shwordsplit</b>&rsquo; or
&lsquo;<b>&minus;xoshwordsplit</b>&rsquo; is equivalent to
&lsquo;<b>&minus;x &minus;o shwordsplit</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Options may
also be specified by name in GNU long option style,
&lsquo;<b>&minus;&minus;</b><i>option&minus;name</i>&rsquo;.
When this is done, &lsquo;<b>&minus;</b>&rsquo; characters
in the option name are permitted: they are translated into
&lsquo;<b>_</b>&rsquo;, and thus ignored. So, for example,
&lsquo;<b>zsh
&minus;&minus;sh&minus;word&minus;split</b>&rsquo; invokes
zsh with the <b>SH_WORD_SPLIT</b> option turned on. Like
other option syntaxes, options can be turned off by
replacing the initial &lsquo;<b>&minus;</b>&rsquo; with a
&lsquo;<b>+</b>&rsquo;; thus
&lsquo;<b>+&minus;sh&minus;word&minus;split</b>&rsquo; is
equivalent to
&lsquo;<b>&minus;&minus;no&minus;sh&minus;word&minus;split</b>&rsquo;.
Unlike other option syntaxes, GNU&minus;style long options
cannot be stacked with any other options, so for example
&lsquo;<b>&minus;x&minus;shwordsplit</b>&rsquo; is an error,
rather than being treated like &lsquo;<b>&minus;x
&minus;&minus;shwordsplit</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The special
GNU&minus;style option
&lsquo;<b>&minus;&minus;version</b>&rsquo; is handled; it
sends to standard output the shell&rsquo;s version
information, then exits successfully.
&lsquo;<b>&minus;&minus;help</b>&rsquo; is also handled; it
sends to standard output a list of options that can be used
when invoking the shell, then exits successfully.</p>

<p style="margin-left:11%; margin-top: 1em">Option
processing may be finished, allowing following arguments
that start with &lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; to be treated as normal arguments, in
two ways. Firstly, a lone &lsquo;<b>&minus;</b>&rsquo; (or
&lsquo;<b>+</b>&rsquo;) as an argument by itself ends option
processing. Secondly, a special option
&lsquo;<b>&minus;&minus;</b>&rsquo; (or
&lsquo;<b>+&minus;</b>&rsquo;), which may be specified on
its own (which is the standard POSIX usage) or may be
stacked with preceding options (so
&lsquo;<b>&minus;x&minus;</b>&rsquo; is equivalent to
&lsquo;<b>&minus;x &minus;&minus;</b>&rsquo;). Options are
not permitted to be stacked after
&lsquo;<b>&minus;&minus;</b>&rsquo; (so
&lsquo;<b>&minus;x&minus;f</b>&rsquo; is an error), but note
the GNU&minus;style option form discussed above, where
&lsquo;<b>&minus;&minus;shwordsplit</b>&rsquo; is permitted
and does not end option processing.</p>

<p style="margin-left:11%; margin-top: 1em">Except when the
<b>sh</b>/<b>ksh</b> emulation single&minus;letter options
are in effect, the option &lsquo;<b>&minus;b</b>&rsquo; (or
&lsquo;<b>+b</b>&rsquo;) ends option processing.
&lsquo;<b>&minus;b</b>&rsquo; is like
&lsquo;<b>&minus;&minus;</b>&rsquo;, except that further
single&minus;letter options can be stacked after the
&lsquo;<b>&minus;b</b>&rsquo; and will take effect as
normal.</p>

<h2>COMPATIBILITY
<a name="COMPATIBILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zsh tries to
emulate <b>sh</b> or <b>ksh</b> when it is invoked as
<b>sh</b> or <b>ksh</b> respectively; more precisely, it
looks at the first letter of the name by which it was
invoked, excluding any initial &lsquo;<b>r</b>&rsquo;
(assumed to stand for &lsquo;restricted&rsquo;), and if that
is &lsquo;<b>s</b>&rsquo; or &lsquo;<b>k</b>&rsquo; it will
emulate <b>sh</b> or <b>ksh</b>. Furthermore, if invoked as
<b>su</b> (which happens on certain systems when the shell
is executed by the <b>su</b> command), the shell will try to
find an alternative name from the <b>SHELL</b> environment
variable and perform emulation based on that.</p>

<p style="margin-left:11%; margin-top: 1em">In <b>sh</b>
and <b>ksh</b> compatibility modes the following parameters
are not special and not initialized by the shell:
<b>ARGC</b>, <b>argv</b>, <b>cdpath</b>, <b>fignore</b>,
<b>fpath</b>, <b>HISTCHARS</b>, <b>mailpath</b>,
<b>MANPATH</b>, <b>manpath</b>, <b>path</b>, <b>prompt</b>,
<b>PROMPT</b>, <b>PROMPT2</b>, <b>PROMPT3</b>,
<b>PROMPT4</b>, <b>psvar</b>, <b>status</b>,
<b>watch</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The usual zsh
startup/shutdown scripts are not executed. Login shells
source <b>/etc/profile</b> followed by
<b>$HOME/.profile</b>. If the <b>ENV</b> environment
variable is set on invocation, <b>$ENV</b> is sourced after
the profile scripts. The value of <b>ENV</b> is subjected to
parameter expansion, command substitution, and arithmetic
expansion before being interpreted as a pathname. Note that
the <b>PRIVILEGED</b> option also affects the execution of
startup files.</p>

<p style="margin-left:11%; margin-top: 1em">The following
options are set if the shell is invoked as <b>sh</b> or
<b>ksh</b>: <b>NO_BAD_PATTERN</b>, <b>NO_BANG_HIST</b>,
<b>NO_BG_NICE</b>, <b>NO_EQUALS</b>,
<b>NO_FUNCTION_ARGZERO</b>, <b>GLOB_SUBST</b>,
<b>NO_GLOBAL_EXPORT</b>, <b>NO_HUP</b>,
<b>INTERACTIVE_COMMENTS</b>, <b>KSH_ARRAYS</b>,
<b>NO_MULTIOS</b>, <b>NO_NOMATCH</b>, <b>NO_NOTIFY</b>,
<b>POSIX_BUILTINS</b>, <b>NO_PROMPT_PERCENT</b>,
<b>RM_STAR_SILENT</b>, <b>SH_FILE_EXPANSION</b>,
<b>SH_GLOB</b>, <b>SH_OPTION_LETTERS</b>,
<b>SH_WORD_SPLIT</b>. Additionally the <b>BSD_ECHO</b> and
<b>IGNORE_BRACES</b> options are set if zsh is invoked as
<b>sh</b>. Also, the <b>KSH_OPTION_PRINT</b>,
<b>LOCAL_OPTIONS</b>, <b>PROMPT_BANG</b>,
<b>PROMPT_SUBST</b> and <b>SINGLE_LINE_ZLE</b> options are
set if zsh is invoked as <b>ksh</b>.</p>

<h2>RESTRICTED SHELL
<a name="RESTRICTED SHELL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When the
basename of the command used to invoke zsh starts with the
letter &lsquo;<b>r</b>&rsquo; or the
&lsquo;<b>&minus;r</b>&rsquo; command line option is
supplied at invocation, the shell becomes restricted.
Emulation mode is determined after stripping the letter
&lsquo;<b>r</b>&rsquo; from the invocation name. The
following are disabled in restricted mode:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">changing directories with the
<b>cd</b> builtin</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>changing or unsetting the <b>PATH</b>, <b>path</b>,
<b>MODULE_PATH</b>, <b>module_path</b>, <b>SHELL</b>,
<b>HISTFILE</b>, <b>HISTSIZE</b>, <b>GID</b>, <b>EGID</b>,
<b>UID</b>, <b>EUID</b>, <b>USERNAME</b>,
<b>LD_LIBRARY_PATH</b>, <b>LD_AOUT_LIBRARY_PATH</b>,
<b>LD_PRELOAD</b> and <b>LD_AOUT_PRELOAD</b> parameters</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>specifying command names containing <b>/</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>specifying command pathnames using <b>hash</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>redirecting output to files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>using the <b>exec</b> builtin command to replace the
shell with another command</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>using <b>jobs &minus;Z</b> to overwrite the shell
process&rsquo; argument and environment space</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>using the <b>ARGV0</b> parameter to override
<b>argv[0]</b> for external commands</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>turning off restricted mode with <b>set +r</b> or
<b>unsetopt RESTRICTED</b></p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">These
restrictions are enforced after processing the startup
files. The startup files should set up <b>PATH</b> to point
to a directory of commands which can be safely invoked in
the restricted environment. They may also add further
restrictions by disabling selected builtins.</p>

<p style="margin-left:11%; margin-top: 1em">Restricted mode
can also be activated any time by setting the
<b>RESTRICTED</b> option. This immediately enables all the
restrictions described above even if the shell still has not
processed all startup files.</p>

<h2>STARTUP/SHUTDOWN FILES
<a name="STARTUP/SHUTDOWN FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Commands are
first read from <b>/etc/zshenv</b>; this cannot be
overridden. Subsequent behaviour is modified by the
<b>RCS</b> and <b>GLOBAL_RCS</b> options; the former affects
all startup files, while the second only affects global
startup files (those shown here with an path starting with a
<b>/</b>). If one of the options is unset at any point, any
subsequent startup file(s) of the corresponding type will
not be read. It is also possible for a file in
<b>$ZDOTDIR</b> to re&minus;enable <b>GLOBAL_RCS</b>. Both
<b>RCS</b> and <b>GLOBAL_RCS</b> are set by default.</p>

<p style="margin-left:11%; margin-top: 1em">Commands are
then read from <b>$ZDOTDIR/.zshenv</b>. If the shell is a
login shell, commands are read from <b>/etc/zprofile</b> and
then <b>$ZDOTDIR/.zprofile</b>. Then, if the shell is
interactive, commands are read from <b>/etc/zshrc</b> and
then <b>$ZDOTDIR/.zshrc</b>. Finally, if the shell is a
login shell, <b>/etc/zlogin</b> and <b>$ZDOTDIR/.zlogin</b>
are read.</p>

<p style="margin-left:11%; margin-top: 1em">When a login
shell exits, the files <b>$ZDOTDIR/.zlogout</b> and then
<b>/etc/zlogout</b> are read. This happens with either an
explicit exit via the <b>exit</b> or <b>logout</b> commands,
or an implicit exit by reading end&minus;of&minus;file from
the terminal. However, if the shell terminates due to
<b>exec</b>&rsquo;ing another process, the logout files are
not read. These are also affected by the <b>RCS</b> and
<b>GLOBAL_RCS</b> options. Note also that the <b>RCS</b>
option affects the saving of history files, i.e. if
<b>RCS</b> is unset when the shell exits, no history file
will be saved.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>ZDOTDIR</b> is unset, <b>HOME</b> is used instead. Files
listed above as being in <b>/etc</b> may be in another
directory, depending on the installation.</p>

<p style="margin-left:11%; margin-top: 1em">As
<b>/etc/zshenv</b> is run for all instances of zsh, it is
important that it be kept as small as possible. In
particular, it is a good idea to put code that does not need
to be run for every single shell behind a test of the form
&lsquo;<b>if [[ &minus;o rcs ]]; then ...</b>&rsquo; so that
it will not be executed when zsh is invoked with the
&lsquo;<b>&minus;f</b>&rsquo; option.</p>

<p style="margin-left:11%; margin-top: 1em">Any of these
files may be pre&minus;compiled with the <b>zcompile</b>
builtin command (see <i>zshbuiltins</i>(1)). If a compiled
file exists (named for the original file plus the
<b>.zwc</b> extension) and it is newer than the original
file, the compiled file will be used instead.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshroadmap &minus; informal
introduction to the zsh manual</p>

<p style="margin-left:11%; margin-top: 1em">The Zsh Manual,
like the shell itself, is large and often complicated. This
section of the manual provides some pointers to areas of the
shell that are likely to be of particular interest to new
users, and indicates where in the rest of the manual the
documentation is to be found.</p>

<h2>WHEN THE SHELL STARTS
<a name="WHEN THE SHELL STARTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When it starts,
the shell reads commands from various files. These can be
created or edited to customize the shell. See the section
Startup/Shutdown Files in <i>zsh</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">If no personal
initialization files exist for the current user, a function
is run to help you change some of the most common settings.
It won&rsquo;t appear if your administrator has disabled the
<b>zsh/newuser</b> module. The function is designed to be
self&minus;explanatory. You can run it by hand with
&lsquo;<b>autoload &minus;Uz
zsh&minus;newuser&minus;install;
zsh&minus;newuser&minus;install &minus;f</b>&rsquo;. See
also the section User Configuration Functions in
<i>zshcontrib</i>(1).</p>

<h2>INTERACTIVE USE
<a name="INTERACTIVE USE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Interaction
with the shell uses the builtin Zsh Line Editor, ZLE. This
is described in detail in <i>zshzle</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The first
decision a user must make is whether to use the Emacs or Vi
editing mode as the keys for editing are substantially
different. Emacs editing mode is probably more natural for
beginners and can be selected explicitly with the command
<b>bindkey &minus;e</b>.</p>

<p style="margin-left:11%; margin-top: 1em">A history
mechanism for retrieving previously typed lines (most simply
with the Up or Down arrow keys) is available; note that,
unlike other shells, zsh will not save these lines when the
shell exits unless you set appropriate variables, and the
number of history lines retained by default is quite small
(30 lines). See the description of the shell variables
(referred to in the documentation as parameters)
<b>HISTFILE</b>, <b>HISTSIZE</b> and <b>SAVEHIST</b> in
<i>zshparam</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The shell now
supports the UTF&minus;8 character set (and also others if
supported by the operating system). This is (mostly) handled
transparently by the shell, but the degree of support in
terminal emulators is variable. There is some discussion of
this in the shell FAQ, http://zsh.dotsrc.org/FAQ/ . Note in
particular that for combining characters to be handled the
option <b>COMBINING_CHARS</b> needs to be set. Because the
shell is now more sensitive to the definition of the
character set, note that if you are upgrading from an older
version of the shell you should ensure that the appropriate
variable, either <b>LANG</b> (to affect all aspects of the
shell&rsquo;s operation) or <b>LC_CTYPE</b> (to affect only
the handling of character sets) is set to an appropriate
value. This is true even if you are using a
single&minus;byte character set including extensions of
ASCII such as <b>ISO&minus;8859&minus;1</b> or
<b>ISO&minus;8859&minus;15</b>. See the description of
<b>LC_CTYPE</b> in <i>zshparam</i>(1).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Completion</b>
<br>
Completion is a feature present in many shells. It allows
the user to type only a part (usually the prefix) of a word
and have the shell fill in the rest. The completion system
in zsh is programmable. For example, the shell can be set to
complete email addresses in arguments to the mail command
from your <b>~/.abook/addressbook</b>; usernames, hostnames,
and even remote paths in arguments to scp, and so on.
Anything that can be written in or glued together with zsh
can be the source of what the line editor offers as possible
completions.</p>

<p style="margin-left:11%; margin-top: 1em">Zsh has two
completion systems, an old, so called <b>compctl</b>
completion (named after the builtin command that serves as
its complete and only user interface), and a new one,
referred to as <b>compsys</b>, organized as library of
builtin and user&minus;defined functions. The two systems
differ in their interface for specifying the completion
behavior. The new system is more customizable and is
supplied with completions for many commonly used commands;
it is therefore to be preferred.</p>

<p style="margin-left:11%; margin-top: 1em">The completion
system must be enabled explicitly when the shell starts. For
more information see <i>zshcompsys</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Extending
the line editor</b> <br>
Apart from completion, the line editor is highly extensible
by means of shell functions. Some useful functions are
provided with the shell; they provide facilities such as:
<b><br>
insert&minus;composed&minus;char</b></p>

<p style="margin-left:22%;">composing characters not found
on the keyboard</p>


<p style="margin-left:11%;"><b>match&minus;words&minus;by&minus;style</b></p>

<p style="margin-left:22%;">configuring what the line
editor considers a word when moving or deleting by word</p>


<p style="margin-left:11%;"><b>history&minus;beginning&minus;search&minus;backward&minus;end</b>,
etc.</p>

<p style="margin-left:22%;">alternative ways of searching
the shell history</p>

<p style="margin-left:11%;"><b>replace&minus;string</b>,
<b>replace&minus;pattern</b></p>

<p style="margin-left:22%;">functions for replacing strings
or patterns globally in the command line</p>


<p style="margin-left:11%;"><b>edit&minus;command&minus;line</b></p>

<p style="margin-left:22%;">edit the command line with an
external editor.</p>

<p style="margin-left:11%; margin-top: 1em">See the section
&lsquo;ZLE Functions&rsquo; in <i>zshcontrib</i>(1) for
descriptions of these.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell has a
large number of options for changing its behaviour. These
cover all aspects of the shell; browsing the full
documentation is the only good way to become acquainted with
the many possibilities. See <i>zshoptions</i>(1).</p>

<h2>PATTERN MATCHING
<a name="PATTERN MATCHING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell has a
rich set of patterns which are available for file matching
(described in the documentation as &lsquo;filename
generation&rsquo; and also known for historical reasons as
&lsquo;globbing&rsquo;) and for use when programming. These
are described in the section &lsquo;Filename
Generation&rsquo; in <i>zshexpn</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Of particular
interest are the following patterns that are not commonly
supported by other systems of pattern matching:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>**</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for matching over multiple directories</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>~</b>, <b>^</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>the ability to exclude patterns from matching when the
<b>EXTENDED_GLOB</b> option is set</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>(</b><i>...</i><b>)</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>glob qualifiers, included in parentheses at the end of
the pattern, which select files by type (such as
directories) or attribute (such as size).</p></td></tr>
</table>

<h2>GENERAL COMMENTS ON SYNTAX
<a name="GENERAL COMMENTS ON SYNTAX"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Although the
syntax of zsh is in ways similar to the Korn shell, and
therefore more remotely to the original UNIX shell, the
Bourne shell, its default behaviour does not entirely
correspond to those shells. General shell syntax is
introduced in the section &lsquo;Shell Grammar&rsquo; in
<i>zshmisc</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">One commonly
encountered difference is that variables substituted onto
the command line are not split into words. See the
description of the shell option <b>SH_WORD_SPLIT</b> in the
section &lsquo;Parameter Expansion&rsquo; in
<i>zshexpn</i>(1). In zsh, you can either explicitly request
the splitting (e.g. <b>${=foo}</b>) or use an array when you
want a variable to expand to more than one word. See the
section &lsquo;Array Parameters&rsquo; in
<i>zshparam</i>(1).</p>

<h2>PROGRAMMING
<a name="PROGRAMMING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The most
convenient way of adding enhancements to the shell is
typically by writing a shell function and arranging for it
to be autoloaded. Functions are described in the section
&lsquo;Functions&rsquo; in <i>zshmisc</i>(1). Users changing
from the C shell and its relatives should notice that
aliases are less used in zsh as they don&rsquo;t perform
argument substitution, only simple text replacement.</p>

<p style="margin-left:11%; margin-top: 1em">A few general
functions, other than those for the line editor described
above, are provided with the shell and are described in
<i>zshcontrib</i>(1). Features include: <b><br>
promptinit</b></p>

<p style="margin-left:22%;">a prompt theme system for
changing prompts easily, see the section &lsquo;Prompt
Themes&rsquo;</p>


<p style="margin-left:11%;"><b>zsh&minus;mime&minus;setup</b></p>

<p style="margin-left:22%;">a MIME&minus;handling system
which dispatches commands according to the suffix of a file
as done by graphical file managers</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>zcalc</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>a calculator</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>zargs</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>a version of <b>xargs</b> that makes the <b>find</b>
command redundant</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>zmv</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>a command for renaming files by means of shell
patterns.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshmisc &minus; everything and
then some</p>

<h2>SIMPLE COMMANDS &amp; PIPELINES
<a name="SIMPLE COMMANDS &amp; PIPELINES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A <i>simple
command</i> is a sequence of optional parameter assignments
followed by blank&minus;separated words, with optional
redirections interspersed. The first word is the command to
be executed, and the remaining words, if any, are arguments
to the command. If a command name is given, the parameter
assignments modify the environment of the command when it is
executed. The value of a simple command is its exit status,
or 128 plus the signal number if terminated by a signal. For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo
foo</b></p>

<p style="margin-left:11%; margin-top: 1em">is a simple
command with arguments.</p>

<p style="margin-left:11%; margin-top: 1em">A
<i>pipeline</i> is either a simple command, or a sequence of
two or more simple commands where each command is separated
from the next by &lsquo;<b>|</b>&rsquo; or
&lsquo;<b>|&amp;</b>&rsquo;. Where commands are separated by
&lsquo;<b>|</b>&rsquo;, the standard output of the first
command is connected to the standard input of the next.
&lsquo;<b>|&amp;</b>&rsquo; is shorthand for
&lsquo;<b>2&gt;&amp;1 |</b>&rsquo;, which connects both the
standard output and the standard error of the command to the
standard input of the next. The value of a pipeline is the
value of the last command, unless the pipeline is preceded
by &lsquo;<b>!</b>&rsquo; in which case the value is the
logical inverse of the value of the last command. For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo foo |
sed &rsquo;s/foo/bar/&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">is a pipeline,
where the output (&lsquo;<b>foo</b>&rsquo; plus a newline)
of the first command will be passed to the input of the
second.</p>

<p style="margin-left:11%; margin-top: 1em">If a pipeline
is preceded by &lsquo;<b>coproc</b>&rsquo;, it is executed
as a coprocess; a two&minus;way pipe is established between
it and the parent shell. The shell can read from or write to
the coprocess by means of the
&lsquo;<b>&gt;&amp;p</b>&rsquo; and
&lsquo;<b>&lt;&amp;p</b>&rsquo; redirection operators or
with &lsquo;<b>print &minus;p</b>&rsquo; and &lsquo;<b>read
&minus;p</b>&rsquo;. A pipeline cannot be preceded by both
&lsquo;<b>coproc</b>&rsquo; and &lsquo;<b>!</b>&rsquo;. If
job control is active, the coprocess can be treated in other
than input and output as an ordinary background job.</p>

<p style="margin-left:11%; margin-top: 1em">A
<i>sublist</i> is either a single pipeline, or a sequence of
two or more pipelines separated by
&lsquo;<b>&amp;&amp;</b>&rsquo; or &lsquo;<b>||</b>&rsquo;.
If two pipelines are separated by
&lsquo;<b>&amp;&amp;</b>&rsquo;, the second pipeline is
executed only if the first succeeds (returns a zero status).
If two pipelines are separated by &lsquo;<b>||</b>&rsquo;,
the second is executed only if the first fails (returns a
nonzero status). Both operators have equal precedence and
are left associative. The value of the sublist is the value
of the last pipeline executed. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>dmesg | grep
panic &amp;&amp; print yes</b></p>

<p style="margin-left:11%; margin-top: 1em">is a sublist
consisting of two pipelines, the second just a simple
command which will be executed if and only if the
<b>grep</b> command returns a zero status. If it does not,
the value of the sublist is that return status, else it is
the status returned by the <b>print</b> (almost certainly
zero).</p>

<p style="margin-left:11%; margin-top: 1em">A <i>list</i>
is a sequence of zero or more sublists, in which each
sublist is terminated by &lsquo;<b>;</b>&rsquo;,
&lsquo;<b>&amp;</b>&rsquo;, &lsquo;<b>&amp;|</b>&rsquo;,
&lsquo;<b>&amp;!</b>&rsquo;, or a newline. This terminator
may optionally be omitted from the last sublist in the list
when the list appears as a complex command inside
&lsquo;<b>(</b>...<b>)</b>&rsquo; or
&lsquo;<b>{</b>...<b>}</b>&rsquo;. When a sublist is
terminated by &lsquo;<b>;</b>&rsquo; or newline, the shell
waits for it to finish before executing the next sublist. If
a sublist is terminated by a &lsquo;<b>&amp;</b>&rsquo;,
&lsquo;<b>&amp;|</b>&rsquo;, or &lsquo;<b>&amp;!</b>&rsquo;,
the shell executes the last pipeline in it in the
background, and does not wait for it to finish (note the
difference from other shells which execute the whole sublist
in the background). A backgrounded pipeline returns a status
of zero.</p>

<p style="margin-left:11%; margin-top: 1em">More generally,
a list can be seen as a set of any shell commands
whatsoever, including the complex commands below; this is
implied wherever the word &lsquo;list&rsquo; appears in
later descriptions. For example, the commands in a shell
function form a special sort of list.</p>

<h2>PRECOMMAND MODIFIERS
<a name="PRECOMMAND MODIFIERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A simple
command may be preceded by a <i>precommand modifier</i>,
which will alter how the command is interpreted. These
modifiers are shell builtin commands with the exception of
<b>nocorrect</b> which is a reserved word.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>&minus;</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">The command is executed with a
&lsquo;<b>&minus;</b>&rsquo; prepended to its <b>argv[0]</b>
string.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>builtin</b></p>

<p style="margin-left:22%;">The command word is taken to be
the name of a builtin command, rather than a shell function
or external command.</p>

<p style="margin-left:11%;"><b>command</b> [
<b>&minus;pvV</b> ]</p>

<p style="margin-left:22%;">The command word is taken to be
the name of an external command, rather than a shell
function or builtin. If the <b>POSIX_BUILTINS</b> option is
set, builtins will also be executed but certain special
properties of them are suppressed. The <b>&minus;p</b> flag
causes a default path to be searched instead of that in
<b>$path</b>. With the <b>&minus;v</b> flag, <b>command</b>
is similar to <b>whence</b> and with <b>&minus;V</b>, it is
equivalent to <b>whence &minus;v</b>.</p>

<p style="margin-left:11%;"><b>exec</b> [ <b>&minus;cl</b>
] [ <b>&minus;a</b> <i>argv0</i> ]</p>

<p style="margin-left:22%;">The following command together
with any arguments is run in place of the current process,
rather than as a sub&minus;process. The shell does not fork
and is replaced. The shell does not invoke <b>TRAPEXIT</b>,
nor does it source <b>zlogout</b> files. The options are
provided for compatibility with other shells.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;c</b> option clears the environment.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;l</b> option is equivalent to the <b>&minus;</b>
precommand modifier, to treat the replacement command as a
login shell; the command is executed with a <b>&minus;</b>
prepended to its <b>argv[0]</b> string. This flag has no
effect if used together with the <b>&minus;a</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;a</b> option is used to specify explicitly the
<b>argv[0]</b> string (the name of the command as seen by
the process itself) to be used by the replacement command
and is directly equivalent to setting a value for the
<b>ARGV0</b> environment variable.</p>

<p style="margin-left:11%;"><b>nocorrect</b></p>

<p style="margin-left:22%;">Spelling correction is not done
on any of the words. This must appear before any other
precommand modifier, as it is interpreted immediately,
before any parsing is done. It has no effect in
non&minus;interactive shells.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>noglob</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Filename generation (globbing) is not performed on any
of the words.</p></td></tr>
</table>

<h2>COMPLEX COMMANDS
<a name="COMPLEX COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A <i>complex
command</i> in zsh is one of the following: <b><br>
if</b> <i>list</i> <b>then</b> <i>list</i> [ <b>elif</b>
<i>list</i> <b>then</b> <i>list</i> ] ... [ <b>else</b>
<i>list</i> ] <b>fi</b></p>

<p style="margin-left:22%;">The <b>if</b> <i>list</i> is
executed, and if it returns a zero exit status, the
<b>then</b> <i>list</i> is executed. Otherwise, the
<b>elif</b> <i>list</i> is executed and if its status is
zero, the <b>then</b> <i>list</i> is executed. If each
<b>elif</b> <i>list</i> returns nonzero status, the
<b>else</b> <i>list</i> is executed.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ... [
<b>in</b> <i>word</i> ... ] <i>term</i> <b>do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. Expand the list of <i>word</i>s,
and set the parameter <i>name</i> to each of them in turn,
executing <i>list</i> each time. If the <b>in</b>
<i>word</i> is omitted, use the positional parameters
instead of the <i>word</i>s.</p>

<p style="margin-left:22%; margin-top: 1em">More than one
parameter <i>name</i> can appear before the list of
<i>word</i>s. If <i>N name</i>s are given, then on each
execution of the loop the next <b>N</b> <i>word</i>s are
assigned to the corresponding parameters. If there are more
<i>name</i>s than remaining <i>word</i>s, the remaining
parameters are each set to the empty string. Execution of
the loop ends when there is no remaining <i>word</i> to
assign to the first <i>name</i>. It is only possible for
<b>in</b> to appear as the first <i>name</i> in the list,
else it will be treated as marking the end of the list.</p>

<p style="margin-left:11%;"><b>for ((</b> [<i>expr1</i>]
<b>;</b> [<i>expr2</i>] <b>;</b> [<i>expr3</i>] <b>)) do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">The arithmetic expression
<i>expr1</i> is evaluated first (see the section
&lsquo;Arithmetic Evaluation&rsquo;). The arithmetic
expression <i>expr2</i> is repeatedly evaluated until it
evaluates to zero and when non&minus;zero, <i>list</i> is
executed and the arithmetic expression <i>expr3</i>
evaluated. If any expression is omitted, then it behaves as
if it evaluated to 1.</p>

<p style="margin-left:11%;"><b>while</b> <i>list</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;">Execute the <b>do</b>
<i>list</i> as long as the <b>while</b> <i>list</i> returns
a zero exit status.</p>

<p style="margin-left:11%;"><b>until</b> <i>list</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;">Execute the <b>do</b>
<i>list</i> as long as <b>until</b> <i>list</i> returns a
nonzero exit status.</p>

<p style="margin-left:11%;"><b>repeat</b> <i>word</i>
<b>do</b> <i>list</i> <b>done</b></p>

<p style="margin-left:22%;"><i>word</i> is expanded and
treated as an arithmetic expression, which must evaluate to
a number <i>n</i>. <i>list</i> is then executed <i>n</i>
times.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>repeat</b> syntax is disabled by default when the shell
starts in a mode emulating another shell. It can be enabled
with the command &lsquo;<b>enable &minus;r
repeat</b>&rsquo;</p>

<p style="margin-left:11%;"><b>case</b> <i>word</i>
<b>in</b> [ [<b>(</b>] <i>pattern</i> [ <b>|</b>
<i>pattern</i> ] ... <b>)</b> <i>list</i>
(<b>;;</b>|<b>;&amp;</b>|<b>;|</b>) ] ... <b><br>
esac</b></p>

<p style="margin-left:22%;">Execute the <i>list</i>
associated with the first <i>pattern</i> that matches
<i>word</i>, if any. The form of the patterns is the same as
that used for filename generation. See the section
&lsquo;Filename Generation&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>list</i> that is executed is terminated with
<b>;&amp;</b> rather than <b>;;</b>, the following list is
also executed. The rule for the terminator of the following
list <b>;;</b>, <b>;&amp;</b> or <b>;|</b> is applied unless
the <b>esac</b> is reached.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>list</i> that is executed is terminated with <b>;|</b>
the shell continues to scan the <i>pattern</i>s looking for
the next match, executing the corresponding <i>list</i>, and
applying the rule for the corresponding terminator
<b>;;</b>, <b>;&amp;</b> or <b>;|</b>. Note that <i>word</i>
is not re&minus;expanded; all applicable <i>pattern</i>s are
tested with the same <i>word</i>.</p>

<p style="margin-left:11%;"><b>select</b> <i>name</i> [
<b>in</b> <i>word</i> ... <i>term</i> ] <b>do</b>
<i>list</i> <b>done</b></p>

<p style="margin-left:22%;">where <i>term</i> is one or
more newline or <b>;</b> to terminate the <i>word</i>s.
Print the set of <i>word</i>s, each preceded by a number. If
the <b>in</b> <i>word</i> is omitted, use the positional
parameters. The <b>PROMPT3</b> prompt is printed and a line
is read from the line editor if the shell is interactive and
that is active, or else standard input. If this line
consists of the number of one of the listed <i>word</i>s,
then the parameter <i>name</i> is set to the <i>word</i>
corresponding to this number. If this line is empty, the
selection list is printed again. Otherwise, the value of the
parameter <i>name</i> is set to null. The contents of the
line read from standard input is saved in the parameter
<b>REPLY</b>. <i>list</i> is executed for each selection
until a break or end&minus;of&minus;file is encountered.</p>

<p style="margin-left:11%;"><b>(</b> <i>list</i>
<b>)</b></p>

<p style="margin-left:22%;">Execute <i>list</i> in a
subshell. Traps set by the <b>trap</b> builtin are reset to
their default values while executing <i>list</i>.</p>

<p style="margin-left:11%;"><b>{</b> <i>list</i>
<b>}</b></p>

<p style="margin-left:22%;">Execute <i>list</i>.</p>

<p style="margin-left:11%;"><b>{</b> <i>try&minus;list</i>
<b>} always {</b> <i>always&minus;list</i> <b>}</b></p>

<p style="margin-left:22%;">First execute
<i>try&minus;list</i>. Regardless of errors, or
<b>break</b>, <b>continue</b>, or <b>return</b> commands
encountered within <i>try&minus;list</i>, execute
<i>always&minus;list</i>. Execution then continues from the
result of the execution of <i>try&minus;list</i>; in other
words, any error, or <b>break</b>, <b>continue</b>, or
<b>return</b> command is treated in the normal way, as if
<i>always&minus;list</i> were not present. The two chunks of
code are referred to as the &lsquo;try block&rsquo; and the
&lsquo;always block&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Optional
newlines or semicolons may appear after the <b>always</b>;
note, however, that they may <i>not</i> appear between the
preceding closing brace and the <b>always</b>.</p>

<p style="margin-left:22%; margin-top: 1em">An
&lsquo;error&rsquo; in this context is a condition such as a
syntax error which causes the shell to abort execution of
the current function, script, or list. Syntax errors
encountered while the shell is parsing the code do not cause
the <i>always&minus;list</i> to be executed. For example, an
erroneously constructed <b>if</b> block in
<b>try&minus;list</b> would cause the shell to abort during
parsing, so that <b>always&minus;list</b> would not be
executed, while an erroneous substitution such as
<b>${*foo*}</b> would cause a run&minus;time error, after
which <b>always&minus;list</b> would be executed.</p>

<p style="margin-left:22%; margin-top: 1em">An error
condition can be tested and reset with the special integer
variable <b>TRY_BLOCK_ERROR</b>. Outside an
<b>always&minus;list</b> the value is irrelevant, but it is
initialised to <b>&minus;1</b>. Inside
<b>always&minus;list</b>, the value is 1 if an error
occurred in the <b>try&minus;list</b>, else 0. If
<b>TRY_BLOCK_ERROR</b> is set to 0 during the
<b>always&minus;list</b>, the error condition caused by the
<b>try&minus;list</b> is reset, and shell execution
continues normally after the end of
<b>always&minus;list</b>. Altering the value during the
<b>try&minus;list</b> is not useful (unless this forms part
of an enclosing <b>always</b> block).</p>

<p style="margin-left:22%; margin-top: 1em">Regardless of
<b>TRY_BLOCK_ERROR</b>, after the end of
<b>always&minus;list</b> the normal shell status <b>$?</b>
is the value returned from <b>always&minus;list</b>. This
will be non&minus;zero if there was an error, even if
<b>TRY_BLOCK_ERROR</b> was set to zero.</p>

<p style="margin-left:22%; margin-top: 1em">The following
executes the given code, ignoring any errors it causes. This
is an alternative to the usual convention of protecting code
by executing it in a subshell.</p>

<p style="margin-left:32%; margin-top: 1em"><b>{ <br>
# code which may cause an error <br>
} always { <br>
# This code is executed regardless of the error. <br>
(( TRY_BLOCK_ERROR = 0 )) <br>
} <br>
# The error condition has been reset.</b></p>

<p style="margin-left:22%; margin-top: 1em">An <b>exit</b>
command (or a <b>return</b> command executed at the
outermost function level of a script) encountered in
<b>try&minus;list</b> does <i>not</i> cause the execution of
<i>always&minus;list</i>. Instead, the shell exits
immediately after any <b>EXIT</b> trap has been
executed.</p>

<p style="margin-left:11%;"><b>function</b> <i>word</i> ...
[ <b>()</b> ] [ <i>term</i> ] <b>{</b> <i>list</i> <b>}</b>
<i><br>
word</i> ... <b>()</b> [ <i>term</i> ] <b>{</b> <i>list</i>
<b>}</b> <i><br>
word</i> ... <b>()</b> [ <i>term</i> ] <i>command</i></p>

<p style="margin-left:22%;">where <i>term</i> is one or
more newline or <b>;</b>. Define a function which is
referenced by any one of <i>word</i>. Normally, only one
<i>word</i> is provided; multiple <i>word</i>s are usually
only useful for setting traps. The body of the function is
the <i>list</i> between the <b>{</b> and <b>}</b>. See the
section &lsquo;Functions&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>SH_GLOB</b> is set for compatibility with other shells,
then whitespace may appear between between the left and
right parentheses when there is a single <i>word</i>;
otherwise, the parentheses will be treated as forming a
globbing pattern in that case.</p>

<p style="margin-left:11%;"><b>time</b> [ <i>pipeline</i>
]</p>

<p style="margin-left:22%;">The <i>pipeline</i> is
executed, and timing statistics are reported on the standard
error in the form specified by the <b>TIMEFMT</b> parameter.
If <i>pipeline</i> is omitted, print statistics about the
shell process and its children.</p>

<p style="margin-left:11%;"><b>[[</b> <i>exp</i>
<b>]]</b></p>

<p style="margin-left:22%;">Evaluates the conditional
expression <i>exp</i> and return a zero exit status if it is
true. See the section &lsquo;Conditional Expressions&rsquo;
for a description of <i>exp</i>.</p>

<h2>ALTERNATE FORMS FOR COMPLEX COMMANDS
<a name="ALTERNATE FORMS FOR COMPLEX COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Many of
zsh&rsquo;s complex commands have alternate forms. These are
non&minus;standard and are likely not to be obvious even to
seasoned shell programmers; they should not be used anywhere
that portability of shell code is a concern.</p>

<p style="margin-left:11%; margin-top: 1em">The short
versions below only work if <i>sublist</i> is of the form
&lsquo;<b>{</b> <i>list</i> <b>}</b>&rsquo; or if the
<b>SHORT_LOOPS</b> option is set. For the <b>if</b>,
<b>while</b> and <b>until</b> commands, in both these cases
the test part of the loop must also be suitably delimited,
such as by &lsquo;<b>[[ ... ]]</b>&rsquo; or &lsquo;<b>((
... ))</b>&rsquo;, else the end of the test will not be
recognized. For the <b>for</b>, <b>repeat</b>, <b>case</b>
and <b>select</b> commands no such special form for the
arguments is necessary, but the other condition (the special
form of <i>sublist</i> or use of the <b>SHORT_LOOPS</b>
option) still applies. <b><br>
if</b> <i>list</i> <b>{</b> <i>list</i> <b>}</b> [
<b>elif</b> <i>list</i> <b>{</b> <i>list</i> <b>}</b> ] ...
[ <b>else {</b> <i>list</i> <b>}</b> ]</p>

<p style="margin-left:22%;">An alternate form of <b>if</b>.
The rules mean that</p>

<p style="margin-left:32%; margin-top: 1em"><b>if [[
&minus;o ignorebraces ]] { <br>
print yes <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">works, but</p>

<p style="margin-left:32%; margin-top: 1em"><b>if true { #
Does not work! <br>
print yes <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">does
<i>not</i>, since the test is not suitably delimited.</p>

<p style="margin-left:11%;"><b>if</b> <i>list
sublist</i></p>

<p style="margin-left:22%;">A short form of the alternate
&lsquo;if&rsquo;. The same limitations on the form of
<i>list</i> apply as for the previous form.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ...
<b>(</b> <i>word</i> ... <b>)</b> <i>sublist</i></p>

<p style="margin-left:22%;">A short form of <b>for</b>.</p>

<p style="margin-left:11%;"><b>for</b> <i>name</i> ... [
<b>in</b> <i>word</i> ... ] <i>term sublist</i></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. Another short form of
<b>for</b>.</p>

<p style="margin-left:11%;"><b>for ((</b> [<i>expr1</i>]
<b>;</b> [<i>expr2</i>] <b>;</b> [<i>expr3</i>] <b>))</b>
<i>sublist</i></p>

<p style="margin-left:22%;">A short form of the arithmetic
<b>for</b> command.</p>

<p style="margin-left:11%;"><b>foreach</b> <i>name</i> ...
<b>(</b> <i>word</i> ... <b>)</b> <i>list</i> <b>end</b></p>

<p style="margin-left:22%;">Another form of <b>for</b>.</p>

<p style="margin-left:11%;"><b>while</b> <i>list</i>
<b>{</b> <i>list</i> <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>while</b>. Note the limitations on the form of
<i>list</i> mentioned above.</p>

<p style="margin-left:11%;"><b>until</b> <i>list</i>
<b>{</b> <i>list</i> <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>until</b>. Note the limitations on the form of
<i>list</i> mentioned above.</p>

<p style="margin-left:11%;"><b>repeat</b> <i>word
sublist</i></p>

<p style="margin-left:22%;">This is a short form of
<b>repeat</b>.</p>

<p style="margin-left:11%;"><b>case</b> <i>word</i>
<b>{</b> [ [<b>(</b>] <i>pattern</i> [ <b>|</b>
<i>pattern</i> ] ... <b>)</b> <i>list</i>
(<b>;;</b>|<b>;&amp;</b>|<b>;|</b>) ] ... <b>}</b></p>

<p style="margin-left:22%;">An alternative form of
<b>case</b>.</p>

<p style="margin-left:11%;"><b>select</b> <i>name</i> [
<b>in</b> <i>word term</i> ] <i>sublist</i></p>

<p style="margin-left:22%;">where <i>term</i> is at least
one newline or <b>;</b>. A short form of <b>select</b>.</p>

<h2>RESERVED WORDS
<a name="RESERVED WORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
words are recognized as reserved words when used as the
first word of a command unless quoted or disabled using
<b>disable &minus;r</b>:</p>

<p style="margin-left:11%; margin-top: 1em"><b>do done esac
then elif else fi for case if while function repeat time
until select coproc nocorrect foreach end ! [[ { }</b></p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
&lsquo;<b>}</b>&rsquo; is recognized in any position if
neither the <b>IGNORE_BRACES</b> option nor the
<b>IGNORE_CLOSE_BRACES</b> option is set.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certain errors
are treated as fatal by the shell: in an interactive shell,
they cause control to return to the command line, and in a
non&minus;interactive shell they cause the shell to be
aborted. In older versions of zsh, a non&minus;interactive
shell running a script would not abort completely, but would
resume execution at the next command to be read from the
script, skipping the remainder of any functions or shell
constructs such as loops or conditions; this somewhat
illogical behaviour can be recovered by setting the option
<b>CONTINUE_ON_ERROR</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Fatal errors
found in non&minus;interactive shells include: <br>
Failure to parse shell options passed when invoking the
shell <br>
Failure to change options with the <b>set</b> builtin <br>
Parse errors of all sorts, including failures to parse</p>

<p style="margin-left:22%;">mathematical expressions</p>

<p style="margin-left:11%;">Failures to set or modify
variable behaviour with <b>typeset</b>,</p>

<p style="margin-left:22%;"><b>local</b>, <b>declare</b>,
<b>export</b>, <b>integer</b>, <b>float</b></p>

<p style="margin-left:11%;">Execution of incorrectly
positioned loop control structures</p>

<p style="margin-left:22%;">(<b>continue</b>,
<b>break</b>)</p>

<p style="margin-left:11%;">Attempts to use regular
expression with no regular expression</p>

<p style="margin-left:22%;">module available</p>

<p style="margin-left:11%;">Disallowed operations when the
<b>RESTRICTED</b> options is set <br>
Failure to create a pipe needed for a pipeline <br>
Failure to create a multio <br>
Failure to autoload a module needed for a declared shell
feature <br>
Errors creating command or process substitutions <br>
Syntax errors in glob qualifiers <br>
File generation errors where not caught by the option
<b>BAD_PATTERN</b> <br>
All bad patterns used for matching within case statements
<br>
File generation failures where not caused by <b>NO_MATCH</b>
or <br>
All file generation errors where the pattern was used to
create a</p>

<p style="margin-left:22%;">multio</p>

<p style="margin-left:11%;">Memory errors where detected by
the shell <br>
Invalid subscripts to shell variables <br>
Attempts to assign read&minus;only variables <br>
Logical errors with variables such as assignment to the
wrong type <br>
Use of invalid variable names <br>
Errors in variable substitution syntax <br>
Failure to convert characters in
<b>$&rsquo;</b>...<b>&rsquo;</b> expressions</p>

<p style="margin-left:22%;">similar options</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>POSIX_BUILTINS</b> option is set, more errors associated
with shell builtin commands are treated as fatal, as
specified by the POSIX standard.</p>

<h2>COMMENTS
<a name="COMMENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In
non&minus;interactive shells, or in interactive shells with
the <b>INTERACTIVE_COMMENTS</b> option set, a word beginning
with the third character of the <b>histchars</b> parameter
(&lsquo;<b>#</b>&rsquo; by default) causes that word and all
the following characters up to a newline to be ignored.</p>

<h2>ALIASING
<a name="ALIASING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Every token in
the shell input is checked to see if there is an alias
defined for it. If so, it is replaced by the text of the
alias if it is in command position (if it could be the first
word of a simple command), or if the alias is global. If the
text ends with a space, the next word in the shell input is
treated as though it were in command position for purposes
of alias expansion. An alias is defined using the
<b>alias</b> builtin; global aliases may be defined using
the <b>&minus;g</b> option to that builtin.</p>

<p style="margin-left:11%; margin-top: 1em">Alias expansion
is done on the shell input before any other expansion except
history expansion. Therefore, if an alias is defined for the
word <b>foo</b>, alias expansion may be avoided by quoting
part of the word, e.g. <b>\foo</b>. Any form of quoting
works, although there is nothing to prevent an alias being
defined for the quoted form such as <b>\foo</b> as well. For
use with completion, which would remove an initial backslash
followed by a character that isn&rsquo;t special, it may be
more convenient to quote the word by starting with a single
quote, i.e. <b>&rsquo;foo</b>; completion will automatically
add the trailing single quote.</p>

<p style="margin-left:11%; margin-top: 1em">There is a
commonly encountered problem with aliases illustrated by the
following code:</p>

<p style="margin-left:22%; margin-top: 1em"><b>alias
echobar=&rsquo;echo bar&rsquo;; echobar</b></p>

<p style="margin-left:11%; margin-top: 1em">This prints a
message that the command <b>echobar</b> could not be found.
This happens because aliases are expanded when the code is
read in; the entire line is read in one go, so that when
<b>echobar</b> is executed it is too late to expand the
newly defined alias. This is often a problem in shell
scripts, functions, and code executed with
&lsquo;<b>source</b>&rsquo; or &lsquo;<b>.</b>&rsquo;.
Consequently, use of functions rather than aliases is
recommended in non&minus;interactive code.</p>

<p style="margin-left:11%; margin-top: 1em">Note also the
unhelpful interaction of aliases and function
definitions:</p>

<p style="margin-left:22%; margin-top: 1em"><b>alias
func=&rsquo;noglob func&rsquo; <br>
func() { <br>
echo Do something with $* <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">Because aliases
are expanded in function definitions, this causes the
following command to be executed:</p>

<p style="margin-left:22%; margin-top: 1em"><b>noglob
func() { <br>
echo Do something with $* <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">which defines
<b>noglob</b> as well as <b>func</b> as functions with the
body given. To avoid this, either quote the name <b>func</b>
or use the alternative function definition form
&lsquo;<b>function func</b>&rsquo;. Ensuring the alias is
defined after the function works but is problematic if the
code fragment might be re&minus;executed.</p>

<h2>QUOTING
<a name="QUOTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A character may
be <i>quoted</i> (that is, made to stand for itself) by
preceding it with a &lsquo;<b>\</b>&rsquo;.
&lsquo;<b>\</b>&rsquo; followed by a newline is ignored.</p>

<p style="margin-left:11%; margin-top: 1em">A string
enclosed between &lsquo;<b>$&rsquo;</b>&rsquo; and
&lsquo;<b>&rsquo;</b>&rsquo; is processed the same way as
the string arguments of the <b>print</b> builtin, and the
resulting string is considered to be entirely quoted. A
literal &lsquo;<b>&rsquo;</b>&rsquo; character can be
included in the string by using the
&lsquo;<b>\&rsquo;</b>&rsquo; escape.</p>

<p style="margin-left:11%; margin-top: 1em">All characters
enclosed between a pair of single quotes
(<b>&rsquo;&rsquo;</b>) that is not preceded by a
&lsquo;<b>$</b>&rsquo; are quoted. A single quote cannot
appear within single quotes unless the option
<b>RC_QUOTES</b> is set, in which case a pair of single
quotes are turned into a single quote. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
&rsquo;&rsquo;&rsquo;&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs nothing
apart from a newline if <b>RC_QUOTES</b> is not set, but one
single quote if it is set.</p>

<p style="margin-left:11%; margin-top: 1em">Inside double
quotes (<b>&quot;&quot;</b>), parameter and command
substitution occur, and &lsquo;<b>\</b>&rsquo; quotes the
characters &lsquo;<b>\</b>&rsquo;,
&lsquo;<b>&lsquo;</b>&rsquo;, &lsquo;<b>&quot;</b>&rsquo;,
and &lsquo;<b>$</b>&rsquo;.</p>

<h2>REDIRECTION
<a name="REDIRECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a command is
followed by <b>&amp;</b> and job control is not active, then
the default standard input for the command is the empty file
<b>/dev/null</b>. Otherwise, the environment for the
execution of a command contains the file descriptors of the
invoking shell as modified by input/output
specifications.</p>

<p style="margin-left:11%; margin-top: 1em">The following
may appear anywhere in a simple command or may precede or
follow a complex command. Expansion occurs before
<i>word</i> or <i>digit</i> is used except as noted below.
If the result of substitution on <i>word</i> produces more
than one filename, redirection occurs for each separate
filename in turn.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&lt;</b> <i>word</i></p></td>
<td width="2%"></td>
<td width="69%">


<p>Open file <i>word</i> for reading as standard input.</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Open file <i>word</i> for
reading and writing as standard input. If the file does not
exist then it is created.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&gt;</b> <i>word</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>Open file <i>word</i> for writing as standard output. If
the file does not exist then it is created. If the file
exists, and the <b>CLOBBER</b> option is unset, this causes
an error; otherwise, it is truncated to zero length.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&gt;|</b> <i>word</i>
<b><br>
&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Same as <b>&gt;</b>, except
that the file is truncated to zero length if it exists, even
if <b>CLOBBER</b> is unset.</p>

<p style="margin-left:11%;"><b>&gt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Open file <i>word</i> for
writing in append mode as standard output. If the file does
not exist, and the <b>CLOBBER</b> option is unset, this
causes an error; otherwise, the file is created.</p>

<p style="margin-left:11%;"><b>&gt;&gt;|</b> <i>word</i>
<b><br>
&gt;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Same as <b>&gt;&gt;</b>, except
that the file is created if it does not exist, even if
<b>CLOBBER</b> is unset.</p>


<p style="margin-left:11%;"><b>&lt;&lt;</b>[<b>&minus;</b>]
<i>word</i></p>

<p style="margin-left:22%;">The shell input is read up to a
line that is the same as <i>word</i>, or to an
end&minus;of&minus;file. No parameter expansion, command
substitution or filename generation is performed on
<i>word</i>. The resulting document, called a
<i>here&minus;document</i>, becomes the standard input.</p>

<p style="margin-left:22%; margin-top: 1em">If any
character of <i>word</i> is quoted with single or double
quotes or a &lsquo;<b>\</b>&rsquo;, no interpretation is
placed upon the characters of the document. Otherwise,
parameter and command substitution occurs,
&lsquo;<b>\</b>&rsquo; followed by a newline is removed, and
&lsquo;<b>\</b>&rsquo; must be used to quote the characters
&lsquo;<b>\</b>&rsquo;, &lsquo;<b>$</b>&rsquo;,
&lsquo;<b>&lsquo;</b>&rsquo; and the first character of
<i>word</i>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<i>word</i> itself does not undergo shell expansion.
Backquotes in <i>word</i> do not have their usual effect;
instead they behave similarly to double quotes, except that
the backquotes themselves are passed through unchanged.
(This information is given for completeness and it is not
recommended that backquotes be used.) Quotes in the form
<b>$&rsquo;</b><i>...</i><b>&rsquo;</b> have their standard
effect of expanding backslashed references to special
characters.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&lt;&lt;&minus;</b> is used, then all leading tabs are
stripped from <i>word</i> and from the document.</p>

<p style="margin-left:11%;"><b>&lt;&lt;&lt;</b>
<i>word</i></p>

<p style="margin-left:22%;">Perform shell expansion on
<i>word</i> and pass the result to standard input. This is
known as a <i>here&minus;string</i>. Compare the use of
<i>word</i> in here&minus;documents above, where <i>word</i>
does not undergo shell expansion.</p>

<p style="margin-left:11%;"><b>&lt;&amp;</b> <i>number</i>
<b><br>
&gt;&amp;</b> <i>number</i></p>

<p style="margin-left:22%;">The standard input/output is
duplicated from file descriptor <i>number</i> (see
<i>dup2</i>(2)).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&lt;&amp; &minus;</b></p></td>
<td width="5%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&gt;&amp; &minus;</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Close the standard input/output.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&lt;&amp; p</b></p></td>
<td width="5%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>&gt;&amp; p</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The input/output from/to the coprocess is moved to the
standard input/output.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&gt;&amp;</b> <i>word</i>
<b><br>
&amp;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">(Except where
&lsquo;<b>&gt;&amp;</b> <i>word</i>&rsquo; matches one of
the above syntaxes; &lsquo;<b>&amp;&gt;</b>&rsquo; can
always be used to avoid this ambiguity.) Redirects both
standard output and standard error (file descriptor 2) in
the manner of &lsquo;<b>&gt;</b> <i>word</i>&rsquo;. Note
that this does <i>not</i> have the same effect as
&lsquo;<b>&gt;</b> <i>word</i> <b>2&gt;&amp;1</b>&rsquo; in
the presence of multios (see the section below).</p>

<p style="margin-left:11%;"><b>&gt;&amp;|</b> <i>word</i>
<b><br>
&gt;&amp;!</b> <i>word</i> <b><br>
&amp;&gt;|</b> <i>word</i> <b><br>
&amp;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;|</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>&gt;&gt;&amp;</b>
<i>word</i> <b><br>
&amp;&gt;&gt;</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;&gt;</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>&gt;&gt;&amp;|</b>
<i>word</i> <b><br>
&gt;&gt;&amp;!</b> <i>word</i> <b><br>
&amp;&gt;&gt;|</b> <i>word</i> <b><br>
&amp;&gt;&gt;!</b> <i>word</i></p>

<p style="margin-left:22%;">Redirects both standard output
and standard error (file descriptor 2) in the manner of
&lsquo;<b>&gt;&gt;|</b> <i>word</i>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If one of the
above is preceded by a digit, then the file descriptor
referred to is that specified by the digit instead of the
default 0 or 1. The order in which redirections are
specified is significant. The shell evaluates each
redirection in terms of the (<i>file descriptor</i>,
<i>file</i>) association at the time of evaluation. For
example:</p>

<p style="margin-left:22%; margin-top: 1em">...
<b>1&gt;</b><i>fname</i> <b>2&gt;&amp;1</b></p>

<p style="margin-left:11%; margin-top: 1em">first
associates file descriptor 1 with file <i>fname</i>. It then
associates file descriptor 2 with the file associated with
file descriptor 1 (that is, <i>fname</i>). If the order of
redirections were reversed, file descriptor 2 would be
associated with the terminal (assuming file descriptor 1 had
been) and then file descriptor 1 would be associated with
file <i>fname</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>|&amp;</b>&rsquo; command separator described in
<i>Simple Commands &amp; Pipelines</i> in <i>zshmisc</i>(1)
is a shorthand for &lsquo;<b>2&gt;&amp;1 |</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The various
forms of process substitution,
&lsquo;<b>&lt;(</b><i>list</i><b>)</b>&rsquo;, and
&lsquo;<b>=(</b><i>list</i>())&rsquo; for input and
&lsquo;<b>&gt;(</b><i>list</i><b>)</b>&rsquo; for output,
are often used together with redirection. For example, if
<i>word</i> in an output redirection is of the form
&lsquo;<b>&gt;(</b><i>list</i><b>)</b>&rsquo; then the
output is piped to the command represented by <i>list</i>.
See <i>Process Substitution</i> in <i>zshexpn</i>(1).</p>

<h2>OPENING FILE DESCRIPTORS USING PARAMETERS
<a name="OPENING FILE DESCRIPTORS USING PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When the shell
is parsing arguments to a command, and the shell option
<b>IGNORE_BRACES</b> is not set, a different form of
redirection is allowed: instead of a digit before the
operator there is a valid shell identifier enclosed in
braces. The shell will open a new file descriptor that is
guaranteed to be at least 10 and set the parameter named by
the identifier to the file descriptor opened. No whitespace
is allowed between the closing brace and the redirection
character. For example:</p>

<p style="margin-left:22%; margin-top: 1em">...
{myfd}&gt;&amp;1</p>

<p style="margin-left:11%; margin-top: 1em">This opens a
new file descriptor that is a duplicate of file descriptor 1
and sets the parameter <b>myfd</b> to the number of the file
descriptor, which will be at least 10. The new file
descriptor can be written to using the syntax
<b>&gt;&amp;$myfd</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The syntax
<b>{</b><i>varid</i><b>}&gt;&amp;&minus;</b>, for example
<b>{myfd}&gt;&amp;&minus;</b>, may be used to close a file
descriptor opened in this fashion. Note that the parameter
given by <i>varid</i> must previously be set to a file
descriptor in this case.</p>

<p style="margin-left:11%; margin-top: 1em">It is an error
to open or close a file descriptor in this fashion when the
parameter is readonly. However, it is not an error to read
or write a file descriptor using
<b>&lt;&amp;$</b><i>param</i> or
<b>&gt;&amp;$</b><i>param</i> if <i>param</i> is
readonly.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>CLOBBER</b> is unset, it is an error to open a file
descriptor using a parameter that is already set to an open
file descriptor previously allocated by this mechanism.
Unsetting the parameter before using it for allocating a
file descriptor avoids the error.</p>

<p style="margin-left:11%; margin-top: 1em">Note that this
mechanism merely allocates or closes a file descriptor; it
does not perform any redirections from or to it. It is
usually convenient to allocate a file descriptor prior to
use as an argument to <b>exec</b>. The syntax does not in
any case work when used around complex commands such as
parenthesised subshells or loops, where the opening brace is
interpreted as part of a command list to be executed in the
current shell.</p>

<p style="margin-left:11%; margin-top: 1em">The following
shows a typical sequence of allocation, use, and closing of
a file descriptor:</p>

<p style="margin-left:22%; margin-top: 1em"><b>integer myfd
<br>
exec {myfd}&gt;~/logs/mylogfile.txt <br>
print This is a log message. &gt;&amp;$myfd <br>
exec {myfd}&gt;&amp;&minus;</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that the
expansion of the variable in the expression
<b>&gt;&amp;$myfd</b> occurs at the point the redirection is
opened. This is after the expansion of command arguments and
after any redirections to the left on the command line have
been processed.</p>

<h2>MULTIOS
<a name="MULTIOS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the user
tries to open a file descriptor for writing more than once,
the shell opens the file descriptor as a pipe to a process
that copies its input to all the specified outputs, similar
to <b>tee</b>, provided the <b>MULTIOS</b> option is set, as
it is by default. Thus:</p>

<p style="margin-left:22%; margin-top: 1em"><b>date &gt;foo
&gt;bar</b></p>

<p style="margin-left:11%; margin-top: 1em">writes the date
to two files, named &lsquo;<b>foo</b>&rsquo; and
&lsquo;<b>bar</b>&rsquo;. Note that a pipe is an implicit
redirection; thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>date &gt;foo
| cat</b></p>

<p style="margin-left:11%; margin-top: 1em">writes the date
to the file &lsquo;<b>foo</b>&rsquo;, and also pipes it to
cat.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>MULTIOS</b> option is set, the word after a redirection
operator is also subjected to filename generation
(globbing). Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>: &gt;
*</b></p>

<p style="margin-left:11%; margin-top: 1em">will truncate
all files in the current directory, assuming there&rsquo;s
at least one. (Without the <b>MULTIOS</b> option, it would
create an empty file called &lsquo;<b>*</b>&rsquo;.)
Similarly, you can do</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo exit 0
&gt;&gt; *.sh</b></p>

<p style="margin-left:11%; margin-top: 1em">If the user
tries to open a file descriptor for reading more than once,
the shell opens the file descriptor as a pipe to a process
that copies all the specified inputs to its output in the
order specified, similar to <b>cat</b>, provided the
<b>MULTIOS</b> option is set. Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>sort &lt;foo
&lt;fubar</b></p>

<p style="margin-left:11%; margin-top: 1em">or even</p>

<p style="margin-left:22%; margin-top: 1em"><b>sort
&lt;f{oo,ubar}</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to &lsquo;<b>cat foo fubar | sort</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Expansion of
the redirection argument occurs at the point the redirection
is opened, at the point described above for the expansion of
the variable in <b>&gt;&amp;$myfd</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that a
pipe is an implicit redirection; thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>cat bar |
sort &lt;foo</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to &lsquo;<b>cat bar foo | sort</b>&rsquo; (note the order
of the inputs).</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>MULTIOS</b> option is <i>un</i>set, each redirection
replaces the previous redirection for that file descriptor.
However, all files redirected to are actually opened, so</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo foo
&gt; bar &gt; baz</b></p>

<p style="margin-left:11%; margin-top: 1em">when
<b>MULTIOS</b> is unset will truncate bar, and write
&lsquo;<b>foo</b>&rsquo; into baz.</p>

<p style="margin-left:11%; margin-top: 1em">There is a
problem when an output multio is attached to an external
program. A simple example shows this:</p>

<p style="margin-left:22%; margin-top: 1em"><b>cat file
&gt;file1 &gt;file2 <br>
cat file1 file2</b></p>

<p style="margin-left:11%; margin-top: 1em">Here, it is
possible that the second &lsquo;<b>cat</b>&rsquo; will not
display the full contents of <b>file1</b> and <b>file2</b>
(i.e. the original contents of <b>file</b> repeated
twice).</p>

<p style="margin-left:11%; margin-top: 1em">The reason for
this is that the multios are spawned after the <b>cat</b>
process is forked from the parent shell, so the parent shell
does not wait for the multios to finish writing data. This
means the command as shown can exit before <b>file1</b> and
<b>file2</b> are completely written. As a workaround, it is
possible to run the <b>cat</b> process as part of a job in
the current shell:</p>

<p style="margin-left:22%; margin-top: 1em"><b>{ cat file }
&gt;file &gt;file2</b></p>

<p style="margin-left:11%; margin-top: 1em">Here, the
<b>{</b><i>...</i><b>}</b> job will pause to wait for both
files to be written.</p>

<h2>REDIRECTIONS WITH NO COMMAND
<a name="REDIRECTIONS WITH NO COMMAND"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When a simple
command consists of one or more redirection operators and
zero or more parameter assignments, but no command name, zsh
can behave in several ways.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>NULLCMD</b> is not set or the option
<b>CSH_NULLCMD</b> is set, an error is caused. This is the
<b>csh</b> behavior and <b>CSH_NULLCMD</b> is set by default
when emulating <b>csh</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>SH_NULLCMD</b> is set, the builtin &lsquo;<b>:</b>&rsquo;
is inserted as a command with the given redirections. This
is the default when emulating <b>sh</b> or <b>ksh</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, if
the parameter <b>NULLCMD</b> is set, its value will be used
as a command with the given redirections. If both
<b>NULLCMD</b> and <b>READNULLCMD</b> are set, then the
value of the latter will be used instead of that of the
former when the redirection is an input. The default for
<b>NULLCMD</b> is &lsquo;<b>cat</b>&rsquo; and for
<b>READNULLCMD</b> is &lsquo;<b>more</b>&rsquo;. Thus</p>

<p style="margin-left:22%; margin-top: 1em"><b>&lt;
file</b></p>

<p style="margin-left:11%; margin-top: 1em">shows the
contents of <b>file</b> on standard output, with paging if
that is a terminal. <b>NULLCMD</b> and <b>READNULLCMD</b>
may refer to shell functions.</p>

<h2>COMMAND EXECUTION
<a name="COMMAND EXECUTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a command
name contains no slashes, the shell attempts to locate it.
If there exists a shell function by that name, the function
is invoked as described in the section
&lsquo;Functions&rsquo;. If there exists a shell builtin by
that name, the builtin is invoked.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, the
shell searches each element of <b>$path</b> for a directory
containing an executable file by that name. If the search is
unsuccessful, the shell prints an error message and returns
a nonzero exit status.</p>

<p style="margin-left:11%; margin-top: 1em">If execution
fails because the file is not in executable format, and the
file is not a directory, it is assumed to be a shell script.
<b>/bin/sh</b> is spawned to execute it. If the program is a
file beginning with &lsquo;<b>#!</b>&rsquo;, the remainder
of the first line specifies an interpreter for the program.
The shell will execute the specified interpreter on
operating systems that do not handle this executable format
in the kernel.</p>

<p style="margin-left:11%; margin-top: 1em">If no external
command is found but a function
<b>command_not_found_handler</b> exists the shell executes
this function with all command line arguments. The function
should return status zero if it successfully handled the
command, or non&minus;zero status if it failed. In the
latter case the standard handling is applied: &lsquo;command
not found&rsquo; is printed to standard error and the shell
exits with status 127. Note that the handler is executed in
a subshell forked to execute an external command, hence
changes to directories, shell parameters, etc. have no
effect on the main shell.</p>

<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Shell functions
are defined with the <b>function</b> reserved word or the
special syntax &lsquo;<i>funcname</i> <b>()</b>&rsquo;.
Shell functions are read in and stored internally. Alias
names are resolved when the function is read. Functions are
executed like commands with the arguments passed as
positional parameters. (See the section &lsquo;Command
Execution&rsquo;.)</p>

<p style="margin-left:11%; margin-top: 1em">Functions
execute in the same process as the caller and share all
files and present working directory with the caller. A trap
on <b>EXIT</b> set inside a function is executed after the
function completes in the environment of the caller.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>return</b> builtin is used to return from function
calls.</p>

<p style="margin-left:11%; margin-top: 1em">Function
identifiers can be listed with the <b>functions</b> builtin.
Functions can be undefined with the <b>unfunction</b>
builtin.</p>

<h2>AUTOLOADING FUNCTIONS
<a name="AUTOLOADING FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A function can
be marked as <i>undefined</i> using the <b>autoload</b>
builtin (or &lsquo;<b>functions &minus;u</b>&rsquo; or
&lsquo;<b>typeset &minus;fu</b>&rsquo;). Such a function has
no body. When the function is first executed, the shell
searches for its definition using the elements of the
<b>fpath</b> variable. Thus to define functions for
autoloading, a typical sequence is:</p>


<p style="margin-left:22%; margin-top: 1em"><b>fpath=(~/myfuncs
$fpath) <br>
autoload myfunc1 myfunc2 ...</b></p>

<p style="margin-left:11%; margin-top: 1em">The usual alias
expansion during reading will be suppressed if the
<b>autoload</b> builtin or its equivalent is given the
option <b>&minus;U</b>. This is recommended for the use of
functions supplied with the zsh distribution. Note that for
functions precompiled with the <b>zcompile</b> builtin
command the flag <b>&minus;U</b> must be provided when the
<b>.zwc</b> file is created, as the corresponding
information is compiled into the latter.</p>

<p style="margin-left:11%; margin-top: 1em">For each
<i>element</i> in <b>fpath</b>, the shell looks for three
possible files, the newest of which is used to load the
definition for the function: <i><br>
element</i><b>.zwc</b></p>

<p style="margin-left:22%;">A file created with the
<b>zcompile</b> builtin command, which is expected to
contain the definitions for all functions in the directory
named <i>element</i>. The file is treated in the same manner
as a directory containing files for functions and is
searched for the definition of the function. If the
definition is not found, the search for a definition
proceeds with the other two possibilities described
below.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>element</i> already includes a <b>.zwc</b> extension
(i.e. the extension was explicitly given by the user),
<i>element</i> is searched for the definition of the
function without comparing its age to that of other files;
in fact, there does not need to be any directory named
<i>element</i> without the suffix. Thus including an element
such as &lsquo;<b>/usr/local/funcs.zwc</b>&rsquo; in
<b>fpath</b> will speed up the search for functions, with
the disadvantage that functions included must be explicitly
recompiled by hand before the shell notices any changes.</p>


<p style="margin-left:11%;"><i>element</i><b>/</b><i>function</i><b>.zwc</b></p>

<p style="margin-left:22%;">A file created with
<b>zcompile</b>, which is expected to contain the definition
for <i>function</i>. It may include other function
definitions as well, but those are neither loaded nor
executed; a file found in this way is searched <i>only</i>
for the definition of <i>function</i>.</p>


<p style="margin-left:11%;"><i>element</i><b>/</b><i>function</i></p>

<p style="margin-left:22%;">A file of zsh command text,
taken to be the definition for <i>function</i>.</p>

<p style="margin-left:11%; margin-top: 1em">In summary, the
order of searching is, first, in the <i>parents of</i>
directories in <b>fpath</b> for the newer of either a
compiled directory or a directory in <b>fpath</b>; second,
if more than one of these contains a definition for the
function that is sought, the leftmost in the <b>fpath</b> is
chosen; and third, within a directory, the newer of either a
compiled function or an ordinary function definition is
used.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>KSH_AUTOLOAD</b> option is set, or the file contains only
a simple definition of the function, the file&rsquo;s
contents will be executed. This will normally define the
function in question, but may also perform initialization,
which is executed in the context of the function execution,
and may therefore define local parameters. It is an error if
the function is not defined by loading the file.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise, the
function body (with no surrounding
&lsquo;<i>funcname</i><b>() {</b><i>...</i><b>}</b>&rsquo;)
is taken to be the complete contents of the file. This form
allows the file to be used directly as an executable shell
script. If processing of the file results in the function
being re&minus;defined, the function itself is not
re&minus;executed. To force the shell to perform
initialization and then call the function defined, the file
should contain initialization code (which will be executed
then discarded) in addition to a complete function
definition (which will be retained for subsequent calls to
the function), and a call to the shell function, including
any arguments, at the end.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
suppose the autoload file <b>func</b> contains</p>

<p style="margin-left:22%; margin-top: 1em"><b>func() {
print This is func; } <br>
print func is initialized</b></p>

<p style="margin-left:11%; margin-top: 1em">then
&lsquo;<b>func; func</b>&rsquo; with <b>KSH_AUTOLOAD</b> set
will produce both messages on the first call, but only the
message &lsquo;<b>This is func</b>&rsquo; on the second and
subsequent calls. Without <b>KSH_AUTOLOAD</b> set, it will
produce the initialization message on the first call, and
the other message on the second and subsequent calls.</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to create a function that is not marked as
autoloaded, but which loads its own definition by searching
<b>fpath</b>, by using &lsquo;<b>autoload
&minus;X</b>&rsquo; within a shell function. For example,
the following are equivalent:</p>

<p style="margin-left:22%; margin-top: 1em"><b>myfunc() {
<br>
autoload &minus;X <br>
} <br>
myfunc args...</b></p>

<p style="margin-left:11%; margin-top: 1em">and</p>

<p style="margin-left:22%; margin-top: 1em"><b>unfunction
myfunc # if myfunc was defined <br>
autoload myfunc <br>
myfunc args...</b></p>

<p style="margin-left:11%; margin-top: 1em">In fact, the
<b>functions</b> command outputs &lsquo;<b>builtin autoload
&minus;X</b>&rsquo; as the body of an autoloaded function.
This is done so that</p>

<p style="margin-left:22%; margin-top: 1em"><b>eval
&quot;$(functions)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">produces a
reasonable result. A true autoloaded function can be
identified by the presence of the comment &lsquo;<b>#
undefined</b>&rsquo; in the body, because all comments are
discarded from defined functions.</p>

<p style="margin-left:11%; margin-top: 1em">To load the
definition of an autoloaded function <b>myfunc</b> without
executing <b>myfunc</b>, use:</p>

<p style="margin-left:22%; margin-top: 1em"><b>autoload +X
myfunc</b></p>

<h2>ANONYMOUS FUNCTIONS
<a name="ANONYMOUS FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If no name is
given for a function, it is &lsquo;anonymous&rsquo; and is
handled specially. Either form of function definition may be
used: a &lsquo;<b>()</b>&rsquo; with no preceding name, or a
&lsquo;<b>function</b>&rsquo; with an immediately following
open brace. The function is executed immediately at the
point of definition and is not stored for future use. The
function name is set to &lsquo;<b>(anon)</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Arguments to
the function may be specified as words following the closing
brace defining the function, hence if there are none no
arguments (other than <b>$0</b>) are set. This is a
difference from the way other functions are parsed: normal
function definitions may be followed by certain keywords
such as &lsquo;<b>else</b>&rsquo; or
&lsquo;<b>fi</b>&rsquo;, which will be treated as arguments
to anonymous functions, so that a newline or semicolon is
needed to force keyword interpretation.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
the argument list of any enclosing script or function is
hidden (as would be the case for any other function called
at this point).</p>

<p style="margin-left:11%; margin-top: 1em">Redirections
may be applied to the anonymous function in the same manner
as to a current&minus;shell structure enclosed in braces.
The main use of anonymous functions is to provide a scope
for local variables. This is particularly convenient in
start&minus;up files as these do not provide their own local
variable scope.</p>

<p style="margin-left:11%; margin-top: 1em">For
example,</p>


<p style="margin-left:22%; margin-top: 1em"><b>variable=outside
<br>
function { <br>
local variable=inside <br>
print &quot;I am $variable with arguments $*&quot; <br>
} this and that <br>
print &quot;I am $variable&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs the
following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>I am inside
with arguments this and that <br>
I am outside</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that
function definitions with arguments that expand to nothing,
for example &lsquo;<b>name=; function $name {</b> <i>...</i>
<b>}</b>&rsquo;, are not treated as anonymous functions.
Instead, they are treated as normal function definitions
where the definition is silently discarded.</p>

<h2>SPECIAL FUNCTIONS
<a name="SPECIAL FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certain
functions, if defined, have special meaning to the
shell.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Hook
Functions</b> <br>
For the functions below, it is possible to define an array
that has the same name as the function with
&lsquo;<b>_functions</b>&rsquo; appended. Any element in
such an array is taken as the name of a function to execute;
it is executed in the same context and with the same
arguments as the basic function. For example, if
<b>$chpwd_functions</b> is an array containing the values
&lsquo;<b>mychpwd</b>&rsquo;,
&lsquo;<b>chpwd_save_dirstack</b>&rsquo;, then the shell
attempts to execute the functions
&lsquo;<b>chpwd</b>&rsquo;, &lsquo;<b>mychpwd</b>&rsquo; and
&lsquo;<b>chpwd_save_dirstack</b>&rsquo;, in that order. Any
function that does not exist is silently ignored. A function
found by this mechanism is referred to elsewhere as a
&lsquo;hook function&rsquo;. An error in any function causes
subsequent functions not to be run. Note further that an
error in a <b>precmd</b> hook causes an immediately
following <b>periodic</b> function not to run (though it may
run at the next opportunity).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>chpwd</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Executed whenever the current working directory is
changed.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>periodic</b></p>

<p style="margin-left:22%;">If the parameter <b>PERIOD</b>
is set, this function is executed every <b>$PERIOD</b>
seconds, just before a prompt. Note that if multiple
functions are defined using the array
<b>periodic_functions</b> only one period is applied to the
complete set of functions, and the scheduled time is not
reset if the list of functions is altered. Hence the set of
functions is always called together.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>precmd</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Executed before each prompt. Note that precommand
functions are not re&minus;executed simply because the
command line is redrawn, as happens, for example, when a
notification about an exiting job is displayed.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>preexec</b></p>

<p style="margin-left:22%;">Executed just after a command
has been read and is about to be executed. If the history
mechanism is active (and the line was not discarded from the
history buffer), the string that the user typed is passed as
the first argument, otherwise it is an empty string. The
actual command that will be executed (including expanded
aliases) is passed in two different forms: the second
argument is a single&minus;line, size&minus;limited version
of the command (with things like function bodies elided);
the third argument contains the full text that is being
executed.</p>

<p style="margin-left:11%;"><b>zshaddhistory</b></p>

<p style="margin-left:22%;">Executed when a history line
has been read interactively, but before it is executed. The
sole argument is the complete history line (so that any
terminating newline will still be present).</p>

<p style="margin-left:22%; margin-top: 1em">If any of the
hook functions return a non&minus;zero value the history
line will not be saved, although it lingers in the history
until the next line is executed allow you to reuse or edit
it immediately.</p>

<p style="margin-left:22%; margin-top: 1em">A hook function
may call &lsquo;<b>fc &minus;p</b> <i>...</i>&rsquo; to
switch the history context so that the history is saved in a
different file from the that in the global <b>HISTFILE</b>
parameter. This is handled specially: the history context is
automatically restored after the processing of the history
line is finished.</p>

<p style="margin-left:22%; margin-top: 1em">The following
example function first adds the history line to the normal
history with the newline stripped, which is usually the
correct behaviour. Then it switches the history context so
that the line will be written to a history file in the
current directory.</p>


<p style="margin-left:32%; margin-top: 1em"><b>zshaddhistory()
{ <br>
print &minus;sr &minus;&minus; ${1%%$&rsquo;\n&rsquo;} <br>
fc &minus;p .zsh_local_history <br>
}</b></p>

<p style="margin-left:11%;"><b>zshexit</b></p>

<p style="margin-left:22%;">Executed at the point where the
main shell is about to exit normally. This is not called by
exiting subshells, nor when the <b>exec</b> precommand
modifier is used before an external command. Also, unlike
<b>TRAPEXIT</b>, it is not called when functions exit.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Trap
Functions</b> <br>
The functions below are treated specially but do not have
corresponding hook arrays. <b><br>
TRAP</b><i>NAL</i></p>

<p style="margin-left:22%;">If defined and non&minus;null,
this function will be executed whenever the shell catches a
signal <b>SIG</b><i>NAL</i>, where <i>NAL</i> is a signal
name as specified for the <b>kill</b> builtin. The signal
number will be passed as the first parameter to the
function.</p>

<p style="margin-left:22%; margin-top: 1em">If a function
of this form is defined and null, the shell and processes
spawned by it will ignore <b>SIG</b><i>NAL</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status from the function is handled specially. If it is
zero, the signal is assumed to have been handled, and
execution continues normally. Otherwise, the shell will
behave as interrupted except that the return status of the
trap is retained.</p>

<p style="margin-left:22%; margin-top: 1em">Programs
terminated by uncaught signals typically return the status
128 plus the signal number. Hence the following causes the
handler for <b>SIGINT</b> to print a message, then mimic the
usual effect of the signal.</p>

<p style="margin-left:32%; margin-top: 1em"><b>TRAPINT() {
<br>
print &quot;Caught SIGINT, aborting.&quot; <br>
return $(( 128 + $1 )) <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">The functions
<b>TRAPZERR</b>, <b>TRAPDEBUG</b> and <b>TRAPEXIT</b> are
never executed inside other traps.</p>

<p style="margin-left:11%;"><b>TRAPDEBUG</b></p>

<p style="margin-left:22%;">If the option
<b>DEBUG_BEFORE_CMD</b> is set (as it is by default),
executed before each command; otherwise executed after each
command. See the description of the <b>trap</b> builtin in
<i>zshbuiltins</i>(1) for details of additional features
provided in debug traps.</p>

<p style="margin-left:11%;"><b>TRAPEXIT</b></p>

<p style="margin-left:22%;">Executed when the shell exits,
or when the current function exits if defined inside a
function. The value of <b>$?</b> at the start of execution
is the exit status of the shell or the return status of the
function exiting.</p>

<p style="margin-left:11%;"><b>TRAPZERR</b></p>

<p style="margin-left:22%;">Executed whenever a command has
a non&minus;zero exit status. However, the function is not
executed if the command occurred in a sublist followed by
&lsquo;<b>&amp;&amp;</b>&rsquo; or &lsquo;<b>||</b>&rsquo;;
only the final command in a sublist of this type causes the
trap to be executed. The function <b>TRAPERR</b> acts the
same as <b>TRAPZERR</b> on systems where there is no
<b>SIGERR</b> (this is the usual case).</p>

<p style="margin-left:11%; margin-top: 1em">The functions
beginning &lsquo;<b>TRAP</b>&rsquo; may alternatively be
defined with the <b>trap</b> builtin: this may be preferable
for some uses. Setting a trap with one form removes any trap
of the other form for the same signal; removing a trap in
either form removes all traps for the same signal. The
forms</p>

<p style="margin-left:22%; margin-top: 1em"><b>TRAPNAL() {
<br>
# code <br>
}</b></p>


<p style="margin-left:11%; margin-top: 1em">(&rsquo;function
traps&rsquo;) and</p>

<p style="margin-left:22%; margin-top: 1em"><b>trap &rsquo;
<br>
# code <br>
&rsquo; NAL</b></p>

<p style="margin-left:11%; margin-top: 1em">(&rsquo;list
traps&rsquo;) are equivalent in most ways, the exceptions
being the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>Function traps have all the properties of normal
functions, appearing in the list of functions and being
called with their own function context rather than the
context where the trap was triggered.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The return status from function traps is special,
whereas a return from a list trap causes the surrounding
context to return with the given status.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>Function traps are not reset within subshells, in
accordance with zsh behaviour; list traps are reset, in
accordance with POSIX behaviour.</p></td></tr>
</table>

<h2>JOBS
<a name="JOBS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the
<b>MONITOR</b> option is set, an interactive shell
associates a <i>job</i> with each pipeline. It keeps a table
of current jobs, printed by the <b>jobs</b> command, and
assigns them small integer numbers. When a job is started
asynchronously with &lsquo;<b>&amp;</b>&rsquo;, the shell
prints a line to standard error which looks like:</p>

<p style="margin-left:22%; margin-top: 1em"><b>[1]
1234</b></p>

<p style="margin-left:11%; margin-top: 1em">indicating that
the job which was started asynchronously was job number 1
and had one (top&minus;level) process, whose process ID was
1234.</p>

<p style="margin-left:11%; margin-top: 1em">If a job is
started with &lsquo;<b>&amp;|</b>&rsquo; or
&lsquo;<b>&amp;!</b>&rsquo;, then that job is immediately
disowned. After startup, it does not have a place in the job
table, and is not subject to the job control features
described here.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
running a job and wish to do something else you may hit the
key ^Z (control&minus;Z) which sends a <b>TSTP</b> signal to
the current job: this key may be redefined by the
<b>susp</b> option of the external <b>stty</b> command. The
shell will then normally indicate that the job has been
&lsquo;suspended&rsquo;, and print another prompt. You can
then manipulate the state of this job, putting it in the
background with the <b>bg</b> command, or run some other
commands and then eventually bring the job back into the
foreground with the foreground command <b>fg</b>. A ^Z takes
effect immediately and is like an interrupt in that pending
output and unread input are discarded when it is typed.</p>

<p style="margin-left:11%; margin-top: 1em">A job being run
in the background will suspend if it tries to read from the
terminal.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if
the job running in the foreground is a shell function, then
suspending it will have the effect of causing the shell to
fork. This is necessary to separate the function&rsquo;s
state from that of the parent shell performing the job
control, so that the latter can return to the command line
prompt. As a result, even if <b>fg</b> is used to continue
the job the function will no longer be part of the parent
shell, and any variables set by the function will not be
visible in the parent shell. Thus the behaviour is different
from the case where the function was never suspended. Zsh is
different from many other shells in this regard.</p>

<p style="margin-left:11%; margin-top: 1em">The same
behaviour is found when the shell is executing code as the
right hand side of a pipeline or any complex shell construct
such as <b>if</b>, <b>for</b>, etc., in order that the
entire block of code can be managed as a single job.
Background jobs are normally allowed to produce output, but
this can be disabled by giving the command &lsquo;<b>stty
tostop</b>&rsquo;. If you set this tty option, then
background jobs will suspend when they try to produce output
like they do when they try to read input.</p>

<p style="margin-left:11%; margin-top: 1em">When a command
is suspended and continued later with the <b>fg</b> or
<b>wait</b> builtins, zsh restores tty modes that were in
effect when it was suspended. This (intentionally) does not
apply if the command is continued via &lsquo;<b>kill
&minus;CONT</b>&rsquo;, nor when it is continued with
<b>bg</b>.</p>

<p style="margin-left:11%; margin-top: 1em">There are
several ways to refer to jobs in the shell. A job can be
referred to by the process ID of any process of the job or
by one of the following: <b><br>
%</b><i>number</i></p>

<p style="margin-left:22%;">The job with the given
number.</p>

<p style="margin-left:11%;"><b>%</b><i>string</i></p>

<p style="margin-left:22%;">Any job whose command line
begins with <i>string</i>.</p>

<p style="margin-left:11%;"><b>%?</b><i>string</i></p>

<p style="margin-left:22%;">Any job whose command line
contains <i>string</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Current job.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%+</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Equivalent to &lsquo;<b>%%</b>&rsquo;.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%&minus;</b></p></td>
<td width="8%"></td>
<td width="29%">


<p>Previous job.</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The shell
learns immediately whenever a process changes state. It
normally informs you whenever a job becomes blocked so that
no further progress is possible. If the <b>NOTIFY</b> option
is not set, it waits until just before it prints a prompt
before it informs you. All such notifications are sent
directly to the terminal, not to the standard output or
standard error.</p>

<p style="margin-left:11%; margin-top: 1em">When the
monitor mode is on, each background job that completes
triggers any trap set for <b>CHLD</b>.</p>

<p style="margin-left:11%; margin-top: 1em">When you try to
leave the shell while jobs are running or suspended, you
will be warned that &lsquo;You have suspended (running)
jobs&rsquo;. You may use the <b>jobs</b> command to see what
they are. If you do this or immediately try to exit again,
the shell will not warn you a second time; the suspended
jobs will be terminated, and the running jobs will be sent a
<b>SIGHUP</b> signal, if the <b>HUP</b> option is set.</p>

<p style="margin-left:11%; margin-top: 1em">To avoid having
the shell terminate the running jobs, either use the
<b>nohup</b> command (see <i>nohup</i>(1)) or the
<b>disown</b> builtin.</p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>INT</b>
and <b>QUIT</b> signals for an invoked command are ignored
if the command is followed by &lsquo;<b>&amp;</b>&rsquo; and
the <b>MONITOR</b> option is not active. The shell itself
always ignores the <b>QUIT</b> signal. Otherwise, signals
have the values inherited by the shell from its parent (but
see the <b>TRAP</b><i>NAL</i> special functions in the
section &lsquo;Functions&rsquo;).</p>

<h2>ARITHMETIC EVALUATION
<a name="ARITHMETIC EVALUATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell can
perform integer and floating point arithmetic, either using
the builtin <b>let</b>, or via a substitution of the form
<b>$((...))</b>. For integers, the shell is usually compiled
to use 8&minus;byte precision where this is available,
otherwise precision is 4 bytes. This can be tested, for
example, by giving the command &lsquo;<b>print &minus; $((
12345678901 ))</b>&rsquo;; if the number appears unchanged,
the precision is at least 8 bytes. Floating point arithmetic
always uses the &lsquo;double&rsquo; type with whatever
corresponding precision is provided by the compiler and the
library.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>let</b>
builtin command takes arithmetic expressions as arguments;
each is evaluated separately. Since many of the arithmetic
operators, as well as spaces, require quoting, an
alternative form is provided: for any command which begins
with a &lsquo;<b>((</b>&rsquo;, all the characters until a
matching &lsquo;<b>))</b>&rsquo; are treated as a quoted
expression and arithmetic expansion performed as for an
argument of <b>let</b>. More precisely,
&lsquo;<b>((</b><i>...</i><b>))</b>&rsquo; is equivalent to
&lsquo;<b>let &quot;</b><i>...</i><b>&quot;</b>&rsquo;. The
return status is 0 if the arithmetic value of the expression
is non&minus;zero, 1 if it is zero, and 2 if an error
occurred.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the following statement</p>

<p style="margin-left:22%; margin-top: 1em"><b>(( val = 2 +
1 ))</b></p>

<p style="margin-left:11%; margin-top: 1em">is equivalent
to</p>

<p style="margin-left:22%; margin-top: 1em"><b>let
&quot;val = 2 + 1&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">both assigning
the value 3 to the shell variable <b>val</b> and returning a
zero status.</p>

<p style="margin-left:11%; margin-top: 1em">Integers can be
in bases other than 10. A leading &lsquo;<b>0x</b>&rsquo; or
&lsquo;<b>0X</b>&rsquo; denotes hexadecimal. Integers may
also be of the form
&lsquo;<i>base</i><b>#</b><i>n</i>&rsquo;, where <i>base</i>
is a decimal number between two and thirty&minus;six
representing the arithmetic base and <i>n</i> is a number in
that base (for example, &lsquo;<b>16#ff</b>&rsquo; is 255 in
hexadecimal). The <i>base</i><b>#</b> may also be omitted,
in which case base 10 is used. For backwards compatibility
the form &lsquo;<b>[</b><i>base</i><b>]</b><i>n</i>&rsquo;
is also accepted.</p>

<p style="margin-left:11%; margin-top: 1em">An integer
expression or a base given in the form
&lsquo;<i>base</i><b>#</b><i>n</i>&rsquo; may contain
underscores (&lsquo;<b>_</b>&rsquo;) after the leading digit
for visual guidance; these are ignored in computation.
Examples are <b>1_000_000</b> or <b>0xffff_ffff</b> which
are equivalent to <b>1000000</b> and <b>0xffffffff</b>
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to specify a base to be used for output in the form
&lsquo;<b>[#</b><i>base</i><b>]</b>&rsquo;, for example
&lsquo;<b>[#16]</b>&rsquo;. This is used when outputting
arithmetical substitutions or when assigning to scalar
parameters, but an explicitly defined integer or floating
point parameter will not be affected. If an integer variable
is implicitly defined by an arithmetic expression, any base
specified in this way will be set as the variable&rsquo;s
output arithmetic base as if the option
&lsquo;<b>&minus;i</b> <i>base</i>&rsquo; to the
<b>typeset</b> builtin had been used. The expression has no
precedence and if it occurs more than once in a mathematical
expression, the last encountered is used. For clarity it is
recommended that it appear at the beginning of an
expression. As an example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;i 16 y <br>
print $(( [#8] x = 32, y = 32 )) <br>
print $x $y</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs first
&lsquo;<b>8#40</b>&rsquo;, the rightmost value in the given
output base, and then &lsquo;<b>8#40 16#20</b>&rsquo;,
because <b>y</b> has been explicitly declared to have output
base 16, while <b>x</b> (assuming it does not already exist)
is implicitly typed by the arithmetic evaluation, where it
acquires the output base 8.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>C_BASES</b> option is set, hexadecimal numbers in the
standard C format, for example <b>0xFF</b> instead of the
usual &lsquo;<b>16#FF</b>&rsquo;. If the option
<b>OCTAL_ZEROES</b> is also set (it is not by default),
octal numbers will be treated similarly and hence appear as
&lsquo;<b>077</b>&rsquo; instead of
&lsquo;<b>8#77</b>&rsquo;. This option has no effect on the
output of bases other than hexadecimal and octal, and these
formats are always understood on input.</p>

<p style="margin-left:11%; margin-top: 1em">When an output
base is specified using the
&lsquo;<b>[#</b><i>base</i><b>]</b>&rsquo; syntax, an
appropriate base prefix will be output if necessary, so that
the value output is valid syntax for input. If the <b>#</b>
is doubled, for example &lsquo;<b>[##16]</b>&rsquo;, then no
base prefix is output.</p>

<p style="margin-left:11%; margin-top: 1em">Floating point
constants are recognized by the presence of a decimal point
or an exponent. The decimal point may be the first character
of the constant, but the exponent character <b>e</b> or
<b>E</b> may not, as it will be taken for a parameter name.
All numeric parts (before and after the decimal point and in
the exponent) may contain underscores after the leading
digit for visual guidance; these are ignored in
computation.</p>

<p style="margin-left:11%; margin-top: 1em">An arithmetic
expression uses nearly the same syntax and associativity of
expressions as in C.</p>

<p style="margin-left:11%; margin-top: 1em">In the native
mode of operation, the following operators are supported
(listed in decreasing order of precedence): <b><br>
+ &minus; ! ~ ++ &minus;&minus;</b></p>

<p style="margin-left:22%;">unary plus/minus, logical NOT,
complement, {pre,post}{in,de}crement</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&lt;&lt; &gt;&gt;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise shift left, right</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise AND</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise XOR</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise OR</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>**</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>exponentiation</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>* / %</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>multiplication, division, modulus (remainder)</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>+ &minus;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>addition, subtraction</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt; &gt; &lt;=
&gt;=</b></p>

<p style="margin-left:22%;">comparison</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>== !=</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>equality and inequality</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|| ^^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical OR, XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>? :</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>ternary operator</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>= += &minus;= *= /= %=
&amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^=
**=</b></p>

<p style="margin-left:22%;">assignment</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>,</b></p></td>
<td width="10%"></td>
<td width="21%">


<p>comma operator</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The operators
&lsquo;<b>&amp;&amp;</b>&rsquo;, &lsquo;<b>||</b>&rsquo;,
&lsquo;<b>&amp;&amp;=</b>&rsquo;, and
&lsquo;<b>||=</b>&rsquo; are short&minus;circuiting, and
only one of the latter two expressions in a ternary operator
is evaluated. Note the precedence of the bitwise AND, OR,
and XOR operators.</p>

<p style="margin-left:11%; margin-top: 1em">With the option
<b>C_PRECEDENCES</b> the precedences (but no other
properties) of the operators are altered to be the same as
those in most other languages that support the relevant
operators: <b><br>
+ &minus; ! ~ ++ &minus;&minus;</b></p>

<p style="margin-left:22%;">unary plus/minus, logical NOT,
complement, {pre,post}{in,de}crement</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>**</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>exponentiation</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>* / %</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>multiplication, division, modulus (remainder)</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>+ &minus;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>addition, subtraction</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&lt;&lt; &gt;&gt;</b></p></td>
<td width="4%"></td>
<td width="69%">


<p>bitwise shift left, right</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>&lt; &gt; &lt;=
&gt;=</b></p>

<p style="margin-left:22%;">comparison</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>== !=</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>equality and inequality</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>|</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>bitwise OR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&amp;&amp;</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical AND</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>^^</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical XOR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>||</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>logical OR</p></td>
<td width="43%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>? :</b></p></td>
<td width="4%"></td>
<td width="35%">


<p>ternary operator</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>= += &minus;= *= /= %=
&amp;= ^= |= &lt;&lt;= &gt;&gt;= &amp;&amp;= ||= ^^=
**=</b></p>

<p style="margin-left:22%;">assignment</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>,</b></p></td>
<td width="10%"></td>
<td width="21%">


<p>comma operator</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note the
precedence of exponentiation in both cases is below that of
unary operators, hence &lsquo;<b>&minus;3**2</b>&rsquo;
evaluates as &lsquo;<b>9</b>&rsquo;, not <b>&minus;9</b>.
Use parentheses where necessary:
&lsquo;<b>&minus;(3**2)</b>&rsquo;. This is for
compatibility with other shells.</p>

<p style="margin-left:11%; margin-top: 1em">Mathematical
functions can be called with the syntax
&lsquo;<i>func</i><b>(</b><i>args</i><b>)</b>&rsquo;, where
the function decides if the <i>args</i> is used as a string
or a comma&minus;separated list of arithmetic expressions.
The shell currently defines no mathematical functions by
default, but the module <b>zsh/mathfunc</b> may be loaded
with the <b>zmodload</b> builtin to provide standard
floating point mathematical functions.</p>

<p style="margin-left:11%; margin-top: 1em">An expression
of the form &lsquo;<b>##</b><i>x</i>&rsquo; where <i>x</i>
is any character sequence such as &lsquo;<b>a</b>&rsquo;,
&lsquo;<b>^A</b>&rsquo;, or
&lsquo;<b>\M&minus;\C&minus;x</b>&rsquo; gives the value of
this character and an expression of the form
&lsquo;<b>#</b><i>foo</i>&rsquo; gives the value of the
first character of the contents of the parameter <i>foo</i>.
Character values are according to the character set used in
the current locale; for multibyte character handling the
option <b>MULTIBYTE</b> must be set. Note that this form is
different from &lsquo;<b>$#</b><i>foo</i>&rsquo;, a standard
parameter substitution which gives the length of the
parameter <i>foo</i>. &lsquo;<b>#\</b>&rsquo; is accepted
instead of &lsquo;<b>##</b>&rsquo;, but its use is
deprecated.</p>

<p style="margin-left:11%; margin-top: 1em">Named
parameters and subscripted arrays can be referenced by name
within an arithmetic expression without using the parameter
expansion syntax. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>((val2 =
val1 * 2))</b></p>

<p style="margin-left:11%; margin-top: 1em">assigns twice
the value of <b>$val1</b> to the parameter named
<b>val2</b>.</p>

<p style="margin-left:11%; margin-top: 1em">An internal
integer representation of a named parameter can be specified
with the <b>integer</b> builtin. Arithmetic evaluation is
performed on the value of each assignment to a named
parameter declared integer in this manner. Assigning a
floating point number to an integer results in rounding down
to the next integer.</p>

<p style="margin-left:11%; margin-top: 1em">Likewise,
floating point numbers can be declared with the <b>float</b>
builtin; there are two types, differing only in their output
format, as described for the <b>typeset</b> builtin. The
output format can be bypassed by using arithmetic
substitution instead of the parameter substitution, i.e.
&lsquo;<b>${</b><i>float</i><b>}</b>&rsquo; uses the defined
format, but &lsquo;<b>$((</b><i>float</i><b>))</b>&rsquo;
uses a generic floating point format.</p>

<p style="margin-left:11%; margin-top: 1em">Promotion of
integer to floating point values is performed where
necessary. In addition, if any operator which requires an
integer (&lsquo;<b>~</b>&rsquo;, &lsquo;<b>&amp;</b>&rsquo;,
&lsquo;<b>|</b>&rsquo;, &lsquo;<b>^</b>&rsquo;,
&lsquo;<b>%</b>&rsquo;, &lsquo;<b>&lt;&lt;</b>&rsquo;,
&lsquo;<b>&gt;&gt;</b>&rsquo; and their equivalents with
assignment) is given a floating point argument, it will be
silently rounded down to the next integer.</p>

<p style="margin-left:11%; margin-top: 1em">Scalar
variables can hold integer or floating point values at
different times; there is no memory of the numeric type in
this case.</p>

<p style="margin-left:11%; margin-top: 1em">If a variable
is first assigned in a numeric context without previously
being declared, it will be implicitly typed as
<b>integer</b> or <b>float</b> and retain that type either
until the type is explicitly changed or until the end of the
scope. This can have unforeseen consequences. For example,
in the loop</p>

<p style="margin-left:22%; margin-top: 1em"><b>for (( f =
0; f &lt; 1; f += 0.1 )); do <br>
# use $f <br>
done</b></p>

<p style="margin-left:11%; margin-top: 1em">if <b>f</b> has
not already been declared, the first assignment will cause
it to be created as an integer, and consequently the
operation &lsquo;<b>f += 0.1</b>&rsquo; will always cause
the result to be truncated to zero, so that the loop will
fail. A simple fix would be to turn the initialization into
&lsquo;<b>f = 0.0</b>&rsquo;. It is therefore best to
declare numeric variables with explicit types.</p>

<h2>CONDITIONAL EXPRESSIONS
<a name="CONDITIONAL EXPRESSIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A
<i>conditional expression</i> is used with the <b>[[</b>
compound command to test attributes of files and to compare
strings. Each expression can be constructed from one or more
of the following unary or binary expressions: <b><br>
&minus;a</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists.</p>

<p style="margin-left:11%;"><b>&minus;b</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a block special file.</p>

<p style="margin-left:11%;"><b>&minus;c</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a character special file.</p>

<p style="margin-left:11%;"><b>&minus;d</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a directory.</p>

<p style="margin-left:11%;"><b>&minus;e</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists.</p>

<p style="margin-left:11%;"><b>&minus;f</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a regular file.</p>

<p style="margin-left:11%;"><b>&minus;g</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its setgid bit set.</p>

<p style="margin-left:11%;"><b>&minus;h</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a symbolic link.</p>

<p style="margin-left:11%;"><b>&minus;k</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its sticky bit set.</p>

<p style="margin-left:11%;"><b>&minus;n</b>
<i>string</i></p>

<p style="margin-left:22%;">true if length of <i>string</i>
is non&minus;zero.</p>

<p style="margin-left:11%;"><b>&minus;o</b>
<i>option</i></p>

<p style="margin-left:22%;">true if option named
<i>option</i> is on. <i>option</i> may be a single
character, in which case it is a single letter option name.
(See the section &lsquo;Specifying Options&rsquo;.)</p>

<p style="margin-left:11%;"><b>&minus;p</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a FIFO special file (named pipe).</p>

<p style="margin-left:11%;"><b>&minus;r</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is readable by current process.</p>

<p style="margin-left:11%;"><b>&minus;s</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has size greater than zero.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;t</b> <i>fd</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>true if file descriptor number <i>fd</i> is open and
associated with a terminal device. (note: <i>fd</i> is not
optional)</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;u</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
has its setuid bit set.</p>

<p style="margin-left:11%;"><b>&minus;w</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is writable by current process.</p>

<p style="margin-left:11%;"><b>&minus;x</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is executable by current process. If <i>file</i> exists and
is a directory, then the current process has permission to
search in the directory.</p>

<p style="margin-left:11%;"><b>&minus;z</b>
<i>string</i></p>

<p style="margin-left:22%;">true if length of <i>string</i>
is zero.</p>

<p style="margin-left:11%;"><b>&minus;L</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a symbolic link.</p>

<p style="margin-left:11%;"><b>&minus;O</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is owned by the effective user ID of this process.</p>

<p style="margin-left:11%;"><b>&minus;G</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
its group matches the effective group ID of this
process.</p>

<p style="margin-left:11%;"><b>&minus;S</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
is a socket.</p>

<p style="margin-left:11%;"><b>&minus;N</b> <i>file</i></p>

<p style="margin-left:22%;">true if <i>file</i> exists and
its access time is not newer than its modification time.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;nt</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> exists and
is newer than <i>file2</i>.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;ot</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> exists and
is older than <i>file2</i>.</p>

<p style="margin-left:11%;"><i>file1</i> <b>&minus;ef</b>
<i>file2</i></p>

<p style="margin-left:22%;">true if <i>file1</i> and
<i>file2</i> exist and refer to the same file.</p>

<p style="margin-left:11%;"><i>string</i> <b>=</b>
<i>pattern <br>
string</i> <b>==</b> <i>pattern</i></p>

<p style="margin-left:22%;">true if <i>string</i> matches
<i>pattern</i>. The &lsquo;<b>==</b>&rsquo; form is the
preferred one. The &lsquo;<b>=</b>&rsquo; form is for
backward compatibility and should be considered
obsolete.</p>

<p style="margin-left:11%;"><i>string</i> <b>!=</b>
<i>pattern</i></p>

<p style="margin-left:22%;">true if <i>string</i> does not
match <i>pattern</i>.</p>

<p style="margin-left:11%;"><i>string</i> <b>=~</b>
<i>regexp</i></p>

<p style="margin-left:22%;">true if <i>string</i> matches
the regular expression <i>regexp</i>. If the option
<b>RE_MATCH_PCRE</b> is set <i>regexp</i> is tested as a
PCRE regular expression using the <b>zsh/pcre</b> module,
else it is tested as a POSIX extended regular expression
using the <b>zsh/regex</b> module. Upon successful match,
some variables will be updated; no variables are changed if
the matching fails.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>BASH_REMATCH</b> is not set the scalar parameter
<b>MATCH</b> is set to the substring that matched the
pattern and the integer parameters <b>MBEGIN</b> and
<b>MEND</b> to the index of the start and end, respectively,
of the match in <i>string</i>, such that if <i>string</i> is
contained in variable <b>var</b> the expression
&lsquo;${var[$MBEGIN,$MEND]}&rsquo; is identical to
&lsquo;$MATCH&rsquo;. The setting of the option
<b>KSH_ARRAYS</b> is respected. Likewise, the array
<b>match</b> is set to the substrings that matched
parenthesised subexpressions and the arrays <b>mbegin</b>
and <b>mend</b> to the indices of the start and end
positions, respectively, of the substrings within
<i>string</i>. The arrays are not set if there were no
parenthesised subexpresssions. For example, if the string
&lsquo;<b>a short string</b>&rsquo; is matched against the
regular expression &lsquo;<b>s(...)t</b>&rsquo;, then
(assuming the option <b>KSH_ARRAYS</b> is not set)
<b>MATCH</b>, <b>MBEGIN</b> and <b>MEND</b> are
&lsquo;<b>short</b>&rsquo;, 3 and 7, respectively, while
<b>match</b>, <b>mbegin</b> and <b>mend</b> are single entry
arrays containing the strings &lsquo;<b>hor</b>&rsquo;,
&lsquo;<b>4</b>&rsquo; and &lsquo;<b>6</b>,
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>BASH_REMATCH</b> is set the array <b>BASH_REMATCH</b> is
set to the substring that matched the pattern followed by
the substrings that matched parenthesised subexpressions
within the pattern.</p>

<p style="margin-left:11%;"><i>string1</i> <b>&lt;</b>
<i>string2</i></p>

<p style="margin-left:22%;">true if <i>string1</i> comes
before <i>string2</i> based on ASCII value of their
characters.</p>

<p style="margin-left:11%;"><i>string1</i> <b>&gt;</b>
<i>string2</i></p>

<p style="margin-left:22%;">true if <i>string1</i> comes
after <i>string2</i> based on ASCII value of their
characters.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;eq</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically equal to <i>exp2</i>. Note that for purely
numeric comparisons use of the <b>((</b><i>...</i><b>))</b>
builtin described in the section &lsquo;ARITHMETIC
EVALUATION&rsquo; is more convenient than conditional
expressions.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;ne</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically not equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;lt</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically less than <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;gt</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically greater than <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;le</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically less than or equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>&minus;ge</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> is
numerically greater than or equal to <i>exp2</i>.</p>

<p style="margin-left:11%;"><b>(</b> <i>exp</i>
<b>)</b></p>

<p style="margin-left:22%;">true if <i>exp</i> is true.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>!</b> <i>exp</i></p></td>
<td width="4%"></td>
<td width="32%">


<p>true if <i>exp</i> is false.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><i>exp1</i> <b>&amp;&amp;</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if <i>exp1</i> and
<i>exp2</i> are both true.</p>

<p style="margin-left:11%;"><i>exp1</i> <b>||</b>
<i>exp2</i></p>

<p style="margin-left:22%;">true if either <i>exp1</i> or
<i>exp2</i> is true.</p>

<p style="margin-left:11%; margin-top: 1em">Normal shell
expansion is performed on the <i>file</i>, <i>string</i> and
<i>pattern</i> arguments, but the result of each expansion
is constrained to be a single word, similar to the effect of
double quotes. Filename generation is not performed on any
form of argument to conditions. However, pattern
metacharacters are active for the <i>pattern</i> arguments;
the patterns are the same as those used for filename
generation, see <i>zshexpn</i>(1), but there is no special
behaviour of &lsquo;<b>/</b>&rsquo; nor initial dots, and no
glob qualifiers are allowed.</p>

<p style="margin-left:11%; margin-top: 1em">In each of the
above expressions, if <i>file</i> is of the form
&lsquo;<b>/dev/fd/</b><i>n</i>&rsquo;, where <i>n</i> is an
integer, then the test applied to the open file whose
descriptor number is <i>n</i>, even if the underlying system
does not support the <b>/dev/fd</b> directory.</p>

<p style="margin-left:11%; margin-top: 1em">In the forms
which do numeric comparison, the expressions <i>exp</i>
undergo arithmetic expansion as if they were enclosed in
<b>$((...))</b>.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>[[ (
&minus;f foo || &minus;f bar ) &amp;&amp; $report = y* ]]
&amp;&amp; print File exists.</b></p>

<p style="margin-left:11%; margin-top: 1em">tests if either
file <b>foo</b> or file <b>bar</b> exists, and if so, if the
value of the parameter <b>report</b> begins with
&lsquo;<b>y</b>&rsquo;; if the complete condition is true,
the message &lsquo;<b>File exists.</b>&rsquo; is
printed.</p>

<h2>EXPANSION OF PROMPT SEQUENCES
<a name="EXPANSION OF PROMPT SEQUENCES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Prompt
sequences undergo a special form of expansion. This type of
expansion is also available using the <b>&minus;P</b> option
to the <b>print</b> builtin.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_SUBST</b> option is set, the prompt string is
first subjected to <i>parameter expansion</i>, <i>command
substitution</i> and <i>arithmetic expansion</i>. See
<i>zshexpn</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Certain escape
sequences may be recognised in the prompt string.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_BANG</b> option is set, a &lsquo;<b>!</b>&rsquo;
in the prompt is replaced by the current history event
number. A literal &lsquo;<b>!</b>&rsquo; may then be
represented as &lsquo;<b>!!</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>PROMPT_PERCENT</b> option is set, certain escape
sequences that start with &lsquo;<b>%</b>&rsquo; are
expanded. Many escapes are followed by a single character,
although some of these take an optional integer argument
that should appear between the &lsquo;<b>%</b>&rsquo; and
the next character of the sequence. More complicated escape
sequences are available to provide conditional
expansion.</p>

<h2>SIMPLE PROMPT ESCAPES
<a name="SIMPLE PROMPT ESCAPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Special
characters</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="8%"></td>
<td width="9%">


<p>A &lsquo;<b>%</b>&rsquo;.</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%)</b></p></td>
<td width="8%"></td>
<td width="9%">


<p>A &lsquo;<b>)</b>&rsquo;.</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Login
information</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%l</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The line (tty) the user is
logged in on, without &lsquo;<b>/dev/</b>&rsquo; prefix. If
the name starts with &lsquo;<b>/dev/tty</b>&rsquo;, that
prefix is stripped.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The full machine hostname.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The hostname up to the first &lsquo;<b>.</b>&rsquo;. An
integer may follow the &lsquo;<b>%</b>&rsquo; to specify how
many components of the hostname are desired. With a negative
integer, trailing components of the hostname are shown.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p><b>$USERNAME</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line (tty) the user is logged in on, without
&lsquo;<b>/dev/</b>&rsquo; prefix. This does not treat
&lsquo;<b>/dev/tty</b>&rsquo; names specially.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Shell
state</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%#</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">A &lsquo;<b>#</b>&rsquo; if the
shell is running with privileges, a &lsquo;<b>%</b>&rsquo;
if not. Equivalent to &lsquo;<b>%(!.#.%%)</b>&rsquo;. The
definition of &lsquo;privileged&rsquo;, for these purposes,
is that either the effective user ID is zero, or, if
POSIX.1e capabilities are supported, that at least one
capability is raised in either the Effective or Inheritable
capability vectors.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%?</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The return status of the last command executed just
before the prompt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%_</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The status of the parser, i.e. the shell constructs
(like &lsquo;<b>if</b>&rsquo; and &lsquo;<b>for</b>&rsquo;)
that have been started on the command line. If given an
integer number that many strings will be printed; zero or
negative or no integer means print as many as there are.
This is most useful in prompts <b>PS2</b> for continuation
lines and <b>PS4</b> for debugging with the <b>XTRACE</b>
option; in the latter case it will also work
non&minus;interactively.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%d</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>/</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current working directory. If an integer follows the
&lsquo;<b>%</b>&rsquo;, it specifies a number of trailing
components of the current working directory to show; zero
means the whole path. A negative integer specifies leading
components, i.e. <b>%&minus;1d</b> specifies the first
component.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%~</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>As <b>%d</b> and <b>%/</b>, but if the current working
directory has a named directory as its prefix, that part is
replaced by a &lsquo;<b>~</b>&rsquo; followed by the name of
the directory. If it starts with <b>$HOME</b>, that part is
replaced by a &lsquo;<b>~</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%h</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%!</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current history event number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line number currently being executed in the script,
sourced file, or shell function given by <b>%N</b>. This is
most useful for debugging as part of <b>$PS4</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%I</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The line number currently being executed in the file
<b>%x</b>. This is similar to <b>%i</b>, but the line number
is always a line number in the file where the code was
defined, even if the code is a shell function.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%j</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of jobs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%L</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current value of <b>$SHLVL</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the script, sourced file, or shell function
that zsh is currently executing, whichever was started most
recently. If there is none, this is equivalent to the
parameter <b>$0</b>. An integer may follow the
&lsquo;<b>%</b>&rsquo; to specify a number of trailing path
components to show; zero means the full path. A negative
integer specifies leading components.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%x</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the file containing the source code
currently being executed. This behaves as <b>%N</b> except
that function and eval command names are not shown, instead
the file where they were defined.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%.</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%C</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Trailing component of the current working directory. An
integer may follow the &lsquo;<b>%</b>&rsquo; to get more
than one component. Unless &lsquo;<b>%C</b>&rsquo; is used,
tilde contraction is performed first. These are deprecated
as <b>%c</b> and <b>%C</b> are equivalent to <b>%1~</b> and
<b>%1/</b>, respectively, while explicit positive integers
have the same effect as for the latter two sequences.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Date and
time</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The date in
<i>yy</i><b>&minus;</b><i>mm</i><b>&minus;</b><i>dd</i>
format.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day, in 24&minus;hour format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%t</b></p></td>
<td width="8%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%@</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day, in 12&minus;hour, am/pm format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%*</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Current time of day in 24&minus;hour format, with
seconds.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The date in <i>day</i><b>&minus;</b><i>dd</i>
format.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%W</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The date in <i>mm</i><b>/</b><i>dd</i><b>/</b><i>yy</i>
format.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>%D{</b><i>string</i><b>}</b></p>

<p style="margin-left:22%;"><i>string</i> is formatted
using the <b>strftime</b> function. See <i>strftime</i>(3)
for more details. Various zsh extensions provide numbers
with no leading zero or space if the number is a single
digit:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%f</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>a day of the month</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%K</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>the hour of the day on the 24&minus;hour clock</p></td>
<td width="6%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%L</b></p></td>
<td width="7%"></td>
<td width="62%">


<p>the hour of the day on the 12&minus;hour clock</p></td>
<td width="6%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The GNU
extension that a &lsquo;<b>&minus;</b>&rsquo; between the
<b>%</b> and the format character causes a leading zero or
space to be stripped is handled directly by the shell for
the format characters <b>d</b>, <b>f</b>, <b>H</b>,
<b>k</b>, <b>l</b>, <b>m</b>, <b>M</b>, <b>S</b> and
<b>y</b>; any other format characters are provided to
<b>strftime()</b> with any leading
&lsquo;<b>&minus;</b>&rsquo;, present, so the handling is
system dependent. Further GNU extensions are not supported
at present.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Visual
effects <br>
%B</b> (<b>%b</b>)</p>

<p style="margin-left:22%;">Start (stop) boldface mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%E</b></p></td>
<td width="8%"></td>
<td width="32%">


<p>Clear to end of line.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>%U</b> (<b>%u</b>)</p>

<p style="margin-left:22%;">Start (stop) underline
mode.</p>

<p style="margin-left:11%;"><b>%S</b> (<b>%s</b>)</p>

<p style="margin-left:22%;">Start (stop) standout mode.</p>

<p style="margin-left:11%;"><b>%F</b> (<b>%f</b>)</p>

<p style="margin-left:22%;">Start (stop) using a different
foreground colour, if supported by the terminal. The colour
may be specified two ways: either as a numeric argument, as
normal, or by a sequence in braces following the <b>%F</b>,
for example <b>%F{red}</b>. In the latter case the values
allowed are as described for the <b>fg zle_highlight</b>
attribute; see <i>Character Highlighting</i> in
<i>zshzle</i>(1). This means that numeric colours are
allowed in the second format also.</p>

<p style="margin-left:11%;"><b>%K</b> (<b>%k</b>)</p>

<p style="margin-left:22%;">Start (stop) using a different
bacKground colour. The syntax is identical to that for
<b>%F</b> and <b>%f</b>.</p>

<p style="margin-left:11%;"><b>%{</b>...<b>%}</b></p>

<p style="margin-left:22%;">Include a string as a literal
escape sequence. The string within the braces should not
change the cursor position. Brace pairs can nest.</p>

<p style="margin-left:22%; margin-top: 1em">A positive
numeric argument between the <b>%</b> and the <b>{</b> is
treated as described for <b>%G</b> below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%G</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Within a <b>%{</b>...<b>%}</b> sequence, include a
&lsquo;glitch&rsquo;: that is, assume that a single
character width will be output. This is useful when
outputting characters that otherwise cannot be correctly
handled by the shell, such as the alternate character set on
some terminals. The characters in question can be included
within a <b>%{</b>...<b>%}</b> sequence together with the
appropriate number of <b>%G</b> sequences to indicate the
correct width. An integer between the &lsquo;<b>%</b>&rsquo;
and &lsquo;<b>G</b>&rsquo; indicates a character width other
than one. Hence <b>%{</b><i>seq</i><b>%2G%}</b> outputs
<i>seq</i> and assumes it takes up the width of two standard
characters.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Multiple uses
of <b>%G</b> accumulate in the obvious fashion; the position
of the <b>%G</b> is unimportant. Negative integers are not
handled.</p>

<p style="margin-left:22%; margin-top: 1em">Note that when
prompt truncation is in use it is advisable to divide up
output into single characters within each
<b>%{</b>...<b>%}</b> group so that the correct truncation
point can be found.</p>

<h2>CONDITIONAL SUBSTRINGS IN PROMPTS
<a name="CONDITIONAL SUBSTRINGS IN PROMPTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The value of the first element
of the <b>psvar</b> array parameter. Following the
&lsquo;<b>%</b>&rsquo; with an integer gives that element of
the array. Negative integers count from the end of the
array.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>%(</b><i>x.true&minus;text.false&minus;text</i><b>)</b></p>

<p style="margin-left:22%;">Specifies a ternary expression.
The character following the <i>x</i> is arbitrary; the same
character is used to separate the text for the
&lsquo;true&rsquo; result from that for the
&lsquo;false&rsquo; result. This separator may not appear in
the <i>true&minus;text</i>, except as part of a
%&minus;escape sequence. A &lsquo;<b>)</b>&rsquo; may appear
in the <i>false&minus;text</i> as &lsquo;<b>%)</b>&rsquo;.
<i>true&minus;text</i> and <i>false&minus;text</i> may both
contain arbitrarily&minus;nested escape sequences, including
further ternary expressions.</p>

<p style="margin-left:22%; margin-top: 1em">The left
parenthesis may be preceded or followed by a positive
integer <i>n</i>, which defaults to zero. A negative integer
will be multiplied by &minus;1. The test character <i>x</i>
may be any of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>!</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the shell is running with privileges.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>#</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the effective uid of the current process is
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>?</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the exit status of the last command was
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>_</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if at least <i>n</i> shell constructs were
started.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>C</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>/</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the current absolute path has at least <i>n</i>
elements relative to the root directory, hence <b>/</b> is
counted as 0 elements.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>c</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>.</b></p></td>
<td width="9%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>~</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the current path, with prefix replacement, has
at least <i>n</i> elements relative to the root directory,
hence <b>/</b> is counted as 0 elements.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the month is equal to <i>n</i> (January =
0).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>d</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the day of the month is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>g</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the effective gid of the current process is
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>j</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the number of jobs is at least <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>L</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the <b>SHLVL</b> parameter is at least
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>l</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if at least <i>n</i> characters have already been
printed on the current line.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the <b>SECONDS</b> parameter is at least
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>T</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the time in hours is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>t</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the time in minutes is equal to <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>v</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the array <b>psvar</b> has at least <i>n</i>
elements.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>V</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if element <i>n</i> of the array <b>psvar</b> is
set and non&minus;empty.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>w</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>True if the day of the week is equal to <i>n</i> (Sunday
= 0).</p></td></tr>
</table>


<p style="margin-left:11%;"><b>%&lt;</b><i>string</i><b>&lt;
<br>
%&gt;</b><i>string</i><b>&gt; <br>
%[</b><i>xstring</i><b>]</b></p>

<p style="margin-left:22%;">Specifies truncation behaviour
for the remainder of the prompt string. The third,
deprecated, form is equivalent to
&lsquo;<b>%</b><i>xstringx</i>&rsquo;, i.e. <i>x</i> may be
&lsquo;<b>&lt;</b>&rsquo; or &lsquo;<b>&gt;</b>&rsquo;. The
numeric argument, which in the third form may appear
immediately after the &lsquo;<b>[</b>&rsquo;, specifies the
maximum permitted length of the various strings that can be
displayed in the prompt. The <i>string</i> will be displayed
in place of the truncated portion of any string; note this
does not undergo prompt expansion.</p>

<p style="margin-left:22%; margin-top: 1em">The forms with
&lsquo;<b>&lt;</b>&rsquo; truncate at the left of the
string, and the forms with &lsquo;<b>&gt;</b>&rsquo;
truncate at the right of the string. For example, if the
current directory is &lsquo;<b>/home/pike</b>&rsquo;, the
prompt &lsquo;<b>%8&lt;..&lt;%/</b>&rsquo; will expand to
&lsquo;<b>..e/pike</b>&rsquo;. In this string, the
terminating character (&lsquo;<b>&lt;</b>&rsquo;,
&lsquo;<b>&gt;</b>&rsquo; or &lsquo;<b>]</b>&rsquo;), or in
fact any character, may be quoted by a preceding
&lsquo;<b>\</b>&rsquo;; note when using <b>print
&minus;P</b>, however, that this must be doubled as the
string is also subject to standard <b>print</b> processing,
in addition to any backslashes removed by a double quoted
string: the worst case is therefore &lsquo;<b>print &minus;P
&quot;%&lt;\\\\&lt;&lt;...&quot;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>string</i> is longer than the specified truncation
length, it will appear in full, completely replacing the
truncated string.</p>

<p style="margin-left:22%; margin-top: 1em">The part of the
prompt string to be truncated runs to the end of the string,
or to the end of the next enclosing group of the
&lsquo;<b>%(</b>&rsquo; construct, or to the next truncation
encountered at the same grouping level (i.e. truncations
inside a &lsquo;<b>%(</b>&rsquo; are separate), which ever
comes first. In particular, a truncation with argument zero
(e.g. &lsquo;<b>%&lt;&lt;</b>&rsquo;) marks the end of the
range of the string to be truncated while turning off
truncation from there on. For example, the prompt
&rsquo;%10&lt;...&lt;%~%&lt;&lt;%# &rsquo; will print a
truncated representation of the current directory, followed
by a &lsquo;<b>%</b>&rsquo; or &lsquo;<b>#</b>&rsquo;,
followed by a space. Without the
&lsquo;<b>%&lt;&lt;</b>&rsquo;, those two characters would
be included in the string to be truncated.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshexpn &minus; zsh expansion
and substitution</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
types of expansions are performed in the indicated order in
five steps: <i><br>
History Expansion</i></p>

<p style="margin-left:22%;">This is performed only in
interactive shells.</p>

<p style="margin-left:11%;"><i>Alias Expansion</i></p>

<p style="margin-left:22%;">Aliases are expanded
immediately before the command line is parsed as explained
under Aliasing in <i>zshmisc</i>(1).</p>

<p style="margin-left:11%;"><i>Process Substitution <br>
Parameter Expansion <br>
Command Substitution <br>
Arithmetic Expansion <br>
Brace Expansion</i></p>

<p style="margin-left:22%;">These five are performed in one
step in left&minus;to&minus;right fashion. After these
expansions, all unquoted occurrences of the characters
&lsquo;<b>\</b>&rsquo;, &lsquo;<b>&rsquo;</b>&rsquo; and
&lsquo;<b>&quot;</b>&rsquo; are removed.</p>

<p style="margin-left:11%;"><i>Filename Expansion</i></p>

<p style="margin-left:22%;">If the <b>SH_FILE_EXPANSION</b>
option is set, the order of expansion is modified for
compatibility with <b>sh</b> and <b>ksh</b>. In that case
<i>filename expansion</i> is performed immediately after
<i>alias expansion</i>, preceding the set of five expansions
mentioned above.</p>

<p style="margin-left:11%;"><i>Filename Generation</i></p>

<p style="margin-left:22%;">This expansion, commonly
referred to as <b>globbing</b>, is always done last.</p>

<p style="margin-left:11%; margin-top: 1em">The following
sections explain the types of expansion in detail.</p>

<h2>HISTORY EXPANSION
<a name="HISTORY EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">History
expansion allows you to use words from previous command
lines in the command line you are typing. This simplifies
spelling corrections and the repetition of complicated
commands or arguments. Immediately before execution, each
command is saved in the history list, the size of which is
controlled by the <b>HISTSIZE</b> parameter. The one most
recent command is always retained in any case. Each saved
command in the history list is called a history <i>event</i>
and is assigned a number, beginning with 1 (one) when the
shell starts up. The history number that you may see in your
prompt (see EXPANSION OF PROMPT SEQUENCES in
<i>zshmisc</i>(1)) is the number that is to be assigned to
the <i>next</i> command.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Overview</b>
<br>
A history expansion begins with the first character of the
<b>histchars</b> parameter, which is &lsquo;<b>!</b>&rsquo;
by default, and may occur anywhere on the command line;
history expansions do not nest. The &lsquo;<b>!</b>&rsquo;
can be escaped with &lsquo;<b>\</b>&rsquo; or can be
enclosed between a pair of single quotes
(<b>&rsquo;&rsquo;</b>) to suppress its special meaning.
Double quotes will <i>not</i> work for this. Following this
history character is an optional event designator (see the
section &lsquo;Event Designators&rsquo;) and then an
optional word designator (the section &lsquo;Word
Designators&rsquo;); if neither of these designators is
present, no history expansion occurs.</p>

<p style="margin-left:11%; margin-top: 1em">Input lines
containing history expansions are echoed after being
expanded, but before any other expansions take place and
before the command is executed. It is this expanded form
that is recorded as the history event for later
references.</p>

<p style="margin-left:11%; margin-top: 1em">By default, a
history reference with no event designator refers to the
same event as any preceding history reference on that
command line; if it is the only history reference in a
command, it refers to the previous command. However, if the
option <b>CSH_JUNKIE_HISTORY</b> is set, then every history
reference with no event specification <i>always</i> refers
to the previous command.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
&lsquo;<b>!</b>&rsquo; is the event designator for the
previous command, so &lsquo;<b>!!:1</b>&rsquo; always refers
to the first word of the previous command, and
&lsquo;<b>!!$</b>&rsquo; always refers to the last word of
the previous command. With <b>CSH_JUNKIE_HISTORY</b> set,
then &lsquo;<b>!:1</b>&rsquo; and &lsquo;<b>!$</b>&rsquo;
function in the same manner as &lsquo;<b>!!:1</b>&rsquo; and
&lsquo;<b>!!$</b>&rsquo;, respectively. Conversely, if
<b>CSH_JUNKIE_HISTORY</b> is unset, then
&lsquo;<b>!:1</b>&rsquo; and &lsquo;<b>!$</b>&rsquo; refer
to the first and last words, respectively, of the same event
referenced by the nearest other history reference preceding
them on the current command line, or to the previous command
if there is no preceding reference.</p>

<p style="margin-left:11%; margin-top: 1em">The character
sequence &lsquo;<b>^</b><i>foo</i><b>^</b><i>bar</i>&rsquo;
(where &lsquo;<b>^</b>&rsquo; is actually the second
character of the <b>histchars</b> parameter) repeats the
last command, replacing the string <i>foo</i> with
<i>bar</i>. More precisely, the sequence
&lsquo;<b>^</b><i>foo</i><b>^</b><i>bar</i><b>^</b>&rsquo;
is synonymous with
&lsquo;<b>!!:s^</b><i>foo</i><b>^</b><i>bar</i><b>^</b>&rsquo;,
hence other modifiers (see the section
&lsquo;Modifiers&rsquo;) may follow the final
&lsquo;<b>^</b>&rsquo;. In particular,
&lsquo;<b>^</b><i>foo</i><b>^</b><i>bar</i><b>^:G</b>&rsquo;
performs a global substitution.</p>

<p style="margin-left:11%; margin-top: 1em">If the shell
encounters the character sequence
&lsquo;<b>!&quot;</b>&rsquo; in the input, the history
mechanism is temporarily disabled until the current list
(see <i>zshmisc</i>(1)) is fully parsed. The
&lsquo;<b>!&quot;</b>&rsquo; is removed from the input, and
any subsequent &lsquo;<b>!</b>&rsquo; characters have no
special significance.</p>

<p style="margin-left:11%; margin-top: 1em">A less
convenient but more comprehensible form of command history
support is provided by the <b>fc</b> builtin.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Event
Designators</b> <br>
An event designator is a reference to a command&minus;line
entry in the history list. In the list below, remember that
the initial <b>&lsquo;!&rsquo;</b> in each item may be
changed to another character by setting the <b>histchars</b>
parameter.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>!</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Start a history expansion, except when followed by a
blank, newline, &lsquo;<b>=</b>&rsquo; or
&lsquo;<b>(</b>&rsquo;. If followed immediately by a word
designator (see the section &lsquo;Word Designators&rsquo;),
this forms a history reference with no event designator (see
the section &lsquo;Overview&rsquo;).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>!!</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Refer to the previous command. By itself, this expansion
repeats the previous command.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>!</b><i>n</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>Refer to command&minus;line <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>!&minus;</b><i>n</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>Refer to the current command&minus;line minus
<i>n</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>!</b><i>str</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>Refer to the most recent command starting with
<i>str</i>.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>!?</b><i>str</i>[<b>?</b>]</p>

<p style="margin-left:22%;">Refer to the most recent
command containing <i>str</i>. The trailing
&lsquo;<b>?</b>&rsquo; is necessary if this reference is to
be followed by a modifier or followed by any text that is
not to be considered part of <i>str</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>!#</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Refer to the current command line typed in so far. The
line is treated as if it were complete up to and including
the word before the one with the &lsquo;<b>!#</b>&rsquo;
reference.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>!{</b>...<b>}</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Insulate a history reference from adjacent characters
(if necessary).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Word
Designators</b> <br>
A word designator indicates which word or words of a given
command line are to be included in a history reference. A
&lsquo;<b>:</b>&rsquo; usually separates the event
specification from the word designator. It may be omitted
only if the word designator begins with a
&lsquo;<b>^</b>&rsquo;, &lsquo;<b>$</b>&rsquo;,
&lsquo;<b>*</b>&rsquo;, &lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>%</b>&rsquo;. Word designators include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>0</b></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">The first input word
(command).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>n</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>The <i>n</i>th argument.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>^</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The first argument. That is, <b>1</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>$</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The last argument.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The word matched by (the most recent) <b>?</b><i>str</i>
search.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>&minus;</b><i>y</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>A range of words; <i>x</i> defaults to <b>0</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>*</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>All the arguments, or a null value if there are
none.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>*</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Abbreviates &lsquo;<i>x</i><b>&minus;$</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>&minus;</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Like &lsquo;<i>x</i><b>*</b>&rsquo; but omitting word
<b>$</b>.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note that a
&lsquo;<b>%</b>&rsquo; word designator works only when used
in one of &lsquo;<b>!%</b>&rsquo;, &lsquo;<b>!:%</b>&rsquo;
or &lsquo;<b>!?</b><i>str</i><b>?:%</b>&rsquo;, and only
when used after a <b>!?</b> expansion (possibly in an
earlier command). Anything else results in an error,
although the error may not be the most obvious one.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Modifiers</b>
<br>
After the optional word designator, you can add a sequence
of one or more of the following modifiers, each preceded by
a &lsquo;<b>:</b>&rsquo;. These modifiers also work on the
result of <i>filename generation</i> and <i>parameter
expansion</i>, except where noted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>a</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Turn a file name into an
absolute path: prepends the current directory, if necessary,
and resolves any use of &lsquo;<b>..</b>&rsquo; and
&lsquo;<b>.</b>&rsquo; in the path. Note that the
transformation takes place even if the file or any
intervening directories do not exist.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>A</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>As &lsquo;<b>a</b>&rsquo;, but also resolve use of
symbolic links where possible. Note that resolution of
&lsquo;<b>..</b>&rsquo; occurs <i>before</i> resolution of
symbolic links. This call is equivalent to <b>a</b> unless
your system has the <b>realpath</b> system call (modern
systems do).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>c</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Resolve a command name into an absolute path by
searching the command path given by the <b>PATH</b>
variable. This does not work for commands containing
directory parts. Note also that this does not usually work
as a glob qualifier unless a file of the same name is found
in the current directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>e</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Remove all but the part of the filename extension
following the &lsquo;<b>.</b>&rsquo;; see the definition of
the filename extension in the description of the <b>r</b>
modifier below. Note that according to that definition the
result will be empty if the string ends with a
&lsquo;<b>.</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>h</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Remove a trailing pathname component, leaving the head.
This works like &lsquo;<b>dirname</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>l</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Convert the words to all lowercase.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>p</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Print the new command but do not execute it. Only works
with history expansion.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>q</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Quote the substituted words, escaping further
substitutions. Works with history expansion and parameter
expansion, though for parameters it is only useful if the
resulting text is to be re&minus;evaluated such as by
<b>eval</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>Q</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Remove one level of quotes from the substituted
words.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>r</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Remove a filename extension leaving the root name.
Strings with no filename extension are not altered. A
filename extension is a &lsquo;<b>.</b>&rsquo; followed by
any number of characters (including zero) that are neither
&lsquo;<b>.</b>&rsquo; nor &lsquo;<b>/</b>&rsquo; and that
continue to the end of the string. For example, the
extension of &lsquo;<b>foo.orig.c</b>&rsquo; is
&lsquo;<b>.c</b>&rsquo;, and &lsquo;<b>dir.c/foo</b>&rsquo;
has no extension.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>s/</b><i>l</i><b>/</b><i>r</i>[<b>/</b>]</p>

<p style="margin-left:22%;">Substitute <i>r</i> for
<i>l</i> as described below. The substitution is done only
for the first string that matches <i>l</i>. For arrays and
for filename generation, this applies to each word of the
expanded text. See below for further notes on
substitutions.</p>

<p style="margin-left:22%; margin-top: 1em">The forms
&lsquo;<b>gs/</b><i>l</i><b>/</b><i>r</i>&rsquo; and
&lsquo;<b>s/</b><i>l</i><b>/</b><i>r</i><b>/:G</b>&rsquo;
perform global substitution, i.e. substitute every
occurrence of <i>r</i> for <i>l</i>. Note that the <b>g</b>
or <b>:G</b> must appear in exactly the position shown.</p>

<p style="margin-left:22%; margin-top: 1em">See further
notes on this form of substitution below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>&amp;</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Repeat the previous <b>s</b> substitution. Like
<b>s</b>, may be preceded immediately by a <b>g</b>. In
parameter expansion the <b>&amp;</b> must appear inside
braces, and in filename generation it must be quoted with a
backslash.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>t</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Remove all leading pathname components, leaving the
tail. This works like &lsquo;<b>basename</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>u</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Convert the words to all uppercase.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>x</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Like <b>q</b>, but break into words at whitespace. Does
not work with parameter expansion.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The
<b>s/</b><i>l</i><b>/</b><i>r</i><b>/</b> substitution works
as follows. By default the left&minus;hand side of
substitutions are not patterns, but character strings. Any
character can be used as the delimiter in place of
&lsquo;<b>/</b>&rsquo;. A backslash quotes the delimiter
character. The character &lsquo;<b>&amp;</b>&rsquo;, in the
right&minus;hand&minus;side <i>r</i>, is replaced by the
text from the left&minus;hand&minus;side <i>l</i>. The
&lsquo;<b>&amp;</b>&rsquo; can be quoted with a backslash. A
null <i>l</i> uses the previous string either from the
previous <i>l</i> or from the contextual scan string
<i>s</i> from &lsquo;<b>!?</b><i>s</i>&rsquo;. You can omit
the rightmost delimiter if a newline immediately follows
<i>r</i>; the rightmost &lsquo;<b>?</b>&rsquo; in a context
scan can similarly be omitted. Note the same record of the
last <i>l</i> and <i>r</i> is maintained across all forms of
expansion.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if a
&lsquo;<b>&amp;</b>&rsquo; is used within glob qualifers an
extra backslash is needed as a <b>&amp;</b> is a special
character in this case.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>HIST_SUBST_PATTERN</b> is set, <i>l</i> is treated as a
pattern of the usual form described in the section FILENAME
GENERATION below. This can be used in all the places where
modifiers are available; note, however, that in globbing
qualifiers parameter substitution has already taken place,
so parameters in the replacement string should be quoted to
ensure they are replaced at the correct time. Note also that
complicated patterns used in globbing qualifiers may need
the extended glob qualifier notation
<b>(#q:s/</b><i>...</i><b>/</b><i>...</i><b>/)</b> in order
for the shell to recognize the expression as a glob
qualifier. Further, note that bad patterns in the
substitution are not subject to the <b>NO_BAD_PATTERN</b>
option so will cause an error.</p>

<p style="margin-left:11%; margin-top: 1em">When
<b>HIST_SUBST_PATTERN</b> is set, <i>l</i> may start with a
<b>#</b> to indicate that the pattern must match at the
start of the string to be substituted, and a <b>%</b> may
appear at the start or after an <b>#</b> to indicate that
the pattern must match at the end of the string to be
substituted. The <b>%</b> or <b>#</b> may be quoted with two
backslashes.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the following piece of filename generation code with the
<b>EXTENDED_GLOB</b> option:</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*.c(#q:s/#%(#b)s(*).c/&rsquo;S${match[1]}.C&rsquo;/)</b></p>

<p style="margin-left:11%; margin-top: 1em">takes the
expansion of <b>*.c</b> and applies the glob qualifiers in
the <b>(#q</b><i>...</i><b>)</b> expression, which consists
of a substitution modifier anchored to the start and end of
each word (<b>#%</b>). This turns on backreferences
(<b>(#b)</b>), so that the parenthesised subexpression is
available in the replacement string as <b>${match[1]}</b>.
The replacement string is quoted so that the parameter is
not substituted before the start of filename generation.</p>

<p style="margin-left:11%; margin-top: 1em">The following
<b>f</b>, <b>F</b>, <b>w</b> and <b>W</b> modifiers work
only with parameter expansion and filename generation. They
are listed here to provide a single point of reference for
all modifiers.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>f</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Repeats the immediately (without
a colon) following modifier until the resulting word
doesn&rsquo;t change any more.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>F:</b><i>expr</i><b>:</b></p>

<p style="margin-left:22%;">Like <b>f</b>, but repeats only
<i>n</i> times if the expression <i>expr</i> evaluates to
<i>n</i>. Any character can be used instead of the
&lsquo;<b>:</b>&rsquo;; if &lsquo;<b>(</b>&rsquo;,
&lsquo;<b>[</b>&rsquo;, or &lsquo;<b>{</b>&rsquo; is used as
the opening delimiter, the closing delimiter should be
&rsquo;<b>)</b>&rsquo;, &lsquo;<b>]</b>&rsquo;, or
&lsquo;<b>}</b>&rsquo;, respectively.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>w</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Makes the immediately following modifier work on each
word in the string.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>W:</b><i>sep</i><b>:</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Like <b>w</b> but words are considered to be the parts
of the string that are separated by <i>sep</i>. Any
character can be used instead of the &lsquo;<b>:</b>&rsquo;;
opening parentheses are handled specially, see above.</p></td></tr>
</table>

<h2>PROCESS SUBSTITUTION
<a name="PROCESS SUBSTITUTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each part of a
command argument that takes the form
&lsquo;<b>&lt;(</b><i>list</i><b>)</b>&rsquo;,
&lsquo;<b>&gt;(</b><i>list</i><b>)</b>&rsquo; or
&lsquo;<b>=(</b><i>list</i><b>)</b>&rsquo; is subject to
process substitution. The expression may be preceded or
followed by other strings except that, to prevent clashes
with commonly occurring strings and patterns, the last form
must occur at the start of a command argument, and the forms
are only expanded when first parsing command or assignment
arguments. Process substitutions may be used following
redirection operators; in this case, the substitution must
appear with no trailing string.</p>

<p style="margin-left:11%; margin-top: 1em">In the case of
the <b>&lt;</b> or <b>&gt;</b> forms, the shell runs the
commands in <i>list</i> as a subprocess of the job executing
the shell command line. If the system supports the
<b>/dev/fd</b> mechanism, the command argument is the name
of the device file corresponding to a file descriptor;
otherwise, if the system supports named pipes (FIFOs), the
command argument will be a named pipe. If the form with
<b>&gt;</b> is selected then writing on this special file
will provide input for <i>list</i>. If <b>&lt;</b> is used,
then the file passed as an argument will be connected to the
output of the <i>list</i> process. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>paste
&lt;(cut &minus;f1</b> <i>file1</i><b>) &lt;(cut
&minus;f3</b> <i>file2</i><b>) | <br>
tee &gt;(</b><i>process1</i><b>)
&gt;(</b><i>process2</i><b>) &gt;/dev/null</b></p>

<p style="margin-left:11%; margin-top: 1em">cuts fields 1
and 3 from the files <i>file1</i> and <i>file2</i>
respectively, pastes the results together, and sends it to
the processes <i>process1</i> and <i>process2</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>=(</b><i>...</i><b>)</b> is used instead of
<b>&lt;(</b><i>...</i><b>)</b>, then the file passed as an
argument will be the name of a temporary file containing the
output of the <i>list</i> process. This may be used instead
of the <b>&lt;</b> form for a program that expects to lseek
(see <i>lseek</i>(2)) on the input file.</p>

<p style="margin-left:11%; margin-top: 1em">There is an
optimisation for substitutions of the form
<b>=(&lt;&lt;&lt;</b><i>arg</i><b>)</b>, where <i>arg</i> is
a single&minus;word argument to the here&minus;string
redirection <b>&lt;&lt;&lt;</b>. This form produces a file
name containing the value of <i>arg</i> after any
substitutions have been performed. This is handled entirely
within the current shell. This is effectively the reverse of
the special form <b>$(&lt;</b><i>arg</i><b>)</b> which
treats <i>arg</i> as a file name and replaces it with the
file&rsquo;s contents.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>=</b>
form is useful as both the <b>/dev/fd</b> and the named pipe
implementation of <b>&lt;(</b><i>...</i><b>)</b> have
drawbacks. In the former case, some programmes may
automatically close the file descriptor in question before
examining the file on the command line, particularly if this
is necessary for security reasons such as when the programme
is running setuid. In the second case, if the programme does
not actually open the file, the subshell attempting to read
from or write to the pipe will (in a typical implementation,
different operating systems may have different behaviour)
block for ever and have to be killed explicitly. In both
cases, the shell actually supplies the information using a
pipe, so that programmes that expect to lseek (see
<i>lseek</i>(2)) on the file will not work.</p>

<p style="margin-left:11%; margin-top: 1em">Also note that
the previous example can be more compactly and efficiently
written (provided the <b>MULTIOS</b> option is set) as:</p>

<p style="margin-left:22%; margin-top: 1em"><b>paste
&lt;(cut &minus;f1</b> <i>file1</i><b>) &lt;(cut
&minus;f3</b> <i>file2</i><b>) \ <br>
&gt; &gt;(</b><i>process1</i><b>) &gt;
&gt;(</b><i>process2</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">The shell uses
pipes instead of FIFOs to implement the latter two process
substitutions in the above example.</p>

<p style="margin-left:11%; margin-top: 1em">There is an
additional problem with <b>&gt;(</b><i>process</i><b>)</b>;
when this is attached to an external command, the parent
shell does not wait for <i>process</i> to finish and hence
an immediately following command cannot rely on the results
being complete. The problem and solution are the same as
described in the section <i>MULTIOS</i> in
<i>zshmisc</i>(1). Hence in a simplified version of the
example above:</p>

<p style="margin-left:22%; margin-top: 1em"><b>paste
&lt;(cut &minus;f1</b> <i>file1</i><b>) &lt;(cut
&minus;f3</b> <i>file2</i><b>) &gt;
&gt;(</b><i>process</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">(note that no
<b>MULTIOS</b> are involved), <i>process</i> will be run
asynchronously as far as the parent shell is concerned. The
workaround is:</p>

<p style="margin-left:22%; margin-top: 1em"><b>{ paste
&lt;(cut &minus;f1</b> <i>file1</i><b>) &lt;(cut
&minus;f3</b> <i>file2</i><b>) } &gt;
&gt;(</b><i>process</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">The extra
processes here are spawned from the parent shell which will
wait for their completion.</p>

<p style="margin-left:11%; margin-top: 1em">Another problem
arises any time a job with a substitution that requires a
temporary file is disowned by the shell, including the case
where &lsquo;<b>&amp;!</b>&rsquo; or
&lsquo;<b>&amp;|</b>&rsquo; appears at the end of a command
containing a subsitution. In that case the temporary file
will not be cleaned up as the shell no longer has any memory
of the job. A workaround is to use a subshell, for
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>(mycmd
=(myoutput)) &amp;!</b></p>

<p style="margin-left:11%; margin-top: 1em">as the forked
subshell will wait for the command to finish then remove the
temporary file.</p>

<p style="margin-left:11%; margin-top: 1em">A general
workaround to ensure a process substitution endures for an
appropriate length of time is to pass it as a parameter to
an anonymous shell function (a piece of shell code that is
run immediately with function scope). For example, this
code:</p>

<p style="margin-left:22%; margin-top: 1em"><b>() { <br>
print File $1: <br>
cat $1 <br>
} =(print This be the verse)</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs
something resembling the following</p>

<p style="margin-left:22%; margin-top: 1em"><b>File
/tmp/zsh6nU0kS: <br>
This be the verse</b></p>

<p style="margin-left:11%; margin-top: 1em">The temporary
file created by the process substitution will be deleted
when the function exits.</p>

<h2>PARAMETER EXPANSION
<a name="PARAMETER EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The character
&lsquo;<b>$</b>&rsquo; is used to introduce parameter
expansions. See <i>zshparam</i>(1) for a description of
parameters, including arrays, associative arrays, and
subscript notation to access individual array elements.</p>

<p style="margin-left:11%; margin-top: 1em">Note in
particular the fact that words of unquoted parameters are
not automatically split on whitespace unless the option
<b>SH_WORD_SPLIT</b> is set; see references to this option
below for more details. This is an important difference from
other shells.</p>

<p style="margin-left:11%; margin-top: 1em">In the
expansions discussed below that require a pattern, the form
of the pattern is the same as that used for filename
generation; see the section &lsquo;Filename
Generation&rsquo;. Note that these patterns, along with the
replacement text of any substitutions, are themselves
subject to parameter expansion, command substitution, and
arithmetic expansion. In addition to the following
operations, the colon modifiers described in the section
&lsquo;Modifiers&rsquo; in the section &lsquo;History
Expansion&rsquo; can be applied: for example,
<b>${i:s/foo/bar/}</b> performs string substitution on the
expansion of parameter <b>$i</b>. <b><br>
${</b><i>name</i><b>}</b></p>

<p style="margin-left:22%;">The value, if any, of the
parameter <i>name</i> is substituted. The braces are
required if the expansion is to be followed by a letter,
digit, or underscore that is not to be interpreted as part
of <i>name</i>. In addition, more complicated forms of
substitution usually require the braces to be present;
exceptions, which only apply if the option <b>KSH_ARRAYS</b>
is not set, are a single subscript or any colon modifiers
appearing after the name, or any of the characters
&lsquo;<b>^</b>&rsquo;, &lsquo;<b>=</b>&rsquo;,
&lsquo;<b>~</b>&rsquo;, &lsquo;<b>#</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; appearing before the name, all of
which work with or without braces.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>name</i>
is an array parameter, and the <b>KSH_ARRAYS</b> option is
not set, then the value of each element of <i>name</i> is
substituted, one element per word. Otherwise, the expansion
results in one word only; with <b>KSH_ARRAYS</b>, this is
the first element of an array. No field splitting is done on
the result unless the <b>SH_WORD_SPLIT</b> option is set.
See also the flags <b>=</b> and
<b>s:</b><i>string</i><b>:</b>.</p>


<p style="margin-left:11%;"><b>${+</b><i>name</i><b>}</b></p>

<p style="margin-left:22%;">If <i>name</i> is the name of a
set parameter &lsquo;<b>1</b>&rsquo; is substituted,
otherwise &lsquo;<b>0</b>&rsquo; is substituted.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>&minus;</b><i>word</i><b>}
<br>
${</b><i>name</i><b>:&minus;</b><i>word</i><b>}</b></p>

<p style="margin-left:22%;">If <i>name</i> is set, or in
the second form is non&minus;null, then substitute its
value; otherwise substitute <i>word</i>. In the second form
<i>name</i> may be omitted, in which case <i>word</i> is
always substituted.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>+</b><i>word</i><b>}
<br>
${</b><i>name</i><b>:+</b><i>word</i><b>}</b></p>

<p style="margin-left:22%;">If <i>name</i> is set, or in
the second form is non&minus;null, then substitute
<i>word</i>; otherwise substitute nothing.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>=</b><i>word</i><b>}
<br>
${</b><i>name</i><b>:=</b><i>word</i><b>} <br>
${</b><i>name</i><b>::=</b><i>word</i><b>}</b></p>

<p style="margin-left:22%;">In the first form, if
<i>name</i> is unset then set it to <i>word</i>; in the
second form, if <i>name</i> is unset or null then set it to
<i>word</i>; and in the third form, unconditionally set
<i>name</i> to <i>word</i>. In all forms, the value of the
parameter is then substituted.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>?</b><i>word</i><b>}
<br>
${</b><i>name</i><b>:?</b><i>word</i><b>}</b></p>

<p style="margin-left:22%;">In the first form, if
<i>name</i> is set, or in the second form if <i>name</i> is
both set and non&minus;null, then substitute its value;
otherwise, print <i>word</i> and exit from the shell.
Interactive shells instead return to the prompt. If
<i>word</i> is omitted, then a standard message is
printed.</p>

<p style="margin-left:11%; margin-top: 1em">In any of the
above expressions that test a variable and substitute an
alternate <i>word</i>, note that you can use standard shell
quoting in the <i>word</i> value to selectively override the
splitting done by the <b>SH_WORD_SPLIT</b> option and the
<b>=</b> flag, but not splitting by the
<b>s:</b><i>string</i><b>:</b> flag.</p>

<p style="margin-left:11%; margin-top: 1em">In the
following expressions, when <i>name</i> is an array and the
substitution is not quoted, or if the
&lsquo;<b>(@)</b>&rsquo; flag or the <i>name</i><b>[@]</b>
syntax is used, matching and replacement is performed on
each array element separately. <b><br>
${</b><i>name</i><b>#</b><i>pattern</i><b>} <br>
${</b><i>name</i><b>##</b><i>pattern</i><b>}</b></p>

<p style="margin-left:22%;">If the <i>pattern</i> matches
the beginning of the value of <i>name</i>, then substitute
the value of <i>name</i> with the matched portion deleted;
otherwise, just substitute the value of <i>name</i>. In the
first form, the smallest matching pattern is preferred; in
the second form, the largest matching pattern is
preferred.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>%</b><i>pattern</i><b>}
<br>
${</b><i>name</i><b>%%</b><i>pattern</i><b>}</b></p>

<p style="margin-left:22%;">If the <i>pattern</i> matches
the end of the value of <i>name</i>, then substitute the
value of <i>name</i> with the matched portion deleted;
otherwise, just substitute the value of <i>name</i>. In the
first form, the smallest matching pattern is preferred; in
the second form, the largest matching pattern is
preferred.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>:#</b><i>pattern</i><b>}</b></p>

<p style="margin-left:22%;">If the <i>pattern</i> matches
the value of <i>name</i>, then substitute the empty string;
otherwise, just substitute the value of <i>name</i>. If
<i>name</i> is an array the matching array elements are
removed (use the &lsquo;<b>(M)</b>&rsquo; flag to remove the
non&minus;matched elements).</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>:|</b><i>arrayname</i><b>}</b></p>

<p style="margin-left:22%;">If <i>arrayname</i> is the name
(N.B., not contents) of an array variable, then any elements
contained in <i>arrayname</i> are removed from the
substitution of <i>name</i>. If the substitution is scalar,
either because <i>name</i> is a scalar variable or the
expression is quoted, the elements of <i>arrayname</i> are
instead tested against the entire expression.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>:*</b><i>arrayname</i><b>}</b></p>

<p style="margin-left:22%;">Similar to the preceding
subsitution, but in the opposite sense, so that entries
present in both the original substitution and as elements of
<i>arrayname</i> are retained and others removed.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>:</b><i>offset</i><b>}
<br>

${</b><i>name</i><b>:</b><i>offset</i><b>:</b><i>length</i><b>}</b></p>

<p style="margin-left:22%;">This syntax gives effects
similar to parameter subscripting in the form
<b>$</b><i>name</i><b>[</b><i>start</i><b>,</b><i>end</i><b>]</b>,
but is compatible with other shells; note that both
<i>offset</i> and <i>length</i> are interpreted differently
from the components of a subscript.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>offset</i> is non&minus;negative, then if the variable
<i>name</i> is a scalar substitute the contents starting
<i>offset</i> characters from the first character of the
string, and if <i>name</i> is an array substitute elements
starting <i>offset</i> elements from the first element. If
<i>length</i> is given, substitute that many characters or
elements, otherwise the entire rest of the scalar or
array.</p>

<p style="margin-left:22%; margin-top: 1em">A positive
<i>offset</i> is always treated as the offset of a character
or element in <i>name</i> from the first character or
element of the array (this is different from native zsh
subscript notation). Hence 0 refers to the first character
or element regardless of the setting of the option
<b>KSH_ARRAYS</b>.</p>

<p style="margin-left:22%; margin-top: 1em">A negative
offset counts backwards from the end of the scalar or array,
so that &minus;1 corresponds to the last character or
element, and so on.</p>

<p style="margin-left:22%; margin-top: 1em">When positive,
<i>length</i> counts from the <i>offset</i> position toward
the end of the scalar or array. When negative, <i>length</i>
counts back from the end. If this results in a position
smaller than <i>offset</i>, a diagnostic is printed and
nothing is substituted.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>MULTIBYTE</b> is obeyed, i.e. the offset and length count
multibyte characters where appropriate.</p>

<p style="margin-left:22%; margin-top: 1em"><i>offset</i>
and <i>length</i> undergo the same set of shell
substitutions as for scalar assignment; in addition, they
are then subject to arithmetic evaluation. Hence, for
example</p>

<p style="margin-left:32%; margin-top: 1em"><b>print
${foo:3} <br>
print ${foo: 1 + 2} <br>
print ${foo:$(( 1 + 2))} <br>
print ${foo:$(echo 1 + 2)}</b></p>

<p style="margin-left:22%; margin-top: 1em">all have the
same effect, extracting the string starting at the fourth
character of <b>$foo</b> if the substution would otherwise
return a scalar, or the array starting at the fourth element
if <b>$foo</b> would return an array. Note that with the
option <b>KSH_ARRAYS $foo</b> always returns a scalar
(regardless of the use of the offset syntax) and a form such
as <b>$foo[*]:3</b> is required to extract elements of an
array named <b>foo</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>offset</i> is negative, the <b>&minus;</b> may not appear
immediately after the <b>:</b> as this indicates the
<b>${</b><i>name</i><b>:&minus;</b><i>word</i><b>}</b> form
of substitution. Instead, a space may be inserted before the
<b>&minus;</b>. Furthermore, neither <i>offset</i> nor
<i>length</i> may begin with an alphabetic character or
<b>&amp;</b> as these are used to indicate
history&minus;style modifiers. To substitute a value from a
variable, the recommended approach is to precede it with a
<b>$</b> as this signifies the intention (parameter
substitution can easily be rendered unreadable); however, as
arithmetic substitution is performed, the expression
<b>${var: offs}</b> does work, retrieving the offset from
<b>$offs</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For further
compatibility with other shells there is a special case for
array offset 0. This usually accesses to the first element
of the array. However, if the substitution refers the
positional parameter array, e.g. <b>$@</b> or <b>$*</b>,
then offset 0 instead refers to <b>$0</b>, offset 1 refers
to <b>$1</b>, and so on. In other words, the positional
parameter array is effectively extended by prepending
<b>$0</b>. Hence <b>${*:0:1}</b> substitutes <b>$0</b> and
<b>${*:1:1}</b> substitutes <b>$1</b>.</p>


<p style="margin-left:11%;"><b>${</b><i>name</i><b>/</b><i>pattern</i><b>/</b><i>repl</i><b>}
<br>

${</b><i>name</i><b>//</b><i>pattern</i><b>/</b><i>repl</i><b>}</b></p>

<p style="margin-left:22%;">Replace the longest possible
match of <i>pattern</i> in the expansion of parameter
<i>name</i> by string <i>repl</i>. The first form replaces
just the first occurrence, the second form all occurrences.
Both <i>pattern</i> and <i>repl</i> are subject to
double&minus;quoted substitution, so that expressions like
<b>${name/$opat/$npat}</b> will work, but note the usual
rule that pattern characters in <b>$opat</b> are not treated
specially unless either the option <b>GLOB_SUBST</b> is set,
or <b>$opat</b> is instead substituted as
<b>${~opat}</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>pattern</i> may begin with a &lsquo;<b>#</b>&rsquo;, in
which case the <i>pattern</i> must match at the start of the
string, or &lsquo;<b>%</b>&rsquo;, in which case it must
match at the end of the string, or &lsquo;<b>#%</b>&rsquo;
in which case the <i>pattern</i> must match the entire
string. The <i>repl</i> may be an empty string, in which
case the final &lsquo;<b>/</b>&rsquo; may also be omitted.
To quote the final &lsquo;<b>/</b>&rsquo; in other cases it
should be preceded by a single backslash; this is not
necessary if the &lsquo;<b>/</b>&rsquo; occurs inside a
substituted parameter. Note also that the
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>%</b>&rsquo; and
&lsquo;<b>#%</b> are not active if they occur inside a
substituted parameter, even at the start.</p>

<p style="margin-left:22%; margin-top: 1em">The first
&lsquo;<b>/</b>&rsquo; may be preceded by a
&lsquo;<b>:</b>&rsquo;, in which case the match will only
succeed if it matches the entire word. Note also the effect
of the <b>I</b> and <b>S</b> parameter expansion flags
below; however, the flags <b>M</b>, <b>R</b>, <b>B</b>,
<b>E</b> and <b>N</b> are not useful.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>


<p style="margin-left:32%; margin-top: 1em"><b>foo=&quot;twinkle
twinkle little star&quot; sub=&quot;t*e&quot;
rep=&quot;spy&quot; <br>
print ${foo//${~sub}/$rep} <br>
print ${(S)foo//${~sub}/$rep}</b></p>

<p style="margin-left:22%; margin-top: 1em">Here, the
&lsquo;<b>~</b>&rsquo; ensures that the text of <b>$sub</b>
is treated as a pattern rather than a plain string. In the
first case, the longest match for <b>t*e</b> is substituted
and the result is &lsquo;<b>spy star</b>&rsquo;, while in
the second case, the shortest matches are taken and the
result is &lsquo;<b>spy spy lispy star</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>${#</b><i>spec</i><b>}</b></p>

<p style="margin-left:22%;">If <i>spec</i> is one of the
above substitutions, substitute the length in characters of
the result instead of the result itself. If <i>spec</i> is
an array expression, substitute the number of elements of
the result. Note that &lsquo;<b>^</b>&rsquo;,
&lsquo;<b>=</b>&rsquo;, and &lsquo;<b>~</b>&rsquo;, below,
must appear to the left of &lsquo;<b>#</b>&rsquo; when these
forms are combined.</p>


<p style="margin-left:11%;"><b>${^</b><i>spec</i><b>}</b></p>

<p style="margin-left:22%;">Turn on the
<b>RC_EXPAND_PARAM</b> option for the evaluation of
<i>spec</i>; if the &lsquo;<b>^</b>&rsquo; is doubled, turn
it off. When this option is set, array expansions of the
form <i>foo</i><b>${</b><i>xx</i><b>}</b><i>bar</i>, where
the parameter <i>xx</i> is set to <b>(</b><i>a b
c</i><b>)</b>, are substituted with &lsquo;<i>fooabar
foobbar foocbar</i>&rsquo; instead of the default
&lsquo;<i>fooa b cbar</i>&rsquo;. Note that an empty array
will therefore cause all arguments to be removed.</p>

<p style="margin-left:22%; margin-top: 1em">Internally,
each such expansion is converted into the equivalent list
for brace expansion. E.g., <b>${^var}</b> becomes
<b>{$var[1],$var[2],</b>...<b>}</b>, and is processed as
described in the section &lsquo;Brace Expansion&rsquo;
below. If word splitting is also in effect the
<b>$var[</b><i>N</i><b>]</b> may themselves be split into
different list elements.</p>


<p style="margin-left:11%;"><b>${=</b><i>spec</i><b>}</b></p>

<p style="margin-left:22%;">Perform word splitting using
the rules for <b>SH_WORD_SPLIT</b> during the evaluation of
<i>spec</i>, but regardless of whether the parameter appears
in double quotes; if the &lsquo;<b>=</b>&rsquo; is doubled,
turn it off. This forces parameter expansions to be split
into separate words before substitution, using <b>IFS</b> as
a delimiter. This is done by default in most other
shells.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
splitting is applied to <i>word</i> in the assignment forms
of <i>spec before</i> the assignment to <i>name</i> is
performed. This affects the result of array assignments with
the <b>A</b> flag.</p>


<p style="margin-left:11%;"><b>${~</b><i>spec</i><b>}</b></p>

<p style="margin-left:22%;">Turn on the <b>GLOB_SUBST</b>
option for the evaluation of <i>spec</i>; if the
&lsquo;<b>~</b>&rsquo; is doubled, turn it off. When this
option is set, the string resulting from the expansion will
be interpreted as a pattern anywhere that is possible, such
as in filename expansion and filename generation and
pattern&minus;matching contexts like the right hand side of
the &lsquo;<b>=</b>&rsquo; and &lsquo;<b>!=</b>&rsquo;
operators in conditions.</p>

<p style="margin-left:22%; margin-top: 1em">In nested
substitutions, note that the effect of the <b>~</b> applies
to the result of the current level of substitution. A
surrounding pattern operation on the result may cancel it.
Hence, for example, if the parameter <b>foo</b> is set to
<b>*</b>, <b>${~foo//\*/*.c}</b> is substituted by the
pattern <b>*.c</b>, which may be expanded by filename
generation, but <b>${${~foo}//\*/*.c}</b> substitutes to the
string <b>*.c</b>, which will not be further expanded.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>${</b>...<b>}</b> type parameter expression or a
<b>$(</b>...<b>)</b> type command substitution is used in
place of <i>name</i> above, it is expanded first and the
result is used as if it were the value of <i>name</i>. Thus
it is possible to perform nested operations:
<b>${${foo#head}%tail}</b> substitutes the value of
<b>$foo</b> with both &lsquo;<b>head</b>&rsquo; and
&lsquo;<b>tail</b>&rsquo; deleted. The form with
<b>$(</b>...<b>)</b> is often useful in combination with the
flags described next; see the examples below. Each
<i>name</i> or nested <b>${</b>...<b>}</b> in a parameter
expansion may also be followed by a subscript expression as
described in <i>Array Parameters</i> in
<i>zshparam</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Note that
double quotes may appear around nested expressions, in which
case only the part inside is treated as quoted; for example,
<b>${(f)&quot;$(foo)&quot;}</b> quotes the result of
<b>$(foo)</b>, but the flag &lsquo;<b>(f)</b>&rsquo; (see
below) is applied using the rules for unquoted expansions.
Note further that quotes are themselves nested in this
context; for example, in
<b>&quot;${(@f)&quot;$(foo)&quot;}&quot;</b>, there are two
sets of quotes, one surrounding the whole expression, the
other (redundant) surrounding the <b>$(foo)</b> as
before.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Parameter
Expansion Flags</b> <br>
If the opening brace is directly followed by an opening
parenthesis, the string up to the matching closing
parenthesis will be taken as a list of flags. In cases where
repeating a flag is meaningful, the repetitions need not be
consecutive; for example, &lsquo;(<b>q%q%q</b>)&rsquo; means
the same thing as the more readable
&lsquo;(<b>%%qqq</b>)&rsquo;. The following flags are
supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>#</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Evaluate the resulting words as numeric expressions and
output the characters corresponding to the resulting
integer. Note that this form is entirely distinct from use
of the <b>#</b> without parentheses.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the
<b>MULTIBYTE</b> option is set and the number is greater
than 127 (i.e. not an ASCII character) it is treated as a
Unicode character.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>%</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Expand all <b>%</b> escapes in
the resulting words in the same way as in prompts (see
EXPANSION OF PROMPT SEQUENCES in <i>zshmisc</i>(1)). If this
flag is given twice, full prompt expansion is done on the
resulting words, depending on the setting of the
<b>PROMPT_PERCENT</b>, <b>PROMPT_SUBST</b> and
<b>PROMPT_BANG</b> options.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>@</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>In double quotes, array elements are put into separate
words. E.g., &lsquo;<b>&quot;${(@)foo}&quot;</b>&rsquo; is
equivalent to &lsquo;<b>&quot;${foo[@]}&quot;</b>&rsquo; and
&lsquo;<b>&quot;${(@)foo[1,2]}&quot;</b>&rsquo; is the same
as &lsquo;<b>&quot;$foo[1]&quot;
&quot;$foo[2]&quot;</b>&rsquo;. This is distinct from
<i>field splitting</i> by the <b>f</b>, <b>s</b> or <b>z</b>
flags, which still applies within each array element.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>A</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Create an array parameter with
&lsquo;<b>${</b>...<b>=</b>...<b>}</b>&rsquo;,
&lsquo;<b>${</b>...<b>:=</b>...<b>}</b>&rsquo; or
&lsquo;<b>${</b>...<b>::=</b>...<b>}</b>&rsquo;. If this
flag is repeated (as in &lsquo;<b>AA</b>&rsquo;), create an
associative array parameter. Assignment is made before
sorting or padding. The <i>name</i> part may be a
subscripted range for ordinary arrays; the <i>word</i> part
<i>must</i> be converted to an array, for example by using
&lsquo;<b>${(AA)=</b><i>name</i><b>=</b>...<b>}</b>&rsquo;
to activate field splitting, when creating an associative
array.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>a</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Sort in array index order; when combined with
&lsquo;<b>O</b>&rsquo; sort in reverse array index order.
Note that &lsquo;<b>a</b>&rsquo; is therefore equivalent to
the default but &lsquo;<b>Oa</b>&rsquo; is useful for
obtaining an array&rsquo;s elements in reverse order.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>c</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>With <b>${#</b><i>name</i><b>}</b>, count the total
number of characters in an array, as if the elements were
concatenated with spaces between them.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>C</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Capitalize the resulting words. &lsquo;Words&rsquo; in
this case refers to sequences of alphanumeric characters
separated by non&minus;alphanumerics, <i>not</i> to words
that result from field splitting.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Assume the string or array elements contain directories
and attempt to substitute the leading part of these by
names. The remainder of the path (the whole of it if the
leading part was not subsituted) is then quoted so that the
whole string can be used as a shell argument. This is the
reverse of &lsquo;<b>~</b>&rsquo; substitution: see the
section FILENAME EXPANSION below.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>e</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Perform <i>parameter expansion</i>, <i>command
substitution</i> and <i>arithmetic expansion</i> on the
result. Such expansions can be nested but too deep recursion
may have unpredictable effects.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>f</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Split the result of the expansion at newlines. This is a
shorthand for &lsquo;<b>ps:\n:</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>F</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Join the words of arrays together using newline as a
separator. This is a shorthand for
&lsquo;<b>pj:\n:</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>g:opts:</b></p>

<p style="margin-left:22%;">Process escape sequences like
the echo builtin when no options are given (<b>g::</b>).
With the <b>o</b> option, octal escapes don&rsquo;t take a
leading zero. With the <b>c</b> option, sequences like
&lsquo;<b>^X</b>&rsquo; are also processed. With the
<b>e</b> option, processes &lsquo;<b>\M&minus;t</b>&rsquo;
and similar sequences like the print builtin. With both of
the <b>o</b> and <b>e</b> options, behaves like the print
builtin except that in none of these modes is
&lsquo;<b>\c</b>&rsquo; interpreted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>i</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Sort case&minus;insensitively. May be combined with
&lsquo;<b>n</b>&rsquo; or &lsquo;<b>O</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>k</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>If <i>name</i> refers to an associative array,
substitute the <i>keys</i> (element names) rather than the
values of the elements. Used with subscripts (including
ordinary arrays), force indices or keys to be substituted
even if the subscript form refers to values. However, this
flag may not be combined with subscript ranges.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>L</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Convert all letters in the result to lower case.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>n</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Sort decimal integers numerically; if the first
differing characters of two test strings are not digits,
sorting is lexical. Integers with more initial zeroes are
sorted before those with fewer or none. Hence the array
&lsquo;<b>foo1 foo02 foo2 foo3 foo20 foo23</b>&rsquo; is
sorted into the order shown. May be combined with
&lsquo;<b>i</b>&rsquo; or &lsquo;<b>O</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>o</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Sort the resulting words in ascending order; if this
appears on its own the sorting is lexical and
case&minus;sensitive (unless the locale renders it
case&minus;insensitive). Sorting in ascending order is the
default for other forms of sorting, so this is ignored if
combined with &lsquo;<b>a</b>&rsquo;, &lsquo;<b>i</b>&rsquo;
or &lsquo;<b>n</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>O</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Sort the resulting words in descending order;
&lsquo;<b>O</b>&rsquo; without &lsquo;<b>a</b>&rsquo;,
&lsquo;<b>i</b>&rsquo; or &lsquo;<b>n</b>&rsquo; sorts in
reverse lexical order. May be combined with
&lsquo;<b>a</b>&rsquo;, &lsquo;<b>i</b>&rsquo; or
&lsquo;<b>n</b>&rsquo; to reverse the order of sorting.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>P</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>This forces the value of the parameter <i>name</i> to be
interpreted as a further parameter name, whose value will be
used where appropriate. Note that flags set with one of the
<b>typeset</b> family of commands (in particular case
transformations) are not applied to the value of <i>name</i>
used in this fashion.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If used with a
nested parameter or command substitution, the result of that
will be taken as a parameter name in the same way. For
example, if you have &lsquo;<b>foo=bar</b>&rsquo; and
&lsquo;<b>bar=baz</b>&rsquo;, the strings <b>${(P)foo}</b>,
<b>${(P)${foo}}</b>, and <b>${(P)$(echo bar)}</b> will be
expanded to &lsquo;<b>baz</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>q</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Quote characters that are
special to the shell in the resulting words with
backslashes; unprintable or invalid characters are quoted
using the <b>$&rsquo;\</b><i>NNN</i><b>&rsquo;</b> form,
with separate quotes for each octet.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If this flag is
given twice, the resulting words are quoted in single quotes
and if it is given three times, the words are quoted in
double quotes; in these forms no special handling of
unprintable or invalid characters is attempted. If the flag
is given four times, the words are quoted in single quotes
preceded by a <b>$</b>. Note that in all three of these
forms quoting is done unconditionally, even if this does not
change the way the resulting string would be interpreted by
the shell.</p>

<p style="margin-left:22%; margin-top: 1em">If a
<b>q&minus;</b> is given (only a single <b>q</b> may
appear), a minimal form of single quoting is used that only
quotes the string if needed to protect special characters.
Typically this form gives the most readable output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>Q</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Remove one level of quotes from
the resulting words.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>t</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Use a string describing the type of the parameter where
the value of the parameter would usually appear. This string
consists of keywords separated by hyphens
(&lsquo;<b>&minus;</b>&rsquo;). The first keyword in the
string describes the main type, it can be one of
&lsquo;<b>scalar</b>&rsquo;, &lsquo;<b>array</b>&rsquo;,
&lsquo;<b>integer</b>&rsquo;, &lsquo;<b>float</b>&rsquo; or
&lsquo;<b>association</b>&rsquo;. The other keywords
describe the type in more detail:</p></td></tr>
</table>

<p style="margin-left:22%;"><b>local</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%"></td>
<td width="4%"></td>
<td width="45%">


<p style="margin-top: 1em">for local parameters</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>left</b></p></td>
<td width="4%"></td>
<td width="45%">


<p>for left justified parameters</p></td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>right_blanks</b></p>

<p style="margin-left:32%;">for right justified parameters
with leading blanks</p>

<p style="margin-left:22%;"><b>right_zeros</b></p>

<p style="margin-left:32%;">for right justified parameters
with leading zeros</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>lower</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>for parameters whose value is converted to all lower
case when it is expanded</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>upper</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>for parameters whose value is converted to all upper
case when it is expanded</p></td></tr>
</table>

<p style="margin-left:22%;"><b>readonly</b></p>

<p style="margin-left:32%;">for readonly parameters</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>tag</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>for tagged parameters</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>export</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>for exported parameters</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>unique</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>for arrays which keep only the first occurrence of
duplicated values</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>hide</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>for parameters with the &lsquo;hide&rsquo; flag</p></td></tr>
</table>

<p style="margin-left:22%;"><b>special</b></p>

<p style="margin-left:32%;">for special parameters defined
by the shell</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>u</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Expand only the first occurrence of each unique
word.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>U</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Convert all letters in the result to upper case.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>v</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Used with <b>k</b>, substitute (as two consecutive
words) both the key and the value of each associative array
element. Used with subscripts, force values to be
substituted even if the subscript form refers to indices or
keys.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>V</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Make any special characters in the resulting words
visible.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>w</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>With <b>${#</b><i>name</i><b>}</b>, count words in
arrays or strings; the <b>s</b> flag may be used to set a
word delimiter.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>W</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Similar to <b>w</b> with the difference that empty words
between repeated delimiters are also counted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>X</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>With this flag, parsing errors occurring with the
<b>Q</b>, <b>e</b> and <b>#</b> flags or the pattern
matching forms such as
&lsquo;<b>${</b><i>name</i><b>#</b><i>pattern</i><b>}</b>&rsquo;
are reported. Without the flag, errors are silently
ignored.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>z</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Split the result of the expansion into words using shell
parsing to find the words, i.e. taking into account any
quoting in the value. Comments are not treated specially but
as ordinary strings, similar to interactive shells with the
<b>INTERACTIVE_COMMENTS</b> option unset (however, see the
<b>Z</b> flag below for related options)</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that this
is done very late, even later than the
&lsquo;<b>(s)</b>&rsquo; flag. So to access single words in
the result use nested expansions as in
&lsquo;<b>${${(z)foo}[2]}</b>&rsquo;. Likewise, to remove
the quotes in the resulting words use
&lsquo;<b>${(Q)${(z)foo}}</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>0</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Split the result of the
expansion on null bytes. This is a shorthand for
&lsquo;<b>ps:\0:</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The following
flags (except <b>p</b>) are followed by one or more
arguments as shown. Any character, or the matching pairs
&lsquo;<b>(</b>...<b>)</b>&rsquo;,
&lsquo;<b>{</b>...<b>}</b>&rsquo;,
&lsquo;<b>[</b>...<b>]</b>&rsquo;, or
&lsquo;<b>&lt;</b>...<b>&gt;</b>&rsquo;, may be used in
place of a colon as delimiters, but note that when a flag
takes more than one argument, a matched pair of delimiters
must surround each argument.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>p</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Recognize the same escape
sequences as the <b>print</b> builtin in string arguments to
any of the flags described below that follow this
argument.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>~</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Force string arguments to any of the flags below that
follow within the parentheses to be treated as patterns.
Compare with a <b>~</b> outside parentheses, which forces
the entire substituted string to be treated as a pattern.
Hence, for example,</p></td></tr>
</table>

<p style="margin-left:22%;"><b>[[ &quot;?&quot; =
${(~j.|.)array} ]]</b></p>

<p style="margin-left:11%;">with the <b>EXTENDED_GLOB</b>
option set succeeds if and only if <b>$array</b> contains
the string &lsquo;<b>?</b>&rsquo; as an element. The
argument may be repeated to toggle the behaviour; its effect
only lasts to the end of the parenthesised group. <b><br>
j:</b><i>string</i><b>:</b></p>

<p style="margin-left:22%;">Join the words of arrays
together using <i>string</i> as a separator. Note that this
occurs before field splitting by the
<b>s:</b><i>string</i><b>:</b> flag or the
<b>SH_WORD_SPLIT</b> option.</p>


<p style="margin-left:11%;"><b>l:</b><i>expr</i><b>::</b><i>string1</i><b>::</b><i>string2</i><b>:</b></p>

<p style="margin-left:22%;">Pad the resulting words on the
left. Each word will be truncated if required and placed in
a field <i>expr</i> characters wide.</p>

<p style="margin-left:22%; margin-top: 1em">The arguments
<b>:</b><i>string1</i><b>:</b> and
<b>:</b><i>string2</i><b>:</b> are optional; neither, the
first, or both may be given. Note that the same pairs of
delimiters must be used for each of the three arguments. The
space to the left will be filled with <i>string1</i>
(concatenated as often as needed) or spaces if
<i>string1</i> is not given. If both <i>string1</i> and
<i>string2</i> are given, <b>string2</b> is inserted once
directly to the left of each word, truncated if necessary,
before <i>string1</i> is used to produce any remaining
padding.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>MULTIBYTE</b> option is in effect, the flag <b>m</b> may
also be given, in which case widths will be used for the
calculation of padding; otherwise individual multibyte
characters are treated as occupying one unit of width.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>MULTIBYTE</b> option is not in effect, each byte in the
string is treated as occupying one unit of width.</p>

<p style="margin-left:22%; margin-top: 1em">Control
characters are always assumed to be one unit wide; this
allows the mechanism to be used for generating repetitions
of control characters.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>m</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Only useful together with one of the flags <b>l</b> or
<b>r</b> or with the <b>#</b> length operator when the
<b>MULTIBYTE</b> option is in effect. Use the character
width reported by the system in calculating how much of the
string it occupies or the overall length of the string. Most
printable characters have a width of one unit, however
certain Asian character sets and certain special effects use
wider characters; combining characters have zero width.
Non&minus;printable characters are arbitrarily counted as
zero width; how they would actually be displayed will
vary.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the <b>m</b>
is repeated, the character either counts zero (if it has
zero width), else one. For printable character strings this
has the effect of counting the number of glyphs (visibly
separate characters), except for the case where combining
characters themselves have non&minus;zero width (true in
certain alphabets).</p>


<p style="margin-left:11%;"><b>r:</b><i>expr</i><b>::</b><i>string1</i><b>::</b><i>string2</i><b>:</b></p>

<p style="margin-left:22%;">As <b>l</b>, but pad the words
on the right and insert <i>string2</i> immediately to the
right of the string to be padded.</p>

<p style="margin-left:22%; margin-top: 1em">Left and right
padding may be used together. In this case the strategy is
to apply left padding to the first half width of each of the
resulting words, and right padding to the second half. If
the string to be padded has odd width the extra padding is
applied on the left.</p>


<p style="margin-left:11%;"><b>s:</b><i>string</i><b>:</b></p>

<p style="margin-left:22%;">Force field splitting at the
separator <i>string</i>. Note that a <i>string</i> of two or
more characters means that all of them must match in
sequence; this differs from the treatment of two or more
characters in the <b>IFS</b> parameter. See also the
<b>=</b> flag and the <b>SH_WORD_SPLIT</b> option. An empty
string may also be given in which case every character will
be a separate element.</p>

<p style="margin-left:22%; margin-top: 1em">For historical
reasons, the usual behaviour that empty array elements are
retained inside double quotes is disabled for arrays
generated by splitting; hence the following:</p>


<p style="margin-left:32%; margin-top: 1em"><b>line=&quot;one::three&quot;
<br>
print &minus;l &quot;${(s.:.)line}&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">produces two
lines of output for <b>one</b> and <b>three</b> and elides
the empty field. To override this behaviour, supply the
&quot;(@)&quot; flag as well, i.e.
<b>&quot;${(@s.:.)line}&quot;</b>.</p>


<p style="margin-left:11%;"><b>Z:</b><i>opts</i><b>:</b></p>

<p style="margin-left:22%;">As <b>z</b> but takes a
combination of option letters between a following pair of
delimiter characters. With no options the effect is
identical to <b>z</b>. <b>(Z+c+)</b> causes comments to be
parsed as a string and retained; any field in the resulting
array beginning with an unquoted comment character is a
comment. <b>(Z+C+)</b> causes comments to be parsed and
removed. The rule for comments is standard: anything between
a word starting with the third character of
<b>$HISTCHARS</b>, default <b>#</b>, up to the next newline
is a comment. <b>(Z+n+)</b> causes unquoted newlines to be
treated as ordinary whitespace, else they are treated as if
they are shell code delimiters and converted to semicolons.
Options are combined within the same set of delimiters, e.g.
<b>(Z+Cn+)</b>.</p>


<p style="margin-left:11%;"><b>_:</b><i>flags</i><b>:</b></p>

<p style="margin-left:22%;">The underscore (<b>_</b>) flag
is reserved for future use. As of this revision of zsh,
there are no valid <i>flags</i>; anything following an
underscore, other than an empty pair of delimiters, is
treated as an error, and the flag itself has no effect.</p>

<p style="margin-left:11%; margin-top: 1em">The following
flags are meaningful with the
<b>${</b>...<b>#</b>...<b>}</b> or
<b>${</b>...<b>%</b>...<b>}</b> forms. The <b>S</b> and
<b>I</b> flags may also be used with the
<b>${</b>...<b>/</b>...<b>}</b> forms.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Search substrings as well as beginnings or ends; with
<b>#</b> start from the beginning and with <b>%</b> start
from the end of the string. With substitution via
<b>${</b>...<b>/</b>...<b>}</b> or
<b>${</b>...<b>//</b>...<b>}</b>, specifies non&minus;greedy
matching, i.e. that the shortest instead of the longest
match should be replaced.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>I:</b><i>expr</i><b>:</b></p>

<p style="margin-left:22%;">Search the <i>expr</i>th match
(where <i>expr</i> evaluates to a number). This only applies
when searching for substrings, either with the <b>S</b>
flag, or with <b>${</b>...<b>/</b>...<b>}</b> (only the
<i>expr</i>th match is substituted) or
<b>${</b>...<b>//</b>...<b>}</b> (all matches from the
<i>expr</i>th on are substituted). The default is to take
the first match.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>expr</i>th match is counted such that there is either one
or zero matches from each starting position in the string,
although for global substitution matches overlapping
previous replacements are ignored. With the
<b>${</b>...<b>%</b>...<b>}</b> and
<b>${</b>...<b>%%</b>...<b>}</b> forms, the starting
position for the match moves backwards from the end as the
index increases, while with the other forms it moves forward
from the start.</p>

<p style="margin-left:22%; margin-top: 1em">Hence with the
string</p>

<p style="margin-left:32%;"><b>which switch is the right
switch for Ipswich?</b></p>

<p style="margin-left:22%;">substitutions of the form
<b>${</b>(<b>SI:</b><i>N</i><b>:</b>)<b>string#w*ch}</b> as
<i>N</i> increases from 1 will match and remove
&lsquo;<b>which</b>&rsquo;, &lsquo;<b>witch</b>&rsquo;,
&lsquo;<b>witch</b>&rsquo; and &lsquo;<b>wich</b>&rsquo;;
the form using &lsquo;<b>##</b>&rsquo; will match and remove
&lsquo;<b>which switch is the right switch for
Ipswich</b>&rsquo;, &lsquo;<b>witch is the right switch for
Ipswich</b>&rsquo;, &lsquo;<b>witch for Ipswich</b>&rsquo;
and &lsquo;<b>wich</b>&rsquo;. The form using
&lsquo;<b>%</b>&rsquo; will remove the same matches as for
&lsquo;<b>#</b>&rsquo;, but in reverse order, and the form
using &lsquo;<b>%%</b>&rsquo; will remove the same matches
as for &lsquo;<b>##</b>&rsquo; in reverse order.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>B</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Include the index of the beginning of the match in the
result.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>E</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Include the index of the end of the match in the
result.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>M</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Include the matched portion in the result.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>N</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Include the length of the match in the result.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>R</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Include the unmatched portion in the result (the
<i>R</i>est).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Rules</b>
<br>
Here is a summary of the rules for substitution; this
assumes that braces are present around the substitution,
i.e. <b>${...}</b>. Some particular examples are given
below. Note that the Zsh Development Group accepts <i>no
responsibility</i> for any brain damage which may occur
during the reading of the following rules. <b><br>
1.</b> <i>Nested substitution</i></p>

<p style="margin-left:22%;">If multiple nested
<b>${...}</b> forms are present, substitution is performed
from the inside outwards. At each level, the substitution
takes account of whether the current value is a scalar or an
array, whether the whole substitution is in double quotes,
and what flags are supplied to the current level of
substitution, just as if the nested substitution were the
outermost. The flags are not propagated up to enclosing
substitutions; the nested substitution will return either a
scalar or an array as determined by the flags, possibly
adjusted for quoting. All the following steps take place
where applicable at all levels of substitution. Note that,
unless the &lsquo;<b>(P)</b>&rsquo; flag is present, the
flags and any subscripts apply directly to the value of the
nested substitution; for example, the expansion
<b>${${foo}}</b> behaves exactly the same as
<b>${foo}</b>.</p>

<p style="margin-left:22%; margin-top: 1em">At each nested
level of substitution, the substituted words undergo all
forms of single&minus;word substitution (i.e. not filename
generation), including command substitution, arithmetic
expansion and filename expansion (i.e. leading <b>~</b> and
<b>=</b>). Thus, for example, <b>${${:&minus;=cat}:h}</b>
expands to the directory where the <b>cat</b> program
resides. (Explanation: the internal substitution has no
parameter but a default value <b>=cat</b>, which is expanded
by filename expansion to a full path; the outer substitution
then applies the modifier <b>:h</b> and takes the directory
part of the path.)</p>

<p style="margin-left:11%;"><b>2.</b> <i>Internal parameter
flags</i></p>

<p style="margin-left:22%;">Any parameter flags set by one
of the <b>typeset</b> family of commands, in particular the
<b>L</b>, <b>R</b>, <b>Z</b>, <b>u</b> and <b>l</b> flags
for padding and capitalization, are applied directly to the
parameter value. Note these flags are options to the
command, e.g. &lsquo;<b>typeset &minus;Z</b>&rsquo;; they
are not the same as the flags used within parameter
substitutions.</p>

<p style="margin-left:11%;"><b>3.</b> <i>Parameter
subscripting</i></p>

<p style="margin-left:22%;">If the value is a raw parameter
reference with a subscript, such as
<b>${</b><i>var</i><b>[3]}</b>, the effect of subscripting
is applied directly to the parameter. Subscripts are
evaluated left to right; subsequent subscripts apply to the
scalar or array value yielded by the previous subscript.
Thus if <b>var</b> is an array, <b>${var[1][2]}</b> is the
second character of the first word, but
<b>${var[2,4][2]}</b> is the entire third word (the second
word of the range of words two through four of the original
array). Any number of subscripts may appear.</p>

<p style="margin-left:11%;"><b>4.</b> <i>Parameter name
replacement</i></p>

<p style="margin-left:22%;">The effect of any <b>(P)</b>
flag, which treats the value so far as a parameter name and
replaces it with the corresponding value, is applied.</p>

<p style="margin-left:11%;"><b>5.</b>
<i>Double&minus;quoted joining</i></p>

<p style="margin-left:22%;">If the value after this process
is an array, and the substitution appears in double quotes,
and no <b>(@)</b> flag is present at the current level, the
words of the value are joined with the first character of
the parameter <b>$IFS</b>, by default a space, between each
word (single word arrays are not modified). If the
<b>(j)</b> flag is present, that is used for joining instead
of <b>$IFS</b>.</p>

<p style="margin-left:11%;"><b>6.</b> <i>Nested
subscripting</i></p>

<p style="margin-left:22%;">Any remaining subscripts (i.e.
of a nested substitution) are evaluated at this point, based
on whether the value is an array or a scalar. As with
<b>3.</b>, multiple subscripts can appear. Note that
<b>${foo[2,4][2]}</b> is thus equivalent to
<b>${${foo[2,4]}[2]}</b> and also to
<b>&quot;${${(@)foo[2,4]}[2]}&quot;</b> (the nested
substitution returns an array in both cases), but not to
<b>&quot;${${foo[2,4]}[2]}&quot;</b> (the nested
substitution returns a scalar because of the quotes).</p>

<p style="margin-left:11%;"><b>7.</b> <i>Modifiers</i></p>

<p style="margin-left:22%;">Any modifiers, as specified by
a trailing &lsquo;<b>#</b>&rsquo;, &lsquo;<b>%</b>&rsquo;,
&lsquo;<b>/</b>&rsquo; (possibly doubled) or by a set of
modifiers of the form <b>:...</b> (see the section
&lsquo;Modifiers&rsquo; in the section &lsquo;History
Expansion&rsquo;), are applied to the words of the value at
this level.</p>

<p style="margin-left:11%;"><b>8.</b> <i>Character
evaluation</i></p>

<p style="margin-left:22%;">Any <b>(#)</b> flag is applied,
evaluating the result so far numerically as a character.</p>

<p style="margin-left:11%;"><b>9.</b> <i>Length</i></p>

<p style="margin-left:22%;">Any initial <b>#</b> modifier,
i.e. in the form <b>${#</b><i>var</i><b>}</b>, is used to
evaluate the length of the expression so far.</p>

<p style="margin-left:11%;"><b>10.</b> <i>Forced
joining</i></p>

<p style="margin-left:22%;">If the &lsquo;<b>(j)</b>&rsquo;
flag is present, or no &lsquo;<b>(j)</b>&rsquo; flag is
present but the string is to be split as given by rule
<b>11.</b>, and joining did not take place at step
<b>5.</b>, any words in the value are joined together using
the given string or the first character of <b>$IFS</b> if
none. Note that the &lsquo;<b>(F)</b>&rsquo; flag implicitly
supplies a string for joining in this manner.</p>

<p style="margin-left:11%;"><b>11.</b> <i>Simple word
splitting</i></p>

<p style="margin-left:22%;">If one of the
&lsquo;<b>(s)</b>&rsquo; or &lsquo;<b>(f)</b>&rsquo; flags
are present, or the &lsquo;<b>=</b>&rsquo; specifier was
present (e.g. <b>${=</b><i>var</i><b>}</b>), the word is
split on occurrences of the specified string, or (for
<b>=</b> with neither of the two flags present) any of the
characters in <b>$IFS</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If no
&lsquo;<b>(s)</b>&rsquo;, &lsquo;<b>(f)</b>&rsquo; or
&lsquo;<b>=</b>&rsquo; was given, but the word is not quoted
and the option <b>SH_WORD_SPLIT</b> is set, the word is
split on occurrences of any of the characters in
<b>$IFS</b>. Note this step, too, takes place at all levels
of a nested substitution.</p>

<p style="margin-left:11%;"><b>12.</b> <i>Case
modification</i></p>

<p style="margin-left:22%;">Any case modification from one
of the flags <b>(L)</b>, <b>(U)</b> or <b>(C)</b> is
applied.</p>

<p style="margin-left:11%;"><b>13.</b> <i>Escape sequence
replacement</i></p>

<p style="margin-left:22%;">First any replacements from the
<b>(g)</b> flag are performed, then any prompt&minus;style
formatting from the <b>(%)</b> family of flags is
applied.</p>

<p style="margin-left:11%;"><b>14.</b> <i>Quote
application</i></p>

<p style="margin-left:22%;">Any quoting or unquoting using
<b>(q)</b> and <b>(Q)</b> and related flags is applied.</p>

<p style="margin-left:11%;"><b>15.</b> <i>Directory
naming</i></p>

<p style="margin-left:22%;">Any directory name substitution
using <b>(D)</b> flag is applied.</p>

<p style="margin-left:11%;"><b>16.</b> <i>Visibility
enhancement</i></p>

<p style="margin-left:22%;">Any modifications to make
characters visible using the <b>(V)</b> flag are
applied.</p>

<p style="margin-left:11%;"><b>17.</b> <i>Lexical word
splitting</i></p>

<p style="margin-left:22%;">If the &rsquo;<b>(z)</b>&rsquo;
flag or one of the forms of the &rsquo;<b>(Z)</b>&rsquo;
flag is present, the word is split as if it were a shell
command line, so that quotation marks and other
metacharacters are used to decide what constitutes a word.
Note this form of splitting is entirely distinct from that
described by rule <b>11.</b>: it does not use <b>$IFS</b>,
and does not cause forced joining.</p>

<p style="margin-left:11%;"><b>18.</b>
<i>Uniqueness</i></p>

<p style="margin-left:22%;">If the result is an array and
the &lsquo;<b>(u)</b>&rsquo; flag was present, duplicate
elements are removed from the array.</p>

<p style="margin-left:11%;"><b>19.</b> <i>Ordering</i></p>

<p style="margin-left:22%;">If the result is still an array
and one of the &lsquo;<b>(o)</b>&rsquo; or
&lsquo;<b>(O)</b>&rsquo; flags was present, the array is
reordered.</p>

<p style="margin-left:11%;"><b>20.</b>
<i>Re&minus;evaluation</i></p>

<p style="margin-left:22%;">Any &lsquo;<b>(e)</b>&rsquo;
flag is applied to the value, forcing it to be
re&minus;examined for new parameter substitutions, but also
for command and arithmetic substitutions.</p>

<p style="margin-left:11%;"><b>21.</b> <i>Padding</i></p>

<p style="margin-left:22%;">Any padding of the value by the
&lsquo;<b>(l.</b><i>fill</i><b>.)</b>&rsquo; or
&lsquo;<b>(r.</b><i>fill</i><b>.)</b>&rsquo; flags is
applied.</p>

<p style="margin-left:11%;"><b>22.</b> <i>Semantic
joining</i></p>

<p style="margin-left:22%;">In contexts where expansion
semantics requires a single word to result, all words are
rejoined with the first character of <b>IFS</b> between. So
in &lsquo;<b>${(P)${(f)lines}}</b>&rsquo; the value of
<b>${lines}</b> is split at newlines, but then must be
joined again before the <b>P</b> flag can be applied.</p>

<p style="margin-left:22%; margin-top: 1em">If a single
word is not required, this rule is skipped.</p>

<p style="margin-left:11%;"><b>23.</b> <i>Empty argument
removal</i></p>

<p style="margin-left:22%;">If the substitution does not
appear in double quotes, any resulting zero&minus;length
argument, whether from a scalar or an element of an array,
is elided from the list of arguments inserted into the
command line.</p>

<p style="margin-left:22%; margin-top: 1em">Strictly
speaking, the removal happens later as the same happens with
other forms of substitution; the point to note here is
simply that it occurs after any of the above parameter
operations.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Examples</b>
<br>
The flag <b>f</b> is useful to split a double&minus;quoted
substitution line by line. For example,
<b>${(f)&quot;$(&lt;</b><i>file</i><b>)&quot;}</b>
substitutes the contents of <i>file</i> divided so that each
line is an element of the resulting array. Compare this with
the effect of <b>$(&lt;</b><i>file</i><b>)</b> alone, which
divides the file up by words, or the same inside double
quotes, which makes the entire content of the file a single
string.</p>

<p style="margin-left:11%; margin-top: 1em">The following
illustrates the rules for nested parameter expansions.
Suppose that <b>$foo</b> contains the array <b>(bar
baz)</b>: <b><br>
&quot;${(@)${foo}[1]}&quot;</b></p>

<p style="margin-left:22%;">This produces the result
<b>b</b>. First, the inner substitution
<b>&quot;${foo}&quot;</b>, which has no array (<b>@</b>)
flag, produces a single word result <b>&quot;bar
baz&quot;</b>. The outer substitution
<b>&quot;${(@)...[1]}&quot;</b> detects that this is a
scalar, so that (despite the &lsquo;<b>(@)</b>&rsquo; flag)
the subscript picks the first character.</p>


<p style="margin-left:11%;"><b>&quot;${${(@)foo}[1]}&quot;</b></p>

<p style="margin-left:22%;">This produces the result
&lsquo;<b>bar</b>&rsquo;. In this case, the inner
substitution <b>&quot;${(@)foo}&quot;</b> produces the array
&lsquo;<b>(bar baz)</b>&rsquo;. The outer substitution
<b>&quot;${...[1]}&quot;</b> detects that this is an array
and picks the first word. This is similar to the simple case
<b>&quot;${foo[1]}&quot;</b>.</p>

<p style="margin-left:11%; margin-top: 1em">As an example
of the rules for word splitting and joining, suppose
<b>$foo</b> contains the array &lsquo;<b>(ax1
bx1)</b>&rsquo;. Then <b><br>
${(s/x/)foo}</b></p>

<p style="margin-left:22%;">produces the words
&lsquo;<b>a</b>&rsquo;, &lsquo;<b>1 b</b>&rsquo; and
&lsquo;<b>1</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>${(j/x/s/x/)foo}</b></p>

<p style="margin-left:22%;">produces
&lsquo;<b>a</b>&rsquo;, &lsquo;<b>1</b>&rsquo;,
&lsquo;<b>b</b>&rsquo; and &lsquo;<b>1</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>${(s/x/)foo%%1*}</b></p>

<p style="margin-left:22%;">produces &lsquo;<b>a</b>&rsquo;
and &lsquo; <b>b</b>&rsquo; (note the extra space). As
substitution occurs before either joining or splitting, the
operation first generates the modified array <b>(ax bx)</b>,
which is joined to give <b>&quot;ax bx&quot;</b>, and then
split to give &lsquo;<b>a</b>&rsquo;, &lsquo;
<b>b</b>&rsquo; and &lsquo;&rsquo;. The final empty string
will then be elided, as it is not in double quotes.</p>

<h2>COMMAND SUBSTITUTION
<a name="COMMAND SUBSTITUTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A command
enclosed in parentheses preceded by a dollar sign, like
&lsquo;<b>$(</b>...<b>)</b>&rsquo;, or quoted with grave
accents, like &lsquo;<b>&lsquo;</b>...<b>&lsquo;</b>&rsquo;,
is replaced with its standard output, with any trailing
newlines deleted. If the substitution is not enclosed in
double quotes, the output is broken into words using the
<b>IFS</b> parameter. The substitution &lsquo;<b>$(cat</b>
<i>foo</i><b>)</b>&rsquo; may be replaced by the equivalent
but faster &lsquo;<b>$(&lt;</b><i>foo</i><b>)</b>&rsquo;. In
either case, if the option <b>GLOB_SUBST</b> is set, the
output is eligible for filename generation.</p>

<h2>ARITHMETIC EXPANSION
<a name="ARITHMETIC EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A string of the
form &lsquo;<b>$[</b><i>exp</i><b>]</b>&rsquo; or
&lsquo;<b>$((</b><i>exp</i><b>))</b>&rsquo; is substituted
with the value of the arithmetic expression <i>exp</i>.
<i>exp</i> is subjected to <i>parameter expansion</i>,
<i>command substitution</i> and <i>arithmetic expansion</i>
before it is evaluated. See the section &lsquo;Arithmetic
Evaluation&rsquo;.</p>

<h2>BRACE EXPANSION
<a name="BRACE EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A string of the
form
&lsquo;<i>foo</i><b>{</b><i>xx</i><b>,</b><i>yy</i><b>,</b><i>zz</i><b>}</b><i>bar</i>&rsquo;
is expanded to the individual words
&lsquo;<i>fooxxbar</i>&rsquo;, &lsquo;<i>fooyybar</i>&rsquo;
and &lsquo;<i>foozzbar</i>&rsquo;. Left&minus;to&minus;right
order is preserved. This construct may be nested. Commas may
be quoted in order to include them literally in a word.</p>

<p style="margin-left:11%; margin-top: 1em">An expression
of the form
&lsquo;<b>{</b><i>n1</i><b>..</b><i>n2</i><b>}</b>&rsquo;,
where <i>n1</i> and <i>n2</i> are integers, is expanded to
every number between <i>n1</i> and <i>n2</i> inclusive. If
either number begins with a zero, all the resulting numbers
will be padded with leading zeroes to that minimum width,
but for negative numbers the <b>&minus;</b> character is
also included in the width. If the numbers are in decreasing
order the resulting sequence will also be in decreasing
order.</p>

<p style="margin-left:11%; margin-top: 1em">An expression
of the form
&lsquo;<b>{</b><i>n1</i><b>..</b><i>n2</i><b>..</b><i>n3</i><b>}</b>&rsquo;,
where <i>n1</i>, <i>n2</i>, and <i>n3</i> are integers, is
expanded as above, but only every <i>n3</i>th number
starting from <i>n1</i> is output. If <i>n3</i> is negative
the numbers are output in reverse order, this is slightly
different from simply swapping <i>n1</i> and <i>n2</i> in
the case that the step <i>n3</i> doesn&rsquo;t evenly divide
the range. Zero padding can be specified in any of the three
numbers, specifying it in the third can be useful to pad for
example &lsquo;<b>{&minus;99..100..01}</b>&rsquo; which is
not possible to specify by putting a 0 on either of the
first two numbers (i.e. pad to two characters).</p>

<p style="margin-left:11%; margin-top: 1em">If a brace
expression matches none of the above forms, it is left
unchanged, unless the option <b>BRACE_CCL</b> (an
abbreviation for &lsquo;brace character class&rsquo;) is
set. In that case, it is expanded to a list of the
individual characters between the braces sorted into the
order of the characters in the ASCII character set
(multibyte characters are not currently handled). The syntax
is similar to a <b>[</b>...<b>]</b> expression in filename
generation: &lsquo;<b>&minus;</b>&rsquo; is treated
specially to denote a range of characters, but
&lsquo;<b>^</b>&rsquo; or &lsquo;<b>!</b>&rsquo; as the
first character is treated normally. For example,
&lsquo;<b>{abcdef0&minus;9}</b>&rsquo; expands to 16 words
<b>0 1 2 3 4 5 6 7 8 9 a b c d e f</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that brace
expansion is not part of filename generation (globbing); an
expression such as <b>*/{foo,bar}</b> is split into two
separate words <b>*/foo</b> and <b>*/bar</b> before filename
generation takes place. In particular, note that this is
liable to produce a &lsquo;no match&rsquo; error if
<i>either</i> of the two expressions does not match; this is
to be contrasted with <b>*/(foo|bar)</b>, which is treated
as a single pattern but otherwise has similar effects.</p>

<p style="margin-left:11%; margin-top: 1em">To combine
brace expansion with array expansion, see the
<b>${^</b><i>spec</i><b>}</b> form described in the section
Parameter Expansion above.</p>

<h2>FILENAME EXPANSION
<a name="FILENAME EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each word is
checked to see if it begins with an unquoted
&lsquo;<b>~</b>&rsquo;. If it does, then the word up to a
&lsquo;<b>/</b>&rsquo;, or the end of the word if there is
no &lsquo;<b>/</b>&rsquo;, is checked to see if it can be
substituted in one of the ways described here. If so, then
the &lsquo;<b>~</b>&rsquo; and the checked portion are
replaced with the appropriate substitute value.</p>

<p style="margin-left:11%; margin-top: 1em">A
&lsquo;<b>~</b>&rsquo; by itself is replaced by the value of
<b>$HOME</b>. A &lsquo;<b>~</b>&rsquo; followed by a
&lsquo;<b>+</b>&rsquo; or a &lsquo;<b>&minus;</b>&rsquo; is
replaced by current or previous working directory,
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">A
&lsquo;<b>~</b>&rsquo; followed by a number is replaced by
the directory at that position in the directory stack.
&lsquo;<b>~0</b>&rsquo; is equivalent to
&lsquo;<b>~+</b>&rsquo;, and &lsquo;<b>~1</b>&rsquo; is the
top of the stack. &lsquo;<b>~+</b>&rsquo; followed by a
number is replaced by the directory at that position in the
directory stack. &lsquo;<b>~+0</b>&rsquo; is equivalent to
&lsquo;<b>~+</b>&rsquo;, and &lsquo;<b>~+1</b>&rsquo; is the
top of the stack. &lsquo;<b>~&minus;</b>&rsquo; followed by
a number is replaced by the directory that many positions
from the bottom of the stack. &lsquo;<b>~&minus;0</b>&rsquo;
is the bottom of the stack. The <b>PUSHD_MINUS</b> option
exchanges the effects of &lsquo;<b>~+</b>&rsquo; and
&lsquo;<b>~&minus;</b>&rsquo; where they are followed by a
number.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Dynamic
named directories</b> <br>
If the function <b>zsh_directory_name</b> exists, or the
shell variable <b>zsh_directory_name_functions</b> exists
and contains an array of function names, then the functions
are used to implement dynamic directory naming. The
functions are tried in order until one returns status zero,
so it is important that functions test whether they can
handle the case in question and return an appropriate
status.</p>

<p style="margin-left:11%; margin-top: 1em">A
&lsquo;<b>~</b>&rsquo; followed by a string <i>namstr</i> in
unquoted square brackets is treated specially as a dynamic
directory name. Note that the first unquoted closing square
bracket always terminates <i>namstr</i>. The shell function
is passed two arguments: the string <b>n</b> (for name) and
<i>namstr</i>. It should either set the array <b>reply</b>
to a single element which is the directory corresponding to
the name and return status zero (executing an assignment as
the last statement is usually sufficient), or it should
return status non&minus;zero. In the former case the element
of reply is used as the directory; in the latter case the
substitution is deemed to have failed. If all functions fail
and the option <b>NOMATCH</b> is set, an error results.</p>

<p style="margin-left:11%; margin-top: 1em">The functions
defined as above are also used to see if a directory can be
turned into a name, for example when printing the directory
stack or when expanding <b>%~</b> in prompts. In this case
each function is passed two arguments: the string <b>d</b>
(for directory) and the candidate for dynamic naming. The
function should either return non&minus;zero status, if the
directory cannot be named by the function, or it should set
the array reply to consist of two elements: the first is the
dynamic name for the directory (as would appear within
&lsquo;<b>~[</b><i>...</i><b>]</b>&rsquo;), and the second
is the prefix length of the directory to be replaced. For
example, if the trial directory is
<b>/home/myname/src/zsh</b> and the dynamic name for
<b>/home/myname/src</b> (which has 16 characters) is
<b>s</b>, then the function sets</p>

<p style="margin-left:22%; margin-top: 1em"><b>reply=(s
16)</b></p>

<p style="margin-left:11%; margin-top: 1em">The directory
name so returned is compared with possible static names for
parts of the directory path, as described below; it is used
if the prefix length matched (16 in the example) is longer
than that matched by any static name.</p>

<p style="margin-left:11%; margin-top: 1em">It is not a
requirement that a function implements both <b>n</b> and
<b>d</b> calls; for example, it might be appropriate for
certain dynamic forms of expansion not to be contracted to
names. In that case any call with the first argument
<b>d</b> should cause a non&minus;zero status to be
returned.</p>

<p style="margin-left:11%; margin-top: 1em">The completion
system calls &lsquo;<b>zsh_directory_name c</b>&rsquo;
followed by equivalent calls to elements of the array
<b>zsh_directory_name_functions</b>, if it exists, in order
to complete dynamic names for directories. The code for this
should be as for any other completion function as described
in <i>zshcompsys</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">As a working
example, here is a function that expands any dynamic names
beginning with the string <b>p:</b> to directories below
<b>/home/pws/perforce</b>. In this simple case a static name
for the directory would be just as effective.</p>


<p style="margin-left:22%; margin-top: 1em"><b>zsh_directory_name()
{ <br>
emulate &minus;L zsh <br>
setopt extendedglob <br>
local &minus;a match mbegin mend <br>
if [[ $1 = d ]]; then <br>
# turn the directory into a name <br>
if [[ $2 = (#b)(/home/pws/perforce/)([^/]##)* ]]; then <br>
typeset &minus;ga reply <br>
reply=(p:$match[2] $(( ${#match[1]} + ${#match[2]} )) ) <br>
else <br>
return 1 <br>
fi <br>
elif [[ $1 = n ]]; then <br>
# turn the name into a directory <br>
[[ $2 != (#b)p:(?*) ]] &amp;&amp; return 1 <br>
typeset &minus;ga reply <br>
reply=(/home/pws/perforce/$match[1]) <br>
elif [[ $1 = c ]]; then <br>
# complete names <br>
local expl <br>
local &minus;a dirs <br>
dirs=(/home/pws/perforce/*(/:t)) <br>
dirs=(p:${^dirs}) <br>
_wanted dynamic&minus;dirs expl &rsquo;dynamic
directory&rsquo; compadd &minus;S\] &minus;a dirs <br>
return <br>
else <br>
return 1 <br>
fi <br>
return 0 <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Static named
directories</b> <br>
A &lsquo;<b>~</b>&rsquo; followed by anything not already
covered consisting of any number of alphanumeric characters
or underscore (&lsquo;<b>_</b>&rsquo;), hyphen
(&lsquo;<b>&minus;</b>&rsquo;), or dot
(&lsquo;<b>.</b>&rsquo;) is looked up as a named directory,
and replaced by the value of that named directory if found.
Named directories are typically home directories for users
on the system. They may also be defined if the text after
the &lsquo;<b>~</b>&rsquo; is the name of a string shell
parameter whose value begins with a &lsquo;<b>/</b>&rsquo;.
Note that trailing slashes will be removed from the path to
the directory (though the original parameter is not
modified).</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to define directory names using the <b>&minus;d</b>
option to the <b>hash</b> builtin.</p>

<p style="margin-left:11%; margin-top: 1em">In certain
circumstances (in prompts, for instance), when the shell
prints a path, the path is checked to see if it has a named
directory as its prefix. If so, then the prefix portion is
replaced with a &lsquo;<b>~</b>&rsquo; followed by the name
of the directory. The shortest way of referring to the
directory is used, with ties broken in favour of using a
named directory, except when the directory is <b>/</b>
itself. The parameters <b>$PWD</b> and <b>$OLDPWD</b> are
never abbreviated in this fashion.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&lsquo;=&rsquo;
expansion</b> <br>
If a word begins with an unquoted &lsquo;<b>=</b>&rsquo; and
the <b>EQUALS</b> option is set, the remainder of the word
is taken as the name of a command. If a command exists by
that name, the word is replaced by the full pathname of the
command.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Notes</b>
<br>
Filename expansion is performed on the right hand side of a
parameter assignment, including those appearing after
commands of the <b>typeset</b> family. In this case, the
right hand side will be treated as a colon&minus;separated
list in the manner of the <b>PATH</b> parameter, so that a
&lsquo;<b>~</b>&rsquo; or an &lsquo;<b>=</b>&rsquo;
following a &lsquo;<b>:</b>&rsquo; is eligible for
expansion. All such behaviour can be disabled by quoting the
&lsquo;<b>~</b>&rsquo;, the &lsquo;<b>=</b>&rsquo;, or the
whole expression (but not simply the colon); the
<b>EQUALS</b> option is also respected.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>MAGIC_EQUAL_SUBST</b> is set, any unquoted shell argument
in the form
&lsquo;<i>identifier</i><b>=</b><i>expression</i>&rsquo;
becomes eligible for file expansion as described in the
previous paragraph. Quoting the first &lsquo;<b>=</b>&rsquo;
also inhibits this.</p>

<h2>FILENAME GENERATION
<a name="FILENAME GENERATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a word
contains an unquoted instance of one of the characters
&lsquo;<b>*</b>&rsquo;, &lsquo;<b>(</b>&rsquo;,
&lsquo;<b>|</b>&rsquo;, &lsquo;<b>&lt;</b>&rsquo;,
&lsquo;<b>[</b>&rsquo;, or &lsquo;<b>?</b>&rsquo;, it is
regarded as a pattern for filename generation, unless the
<b>GLOB</b> option is unset. If the <b>EXTENDED_GLOB</b>
option is set, the &lsquo;<b>^</b>&rsquo; and
&lsquo;<b>#</b>&rsquo; characters also denote a pattern;
otherwise they are not treated specially by the shell.</p>

<p style="margin-left:11%; margin-top: 1em">The word is
replaced with a list of sorted filenames that match the
pattern. If no matching pattern is found, the shell gives an
error message, unless the <b>NULL_GLOB</b> option is set, in
which case the word is deleted; or unless the <b>NOMATCH</b>
option is unset, in which case the word is left
unchanged.</p>

<p style="margin-left:11%; margin-top: 1em">In filename
generation, the character &lsquo;<b>/</b>&rsquo; must be
matched explicitly; also, a &lsquo;<b>.</b>&rsquo; must be
matched explicitly at the beginning of a pattern or after a
&lsquo;<b>/</b>&rsquo;, unless the <b>GLOB_DOTS</b> option
is set. No filename generation pattern matches the files
&lsquo;<b>.</b>&rsquo; or &lsquo;<b>..</b>&rsquo;. In other
instances of pattern matching, the &lsquo;<b>/</b>&rsquo;
and &lsquo;<b>.</b>&rsquo; are not treated specially.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Glob
Operators</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>*</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Matches any string, including the null string.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>?</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Matches any character.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>[</b>...<b>]</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Matches any of the enclosed characters. Ranges of
characters can be specified by separating two characters by
a &lsquo;<b>&minus;</b>&rsquo;. A
&lsquo;<b>&minus;</b>&rsquo; or &lsquo;<b>]</b>&rsquo; may
be matched by including it as the first character in the
list. There are also several named classes of characters, in
the form &lsquo;<b>[:</b><i>name</i><b>:]</b>&rsquo; with
the following meanings. The first set use the macros
provided by the operating system to test for the given
character combinations, including any modifications due to
local language settings, see <i>ctype</i>(3):</p></td></tr>
</table>

<p style="margin-left:22%;"><b>[:alnum:]</b></p>

<p style="margin-left:32%;">The character is
alphanumeric</p>

<p style="margin-left:22%;"><b>[:alpha:]</b></p>

<p style="margin-left:32%;">The character is alphabetic</p>

<p style="margin-left:22%;"><b>[:ascii:]</b></p>

<p style="margin-left:32%;">The character is 7&minus;bit,
i.e. is a single&minus;byte character without the top bit
set.</p>

<p style="margin-left:22%;"><b>[:blank:]</b></p>

<p style="margin-left:32%;">The character is either space
or tab</p>

<p style="margin-left:22%;"><b>[:cntrl:]</b></p>

<p style="margin-left:32%;">The character is a control
character</p>

<p style="margin-left:22%;"><b>[:digit:]</b></p>

<p style="margin-left:32%;">The character is a decimal
digit</p>

<p style="margin-left:22%;"><b>[:graph:]</b></p>

<p style="margin-left:32%;">The character is a printable
character other than whitespace</p>

<p style="margin-left:22%;"><b>[:lower:]</b></p>

<p style="margin-left:32%;">The character is a lowercase
letter</p>

<p style="margin-left:22%;"><b>[:print:]</b></p>

<p style="margin-left:32%;">The character is printable</p>

<p style="margin-left:22%;"><b>[:punct:]</b></p>

<p style="margin-left:32%;">The character is printable but
neither alphanumeric nor whitespace</p>

<p style="margin-left:22%;"><b>[:space:]</b></p>

<p style="margin-left:32%;">The character is whitespace</p>

<p style="margin-left:22%;"><b>[:upper:]</b></p>

<p style="margin-left:32%;">The character is an uppercase
letter</p>

<p style="margin-left:22%;"><b>[:xdigit:]</b></p>

<p style="margin-left:32%;">The character is a hexadecimal
digit</p>

<p style="margin-left:22%; margin-top: 1em">Another set of
named classes is handled internally by the shell and is not
sensitive to the locale: <b><br>
[:IDENT:]</b></p>

<p style="margin-left:32%;">The character is allowed to
form part of a shell identifier, such as a parameter
name</p>

<p style="margin-left:22%;"><b>[:IFS:]</b></p>

<p style="margin-left:32%;">The character is used as an
input field separator, i.e. is contained in the <b>IFS</b>
parameter</p>

<p style="margin-left:22%;"><b>[:IFSSPACE:]</b></p>

<p style="margin-left:32%;">The character is an IFS white
space character; see the documentation for <b>IFS</b> in the
<i>zshparam</i>(1) manual page.</p>

<p style="margin-left:22%;"><b>[:WORD:]</b></p>

<p style="margin-left:32%;">The character is treated as
part of a word; this test is sensitive to the value of the
<b>WORDCHARS</b> parameter</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
square brackets are additional to those enclosing the whole
set of characters, so to test for a single alphanumeric
character you need &lsquo;<b>[[:alnum:]]</b>&rsquo;. Named
character sets can be used alongside other types, e.g.
&lsquo;<b>[[:alpha:]0&minus;9]</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>[^</b>...<b>]</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>[!</b>...<b>]</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Like <b>[</b>...<b>]</b>, except that it matches any
character which is not in the given set.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&lt;</b>[<i>x</i>]<b>&minus;</b>[<i>y</i>]<b>&gt;</b></p>

<p style="margin-left:22%;">Matches any number in the range
<i>x</i> to <i>y</i>, inclusive. Either of the numbers may
be omitted to make the range open&minus;ended; hence
&lsquo;<b>&lt;&minus;&gt;</b>&rsquo; matches any number. To
match individual digits, the <b>[</b>...<b>]</b> form is
more efficient.</p>

<p style="margin-left:22%; margin-top: 1em">Be careful when
using other wildcards adjacent to patterns of this form; for
example, <b>&lt;0&minus;9&gt;*</b> will actually match any
number whatsoever at the start of the string, since the
&lsquo;<b>&lt;0&minus;9&gt;</b>&rsquo; will match the first
digit, and the &lsquo;<b>*</b>&rsquo; will match any others.
This is a trap for the unwary, but is in fact an inevitable
consequence of the rule that the longest possible match
always succeeds. Expressions such as
&lsquo;<b>&lt;0&minus;9&gt;[^[:digit:]]*</b>&rsquo; can be
used instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>(</b>...<b>)</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Matches the enclosed pattern. This is used for grouping.
If the <b>KSH_GLOB</b> option is set, then a
&lsquo;<b>@</b>&rsquo;, &lsquo;<b>*</b>&rsquo;,
&lsquo;<b>+</b>&rsquo;, &lsquo;<b>?</b>&rsquo; or
&lsquo;<b>!</b>&rsquo; immediately preceding the
&lsquo;<b>(</b>&rsquo; is treated specially, as detailed
below. The option <b>SH_GLOB</b> prevents bare parentheses
from being used in this way, though the <b>KSH_GLOB</b>
option is still available.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that
grouping cannot extend over multiple directories: it is an
error to have a &lsquo;<b>/</b>&rsquo; within a group (this
only applies for patterns used in filename generation).
There is one exception: a group of the form
<b>(</b><i>pat</i><b>/)#</b> appearing as a complete path
segment can match a sequence of directories. For example,
<b>foo/(a*/)#bar</b> matches <b>foo/bar</b>,
<b>foo/any/bar</b>, <b>foo/any/anyother/bar</b>, and so
on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><i>x</i><b>|</b><i>y</i></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">Matches either <i>x</i> or
<i>y</i>. This operator has lower precedence than any other.
The &lsquo;<b>|</b>&rsquo; character must be within
parentheses, to avoid interpretation as a pipeline.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>^</b><i>x</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>(Requires <b>EXTENDED_GLOB</b> to be set.) Matches
anything except the pattern <i>x</i>. This has a higher
precedence than &lsquo;<b>/</b>&rsquo;, so
&lsquo;<b>^foo/bar</b>&rsquo; will search directories in
&lsquo;<b>.</b>&rsquo; except &lsquo;<b>./foo</b>&rsquo; for
a file named &lsquo;<b>bar</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>~</b><i>y</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>(Requires <b>EXTENDED_GLOB</b> to be set.) Match
anything that matches the pattern <i>x</i> but does not
match <i>y</i>. This has lower precedence than any operator
except &lsquo;<b>|</b>&rsquo;, so
&lsquo;<b>*/*~foo/bar</b>&rsquo; will search for all files
in all directories in &lsquo;<b>.</b>&rsquo; and then
exclude &lsquo;<b>foo/bar</b>&rsquo; if there was such a
match. Multiple patterns can be excluded by
&lsquo;<i>foo</i><b>~</b><i>bar</i><b>~</b><i>baz</i>&rsquo;.
In the exclusion pattern (<i>y</i>), &lsquo;<b>/</b>&rsquo;
and &lsquo;<b>.</b>&rsquo; are not treated specially the way
they usually are in globbing.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>#</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>(Requires <b>EXTENDED_GLOB</b> to be set.) Matches zero
or more occurrences of the pattern <i>x</i>. This operator
has high precedence; &lsquo;<b>12#</b>&rsquo; is equivalent
to &lsquo;<b>1(2#)</b>&rsquo;, rather than
&lsquo;<b>(12)#</b>&rsquo;. It is an error for an unquoted
&lsquo;<b>#</b>&rsquo; to follow something which cannot be
repeated; this includes an empty string, a pattern already
followed by &lsquo;<b>##</b>&rsquo;, or parentheses when
part of a <b>KSH_GLOB</b> pattern (for example,
&lsquo;<b>!(</b><i>foo</i><b>)#</b>&rsquo; is invalid and
must be replaced by
&lsquo;<b>*(!(</b><i>foo</i><b>))</b>&rsquo;).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>x</i><b>##</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>(Requires <b>EXTENDED_GLOB</b> to be set.) Matches one
or more occurrences of the pattern <i>x</i>. This operator
has high precedence; &lsquo;<b>12##</b>&rsquo; is equivalent
to &lsquo;<b>1(2##)</b>&rsquo;, rather than
&lsquo;<b>(12)##</b>&rsquo;. No more than two active
&lsquo;<b>#</b>&rsquo; characters may appear together. (Note
the potential clash with glob qualifiers in the form
&lsquo;<b>1(2##)</b>&rsquo; which should therefore be
avoided.)</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>ksh&minus;like
Glob Operators</b> <br>
If the <b>KSH_GLOB</b> option is set, the effects of
parentheses can be modified by a preceding
&lsquo;<b>@</b>&rsquo;, &lsquo;<b>*</b>&rsquo;,
&lsquo;<b>+</b>&rsquo;, &lsquo;<b>?</b>&rsquo; or
&lsquo;<b>!</b>&rsquo;. This character need not be unquoted
to have special effects, but the &lsquo;<b>(</b>&rsquo; must
be.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>@(</b>...<b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Match the pattern in the
parentheses. (Like &lsquo;<b>(</b>...<b>)</b>&rsquo;.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>*(</b>...<b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Match any number of occurrences. (Like
&lsquo;<b>(</b>...<b>)#</b>&rsquo;.)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>+(</b>...<b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Match at least one occurrence. (Like
&lsquo;<b>(</b>...<b>)##</b>&rsquo;.)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>?(</b>...<b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Match zero or one occurrence. (Like
&lsquo;<b>(|</b>...<b>)</b>&rsquo;.)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>!(</b>...<b>)</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Match anything but the expression in parentheses. (Like
&lsquo;<b>(^(</b>...<b>))</b>&rsquo;.)</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Precedence</b>
<br>
The precedence of the operators given above is (highest)
&lsquo;<b>^</b>&rsquo;, &lsquo;<b>/</b>&rsquo;,
&lsquo;<b>~</b>&rsquo;, &lsquo;<b>|</b>&rsquo; (lowest); the
remaining operators are simply treated from left to right as
part of a string, with &lsquo;<b>#</b>&rsquo; and
&lsquo;<b>##</b>&rsquo; applying to the shortest possible
preceding unit (i.e. a character, &lsquo;<b>?</b>&rsquo;,
&lsquo;<b>[</b>...<b>]</b>&rsquo;,
&lsquo;<b>&lt;</b>...<b>&gt;</b>&rsquo;, or a parenthesised
expression). As mentioned above, a &lsquo;<b>/</b>&rsquo;
used as a directory separator may not appear inside
parentheses, while a &lsquo;<b>|</b>&rsquo; must do so; in
patterns used in other contexts than filename generation
(for example, in <b>case</b> statements and tests within
&lsquo;<b>[[</b>...<b>]]</b>&rsquo;), a
&lsquo;<b>/</b>&rsquo; is not special; and
&lsquo;<b>/</b>&rsquo; is also not special after a
&lsquo;<b>~</b>&rsquo; appearing outside parentheses in a
filename pattern.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Globbing
Flags</b> <br>
There are various flags which affect any text to their right
up to the end of the enclosing group or to the end of the
pattern; they require the <b>EXTENDED_GLOB</b> option. All
take the form <b>(#</b><i>X</i><b>)</b> where <i>X</i> may
have one of the following forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>i</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Case insensitive: upper or lower
case characters in the pattern match upper or lower case
characters.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>l</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Lower case characters in the pattern match upper or
lower case characters; upper case characters in the pattern
still only match upper case characters.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>I</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Case sensitive: locally negates the effect of <b>i</b>
or <b>l</b> from that point on.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>b</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Activate backreferences for parenthesised groups in the
pattern; this does not work in filename generation. When a
pattern with a set of active parentheses is matched, the
strings matched by the groups are stored in the array
<b>$match</b>, the indices of the beginning of the matched
parentheses in the array <b>$mbegin</b>, and the indices of
the end in the array <b>$mend</b>, with the first element of
each array corresponding to the first parenthesised group,
and so on. These arrays are not otherwise special to the
shell. The indices use the same convention as does parameter
substitution, so that elements of <b>$mend</b> and
<b>$mbegin</b> may be used in subscripts; the
<b>KSH_ARRAYS</b> option is respected. Sets of globbing
flags are not considered parenthesised groups; only the
first nine active parentheses can be referenced.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>foo=&quot;a
string with a message&quot; <br>
if [[ $foo = (a|an)&rsquo; &rsquo;(#b)(*)&rsquo; &rsquo;*
]]; then <br>
print ${foo[$mbegin[1],$mend[1]]} <br>
fi</b></p>

<p style="margin-left:22%; margin-top: 1em">prints
&lsquo;<b>string with a</b>&rsquo;. Note that the first
parenthesis is before the <b>(#b)</b> and does not create a
backreference.</p>

<p style="margin-left:22%; margin-top: 1em">Backreferences
work with all forms of pattern matching other than filename
generation, but note that when performing matches on an
entire array, such as
<b>${</b><i>array</i><b>#</b><i>pattern</i><b>}</b>, or a
global substitution, such as
<b>${</b><i>param</i><b>//</b><i>pat</i><b>/</b><i>repl</i><b>}</b>,
only the data for the last match remains available. In the
case of global replacements this may still be useful. See
the example for the <b>m</b> flag below.</p>

<p style="margin-left:22%; margin-top: 1em">The numbering
of backreferences strictly follows the order of the opening
parentheses from left to right in the pattern string,
although sets of parentheses may be nested. There are
special rules for parentheses followed by
&lsquo;<b>#</b>&rsquo; or &lsquo;<b>##</b>&rsquo;. Only the
last match of the parenthesis is remembered: for example, in
&lsquo;<b>[[ abab = (#b)([ab])# ]]</b>&rsquo;, only the
final &lsquo;<b>b</b>&rsquo; is stored in <b>match[1]</b>.
Thus extra parentheses may be necessary to match the
complete segment: for example, use
&lsquo;<b>X((ab|cd)#)Y</b>&rsquo; to match a whole string of
either &lsquo;<b>ab</b>&rsquo; or &lsquo;<b>cd</b>&rsquo;
between &lsquo;<b>X</b>&rsquo; and &lsquo;<b>Y</b>&rsquo;,
using the value of <b>$match[1]</b> rather than
<b>$match[2]</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the match
fails none of the parameters is altered, so in some cases it
may be necessary to initialise them beforehand. If some of
the backreferences fail to match &minus;&minus; which
happens if they are in an alternate branch which fails to
match, or if they are followed by <b>#</b> and matched zero
times &minus;&minus; then the matched string is set to the
empty string, and the start and end indices are set to
&minus;1.</p>

<p style="margin-left:22%; margin-top: 1em">Pattern
matching with backreferences is slightly slower than
without.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>B</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Deactivate backreferences,
negating the effect of the <b>b</b> flag from that point
on.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>c</b><i>N</i><b>,</b><i>M</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>The flag <b>(#c</b><i>N</i><b>,</b><i>M</i><b>)</b> can
be used anywhere that the <b>#</b> or <b>##</b> operators
can be used except in the expressions
&lsquo;<b>(*/)#</b>&rsquo; and &lsquo;<b>(*/)##</b>&rsquo;
in filename generation, where &lsquo;<b>/</b>&rsquo; has
special meaning; it cannot be combined with other globbing
flags and a bad pattern error occurs if it is misplaced. It
is equivalent to the form
<b>{</b><i>N</i><b>,</b><i>M</i><b>}</b> in regular
expressions. The previous character or group is required to
match between <i>N</i> and <i>M</i> times, inclusive. The
form <b>(#c</b><i>N</i><b>)</b> requires exactly <b>N</b>
matches; <b>(#c,</b><i>M</i><b>)</b> is equivalent to
specifying <i>N</i> as 0; <b>(#c</b><i>N</i><b>,)</b>
specifies that there is no maximum limit on the number of
matches.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>m</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Set references to the match data for the entire string
matched; this is similar to backreferencing and does not
work in filename generation. The flag must be in effect at
the end of the pattern, i.e. not local to a group. The
parameters <b>$MATCH</b>, <b>$MBEGIN</b> and <b>$MEND</b>
will be set to the string matched and to the indices of the
beginning and end of the string, respectively. This is most
useful in parameter substitutions, as otherwise the string
matched is obvious.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>arr=(veldt
jynx grimps waqf zho buck) <br>
print ${arr//(#m)[aeiou]/${(U)MATCH}}</b></p>

<p style="margin-left:22%; margin-top: 1em">forces all the
matches (i.e. all vowels) into uppercase, printing
&lsquo;<b>vEldt jynx grImps wAqf zhO bUck</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Unlike
backreferences, there is no speed penalty for using match
references, other than the extra substitutions required for
the replacement strings in cases such as the example
shown.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>M</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Deactivate the <b>m</b> flag,
hence no references to match data will be created.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>a</b><i>num</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>Approximate matching: <i>num</i> errors are allowed in
the string matched by the pattern. The rules for this are
described in the next subsection.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>s</b>, <b>e</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Unlike the other flags, these have only a local effect,
and each must appear on its own: &lsquo;<b>(#s)</b>&rsquo;
and &lsquo;<b>(#e)</b>&rsquo; are the only valid forms. The
&lsquo;<b>(#s)</b>&rsquo; flag succeeds only at the start of
the test string, and the &lsquo;<b>(#e)</b>&rsquo; flag
succeeds only at the end of the test string; they correspond
to &lsquo;<b>^</b>&rsquo; and &lsquo;<b>$</b>&rsquo; in
standard regular expressions. They are useful for matching
path segments in patterns other than those in filename
generation (where path segments are in any case treated
separately). For example,
&lsquo;<b>*((#s)|/)test((#e)|/)*</b>&rsquo; matches a path
segment &lsquo;<b>test</b>&rsquo; in any of the following
strings: <b>test</b>, <b>test/at/start</b>,
<b>at/end/test</b>, <b>in/test/middle</b>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Another use is
in parameter substitution; for example
&lsquo;<b>${array/(#s)A*Z(#e)}</b>&rsquo; will remove only
elements of an array which match the complete pattern
&lsquo;<b>A*Z</b>&rsquo;. There are other ways of performing
many operations of this type, however the combination of the
substitution operations &lsquo;<b>/</b>&rsquo; and
&lsquo;<b>//</b>&rsquo; with the &lsquo;<b>(#s)</b>&rsquo;
and &lsquo;<b>(#e)</b>&rsquo; flags provides a single simple
and memorable method.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
assertions of the form &lsquo;<b>(^(#s))</b>&rsquo; also
work, i.e. match anywhere except at the start of the string,
although this actually means &lsquo;anything except a
zero&minus;length portion at the start of the string&rsquo;;
you need to use &lsquo;<b>(&quot;&quot;~(#s))</b>&rsquo; to
match a zero&minus;length portion of the string not at the
start.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>q</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">A &lsquo;<b>q</b>&rsquo; and
everything up to the closing parenthesis of the globbing
flags are ignored by the pattern matching code. This is
intended to support the use of glob qualifiers, see below.
The result is that the pattern
&lsquo;<b>(#b)(*).c(#q.)</b>&rsquo; can be used both for
globbing and for matching against a string. In the former
case, the &lsquo;<b>(#q.)</b>&rsquo; will be treated as a
glob qualifier and the &lsquo;<b>(#b)</b>&rsquo; will not be
useful, while in the latter case the
&lsquo;<b>(#b)</b>&rsquo; is useful for backreferences and
the &lsquo;<b>(#q.)</b>&rsquo; will be ignored. Note that
colon modifiers in the glob qualifiers are also not applied
in ordinary pattern matching.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>u</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Respect the current locale in determining the presence
of multibyte characters in a pattern, provided the shell was
compiled with <b>MULTIBYTE_SUPPORT</b>. This overrides the
<b>MULTIBYTE</b> option; the default behaviour is taken from
the option. Compare <b>U</b>. (Mnemonic: typically multibyte
characters are from Unicode in the UTF&minus;8 encoding,
although any extension of ASCII supported by the system
library may be used.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>U</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>All characters are considered to be a single byte long.
The opposite of <b>u</b>. This overrides the
<b>MULTIBYTE</b> option.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For example,
the test string <b>fooxx</b> can be matched by the pattern
<b>(#i)FOOXX</b>, but not by <b>(#l)FOOXX</b>,
<b>(#i)FOO(#I)XX</b> or <b>((#i)FOOX)X</b>. The string
<b>(#ia2)readme</b> specifies case&minus;insensitive
matching of <b>readme</b> with up to two errors.</p>

<p style="margin-left:11%; margin-top: 1em">When using the
ksh syntax for grouping both <b>KSH_GLOB</b> and
<b>EXTENDED_GLOB</b> must be set and the left parenthesis
should be preceded by <b>@</b>. Note also that the flags do
not affect letters inside <b>[...]</b> groups, in other
words <b>(#i)[a&minus;z]</b> still matches only lowercase
letters. Finally, note that when examining whole paths
case&minus;insensitively every directory must be searched
for all files which match, so that a pattern of the form
<b>(#i)/foo/bar/...</b> is potentially slow.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Approximate
Matching</b> <br>
When matching approximately, the shell keeps a count of the
errors found, which cannot exceed the number specified in
the <b>(#a</b><i>num</i><b>)</b> flags. Four types of error
are recognised:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Different characters, as in
<b>fooxbar</b> and <b>fooybar</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="8%"></td>
<td width="78%">


<p>Transposition of characters, as in <b>banana</b> and
<b>abnana</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="8%"></td>
<td width="78%">


<p>A character missing in the target string, as with the
pattern <b>road</b> and target string <b>rod</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>4.</p></td>
<td width="8%"></td>
<td width="78%">


<p>An extra character appearing in the target string, as
with <b>stove</b> and <b>strove</b>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Thus, the
pattern <b>(#a3)abcd</b> matches <b>dcba</b>, with the
errors occurring by using the first rule twice and the
second once, grouping the string as <b>[d][cb][a]</b> and
<b>[a][bc][d]</b>.</p>


<p style="margin-left:11%; margin-top: 1em">Non&minus;literal
parts of the pattern must match exactly, including
characters in character ranges: hence <b>(#a1)???</b>
matches strings of length four, by applying rule 4 to an
empty part of the pattern, but not strings of length two,
since all the <b>?</b> must match. Other characters which
must match exactly are initial dots in filenames (unless the
<b>GLOB_DOTS</b> option is set), and all slashes in
filenames, so that <b>a/bc</b> is two errors from
<b>ab/c</b> (the slash cannot be transposed with another
character). Similarly, errors are counted separately for
non&minus;contiguous strings in the pattern, so that
<b>(ab|cd)ef</b> is two errors from <b>aebf</b>.</p>

<p style="margin-left:11%; margin-top: 1em">When using
exclusion via the <b>~</b> operator, approximate matching is
treated entirely separately for the excluded part and must
be activated separately. Thus, <b>(#a1)README~READ_ME</b>
matches <b>READ.ME</b> but not <b>READ_ME</b>, as the
trailing <b>READ_ME</b> is matched without approximation.
However, <b>(#a1)README~(#a1)READ_ME</b> does not match any
pattern of the form <b>READ</b><i>?</i><b>ME</b> as all such
forms are now excluded.</p>

<p style="margin-left:11%; margin-top: 1em">Apart from
exclusions, there is only one overall error count; however,
the maximum errors allowed may be altered locally, and this
can be delimited by grouping. For example,
<b>(#a1)cat((#a0)dog)fox</b> allows one error in total,
which may not occur in the <b>dog</b> section, and the
pattern <b>(#a1)cat(#a0)dog(#a1)fox</b> is equivalent. Note
that the point at which an error is first found is the
crucial one for establishing whether to use approximation;
for example, <b>(#a1)abc(#a0)xyz</b> will not match
<b>abcdxyz</b>, because the error occurs at the
&lsquo;<b>x</b>&rsquo;, where approximation is turned
off.</p>

<p style="margin-left:11%; margin-top: 1em">Entire path
segments may be matched approximately, so that
&lsquo;<b>(#a1)/foo/d/is/available/at/the/bar</b>&rsquo;
allows one error in any path segment. This is much less
efficient than without the <b>(#a1)</b>, however, since
every directory in the path must be scanned for a possible
approximate match. It is best to place the <b>(#a1)</b>
after any path segments which are known to be correct.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Recursive
Globbing</b> <br>
A pathname component of the form
&lsquo;<b>(</b><i>foo</i><b>/)#</b>&rsquo; matches a path
consisting of zero or more directories matching the pattern
<i>foo</i>.</p>

<p style="margin-left:11%; margin-top: 1em">As a shorthand,
&lsquo;<b>**/</b>&rsquo; is equivalent to
&lsquo;<b>(*/)#</b>&rsquo;; note that this therefore matches
files in the current directory as well as subdirectories.
Thus:</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
(*/)#bar</b></p>

<p style="margin-left:11%; margin-top: 1em">or</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
**/bar</b></p>

<p style="margin-left:11%; margin-top: 1em">does a
recursive directory search for files named
&lsquo;<b>bar</b>&rsquo; (potentially including the file
&lsquo;<b>bar</b>&rsquo; in the current directory). This
form does not follow symbolic links; the alternative form
&lsquo;<b>***/</b>&rsquo; does, but is otherwise identical.
Neither of these can be combined with other forms of
globbing within the same path segment; in that case, the
&lsquo;<b>*</b>&rsquo; operators revert to their usual
effect.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Glob
Qualifiers</b> <br>
Patterns used for filename generation may end in a list of
qualifiers enclosed in parentheses. The qualifiers specify
which filenames that otherwise match the given pattern will
be inserted in the argument list.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>BARE_GLOB_QUAL</b> is set, then a trailing set of
parentheses containing no &lsquo;<b>|</b>&rsquo; or
&lsquo;<b>(</b>&rsquo; characters (or &lsquo;<b>~</b>&rsquo;
if it is special) is taken as a set of glob qualifiers. A
glob subexpression that would normally be taken as glob
qualifiers, for example &lsquo;<b>(^x)</b>&rsquo;, can be
forced to be treated as part of the glob pattern by doubling
the parentheses, in this case producing
&lsquo;<b>((^x))</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If the option
<b>EXTENDED_GLOB</b> is set, a different syntax for glob
qualifiers is available, namely &lsquo;<b>(#qx)</b>&rsquo;
where <b>x</b> is any of the same glob qualifiers used in
the other format. The qualifiers must still appear at the
end of the pattern. However, with this syntax multiple glob
qualifiers may be chained together. They are treated as a
logical AND of the individual sets of flags. Also, as the
syntax is unambiguous, the expression will be treated as
glob qualifiers just as long any parentheses contained
within it are balanced; appearance of
&lsquo;<b>|</b>&rsquo;, &lsquo;<b>(</b>&rsquo; or
&lsquo;<b>~</b>&rsquo; does not negate the effect. Note that
qualifiers will be recognised in this form even if a bare
glob qualifier exists at the end of the pattern, for example
&lsquo;<b>*(#q*)(.)</b>&rsquo; will recognise executable
regular files if both options are set; however, mixed syntax
should probably be avoided for the sake of clarity.</p>

<p style="margin-left:11%; margin-top: 1em">A qualifier may
be any one of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>/</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">directories</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>F</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>&lsquo;full&rsquo; (i.e. non&minus;empty) directories.
Note that the opposite sense <b>(^F)</b> expands to empty
directories and all non&minus;directories. Use <b>(/^F)</b>
for empty directories.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>.</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>plain files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>@</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>symbolic links</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>=</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>sockets</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>p</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>named pipes (FIFOs)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>*</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>executable plain files (0100)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>%</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>device files (character or block special)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>%b</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>block special files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>%c</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>character special files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>r</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>owner&minus;readable files (0400)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>w</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>owner&minus;writable files (0200)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>x</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>owner&minus;executable files (0100)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>A</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>group&minus;readable files (0040)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>I</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>group&minus;writable files (0020)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>E</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>group&minus;executable files (0010)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>R</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>world&minus;readable files (0004)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>W</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>world&minus;writable files (0002)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>X</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>world&minus;executable files (0001)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>s</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>setuid files (04000)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>S</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>setgid files (02000)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>t</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>files with the sticky bit (01000)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>f</b><i>spec</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>files with access rights matching <i>spec</i>. This
<i>spec</i> may be a octal number optionally preceded by a
&lsquo;<b>=</b>&rsquo;, a &lsquo;<b>+</b>&rsquo;, or a
&lsquo;<b>&minus;</b>&rsquo;. If none of these characters is
given, the behavior is the same as for
&lsquo;<b>=</b>&rsquo;. The octal number describes the mode
bits to be expected, if combined with a
&lsquo;<b>=</b>&rsquo;, the value given must match the
file&minus;modes exactly, with a &lsquo;<b>+</b>&rsquo;, at
least the bits in the given number must be set in the
file&minus;modes, and with a &lsquo;<b>&minus;</b>&rsquo;,
the bits in the number must not be set. Giving a
&lsquo;<b>?</b>&rsquo; instead of a octal digit anywhere in
the number ensures that the corresponding bits in the
file&minus;modes are not checked, this is only useful in
combination with &lsquo;<b>=</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the
qualifier &lsquo;<b>f</b>&rsquo; is followed by any other
character anything up to the next matching character
(&lsquo;<b>[</b>&rsquo;, &lsquo;<b>{</b>&rsquo;, and
&lsquo;<b>&lt;</b>&rsquo; match &lsquo;<b>]</b>&rsquo;,
&lsquo;<b>}</b>&rsquo;, and &lsquo;<b>&gt;</b>&rsquo;
respectively, any other character matches itself) is taken
as a list of comma&minus;separated <i>sub&minus;spec</i>s.
Each <i>sub&minus;spec</i> may be either an octal number as
described above or a list of any of the characters
&lsquo;<b>u</b>&rsquo;, &lsquo;<b>g</b>&rsquo;,
&lsquo;<b>o</b>&rsquo;, and &lsquo;<b>a</b>&rsquo;, followed
by a &lsquo;<b>=</b>&rsquo;, a &lsquo;<b>+</b>&rsquo;, or a
&lsquo;<b>&minus;</b>&rsquo;, followed by a list of any of
the characters &lsquo;<b>r</b>&rsquo;,
&lsquo;<b>w</b>&rsquo;, &lsquo;<b>x</b>&rsquo;,
&lsquo;<b>s</b>&rsquo;, and &lsquo;<b>t</b>&rsquo;, or an
octal digit. The first list of characters specify which
access rights are to be checked. If a &lsquo;<b>u</b>&rsquo;
is given, those for the owner of the file are used, if a
&lsquo;<b>g</b>&rsquo; is given, those of the group are
checked, a &lsquo;<b>o</b>&rsquo; means to test those of
other users, and the &lsquo;<b>a</b>&rsquo; says to test all
three groups. The &lsquo;<b>=</b>&rsquo;,
&lsquo;<b>+</b>&rsquo;, and &lsquo;<b>&minus;</b>&rsquo;
again says how the modes are to be checked and have the same
meaning as described for the first form above. The second
list of characters finally says which access rights are to
be expected: &lsquo;<b>r</b>&rsquo; for read access,
&lsquo;<b>w</b>&rsquo; for write access,
&lsquo;<b>x</b>&rsquo; for the right to execute the file (or
to search a directory), &lsquo;<b>s</b>&rsquo; for the
setuid and setgid bits, and &lsquo;<b>t</b>&rsquo; for the
sticky bit.</p>

<p style="margin-left:22%; margin-top: 1em">Thus,
&lsquo;<b>*(f70?)</b>&rsquo; gives the files for which the
owner has read, write, and execute permission, and for which
other group members have no rights, independent of the
permissions for other users. The pattern
&lsquo;<b>*(f&minus;100)</b>&rsquo; gives all files for
which the owner does not have execute permission, and
&lsquo;<b>*(f:gu+w,o&minus;rx:)</b>&rsquo; gives the files
for which the owner and the other members of the group have
at least write permission, and for which other users
don&rsquo;t have read or execute permission.</p>

<p style="margin-left:11%;"><b>e</b><i>string</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>+</b><i>cmd</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>The <i>string</i> will be executed as shell code. The
filename will be included in the list if and only if the
code returns a zero status (usually the status of the last
command).</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In the first
form, the first character after the &lsquo;<b>e</b>&rsquo;
will be used as a separator and anything up to the next
matching separator will be taken as the <i>string</i>;
&lsquo;<b>[</b>&rsquo;, &lsquo;<b>{</b>&rsquo;, and
&lsquo;<b>&lt;</b>&rsquo; match &lsquo;<b>]</b>&rsquo;,
&lsquo;<b>}</b>&rsquo;, and &lsquo;<b>&gt;</b>&rsquo;,
respectively, while any other character matches itself. Note
that expansions must be quoted in the <i>string</i> to
prevent them from being expanded before globbing is done.
<i>string</i> is then executed as shell code. The string
<b>globqual</b> is appended to the array
<b>zsh_eval_context</b> the duration of execution.</p>

<p style="margin-left:22%; margin-top: 1em">During the
execution of <i>string</i> the filename currently being
tested is available in the parameter <b>REPLY</b>; the
parameter may be altered to a string to be inserted into the
list instead of the original filename. In addition, the
parameter <b>reply</b> may be set to an array or a string,
which overrides the value of <b>REPLY</b>. If set to an
array, the latter is inserted into the command line word by
word.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose a directory contains a single file
&lsquo;<b>lonely</b>&rsquo;. Then the expression
&lsquo;<b>*(e:&rsquo;reply=(${REPLY}{1,2})&rsquo;:)</b>&rsquo;
will cause the words &lsquo;<b>lonely1</b>&rsquo; and
&lsquo;<b>lonely2</b>&rsquo; to be inserted into the command
line. Note the quoting of <i>string</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The form
<b>+</b><i>cmd</i> has the same effect, but no delimiters
appear around <i>cmd</i>. Instead, <i>cmd</i> is taken as
the longest sequence of characters following the <b>+</b>
that are alphanumeric or underscore. Typically <i>cmd</i>
will be the name of a shell function that contains the
appropriate test. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>nt() { [[
$REPLY &minus;nt $NTREF ]] } <br>
NTREF=reffile <br>
ls &minus;l *(+nt)</b></p>

<p style="margin-left:22%; margin-top: 1em">lists all files
in the directory that have been modified more recently than
<b>reffile</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>d</b><i>dev</i></p></td>
<td width="5%"></td>
<td width="35%">


<p style="margin-top: 1em">files on the device
<i>dev</i></p> </td>
<td width="43%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>l</b>[<b>&minus;</b>|<b>+</b>]<i>ct</i></p>

<p style="margin-left:22%;">files having a link count less
than <i>ct</i> (<b>&minus;</b>), greater than <i>ct</i>
(<b>+</b>), or equal to <i>ct</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>U</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>files owned by the effective user ID</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>G</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>files owned by the effective group ID</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>u</b><i>id</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>files owned by user ID <i>id</i> if that is a number.
Otherwise, <i>id</i> specifies a user name: the character
after the &lsquo;<b>u</b>&rsquo; will be taken as a
separator and the string between it and the next matching
separator will be taken as a user name. The starting
separators &lsquo;<b>[</b>&rsquo;, &lsquo;<b>{</b>&rsquo;,
and &lsquo;<b>&lt;</b>&rsquo; match the final separators
&lsquo;<b>]</b>&rsquo;, &lsquo;<b>}</b>&rsquo;, and
&lsquo;<b>&gt;</b>&rsquo;, respectively; any other character
matches itself. The selected files are those owned by this
user. For example, &lsquo;<b>u:foo:</b>&rsquo; or
&lsquo;<b>u[foo]</b>&rsquo; selects files owned by user
&lsquo;<b>foo</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>g</b><i>id</i></p></td>
<td width="7%"></td>
<td width="78%">


<p>like <b>u</b><i>id</i> but with group IDs or names</p></td></tr>
</table>


<p style="margin-left:11%;"><b>a</b>[<b>Mwhms</b>][<b>&minus;</b>|<b>+</b>]<i>n</i></p>

<p style="margin-left:22%;">files accessed exactly <i>n</i>
days ago. Files accessed within the last <i>n</i> days are
selected using a negative value for <i>n</i>
(<b>&minus;</b><i>n</i>). Files accessed more than <i>n</i>
days ago are selected by a positive <i>n</i> value
(<b>+</b><i>n</i>). Optional unit specifiers
&lsquo;<b>M</b>&rsquo;, &lsquo;<b>w</b>&rsquo;,
&lsquo;<b>h</b>&rsquo;, &lsquo;<b>m</b>&rsquo; or
&lsquo;<b>s</b>&rsquo; (e.g. &lsquo;<b>ah5</b>&rsquo;) cause
the check to be performed with months (of 30 days), weeks,
hours, minutes or seconds instead of days, respectively. An
explicit &lsquo;<b>d</b>&rsquo; for days is also
allowed.</p>

<p style="margin-left:22%; margin-top: 1em">Any fractional
part of the difference between the access time and the
current part in the appropriate units is ignored in the
comparison. For instance, &lsquo;<b>echo
*(ah&minus;5)</b>&rsquo; would echo files accessed within
the last five hours, while &lsquo;<b>echo *(ah+5)</b>&rsquo;
would echo files accessed at least six hours ago, as times
strictly between five and six hours are treated as five
hours.</p>


<p style="margin-left:11%;"><b>m</b>[<b>Mwhms</b>][<b>&minus;</b>|<b>+</b>]<i>n</i></p>

<p style="margin-left:22%;">like the file access qualifier,
except that it uses the file modification time.</p>


<p style="margin-left:11%;"><b>c</b>[<b>Mwhms</b>][<b>&minus;</b>|<b>+</b>]<i>n</i></p>

<p style="margin-left:22%;">like the file access qualifier,
except that it uses the file inode change time.</p>


<p style="margin-left:11%;"><b>L</b>[<b>+</b>|<b>&minus;</b>]<i>n</i></p>

<p style="margin-left:22%;">files less than <i>n</i> bytes
(<b>&minus;</b>), more than <i>n</i> bytes (<b>+</b>), or
exactly <i>n</i> bytes in length.</p>

<p style="margin-left:22%; margin-top: 1em">If this flag is
directly followed by a &lsquo;<b>k</b>&rsquo;
(&lsquo;<b>K</b>&rsquo;), &lsquo;<b>m</b>&rsquo;
(&lsquo;<b>M</b>&rsquo;), or &lsquo;<b>p</b>&rsquo;
(&lsquo;<b>P</b>&rsquo;) (e.g.
&lsquo;<b>Lk&minus;50</b>&rsquo;) the check is performed
with kilobytes, megabytes, or blocks (of 512 bytes) instead.
In this case a file is regarded as &quot;exactly&quot; the
size if the file size rounded up to the next unit is equal
to the test size. Hence &lsquo;<b>*(Lm1)</b>&rsquo; matches
files from 1 byte up to 1 Megabyte inclusive. Note also that
the set of files &quot;less than&quot; the test size only
includes files that would not match the equality test; hence
&lsquo;<b>*(Lm&minus;1)</b>&rsquo; only matches files of
zero size.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>^</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>negates all qualifiers following it</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>toggles between making the qualifiers work on symbolic
links (the default) and the files they point to</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sets the <b>MARK_DIRS</b> option for the current
pattern</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>appends a trailing qualifier mark to the filenames,
analogous to the <b>LIST_TYPES</b> option, for the current
pattern (overrides <b>M</b>)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sets the <b>NULL_GLOB</b> option for the current
pattern</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sets the <b>GLOB_DOTS</b> option for the current
pattern</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sets the <b>NUMERIC_GLOB_SORT</b> option for the current
pattern</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>o</b><i>c</i></p></td>
<td width="8%"></td>
<td width="78%">


<p>specifies how the names of the files should be sorted.
If <i>c</i> is <b>n</b> they are sorted by name (the
default); if it is <b>L</b> they are sorted depending on the
size (length) of the files; if <b>l</b> they are sorted by
the number of links; if <b>a</b>, <b>m</b>, or <b>c</b> they
are sorted by the time of the last access, modification, or
inode change respectively; if <b>d</b>, files in
subdirectories appear before those in the current directory
at each level of the search &minus;&minus; this is best
combined with other criteria, for example
&lsquo;<b>odon</b>&rsquo; to sort on names for files within
the same directory; if <b>N</b>, no sorting is performed.
Note that <b>a</b>, <b>m</b>, and <b>c</b> compare the age
against the current time, hence the first name in the list
is the youngest file. Also note that the modifiers <b>^</b>
and <b>&minus;</b> are used, so
&lsquo;<b>*(^&minus;oL)</b>&rsquo; gives a list of all files
sorted by file size in descending order, following any
symbolic links. Unless <b>oN</b> is used, multiple order
specifiers may occur to resolve ties.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em"><b>oe</b> and
<b>o+</b> are special cases; they are each followed by shell
code, delimited as for the <b>e</b> glob qualifier and the
<b>+</b> glob qualifier respectively (see above). The code
is executed for each matched file with the parameter
<b>REPLY</b> set to the name of the file on entry and
<b>globsort</b> appended to <b>zsh_eval_context</b>. The
code should modify the parameter <b>REPLY</b> in some
fashion. On return, the value of the parameter is used
instead of the file name as the string on which to sort.
Unlike other sort operators, <b>oe</b> and <b>o+</b> may be
repeated, but note that the maximum number of sort operators
of any kind that may appear in any glob expression is
12.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>O</b><i>c</i></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">like &lsquo;<b>o</b>&rsquo;, but
sorts in descending order; i.e. &lsquo;<b>*(^oc)</b>&rsquo;
is the same as &lsquo;<b>*(Oc)</b>&rsquo; and
&lsquo;<b>*(^Oc)</b>&rsquo; is the same as
&lsquo;<b>*(oc)</b>&rsquo;; &lsquo;<b>Od</b>&rsquo; puts
files in the current directory before those in
subdirectories at each level of the search.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>[</b><i>beg</i>[<b>,</b><i>end</i>]<b>]</b></p>

<p style="margin-left:22%;">specifies which of the matched
filenames should be included in the returned list. The
syntax is the same as for array subscripts. <i>beg</i> and
the optional <i>end</i> may be mathematical expressions. As
in parameter subscripting they may be negative to make them
count from the last match backward. E.g.:
&lsquo;<b>*(&minus;OL[1,3])</b>&rsquo; gives a list of the
names of the three largest files.</p>

<p style="margin-left:11%;"><b>P</b><i>string</i></p>

<p style="margin-left:22%;">The <i>string</i> will be
prepended to each glob match as a separate word.
<i>string</i> is delimited in the same way as arguments to
the <b>e</b> glob qualifier described above. The qualifier
can be repeated; the words are prepended separately so that
the resulting command line contains the words in the same
order they were given in the list of glob qualifiers.</p>

<p style="margin-left:22%; margin-top: 1em">A typical use
for this is to prepend an option before all occurrences of a
file name; for example, the pattern
&lsquo;<b>*(P:&minus;f:)</b>&rsquo; produces the command
line arguments &lsquo;<b>&minus;f</b> <i>file1</i>
<b>&minus;f</b> <i>file2</i> ...&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">More than one
of these lists can be combined, separated by commas. The
whole list matches if at least one of the sublists matches
(they are &lsquo;or&rsquo;ed, the qualifiers in the sublists
are &lsquo;and&rsquo;ed). Some qualifiers, however, affect
all matches generated, independent of the sublist in which
they are given. These are the qualifiers
&lsquo;<b>M</b>&rsquo;, &lsquo;<b>T</b>&rsquo;,
&lsquo;<b>N</b>&rsquo;, &lsquo;<b>D</b>&rsquo;,
&lsquo;<b>n</b>&rsquo;, &lsquo;<b>o</b>&rsquo;,
&lsquo;<b>O</b>&rsquo; and the subscripts given in brackets
(&lsquo;<b>[...]</b>&rsquo;).</p>

<p style="margin-left:11%; margin-top: 1em">If a
&lsquo;<b>:</b>&rsquo; appears in a qualifier list, the
remainder of the expression in parenthesis is interpreted as
a modifier (see the section &lsquo;Modifiers&rsquo; in the
section &lsquo;History Expansion&rsquo;). Each modifier must
be introduced by a separate &lsquo;<b>:</b>&rsquo;. Note
also that the result after modification does not have to be
an existing file. The name of any existing file can be
followed by a modifier of the form
&lsquo;<b>(:..)</b>&rsquo; even if no actual filename
generation is performed, although note that the presence of
the parentheses causes the entire expression to be subjected
to any global pattern matching options such as
<b>NULL_GLOB</b>. Thus:</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
*(&minus;/)</b></p>

<p style="margin-left:11%; margin-top: 1em">lists all
directories and symbolic links that point to directories,
and</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
*(%W)</b></p>

<p style="margin-left:11%; margin-top: 1em">lists all
world&minus;writable device files in the current directory,
and</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
*(W,X)</b></p>

<p style="margin-left:11%; margin-top: 1em">lists all files
in the current directory that are world&minus;writable or
world&minus;executable, and</p>

<p style="margin-left:22%; margin-top: 1em"><b>echo
/tmp/foo*(u0^@:t)</b></p>

<p style="margin-left:11%; margin-top: 1em">outputs the
basename of all root&minus;owned files beginning with the
string &lsquo;<b>foo</b>&rsquo; in <b>/tmp</b>, ignoring
symlinks, and</p>

<p style="margin-left:22%; margin-top: 1em"><b>ls
*.*~(lex|parse).[ch](^D^l1)</b></p>

<p style="margin-left:11%; margin-top: 1em">lists all files
having a link count of one whose names contain a dot (but
not those starting with a dot, since <b>GLOB_DOTS</b> is
explicitly switched off) except for <b>lex.c</b>,
<b>lex.h</b>, <b>parse.c</b> and <b>parse.h</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
b*.pro(#q:s/pro/shmo/)(#q.:s/builtin/shmiltin/)</b></p>

<p style="margin-left:11%; margin-top: 1em">demonstrates
how colon modifiers and other qualifiers may be chained
together. The ordinary qualifier &lsquo;<b>.</b>&rsquo; is
applied first, then the colon modifiers in order from left
to right. So if <b>EXTENDED_GLOB</b> is set and the base
pattern matches the regular file <b>builtin.pro</b>, the
shell will print &lsquo;<b>shmiltin.shmo</b>&rsquo;.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshparam &minus; zsh
parameters</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A parameter has
a name, a value, and a number of attributes. A name may be
any sequence of alphanumeric characters and underscores, or
the single characters &lsquo;<b>*</b>&rsquo;,
&lsquo;<b>@</b>&rsquo;, &lsquo;<b>#</b>&rsquo;,
&lsquo;<b>?</b>&rsquo;, &lsquo;<b>&minus;</b>&rsquo;,
&lsquo;<b>$</b>&rsquo;, or &lsquo;<b>!</b>&rsquo;. The value
may be a <i>scalar</i> (a string), an integer, an array
(indexed numerically), or an <i>associative</i> array (an
unordered set of name&minus;value pairs, indexed by name).
To declare the type of a parameter, or to assign a scalar or
integer value to a parameter, use the <b>typeset</b>
builtin.</p>

<p style="margin-left:11%; margin-top: 1em">The value of a
scalar or integer parameter may also be assigned by
writing:</p>


<p style="margin-left:22%; margin-top: 1em"><i>name</i><b>=</b><i>value</i></p>

<p style="margin-left:11%; margin-top: 1em">If the integer
attribute, <b>&minus;i</b>, is set for <i>name</i>, the
<i>value</i> is subject to arithmetic evaluation.
Furthermore, by replacing &lsquo;<b>=</b>&rsquo; with
&lsquo;<b>+=</b>&rsquo;, a parameter can be added or
appended to. See the section &lsquo;Array Parameters&rsquo;
for additional forms of assignment.</p>

<p style="margin-left:11%; margin-top: 1em">To refer to the
value of a parameter, write
&lsquo;<b>$</b><i>name</i>&rsquo; or
&lsquo;<b>${</b><i>name</i><b>}</b>&rsquo;. See <i>Parameter
Expansion</i> in <i>zshexpn</i>(1) for complete details.</p>

<p style="margin-left:11%; margin-top: 1em">In the
parameter lists that follow, the mark
&lsquo;&lt;S&gt;&rsquo; indicates that the parameter is
special. Special parameters cannot have their type changed
or their readonly attribute turned off, and if a special
parameter is unset, then later recreated, the special
properties will be retained. &lsquo;&lt;Z&gt;&rsquo;
indicates that the parameter does not exist when the shell
initializes in <b>sh</b> or <b>ksh</b> emulation mode.</p>

<h2>ARRAY PARAMETERS
<a name="ARRAY PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To assign an
array value, write one of:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;A</b> <i>name value</i> ... <i><br>
name</i><b>=(</b><i>value</i> ...<b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">If no parameter
<i>name</i> exists, an ordinary array parameter is created.
If the parameter <i>name</i> exists and is a scalar, it is
replaced by a new array. Ordinary array parameters may also
be explicitly declared with:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;a</b> <i>name</i></p>

<p style="margin-left:11%; margin-top: 1em">Associative
arrays <i>must</i> be declared before assignment, by
using:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;A</b> <i>name</i></p>

<p style="margin-left:11%; margin-top: 1em">When
<i>name</i> refers to an associative array, the list in an
assignment is interpreted as alternating keys and
values:</p>

<p style="margin-left:22%; margin-top: 1em">set &minus;A
<i>name key value</i> ... <i><br>
name</i><b>=(</b><i>key value</i> ...<b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">Every
<i>key</i> must have a <i>value</i> in this case. Note that
this assigns to the entire array, deleting any elements that
do not appear in the list.</p>

<p style="margin-left:11%; margin-top: 1em">To create an
empty array (including associative arrays), use one of:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;A</b> <i>name <br>
name</i><b>=()</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Array
Subscripts</b> <br>
Individual elements of an array may be selected using a
subscript. A subscript of the form
&lsquo;<b>[</b><i>exp</i><b>]</b>&rsquo; selects the single
element <i>exp</i>, where <i>exp</i> is an arithmetic
expression which will be subject to arithmetic expansion as
if it were surrounded by
&lsquo;<b>$((</b>...<b>))</b>&rsquo;. The elements are
numbered beginning with 1, unless the <b>KSH_ARRAYS</b>
option is set in which case they are numbered from zero.</p>

<p style="margin-left:11%; margin-top: 1em">Subscripts may
be used inside braces used to delimit a parameter name, thus
&lsquo;<b>${foo[2]}</b>&rsquo; is equivalent to
&lsquo;<b>$foo[2]</b>&rsquo;. If the <b>KSH_ARRAYS</b>
option is set, the braced form is the only one that works,
as bracketed expressions otherwise are not treated as
subscripts.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>KSH_ARRAYS</b> option is not set, then by default
accesses to an array element with a subscript that evaluates
to zero return an empty string, while an attempt to write
such an element is treated as an error. For backward
compatibility the <b>KSH_ZERO_SUBSCRIPT</b> option can be
set to cause subscript values 0 and 1 to be equivalent; see
the description of the option in <i>zshoptions</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The same
subscripting syntax is used for associative arrays, except
that no arithmetic expansion is applied to <i>exp</i>.
However, the parsing rules for arithmetic expressions still
apply, which affects the way that certain special characters
must be protected from interpretation. See <i>Subscript
Parsing</i> below for details.</p>

<p style="margin-left:11%; margin-top: 1em">A subscript of
the form &lsquo;<b>[*]</b>&rsquo; or
&lsquo;<b>[@]</b>&rsquo; evaluates to all elements of an
array; there is no difference between the two except when
they appear within double quotes.
&lsquo;<b>&quot;$foo[*]&quot;</b>&rsquo; evaluates to
&lsquo;<b>&quot;$foo[1] $foo[2]</b> ...<b>&quot;</b>&rsquo;,
whereas &lsquo;<b>&quot;$foo[@]&quot;</b>&rsquo; evaluates
to &lsquo;<b>&quot;$foo[1]&quot; &quot;$foo[2]&quot;</b>
...&rsquo;. For associative arrays, &lsquo;<b>[*]</b>&rsquo;
or &lsquo;<b>[@]</b>&rsquo; evaluate to all the values, in
no particular order. Note that this does not substitute the
keys; see the documentation for the &lsquo;<b>k</b>&rsquo;
flag under <i>Parameter Expansion Flags</i> in
<i>zshexpn</i>(1) for complete details. When an array
parameter is referenced as &lsquo;<b>$</b><i>name</i>&rsquo;
(with no subscript) it evaluates to
&lsquo;<b>$</b><i>name</i><b>[*]</b>&rsquo;, unless the
<b>KSH_ARRAYS</b> option is set in which case it evaluates
to &lsquo;<b>${</b><i>name</i><b>[0]}</b>&rsquo; (for an
associative array, this means the value of the key
&lsquo;<b>0</b>&rsquo;, which may not exist even if there
are values for other keys).</p>

<p style="margin-left:11%; margin-top: 1em">A subscript of
the form
&lsquo;<b>[</b><i>exp1</i><b>,</b><i>exp2</i><b>]</b>&rsquo;
selects all elements in the range <i>exp1</i> to
<i>exp2</i>, inclusive. (Associative arrays are unordered,
and so do not support ranges.) If one of the subscripts
evaluates to a negative number, say <b>&minus;</b><i>n</i>,
then the <i>n</i>th element from the end of the array is
used. Thus &lsquo;<b>$foo[&minus;3]</b>&rsquo; is the third
element from the end of the array <b>foo</b>, and
&lsquo;<b>$foo[1,&minus;1]</b>&rsquo; is the same as
&lsquo;<b>$foo[*]</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Subscripting
may also be performed on non&minus;array values, in which
case the subscripts specify a substring to be extracted. For
example, if <b>FOO</b> is set to
&lsquo;<b>foobar</b>&rsquo;, then &lsquo;<b>echo
$FOO[2,5]</b>&rsquo; prints &lsquo;<b>ooba</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Array
Element Assignment</b> <br>
A subscript may be used on the left side of an assignment
like so:</p>


<p style="margin-left:22%; margin-top: 1em"><i>name</i><b>[</b><i>exp</i><b>]=</b><i>value</i></p>

<p style="margin-left:11%; margin-top: 1em">In this form of
assignment the element or range specified by <i>exp</i> is
replaced by the expression on the right side. An array (but
not an associative array) may be created by assignment to a
range or element. Arrays do not nest, so assigning a
parenthesized list of values to an element or range changes
the number of elements in the array, shifting the other
elements to accommodate the new values. (This is not
supported for associative arrays.)</p>

<p style="margin-left:11%; margin-top: 1em">This syntax
also works as an argument to the <b>typeset</b> command:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&quot;</b><i>name</i><b>[</b><i>exp</i><b>]&quot;=</b><i>value</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<i>value</i> may <i>not</i> be a parenthesized list in this
case; only single&minus;element assignments may be made with
<b>typeset</b>. Note that quotes are necessary in this case
to prevent the brackets from being interpreted as filename
generation operators. The <b>noglob</b> precommand modifier
could be used instead.</p>

<p style="margin-left:11%; margin-top: 1em">To delete an
element of an ordinary array, assign &lsquo;<b>()</b>&rsquo;
to that element. To delete an element of an associative
array, use the <b>unset</b> command:</p>

<p style="margin-left:22%; margin-top: 1em"><b>unset
&quot;</b><i>name</i><b>[</b><i>exp</i><b>]&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Subscript
Flags</b> <br>
If the opening bracket, or the comma in a range, in any
subscript expression is directly followed by an opening
parenthesis, the string up to the matching closing one is
considered to be a list of flags, as in
&lsquo;<i>name</i><b>[(</b><i>flags</i><b>)</b><i>exp</i><b>]</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The flags
<b>s</b>, <b>n</b> and <b>b</b> take an argument; the
delimiter is shown below as &lsquo;<b>:</b>&rsquo;, but any
character, or the matching pairs
&lsquo;<b>(</b>...<b>)</b>&rsquo;,
&lsquo;<b>{</b>...<b>}</b>&rsquo;,
&lsquo;<b>[</b>...<b>]</b>&rsquo;, or
&lsquo;<b>&lt;</b>...<b>&gt;</b>&rsquo;, may be used, but
note that &lsquo;<b>&lt;</b>...<b>&gt;</b>&rsquo; can only
be used if the subscript is inside a double quoted
expression or a parameter substitution enclosed in braces as
otherwise the expression is interpreted as a
redirection.</p>

<p style="margin-left:11%; margin-top: 1em">The flags
currently understood are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>w</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>If the parameter subscripted is a scalar then this flag
makes subscripting work on words instead of characters. The
default word separator is whitespace. This flag may not be
used with the <b>i</b> or <b>I</b> flag.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>s:</b><i>string</i><b>:</b></p>

<p style="margin-left:22%;">This gives the <i>string</i>
that separates words (for use with the <b>w</b> flag). The
delimiter character <b>:</b> is arbitrary; see above.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>p</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Recognize the same escape sequences as the <b>print</b>
builtin in the string argument of a subsequent
&lsquo;<b>s</b>&rsquo; flag.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>f</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>If the parameter subscripted is a scalar then this flag
makes subscripting work on lines instead of characters, i.e.
with elements separated by newlines. This is a shorthand for
&lsquo;<b>pws:\n:</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>r</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Reverse subscripting: if this flag is given, the
<i>exp</i> is taken as a pattern and the result is the first
matching array element, substring or word (if the parameter
is an array, if it is a scalar, or if it is a scalar and the
&lsquo;<b>w</b>&rsquo; flag is given, respectively). The
subscript used is the number of the matching element, so
that pairs of subscripts such as
&lsquo;<b>$foo[(r)</b><i>??</i><b>,3]</b>&rsquo; and
&lsquo;<b>$foo[(r)</b><i>??</i><b>,(r)f*]</b>&rsquo; are
possible if the parameter is not an associative array. If
the parameter is an associative array, only the value part
of each pair is compared to the pattern, and the result is
that value.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If a search
through an ordinary array failed, the search sets the
subscript to one past the end of the array, and hence
<b>${array[(r)pattern]}</b> will substitute the empty
string. Thus the success of a search can be tested by using
the <b>(i)</b> flag, for example (assuming the option
<b>KSH_ARRAYS</b> is not in effect):</p>

<p style="margin-left:32%; margin-top: 1em"><b>[[
${array[(i)pattern]} &minus;le ${#array} ]]</b></p>

<p style="margin-left:22%; margin-top: 1em">If
<b>KSH_ARRAYS</b> is in effect, the <b>&minus;le</b> should
be replaced by <b>&minus;lt</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>R</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Like &lsquo;<b>r</b>&rsquo;, but
gives the last match. For associative arrays, gives all
possible matches. May be used for assigning to ordinary
array elements, but not for assigning to associative arrays.
On failure, for normal arrays this has the effect of
returning the element corresponding to subscript 0; this is
empty unless one of the options <b>KSH_ARRAYS</b> or
<b>KSH_ZERO_SUBSCRIPT</b> is in effect.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that in
subscripts with both &lsquo;<b>r</b>&rsquo; and
&lsquo;<b>R</b>&rsquo; pattern characters are active even if
they were substituted for a parameter (regardless of the
setting of <b>GLOB_SUBST</b> which controls this feature in
normal pattern matching). The flag &lsquo;<b>e</b>&rsquo;
can be added to inhibit pattern matching. As this flag does
not inhibit other forms of substitution, care is still
required; using a parameter to hold the key has the desired
effect:</p>


<p style="margin-left:32%; margin-top: 1em"><b>key2=&rsquo;original
key&rsquo; <br>
print ${array[(Re)$key2]}</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em"><b>i</b></p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">Like &lsquo;<b>r</b>&rsquo;, but
gives the index of the match instead; this may not be
combined with a second argument. On the left side of an
assignment, behaves like &lsquo;<b>r</b>&rsquo;. For
associative arrays, the key part of each pair is compared to
the pattern, and the first matching key found is the result.
On failure substitutes the length of the array plus one, as
discussed under the description of &lsquo;<b>r</b>&rsquo;,
or the empty string for an associative array.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>I</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>Like &lsquo;<b>i</b>&rsquo;, but gives the index of the
last match, or all possible matching keys in an associative
array. On failure substitutes 0, or the empty string for an
associative array. This flag is best when testing for values
or keys that do not exist.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>k</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>If used in a subscript on an associative array, this
flag causes the keys to be interpreted as patterns, and
returns the value for the first key found where <i>exp</i>
is matched by the key. Note this could be any such key as no
ordering of associative arrays is defined. This flag does
not work on the left side of an assignment to an associative
array element. If used on another type of parameter, this
behaves like &lsquo;<b>r</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>K</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>On an associative array this is like
&lsquo;<b>k</b>&rsquo; but returns all values where
<i>exp</i> is matched by the keys. On other types of
parameters this has the same effect as
&lsquo;<b>R</b>&rsquo;.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>n:</b><i>expr</i><b>:</b></p>

<p style="margin-left:22%;">If combined with
&lsquo;<b>r</b>&rsquo;, &lsquo;<b>R</b>&rsquo;,
&lsquo;<b>i</b>&rsquo; or &lsquo;<b>I</b>&rsquo;, makes them
give the <i>n</i>th or <i>n</i>th last match (if <i>expr</i>
evaluates to <i>n</i>). This flag is ignored when the array
is associative. The delimiter character <b>:</b> is
arbitrary; see above.</p>


<p style="margin-left:11%;"><b>b:</b><i>expr</i><b>:</b></p>

<p style="margin-left:22%;">If combined with
&lsquo;<b>r</b>&rsquo;, &lsquo;<b>R</b>&rsquo;,
&lsquo;<b>i</b>&rsquo; or &lsquo;<b>I</b>&rsquo;, makes them
begin at the <i>n</i>th or <i>n</i>th last element, word, or
character (if <i>expr</i> evaluates to <i>n</i>). This flag
is ignored when the array is associative. The delimiter
character <b>:</b> is arbitrary; see above.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>e</b></p></td>
<td width="10%"></td>
<td width="78%">


<p>This flag causes any pattern matching that would be
performed on the subscript to use plain string matching
instead. Hence &lsquo;<b>${array[(re)*]}</b>&rsquo; matches
only the array element whose value is <b>*</b>. Note that
other forms of substitution such as parameter substitution
are not inhibited.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This flag can
also be used to force <b>*</b> or <b>@</b> to be interpreted
as a single key rather than as a reference to all values. It
may be used for either purpose on the left side of an
assignment.</p>

<p style="margin-left:11%; margin-top: 1em">See
<i>Parameter Expansion Flags</i> (<i>zshexpn</i>(1)) for
additional ways to manipulate the results of array
subscripting.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Subscript
Parsing</b> <br>
This discussion applies mainly to associative array key
strings and to patterns used for reverse subscripting (the
&lsquo;<b>r</b>&rsquo;, &lsquo;<b>R</b>&rsquo;,
&lsquo;<b>i</b>&rsquo;, etc. flags), but it may also affect
parameter substitutions that appear as part of an arithmetic
expression in an ordinary subscript.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
to avoid the use of subscripts in assignments to associative
array elements by using the syntax:</p>


<p style="margin-left:22%; margin-top: 1em"><b>aa+=(&rsquo;key
with &quot;*strange*&quot; characters&rsquo; &rsquo;value
string&rsquo;)</b></p>

<p style="margin-left:11%; margin-top: 1em">This adds a new
key/value pair if the key is not already present, and
replaces the value for the existing key if it is.</p>

<p style="margin-left:11%; margin-top: 1em">The basic rule
to remember when writing a subscript expression is that all
text between the opening &lsquo;<b>[</b>&rsquo; and the
closing &lsquo;<b>]</b>&rsquo; is interpreted <i>as if</i>
it were in double quotes (see <i>zshmisc</i>(1)). However,
unlike double quotes which normally cannot nest, subscript
expressions may appear inside double&minus;quoted strings or
inside other subscript expressions (or both!), so the rules
have two important differences.</p>

<p style="margin-left:11%; margin-top: 1em">The first
difference is that brackets (&lsquo;<b>[</b>&rsquo; and
&lsquo;<b>]</b>&rsquo;) must appear as balanced pairs in a
subscript expression unless they are preceded by a backslash
(&lsquo;<b>\</b>&rsquo;). Therefore, within a subscript
expression (and unlike true double&minus;quoting) the
sequence &lsquo;<b>\[</b>&rsquo; becomes
&lsquo;<b>[</b>&rsquo;, and similarly
&lsquo;<b>\]</b>&rsquo; becomes &lsquo;<b>]</b>&rsquo;. This
applies even in cases where a backslash is not normally
required; for example, the pattern &lsquo;<b>[^[]</b>&rsquo;
(to match any character other than an open bracket) should
be written &lsquo;<b>[^\[]</b>&rsquo; in a
reverse&minus;subscript pattern. However, note that
&lsquo;<b>\[^\[\]</b>&rsquo; and even
&lsquo;<b>\[^[]</b>&rsquo; mean the <i>same</i> thing,
because backslashes are always stripped when they appear
before brackets!</p>

<p style="margin-left:11%; margin-top: 1em">The same rule
applies to parentheses (&lsquo;<b>(</b>&rsquo; and
&lsquo;<b>)</b>&rsquo;) and braces (&lsquo;<b>{</b>&rsquo;
and &lsquo;<b>}</b>&rsquo;): they must appear either in
balanced pairs or preceded by a backslash, and backslashes
that protect parentheses or braces are removed during
parsing. This is because parameter expansions may be
surrounded by balanced braces, and subscript flags are
introduced by balanced parentheses.</p>

<p style="margin-left:11%; margin-top: 1em">The second
difference is that a double&minus;quote
(&lsquo;<b>&quot;</b>&rsquo;) may appear as part of a
subscript expression without being preceded by a backslash,
and therefore that the two characters
&lsquo;<b>\&quot;</b>&rsquo; remain as two characters in the
subscript (in true double&minus;quoting,
&lsquo;<b>\&quot;</b>&rsquo; becomes
&lsquo;<b>&quot;</b>&rsquo;). However, because of the
standard shell quoting rules, any double&minus;quotes that
appear must occur in balanced pairs unless preceded by a
backslash. This makes it more difficult to write a subscript
expression that contains an odd number of double&minus;quote
characters, but the reason for this difference is so that
when a subscript expression appears inside true
double&minus;quotes, one can still write
&lsquo;<b>\&quot;</b>&rsquo; (rather than
&lsquo;<b>\\\&quot;</b>&rsquo;) for
&lsquo;<b>&quot;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">To use an odd
number of double quotes as a key in an assignment, use the
<b>typeset</b> builtin and an enclosing pair of double
quotes; to refer to the value of that key, again use double
quotes:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;A aa <br>
typeset
&quot;aa[one\&quot;two\&quot;three\&quot;quotes]&quot;=QQQ
<br>
print
&quot;$aa[one\&quot;two\&quot;three\&quot;quotes]&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">It is important
to note that the quoting rules do not change when a
parameter expansion with a subscript is nested inside
another subscript expression. That is, it is not necessary
to use additional backslashes within the inner subscript
expression; they are removed only once, from the innermost
subscript outwards. Parameters are also expanded from the
innermost subscript first, as each expansion is encountered
left to right in the outer expression.</p>

<p style="margin-left:11%; margin-top: 1em">A further
complication arises from a way in which subscript parsing is
<i>not</i> different from double quote parsing. As in true
double&minus;quoting, the sequences &lsquo;<b>\*</b>&rsquo;,
and &lsquo;<b>\@</b>&rsquo; remain as two characters when
they appear in a subscript expression. To use a literal
&lsquo;<b>*</b>&rsquo; or &lsquo;<b>@</b>&rsquo; as an
associative array key, the &lsquo;<b>e</b>&rsquo; flag must
be used:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
&minus;A aa <br>
aa[(e)*]=star <br>
print $aa[(e)*]</b></p>

<p style="margin-left:11%; margin-top: 1em">A last detail
must be considered when reverse subscripting is performed.
Parameters appearing in the subscript expression are first
expanded and then the complete expression is interpreted as
a pattern. This has two effects: first, parameters behave as
if <b>GLOB_SUBST</b> were on (and it cannot be turned off);
second, backslashes are interpreted twice, once when parsing
the array subscript and again when parsing the pattern. In a
reverse subscript, it&rsquo;s necessary to use <i>four</i>
backslashes to cause a single backslash to match literally
in the pattern. For complex patterns, it is often easiest to
assign the desired pattern to a parameter and then refer to
that parameter in the subscript, because then the
backslashes, brackets, parentheses, etc., are seen only when
the complete expression is converted to a pattern. To match
the value of a parameter literally in a reverse subscript,
rather than as a pattern, use
&lsquo;<b>${(q)</b><i>name</i><b>}</b>&rsquo; (see
<i>zshexpn</i>(1)) to quote the expanded value.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
&lsquo;<b>k</b>&rsquo; and &lsquo;<b>K</b>&rsquo; flags are
reverse subscripting for an ordinary array, but are
<i>not</i> reverse subscripting for an associative array!
(For an associative array, the keys in the array itself are
interpreted as patterns by those flags; the subscript is a
plain string in that case.)</p>

<p style="margin-left:11%; margin-top: 1em">One final note,
not directly related to subscripting: the numeric names of
positional parameters (described below) are parsed
specially, so for example &lsquo;<b>$2foo</b>&rsquo; is
equivalent to &lsquo;<b>${2}foo</b>&rsquo;. Therefore, to
use subscript syntax to extract a substring from a
positional parameter, the expansion must be surrounded by
braces; for example, &lsquo;<b>${2[3,5]}</b>&rsquo;
evaluates to the third through fifth characters of the
second positional parameter, but
&lsquo;<b>$2[3,5]</b>&rsquo; is the entire second parameter
concatenated with the filename generation pattern
&lsquo;<b>[3,5]</b>&rsquo;.</p>

<h2>POSITIONAL PARAMETERS
<a name="POSITIONAL PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The positional
parameters provide access to the command&minus;line
arguments of a shell function, shell script, or the shell
itself; see the section &lsquo;Invocation&rsquo;, and also
the section &lsquo;Functions&rsquo;. The parameter <i>n</i>,
where <i>n</i> is a number, is the <i>n</i>th positional
parameter. The parameters <b>*</b>, <b>@</b> and <b>argv</b>
are arrays containing all the positional parameters; thus
&lsquo;<b>$argv[</b><i>n</i><b>]</b>&rsquo;, etc., is
equivalent to simply &lsquo;<b>$</b><i>n</i>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Positional
parameters may be changed after the shell or function starts
by using the <b>set</b> builtin, by assigning to the
<b>argv</b> array, or by direct assignment of the form
&lsquo;<i>n</i><b>=</b><i>value</i>&rsquo; where <i>n</i> is
the number of the positional parameter to be changed. This
also creates (with empty values) any of the positions from 1
to <i>n</i> that do not already have values. Note that,
because the positional parameters form an array, an array
assignment of the form &lsquo;<i>n</i><b>=(</b><i>value</i>
...<b>)</b>&rsquo; is allowed, and has the effect of
shifting all the values at positions greater than <i>n</i>
by as many positions as necessary to accommodate the new
values.</p>

<h2>LOCAL PARAMETERS
<a name="LOCAL PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Shell function
executions delimit scopes for shell parameters. (Parameters
are dynamically scoped.) The <b>typeset</b> builtin, and its
alternative forms <b>declare</b>, <b>integer</b>,
<b>local</b> and <b>readonly</b> (but not <b>export</b>),
can be used to declare a parameter as being local to the
innermost scope.</p>

<p style="margin-left:11%; margin-top: 1em">When a
parameter is read or assigned to, the innermost existing
parameter of that name is used. (That is, the local
parameter hides any less&minus;local parameter.) However,
assigning to a non&minus;existent parameter, or declaring a
new parameter with <b>export</b>, causes it to be created in
the <i>outer</i>most scope.</p>

<p style="margin-left:11%; margin-top: 1em">Local
parameters disappear when their scope ends. <b>unset</b> can
be used to delete a parameter while it is still in scope;
any outer parameter of the same name remains hidden.</p>

<p style="margin-left:11%; margin-top: 1em">Special
parameters may also be made local; they retain their special
attributes unless either the existing or the
newly&minus;created parameter has the <b>&minus;h</b> (hide)
attribute. This may have unexpected effects: there is no
default value, so if there is no assignment at the point the
variable is made local, it will be set to an empty value (or
zero in the case of integers). The following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>typeset
PATH=/new/directory:$PATH</b></p>

<p style="margin-left:11%; margin-top: 1em">is valid for
temporarily allowing the shell or programmes called from it
to find the programs in <b>/new/directory</b> inside a
function.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
restriction in older versions of zsh that local parameters
were never exported has been removed.</p>

<h2>PARAMETERS SET BY THE SHELL
<a name="PARAMETERS SET BY THE SHELL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
parameters are automatically set by the shell:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>!</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">The process ID of the last
command started in the background with <b>&amp;</b>, or put
into the background with the <b>bg</b> builtin.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>#</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>The number of positional parameters in decimal. Note
that some confusion may occur with the syntax
<b>$#</b><i>param</i> which substitutes the length of
<i>param</i>. Use <b>${#}</b> to resolve ambiguities. In
particular, the sequence
&lsquo;<b>$#&minus;</b><i>...</i>&rsquo; in an arithmetic
expression is interpreted as the length of the parameter
<b>&minus;</b>, q.v.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ARGC</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>#</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>$</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>The process ID of this shell. Note that this indicates
the original shell started by invoking <b>zsh</b>; all
processes forked from the shells without executing a new
program, such as subshells started by
<b>(</b><i>...</i><b>)</b>, substitute the same value.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>Flags supplied to the shell on invocation or by the
<b>set</b> or <b>setopt</b> commands.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>*</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>An array containing the positional parameters.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>argv</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>*</b>. Assigning to
<b>argv</b> changes the local positional parameters, but
<b>argv</b> is <i>not</i> itself a local parameter. Deleting
<b>argv</b> with <b>unset</b> in any function deletes it
everywhere, although only the innermost positional parameter
array is deleted (so <b>*</b> and <b>@</b> in other scopes
are not affected).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>@</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>Same as <b>argv[@]</b>, even when <b>argv</b> is not
set.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>?</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>The exit status returned by the last command.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>0</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>The name used to invoke the current shell. If the
<b>FUNCTION_ARGZERO</b> option is set, this is set
temporarily within a shell function to the name of the
function, and within a sourced script to the name of the
script.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>status</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>?</b>.</p>

<p style="margin-left:11%;"><b>pipestatus</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">An array containing the exit
statuses returned by all commands in the last pipeline.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>_</b> &lt;S&gt;</p></td>
<td width="4%"></td>
<td width="78%">


<p>The last argument of the previous command. Also, this
parameter is set in the environment of every command
executed to the full pathname of the command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>CPUTYPE</b></p>

<p style="margin-left:22%;">The machine type
(microprocessor class or machine model), as determined at
run time.</p>

<p style="margin-left:11%;"><b>EGID</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The effective group ID of the
shell process. If you have sufficient privileges, you may
change the effective group ID of the shell process by
assigning to this parameter. Also (assuming sufficient
privileges), you may start a single command with a different
effective group ID by &lsquo;<b>(EGID=</b><i>gid</i><b>;
command)</b>&rsquo;</p>

<p style="margin-left:11%;"><b>EUID</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The effective user ID of the
shell process. If you have sufficient privileges, you may
change the effective user ID of the shell process by
assigning to this parameter. Also (assuming sufficient
privileges), you may start a single command with a different
effective user ID by &lsquo;<b>(EUID=</b><i>uid</i><b>;
command)</b>&rsquo;</p>

<p style="margin-left:11%;"><b>ERRNO</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The value of errno (see
<i>errno</i>(3)) as set by the most recently failed system
call. This value is system dependent and is intended for
debugging purposes. It is also useful with the
<b>zsh/system</b> module which allows the number to be
turned into a name or message.</p>

<p style="margin-left:11%;"><b>GID</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The real group ID of the shell
process. If you have sufficient privileges, you may change
the group ID of the shell process by assigning to this
parameter. Also (assuming sufficient privileges), you may
start a single command under a different group ID by
&lsquo;<b>(GID=</b><i>gid</i><b>; command)</b>&rsquo;</p>

<p style="margin-left:11%;"><b>HISTCMD</b></p>

<p style="margin-left:22%;">The current history line number
in an interactive shell, in other words the line number for
the command that caused <b>$HISTCMD</b> to be read.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>HOST</b></p></td>
<td width="5%"></td>
<td width="32%">


<p>The current hostname.</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>LINENO</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The line number of the current
line within the current script, sourced file, or shell
function being executed, whichever was started most
recently. Note that in the case of shell functions the line
number refers to the function as it appeared in the original
definition, not necessarily as displayed by the
<b>functions</b> builtin.</p>

<p style="margin-left:11%;"><b>LOGNAME</b></p>

<p style="margin-left:22%;">If the corresponding variable
is not set in the environment of the shell, it is
initialized to the login name corresponding to the current
login session. This parameter is exported by default but
this can be disabled using the <b>typeset</b> builtin.</p>

<p style="margin-left:11%;"><b>MACHTYPE</b></p>

<p style="margin-left:22%;">The machine type
(microprocessor class or machine model), as determined at
compile time.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>OLDPWD</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The previous working directory. This is set when the
shell initializes and whenever the directory changes.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>OPTARG</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The value of the last option
argument processed by the <b>getopts</b> command.</p>

<p style="margin-left:11%;"><b>OPTIND</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The index of the last option
argument processed by the <b>getopts</b> command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>OSTYPE</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The operating system, as determined at compile time.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>PPID</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The process ID of the parent of
the shell. As for <b>$$</b>, the value indicates the parent
of the original shell and does not change in subshells.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>PWD</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The present working directory. This is set when the
shell initializes and whenever the directory changes.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>RANDOM</b> &lt;S&gt;</p>

<p style="margin-left:22%;">A pseudo&minus;random integer
from 0 to 32767, newly generated each time this parameter is
referenced. The random number generator can be seeded by
assigning a numeric value to <b>RANDOM</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The values of
<b>RANDOM</b> form an intentionally&minus;repeatable
pseudo&minus;random sequence; subshells that reference
<b>RANDOM</b> will result in identical pseudo&minus;random
values unless the value of <b>RANDOM</b> is referenced or
seeded in the parent shell in between subshell
invocations.</p>

<p style="margin-left:11%;"><b>SECONDS</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The number of seconds since
shell invocation. If this parameter is assigned a value,
then the value returned upon reference will be the value
that was assigned plus the number of seconds since the
assignment.</p>

<p style="margin-left:22%; margin-top: 1em">Unlike other
special parameters, the type of the <b>SECONDS</b> parameter
can be changed using the <b>typeset</b> command. Only
integer and one of the floating point types are allowed. For
example, &lsquo;<b>typeset &minus;F SECONDS</b>&rsquo;
causes the value to be reported as a floating point number.
The value is available to microsecond accuracy, although the
shell may show more or fewer digits depending on the use of
<b>typeset</b>. See the documentation for the builtin
<b>typeset</b> in <i>zshbuiltins</i>(1) for more
details.</p>

<p style="margin-left:11%;"><b>SHLVL</b> &lt;S&gt;</p>

<p style="margin-left:22%;">Incremented by one each time a
new shell is started.</p>

<p style="margin-left:11%;"><b>signals</b></p>

<p style="margin-left:22%;">An array containing the names
of the signals.</p>

<p style="margin-left:11%;"><b>TRY_BLOCK_ERROR</b>
&lt;S&gt;</p>

<p style="margin-left:22%;">In an <b>always</b> block,
indicates whether the preceding list of code caused an
error. The value is 1 to indicate an error, 0 otherwise. It
may be reset, clearing the error condition. See <i>Complex
Commands</i> in <i>zshmisc</i>(1)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>TTY</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The name of the tty associated with the shell, if
any.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>TTYIDLE</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The idle time of the tty
associated with the shell in seconds or &minus;1 if there is
no such tty.</p>

<p style="margin-left:11%;"><b>UID</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The real user ID of the shell
process. If you have sufficient privileges, you may change
the user ID of the shell by assigning to this parameter.
Also (assuming sufficient privileges), you may start a
single command under a different user ID by
&lsquo;<b>(UID=</b><i>uid</i><b>; command)</b>&rsquo;</p>

<p style="margin-left:11%;"><b>USERNAME</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The username corresponding to
the real user ID of the shell process. If you have
sufficient privileges, you may change the username (and also
the user ID and group ID) of the shell by assigning to this
parameter. Also (assuming sufficient privileges), you may
start a single command under a different username (and user
ID and group ID) by
&lsquo;<b>(USERNAME=</b><i>username</i><b>;
command)</b>&rsquo;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>VENDOR</b></p></td>
<td width="2%"></td>
<td width="64%">


<p>The vendor, as determined at compile time.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>zsh_eval_context</b>
&lt;S&gt; &lt;Z&gt; (<b>ZSH_EVAL_CONTEXT</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) indicating the context of shell code that is being
run. Each time a piece of shell code that is stored within
the shell is executed a string is temporarily appended to
the array to indicate the type of operation that is being
performed. Read in order the array gives an indication of
the stack of operations being performed with the most
immediate context last.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
variable does not give information on syntactic context such
as pipelines or subshells. Use <b>$ZSH_SUBSHELL</b> to
detect subshells.</p>

<p style="margin-left:22%; margin-top: 1em">The context is
one of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>cmdarg</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Code specified by the <b>&minus;c</b> option to the
command line that invoked the shell.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>cmdsubst</b></p>

<p style="margin-left:32%;">Command substitution using the
<b>&lsquo;</b><i>...</i><b>&lsquo;</b> or
<b>$(</b><i>...</i><b>)</b> construct.</p>

<p style="margin-left:22%;"><b>equalsubst</b></p>

<p style="margin-left:32%;">File substitution using the
<b>=(</b><i>...</i><b>)</b> construct.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>eval</b></p></td>
<td width="4%"></td>
<td width="53%">


<p>Code executed by the <b>eval</b> builtin.</p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>evalautofunc</b></p>

<p style="margin-left:32%;">Code executed with the
<b>KSH_AUTOLOAD</b> mechanism in order to define an
autoloaded function.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>fc</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Code from the shell history executed by the
<b>&minus;e</b> option to the <b>fc</b> builtin.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>file</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Lines of code being read directly from a file, for
example by the <b>source</b> builtin.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>filecode</b></p>

<p style="margin-left:32%;">Lines of code being read from a
<b>.zwc</b> file instead of directly from the source
file.</p>

<p style="margin-left:22%;"><b>globqual</b></p>

<p style="margin-left:32%;">Code executed by the <b>e</b>
or <b>+</b> glob qualifier.</p>

<p style="margin-left:22%;"><b>globsort</b></p>

<p style="margin-left:32%;">Code executed to order files by
the <b>o</b> glob qualifier.</p>

<p style="margin-left:22%;"><b>insubst</b></p>

<p style="margin-left:32%;">File substitution using the
<b>&lt;(</b><i>...</i><b>)</b> construct.</p>

<p style="margin-left:22%;"><b>loadautofunc</b></p>

<p style="margin-left:32%;">Code read directly from a file
to define an autoloaded function.</p>

<p style="margin-left:22%;"><b>outsubst</b></p>

<p style="margin-left:32%;">File substitution using the
<b>&gt;(</b><i>...</i><b>)</b> construct.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>sched</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Code executed by the <b>sched</b> builtin.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>shfunc</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>A shell function.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>stty</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Code passed to <b>stty</b> by the <b>STTY</b>
environment variable. Normally this is passed directly to
the system&rsquo;s <b>stty</b> command, so this value is
unlikely to be seen in practice.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>style</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Code executed as part of a style retrieved by the
<b>zstyle</b> builtin from the <b>zsh/zutil</b> module.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>toplevel</b></p>

<p style="margin-left:32%;">The highest execution level of
a script or interactive shell.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>trap</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Code executed as a trap defined by the <b>trap</b>
builtin. Traps defined as functions have the context
<b>shfunc</b>. As traps are asynchronous they may have a
different hierarchy from other code.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>zpty</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Code executed by the <b>zpty</b> builtin from the
<b>zsh/zpty</b> module.</p></td></tr>
</table>


<p style="margin-left:22%;"><b>zregexparse&minus;guard</b></p>

<p style="margin-left:32%;">Code executed as a guard by the
<b>zregexparse</b> command from the <b>zsh/zutil</b>
module.</p>


<p style="margin-left:22%;"><b>zregexparse&minus;action</b></p>

<p style="margin-left:32%;">Code executed as an action by
the <b>zregexparse</b> command from the <b>zsh/zutil</b>
module.</p>

<p style="margin-left:11%;"><b>ZSH_NAME</b></p>

<p style="margin-left:22%;">Expands to the basename of the
command used to invoke this instance of zsh.</p>

<p style="margin-left:11%;"><b>ZSH_PATCHLEVEL</b></p>

<p style="margin-left:22%;">The revision string for the
version number of the ChangeLog file in the zsh
distribution. This is most useful in order to keep track of
versions of the shell during development between releases;
hence most users should not use it and should instead rely
on <b>$ZSH_VERSION</b>.</p>


<p style="margin-left:11%;"><b>zsh_scheduled_events</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/sched Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>ZSH_SUBSHELL</b></p>

<p style="margin-left:22%;">Readonly integer. Initially
zero, incremented each time the shell forks to create a
subshell for executing code. Hence &lsquo;<b>(print
$ZSH_SUBSHELL)</b>&rsquo; and &lsquo;<b>print $(print
$ZSH_SUBSHELL)</b>&rsquo; output 1, while &lsquo;<b>( (print
$ZSH_SUBSHELL) )</b>&rsquo; outputs 2.</p>

<p style="margin-left:11%;"><b>ZSH_VERSION</b></p>

<p style="margin-left:22%;">The version number of the
release of zsh.</p>

<h2>PARAMETERS USED BY THE SHELL
<a name="PARAMETERS USED BY THE SHELL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
parameters are used by the shell.</p>

<p style="margin-left:11%; margin-top: 1em">In cases where
there are two parameters with an upper&minus; and lowercase
form of the same name, such as <b>path</b> and <b>PATH</b>,
the lowercase form is an array and the uppercase form is a
scalar with the elements of the array joined together by
colons. These are similar to tied parameters created via
&lsquo;<b>typeset &minus;T</b>&rsquo;. The normal use for
the colon&minus;separated form is for exporting to the
environment, while the array form is easier to manipulate
within the shell. Note that unsetting either of the pair
will unset the other; they retain their special properties
when recreated, and recreating one of the pair will recreate
the other.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ARGV0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>If exported, its value is used as the <b>argv[0]</b> of
external commands. Usually used in constructs like
&lsquo;<b>ARGV0=emacs nethack</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>BAUD</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>The rate in bits per second at which data reaches the
terminal. The line editor will use this value in order to
compensate for a slow terminal by delaying updates to the
display until necessary. If the parameter is unset or the
value is zero the compensation mechanism is turned off. The
parameter is not set by default.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This parameter
may be profitably set in some circumstances, e.g. for slow
modems dialing into a communications server, or on a slow
wide area network. It should be set to the baud rate of the
slowest part of the link for best performance.</p>

<p style="margin-left:11%;"><b>cdpath</b> &lt;S&gt;
&lt;Z&gt; (<b>CDPATH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) of directories specifying the search path for the
<b>cd</b> command.</p>

<p style="margin-left:11%;"><b>COLUMNS</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The number of columns for this
terminal session. Used for printing select lists and for the
line editor.</p>

<p style="margin-left:11%;"><b>CORRECT_IGNORE</b></p>

<p style="margin-left:22%;">If set, is treated as a pattern
during spelling correction. Any potential correction that
matches the pattern is ignored. For example, if the value is
&lsquo;<b>_*</b>&rsquo; then completion functions (which, by
convention, have names beginning with
&lsquo;<b>_</b>&rsquo;) will never be offered as spelling
corrections. The pattern does not apply to the correction of
file names, as applied by the <b>CORRECT_ALL</b> option (so
with the example just given files beginning with
&lsquo;<b>_</b>&rsquo; in the current directory would still
be completed).</p>

<p style="margin-left:11%;"><b>DIRSTACKSIZE</b></p>

<p style="margin-left:22%;">The maximum size of the
directory stack, by default there is no limit. If the stack
gets larger than this, it will be truncated automatically.
This is useful with the <b>AUTO_PUSHD</b> option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENV</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If the <b>ENV</b> environment variable is set when zsh
is invoked as <b>sh</b> or <b>ksh</b>, <b>$ENV</b> is
sourced after the profile scripts. The value of <b>ENV</b>
is subjected to parameter expansion, command substitution,
and arithmetic expansion before being interpreted as a
pathname. Note that <b>ENV</b> is <i>not</i> used unless zsh
is emulating <b>sh</b> or <b>ksh</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>FCEDIT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The default editor for the <b>fc</b> builtin. If
<b>FCEDIT</b> is not set, the parameter <b>EDITOR</b> is
used; if that is not set either, a builtin default, usually
<b>vi</b>, is used.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>fignore</b> &lt;S&gt;
&lt;Z&gt; (<b>FIGNORE</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon separated list)
containing the suffixes of files to be ignored during
filename completion. However, if completion only generates
files with suffixes in this list, then these files are
completed anyway.</p>

<p style="margin-left:11%;"><b>fpath</b> &lt;S&gt;
&lt;Z&gt; (<b>FPATH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon separated list)
of directories specifying the search path for function
definitions. This path is searched when a function with the
<b>&minus;u</b> attribute is referenced. If an executable
file is found, then it is read and executed in the current
environment.</p>

<p style="margin-left:11%;"><b>histchars</b> &lt;S&gt;</p>

<p style="margin-left:22%;">Three characters used by the
shell&rsquo;s history and lexical analysis mechanism. The
first character signals the start of a history expansion
(default &lsquo;<b>!</b>&rsquo;). The second character
signals the start of a quick history substitution (default
&lsquo;<b>^</b>&rsquo;). The third character is the comment
character (default &lsquo;<b>#</b>&rsquo;).</p>

<p style="margin-left:22%; margin-top: 1em">The characters
must be in the ASCII character set; any attempt to set
<b>histchars</b> to characters with a locale&minus;dependent
meaning will be rejected with an error message.</p>

<p style="margin-left:11%;"><b>HISTCHARS</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>histchars</b>.
(Deprecated.)</p>

<p style="margin-left:11%;"><b>HISTFILE</b></p>

<p style="margin-left:22%;">The file to save the history in
when an interactive shell exits. If unset, the history is
not saved.</p>

<p style="margin-left:11%;"><b>HISTSIZE</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The maximum number of events
stored in the internal history list. If you use the
<b>HIST_EXPIRE_DUPS_FIRST</b> option, setting this value
larger than the <b>SAVEHIST</b> size will give you the
difference as a cushion for saving duplicated history
events.</p>

<p style="margin-left:11%;"><b>HOME</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The default argument for the
<b>cd</b> command. This is not set automatically by the
shell in <b>sh</b>, <b>ksh</b> or <b>csh</b> emulation, but
it is typically present in the environment anyway, and if it
becomes set it has its usual special behaviour.</p>

<p style="margin-left:11%;"><b>IFS</b> &lt;S&gt;</p>

<p style="margin-left:22%;">Internal field separators (by
default space, tab, newline and NUL), that are used to
separate words which result from command or parameter
expansion and words read by the <b>read</b> builtin. Any
characters from the set space, tab and newline that appear
in the IFS are called <i>IFS white space</i>. One or more
IFS white space characters or one non&minus;IFS white space
character together with any adjacent IFS white space
character delimit a field. If an IFS white space character
appears twice consecutively in the IFS, this character is
treated as if it were not an IFS white space character.</p>

<p style="margin-left:22%; margin-top: 1em">If the
parameter is unset, the default is used. Note this has a
different effect from setting the parameter to an empty
string.</p>

<p style="margin-left:11%;"><b>KEYBOARD_HACK</b></p>

<p style="margin-left:22%;">This variable defines a
character to be removed from the end of the command line
before interpreting it (interactive shells only). It is
intended to fix the problem with keys placed annoyingly
close to return and replaces the <b>SUNKEYBOARDHACK</b>
option which did this for backquotes only. Should the chosen
character be one of singlequote, doublequote or backquote,
there must also be an odd number of them on the command line
for the last one to be removed.</p>

<p style="margin-left:22%; margin-top: 1em">For backward
compabitility, if the <b>SUNKEYBOARDHACK</b> option is
explicitly set, the value of <b>KEYBOARD_HACK</b> reverts to
backquote. If the option is explicitly unset, this variable
is set to empty.</p>

<p style="margin-left:11%;"><b>KEYTIMEOUT</b></p>

<p style="margin-left:22%;">The time the shell waits, in
hundredths of seconds, for another key to be pressed when
reading bound multi&minus;character sequences.</p>

<p style="margin-left:11%;"><b>LANG</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable determines the
locale category for any category not specifically selected
via a variable starting with &lsquo;<b>LC_</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>LC_ALL</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable overrides the
value of the &lsquo;<b>LANG</b>&rsquo; variable and the
value of any of the other variables starting with
&lsquo;<b>LC_</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>LC_COLLATE</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable determines the
locale category for character collation information within
ranges in glob brackets and for sorting.</p>

<p style="margin-left:11%;"><b>LC_CTYPE</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable determines the
locale category for character handling functions. If the
<b>MULTIBYTE</b> option is in effect this variable or
<b>LANG</b> should contain a value that reflects the
character set in use, even if it is a single&minus;byte
character set, unless only the 7&minus;bit subset (ASCII) is
used. For example, if the character set is
ISO&minus;8859&minus;1, a suitable value might be
<b>en_US.iso88591</b> (certain Linux distributions) or
<b>en_US.ISO8859&minus;1</b> (MacOS).</p>

<p style="margin-left:11%;"><b>LC_MESSAGES</b>
&lt;S&gt;</p>

<p style="margin-left:22%;">This variable determines the
language in which messages should be written. Note that zsh
does not use message catalogs.</p>

<p style="margin-left:11%;"><b>LC_NUMERIC</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable affects the
decimal point character and thousands separator character
for the formatted input/output functions and string
conversion functions. Note that zsh ignores this setting
when parsing floating point mathematical expressions.</p>

<p style="margin-left:11%;"><b>LC_TIME</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This variable determines the
locale category for date and time formatting in prompt
escape sequences.</p>

<p style="margin-left:11%;"><b>LINES</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The number of lines for this
terminal session. Used for printing select lists and for the
line editor.</p>

<p style="margin-left:11%;"><b>LISTMAX</b></p>

<p style="margin-left:22%;">In the line editor, the number
of matches to list without asking first. If the value is
negative, the list will be shown if it spans at most as many
lines as given by the absolute value. If set to zero, the
shell asks only if the top of the listing would scroll off
the screen.</p>

<p style="margin-left:11%;"><b>LOGCHECK</b></p>

<p style="margin-left:22%;">The interval in seconds between
checks for login/logout activity using the <b>watch</b>
parameter.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>MAIL</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If this parameter is set and <b>mailpath</b> is not set,
the shell looks for mail in the specified file.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>MAILCHECK</b></p>

<p style="margin-left:22%;">The interval in seconds between
checks for new mail.</p>

<p style="margin-left:11%;"><b>mailpath</b> &lt;S&gt;
&lt;Z&gt; (<b>MAILPATH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) of filenames to check for new mail. Each filename can
be followed by a &lsquo;<b>?</b>&rsquo; and a message that
will be printed. The message will undergo parameter
expansion, command substitution and arithmetic expansion
with the variable <b>$_</b> defined as the name of the file
that has changed. The default message is &lsquo;<b>You have
new mail</b>&rsquo;. If an element is a directory instead of
a file the shell will recursively check every file in every
subdirectory of the element.</p>

<p style="margin-left:11%;"><b>manpath</b> &lt;S&gt;
&lt;Z&gt; (<b>MANPATH</b> &lt;S&gt; &lt;Z&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) whose value is not used by the shell. The
<b>manpath</b> array can be useful, however, since setting
it also sets <b>MANPATH</b>, and vice versa.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>match</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>mbegin</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>mend</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Arrays set by the shell when the <b>b</b> globbing flag
is used in pattern matches. See the subsection <i>Globbing
flags</i> in the documentation for <i>Filename
Generation</i> in <i>zshexpn</i>(1).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>MATCH</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>MBEGIN</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>MEND</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Set by the shell when the <b>m</b> globbing flag is used
in pattern matches. See the subsection <i>Globbing flags</i>
in the documentation for <i>Filename Generation</i> in
<i>zshexpn</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>module_path</b> &lt;S&gt;
&lt;Z&gt; (<b>MODULE_PATH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) of directories that <b>zmodload</b> searches for
dynamically loadable modules. This is initialized to a
standard pathname, usually
&lsquo;<b>/usr/local/lib/zsh/$ZSH_VERSION</b>&rsquo;. (The
&lsquo;<b>/usr/local/lib</b>&rsquo; part varies from
installation to installation.) For security reasons, any
value set in the environment when the shell is started will
be ignored.</p>

<p style="margin-left:22%; margin-top: 1em">These
parameters only exist if the installation supports dynamic
module loading.</p>

<p style="margin-left:11%;"><b>NULLCMD</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The command name to assume if a
redirection is specified with no command. Defaults to
<b>cat</b>. For <b>sh</b>/<b>ksh</b> behavior, change this
to <b>:</b>. For <b>csh</b>&minus;like behavior, unset this
parameter; the shell will print an error message if null
commands are entered.</p>

<p style="margin-left:11%;"><b>path</b> &lt;S&gt; &lt;Z&gt;
(<b>PATH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) of directories to search for commands. When this
parameter is set, each directory is scanned and all files
found are put in a hash table.</p>

<p style="margin-left:11%;"><b>POSTEDIT</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This string is output whenever
the line editor exits. It usually contains termcap strings
to reset the terminal.</p>

<p style="margin-left:11%;"><b>PROMPT</b> &lt;S&gt;
&lt;Z&gt; <b><br>
PROMPT2</b> &lt;S&gt; &lt;Z&gt; <b><br>
PROMPT3</b> &lt;S&gt; &lt;Z&gt; <b><br>
PROMPT4</b> &lt;S&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>PS1</b>, <b>PS2</b>,
<b>PS3</b> and <b>PS4</b>, respectively.</p>

<p style="margin-left:11%;"><b>prompt</b> &lt;S&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Same as <b>PS1</b>.</p>

<p style="margin-left:11%;"><b>PROMPT_EOL_MARK</b></p>

<p style="margin-left:22%;">When the <b>PROMPT_CR</b> and
<b>PROMPT_SP</b> options are set, the <b>PROMPT_EOL_MARK</b>
parameter can be used to customize how the end of partial
lines are shown. This parameter undergoes prompt expansion,
with the <b>PROMPT_PERCENT</b> option set. If not set, the
default behavior is equivalent to the value
&lsquo;<b>%B%S%#%s%b</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>PS1</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The primary prompt string,
printed before a command is read. It undergoes a special
form of expansion before being displayed; see EXPANSION OF
PROMPT SEQUENCES in <i>zshmisc</i>(1). The default is
&lsquo;<b>%m%#</b> &rsquo;.</p>

<p style="margin-left:11%;"><b>PS2</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The secondary prompt, printed
when the shell needs more information to complete a command.
It is expanded in the same way as <b>PS1</b>. The default is
&lsquo;<b>%_&gt;</b> &rsquo;, which displays any shell
constructs or quotation marks which are currently being
processed.</p>

<p style="margin-left:11%;"><b>PS3</b> &lt;S&gt;</p>

<p style="margin-left:22%;">Selection prompt used within a
<b>select</b> loop. It is expanded in the same way as
<b>PS1</b>. The default is &lsquo;<b>?#</b> &rsquo;.</p>

<p style="margin-left:11%;"><b>PS4</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The execution trace prompt.
Default is &lsquo;<b>+%N:%i&gt;</b> &rsquo;, which displays
the name of the current shell structure and the line number
within it. In sh or ksh emulation, the default is
&lsquo;<b>+</b> &rsquo;.</p>

<p style="margin-left:11%;"><b>psvar</b> &lt;S&gt;
&lt;Z&gt; (<b>PSVAR</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) whose first nine values can be used in <b>PROMPT</b>
strings. Setting <b>psvar</b> also sets <b>PSVAR</b>, and
vice versa.</p>

<p style="margin-left:11%;"><b>READNULLCMD</b>
&lt;S&gt;</p>

<p style="margin-left:22%;">The command name to assume if a
single input redirection is specified with no command.
Defaults to <b>more</b>.</p>

<p style="margin-left:11%;"><b>REPORTTIME</b></p>

<p style="margin-left:22%;">If nonnegative, commands whose
combined user and system execution times (measured in
seconds) are greater than this value have timing statistics
printed for them. Output is suppressed for commands executed
within the line editor, including completion; commands
explicitly marked with the <b>time</b> keyword still cause
the summary to be printed in this case.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>REPLY</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This parameter is reserved by convention to pass string
values between shell scripts and shell builtins in
situations where a function call or redirection are
impossible or undesirable. The <b>read</b> builtin and the
<b>select</b> complex command may set <b>REPLY</b>, and
filename generation both sets and examines its value when
evaluating certain expressions. Some modules also employ
<b>REPLY</b> for similar purposes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>reply</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>As <b>REPLY</b>, but for array values rather than
strings.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>RPROMPT</b> &lt;S&gt;
<b><br>
RPS1</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This prompt is displayed on the
right&minus;hand side of the screen when the primary prompt
is being displayed on the left. This does not work if the
<b>SINGLE_LINE_ZLE</b> option is set. It is expanded in the
same way as <b>PS1</b>.</p>

<p style="margin-left:11%;"><b>RPROMPT2</b> &lt;S&gt;
<b><br>
RPS2</b> &lt;S&gt;</p>

<p style="margin-left:22%;">This prompt is displayed on the
right&minus;hand side of the screen when the secondary
prompt is being displayed on the left. This does not work if
the <b>SINGLE_LINE_ZLE</b> option is set. It is expanded in
the same way as <b>PS2</b>.</p>

<p style="margin-left:11%;"><b>SAVEHIST</b></p>

<p style="margin-left:22%;">The maximum number of history
events to save in the history file.</p>

<p style="margin-left:11%;"><b>SPROMPT</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The prompt used for spelling
correction. The sequence &lsquo;<b>%R</b>&rsquo; expands to
the string which presumably needs spelling correction, and
&lsquo;<b>%r</b>&rsquo; expands to the proposed correction.
All other prompt escapes are also allowed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>STTY</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If this parameter is set in a command&rsquo;s
environment, the shell runs the <b>stty</b> command with the
value of this parameter as arguments in order to set up the
terminal before executing the command. The modes apply only
to the command, and are reset when it finishes or is
suspended. If the command is suspended and continued later
with the <b>fg</b> or <b>wait</b> builtins it will see the
modes specified by <b>STTY</b>, as if it were not suspended.
This (intentionally) does not apply if the command is
continued via &lsquo;<b>kill &minus;CONT</b>&rsquo;.
<b>STTY</b> is ignored if the command is run in the
background, or if it is in the environment of the shell but
not explicitly assigned to in the input line. This avoids
running stty at every external command by accidentally
exporting it. Also note that <b>STTY</b> should not be used
for window size specifications; these will not be local to
the command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>TERM</b> &lt;S&gt;</p>

<p style="margin-left:22%;">The type of terminal in use.
This is used when looking up termcap sequences. An
assignment to <b>TERM</b> causes zsh to re&minus;initialize
the terminal, even if the value does not change (e.g.,
&lsquo;<b>TERM=$TERM</b>&rsquo;). It is necessary to make
such an assignment upon any change to the terminal
definition database or terminal type in order for the new
settings to take effect.</p>

<p style="margin-left:11%;"><b>TERMINFO</b> &lt;S&gt;</p>

<p style="margin-left:22%;">A reference to a compiled
description of the terminal, used by the
&lsquo;terminfo&rsquo; library when the system has it; see
<i>terminfo</i>(5). If set, this causes the shell to
reinitialise the terminal, making the workaround
&lsquo;<b>TERM=$TERM</b>&rsquo; unnecessary.</p>

<p style="margin-left:11%;"><b>TIMEFMT</b></p>

<p style="margin-left:22%;">The format of process time
reports with the <b>time</b> keyword. The default is
&lsquo;<b>%J %U user %S system %P cpu %*E total</b>&rsquo;.
Recognizes the following escape sequences, although not all
may be available on all systems, and some that are available
may not be useful:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>A &lsquo;<b>%</b>&rsquo;.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%U</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>CPU seconds spent in user mode.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%S</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>CPU seconds spent in kernel mode.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%E</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Elapsed time in seconds.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%P</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The CPU percentage, computed as
(100*<b>%U</b>+<b>%S</b>)/<b>%E</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%W</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Number of times the process was swapped.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%X</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The average amount in (shared) text space used in
kilobytes.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%D</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The average amount in (unshared) data/stack space used
in kilobytes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%K</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The total space used (%X+%D) in kilobytes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%M</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The maximum memory the process had in use at any time in
megabytes.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%F</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of major page faults (page needed to be
brought from disk).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%R</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of minor page faults.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%I</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of input operations.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%O</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of output operations.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of socket messages received.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of socket messages sent.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%k</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of signals received.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%w</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Number of voluntary context switches (waits).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Number of involuntary context switches.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%J</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The name of this job.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A star may be
inserted between the percent sign and flags printing time.
This cause the time to be printed in
&lsquo;<i>hh</i><b>:</b><i>mm</i><b>:</b><i>ss</i><b>.</b><i>ttt</i>&rsquo;
format (hours and minutes are only printed if they are not
zero).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>TMOUT</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">If this parameter is nonzero,
the shell will receive an <b>ALRM</b> signal if a command is
not entered within the specified number of seconds after
issuing a prompt. If there is a trap on <b>SIGALRM</b>, it
will be executed and a new alarm is scheduled using the
value of the <b>TMOUT</b> parameter after executing the
trap. If no trap is set, and the idle time of the terminal
is not less than the value of the <b>TMOUT</b> parameter,
zsh terminates. Otherwise a new alarm is scheduled to
<b>TMOUT</b> seconds after the last keypress.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>TMPPREFIX</b></p>

<p style="margin-left:22%;">A pathname prefix which the
shell will use for all temporary files. Note that this
should include an initial part for the file name as well as
any directory names. The default is
&lsquo;<b>/tmp/zsh</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>watch</b> &lt;S&gt;
&lt;Z&gt; (<b>WATCH</b> &lt;S&gt;)</p>

<p style="margin-left:22%;">An array (colon&minus;separated
list) of login/logout events to report. If it contains the
single word &lsquo;<b>all</b>&rsquo;, then all login/logout
events are reported. If it contains the single word
&lsquo;<b>notme</b>&rsquo;, then all events are reported as
with &lsquo;<b>all</b>&rsquo; except <b>$USERNAME</b>. An
entry in this list may consist of a username, an
&lsquo;<b>@</b>&rsquo; followed by a remote hostname, and a
&lsquo;<b>%</b>&rsquo; followed by a line (tty). Any or all
of these components may be present in an entry; if a
login/logout event matches all of them, it is reported.</p>

<p style="margin-left:11%;"><b>WATCHFMT</b></p>

<p style="margin-left:22%;">The format of login/logout
reports if the <b>watch</b> parameter is set. Default is
&lsquo;<b>%n has %a %l from %m</b>&rsquo;. Recognizes the
following escape sequences:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%n</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The name of the user that logged in/out.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The observed action, i.e. &quot;logged on&quot; or
&quot;logged off&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The line (tty) the user is logged in on.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%M</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The full hostname of the remote host.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%m</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The hostname up to the first &lsquo;<b>.</b>&rsquo;. If
only the IP address is available or the utmp field contains
the name of an X&minus;windows display, the whole name is
printed.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><i>NOTE:</i>
The &lsquo;<b>%m</b>&rsquo; and &lsquo;<b>%M</b>&rsquo;
escapes will work only if there is a host name field in the
utmp on your machine. Otherwise they are treated as ordinary
strings.</p>

<p style="margin-left:22%;"><b>%S</b> (<b>%s</b>)</p>

<p style="margin-left:32%;">Start (stop) standout mode.</p>

<p style="margin-left:22%;"><b>%U</b> (<b>%u</b>)</p>

<p style="margin-left:32%;">Start (stop) underline
mode.</p>

<p style="margin-left:22%;"><b>%B</b> (<b>%b</b>)</p>

<p style="margin-left:32%;">Start (stop) boldface mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%t</b></p></td>
<td width="7%"></td>
<td width="54%">
</td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%@</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>The time, in 12&minus;hour, am/pm format.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%T</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>The time, in 24&minus;hour format.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%w</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>The date in
&lsquo;<i>day</i><b>&minus;</b><i>dd</i>&rsquo; format.</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%W</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>The date in
&lsquo;<i>mm</i><b>/</b><i>dd</i><b>/</b><i>yy</i>&rsquo;
format.</p> </td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%D</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>The date in
&lsquo;<i>yy</i><b>&minus;</b><i>mm</i><b>&minus;</b><i>dd</i>&rsquo;
format.</p> </td>
<td width="14%">
</td></tr>
</table>


<p style="margin-left:22%;"><b>%(</b><i>x</i><b>:</b><i>true&minus;text</i><b>:</b><i>false&minus;text</i><b>)</b></p>

<p style="margin-left:32%;">Specifies a ternary expression.
The character following the <i>x</i> is arbitrary; the same
character is used to separate the text for the
&quot;true&quot; result from that for the &quot;false&quot;
result. Both the separator and the right parenthesis may be
escaped with a backslash. Ternary expressions may be
nested.</p>

<p style="margin-left:32%; margin-top: 1em">The test
character <i>x</i> may be any one of &lsquo;<b>l</b>&rsquo;,
&lsquo;<b>n</b>&rsquo;, &lsquo;<b>m</b>&rsquo; or
&lsquo;<b>M</b>&rsquo;, which indicate a &lsquo;true&rsquo;
result if the corresponding escape sequence would return a
non&minus;empty value; or it may be &lsquo;<b>a</b>&rsquo;,
which indicates a &lsquo;true&rsquo; result if the watched
user has logged in, or &lsquo;false&rsquo; if he has logged
out. Other characters evaluate to neither true nor false;
the entire expression is omitted in this case.</p>

<p style="margin-left:32%; margin-top: 1em">If the result
is &lsquo;true&rsquo;, then the <i>true&minus;text</i> is
formatted according to the rules above and printed, and the
<i>false&minus;text</i> is skipped. If &lsquo;false&rsquo;,
the <i>true&minus;text</i> is skipped and the
<i>false&minus;text</i> is formatted and printed. Either or
both of the branches may be empty, but both separators must
be present in any case.</p>

<p style="margin-left:11%;"><b>WORDCHARS</b> &lt;S&gt;</p>

<p style="margin-left:22%;">A list of
non&minus;alphanumeric characters considered part of a word
by the line editor.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ZBEEP</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>If set, this gives a string of characters, which can use
all the same codes as the <b>bindkey</b> command as
described in the zsh/zle module entry in
<i>zshmodules</i>(1), that will be output to the terminal
instead of beeping. This may have a visible instead of an
audible effect; for example, the string
&lsquo;<b>\e[?5h\e[?5l</b>&rsquo; on a vt100 or xterm will
have the effect of flashing reverse video on and off (if you
usually use reverse video, you should use the string
&lsquo;<b>\e[?5l\e[?5h</b>&rsquo; instead). This takes
precedence over the <b>NOBEEP</b> option.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ZDOTDIR</b></p>

<p style="margin-left:22%;">The directory to search for
shell startup files (.zshrc, etc), if not <b>$HOME</b>.</p>

<p style="margin-left:11%;"><b>ZLE_LINE_ABORTED</b></p>

<p style="margin-left:22%;">This parameter is set by the
line editor when an error occurs. It contains the line that
was being edited at the point of the error. &lsquo;<b>print
&minus;zr &minus;&minus; $ZLE_LINE_ABORTED</b>&rsquo; can be
used to recover the line. Only the most recent line of this
kind is remembered.</p>

<p style="margin-left:11%;"><b>ZLE_REMOVE_SUFFIX_CHARS <br>
ZLE_SPACE_SUFFIX_CHARS</b></p>

<p style="margin-left:22%;">These parameters are used by
the line editor. In certain circumstances suffixes
(typically space or slash) added by the completion system
will be removed automatically, either because the next
editing command was not an insertable character, or because
the character was marked as requiring the suffix to be
removed.</p>

<p style="margin-left:22%; margin-top: 1em">These variables
can contain the sets of characters that will cause the
suffix to be removed. If <b>ZLE_REMOVE_SUFFIX_CHARS</b> is
set, those characters will cause the suffix to be removed;
if <b>ZLE_SPACE_SUFFIX_CHARS</b> is set, those characters
will cause the suffix to be removed and replaced by a
space.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZLE_REMOVE_SUFFIX_CHARS</b> is not set, the default
behaviour is equivalent to:</p>


<p style="margin-left:32%; margin-top: 1em"><b>ZLE_REMOVE_SUFFIX_CHARS=$&rsquo;
\t\n;&amp;|&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZLE_REMOVE_SUFFIX_CHARS</b> is set but is empty, no
characters have this behaviour.
<b>ZLE_SPACE_SUFFIX_CHARS</b> takes precedence, so that the
following:</p>


<p style="margin-left:32%; margin-top: 1em"><b>ZLE_SPACE_SUFFIX_CHARS=$&rsquo;&amp;|&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">causes the
characters &lsquo;<b>&amp;</b>&rsquo; and
&lsquo;<b>|</b>&rsquo; to remove the suffix but to replace
it with a space.</p>

<p style="margin-left:22%; margin-top: 1em">To illustrate
the difference, suppose that the option
<b>AUTO_REMOVE_SLASH</b> is in effect and the directory
<b>DIR</b> has just been completed, with an appended
<b>/</b>, following which the user types
&lsquo;<b>&amp;</b>&rsquo;. The default result is
&lsquo;<b>DIR&amp;</b>&rsquo;. With
<b>ZLE_REMOVE_SUFFIX_CHARS</b> set but without including
&lsquo;<b>&amp;</b>&rsquo; the result is
&lsquo;<b>DIR/&amp;</b>&rsquo;. With
<b>ZLE_SPACE_SUFFIX_CHARS</b> set to include
&lsquo;<b>&amp;</b>&rsquo; the result is &lsquo;<b>DIR
&amp;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
certain completions may provide their own suffix removal or
replacement behaviour which overrides the values described
here. See the completion system documentation in
<i>zshcompsys</i>(1).</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshoptions &minus; zsh
options</p>

<h2>SPECIFYING OPTIONS
<a name="SPECIFYING OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options are
primarily referred to by name. These names are case
insensitive and underscores are ignored. For example,
&lsquo;<b>allexport</b>&rsquo; is equivalent to
&lsquo;<b>A__lleXP_ort</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The sense of an
option name may be inverted by preceding it with
&lsquo;<b>no</b>&rsquo;, so &lsquo;<b>setopt
No_Beep</b>&rsquo; is equivalent to &lsquo;<b>unsetopt
beep</b>&rsquo;. This inversion can only be done once, so
&lsquo;<b>nonobeep</b>&rsquo; is <i>not</i> a synonym for
&lsquo;<b>beep</b>&rsquo;. Similarly,
&lsquo;<b>tify</b>&rsquo; is not a synonym for
&lsquo;<b>nonotify</b>&rsquo; (the inversion of
&lsquo;<b>notify</b>&rsquo;).</p>

<p style="margin-left:11%; margin-top: 1em">Some options
also have one or more single letter names. There are two
sets of single letter options: one used by default, and
another used to emulate <b>sh</b>/<b>ksh</b> (used when the
<b>SH_OPTION_LETTERS</b> option is set). The single letter
options can be used on the shell command line, or with the
<b>set</b>, <b>setopt</b> and <b>unsetopt</b> builtins, as
normal Unix options preceded by
&lsquo;<b>&minus;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The sense of
the single letter options may be inverted by using
&lsquo;<b>+</b>&rsquo; instead of
&lsquo;<b>&minus;</b>&rsquo;. Some of the single letter
option names refer to an option being off, in which case the
inversion of that name refers to the option being on. For
example, &lsquo;<b>+n</b>&rsquo; is the short name of
&lsquo;<b>exec</b>&rsquo;, and &lsquo;<b>&minus;n</b>&rsquo;
is the short name of its inversion,
&lsquo;<b>noexec</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">In strings of
single letter options supplied to the shell at startup,
trailing whitespace will be ignored; for example the string
&lsquo;<b>&minus;f</b> &rsquo; will be treated just as
&lsquo;<b>&minus;f</b>&rsquo;, but the string
&lsquo;<b>&minus;f i</b>&rsquo; is an error. This is because
many systems which implement the &lsquo;<b>#!</b>&rsquo;
mechanism for calling scripts do not strip trailing
whitespace.</p>

<h2>DESCRIPTION OF OPTIONS
<a name="DESCRIPTION OF OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In the
following list, options set by default in all emulations are
marked &lt;D&gt;; those set by default only in csh, ksh, sh,
or zsh emulations are marked &lt;C&gt;, &lt;K&gt;,
&lt;S&gt;, &lt;Z&gt; as appropriate. When listing options
(by &lsquo;<b>setopt</b>&rsquo;,
&lsquo;<b>unsetopt</b>&rsquo;, &lsquo;<b>set
&minus;o</b>&rsquo; or &lsquo;<b>set +o</b>&rsquo;), those
turned on by default appear in the list prefixed with
&lsquo;<b>no</b>&rsquo;. Hence (unless
<b>KSH_OPTION_PRINT</b> is set), &lsquo;<b>setopt</b>&rsquo;
shows all options whose settings are changed from the
default.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changing
Directories <br>
AUTO_CD</b> (<b>&minus;J</b>)</p>

<p style="margin-left:22%;">If a command is issued that
can&rsquo;t be executed as a normal command, and the command
is the name of a directory, perform the <b>cd</b> command to
that directory.</p>

<p style="margin-left:11%;"><b>AUTO_PUSHD</b>
(<b>&minus;N</b>)</p>

<p style="margin-left:22%;">Make <b>cd</b> push the old
directory onto the directory stack.</p>

<p style="margin-left:11%;"><b>CDABLE_VARS</b>
(<b>&minus;T</b>)</p>

<p style="margin-left:22%;">If the argument to a <b>cd</b>
command (or an implied <b>cd</b> with the <b>AUTO_CD</b>
option set) is not a directory, and does not begin with a
slash, try to expand the expression as if it were preceded
by a &lsquo;<b>~</b>&rsquo; (see the section &lsquo;Filename
Expansion&rsquo;).</p>

<p style="margin-left:11%;"><b>CHASE_DOTS</b></p>

<p style="margin-left:22%;">When changing to a directory
containing a path segment &lsquo;<b>..</b>&rsquo; which
would otherwise be treated as canceling the previous segment
in the path (in other words, &lsquo;<b>foo/..</b>&rsquo;
would be removed from the path, or if
&lsquo;<b>..</b>&rsquo; is the first part of the path, the
last part of the current working directory would be
removed), instead resolve the path to the physical
directory. This option is overridden by
<b>CHASE_LINKS</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose <b>/foo/bar</b> is a link to the directory
<b>/alt/rod</b>. Without this option set, &lsquo;<b>cd
/foo/bar/..</b>&rsquo; changes to <b>/foo</b>; with it set,
it changes to <b>/alt</b>. The same applies if the current
directory is <b>/foo/bar</b> and &lsquo;<b>cd ..</b>&rsquo;
is used. Note that all other symbolic links in the path will
also be resolved.</p>

<p style="margin-left:11%;"><b>CHASE_LINKS</b>
(<b>&minus;w</b>)</p>

<p style="margin-left:22%;">Resolve symbolic links to their
true values when changing directory. This also has the
effect of <b>CHASE_DOTS</b>, i.e. a &lsquo;<b>..</b>&rsquo;
path segment will be treated as referring to the physical
parent, even if the preceding path segment is a symbolic
link.</p>

<p style="margin-left:11%;"><b>POSIX_CD</b></p>

<p style="margin-left:22%;">Modifies the behaviour of
<b>cd</b>, <b>chdir</b> and <b>pushd</b> commands to make
them more compatible with the POSIX standard. The behaviour
with the option unset is described in the documentation for
the <b>cd</b> builtin in <i>zshbuiltins</i>(1). If the
option is set, the shell does not test for directories
beneath the local directory (&lsquo;<b>.</b>&rsquo;) until
after all directories in <b>cdpath</b> have been tested.</p>

<p style="margin-left:22%; margin-top: 1em">Also, if the
option is set, the conditions under which the shell prints
the new directory after changing to it are modified. It is
no longer restricted to interactive shells (although
printing of the directory stack with <b>pushd</b> is still
limited to interactive shells); and any use of a component
of <b>CDPATH</b>, including a &lsquo;<b>.</b>&rsquo; but
excluding an empty component that is otherwise treated as
&lsquo;<b>.</b>&rsquo;, causes the directory to be
printed.</p>

<p style="margin-left:11%;"><b>PUSHD_IGNORE_DUPS</b></p>

<p style="margin-left:22%;">Don&rsquo;t push multiple
copies of the same directory onto the directory stack.</p>

<p style="margin-left:11%;"><b>PUSHD_MINUS</b></p>

<p style="margin-left:22%;">Exchanges the meanings of
&lsquo;<b>+</b>&rsquo; and &lsquo;<b>&minus;</b>&rsquo; when
used with a number to specify a directory in the stack.</p>

<p style="margin-left:11%;"><b>PUSHD_SILENT</b>
(<b>&minus;E</b>)</p>

<p style="margin-left:22%;">Do not print the directory
stack after <b>pushd</b> or <b>popd</b>.</p>

<p style="margin-left:11%;"><b>PUSHD_TO_HOME</b>
(<b>&minus;D</b>)</p>

<p style="margin-left:22%;">Have <b>pushd</b> with no
arguments act like &lsquo;<b>pushd $HOME</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Completion
<br>
ALWAYS_LAST_PROMPT</b> &lt;D&gt;</p>

<p style="margin-left:22%;">If unset, key functions that
list completions try to return to the last prompt if given a
numeric argument. If set these functions try to return to
the last prompt if given <i>no</i> numeric argument.</p>

<p style="margin-left:11%;"><b>ALWAYS_TO_END</b></p>

<p style="margin-left:22%;">If a completion is performed
with the cursor within a word, and a full completion is
inserted, the cursor is moved to the end of the word. That
is, the cursor is moved to the end of the word if either a
single match is inserted or menu completion is
performed.</p>

<p style="margin-left:11%;"><b>AUTO_LIST</b>
(<b>&minus;9</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">Automatically list choices on
an ambiguous completion.</p>

<p style="margin-left:11%;"><b>AUTO_MENU</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Automatically use menu
completion after the second consecutive request for
completion, for example by pressing the tab key repeatedly.
This option is overridden by <b>MENU_COMPLETE</b>.</p>

<p style="margin-left:11%;"><b>AUTO_NAME_DIRS</b></p>

<p style="margin-left:22%;">Any parameter that is set to
the absolute name of a directory immediately becomes a name
for that directory, that will be used by the
&lsquo;<b>%~</b>&rsquo; and related prompt sequences, and
will be available when completion is performed on a word
starting with &lsquo;<b>~</b>&rsquo;. (Otherwise, the
parameter must be used in the form
&lsquo;<b>~</b><i>param</i>&rsquo; first.)</p>

<p style="margin-left:11%;"><b>AUTO_PARAM_KEYS</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">If a parameter name was
completed and a following character (normally a space)
automatically inserted, and the next character typed is one
of those that have to come directly after the name (like
&lsquo;<b>}</b>&rsquo;, &lsquo;<b>:</b>&rsquo;, etc.), the
automatically added character is deleted, so that the
character typed comes immediately after the parameter name.
Completion in a brace expansion is affected similarly: the
added character is a &lsquo;<b>,</b>&rsquo;, which will be
removed if &lsquo;<b>}</b>&rsquo; is typed next.</p>

<p style="margin-left:11%;"><b>AUTO_PARAM_SLASH</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">If a parameter is completed
whose content is the name of a directory, then add a
trailing slash instead of a space.</p>

<p style="margin-left:11%;"><b>AUTO_REMOVE_SLASH</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">When the last character
resulting from a completion is a slash and the next
character typed is a word delimiter, a slash, or a character
that ends a command (such as a semicolon or an ampersand),
remove the slash.</p>

<p style="margin-left:11%;"><b>BASH_AUTO_LIST</b></p>

<p style="margin-left:22%;">On an ambiguous completion,
automatically list choices when the completion function is
called twice in succession. This takes precedence over
<b>AUTO_LIST</b>. The setting of <b>LIST_AMBIGUOUS</b> is
respected. If <b>AUTO_MENU</b> is set, the menu behaviour
will then start with the third press. Note that this will
not work with <b>MENU_COMPLETE</b>, since repeated
completion calls immediately cycle through the list in that
case.</p>

<p style="margin-left:11%;"><b>COMPLETE_ALIASES</b></p>

<p style="margin-left:22%;">Prevents aliases on the command
line from being internally substituted before completion is
attempted. The effect is to make the alias a distinct
command for completion purposes.</p>

<p style="margin-left:11%;"><b>COMPLETE_IN_WORD</b></p>

<p style="margin-left:22%;">If unset, the cursor is set to
the end of the word if completion is started. Otherwise it
stays there and completion is done from both ends.</p>

<p style="margin-left:11%;"><b>GLOB_COMPLETE</b></p>

<p style="margin-left:22%;">When the current word has a
glob pattern, do not insert all the words resulting from the
expansion but generate matches as for completion and cycle
through them like <b>MENU_COMPLETE</b>. The matches are
generated as if a &lsquo;<b>*</b>&rsquo; was added to the
end of the word, or inserted at the cursor when
<b>COMPLETE_IN_WORD</b> is set. This actually uses pattern
matching, not globbing, so it works not only for files but
for any completion, such as options, user names, etc.</p>

<p style="margin-left:22%; margin-top: 1em">Note that when
the pattern matcher is used, matching control (for example,
case&minus;insensitive or anchored matching) cannot be used.
This limitation only applies when the current word contains
a pattern; simply turning on the <b>GLOB_COMPLETE</b> option
does not have this effect.</p>

<p style="margin-left:11%;"><b>HASH_LIST_ALL</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">Whenever a command completion
or spelling correction is attempted, make sure the entire
command path is hashed first. This makes the first
completion slower but avoids false reports of spelling
errors.</p>

<p style="margin-left:11%;"><b>LIST_AMBIGUOUS</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">This option works when
<b>AUTO_LIST</b> or <b>BASH_AUTO_LIST</b> is also set. If
there is an unambiguous prefix to insert on the command
line, that is done without a completion list being
displayed; in other words, auto&minus;listing behaviour only
takes place when nothing would be inserted. In the case of
<b>BASH_AUTO_LIST</b>, this means that the list will be
delayed to the third call of the function.</p>

<p style="margin-left:11%;"><b>LIST_BEEP</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Beep on an ambiguous
completion. More accurately, this forces the completion
widgets to return status 1 on an ambiguous completion, which
causes the shell to beep if the option <b>BEEP</b> is also
set; this may be modified if completion is called from a
user&minus;defined widget.</p>

<p style="margin-left:11%;"><b>LIST_PACKED</b></p>

<p style="margin-left:22%;">Try to make the completion list
smaller (occupying less lines) by printing the matches in
columns with different widths.</p>

<p style="margin-left:11%;"><b>LIST_ROWS_FIRST</b></p>

<p style="margin-left:22%;">Lay out the matches in
completion lists sorted horizontally, that is, the second
match is to the right of the first one, not under it as
usual.</p>

<p style="margin-left:11%;"><b>LIST_TYPES</b>
(<b>&minus;X</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">When listing files that are
possible completions, show the type of each file with a
trailing identifying mark.</p>

<p style="margin-left:11%;"><b>MENU_COMPLETE</b>
(<b>&minus;Y</b>)</p>

<p style="margin-left:22%;">On an ambiguous completion,
instead of listing possibilities or beeping, insert the
first match immediately. Then when completion is requested
again, remove the first match and insert the second match,
etc. When there are no more matches, go back to the first
one again. <b>reverse&minus;menu&minus;complete</b> may be
used to loop through the list in the other direction. This
option overrides <b>AUTO_MENU</b>.</p>

<p style="margin-left:11%;"><b>REC_EXACT</b>
(<b>&minus;S</b>)</p>

<p style="margin-left:22%;">In completion, recognize exact
matches even if they are ambiguous.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Expansion
and Globbing <br>
BAD_PATTERN</b> (<b>+2</b>) &lt;C&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">If a pattern for filename
generation is badly formed, print an error message. (If this
option is unset, the pattern will be left unchanged.)</p>

<p style="margin-left:11%;"><b>BARE_GLOB_QUAL</b>
&lt;Z&gt;</p>

<p style="margin-left:22%;">In a glob pattern, treat a
trailing set of parentheses as a qualifier list, if it
contains no &lsquo;<b>|</b>&rsquo;, &lsquo;<b>(</b>&rsquo;
or (if special) &lsquo;<b>~</b>&rsquo; characters. See the
section &lsquo;Filename Generation&rsquo;.</p>

<p style="margin-left:11%;"><b>BRACE_CCL</b></p>

<p style="margin-left:22%;">Expand expressions in braces
which would not otherwise undergo brace expansion to a
lexically ordered list of all the characters. See the
section &lsquo;Brace Expansion&rsquo;.</p>

<p style="margin-left:11%;"><b>CASE_GLOB</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Make globbing (filename
generation) sensitive to case. Note that other uses of
patterns are always sensitive to case. If the option is
unset, the presence of any character which is special to
filename generation will cause case&minus;insensitive
matching. For example, <b>cvs(/)</b> can match the directory
<b>CVS</b> owing to the presence of the globbing flag
(unless the option <b>BARE_GLOB_QUAL</b> is unset).</p>

<p style="margin-left:11%;"><b>CASE_MATCH</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Make regular expressions using
the <b>zsh/regex</b> module (including matches with
<b>=~</b>) sensitive to case.</p>

<p style="margin-left:11%;"><b>CSH_NULL_GLOB</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">If a pattern for filename
generation has no matches, delete the pattern from the
argument list; do not report an error unless all the
patterns in a command have no matches. Overrides
<b>NOMATCH</b>.</p>

<p style="margin-left:11%;"><b>EQUALS</b> &lt;Z&gt;</p>

<p style="margin-left:22%;">Perform <b>=</b> filename
expansion. (See the section &lsquo;Filename
Expansion&rsquo;.)</p>

<p style="margin-left:11%;"><b>EXTENDED_GLOB</b></p>

<p style="margin-left:22%;">Treat the
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>~</b>&rsquo; and
&lsquo;<b>^</b>&rsquo; characters as part of patterns for
filename generation, etc. (An initial unquoted
&lsquo;<b>~</b>&rsquo; always produces named directory
expansion.)</p>

<p style="margin-left:11%;"><b>GLOB</b> (<b>+F</b>, ksh:
<b>+f</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">Perform filename generation
(globbing). (See the section &lsquo;Filename
Generation&rsquo;.)</p>

<p style="margin-left:11%;"><b>GLOB_ASSIGN</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">If this option is set, filename
generation (globbing) is performed on the right hand side of
scalar parameter assignments of the form
&lsquo;<i>name</i><b>=</b><i>pattern</i> (e.g.
&lsquo;<b>foo=*</b>&rsquo;). If the result has more than one
word the parameter will become an array with those words as
arguments. This option is provided for backwards
compatibility only: globbing is always performed on the
right hand side of array assignments of the form
&lsquo;<i>name</i><b>=(</b><i>value</i><b>)</b>&rsquo; (e.g.
&lsquo;<b>foo=(*)</b>&rsquo;) and this form is recommended
for clarity; with this option set, it is not possible to
predict whether the result will be an array or a scalar.</p>

<p style="margin-left:11%;"><b>GLOB_DOTS</b>
(<b>&minus;4</b>)</p>

<p style="margin-left:22%;">Do not require a leading
&lsquo;<b>.</b>&rsquo; in a filename to be matched
explicitly.</p>

<p style="margin-left:11%;"><b>GLOB_SUBST</b> &lt;C&gt;
&lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">Treat any characters resulting
from parameter expansion as being eligible for file
expansion and filename generation, and any characters
resulting from command substitution as being eligible for
filename generation. Braces (and commas in between) do not
become eligible for expansion.</p>

<p style="margin-left:11%;"><b>HIST_SUBST_PATTERN</b></p>

<p style="margin-left:22%;">Substitutions using the
<b>:s</b> and <b>:&amp;</b> history modifiers are performed
with pattern matching instead of string matching. This
occurs wherever history modifiers are valid, including glob
qualifiers and parameters. See the section Modifiers in
<i>zshexpn</i>(1).</p>

<p style="margin-left:11%;"><b>IGNORE_BRACES</b>
(<b>&minus;I</b>) &lt;S&gt;</p>

<p style="margin-left:22%;">Do not perform brace expansion.
For historical reasons this also includes the effect of the
<b>IGNORE_CLOSE_BRACES</b> option.</p>

<p style="margin-left:11%;"><b>IGNORE_CLOSE_BRACES</b></p>

<p style="margin-left:22%;">When neither this option nor
<b>IGNORE_BRACES</b> is set, a sole close brace character
&lsquo;<b>}</b>&rsquo; is syntactically significant at any
point on a command line. This has the effect that no
semicolon or newline is necessary before the brace
terminating a function or current shell construct. When
either option is set, a closing brace is syntactically
significant only in command position. Unlike
<b>IGNORE_BRACES</b>, this option does not disable brace
expansion.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
with both options unset a function may be defined in the
following fashion:</p>

<p style="margin-left:32%; margin-top: 1em"><b>args() {
echo $# }</b></p>

<p style="margin-left:22%; margin-top: 1em">while if either
option is set, this does not work and something equivalent
to the following is required:</p>

<p style="margin-left:32%; margin-top: 1em"><b>args() {
echo $#; }</b></p>

<p style="margin-left:11%;"><b>KSH_GLOB</b> &lt;K&gt;</p>

<p style="margin-left:22%;">In pattern matching, the
interpretation of parentheses is affected by a preceding
&lsquo;<b>@</b>&rsquo;, &lsquo;<b>*</b>&rsquo;,
&lsquo;<b>+</b>&rsquo;, &lsquo;<b>?</b>&rsquo; or
&lsquo;<b>!</b>&rsquo;. See the section &lsquo;Filename
Generation&rsquo;.</p>

<p style="margin-left:11%;"><b>MAGIC_EQUAL_SUBST</b></p>

<p style="margin-left:22%;">All unquoted arguments of the
form &lsquo;<i>anything</i><b>=</b><i>expression</i>&rsquo;
appearing after the command name have filename expansion
(that is, where <i>expression</i> has a leading
&lsquo;<b>~</b>&rsquo; or &lsquo;<b>=</b>&rsquo;) performed
on <i>expression</i> as if it were a parameter assignment.
The argument is not otherwise treated specially; it is
passed to the command as a single argument, and not used as
an actual parameter assignment. For example, in <b>echo
foo=~/bar:~/rod</b>, both occurrences of <b>~</b> would be
replaced. Note that this happens anyway with <b>typeset</b>
and similar statements.</p>

<p style="margin-left:22%; margin-top: 1em">This option
respects the setting of the <b>KSH_TYPESET</b> option. In
other words, if both options are in effect, arguments
looking like assignments will not undergo word
splitting.</p>

<p style="margin-left:11%;"><b>MARK_DIRS</b>
(<b>&minus;8</b>, ksh: <b>&minus;X</b>)</p>

<p style="margin-left:22%;">Append a trailing
&lsquo;<b>/</b>&rsquo; to all directory names resulting from
filename generation (globbing).</p>

<p style="margin-left:11%;"><b>MULTIBYTE</b> &lt;C&gt;
&lt;K&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">Respect multibyte characters
when found in strings. When this option is set, strings are
examined using the system library to determine how many
bytes form a character, depending on the current locale.
This affects the way characters are counted in pattern
matching, parameter values and various delimiters.</p>

<p style="margin-left:22%; margin-top: 1em">The option is
on by default if the shell was compiled with
<b>MULTIBYTE_SUPPORT</b> except in <b>sh</b> emulation;
otherwise it is off by default and has no effect if turned
on. The mode is off in <b>sh</b> emulation for compatibility
but for interactive use may need to be turned on if the
terminal interprets multibyte characters.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
is off a single byte is always treated as a single
character. This setting is designed purely for examining
strings known to contain raw bytes or other values that may
not be characters in the current locale. It is not necessary
to unset the option merely because the character set for the
current locale does not contain multibyte characters.</p>

<p style="margin-left:22%; margin-top: 1em">The option does
not affect the shell&rsquo;s editor, which always uses the
locale to determine multibyte characters. This is because
the character set displayed by the terminal emulator is
independent of shell settings.</p>

<p style="margin-left:11%;"><b>NOMATCH</b> (<b>+3</b>)
&lt;C&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">If a pattern for filename
generation has no matches, print an error, instead of
leaving it unchanged in the argument list. This also applies
to file expansion of an initial &lsquo;<b>~</b>&rsquo; or
&lsquo;<b>=</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>NULL_GLOB</b>
(<b>&minus;G</b>)</p>

<p style="margin-left:22%;">If a pattern for filename
generation has no matches, delete the pattern from the
argument list instead of reporting an error. Overrides
<b>NOMATCH</b>.</p>

<p style="margin-left:11%;"><b>NUMERIC_GLOB_SORT</b></p>

<p style="margin-left:22%;">If numeric filenames are
matched by a filename generation pattern, sort the filenames
numerically rather than lexicographically.</p>

<p style="margin-left:11%;"><b>RC_EXPAND_PARAM</b>
(<b>&minus;P</b>)</p>

<p style="margin-left:22%;">Array expansions of the form
&lsquo;<i>foo</i><b>${</b><i>xx</i><b>}</b><i>bar</i>&rsquo;,
where the parameter <i>xx</i> is set to <b>(</b><i>a b
c</i><b>)</b>, are substituted with &lsquo;<i>fooabar
foobbar foocbar</i>&rsquo; instead of the default
&lsquo;<i>fooa b cbar</i>&rsquo;. Note that an empty array
will therefore cause all arguments to be removed.</p>

<p style="margin-left:11%;"><b>REMATCH_PCRE</b>
&lt;Z&gt;</p>

<p style="margin-left:22%;">If set, regular expression
matching with the <b>=~</b> operator will use
Perl&minus;Compatible Regular Expressions from the PCRE
library, if available. If not set, regular expressions will
use the extended regexp syntax provided by the system
libraries.</p>

<p style="margin-left:11%;"><b>SH_GLOB</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">Disables the special meaning of
&lsquo;<b>(</b>&rsquo;, &lsquo;<b>|</b>&rsquo;,
&lsquo;<b>)</b>&rsquo; and &rsquo;<b>&lt;</b>&rsquo; for
globbing the result of parameter and command substitutions,
and in some other places where the shell accepts patterns.
If <b>SH_GLOB</b> is set but <b>KSH_GLOB</b> is not, the
shell allows the interpretation of subshell expressions
enclosed in parentheses in some cases where there is no
space before the opening parenthesis, e.g. <b>!(true)</b> is
interpreted as if there were a space after the <b>!</b>.
This option is set by default if zsh is invoked as <b>sh</b>
or <b>ksh</b>.</p>

<p style="margin-left:11%;"><b>UNSET</b> (<b>+u</b>, ksh:
<b>+u</b>) &lt;K&gt; &lt;S&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">Treat unset parameters as if
they were empty when substituting. Otherwise they are
treated as an error.</p>

<p style="margin-left:11%;"><b>WARN_CREATE_GLOBAL</b></p>

<p style="margin-left:22%;">Print a warning message when a
global parameter is created in a function by an assignment.
This often indicates that a parameter has not been declared
local when it should have been. Parameters explicitly
declared global from within a function using <b>typeset
&minus;g</b> do not cause a warning. Note that there is no
warning when a local parameter is assigned to in a nested
function, which may also indicate an error.</p>

<p style="margin-left:11%; margin-top: 1em"><b>History <br>
APPEND_HISTORY</b> &lt;D&gt;</p>

<p style="margin-left:22%;">If this is set, zsh sessions
will append their history list to the history file, rather
than replace it. Thus, multiple parallel zsh sessions will
all have the new entries from their history lists added to
the history file, in the order that they exit. The file will
still be periodically re&minus;written to trim it when the
number of lines grows 20% beyond the value specified by
<b>$SAVEHIST</b> (see also the HIST_SAVE_BY_COPY
option).</p>

<p style="margin-left:11%;"><b>BANG_HIST</b> (<b>+K</b>)
&lt;C&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">Perform textual history
expansion, <b>csh</b>&minus;style, treating the character
&lsquo;<b>!</b>&rsquo; specially.</p>

<p style="margin-left:11%;"><b>EXTENDED_HISTORY</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">Save each command&rsquo;s
beginning timestamp (in seconds since the epoch) and the
duration (in seconds) to the history file. The format of
this prefixed data is:</p>


<p style="margin-left:22%; margin-top: 1em">&lsquo;<b>:</b>
<i>&lt;beginning time&gt;</i><b>:</b><i>&lt;elapsed
seconds&gt;</i><b>;</b><i>&lt;command&gt;</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>HIST_ALLOW_CLOBBER</b></p>

<p style="margin-left:22%;">Add &lsquo;<b>|</b>&rsquo; to
output redirections in the history. This allows history
references to clobber files even when <b>CLOBBER</b> is
unset.</p>

<p style="margin-left:11%;"><b>HIST_BEEP</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Beep when an attempt is made to
access a history entry which isn&rsquo;t there.</p>


<p style="margin-left:11%;"><b>HIST_EXPIRE_DUPS_FIRST</b></p>

<p style="margin-left:22%;">If the internal history needs
to be trimmed to add the current command line, setting this
option will cause the oldest history event that has a
duplicate to be lost before losing a unique event from the
list. You should be sure to set the value of <b>HISTSIZE</b>
to a larger number than <b>SAVEHIST</b> in order to give you
some room for the duplicated events, otherwise this option
will behave just like <b>HIST_IGNORE_ALL_DUPS</b> once the
history fills up with unique events.</p>

<p style="margin-left:11%;"><b>HIST_FCNTL_LOCK</b></p>

<p style="margin-left:22%;">When writing out the history
file, by default zsh uses ad&minus;hoc file locking to avoid
known problems with locking on some operating systems. With
this option locking is done by means of the system&rsquo;s
<b>fcntl</b> call, where this method is available. On recent
operating systems this may provide better performance, in
particular avoiding history corruption when files are stored
on NFS.</p>

<p style="margin-left:11%;"><b>HIST_FIND_NO_DUPS</b></p>

<p style="margin-left:22%;">When searching for history
entries in the line editor, do not display duplicates of a
line previously found, even if the duplicates are not
contiguous.</p>


<p style="margin-left:11%;"><b>HIST_IGNORE_ALL_DUPS</b></p>

<p style="margin-left:22%;">If a new command line being
added to the history list duplicates an older one, the older
command is removed from the list (even if it is not the
previous event).</p>

<p style="margin-left:11%;"><b>HIST_IGNORE_DUPS</b>
(<b>&minus;h</b>)</p>

<p style="margin-left:22%;">Do not enter command lines into
the history list if they are duplicates of the previous
event.</p>

<p style="margin-left:11%;"><b>HIST_IGNORE_SPACE</b>
(<b>&minus;g</b>)</p>

<p style="margin-left:22%;">Remove command lines from the
history list when the first character on the line is a
space, or when one of the expanded aliases contains a
leading space. Only normal aliases (not global or suffix
aliases) have this behaviour. Note that the command lingers
in the internal history until the next command is entered
before it vanishes, allowing you to briefly reuse or edit
the line. If you want to make it vanish right away without
entering another command, type a space and press return.</p>

<p style="margin-left:11%;"><b>HIST_LEX_WORDS</b></p>

<p style="margin-left:22%;">By default, shell history that
is read in from files is split into words on all white
space. This means that arguments with quoted whitespace are
not correctly handled, with the consequence that references
to words in history lines that have been read from a file
may be inaccurate. When this option is set, words read in
from a history file are divided up in a similar fashion to
normal shell command line handling. Although this produces
more accurately delimited words, if the size of the history
file is large this can be slow. Trial and error is necessary
to decide.</p>

<p style="margin-left:11%;"><b>HIST_NO_FUNCTIONS</b></p>

<p style="margin-left:22%;">Remove function definitions
from the history list. Note that the function lingers in the
internal history until the next command is entered before it
vanishes, allowing you to briefly reuse or edit the
definition.</p>

<p style="margin-left:11%;"><b>HIST_NO_STORE</b></p>

<p style="margin-left:22%;">Remove the <b>history</b>
(<b>fc &minus;l</b>) command from the history list when
invoked. Note that the command lingers in the internal
history until the next command is entered before it
vanishes, allowing you to briefly reuse or edit the
line.</p>

<p style="margin-left:11%;"><b>HIST_REDUCE_BLANKS</b></p>

<p style="margin-left:22%;">Remove superfluous blanks from
each command line being added to the history list.</p>

<p style="margin-left:11%;"><b>HIST_SAVE_BY_COPY</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">When the history file is
re&minus;written, we normally write out a copy of the file
named $HISTFILE.new and then rename it over the old one.
However, if this option is unset, we instead truncate the
old history file and write out the new version
in&minus;place. If one of the history&minus;appending
options is enabled, this option only has an effect when the
enlarged history file needs to be re&minus;written to trim
it down to size. Disable this only if you have special
needs, as doing so makes it possible to lose history entries
if zsh gets interrupted during the save.</p>

<p style="margin-left:22%; margin-top: 1em">When writing
out a copy of the history file, zsh preserves the old
file&rsquo;s permissions and group information, but will
refuse to write out a new file if it would change the
history file&rsquo;s owner.</p>

<p style="margin-left:11%;"><b>HIST_SAVE_NO_DUPS</b></p>

<p style="margin-left:22%;">When writing out the history
file, older commands that duplicate newer ones are
omitted.</p>

<p style="margin-left:11%;"><b>HIST_VERIFY</b></p>

<p style="margin-left:22%;">Whenever the user enters a line
with history expansion, don&rsquo;t execute the line
directly; instead, perform history expansion and reload the
line into the editing buffer.</p>

<p style="margin-left:11%;"><b>INC_APPEND_HISTORY</b></p>

<p style="margin-left:22%;">This options works like
<b>APPEND_HISTORY</b> except that new history lines are
added to the <b>$HISTFILE</b> incrementally (as soon as they
are entered), rather than waiting until the shell exits. The
file will still be periodically re&minus;written to trim it
when the number of lines grows 20% beyond the value
specified by <b>$SAVEHIST</b> (see also the
HIST_SAVE_BY_COPY option).</p>

<p style="margin-left:11%;"><b>SHARE_HISTORY</b>
&lt;K&gt;</p>

<p style="margin-left:22%; margin-top: 1em">This option
both imports new commands from the history file, and also
causes your typed commands to be appended to the history
file (the latter is like specifying
<b>INC_APPEND_HISTORY</b>). The history lines are also
output with timestamps ala <b>EXTENDED_HISTORY</b> (which
makes it easier to find the spot where we left off reading
the file after it gets re&minus;written).</p>

<p style="margin-left:22%; margin-top: 1em">By default,
history movement commands visit the imported lines as well
as the local lines, but you can toggle this on and off with
the set&minus;local&minus;history zle binding. It is also
possible to create a zle widget that will make some commands
ignore imported commands, and some include them.</p>

<p style="margin-left:22%; margin-top: 1em">If you find
that you want more control over when commands get imported,
you may wish to turn <b>SHARE_HISTORY</b> off,
<b>INC_APPEND_HISTORY</b> on, and then manually import
commands whenever you need them using &lsquo;<b>fc
&minus;RI</b>&rsquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Initialisation
<br>
ALL_EXPORT</b> (<b>&minus;a</b>, ksh: <b>&minus;a</b>)</p>

<p style="margin-left:22%;">All parameters subsequently
defined are automatically exported.</p>

<p style="margin-left:11%;"><b>GLOBAL_EXPORT</b>
(<b>&lt;Z&gt;</b>)</p>

<p style="margin-left:22%;">If this option is set, passing
the <b>&minus;x</b> flag to the builtins <b>declare</b>,
<b>float</b>, <b>integer</b>, <b>readonly</b> and
<b>typeset</b> (but not <b>local</b>) will also set the
<b>&minus;g</b> flag; hence parameters exported to the
environment will not be made local to the enclosing
function, unless they were already or the flag <b>+g</b> is
given explicitly. If the option is unset, exported
parameters will be made local in just the same way as any
other parameter.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
set by default for backward compatibility; it is not
recommended that its behaviour be relied upon. Note that the
builtin <b>export</b> always sets both the <b>&minus;x</b>
and <b>&minus;g</b> flags, and hence its effect extends
beyond the scope of the enclosing function; this is the most
portable way to achieve this behaviour.</p>

<p style="margin-left:11%;"><b>GLOBAL_RCS</b>
(<b>&minus;d</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">If this option is unset, the
startup files <b>/etc/zprofile</b>, <b>/etc/zshrc</b>,
<b>/etc/zlogin</b> and <b>/etc/zlogout</b> will not be run.
It can be disabled and re&minus;enabled at any time,
including inside local startup files (<b>.zshrc</b>,
etc.).</p>

<p style="margin-left:11%;"><b>RCS</b> (<b>+f</b>)
&lt;D&gt;</p>

<p style="margin-left:22%;">After <b>/etc/zshenv</b> is
sourced on startup, source the <b>.zshenv</b>,
<b>/etc/zprofile</b>, <b>.zprofile</b>, <b>/etc/zshrc</b>,
<b>.zshrc</b>, <b>/etc/zlogin</b>, <b>.zlogin</b>, and
<b>.zlogout</b> files, as described in the section
&lsquo;Files&rsquo;. If this option is unset, the
<b>/etc/zshenv</b> file is still sourced, but any of the
others will not be; it can be set at any time to prevent the
remaining startup files after the currently executing one
from being sourced.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Input/Output
<br>
ALIASES</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Expand aliases.</p>

<p style="margin-left:11%;"><b>CLOBBER</b> (<b>+C</b>, ksh:
<b>+C</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">Allows
&lsquo;<b>&gt;</b>&rsquo; redirection to truncate existing
files, and &lsquo;<b>&gt;&gt;</b>&rsquo; to create files.
Otherwise &lsquo;<b>&gt;!</b>&rsquo; or
&lsquo;<b>&gt;|</b>&rsquo; must be used to truncate a file,
and &lsquo;<b>&gt;&gt;!</b>&rsquo; or
&lsquo;<b>&gt;&gt;|</b>&rsquo; to create a file.</p>

<p style="margin-left:11%;"><b>CORRECT</b>
(<b>&minus;0</b>)</p>

<p style="margin-left:22%;">Try to correct the spelling of
commands. Note that, when the <b>HASH_LIST_ALL</b> option is
not set or when some directories in the path are not
readable, this may falsely report spelling errors the first
time some commands are used.</p>

<p style="margin-left:22%; margin-top: 1em">The shell
variable <b>CORRECT_IGNORE</b> may be set to a pattern to
match words that will never be offered as corrections.</p>

<p style="margin-left:11%;"><b>CORRECT_ALL</b>
(<b>&minus;O</b>)</p>

<p style="margin-left:22%;">Try to correct the spelling of
all arguments in a line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>DVORAK</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Use the Dvorak keyboard instead of the standard qwerty
keyboard as a basis for examining spelling mistakes for the
<b>CORRECT</b> and <b>CORRECT_ALL</b> options and the
<b>spell&minus;word</b> editor command.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>FLOW_CONTROL</b>
&lt;D&gt;</p>

<p style="margin-left:22%;">If this option is unset, output
flow control via start/stop characters (usually assigned to
^S/^Q) is disabled in the shell&rsquo;s editor.</p>

<p style="margin-left:11%;"><b>IGNORE_EOF</b>
(<b>&minus;7</b>)</p>

<p style="margin-left:22%;">Do not exit on
end&minus;of&minus;file. Require the use of <b>exit</b> or
<b>logout</b> instead. However, ten consecutive EOFs will
cause the shell to exit anyway, to avoid the shell hanging
if its tty goes away.</p>

<p style="margin-left:22%; margin-top: 1em">Also, if this
option is set and the Zsh Line Editor is used, widgets
implemented by shell functions can be bound to EOF (normally
Control&minus;D) without printing the normal warning
message. This works only for normal widgets, not for
completion widgets.</p>

<p style="margin-left:11%;"><b>INTERACTIVE_COMMENTS</b>
(<b>&minus;k</b>) &lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">Allow comments even in
interactive shells.</p>

<p style="margin-left:11%;"><b>HASH_CMDS</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Note the location of each
command the first time it is executed. Subsequent
invocations of the same command will use the saved location,
avoiding a path search. If this option is unset, no path
hashing is done at all. However, when <b>CORRECT</b> is set,
commands whose names do not appear in the functions or
aliases hash tables are hashed in order to avoid reporting
them as spelling errors.</p>

<p style="margin-left:11%;"><b>HASH_DIRS</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Whenever a command name is
hashed, hash the directory containing it, as well as all
directories that occur earlier in the path. Has no effect if
neither <b>HASH_CMDS</b> nor <b>CORRECT</b> is set.</p>


<p style="margin-left:11%;"><b>HASH_EXECUTABLES_ONLY</b></p>

<p style="margin-left:22%;">When hashing commands because
of <b>HASH_COMMANDS</b>, check that the file to be hashed is
actually an executable. This option is unset by default as
if the path contains a large number of commands, or consists
of many remote files, the additional tests can take a long
time. Trial and error is needed to show if this option is
beneficial.</p>

<p style="margin-left:11%;"><b>MAIL_WARNING</b>
(<b>&minus;U</b>)</p>

<p style="margin-left:22%;">Print a warning message if a
mail file has been accessed since the shell last
checked.</p>

<p style="margin-left:11%;"><b>PATH_DIRS</b>
(<b>&minus;Q</b>)</p>

<p style="margin-left:22%;">Perform a path search even on
command names with slashes in them. Thus if
&lsquo;<b>/usr/local/bin</b>&rsquo; is in the user&rsquo;s
path, and he or she types &lsquo;<b>X11/xinit</b>&rsquo;,
the command &lsquo;<b>/usr/local/bin/X11/xinit</b>&rsquo;
will be executed (assuming it exists). Commands explicitly
beginning with &lsquo;<b>/</b>&rsquo;,
&lsquo;<b>./</b>&rsquo; or &lsquo;<b>../</b>&rsquo; are not
subject to the path search. This also applies to the
&lsquo;<b>.</b>&rsquo; builtin.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
subdirectories of the current directory are always searched
for executables specified in this form. This takes place
before any search indicated by this option, and regardless
of whether &lsquo;<b>.</b>&rsquo; or the current directory
appear in the command search path.</p>

<p style="margin-left:11%;"><b>PATH_SCRIPT</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">If this option is not set, a
script passed as the first non&minus;option argument to the
shell must contain the name of the file to open. If this
option is set, and the script does not specify a directory
path, the script is looked for first in the current
directory, then in the command path. See the section
INVOCATION in <i>zsh</i>(1).</p>

<p style="margin-left:11%;"><b>PRINT_EIGHT_BIT</b></p>

<p style="margin-left:22%;">Print eight bit characters
literally in completion lists, etc. This option is not
necessary if your system correctly returns the printability
of eight bit characters (see <i>ctype</i>(3)).</p>

<p style="margin-left:11%;"><b>PRINT_EXIT_VALUE</b>
(<b>&minus;1</b>)</p>

<p style="margin-left:22%;">Print the exit value of
programs with non&minus;zero exit status.</p>

<p style="margin-left:11%;"><b>RC_QUOTES</b></p>

<p style="margin-left:22%;">Allow the character sequence
&lsquo;<b>&rsquo;&rsquo;</b>&rsquo; to signify a single
quote within singly quoted strings. Note this does not apply
in quoted strings using the format
<b>$&rsquo;</b><i>...</i><b>&rsquo;</b>, where a backslashed
single quote can be used.</p>

<p style="margin-left:11%;"><b>RM_STAR_SILENT</b>
(<b>&minus;H</b>) &lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">Do not query the user before
executing &lsquo;<b>rm *</b>&rsquo; or &lsquo;<b>rm
path/*</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>RM_STAR_WAIT</b></p>

<p style="margin-left:22%;">If querying the user before
executing &lsquo;<b>rm *</b>&rsquo; or &lsquo;<b>rm
path/*</b>&rsquo;, first wait ten seconds and ignore
anything typed in that time. This avoids the problem of
reflexively answering &lsquo;yes&rsquo; to the query when
one didn&rsquo;t really mean it. The wait and query can
always be avoided by expanding the &lsquo;<b>*</b>&rsquo; in
ZLE (with tab).</p>

<p style="margin-left:11%;"><b>SHORT_LOOPS</b> &lt;C&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">Allow the short forms of
<b>for</b>, <b>repeat</b>, <b>select</b>, <b>if</b>, and
<b>function</b> constructs.</p>

<p style="margin-left:11%;"><b>SUN_KEYBOARD_HACK</b>
(<b>&minus;L</b>)</p>

<p style="margin-left:22%;">If a line ends with a
backquote, and there are an odd number of backquotes on the
line, ignore the trailing backquote. This is useful on some
keyboards where the return key is too small, and the
backquote key lies annoyingly close to it. As an alternative
the variable <b>KEYBOARD_HACK</b> lets you choose the
character to be removed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Job Control
<br>
AUTO_CONTINUE</b></p>

<p style="margin-left:22%;">With this option set, stopped
jobs that are removed from the job table with the
<b>disown</b> builtin command are automatically sent a
<b>CONT</b> signal to make them running.</p>

<p style="margin-left:11%;"><b>AUTO_RESUME</b>
(<b>&minus;W</b>)</p>

<p style="margin-left:22%;">Treat single word simple
commands without redirection as candidates for resumption of
an existing job.</p>

<p style="margin-left:11%;"><b>BG_NICE</b>
(<b>&minus;6</b>) &lt;C&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">Run all background jobs at a
lower priority. This option is set by default.</p>

<p style="margin-left:11%;"><b>CHECK_JOBS</b> &lt;Z&gt;</p>

<p style="margin-left:22%;">Report the status of background
and suspended jobs before exiting a shell with job control;
a second attempt to exit the shell will succeed.
<b>NO_CHECK_JOBS</b> is best used only in combination with
<b>NO_HUP</b>, else such jobs will be killed
automatically.</p>

<p style="margin-left:22%; margin-top: 1em">The check is
omitted if the commands run from the previous command line
included a &lsquo;<b>jobs</b>&rsquo; command, since it is
assumed the user is aware that there are background or
suspended jobs. A &lsquo;<b>jobs</b>&rsquo; command run from
one of the hook functions defined in the section SPECIAL
FUNCTIONS in <i>zshmisc</i>(1) is not counted for this
purpose.</p>

<p style="margin-left:11%;"><b>HUP</b> &lt;Z&gt;</p>

<p style="margin-left:22%;">Send the <b>HUP</b> signal to
running jobs when the shell exits.</p>

<p style="margin-left:11%;"><b>LONG_LIST_JOBS</b>
(<b>&minus;R</b>)</p>

<p style="margin-left:22%;">List jobs in the long format by
default.</p>

<p style="margin-left:11%;"><b>MONITOR</b>
(<b>&minus;m</b>, ksh: <b>&minus;m</b>)</p>

<p style="margin-left:22%;">Allow job control. Set by
default in interactive shells.</p>

<p style="margin-left:11%;"><b>NOTIFY</b> (<b>&minus;5</b>,
ksh: <b>&minus;b</b>) &lt;Z&gt;</p>

<p style="margin-left:22%;">Report the status of background
jobs immediately, rather than waiting until just before
printing a prompt.</p>

<p style="margin-left:11%;"><b>POSIX_JOBS</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">This option makes job control
more compliant with the POSIX standard.</p>

<p style="margin-left:22%; margin-top: 1em">When the option
is not set, the <b>MONITOR</b> option is unset on entry to
subshells, so that job control is no longer active. When the
option is set, the <b>MONITOR</b> option and job control
remain active in the subshell, but note that the subshell
has no access to jobs in the parent shell.</p>

<p style="margin-left:22%; margin-top: 1em">When the option
is not set, jobs put in the background or foreground with
<b>bg</b> or <b>fg</b> are displayed with the same
information that would be reported by <b>jobs</b>. When the
option is set, only the text is printed. The output from
<b>jobs</b> itself is not affected by the option.</p>

<p style="margin-left:22%; margin-top: 1em">When the option
is not set, job information from the parent shell is saved
for output within a subshell (for example, within a
pipeline). When the option is set, the output of <b>jobs</b>
is empty until a job is started within the subshell.</p>

<p style="margin-left:22%; margin-top: 1em">When the option
is set, it becomes possible to use the <b>wait</b> builtin
to wait for the last job started in the background (as given
by <b>$!</b>) even if that job has already exited. This
works even if the option is turned on temporarily around the
use of the <b>wait</b> builtin.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Prompting
<br>
PROMPT_BANG</b> &lt;K&gt;</p>

<p style="margin-left:22%;">If set, &lsquo;<b>!</b>&rsquo;
is treated specially in prompt expansion. See EXPANSION OF
PROMPT SEQUENCES in <i>zshmisc</i>(1).</p>

<p style="margin-left:11%;"><b>PROMPT_CR</b> (<b>+V</b>)
&lt;D&gt;</p>

<p style="margin-left:22%;">Print a carriage return just
before printing a prompt in the line editor. This is on by
default as multi&minus;line editing is only possible if the
editor knows where the start of the line appears.</p>

<p style="margin-left:11%;"><b>PROMPT_SP</b> &lt;D&gt;</p>

<p style="margin-left:22%;">Attempt to preserve a partial
line (i.e. a line that did not end with a newline) that
would otherwise be covered up by the command prompt due to
the <b>PROMPT_CR</b> option. This works by outputting some
cursor&minus;control characters, including a series of
spaces, that should make the terminal wrap to the next line
when a partial line is present (note that this is only
successful if your terminal has automatic margins, which is
typical).</p>

<p style="margin-left:22%; margin-top: 1em">When a partial
line is preserved, by default you will see an inverse+bold
character at the end of the partial line: a &quot;%&quot;
for a normal user or a &quot;#&quot; for root. If set, the
shell parameter <b>PROMPT_EOL_MARK</b> can be used to
customize how the end of partial lines are shown.</p>

<p style="margin-left:22%; margin-top: 1em">NOTE: if the
<b>PROMPT_CR</b> option is not set, enabling this option
will have no effect. This option is on by default.</p>

<p style="margin-left:11%;"><b>PROMPT_PERCENT</b> &lt;C&gt;
&lt;Z&gt;</p>

<p style="margin-left:22%;">If set, &lsquo;<b>%</b>&rsquo;
is treated specially in prompt expansion. See EXPANSION OF
PROMPT SEQUENCES in <i>zshmisc</i>(1).</p>

<p style="margin-left:11%;"><b>PROMPT_SUBST</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">If set, <i>parameter
expansion</i>, <i>command substitution</i> and <i>arithmetic
expansion</i> are performed in prompts. Substitutions within
prompts do not affect the command status.</p>

<p style="margin-left:11%;"><b>TRANSIENT_RPROMPT</b></p>

<p style="margin-left:22%;">Remove any right prompt from
display when accepting a command line. This may be useful
with terminals with other cut/paste methods.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Scripts and
Functions <br>
C_BASES</b></p>

<p style="margin-left:22%;">Output hexadecimal numbers in
the standard C format, for example &lsquo;<b>0xFF</b>&rsquo;
instead of the usual &lsquo;<b>16#FF</b>&rsquo;. If the
option <b>OCTAL_ZEROES</b> is also set (it is not by
default), octal numbers will be treated similarly and hence
appear as &lsquo;<b>077</b>&rsquo; instead of
&lsquo;<b>8#77</b>&rsquo;. This option has no effect on the
choice of the output base, nor on the output of bases other
than hexadecimal and octal. Note that these formats will be
understood on input irrespective of the setting of
<b>C_BASES</b>.</p>

<p style="margin-left:11%;"><b>C_PRECEDENCES</b></p>

<p style="margin-left:22%;">This alters the precedence of
arithmetic operators to be more like C and other programming
languages; the section ARITHMETIC EVALUATION in
<i>zshmisc</i>(1) has an explicit list.</p>

<p style="margin-left:11%;"><b>DEBUG_BEFORE_CMD</b></p>

<p style="margin-left:22%;">Run the <b>DEBUG</b> trap
before each command; otherwise it is run after each command.
Setting this option mimics the behaviour of ksh 93; with the
option unset the behaviour is that of ksh 88.</p>

<p style="margin-left:11%;"><b>ERR_EXIT</b>
(<b>&minus;e</b>, ksh: <b>&minus;e</b>)</p>

<p style="margin-left:22%;">If a command has a
non&minus;zero exit status, execute the <b>ZERR</b> trap, if
set, and exit. This is disabled while running initialization
scripts.</p>

<p style="margin-left:22%; margin-top: 1em">The behaviour
is also disabled inside <b>DEBUG</b> traps. In this case the
option is handled specially: it is unset on entry to the
trap. If the option <b>DEBUG_BEFORE_CMD</b> is set, as it is
by default, and the option <b>ERR_EXIT</b> is found to have
been set on exit, then the command for which the
<b>DEBUG</b> trap is being executed is skipped. The option
is restored after the trap exits.</p>

<p style="margin-left:11%;"><b>ERR_RETURN</b></p>

<p style="margin-left:22%;">If a command has a
non&minus;zero exit status, return immediately from the
enclosing function. The logic is identical to that for
<b>ERR_EXIT</b>, except that an implicit <b>return</b>
statement is executed instead of an <b>exit</b>. This will
trigger an exit at the outermost level of a
non&minus;interactive script.</p>

<p style="margin-left:11%;"><b>EVAL_LINENO</b>
&lt;Z&gt;</p>

<p style="margin-left:22%;">If set, line numbers of
expressions evaluated using the builtin <b>eval</b> are
tracked separately of the enclosing environment. This
applies both to the parameter <b>LINENO</b> and the line
number output by the prompt escape <b>%i</b>. If the option
is set, the prompt escape <b>%N</b> will output the string
&lsquo;<b>(eval)</b>&rsquo; instead of the script or
function name as an indication. (The two prompt escapes are
typically used in the parameter <b>PS4</b> to be output when
the option <b>XTRACE</b> is set.) If <b>EVAL_LINENO</b> is
unset, the line number of the surrounding script or function
is retained during the evaluation.</p>

<p style="margin-left:11%;"><b>EXEC</b> (<b>+n</b>, ksh:
<b>+n</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">Do execute commands. Without
this option, commands are read and checked for syntax
errors, but not executed. This option cannot be turned off
in an interactive shell, except when
&lsquo;<b>&minus;n</b>&rsquo; is supplied to the shell at
startup.</p>

<p style="margin-left:11%;"><b>FUNCTION_ARGZERO</b>
&lt;C&gt; &lt;Z&gt;</p>

<p style="margin-left:22%;">When executing a shell function
or sourcing a script, set <b>$0</b> temporarily to the name
of the function/script.</p>

<p style="margin-left:11%;"><b>LOCAL_OPTIONS</b>
&lt;K&gt;</p>

<p style="margin-left:22%;">If this option is set at the
point of return from a shell function, most options
(including this one) which were in force upon entry to the
function are restored; options that are not restored are
<b>PRIVILEGED</b> and <b>RESTRICTED</b>. Otherwise, only
this option and the <b>XTRACE</b> and
<b>PRINT_EXIT_VALUE</b> options are restored. Hence if this
is explicitly unset by a shell function the other options in
force at the point of return will remain so. A shell
function can also guarantee itself a known shell
configuration with a formulation like &lsquo;<b>emulate
&minus;L zsh</b>&rsquo;; the <b>&minus;L</b> activates
<b>LOCAL_OPTIONS</b>.</p>

<p style="margin-left:11%;"><b>LOCAL_TRAPS</b>
&lt;K&gt;</p>

<p style="margin-left:22%;">If this option is set when a
signal trap is set inside a function, then the previous
status of the trap for that signal will be restored when the
function exits. Note that this option must be set
<i>prior</i> to altering the trap behaviour in a function;
unlike <b>LOCAL_OPTIONS</b>, the value on exit from the
function is irrelevant. However, it does not need to be set
before any global trap for that to be correctly restored by
a function. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>unsetopt
localtraps <br>
trap &minus; INT <br>
fn() { setopt localtraps; trap &rsquo;&rsquo; INT; sleep 3;
}</b></p>

<p style="margin-left:22%; margin-top: 1em">will restore
normal handling of <b>SIGINT</b> after the function
exits.</p>

<p style="margin-left:11%;"><b>MULTI_FUNC_DEF</b>
&lt;Z&gt;</p>

<p style="margin-left:22%;">Allow definitions of multiple
functions at once in the form &lsquo;<b>fn1
fn2</b><i>...</i><b>()</b>&rsquo;; if the option is not set,
this causes a parse error. Definition of multiple functions
with the <b>function</b> keyword is always allowed. Multiple
function definitions are not often used and can cause
obscure errors.</p>

<p style="margin-left:11%;"><b>MULTIOS</b> &lt;Z&gt;</p>

<p style="margin-left:22%;">Perform implicit <b>tee</b>s or
<b>cat</b>s when multiple redirections are attempted (see
the section &lsquo;Redirection&rsquo;).</p>

<p style="margin-left:11%;"><b>OCTAL_ZEROES</b>
&lt;S&gt;</p>

<p style="margin-left:22%;">Interpret any integer constant
beginning with a 0 as octal, per IEEE Std 1003.2&minus;1992
(ISO 9945&minus;2:1993). This is not enabled by default as
it causes problems with parsing of, for example, date and
time strings with leading zeroes.</p>

<p style="margin-left:22%; margin-top: 1em">Sequences of
digits indicating a numeric base such as the
&lsquo;<b>08</b>&rsquo; component in
&lsquo;<b>08#77</b>&rsquo; are always interpreted as
decimal, regardless of leading zeroes.</p>

<p style="margin-left:11%;"><b>SOURCE_TRACE</b></p>

<p style="margin-left:22%;">If set, zsh will print an
informational message announcing the name of each file it
loads. The format of the output is similar to that for the
<b>XTRACE</b> option, with the message
<b>&lt;sourcetrace&gt;</b>. A file may be loaded by the
shell itself when it starts up and shuts down
(<b>Startup/Shutdown Files</b>) or by the use of the
&lsquo;<b>source</b>&rsquo; and &lsquo;<b>dot</b>&rsquo;
builtin commands.</p>

<p style="margin-left:11%;"><b>TYPESET_SILENT</b></p>

<p style="margin-left:22%;">If this is unset, executing any
of the &lsquo;<b>typeset</b>&rsquo; family of commands with
no options and a list of parameters that have no values to
be assigned but already exist will display the value of the
parameter. If the option is set, they will only be shown
when parameters are selected with the
&lsquo;<b>&minus;m</b>&rsquo; option. The option
&lsquo;<b>&minus;p</b>&rsquo; is available whether or not
the option is set.</p>

<p style="margin-left:11%;"><b>VERBOSE</b>
(<b>&minus;v</b>, ksh: <b>&minus;v</b>)</p>

<p style="margin-left:22%;">Print shell input lines as they
are read.</p>

<p style="margin-left:11%;"><b>XTRACE</b> (<b>&minus;x</b>,
ksh: <b>&minus;x</b>)</p>

<p style="margin-left:22%;">Print commands and their
arguments as they are executed. The output is proceded by
the value of <b>$PS4</b>, formatted as described in the
section EXPANSION OF PROMPT SEQUENCES in
<i>zshmisc</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Shell
Emulation <br>
BASH_REMATCH</b></p>

<p style="margin-left:22%;">When set, matches performed
with the <b>=~</b> operator will set the <b>BASH_REMATCH</b>
array variable, instead of the default <b>MATCH</b> and
<b>match</b> variables. The first element of the
<b>BASH_REMATCH</b> array will contain the entire matched
text and subsequent elements will contain extracted
substrings. This option makes more sense when
<b>KSH_ARRAYS</b> is also set, so that the entire matched
portion is stored at index 0 and the first substring is at
index 1. Without this option, the <b>MATCH</b> variable
contains the entire matched text and the <b>match</b> array
variable contains substrings.</p>

<p style="margin-left:11%;"><b>BSD_ECHO</b> &lt;S&gt;</p>

<p style="margin-left:22%;">Make the <b>echo</b> builtin
compatible with the BSD <i>echo</i>(1) command. This
disables backslashed escape sequences in echo strings unless
the <b>&minus;e</b> option is specified.</p>

<p style="margin-left:11%;"><b>CONTINUE_ON_ERROR</b></p>

<p style="margin-left:22%;">If a fatal error is encountered
(see the section ERRORS in <i>zshmisc</i>(1)), and the code
is running in a script, the shell will resume execution at
the next statement in the script at the top level, in other
words outside all functions or shell constructs such as
loops and conditions. This mimics the behaviour of
interactive shells, where the shell returns to the line
editor to read a new command; it was the normal behaviour in
versions of zsh before 5.0.1.</p>

<p style="margin-left:11%;"><b>CSH_JUNKIE_HISTORY</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">A history reference without an
event specifier will always refer to the previous command.
Without this option, such a history reference refers to the
same event as the previous history reference, defaulting to
the previous command.</p>

<p style="margin-left:11%;"><b>CSH_JUNKIE_LOOPS</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">Allow loop bodies to take the
form &lsquo;<i>list</i>; <b>end</b>&rsquo; instead of
&lsquo;<b>do</b> <i>list</i>; <b>done</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>CSH_JUNKIE_QUOTES</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">Changes the rules for
single&minus; and double&minus;quoted text to match that of
<b>csh</b>. These require that embedded newlines be preceded
by a backslash; unescaped newlines will cause an error
message. In double&minus;quoted strings, it is made
impossible to escape &lsquo;<b>$</b>&rsquo;,
&lsquo;<b>&lsquo;</b>&rsquo; or &lsquo;<b>&quot;</b>&rsquo;
(and &lsquo;<b>\</b>&rsquo; itself no longer needs
escaping). Command substitutions are only expanded once, and
cannot be nested.</p>

<p style="margin-left:11%;"><b>CSH_NULLCMD</b>
&lt;C&gt;</p>

<p style="margin-left:22%;">Do not use the values of
<b>NULLCMD</b> and <b>READNULLCMD</b> when running
redirections with no command. This make such redirections
fail (see the section &lsquo;Redirection&rsquo;).</p>

<p style="margin-left:11%;"><b>KSH_ARRAYS</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">Emulate <b>ksh</b> array
handling as closely as possible. If this option is set,
array elements are numbered from zero, an array parameter
without subscript refers to the first element instead of the
whole array, and braces are required to delimit a subscript
(&lsquo;<b>${path[2]}</b>&rsquo; rather than just
&lsquo;<b>$path[2]</b>&rsquo;).</p>

<p style="margin-left:11%;"><b>KSH_AUTOLOAD</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">Emulate <b>ksh</b> function
autoloading. This means that when a function is autoloaded,
the corresponding file is merely executed, and must define
the function itself. (By default, the function is defined to
the contents of the file. However, the most common
<b>ksh</b>&minus;style case &minus; of the file containing
only a simple definition of the function &minus; is always
handled in the <b>ksh</b>&minus;compatible manner.)</p>

<p style="margin-left:11%;"><b>KSH_OPTION_PRINT</b>
&lt;K&gt;</p>

<p style="margin-left:22%;">Alters the way options settings
are printed: instead of separate lists of set and unset
options, all options are shown, marked &lsquo;on&rsquo; if
they are in the non&minus;default state, &lsquo;off&rsquo;
otherwise.</p>

<p style="margin-left:11%;"><b>KSH_TYPESET</b>
&lt;K&gt;</p>

<p style="margin-left:22%;">Alters the way arguments to the
<b>typeset</b> family of commands, including <b>declare</b>,
<b>export</b>, <b>float</b>, <b>integer</b>, <b>local</b>
and <b>readonly</b>, are processed. Without this option, zsh
will perform normal word splitting after command and
parameter expansion in arguments of an assignment; with it,
word splitting does not take place in those cases.</p>

<p style="margin-left:11%;"><b>KSH_ZERO_SUBSCRIPT</b></p>

<p style="margin-left:22%;">Treat use of a subscript of
value zero in array or string expressions as a reference to
the first element, i.e. the element that usually has the
subscript 1. Ignored if <b>KSH_ARRAYS</b> is also set.</p>

<p style="margin-left:22%; margin-top: 1em">If neither this
option nor <b>KSH_ARRAYS</b> is set, accesses to an element
of an array or string with subscript zero return an empty
element or string, while attempts to set element zero of an
array or string are treated as an error. However, attempts
to set an otherwise valid subscript range that includes zero
will succeed. For example, if <b>KSH_ZERO_SUBSCRIPT</b> is
not set,</p>


<p style="margin-left:32%; margin-top: 1em"><b>array[0]=(element)</b></p>

<p style="margin-left:22%; margin-top: 1em">is an error,
while</p>


<p style="margin-left:32%; margin-top: 1em"><b>array[0,1]=(element)</b></p>

<p style="margin-left:22%; margin-top: 1em">is not and will
replace the first element of the array.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
for compatibility with older versions of the shell and is
not recommended in new code.</p>

<p style="margin-left:11%;"><b>POSIX_ALIASES</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">When this option is set,
reserved words are not candidates for alias expansion: it is
still possible to declare any of them as an alias, but the
alias will never be expanded. Reserved words are described
in the section RESERVED WORDS in <i>zshmisc</i>(1).</p>

<p style="margin-left:22%; margin-top: 1em">Alias expansion
takes place while text is being read; hence when this option
is set it does not take effect until the end of any function
or other piece of shell code parsed as one unit. Note this
may cause differences from other shells even when the option
is in effect. For example, when running a command with
&lsquo;<b>zsh &minus;c</b>&rsquo;, or even &lsquo;<b>zsh
&minus;o posixaliases &minus;c</b>&rsquo;, the entire
command argument is parsed as one unit, so aliases defined
within the argument are not available even in later lines.
If in doubt, avoid use of aliases in non&minus;interactive
code.</p>

<p style="margin-left:11%;"><b>POSIX_BUILTINS</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">When this option is set the
<b>command</b> builtin can be used to execute shell builtin
commands. Parameter assignments specified before shell
functions and special builtins are kept after the command
completes unless the special builtin is prefixed with the
<b>command</b> builtin. Special builtins are <b>.</b>,
<b>:</b>, <b>break</b>, <b>continue</b>, <b>declare</b>,
<b>eval</b>, <b>exit</b>, <b>export</b>, <b>integer</b>,
<b>local</b>, <b>readonly</b>, <b>return</b>, <b>set</b>,
<b>shift</b>, <b>source</b>, <b>times</b>, <b>trap</b> and
<b>unset</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In addition,
various error conditions associated with the above builtins
or <b>exec</b> cause a non&minus;interactive shell to exit
and an interactive shell to return to its top&minus;level
processing.</p>

<p style="margin-left:11%;"><b>POSIX_IDENTIFIERS</b>
&lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">When this option is set, only
the ASCII characters <b>a</b> to <b>z</b>, <b>A</b> to
<b>Z</b>, <b>0</b> to <b>9</b> and <b>_</b> may be used in
identifiers (names of shell parameters and modules).</p>

<p style="margin-left:22%; margin-top: 1em">When the option
is unset and multibyte character support is enabled (i.e. it
is compiled in and the option <b>MULTIBYTE</b> is set), then
additionally any alphanumeric characters in the local
character set may be used in identifiers. Note that scripts
and functions written with this feature are not portable,
and also that both options must be set before the script or
function is parsed; setting them during execution is not
sufficient as the syntax <i>variable</i><b>=</b><i>value</i>
has already been parsed as a command rather than an
assignment.</p>

<p style="margin-left:22%; margin-top: 1em">If multibyte
character support is not compiled into the shell this option
is ignored; all octets with the top bit set may be used in
identifiers. This is non&minus;standard but is the
traditional zsh behaviour.</p>

<p style="margin-left:11%;"><b>POSIX_STRINGS</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">This option affects processing
of quoted strings. Currently it only affects the behaviour
of null characters, i.e. character 0 in the portable
character set corresponding to US ASCII.</p>

<p style="margin-left:22%; margin-top: 1em">When this
option is not set, null characters embedded within strings
of the form <b>$&rsquo;</b><i>...</i><b>&rsquo;</b> are
treated as ordinary characters. The entire string is
maintained within the shell and output to files where
necessary, although owing to restrictions of the library
interface the string is truncated at the null character in
file names, environment variables, or in arguments to
external programs.</p>

<p style="margin-left:22%; margin-top: 1em">When this
option is set, the <b>$&rsquo;</b><i>...</i><b>&rsquo;</b>
expression is truncated at the null character. Note that
remaining parts of the same string beyond the termination of
the quotes are not trunctated.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the command line argument <b>a$&rsquo;b\0c&rsquo;d</b> is
treated with the option off as the characters <b>a</b>,
<b>b</b>, null, <b>c</b>, <b>d</b>, and with the option on
as the characters <b>a</b>, <b>b</b>, <b>d</b>.</p>

<p style="margin-left:11%;"><b>POSIX_TRAPS</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">When the is option is set, the
usual zsh behaviour of executing traps for <b>EXIT</b> on
exit from shell functions is suppressed. In that case,
manipulating <b>EXIT</b> traps always alters the global trap
for exiting the shell; the <b>LOCAL_TRAPS</b> option is
ignored for the <b>EXIT</b> trap.</p>

<p style="margin-left:11%;"><b>SH_FILE_EXPANSION</b>
&lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">Perform filename expansion
(e.g., ~ expansion) <i>before</i> parameter expansion,
command substitution, arithmetic expansion and brace
expansion. If this option is unset, it is performed
<i>after</i> brace expansion, so things like
&lsquo;<b>~$USERNAME</b>&rsquo; and
&lsquo;<b>~{pfalstad,rc}</b>&rsquo; will work.</p>

<p style="margin-left:11%;"><b>SH_NULLCMD</b> &lt;K&gt;
&lt;S&gt;</p>

<p style="margin-left:22%;">Do not use the values of
<b>NULLCMD</b> and <b>READNULLCMD</b> when doing
redirections, use &lsquo;<b>:</b>&rsquo; instead (see the
section &lsquo;Redirection&rsquo;).</p>

<p style="margin-left:11%;"><b>SH_OPTION_LETTERS</b>
&lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">If this option is set the shell
tries to interpret single letter options (which are used
with <b>set</b> and <b>setopt</b>) like <b>ksh</b> does.
This also affects the value of the <b>&minus;</b> special
parameter.</p>

<p style="margin-left:11%;"><b>SH_WORD_SPLIT</b>
(<b>&minus;y</b>) &lt;K&gt; &lt;S&gt;</p>

<p style="margin-left:22%;">Causes field splitting to be
performed on unquoted parameter expansions. Note that this
option has nothing to do with word splitting. (See the
section &lsquo;Parameter Expansion&rsquo;.)</p>

<p style="margin-left:11%;"><b>TRAPS_ASYNC</b></p>

<p style="margin-left:22%;">While waiting for a program to
exit, handle signals and run traps immediately. Otherwise
the trap is run after a child process has exited. Note this
does not affect the point at which traps are run for any
case other than when the shell is waiting for a child
process.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Shell State
<br>
INTERACTIVE</b> (<b>&minus;i</b>, ksh: <b>&minus;i</b>)</p>

<p style="margin-left:22%;">This is an interactive shell.
This option is set upon initialisation if the standard input
is a tty and commands are being read from standard input.
(See the discussion of <b>SHIN_STDIN</b>.) This heuristic
may be overridden by specifying a state for this option on
the command line. The value of this option can only be
changed via flags supplied at invocation of the shell. It
cannot be changed once zsh is running.</p>

<p style="margin-left:11%;"><b>LOGIN</b> (<b>&minus;l</b>,
ksh: <b>&minus;l</b>)</p>

<p style="margin-left:22%;">This is a login shell. If this
option is not explicitly set, the shell becomes a login
shell if the first character of the <b>argv[0]</b> passed to
the shell is a &lsquo;<b>&minus;</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>PRIVILEGED</b>
(<b>&minus;p</b>, ksh: <b>&minus;p</b>)</p>

<p style="margin-left:22%;">Turn on privileged mode. This
is enabled automatically on startup if the effective user
(group) ID is not equal to the real user (group) ID. Turning
this option off causes the effective user and group IDs to
be set to the real user and group IDs. This option disables
sourcing user startup files. If zsh is invoked as
&lsquo;<b>sh</b>&rsquo; or &lsquo;<b>ksh</b>&rsquo; with
this option set, <b>/etc/suid_profile</b> is sourced (after
<b>/etc/profile</b> on interactive shells). Sourcing
<b>~/.profile</b> is disabled and the contents of the
<b>ENV</b> variable is ignored. This option cannot be
changed using the <b>&minus;m</b> option of <b>setopt</b>
and <b>unsetopt</b>, and changing it inside a function
always changes it globally regardless of the
<b>LOCAL_OPTIONS</b> option.</p>

<p style="margin-left:11%;"><b>RESTRICTED</b>
(<b>&minus;r</b>)</p>

<p style="margin-left:22%;">Enables restricted mode. This
option cannot be changed using <b>unsetopt</b>, and setting
it inside a function always changes it globally regardless
of the <b>LOCAL_OPTIONS</b> option. See the section
&lsquo;Restricted Shell&rsquo;.</p>

<p style="margin-left:11%;"><b>SHIN_STDIN</b>
(<b>&minus;s</b>, ksh: <b>&minus;s</b>)</p>

<p style="margin-left:22%;">Commands are being read from
the standard input. Commands are read from standard input if
no command is specified with <b>&minus;c</b> and no file of
commands is specified. If <b>SHIN_STDIN</b> is set
explicitly on the command line, any argument that would
otherwise have been taken as a file to run will instead be
treated as a normal positional parameter. Note that setting
or unsetting this option on the command line does not
necessarily affect the state the option will have while the
shell is running &minus; that is purely an indicator of
whether on not commands are <i>actually</i> being read from
standard input. The value of this option can only be changed
via flags supplied at invocation of the shell. It cannot be
changed once zsh is running.</p>

<p style="margin-left:11%;"><b>SINGLE_COMMAND</b>
(<b>&minus;t</b>, ksh: <b>&minus;t</b>)</p>

<p style="margin-left:22%;">If the shell is reading from
standard input, it exits after a single command has been
executed. This also makes the shell non&minus;interactive,
unless the <b>INTERACTIVE</b> option is explicitly set on
the command line. The value of this option can only be
changed via flags supplied at invocation of the shell. It
cannot be changed once zsh is running.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Zle <br>
BEEP</b> (<b>+B</b>) &lt;D&gt;</p>

<p style="margin-left:22%;">Beep on error in ZLE.</p>

<p style="margin-left:11%;"><b>COMBINING_CHARS</b></p>

<p style="margin-left:22%;">Assume that the terminal
displays combining characters correctly. Specifically, if a
base alphanumeric character is followed by one or more
zero&minus;width punctuation characters, assume that the
zero&minus;width characters will be displayed as
modifications to the base character within the same width.
Not all terminals handle this. If this option is not set,
zero&minus;width characters are displayed separately with
special mark&minus;up.</p>

<p style="margin-left:22%; margin-top: 1em">If this option
is set, the pattern test <b>[[:WORD:]]</b> matches a
zero&minus;width punctuation character on the assumption
that it will be used as part of a word in combination with a
word character. Otherwise the base shell does not handle
combining characters specially.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>EMACS</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>If ZLE is loaded, turning on this option has the
equivalent effect of &lsquo;<b>bindkey &minus;e</b>&rsquo;.
In addition, the VI option is unset. Turning it off has no
effect. The option setting is not guaranteed to reflect the
current keymap. This option is provided for compatibility;
<b>bindkey</b> is the recommended interface.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>OVERSTRIKE</b></p>

<p style="margin-left:22%;">Start up the line editor in
overstrike mode.</p>

<p style="margin-left:11%;"><b>SINGLE_LINE_ZLE</b>
(<b>&minus;M</b>) &lt;K&gt;</p>

<p style="margin-left:22%;">Use single&minus;line command
line editing instead of multi&minus;line.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
although this is on by default in ksh emulation it only
provides superficial compatibility with the ksh line editor
and reduces the effectiveness of the zsh line editor. As it
has no effect on shell syntax, many users may wish to
disable this option when using ksh emulation
interactively.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>VI</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If ZLE is loaded, turning on this option has the
equivalent effect of &lsquo;<b>bindkey &minus;v</b>&rsquo;.
In addition, the EMACS option is unset. Turning it off has
no effect. The option setting is not guaranteed to reflect
the current keymap. This option is provided for
compatibility; <b>bindkey</b> is the recommended
interface.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>ZLE</b>
(<b>&minus;Z</b>)</p>

<p style="margin-left:22%;">Use the zsh line editor. Set by
default in interactive shells connected to a terminal.</p>

<h2>OPTION ALIASES
<a name="OPTION ALIASES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Some options
have alternative names. These aliases are never used for
output, but can be used just like normal option names when
specifying options to the shell. <b><br>
BRACE_EXPAND</b></p>

<p style="margin-left:22%;"><i>NO_</i><b>IGNORE_BRACES</b>
(ksh and bash compatibility)</p>

<p style="margin-left:11%;"><b>DOT_GLOB</b></p>

<p style="margin-left:22%;"><b>GLOB_DOTS</b> (bash
compatibility)</p>

<p style="margin-left:11%;"><b>HASH_ALL</b></p>

<p style="margin-left:22%;"><b>HASH_CMDS</b> (bash
compatibility)</p>

<p style="margin-left:11%;"><b>HIST_APPEND</b></p>

<p style="margin-left:22%;"><b>APPEND_HISTORY</b> (bash
compatibility)</p>

<p style="margin-left:11%;"><b>HIST_EXPAND</b></p>

<p style="margin-left:22%;"><b>BANG_HIST</b> (bash
compatibility)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>LOG</b></p></td>
<td width="7%"></td>
<td width="61%">


<p><i>NO_</i><b>HIST_NO_FUNCTIONS</b> (ksh
compatibility)</p> </td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>MAIL_WARN</b></p>

<p style="margin-left:22%;"><b>MAIL_WARNING</b> (bash
compatibility)</p>

<p style="margin-left:11%;"><b>ONE_CMD</b></p>

<p style="margin-left:22%;"><b>SINGLE_COMMAND</b> (bash
compatibility)</p>

<p style="margin-left:11%;"><b>PHYSICAL</b></p>

<p style="margin-left:22%;"><b>CHASE_LINKS</b> (ksh and
bash compatibility)</p>

<p style="margin-left:11%;"><b>PROMPT_VARS</b></p>

<p style="margin-left:22%;"><b>PROMPT_SUBST</b> (bash
compatibility)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>STDIN</b></p></td>
<td width="4%"></td>
<td width="46%">


<p><b>SHIN_STDIN</b> (ksh compatibility)</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>TRACK_ALL</b></p>

<p style="margin-left:22%;"><b>HASH_CMDS</b> (ksh
compatibility)</p>

<h2>SINGLE LETTER OPTIONS
<a name="SINGLE LETTER OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Default
set</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;0</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>CORRECT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;1</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>PRINT_EXIT_VALUE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;2</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>BAD_PATTERN</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;3</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>NOMATCH</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;4</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>GLOB_DOTS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;5</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>NOTIFY</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;6</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>BG_NICE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;7</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>IGNORE_EOF</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;8</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>MARK_DIRS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;9</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>AUTO_LIST</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;B</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>BEEP</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>CLOBBER</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>PUSHD_TO_HOME</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>PUSHD_SILENT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>GLOB</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;G</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>NULL_GLOB</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;H</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>RM_STAR_SILENT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;I</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>IGNORE_BRACES</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;J</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>AUTO_CD</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;K</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>BANG_HIST</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;L</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>SUN_KEYBOARD_HACK</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>SINGLE_LINE_ZLE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>AUTO_PUSHD</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;O</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>CORRECT_ALL</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;P</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>RC_EXPAND_PARAM</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;Q</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>PATH_DIRS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;R</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>LONG_LIST_JOBS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;S</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>REC_EXACT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;T</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>CDABLE_VARS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;U</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>MAIL_WARNING</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>PROMPT_CR</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;W</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>AUTO_RESUME</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;X</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>LIST_TYPES</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;Y</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>MENU_COMPLETE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;Z</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>ZLE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>ALL_EXPORT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>ERR_EXIT</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>RCS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;g</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>HIST_IGNORE_SPACE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>HIST_IGNORE_DUPS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>INTERACTIVE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;k</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>INTERACTIVE_COMMENTS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>LOGIN</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>MONITOR</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>EXEC</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>PRIVILEGED</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>RESTRICTED</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>SHIN_STDIN</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>SINGLE_COMMAND</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="30%">


<p><i>NO_</i>UNSET</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>VERBOSE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>CHASE_LINKS</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>XTRACE</p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;y</b></p></td>
<td width="8%"></td>
<td width="30%">


<p>SH_WORD_SPLIT</p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>sh/ksh
emulation set</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;C</b></p></td>
<td width="8%"></td>
<td width="21%">


<p style="margin-top: 1em"><i>NO_</i>CLOBBER</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;T</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>TRAPS_ASYNC</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;X</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>MARK_DIRS</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>ALL_EXPORT</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>NOTIFY</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>ERR_EXIT</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="8%"></td>
<td width="21%">


<p><i>NO_</i>GLOB</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>INTERACTIVE</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>LOGIN</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>MONITOR</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="8%"></td>
<td width="21%">


<p><i>NO_</i>EXEC</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>PRIVILEGED</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>RESTRICTED</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>SHIN_STDIN</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>SINGLE_COMMAND</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="21%">


<p><i>NO_</i>UNSET</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>VERBOSE</p></td>
<td width="57%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="8%"></td>
<td width="21%">


<p>XTRACE</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Also
note</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;A</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Used by <b>set</b> for setting
arrays</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Used on the command line to specify end of option
processing</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Used on the command line to specify a single command</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Used by <b>setopt</b> for pattern&minus;matching option
setting</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Used in all places to allow use of long option names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Used by <b>set</b> to sort positional parameters</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshbuiltins &minus; zsh
built&minus;in commands</p>

<h2>SHELL BUILTIN COMMANDS
<a name="SHELL BUILTIN COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;</b>
<i>simple command</i></p>

<p style="margin-left:22%;">See the section
&lsquo;Precommand Modifiers&rsquo;.</p>

<p style="margin-left:11%;"><b>.</b> <i>file</i> [
<i>arg</i> ... ]</p>

<p style="margin-left:22%;">Read commands from <i>file</i>
and execute them in the current shell environment.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>file</i>
does not contain a slash, or if <b>PATH_DIRS</b> is set, the
shell looks in the components of <b>$path</b> to find the
directory containing <i>file</i>. Files in the current
directory are not read unless &lsquo;<b>.</b>&rsquo; appears
somewhere in <b>$path</b>. If a file named
&lsquo;<i>file</i><b>.zwc</b>&rsquo; is found, is newer than
<i>file</i>, and is the compiled form (created with the
<b>zcompile</b> builtin) of <i>file</i>, then commands are
read from that file instead of <i>file</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If any
arguments <i>arg</i> are given, they become the positional
parameters; the old positional parameters are restored when
the <i>file</i> is done executing. If <i>file</i> was not
found the return status is 127; if <i>file</i> was found but
contained a syntax error the return status is 126; else the
return status is the exit status of the last command
executed.</p>

<p style="margin-left:11%;"><b>:</b> [ <i>arg</i> ... ]</p>

<p style="margin-left:22%;">This command does nothing,
although normal argument expansions is performed which may
have effects on shell parameters. A zero exit status is
returned.</p>

<p style="margin-left:11%;"><b>alias</b> [
{<b>+|&minus;}gmrsL ] [</b>
<i>name</i><b>[=</b><i>value</i><b>] ... ]</b></p>

<p style="margin-left:22%;">For each <i>name</i> with a
corresponding <i>value</i>, define an alias with that value.
A trailing space in <i>value</i> causes the next word to be
checked for alias expansion. If the <b>&minus;g</b> flag is
present, define a global alias; global aliases are expanded
even if they do not occur in command position.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;s</b> flags is present, define a suffix alias: if
the command word on a command line is in the form
&lsquo;<i>text</i><b>.</b><i>name</i>&rsquo;, where
<i>text</i> is any non&minus;empty string, it is replaced by
the text &lsquo;<i>value text</i><b>.</b><i>name</i>&rsquo;.
Note that <i>name</i> is treated as a literal string, not a
pattern. A trailing space in <i>value</i> is not special in
this case. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>alias
&minus;s ps=gv</b></p>

<p style="margin-left:22%; margin-top: 1em">will cause the
command &lsquo;<b>*.ps</b>&rsquo; to be expanded to
&lsquo;<b>gv *.ps</b>&rsquo;. As alias expansion is carried
out earlier than globbing, the &lsquo;<b>*.ps</b>&rsquo;
will then be expanded. Suffix aliases constitute a different
name space from other aliases (so in the above example it is
still possible to create an alias for the command <b>ps</b>)
and the two sets are never listed together.</p>

<p style="margin-left:22%; margin-top: 1em">For each
<i>name</i> with no <i>value</i>, print the value of
<i>name</i>, if any. With no arguments, print all currently
defined aliases other than suffix aliases. If the
<b>&minus;m</b> flag is given the arguments are taken as
patterns (they should be quoted to preserve them from being
interpreted as glob patterns), and the aliases matching
these patterns are printed. When printing aliases and one of
the <b>&minus;g</b>, <b>&minus;r</b> or <b>&minus;s</b>
flags is present, restrict the printing to global, regular
or suffix aliases, respectively; a regular alias is one
which is neither a global nor a suffix alias. Using
&lsquo;<b>+</b>&rsquo; instead of
&lsquo;<b>&minus;</b>&rsquo;, or ending the option list with
a single &lsquo;<b>+</b>&rsquo;, prevents the values of the
aliases from being printed.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;L</b> flag is present, then print each alias in a
manner suitable for putting in a startup script. The exit
status is nonzero if a <i>name</i> (with no <i>value</i>) is
given for which no alias has been defined.</p>

<p style="margin-left:22%; margin-top: 1em">For more on
aliases, include common problems, see the section ALIASING
in <i>zshmisc</i>(1).</p>

<p style="margin-left:11%;"><b>autoload</b> [
{<b>+</b>|<b>&minus;</b>}<b>UXkmtz</b> ] [ <b>&minus;w</b> ]
[ <i>name</i> ... ]</p>

<p style="margin-left:22%;">Equivalent to <b>functions
&minus;u</b>, with the exception of
<b>&minus;X</b>/<b>+X</b> and <b>&minus;w</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The flag
<b>&minus;X</b> may be used only inside a shell function,
and may not be followed by a <i>name</i>. It causes the
calling function to be marked for autoloading and then
immediately loaded and executed, with the current array of
positional parameters as arguments. This replaces the
previous definition of the function. If no function
definition is found, an error is printed and the function
remains undefined and marked for autoloading.</p>

<p style="margin-left:22%; margin-top: 1em">The flag
<b>+X</b> attempts to load each <i>name</i> as an autoloaded
function, but does <i>not</i> execute it. The exit status is
zero (success) if the function was not previously defined
<i>and</i> a definition for it was found. This does
<i>not</i> replace any existing definition of the function.
The exit status is nonzero (failure) if the function was
already defined or when no definition was found. In the
latter case the function remains undefined and marked for
autoloading. If ksh&minus;style autoloading is enabled, the
function created will contain the contents of the file plus
a call to the function itself appended to it, thus giving
normal ksh autoloading behaviour on the first call to the
function. If the <b>&minus;m</b> flag is also given each
<i>name</i> is treated as a pattern and all functions
already marked for autoload that match the pattern are
loaded.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;w</b> flag, the <i>name</i>s are taken as names of
files compiled with the <b>zcompile</b> builtin, and all
functions defined in them are marked for autoloading.</p>

<p style="margin-left:22%; margin-top: 1em">The flags
<b>&minus;z</b> and <b>&minus;k</b> mark the function to be
autoloaded using the zsh or ksh style, as if the option
<b>KSH_AUTOLOAD</b> were unset or were set, respectively.
The flags override the setting of the option at the time the
function is loaded.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<b>autoload</b> command makes no attempt to ensure the shell
options set during the loading or execution of the file have
any particular value. For this, the <b>emulate</b> command
can be used:</p>

<p style="margin-left:32%; margin-top: 1em"><b>emulate zsh
&minus;c &rsquo;autoload &minus;Uz</b>
<i>func</i><b>&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">arranges that
when <i>func</i> is loaded the shell is in native <b>zsh</b>
emulation, and this emulation is also applied when
<i>func</i> is run.</p>

<p style="margin-left:11%;"><b>bg</b> [ <i>job</i> ... ]
<i><br>
job</i> ... <b>&amp;</b></p>

<p style="margin-left:22%;">Put each specified <i>job</i>
in the background, or the current job if none is
specified.</p>

<p style="margin-left:11%;"><b>bindkey</b></p>

<p style="margin-left:22%;">See the section &lsquo;Zle
Builtins&rsquo; in <i>zshzle</i>(1).</p>

<p style="margin-left:11%;"><b>break</b> [ <i>n</i> ]</p>

<p style="margin-left:22%;">Exit from an enclosing
<b>for</b>, <b>while</b>, <b>until</b>, <b>select</b> or
<b>repeat</b> loop. If <i>n</i> is specified, then break
<i>n</i> levels instead of just one.</p>

<p style="margin-left:11%;"><b>builtin</b> <i>name</i> [
<i>args</i> ... ]</p>

<p style="margin-left:22%;">Executes the builtin
<i>name</i>, with the given <i>args</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>bye</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>Same as <b>exit</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>cap</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/cap Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>cd</b> [ <b>&minus;qsLP</b>
] [ <i>arg</i> ] <b><br>
cd</b> [ <b>&minus;qsLP</b> ] <i>old new</i> <b><br>
cd</b> [ <b>&minus;qsLP</b> ]
{<b>+</b>|<b>&minus;</b>}<i>n</i></p>

<p style="margin-left:22%;">Change the current directory.
In the first form, change the current directory to
<i>arg</i>, or to the value of <b>$HOME</b> if <i>arg</i> is
not specified. If <i>arg</i> is
&lsquo;<b>&minus;</b>&rsquo;, change to the previous
directory.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise, if
<i>arg</i> begins with a slash, attempt to change to the
directory given by <i>arg</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>arg</i>
does not begin with a slash, the behaviour depends on
whether the current directory &lsquo;<b>.</b>&rsquo; occurs
in the list of directories contained in the shell parameter
<b>cdpath</b>. If it does not, first attempt to change to
the directory <i>arg</i> under the current directory, and if
that fails but <b>cdpath</b> is set and contains at least
one element attempt to change to the directory <i>arg</i>
under each component of <b>cdpath</b> in turn until
successful. If &lsquo;<b>.</b>&rsquo; occurs in
<b>cdpath</b>, then <b>cdpath</b> is searched strictly in
order so that &lsquo;<b>.</b>&rsquo; is only tried at the
appropriate point.</p>

<p style="margin-left:22%; margin-top: 1em">The order of
testing <b>cdpath</b> is modified if the option
<b>POSIX_CD</b> is set, as described in the documentation
for the option.</p>

<p style="margin-left:22%; margin-top: 1em">If no directory
is found, the option <b>CDABLE_VARS</b> is set, and a
parameter named <i>arg</i> exists whose value begins with a
slash, treat its value as the directory. In that case, the
parameter is added to the named directory hash table.</p>

<p style="margin-left:22%; margin-top: 1em">The second form
of <b>cd</b> substitutes the string <i>new</i> for the
string <i>old</i> in the name of the current directory, and
tries to change to this new directory.</p>

<p style="margin-left:22%; margin-top: 1em">The third form
of <b>cd</b> extracts an entry from the directory stack, and
changes to that directory. An argument of the form
&lsquo;<b>+</b><i>n</i>&rsquo; identifies a stack entry by
counting from the left of the list shown by the <b>dirs</b>
command, starting with zero. An argument of the form
&lsquo;<b>&minus;</b><i>n</i>&rsquo; counts from the right.
If the <b>PUSHD_MINUS</b> option is set, the meanings of
&lsquo;<b>+</b>&rsquo; and &lsquo;<b>&minus;</b>&rsquo; in
this context are swapped.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;q</b> (quiet) option is specified, the hook
function <b>chpwd</b> and the functions in the array
<b>chpwd_functions</b> are not called. This is useful for
calls to <b>cd</b> that do not change the environment seen
by an interactive user.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;s</b> option is specified, <b>cd</b> refuses to
change the current directory if the given pathname contains
symlinks. If the <b>&minus;P</b> option is given or the
<b>CHASE_LINKS</b> option is set, symbolic links are
resolved to their true values. If the <b>&minus;L</b> option
is given symbolic links are retained in the directory (and
not resolved) regardless of the state of the
<b>CHASE_LINKS</b> option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>chdir</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Same as <b>cd</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>clone</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/clone Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>command</b> [
<b>&minus;pvV</b> ] <i>simple command</i></p>

<p style="margin-left:22%;">The simple command argument is
taken as an external command instead of a function or
builtin and is executed. If the <b>POSIX_BUILTINS</b> option
is set, builtins will also be executed but certain special
properties of them are suppressed. The <b>&minus;p</b> flag
causes a default path to be searched instead of that in
<b>$path</b>. With the <b>&minus;v</b> flag, <b>command</b>
is similar to <b>whence</b> and with <b>&minus;V</b>, it is
equivalent to <b>whence &minus;v</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
section &lsquo;Precommand Modifiers&rsquo;.</p>

<p style="margin-left:11%;"><b>comparguments</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compcall</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/compctl Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compctl</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/compctl Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compdescribe</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compfiles</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compgroups</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compquote</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>comptags</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>comptry</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>compvalues</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/computil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>continue</b> [ <i>n</i>
]</p>

<p style="margin-left:22%;">Resume the next iteration of
the enclosing <b>for</b>, <b>while</b>, <b>until</b>,
<b>select</b> or <b>repeat</b> loop. If <i>n</i> is
specified, break out of <i>n</i>&minus;1 loops and resume at
the <i>n</i>th enclosing loop.</p>

<p style="margin-left:11%;"><b>declare</b></p>

<p style="margin-left:22%;">Same as <b>typeset</b>.</p>

<p style="margin-left:11%;"><b>dirs</b> [ <b>&minus;c</b> ]
[ <i>arg</i> ... ] <b><br>
dirs</b> [ <b>&minus;lpv</b> ]</p>

<p style="margin-left:22%;">With no arguments, print the
contents of the directory stack. Directories are added to
this stack with the <b>pushd</b> command, and removed with
the <b>cd</b> or <b>popd</b> commands. If arguments are
specified, load them onto the directory stack, replacing
anything that was there, and push the current directory onto
the stack.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>clear the directory stack.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>print directory names in full instead of using of using
<b>~</b> expressions.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>print directory entries one per line.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>number the directories in the stack when printing.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>disable</b> [
<b>&minus;afmrs</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Temporarily disable the
<i>name</i>d hash table elements. The default is to disable
builtin commands. This allows you to use an external command
with the same name as a builtin command. The <b>&minus;a</b>
option causes <b>disable</b> to act on regular or global
aliases. The <b>&minus;s</b> option causes <b>disable</b> to
act on suffix aliases. The <b>&minus;f</b> option causes
<b>disable</b> to act on shell functions. The
<b>&minus;r</b> options causes <b>disable</b> to act on
reserved words. Without arguments all disabled hash table
elements from the corresponding hash table are printed. With
the <b>&minus;m</b> flag the arguments are taken as patterns
(which should be quoted to prevent them from undergoing
filename expansion), and all hash table elements from the
corresponding hash table matching these patterns are
disabled. Disabled objects can be enabled with the
<b>enable</b> command.</p>

<p style="margin-left:11%;"><b>disown</b> [ <i>job</i> ...
] <i><br>
job</i> ... <b>&amp;|</b> <i><br>
job</i> ... <b>&amp;!</b></p>

<p style="margin-left:22%;">Remove the specified
<i>job</i>s from the job table; the shell will no longer
report their status, and will not complain if you try to
exit an interactive shell with them running or stopped. If
no <i>job</i> is specified, disown the current job.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>job</i>s are currently stopped and the
<b>AUTO_CONTINUE</b> option is not set, a warning is printed
containing information about how to make them running after
they have been disowned. If one of the latter two forms is
used, the <i>job</i>s will automatically be made running,
independent of the setting of the <b>AUTO_CONTINUE</b>
option.</p>

<p style="margin-left:11%;"><b>echo</b> [ <b>&minus;neE</b>
] [ <i>arg</i> ... ]</p>

<p style="margin-left:22%;">Write each <i>arg</i> on the
standard output, with a space separating each one. If the
<b>&minus;n</b> flag is not present, print a newline at the
end. <b>echo</b> recognizes the following escape
sequences:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\a</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>bell character</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\b</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>backspace</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\c</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>suppress final newline</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\e</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>escape</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\f</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>form feed</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\n</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>linefeed (newline)</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\r</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>carriage return</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\t</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>horizontal tab</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\v</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>vertical tab</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\\</b></p></td>
<td width="1%"></td>
<td width="57%">


<p>backslash</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\0</b><i>NNN</i></p></td>
<td width="1%"></td>
<td width="57%">


<p>character code in octal</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\x</b><i>NN</i></p></td>
<td width="1%"></td>
<td width="57%">


<p>character code in hexadecimal</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>\u</b><i>NNNN</i></p></td>
<td width="1%"></td>
<td width="57%">


<p>unicode character code in hexadecimal</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>\U</b><i>NNNNNNNN</i></p>

<p style="margin-left:32%;">unicode character code in
hexadecimal</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;E</b> flag, or the <b>BSD_ECHO</b> option, can be
used to disable these escape sequences. In the latter case,
<b>&minus;e</b> flag can be used to enable them.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>echotc</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/termcap Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>echoti</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/terminfo Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>emulate</b> [
<b>&minus;LR</b> ] [
{<b>zsh</b>|<b>sh</b>|<b>ksh</b>|<b>csh</b>} [ <i>flags</i>
... ] ]</p>

<p style="margin-left:22%;">Without any argument print
current emulation mode.</p>

<p style="margin-left:22%; margin-top: 1em">With single
argument set up zsh options to emulate the specified shell
as much as possible. <b>csh</b> will never be fully
emulated. If the argument is not one of the shells listed
above, <b>zsh</b> will be used as a default; more precisely,
the tests performed on the argument are the same as those
used to determine the emulation at startup based on the
shell name, see the section COMPATIBILITY in <i>zsh</i>(1)
.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>emulate</b> command occurs inside a function that has
been marked for execution tracing with <b>functions
&minus;t</b> then the <b>xtrace</b> option will be turned on
regardless of emulation mode or other options. Note that
code executed inside the function by the <b>.</b>,
<b>source</b>, or <b>eval</b> commands is not considered to
be running directly from the function, hence does not
provoke this behaviour.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;R</b> switch is given, all settable options are
reset to their default value corresponding to the specified
emulation mode, except for certain options describing the
interactive environment; otherwise, only those options
likely to cause portability problems in scripts and
functions are altered. If the <b>&minus;L</b> switch is
given, the options <b>LOCAL_OPTIONS</b> and
<b>LOCAL_TRAPS</b> will be set as well, causing the effects
of the <b>emulate</b> command and any <b>setopt</b> and
<b>trap</b> commands to be local to the immediately
surrounding shell function, if any; normally these options
are turned off in all emulation modes except <b>ksh</b>. The
<b>&minus;L</b> switch is mutually exclusive with the use of
<b>&minus;c</b> in <i>flags</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>flags</i> may be any of the invocation&minus;time flags
described in the section INVOCATION in <i>zsh</i>(1), except
that &lsquo;<b>&minus;o EMACS</b>&rsquo; and
&lsquo;<b>&minus;o VI</b>&rsquo; may not be used. Flags such
as &lsquo;<b>+r</b>&rsquo;/&lsquo;<b>+o
RESTRICTED</b>&rsquo; may be prohibited in some
circumstances.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;c</b> <i>arg</i> appears in <i>flags</i>,
<i>arg</i> is evaluated while the requested emulation is
temporarily in effect. In this case the emulation mode and
all options are restored to their previous values before
<b>emulate</b> returns. The <b>&minus;R</b> switch may
precede the name of the shell to emulate; note this has a
meaning distinct from including <b>&minus;R</b> in
<i>flags</i>.</p>

<p style="margin-left:22%; margin-top: 1em">Use of
<b>&minus;c</b> enables &lsquo;sticky&rsquo; emulation mode
for functions defined within the evaluated expression: the
emulation mode is associated thereafter with the function so
that whenever the function is executed the emulation
(respecting the <b>&minus;R</b> switch, if present) and all
options are set before entry to the function, and restored
after exit. If the function is called when the sticky
emulation is already in effect, either within an
&lsquo;<b>emulate</b> <i>shell</i> <b>&minus;c</b>&rsquo;
expression or within another function with the same sticky
emulation, entry and exit from the function do not cause
options to be altered (except due to standard processing
such as the <b>LOCAL_OPTIONS</b> option). This also applies
to functions marked for autoload within the sticky
emulation; the appropriate set of options will be applied at
the point the function is loaded as well as when it is
run.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>emulate sh
&minus;c &rsquo;fni() { setopt cshnullglob; } <br>
fno() { fni; }&rsquo; <br>
fno</b></p>

<p style="margin-left:22%; margin-top: 1em">The two
functions <b>fni</b> and <b>fno</b> are defined with sticky
<b>sh</b> emulation. <b>fno</b> is then executed, causing
options associated with emulations to be set to their values
in <b>sh</b>. <b>fni</b> then calls <b>fno</b>; because
<b>fno</b> is also marked for sticky <b>sh</b> emulation, no
option changes take place on entry to or exit from it. Hence
the option <b>cshnullglob</b>, turned off by <b>sh</b>
emulation, will be turned on within <b>fni</b> and remain on
on return to <b>fno</b>. On exit from <b>fno</b>, the
emulation mode and all options will be restored to the state
they were in before entry to the temporary emulation.</p>

<p style="margin-left:22%; margin-top: 1em">The
documentation above is typically sufficient for the intended
purpose of executing code designed for other shells in a
suitable environment. More detailed rules follow.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>1.</p></td>
<td width="7%"></td>
<td width="68%">


<p>The sticky emulation environment provided by
&lsquo;<b>emulate</b> <i>shell</i> <b>&minus;c</b>&rsquo; is
identical to that provided by entry to a function marked for
sticky emulation as a consequence of being defined in such
an environment. Hence, for example, the sticky emulation is
inherited by subfunctions defined within functions with
sticky emulation.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="7%"></td>
<td width="68%">


<p>No change of options takes place on entry to or exit
from functions that are not marked for sticky emulation,
other than those that would normally take place, even if
those functions are called within sticky emulation.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="7%"></td>
<td width="68%">


<p>No special handling is provided for functions marked for
<b>autoload</b> nor for functions present in wordcode
created by the <b>zcompile</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>4.</p></td>
<td width="7%"></td>
<td width="68%">


<p>The presence or absence of the <b>&minus;R</b> switch to
<b>emulate</b> corresponds to different sticky emulation
modes, so for example &lsquo;<b>emulate sh
&minus;c</b>&rsquo;, &lsquo;<b>emulate &minus;R sh
&minus;c</b>&rsquo; and &lsquo;<b>emulate csh
&minus;c</b>&rsquo; are treated as three distinct sticky
emulations.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>5.</p></td>
<td width="7%"></td>
<td width="68%">


<p>Difference in shell options supplied in addition to the
basic emulation also mean the sticky emulations are
different, so for example &lsquo;<b>emulate zsh
&minus;c</b>&rsquo; and &lsquo;<b>emulate zsh &minus;o
cbases &minus;c</b>&rsquo; are treated as distinct sticky
emulations.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>enable</b> [
<b>&minus;afmrs</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Enable the <i>name</i>d hash
table elements, presumably disabled earlier with
<b>disable</b>. The default is to enable builtin commands.
The <b>&minus;a</b> option causes <b>enable</b> to act on
regular or global aliases. The <b>&minus;s</b> option causes
<b>enable</b> to act on suffix aliases. The <b>&minus;f</b>
option causes <b>enable</b> to act on shell functions. The
<b>&minus;r</b> option causes <b>enable</b> to act on
reserved words. Without arguments all enabled hash table
elements from the corresponding hash table are printed. With
the <b>&minus;m</b> flag the arguments are taken as patterns
(should be quoted) and all hash table elements from the
corresponding hash table matching these patterns are
enabled. Enabled objects can be disabled with the
<b>disable</b> builtin command.</p>

<p style="margin-left:11%;"><b>eval</b> [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">Read the arguments as input to
the shell and execute the resulting command(s) in the
current shell process. The return status is the same as if
the commands had been executed directly by the shell; if
there are no <i>args</i> or they contain no commands (i.e.
are an empty string or whitespace) the return status is
zero.</p>

<p style="margin-left:11%;"><b>exec</b> [ <b>&minus;cl</b>
] [ <b>&minus;a</b> <i>argv0</i> ] <i>simple command</i></p>

<p style="margin-left:22%;">Replace the current shell with
an external command rather than forking. With
<b>&minus;c</b> clear the environment; with <b>&minus;l</b>
prepend <b>&minus;</b> to the <b>argv[0]</b> string of the
command executed (to simulate a login shell); with
<b>&minus;a</b> <i>argv0</i> set the <b>argv[0]</b> string
of the command executed. See the section &lsquo;Precommand
Modifiers&rsquo;.</p>

<p style="margin-left:11%;"><b>exit</b> [ <i>n</i> ]</p>

<p style="margin-left:22%;">Exit the shell with the exit
status specified by <i>n</i>; if none is specified, use the
exit status from the last command executed. An EOF condition
will also cause the shell to exit, unless the
<b>IGNORE_EOF</b> option is set.</p>

<p style="margin-left:11%;"><b>export</b> [
<i>name</i>[<b>=</b><i>value</i>] ... ]</p>

<p style="margin-left:22%;">The specified <i>name</i>s are
marked for automatic export to the environment of
subsequently executed commands. Equivalent to <b>typeset
&minus;gx</b>. If a parameter specified does not already
exist, it is created in the global scope.</p>

<p style="margin-left:11%;"><b>false</b> [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">Do nothing and return an exit
status of 1.</p>

<p style="margin-left:11%;"><b>fc</b> [ <b>&minus;e</b>
<i>ename</i> ] [ <b>&minus;m</b> <i>match</i> ] [
<i>old</i><b>=</b><i>new</i> ... ] [ <i>first</i> [
<i>last</i> ] ] <b><br>
fc &minus;l</b> [ <b>&minus;nrdfEiD</b> ] [ <b>&minus;t</b>
<i>timefmt</i> ] [ <b>&minus;m</b> <i>match</i> ] <br>
[ <i>old</i><b>=</b><i>new</i> ... ] [ <i>first</i> [
<i>last</i> ] ] <b><br>
fc &minus;p</b> [ <b>&minus;a</b> ] [ <i>filename</i> [
<i>histsize</i> [ <i>savehistsize</i> ] ] ]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fc &minus;P</b></p></td>
<td width="82%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>fc &minus;ARWI</b> [
<i>filename</i> ]</p>

<p style="margin-left:22%;">Select a range of commands from
<i>first</i> to <i>last</i> from the history list. The
arguments <i>first</i> and <i>last</i> may be specified as a
number or as a string. A negative number is used as an
offset to the current history event number. A string
specifies the most recent event beginning with the given
string. All substitutions <i>old</i><b>=</b><i>new</i>, if
any, are then performed on the commands.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;l</b> flag is given, the resulting commands are
listed on standard output. If the <b>&minus;m</b> flag is
also given the first argument is taken as a pattern (should
be quoted) and only the history events matching this pattern
will be shown. Otherwise the editor program <i>ename</i> is
invoked on a file containing these history events. If
<i>ename</i> is not given, the value of the parameter
<b>FCEDIT</b> is used; if that is not set the value of the
parameter <b>EDITOR</b> is used; if that is not set a
builtin default, usually &lsquo;<b>vi</b>&rsquo; is used. If
<i>ename</i> is &lsquo;<b>&minus;</b>&rsquo;, no editor is
invoked. When editing is complete, the edited command is
executed.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>first</i>
is not specified, it will be set to &minus;1 (the most
recent event), or to &minus;16 if the <b>&minus;l</b> flag
is given. If <i>last</i> is not specified, it will be set to
<i>first</i>, or to &minus;1 if the <b>&minus;l</b> flag is
given.</p>

<p style="margin-left:22%; margin-top: 1em">The flag
<b>&minus;r</b> reverses the order of the commands and the
flag <b>&minus;n</b> suppresses command numbers when
listing.</p>

<p style="margin-left:22%; margin-top: 1em">Also when
listing,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;d</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints timestamps for each command</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;f</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints full time&minus;date stamps in the US
&lsquo;<i>MM</i><b>/</b><i>DD</i><b>/</b><i>YY
hh</i>:<i>mm</i>&rsquo; format</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;E</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints full time&minus;date stamps in the European
&lsquo;<i>dd</i><b>.</b><i>mm</i><b>.</b><i>yyyy
hh</i>:<i>mm</i>&rsquo; format</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;i</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints full time&minus;date stamps in ISO8601
&lsquo;<i>yyyy</i><b>&minus;</b><i>mm</i><b>&minus;</b><i>dd
hh</i>:<i>mm</i>&rsquo; format</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;t</b> <i>fmt</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints time and date stamps in the given format;
<i>fmt</i> is formatted with the strftime function with the
zsh extensions described for the
<b>%D{</b><i>string</i><b>}</b> prompt format in the section
EXPANSION OF PROMPT SEQUENCES in <i>zshmisc</i>(1). The
resulting formatted string must be no more than 256
characters or will not be printed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;D</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>prints elapsed times; may be combined with one of the
options above.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">&lsquo;<b>fc
&minus;p</b>&rsquo; pushes the current history list onto a
stack and switches to a new history list. If the
<b>&minus;a</b> option is also specified, this history list
will be automatically popped when the current function scope
is exited, which is a much better solution than creating a
trap function to call &lsquo;<b>fc &minus;P</b>&rsquo;
manually. If no arguments are specified, the history list is
left empty, <b>$HISTFILE</b> is unset, and <b>$HISTSIZE</b>
&amp; <b>$SAVEHIST</b> are set to their default values. If
one argument is given, <b>$HISTFILE</b> is set to that
filename, <b>$HISTSIZE</b> &amp; <b>$SAVEHIST</b> are left
unchanged, and the history file is read in (if it exists) to
initialize the new list. If a second argument is specified,
<b>$HISTSIZE</b> &amp; <b>$SAVEHIST</b> are instead set to
the single specified numeric value. Finally, if a third
argument is specified, <b>$SAVEHIST</b> is set to a separate
value from <b>$HISTSIZE</b>. You are free to change these
environment values for the new history list however you
desire in order to manipulate the new history list.</p>

<p style="margin-left:22%; margin-top: 1em">&lsquo;<b>fc
&minus;P</b>&rsquo; pops the history list back to an older
list saved by &lsquo;<b>fc &minus;p</b>&rsquo;. The current
list is saved to its <b>$HISTFILE</b> before it is destroyed
(assuming that <b>$HISTFILE</b> and <b>$SAVEHIST</b> are set
appropriately, of course). The values of <b>$HISTFILE</b>,
<b>$HISTSIZE</b>, and <b>$SAVEHIST</b> are restored to the
values they had when &lsquo;<b>fc &minus;p</b>&rsquo; was
called. Note that this restoration can conflict with making
these variables &quot;local&quot;, so your best bet is to
avoid local declarations for these variables in functions
that use &lsquo;<b>fc &minus;p</b>&rsquo;. The one other
guaranteed&minus;safe combination is declaring these
variables to be local at the top of your function and using
the automatic option (<b>&minus;a</b>) with &lsquo;<b>fc
&minus;p</b>&rsquo;. Finally, note that it is legal to
manually pop a push marked for automatic popping if you need
to do so before the function exits.</p>

<p style="margin-left:22%; margin-top: 1em">&lsquo;<b>fc
&minus;R</b>&rsquo; reads the history from the given file,
&lsquo;<b>fc &minus;W</b>&rsquo; writes the history out to
the given file, and &lsquo;<b>fc &minus;A</b>&rsquo; appends
the history out to the given file. If no filename is
specified, the <b>$HISTFILE</b> is assumed. If the
<b>&minus;I</b> option is added to <b>&minus;R</b>, only
those events that are not already contained within the
internal history list are added. If the <b>&minus;I</b>
option is added to <b>&minus;A</b> or <b>&minus;W</b>, only
those events that are new since last incremental
append/write to the history file are appended/written. In
any case, the created file will have no more than
<b>$SAVEHIST</b> entries.</p>

<p style="margin-left:11%;"><b>fg</b> [ <i>job</i> ... ]
<i><br>
job</i> ...</p>

<p style="margin-left:22%;">Bring each specified <i>job</i>
in turn to the foreground. If no <i>job</i> is specified,
resume the current job.</p>

<p style="margin-left:11%;"><b>float</b> [
{<b>+</b>|<b>&minus;</b>}<b>EFHghlprtux</b> ] [
<b>&minus;LRZ</b> [ <i>n</i> ]] [
<i>name</i>[<b>=</b><i>value</i>] ... ]</p>

<p style="margin-left:22%;">Equivalent to <b>typeset
&minus;E</b>, except that options irrelevant to floating
point numbers are not permitted.</p>

<p style="margin-left:11%;"><b>functions</b> [
{<b>+</b>|<b>&minus;</b>}<b>UXkmtTuz</b> ] [ <i>name</i> ...
] <b><br>
functions &minus;M</b> <i>mathfn</i> [ <i>min</i> [
<i>max</i> [ <i>shellfn</i> ] ] ] <b><br>
functions &minus;M</b> [ <b>&minus;m</b> <i>pattern</i> ...
] <b><br>
functions +M</b> [ <b>&minus;m</b> ] <i>mathfn</i></p>

<p style="margin-left:22%;">Equivalent to <b>typeset
&minus;f</b>, with the exception of the <b>&minus;M</b>
option. Use of the <b>&minus;M</b> option may not be
combined with any of the options handled by <b>typeset
&minus;f</b>.</p>

<p style="margin-left:22%; margin-top: 1em"><b>functions
&minus;M</b> <i>mathfn</i> defines <i>mathfn</i> as the name
of a mathematical function recognised in all forms of
arithmetical expressions; see the section &lsquo;Arithmetic
Evaluation&rsquo; in <i>zshmisc</i>(1). By default
<i>mathfn</i> may take any number of comma&minus;separated
arguments. If <i>min</i> is given, it must have exactly
<i>min</i> args; if <i>min</i> and <i>max</i> are both
given, it must have at least <i>min</i> and at most
<i>max</i> args. <i>max</i> may be &minus;1 to indicate that
there is no upper limit.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
function is implemented by a shell function of the same
name; if <i>shellfn</i> is specified it gives the name of
the corresponding shell function while <i>mathfn</i> remains
the name used in arithmetical expressions. The name of the
function in <b>$0</b> is <i>mathfn</i> (not <i>shellfn</i>
as would usually be the case), provided the option
<b>FUNCTION_ARGZERO</b> is in effect. The positional
parameters in the shell function correspond to the arguments
of the mathematical function call. The result of the last
arithmetical expression evaluated inside the shell function
(even if it is a form that normally only returns a status)
gives the result of the mathematical function.</p>

<p style="margin-left:22%; margin-top: 1em"><b>functions
&minus;M</b> with no arguments lists all such
user&minus;defined functions in the same form as a
definition. With the additional option <b>&minus;m</b> and a
list of arguments, all functions whose <i>mathfn</i> matches
one of the pattern arguments are listed.</p>

<p style="margin-left:22%; margin-top: 1em"><b>function
+M</b> removes the list of mathematical functions; with the
additional option <b>&minus;m</b> the arguments are treated
as patterns and all functions whose <b>mathfn</b> matches
the pattern are removed. Note that the shell function
implementing the behaviour is not removed (regardless of
whether its name coincides with <b>mathfn</b>).</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the following prints the cube of 3:</p>


<p style="margin-left:32%; margin-top: 1em"><b>zmath_cube()
{ (( $1 * $1 * $1 )) } <br>
functions &minus;M cube 1 1 zmath_cube <br>
print $(( cube(3) ))</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>getcap</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/cap Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>getln</b> [
<b>&minus;AclneE</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Read the top value from the
buffer stack and put it in the shell parameter <b>name</b>.
Equivalent to <b>read &minus;zr</b>.</p>

<p style="margin-left:11%;"><b>getopts</b> <i>optstring
name</i> [ <i>arg</i> ... ]</p>

<p style="margin-left:22%;">Checks the <i>arg</i>s for
legal options. If the <i>arg</i>s are omitted, use the
positional parameters. A valid option argument begins with a
&lsquo;<b>+</b>&rsquo; or a &lsquo;<b>&minus;</b>&rsquo;. An
argument not beginning with a &lsquo;<b>+</b>&rsquo; or a
&lsquo;<b>&minus;</b>&rsquo;, or the argument
&lsquo;<b>&minus;&minus;</b>&rsquo;, ends the options. Note
that a single &lsquo;<b>&minus;</b>&rsquo; is not considered
a valid option argument. <i>optstring</i> contains the
letters that <b>getopts</b> recognizes. If a letter is
followed by a &lsquo;<b>:</b>&rsquo;, that option requires
an argument. The options can be separated from the argument
by blanks.</p>

<p style="margin-left:22%; margin-top: 1em">Each time it is
invoked, <b>getopts</b> places the option letter it finds in
the shell parameter <i>name</i>, prepended with a
&lsquo;<b>+</b>&rsquo; when <i>arg</i> begins with a
&lsquo;<b>+</b>&rsquo;. The index of the next <i>arg</i> is
stored in <b>OPTIND</b>. The option argument, if any, is
stored in <b>OPTARG</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The first
option to be examined may be changed by explicitly assigning
to <b>OPTIND</b>. <b>OPTIND</b> has an initial value of
<b>1</b>, and is normally reset to <b>1</b> upon exit from a
shell function. <b>OPTARG</b> is not reset and retains its
value from the most recent call to <b>getopts</b>. If either
of <b>OPTIND</b> or <b>OPTARG</b> is explicitly unset, it
remains unset, and the index or option argument is not
stored. The option itself is still stored in <i>name</i> in
this case.</p>

<p style="margin-left:22%; margin-top: 1em">A leading
&lsquo;<b>:</b>&rsquo; in <i>optstring</i> causes
<b>getopts</b> to store the letter of any invalid option in
<b>OPTARG</b>, and to set <i>name</i> to
&lsquo;<b>?</b>&rsquo; for an unknown option and to
&lsquo;<b>:</b>&rsquo; when a required argument is missing.
Otherwise, <b>getopts</b> sets <i>name</i> to
&lsquo;<b>?</b>&rsquo; and prints an error message when an
option is invalid. The exit status is nonzero when there are
no more options.</p>

<p style="margin-left:11%;"><b>hash</b> [
<b>&minus;Ldfmrv</b> ] [ <i>name</i>[<b>=</b><i>value</i>] ]
...</p>

<p style="margin-left:22%;"><b>hash</b> can be used to
directly modify the contents of the command hash table, and
the named directory hash table. Normally one would modify
these tables by modifying one&rsquo;s <b>PATH</b> (for the
command hash table) or by creating appropriate shell
parameters (for the named directory hash table). The choice
of hash table to work on is determined by the
<b>&minus;d</b> option; without the option the command hash
table is used, and with the option the named directory hash
table is used.</p>

<p style="margin-left:22%; margin-top: 1em">Given no
arguments, and neither the <b>&minus;r</b> or
<b>&minus;f</b> options, the selected hash table will be
listed in full.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;r</b> option causes the selected hash table to be
emptied. It will be subsequently rebuilt in the normal
fashion. The <b>&minus;f</b> option causes the selected hash
table to be fully rebuilt immediately. For the command hash
table this hashes all the absolute directories in the
<b>PATH</b>, and for the named directory hash table this
adds all users&rsquo; home directories. These two options
cannot be used with any arguments.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;m</b> option causes the arguments to be taken as
patterns (which should be quoted) and the elements of the
hash table matching those patterns are printed. This is the
only way to display a limited selection of hash table
elements.</p>

<p style="margin-left:22%; margin-top: 1em">For each
<i>name</i> with a corresponding <i>value</i>, put
&lsquo;<i>name</i>&rsquo; in the selected hash table,
associating it with the pathname &lsquo;<i>value</i>&rsquo;.
In the command hash table, this means that whenever
&lsquo;<i>name</i>&rsquo; is used as a command argument, the
shell will try to execute the file given by
&lsquo;<i>value</i>&rsquo;. In the named directory hash
table, this means that &lsquo;<i>value</i>&rsquo; may be
referred to as &lsquo;<b>~</b><i>name</i>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">For each
<i>name</i> with no corresponding <i>value</i>, attempt to
add <i>name</i> to the hash table, checking what the
appropriate <b>value</b> is in the normal manner for that
hash table. If an appropriate <b>value</b> can&rsquo;t be
found, then the hash table will be unchanged.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;v</b> option causes hash table entries to be
listed as they are added by explicit specification. If has
no effect if used with <b>&minus;f</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;L</b> flag is present, then each hash table entry
is printed in the form of a call to hash.</p>

<p style="margin-left:11%;"><b>history</b></p>

<p style="margin-left:22%;">Same as <b>fc &minus;l</b>.</p>

<p style="margin-left:11%;"><b>integer</b> [
{<b>+</b>|<b>&minus;</b>}<b>Hghilprtux</b> ] [
<b>&minus;LRZ</b> [ <i>n</i> ]] [
<i>name</i>[<b>=</b><i>value</i>] ... ]</p>

<p style="margin-left:22%;">Equivalent to <b>typeset
&minus;i</b>, except that options irrelevant to integers are
not permitted.</p>

<p style="margin-left:11%;"><b>jobs</b> [
<b>&minus;dlprs</b> ] [ <i>job</i> ... ] <b><br>
jobs &minus;Z</b> <i>string</i></p>

<p style="margin-left:22%;">Lists information about each
given job, or all jobs if <i>job</i> is omitted. The
<b>&minus;l</b> flag lists process IDs, and the
<b>&minus;p</b> flag lists process groups. If the
<b>&minus;r</b> flag is specified only running jobs will be
listed and if the <b>&minus;s</b> flag is given only stopped
jobs are shown. If the <b>&minus;d</b> flag is given, the
directory from which the job was started (which may not be
the current directory of the job) will also be shown.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;Z</b> option replaces the shell&rsquo;s argument
and environment space with the given string, truncated if
necessary to fit. This will normally be visible in <b>ps</b>
(<i>ps</i>(1)) listings. This feature is typically used by
daemons, to indicate their state.</p>

<p style="margin-left:11%;"><b>kill</b> [ <b>&minus;s</b>
<i>signal_name</i> | <b>&minus;n</b> <i>signal_number</i> |
<b>&minus;</b><i>sig</i> ] <i>job</i> ... <b><br>
kill &minus;l</b> [ <i>sig</i> ... ]</p>

<p style="margin-left:22%;">Sends either <b>SIGTERM</b> or
the specified signal to the given jobs or processes. Signals
are given by number or by names, with or without the
&lsquo;<b>SIG</b>&rsquo; prefix. If the signal being sent is
not &lsquo;<b>KILL</b>&rsquo; or &lsquo;<b>CONT</b>&rsquo;,
then the job will be sent a &lsquo;<b>CONT</b>&rsquo; signal
if it is stopped. The argument <i>job</i> can be the process
ID of a job not in the job list. In the second form, <b>kill
&minus;l</b>, if <i>sig</i> is not specified the signal
names are listed. Otherwise, for each <i>sig</i> that is a
name, the corresponding signal number is listed. For each
<i>sig</i> that is a signal number or a number representing
the exit status of a process which was terminated or stopped
by a signal the name of the signal is printed.</p>

<p style="margin-left:22%; margin-top: 1em">On some
systems, alternative signal names are allowed for a few
signals. Typical examples are <b>SIGCHLD</b> and
<b>SIGCLD</b> or <b>SIGPOLL</b> and <b>SIGIO</b>, assuming
they correspond to the same signal number. <b>kill
&minus;l</b> will only list the preferred form, however
<b>kill &minus;l</b> <i>alt</i> will show if the alternative
form corresponds to a signal number. For example, under
Linux <b>kill &minus;l IO</b> and <b>kill &minus;l POLL</b>
both output 29, hence <b>kill &minus;IO</b> and <b>kill
&minus;POLL</b> have the same effect.</p>

<p style="margin-left:22%; margin-top: 1em">Many systems
will allow process IDs to be negative to kill a process
group or zero to kill the current process group.</p>

<p style="margin-left:11%;"><b>let</b> <i>arg</i> ...</p>

<p style="margin-left:22%;">Evaluate each <i>arg</i> as an
arithmetic expression. See the section &lsquo;Arithmetic
Evaluation&rsquo; in <i>zshmisc</i>(1) for a description of
arithmetic expressions. The exit status is 0 if the value of
the last expression is nonzero, 1 if it is zero, and 2 if an
error occurred.</p>

<p style="margin-left:11%;"><b>limit</b> [ <b>&minus;hs</b>
] [ <i>resource</i> [ <i>limit</i> ] ] ...</p>

<p style="margin-left:22%;">Set or display resource limits.
Unless the <b>&minus;s</b> flag is given, the limit applies
only the children of the shell. If <b>&minus;s</b> is given
without other arguments, the resource limits of the current
shell is set to the previously set resource limits of the
children.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>limit</i>
is not specified, print the current limit placed on
<i>resource</i>, otherwise set the limit to the specified
value. If the <b>&minus;h</b> flag is given, use hard limits
instead of soft limits. If no <i>resource</i> is given,
print all limits.</p>

<p style="margin-left:22%; margin-top: 1em">When looping
over multiple resources, the shell will abort immediately if
it detects a badly formed argument. However, if it fails to
set a limit for some other reason it will continue trying to
set the remaining limits.</p>


<p style="margin-left:22%; margin-top: 1em"><i>resource</i>
can be one of: <b><br>
addressspace</b></p>

<p style="margin-left:32%;">Maximum amount of address space
used.</p>

<p style="margin-left:22%;"><b>aiomemorylocked</b></p>

<p style="margin-left:32%;">Maximum amount of memory locked
in RAM for AIO operations.</p>

<p style="margin-left:22%;"><b>aiooperations</b></p>

<p style="margin-left:32%;">Maximum number of AIO
operations.</p>

<p style="margin-left:22%;"><b>cachedthreads</b></p>

<p style="margin-left:32%;">Maximum number of cached
threads.</p>

<p style="margin-left:22%;"><b>coredumpsize</b></p>

<p style="margin-left:32%;">Maximum size of a core
dump.</p>

<p style="margin-left:22%;"><b>cputime</b></p>

<p style="margin-left:32%;">Maximum CPU seconds per
process.</p>

<p style="margin-left:22%;"><b>datasize</b></p>

<p style="margin-left:32%;">Maximum data size (including
stack) for each process.</p>

<p style="margin-left:22%;"><b>descriptors</b></p>

<p style="margin-left:32%;">Maximum value for a file
descriptor.</p>

<p style="margin-left:22%;"><b>filesize</b></p>

<p style="margin-left:32%;">Largest single file
allowed.</p>

<p style="margin-left:22%;"><b>maxproc</b></p>

<p style="margin-left:32%;">Maximum number of
processes.</p>

<p style="margin-left:22%;"><b>maxpthreads</b></p>

<p style="margin-left:32%;">Maximum number of threads per
process.</p>

<p style="margin-left:22%;"><b>memorylocked</b></p>

<p style="margin-left:32%;">Maximum amount of memory locked
in RAM.</p>

<p style="margin-left:22%;"><b>memoryuse</b></p>

<p style="margin-left:32%;">Maximum resident set size.</p>

<p style="margin-left:22%;"><b>msgqueue</b></p>

<p style="margin-left:32%;">Maximum number of bytes in
POSIX message queues.</p>

<p style="margin-left:22%;"><b>resident</b></p>

<p style="margin-left:32%;">Maximum resident set size.</p>

<p style="margin-left:22%;"><b>sigpending</b></p>

<p style="margin-left:32%;">Maximum number of pending
signals.</p>

<p style="margin-left:22%;"><b>sockbufsize</b></p>

<p style="margin-left:32%;">Maximum size of all socket
buffers.</p>

<p style="margin-left:22%;"><b>stacksize</b></p>

<p style="margin-left:32%;">Maximum stack size for each
process.</p>

<p style="margin-left:22%;"><b>vmemorysize</b></p>

<p style="margin-left:32%;">Maximum amount of virtual
memory.</p>

<p style="margin-left:22%; margin-top: 1em">Which of these
resource limits are available depends on the system.
<i>resource</i> can be abbreviated to any unambiguous
prefix. It can also be an integer, which corresponds to the
integer defined for the resource by the operating
system.</p>

<p style="margin-left:22%; margin-top: 1em">If argument
corresponds to a number which is out of the range of the
resources configured into the shell, the shell will try to
read or write the limit anyway, and will report an error if
this fails. As the shell does not store such resources
internally, an attempt to set the limit will fail unless the
<b>&minus;s</b> option is present.</p>

<p style="margin-left:22%; margin-top: 1em"><i>limit</i> is
a number, with an optional scaling factor, as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><i>n</i><b>h</b></p></td>
<td width="7%"></td>
<td width="31%">


<p>hours</p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><i>n</i><b>k</b></p></td>
<td width="7%"></td>
<td width="31%">


<p>kilobytes (default)</p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><i>n</i><b>m</b></p></td>
<td width="7%"></td>
<td width="31%">


<p>megabytes or minutes</p></td>
<td width="37%">
</td></tr>
</table>


<p style="margin-left:22%;">[<i>mm</i><b>:</b>]<i>ss</i></p>

<p style="margin-left:32%;">minutes and seconds</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>limit</b> command is not made available by default when
the shell starts in a mode emulating another shell. It can
be made available with the command &lsquo;<b>zmodload
&minus;F zsh/rlimits b:limit</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>local</b> [
{<b>+</b>|<b>&minus;</b>}<b>AEFHUahlprtux</b> ] [
<b>&minus;LRZi</b> [ <i>n</i> ]] [
<i>name</i>[<b>=</b><i>value</i>] ] ...</p>

<p style="margin-left:22%;">Same as <b>typeset</b>, except
that the options <b>&minus;g</b>, and <b>&minus;f</b> are
not permitted. In this case the <b>&minus;x</b> option does
not force the use of <b>&minus;g</b>, i.e. exported
variables will be local to functions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>log</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>List all users currently logged in who are affected by
the current setting of the <b>watch</b> parameter.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>logout</b> [ <i>n</i> ]</p>

<p style="margin-left:22%;">Same as <b>exit</b>, except
that it only works in a login shell.</p>

<p style="margin-left:11%;"><b>noglob</b> <i>simple
command</i></p>

<p style="margin-left:22%;">See the section
&lsquo;Precommand Modifiers&rsquo;.</p>

<p style="margin-left:11%;"><b>popd</b> [ [&minus;q]
{<b>+</b>|<b>&minus;</b>}<i>n</i> ]</p>

<p style="margin-left:22%;">Remove an entry from the
directory stack, and perform a <b>cd</b> to the new top
directory. With no argument, the current top entry is
removed. An argument of the form
&lsquo;<b>+</b><i>n</i>&rsquo; identifies a stack entry by
counting from the left of the list shown by the <b>dirs</b>
command, starting with zero. An argument of the form
<b>&minus;n</b> counts from the right. If the
<b>PUSHD_MINUS</b> option is set, the meanings of
&lsquo;<b>+</b>&rsquo; and &lsquo;<b>&minus;</b>&rsquo; in
this context are swapped.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;q</b> (quiet) option is specified, the hook
function <b>chpwd</b> and the functions in the array
<b>$chpwd_functions</b> are not called, and the new
directory stack is not printed. This is useful for calls to
<b>popd</b> that do not change the environment seen by an
interactive user.</p>

<p style="margin-left:11%;"><b>print</b> [
<b>&minus;abcDilmnNoOpPrsSz</b> ] [ <b>&minus;u</b> <i>n</i>
] [ <b>&minus;f</b> <i>format</i> ] [ <b>&minus;C</b>
<i>cols</i> ] <br>
[ <b>&minus;R</b> [ <b>&minus;en</b> ]] [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">With the
&lsquo;<b>&minus;f</b>&rsquo; option the arguments are
printed as described by <b>printf</b>. With no flags or with
the flag &lsquo;<b>&minus;</b>&rsquo;, the arguments are
printed on the standard output as described by <b>echo</b>,
with the following differences: the escape sequence
&lsquo;<b>\M&minus;</b><i>x</i>&rsquo; metafies the
character <i>x</i> (sets the highest bit),
&lsquo;<b>\C&minus;</b><i>x</i>&rsquo; produces a control
character (&lsquo;<b>\C&minus;@</b>&rsquo; and
&lsquo;<b>\C&minus;?</b>&rsquo; give the characters NUL and
delete), and &lsquo;<b>\E</b>&rsquo; is a synonym for
&lsquo;<b>\e</b>&rsquo;. Finally, if not in an escape
sequence, &lsquo;<b>\</b>&rsquo; escapes the following
character and is not printed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Print arguments with the column incrementing first. Only
useful with the <b>&minus;c</b> and <b>&minus;C</b>
options.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Recognize all the escape sequences defined for the
<b>bindkey</b> command, see <i>zshzle</i>(1).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Print the arguments in columns. Unless <b>&minus;a</b>
is also given, arguments are printed with the row
incrementing first.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;C</b> <i>cols</i></p>

<p style="margin-left:32%;">Print the arguments in
<i>cols</i> columns. Unless <b>&minus;a</b> is also given,
arguments are printed with the row incrementing first.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;D</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Treat the arguments as directory names, replacing
prefixes with <b>~</b> expressions, as appropriate.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;i</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>If given together with <b>&minus;o</b> or
<b>&minus;O</b>, sorting is performed
case&minus;independently.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;l</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments separated by newlines instead of
spaces.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;m</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Take the first argument as a pattern (should be quoted),
and remove it from the argument list together with
subsequent arguments that do not match this pattern.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;n</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Do not add a newline to the output.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;N</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments separated and terminated by
nulls.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;o</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments sorted in ascending order.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;O</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments sorted in descending order.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;p</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments to the input of the coprocess.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;P</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Perform prompt expansion (see EXPANSION OF PROMPT
SEQUENCES in <i>zshmisc</i>(1)).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;r</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Ignore the escape conventions of <b>echo</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;R</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Emulate the BSD <b>echo</b> command, which does not
process escape sequences unless the <b>&minus;e</b> flag is
given. The <b>&minus;n</b> flag suppresses the trailing
newline. Only the <b>&minus;e</b> and <b>&minus;n</b> flags
are recognized after <b>&minus;R</b>; all other arguments
and options are printed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;s</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Place the results in the history list instead of on the
standard output. Each argument to the <b>print</b> command
is treated as a single word in the history, regardless of
its content.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;S</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Place the results in the history list instead of on the
standard output. In this case only a single argument is
allowed; it will be split into words as if it were a full
shell command line. The effect is similar to reading the
line from a history file with the <b>HIST_LEX_WORDS</b>
option active.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;u</b> <i>n</i></p></td>
<td width="4%"></td>
<td width="68%">


<p>Print the arguments to file descriptor <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;z</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Push the arguments onto the editing buffer stack,
separated by spaces.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If any of
&lsquo;<b>&minus;m</b>&rsquo;, &lsquo;<b>&minus;o</b>&rsquo;
or &lsquo;<b>&minus;O</b>&rsquo; are used in combination
with &lsquo;<b>&minus;f</b>&rsquo; and there are no
arguments (after the removal process in the case of
&lsquo;<b>&minus;m</b>&rsquo;) then nothing is printed.</p>

<p style="margin-left:11%;"><b>printf</b> <i>format</i> [
<i>arg</i> ... ]</p>

<p style="margin-left:22%;">Print the arguments according
to the format specification. Formatting rules are the same
as used in C. The same escape sequences as for <b>echo</b>
are recognised in the format. All C conversion
specifications ending in one of csdiouxXeEfgGn are handled.
In addition to this, &lsquo;<b>%b</b>&rsquo; can be used
instead of &lsquo;<b>%s</b>&rsquo; to cause escape sequences
in the argument to be recognised and &lsquo;<b>%q</b>&rsquo;
can be used to quote the argument in such a way that allows
it to be reused as shell input. With the numeric format
specifiers, if the corresponding argument starts with a
quote character, the numeric value of the following
character is used as the number to print otherwise the
argument is evaluated as an arithmetic expression. See the
section &lsquo;Arithmetic Evaluation&rsquo; in
<i>zshmisc</i>(1) for a description of arithmetic
expressions. With &lsquo;<b>%n</b>&rsquo;, the corresponding
argument is taken as an identifier which is created as an
integer parameter.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
conversion specifications are applied to each argument in
order but they can explicitly specify the <i>n</i>th
argument is to be used by replacing &lsquo;<b>%</b>&rsquo;
by &lsquo;<b>%</b><i>n</i><b>$</b>&rsquo; and
&lsquo;<b>*</b>&rsquo; by
&lsquo;<b>*</b><i>n</i><b>$</b>&rsquo;. It is recommended
that you do not mix references of this explicit style with
the normal style and the handling of such mixed styles may
be subject to future change.</p>

<p style="margin-left:22%; margin-top: 1em">If arguments
remain unused after formatting, the format string is reused
until all arguments have been consumed. With the
<b>print</b> builtin, this can be suppressed by using the
<b>&minus;r</b> option. If more arguments are required by
the format than have been specified, the behaviour is as if
zero or an empty string had been specified as the
argument.</p>

<p style="margin-left:11%;"><b>pushd</b> [
<b>&minus;qsLP</b> ] [ <i>arg</i> ] <b><br>
pushd</b> [ <b>&minus;qsLP</b> ] <i>old new</i> <b><br>
pushd</b> [ <b>&minus;qsLP</b> ]
{<b>+</b>|<b>&minus;</b>}<i>n</i></p>

<p style="margin-left:22%;">Change the current directory,
and push the old current directory onto the directory stack.
In the first form, change the current directory to
<i>arg</i>. If <i>arg</i> is not specified, change to the
second directory on the stack (that is, exchange the top two
entries), or change to <b>$HOME</b> if the
<b>PUSHD_TO_HOME</b> option is set or if there is only one
entry on the stack. Otherwise, <i>arg</i> is interpreted as
it would be by <b>cd</b>. The meaning of <i>old</i> and
<i>new</i> in the second form is also the same as for
<b>cd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The third form
of <b>pushd</b> changes directory by rotating the directory
list. An argument of the form &lsquo;<b>+</b><i>n</i>&rsquo;
identifies a stack entry by counting from the left of the
list shown by the <b>dirs</b> command, starting with zero.
An argument of the form &lsquo;<b>&minus;</b><i>n</i>&rsquo;
counts from the right. If the <b>PUSHD_MINUS</b> option is
set, the meanings of &lsquo;<b>+</b>&rsquo; and
&lsquo;<b>&minus;</b>&rsquo; in this context are
swapped.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;q</b> (quiet) option is specified, the hook
function <b>chpwd</b> and the functions in the array
<b>$chpwd_functions</b> are not called, and the new
directory stack is not printed. This is useful for calls to
<b>pushd</b> that do not change the environment seen by an
interactive user.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;q</b> is not specified and the shell option
<b>PUSHD_SILENT</b> is not set, the directory stack will be
printed after a <b>pushd</b> is performed.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;s</b>, <b>&minus;L</b> and <b>&minus;P</b> have
the same meanings as for the <b>cd</b> builtin.</p>

<p style="margin-left:11%;"><b>pushln</b> [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">Equivalent to <b>print
&minus;nz</b>.</p>

<p style="margin-left:11%;"><b>pwd</b> [ <b>&minus;rLP</b>
]</p>

<p style="margin-left:22%;">Print the absolute pathname of
the current working directory. If the <b>&minus;r</b> or the
<b>&minus;P</b> flag is specified, or the <b>CHASE_LINKS</b>
option is set and the <b>&minus;L</b> flag is not given, the
printed path will not contain symbolic links.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>r</b></p></td>
<td width="10%"></td>
<td width="24%">


<p>Same as <b>fc &minus;e &minus;</b>.</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>read</b> [
<b>&minus;rszpqAclneE</b> ] [ <b>&minus;t</b> [ <i>num</i> ]
] [ <b>&minus;k</b> [ <i>num</i> ] ] [ <b>&minus;d</b>
<i>delim</i> ] <br>
[ <b>&minus;u</b> <i>n</i> ] [
<i>name</i>[<b>?</b><i>prompt</i>] ] [ <i>name</i> ... ]</p>

<p style="margin-left:22%;">Read one line and break it into
fields using the characters in <b>$IFS</b> as separators,
except as noted below. The first field is assigned to the
first <i>name</i>, the second field to the second
<i>name</i>, etc., with leftover fields assigned to the last
<i>name</i>. If <i>name</i> is omitted then <b>REPLY</b> is
used for scalars and <b>reply</b> for arrays.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Raw mode: a &lsquo;<b>\</b>&rsquo; at the end of a line
does not signify line continuation and backslashes in the
line don&rsquo;t quote the following character and are not
removed.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Don&rsquo;t echo back characters if reading from the
terminal. Currently does not work with the <b>&minus;q</b>
option.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Read only one character from the terminal and set
<i>name</i> to &lsquo;<b>y</b>&rsquo; if this character was
&lsquo;<b>y</b>&rsquo; or &lsquo;<b>Y</b>&rsquo; and to
&lsquo;<b>n</b>&rsquo; otherwise. With this flag set the
return status is zero only if the character was
&lsquo;<b>y</b>&rsquo; or &lsquo;<b>Y</b>&rsquo;. This
option may be used with a timeout; if the read times out, or
encounters end of file, status 2 is returned. Input is read
from the terminal unless one of <b>&minus;u</b> or
<b>&minus;p</b> is present. This option may also be used
within zle widgets.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;k</b> [ <i>num</i>
]</p>

<p style="margin-left:32%;">Read only one (or <i>num</i>)
characters. All are assigned to the first <i>name</i>,
without word splitting. This flag is ignored when
<b>&minus;q</b> is present. Input is read from the terminal
unless one of <b>&minus;u</b> or <b>&minus;p</b> is present.
This option may also be used within zle widgets.</p>

<p style="margin-left:32%; margin-top: 1em">Note that
despite the mnemonic &lsquo;key&rsquo; this option does read
full characters, which may consist of multiple bytes if the
option <b>MULTIBYTE</b> is set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;z</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Read one entry from the editor buffer stack and assign
it to the first <i>name</i>, without word splitting. Text is
pushed onto the stack with &lsquo;<b>print
&minus;z</b>&rsquo; or with <b>push&minus;line</b> from the
line editor (see <i>zshzle</i>(1)). This flag is ignored
when the <b>&minus;k</b> or <b>&minus;q</b> flags are
present.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;e</b></p></td>
<td width="4%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;E</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>The input read is printed (echoed) to the standard
output. If the <b>&minus;e</b> flag is used, no input is
assigned to the parameters.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;A</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>The first <i>name</i> is taken as the name of an array
and all words are assigned to it.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;c</b></p></td>
<td width="4%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;l</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>These flags are allowed only if called inside a function
used for completion (specified with the <b>&minus;K</b> flag
to <b>compctl</b>). If the <b>&minus;c</b> flag is given,
the words of the current command are read. If the
<b>&minus;l</b> flag is given, the whole line is assigned as
a scalar. If both flags are present, <b>&minus;l</b> is used
and <b>&minus;c</b> is ignored.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;n</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Together with <b>&minus;c</b>, the number of the word
the cursor is on is read. With <b>&minus;l</b>, the index of
the character the cursor is on is read. Note that the
command name is word number 1, not word 0, and that when the
cursor is at the end of the line, its character index is the
length of the line plus one.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;u</b> <i>n</i></p></td>
<td width="4%"></td>
<td width="68%">


<p>Input is read from file descriptor <i>n</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>&minus;p</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Input is read from the coprocess.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;d</b>
<i>delim</i></p>

<p style="margin-left:32%;">Input is terminated by the
first character of <i>delim</i> instead of by newline.</p>

<p style="margin-left:22%;"><b>&minus;t</b> [ <i>num</i>
]</p>

<p style="margin-left:32%;">Test if input is available
before attempting to read. If <i>num</i> is present, it must
begin with a digit and will be evaluated to give a number of
seconds, which may be a floating point number; in this case
the read times out if input is not available within this
time. If <i>num</i> is not present, it is taken to be zero,
so that <b>read</b> returns immediately if no input is
available. If no input is available, return status 1 and do
not set any variables.</p>

<p style="margin-left:32%; margin-top: 1em">This option is
not available when reading from the editor buffer with
<b>&minus;z</b>, when called from within completion with
<b>&minus;c</b> or <b>&minus;l</b>, with <b>&minus;q</b>
which clears the input queue before reading, or within zle
where other mechanisms should be used to test for input.</p>

<p style="margin-left:32%; margin-top: 1em">Note that read
does not attempt to alter the input processing mode. The
default mode is canonical input, in which an entire line is
read at a time, so usually &lsquo;<b>read
&minus;t</b>&rsquo; will not read anything until an entire
line has been typed. However, when reading from the terminal
with <b>&minus;k</b> input is processed one key at a time;
in this case, only availability of the first character is
tested, so that e.g. &lsquo;<b>read &minus;t &minus;k
2</b>&rsquo; can still block on the second character. Use
two instances of &lsquo;<b>read &minus;t &minus;k</b>&rsquo;
if this is not what is wanted.</p>

<p style="margin-left:22%; margin-top: 1em">If the first
argument contains a &lsquo;<b>?</b>&rsquo;, the remainder of
this word is used as a <i>prompt</i> on standard error when
the shell is interactive.</p>

<p style="margin-left:22%; margin-top: 1em">The value (exit
status) of <b>read</b> is 1 when an end&minus;of&minus;file
is encountered, or when <b>&minus;c</b> or <b>&minus;l</b>
is present and the command is not called from a
<b>compctl</b> function, or as described for
<b>&minus;q</b>. Otherwise the value is 0.</p>

<p style="margin-left:22%; margin-top: 1em">The behavior of
some combinations of the <b>&minus;k</b>, <b>&minus;p</b>,
<b>&minus;q</b>, <b>&minus;u</b> and <b>&minus;z</b> flags
is undefined. Presently <b>&minus;q</b> cancels all the
others, <b>&minus;p</b> cancels <b>&minus;u</b>,
<b>&minus;k</b> cancels <b>&minus;z</b>, and otherwise
<b>&minus;z</b> cancels both <b>&minus;p</b> and
<b>&minus;u</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;c</b> or <b>&minus;l</b> flags cancel any and all
of <b>&minus;kpquz</b>.</p>

<p style="margin-left:11%;"><b>readonly</b></p>

<p style="margin-left:22%;">Same as <b>typeset
&minus;r</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>rehash</b></p></td>
<td width="2%"></td>
<td width="24%">


<p>Same as <b>hash &minus;r</b>.</p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>return</b> [ <i>n</i> ]</p>

<p style="margin-left:22%;">Causes a shell function or
&lsquo;<b>.</b>&rsquo; script to return to the invoking
script with the return status specified by <i>n</i>. If
<i>n</i> is omitted, the return status is that of the last
command executed.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>return</b> was executed from a trap in a
<b>TRAP</b><i>NAL</i> function, the effect is different for
zero and non&minus;zero return status. With zero status (or
after an implicit return at the end of the trap), the shell
will return to whatever it was previously processing; with a
non&minus;zero status, the shell will behave as interrupted
except that the return status of the trap is retained. Note
that the numeric value of the signal which caused the trap
is passed as the first argument, so the statement
&lsquo;<b>return $((128+$1))</b>&rsquo; will return the same
status as if the signal had not been trapped.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>sched</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/sched Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>set</b> [
{<b>+</b>|<b>&minus;</b>}<i>options</i> |
{<b>+</b>|<b>&minus;</b>}<b>o</b> [ <i>option_name</i> ] ]
... [ {<b>+</b>|<b>&minus;</b>}<b>A</b> [ <i>name</i> ] ] [
<i><br>
arg</i> ... ]</p>

<p style="margin-left:22%;">Set the options for the shell
and/or set the positional parameters, or declare and set an
array. If the <b>&minus;s</b> option is given, it causes the
specified arguments to be sorted before assigning them to
the positional parameters (or to the array <i>name</i> if
<b>&minus;A</b> is used). With <b>+s</b> sort arguments in
descending order. For the meaning of the other flags, see
<i>zshoptions</i>(1). Flags may be specified by name using
the <b>&minus;o</b> option. If no option name is supplied
with <b>&minus;o</b>, the current option states are printed:
see the description of <b>setopt</b> below for more
information on the format. With <b>+o</b> they are printed
in a form that can be used as input to the shell.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;A</b> flag is specified, <i>name</i> is set to an
array containing the given <i>arg</i>s; if no <i>name</i> is
specified, all arrays are printed together with their
values.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>+A</b> is
used and <i>name</i> is an array, the given arguments will
replace the initial elements of that array; if no
<i>name</i> is specified, all arrays are printed without
their values.</p>

<p style="margin-left:22%; margin-top: 1em">The behaviour
of arguments after <b>&minus;A</b> <i>name</i> or <b>+A</b>
<i>name</i> depends on whether the option <b>KSH_ARRAYS</b>
is set. If it is not set, all arguments following
<i>name</i> are treated as values for the array, regardless
of their form. If the option is set, normal option
processing continues at that point; only regular arguments
are treated as values for the array. This means that</p>

<p style="margin-left:32%; margin-top: 1em"><b>set &minus;A
array &minus;x &minus;&minus; foo</b></p>

<p style="margin-left:22%; margin-top: 1em">sets
<b>array</b> to &lsquo;<b>&minus;x &minus;&minus;
foo</b>&rsquo; if <b>KSH_ARRAYS</b> is not set, but sets the
array to <b>foo</b> and turns on the option
&lsquo;<b>&minus;x</b>&rsquo; if it is set.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;A</b> flag is not present, but there are arguments
beyond the options, the positional parameters are set. If
the option list (if any) is terminated by
&lsquo;<b>&minus;&minus;</b>&rsquo;, and there are no
further arguments, the positional parameters will be
unset.</p>

<p style="margin-left:22%; margin-top: 1em">If no arguments
and no &lsquo;<b>&minus;&minus;</b>&rsquo; are given, then
the names and values of all parameters are printed on the
standard output. If the only argument is
&lsquo;<b>+</b>&rsquo;, the names of all parameters are
printed.</p>

<p style="margin-left:22%; margin-top: 1em">For historical
reasons, &lsquo;<b>set &minus;</b>&rsquo; is treated as
&lsquo;<b>set +xv</b>&rsquo; and &lsquo;<b>set &minus;</b>
<i>args</i>&rsquo; as &lsquo;<b>set +xv &minus;&minus;</b>
<i>args</i>&rsquo; when in any other emulation mode than
zsh&rsquo;s native mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>setcap</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/cap Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>setopt</b> [
{<b>+</b>|<b>&minus;</b>}<i>options</i> |
{<b>+</b>|<b>&minus;</b>}<b>o</b> <i>option_name</i> ] [
<i>name</i> ... ]</p>

<p style="margin-left:22%;">Set the options for the shell.
All options specified either with flags or by name are
set.</p>

<p style="margin-left:22%; margin-top: 1em">If no arguments
are supplied, the names of all options currently set are
printed. The form is chosen so as to minimize the
differences from the default options for the current
emulation (the default emulation being native <b>zsh</b>,
shown as <b>&lt;Z&gt;</b> in <i>zshoptions</i>(1)). Options
that are on by default for the emulation are shown with the
prefix <b>no</b> only if they are off, while other options
are shown without the prefix <b>no</b> and only if they are
on. In addition to options changed from the default state by
the user, any options activated automatically by the shell
(for example, <b>SHIN_STDIN</b> or <b>INTERACTIVE</b>) will
be shown in the list. The format is further modified by the
option <b>KSH_OPTION_PRINT</b>, however the rationale for
choosing options with or without the <b>no</b> prefix
remains the same in this case.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;m</b> flag is given the arguments are taken as
patterns (which should be quoted to protect them from
filename expansion), and all options with names matching
these patterns are set.</p>

<p style="margin-left:22%; margin-top: 1em">Note that a bad
option name does not cause execution of subsequent shell
code to be aborted; this is behaviour is different from that
of &lsquo;<b>set &minus;o</b>&rsquo;. This is because
<b>set</b> is regarded as a special builtin by the POSIX
standard, but <b>setopt</b> is not.</p>

<p style="margin-left:11%;"><b>shift</b> [ <i>n</i> ] [
<i>name</i> ... ]</p>

<p style="margin-left:22%;">The positional parameters
<b>${</b><i>n</i>+1<b>}</b> ... are renamed to <b>$1</b>
..., where <i>n</i> is an arithmetic expression that
defaults to 1. If any <i>name</i>s are given then the arrays
with these names are shifted instead of the positional
parameters.</p>

<p style="margin-left:11%;"><b>source</b> <i>file</i> [
<i>arg</i> ... ]</p>

<p style="margin-left:22%;">Same as &lsquo;<b>.</b>&rsquo;,
except that the current directory is always searched and is
always searched first, before directories in
<b>$path</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>stat</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/stat Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>suspend</b> [
<b>&minus;f</b> ]</p>

<p style="margin-left:22%;">Suspend the execution of the
shell (send it a <b>SIGTSTP</b>) until it receives a
<b>SIGCONT</b>. Unless the <b>&minus;f</b> option is given,
this will refuse to suspend a login shell.</p>

<p style="margin-left:11%;"><b>test</b> [ <i>arg</i> ... ]
<b><br>
[</b> [ <i>arg</i> ... ] <b>]</b></p>

<p style="margin-left:22%;">Like the system version of
<b>test</b>. Added for compatibility; use conditional
expressions instead (see the section &lsquo;Conditional
Expressions&rsquo;). The main differences between the
conditional expression syntax and the <b>test</b> and
<b>[</b> builtins are: these commands are not handled
syntactically, so for example an empty variable expansion
may cause an argument to be omitted; syntax errors cause
status 2 to be returned instead of a shell error; and
arithmetic operators expect integer arguments rather than
arithmetic expressions.</p>

<p style="margin-left:22%; margin-top: 1em">The command
attempts to implement POSIX and its extensions where these
are specified. Unfortunately there are intrinsic ambiguities
in the syntax; in particular there is no distinction between
test operators and strings that resemble them. The standard
attempts to resolve these for small numbers of arguments (up
to four); for five or more arguments compatibility cannot be
relied on. Users are urged wherever possible to use the
&lsquo;<b>[[</b>&rsquo; test syntax which does not have
these ambiguities.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>times</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Print the accumulated user and system times for the
shell and for processes run from the shell.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>trap</b> [ <i>arg</i> ] [
<i>sig</i> ... ]</p>

<p style="margin-left:22%;"><i>arg</i> is a series of
commands (usually quoted to protect it from immediate
evaluation by the shell) to be read and executed when the
shell receives any of the signals specified by one or more
<i>sig</i> args. Each <i>sig</i> can be given as a number,
or as the name of a signal either with or without the string
<b>SIG</b> in front (e.g. 1, HUP, and SIGHUP are all the
same signal).</p>

<p style="margin-left:22%; margin-top: 1em">If <i>arg</i>
is &lsquo;<b>&minus;</b>&rsquo;, then the specified signals
are reset to their defaults, or, if no <i>sig</i> args are
present, all traps are reset.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>arg</i>
is an empty string, then the specified signals are ignored
by the shell (and by the commands it invokes).</p>

<p style="margin-left:22%; margin-top: 1em">If <i>arg</i>
is omitted but one or more <i>sig</i> args are provided
(i.e. the first argument is a valid signal number or name),
the effect is the same as if <i>arg</i> had been specified
as &lsquo;<b>&minus;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The <b>trap</b>
command with no arguments prints a list of commands
associated with each signal.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>sig</i>
is <b>ZERR</b> then <i>arg</i> will be executed after each
command with a nonzero exit status. <b>ERR</b> is an alias
for <b>ZERR</b> on systems that have no <b>SIGERR</b> signal
(this is the usual case).</p>

<p style="margin-left:22%; margin-top: 1em">If <i>sig</i>
is <b>DEBUG</b> then <i>arg</i> will be executed before each
command if the option <b>DEBUG_BEFORE_CMD</b> is set (as it
is by default), else after each command. Here, a
&lsquo;command&rsquo; is what is described as a
&lsquo;sublist&rsquo; in the shell grammar, see the section
SIMPLE COMMANDS &amp; PIPELINES in <i>zshmisc</i>(1). If
<b>DEBUG_BEFORE_CMD</b> is set various additional features
are available. First, it is possible to skip the next
command by setting the option <b>ERR_EXIT</b>; see the
description of the <b>ERR_EXIT</b> option in
<i>zshoptions</i>(1). Also, the shell parameter
<b>ZSH_DEBUG_CMD</b> is set to the string corresponding to
the command to be executed following the trap. Note that
this string is reconstructed from the internal format and
may not be formatted the same way as the original text. The
parameter is unset after the trap is executed.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>sig</i>
is <b>0</b> or <b>EXIT</b> and the <b>trap</b> statement is
executed inside the body of a function, then the command
<i>arg</i> is executed after the function completes. The
value of <b>$?</b> at the start of execution is the exit
status of the shell or the return status of the function
exiting. If <i>sig</i> is <b>0</b> or <b>EXIT</b> and the
<b>trap</b> statement is not executed inside the body of a
function, then the command <i>arg</i> is executed when the
shell terminates; the trap runs before any <b>zshexit</b>
hook functions.</p>

<p style="margin-left:22%; margin-top: 1em"><b>ZERR</b>,
<b>DEBUG</b>, and <b>EXIT</b> traps are not executed inside
other traps. <b>ZERR</b> and <b>DEBUG</b> traps are kept
within subshells, while other traps are reset.</p>

<p style="margin-left:22%; margin-top: 1em">Note that traps
defined with the <b>trap</b> builtin are slightly different
from those defined as &lsquo;<b>TRAP</b><i>NAL</i> () { ...
}&rsquo;, as the latter have their own function environment
(line numbers, local variables, etc.) while the former use
the environment of the command in which they were called.
For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>trap
&rsquo;print $LINENO&rsquo; DEBUG</b></p>

<p style="margin-left:22%; margin-top: 1em">will print the
line number of a command executed after it has run,
while</p>

<p style="margin-left:32%; margin-top: 1em"><b>TRAPDEBUG()
{ print $LINENO; }</b></p>

<p style="margin-left:22%; margin-top: 1em">will always
print the number zero.</p>

<p style="margin-left:22%; margin-top: 1em">Alternative
signal names are allowed as described under <b>kill</b>
above. Defining a trap under either name causes any trap
under an alternative name to be removed. However, it is
recommended that for consistency users stick exclusively to
one name or another.</p>

<p style="margin-left:11%;"><b>true</b> [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">Do nothing and return an exit
status of 0.</p>

<p style="margin-left:11%;"><b>ttyctl &minus;fu</b></p>

<p style="margin-left:22%;">The <b>&minus;f</b> option
freezes the tty, and <b>&minus;u</b> unfreezes it. When the
tty is frozen, no changes made to the tty settings by
external programs will be honored by the shell, except for
changes in the size of the screen; the shell will simply
reset the settings to their previous values as soon as each
command exits or is suspended. Thus, <b>stty</b> and similar
programs have no effect when the tty is frozen. Without
options it reports whether the terminal is frozen or
not.</p>

<p style="margin-left:11%;"><b>type</b> [
<b>&minus;wfpams</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Equivalent to <b>whence
&minus;v</b>.</p>

<p style="margin-left:11%;"><b>typeset</b> [
{<b>+</b>|<b>&minus;</b>}<b>AEFHUafghklprtuxmz</b> ] [
<b>&minus;LRZi</b> [ <i>n</i> ]] [
<i>name</i>[<b>=</b><i>value</i>] ... ] <b><br>
typeset</b> &minus;T [ {<b>+|&minus;}Urux ] [ &minus;LRZ
[</b> <i>n</i> <b>]]</b>
<i>SCALAR</i><b>[=</b><i>value</i><b>]</b> <i>array</i>
<b>[</b> <i>sep</i> <b>]</b></p>

<p style="margin-left:22%;">Set or display attributes and
values for shell parameters.</p>

<p style="margin-left:22%; margin-top: 1em">A parameter is
created for each <i>name</i> that does not already refer to
one. When inside a function, a new parameter is created for
every <i>name</i> (even those that already exist), and is
unset again when the function completes. See &lsquo;Local
Parameters&rsquo; in <i>zshparam</i>(1). The same rules
apply to special shell parameters, which retain their
special attributes when made local.</p>

<p style="margin-left:22%; margin-top: 1em">For each
<i>name</i><b>=</b><i>value</i> assignment, the parameter
<i>name</i> is set to <i>value</i>. Note that arrays
currently cannot be assigned in <b>typeset</b> expressions,
only scalars and integers. Unless the option
<b>KSH_TYPESET</b> is set, normal expansion rules apply to
assignment arguments, so <i>value</i> may be split into
separate words; if the option is set, assignments which can
be recognised when expansion is performed are treated as
single words. For example the command <b>typeset vbl=$(echo
one two)</b> is treated as having one argument if
<b>KSH_TYPESET</b> is set, but otherwise is treated as
having the two arguments <b>vbl=one</b> and <b>two</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the shell
option <b>TYPESET_SILENT</b> is not set, for each remaining
<i>name</i> that refers to a parameter that is set, the name
and value of the parameter are printed in the form of an
assignment. Nothing is printed for newly&minus;created
parameters, or when any attribute flags listed below are
given along with the <i>name</i>. Using
&lsquo;<b>+</b>&rsquo; instead of minus to introduce an
attribute turns it off.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;p</b> option is given, parameters and values are
printed in the form of a typeset command and an assignment
(which will be printed separately for arrays and associative
arrays), regardless of other flags and options. Note that
the <b>&minus;h</b> flag on parameters is respected; no
value will be shown for these parameters.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;T</b> option is given, two or three arguments must
be present (an exception is that zero arguments are allowed
to show the list of parameters created in this fashion). The
first two are the name of a scalar and an array parameter
(in that order) that will be tied together in the manner of
<b>$PATH</b> and <b>$path</b>. The optional third argument
is a single&minus;character separator which will be used to
join the elements of the array to form the scalar; if
absent, a colon is used, as with <b>$PATH</b>. Only the
first character of the separator is significant; any
remaining characters are ignored. Only the scalar parameter
may be assigned an initial value. Both the scalar and the
array may otherwise be manipulated as normal. If one is
unset, the other will automatically be unset too. There is
no way of untying the variables without unsetting them, or
converting the type of one of them with another
<b>typeset</b> command; <b>+T</b> does not work, assigning
an array to <i>SCALAR</i> is an error, and assigning a
scalar to <i>array</i> sets it to be a single&minus;element
array. Note that both &lsquo;<b>typeset &minus;xT
...</b>&rsquo; and &lsquo;<b>export &minus;T ...</b>&rsquo;
work, but only the scalar will be marked for export. Setting
the value using the scalar version causes a split on all
separators (which cannot be quoted). It is possible to use
the same two tied variables with a different separator
character in which case the variables remain joined as
before but the separator is changed. This flag has a
different meaning when used with <b>&minus;f</b>; see
below.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;g</b> (global) flag is treated specially: it means
that any resulting parameter will not be restricted to local
scope. Note that this does not necessarily mean that the
parameter will be global, as the flag will apply to any
existing parameter (even if unset) from an enclosing
function. This flag does not affect the parameter after
creation, hence it has no effect when listing existing
parameters, nor does the flag <b>+g</b> have any effect
except in combination with <b>&minus;m</b> (see below).</p>

<p style="margin-left:22%; margin-top: 1em">If no
<i>name</i> is present, the names and values of all
parameters are printed. In this case the attribute flags
restrict the display to only those parameters that have the
specified attributes, and using &lsquo;<b>+</b>&rsquo;
rather than &lsquo;<b>&minus;</b>&rsquo; to introduce the
flag suppresses printing of the values of parameters when
there is no parameter name. Also, if the last option is the
word &lsquo;<b>+</b>&rsquo;, then names are printed but
values are not.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;m</b> flag is given the <i>name</i> arguments are
taken as patterns (which should be quoted). With no
attribute flags, all parameters (or functions with the
<b>&minus;f</b> flag) with matching names are printed (the
shell option <b>TYPESET_SILENT</b> is not used in this
case). Note that <b>&minus;m</b> is ignored if no patterns
are given. If the <b>+g</b> flag is combined with
<b>&minus;m</b>, a new local parameter is created for every
matching parameter that is not already local. Otherwise
<b>&minus;m</b> applies all other flags or assignments to
the existing parameters. Except when assignments are made
with <i>name</i><b>=</b><i>value</i>, using <b>+m</b> forces
the matching parameters to be printed, even inside a
function.</p>

<p style="margin-left:22%; margin-top: 1em">If no attribute
flags are given and either no <b>&minus;m</b> flag is
present or the <b>+m</b> form was used, each parameter name
printed is preceded by a list of the attributes of that
parameter (<b>array</b>, <b>association</b>,
<b>exported</b>, <b>integer</b>, <b>readonly</b>). If
<b>+m</b> is used with attribute flags, and all those flags
are introduced with <b>+</b>, the matching parameter names
are printed but their values are not.</p>

<p style="margin-left:22%; margin-top: 1em">Attribute flags
that transform the final value (<b>&minus;L</b>,
<b>&minus;R</b>, <b>&minus;Z</b>, <b>&minus;l</b>, <b>u</b>)
are only applied to the expanded value at the point of a
parameter expansion expression using &lsquo;<b>$</b>&rsquo;.
They are not applied when a parameter is retrieved
internally by the shell for any purpose.</p>

<p style="margin-left:22%; margin-top: 1em">The following
attribute flags may be specified:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;A</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The names refer to associative array parameters; see
&lsquo;Array Parameters&rsquo; in <i>zshparam</i>(1).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;L</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Left justify and remove leading blanks from
<i>value</i>. If <i>n</i> is nonzero, it defines the width
of the field. If <i>n</i> is zero, the width is determined
by the width of the value of the first assignment. In the
case of numeric parameters, the length of the complete value
assigned to the parameter is used to determine the width,
not the value that would be output.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The width is
the count of characters, which may be multibyte characters
if the <b>MULTIBYTE</b> option is in effect. Note that the
screen width of the character is not taken into account; if
this is required, use padding with parameter expansion flags
<b>${(ml</b><i>...</i><b>)</b><i>...</i><b>}</b> as
described in &lsquo;Parameter Expansion Flags&rsquo; in
<i>zshexpn</i>(1).</p>

<p style="margin-left:32%; margin-top: 1em">When the
parameter is expanded, it is filled on the right with blanks
or truncated if necessary to fit the field. Note truncation
can lead to unexpected results with numeric parameters.
Leading zeros are removed if the <b>&minus;Z</b> flag is
also set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;R</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Similar to <b>&minus;L</b>,
except that right justification is used; when the parameter
is expanded, the field is left filled with blanks or
truncated from the end. May not be combined with the
<b>&minus;Z</b> flag.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;U</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>For arrays (but not for associative arrays), keep only
the first occurrence of each duplicated value. This may also
be set for colon&minus;separated special parameters like
<b>PATH</b> or <b>FIGNORE</b>, etc. This flag has a
different meaning when used with <b>&minus;f</b>; see
below.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;Z</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Specially handled if set along with the <b>&minus;L</b>
flag. Otherwise, similar to <b>&minus;R</b>, except that
leading zeros are used for padding instead of blanks if the
first non&minus;blank character is a digit. Numeric
parameters are specially handled: they are always eligible
for padding with zeroes, and the zeroes are inserted at an
appropriate place in the output.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The names refer to array parameters. An array parameter
may be created this way, but it may not be assigned to in
the <b>typeset</b> statement. When displaying, both normal
and associative arrays are shown.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The names refer to functions rather than parameters. No
assignments can be made, and the only other valid flags are
<b>&minus;t</b>, <b>&minus;T</b>, <b>&minus;k</b>,
<b>&minus;u</b>, <b>&minus;U</b> and <b>&minus;z</b>. The
flag <b>&minus;t</b> turns on execution tracing for this
function; the flag <b>&minus;T</b> does the same, but turns
off tracing on any function called from the present one,
unless that function also has the <b>&minus;t</b> or
<b>&minus;T</b> flag. The <b>&minus;u</b> and
<b>&minus;U</b> flags cause the function to be marked for
autoloading; <b>&minus;U</b> also causes alias expansion to
be suppressed when the function is loaded. The <b>fpath</b>
parameter will be searched to find the function definition
when the function is first referenced; see the section
&lsquo;Functions&rsquo;. The <b>&minus;k</b> and
<b>&minus;z</b> flags make the function be loaded using
ksh&minus;style or zsh&minus;style autoloading respectively.
If neither is given, the setting of the KSH_AUTOLOAD option
determines how the function is loaded.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Hide: only useful for special parameters (those marked
&lsquo;&lt;S&gt;&rsquo; in the table in <i>zshparam</i>(1)),
and for local parameters with the same name as a special
parameter, though harmless for others. A special parameter
with this attribute will not retain its special effect when
made local. Thus after &lsquo;<b>typeset &minus;h
PATH</b>&rsquo;, a function containing &lsquo;<b>typeset
PATH</b>&rsquo; will create an ordinary local parameter
without the usual behaviour of <b>PATH</b>. Alternatively,
the local parameter may itself be given this attribute;
hence inside a function &lsquo;<b>typeset &minus;h
PATH</b>&rsquo; creates an ordinary local parameter and the
special <b>PATH</b> parameter is not altered in any way. It
is also possible to create a local parameter using
&lsquo;<b>typeset +h</b> <i>special</i>&rsquo;, where the
local copy of <i>special</i> will retain its special
properties regardless of having the <b>&minus;h</b>
attribute. Global special parameters loaded from shell
modules (currently those in <b>zsh/mapfile</b> and
<b>zsh/parameter</b>) are automatically given the
<b>&minus;h</b> attribute to avoid name clashes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;H</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Hide value: specifies that <b>typeset</b> will not
display the value of the parameter when listing parameters;
the display for such parameters is always as if the
&lsquo;<b>+</b>&rsquo; flag had been given. Use of the
parameter is in other respects normal, and the option does
not apply if the parameter is specified by name, or by
pattern with the <b>&minus;m</b> option. This is on by
default for the parameters in the <b>zsh/parameter</b> and
<b>zsh/mapfile</b> modules. Note, however, that unlike the
<b>&minus;h</b> flag this is also useful for
non&minus;special parameters.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Use an internal integer representation. If <i>n</i> is
nonzero it defines the output arithmetic base, otherwise it
is determined by the first assignment. Bases from 2 to 36
inclusive are allowed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Use an internal double&minus;precision floating point
representation. On output the variable will be converted to
scientific notation. If <i>n</i> is nonzero it defines the
number of significant figures to display; the default is
ten.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Use an internal double&minus;precision floating point
representation. On output the variable will be converted to
fixed&minus;point decimal notation. If <i>n</i> is nonzero
it defines the number of digits to display after the decimal
point; the default is ten.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Convert the result to lower case whenever the parameter
is expanded. The value is <i>not</i> converted when
assigned.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The given <i>name</i>s are marked readonly. Note that if
<i>name</i> is a special parameter, the readonly attribute
can be turned on, but cannot then be turned off.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Tags the named parameters. Tags have no special meaning
to the shell. This flag has a different meaning when used
with <b>&minus;f</b>; see above.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Convert the result to upper case whenever the parameter
is expanded. The value is <i>not</i> converted when
assigned. This flag has a different meaning when used with
<b>&minus;f</b>; see above.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Mark for automatic export to the environment of
subsequently executed commands. If the option
<b>GLOBAL_EXPORT</b> is set, this implies the option
<b>&minus;g</b>, unless <b>+g</b> is also explicitly given;
in other words the parameter is not made local to the
enclosing function. This is for compatibility with previous
versions of zsh.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ulimit</b> [ [
<b>&minus;SHacdfilmnpqrstvx</b> | <b>&minus;N</b>
<i>resource</i> [ <i>limit</i> ] ... ]</p>

<p style="margin-left:22%;">Set or display resource limits
of the shell and the processes started by the shell. The
value of <i>limit</i> can be a number in the unit specified
below or one of the values &lsquo;<b>unlimited</b>&rsquo;,
which removes the limit on the resource, or
&lsquo;<b>hard</b>&rsquo;, which uses the current value of
the hard limit on the resource.</p>

<p style="margin-left:22%; margin-top: 1em">By default,
only soft limits are manipulated. If the <b>&minus;H</b>
flag is given use hard limits instead of soft limits. If the
<b>&minus;S</b> flag is given together with the
<b>&minus;H</b> flag set both hard and soft limits.</p>

<p style="margin-left:22%; margin-top: 1em">If no options
are used, the file size limit (<b>&minus;f</b>) is
assumed.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>limit</i>
is omitted the current value of the specified resources are
printed. When more than one resource value is printed, the
limit name and unit is printed before each value.</p>

<p style="margin-left:22%; margin-top: 1em">When looping
over multiple resources, the shell will abort immediately if
it detects a badly formed argument. However, if it fails to
set a limit for some other reason it will continue trying to
set the remaining limits.</p>

<p style="margin-left:22%; margin-top: 1em">Not all the
following resources are supported on all systems. Running
<b>ulimit &minus;a</b> will show which are supported.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Lists all of the current resource limits.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Socket buffer size in bytes (N.B. not kilobytes)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>512&minus;byte blocks on the size of core dumps.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Kilobytes on the size of the data segment.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>512&minus;byte blocks on the size of files written.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of pending signals.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Kilobytes on the size of locked&minus;in memory.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Kilobytes on the size of physical memory.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>open file descriptors.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Bytes in POSIX message queues.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Kilobytes on the size of the stack.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>CPU seconds to be used.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of simultaneous threads available to the
user.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of processes available to the user.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Kilobytes on the size of virtual memory. On some systems
this refers to the limit called &lsquo;address
space&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;x</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The number of locks on files.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A resource may
also be specified by integer in the form
&lsquo;<b>&minus;N</b> <i>resource</i>&rsquo;, where
<i>resource</i> corresponds to the integer defined for the
resource by the operating system. This may be used to set
the limits for resources known to the shell which do not
correspond to option letters. Such limits will be shown by
number in the output of &lsquo;<b>ulimit
&minus;a</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The number may
alternatively be out of the range of limits compiled into
the shell. The shell will try to read or write the limit
anyway, and will report an error if this fails.</p>

<p style="margin-left:11%;"><b>umask</b> [ <b>&minus;S</b>
] [ <i>mask</i> ]</p>

<p style="margin-left:22%;">The umask is set to
<i>mask</i>. <i>mask</i> can be either an octal number or a
symbolic value as described in <i>chmod</i>(1). If
<i>mask</i> is omitted, the current value is printed. The
<b>&minus;S</b> option causes the mask to be printed as a
symbolic value. Otherwise, the mask is printed as an octal
number. Note that in the symbolic form the permissions you
specify are those which are to be allowed (not denied) to
the users specified.</p>

<p style="margin-left:11%;"><b>unalias</b></p>

<p style="margin-left:22%;">Same as <b>unhash
&minus;a</b>.</p>

<p style="margin-left:11%;"><b>unfunction</b></p>

<p style="margin-left:22%;">Same as <b>unhash
&minus;f</b>.</p>

<p style="margin-left:11%;"><b>unhash</b> [
<b>&minus;adfms</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Remove the element named
<i>name</i> from an internal hash table. The default is
remove elements from the command hash table. The
<b>&minus;a</b> option causes <b>unhash</b> to remove
regular or global aliases; note when removing a global
aliases that the argument must be quoted to prevent it from
being expanded before being passed to the command. The
<b>&minus;s</b> option causes <b>unhash</b> to remove suffix
aliases. The <b>&minus;f</b> option causes <b>unhash</b> to
remove shell functions. The <b>&minus;d</b> options causes
<b>unhash</b> to remove named directories. If the
<b>&minus;m</b> flag is given the arguments are taken as
patterns (should be quoted) and all elements of the
corresponding hash table with matching names will be
removed.</p>

<p style="margin-left:11%;"><b>unlimit</b> [
<b>&minus;hs</b> ] <i>resource</i> ...</p>

<p style="margin-left:22%;">The resource limit for each
<i>resource</i> is set to the hard limit. If the
<b>&minus;h</b> flag is given and the shell has appropriate
privileges, the hard resource limit for each <i>resource</i>
is removed. The resources of the shell process are only
changed if the <b>&minus;s</b> flag is given.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>unlimit</b> command is not made available by default when
the shell starts in a mode emulating another shell. It can
be made available with the command &lsquo;<b>zmodload
&minus;F zsh/rlimits b:unlimit</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>unset</b> [
<b>&minus;fmv</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Each named parameter is unset.
Local parameters remain local even if unset; they appear
unset within scope, but the previous value will still
reappear when the scope ends.</p>

<p style="margin-left:22%; margin-top: 1em">Individual
elements of associative array parameters may be unset by
using subscript syntax on <i>name</i>, which should be
quoted (or the entire command prefixed with <b>noglob</b>)
to protect the subscript from filename generation.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;m</b> flag is specified the arguments are taken as
patterns (should be quoted) and all parameters with matching
names are unset. Note that this cannot be used when
unsetting associative array elements, as the subscript will
be treated as part of the pattern.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;v</b> flag specifies that <i>name</i> refers to
parameters. This is the default behaviour.</p>

<p style="margin-left:22%; margin-top: 1em"><b>unset
&minus;f</b> is equivalent to <b>unfunction</b>.</p>

<p style="margin-left:11%;"><b>unsetopt</b> [
{<b>+</b>|<b>&minus;</b>}<i>options</i> |
{<b>+</b>|<b>&minus;</b>}<b>o</b> <i>option_name</i> ] [
<i>name</i> ... ]</p>

<p style="margin-left:22%;">Unset the options for the
shell. All options specified either with flags or by name
are unset. If no arguments are supplied, the names of all
options currently unset are printed. If the <b>&minus;m</b>
flag is given the arguments are taken as patterns (which
should be quoted to preserve them from being interpreted as
glob patterns), and all options with names matching these
patterns are unset.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>vared</b></p></td>
<td width="4%"></td>
<td width="67%">


<p>See the section &lsquo;Zle Builtins&rsquo; in
<i>zshzle</i>(1).</p> </td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>wait</b> [ <i>job</i> ...
]</p>

<p style="margin-left:22%;">Wait for the specified jobs or
processes. If <i>job</i> is not given then all currently
active child processes are waited for. Each <i>job</i> can
be either a job specification or the process ID of a job in
the job table. The exit status from this command is that of
the job waited for.</p>

<p style="margin-left:11%;"><b>whence</b> [
<b>&minus;vcwfpams</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">For each name, indicate how it
would be interpreted if used as a command name.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Produce a more verbose report.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Print the results in a <b>csh</b>&minus;like format.
This takes precedence over <b>&minus;v</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>For each <i>name</i>, print &lsquo;<i>name</i><b>:</b>
<i>word</i>&rsquo; where <i>word</i> is one of <b>alias</b>,
<b>builtin</b>, <b>command</b>, <b>function</b>,
<b>hashed</b>, <b>reserved</b> or <b>none</b>, according as
<i>name</i> corresponds to an alias, a built&minus;in
command, an external command, a shell function, a command
defined with the <b>hash</b> builtin, a reserved word, or is
not recognised. This takes precedence over <b>&minus;v</b>
and <b>&minus;c</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Causes the contents of a shell function to be displayed,
which would otherwise not happen unless the <b>&minus;c</b>
flag were used.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Do a path search for <i>name</i> even if it is an alias,
reserved word, shell function or builtin.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Do a search for all occurrences of <i>name</i>
throughout the command path. Normally only the first
occurrence is printed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The arguments are taken as patterns (should be quoted),
and the information is displayed for each command matching
one of these patterns.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>If a pathname contains symlinks, print the
symlink&minus;free pathname as well.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>where</b> [
<b>&minus;wpms</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Equivalent to <b>whence
&minus;ca</b>.</p>

<p style="margin-left:11%;"><b>which</b> [
<b>&minus;wpams</b> ] <i>name</i> ...</p>

<p style="margin-left:22%;">Equivalent to <b>whence
&minus;c</b>.</p>

<p style="margin-left:11%;"><b>zcompile</b> [
<b>&minus;U</b> ] [ <b>&minus;z</b> | <b>&minus;k</b> ] [
<b>&minus;R</b> | <b>&minus;M</b> ] <i>file</i> [
<i>name</i> ... ] <b><br>
zcompile &minus;ca</b> [ <b>&minus;m</b> ] [ <b>&minus;R</b>
| <b>&minus;M</b> ] <i>file</i> [ <i>name</i> ... ] <b><br>
zcompile &minus;t</b> <i>file</i> [ <i>name</i> ... ]</p>

<p style="margin-left:22%;">This builtin command can be
used to compile functions or scripts, storing the compiled
form in a file, and to examine files containing the compiled
form. This allows faster autoloading of functions and
execution of scripts by avoiding parsing of the text when
the files are read.</p>

<p style="margin-left:22%; margin-top: 1em">The first form
(without the <b>&minus;c</b>, <b>&minus;a</b> or
<b>&minus;t</b> options) creates a compiled file. If only
the <i>file</i> argument is given, the output file has the
name &lsquo;<i>file</i><b>.zwc</b>&rsquo; and will be placed
in the same directory as the <i>file</i>. The shell will
load the compiled file instead of the normal function file
when the function is autoloaded; see the section
&lsquo;Autoloading Functions&rsquo; in <i>zshmisc</i>(1) for
a description of how autoloaded functions are searched. The
extension <b>.zwc</b> stands for &lsquo;zsh word
code&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If there is at
least one <i>name</i> argument, all the named files are
compiled into the output <i>file</i> given as the first
argument. If <i>file</i> does not end in <b>.zwc</b>, this
extension is automatically appended. Files containing
multiple compiled functions are called &lsquo;digest&rsquo;
files, and are intended to be used as elements of the
<b>FPATH</b>/<b>fpath</b> special array.</p>

<p style="margin-left:22%; margin-top: 1em">The second
form, with the <b>&minus;c</b> or <b>&minus;a</b> options,
writes the compiled definitions for all the named functions
into <i>file</i>. For <b>&minus;c</b>, the names must be
functions currently defined in the shell, not those marked
for autoloading. Undefined functions that are marked for
autoloading may be written by using the <b>&minus;a</b>
option, in which case the <b>fpath</b> is searched and the
contents of the definition files for those functions, if
found, are compiled into <i>file</i>. If both
<b>&minus;c</b> and <b>&minus;a</b> are given, names of both
defined functions and functions marked for autoloading may
be given. In either case, the functions in files written
with the <b>&minus;c</b> or <b>&minus;a</b> option will be
autoloaded as if the <b>KSH_AUTOLOAD</b> option were
unset.</p>

<p style="margin-left:22%; margin-top: 1em">The reason for
handling loaded and not&minus;yet&minus;loaded functions
with different options is that some definition files for
autoloading define multiple functions, including the
function with the same name as the file, and, at the end,
call that function. In such cases the output of
&lsquo;<b>zcompile &minus;c</b>&rsquo; does not include the
additional functions defined in the file, and any other
initialization code in the file is lost. Using
&lsquo;<b>zcompile &minus;a</b>&rsquo; captures all this
extra information.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;m</b> option is combined with <b>&minus;c</b> or
<b>&minus;a</b>, the <i>name</i>s are used as patterns and
all functions whose names match one of these patterns will
be written. If no <i>name</i> is given, the definitions of
all functions currently defined or marked as autoloaded will
be written.</p>

<p style="margin-left:22%; margin-top: 1em">The third form,
with the <b>&minus;t</b> option, examines an existing
compiled file. Without further arguments, the names of the
original files compiled into it are listed. The first line
of output shows the version of the shell which compiled the
file and how the file will be used (i.e. by reading it
directly or by mapping it into memory). With arguments,
nothing is output and the return status is set to zero if
definitions for <i>all name</i>s were found in the compiled
file, and non&minus;zero if the definition for at least one
<i>name</i> was not found.</p>

<p style="margin-left:22%; margin-top: 1em">Other
options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;U</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Aliases are not expanded when compiling the <i>name</i>d
files.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;R</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>When the compiled file is read, its contents are copied
into the shell&rsquo;s memory, rather than
memory&minus;mapped (see <b>&minus;M</b>). This happens
automatically on systems that do not support memory
mapping.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">When compiling
scripts instead of autoloadable functions, it is often
desirable to use this option; otherwise the whole file,
including the code to define functions which have already
been defined, will remain mapped, consequently wasting
memory.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;M</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">The compiled file is mapped into
the shell&rsquo;s memory when read. This is done in such a
way that multiple instances of the shell running on the same
host will share this mapped file. If neither <b>&minus;R</b>
nor <b>&minus;M</b> is given, the <b>zcompile</b> builtin
decides what to do based on the size of the compiled
file.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;k</b></p></td>
<td width="7%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;z</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>These options are used when the compiled file contains
functions which are to be autoloaded. If <b>&minus;z</b> is
given, the function will be autoloaded as if the
<b>KSH_AUTOLOAD</b> option is <i>not</i> set, even if it is
set at the time the compiled file is read, while if the
<b>&minus;k</b> is given, the function will be loaded as if
<b>KSH_AUTOLOAD</b> <i>is</i> set. These options also take
precedence over any <b>&minus;k</b> or <b>&minus;z</b>
options specified to the <b>autoload</b> builtin. If neither
of these options is given, the function will be loaded as
determined by the setting of the <b>KSH_AUTOLOAD</b> option
at the time the compiled file is read.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">These options
may also appear as many times as necessary between the
listed <i>name</i>s to specify the loading style of all
following functions, up to the next <b>&minus;k</b> or
<b>&minus;z</b>.</p>

<p style="margin-left:32%; margin-top: 1em">The created
file always contains two versions of the compiled format,
one for big&minus;endian machines and one for
small&minus;endian machines. The upshot of this is that the
compiled file is machine independent and if it is read or
mapped, only one half of the file is actually used (and
mapped).</p>

<p style="margin-left:11%;"><b>zformat</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/zutil Module&rsquo; in <i>zshmodules</i>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>zftp</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/zftp Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>zle</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>See the section &lsquo;Zle Builtins&rsquo; in
<i>zshzle</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>zmodload</b> [
<b>&minus;dL</b> ] [ ... ] <b><br>
zmodload &minus;F</b> [ <b>&minus;lLme &minus;P param</b> ]
<i>module</i> [<b>+&minus;</b>]<i>feature...</i> <b><br>
zmodload &minus;e</b> [ <b>&minus;A</b> ] [ ... ] <b><br>
zmodload</b> [ <b>&minus;a</b> [ <b>&minus;bcpf</b> [
<b>&minus;I</b> ] ] ] [ <b>&minus;iL</b> ] ... <b><br>
zmodload &minus;u</b> [ <b>&minus;abcdpf</b> [
<b>&minus;I</b> ] ] [ <b>&minus;iL</b> ] ... <b><br>
zmodload &minus;A</b> [ <b>&minus;L</b> ] [
<i>modalias</i>[<b>=</b><i>module</i>] ... ] <b><br>
zmodload &minus;R</b> <i>modalias</i> ...</p>

<p style="margin-left:22%;">Performs operations relating to
zsh&rsquo;s loadable modules. Loading of modules while the
shell is running (&lsquo;dynamical loading&rsquo;) is not
available on all operating systems, or on all installations
on a particular operating system, although the
<b>zmodload</b> command itself is always available and can
be used to manipulate modules built into versions of the
shell executable without dynamical loading.</p>

<p style="margin-left:22%; margin-top: 1em">Without
arguments the names of all currently loaded binary modules
are printed. The <b>&minus;L</b> option causes this list to
be in the form of a series of <b>zmodload</b> commands.
Forms with arguments are: <b><br>
zmodload</b> [ <b>&minus;i</b> ] <i>name</i> ... <b><br>
zmodload &minus;u</b> [ <b>&minus;i</b> ] <i>name</i>
...</p>

<p style="margin-left:32%;">In the simplest case,
<b>zmodload</b> loads a binary module. The module must be in
a file with a name consisting of the specified <i>name</i>
followed by a standard suffix, usually
&lsquo;<b>.so</b>&rsquo; (&lsquo;<b>.sl</b>&rsquo; on HPUX).
If the module to be loaded is already loaded the duplicate
module is ignored. If <b>zmodload</b> detects an
inconsistency, such as an invalid module name or circular
dependency list, the current code block is aborted. Hence
&lsquo;<b>zmodload</b> <i>module</i>
<b>2&gt;/dev/null</b>&rsquo; is sufficient to test whether a
module is available. If it is available, the module is
loaded if necessary, while if it is not available,
non&minus;zero status is silently returned. The option
<b>&minus;i</b> is accepted for compatibility but has no
effect.</p>

<p style="margin-left:32%; margin-top: 1em">The
<i>name</i>d module is searched for in the same way a
command is, using <b>$module_path</b> instead of
<b>$path</b>. However, the path search is performed even
when the module name contains a &lsquo;<b>/</b>&rsquo;,
which it usually does. There is no way to prevent the path
search.</p>

<p style="margin-left:32%; margin-top: 1em">If the module
supports features (see below), <b>zmodload</b> tries to
enable all features when loading a module. If the module was
successfully loaded but not all features could be enabled,
<b>zmodload</b> returns status 2.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;u</b>, <b>zmodload</b> unloads modules. The same
<i>name</i> must be given that was given when the module was
loaded, but it is not necessary for the module to exist in
the file system. The <b>&minus;i</b> option suppresses the
error if the module is already unloaded (or was never
loaded).</p>

<p style="margin-left:32%; margin-top: 1em">Each module has
a boot and a cleanup function. The module will not be loaded
if its boot function fails. Similarly a module can only be
unloaded if its cleanup function runs successfully.</p>

<p style="margin-left:22%;"><b>zmodload &minus;F</b> [
<b>&minus;almLe &minus;P param</b> ] <i>module</i>
[<b>+&minus;</b>]<i>feature...</i></p>

<p style="margin-left:32%;"><b>zmodload &minus;F</b> allows
more selective control over the features provided by
modules. With no options apart from <b>&minus;F</b>, the
module named <i>module</i> is loaded, if it was not already
loaded, and the list of <i>feature</i>s is set to the
required state. If no <i>feature</i>s are specified, the
module is loaded, if it was not already loaded, but the
state of features is unchanged. Each feature may be preceded
by a <b>+</b> to turn the feature on, or <b>&minus;</b> to
turn it off; the <b>+</b> is assumed if neither character is
present. Any feature not explicitly mentioned is left in its
current state; if the module was not previously loaded this
means any such features will remain disabled. The return
status is zero if all features were set, 1 if the module
failed to load, and 2 if some features could not be set (for
example, a parameter couldn&rsquo;t be added because there
was a different parameter of the same name) but the module
was loaded.</p>

<p style="margin-left:32%; margin-top: 1em">The standard
features are builtins, conditions, parameters and math
functions; these are indicated by the prefix
&lsquo;<b>b:</b>&rsquo;, &lsquo;<b>c:</b>&rsquo;
(&lsquo;<b>C:</b>&rsquo; for an infix condition),
&lsquo;<b>p:</b>&rsquo; and &lsquo;<b>f:</b>&rsquo;,
respectively, followed by the name that the corresponding
feature would have in the shell. For example,
&lsquo;<b>b:strftime</b>&rsquo; indicates a builtin named
<b>strftime</b> and <b>p:EPOCHSECONDS</b> indicates a
parameter named <b>EPOCHSECONDS</b>. The module may provide
other (&lsquo;abstract&rsquo;) features of its own as
indicated by its documentation; these have no prefix.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;l</b> or <b>&minus;L</b>, features provided by the
module are listed. With <b>&minus;l</b> alone, a list of
features together with their states is shown, one feature
per line. With <b>&minus;L</b> alone, a <b>zmodload
&minus;F</b> command that would cause enabled features of
the module to be turned on is shown. With <b>&minus;lL</b>,
a <b>zmodload &minus;F</b> command that would cause all the
features to be set to their current state is shown. If one
of these combinations is given the option <b>&minus;P</b>
<i>param</i> then the parameter <b>param</b> is set to an
array of features, either features together with their state
or (if <b>&minus;L</b> alone is given) enabled features.</p>

<p style="margin-left:32%; margin-top: 1em">With the option
<b>&minus;L</b> the module name may be omitted; then a list
of all enabled features for all modules providing features
is printed in the form of <b>zmodload &minus;F</b> commands.
If <b>&minus;l</b> is also given, the state of both enabled
and disabled features is output in that form.</p>

<p style="margin-left:32%; margin-top: 1em">A set of
features may be provided together with <b>&minus;l</b> or
<b>&minus;L</b> and a module name; in that case only the
state of those features is considered. Each feature may be
preceded by <b>+</b> or <b>&minus;</b> but the character has
no effect. If no set of features is provided, all features
are considered.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;e</b>, the command first tests that the module is
loaded; if it is not, status 1 is returned. If the module is
loaded, the list of features given as an argument is
examined. Any feature given with no prefix is simply tested
to see if the module provides it; any feature given with a
prefix <b>+</b> or <b>&minus;</b> is tested to see if is
provided and in the given state. If the tests on all
features in the list succeed, status 0 is returned, else
status 1.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;m</b>, each entry in the given list of features is
taken as a pattern to be matched against the list of
features provided by the module. An initial <b>+</b> or
<b>&minus;</b> must be given explicitly. This may not be
combined with the <b>&minus;a</b> option as autoloads must
be specified explicitly.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;a</b>, the given list of features is marked for
autoload from the specified module, which may not yet be
loaded. An optional <b>+</b> may appear before the feature
name. If the feature is prefixed with <b>&minus;</b>, any
existing autoload is removed. The options <b>&minus;l</b>
and <b>&minus;L</b> may be used to list autoloads.
Autoloading is specific to individual features; when the
module is loaded only the requested feature is enabled.
Autoload requests are preserved if the module is
subsequently unloaded until an explicit &lsquo;<b>zmodload
&minus;Fa</b> <i>module</i>
<b>&minus;</b><i>feature</i>&rsquo; is issued. It is not an
error to request an autoload for a feature of a module that
is already loaded.</p>

<p style="margin-left:32%; margin-top: 1em">When the module
is loaded each autoload is checked against the features
actually provided by the module; if the feature is not
provided the autoload request is deleted. A warning message
is output; if the module is being loaded to provide a
different feature, and that autoload is successful, there is
no effect on the status of the current command. If the
module is already loaded at the time when <b>zmodload
&minus;Fa</b> is run, an error message is printed and status
1 returned.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zmodload
&minus;Fa</b> can be used with the <b>&minus;l</b>,
<b>&minus;L</b>, <b>&minus;e</b> and <b>&minus;P</b> options
for listing and testing the existence of autoloadable
features. In this case <b>&minus;l</b> is ignored if
<b>&minus;L</b> is specified. <b>zmodload &minus;FaL</b>
with no module name lists autoloads for all modules.</p>

<p style="margin-left:32%; margin-top: 1em">Note that only
standard features as described above can be autoloaded;
other features require the module to be loaded before
enabling.</p>

<p style="margin-left:22%;"><b>zmodload &minus;d</b> [
<b>&minus;L</b> ] [ <i>name</i> ] <b><br>
zmodload &minus;d</b> <i>name dep</i> ... <b><br>
zmodload &minus;ud</b> <i>name</i> [ <i>dep</i> ... ]</p>

<p style="margin-left:32%;">The <b>&minus;d</b> option can
be used to specify module dependencies. The modules named in
the second and subsequent arguments will be loaded before
the module named in the first argument.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;d</b> and one argument, all dependencies for that
module are listed. With <b>&minus;d</b> and no arguments,
all module dependencies are listed. This listing is by
default in a Makefile&minus;like format. The <b>&minus;L</b>
option changes this format to a list of <b>zmodload
&minus;d</b> commands.</p>

<p style="margin-left:32%; margin-top: 1em">If
<b>&minus;d</b> and <b>&minus;u</b> are both used,
dependencies are removed. If only one argument is given, all
dependencies for that module are removed.</p>

<p style="margin-left:22%;"><b>zmodload &minus;ab</b> [
<b>&minus;L</b> ] <b><br>
zmodload &minus;ab</b> [ <b>&minus;i</b> ] <i>name</i> [
<i>builtin</i> ... ] <b><br>
zmodload &minus;ub</b> [ <b>&minus;i</b> ] <i>builtin</i>
...</p>

<p style="margin-left:32%;">The <b>&minus;ab</b> option
defines autoloaded builtins. It defines the specified
<i>builtin</i>s. When any of those builtins is called, the
module specified in the first argument is loaded and all its
features are enabled (for selective control of features use
&lsquo;<b>zmodload &minus;F &minus;a</b>&rsquo; as described
above). If only the <i>name</i> is given, one builtin is
defined, with the same name as the module. <b>&minus;i</b>
suppresses the error if the builtin is already defined or
autoloaded, but not if another builtin of the same name is
already defined.</p>

<p style="margin-left:32%; margin-top: 1em">With
<b>&minus;ab</b> and no arguments, all autoloaded builtins
are listed, with the module name (if different) shown in
parentheses after the builtin name. The <b>&minus;L</b>
option changes this format to a list of <b>zmodload
&minus;a</b> commands.</p>

<p style="margin-left:32%; margin-top: 1em">If
<b>&minus;b</b> is used together with the <b>&minus;u</b>
option, it removes builtins previously defined with
<b>&minus;ab</b>. This is only possible if the builtin is
not yet loaded. <b>&minus;i</b> suppresses the error if the
builtin is already removed (or never existed).</p>

<p style="margin-left:32%; margin-top: 1em">Autoload
requests are retained if the module is subsequently unloaded
until an explicit &lsquo;<b>zmodload &minus;ub</b>
<i>builtin</i>&rsquo; is issued.</p>

<p style="margin-left:22%;"><b>zmodload &minus;ac</b> [
<b>&minus;IL</b> ] <b><br>
zmodload &minus;ac</b> [ <b>&minus;iI</b> ] <i>name</i> [
<i>cond</i> ... ] <b><br>
zmodload &minus;uc</b> [ <b>&minus;iI</b> ] <i>cond</i>
...</p>

<p style="margin-left:32%;">The <b>&minus;ac</b> option is
used to define autoloaded condition codes. The <i>cond</i>
strings give the names of the conditions defined by the
module. The optional <b>&minus;I</b> option is used to
define infix condition names. Without this option prefix
condition names are defined.</p>

<p style="margin-left:32%; margin-top: 1em">If given no
condition names, all defined names are listed (as a series
of <b>zmodload</b> commands if the <b>&minus;L</b> option is
given).</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>&minus;uc</b> option removes definitions for autoloaded
conditions.</p>

<p style="margin-left:22%;"><b>zmodload &minus;ap</b> [
<b>&minus;L</b> ] <b><br>
zmodload &minus;ap</b> [ <b>&minus;i</b> ] <i>name</i> [
<i>parameter</i> ... ] <b><br>
zmodload &minus;up</b> [ <b>&minus;i</b> ] <i>parameter</i>
...</p>

<p style="margin-left:32%;">The <b>&minus;p</b> option is
like the <b>&minus;b</b> and <b>&minus;c</b> options, but
makes <b>zmodload</b> work on autoloaded parameters
instead.</p>

<p style="margin-left:22%;"><b>zmodload &minus;af</b> [
<b>&minus;L</b> ] <b><br>
zmodload &minus;af</b> [ <b>&minus;i</b> ] <i>name</i> [
<i>function</i> ... ] <b><br>
zmodload &minus;uf</b> [ <b>&minus;i</b> ] <i>function</i>
...</p>

<p style="margin-left:32%;">The <b>&minus;f</b> option is
like the <b>&minus;b</b>, <b>&minus;p</b>, and
<b>&minus;c</b> options, but makes <b>zmodload</b> work on
autoloaded math functions instead.</p>

<p style="margin-left:22%;"><b>zmodload &minus;a</b> [
<b>&minus;L</b> ] <b><br>
zmodload &minus;a</b> [ <b>&minus;i</b> ] <i>name</i> [
<i>builtin</i> ... ] <b><br>
zmodload &minus;ua</b> [ <b>&minus;i</b> ] <i>builtin</i>
...</p>

<p style="margin-left:32%;">Equivalent to <b>&minus;ab</b>
and <b>&minus;ub</b>.</p>

<p style="margin-left:22%;"><b>zmodload &minus;e</b> [
<b>&minus;A</b> ] [ <i>string</i> ... ]</p>

<p style="margin-left:32%;">The <b>&minus;e</b> option
without arguments lists all loaded modules; if the
<b>&minus;A</b> option is also given, module aliases
corresponding to loaded modules are also shown. If arguments
are provided, nothing is printed; the return status is set
to zero if all <i>string</i>s given as arguments are names
of loaded modules and to one if at least on <i>string</i> is
not the name of a loaded module. This can be used to test
for the availability of things implemented by modules. In
this case, any aliases are automatically resolved and the
<b>&minus;A</b> flag is not used.</p>

<p style="margin-left:22%;"><b>zmodload &minus;A</b> [
<b>&minus;L</b> ] [ <i>modalias</i>[<b>=</b><i>module</i>]
... ]</p>

<p style="margin-left:32%;">For each argument, if both
<i>modalias</i> and <i>module</i> are given, define
<i>modalias</i> to be an alias for the module <i>module</i>.
If the module <i>modalias</i> is ever subsequently
requested, either via a call to <b>zmodload</b> or
implicitly, the shell will attempt to load <i>module</i>
instead. If <i>module</i> is not given, show the definition
of <i>modalias</i>. If no arguments are given, list all
defined module aliases. When listing, if the <b>&minus;L</b>
flag was also given, list the definition as a
<b>zmodload</b> command to recreate the alias.</p>

<p style="margin-left:32%; margin-top: 1em">The existence
of aliases for modules is completely independent of whether
the name resolved is actually loaded as a module: while the
alias exists, loading and unloading the module under any
alias has exactly the same effect as using the resolved
name, and does not affect the connection between the alias
and the resolved name which can be removed either by
<b>zmodload &minus;R</b> or by redefining the alias. Chains
of aliases (i.e. where the first resolved name is itself an
alias) are valid so long as these are not circular. As the
aliases take the same format as module names, they may
include path separators: in this case, there is no
requirement for any part of the path named to exist as the
alias will be resolved first. For example,
&lsquo;<b>any/old/alias</b>&rsquo; is always a valid
alias.</p>

<p style="margin-left:32%; margin-top: 1em">Dependencies
added to aliased modules are actually added to the resolved
module; these remain if the alias is removed. It is valid to
create an alias whose name is one of the standard shell
modules and which resolves to a different module. However,
if a module has dependencies, it will not be possible to use
the module name as an alias as the module will already be
marked as a loadable module in its own right.</p>

<p style="margin-left:32%; margin-top: 1em">Apart from the
above, aliases can be used in the <b>zmodload</b> command
anywhere module names are required. However, aliases will
not be shown in lists of loaded modules with a bare
&lsquo;<b>zmodload</b>&rsquo;.</p>

<p style="margin-left:22%;"><b>zmodload &minus;R</b>
<i>modalias</i> ...</p>

<p style="margin-left:32%;">For each <i>modalias</i>
argument that was previously defined as a module alias via
<b>zmodload &minus;A</b>, delete the alias. If any was not
defined, an error is caused and the remainder of the line is
ignored.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>zsh</b> makes no distinction between modules that were
linked into the shell and modules that are loaded
dynamically. In both cases this builtin command has to be
used to make available the builtins and other things defined
by modules (unless the module is autoloaded on these
definitions). This is true even for systems that don&rsquo;t
support dynamic loading of modules.</p>

<p style="margin-left:11%;"><b>zparseopts</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/zutil Module&rsquo; in <i>zshmodules</i>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>zprof</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/zprof Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>zpty</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/zpty Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>zregexparse</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/zutil Module&rsquo; in <i>zshmodules</i>(1).</p>

<p style="margin-left:11%;"><b>zsocket</b></p>

<p style="margin-left:22%;">See the section &lsquo;The
zsh/net/socket Module&rsquo; in <i>zshmodules</i>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>zstyle</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/zutil Module&rsquo; in
<i>zshmodules</i>(1).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ztcp</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>See the section &lsquo;The zsh/net/tcp Module&rsquo; in
<i>zshmodules</i>(1).</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshzle &minus; zsh command line
editor</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the
<b>ZLE</b> option is set (which it is by default in
interactive shells) and the shell input is attached to the
terminal, the user is able to edit command lines.</p>

<p style="margin-left:11%; margin-top: 1em">There are two
display modes. The first, multiline mode, is the default. It
only works if the <b>TERM</b> parameter is set to a valid
terminal type that can move the cursor up. The second,
single line mode, is used if <b>TERM</b> is invalid or
incapable of moving the cursor up, or if the
<b>SINGLE_LINE_ZLE</b> option is set. This mode is similar
to <b>ksh</b>, and uses no termcap sequences. If <b>TERM</b>
is &quot;emacs&quot;, the <b>ZLE</b> option will be unset by
default.</p>

<p style="margin-left:11%; margin-top: 1em">The parameters
<b>BAUD</b>, <b>COLUMNS</b>, and <b>LINES</b> are also used
by the line editor. See <i>Parameters Used By The Shell</i>
in <i>zshparam</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
<b>zle_highlight</b> is also used by the line editor; see
<i>Character Highlighting</i> below. Highlighting of special
characters and the region between the cursor and the mark
(as set with <b>set&minus;mark&minus;command</b> in Emacs
mode) is enabled by default; consult this reference for more
information. Irascible conservatives will wish to know that
all highlighting may be disabled by the following
setting:</p>


<p style="margin-left:22%; margin-top: 1em"><b>zle_highlight=(none)</b></p>

<h2>KEYMAPS
<a name="KEYMAPS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A keymap in ZLE
contains a set of bindings between key sequences and ZLE
commands. The empty key sequence cannot be bound.</p>

<p style="margin-left:11%; margin-top: 1em">There can be
any number of keymaps at any time, and each keymap has one
or more names. If all of a keymap&rsquo;s names are deleted,
it disappears. <b>bindkey</b> can be used to manipulate
keymap names.</p>

<p style="margin-left:11%; margin-top: 1em">Initially,
there are six keymaps:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>emacs</b></p></td>
<td width="4%"></td>
<td width="41%">


<p style="margin-top: 1em">EMACS emulation</p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>viins</b></p></td>
<td width="4%"></td>
<td width="41%">


<p>vi emulation &minus; insert mode</p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>vicmd</b></p></td>
<td width="4%"></td>
<td width="41%">


<p>vi emulation &minus; command mode</p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>isearch</b></p>

<p style="margin-left:22%;">incremental search mode</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">read a command name</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>.safe</b></p></td>
<td width="4%"></td>
<td width="23%">


<p>fallback keymap</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>.safe</b>&rsquo; keymap is special. It can never
be altered, and the name can never be removed. However, it
can be linked to other names, which can be removed. In the
future other special keymaps may be added; users should
avoid using names beginning with &lsquo;<b>.</b>&rsquo; for
their own keymaps.</p>

<p style="margin-left:11%; margin-top: 1em">In addition to
these names, either &lsquo;<b>emacs</b>&rsquo; or
&lsquo;<b>viins</b>&rsquo; is also linked to the name
&lsquo;<b>main</b>&rsquo;. If one of the <b>VISUAL</b> or
<b>EDITOR</b> environment variables contain the string
&lsquo;<b>vi</b>&rsquo; when the shell starts up then it
will be &lsquo;<b>viins</b>&rsquo;, otherwise it will be
&lsquo;<b>emacs</b>&rsquo;. <b>bindkey</b>&rsquo;s
<b>&minus;e</b> and <b>&minus;v</b> options provide a
convenient way to override this default choice.</p>

<p style="margin-left:11%; margin-top: 1em">When the editor
starts up, it will select the &lsquo;<b>main</b>&rsquo;
keymap. If that keymap doesn&rsquo;t exist, it will use
&lsquo;<b>.safe</b>&rsquo; instead.</p>

<p style="margin-left:11%; margin-top: 1em">In the
&lsquo;<b>.safe</b>&rsquo; keymap, each single key is bound
to <b>self&minus;insert</b>, except for ^J (line feed) and
^M (return) which are bound to <b>accept&minus;line</b>.
This is deliberately not pleasant to use; if you are using
it, it means you deleted the main keymap, and you should put
it back.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Reading
Commands</b> <br>
When ZLE is reading a command from the terminal, it may read
a sequence that is bound to some command and is also a
prefix of a longer bound string. In this case ZLE will wait
a certain time to see if more characters are typed, and if
not (or they don&rsquo;t match any longer string) it will
execute the binding. This timeout is defined by the
<b>KEYTIMEOUT</b> parameter; its default is 0.4 sec. There
is no timeout if the prefix string is not itself bound to a
command.</p>

<p style="margin-left:11%; margin-top: 1em">The key timeout
is also applied when ZLE is reading the bytes from a
multibyte character string when it is in the appropriate
mode. (This requires that the shell was compiled with
multibyte mode enabled; typically also the locale has
characters with the UTF&minus;8 encoding, although any
multibyte encoding known to the operating system is
supported.) If the second or a subsequent byte is not read
within the timeout period, the shell acts as if <b>?</b>
were typed and resets the input state.</p>

<p style="margin-left:11%; margin-top: 1em">As well as ZLE
commands, key sequences can be bound to other strings, by
using &lsquo;<b>bindkey &minus;s</b>&rsquo;. When such a
sequence is read, the replacement string is pushed back as
input, and the command reading process starts again using
these fake keystrokes. This input can itself invoke further
replacement strings, but in order to detect loops the
process will be stopped if there are twenty such
replacements without a real command being read.</p>

<p style="margin-left:11%; margin-top: 1em">A key sequence
typed by the user can be turned into a command name for use
in user&minus;defined widgets with the
<b>read&minus;command</b> widget, described below.</p>

<h2>ZLE BUILTINS
<a name="ZLE BUILTINS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The ZLE module
contains three related builtin commands. The <b>bindkey</b>
command manipulates keymaps and key bindings; the
<b>vared</b> command invokes ZLE on the value of a shell
parameter; and the <b>zle</b> command manipulates editing
widgets and allows command line access to ZLE commands from
within shell functions. <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;l</b> [
<b>&minus;L</b> ] [ <i>keymap</i> ... ] <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;d <br>
bindkey</b> [ <i>options</i> ] <b>&minus;D</b> <i>keymap</i>
... <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;A</b>
<i>old&minus;keymap new&minus;keymap</i> <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;N</b>
<i>new&minus;keymap</i> [ <i>old&minus;keymap</i> ] <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;m <br>
bindkey</b> [ <i>options</i> ] <b>&minus;r</b>
<i>in&minus;string</i> ... <b><br>
bindkey</b> [ <i>options</i> ] <b>&minus;s</b>
<i>in&minus;string out&minus;string</i> ... <b><br>
bindkey</b> [ <i>options</i> ] <i>in&minus;string
command</i> ... <b><br>
bindkey</b> [ <i>options</i> ] [ <i>in&minus;string</i>
]</p>

<p style="margin-left:22%;"><b>bindkey</b>&rsquo;s options
can be divided into three categories: keymap selection for
the current command, operation selection, and others. The
keymap selection options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Selects keymap &lsquo;<b>emacs</b>&rsquo; for any
operations by the current command, and also links
&lsquo;<b>emacs</b>&rsquo; to &lsquo;<b>main</b>&rsquo; so
that it is selected by default the next time the editor
starts.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Selects keymap &lsquo;<b>viins</b>&rsquo; for any
operations by the current command, and also links
&lsquo;<b>viins</b>&rsquo; to &lsquo;<b>main</b>&rsquo; so
that it is selected by default the next time the editor
starts.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Selects keymap &lsquo;<b>vicmd</b>&rsquo; for any
operations by the current command.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;M</b>
<i>keymap</i></p>

<p style="margin-left:32%;">The <i>keymap</i> specifies a
keymap name that is selected for any operations by the
current command.</p>

<p style="margin-left:22%; margin-top: 1em">If a keymap
selection is required and none of the options above are
used, the &lsquo;<b>main</b>&rsquo; keymap is used. Some
operations do not permit a keymap to be selected,
namely:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>List all existing keymap names; if any arguments are
given, list just those keymaps.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">If the
<b>&minus;L</b> option is also used, list in the form of
<b>bindkey</b> commands to create or link the keymaps.
&lsquo;<b>bindkey &minus;lL main</b>&rsquo; shows which
keymap is linked to &lsquo;<b>main</b>&rsquo;, if any, and
hence if the standard emacs or vi emulation is in effect.
This option does not show the <b>.safe</b> keymap because it
cannot be created in that fashion; however, neither is
&lsquo;<b>bindkey &minus;lL .safe</b>&rsquo; reported as an
error, it simply outputs nothing.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;d</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Delete all existing keymaps and
reset to the default state.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;D</b> <i>keymap</i>
...</p>

<p style="margin-left:32%;">Delete the named
<i>keymap</i>s.</p>

<p style="margin-left:22%;"><b>&minus;A</b>
<i>old&minus;keymap new&minus;keymap</i></p>

<p style="margin-left:32%;">Make the
<i>new&minus;keymap</i> name an alias for
<i>old&minus;keymap</i>, so that both names refer to the
same keymap. The names have equal standing; if either is
deleted, the other remains. If there is already a keymap
with the <i>new&minus;keymap</i> name, it is deleted.</p>

<p style="margin-left:22%;"><b>&minus;N</b>
<i>new&minus;keymap</i> [ <i>old&minus;keymap</i> ]</p>

<p style="margin-left:32%;">Create a new keymap, named
<i>new&minus;keymap</i>. If a keymap already has that name,
it is deleted. If an <i>old&minus;keymap</i> name is given,
the new keymap is initialized to be a duplicate of it,
otherwise the new keymap will be empty.</p>

<p style="margin-left:22%; margin-top: 1em">To use a newly
created keymap, it should be linked to <b>main</b>. Hence
the sequence of commands to create and use a new keymap
&lsquo;<b>mymap</b>&rsquo; initialized from the <b>emacs</b>
keymap (which remains unchanged) is:</p>

<p style="margin-left:32%; margin-top: 1em"><b>bindkey
&minus;N mymap emacs <br>
bindkey &minus;A mymap main</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that while
&lsquo;<b>bindkey &minus;A</b> <i>newmap</i>
<b>main</b>&rsquo; will work when <i>newmap</i> is
<b>emacs</b> or <b>viins</b>, it will not work for
<b>vicmd</b>, as switching from vi insert to command mode
becomes impossible.</p>

<p style="margin-left:22%; margin-top: 1em">The following
operations act on the &lsquo;<b>main</b>&rsquo; keymap if no
keymap selection option was given:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Add the built&minus;in set of meta&minus;key bindings to
the selected keymap. Only keys that are unbound or bound to
<b>self&minus;insert</b> are affected.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;r</b>
<i>in&minus;string</i> ...</p>

<p style="margin-left:32%;">Unbind the specified
<i>in&minus;string</i>s in the selected keymap. This is
exactly equivalent to binding the strings to
<b>undefined&minus;key</b>.</p>

<p style="margin-left:32%; margin-top: 1em">When
<b>&minus;R</b> is also used, interpret the
<i>in&minus;string</i>s as ranges.</p>

<p style="margin-left:32%; margin-top: 1em">When
<b>&minus;p</b> is also used, the <i>in&minus;string</i>s
specify prefixes. Any binding that has the given
<i>in&minus;string</i> as a prefix, not including the
binding for the <i>in&minus;string</i> itself, if any, will
be removed. For example,</p>

<p style="margin-left:43%; margin-top: 1em"><b>bindkey
&minus;rpM viins &rsquo;^[&rsquo;</b></p>

<p style="margin-left:32%; margin-top: 1em">will remove all
bindings in the vi&minus;insert keymap beginning with an
escape character (probably cursor keys), but leave the
binding for the escape character itself (probably
<b>vi&minus;cmd&minus;mode</b>). This is incompatible with
the option <b>&minus;R</b>.</p>

<p style="margin-left:22%;"><b>&minus;s</b>
<i>in&minus;string out&minus;string</i> ...</p>

<p style="margin-left:32%;">Bind each
<i>in&minus;string</i> to each <i>out&minus;string</i>. When
<i>in&minus;string</i> is typed, <i>out&minus;string</i>
will be pushed back and treated as input to the line editor.
When <b>&minus;R</b> is also used, interpret the
<i>in&minus;string</i>s as ranges.</p>

<p style="margin-left:22%;"><i>in&minus;string command</i>
...</p>

<p style="margin-left:32%;">Bind each
<i>in&minus;string</i> to each <i>command</i>. When
<b>&minus;R</b> is used, interpret the
<i>in&minus;string</i>s as ranges.</p>

<p style="margin-left:22%;">[ <i>in&minus;string</i> ]</p>

<p style="margin-left:32%;">List key bindings. If an
<i>in&minus;string</i> is specified, the binding of that
string in the selected keymap is displayed. Otherwise, all
key bindings in the selected keymap are displayed. (As a
special case, if the <b>&minus;e</b> or <b>&minus;v</b>
option is used alone, the keymap is <i>not</i> displayed
&minus; the implicit linking of keymaps is the only thing
that happens.)</p>

<p style="margin-left:32%; margin-top: 1em">When the option
<b>&minus;p</b> is used, the <i>in&minus;string</i> must be
present. The listing shows all bindings which have the given
key sequence as a prefix, not including any bindings for the
key sequence itself.</p>

<p style="margin-left:32%; margin-top: 1em">When the
<b>&minus;L</b> option is used, the list is in the form of
<b>bindkey</b> commands to create the key bindings.</p>

<p style="margin-left:11%; margin-top: 1em">When the
<b>&minus;R</b> option is used as noted above, a valid range
consists of two characters, with an optional
&lsquo;<b>&minus;</b>&rsquo; between them. All characters
between the two specified, inclusive, are bound as
specified.</p>

<p style="margin-left:11%; margin-top: 1em">For either
<i>in&minus;string</i> or <i>out&minus;string</i>, the
following escape sequences are recognised:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\a</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>bell character</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\b</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>backspace</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\e</b>, <b>\E</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>escape</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\f</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>form feed</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\n</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>linefeed (newline)</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\r</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>carriage return</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\t</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>horizontal tab</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\v</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>vertical tab</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\</b><i>NNN</i></p></td>
<td width="2%"></td>
<td width="44%">


<p>character code in octal</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\x</b><i>NN</i></p></td>
<td width="2%"></td>
<td width="44%">


<p>character code in hexadecimal</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\M</b>[<b>&minus;</b>]<i>X</i></p></td>
<td width="2%"></td>
<td width="44%">


<p>character with meta bit set</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>\C</b>[<b>&minus;</b>]<i>X</i></p></td>
<td width="2%"></td>
<td width="44%">


<p>control character</p></td>
<td width="34%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>^</b><i>X</i></p></td>
<td width="2%"></td>
<td width="44%">


<p>control character</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In all other
cases, &lsquo;<b>\</b>&rsquo; escapes the following
character. Delete is written as &lsquo;<b>^?</b>&rsquo;.
Note that &lsquo;<b>\M^?</b>&rsquo; and
&lsquo;<b>^\M?</b>&rsquo; are not the same, and that (unlike
emacs), the bindings &lsquo;<b>\M&minus;</b><i>X</i>&rsquo;
and &lsquo;<b>\e</b><i>X</i>&rsquo; are entirely distinct,
although they are initialized to the same bindings by
&lsquo;<b>bindkey &minus;m</b>&rsquo;. <b><br>
vared</b> [ <b>&minus;Aache</b> ] [ <b>&minus;p</b>
<i>prompt</i> ] [ <b>&minus;r</b> <i>rprompt</i> ] <br>
[ <b>&minus;M</b> <i>main&minus;keymap</i> ] [
<b>&minus;m</b> <i>vicmd&minus;keymap</i> ] <br>
[ <b>&minus;t</b> <i>tty</i> ] <i>name</i></p>

<p style="margin-left:22%;">The value of the parameter
<i>name</i> is loaded into the edit buffer, and the line
editor is invoked. When the editor exits, <i>name</i> is set
to the string value returned by the editor. When the
<b>&minus;c</b> flag is given, the parameter is created if
it doesn&rsquo;t already exist. The <b>&minus;a</b> flag may
be given with <b>&minus;c</b> to create an array parameter,
or the <b>&minus;A</b> flag to create an associative array.
If the type of an existing parameter does not match the type
to be created, the parameter is unset and recreated.</p>

<p style="margin-left:22%; margin-top: 1em">If an array or
array slice is being edited, separator characters as defined
in <b>$IFS</b> will be shown quoted with a backslash, as
will backslashes themselves. Conversely, when the edited
text is split into an array, a backslash quotes an
immediately following separator character or backslash; no
other special handling of backslashes, or any handling of
quotes, is performed.</p>

<p style="margin-left:22%; margin-top: 1em">Individual
elements of existing array or associative array parameters
may be edited by using subscript syntax on <i>name</i>. New
elements are created automatically, even without
<b>&minus;c</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;p</b> flag is given, the following string will be
taken as the prompt to display at the left. If the
<b>&minus;r</b> flag is given, the following string gives
the prompt to display at the right. If the <b>&minus;h</b>
flag is specified, the history can be accessed from ZLE. If
the <b>&minus;e</b> flag is given, typing <b>^D</b>
(Control&minus;D) on an empty line causes <b>vared</b> to
exit immediately with a non&minus;zero return value.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;M</b> option gives a keymap to link to the
<b>main</b> keymap during editing, and the <b>&minus;m</b>
option gives a keymap to link to the <b>vicmd</b> keymap
during editing. For vi&minus;style editing, this allows a
pair of keymaps to override <b>viins</b> and <b>vicmd</b>.
For emacs&minus;style editing, only <b>&minus;M</b> is
normally needed but the <b>&minus;m</b> option may still be
used. On exit, the previous keymaps will be restored.</p>

<p style="margin-left:22%; margin-top: 1em">If
&lsquo;<b>&minus;t</b> <i>tty</i>&rsquo; is given,
<i>tty</i> is the name of a terminal device to be used
instead of the default <b>/dev/tty</b>. If <i>tty</i> does
not refer to a terminal an error is reported.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>zle</b></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>zle &minus;l</b> [
<b>&minus;L</b> | <b>&minus;a</b> ] [ <i>string</i> ... ]
<b><br>
zle &minus;D</b> <i>widget</i> ... <b><br>
zle &minus;A</b> <i>old&minus;widget new&minus;widget</i>
<b><br>
zle &minus;N</b> <i>widget</i> [ <i>function</i> ] <b><br>
zle &minus;C</b> <i>widget completion&minus;widget
function</i> <b><br>
zle &minus;R</b> [ <b>&minus;c</b> ] [
<i>display&minus;string</i> ] [ <i>string</i> ... ] <b><br>
zle &minus;M</b> <i>string</i> <b><br>
zle &minus;U</b> <i>string</i> <b><br>
zle &minus;K</b> <i>keymap</i> <b><br>
zle &minus;F</b> [ <b>&minus;L</b> ] [ <i>fd</i> [
<i>handler</i> ] ]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>zle &minus;I</b></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>zle &minus;T</b> [ <b>tc</b>
<i>function</i> | <b>&minus;r tc</b> | <b>&minus;L</b> ]
<b><br>
zle</b> <i>widget</i> <b>[ &minus;n</b> <i>num</i> <b>] [
&minus;Nw ] [ &minus;K</b> <i>keymap</i> <b>]</b>
<i>args</i> ...</p>

<p style="margin-left:22%;">The <b>zle</b> builtin performs
a number of different actions concerning ZLE.</p>

<p style="margin-left:22%; margin-top: 1em">With no options
and no arguments, only the return status will be set. It is
zero if ZLE is currently active and widgets could be invoked
using this builtin command and non&minus;zero otherwise.
Note that even if non&minus;zero status is returned, zle may
still be active as part of the completion system; this does
not allow direct calls to ZLE widgets.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise,
which operation it performs depends on its options: <b><br>
&minus;l</b> [ <b>&minus;L</b> | <b>&minus;a</b> ]</p>

<p style="margin-left:32%;">List all existing
user&minus;defined widgets. If the <b>&minus;L</b> option is
used, list in the form of <b>zle</b> commands to create the
widgets.</p>

<p style="margin-left:32%; margin-top: 1em">When combined
with the <b>&minus;a</b> option, all widget names are
listed, including the builtin ones. In this case the
<b>&minus;L</b> option is ignored.</p>

<p style="margin-left:32%; margin-top: 1em">If at least one
<i>string</i> is given, and <b>&minus;a</b> is present or
<b>&minus;L</b> is not used, nothing will be printed. The
return status will be zero if all <i>string</i>s are names
of existing widgets and non&minus;zero if at least one
<i>string</i> is not a name of a defined widget. If
<b>&minus;a</b> is also present, all widget names are used
for the comparison including builtin widgets, else only
user&minus;defined widgets are used.</p>

<p style="margin-left:32%; margin-top: 1em">If at least one
<i>string</i> is present and the <b>&minus;L</b> option is
used, user&minus;defined widgets matching any <i>string</i>
are listed in the form of <b>zle</b> commands to create the
widgets.</p>

<p style="margin-left:22%;"><b>&minus;D</b> <i>widget</i>
...</p>

<p style="margin-left:32%;">Delete the named
<i>widget</i>s.</p>

<p style="margin-left:22%;"><b>&minus;A</b>
<i>old&minus;widget new&minus;widget</i></p>

<p style="margin-left:32%;">Make the
<i>new&minus;widget</i> name an alias for
<i>old&minus;widget</i>, so that both names refer to the
same widget. The names have equal standing; if either is
deleted, the other remains. If there is already a widget
with the <i>new&minus;widget</i> name, it is deleted.</p>

<p style="margin-left:22%;"><b>&minus;N</b> <i>widget</i> [
<i>function</i> ]</p>

<p style="margin-left:32%;">Create a user&minus;defined
widget. If there is already a widget with the specified
name, it is overwritten. When the new widget is invoked from
within the editor, the specified shell <i>function</i> is
called. If no function name is specified, it defaults to the
same name as the widget. For further information, see the
section <i>Widgets</i> in <i>zshzle</i>(1).</p>

<p style="margin-left:22%;"><b>&minus;C</b> <i>widget
completion&minus;widget function</i></p>

<p style="margin-left:32%;">Create a user&minus;defined
completion widget named <i>widget</i>. The completion widget
will behave like the built&minus;in completion&minus;widget
whose name is given as <i>completion&minus;widget</i>. To
generate the completions, the shell function <i>function</i>
will be called. For further information, see
<i>zshcompwid</i>(1).</p>

<p style="margin-left:22%;"><b>&minus;R</b> [
<b>&minus;c</b> ] [ <i>display&minus;string</i> ] [
<i>string</i> ... ]</p>

<p style="margin-left:32%;">Redisplay the command line;
this is to be called from within a user&minus;defined widget
to allow changes to become visible. If a
<i>display&minus;string</i> is given and not empty, this is
shown in the status line (immediately below the line being
edited).</p>

<p style="margin-left:32%; margin-top: 1em">If the optional
<i>string</i>s are given they are listed below the prompt in
the same way as completion lists are printed. If no
<i>string</i>s are given but the <b>&minus;c</b> option is
used such a list is cleared.</p>

<p style="margin-left:32%; margin-top: 1em">Note that this
option is only useful for widgets that do not exit
immediately after using it because the strings displayed
will be erased immediately after return from the widget.</p>

<p style="margin-left:32%; margin-top: 1em">This command
can safely be called outside user defined widgets; if zle is
active, the display will be refreshed, while if zle is not
active, the command has no effect. In this case there will
usually be no other arguments.</p>

<p style="margin-left:32%; margin-top: 1em">The status is
zero if zle was active, else one.</p>

<p style="margin-left:22%;"><b>&minus;M</b>
<i>string</i></p>

<p style="margin-left:32%;">As with the <b>&minus;R</b>
option, the <i>string</i> will be displayed below the
command line; unlike the <b>&minus;R</b> option, the string
will not be put into the status line but will instead be
printed normally below the prompt. This means that the
<i>string</i> will still be displayed after the widget
returns (until it is overwritten by subsequent
commands).</p>

<p style="margin-left:22%;"><b>&minus;U</b>
<i>string</i></p>

<p style="margin-left:32%;">This pushes the characters in
the <i>string</i> onto the input stack of ZLE. After the
widget currently executed finishes ZLE will behave as if the
characters in the <i>string</i> were typed by the user.</p>

<p style="margin-left:32%; margin-top: 1em">As ZLE uses a
stack, if this option is used repeatedly the last string
pushed onto the stack will be processed first. However, the
characters in each <i>string</i> will be processed in the
order in which they appear in the string.</p>

<p style="margin-left:22%;"><b>&minus;K</b>
<i>keymap</i></p>

<p style="margin-left:32%;">Selects the keymap named
<i>keymap</i>. An error message will be displayed if there
is no such keymap.</p>

<p style="margin-left:32%; margin-top: 1em">This keymap
selection affects the interpretation of following keystrokes
within this invocation of ZLE. Any following invocation
(e.g., the next command line) will start as usual with the
&lsquo;<b>main</b>&rsquo; keymap selected.</p>

<p style="margin-left:22%;"><b>&minus;F</b> [
<b>&minus;L</b> ] [ <i>fd</i> [ <i>handler</i> ] ]</p>

<p style="margin-left:32%;">Only available if your system
supports one of the &lsquo;poll&rsquo; or
&lsquo;select&rsquo; system calls; most modern systems
do.</p>

<p style="margin-left:32%; margin-top: 1em">Installs
<i>handler</i> (the name of a shell function) to handle
input from file descriptor <i>fd</i>. When zle is attempting
to read data, it will examine both the terminal and the list
of handled <i>fd</i>&rsquo;s. If data becomes available on a
handled <i>fd</i>, zle will call <i>handler</i> with the fd
which is ready for reading as the only argument. If the
handler produces output to the terminal, it should call
&lsquo;<b>zle &minus;I</b>&rsquo; before doing so (see
below). The handler should not attempt to read from the
terminal. Note that zle makes no attempt to check whether
this fd is actually readable when installing the handler.
The user must make their own arrangements for handling the
file descriptor when zle is not active.</p>

<p style="margin-left:32%; margin-top: 1em">Any number of
handlers for any number of readable file descriptors may be
installed. Installing a handler for an <i>fd</i> which is
already handled causes the existing handler to be
replaced.</p>

<p style="margin-left:32%; margin-top: 1em">If no
<i>handler</i> is given, but an <i>fd</i> is present, any
handler for that <i>fd</i> is removed. If there is none, an
error message is printed and status 1 is returned.</p>

<p style="margin-left:32%; margin-top: 1em">If no arguments
are given, or the <b>&minus;L</b> option is supplied, a list
of handlers is printed in a form which can be stored for
later execution.</p>

<p style="margin-left:32%; margin-top: 1em">An <i>fd</i>
(but not a <i>handler</i>) may optionally be given with the
<b>&minus;L</b> option; in this case, the function will list
the handler if any, else silently return status 1.</p>

<p style="margin-left:32%; margin-top: 1em">Note that this
feature should be used with care. Activity on one of the
<i>fd</i>&rsquo;s which is not properly handled can cause
the terminal to become unusable.</p>

<p style="margin-left:32%; margin-top: 1em">Here is a
simple example of using this feature. A connection to a
remote TCP port is created using the ztcp command; see the
description of the <b>zsh/net/tcp</b> module in
<i>zshmodules</i>(1). Then a handler is installed which
simply prints out any data which arrives on this connection.
Note that &lsquo;select&rsquo; will indicate that the file
descriptor needs handling if the remote side has closed the
connection; we handle that by testing for a failed read.</p>

<p style="margin-left:43%;"><b>if ztcp pwspc 2811; then
<br>
tcpfd=$REPLY <br>
handler() { <br>
zle &minus;I <br>
local line <br>
if ! read &minus;r line &lt;&amp;$1; then <br>
# select marks this fd if we reach EOF, <br>
# so handle this specially. <br>
print &quot;[Read on fd $1 failed, removing.]&quot;
&gt;&amp;2 <br>
zle &minus;F $1 <br>
return 1 <br>
fi <br>
print &minus;r &minus; $line <br>
} <br>
zle &minus;F $tcpfd handler <br>
fi</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;I</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Unusually, this option is most useful outside ordinary
widget functions, though it may be used within if normal
output to the terminal is required. It invalidates the
current zle display in preparation for output; typically
this will be from a trap function. It has no effect if zle
is not active. When a trap exits, the shell checks to see if
the display needs restoring, hence the following will print
output in such a way as not to disturb the line being
edited:</p> </td></tr>
</table>

<p style="margin-left:43%; margin-top: 1em"><b>TRAPUSR1() {
<br>
# Invalidate zle display <br>
[[ &minus;o zle ]] &amp;&amp; zle &minus;I <br>
# Show output <br>
print Hello <br>
}</b></p>

<p style="margin-left:32%; margin-top: 1em">In general, the
trap function may need to test whether zle is active before
using this method (as shown in the example), since the
<b>zsh/zle</b> module may not even be loaded; if it is not,
the command can be skipped.</p>

<p style="margin-left:32%; margin-top: 1em">It is possible
to call &lsquo;<b>zle &minus;I</b>&rsquo; several times
before control is returned to the editor; the display will
only be invalidated the first time to minimise
disruption.</p>

<p style="margin-left:32%; margin-top: 1em">Note that there
are normally better ways of manipulating the display from
within zle widgets; see, for example, &lsquo;<b>zle
&minus;R</b>&rsquo; above.</p>

<p style="margin-left:32%; margin-top: 1em">The returned
status is zero if zle was invalidated, even though this may
have been by a previous call to &lsquo;<b>zle
&minus;I</b>&rsquo; or by a system notification. To test if
a zle widget may be called at this point, execute <b>zle</b>
with no arguments and examine the return status.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;T</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">This is used to add, list or
remove internal transformations on the processing performed
by the line editor. It is typically used only for debugging
or testing and is therefore of little interest to the
general user.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">&lsquo;<b>zle
&minus;T</b> <i>transformation func</i>&rsquo; specifies
that the given <i>transformation</i> (see below) is effected
by shell function <i>func</i>.</p>

<p style="margin-left:32%; margin-top: 1em">&lsquo;<b>zle
&minus;Tr</b> <i>transformation</i>&rsquo; removes the given
<i>transformation</i> if it was present (it is not an error
if none was).</p>

<p style="margin-left:32%; margin-top: 1em">&lsquo;<b>zle
&minus;TL</b>&rsquo; can be used to list all transformations
currently in operation.</p>

<p style="margin-left:32%; margin-top: 1em">Currently the
only transformation is <b>tc</b>. This is used instead of
outputting termcap codes to the terminal. When the
transformation is in operation the shell function is passed
the termcap code that would be output as its first argument;
if the operation required a numeric argument, that is passed
as a second argument. The function should set the shell
variable <b>REPLY</b> to the transformed termcap code.
Typically this is used to produce some simply formatted
version of the code and optional argument for debugging or
testing. Note that this transformation is not applied to
other non&minus;printing characters such as carriage returns
and newlines.</p>

<p style="margin-left:22%;"><i>widget</i> <b>[ &minus;n</b>
<i>num</i> <b>] [ &minus;Nw ] [ &minus;K</b> <i>keymap</i>
<b>]</b> <i>args</i> ...</p>

<p style="margin-left:32%;">Invoke the specified widget.
This can only be done when ZLE is active; normally this will
be within a user&minus;defined widget.</p>

<p style="margin-left:32%; margin-top: 1em">With the
options <b>&minus;n</b> and <b>&minus;N</b>, the current
numerical argument will be saved and then restored after the
call to <b>widget</b>; &lsquo;<b>&minus;n</b>
<i>num</i>&rsquo; sets the numerical argument temporarily to
<i>num</i>, while &lsquo;<b>&minus;N</b>&rsquo; sets it to
the default, i.e. as if there were none.</p>

<p style="margin-left:32%; margin-top: 1em">With the option
<b>&minus;K</b>, <i>keymap</i> will be used as the current
keymap during the execution of the widget. The previous
keymap will be restored when the widget exits.</p>

<p style="margin-left:32%; margin-top: 1em">Normally,
calling a widget in this way does not set the special
parameter <b>WIDGET</b> and related parameters, so that the
environment appears as if the top&minus;level widget called
by the user were still active. With the option
<b>&minus;w</b>, <b>WIDGET</b> and related parameters are
set to reflect the widget being executed by the <b>zle</b>
call.</p>

<p style="margin-left:32%; margin-top: 1em">Any further
arguments will be passed to the widget; note that as
standard argument handling is performed, any general
argument list should be preceded by <b>&minus;&minus;</b>.
If it is a shell function, these are passed down as
positional parameters; for builtin widgets it is up to the
widget in question what it does with them. Currently
arguments are only handled by the incremental&minus;search
commands, the <b>history&minus;search&minus;forward</b> and
<b>&minus;backward</b> and the corresponding functions
prefixed by <b>vi&minus;</b>, and by
<b>universal&minus;argument</b>. No error is flagged if the
command does not use the arguments, or only uses some of
them.</p>

<p style="margin-left:32%; margin-top: 1em">The return
status reflects the success or failure of the operation
carried out by the widget, or if it is a user&minus;defined
widget the return status of the shell function.</p>

<p style="margin-left:32%; margin-top: 1em">A
non&minus;zero return status causes the shell to beep when
the widget exits, unless the <b>BEEP</b> options was unset
or the widget was called via the <b>zle</b> command. Thus if
a user defined widget requires an immediate beep, it should
call the <b>beep</b> widget directly.</p>

<h2>WIDGETS
<a name="WIDGETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All actions in
the editor are performed by &lsquo;widgets&rsquo;. A
widget&rsquo;s job is simply to perform some small action.
The ZLE commands that key sequences in keymaps are bound to
are in fact widgets. Widgets can be user&minus;defined or
built in.</p>

<p style="margin-left:11%; margin-top: 1em">The standard
widgets built into ZLE are listed in Standard Widgets below.
Other built&minus;in widgets can be defined by other modules
(see <i>zshmodules</i>(1)). Each built&minus;in widget has
two names: its normal canonical name, and the same name
preceded by a &lsquo;<b>.</b>&rsquo;. The
&lsquo;<b>.</b>&rsquo; name is special: it can&rsquo;t be
rebound to a different widget. This makes the widget
available even when its usual name has been redefined.</p>


<p style="margin-left:11%; margin-top: 1em">User&minus;defined
widgets are defined using &lsquo;<b>zle &minus;N</b>&rsquo;,
and implemented as shell functions. When the widget is
executed, the corresponding shell function is executed, and
can perform editing (or other) actions. It is recommended
that user&minus;defined widgets should not have names
starting with &lsquo;<b>.</b>&rsquo;.</p>

<h2>USER&minus;DEFINED WIDGETS
<a name="USER&minus;DEFINED WIDGETS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">User&minus;defined
widgets, being implemented as shell functions, can execute
any normal shell command. They can also run other widgets
(whether built&minus;in or user&minus;defined) using the
<b>zle</b> builtin command. The standard input of the
function is closed to prevent external commands from
unintentionally blocking ZLE by reading from the terminal,
but <b>read &minus;k</b> or <b>read &minus;q</b> can be used
to read characters. Finally, they can examine and edit the
ZLE buffer being edited by reading and setting the special
parameters described below.</p>

<p style="margin-left:11%; margin-top: 1em">These special
parameters are always available in widget functions, but are
not in any way special outside ZLE. If they have some normal
value outside ZLE, that value is temporarily inaccessible,
but will return when the widget function exits. These
special parameters in fact have local scope, like parameters
created in a function using <b>local</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Inside
completion widgets and traps called while ZLE is active,
these parameters are available read&minus;only. <b><br>
BUFFER</b> (scalar)</p>

<p style="margin-left:22%;">The entire contents of the edit
buffer. If it is written to, the cursor remains at the same
offset, unless that would put it outside the buffer.</p>

<p style="margin-left:11%;"><b>BUFFERLINES</b>
(integer)</p>

<p style="margin-left:22%;">The number of screen lines
needed for the edit buffer currently displayed on screen
(i.e. without any changes to the preceding parameters done
after the last redisplay); read&minus;only.</p>

<p style="margin-left:11%;"><b>CONTEXT</b> (scalar)</p>

<p style="margin-left:22%;">The context in which zle was
called to read a line; read&minus;only. One of the
values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>start</p></td>
<td width="2%"></td>
<td width="75%">


<p>The start of a command line (at prompt <b>PS1</b>).</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>cont</p></td>
<td width="2%"></td>
<td width="75%">


<p>A continuation to a command line (at prompt
<b>PS2</b>).</p> </td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>select</p></td>
<td width="2%"></td>
<td width="75%">


<p>In a <b>select</b> loop.</p></td>
<td width="3%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>vared</p></td>
<td width="2%"></td>
<td width="75%">


<p>Editing a variable in <b>vared</b>.</p></td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>CURSOR</b> (integer)</p>

<p style="margin-left:22%;">The offset of the cursor,
within the edit buffer. This is in the range 0 to
<b>$#BUFFER</b>, and is by definition equal to
<b>$#LBUFFER</b>. Attempts to move the cursor outside the
buffer will result in the cursor being moved to the
appropriate end of the buffer.</p>

<p style="margin-left:11%;"><b>CUTBUFFER</b> (scalar)</p>

<p style="margin-left:22%;">The last item cut using one of
the &lsquo;<b>kill&minus;</b>&rsquo; commands; the string
which the next yank would insert in the line. Later entries
in the kill ring are in the array <b>killring</b>. Note that
the command &lsquo;<b>zle
copy&minus;region&minus;as&minus;kill</b>
<i>string</i>&rsquo; can be used to set the text of the cut
buffer from a shell function and cycle the kill ring in the
same way as interactively killing text.</p>

<p style="margin-left:11%;"><b>HISTNO</b> (integer)</p>

<p style="margin-left:22%;">The current history number.
Setting this has the same effect as moving up or down in the
history to the corresponding history line. An attempt to set
it is ignored if the line is not stored in the history. Note
this is not the same as the parameter <b>HISTCMD</b>, which
always gives the number of the history line being added to
the main shell&rsquo;s history. <b>HISTNO</b> refers to the
line being retrieved within zle.</p>

<p style="margin-left:11%;"><b>KEYMAP</b> (scalar)</p>

<p style="margin-left:22%;">The name of the currently
selected keymap; read&minus;only.</p>

<p style="margin-left:11%;"><b>KEYS</b> (scalar)</p>

<p style="margin-left:22%;">The keys typed to invoke this
widget, as a literal string; read&minus;only.</p>

<p style="margin-left:11%;"><b>killring</b> (array)</p>

<p style="margin-left:22%;">The array of previously killed
items, with the most recently killed first. This gives the
items that would be retrieved by a <b>yank&minus;pop</b> in
the same order. Note, however, that the most recently killed
item is in <b>$CUTBUFFER</b>; <b>$killring</b> shows the
array of previous entries.</p>

<p style="margin-left:22%; margin-top: 1em">The default
size for the kill ring is eight, however the length may be
changed by normal array operations. Any empty string in the
kill ring is ignored by the <b>yank&minus;pop</b> command,
hence the size of the array effectively sets the maximum
length of the kill ring, while the number of non&minus;zero
strings gives the current length, both as seen by the user
at the command line.</p>

<p style="margin-left:11%;"><b>LASTABORTEDSEARCH</b>
(scalar)</p>

<p style="margin-left:22%;">The last search string used by
an interactive search that was aborted by the user (status 3
returned by the search widget).</p>

<p style="margin-left:11%;"><b>LASTSEARCH</b> (scalar)</p>

<p style="margin-left:22%;">The last search string used by
an interactive search; read&minus;only. This is set even if
the search failed (status 0, 1 or 2 returned by the search
widget), but not if it was aborted by the user.</p>

<p style="margin-left:11%;"><b>LASTWIDGET</b> (scalar)</p>

<p style="margin-left:22%;">The name of the last widget
that was executed; read&minus;only.</p>

<p style="margin-left:11%;"><b>LBUFFER</b> (scalar)</p>

<p style="margin-left:22%;">The part of the buffer that
lies to the left of the cursor position. If it is assigned
to, only that part of the buffer is replaced, and the cursor
remains between the new <b>$LBUFFER</b> and the old
<b>$RBUFFER</b>.</p>

<p style="margin-left:11%;"><b>MARK</b> (integer)</p>

<p style="margin-left:22%;">Like <b>CURSOR</b>, but for the
mark.</p>

<p style="margin-left:11%;"><b>NUMERIC</b> (integer)</p>

<p style="margin-left:22%;">The numeric argument. If no
numeric argument was given, this parameter is unset. When
this is set inside a widget function, builtin widgets called
with the <b>zle</b> builtin command will use the value
assigned. If it is unset inside a widget function, builtin
widgets called behave as if no numeric argument was
given.</p>

<p style="margin-left:11%;"><b>PENDING</b> (integer)</p>

<p style="margin-left:22%;">The number of bytes pending for
input, i.e. the number of bytes which have already been
typed and can immediately be read. On systems where the
shell is not able to get this information, this parameter
will always have a value of zero. Read&minus;only.</p>

<p style="margin-left:11%;"><b>PREBUFFER</b> (scalar)</p>

<p style="margin-left:22%;">In a multi&minus;line input at
the secondary prompt, this read&minus;only parameter
contains the contents of the lines before the one the cursor
is currently in.</p>

<p style="margin-left:11%;"><b>PREDISPLAY</b> (scalar)</p>

<p style="margin-left:22%;">Text to be displayed before the
start of the editable text buffer. This does not have to be
a complete line; to display a complete line, a newline must
be appended explicitly. The text is reset on each new
invocation (but not recursive invocation) of zle.</p>

<p style="margin-left:11%;"><b>POSTDISPLAY</b> (scalar)</p>

<p style="margin-left:22%;">Text to be displayed after the
end of the editable text buffer. This does not have to be a
complete line; to display a complete line, a newline must be
prepended explicitly. The text is reset on each new
invocation (but not recursive invocation) of zle.</p>

<p style="margin-left:11%;"><b>RBUFFER</b> (scalar)</p>

<p style="margin-left:22%;">The part of the buffer that
lies to the right of the cursor position. If it is assigned
to, only that part of the buffer is replaced, and the cursor
remains between the old <b>$LBUFFER</b> and the new
<b>$RBUFFER</b>.</p>

<p style="margin-left:11%;"><b>REGION_ACTIVE</b>
(integer)</p>

<p style="margin-left:22%;">Indicates if the region is
currently active. It can be assigned 0 or 1 to deactivate
and activate the region respectively; see <i>Character
Highlighting</i> below.</p>

<p style="margin-left:11%;"><b>region_highlight</b>
(array)</p>

<p style="margin-left:22%;">Each element of this array may
be set to a string that describes highlighting for an
arbitrary region of the command line that will take effect
the next time the command line is redisplayed. Highlighting
of the non&minus;editable parts of the command line in
<b>PREDISPLAY</b> and <b>POSTDISPLAY</b> are possible, but
note that the <b>P</b> flag is needed for character indexing
to include <b>PREDISPLAY</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Each string
consists of the following parts: <br>
Optionally, a &lsquo;<b>P</b>&rsquo; to signify that the
start and end offset that</p>

<p style="margin-left:32%;">follow include any string set
by the <b>PREDISPLAY</b> special parameter; this is needed
if the predisplay string itself is to be highlighted.
Whitespace may follow the &lsquo;<b>P</b>&rsquo;.</p>

<p style="margin-left:22%;">A start offset in the same
units as <b>CURSOR</b>, terminated by</p>

<p style="margin-left:32%;">whitespace.</p>

<p style="margin-left:22%;">An end offset in the same units
as <b>CURSOR</b>, terminated by</p>

<p style="margin-left:32%;">whitespace.</p>

<p style="margin-left:22%;">A highlight specification in
the same format as</p>

<p style="margin-left:32%;">used for contexts in the
parameter <b>zle_highlight</b>, see Character Highlighting
below; for example, <b>standout</b> or
<b>fg=red,bold</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>


<p style="margin-left:32%; margin-top: 1em"><b>region_highlight=(&quot;P0
20 bold&quot;)</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
the first twenty characters of the text including any
predisplay string should be highlighted in bold.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
effect of <b>region_highlight</b> is not saved and
disappears as soon as the line is accepted.</p>

<p style="margin-left:11%;"><b>UNDO_CHANGE_NO</b>
(integer)</p>

<p style="margin-left:22%;">A number representing the state
of the undo history. The only use of this is passing as an
argument to the <b>undo</b> widget in order to undo back to
the recorded point. Read&minus;only.</p>

<p style="margin-left:11%;"><b>WIDGET</b> (scalar)</p>

<p style="margin-left:22%;">The name of the widget
currently being executed; read&minus;only.</p>

<p style="margin-left:11%;"><b>WIDGETFUNC</b> (scalar)</p>

<p style="margin-left:22%;">The name of the shell function
that implements a widget defined with either <b>zle
&minus;N</b> or <b>zle &minus;C</b>. In the former case,
this is the second argument to the <b>zle &minus;N</b>
command that defined the widget, or the first argument if
there was no second argument. In the latter case this is the
third argument to the <b>zle &minus;C</b> command that
defined the widget. Read&minus;only.</p>

<p style="margin-left:11%;"><b>WIDGETSTYLE</b> (scalar)</p>

<p style="margin-left:22%;">Describes the implementation
behind the completion widget currently being executed; the
second argument that followed <b>zle &minus;C</b> when the
widget was defined. This is the name of a builtin completion
widget. For widgets defined with <b>zle &minus;N</b> this is
set to the empty string. Read&minus;only.</p>

<p style="margin-left:11%;"><b>ZLE_STATE</b> (scalar)</p>

<p style="margin-left:22%;">Contains a set of
space&minus;separated words that describe the current
<b>zle</b> state.</p>

<p style="margin-left:22%; margin-top: 1em">Currently, the
states shown are the insert mode as set by the
<b>overwrite&minus;mode</b> or <b>vi&minus;replace</b>
widgets and whether history commands will visit imported
entries as controlled by the set&minus;local&minus;history
widget. The string contains &lsquo;<b>insert</b>&rsquo; if
characters to be inserted on the command line move existing
characters to the right or &lsquo;<b>overwrite</b>&rsquo; if
characters to be inserted overwrite existing characters. It
contains &lsquo;<b>localhistory</b>&rsquo; if only local
history commands will be visited or
&lsquo;<b>globalhistory</b>&rsquo; if imported history
commands will also be visited.</p>

<p style="margin-left:22%; margin-top: 1em">The substrings
are sorted in alphabetical order so that if you want to test
for two specific substrings in a future&minus;proof way, you
can do match by doing:</p>

<p style="margin-left:32%; margin-top: 1em"><b>if [[
$ZLE_STATE == *insert*globalhistory* ]]; then ...;
fi</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Special
Widgets</b> <br>
There are a few user&minus;defined widgets which are special
to the shell. If they do not exist, no special action is
taken. The environment provided is identical to that for any
other editing widget. <b><br>
zle&minus;isearch&minus;exit</b></p>

<p style="margin-left:22%;">Executed at the end of
incremental search at the point where the isearch prompt is
removed from the display. See
<b>zle&minus;isearch&minus;update</b> for an example.</p>


<p style="margin-left:11%;"><b>zle&minus;isearch&minus;update</b></p>

<p style="margin-left:22%;">Executed within incremental
search when the display is about to be redrawn. Additional
output below the incremental search prompt can be generated
by using &lsquo;<b>zle &minus;M</b>&rsquo; within the
widget. For example,</p>


<p style="margin-left:32%; margin-top: 1em"><b>zle&minus;isearch&minus;update()
{ zle &minus;M &quot;Line $HISTNO&quot;; } <br>
zle &minus;N zle&minus;isearch&minus;update</b></p>

<p style="margin-left:22%; margin-top: 1em">Note the line
output by &lsquo;<b>zle &minus;M</b>&rsquo; is not deleted
on exit from incremental search. This can be done from a
<b>zle&minus;isearch&minus;exit</b> widget:</p>


<p style="margin-left:32%; margin-top: 1em"><b>zle&minus;isearch&minus;exit()
{ zle &minus;M &quot;&quot;; } <br>
zle &minus;N zle&minus;isearch&minus;exit</b></p>


<p style="margin-left:11%;"><b>zle&minus;line&minus;init</b></p>

<p style="margin-left:22%;">Executed every time the line
editor is started to read a new line of input. The following
example puts the line editor into vi command mode when it
starts up.</p>


<p style="margin-left:32%; margin-top: 1em"><b>zle&minus;line&minus;init()
{ zle &minus;K vicmd; } <br>
zle &minus;N zle&minus;line&minus;init</b></p>

<p style="margin-left:22%; margin-top: 1em">(The command
inside the function sets the keymap directly; it is
equivalent to <b>zle vi&minus;cmd&minus;mode</b>.)</p>


<p style="margin-left:11%;"><b>zle&minus;line&minus;finish</b></p>

<p style="margin-left:22%;">This is similar to
<b>zle&minus;line&minus;init</b> but is executed every time
the line editor has finished reading a line of input.</p>


<p style="margin-left:11%;"><b>zle&minus;history&minus;line&minus;set</b></p>

<p style="margin-left:22%;">Executed when the history line
changes.</p>


<p style="margin-left:11%;"><b>zle&minus;keymap&minus;select</b></p>

<p style="margin-left:22%;">Executed every time the keymap
changes, i.e. the special parameter <b>KEYMAP</b> is set to
a different value, while the line editor is active.
Initialising the keymap when the line editor starts does not
cause the widget to be called.</p>

<p style="margin-left:22%; margin-top: 1em">The value
<b>$KEYMAP</b> within the function reflects the new keymap.
The old keymap is passed as the sole argument.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
used for detecting switches between the vi command
(<b>vicmd</b>) and insert (usually <b>main</b>) keymaps.</p>

<h2>STANDARD WIDGETS
<a name="STANDARD WIDGETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
is a list of all the standard widgets, and their default
bindings in emacs mode, vi command mode and vi insert mode
(the &lsquo;<b>emacs</b>&rsquo;, &lsquo;<b>vicmd</b>&rsquo;
and &lsquo;<b>viins</b>&rsquo; keymaps, respectively).</p>

<p style="margin-left:11%; margin-top: 1em">Note that
cursor keys are bound to movement keys in all three keymaps;
the shell assumes that the cursor keys send the key
sequences reported by the terminal&minus;handling library
(termcap or terminfo). The key sequences shown in the list
are those based on the VT100, common on many modern
terminals, but in fact these are not necessarily bound. In
the case of the <b>viins</b> keymap, the initial escape
character of the sequences serves also to return to the
<b>vicmd</b> keymap: whether this happens is determined by
the <b>KEYTIMEOUT</b> parameter, see <i>zshparam</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Movement
<br>
vi&minus;backward&minus;blank&minus;word</b> (unbound) (B)
(unbound)</p>

<p style="margin-left:22%;">Move backward one word, where a
word is defined as a series of non&minus;blank
characters.</p>

<p style="margin-left:11%;"><b>backward&minus;char</b> (^B
ESC&minus;[D) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move backward one
character.</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;char</b>
(unbound) (^H h ^?) (ESC&minus;[D)</p>

<p style="margin-left:22%;">Move backward one character,
without changing lines.</p>

<p style="margin-left:11%;"><b>backward&minus;word</b>
(ESC&minus;B ESC&minus;b) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the beginning of the
previous word.</p>


<p style="margin-left:11%;"><b>emacs&minus;backward&minus;word</b></p>

<p style="margin-left:22%;">Move to the beginning of the
previous word.</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;word</b>
(unbound) (b) (unbound)</p>

<p style="margin-left:22%;">Move to the beginning of the
previous word, vi&minus;style.</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;line</b>
(^A) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the beginning of the
line. If already at the beginning of the line, move to the
beginning of the previous line, if any.</p>


<p style="margin-left:11%;"><b>vi&minus;beginning&minus;of&minus;line</b></p>

<p style="margin-left:22%;">Move to the beginning of the
line, without changing lines.</p>

<p style="margin-left:11%;"><b>end&minus;of&minus;line</b>
(^E) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the line. If
already at the end of the line, move to the end of the next
line, if any.</p>


<p style="margin-left:11%;"><b>vi&minus;end&minus;of&minus;line</b>
(unbound) ($) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the line. If
an argument is given to this command, the cursor will be
moved to the end of the line (argument &minus; 1) lines
down.</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;blank&minus;word</b>
(unbound) (W) (unbound)</p>

<p style="margin-left:22%;">Move forward one word, where a
word is defined as a series of non&minus;blank
characters.</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;blank&minus;word&minus;end</b>
(unbound) (E) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the current
word, or, if at the end of the current word, to the end of
the next word, where a word is defined as a series of
non&minus;blank characters.</p>

<p style="margin-left:11%;"><b>forward&minus;char</b> (^F
ESC&minus;[C) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move forward one character.</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;char</b>
(unbound) (space l) (ESC&minus;[C)</p>

<p style="margin-left:22%;">Move forward one character.</p>


<p style="margin-left:11%;"><b>vi&minus;find&minus;next&minus;char</b>
(^X^F) (f) (unbound)</p>

<p style="margin-left:22%;">Read a character from the
keyboard, and move to the next occurrence of it in the
line.</p>


<p style="margin-left:11%;"><b>vi&minus;find&minus;next&minus;char&minus;skip</b>
(unbound) (t) (unbound)</p>

<p style="margin-left:22%;">Read a character from the
keyboard, and move to the position just before the next
occurrence of it in the line.</p>


<p style="margin-left:11%;"><b>vi&minus;find&minus;prev&minus;char</b>
(unbound) (F) (unbound)</p>

<p style="margin-left:22%;">Read a character from the
keyboard, and move to the previous occurrence of it in the
line.</p>


<p style="margin-left:11%;"><b>vi&minus;find&minus;prev&minus;char&minus;skip</b>
(unbound) (T) (unbound)</p>

<p style="margin-left:22%;">Read a character from the
keyboard, and move to the position just after the previous
occurrence of it in the line.</p>


<p style="margin-left:11%;"><b>vi&minus;first&minus;non&minus;blank</b>
(unbound) (^) (unbound)</p>

<p style="margin-left:22%;">Move to the first
non&minus;blank character in the line.</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;word</b>
(unbound) (w) (unbound)</p>

<p style="margin-left:22%;">Move forward one word,
vi&minus;style.</p>

<p style="margin-left:11%;"><b>forward&minus;word</b>
(ESC&minus;F ESC&minus;f) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the beginning of the
next word. The editor&rsquo;s idea of a word is specified
with the <b>WORDCHARS</b> parameter.</p>


<p style="margin-left:11%;"><b>emacs&minus;forward&minus;word</b></p>

<p style="margin-left:22%;">Move to the end of the next
word.</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;word&minus;end</b>
(unbound) (e) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the next
word.</p>


<p style="margin-left:11%;"><b>vi&minus;goto&minus;column</b>
(ESC&minus;|) (|) (unbound)</p>

<p style="margin-left:22%;">Move to the column specified by
the numeric argument.</p>


<p style="margin-left:11%;"><b>vi&minus;goto&minus;mark</b>
(unbound) (&lsquo;) (unbound)</p>

<p style="margin-left:22%;">Move to the specified mark.</p>


<p style="margin-left:11%;"><b>vi&minus;goto&minus;mark&minus;line</b>
(unbound) (&rsquo;) (unbound)</p>

<p style="margin-left:22%;">Move to beginning of the line
containing the specified mark.</p>


<p style="margin-left:11%;"><b>vi&minus;repeat&minus;find</b>
(unbound) (;) (unbound)</p>

<p style="margin-left:22%;">Repeat the last
<b>vi&minus;find</b> command.</p>


<p style="margin-left:11%;"><b>vi&minus;rev&minus;repeat&minus;find</b>
(unbound) (,) (unbound)</p>

<p style="margin-left:22%;">Repeat the last
<b>vi&minus;find</b> command in the opposite direction.</p>

<p style="margin-left:11%; margin-top: 1em"><b>History
Control <br>
beginning&minus;of&minus;buffer&minus;or&minus;history</b>
(ESC&minus;&lt;) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the beginning of the
buffer, or if already there, move to the first event in the
history list.</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;line&minus;hist</b></p>

<p style="margin-left:22%;">Move to the beginning of the
line. If already at the beginning of the buffer, move to the
previous history line.</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;history</b></p>

<p style="margin-left:22%;">Move to the first event in the
history list.</p>


<p style="margin-left:11%;"><b>down&minus;line&minus;or&minus;history</b>
(^N ESC&minus;[B) (j) (ESC&minus;[B)</p>

<p style="margin-left:22%;">Move down a line in the buffer,
or if already at the bottom line, move to the next event in
the history list.</p>


<p style="margin-left:11%;"><b>vi&minus;down&minus;line&minus;or&minus;history</b>
(unbound) (+) (unbound)</p>

<p style="margin-left:22%;">Move down a line in the buffer,
or if already at the bottom line, move to the next event in
the history list. Then move to the first non&minus;blank
character on the line.</p>


<p style="margin-left:11%;"><b>down&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">Move down a line in the buffer,
or if already at the bottom line, search forward in the
history for a line beginning with the first word in the
buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a function by the <b>zle</b> command with arguments, the
first argument is taken as the string for which to search,
rather than the first word in the buffer.</p>

<p style="margin-left:11%;"><b>down&minus;history</b>
(unbound) (^N) (unbound)</p>

<p style="margin-left:22%;">Move to the next event in the
history list.</p>


<p style="margin-left:11%;"><b>history&minus;beginning&minus;search&minus;backward</b></p>

<p style="margin-left:22%;">Search backward in the history
for a line beginning with the current line up to the cursor.
This leaves the cursor in its original position.</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;buffer&minus;or&minus;history</b>
(ESC&minus;&gt;) (unbound) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the buffer,
or if already there, move to the last event in the history
list.</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;line&minus;hist</b></p>

<p style="margin-left:22%;">Move to the end of the line. If
already at the end of the buffer, move to the next history
line.</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;history</b></p>

<p style="margin-left:22%;">Move to the last event in the
history list.</p>


<p style="margin-left:11%;"><b>vi&minus;fetch&minus;history</b>
(unbound) (G) (unbound)</p>

<p style="margin-left:22%;">Fetch the history line
specified by the numeric argument. This defaults to the
current history line (i.e. the one that isn&rsquo;t history
yet).</p>


<p style="margin-left:11%;"><b>history&minus;incremental&minus;search&minus;backward</b>
(^R ^Xr) (unbound) (unbound)</p>

<p style="margin-left:22%;">Search backward incrementally
for a specified string. The search is case&minus;insensitive
if the search string does not have uppercase letters and no
numeric argument was given. The string may begin with
&lsquo;<b>^</b>&rsquo; to anchor the search to the beginning
of the line. When called from a user&minus;defined function
returns the following statuses: 0, if the search succeeded;
1, if the search failed; 2, if the search term was a bad
pattern; 3, if the search was aborted by the
<b>send&minus;break</b> command.</p>

<p style="margin-left:22%; margin-top: 1em">A restricted
set of editing functions is available in the
mini&minus;buffer. Keys are looked up in the special
<b>isearch</b> keymap, and if not found there in the main
keymap (note that by default the <b>isearch</b> keymap is
empty). An interrupt signal, as defined by the stty setting,
will stop the search and go back to the original line. An
undefined key will have the same effect. Note that the
following always perform the same task within incremental
searches and cannot be replaced by user defined widgets, nor
can the set of functions be extended. The supported
functions are: <b><br>
accept&minus;and&minus;hold <br>
accept&minus;and&minus;infer&minus;next&minus;history <br>
accept&minus;line <br>

accept&minus;line&minus;and&minus;down&minus;history</b></p>

<p style="margin-left:32%;">Perform the usual function
after exiting incremental search. The command line displayed
is executed.</p>


<p style="margin-left:22%;"><b>backward&minus;delete&minus;char
<br>
vi&minus;backward&minus;delete&minus;char</b></p>

<p style="margin-left:32%;">Back up one place in the search
history. If the search has been repeated this does not
immediately erase a character in the minibuffer.</p>

<p style="margin-left:22%;"><b>accept&minus;search</b></p>

<p style="margin-left:32%;">Exit incremental search,
retaining the command line but performing no further action.
Note that this function is not bound by default and has no
effect outside incremental search.</p>


<p style="margin-left:22%;"><b>backward&minus;delete&minus;word
<br>
backward&minus;kill&minus;word <br>
vi&minus;backward&minus;kill&minus;word</b></p>

<p style="margin-left:32%;">Back up one character in the
minibuffer; if multiple searches have been performed since
the character was inserted the search history is rewound to
the point just before the character was entered. Hence this
has the effect of repeating
<b>backward&minus;delete&minus;char</b>.</p>

<p style="margin-left:22%;"><b>clear&minus;screen</b></p>

<p style="margin-left:32%;">Clear the screen, remaining in
incremental search mode.</p>


<p style="margin-left:22%;"><b>history&minus;incremental&minus;search&minus;backward</b></p>

<p style="margin-left:32%;">Find the next occurrence of the
contents of the mini&minus;buffer.</p>


<p style="margin-left:22%;"><b>history&minus;incremental&minus;search&minus;forward</b></p>

<p style="margin-left:32%;">Invert the sense of the
search.</p>

<p style="margin-left:22%;"><b>magic&minus;space</b></p>

<p style="margin-left:32%;">Inserts a non&minus;magical
space.</p>

<p style="margin-left:22%;"><b>quoted&minus;insert <br>
vi&minus;quoted&minus;insert</b></p>

<p style="margin-left:32%;">Quote the character to insert
into the minibuffer.</p>

<p style="margin-left:22%;"><b>redisplay</b></p>

<p style="margin-left:32%;">Redisplay the command line,
remaining in incremental search mode.</p>


<p style="margin-left:22%;"><b>vi&minus;cmd&minus;mode</b></p>

<p style="margin-left:32%;">Toggle between the
&lsquo;<b>main</b>&rsquo; and &lsquo;<b>vicmd</b>&rsquo;
keymaps; the &lsquo;<b>main</b>&rsquo; keymap (insert mode)
will be selected initially.</p>


<p style="margin-left:22%;"><b>vi&minus;repeat&minus;search
<br>
vi&minus;rev&minus;repeat&minus;search</b></p>

<p style="margin-left:32%;">Repeat the search. The
direction of the search is indicated in the
mini&minus;buffer.</p>

<p style="margin-left:22%; margin-top: 1em">Any character
that is not bound to one of the above functions, or
<b>self&minus;insert</b> or
<b>self&minus;insert&minus;unmeta</b>, will cause the mode
to be exited. The character is then looked up and executed
in the keymap in effect at that point.</p>

<p style="margin-left:22%; margin-top: 1em">When called
from a widget function by the <b>zle</b> command, the
incremental search commands can take a string argument. This
will be treated as a string of keys, as for arguments to the
<b>bindkey</b> command, and used as initial input for the
command. Any characters in the string which are unused by
the incremental search will be silently ignored. For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle
history&minus;incremental&minus;search&minus;backward
forceps</b></p>

<p style="margin-left:22%; margin-top: 1em">will search
backwards for <b>forceps</b>, leaving the minibuffer
containing the string &lsquo;<b>forceps</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>history&minus;incremental&minus;search&minus;forward</b>
(^S ^Xs) (unbound) (unbound)</p>

<p style="margin-left:22%;">Search forward incrementally
for a specified string. The search is case&minus;insensitive
if the search string does not have uppercase letters and no
numeric argument was given. The string may begin with
&lsquo;<b>^</b>&rsquo; to anchor the search to the beginning
of the line. The functions available in the
mini&minus;buffer are the same as for
<b>history&minus;incremental&minus;search&minus;backward</b>.</p>


<p style="margin-left:11%;"><b>history&minus;incremental&minus;pattern&minus;search&minus;backward
<br>

history&minus;incremental&minus;pattern&minus;search&minus;forward</b></p>

<p style="margin-left:22%;">These widgets behave similarly
to the corresponding widgets with no <b>&minus;pattern</b>,
but the search string typed by the user is treated as a
pattern, respecting the current settings of the various
options affecting pattern matching. See FILENAME GENERATION
in <i>zshexpn</i>(1) for a description of patterns. If no
numeric argument was given lowercase letters in the search
string may match uppercase letters in the history. The
string may begin with &lsquo;<b>^</b>&rsquo; to anchor the
search to the beginning of the line.</p>

<p style="margin-left:22%; margin-top: 1em">The prompt
changes to indicate an invalid pattern; this may simply
indicate the pattern is not yet complete.</p>

<p style="margin-left:22%; margin-top: 1em">Note that only
non&minus;overlapping matches are reported, so an expression
with wildcards may return fewer matches on a line than are
visible by inspection.</p>


<p style="margin-left:11%;"><b>history&minus;search&minus;backward</b>
(ESC&minus;P ESC&minus;p) (unbound) (unbound)</p>

<p style="margin-left:22%;">Search backward in the history
for a line beginning with the first word in the buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a function by the <b>zle</b> command with arguments, the
first argument is taken as the string for which to search,
rather than the first word in the buffer.</p>


<p style="margin-left:11%;"><b>vi&minus;history&minus;search&minus;backward</b>
(unbound) (/) (unbound)</p>

<p style="margin-left:22%;">Search backward in the history
for a specified string. The string may begin with
&lsquo;<b>^</b>&rsquo; to anchor the search to the beginning
of the line.</p>

<p style="margin-left:22%; margin-top: 1em">A restricted
set of editing functions is available in the
mini&minus;buffer. An interrupt signal, as defined by the
stty setting, will stop the search. The functions available
in the mini&minus;buffer are: <b>accept&minus;line</b>,
<b>backward&minus;delete&minus;char</b>,
<b>vi&minus;backward&minus;delete&minus;char</b>,
<b>backward&minus;kill&minus;word</b>,
<b>vi&minus;backward&minus;kill&minus;word</b>,
<b>clear&minus;screen</b>, <b>redisplay</b>,
<b>quoted&minus;insert</b> and
<b>vi&minus;quoted&minus;insert</b>.</p>


<p style="margin-left:22%; margin-top: 1em"><b>vi&minus;cmd&minus;mode</b>
is treated the same as accept&minus;line, and
<b>magic&minus;space</b> is treated as a space. Any other
character that is not bound to self&minus;insert or
self&minus;insert&minus;unmeta will beep and be ignored. If
the function is called from vi command mode, the bindings of
the current insert mode will be used.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a function by the <b>zle</b> command with arguments, the
first argument is taken as the string for which to search,
rather than the first word in the buffer.</p>


<p style="margin-left:11%;"><b>history&minus;search&minus;forward</b>
(ESC&minus;N ESC&minus;n) (unbound) (unbound)</p>

<p style="margin-left:22%;">Search forward in the history
for a line beginning with the first word in the buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a function by the <b>zle</b> command with arguments, the
first argument is taken as the string for which to search,
rather than the first word in the buffer.</p>


<p style="margin-left:11%;"><b>vi&minus;history&minus;search&minus;forward</b>
(unbound) (?) (unbound)</p>

<p style="margin-left:22%;">Search forward in the history
for a specified string. The string may begin with
&lsquo;<b>^</b>&rsquo; to anchor the search to the beginning
of the line. The functions available in the
mini&minus;buffer are the same as for
<b>vi&minus;history&minus;search&minus;backward</b>.
Argument handling is also the same as for that command.</p>


<p style="margin-left:11%;"><b>infer&minus;next&minus;history</b>
(^X^N) (unbound) (unbound)</p>

<p style="margin-left:22%;">Search in the history list for
a line matching the current one and fetch the event
following it.</p>


<p style="margin-left:11%;"><b>insert&minus;last&minus;word</b>
(ESC&minus;_ ESC&minus;.) (unbound) (unbound)</p>

<p style="margin-left:22%;">Insert the last word from the
previous history event at the cursor position. If a positive
numeric argument is given, insert that word from the end of
the previous history event. If the argument is zero or
negative insert that word from the left (zero inserts the
previous command word). Repeating this command replaces the
word just inserted with the last word from the history event
prior to the one just used; numeric arguments can be used in
the same way to pick a word from that event.</p>

<p style="margin-left:22%; margin-top: 1em">When called
from a shell function invoked from a user&minus;defined
widget, the command can take one to three arguments. The
first argument specifies a history offset which applies to
successive calls to this widget: if it is &minus;1, the
default behaviour is used, while if it is 1, successive
calls will move forwards through the history. The value 0
can be used to indicate that the history line examined by
the previous execution of the command will be reexamined.
Note that negative numbers should be preceded by a
&lsquo;<b>&minus;&minus;</b>&rsquo; argument to avoid
confusing them with options.</p>

<p style="margin-left:22%; margin-top: 1em">If two
arguments are given, the second specifies the word on the
command line in normal array index notation (as a more
natural alternative to the prefix argument). Hence 1 is the
first word, and &minus;1 (the default) is the last word.</p>

<p style="margin-left:22%; margin-top: 1em">If a third
argument is given, its value is ignored, but it is used to
signify that the history offset is relative to the current
history line, rather than the one remembered after the
previous invocations of
<b>insert&minus;last&minus;word</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the default behaviour of the command corresponds to</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle
insert&minus;last&minus;word &minus;&minus; &minus;1
&minus;1</b></p>

<p style="margin-left:22%; margin-top: 1em">while the
command</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle
insert&minus;last&minus;word &minus;&minus; &minus;1 1
&minus;</b></p>

<p style="margin-left:22%; margin-top: 1em">always copies
the first word of the line in the history immediately before
the line being edited. This has the side effect that later
invocations of the widget will be relative to that line.</p>


<p style="margin-left:11%;"><b>vi&minus;repeat&minus;search</b>
(unbound) (n) (unbound)</p>

<p style="margin-left:22%;">Repeat the last vi history
search.</p>


<p style="margin-left:11%;"><b>vi&minus;rev&minus;repeat&minus;search</b>
(unbound) (N) (unbound)</p>

<p style="margin-left:22%;">Repeat the last vi history
search, but in reverse.</p>


<p style="margin-left:11%;"><b>up&minus;line&minus;or&minus;history</b>
(^P ESC&minus;[A) (k) (ESC&minus;[A)</p>

<p style="margin-left:22%;">Move up a line in the buffer,
or if already at the top line, move to the previous event in
the history list.</p>


<p style="margin-left:11%;"><b>vi&minus;up&minus;line&minus;or&minus;history</b>
(unbound) (&minus;) (unbound)</p>

<p style="margin-left:22%;">Move up a line in the buffer,
or if already at the top line, move to the previous event in
the history list. Then move to the first non&minus;blank
character on the line.</p>


<p style="margin-left:11%;"><b>up&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">Move up a line in the buffer,
or if already at the top line, search backward in the
history for a line beginning with the first word in the
buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a function by the <b>zle</b> command with arguments, the
first argument is taken as the string for which to search,
rather than the first word in the buffer.</p>

<p style="margin-left:11%;"><b>up&minus;history</b>
(unbound) (^P) (unbound)</p>

<p style="margin-left:22%;">Move to the previous event in
the history list.</p>


<p style="margin-left:11%;"><b>history&minus;beginning&minus;search&minus;forward</b></p>

<p style="margin-left:22%;">Search forward in the history
for a line beginning with the current line up to the cursor.
This leaves the cursor in its original position.</p>


<p style="margin-left:11%;"><b>set&minus;local&minus;history</b></p>

<p style="margin-left:22%;">By default, history movement
commands visit the imported lines as well as the local
lines. This widget lets you toggle this on and off, or set
it with the numeric argument. Zero for both local and
imported lines and nonzero for only local lines.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Modifying
Text <br>
vi&minus;add&minus;eol</b> (unbound) (A) (unbound)</p>

<p style="margin-left:22%;">Move to the end of the line and
enter insert mode.</p>

<p style="margin-left:11%;"><b>vi&minus;add&minus;next</b>
(unbound) (a) (unbound)</p>

<p style="margin-left:22%;">Enter insert mode after the
current cursor position, without changing lines.</p>


<p style="margin-left:11%;"><b>backward&minus;delete&minus;char</b>
(^H ^?) (unbound) (unbound)</p>

<p style="margin-left:22%;">Delete the character behind the
cursor.</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;delete&minus;char</b>
(unbound) (X) (^H)</p>

<p style="margin-left:22%;">Delete the character behind the
cursor, without changing lines. If in insert mode, this
won&rsquo;t delete past the point where insert mode was last
entered.</p>


<p style="margin-left:11%;"><b>backward&minus;delete&minus;word</b></p>

<p style="margin-left:22%;">Delete the word behind the
cursor.</p>


<p style="margin-left:11%;"><b>backward&minus;kill&minus;line</b></p>

<p style="margin-left:22%;">Kill from the beginning of the
line to the cursor position.</p>


<p style="margin-left:11%;"><b>backward&minus;kill&minus;word</b>
(^W ESC&minus;^H ESC&minus;^?) (unbound) (unbound)</p>

<p style="margin-left:22%;">Kill the word behind the
cursor.</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;kill&minus;word</b>
(unbound) (unbound) (^W)</p>

<p style="margin-left:22%;">Kill the word behind the
cursor, without going past the point where insert mode was
last entered.</p>

<p style="margin-left:11%;"><b>capitalize&minus;word</b>
(ESC&minus;C ESC&minus;c) (unbound) (unbound)</p>

<p style="margin-left:22%;">Capitalize the current word and
move past it.</p>

<p style="margin-left:11%;"><b>vi&minus;change</b>
(unbound) (c) (unbound)</p>

<p style="margin-left:22%;">Read a movement command from
the keyboard, and kill from the cursor position to the
endpoint of the movement. Then enter insert mode. If the
command is <b>vi&minus;change</b>, change the current
line.</p>


<p style="margin-left:11%;"><b>vi&minus;change&minus;eol</b>
(unbound) (C) (unbound)</p>

<p style="margin-left:22%;">Kill to the end of the line and
enter insert mode.</p>


<p style="margin-left:11%;"><b>vi&minus;change&minus;whole&minus;line</b>
(unbound) (S) (unbound)</p>

<p style="margin-left:22%;">Kill the current line and enter
insert mode.</p>


<p style="margin-left:11%;"><b>copy&minus;region&minus;as&minus;kill</b>
(ESC&minus;W ESC&minus;w) (unbound) (unbound)</p>

<p style="margin-left:22%;">Copy the area from the cursor
to the mark to the kill buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If called from
a ZLE widget function in the form &lsquo;<b>zle
copy&minus;region&minus;as&minus;kill</b>
<i>string</i>&rsquo; then <i>string</i> will be taken as the
text to copy to the kill buffer. The cursor, the mark and
the text on the command line are not used in this case.</p>


<p style="margin-left:11%;"><b>copy&minus;prev&minus;word</b>
(ESC&minus;^_) (unbound) (unbound)</p>

<p style="margin-left:22%;">Duplicate the word to the left
of the cursor.</p>


<p style="margin-left:11%;"><b>copy&minus;prev&minus;shell&minus;word</b></p>

<p style="margin-left:22%;">Like
<b>copy&minus;prev&minus;word</b>, but the word is found by
using shell parsing, whereas
<b>copy&minus;prev&minus;word</b> looks for blanks. This
makes a difference when the word is quoted and contains
spaces.</p>

<p style="margin-left:11%;"><b>vi&minus;delete</b>
(unbound) (d) (unbound)</p>

<p style="margin-left:22%;">Read a movement command from
the keyboard, and kill from the cursor position to the
endpoint of the movement. If the command is
<b>vi&minus;delete</b>, kill the current line.</p>

<p style="margin-left:11%;"><b>delete&minus;char</b></p>

<p style="margin-left:22%;">Delete the character under the
cursor.</p>


<p style="margin-left:11%;"><b>vi&minus;delete&minus;char</b>
(unbound) (x) (unbound)</p>

<p style="margin-left:22%;">Delete the character under the
cursor, without going past the end of the line.</p>

<p style="margin-left:11%;"><b>delete&minus;word</b></p>

<p style="margin-left:22%;">Delete the current word.</p>


<p style="margin-left:11%;"><b>down&minus;case&minus;word</b>
(ESC&minus;L ESC&minus;l) (unbound) (unbound)</p>

<p style="margin-left:22%;">Convert the current word to all
lowercase and move past it.</p>

<p style="margin-left:11%;"><b>kill&minus;word</b>
(ESC&minus;D ESC&minus;d) (unbound) (unbound)</p>

<p style="margin-left:22%;">Kill the current word.</p>


<p style="margin-left:11%;"><b>gosmacs&minus;transpose&minus;chars</b></p>

<p style="margin-left:22%;">Exchange the two characters
behind the cursor.</p>

<p style="margin-left:11%;"><b>vi&minus;indent</b>
(unbound) (&gt;) (unbound)</p>

<p style="margin-left:22%;">Indent a number of lines.</p>

<p style="margin-left:11%;"><b>vi&minus;insert</b>
(unbound) (i) (unbound)</p>

<p style="margin-left:22%;">Enter insert mode.</p>


<p style="margin-left:11%;"><b>vi&minus;insert&minus;bol</b>
(unbound) (I) (unbound)</p>

<p style="margin-left:22%;">Move to the first
non&minus;blank character on the line and enter insert
mode.</p>

<p style="margin-left:11%;"><b>vi&minus;join</b> (^X^J) (J)
(unbound)</p>

<p style="margin-left:22%;">Join the current line with the
next one.</p>

<p style="margin-left:11%;"><b>kill&minus;line</b> (^K)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Kill from the cursor to the end
of the line. If already on the end of the line, kill the
newline character.</p>


<p style="margin-left:11%;"><b>vi&minus;kill&minus;line</b>
(unbound) (unbound) (^U)</p>

<p style="margin-left:22%;">Kill from the cursor back to
wherever insert mode was last entered.</p>

<p style="margin-left:11%;"><b>vi&minus;kill&minus;eol</b>
(unbound) (D) (unbound)</p>

<p style="margin-left:22%;">Kill from the cursor to the end
of the line.</p>

<p style="margin-left:11%;"><b>kill&minus;region</b></p>

<p style="margin-left:22%;">Kill from the cursor to the
mark.</p>

<p style="margin-left:11%;"><b>kill&minus;buffer</b> (^X^K)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Kill the entire buffer.</p>


<p style="margin-left:11%;"><b>kill&minus;whole&minus;line</b>
(^U) (unbound) (unbound)</p>

<p style="margin-left:22%;">Kill the current line.</p>


<p style="margin-left:11%;"><b>vi&minus;match&minus;bracket</b>
(^X^B) (%) (unbound)</p>

<p style="margin-left:22%;">Move to the bracket character
(one of <b>{}</b>, <b>()</b> or <b>[]</b>) that matches the
one under the cursor. If the cursor is not on a bracket
character, move forward without going past the end of the
line to find one, and then go to the matching bracket.</p>


<p style="margin-left:11%;"><b>vi&minus;open&minus;line&minus;above</b>
(unbound) (O) (unbound)</p>

<p style="margin-left:22%;">Open a line above the cursor
and enter insert mode.</p>


<p style="margin-left:11%;"><b>vi&minus;open&minus;line&minus;below</b>
(unbound) (o) (unbound)</p>

<p style="margin-left:22%;">Open a line below the cursor
and enter insert mode.</p>


<p style="margin-left:11%;"><b>vi&minus;oper&minus;swap&minus;case</b></p>

<p style="margin-left:22%;">Read a movement command from
the keyboard, and swap the case of all characters from the
cursor position to the endpoint of the movement. If the
movement command is
<b>vi&minus;oper&minus;swap&minus;case</b>, swap the case of
all characters on the current line.</p>

<p style="margin-left:11%;"><b>overwrite&minus;mode</b>
(^X^O) (unbound) (unbound)</p>

<p style="margin-left:22%;">Toggle between overwrite mode
and insert mode.</p>


<p style="margin-left:11%;"><b>vi&minus;put&minus;before</b>
(unbound) (P) (unbound)</p>

<p style="margin-left:22%;">Insert the contents of the kill
buffer before the cursor. If the kill buffer contains a
sequence of lines (as opposed to characters), paste it above
the current line.</p>


<p style="margin-left:11%;"><b>vi&minus;put&minus;after</b>
(unbound) (p) (unbound)</p>

<p style="margin-left:22%;">Insert the contents of the kill
buffer after the cursor. If the kill buffer contains a
sequence of lines (as opposed to characters), paste it below
the current line.</p>

<p style="margin-left:11%;"><b>quoted&minus;insert</b> (^V)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Insert the next character typed
into the buffer literally. An interrupt character will not
be inserted.</p>


<p style="margin-left:11%;"><b>vi&minus;quoted&minus;insert</b>
(unbound) (unbound) (^Q ^V)</p>

<p style="margin-left:22%;">Display a
&lsquo;<b>^</b>&rsquo; at the cursor position, and insert
the next character typed into the buffer literally. An
interrupt character will not be inserted.</p>

<p style="margin-left:11%;"><b>quote&minus;line</b>
(ESC&minus;&rsquo;) (unbound) (unbound)</p>

<p style="margin-left:22%;">Quote the current line; that
is, put a &lsquo;<b>&rsquo;</b>&rsquo; character at the
beginning and the end, and convert all
&lsquo;<b>&rsquo;</b>&rsquo; characters to
&lsquo;<b>&rsquo;\&rsquo;&rsquo;</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>quote&minus;region</b>
(ESC&minus;&quot;) (unbound) (unbound)</p>

<p style="margin-left:22%;">Quote the region from the
cursor to the mark.</p>

<p style="margin-left:11%;"><b>vi&minus;replace</b>
(unbound) (R) (unbound)</p>

<p style="margin-left:22%;">Enter overwrite mode.</p>


<p style="margin-left:11%;"><b>vi&minus;repeat&minus;change</b>
(unbound) (.) (unbound)</p>

<p style="margin-left:22%;">Repeat the last vi mode text
modification. If a count was used with the modification, it
is remembered. If a count is given to this command, it
overrides the remembered count, and is remembered for future
uses of this command. The cut buffer specification is
similarly remembered.</p>


<p style="margin-left:11%;"><b>vi&minus;replace&minus;chars</b>
(unbound) (r) (unbound)</p>

<p style="margin-left:22%;">Replace the character under the
cursor with a character read from the keyboard.</p>

<p style="margin-left:11%;"><b>self&minus;insert</b>
(printable characters) (unbound) (printable characters and
<br>
some control characters)</p>

<p style="margin-left:22%;">Insert a character into the
buffer at the cursor position.</p>


<p style="margin-left:11%;"><b>self&minus;insert&minus;unmeta</b>
(ESC&minus;^I ESC&minus;^J ESC&minus;^M) (unbound)
(unbound)</p>

<p style="margin-left:22%;">Insert a character into the
buffer after stripping the meta bit and converting ^M to
^J.</p>

<p style="margin-left:11%;"><b>vi&minus;substitute</b>
(unbound) (s) (unbound)</p>

<p style="margin-left:22%;">Substitute the next
character(s).</p>


<p style="margin-left:11%;"><b>vi&minus;swap&minus;case</b>
(unbound) (~) (unbound)</p>

<p style="margin-left:22%;">Swap the case of the character
under the cursor and move past it.</p>

<p style="margin-left:11%;"><b>transpose&minus;chars</b>
(^T) (unbound) (unbound)</p>

<p style="margin-left:22%;">Exchange the two characters to
the left of the cursor if at end of line, else exchange the
character under the cursor with the character to the
left.</p>

<p style="margin-left:11%;"><b>transpose&minus;words</b>
(ESC&minus;T ESC&minus;t) (unbound) (unbound)</p>

<p style="margin-left:22%;">Exchange the current word with
the one before it.</p>

<p style="margin-left:11%;"><b>vi&minus;unindent</b>
(unbound) (&lt;) (unbound)</p>

<p style="margin-left:22%;">Unindent a number of lines.</p>


<p style="margin-left:11%;"><b>up&minus;case&minus;word</b>
(ESC&minus;U ESC&minus;u) (unbound) (unbound)</p>

<p style="margin-left:22%;">Convert the current word to all
caps and move past it.</p>

<p style="margin-left:11%;"><b>yank</b> (^Y) (unbound)
(unbound)</p>

<p style="margin-left:22%;">Insert the contents of the kill
buffer at the cursor position.</p>

<p style="margin-left:11%;"><b>yank&minus;pop</b>
(ESC&minus;y) (unbound) (unbound)</p>

<p style="margin-left:22%;">Remove the text just yanked,
rotate the kill&minus;ring (the history of previously killed
text) and yank the new top. Only works following <b>yank</b>
or <b>yank&minus;pop</b>.</p>

<p style="margin-left:11%;"><b>vi&minus;yank</b> (unbound)
(y) (unbound)</p>

<p style="margin-left:22%;">Read a movement command from
the keyboard, and copy the region from the cursor position
to the endpoint of the movement into the kill buffer. If the
command is <b>vi&minus;yank</b>, copy the current line.</p>


<p style="margin-left:11%;"><b>vi&minus;yank&minus;whole&minus;line</b>
(unbound) (Y) (unbound)</p>

<p style="margin-left:22%;">Copy the current line into the
kill buffer.</p>


<p style="margin-left:11%;"><b>vi&minus;yank&minus;eol</b></p>

<p style="margin-left:22%;">Copy the region from the cursor
position to the end of the line into the kill buffer.
Arguably, this is what Y should do in vi, but it isn&rsquo;t
what it actually does.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Arguments
<br>
digit&minus;argument</b> (ESC&minus;0..ESC&minus;9)
(1&minus;9) (unbound)</p>

<p style="margin-left:22%;">Start a new numeric argument,
or add to the current one. See also
<b>vi&minus;digit&minus;or&minus;beginning&minus;of&minus;line</b>.
This only works if bound to a key sequence ending in a
decimal digit.</p>

<p style="margin-left:22%; margin-top: 1em">Inside a widget
function, a call to this function treats the last key of the
key sequence which called the widget as the digit.</p>

<p style="margin-left:11%;"><b>neg&minus;argument</b>
(ESC&minus;&minus;) (unbound) (unbound)</p>

<p style="margin-left:22%;">Changes the sign of the
following argument.</p>


<p style="margin-left:11%;"><b>universal&minus;argument</b></p>

<p style="margin-left:22%;">Multiply the argument of the
next command by 4. Alternatively, if this command is
followed by an integer (positive or negative), use that as
the argument for the next command. Thus digits cannot be
repeated using this command. For example, if this command
occurs twice, followed immediately by
<b>forward&minus;char</b>, move forward sixteen spaces; if
instead it is followed by <b>&minus;2</b>, then
<b>forward&minus;char</b>, move backward two spaces.</p>

<p style="margin-left:22%; margin-top: 1em">Inside a widget
function, if passed an argument, i.e. &lsquo;<b>zle
universal&minus;argument</b> <i>num</i>&rsquo;, the
numerical argument will be set to <i>num</i>; this is
equivalent to &lsquo;<b>NUMERIC=</b><i>num</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>argument&minus;base</b></p>

<p style="margin-left:22%;">Use the existing numeric
argument as a numeric base, which must be in the range 2 to
36 inclusive. Subsequent use of <b>digit&minus;argument</b>
and <b>universal&minus;argument</b> will input a new prefix
in the given base. The usual hexadecimal convention is used:
the letter <b>a</b> or <b>A</b> corresponds to 10, and so
on. Arguments in bases requiring digits from 10 upwards are
more conveniently input with
<b>universal&minus;argument</b>, since <b>ESC&minus;a</b>
etc. are not usually bound to
<b>digit&minus;argument</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The function
can be used with a command argument inside a
user&minus;defined widget. The following code sets the base
to 16 and lets the user input a hexadecimal argument until a
key out of the digit range is typed:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle
argument&minus;base 16 <br>
zle universal&minus;argument</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Completion
<br>
accept&minus;and&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">In a menu completion, insert
the current completion into the buffer, and advance to the
next possible completion.</p>

<p style="margin-left:11%;"><b>complete&minus;word</b></p>

<p style="margin-left:22%;">Attempt completion on the
current word.</p>


<p style="margin-left:11%;"><b>delete&minus;char&minus;or&minus;list</b>
(^D) (unbound) (unbound)</p>

<p style="margin-left:22%;">Delete the character under the
cursor. If the cursor is at the end of the line, list
possible completions for the current word.</p>


<p style="margin-left:11%;"><b>expand&minus;cmd&minus;path</b></p>

<p style="margin-left:22%;">Expand the current command to
its full pathname.</p>


<p style="margin-left:11%;"><b>expand&minus;or&minus;complete</b>
(TAB) (unbound) (TAB)</p>

<p style="margin-left:22%;">Attempt shell expansion on the
current word. If that fails, attempt completion.</p>


<p style="margin-left:11%;"><b>expand&minus;or&minus;complete&minus;prefix</b></p>

<p style="margin-left:22%;">Attempt shell expansion on the
current word up to cursor.</p>

<p style="margin-left:11%;"><b>expand&minus;history</b>
(ESC&minus;space ESC&minus;!) (unbound) (unbound)</p>

<p style="margin-left:22%;">Perform history expansion on
the edit buffer.</p>

<p style="margin-left:11%;"><b>expand&minus;word</b> (^X*)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Attempt shell expansion on the
current word.</p>

<p style="margin-left:11%;"><b>list&minus;choices</b>
(ESC&minus;^D) (^D =) (^D)</p>

<p style="margin-left:22%;">List possible completions for
the current word.</p>

<p style="margin-left:11%;"><b>list&minus;expand</b> (^Xg
^XG) (^G) (^G)</p>

<p style="margin-left:22%;">List the expansion of the
current word.</p>

<p style="margin-left:11%;"><b>magic&minus;space</b></p>

<p style="margin-left:22%;">Perform history expansion and
insert a space into the buffer. This is intended to be bound
to space.</p>

<p style="margin-left:11%;"><b>menu&minus;complete</b></p>

<p style="margin-left:22%;">Like
<b>complete&minus;word</b>, except that menu completion is
used. See the <b>MENU_COMPLETE</b> option.</p>


<p style="margin-left:11%;"><b>menu&minus;expand&minus;or&minus;complete</b></p>

<p style="margin-left:22%;">Like
<b>expand&minus;or&minus;complete</b>, except that menu
completion is used.</p>


<p style="margin-left:11%;"><b>reverse&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">Perform menu completion, like
<b>menu&minus;complete</b>, except that if a menu completion
is already in progress, move to the <i>previous</i>
completion rather than the next.</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;list</b></p>

<p style="margin-left:22%;">When a previous completion
displayed a list below the prompt, this widget can be used
to move the prompt below the list.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
<br>
accept&minus;and&minus;hold</b> (ESC&minus;A ESC&minus;a)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Push the contents of the buffer
on the buffer stack and execute it.</p>


<p style="margin-left:11%;"><b>accept&minus;and&minus;infer&minus;next&minus;history</b></p>

<p style="margin-left:22%;">Execute the contents of the
buffer. Then search the history list for a line matching the
current one and push the event following onto the buffer
stack.</p>

<p style="margin-left:11%;"><b>accept&minus;line</b> (^J
^M) (^J ^M) (^J ^M)</p>

<p style="margin-left:22%;">Finish editing the buffer.
Normally this causes the buffer to be executed as a shell
command.</p>


<p style="margin-left:11%;"><b>accept&minus;line&minus;and&minus;down&minus;history</b>
(^O) (unbound) (unbound)</p>

<p style="margin-left:22%;">Execute the current line, and
push the next history event on the buffer stack.</p>


<p style="margin-left:11%;"><b>auto&minus;suffix&minus;remove</b></p>

<p style="margin-left:22%;">If the previous action added a
suffix (space, slash, etc.) to the word on the command line,
remove it. Otherwise do nothing. Removing the suffix ends
any active menu completion or menu selection.</p>

<p style="margin-left:22%; margin-top: 1em">This widget is
intended to be called from user&minus;defined widgets to
enforce a desired suffix&minus;removal behavior.</p>


<p style="margin-left:11%;"><b>auto&minus;suffix&minus;retain</b></p>

<p style="margin-left:22%;">If the previous action added a
suffix (space, slash, etc.) to the word on the command line,
force it to be preserved. Otherwise do nothing. Retaining
the suffix ends any active menu completion or menu
selection.</p>

<p style="margin-left:22%; margin-top: 1em">This widget is
intended to be called from user&minus;defined widgets to
enforce a desired suffix&minus;preservation behavior.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>beep</b></p></td>
<td width="5%"></td>
<td width="58%">


<p>Beep, unless the <b>BEEP</b> option is unset.</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>vi&minus;cmd&minus;mode</b>
(^X^V) (unbound) (^[)</p>

<p style="margin-left:22%;">Enter command mode; that is,
select the &lsquo;<b>vicmd</b>&rsquo; keymap. Yes, this is
bound by default in emacs mode.</p>


<p style="margin-left:11%;"><b>vi&minus;caps&minus;lock&minus;panic</b></p>

<p style="margin-left:22%;">Hang until any lowercase key is
pressed. This is for vi users without the mental capacity to
keep track of their caps lock key (like the author).</p>

<p style="margin-left:11%;"><b>clear&minus;screen</b> (^L
ESC&minus;^L) (^L) (^L)</p>

<p style="margin-left:22%;">Clear the screen and redraw the
prompt.</p>


<p style="margin-left:11%;"><b>describe&minus;key&minus;briefly</b></p>

<p style="margin-left:22%;">Reads a key sequence, then
prints the function bound to that sequence.</p>


<p style="margin-left:11%;"><b>exchange&minus;point&minus;and&minus;mark</b>
(^X^X) (unbound) (unbound)</p>

<p style="margin-left:22%;">Exchange the cursor position
(point) with the position of the mark. Unless a negative
prefix argument is given, the region between point and mark
is activated so that it can be highlighted. If a zero prefix
argument is given, the region is activated but point and
mark are not swapped.</p>


<p style="margin-left:11%;"><b>execute&minus;named&minus;cmd</b>
(ESC&minus;x) (:) (unbound)</p>

<p style="margin-left:22%;">Read the name of an editor
command and execute it. A restricted set of editing
functions is available in the mini&minus;buffer. Keys are
looked up in the special <b>command</b> keymap, and if not
found there in the main keymap. An interrupt signal, as
defined by the stty setting, will abort the function. Note
that the following always perform the same task within the
<b>executed&minus;named&minus;cmd</b> environment and cannot
be replaced by user defined widgets, nor can the set of
functions be extended. The allowed functions are:
<b>backward&minus;delete&minus;char</b>,
<b>vi&minus;backward&minus;delete&minus;char</b>,
<b>clear&minus;screen</b>, <b>redisplay</b>,
<b>quoted&minus;insert</b>,
<b>vi&minus;quoted&minus;insert</b>,
<b>backward&minus;kill&minus;word</b>,
<b>vi&minus;backward&minus;kill&minus;word</b>,
<b>kill&minus;whole&minus;line</b>,
<b>vi&minus;kill&minus;line</b>,
<b>backward&minus;kill&minus;line</b>,
<b>list&minus;choices</b>,
<b>delete&minus;char&minus;or&minus;list</b>,
<b>complete&minus;word</b>, <b>accept&minus;line</b>,
<b>expand&minus;or&minus;complete</b> and
<b>expand&minus;or&minus;complete&minus;prefix</b>.</p>


<p style="margin-left:22%; margin-top: 1em"><b>kill&minus;region</b>
kills the last word, and vi&minus;cmd&minus;mode is treated
the same as accept&minus;line. The space and tab characters,
if not bound to one of these functions, will complete the
name and then list the possibilities if the <b>AUTO_LIST</b>
option is set. Any other character that is not bound to
<b>self&minus;insert</b> or
<b>self&minus;insert&minus;unmeta</b> will beep and be
ignored. The bindings of the current insert mode will be
used.</p>

<p style="margin-left:22%; margin-top: 1em">Currently this
command may not be redefined or called by name.</p>


<p style="margin-left:11%;"><b>execute&minus;last&minus;named&minus;cmd</b>
(ESC&minus;z) (unbound) (unbound)</p>

<p style="margin-left:22%;">Redo the last function executed
with <b>execute&minus;named&minus;cmd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Currently this
command may not be redefined or called by name.</p>

<p style="margin-left:11%;"><b>get&minus;line</b>
(ESC&minus;G ESC&minus;g) (unbound) (unbound)</p>

<p style="margin-left:22%;">Pop the top line off the buffer
stack and insert it at the cursor position.</p>

<p style="margin-left:11%;"><b>pound&minus;insert</b>
(unbound) (#) (unbound)</p>

<p style="margin-left:22%;">If there is no # character at
the beginning of the buffer, add one to the beginning of
each line. If there is one, remove a # from each line that
has one. In either case, accept the current line. The
<b>INTERACTIVE_COMMENTS</b> option must be set for this to
have any usefulness.</p>


<p style="margin-left:11%;"><b>vi&minus;pound&minus;insert</b></p>

<p style="margin-left:22%;">If there is no # character at
the beginning of the current line, add one. If there is one,
remove it. The <b>INTERACTIVE_COMMENTS</b> option must be
set for this to have any usefulness.</p>

<p style="margin-left:11%;"><b>push&minus;input</b></p>

<p style="margin-left:22%;">Push the entire current
multiline construct onto the buffer stack and return to the
top&minus;level (<b>PS1</b>) prompt. If the current parser
construct is only a single line, this is exactly like
<b>push&minus;line</b>. Next time the editor starts up or is
popped with <b>get&minus;line</b>, the construct will be
popped off the top of the buffer stack and loaded into the
editing buffer.</p>

<p style="margin-left:11%;"><b>push&minus;line</b> (^Q
ESC&minus;Q ESC&minus;q) (unbound) (unbound)</p>

<p style="margin-left:22%;">Push the current buffer onto
the buffer stack and clear the buffer. Next time the editor
starts up, the buffer will be popped off the top of the
buffer stack and loaded into the editing buffer.</p>


<p style="margin-left:11%;"><b>push&minus;line&minus;or&minus;edit</b></p>

<p style="margin-left:22%;">At the top&minus;level
(<b>PS1</b>) prompt, equivalent to <b>push&minus;line</b>.
At a secondary (<b>PS2</b>) prompt, move the entire current
multiline construct into the editor buffer. The latter is
equivalent to <b>push&minus;input</b> followed by
<b>get&minus;line</b>.</p>

<p style="margin-left:11%;"><b>read&minus;command</b></p>

<p style="margin-left:22%;">Only useful from a
user&minus;defined widget. A keystroke is read just as in
normal operation, but instead of the command being executed
the name of the command that would be executed is stored in
the shell parameter <b>REPLY</b>. This can be used as the
argument of a future <b>zle</b> command. If the key sequence
is not bound, status 1 is returned; typically, however,
<b>REPLY</b> is set to <b>undefined&minus;key</b> to
indicate a useless key sequence.</p>


<p style="margin-left:11%;"><b>recursive&minus;edit</b></p>

<p style="margin-left:22%;">Only useful from a
user&minus;defined widget. At this point in the function,
the editor regains control until one of the standard widgets
which would normally cause zle to exit (typically an
<b>accept&minus;line</b> caused by hitting the return key)
is executed. Instead, control returns to the
user&minus;defined widget. The status returned is
non&minus;zero if the return was caused by an error, but the
function still continues executing and hence may tidy up.
This makes it safe for the user&minus;defined widget to
alter the command line or key bindings temporarily.</p>

<p style="margin-left:22%; margin-top: 1em">The following
widget, <b>caps&minus;lock</b>, serves as an example.</p>


<p style="margin-left:32%;"><b>self&minus;insert&minus;ucase()
{ <br>
LBUFFER+=${(U)KEYS[&minus;1]} <br>
}</b></p>

<p style="margin-left:32%; margin-top: 1em">integer
stat</p>

<p style="margin-left:32%; margin-top: 1em">zle &minus;N
self&minus;insert self&minus;insert&minus;ucase <br>
zle &minus;A caps&minus;lock save&minus;caps&minus;lock <br>
zle &minus;A accept&minus;line caps&minus;lock</p>

<p style="margin-left:32%; margin-top: 1em">zle
recursive&minus;edit <br>
stat=$?</p>

<p style="margin-left:32%; margin-top: 1em">zle &minus;A
.self&minus;insert self&minus;insert <br>
zle &minus;A save&minus;caps&minus;lock caps&minus;lock <br>
zle &minus;D save&minus;caps&minus;lock</p>

<p style="margin-left:32%; margin-top: 1em">(( stat ))
&amp;&amp; zle send&minus;break</p>

<p style="margin-left:32%; margin-top: 1em">return
$stat</p>

<p style="margin-left:22%;">This causes typed letters to be
inserted capitalised until either <b>accept&minus;line</b>
(i.e. typically the return key) is typed or the
<b>caps&minus;lock</b> widget is invoked again; the later is
handled by saving the old definition of
<b>caps&minus;lock</b> as <b>save&minus;caps&minus;lock</b>
and then rebinding it to invoke <b>accept&minus;line</b>.
Note that an error from the recursive edit is detected as a
non&minus;zero return status and propagated by using the
<b>send&minus;break</b> widget.</p>

<p style="margin-left:11%;"><b>redisplay</b> (unbound) (^R)
(^R)</p>

<p style="margin-left:22%;">Redisplays the edit buffer.</p>

<p style="margin-left:11%;"><b>reset&minus;prompt</b>
(unbound) (unbound) (unbound)</p>

<p style="margin-left:22%;">Force the prompts on both the
left and right of the screen to be re&minus;expanded, then
redisplay the edit buffer. This reflects changes both to the
prompt variables themselves and changes in the expansion of
the values (for example, changes in time or directory, or
changes to the value of variables referred to by the
prompt).</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise, the
prompt is only expanded each time zle starts, and when the
display as been interrupted by output from another part of
the shell (such as a job notification) which causes the
command line to be reprinted.</p>

<p style="margin-left:11%;"><b>send&minus;break</b> (^G
ESC&minus;^G) (unbound) (unbound)</p>

<p style="margin-left:22%;">Abort the current editor
function, e.g. <b>execute&minus;named&minus;command</b>, or
the editor itself, e.g. if you are in <b>vared</b>.
Otherwise abort the parsing of the current line; in this
case the aborted line is available in the shell variable
<b>ZLE_LINE_ABORTED</b>.</p>

<p style="margin-left:11%;"><b>run&minus;help</b>
(ESC&minus;H ESC&minus;h) (unbound) (unbound)</p>

<p style="margin-left:22%;">Push the buffer onto the buffer
stack, and execute the command &lsquo;<b>run&minus;help</b>
<i>cmd</i>&rsquo;, where <i>cmd</i> is the current command.
<b>run&minus;help</b> is normally aliased to <b>man</b>.</p>


<p style="margin-left:11%;"><b>vi&minus;set&minus;buffer</b>
(unbound) (&quot;) (unbound)</p>

<p style="margin-left:22%;">Specify a buffer to be used in
the following command. There are 35 buffers that can be
specified: the 26 &lsquo;named&rsquo; buffers <b>&quot;a</b>
to <b>&quot;z</b> and the nine &lsquo;queued&rsquo; buffers
<b>&quot;1</b> to <b>&quot;9</b>. The named buffers can also
be specified as <b>&quot;A</b> to <b>&quot;Z</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When a buffer
is specified for a cut command, the text being cut replaces
the previous contents of the specified buffer. If a named
buffer is specified using a capital, the newly cut text is
appended to the buffer instead of overwriting it.</p>

<p style="margin-left:22%; margin-top: 1em">If no buffer is
specified for a cut command, <b>&quot;1</b> is used, and the
contents of <b>&quot;1</b> to <b>&quot;8</b> are each
shifted along one buffer; the contents of <b>&quot;9</b> is
lost.</p>

<p style="margin-left:11%;"><b>vi&minus;set&minus;mark</b>
(unbound) (m) (unbound)</p>

<p style="margin-left:22%;">Set the specified mark at the
cursor position.</p>


<p style="margin-left:11%;"><b>set&minus;mark&minus;command</b>
(^@) (unbound) (unbound)</p>

<p style="margin-left:22%;">Set the mark at the cursor
position. If called with a negative prefix argument, do not
set the mark but deactivate the region so that it is no
longer highlighted (it is still usable for other purposes).
Otherwise the region is marked as active.</p>

<p style="margin-left:11%;"><b>spell&minus;word</b>
(ESC&minus;$ ESC&minus;S ESC&minus;s) (unbound)
(unbound)</p>

<p style="margin-left:22%;">Attempt spelling correction on
the current word.</p>

<p style="margin-left:11%;"><b>undefined&minus;key</b></p>

<p style="margin-left:22%;">This command is executed when a
key sequence that is not bound to any command is typed. By
default it beeps.</p>

<p style="margin-left:11%;"><b>undo</b> (^_ ^Xu ^X^U)
(unbound) (unbound)</p>

<p style="margin-left:22%;">Incrementally undo the last
text modification. When called from a user&minus;defined
widget, takes an optional argument indicating a previous
state of the undo history as returned by the
<b>UNDO_CHANGE_NO</b> variable; modifications are undone
until that state is reached.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>redo</b></p></td>
<td width="5%"></td>
<td width="69%">


<p>Incrementally redo undone text modifications.</p></td>
<td width="9%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>vi&minus;undo&minus;change</b>
(unbound) (u) (unbound)</p>

<p style="margin-left:22%;">Undo the last text
modification. If repeated, redo the modification.</p>


<p style="margin-left:11%;"><b>what&minus;cursor&minus;position</b>
(^X=) (unbound) (unbound)</p>

<p style="margin-left:22%;">Print the character under the
cursor, its code as an octal, decimal and hexadecimal
number, the current cursor position within the buffer and
the column of the cursor in the current line.</p>

<p style="margin-left:11%;"><b>where&minus;is</b></p>

<p style="margin-left:22%;">Read the name of an editor
command and print the listing of key sequences that invoke
the specified command. A restricted set of editing functions
is available in the mini&minus;buffer. Keys are looked up in
the special <b>command</b> keymap, and if not found there in
the main keymap.</p>

<p style="margin-left:11%;"><b>which&minus;command</b>
(ESC&minus;?) (unbound) (unbound)</p>

<p style="margin-left:22%;">Push the buffer onto the buffer
stack, and execute the command
&lsquo;<b>which&minus;command</b> <i>cmd</i>&rsquo;. where
<i>cmd</i> is the current command.
<b>which&minus;command</b> is normally aliased to
<i>whence</i>.</p>


<p style="margin-left:11%;"><b>vi&minus;digit&minus;or&minus;beginning&minus;of&minus;line</b>
(unbound) (0) (unbound)</p>

<p style="margin-left:22%;">If the last command executed
was a digit as part of an argument, continue the argument.
Otherwise, execute
vi&minus;beginning&minus;of&minus;line.</p>

<h2>CHARACTER HIGHLIGHTING
<a name="CHARACTER HIGHLIGHTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The line editor
has the ability to highlight characters or regions of the
line that have a particular significance. This is controlled
by the array parameter <b>zle_highlight</b>, if it has been
set by the user.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter contains the single entry <b>none</b> all
highlighting is turned off. Note the parameter is still
expected to be an array.</p>

<p style="margin-left:11%; margin-top: 1em">Otherwise each
entry of the array should consist of a word indicating a
context for highlighting, then a colon, then a
comma&minus;separated list of the types of highlighting to
apply in that context.</p>

<p style="margin-left:11%; margin-top: 1em">The contexts
available for highlighting are the following: <b><br>
default</b></p>

<p style="margin-left:22%;">Any text within the command
line not affected by any other highlighting. Text outside
the editable area of the command line is not affected.</p>

<p style="margin-left:11%;"><b>isearch</b></p>

<p style="margin-left:22%;">When one of the incremental
history search widgets is active, the area of the command
line matched by the search string or pattern.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>region</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The region between the cursor (point) and the mark as
set with <b>set&minus;mark&minus;command</b>. The region is
only highlighted if it is active, which is the case if
<b>set&minus;mark&minus;command</b> or
<b>exchange&minus;point&minus;and&minus;mark</b> has been
called and the line has not been subsequently modified. The
region can be deactivated by calling
<b>set&minus;mark&minus;command</b> with a negative prefix
argument, or reactivated by calling
<b>exchange&minus;point&minus;and&minus;mark</b> with a zero
prefix argument. Note that whether or not the region is
active has no effect on its use within widgets, it simply
determines whether it is highlighted.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>special</b></p>

<p style="margin-left:22%;">Individual characters that have
no direct printable representation but are shown in a
special manner by the line editor. These characters are
described below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>suffix</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This context is used in completion for characters that
are marked as suffixes that will be removed if the
completion ends at that point, the most obvious example
being a slash (<b>/</b>) after a directory name. Note that
suffix removal is configurable; the circumstances under
which the suffix will be removed may differ for different
completions.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>zle_highlight</b>
may contain additional fields for controlling how terminal
sequences to change colours are output. Each of the
following is followed by a colon and a string in the same
form as for key bindings. This will not be necessary for the
vast majority of terminals as the defaults shown in
parentheses are widely used. <b><br>
fg_start_code</b> (<b>\e[3</b>)</p>

<p style="margin-left:22%;">The start of the escape
sequence for the foreground colour. This is followed by an
ASCII digit representing the colour.</p>

<p style="margin-left:11%;"><b>fg_default_code</b>
(<b>9</b>)</p>

<p style="margin-left:22%;">The number to use instead of
the colour to reset the default foreground colour.</p>

<p style="margin-left:11%;"><b>fg_end_code</b>
(<b>m</b>)</p>

<p style="margin-left:22%;">The end of the escape sequence
for the foreground colour.</p>

<p style="margin-left:11%;"><b>bg_start_code</b>
(<b>\e[4</b>)</p>

<p style="margin-left:22%;">The start of the escape
sequence for the background colour. This is followed by an
ASCII digit representing the colour.</p>

<p style="margin-left:11%;"><b>bg_default_code</b>
(<b>9</b>)</p>

<p style="margin-left:22%;">The number to use instead of
the colour to reset the default background colour.</p>

<p style="margin-left:11%;"><b>bg_end_code</b>
(<b>m</b>)</p>

<p style="margin-left:22%;">The end of the escape sequence
for the background colour.</p>

<p style="margin-left:11%; margin-top: 1em">The available
types of highlighting are the following. Note that not all
types of highlighting are available on all terminals:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>No highlighting is applied to the given context. It is
not useful for this to appear with other types of
highlighting; it is used to override a default.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>fg=</b><i>colour</i></p>

<p style="margin-left:22%;">The foreground colour should be
set to <i>colour</i>, a decimal integer or the name of one
of the eight most widely&minus;supported colours.</p>

<p style="margin-left:22%; margin-top: 1em">Not all
terminals support this and, of those that do, not all
provide facilities to test the support, hence the user
should decide based on the terminal type. Most terminals
support the colours <b>black</b>, <b>red</b>, <b>green</b>,
<b>yellow</b>, <b>blue</b>, <b>magenta</b>, <b>cyan</b> and
<b>white</b>, which can be set by name. In addition.
<b>default</b> may be used to set the terminal&rsquo;s
default foreground colour. Abbreviations are allowed;
<b>b</b> or <b>bl</b> selects black. Some terminals may
generate additional colours if the <b>bold</b> attribute is
also present.</p>

<p style="margin-left:22%; margin-top: 1em">On recent
terminals and on systems with an up&minus;to&minus;date
terminal database the number of colours supported may be
tested by the command &lsquo;<b>echotc Co</b>&rsquo;; if
this succeeds, it indicates a limit on the number of colours
which will be enforced by the line editor. The number of
colours is in any case limited to 256 (i.e. the range 0 to
255).</p>

<p style="margin-left:22%; margin-top: 1em">Colour is also
known as color.</p>

<p style="margin-left:11%;"><b>bg=</b><i>colour</i></p>

<p style="margin-left:22%;">The background colour should be
set to <i>colour</i>. This works similarly to the foreground
colour, except the background is not usually affected by the
bold attribute.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>bold</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The characters in the given context are shown in a bold
font. Not all terminals distinguish bold fonts.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>standout</b></p>

<p style="margin-left:22%;">The characters in the given
context are shown in the terminal&rsquo;s standout mode. The
actual effect is specific to the terminal; on many terminals
it is inverse video. On some such terminals, where the
cursor does not blink it appears with standout mode negated,
making it less than clear where the cursor actually is. On
such terminals one of the other effects may be preferable
for highlighting the region and matched search string.</p>

<p style="margin-left:11%;"><b>underline</b></p>

<p style="margin-left:22%;">The characters in the given
context are shown underlined. Some terminals show the
foreground in a different colour instead; in this case
whitespace will not be highlighted.</p>

<p style="margin-left:11%; margin-top: 1em">The characters
described above as &lsquo;special&rsquo; are as follows. The
formatting described here is used irrespective of whether
the characters are highlighted: <br>
ASCII control characters</p>

<p style="margin-left:22%;">Control characters in the ASCII
range are shown as &lsquo;<b>^</b>&rsquo; followed by the
base character.</p>

<p style="margin-left:11%;">Unprintable multibyte
characters</p>

<p style="margin-left:22%;">This item applies to control
characters not in the ASCII range, plus other characters as
follows. If the <b>MULTIBYTE</b> option is in effect,
multibyte characters not in the ASCII character set that are
reported as having zero width are treated as combining
characters when the option <b>COMBINING_CHARS</b> is on. If
the option is off, or if a character appears where a
combining character is not valid, the character is treated
as unprintable.</p>

<p style="margin-left:22%; margin-top: 1em">Unprintable
multibyte characters are shown as a hexadecimal number
between angle brackets. The number is the code point of the
character in the wide character set; this may or may not be
Unicode, depending on the operating system.</p>

<p style="margin-left:11%;">Invalid multibyte
characters</p>

<p style="margin-left:22%;">If the <b>MULTIBYTE</b> option
is in effect, any sequence of one or more bytes that does
not form a valid character in the current character set is
treated as a series of bytes each shown as a special
character. This case can be distinguished from other
unprintable characters as the bytes are represented as two
hexadecimal digits between angle brackets, as distinct from
the four or eight digits that are used for unprintable
characters that are nonetheless valid in the current
character set.</p>

<p style="margin-left:22%; margin-top: 1em">Not all systems
support this: for it to work, the system&rsquo;s
representation of wide characters must be code values from
the Universal Character Set, as defined by IS0 10646 (also
known as Unicode).</p>

<p style="margin-left:11%;">Wrapped double&minus;width
characters</p>

<p style="margin-left:22%;">When a double&minus;width
character appears in the final column of a line, it is
instead shown on the next line. The empty space left in the
original position is highlighted as a special character.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>zle_highlight</b> is not set or no value applies to a
particular context, the defaults applied are equivalent
to</p>


<p style="margin-left:22%; margin-top: 1em"><b>zle_highlight=(region:standout
special:standout <br>
suffix:bold isearch:underline)</b></p>

<p style="margin-left:11%; margin-top: 1em">i.e. both the
region and special characters are shown in standout
mode.</p>

<p style="margin-left:11%; margin-top: 1em">Within widgets,
arbitrary regions may be highlighted by setting the special
array parameter <b>region_highlight</b>; see above.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshcompwid
&minus; zsh completion widgets</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
shell&rsquo;s programmable completion mechanism can be
manipulated in two ways; here the low&minus;level features
supporting the newer, function&minus;based mechanism are
defined. A complete set of shell functions based on these
features is described in <i>zshcompsys</i>(1), and users
with no interest in adding to that system (or, potentially,
writing their own &minus;&minus; see dictionary entry for
&lsquo;hubris&rsquo;) should skip the current section. The
older system based on the <b>compctl</b> builtin command is
described in <i>zshcompctl</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Completion
widgets are defined by the <b>&minus;C</b> option to the
<b>zle</b> builtin command provided by the <b>zsh/zle</b>
module (see <i>zshzle</i>(1)). For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>zle &minus;C
complete expand&minus;or&minus;complete completer</b></p>

<p style="margin-left:11%; margin-top: 1em">defines a
widget named &lsquo;<b>complete</b>&rsquo;. The second
argument is the name of any of the builtin widgets that
handle completions: <b>complete&minus;word</b>,
<b>expand&minus;or&minus;complete</b>,
<b>expand&minus;or&minus;complete&minus;prefix</b>,
<b>menu&minus;complete</b>,
<b>menu&minus;expand&minus;or&minus;complete</b>,
<b>reverse&minus;menu&minus;complete</b>,
<b>list&minus;choices</b>, or
<b>delete&minus;char&minus;or&minus;list</b>. Note that this
will still work even if the widget in question has been
re&minus;bound.</p>

<p style="margin-left:11%; margin-top: 1em">When this newly
defined widget is bound to a key using the <b>bindkey</b>
builtin command defined in the <b>zsh/zle</b> module (see
<i>zshzle</i>(1)), typing that key will call the shell
function &lsquo;<b>completer</b>&rsquo;. This function is
responsible for generating the possible matches using the
builtins described below. As with other ZLE widgets, the
function is called with its standard input closed.</p>

<p style="margin-left:11%; margin-top: 1em">Once the
function returns, the completion code takes over control
again and treats the matches in the same manner as the
specified builtin widget, in this case
<b>expand&minus;or&minus;complete</b>.</p>

<h2>COMPLETION SPECIAL PARAMETERS
<a name="COMPLETION SPECIAL PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The parameters
<b>ZLE_REMOVE_SUFFIX_CHARS</b> and
<b>ZLE_SPACE_SUFFIX_CHARS</b> are used by the completion
mechanism, but are not special. See <i>Parameters Used By
The Shell</i> in <i>zshparam</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Inside
completion widgets, and any functions called from them, some
parameters have special meaning; outside these functions
they are not special to the shell in any way. These
parameters are used to pass information between the
completion code and the completion widget. Some of the
builtin commands and the condition codes use or change the
current values of these parameters. Any existing values will
be hidden during execution of completion widgets; except for
<b>compstate</b>, the parameters are reset on each function
exit (including nested function calls from within the
completion widget) to the values they had when the function
was entered. <b><br>
CURRENT</b></p>

<p style="margin-left:22%;">This is the number of the
current word, i.e. the word the cursor is currently on in
the <b>words</b> array. Note that this value is only correct
if the <b>ksharrays</b> option is not set.</p>

<p style="margin-left:11%;"><b>IPREFIX</b></p>

<p style="margin-left:22%;">Initially this will be set to
the empty string. This parameter functions like
<b>PREFIX</b>; it contains a string which precedes the one
in <b>PREFIX</b> and is not considered part of the list of
matches. Typically, a string is transferred from the
beginning of <b>PREFIX</b> to the end of <b>IPREFIX</b>, for
example:</p>


<p style="margin-left:32%; margin-top: 1em"><b>IPREFIX=${PREFIX%%\=*}=
<br>
PREFIX=${PREFIX#*=}</b></p>

<p style="margin-left:22%; margin-top: 1em">causes the part
of the prefix up to and including the first equal sign not
to be treated as part of a matched string. This can be done
automatically by the <b>compset</b> builtin, see below.</p>

<p style="margin-left:11%;"><b>ISUFFIX</b></p>

<p style="margin-left:22%;">As <b>IPREFIX</b>, but for a
suffix that should not be considered part of the matches;
note that the <b>ISUFFIX</b> string follows the
<b>SUFFIX</b> string.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>PREFIX</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Initially this will be set to the part of the current
word from the beginning of the word up to the position of
the cursor; it may be altered to give a common prefix for
all matches.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>QIPREFIX</b></p>

<p style="margin-left:22%;">This parameter is
read&minus;only and contains the quoted string up to the
word being completed. E.g. when completing
&lsquo;<b>&quot;foo</b>&rsquo;, this parameter contains the
double quote. If the <b>&minus;q</b> option of
<b>compset</b> is used (see below), and the original string
was &lsquo;<b>&quot;foo bar</b>&rsquo; with the cursor on
the &lsquo;<b>bar</b>&rsquo;, this parameter contains
&lsquo;<b>&quot;foo</b> &rsquo;.</p>

<p style="margin-left:11%;"><b>QISUFFIX</b></p>

<p style="margin-left:22%;">Like <b>QIPREFIX</b>, but
containing the suffix.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>SUFFIX</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Initially this will be set to the part of the current
word from the cursor position to the end; it may be altered
to give a common suffix for all matches. It is most useful
when the option <b>COMPLETE_IN_WORD</b> is set, as otherwise
the whole word on the command line is treated as a
prefix.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>compstate</b></p>

<p style="margin-left:22%;">This is an associative array
with various keys and values that the completion code uses
to exchange information with the completion widget. The keys
are: <b><br>
all_quotes</b></p>

<p style="margin-left:32%;">The <b>&minus;q</b> option of
the <b>compset</b> builtin command (see below) allows a
quoted string to be broken into separate words; if the
cursor is on one of those words, that word will be
completed, possibly invoking &lsquo;<b>compset
&minus;q</b>&rsquo; recursively. With this key it is
possible to test the types of quoted strings which are
currently broken into parts in this fashion. Its value
contains one character for each quoting level. The
characters are a single quote or a double quote for strings
quoted with these characters, a dollars sign for strings
quoted with <b>$&rsquo;</b><i>...</i><b>&rsquo;</b> and a
backslash for strings not starting with a quote character.
The first character in the value always corresponds to the
innermost quoting level.</p>

<p style="margin-left:22%;"><b>context</b></p>

<p style="margin-left:32%;">This will be set by the
completion code to the overall context in which completion
is attempted. Possible values are: <b><br>
array_value</b></p>

<p style="margin-left:43%;">when completing inside the
value of an array parameter assignment; in this case the
<b>words</b> array contains the words inside the
parentheses.</p>

<p style="margin-left:32%;"><b>brace_parameter</b></p>

<p style="margin-left:43%;">when completing the name of a
parameter in a parameter expansion beginning with <b>${</b>.
This context will also be set when completing parameter
flags following <b>${(</b>; the full command line argument
is presented and the handler must test the value to be
completed to ascertain that this is the case.</p>

<p style="margin-left:32%;"><b>assign_parameter</b></p>

<p style="margin-left:43%;">when completing the name of a
parameter in a parameter assignment.</p>

<p style="margin-left:32%;"><b>command</b></p>

<p style="margin-left:43%;">when completing for a normal
command (either in command position or for an argument of
the command).</p>

<p style="margin-left:32%;"><b>condition</b></p>

<p style="margin-left:43%;">when completing inside a
&lsquo;<b>[[</b>...<b>]]</b>&rsquo; conditional expression;
in this case the <b>words</b> array contains only the words
inside the conditional expression.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="6%">


<p><b>math</b></p></td>
<td width="5%"></td>
<td width="57%">


<p>when completing in a mathematical environment such as a
&lsquo;<b>((</b>...<b>))</b>&rsquo; construct.</p></td></tr>
</table>

<p style="margin-left:32%;"><b>parameter</b></p>

<p style="margin-left:43%;">when completing the name of a
parameter in a parameter expansion beginning with <b>$</b>
but not <b>${</b>.</p>

<p style="margin-left:32%;"><b>redirect</b></p>

<p style="margin-left:43%;">when completing after a
redirection operator.</p>

<p style="margin-left:32%;"><b>subscript</b></p>

<p style="margin-left:43%;">when completing inside a
parameter subscript.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="18%">


<p><b>value</b></p></td>
<td width="3%"></td>
<td width="57%">


<p>when completing the value of a parameter assignment.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="18%">


<p><b>exact</b></p></td>
<td width="3%"></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">Controls the
behaviour when the <b>REC_EXACT</b> option is set. It will
be set to <b>accept</b> if an exact match would be accepted,
and will be unset otherwise.</p>

<p style="margin-left:32%; margin-top: 1em">If it was set
when at least one match equal to the string on the line was
generated, the match is accepted.</p>

<p style="margin-left:22%;"><b>exact_string</b></p>

<p style="margin-left:32%;">The string of an exact match if
one was found, otherwise unset.</p>

<p style="margin-left:22%;"><b>ignored</b></p>

<p style="margin-left:32%;">The number of words that were
ignored because they matched one of the patterns given with
the <b>&minus;F</b> option to the <b>compadd</b> builtin
command.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>insert</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>This controls the manner in which a match is inserted
into the command line. On entry to the widget function, if
it is unset the command line is not to be changed; if set to
<b>unambiguous</b>, any prefix common to all matches is to
be inserted; if set to <b>automenu&minus;unambiguous</b>,
the common prefix is to be inserted and the next invocation
of the completion code may start menu completion (due to the
<b>AUTO_MENU</b> option being set); if set to <b>menu</b> or
<b>automenu</b> menu completion will be started for the
matches currently generated (in the latter case this will
happen because the <b>AUTO_MENU</b> is set). The value may
also contain the string &lsquo;<b>tab</b>&rsquo; when the
completion code would normally not really do completion, but
only insert the TAB character.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">On exit it may
be set to any of the values above (where setting it to the
empty string is the same as unsetting it), or to a number,
in which case the match whose number is given will be
inserted into the command line. Negative numbers count
backward from the last match (with
&lsquo;<b>&minus;1</b>&rsquo; selecting the last match) and
out&minus;of&minus;range values are wrapped around, so that
a value of zero selects the last match and a value one more
than the maximum selects the first. Unless the value of this
key ends in a space, the match is inserted as in a menu
completion, i.e. without automatically appending a
space.</p>

<p style="margin-left:32%; margin-top: 1em">Both
<b>menu</b> and <b>automenu</b> may also specify the number
of the match to insert, given after a colon. For example,
&lsquo;<b>menu:2</b>&rsquo; says to start menu completion,
beginning with the second match.</p>

<p style="margin-left:32%; margin-top: 1em">Note that a
value containing the substring &lsquo;<b>tab</b>&rsquo;
makes the matches generated be ignored and only the TAB be
inserted.</p>

<p style="margin-left:32%; margin-top: 1em">Finally, it may
also be set to <b>all</b>, which makes all matches generated
be inserted into the line.</p>

<p style="margin-left:22%;"><b>insert_positions</b></p>

<p style="margin-left:32%;">When the completion system
inserts an unambiguous string into the line, there may be
multiple places where characters are missing or where the
character inserted differs from at least one match. The
value of this key contains a colon separated list of all
these positions, as indexes into the command line.</p>

<p style="margin-left:22%;"><b>last_prompt</b></p>

<p style="margin-left:32%;">If this is set to a
non&minus;empty string for every match added, the completion
code will move the cursor back to the previous prompt after
the list of completions has been displayed. Initially this
is set or unset according to the <b>ALWAYS_LAST_PROMPT</b>
option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>list</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>This controls whether or how the list of matches will be
displayed. If it is unset or empty they will never be
listed; if its value begins with <b>list</b>, they will
always be listed; if it begins with <b>autolist</b> or
<b>ambiguous</b>, they will be listed when the
<b>AUTO_LIST</b> or <b>LIST_AMBIGUOUS</b> options
respectively would normally cause them to be.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">If the
substring <b>force</b> appears in the value, this makes the
list be shown even if there is only one match. Normally, the
list would be shown only if there are at least two
matches.</p>

<p style="margin-left:32%; margin-top: 1em">The value
contains the substring <b>packed</b> if the
<b>LIST_PACKED</b> option is set. If this substring is given
for all matches added to a group, this group will show the
<b>LIST_PACKED</b> behavior. The same is done for the
<b>LIST_ROWS_FIRST</b> option with the substring
<b>rows</b>.</p>

<p style="margin-left:32%; margin-top: 1em">Finally, if the
value contains the string <b>explanations</b>, only the
explanation strings, if any, will be listed and if it
contains <b>messages</b>, only the messages (added with the
<b>&minus;x</b> option of <b>compadd</b>) will be listed. If
it contains both <b>explanations</b> and <b>messages</b>
both kinds of explanation strings will be listed. It will be
set appropriately on entry to a completion widget and may be
changed there.</p>

<p style="margin-left:22%;"><b>list_lines</b></p>

<p style="margin-left:32%;">This gives the number of lines
that are needed to display the full list of completions.
Note that to calculate the total number of lines to display
you need to add the number of lines needed for the command
line to this value, this is available as the value of the
<b>BUFFERLINES</b> special parameter.</p>

<p style="margin-left:22%;"><b>list_max</b></p>

<p style="margin-left:32%;">Initially this is set to the
value of the <b>LISTMAX</b> parameter. It may be set to any
other value; when the widget exits this value will be used
in the same way as the value of <b>LISTMAX</b>.</p>

<p style="margin-left:22%;"><b>nmatches</b></p>

<p style="margin-left:32%;">The number of matches generated
and accepted by the completion code so far.</p>

<p style="margin-left:22%;"><b>old_insert</b></p>

<p style="margin-left:32%;">On entry to the widget this
will be set to the number of the match of an old list of
completions that is currently inserted into the command
line. If no match has been inserted, this is unset.</p>

<p style="margin-left:32%; margin-top: 1em">As with
<b>old_list</b>, the value of this key will only be used if
it is the string <b>keep</b>. If it was set to this value by
the widget and there was an old match inserted into the
command line, this match will be kept and if the value of
the <b>insert</b> key specifies that another match should be
inserted, this will be inserted after the old one.</p>

<p style="margin-left:22%;"><b>old_list</b></p>

<p style="margin-left:32%;">This is set to <b>yes</b> if
there is still a valid list of completions from a previous
completion at the time the widget is invoked. This will
usually be the case if and only if the previous editing
operation was a completion widget or one of the builtin
completion functions. If there is a valid list and it is
also currently shown on the screen, the value of this key is
<b>shown</b>.</p>

<p style="margin-left:32%; margin-top: 1em">After the
widget has exited the value of this key is only used if it
was set to <b>keep</b>. In this case the completion code
will continue to use this old list. If the widget generated
new matches, they will not be used.</p>

<p style="margin-left:22%;"><b>parameter</b></p>

<p style="margin-left:32%;">The name of the parameter when
completing in a subscript or in the value of a parameter
assignment.</p>

<p style="margin-left:22%;"><b>pattern_insert</b></p>

<p style="margin-left:32%;">Normally this is set to
<b>menu</b>, which specifies that menu completion will be
used whenever a set of matches was generated using pattern
matching. If it is set to any other non&minus;empty string
by the user and menu completion is not selected by other
option settings, the code will instead insert any common
prefix for the generated matches as with normal
completion.</p>

<p style="margin-left:22%;"><b>pattern_match</b></p>

<p style="margin-left:32%;">Locally controls the behaviour
given by the <b>GLOB_COMPLETE</b> option. Initially it is
set to &lsquo;<b>*</b>&rsquo; if and only if the option is
set. The completion widget may set it to this value, to an
empty string (which has the same effect as unsetting it), or
to any other non&minus;empty string. If it is
non&minus;empty, unquoted metacharacters on the command line
will be treated as patterns; if it is
&lsquo;<b>*</b>&rsquo;, then additionally a wildcard
&lsquo;<b>*</b>&rsquo; is assumed at the cursor position; if
it is empty or unset, metacharacters will be treated
literally.</p>

<p style="margin-left:32%; margin-top: 1em">Note that the
matcher specifications given to the <b>compadd</b> builtin
command are not used if this is set to a non&minus;empty
string.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>quote</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>When completing inside quotes, this contains the
quotation character (i.e. either a single quote, a double
quote, or a backtick). Otherwise it is unset.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>quoting</b></p>

<p style="margin-left:32%;">When completing inside single
quotes, this is set to the string <b>single</b>; inside
double quotes, the string <b>double</b>; inside backticks,
the string <b>backtick</b>. Otherwise it is unset.</p>

<p style="margin-left:22%;"><b>redirect</b></p>

<p style="margin-left:32%;">The redirection operator when
completing in a redirection position, i.e. one of
<b>&lt;</b>, <b>&gt;</b>, etc.</p>

<p style="margin-left:22%;"><b>restore</b></p>

<p style="margin-left:32%;">This is set to <b>auto</b>
before a function is entered, which forces the special
parameters mentioned above (<b>words</b>, <b>CURRENT</b>,
<b>PREFIX</b>, <b>IPREFIX</b>, <b>SUFFIX</b>, and
<b>ISUFFIX</b>) to be restored to their previous values when
the function exits. If a function unsets it or sets it to
any other string, they will not be restored.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>to_end</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Specifies the occasions on which the cursor is moved to
the end of a string when a match is inserted. On entry to a
widget function, it may be <b>single</b> if this will happen
when a single unambiguous match was inserted or <b>match</b>
if it will happen any time a match is inserted (for example,
by menu completion; this is likely to be the effect of the
<b>ALWAYS_TO_END</b> option).</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">On exit, it may
be set to <b>single</b> as above. It may also be set to
<b>always</b>, or to the empty string or unset; in those
cases the cursor will be moved to the end of the string
always or never respectively. Any other string is treated as
<b>match</b>.</p>

<p style="margin-left:22%;"><b>unambiguous</b></p>

<p style="margin-left:32%;">This key is read&minus;only and
will always be set to the common (unambiguous) prefix the
completion code has generated for all matches added so
far.</p>

<p style="margin-left:22%;"><b>unambiguous_cursor</b></p>

<p style="margin-left:32%;">This gives the position the
cursor would be placed at if the common prefix in the
<b>unambiguous</b> key were inserted, relative to the value
of that key. The cursor would be placed before the character
whose index is given by this key.</p>


<p style="margin-left:22%;"><b>unambiguous_positions</b></p>

<p style="margin-left:32%;">This contains all positions
where characters in the unambiguous string are missing or
where the character inserted differs from at least one of
the matches. The positions are given as indexes into the
string given by the value of the <b>unambiguous</b> key.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>vared</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>If completion is called while editing a line using the
<b>vared</b> builtin, the value of this key is set to the
name of the parameter given as an argument to <b>vared</b>.
This key is only set while a <b>vared</b> command is
active.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>words</b></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This array
contains the words present on the command line currently
being edited.</p>

<h2>COMPLETION BUILTIN COMMANDS
<a name="COMPLETION BUILTIN COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>compadd</b>
[ <b>&minus;akqQfenUld12C</b> ] [ <b>&minus;F</b>
<i>array</i> ] <br>
[ <b>&minus;P</b> <i>prefix</i> ] [ <b>&minus;S</b>
<i>suffix</i> ] <br>
[ <b>&minus;p</b> <i>hidden&minus;prefix</i> ] [
<b>&minus;s</b> <i>hidden&minus;suffix</i> ] <br>
[ <b>&minus;i</b> <i>ignored&minus;prefix</i> ] [
<b>&minus;I</b> <i>ignored&minus;suffix</i> ] <br>
[ <b>&minus;W</b> <i>file&minus;prefix</i> ] [
<b>&minus;d</b> <i>array</i> ] <br>
[ <b>&minus;J</b> <i>name</i> ] [ <b>&minus;V</b>
<i>name</i> ] [ <b>&minus;X</b> <i>explanation</i> ] [
<b>&minus;x</b> <i>message</i> ] <br>
[ <b>&minus;r</b> <i>remove&minus;chars</i> ] [
<b>&minus;R</b> <i>remove&minus;func</i> ] <br>
[ <b>&minus;D</b> <i>array</i> ] [ <b>&minus;O</b>
<i>array</i> ] [ <b>&minus;A</b> <i>array</i> ] <br>
[ <b>&minus;E</b> <i>number</i> ] <br>
[ <b>&minus;M</b> <i>match&minus;spec</i> ] [
<b>&minus;&minus;</b> ] [ <i>words</i> ... ]</p>

<p style="margin-left:22%; margin-top: 1em">This builtin
command can be used to add matches directly and control all
the information the completion code stores with each
possible match. The return status is zero if at least one
match was added and non&minus;zero if no matches were
added.</p>

<p style="margin-left:22%; margin-top: 1em">The completion
code breaks the string to complete into seven fields in the
order:</p>


<p style="margin-left:32%; margin-top: 1em"><i>&lt;ipre&gt;&lt;apre&gt;&lt;hpre&gt;&lt;word&gt;&lt;hsuf&gt;&lt;asuf&gt;&lt;isuf&gt;</i></p>

<p style="margin-left:22%; margin-top: 1em">The first field
is an ignored prefix taken from the command line, the
contents of the <b>IPREFIX</b> parameter plus the string
given with the <b>&minus;i</b> option. With the
<b>&minus;U</b> option, only the string from the
<b>&minus;i</b> option is used. The field
<i>&lt;apre&gt;</i> is an optional prefix string given with
the <b>&minus;P</b> option. The <i>&lt;hpre&gt;</i> field is
a string that is considered part of the match but that
should not be shown when listing completions, given with the
<b>&minus;p</b> option; for example, functions that do
filename generation might specify a common path prefix this
way. <i>&lt;word&gt;</i> is the part of the match that
should appear in the list of completions, i.e. one of the
<i>words</i> given at the end of the <b>compadd</b> command
line. The suffixes <i>&lt;hsuf&gt;</i>, <i>&lt;asuf&gt;</i>
and <i>&lt;isuf&gt;</i> correspond to the prefixes
<i>&lt;hpre&gt;</i>, <i>&lt;apre&gt;</i> and
<i>&lt;ipre&gt;</i> and are given by the options
<b>&minus;s</b>, <b>&minus;S</b> and <b>&minus;I</b>,
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">The supported
flags are: <b><br>
&minus;P</b> <i>prefix</i></p>

<p style="margin-left:32%;">This gives a string to be
inserted before the given <i>words</i>. The string given is
not considered as part of the match and any shell
metacharacters in it will not be quoted when the string is
inserted.</p>

<p style="margin-left:22%;"><b>&minus;S</b>
<i>suffix</i></p>

<p style="margin-left:32%;">Like <b>&minus;P</b>, but gives
a string to be inserted after the match.</p>

<p style="margin-left:22%;"><b>&minus;p</b>
<i>hidden&minus;prefix</i></p>

<p style="margin-left:32%;">This gives a string that should
be inserted into the command line before the match but that
should not appear in the list of matches. Unless the
<b>&minus;U</b> option is given, this string must be matched
as part of the string on the command line.</p>

<p style="margin-left:22%;"><b>&minus;s</b>
<i>hidden&minus;suffix</i></p>

<p style="margin-left:32%;">Like
&lsquo;<b>&minus;p</b>&rsquo;, but gives a string to insert
after the match.</p>

<p style="margin-left:22%;"><b>&minus;i</b>
<i>ignored&minus;prefix</i></p>

<p style="margin-left:32%;">This gives a string to insert
into the command line just before any string given with the
&lsquo;<b>&minus;P</b>&rsquo; option. Without
&lsquo;<b>&minus;P</b>&rsquo; the string is inserted before
the string given with &lsquo;<b>&minus;p</b>&rsquo; or
directly before the match.</p>

<p style="margin-left:22%;"><b>&minus;I</b>
<i>ignored&minus;suffix</i></p>

<p style="margin-left:32%;">Like <b>&minus;i</b>, but gives
an ignored suffix.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>With this flag the <i>words</i> are taken as names of
arrays and the possible matches are their values. If only
some elements of the arrays are needed, the <i>words</i> may
also contain subscripts, as in
&lsquo;<b>foo[2,&minus;1]</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;k</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>With this flag the <i>words</i> are taken as names of
associative arrays and the possible matches are their keys.
As for <b>&minus;a</b>, the <i>words</i> may also contain
subscripts, as in &lsquo;<b>foo[(R)*bar*]</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;d</b>
<i>array</i></p>

<p style="margin-left:32%;">This adds per&minus;match
display strings. The <i>array</i> should contain one element
per <i>word</i> given. The completion code will then display
the first element instead of the first <i>word</i>, and so
on. The <i>array</i> may be given as the name of an array
parameter or directly as a space&minus;separated list of
words in parentheses.</p>

<p style="margin-left:32%; margin-top: 1em">If there are
fewer display strings than <i>words</i>, the leftover
<i>words</i> will be displayed unchanged and if there are
more display strings than <i>words</i>, the leftover display
strings will be silently ignored.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This option only has an effect if used together with the
<b>&minus;d</b> option. If it is given, the display strings
are listed one per line, not arrayed in columns.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This option only has an effect if used together with the
<b>&minus;d</b> option. If it is given, the order of the
output is determined by the match strings; otherwise it is
determined by the display strings (i.e. the strings given by
the <b>&minus;d</b> option).</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;J</b> <i>name</i></p>

<p style="margin-left:32%;">Gives the name of the group of
matches the words should be stored in.</p>

<p style="margin-left:22%;"><b>&minus;V</b> <i>name</i></p>

<p style="margin-left:32%;">Like <b>&minus;J</b> but naming
an unsorted group. These are in a different name space than
groups created with the <b>&minus;J</b> flag.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;1</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>If given together with the <b>&minus;V</b> option, makes
only consecutive duplicates in the group be removed. If
combined with the <b>&minus;J</b> option, this has no
visible effect. Note that groups with and without this flag
are in different name spaces.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;2</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>If given together with the <b>&minus;J</b> or
<b>&minus;V</b> option, makes all duplicates be kept. Again,
groups with and without this flag are in different name
spaces.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;X</b>
<i>explanation</i></p>

<p style="margin-left:32%;">The <i>explanation</i> string
will be printed with the list of matches, above the group
currently selected.</p>

<p style="margin-left:22%;"><b>&minus;x</b>
<i>message</i></p>

<p style="margin-left:32%;">Like <b>&minus;X</b>, but the
<i>message</i> will be printed even if there are no matches
in the group.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The suffix given with <b>&minus;S</b> will be
automatically removed if the next character typed is a blank
or does not insert anything, or if the suffix consists of
only one character and the next character typed is the same
character.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;r</b>
<i>remove&minus;chars</i></p>

<p style="margin-left:32%;">This is a more versatile form
of the <b>&minus;q</b> option. The suffix given with
<b>&minus;S</b> or the slash automatically added after
completing directories will be automatically removed if the
next character typed inserts one of the characters given in
the <i>remove&minus;chars</i>. This string is parsed as a
characters class and understands the backslash sequences
used by the <b>print</b> command. For example,
&lsquo;<b>&minus;r &quot;a&minus;z\t&quot;</b>&rsquo;
removes the suffix if the next character typed inserts a
lower case character or a TAB, and &lsquo;<b>&minus;r
&quot;^0&minus;9&quot;</b>&rsquo; removes the suffix if the
next character typed inserts anything but a digit. One extra
backslash sequence is understood in this string:
&lsquo;<b>\&minus;</b>&rsquo; stands for all characters that
insert nothing. Thus &lsquo;<b>&minus;S &quot;=&quot;
&minus;q</b>&rsquo; is the same as &lsquo;<b>&minus;S
&quot;=&quot; &minus;r &quot;=
\t\n\&minus;&quot;</b>&rsquo;.</p>

<p style="margin-left:32%; margin-top: 1em">This option may
also be used without the <b>&minus;S</b> option; then any
automatically added space will be removed when one of the
characters in the list is typed.</p>

<p style="margin-left:22%;"><b>&minus;R</b>
<i>remove&minus;func</i></p>

<p style="margin-left:32%;">This is another form of the
<b>&minus;r</b> option. When a suffix has been inserted and
the completion accepted, the function
<i>remove&minus;func</i> will be called after the next
character typed. It is passed the length of the suffix as an
argument and can use the special parameters available in
ordinary (non&minus;completion) zle widgets (see
<i>zshzle</i>(1)) to analyse and modify the command
line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>If this flag is given, all of the matches built from
<i>words</i> are marked as being the names of files. They
are not required to be actual filenames, but if they are,
and the option <b>LIST_TYPES</b> is set, the characters
describing the types of the files in the completion lists
will be shown. This also forces a slash to be added when the
name of a directory is completed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This flag can be used to tell the completion code that
the matches added are parameter names for a parameter
expansion. This will make the <b>AUTO_PARAM_SLASH</b> and
<b>AUTO_PARAM_KEYS</b> options be used for the matches.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;W</b>
<i>file&minus;prefix</i></p>

<p style="margin-left:32%;">This string is a pathname that
will be prepended to each of the matches formed by the given
<i>words</i> together with any prefix specified by the
<b>&minus;p</b> option to form a complete filename for
testing. Hence it is only useful if combined with the
<b>&minus;f</b> flag, as the tests will not otherwise be
performed.</p>

<p style="margin-left:22%;"><b>&minus;F</b>
<i>array</i></p>

<p style="margin-left:32%;">Specifies an array containing
patterns. Words matching one of these patterns are ignored,
i.e. not considered to be possible matches.</p>

<p style="margin-left:32%; margin-top: 1em">The
<i>array</i> may be the name of an array parameter or a list
of literal patterns enclosed in parentheses and quoted, as
in &lsquo;<b>&minus;F &quot;(*?.o *?.h)&quot;</b>&rsquo;. If
the name of an array is given, the elements of the array are
taken as the patterns.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;Q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This flag instructs the completion code not to quote any
metacharacters in the words when inserting them into the
command line.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;M</b>
<i>match&minus;spec</i></p>

<p style="margin-left:32%;">This gives local match
specifications as described below in the section
&lsquo;Completion Matching Control&rsquo;. This option may
be given more than once. In this case all
<i>match&minus;spec</i>s given are concatenated with spaces
between them to form the specification string to use. Note
that they will only be used if the <b>&minus;U</b> option is
not given.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Specifies that the words added are to be used as
possible matches, but are not to appear in the completion
listing.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;U</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>If this flag is given, all words given will be accepted
and no matching will be done by the completion code.
Normally this is used in functions that do the matching
themselves.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;O</b>
<i>array</i></p>

<p style="margin-left:32%;">If this option is given, the
<i>words</i> are <i>not</i> added to the set of possible
completions. Instead, matching is done as usual and all of
the <i>words</i> given as arguments that match the string on
the command line will be stored in the array parameter whose
name is given as <i>array</i>.</p>

<p style="margin-left:22%;"><b>&minus;A</b>
<i>array</i></p>

<p style="margin-left:32%;">As the <b>&minus;O</b> option,
except that instead of those of the <i>words</i> which match
being stored in <i>array</i>, the strings generated
internally by the completion code are stored. For example,
with a matching specification of &lsquo;<b>&minus;M
&quot;L:|no=&quot;</b>&rsquo;, the string
&lsquo;<b>nof</b>&rsquo; on the command line and the string
&lsquo;<b>foo</b>&rsquo; as one of the <i>words</i>, this
option stores the string &lsquo;<b>nofoo</b>&rsquo; in the
array, whereas the <b>&minus;O</b> option stores the
&lsquo;<b>foo</b>&rsquo; originally given.</p>

<p style="margin-left:22%;"><b>&minus;D</b>
<i>array</i></p>

<p style="margin-left:32%;">As with <b>&minus;O</b>, the
<i>words</i> are not added to the set of possible
completions. Instead, the completion code tests whether each
<i>word</i> in turn matches what is on the line. If the
<i>n</i>th <i>word</i> does not match, the <i>n</i>th
element of the <i>array</i> is removed. Elements for which
the corresponding <i>word</i> is matched are retained.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This option adds a special match which expands to all
other matches when inserted into the line, even those that
are added after this option is used. Together with the
<b>&minus;d</b> option it is possible to specify a string
that should be displayed in the list for this special match.
If no string is given, it will be shown as a string
containing the strings that would be inserted for the other
matches, truncated to the width of the screen.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This option adds <i>number</i> empty matches after the
<i>words</i> have been added. An empty match takes up space
in completion listings but will never be inserted in the
line and can&rsquo;t be selected with menu completion or
menu selection. This makes empty matches only useful to
format completion lists and to make explanatory string be
shown in completion lists (since empty matches can be given
display strings with the <b>&minus;d</b> option). And
because all but one empty string would otherwise be removed,
this option implies the <b>&minus;V</b> and <b>&minus;2</b>
options (even if an explicit <b>&minus;J</b> option is
given).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;</b></p></td>
<td width="7%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;&minus;</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>This flag ends the list of flags and options. All
arguments after it will be taken as the words to use as
matches even if they begin with hyphens.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Except for the
<b>&minus;M</b> flag, if any of these flags is given more
than once, the first one (and its argument) will be
used.</p>

<p style="margin-left:11%;"><b>compset &minus;p</b>
<i>number</i> <b><br>
compset &minus;P</b> [ <i>number</i> ] <i>pattern</i>
<b><br>
compset &minus;s</b> <i>number</i> <b><br>
compset &minus;S</b> [ <i>number</i> ] <i>pattern</i>
<b><br>
compset &minus;n</b> <i>begin</i> [ <i>end</i> ] <b><br>
compset &minus;N</b> <i>beg&minus;pat</i> [
<i>end&minus;pat</i> ] <b><br>
compset &minus;q</b></p>

<p style="margin-left:22%;">This command simplifies
modification of the special parameters, while its return
status allows tests on them to be carried out.</p>

<p style="margin-left:22%; margin-top: 1em">The options
are: <b><br>
&minus;p</b> <i>number</i></p>

<p style="margin-left:32%;">If the contents of the
<b>PREFIX</b> parameter is longer than <i>number</i>
characters, the first <i>number</i> characters are removed
from it and appended to the contents of the <b>IPREFIX</b>
parameter.</p>

<p style="margin-left:22%;"><b>&minus;P</b> [ <i>number</i>
] <i>pattern</i></p>

<p style="margin-left:32%;">If the value of the
<b>PREFIX</b> parameter begins with anything that matches
the <i>pattern</i>, the matched portion is removed from
<b>PREFIX</b> and appended to <b>IPREFIX</b>.</p>

<p style="margin-left:32%; margin-top: 1em">Without the
optional <i>number</i>, the longest match is taken, but if
<i>number</i> is given, anything up to the <i>number</i>th
match is moved. If the <i>number</i> is negative, the
<i>number</i>th longest match is moved. For example, if
<b>PREFIX</b> contains the string
&lsquo;<b>a=b=c</b>&rsquo;, then <b>compset &minus;P
&rsquo;*\=&rsquo;</b> will move the string
&lsquo;<b>a=b=</b>&rsquo; into the <b>IPREFIX</b> parameter,
but <b>compset &minus;P 1 &rsquo;*\=&rsquo;</b> will move
only the string &lsquo;<b>a=</b>&rsquo;.</p>

<p style="margin-left:22%;"><b>&minus;s</b>
<i>number</i></p>

<p style="margin-left:32%;">As <b>&minus;p</b>, but
transfer the last <i>number</i> characters from the value of
<b>SUFFIX</b> to the front of the value of
<b>ISUFFIX</b>.</p>

<p style="margin-left:22%;"><b>&minus;S</b> [ <i>number</i>
] <i>pattern</i></p>

<p style="margin-left:32%;">As <b>&minus;P</b>, but match
the last portion of <b>SUFFIX</b> and transfer the matched
portion to the front of the value of <b>ISUFFIX</b>.</p>

<p style="margin-left:22%;"><b>&minus;n</b> <i>begin</i> [
<i>end</i> ]</p>

<p style="margin-left:32%;">If the current word position as
specified by the parameter <b>CURRENT</b> is greater than or
equal to <i>begin</i>, anything up to the <i>begin</i>th
word is removed from the <b>words</b> array and the value of
the parameter <b>CURRENT</b> is decremented by
<i>begin</i>.</p>

<p style="margin-left:32%; margin-top: 1em">If the optional
<i>end</i> is given, the modification is done only if the
current word position is also less than or equal to
<i>end</i>. In this case, the words from position <i>end</i>
onwards are also removed from the <b>words</b> array.</p>

<p style="margin-left:32%; margin-top: 1em">Both
<i>begin</i> and <i>end</i> may be negative to count
backwards from the last element of the <b>words</b>
array.</p>

<p style="margin-left:22%;"><b>&minus;N</b>
<i>beg&minus;pat</i> [ <i>end&minus;pat</i> ]</p>

<p style="margin-left:32%;">If one of the elements of the
<b>words</b> array before the one at the index given by the
value of the parameter <b>CURRENT</b> matches the pattern
<i>beg&minus;pat</i>, all elements up to and including the
matching one are removed from the <b>words</b> array and the
value of <b>CURRENT</b> is changed to point to the same word
in the changed array.</p>

<p style="margin-left:32%; margin-top: 1em">If the optional
pattern <i>end&minus;pat</i> is also given, and there is an
element in the <b>words</b> array matching this pattern, the
parameters are modified only if the index of this word is
higher than the one given by the <b>CURRENT</b> parameter
(so that the matching word has to be after the cursor). In
this case, the words starting with the one matching
<b>end&minus;pat</b> are also removed from the <b>words</b>
array. If <b>words</b> contains no word matching
<i>end&minus;pat</i>, the testing and modification is
performed as if it were not given.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The word currently being completed is split on spaces
into separate words, respecting the usual shell quoting
conventions. The resulting words are stored in the
<b>words</b> array, and <b>CURRENT</b>, <b>PREFIX</b>,
<b>SUFFIX</b>, <b>QIPREFIX</b>, and <b>QISUFFIX</b> are
modified to reflect the word part that is completed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In all the
above cases the return status is zero if the test succeeded
and the parameters were modified and non&minus;zero
otherwise. This allows one to use this builtin in tests such
as:</p>

<p style="margin-left:32%; margin-top: 1em"><b>if compset
&minus;P &rsquo;*\=&rsquo;; then ...</b></p>

<p style="margin-left:22%; margin-top: 1em">This forces
anything up to and including the last equal sign to be
ignored by the completion code.</p>

<p style="margin-left:11%;"><b>compcall</b> [
<b>&minus;TD</b> ]</p>

<p style="margin-left:22%;">This allows the use of
completions defined with the <b>compctl</b> builtin from
within completion widgets. The list of matches will be
generated as if one of the non&minus;widget completion
functions (<b>complete&minus;word</b>, etc.) had been
called, except that only <b>compctl</b>s given for specific
commands are used. To force the code to try completions
defined with the <b>&minus;T</b> option of <b>compctl</b>
and/or the default completion (whether defined by <b>compctl
&minus;D</b> or the builtin default) in the appropriate
places, the <b>&minus;T</b> and/or <b>&minus;D</b> flags can
be passed to <b>compcall</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status can be used to test if a matching <b>compctl</b>
definition was found. It is non&minus;zero if a
<b>compctl</b> was found and zero otherwise.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
builtin is defined by the <b>zsh/compctl</b> module.</p>

<h2>COMPLETION CONDITION CODES
<a name="COMPLETION CONDITION CODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
additional condition codes for use within the <b>[[ ...
]]</b> construct are available in completion widgets. These
work on the special parameters. All of these tests can also
be performed by the <b>compset</b> builtin, but in the case
of the condition codes the contents of the special
parameters are not modified. <b><br>
&minus;prefix</b> [ <i>number</i> ] <i>pattern</i></p>

<p style="margin-left:22%;">true if the test for the
<b>&minus;P</b> option of <b>compset</b> would succeed.</p>

<p style="margin-left:11%;"><b>&minus;suffix</b> [
<i>number</i> ] <i>pattern</i></p>

<p style="margin-left:22%;">true if the test for the
<b>&minus;S</b> option of <b>compset</b> would succeed.</p>

<p style="margin-left:11%;"><b>&minus;after</b>
<i>beg&minus;pat</i></p>

<p style="margin-left:22%;">true if the test of the
<b>&minus;N</b> option with only the <i>beg&minus;pat</i>
given would succeed.</p>

<p style="margin-left:11%;"><b>&minus;between</b>
<i>beg&minus;pat end&minus;pat</i></p>

<p style="margin-left:22%;">true if the test for the
<b>&minus;N</b> option with both patterns would succeed.</p>

<h2>COMPLETION MATCHING CONTROL
<a name="COMPLETION MATCHING CONTROL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is possible
by use of the <b>&minus;M</b> option of the <b>compadd</b>
builtin command to specify how the characters in the string
to be completed (referred to here as the command line) map
onto the characters in the list of matches produced by the
completion code (referred to here as the trial completions).
Note that this is not used if the command line contains a
glob pattern and the <b>GLOB_COMPLETE</b> option is set or
the <b>pattern_match</b> of the <b>compstate</b> special
association is set to a non&minus;empty string.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>match&minus;spec</i> given as the argument to the
<b>&minus;M</b> option (see &lsquo;Completion Builtin
Commands&rsquo; above) consists of one or more matching
descriptions separated by whitespace. Each description
consists of a letter followed by a colon and then the
patterns describing which character sequences on the line
match which character sequences in the trial completion. Any
sequence of characters not handled in this fashion must
match exactly, as usual.</p>

<p style="margin-left:11%; margin-top: 1em">The forms of
<i>match&minus;spec</i> understood are as follows. In each
case, the form with an upper case initial character retains
the string already typed on the command line as the final
result of completion, while with a lower case initial
character the string on the command line is changed into the
corresponding part of the trial completion. <b><br>
m:</b><i>lpat</i><b>=</b><i>tpat</i> <b><br>
M:</b><i>lpat</i><b>=</b><i>tpat</i></p>

<p style="margin-left:22%;">Here, <i>lpat</i> is a pattern
that matches on the command line, corresponding to
<i>tpat</i> which matches in the trial completion.</p>


<p style="margin-left:11%;"><b>l:</b><i>lanchor</i><b>|</b><i>lpat</i><b>=</b><i>tpat</i>
<b><br>
L:</b><i>lanchor</i><b>|</b><i>lpat</i><b>=</b><i>tpat</i>
<b><br>

l:</b><i>lanchor</i><b>||</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>

L:</b><i>lanchor</i><b>||</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>
b:</b><i>lpat</i><b>=</b><i>tpat</i> <b><br>
B:</b><i>lpat</i><b>=</b><i>tpat</i></p>

<p style="margin-left:22%;">These letters are for patterns
that are anchored by another pattern on the left side.
Matching for <i>lpat</i> and <i>tpat</i> is as for <b>m</b>
and <b>M</b>, but the pattern <i>lpat</i> matched on the
command line must be preceded by the pattern <i>lanchor</i>.
The <i>lanchor</i> can be blank to anchor the match to the
start of the command line string; otherwise the anchor can
occur anywhere, but must match in both the command line and
trial completion strings.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<i>lpat</i> is given but a <i>ranchor</i> is, this matches
the gap between substrings matched by <i>lanchor</i> and
<i>ranchor</i>. Unlike <i>lanchor</i>, the <i>ranchor</i>
only needs to match the trial completion string.</p>

<p style="margin-left:22%; margin-top: 1em">The <b>b</b>
and <b>B</b> forms are similar to <b>l</b> and <b>L</b> with
an empty anchor, but need to match only the beginning of the
trial completion or the word on the command line,
respectively.</p>


<p style="margin-left:11%;"><b>r:</b><i>lpat</i><b>|</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>
R:</b><i>lpat</i><b>|</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>

r:</b><i>lanchor</i><b>||</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>

R:</b><i>lanchor</i><b>||</b><i>ranchor</i><b>=</b><i>tpat</i>
<b><br>
e:</b><i>lpat</i><b>=</b><i>tpat</i> <b><br>
E:</b><i>lpat</i><b>=</b><i>tpat</i></p>

<p style="margin-left:22%;">As <b>l</b>, <b>L</b>, <b>b</b>
and <b>B</b>, with the difference that the command line and
trial completion patterns are anchored on the right side.
Here an empty <i>ranchor</i> and the <b>e</b> and <b>E</b>
forms force the match to the end of the trial completion or
command line string.</p>

<p style="margin-left:11%; margin-top: 1em">Each
<i>lpat</i>, <i>tpat</i> or <i>anchor</i> is either an empty
string or consists of a sequence of literal characters
(which may be quoted with a backslash), question marks,
character classes, and correspondence classes; ordinary
shell patterns are not used. Literal characters match only
themselves, question marks match any character, and
character classes are formed as for globbing and match any
character in the given set.</p>

<p style="margin-left:11%; margin-top: 1em">Correspondence
classes are defined like character classes, but with two
differences: they are delimited by a pair of braces, and
negated classes are not allowed, so the characters <b>!</b>
and <b>^</b> have no special meaning directly after the
opening brace. They indicate that a range of characters on
the line match a range of characters in the trial
completion, but (unlike ordinary character classes) paired
according to the corresponding position in the sequence. For
example, to make any ASCII lower case letter on the line
match the corresponding upper case letter in the trial
completion, you can use
&lsquo;<b>m:{a&minus;z}={A&minus;Z}</b>&rsquo; (however, see
below for the recommended form for this). More than one pair
of classes can occur, in which case the first class before
the <b>=</b> corresponds to the first after it, and so on.
If one side has more such classes than the other side, the
superfluous classes behave like normal character classes. In
anchor patterns correspondence classes also behave like
normal character classes.</p>

<p style="margin-left:11%; margin-top: 1em">The standard
&lsquo;<b>[:</b><i>name</i><b>:]</b>&rsquo; forms described
for standard shell patterns, see the section FILENAME
GENERATION in <i>zshexpn</i>(1), may appear in
correspondence classes as well as normal character classes.
The only special behaviour in correspondence classes is if
the form on the left and the form on the right are each one
of <b>[:upper:]</b>, <b>[:lower:]</b>. In these cases the
character in the word and the character on the line must be
the same up to a difference in case. Hence to make any lower
case character on the line match the corresponding upper
case character in the trial completion you can use
&lsquo;<b>m:{[:lower:]}={[:upper:]}</b>&rsquo;. Although the
matching system does not yet handle multibyte characters,
this is likely to be a future extension, at which point this
syntax will handle arbitrary alphabets; hence this form,
rather than the use of explicit ranges, is the recommended
form. In other cases
&lsquo;<b>[:</b><i>name</i><b>:]</b>&rsquo; forms are
allowed. If the two forms on the left and right are the
same, the characters must match exactly. In remaining cases,
the corresponding tests are applied to both characters, but
they are not otherwise constrained; any matching character
in one set goes with any matching character in the other
set: this is equivalent to the behaviour of ordinary
character classes.</p>

<p style="margin-left:11%; margin-top: 1em">The pattern
<i>tpat</i> may also be one or two stars,
&lsquo;<b>*</b>&rsquo; or &lsquo;<b>**</b>&rsquo;. This
means that the pattern on the command line can match any
number of characters in the trial completion. In this case
the pattern must be anchored (on either side); in the case
of a single star, the <i>anchor</i> then determines how much
of the trial completion is to be included &minus;&minus;
only the characters up to the next appearance of the anchor
will be matched. With two stars, substrings matched by the
anchor can be matched, too.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<p style="margin-left:11%; margin-top: 1em">The keys of the
<b>options</b> association defined by the <b>parameter</b>
module are the option names in all&minus;lower&minus;case
form, without underscores, and without the optional
<b>no</b> at the beginning even though the builtins
<b>setopt</b> and <b>unsetopt</b> understand option names
with upper case letters, underscores, and the optional
<b>no</b>. The following alters the matching rules so that
the prefix <b>no</b> and any underscore are ignored when
trying to match the trial completions generated and upper
case letters on the line match the corresponding lower case
letters in the words:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M &rsquo;L:|[nN][oO]= M:_=
M:{[:upper:]}={[:lower:]}&rsquo; &minus; \ <br>
${(k)options}</b></p>

<p style="margin-left:11%; margin-top: 1em">The first part
says that the pattern &lsquo;<b>[nN][oO]</b>&rsquo; at the
beginning (the empty anchor before the pipe symbol) of the
string on the line matches the empty string in the list of
words generated by completion, so it will be ignored if
present. The second part does the same for an underscore
anywhere in the command line string, and the third part uses
correspondence classes so that any upper case letter on the
line matches the corresponding lower case letter in the
word. The use of the upper case forms of the specification
characters (<b>L</b> and <b>M</b>) guarantees that what has
already been typed on the command line (in particular the
prefix <b>no</b>) will not be deleted.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
use of <b>L</b> in the first part means that it matches only
when at the beginning of both the command line string and
the trial completion. I.e., the string
&lsquo;<b>_NO_f</b>&rsquo; would not be completed to
&lsquo;<b>_NO_foo</b>&rsquo;, nor would
&lsquo;<b>NONO_f</b>&rsquo; be completed to
&lsquo;<b>NONO_foo</b>&rsquo; because of the leading
underscore or the second &lsquo;<b>NO</b>&rsquo; on the line
which makes the pattern fail even though they are otherwise
ignored. To fix this, one would use
&lsquo;<b>B:[nN][oO]=</b>&rsquo; instead of the first part.
As described above, this matches at the beginning of the
trial completion, independent of other characters or
substrings at the beginning of the command line word which
are ignored by the same or other
<i>match&minus;spec</i>s.</p>

<p style="margin-left:11%; margin-top: 1em">The second
example makes completion case insensitive. This is just the
same as in the option example, except here we wish to retain
the characters in the list of completions:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M &rsquo;m:{[:lower:]}={[:upper:]}&rsquo; ...</b></p>

<p style="margin-left:11%; margin-top: 1em">This makes
lower case letters match their upper case counterparts. To
make upper case letters match the lower case forms as
well:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M
&rsquo;m:{[:lower:][:upper:]}={[:upper:][:lower:]}&rsquo;
...</b></p>

<p style="margin-left:11%; margin-top: 1em">A nice example
for the use of <b>*</b> patterns is partial word completion.
Sometimes you would like to make strings like
&lsquo;<b>c.s.u</b>&rsquo; complete to strings like
&lsquo;<b>comp.source.unix</b>&rsquo;, i.e. the word on the
command line consists of multiple parts, separated by a dot
in this example, where each part should be completed
separately &minus;&minus; note, however, that the case where
each part of the word, i.e. &lsquo;<b>comp</b>&rsquo;,
&lsquo;<b>source</b>&rsquo; and &lsquo;<b>unix</b>&rsquo; in
this example, is to be completed from separate sets of
matches is a different problem to be solved by the
implementation of the completion widget. The example can be
handled by:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M &rsquo;r:|.=* r:|=*&rsquo; \ <br>
&minus; comp.sources.unix comp.sources.misc ...</b></p>

<p style="margin-left:11%; margin-top: 1em">The first
specification says that <i>lpat</i> is the empty string,
while <i>anchor</i> is a dot; <i>tpat</i> is <b>*</b>, so
this can match anything except for the
&lsquo;<b>.</b>&rsquo; from the anchor in the trial
completion word. So in &lsquo;<b>c.s.u</b>&rsquo;, the
matcher sees &lsquo;<b>c</b>&rsquo;, followed by the empty
string, followed by the anchor &lsquo;<b>.</b>&rsquo;, and
likewise for the second dot, and replaces the empty strings
before the anchors, giving
&lsquo;<b>c</b>[<b>omp</b>]<b>.s</b>[<b>ources</b>]<b>.u</b>[<b>nix</b>]&rsquo;,
where the last part of the completion is just as normal.</p>

<p style="margin-left:11%; margin-top: 1em">With the
pattern shown above, the string &lsquo;<b>c.u</b>&rsquo;
could not be completed to
&lsquo;<b>comp.sources.unix</b>&rsquo; because the single
star means that no dot (matched by the anchor) can be
skipped. By using two stars as in
&lsquo;<b>r:|.=**</b>&rsquo;, however,
&lsquo;<b>c.u</b>&rsquo; could be completed to
&lsquo;<b>comp.sources.unix</b>&rsquo;. This also shows that
in some cases, especially if the anchor is a real pattern,
like a character class, the form with two stars may result
in more matches than one would like.</p>

<p style="margin-left:11%; margin-top: 1em">The second
specification is needed to make this work when the cursor is
in the middle of the string on the command line and the
option <b>COMPLETE_IN_WORD</b> is set. In this case the
completion code would normally try to match trial
completions that end with the string as typed so far, i.e.
it will only insert new characters at the cursor position
rather than at the end. However in our example we would like
the code to recognise matches which contain extra characters
after the string on the line (the &lsquo;<b>nix</b>&rsquo;
in the example). Hence we say that the empty string at the
end of the string on the line matches any characters at the
end of the trial completion.</p>

<p style="margin-left:11%; margin-top: 1em">More generally,
the specification</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M &rsquo;r:|[.,_&minus;]=* r:|=*&rsquo; ...</b></p>

<p style="margin-left:11%; margin-top: 1em">allows one to
complete words with abbreviations before any of the
characters in the square brackets. For example, to complete
<b>veryverylongfile.c</b> rather than
<b>veryverylongheader.h</b> with the above in effect, you
can just type <b>very.c</b> before attempting
completion.</p>

<p style="margin-left:11%; margin-top: 1em">The
specifications with both a left and a right anchor are
useful to complete partial words whose parts are not
separated by some special character. For example, in some
places strings have to be completed that are formed
&lsquo;<b>LikeThis</b>&rsquo; (i.e. the separate parts are
determined by a leading upper case letter) or maybe one has
to complete strings with trailing numbers. Here one could
use the simple form with only one anchor as in:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M &rsquo;r:|[[:upper:]0&minus;9]=* r:|=*&rsquo;
LikeTHIS FooHoo 5foo123 5bar234</b></p>

<p style="margin-left:11%; margin-top: 1em">But with this,
the string &lsquo;<b>H</b>&rsquo; would neither complete to
&lsquo;<b>FooHoo</b>&rsquo; nor to
&lsquo;<b>LikeTHIS</b>&rsquo; because in each case there is
an upper case letter before the &lsquo;<b>H</b>&rsquo; and
that is matched by the anchor. Likewise, a
&lsquo;<b>2</b>&rsquo; would not be completed. In both cases
this could be changed by using
&lsquo;<b>r:|[[:upper:]0&minus;9]=**</b>&rsquo;, but then
&lsquo;<b>H</b>&rsquo; completes to both
&lsquo;<b>LikeTHIS</b>&rsquo; and
&lsquo;<b>FooHoo</b>&rsquo; and a &lsquo;<b>2</b>&rsquo;
matches the other strings because characters can be inserted
before every upper case letter and digit. To avoid this one
would use:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compadd
&minus;M
&rsquo;r:[^[:upper:]0&minus;9]||[[:upper:]0&minus;9]=**
r:|=*&rsquo; \ <br>
LikeTHIS FooHoo foo123 bar234</b></p>

<p style="margin-left:11%; margin-top: 1em">By using these
two anchors, a &lsquo;<b>H</b>&rsquo; matches only upper
case &lsquo;<b>H</b>&rsquo;s that are immediately preceded
by something matching the left anchor
&lsquo;<b>[^[:upper:]0&minus;9]</b>&rsquo;. The effect is,
of course, that &lsquo;<b>H</b>&rsquo; matches only the
string &lsquo;<b>FooHoo</b>&rsquo;, a &lsquo;<b>2</b>&rsquo;
matches only &lsquo;<b>bar234</b>&rsquo; and so on.</p>

<p style="margin-left:11%; margin-top: 1em">When using the
completion system (see <i>zshcompsys</i>(1)), users can
define match specifications that are to be used for specific
contexts by using the <b>matcher</b> and
<b>matcher&minus;list</b> styles. The values for the latter
will be used everywhere.</p>

<h2>COMPLETION WIDGET EXAMPLE
<a name="COMPLETION WIDGET EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The first step
is to define the widget:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zle &minus;C
complete complete&minus;word complete&minus;files</b></p>

<p style="margin-left:11%; margin-top: 1em">Then the widget
can be bound to a key using the <b>bindkey</b> builtin
command:</p>

<p style="margin-left:22%; margin-top: 1em"><b>bindkey
&rsquo;^X\t&rsquo; complete</b></p>

<p style="margin-left:11%; margin-top: 1em">After that the
shell function <b>complete&minus;files</b> will be invoked
after typing control&minus;X and TAB. The function should
then generate the matches, e.g.:</p>


<p style="margin-left:22%; margin-top: 1em"><b>complete&minus;files
() { compadd &minus; * }</b></p>

<p style="margin-left:11%; margin-top: 1em">This function
will complete files in the current directory matching the
current word.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshcompsys &minus; zsh
completion system</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This describes
the shell code for the &lsquo;new&rsquo; completion system,
referred to as <b>compsys</b>. It is written in shell
functions based on the features described in
<i>zshcompwid</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The features
are contextual, sensitive to the point at which completion
is started. Many completions are already provided. For this
reason, a user can perform a great many tasks without
knowing any details beyond how to initialize the system,
which is described below in INITIALIZATION.</p>

<p style="margin-left:11%; margin-top: 1em">The context
that decides what completion is to be performed may be</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>an argument or option position: these describe the
position on the command line at which completion is
requested. For example &lsquo;first argument to rmdir, the
word being completed names a directory&rsquo;;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>a special context, denoting an element in the
shell&rsquo;s syntax. For example &lsquo;a word in command
position&rsquo; or &lsquo;an array subscript&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">A full context
specification contains other elements, as we shall
describe.</p>

<p style="margin-left:11%; margin-top: 1em">Besides
commands names and contexts, the system employs two more
concepts, <i>styles</i> and <i>tags</i>. These provide ways
for the user to configure the system&rsquo;s behaviour.</p>

<p style="margin-left:11%; margin-top: 1em">Tags play a
dual role. They serve as a classification system for the
matches, typically indicating a class of object that the
user may need to distinguish. For example, when completing
arguments of the <b>ls</b> command the user may prefer to
try <b>files</b> before <b>directories</b>, so both of these
are tags. They also appear as the rightmost element in a
context specification.</p>

<p style="margin-left:11%; margin-top: 1em">Styles modify
various operations of the completion system, such as output
formatting, but also what kinds of completers are used (and
in what order), or which tags are examined. Styles may
accept arguments and are manipulated using the <b>zstyle</b>
command described in see <i>zshmodules</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">In summary,
tags describe <i>what</i> the completion objects are, and
style <b>how</b> they are to be completed. At various points
of execution, the completion system checks what styles
and/or tags are defined for the current context, and uses
that to modify its behavior. The full description of context
handling, which determines how tags and other elements of
the context influence the behaviour of styles, is described
below in COMPLETION SYSTEM CONFIGURATION.</p>

<p style="margin-left:11%; margin-top: 1em">When a
completion is requested, a dispatcher function is called;
see the description of <b>_main_complete</b> in the list of
control functions below. This dispatcher decides which
function should be called to produce the completions, and
calls it. The result is passed to one or more
<i>completers</i>, functions that implement individual
completion strategies: simple completion, error correction,
completion with error correction, menu selection, etc.</p>

<p style="margin-left:11%; margin-top: 1em">More generally,
the shell functions contained in the completion system are
of two types:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">those beginning
&lsquo;<b>comp</b>&rsquo; are to be called directly; there
are only a few of these;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those beginning &lsquo;<b>_</b>&rsquo; are called by the
completion code. The shell functions of this set, which
implement completion behaviour and may be bound to
keystrokes, are referred to as &lsquo;widgets&rsquo;. These
proliferate as new completions are required.</p></td></tr>
</table>

<h2>INITIALIZATION
<a name="INITIALIZATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the system
was installed completely, it should be enough to call the
shell function <b>compinit</b> from your initialization
file; see the next section. However, the function
<b>compinstall</b> can be run by a user to configure various
aspects of the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">Usually,
<b>compinstall</b> will insert code into <b>.zshrc</b>,
although if that is not writable it will save it in another
file and tell you that file&rsquo;s location. Note that it
is up to you to make sure that the lines added to
<b>.zshrc</b> are actually run; you may, for example, need
to move them to an earlier place in the file if
<b>.zshrc</b> usually returns early. So long as you keep
them all together (including the comment lines at the start
and finish), you can rerun <b>compinstall</b> and it will
correctly locate and modify these lines. Note, however, that
any code you add to this section by hand is likely to be
lost if you rerun <b>compinstall</b>, although lines using
the command &lsquo;<b>zstyle</b>&rsquo; should be gracefully
handled.</p>

<p style="margin-left:11%; margin-top: 1em">The new code
will take effect next time you start the shell, or run
<b>.zshrc</b> by hand; there is also an option to make them
take effect immediately. However, if <b>compinstall</b> has
removed definitions, you will need to restart the shell to
see the changes.</p>

<p style="margin-left:11%; margin-top: 1em">To run
<b>compinstall</b> you will need to make sure it is in a
directory mentioned in your <b>fpath</b> parameter, which
should already be the case if zsh was properly configured as
long as your startup files do not remove the appropriate
directories from <b>fpath</b>. Then it must be autoloaded
(&lsquo;<b>autoload &minus;U compinstall</b>&rsquo; is
recommended). You can abort the installation any time you
are being prompted for information, and your <b>.zshrc</b>
will not be altered at all; changes only take place right at
the end, where you are specifically asked for
confirmation.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Use of
compinit</b> <br>
This section describes the use of <b>compinit</b> to
initialize completion for the current session when called
directly; if you have run <b>compinstall</b> it will be
called automatically from your <b>.zshrc</b>.</p>

<p style="margin-left:11%; margin-top: 1em">To initialize
the system, the function <b>compinit</b> should be in a
directory mentioned in the <b>fpath</b> parameter, and
should be autoloaded (&lsquo;<b>autoload &minus;U
compinit</b>&rsquo; is recommended), and then run simply as
&lsquo;<b>compinit</b>&rsquo;. This will define a few
utility functions, arrange for all the necessary shell
functions to be autoloaded, and will then re&minus;define
all widgets that do completion to use the new system. If you
use the <b>menu&minus;select</b> widget, which is part of
the <b>zsh/complist</b> module, you should make sure that
that module is loaded before the call to <b>compinit</b> so
that that widget is also re&minus;defined. If completion
styles (see below) are set up to perform expansion as well
as completion by default, and the TAB key is bound to
<b>expand&minus;or&minus;complete</b>, <b>compinit</b> will
rebind it to <b>complete&minus;word</b>; this is necessary
to use the correct form of expansion.</p>

<p style="margin-left:11%; margin-top: 1em">Should you need
to use the original completion commands, you can still bind
keys to the old widgets by putting a &lsquo;<b>.</b>&rsquo;
in front of the widget name, e.g.
&lsquo;<b>.expand&minus;or&minus;complete</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">To speed up the
running of <b>compinit</b>, it can be made to produce a
dumped configuration that will be read in on future
invocations; this is the default, but can be turned off by
calling <b>compinit</b> with the option <b>&minus;D</b>. The
dumped file is <b>.zcompdump</b> in the same directory as
the startup files (i.e. <b>$ZDOTDIR</b> or <b>$HOME</b>);
alternatively, an explicit file name can be given by
&lsquo;<b>compinit &minus;d</b> <i>dumpfile</i>&rsquo;. The
next invocation of <b>compinit</b> will read the dumped file
instead of performing a full initialization.</p>

<p style="margin-left:11%; margin-top: 1em">If the number
of completion files changes, <b>compinit</b> will recognise
this and produce a new dump file. However, if the name of a
function or the arguments in the first line of a
<b>#compdef</b> function (as described below) change, it is
easiest to delete the dump file by hand so that
<b>compinit</b> will re&minus;create it the next time it is
run. The check performed to see if there are new functions
can be omitted by giving the option <b>&minus;C</b>. In this
case the dump file will only be created if there isn&rsquo;t
one already.</p>

<p style="margin-left:11%; margin-top: 1em">The dumping is
actually done by another function, <b>compdump</b>, but you
will only need to run this yourself if you change the
configuration (e.g. using <b>compdef</b>) and then want to
dump the new one. The name of the old dumped file will be
remembered for this purpose.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>_compdir</b> is set, <b>compinit</b> uses it as
a directory where completion functions can be found; this is
only necessary if they are not already in the function
search path.</p>

<p style="margin-left:11%; margin-top: 1em">For security
reasons <b>compinit</b> also checks if the completion system
would use files not owned by root or by the current user, or
files in directories that are world&minus; or
group&minus;writable or that are not owned by root or by the
current user. If such files or directories are found,
<b>compinit</b> will ask if the completion system should
really be used. To avoid these tests and make all files
found be used without asking, use the option
<b>&minus;u</b>, and to make <b>compinit</b> silently ignore
all insecure files and directories use the option
<b>&minus;i</b>. This security check is skipped entirely
when the <b>&minus;C</b> option is given.</p>

<p style="margin-left:11%; margin-top: 1em">The security
check can be retried at any time by running the function
<b>compaudit</b>. This is the same check used by
<b>compinit</b>, but when it is executed directly any
changes to <b>fpath</b> are made local to the function so
they do not persist. The directories to be checked may be
passed as arguments; if none are given, <b>compaudit</b>
uses <b>fpath</b> and <b>_compdir</b> to find completion
system directories, adding missing ones to <b>fpath</b> as
necessary. To force a check of exactly the directories
currently named in <b>fpath</b>, set <b>_compdir</b> to an
empty string before calling <b>compaudit</b> or
<b>compinit</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>bashcompinit</b> provides compatibility with bash&rsquo;s
programmable completion system. When run it will define the
functions, <b>compgen</b> and <b>complete</b> which
correspond to the bash builtins with the same names. It will
then be possible to use completion specifications and
functions written for bash.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Autoloaded
files</b> <br>
The convention for autoloaded functions used in completion
is that they start with an underscore; as already mentioned,
the <b>fpath/FPATH</b> parameter must contain the directory
in which they are stored. If <b>zsh</b> was properly
installed on your system, then <b>fpath/FPATH</b>
automatically contains the required directories for the
standard functions.</p>

<p style="margin-left:11%; margin-top: 1em">For incomplete
installations, if <b>compinit</b> does not find enough files
beginning with an underscore (fewer than twenty) in the
search path, it will try to find more by adding the
directory <b>_compdir</b> to the search path. If that
directory has a subdirectory named <b>Base</b>, all
subdirectories will be added to the path. Furthermore, if
the subdirectory <b>Base</b> has a subdirectory named
<b>Core</b>, <b>compinit</b> will add all subdirectories of
the subdirectories is to the path: this allows the functions
to be in the same format as in the <b>zsh</b> source
distribution.</p>

<p style="margin-left:11%; margin-top: 1em">When
<b>compinit</b> is run, it searches all such files
accessible via <b>fpath/FPATH</b> and reads the first line
of each of them. This line should contain one of the tags
described below. Files whose first line does not start with
one of these tags are not considered to be part of the
completion system and will not be treated specially.</p>

<p style="margin-left:11%; margin-top: 1em">The tags are:
<b><br>
#compdef</b> <i>names...</i> [ <b>&minus;[pP]</b>
<i>patterns...</i> [ <b>&minus;N</b> <i>names...</i> ] ]</p>

<p style="margin-left:22%;">The file will be made
autoloadable and the function defined in it will be called
when completing <i>names</i>, each of which is either the
name of a command whose arguments are to be completed or one
of a number of special contexts in the form
<b>&minus;</b><i>context</i><b>&minus;</b> described
below.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>name</i> may also be of the form
&lsquo;<i>cmd</i><b>=</b><i>service</i>&rsquo;. When
completing the command <i>cmd</i>, the function typically
behaves as if the command (or special context)
<i>service</i> was being completed instead. This provides a
way of altering the behaviour of functions that can perform
many different completions. It is implemented by setting the
parameter <b>$service</b> when calling the function; the
function may choose to interpret this how it wishes, and
simpler functions will probably ignore it.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>#compdef</b> line contains one of the options
<b>&minus;p</b> or <b>&minus;P</b>, the words following are
taken to be patterns. The function will be called when
completion is attempted for a command or context that
matches one of the patterns. The options <b>&minus;p</b> and
<b>&minus;P</b> are used to specify patterns to be tried
before or after other completions respectively. Hence
<b>&minus;P</b> may be used to specify default actions.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;N</b> is used after a list following
<b>&minus;p</b> or <b>&minus;P</b>; it specifies that
remaining words no longer define patterns. It is possible to
toggle between the three options as many times as
necessary.</p>

<p style="margin-left:11%;"><b>#compdef &minus;k</b>
<i>style key&minus;sequences...</i></p>

<p style="margin-left:22%;">This option creates a widget
behaving like the builtin widget <i>style</i> and binds it
to the given <i>key&minus;sequences</i>, if any. The
<i>style</i> must be one of the builtin widgets that perform
completion, namely <b>complete&minus;word</b>,
<b>delete&minus;char&minus;or&minus;list</b>,
<b>expand&minus;or&minus;complete</b>,
<b>expand&minus;or&minus;complete&minus;prefix</b>,
<b>list&minus;choices</b>, <b>menu&minus;complete</b>,
<b>menu&minus;expand&minus;or&minus;complete</b>, or
<b>reverse&minus;menu&minus;complete</b>. If the
<b>zsh/complist</b> module is loaded (see
<i>zshmodules</i>(1)) the widget <b>menu&minus;select</b> is
also available.</p>

<p style="margin-left:22%; margin-top: 1em">When one of the
<i>key&minus;sequences</i> is typed, the function in the
file will be invoked to generate the matches. Note that a
key will not be re&minus;bound if it already was (that is,
was bound to something other than
<b>undefined&minus;key</b>). The widget created has the same
name as the file and can be bound to any other keys using
<b>bindkey</b> as usual.</p>

<p style="margin-left:11%;"><b>#compdef &minus;K</b>
<i>widget&minus;name style key&minus;sequences</i> ...</p>

<p style="margin-left:22%;">This is similar to
<b>&minus;k</b> except that only one
<i>key&minus;sequences</i> argument may be given for each
<i>widget&minus;name style</i> pair. However, the entire set
of three arguments may be repeated with a different set of
arguments. Note in particular that the
<i>widget&minus;name</i> must be distinct in each set. If it
does not begin with &lsquo;<b>_</b>&rsquo; this will be
added. The <i>widget&minus;name</i> should not clash with
the name of any existing widget: names based on the name of
the function are most useful. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>#compdef
&minus;K _foo_complete complete&minus;word &quot;^X^C&quot;
\ <br>
_foo_list list&minus;choices &quot;^X^D&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">(all on one
line) defines a widget <b>_foo_complete</b> for completion,
bound to &lsquo;<b>^X^C</b>&rsquo;, and a widget
<b>_foo_list</b> for listing, bound to
&lsquo;<b>^X^D</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>#autoload</b> [
<i>options</i> ]</p>

<p style="margin-left:22%;">Functions with the
<b>#autoload</b> tag are marked for autoloading but are not
otherwise treated specially. Typically they are to be called
from within one of the completion functions. Any
<i>options</i> supplied will be passed to the
<b>autoload</b> builtin; a typical use is <b>+X</b> to force
the function to be loaded immediately. Note that the
<b>&minus;U</b> and <b>&minus;z</b> flags are always added
implicitly.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>#</b> is
part of the tag name and no white space is allowed after it.
The <b>#compdef</b> tags use the <b>compdef</b> function
described below; the main difference is that the name of the
function is supplied implicitly.</p>

<p style="margin-left:11%; margin-top: 1em">The special
contexts for which completion functions can be defined are:
<b><br>
&minus;array&minus;value&minus;</b></p>

<p style="margin-left:22%;">The right hand side of an
array&minus;assignment (&lsquo;<b>foo=(...)</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;brace&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter
expansion within braces (&lsquo;<b>${...}</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;assign&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter in an
assignment, i.e. on the left hand side of an
&lsquo;<b>=</b>&rsquo;</p>


<p style="margin-left:11%;"><b>&minus;command&minus;</b></p>

<p style="margin-left:22%;">A word in command position</p>


<p style="margin-left:11%;"><b>&minus;condition&minus;</b></p>

<p style="margin-left:22%;">A word inside a condition
(&lsquo;<b>[[...]]</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;default&minus;</b></p>

<p style="margin-left:22%;">Any word for which no other
completion is defined</p>

<p style="margin-left:11%;"><b>&minus;equal&minus;</b></p>

<p style="margin-left:22%;">A word beginning with an equals
sign</p>

<p style="margin-left:11%;"><b>&minus;first&minus;</b></p>

<p style="margin-left:22%;">This is tried before any other
completion function. The function called may set the
<b>_compskip</b> parameter to one of various values:
<b>all</b>: no further completion is attempted; a string
containing the substring <b>patterns</b>: no pattern
completion functions will be called; a string containing
<b>default</b>: the function for the
&lsquo;<b>&minus;default&minus;</b>&rsquo; context will not
be called, but functions defined for commands will</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;math&minus;</b></p></td>
<td width="2%"></td>
<td width="72%">


<p>Inside mathematical contexts, such as
&lsquo;<b>((</b>...<b>))</b>&rsquo;</p> </td>
<td width="6%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter
expansion (&lsquo;<b>$...</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;redirect&minus;</b></p>

<p style="margin-left:22%;">The word after a redirection
operator.</p>


<p style="margin-left:11%;"><b>&minus;subscript&minus;</b></p>

<p style="margin-left:22%;">The contents of a parameter
subscript.</p>

<p style="margin-left:11%;"><b>&minus;tilde&minus;</b></p>

<p style="margin-left:22%;">After an initial tilde
(&lsquo;<b>~</b>&rsquo;), but before the first slash in the
word.</p>

<p style="margin-left:11%;"><b>&minus;value&minus;</b></p>

<p style="margin-left:22%;">On the right hand side of an
assignment.</p>

<p style="margin-left:11%; margin-top: 1em">Default
implementations are supplied for each of these contexts. In
most cases the context
<b>&minus;</b><i>context</i><b>&minus;</b> is implemented by
a corresponding function <b>_</b><i>context</i>, for example
the context &lsquo;<b>&minus;tilde&minus;</b>&rsquo; and the
function &lsquo;<b>_tilde</b>&rsquo;).</p>

<p style="margin-left:11%; margin-top: 1em">The contexts
<b>&minus;redirect&minus;</b> and <b>&minus;value&minus;</b>
allow extra context&minus;specific information. (Internally,
this is handled by the functions for each context calling
the function <b>_dispatch</b>.) The extra information is
added separated by commas.</p>

<p style="margin-left:11%; margin-top: 1em">For the
<b>&minus;redirect&minus;</b> context, the extra information
is in the form
&lsquo;<b>&minus;redirect&minus;,</b><i>op</i><b>,</b><i>command</i>&rsquo;,
where <i>op</i> is the redirection operator and
<i>command</i> is the name of the command on the line. If
there is no command on the line yet, the <i>command</i>
field will be empty.</p>

<p style="margin-left:11%; margin-top: 1em">For the
<b>&minus;value&minus;</b> context, the form is
&lsquo;<b>&minus;value&minus;,</b><i>name</i><b>,</b><i>command</i>&rsquo;,
where <i>name</i> is the name of the parameter. In the case
of elements of an associative array, for example
&lsquo;<b>assoc=(key &lt;TAB&gt;</b>&rsquo;, <i>name</i> is
expanded to
&lsquo;<i>name</i><b>&minus;</b><i>key</i>&rsquo;. In
certain special contexts, such as completing after
&lsquo;<b>make CFLAGS=</b>&rsquo;, the <i>command</i> part
gives the name of the command, here <b>make</b>; otherwise
it is empty.</p>

<p style="margin-left:11%; margin-top: 1em">It is not
necessary to define fully specific completions as the
functions provided will try to generate completions by
progressively replacing the elements with
&lsquo;<b>&minus;default&minus;</b>&rsquo;. For example,
when completing after &lsquo;<b>foo=&lt;TAB&gt;</b>&rsquo;,
<b>_value</b> will try the names
&lsquo;<b>&minus;value&minus;,foo,</b>&rsquo; (note the
empty <i>command</i> part),
&lsquo;<b>&minus;value&minus;,foo,&minus;default&minus;</b>&rsquo;
and&lsquo;<b>&minus;value&minus;,&minus;default&minus;,&minus;default&minus;</b>&rsquo;,
in that order, until it finds a function to handle the
context.</p>

<p style="margin-left:11%; margin-top: 1em">As an
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef
&rsquo;_files &minus;g &quot;*.log&quot;&rsquo;
&rsquo;&minus;redirect&minus;,2&gt;,&minus;default&minus;&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">completes files
matching &lsquo;<b>*.log</b>&rsquo; after &lsquo;<b>2&gt;
&lt;TAB&gt;</b>&rsquo; for any command with no more specific
handler defined.</p>

<p style="margin-left:11%; margin-top: 1em">Also:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef _foo
&minus;value&minus;,&minus;default&minus;,&minus;default&minus;</b></p>

<p style="margin-left:11%; margin-top: 1em">specifies that
<b>_foo</b> provides completions for the values of
parameters for which no special function has been defined.
This is usually handled by the function <b>_value</b>
itself.</p>

<p style="margin-left:11%; margin-top: 1em">The same lookup
rules are used when looking up styles (as described below);
for example</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;redirect&minus;,2&gt;,*:*&rsquo;
file&minus;patterns &rsquo;*.log&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">is another way
to make completion after &lsquo;<b>2&gt;
&lt;TAB&gt;</b>&rsquo; complete files matching
&lsquo;<b>*.log</b>&rsquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Functions</b>
<br>
The following function is defined by <b>compinit</b> and may
be called directly. <b><br>
compdef</b> [ <b>&minus;ane</b> ] <i>function names...</i> [
<b>&minus;[pP]</b> <i>patterns...</i> [ <b>&minus;N</b>
<i>names...</i> ] <br>
] <b><br>
compdef &minus;d</b> <i>names...</i> <b><br>
compdef &minus;k</b> [ <b>&minus;an</b> ] <i>function style
key&minus;sequences...</i> <b><br>
compdef &minus;K</b> [ <b>&minus;an</b> ] <i>function name
style key&minus;sequences ...</i></p>

<p style="margin-left:22%;">The first form defines the
<i>function</i> to call for completion in the given contexts
as described for the <b>#compdef</b> tag above.</p>

<p style="margin-left:22%; margin-top: 1em">Alternatively,
all the arguments may have the form
&lsquo;<i>cmd</i><b>=</b><i>service</i>&rsquo;. Here
<i>service</i> should already have been defined by
&lsquo;<i>cmd1</i><b>=</b><i>service</i>&rsquo; lines in
<b>#compdef</b> files, as described above. The argument for
<i>cmd</i> will be completed in the same way as
<i>service</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>function</i> argument may alternatively be a string
containing almost any shell code. If the string contains an
equal sign, the above will take precedence. The option
<b>&minus;e</b> may be used to specify the first argument is
to be evaluated as shell code even if it contains an equal
sign. The string will be executed using the <b>eval</b>
builtin command to generate completions. This provides a way
of avoiding having to define a new completion function. For
example, to complete files ending in &lsquo;<b>.h</b>&rsquo;
as arguments to the command <b>foo</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>compdef
&rsquo;_files &minus;g &quot;*.h&quot;&rsquo; foo</b></p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;n</b> prevents any completions already defined for
the command or context from being overwritten.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;d</b> deletes any completion defined for the
command or contexts listed.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>names</i> may also contain <b>&minus;p</b>,
<b>&minus;P</b> and <b>&minus;N</b> options as described for
the <b>#compdef</b> tag. The effect on the argument list is
identical, switching between definitions of patterns tried
initially, patterns tried finally, and normal commands and
contexts.</p>

<p style="margin-left:22%; margin-top: 1em">The parameter
<b>$_compskip</b> may be set by any function defined for a
pattern context. If it is set to a value containing the
substring &lsquo;<b>patterns</b>&rsquo; none of the
pattern&minus;functions will be called; if it is set to a
value containing the substring &lsquo;<b>all</b>&rsquo;, no
other function will be called.</p>

<p style="margin-left:22%; margin-top: 1em">The form with
<b>&minus;k</b> defines a widget with the same name as the
<i>function</i> that will be called for each of the
<i>key&minus;sequences</i>; this is like the <b>#compdef
&minus;k</b> tag. The function should generate the
completions needed and will otherwise behave like the
builtin widget whose name is given as the <i>style</i>
argument. The widgets usable for this are:
<b>complete&minus;word</b>,
<b>delete&minus;char&minus;or&minus;list</b>,
<b>expand&minus;or&minus;complete</b>,
<b>expand&minus;or&minus;complete&minus;prefix</b>,
<b>list&minus;choices</b>, <b>menu&minus;complete</b>,
<b>menu&minus;expand&minus;or&minus;complete</b>, and
<b>reverse&minus;menu&minus;complete</b>, as well as
<b>menu&minus;select</b> if the <b>zsh/complist</b> module
is loaded. The option <b>&minus;n</b> prevents the key being
bound if it is already to bound to something other than
<b>undefined&minus;key</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The form with
<b>&minus;K</b> is similar and defines multiple widgets
based on the same <i>function</i>, each of which requires
the set of three arguments <i>name</i>, <i>style</i> and
<i>key&minus;sequences</i>, where the latter two are as for
<b>&minus;k</b> and the first must be a unique widget name
beginning with an underscore.</p>

<p style="margin-left:22%; margin-top: 1em">Wherever
applicable, the <b>&minus;a</b> option makes the
<i>function</i> autoloadable, equivalent to <b>autoload
&minus;U</b> <i>function</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>compdef</b> can be used to associate existing completion
functions with new commands. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef
_pids foo</b></p>

<p style="margin-left:11%; margin-top: 1em">uses the
function <b>_pids</b> to complete process IDs for the
command <b>foo</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note also the
<b>_gnu_generic</b> function described below, which can be
used to complete options for commands that understand the
&lsquo;<b>&minus;&minus;help</b>&rsquo; option.</p>

<h2>COMPLETION SYSTEM CONFIGURATION
<a name="COMPLETION SYSTEM CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
gives a short overview of how the completion system works,
and then more detail on how users can configure how and when
matches are generated.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Overview</b>
<br>
When completion is attempted somewhere on the command line
the completion system first works out the context. This
takes account of a number of things including the command
word (such as &lsquo;<b>grep</b>&rsquo; or
&lsquo;<b>zsh</b>&rsquo;) and options to which the current
word may be an argument (such as the
&lsquo;<b>&minus;o</b>&rsquo; option to <b>zsh</b> which
takes a shell option as an argument).</p>

<p style="margin-left:11%; margin-top: 1em">This context
information is condensed into a string consisting of
multiple fields separated by colons, referred to simply as
&lsquo;the context&rsquo; in the remainder of the
documentation. This is used to look up <i>styles</i>,
context&minus;sensitive options that can be used to
configure the completion system. The context used for lookup
may vary during the same call to the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">The context
string always consists of a fixed set of fields, separated
by colons and with a leading colon before the first, in the
form
<b>:completion:</b><i>function</i><b>:</b><i>completer</i><b>:</b><i>command</i><b>:</b><i>argument</i><b>:tag</b>.
These have the following meaning:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The literal string <b>completion</b>, saying that this
style is used by the completion system. This distinguishes
the context from those used by, for example, zle widgets and
ZFTP functions.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>function</i>, if completion is called from a
named widget rather than through the normal completion
system. Typically this is blank, but it is set by special
widgets such as <b>predict&minus;on</b> and the various
functions in the <b>Widget</b> directory of the distribution
to the name of that function, often in an abbreviated
form.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>completer</i> currently active, the name of the
function without the leading underscore and with other
underscores converted to hyphens. A &lsquo;completer&rsquo;
is in overall control of how completion is to be performed;
&lsquo;<b>complete</b>&rsquo; is the simplest, but other
completers exist to perform related tasks such as
correction, or to modify the behaviour of a later completer.
See the section &lsquo;Control Functions&rsquo; below for
more information.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>command</i> or a special
<b>&minus;</b><i>context</i><b>&minus;</b>, just at it
appears following the <b>#compdef</b> tag or the
<b>compdef</b> function. Completion functions for commands
that have sub&minus;commands usually modify this field to
contain the name of the command followed by a minus sign and
the sub&minus;command. For example, the completion function
for the <b>cvs</b> command sets this field to
<b>cvs&minus;add</b> when completing arguments to the
<b>add</b> subcommand.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>argument</i>; this indicates which command line
or option argument we are completing. For command arguments
this generally takes the form
<b>argument&minus;</b><i>n</i>, where <i>n</i> is the number
of the argument, and for arguments to options the form
<b>option&minus;</b><i>opt</i><b>&minus;</b><i>n</i> where
<i>n</i> is the number of the argument to option <i>opt</i>.
However, this is only the case if the command line is parsed
with standard UNIX&minus;style options and arguments, so
many completions do not set this.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>tag</i>. As described previously, tags are used
to discriminate between the types of matches a completion
function can generate in a certain context. Any completion
function may use any tag name it likes, but a list of the
more common ones is given below.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The context is
gradually put together as the functions are executed,
starting with the main entry point, which adds
<b>:completion:</b> and the <i>function</i> element if
necessary. The completer then adds the <i>completer</i>
element. The contextual completion adds the <i>command</i>
and <i>argument</i> options. Finally, the <i>tag</i> is
added when the types of completion are known. For example,
the context name</p>


<p style="margin-left:22%; margin-top: 1em"><b>:completion::complete:dvips:option&minus;o&minus;1:files</b></p>

<p style="margin-left:11%; margin-top: 1em">says that
normal completion was attempted as the first argument to the
option <b>&minus;o</b> of the command <b>dvips</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>dvips
&minus;o ...</b></p>

<p style="margin-left:11%; margin-top: 1em">and the
completion function will generate filenames.</p>

<p style="margin-left:11%; margin-top: 1em">Usually
completion will be tried for all possible tags in an order
given by the completion function. However, this can be
altered by using the <b>tag&minus;order</b> style.
Completion is then restricted to the list of given tags in
the given order.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>_complete_help</b> bindable command shows all the
contexts and tags available for completion at a particular
point. This provides an easy way of finding information for
<b>tag&minus;order</b> and other styles. It is described in
the section &lsquo;Bindable Commands&rsquo; below.</p>

<p style="margin-left:11%; margin-top: 1em">Styles
determine such things as how the matches are generated,
similarly to shell options but with much more control. They
can have any number of strings as their value. They are
defined with the <b>zstyle</b> builtin command (see
<i>zshmodules</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">When looking up
styles the completion system uses full context names,
including the tag. Looking up the value of a style therefore
consists of two things: the context, which may be matched as
a pattern, and the name of the style itself, which must be
given exactly.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
many completion functions can generate matches in a simple
and a verbose form and use the <b>verbose</b> style to
decide which form should be used. To make all such functions
use the verbose form, put</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; verbose yes</b></p>

<p style="margin-left:11%; margin-top: 1em">in a startup
file (probably <b>.zshrc</b>). This gives the <b>verbose</b>
style the value <b>yes</b> in every context inside the
completion system, unless that context has a more specific
definition. It is best to avoid giving the context as
&lsquo;<b>*</b>&rsquo; in case the style has some meaning
outside the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">Many such
general purpose styles can be configured simply by using the
<b>compinstall</b> function.</p>

<p style="margin-left:11%; margin-top: 1em">A more specific
example of the use of the <b>verbose</b> style is by the
completion for the <b>kill</b> builtin. If the style is set,
the builtin lists full job texts and process command lines;
otherwise it shows the bare job numbers and PIDs. To turn
the style off for this use only:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:kill:*&rsquo; verbose no</b></p>

<p style="margin-left:11%; margin-top: 1em">For even more
control, the style can use one of the tags
&lsquo;<b>jobs</b>&rsquo; or &lsquo;<b>processes</b>&rsquo;.
To turn off verbose display only for jobs:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:kill:*:jobs&rsquo; verbose no</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;e</b> option to <b>zstyle</b> even allows
completion function code to appear as the argument to a
style; this requires some understanding of the internals of
completion functions (see see <i>zshcompwid</i>(1))). For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; hosts
&rsquo;reply=($myhosts)&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This forces the
value of the <b>hosts</b> style to be read from the variable
<b>myhosts</b> each time a host name is needed; this is
useful if the value of <b>myhosts</b> can change
dynamically. For another useful example, see the example in
the description of the <b>file&minus;list</b> style below.
This form can be slow and should be avoided for commonly
examined styles such as <b>menu</b> and
<b>list&minus;rows&minus;first</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
order in which styles are <i>defined</i> does not matter;
the style mechanism uses the most specific possible match
for a particular style to determine the set of values. More
precisely, strings are preferred over patterns (for example,
&lsquo;<b>:completion::complete:foo</b>&rsquo; is more
specific than &lsquo;<b>:completion::complete:*&rsquo;</b>),
and longer patterns are preferred over shorter patterns.</p>

<p style="margin-left:11%; margin-top: 1em">Style names
like those of tags are arbitrary and depend on the
completion function. However, the following two sections
list some of the most common tags and styles.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Standard
Tags</b> <br>
Some of the following are only used when looking up
particular styles and do not refer to a type of match.
<b><br>
accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>


<p style="margin-left:11%;"><b>all&minus;expansions</b></p>

<p style="margin-left:22%;">used by the <b>_expand</b>
completer when adding the single string containing all
possible expansions</p>

<p style="margin-left:11%;"><b>all&minus;files</b></p>

<p style="margin-left:22%;">for the names of all files (as
distinct from a particular subset, see the
<b>globbed&minus;files</b> tag).</p>

<p style="margin-left:11%;"><b>arguments</b></p>

<p style="margin-left:22%;">for arguments to a command</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>arrays</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>for names of array parameters</p></td>
<td width="34%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>association&minus;keys</b></p>

<p style="margin-left:22%;">for keys of associative arrays;
used when completing inside a subscript to a parameter of
this type</p>

<p style="margin-left:11%;"><b>bookmarks</b></p>

<p style="margin-left:22%;">when completing bookmarks (e.g.
for URLs and the <b>zftp</b> function suite)</p>

<p style="margin-left:11%;"><b>builtins</b></p>

<p style="margin-left:22%;">for names of builtin
commands</p>

<p style="margin-left:11%;"><b>characters</b></p>

<p style="margin-left:22%;">for single characters in
arguments of commands such as <b>stty</b>. Also used when
completing character classes after an opening bracket</p>

<p style="margin-left:11%;"><b>colormapids</b></p>

<p style="margin-left:22%;">for X colormap ids</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>colors</b></p></td>
<td width="2%"></td>
<td width="23%">


<p>for color names</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">for names of external commands.
Also used by complex commands such as <b>cvs</b> when
completing names subcommands.</p>

<p style="margin-left:11%;"><b>contexts</b></p>

<p style="margin-left:22%;">for contexts in arguments to
the <b>zstyle</b> builtin command</p>

<p style="margin-left:11%;"><b>corrections</b></p>

<p style="margin-left:22%;">used by the <b>_approximate</b>
and <b>_correct</b> completers for possible corrections</p>

<p style="margin-left:11%;"><b>cursors</b></p>

<p style="margin-left:22%;">for cursor names used by X
programs</p>

<p style="margin-left:11%;"><b>default</b></p>

<p style="margin-left:22%;">used in some contexts to
provide a way of supplying a default when more specific tags
are also valid. Note that this tag is used when only the
<i>function</i> field of the context name is set</p>

<p style="margin-left:11%;"><b>descriptions</b></p>

<p style="margin-left:22%;">used when looking up the value
of the <b>format</b> style to generate descriptions for
types of matches</p>

<p style="margin-left:11%;"><b>devices</b></p>

<p style="margin-left:22%;">for names of device special
files</p>

<p style="margin-left:11%;"><b>directories</b></p>

<p style="margin-left:22%;">for names of directories
&minus;&minus; <b>local&minus;directories</b> is used
instead when completing arguments of <b>cd</b> and related
builtin commands when the <b>cdpath</b> array is set</p>


<p style="margin-left:11%;"><b>directory&minus;stack</b></p>

<p style="margin-left:22%;">for entries in the directory
stack</p>

<p style="margin-left:11%;"><b>displays</b></p>

<p style="margin-left:22%;">for X display names</p>

<p style="margin-left:11%;"><b>domains</b></p>

<p style="margin-left:22%;">for network domains</p>

<p style="margin-left:11%;"><b>expansions</b></p>

<p style="margin-left:22%;">used by the <b>_expand</b>
completer for individual words (as opposed to the complete
set of expansions) resulting from the expansion of a word on
the command line</p>

<p style="margin-left:11%;"><b>extensions</b></p>

<p style="margin-left:22%;">for X server extensions</p>


<p style="margin-left:11%;"><b>file&minus;descriptors</b></p>

<p style="margin-left:22%;">for numbers of open file
descriptors</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>files</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>the generic file&minus;matching tag used by functions
completing filenames</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fonts</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for X font names</p></td></tr>
</table>

<p style="margin-left:11%;"><b>fstypes</b></p>

<p style="margin-left:22%;">for file system types (e.g. for
the <b>mount</b> command)</p>

<p style="margin-left:11%;"><b>functions</b></p>

<p style="margin-left:22%;">names of functions
&minus;&minus; normally shell functions, although certain
commands may understand other kinds of function</p>

<p style="margin-left:11%;"><b>globbed&minus;files</b></p>

<p style="margin-left:22%;">for filenames when the name has
been generated by pattern matching</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>groups</b></p></td>
<td width="2%"></td>
<td width="36%">


<p>for names of user groups</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>history&minus;words</b></p>

<p style="margin-left:22%;">for words from the history</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>hosts</b></p></td>
<td width="4%"></td>
<td width="20%">


<p>for hostnames</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>indexes</b></p>

<p style="margin-left:22%;">for array indexes</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>jobs</b></p></td>
<td width="5%"></td>
<td width="64%">


<p>for jobs (as listed by the &lsquo;<b>jobs</b>&rsquo;
builtin)</p> </td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>interfaces</b></p>

<p style="margin-left:22%;">for network interfaces</p>

<p style="margin-left:11%;"><b>keymaps</b></p>

<p style="margin-left:22%;">for names of zsh keymaps</p>

<p style="margin-left:11%;"><b>keysyms</b></p>

<p style="margin-left:22%;">for names of X keysyms</p>

<p style="margin-left:11%;"><b>libraries</b></p>

<p style="margin-left:22%;">for names of system
libraries</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>limits</b></p></td>
<td width="2%"></td>
<td width="26%">


<p>for system limits</p></td>
<td width="52%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>local&minus;directories</b></p>

<p style="margin-left:22%;">for names of directories that
are subdirectories of the current working directory when
completing arguments of <b>cd</b> and related builtin
commands (compare <b>path&minus;directories</b>)
&minus;&minus; when the <b>cdpath</b> array is unset,
<b>directories</b> is used instead</p>

<p style="margin-left:11%;"><b>manuals</b></p>

<p style="margin-left:22%;">for names of manual pages</p>

<p style="margin-left:11%;"><b>mailboxes</b></p>

<p style="margin-left:22%;">for e&minus;mail folders</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>maps</b></p></td>
<td width="5%"></td>
<td width="44%">


<p>for map names (e.g. NIS maps)</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>messages</b></p>

<p style="margin-left:22%;">used to look up the
<b>format</b> style for messages</p>

<p style="margin-left:11%;"><b>modifiers</b></p>

<p style="margin-left:22%;">for names of X modifiers</p>

<p style="margin-left:11%;"><b>modules</b></p>

<p style="margin-left:22%;">for modules (e.g. <b>zsh</b>
modules)</p>

<p style="margin-left:11%;"><b>my&minus;accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>


<p style="margin-left:11%;"><b>named&minus;directories</b></p>

<p style="margin-left:22%;">for named directories (you
wouldn&rsquo;t have guessed that, would you?)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>names</b></p></td>
<td width="4%"></td>
<td width="33%">


<p>for all kinds of names</p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>newsgroups</b></p>

<p style="margin-left:22%;">for USENET groups</p>

<p style="margin-left:11%;"><b>nicknames</b></p>

<p style="margin-left:22%;">for nicknames of NIS maps</p>

<p style="margin-left:11%;"><b>options</b></p>

<p style="margin-left:22%;">for command options</p>

<p style="margin-left:11%;"><b>original</b></p>

<p style="margin-left:22%;">used by the
<b>_approximate</b>, <b>_correct</b> and <b>_expand</b>
completers when offering the original string as a match</p>


<p style="margin-left:11%;"><b>other&minus;accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>

<p style="margin-left:11%;"><b>other&minus;files</b></p>

<p style="margin-left:22%;">for the names of any
non&minus;directory files. This is used instead of
<b>all&minus;files</b> when the
<b>list&minus;dirs&minus;first</b> style is in effect.</p>

<p style="margin-left:11%;"><b>packages</b></p>

<p style="margin-left:22%;">for packages (e.g. <b>rpm</b>
or installed <b>Debian</b> packages)</p>

<p style="margin-left:11%;"><b>parameters</b></p>

<p style="margin-left:22%;">for names of parameters</p>


<p style="margin-left:11%;"><b>path&minus;directories</b></p>

<p style="margin-left:22%;">for names of directories found
by searching the <b>cdpath</b> array when completing
arguments of <b>cd</b> and related builtin commands (compare
<b>local&minus;directories</b>)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>paths</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>used to look up the values of the <b>expand</b>,
<b>ambiguous</b> and <b>special&minus;dirs</b> styles</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>pods</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for perl pods (documentation files)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ports</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for communication ports</p></td></tr>
</table>

<p style="margin-left:11%;"><b>prefixes</b></p>

<p style="margin-left:22%;">for prefixes (like those of a
URL)</p>

<p style="margin-left:11%;"><b>printers</b></p>

<p style="margin-left:22%;">for print queue names</p>

<p style="margin-left:11%;"><b>processes</b></p>

<p style="margin-left:22%;">for process identifiers</p>


<p style="margin-left:11%;"><b>processes&minus;names</b></p>

<p style="margin-left:22%;">used to look up the
<b>command</b> style when generating the names of processes
for <b>killall</b></p>

<p style="margin-left:11%;"><b>sequences</b></p>

<p style="margin-left:22%;">for sequences (e.g. <b>mh</b>
sequences)</p>

<p style="margin-left:11%;"><b>sessions</b></p>

<p style="margin-left:22%;">for sessions in the <b>zftp</b>
function suite</p>

<p style="margin-left:11%;"><b>signals</b></p>

<p style="margin-left:22%;">for signal names</p>

<p style="margin-left:11%;"><b>strings</b></p>

<p style="margin-left:22%;">for strings (e.g. the
replacement strings for the <b>cd</b> builtin command)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>styles</b></p></td>
<td width="2%"></td>
<td width="69%">


<p>for styles used by the zstyle builtin command</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>suffixes</b></p>

<p style="margin-left:22%;">for filename extensions</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>tags</b></p></td>
<td width="5%"></td>
<td width="36%">


<p>for tags (e.g. <b>rpm</b> tags)</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>targets</b></p>

<p style="margin-left:22%;">for makefile targets</p>

<p style="margin-left:11%;"><b>time&minus;zones</b></p>

<p style="margin-left:22%;">for time zones (e.g. when
setting the <b>TZ</b> parameter)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>types</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for types of whatever (e.g. address types for the
<b>xhost</b> command)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>urls</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>used to look up the <b>urls</b> and <b>local</b> styles
when completing URLs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>users</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for usernames</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>values</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for one of a set of values in certain lists</p></td></tr>
</table>

<p style="margin-left:11%;"><b>variant</b></p>

<p style="margin-left:22%;">used by <b>_pick_variant</b> to
look up the command to run when determining what program is
installed for a particular command name.</p>

<p style="margin-left:11%;"><b>visuals</b></p>

<p style="margin-left:22%;">for X visuals</p>

<p style="margin-left:11%;"><b>warnings</b></p>

<p style="margin-left:22%;">used to look up the
<b>format</b> style for warnings</p>

<p style="margin-left:11%;"><b>widgets</b></p>

<p style="margin-left:22%;">for zsh widget names</p>

<p style="margin-left:11%;"><b>windows</b></p>

<p style="margin-left:22%;">for IDs of X windows</p>

<p style="margin-left:11%;"><b>zsh&minus;options</b></p>

<p style="margin-left:22%;">for shell options</p>

<p style="margin-left:11%; margin-top: 1em"><b>Standard
Styles</b> <br>
Note that the values of several of these styles represent
boolean values. Any of the strings
&lsquo;<b>true</b>&rsquo;, &lsquo;<b>on</b>&rsquo;,
&lsquo;<b>yes</b>&rsquo;, and &lsquo;<b>1</b>&rsquo; can be
used for the value &lsquo;true&rsquo; and any of the strings
&lsquo;<b>false</b>&rsquo;, &lsquo;<b>off</b>&rsquo;,
&lsquo;<b>no</b>&rsquo;, and &lsquo;<b>0</b>&rsquo; for the
value &lsquo;false&rsquo;. The behavior for any other value
is undefined except where explicitly mentioned. The default
value may be either true or false if the style is not
set.</p>

<p style="margin-left:11%; margin-top: 1em">Some of these
styles are tested first for every possible tag corresponding
to a type of match, and if no style was found, for the
<b>default</b> tag. The most notable styles of this type are
<b>menu</b>, <b>list&minus;colors</b> and styles controlling
completion listing such as <b>list&minus;packed</b> and
<b>last&minus;prompt</b>. When tested for the <b>default</b>
tag, only the <i>function</i> field of the context will be
set so that a style using the default tag will normally be
defined along the lines of:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:default&rsquo; menu ...</b></p>

<p style="margin-left:11%;"><b>accept&minus;exact</b></p>

<p style="margin-left:22%;">This is tested for the default
tag in addition to the tags valid for the current context.
If it is set to &lsquo;true&rsquo; and any of the trial
matches is the same as the string on the command line, this
match will immediately be accepted (even if it would
otherwise be considered ambiguous).</p>

<p style="margin-left:22%; margin-top: 1em">When completing
pathnames (where the tag used is &lsquo;<b>paths</b>&rsquo;)
this style accepts any number of patterns as the value in
addition to the boolean values. Pathnames matching one of
these patterns will be accepted immediately even if the
command line contains some more partially typed pathname
components and these match no file under the directory
accepted.</p>

<p style="margin-left:22%; margin-top: 1em">This style is
also used by the <b>_expand</b> completer to decide if words
beginning with a tilde or parameter expansion should be
expanded. For example, if there are parameters <b>foo</b>
and <b>foobar</b>, the string &lsquo;<b>$foo</b>&rsquo; will
only be expanded if <b>accept&minus;exact</b> is set to
&lsquo;true&rsquo;; otherwise the completion system will be
allowed to complete <b>$foo</b> to <b>$foobar</b>. If the
style is set to &lsquo;continue&rsquo;, _expand will add the
expansion as a match and the completion system will also be
allowed to continue.</p>


<p style="margin-left:11%;"><b>accept&minus;exact&minus;dirs</b></p>

<p style="margin-left:22%;">This is used by filename
completion. Unlike <b>accept&minus;exact</b> it is a
boolean. By default, filename completion examines all
components of a path to see if there are completions of that
component, even if the component matches an existing
directory. For example, when completion after
<b>/usr/bin/</b>, the function examines possible completions
to <b>/usr</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When this style
is true, any prefix of a path that matches an existing
directory is accepted without any attempt to complete it
further. Hence, in the given example, the path
<b>/usr/bin/</b> is accepted immediately and completion
tried in that directory.</p>

<p style="margin-left:22%; margin-top: 1em">If you wish to
inhibit this behaviour entirely, set the
<b>path&minus;completion</b> style (see below) to
<b>false</b>.</p>

<p style="margin-left:11%;"><b>add&minus;space</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand</b> completer. If it is true (the default), a
space will be inserted after all words resulting from the
expansion, or a slash in the case of directory names. If the
value is &lsquo;<b>file</b>&rsquo;, the completer will only
add a space to names of existing files. Either a boolean
true or the value &lsquo;<b>file</b>&rsquo; may be combined
with &lsquo;<b>subst</b>&rsquo;, in which case the completer
will not add a space to words generated from the expansion
of a substitution of the form &lsquo;<b>$(...)</b>&rsquo; or
&lsquo;<b>${...}</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>_prefix</b> completer uses this style as a simple boolean
value to decide if a space should be inserted before the
suffix.</p>

<p style="margin-left:11%;"><b>ambiguous</b></p>

<p style="margin-left:22%;">This applies when completing
non&minus;final components of filename paths, in other words
those with a trailing slash. If it is set, the cursor is
left after the first ambiguous component, even if menu
completion is in use. The style is always tested with the
<b>paths</b> tag.</p>

<p style="margin-left:11%;"><b>assign&minus;list</b></p>

<p style="margin-left:22%;">When completing after an equals
sign that is being treated as an assignment, the completion
system normally completes only one filename. In some cases
the value may be a list of filenames separated by colons, as
with <b>PATH</b> and similar parameters. This style can be
set to a list of patterns matching the names of such
parameters.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
to complete lists when the word on the line already contains
a colon.</p>


<p style="margin-left:11%;"><b>auto&minus;description</b></p>

<p style="margin-left:22%;">If set, this style&rsquo;s
value will be used as the description for options that are
not described by the completion functions, but that have
exactly one argument. The sequence &lsquo;<b>%d</b>&rsquo;
in the value will be replaced by the description for this
argument. Depending on personal preferences, it may be
useful to set this style to something like
&lsquo;<b>specify: %d</b>&rsquo;. Note that this may not
work for some commands.</p>


<p style="margin-left:11%;"><b>avoid&minus;completer</b></p>

<p style="margin-left:22%;">This is used by the
<b>_all_matches</b> completer to decide if the string
consisting of all matches should be added to the list
currently being generated. Its value is a list of names of
completers. If any of these is the name of the completer
that generated the matches in this completion, the string
will not be added.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>_expand _old_list _correct
_approximate</b>&rsquo;, i.e. it contains the completers for
which a string with all matches will almost never be
wanted.</p>

<p style="margin-left:11%;"><b>cache&minus;path</b></p>

<p style="margin-left:22%;">This style defines the path
where any cache files containing dumped completion data are
stored. It defaults to
&lsquo;<b>$ZDOTDIR/.zcompcache</b>&rsquo;, or
&lsquo;<b>$HOME/.zcompcache</b>&rsquo; if <b>$ZDOTDIR</b> is
not defined. The completion cache will not be used unless
the <b>use&minus;cache</b> style is set.</p>

<p style="margin-left:11%;"><b>cache&minus;policy</b></p>

<p style="margin-left:22%;">This style defines the function
that will be used to determine whether a cache needs
rebuilding. See the section on the <b>_cache_invalid</b>
function below.</p>

<p style="margin-left:11%;"><b>call&minus;command</b></p>

<p style="margin-left:22%;">This style is used in the
function for commands such as <b>make</b> and <b>ant</b>
where calling the command directly to generate matches
suffers problems such as being slow or, as in the case of
<b>make</b> can potentially cause actions in the makefile to
be executed. If it is set to &lsquo;true&rsquo; the command
is called to generate matches. The default value of this
style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">In many places, completion
functions need to call external commands to generate the
list of completions. This style can be used to override the
command that is called in some such cases. The elements of
the value are joined with spaces to form a command line to
execute. The value can also start with a hyphen, in which
case the usual command will be added to the end; this is
most useful for putting &lsquo;<b>builtin</b>&rsquo; or
&lsquo;<b>command</b>&rsquo; in front to make sure the
appropriate version of a command is called, for example to
avoid calling a shell function with the same name as an
external command.</p>

<p style="margin-left:22%; margin-top: 1em">As an example,
the completion function for process IDs uses this style with
the <b>processes</b> tag to generate the IDs to complete and
the list of processes to display (if the <b>verbose</b>
style is &lsquo;true&rsquo;). The list produced by the
command should look like the output of the <b>ps</b>
command. The first line is not displayed, but is searched
for the string &lsquo;<b>PID</b>&rsquo; (or
&lsquo;<b>pid</b>&rsquo;) to find the position of the
process IDs in the following lines. If the line does not
contain &lsquo;<b>PID</b>&rsquo;, the first numbers in each
of the other lines are taken as the process IDs to
complete.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
completion function generally has to call the specified
command for each attempt to generate the completion list.
Hence care should be taken to specify only commands that
take a short time to run, and in particular to avoid any
that may never terminate.</p>

<p style="margin-left:11%;"><b>command&minus;path</b></p>

<p style="margin-left:22%;">This is a list of directories
to search for commands to complete. The default for this
style is the value of the special parameter <b>path</b>.</p>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">This is used by the function
completing sub&minus;commands for the system initialisation
scripts (residing in <b>/etc/init.d</b> or somewhere not too
far away from that). Its values give the default commands to
complete for those commands for which the completion
function isn&rsquo;t able to find them out automatically.
The default for this style are the two strings
&lsquo;<b>start</b>&rsquo; and
&lsquo;<b>stop</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>complete</b></p>

<p style="margin-left:22%;">This is used by the
<b>_expand_alias</b> function when invoked as a bindable
command. If set to &lsquo;true&rsquo; and the word on the
command line is not the name of an alias, matching alias
names will be completed.</p>


<p style="margin-left:11%;"><b>complete&minus;options</b></p>

<p style="margin-left:22%;">This is used by the completer
for <b>cd</b>, <b>chdir</b> and <b>pushd</b>. For these
commands a <b>&minus;</b> is used to introduce a directory
stack entry and completion of these is far more common than
completing options. Hence unless the value of this style is
true options will not be completed, even after an initial
<b>&minus;</b>. If it is true, options will be completed
after an initial <b>&minus;</b> unless there is a preceding
<b>&minus;&minus;</b> on the command line.</p>

<p style="margin-left:11%;"><b>completer</b></p>

<p style="margin-left:22%;">The strings given as the value
of this style provide the names of the completer functions
to use. The available completer functions are described in
the section &lsquo;Control Functions&rsquo; below.</p>

<p style="margin-left:22%; margin-top: 1em">Each string may
be either the name of a completer function or a string of
the form &lsquo;<i>function</i><b>:</b><i>name</i>&rsquo;.
In the first case the <i>completer</i> field of the context
will contain the name of the completer without the leading
underscore and with all other underscores replaced by
hyphens. In the second case the <i>function</i> is the name
of the completer to call, but the context will contain the
user&minus;defined <i>name</i> in the <i>completer</i> field
of the context. If the <i>name</i> starts with a hyphen, the
string for the context will be build from the name of the
completer function as in the first case with the <i>name</i>
appended to it. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_complete:&minus;foo</b></p>

<p style="margin-left:22%; margin-top: 1em">Here,
completion will call the <b>_complete</b> completer twice,
once using &lsquo;<b>complete</b>&rsquo; and once using
&lsquo;<b>complete&minus;foo</b>&rsquo; in the
<i>completer</i> field of the context. Normally, using the
same completer more than once only makes sense when used
with the &lsquo;<i>functions</i><b>:</b><i>name</i>&rsquo;
form, because otherwise the context name will be the same in
all calls to the completer; possible exceptions to this rule
are the <b>_ignored</b> and <b>_prefix</b> completers.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>_complete
_ignored</b>&rsquo;: only completion will be done, first
using the <b>ignored&minus;patterns</b> style and the
<b>$fignore</b> array and then without ignoring matches.</p>

<p style="margin-left:11%;"><b>condition</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_list</b> completer function to decide if insertion of
matches should be delayed unconditionally. The default is
&lsquo;true&rsquo;.</p>

<p style="margin-left:11%;"><b>delimiters</b></p>

<p style="margin-left:22%;">This style is used when adding
a delimiter for use with history modifiers or glob
qualifiers that have delimited arguments. It is an array of
preferred delimiters to add. Non&minus;special characters
are preferred as the completion system may otherwise become
confused. The default list is <b>:</b>, <b>+</b>, <b>/</b>,
<b>&minus;</b>, <b>%</b>. The list may be empty to force a
delimiter to be typed.</p>

<p style="margin-left:11%;"><b>disabled</b></p>

<p style="margin-left:22%;">If this is set to
&lsquo;true&rsquo;, the <b>_expand_alias</b> completer and
bindable command will try to expand disabled aliases, too.
The default is &lsquo;<b>false</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>domains</b></p>

<p style="margin-left:22%;">A list of names of network
domains for completion. If this is not set, domain names
will be taken from the file <b>/etc/resolv.conf</b>.</p>

<p style="margin-left:11%;"><b>environ</b></p>

<p style="margin-left:22%;">The environ style is used when
completing for &lsquo;<b>sudo</b>&rsquo;. It is set to an
array of &lsquo;<i>VAR</i><b>=</b><i>value</i>&rsquo;
assignments to be exported into the local environment before
the completion for the target command is invoked. <b><br>
zstyle &rsquo;:completion:*:sudo::&rsquo; environ \ <br>
PATH=&quot;/sbin:/usr/sbin:$PATH&quot;
HOME=&quot;/root&quot;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>expand</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This style is used when completing strings consisting of
multiple parts, such as path names.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If one of its
values is the string &lsquo;<b>prefix</b>&rsquo;, the
partially typed word from the line will be expanded as far
as possible even if trailing parts cannot be completed.</p>

<p style="margin-left:22%; margin-top: 1em">If one of its
values is the string &lsquo;<b>suffix</b>&rsquo;, matching
names for components after the first ambiguous one will also
be added. This means that the resulting string is the
longest unambiguous string possible. However, menu
completion can be used to cycle through all matches.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>fake</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">This style may be set for any
completion context. It specifies additional strings that
will always be completed in that context. The form of each
string is
&lsquo;<i>value</i><b>:</b><i>description</i>&rsquo;; the
colon and description may be omitted, but any literal colons
in <i>value</i> must be quoted with a backslash. Any
<i>description</i> provided is shown alongside the value in
completion listings.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">It is important
to use a sufficiently restrictive context when specifying
fake strings. Note that the styles <b>fake&minus;files</b>
and <b>fake&minus;parameters</b> provide additional features
when completing files or parameters.</p>

<p style="margin-left:11%;"><b>fake&minus;always</b></p>

<p style="margin-left:22%;">This works identically to the
<b>fake</b> style except that the
<b>ignored&minus;patterns</b> style is not applied to it.
This makes it possible to override a set of matches
completely by setting the ignored patterns to
&lsquo;<b>*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The following
shows a way of supplementing any tag with arbitrary data,
but having it behave for display purposes like a separate
tag. In this example we use the features of the
<b>tag&minus;order</b> style to divide the
<b>named&minus;directories</b> tag into two when performing
completion with the standard completer <b>complete</b> for
arguments of <b>cd</b>. The tag
<b>named&minus;directories&minus;normal</b> behaves as
normal, but the tag
<b>named&minus;directories&minus;mine</b> contains a fixed
set of directories. This has the effect of adding the match
group &lsquo;<b>extra directories</b>&rsquo; with the given
completions.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion::complete:cd:*&rsquo; tag&minus;order \
<br>
&rsquo;named&minus;directories:&minus;mine:extra\
directories <br>
named&minus;directories:&minus;normal:named\ directories
*&rsquo; <br>
zstyle
&rsquo;:completion::complete:cd:*:named&minus;directories&minus;mine&rsquo;
\ <br>
fake&minus;always mydir1 mydir2 <br>
zstyle
&rsquo;:completion::complete:cd:*:named&minus;directories&minus;mine&rsquo;
\ <br>
ignored&minus;patterns &rsquo;*&rsquo;</b></p>

<p style="margin-left:11%;"><b>fake&minus;files</b></p>

<p style="margin-left:22%;">This style is used when
completing files and looked up without a tag. Its values are
of the form &lsquo;<i>dir</i><b>:</b><i>names...</i>&rsquo;.
This will add the <i>names</i> (strings separated by spaces)
as possible matches when completing in the directory
<i>dir</i>, even if no such files really exist. The dir may
be a pattern; pattern characters or colons in <i>dir</i>
should be quoted with a backslash to be treated
literally.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
useful on systems that support special file systems whose
top&minus;level pathnames can not be listed or generated
with glob patterns. It can also be used for directories for
which one does not have read permission.</p>

<p style="margin-left:22%; margin-top: 1em">The pattern
form can be used to add a certain &lsquo;magic&rsquo; entry
to all directories on a particular file system.</p>


<p style="margin-left:11%;"><b>fake&minus;parameters</b></p>

<p style="margin-left:22%;">This is used by the completion
function for parameter names. Its values are names of
parameters that might not yet be set but should be completed
nonetheless. Each name may also be followed by a colon and a
string specifying the type of the parameter (like
&lsquo;<b>scalar</b>&rsquo;, &lsquo;<b>array</b>&rsquo; or
&lsquo;<b>integer</b>&rsquo;). If the type is given, the
name will only be completed if parameters of that type are
required in the particular context. Names for which no type
is specified will always be completed.</p>

<p style="margin-left:11%;"><b>file&minus;list</b></p>

<p style="margin-left:22%;">This style controls whether
files completed using the standard builtin mechanism are to
be listed with a long list similar to <b>ls &minus;l</b>.
Note that this feature uses the shell module <b>zsh/stat</b>
for file information; this loads the builtin <b>stat</b>
which will replace any external <b>stat</b> executable. To
avoid this the following code can be included in an
initialization file:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zmodload
&minus;i zsh/stat <br>
disable stat</b></p>

<p style="margin-left:22%; margin-top: 1em">The style may
either be set to a true value (or &lsquo;<b>all</b>&rsquo;),
or one of the values &lsquo;<b>insert</b>&rsquo; or
&lsquo;<b>list</b>&rsquo;, indicating that files are to be
listed in long format in all circumstances, or when
attempting to insert a file name, or when listing file names
without attempting to insert one.</p>

<p style="margin-left:22%; margin-top: 1em">More generally,
the value may be an array of any of the above values,
optionally followed by <b>=</b><i>num</i>. If <i>num</i> is
present it gives the maximum number of matches for which
long listing style will be used. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; file&minus;list list=20
insert=10</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
long format will be used when listing up to 20 files or
inserting a file with up to 10 matches (assuming a listing
is to be shown at all, for example on an ambiguous
completion), else short format will be used.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; file&minus;list
&rsquo;(( ${+NUMERIC} )) &amp;&amp;
reply=(true)&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
long format will be used any time a numeric argument is
supplied, else short format.</p>

<p style="margin-left:11%;"><b>file&minus;patterns</b></p>

<p style="margin-left:22%;">This is used by the standard
function for completing filenames, <b>_files</b>. If the
style is unset up to three tags are offered,
&lsquo;<b>globbed&minus;files</b>&rsquo;,&lsquo;<b>directories</b>&rsquo;
and &lsquo;<b>all&minus;files</b>&rsquo;, depending on the
types of files expected by the caller of <b>_files</b>. The
first two (&lsquo;<b>globbed&minus;files</b>&rsquo; and
&lsquo;<b>directories</b>&rsquo;) are normally offered
together to make it easier to complete files in
sub&minus;directories.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>file&minus;patterns</b> style provides alternatives to
the default tags, which are not used. Its value consists of
elements of the form
&lsquo;<i>pattern</i><b>:</b><i>tag</i>&rsquo;; each string
may contain any number of such specifications separated by
spaces.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>pattern</i> is a pattern that is to be used to generate
filenames. Any occurrence of the sequence
&lsquo;<b>%p</b>&rsquo; is replaced by any pattern(s) passed
by the function calling <b>_files</b>. Colons in the pattern
must be preceded by a backslash to make them distinguishable
from the colon before the <i>tag</i>. If more than one
pattern is needed, the patterns can be given inside braces,
separated by commas.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>tag</i>s
of all strings in the value will be offered by <b>_files</b>
and used when looking up other styles. Any <i>tag</i>s in
the same word will be offered at the same time and before
later words. If no &lsquo;<b>:</b><i>tag</i>&rsquo; is given
the &lsquo;<b>files</b>&rsquo; tag will be used.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>tag</i>
may also be followed by an optional second colon and a
description, which will be used for the
&lsquo;<b>%d</b>&rsquo; in the value of the <b>format</b>
style (if that is set) instead of the default description
supplied by the completion function. If the description
given here contains itself a &lsquo;<b>%d</b>&rsquo;, that
is replaced with the description supplied by the completion
function.</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
make the <b>rm</b> command first complete only names of
object files and then the names of all files if there is no
matching object file:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:rm:*&rsquo; file&minus;patterns \
<br>
&rsquo;*.o:object&minus;files&rsquo;
&rsquo;%p:all&minus;files&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">To alter the
default behaviour of file completion &minus;&minus; offer
files matching a pattern and directories on the first
attempt, then all files &minus;&minus; to offer only
matching files on the first attempt, then directories, and
finally all files:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; file&minus;patterns \ <br>
&rsquo;%p:globbed&minus;files&rsquo;
&rsquo;*(&minus;/):directories&rsquo;
&rsquo;*:all&minus;files&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This works even
where there is no special pattern: <b>_files</b> matches all
files using the pattern &lsquo;<b>*</b>&rsquo; at the first
step and stops when it sees this pattern. Note also it will
never try a pattern more than once for a single completion
attempt.</p>

<p style="margin-left:22%; margin-top: 1em">During the
execution of completion functions, the <b>EXTENDED_GLOB</b>
option is in effect, so the characters
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>~</b>&rsquo; and
&lsquo;<b>^</b>&rsquo; have special meanings in the
patterns.</p>

<p style="margin-left:11%;"><b>file&minus;sort</b></p>

<p style="margin-left:22%;">The standard filename
completion function uses this style without a tag to
determine in which order the names should be listed; menu
completion will cycle through them in the same order. The
possible values are: &lsquo;<b>size</b>&rsquo; to sort by
the size of the file; &lsquo;<b>links</b>&rsquo; to sort by
the number of links to the file;
&lsquo;<b>modification</b>&rsquo; (or
&lsquo;<b>time</b>&rsquo; or &lsquo;<b>date</b>&rsquo;) to
sort by the last modification time;
&lsquo;<b>access</b>&rsquo; to sort by the last access time;
and &lsquo;<b>inode</b>&rsquo; (or
&lsquo;<b>change</b>&rsquo;) to sort by the last inode
change time. If the style is set to any other value, or is
unset, files will be sorted alphabetically by name. If the
value contains the string &lsquo;<b>reverse</b>&rsquo;,
sorting is done in the opposite order. If the value contains
the string &lsquo;<b>follow</b>&rsquo;, timestamps are
associated with the targets of symbolic links; the default
is to use the timestamps of the links themselves.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>filter</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is used by the LDAP plugin for e&minus;mail address
completion to specify the attributes to match against when
filtering entries. So for example, if the style is set to
&lsquo;<b>sn</b>&rsquo;, matching is done against surnames.
Standard LDAP filtering is used so normal completion
matching is bypassed. If this style is not set, the LDAP
plugin is skipped. You may also need to set the
<b>command</b> style to specify how to connect to your LDAP
server.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>force&minus;list</b></p>

<p style="margin-left:22%;">This forces a list of
completions to be shown at any point where listing is done,
even in cases where the list would usually be suppressed.
For example, normally the list is only shown if there are at
least two different matches. By setting this style to
&lsquo;<b>always</b>&rsquo;, the list will always be shown,
even if there is only a single match that will immediately
be accepted. The style may also be set to a number. In this
case the list will be shown if there are at least that many
matches, even if they would all insert the same string.</p>

<p style="margin-left:22%; margin-top: 1em">This style is
tested for the default tag as well as for each tag valid for
the current completion. Hence the listing can be forced only
for certain types of match.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>format</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set for the <b>descriptions</b> tag, its
value is used as a string to display above matches in
completion lists. The sequence &lsquo;<b>%d</b>&rsquo; in
this string will be replaced with a short description of
what these matches are. This string may also contain the
following sequences to specify output attributes, as
described in the section EXPANSION OF PROMPT SEQUENCES in
<i>zshmisc</i>(1): &lsquo;<b>%B</b>&rsquo;,
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%U</b>&rsquo;,
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%K</b>&rsquo; and their
lower case counterparts, as well as
&lsquo;<b>%{</b>...<b>%}</b>&rsquo;.
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%K</b>&rsquo; and
&lsquo;<b>%{</b>...<b>%}</b>&rsquo; take arguments in the
same form as prompt expansion. Note that the <b>%G</b>
sequence is not available; an argument to
&lsquo;<b>%{</b>&rsquo; should be used instead.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The style is
tested with each tag valid for the current completion before
it is tested for the <b>descriptions</b> tag. Hence
different format strings can be defined for different types
of match.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
some completer functions define additional
&lsquo;<b>%</b>&rsquo;&minus;sequences. These are described
for the completer functions that make use of them.</p>

<p style="margin-left:22%; margin-top: 1em">Some completion
functions display messages that may be customised by setting
this style for the <b>messages</b> tag. Here, the
&lsquo;<b>%d</b>&rsquo; is replaced with a message given by
the completion function.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, the
format string is looked up with the <b>warnings</b> tag, for
use when no matches could be generated at all. In this case
the &lsquo;<b>%d</b>&rsquo; is replaced with the
descriptions for the matches that were expected separated by
spaces. The sequence &lsquo;<b>%D</b>&rsquo; is replaced
with the same descriptions separated by newlines.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use printf&minus;style field width specifiers with
&lsquo;<b>%d</b>&rsquo; and similar escape sequences. This
is handled by the <b>zformat</b> builtin command from the
<b>zsh/zutil</b> module, see <i>zshmodules</i>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>glob</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">This is used by the
<b>_expand</b> completer. If it is set to &lsquo;true&rsquo;
(the default), globbing will be attempted on the words
resulting from a previous substitution (see the
<b>substitute</b> style) or else the original string from
the line.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>global</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set to &lsquo;true&rsquo; (the default), the
<b>_expand_alias</b> completer and bindable command will try
to expand global aliases.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>group&minus;name</b></p>

<p style="margin-left:22%;">The completion system can group
different types of matches, which appear in separate lists.
This style can be used to give the names of groups for
particular tags. For example, in command position the
completion system generates names of builtin and external
commands, names of aliases, shell functions and parameters
and reserved words as possible completions. To have the
external commands and shell functions listed separately:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*:commands&rsquo;
group&minus;name commands <br>
zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*:functions&rsquo;
group&minus;name functions</b></p>

<p style="margin-left:22%; margin-top: 1em">As a
consequence, any match with the same tag will be displayed
in the same group.</p>

<p style="margin-left:22%; margin-top: 1em">If the name
given is the empty string the name of the tag for the
matches will be used as the name of the group. So, to have
all different types of matches displayed separately, one can
just set:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; group&minus;name
&rsquo;&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">All matches for
which no group name is defined will be put in a group named
<b>&minus;default&minus;</b>.</p>

<p style="margin-left:11%;"><b>group&minus;order</b></p>

<p style="margin-left:22%;">This style is additional to the
<b>group&minus;name</b> style to specify the order for
display of the groups defined by that style (compare
<b>tag&minus;order</b>, which determines which completions
appear at all). The groups named are shown in the given
order; any other groups are shown in the order defined by
the completion function.</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
have names of builtin commands, shell functions and external
commands appear in that order when completing in command
position:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*&rsquo;
group&minus;order \ <br>
builtins functions commands</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>groups</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A list of names of UNIX groups. If this is not set,
group names are taken from the YP database or the file
&lsquo;<b>/etc/group</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>hidden</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set to true, matches for the given context
will not be listed, although any description for the matches
set with the <b>format</b> style will be shown. If it is set
to &lsquo;<b>all</b>&rsquo;, not even the description will
be displayed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that the
matches will still be completed; they are just not shown in
the list. To avoid having matches considered as possible
completions at all, the <b>tag&minus;order</b> style can be
modified as described below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>hosts</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">A list of names of hosts that
should be completed. If this is not set, hostnames are taken
from the file &lsquo;<b>/etc/hosts</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>hosts&minus;ports</b></p>

<p style="margin-left:22%;">This style is used by commands
that need or accept hostnames and network ports. The strings
in the value should be of the form
&lsquo;<i>host</i><b>:</b><i>port</i>&rsquo;. Valid ports
are determined by the presence of hostnames; multiple ports
for the same host may appear.</p>

<p style="margin-left:11%;"><b>ignore&minus;line</b></p>

<p style="margin-left:22%;">This is tested for each tag
valid for the current completion. If it is set to
&lsquo;<b>true</b>&rsquo;, none of the words that are
already on the line will be considered as possible
completions. If it is set to &lsquo;<b>current</b>&rsquo;,
the word the cursor is on will not be considered as a
possible completion. The value
&lsquo;<b>current&minus;shown</b>&rsquo; is similar but only
applies if the list of completions is currently shown on the
screen. Finally, if the style is set to
&lsquo;<b>other</b>&rsquo;, all words on the line except for
the current one will be excluded from the possible
completions.</p>

<p style="margin-left:22%; margin-top: 1em">The values
&lsquo;<b>current</b>&rsquo; and
&lsquo;<b>current&minus;shown</b>&rsquo; are a bit like the
opposite of the <b>accept&minus;exact</b> style: only
strings with missing characters will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
almost certainly don&rsquo;t want to set this to
&lsquo;true&rsquo; or &lsquo;<b>other</b>&rsquo; for a
general context such as &lsquo;<b>:completion:*</b>&rsquo;.
This is because it would disallow completion of, for
example, options multiple times even if the command in
question accepts the option more than once.</p>


<p style="margin-left:11%;"><b>ignore&minus;parents</b></p>

<p style="margin-left:22%;">The style is tested without a
tag by the function completing pathnames in order to
determine whether to ignore the names of directories already
mentioned in the current word, or the name of the current
working directory. The value must include one or both of the
following strings:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>parent</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The name of any directory whose path is already
contained in the word on the line is ignored. For example,
when completing after <b>foo/../</b>, the directory
<b>foo</b> will not be considered a valid completion.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>pwd</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The name of the current working directory will not be
completed; hence, for example, completion after <b>../</b>
will not use the name of the current directory.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In addition,
the value may include one or both of:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>..</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Ignore the specified directories
only when the word on the line contains the substring
&lsquo;<b>../</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>directory</b></p>

<p style="margin-left:32%;">Ignore the specified
directories only when names of directories are completed,
not when completing names of files.</p>

<p style="margin-left:22%; margin-top: 1em">Excluded values
act in a similar fashion to values of the
<b>ignored&minus;patterns</b> style, so they can be restored
to consideration by the <b>_ignored</b> completer.</p>

<p style="margin-left:11%;"><b>extra&minus;verbose</b></p>

<p style="margin-left:22%;">If set, the completion listing
is more verbose at the cost of a probable decrease in
completion speed. Completion performance will suffer if this
style is set to &lsquo;true&rsquo;.</p>


<p style="margin-left:11%;"><b>ignored&minus;patterns</b></p>

<p style="margin-left:22%;">A list of patterns; any trial
completion matching one of the patterns will be excluded
from consideration. The <b>_ignored</b> completer can appear
in the list of completers to restore the ignored matches.
This is a more configurable version of the shell parameter
<b>$fignore</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<b>EXTENDED_GLOB</b> option is set during the execution of
completion functions, so the characters
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>~</b>&rsquo; and
&lsquo;<b>^</b>&rsquo; have special meanings in the
patterns.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>insert</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This style is used by the <b>_all_matches</b> completer
to decide whether to insert the list of all matches
unconditionally instead of adding the list as another
match.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>insert&minus;ids</b></p>

<p style="margin-left:22%;">When completing process IDs,
for example as arguments to the <b>kill</b> and <b>wait</b>
builtins the name of a command may be converted to the
appropriate process ID. A problem arises when the process
name typed is not unique. By default (or if this style is
set explicitly to &lsquo;<b>menu</b>&rsquo;) the name will
be converted immediately to a set of possible IDs, and menu
completion will be started to cycle through them.</p>

<p style="margin-left:22%; margin-top: 1em">If the value of
the style is &lsquo;<b>single</b>&rsquo;, the shell will
wait until the user has typed enough to make the command
unique before converting the name to an ID; attempts at
completion will be unsuccessful until that point. If the
value is any other string, menu completion will be started
when the string typed by the user is longer than the common
prefix to the corresponding IDs.</p>

<p style="margin-left:11%;"><b>insert&minus;tab</b></p>

<p style="margin-left:22%;">If this is set to
&lsquo;true&rsquo;, the completion system will insert a TAB
character (assuming that was used to start completion)
instead of performing completion when there is no
non&minus;blank character to the left of the cursor. If it
is set to &lsquo;false&rsquo;, completion will be done even
there.</p>

<p style="margin-left:22%; margin-top: 1em">The value may
also contain the substrings &lsquo;<b>pending</b>&rsquo; or
&lsquo;<b>pending=</b><i>val</i>&rsquo;. In this case, the
typed character will be inserted instead of starting
completion when there is unprocessed input pending. If a
<i>val</i> is given, completion will not be done if there
are at least that many characters of unprocessed input. This
is often useful when pasting characters into a terminal.
Note however, that it relies on the <b>$PENDING</b> special
parameter from the <b>zsh/zle</b> module being set properly
which is not guaranteed on all platforms.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value of this style is &lsquo;true&rsquo; except for
completion within <b>vared</b> builtin command where it is
&lsquo;false&rsquo;.</p>


<p style="margin-left:11%;"><b>insert&minus;unambiguous</b></p>

<p style="margin-left:22%;">This is used by the
<b>_match</b> and <b>_approximate</b> completers. These
completers are often used with menu completion since the
word typed may bear little resemblance to the final
completion. However, if this style is &lsquo;true&rsquo;,
the completer will start menu completion only if it could
find no unambiguous initial string at least as long as the
original string typed by the user.</p>

<p style="margin-left:22%; margin-top: 1em">In the case of
the <b>_approximate</b> completer, the completer field in
the context will already have been set to one of
<b>correct&minus;</b><i>num</i> or
<b>approximate&minus;</b><i>num</i>, where <i>num</i> is the
number of errors that were accepted.</p>

<p style="margin-left:22%; margin-top: 1em">In the case of
the <b>_match</b> completer, the style may also be set to
the string &lsquo;<b>pattern</b>&rsquo;. Then the pattern on
the line is left unchanged if it does not match
unambiguously.</p>

<p style="margin-left:11%;"><b>keep&minus;prefix</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand</b> completer. If it is &lsquo;true&rsquo;, the
completer will try to keep a prefix containing a tilde or
parameter expansion. Hence, for example, the string
&lsquo;<b>~/f*</b>&rsquo; would be expanded to
&lsquo;<b>~/foo</b>&rsquo; instead of
&lsquo;<b>/home/user/foo</b>&rsquo;. If the style is set to
&lsquo;<b>changed</b>&rsquo; (the default), the prefix will
only be left unchanged if there were other changes between
the expanded words and the original word from the command
line. Any other value forces the prefix to be expanded
unconditionally.</p>

<p style="margin-left:22%; margin-top: 1em">The behaviour
of expand when this style is true is to cause <b>_expand</b>
to give up when a single expansion with the restored prefix
is the same as the original; hence any remaining completers
may be called.</p>

<p style="margin-left:11%;"><b>last&minus;prompt</b></p>

<p style="margin-left:22%;">This is a more flexible form of
the <b>ALWAYS_LAST_PROMPT</b> option. If it is true, the
completion system will try to return the cursor to the
previous command line after displaying a completion list. It
is tested for all tags valid for the current completion,
then the <b>default</b> tag. The cursor will be moved back
to the previous line if this style is &lsquo;true&rsquo; for
all types of match. Note that unlike the
<b>ALWAYS_LAST_PROMPT</b> option this is independent of the
numeric prefix argument.</p>


<p style="margin-left:11%;"><b>known&minus;hosts&minus;files</b></p>

<p style="margin-left:22%;">This style should contain a
list of files to search for host names and (if the
<b>use&minus;ip</b> style is set) IP addresses in a format
compatible with ssh <b>known_hosts</b> files. If it is not
set, the files <b>/etc/ssh/ssh_known_hosts</b> and
<b>~/.ssh/known_hosts</b> are used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>list</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This style is used by the <b>_history_complete_word</b>
bindable command. If it is set to &lsquo;true&rsquo; it has
no effect. If it is set to &lsquo;false&rsquo; matches will
not be listed. This overrides the setting of the options
controlling listing behaviour, in particular
<b>AUTO_LIST</b>. The context always starts with
&lsquo;<b>:completion:history&minus;words</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>list&minus;colors</b></p>

<p style="margin-left:22%;">If the <b>zsh/complist</b>
module is loaded, this style can be used to set color
specifications. This mechanism replaces the use of the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters
described in the section &lsquo;The zsh/complist
Module&rsquo; in <i>zshmodules</i>(1), but the syntax is the
same.</p>

<p style="margin-left:22%; margin-top: 1em">If this style
is set for the <b>default</b> tag, the strings in the value
are taken as specifications that are to be used everywhere.
If it is set for other tags, the specifications are used
only for matches of the type described by the tag. For this
to work best, the <b>group&minus;name</b> style must be set
to an empty string.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
setting styles for specific tags, it is also possible to use
group names specified explicitly by the
<b>group&minus;name</b> tag together with the
&lsquo;<b>(group)</b>&rsquo; syntax allowed by the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters and
simply using the <b>default</b> tag.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use any color specifications already set up for the GNU
version of the <b>ls</b> command:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:default&rsquo; list&minus;colors
${(s.:.)LS_COLORS}</b></p>

<p style="margin-left:22%; margin-top: 1em">The default
colors are the same as for the GNU <b>ls</b> command and can
be obtained by setting the style to an empty string (i.e.
<b>&rsquo;&rsquo;</b>).</p>


<p style="margin-left:11%;"><b>list&minus;dirs&minus;first</b></p>

<p style="margin-left:22%;">This is used by file
completion. If set, directories to be completed are listed
separately from and before completion for other files,
regardless of tag ordering. In addition, the tag
<b>other&minus;files</b> is used in place of
<b>all&minus;files</b> for the remaining files, to indicate
that no directories are presented with that tag.</p>

<p style="margin-left:11%;"><b>list&minus;grouped</b></p>

<p style="margin-left:22%;">If this style is
&lsquo;true&rsquo; (the default), the completion system will
try to make certain completion listings more compact by
grouping matches. For example, options for commands that
have the same description (shown when the <b>verbose</b>
style is set to &lsquo;true&rsquo;) will appear as a single
entry. However, menu selection can be used to cycle through
all the matches.</p>

<p style="margin-left:11%;"><b>list&minus;packed</b></p>

<p style="margin-left:22%;">This is tested for each tag
valid in the current context as well as the <b>default</b>
tag. If it is set to &lsquo;true&rsquo;, the corresponding
matches appear in listings as if the <b>LIST_PACKED</b>
option were set. If it is set to &lsquo;false&rsquo;, they
are listed normally.</p>

<p style="margin-left:11%;"><b>list&minus;prompt</b></p>

<p style="margin-left:22%;">If this style is set for the
<b>default</b> tag, completion lists that don&rsquo;t fit on
the screen can be scrolled (see the description of the
<b>zsh/complist</b> module in <i>zshmodules</i>(1)). The
value, if not the empty string, will be displayed after
every screenful and the shell will prompt for a key press;
if the style is set to the empty string, a default prompt
will be used.</p>

<p style="margin-left:22%; margin-top: 1em">The value may
contain the escape sequences: &lsquo;<b>%l</b>&rsquo; or
&lsquo;<b>%L</b>&rsquo;, which will be replaced by the
number of the last line displayed and the total number of
lines; &lsquo;<b>%m</b>&rsquo; or &lsquo;<b>%M</b>&rsquo;,
the number of the last match shown and the total number of
matches; and &lsquo;<b>%p</b>&rsquo; and
&lsquo;<b>%P</b>&rsquo;, &lsquo;<b>Top</b>&rsquo; when at
the beginning of the list, &lsquo;<b>Bottom</b>&rsquo; when
at the end and the position shown as a percentage of the
total length otherwise. In each case the form with the
uppercase letter will be replaced by a string of fixed
width, padded to the right with spaces, while the lowercase
form will be replaced by a variable width string. As in
other prompt strings, the escape sequences
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%s</b>&rsquo;,
&lsquo;<b>%B</b>&rsquo;, &lsquo;<b>%b</b>&rsquo;,
&lsquo;<b>%U</b>&rsquo;, &lsquo;<b>%u</b>&rsquo; for
entering and leaving the display modes standout, bold and
underline, and &lsquo;<b>%F</b>&rsquo;,
&lsquo;<b>%f</b>&rsquo;, &lsquo;<b>%K</b>&rsquo;,
&lsquo;<b>%k</b>&rsquo; for changing the foreground
background colour, are also available, as is the form
&lsquo;<b>%{</b>...<b>%}</b>&rsquo; for enclosing escape
sequences which display with zero (or, with a numeric
argument, some other) width.</p>

<p style="margin-left:22%; margin-top: 1em">After deleting
this prompt the variable <b>LISTPROMPT</b> should be unset
for the removal to take effect.</p>


<p style="margin-left:11%;"><b>list&minus;rows&minus;first</b></p>

<p style="margin-left:22%;">This style is tested in the
same way as the <b>list&minus;packed</b> style and
determines whether matches are to be listed in a
rows&minus;first fashion as if the <b>LIST_ROWS_FIRST</b>
option were set.</p>

<p style="margin-left:11%;"><b>list&minus;suffixes</b></p>

<p style="margin-left:22%;">This style is used by the
function that completes filenames. If it is true, and
completion is attempted on a string containing multiple
partially typed pathname components, all ambiguous
components will be shown. Otherwise, completion stops at the
first ambiguous component.</p>


<p style="margin-left:11%;"><b>list&minus;separator</b></p>

<p style="margin-left:22%;">The value of this style is used
in completion listing to separate the string to complete
from a description when possible (e.g. when completing
options). It defaults to &lsquo;<b>&minus;&minus;</b>&rsquo;
(two hyphens).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>local</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This is for use with functions that complete URLs for
which the corresponding files are available directly from
the file system. Its value should consist of three strings:
a hostname, the path to the default web pages for the
server, and the directory name used by a user placing web
pages within their home area.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; local toast \ <br>
/var/http/public/toast public_html</b></p>

<p style="margin-left:22%; margin-top: 1em">Completion
after &lsquo;<b>http://toast/stuff/</b>&rsquo; will look for
files in the directory <b>/var/http/public/toast/stuff</b>,
while completion after
&lsquo;<b>http://toast/~yousir/</b>&rsquo; will look for
files in the directory <b>~yousir/public_html</b>.</p>


<p style="margin-left:11%;"><b>mail&minus;directory</b></p>

<p style="margin-left:22%;">If set, zsh will assume that
mailbox files can be found in the directory specified. It
defaults to &lsquo;<b>~/Mail</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>match&minus;original</b></p>

<p style="margin-left:22%;">This is used by the
<b>_match</b> completer. If it is set to <b>only</b>,
<b>_match</b> will try to generate matches without inserting
a &lsquo;<b>*</b>&rsquo; at the cursor position. If set to
any other non&minus;empty value, it will first try to
generate matches without inserting the
&lsquo;<b>*</b>&rsquo; and if that yields no matches, it
will try again with the &lsquo;<b>*</b>&rsquo; inserted. If
it is unset or set to the empty string, matching will only
be performed with the &lsquo;<b>*</b>&rsquo; inserted.</p>

<p style="margin-left:11%;"><b>matcher</b></p>

<p style="margin-left:22%;">This style is tested separately
for each tag valid in the current context. Its value is
added to any match specifications given by the
<b>matcher&minus;list</b> style. It should be in the form
described in the section &lsquo;Completion Matching
Control&rsquo; in <i>zshcompwid</i>(1).</p>

<p style="margin-left:11%;"><b>matcher&minus;list</b></p>

<p style="margin-left:22%;">This style can be set to a list
of match specifications that are to be applied everywhere.
Match specifications are described in the section
&lsquo;Completion Matching Control&rsquo; in
<i>zshcompwid</i>(1). The completion system will try them
one after another for each completer selected. For example,
to try first simple completion and, if that generates no
matches, case&minus;insensitive completion:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; matcher&minus;list
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">By default each
specification replaces the previous one; however, if a
specification is prefixed with <b>+</b>, it is added to the
existing list. Hence it is possible to create increasingly
general specifications without repetition:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; matcher&minus;list
&rsquo;&rsquo; &rsquo;+m{a&minus;z}={A&minus;Z}&rsquo;
&rsquo;+m{A&minus;Z}={a&minus;z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to create match specifications valid for particular
completers by using the third field of the context. For
example, to use the completers <b>_complete</b> and
<b>_prefix</b> but only allow case&minus;insensitive
completion with <b>_complete</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete _prefix <br>
zstyle &rsquo;:completion:*:complete:*&rsquo;
matcher&minus;list \ <br>
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;</b></p>


<p style="margin-left:22%; margin-top: 1em">User&minus;defined
names, as explained for the <b>completer</b> style, are
available. This makes it possible to try the same completer
more than once with different match specifications each
time. For example, to try normal completion without a match
specification, then normal completion with
case&minus;insensitive matching, then correction, and
finally partial&minus;word completion:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete _correct
_complete:foo <br>
zstyle &rsquo;:completion:*:complete:*&rsquo;
matcher&minus;list \ <br>
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;
<br>
zstyle &rsquo;:completion:*:foo:*&rsquo; matcher&minus;list
\ <br>
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}
r:|[&minus;_./]=* r:|=*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">If the style is
unset in any context no match specification is applied. Note
also that some completers such as <b>_correct</b> and
<b>_approximate</b> do not use the match specifications at
all, though these completers will only ever be called once
even if the <b>matcher&minus;list</b> contains more than one
element.</p>

<p style="margin-left:22%; margin-top: 1em">Where multiple
specifications are useful, note that the <i>entire</i>
completion is done for each element of
<b>matcher&minus;list</b>, which can quickly reduce the
shell&rsquo;s performance. As a rough rule of thumb, one to
three strings will give acceptable performance. On the other
hand, putting multiple space&minus;separated values into the
same string does not have an appreciable impact on
performance.</p>

<p style="margin-left:22%; margin-top: 1em">If there is no
current matcher or it is empty, and the option
<b>NO_CASE_GLOB</b> is in effect, the matching for files is
performed case&minus;insensitively in any case. However, any
matcher must explicitly specify case&minus;insensitive
matching if that is required.</p>

<p style="margin-left:11%;"><b>max&minus;errors</b></p>

<p style="margin-left:22%;">This is used by the
<b>_approximate</b> and <b>_correct</b> completer functions
to determine the maximum number of errors to allow. The
completer will try to generate completions by first allowing
one error, then two errors, and so on, until either a match
or matches were found or the maximum number of errors given
by this style has been reached.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
for this style contains the string
&lsquo;<b>numeric</b>&rsquo;, the completer function will
take any numeric argument as the maximum number of errors
allowed. For example, with</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:approximate:::&rsquo; max&minus;errors
2 numeric</b></p>

<p style="margin-left:22%; margin-top: 1em">two errors are
allowed if no numeric argument is given, but with a numeric
argument of six (as in &lsquo;<b>ESC&minus;6
TAB</b>&rsquo;), up to six errors are accepted. Hence with a
value of &lsquo;<b>0 numeric</b>&rsquo;, no correcting
completion will be attempted unless a numeric argument is
given.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains the string &lsquo;<b>not&minus;numeric</b>&rsquo;,
the completer will <i>not</i> try to generate corrected
completions when given a numeric argument, so in this case
the number given should be greater than zero. For example,
&lsquo;<b>2 not&minus;numeric</b>&rsquo; specifies that
correcting completion with two errors will usually be
performed, but if a numeric argument is given, correcting
completion will not be performed.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>2 numeric</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>max&minus;matches&minus;width</b></p>

<p style="margin-left:22%;">This style is used to determine
the trade off between the width of the display used for
matches and the width used for their descriptions when the
<b>verbose</b> style is in effect. The value gives the
number of display columns to reserve for the matches. The
default is half the width of the screen.</p>

<p style="margin-left:22%; margin-top: 1em">This has the
most impact when several matches have the same description
and so will be grouped together. Increasing the style will
allow more matches to be grouped together; decreasing it
will allow more of the description to be visible.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>menu</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If this is true in the context of any of the tags
defined for the current completion menu completion will be
used. The value for a specific tag will take precedence over
that for the &lsquo;<b>default</b>&rsquo; tag.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If none of the
values found in this way is true but at least one is set to
&lsquo;<b>auto</b>&rsquo;, the shell behaves as if the
<b>AUTO_MENU</b> option is set.</p>

<p style="margin-left:22%; margin-top: 1em">If one of the
values is explicitly set to false, menu completion will be
explicitly turned off, overriding the <b>MENU_COMPLETE</b>
option and other settings.</p>

<p style="margin-left:22%; margin-top: 1em">In the form
&lsquo;<b>yes=</b><i>num</i>&rsquo;, where
&lsquo;<b>yes</b>&rsquo; may be any of the true values
(&lsquo;<b>yes</b>&rsquo;, &lsquo;<b>true</b>&rsquo;,
&lsquo;<b>on</b>&rsquo; and &lsquo;<b>1</b>&rsquo;), menu
completion will be turned on if there are at least
<i>num</i> matches. In the form
&lsquo;<b>yes=long</b>&rsquo;, menu completion will be
turned on if the list does not fit on the screen. This does
not activate menu completion if the widget normally only
lists completions, but menu completion can be activated in
that case with the value
&lsquo;<b>yes=long&minus;list</b>&rsquo; (Typically, the
value &lsquo;<b>select=long&minus;list</b>&rsquo; described
later is more useful as it provides control over
scrolling.)</p>

<p style="margin-left:22%; margin-top: 1em">Similarly, with
any of the &lsquo;false&rsquo; values (as in
&lsquo;<b>no=10</b>&rsquo;), menu completion will <i>not</i>
be used if there are <i>num</i> or more matches.</p>

<p style="margin-left:22%; margin-top: 1em">The value of
this widget also controls menu selection, as implemented by
the <b>zsh/complist</b> module. The following values may
appear either alongside or instead of the values above.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains the string &lsquo;<b>select</b>&rsquo;, menu
selection will be started unconditionally.</p>

<p style="margin-left:22%; margin-top: 1em">In the form
&lsquo;<b>select=</b><i>num</i>&rsquo;, menu selection will
only be started if there are at least <i>num</i> matches. If
the values for more than one tag provide a number, the
smallest number is taken.</p>

<p style="margin-left:22%; margin-top: 1em">Menu selection
can be turned off explicitly by defining a value containing
the string&lsquo;<b>no&minus;select</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to start menu selection only if the list of matches
does not fit on the screen by using the value
&lsquo;<b>select=long</b>&rsquo;. To start menu selection
even if the current widget only performs listing, use the
value &lsquo;<b>select=long&minus;list</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">To turn on menu
completion or menu selection when a there are a certain
number of matches <i>or</i> the list of matches does not fit
on the screen, both of &lsquo;<b>yes=</b>&rsquo; and
&lsquo;<b>select=</b>&rsquo; may be given twice, once with a
number and once with &lsquo;<b>long</b>&rsquo; or
&lsquo;<b>long&minus;list</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, it is
possible to activate two special modes of menu selection.
The word &lsquo;<b>interactive</b>&rsquo; in the value
causes interactive mode to be entered immediately when menu
selection is started; see the description of the
<b>zsh/complist</b> module in <i>zshmodules</i>(1) for a
description of interactive mode. Including the string
&lsquo;<b>search</b>&rsquo; does the same for incremental
search mode. To select backward incremental search, include
the string &lsquo;<b>search&minus;backward</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>muttrc</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">If set, gives the location of
the mutt configuration file. It defaults to
&lsquo;<b>~/.muttrc</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>numbers</b></p>

<p style="margin-left:22%;">This is used with the
<b>jobs</b> tag. If it is &lsquo;true&rsquo;, the shell will
complete job numbers instead of the shortest unambiguous
prefix of the job command text. If the value is a number,
job numbers will only be used if that many words from the
job descriptions are required to resolve ambiguities. For
example, if the value is &lsquo;<b>1</b>&rsquo;, strings
will only be used if all jobs differ in the first word on
their command lines.</p>

<p style="margin-left:11%;"><b>old&minus;list</b></p>

<p style="margin-left:22%;">This is used by the
<b>_oldlist</b> completer. If it is set to
&lsquo;<b>always</b>&rsquo;, then standard widgets which
perform listing will retain the current list of matches,
however they were generated; this can be turned off
explicitly with the value &lsquo;<b>never</b>&rsquo;, giving
the behaviour without the <b>_oldlist</b> completer. If the
style is unset, or any other value, then the existing list
of completions is displayed if it is not already; otherwise,
the standard completion list is generated; this is the
default behaviour of <b>_oldlist</b>. However, if there is
an old list and this style contains the name of the
completer function that generated the list, then the old
list will be used even if it was generated by a widget which
does not do listing.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you type <b>^Xc</b> to use the <b>_correct_word</b>
widget, which generates a list of corrections for the word
under the cursor. Usually, typing <b>^D</b> would generate a
standard list of completions for the word on the command
line, and show that. With <b>_oldlist</b>, it will instead
show the list of corrections already generated.</p>

<p style="margin-left:22%; margin-top: 1em">As another
example consider the <b>_match</b> completer: with the
<b>insert&minus;unambiguous</b> style set to
&lsquo;true&rsquo; it inserts only a common prefix string,
if there is any. However, this may remove parts of the
original pattern, so that further completion could produce
more matches than on the first attempt. By using the
<b>_oldlist</b> completer and setting this style to
<b>_match</b>, the list of matches generated on the first
attempt will be used again.</p>

<p style="margin-left:11%;"><b>old&minus;matches</b></p>

<p style="margin-left:22%;">This is used by the
<b>_all_matches</b> completer to decide if an old list of
matches should be used if one exists. This is selected by
one of the &lsquo;true&rsquo; values or by the string
&lsquo;<b>only</b>&rsquo;. If the value is
&lsquo;<b>only</b>&rsquo;, <b>_all_matches</b> will only use
an old list and won&rsquo;t have any effect on the list of
matches currently being generated.</p>

<p style="margin-left:22%; margin-top: 1em">If this style
is set it is generally unwise to call the
<b>_all_matches</b> completer unconditionally. One possible
use is for either this style or the <b>completer</b> style
to be defined with the <b>&minus;e</b> option to
<b>zstyle</b> to make the style conditional.</p>

<p style="margin-left:11%;"><b>old&minus;menu</b></p>

<p style="margin-left:22%;">This is used by the
<b>_oldlist</b> completer. It controls how menu completion
behaves when a completion has already been inserted and the
user types a standard completion key such as <b>TAB</b>. The
default behaviour of <b>_oldlist</b> is that menu completion
always continues with the existing list of completions. If
this style is set to &lsquo;false&rsquo;, however, a new
completion is started if the old list was generated by a
different completion command; this is the behaviour without
the <b>_oldlist</b> completer.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you type <b>^Xc</b> to generate a list of
corrections, and menu completion is started in one of the
usual ways. Usually, or with this style set to <b>false</b>,
typing <b>TAB</b> at this point would start trying to
complete the line as it now appears. With <b>_oldlist</b>,
it instead continues to cycle through the list of
corrections.</p>

<p style="margin-left:11%;"><b>original</b></p>

<p style="margin-left:22%;">This is used by the
<b>_approximate</b> and <b>_correct</b> completers to decide
if the original string should be added as a possible
completion. Normally, this is done only if there are at
least two possible corrections, but if this style is set to
&lsquo;true&rsquo;, it is always added. Note that the style
will be examined with the completer field in the context
name set to <b>correct&minus;</b><i>num</i> or
<b>approximate&minus;</b><i>num</i>, where <i>num</i> is the
number of errors that were accepted.</p>

<p style="margin-left:11%;"><b>packageset</b></p>

<p style="margin-left:22%;">This style is used when
completing arguments of the Debian &lsquo;<b>dpkg</b>&rsquo;
program. It contains an override for the default package set
for a given context. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:complete:dpkg:option&minus;&minus;status&minus;1:*&rsquo;
\ <br>
packageset avail</b></p>

<p style="margin-left:22%; margin-top: 1em">causes
available packages, rather than only installed packages, to
be completed for &lsquo;<b>dpkg
&minus;&minus;status</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>path</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The function that completes color names uses this style
with the <b>colors</b> tag. The value should be the pathname
of a file containing color names in the format of an X11
<b>rgb.txt</b> file. If the style is not set but this file
is found in one of various standard locations it will be
used as the default.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>path&minus;completion</b></p>

<p style="margin-left:22%;">This is used by filename
completion. By default, filename completion examines all
components of a path to see if there are completions of that
component. For example, <b>/u/b/z</b> can be completed to
<b>/usr/bin/zsh</b>. Explicitly setting this style to
<b>false</b> inhibits this behaviour for path components up
to the <b>/</b> before the cursor; this overrides the
setting of <b>accept&minus;exact&minus;dirs</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Even with the
style set to <b>false</b>, it is still possible to complete
multiple paths by setting the option <b>COMPLETE_IN_WORD</b>
and moving the cursor back to the first component in the
path to be completed. For example, <b>/u/b/z</b> can be
completed to <b>/usr/bin/zsh</b> if the cursor is after the
<b>/u</b>.</p>


<p style="margin-left:11%;"><b>pine&minus;directory</b></p>

<p style="margin-left:22%;">If set, specifies the directory
containing PINE mailbox files. There is no default, since
recursively searching this directory is inconvenient for
anyone who doesn&rsquo;t use PINE.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ports</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>A list of Internet service names (network ports) to
complete. If this is not set, service names are taken from
the file &lsquo;<b>/etc/services</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>prefix&minus;hidden</b></p>

<p style="margin-left:22%;">This is used for certain
completions which share a common prefix, for example command
options beginning with dashes. If it is &lsquo;true&rsquo;,
the prefix will not be shown in the list of matches.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>prefix&minus;needed</b></p>

<p style="margin-left:22%;">This style is also relevant for
matches with a common prefix. If it is set to
&lsquo;true&rsquo; this common prefix must be typed by the
user to generate the matches.</p>

<p style="margin-left:22%; margin-top: 1em">The style is
applicable to the <b>options</b>, <b>signals</b>,
<b>jobs</b>, <b>functions</b>, and <b>parameters</b>
completion tags.</p>

<p style="margin-left:22%; margin-top: 1em">For command
options, this means that the initial
&lsquo;<b>&minus;</b>&rsquo;, &lsquo;<b>+</b>&rsquo;, or
&lsquo;<b>&minus;&minus;</b>&rsquo; must be typed explicitly
before option names will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For signals, an
initial &lsquo;<b>&minus;</b>&rsquo; is required before
signal names will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For jobs, an
initial &lsquo;<b>%</b>&rsquo; is required before job names
will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For function
and parameter names, an initial &lsquo;<b>_</b>&rsquo; or
&lsquo;<b>.</b>&rsquo; is required before function or
parameter names starting with those characters will be
completed.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;false&rsquo; for
<b>function</b> and <b>parameter</b> completions, and
&lsquo;true&rsquo; otherwise.</p>


<p style="margin-left:11%;"><b>preserve&minus;prefix</b></p>

<p style="margin-left:22%;">This style is used when
completing path names. Its value should be a pattern
matching an initial prefix of the word to complete that
should be left unchanged under all circumstances. For
example, on some Unices an initial &lsquo;<b>//</b>&rsquo;
(double slash) has a special meaning; setting this style to
the string &lsquo;<b>//</b>&rsquo; will preserve it. As
another example, setting this style to
&lsquo;<b>?:/</b>&rsquo; under Cygwin would allow completion
after &lsquo;<b>a:/...</b>&rsquo; and so on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>range</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This is used by the <b>_history</b> completer and the
<b>_history_complete_word</b> bindable command to decide
which words should be completed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If it is a
singe number, only the last <i>N</i> words from the history
will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">If it is a
range of the form
&lsquo;<i>max</i><b>:</b><i>slice</i>&rsquo;, the last
<i>slice</i> words will be completed; then if that yields no
matches, the <i>slice</i> words before those will be tried
and so on. This process stops either when at least one match
was been found, or <i>max</i> words have been tried.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
to complete all words from the history at once.</p>


<p style="margin-left:11%;"><b>recursive&minus;files</b></p>

<p style="margin-left:22%;">If this style is set, its value
is an array of patterns to be tested against
&lsquo;<b>$PWD/</b>&rsquo;: note the trailing slash, which
allows directories in the pattern to be delimited
unambiguously by including slashes on both sides. If an
ordinary file completion fails and the word on the command
line does not yet have a directory part to its name, the
style is retrieved using the same tag as for the completion
just attempted, then the elements tested against
<b>$PWD/</b> in turn. If one matches, then the shell
reattempts completion by prepending the word on the command
line with each directory in the expansion of <b>**/*(/)</b>
in turn. Typically the elements of the style will be set to
restrict the number of directories beneath the current one
to a manageable number, for example
&lsquo;<b>*/.git/*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; recursive&minus;files
&rsquo;*/zsh/*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">If the current
directory is <b>/home/pws/zsh/Src</b>, then
<b>zle_tr</b><i>TAB</i> can be completed to
<b>Zle/zle_tricky.c</b>.</p>

<p style="margin-left:11%;"><b>regular</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand_alias</b> completer and bindable command. If set
to &lsquo;<b>true</b>&rsquo; (the default), regular aliases
will be expanded but only in command position. If it is set
to &lsquo;<b>false</b>&rsquo;, regular aliases will never be
expanded. If it is set to &lsquo;<b>always</b>&rsquo;,
regular aliases will be expanded even if not in command
position.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>rehash</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set when completing external commands, the
internal list (hash) of commands will be updated for each
search by issuing the <b>rehash</b> command. There is a
speed penalty for this which is only likely to be noticeable
when directories in the path have slow file access.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>remote&minus;access</b></p>

<p style="margin-left:22%;">If set to <b>false</b>, certain
commands will be prevented from making Internet connections
to retrieve remote information. This includes the completion
for the <b>CVS</b> command.</p>

<p style="margin-left:22%; margin-top: 1em">It is not
always possible to know if connections are in fact to a
remote site, so some may be prevented unnecessarily.</p>


<p style="margin-left:11%;"><b>remove&minus;all&minus;dups</b></p>

<p style="margin-left:22%;">The
<b>_history_complete_word</b> bindable command and the
<b>_history</b> completer use this to decide if all
duplicate matches should be removed, rather than just
consecutive duplicates.</p>

<p style="margin-left:11%;"><b>select&minus;prompt</b></p>

<p style="margin-left:22%;">If this is set for the
<b>default</b> tag, its value will be displayed during menu
selection (see the <b>menu</b> style above) when the
completion list does not fit on the screen as a whole. The
same escapes as for the <b>list&minus;prompt</b> style are
understood, except that the numbers refer to the match or
line the mark is on. A default prompt is used when the value
is the empty string.</p>

<p style="margin-left:11%;"><b>select&minus;scroll</b></p>

<p style="margin-left:22%;">This style is tested for the
<b>default</b> tag and determines how a completion list is
scrolled during a menu selection (see the <b>menu</b> style
above) when the completion list does not fit on the screen
as a whole. If the value is &lsquo;<b>0</b>&rsquo; (zero),
the list is scrolled by half&minus;screenfuls; if it is a
positive integer, the list is scrolled by the given number
of lines; if it is a negative number, the list is scrolled
by a screenful minus the absolute value of the given number
of lines. The default is to scroll by single lines.</p>


<p style="margin-left:11%;"><b>separate&minus;sections</b></p>

<p style="margin-left:22%;">This style is used with the
<b>manuals</b> tag when completing names of manual pages. If
it is &lsquo;true&rsquo;, entries for different sections are
added separately using tag names of the form
&lsquo;<b>manual.</b><i>X</i>&rsquo;, where <i>X</i> is the
section number. When the <b>group&minus;name</b> style is
also in effect, pages from different sections will appear
separately. This style is also used similarly with the
<b>words</b> style when completing words for the dict
command. It allows words from different dictionary databases
to be added separately. The default for this style is
&lsquo;false&rsquo;.</p>


<p style="margin-left:11%;"><b>show&minus;completer</b></p>

<p style="margin-left:22%;">Tested whenever a new completer
is tried. If it is true, the completion system outputs a
progress message in the listing area showing what completer
is being tried. The message will be overwritten by any
output when completions are found and is removed after
completion is finished.</p>


<p style="margin-left:11%;"><b>single&minus;ignored</b></p>

<p style="margin-left:22%;">This is used by the
<b>_ignored</b> completer when there is only one match. If
its value is &lsquo;<b>show</b>&rsquo;, the single match
will be displayed but not inserted. If the value is
&lsquo;<b>menu</b>&rsquo;, then the single match and the
original string are both added as matches and menu
completion is started, making it easy to select either of
them.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>sort</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Many completion widgets call <b>_description</b> at some
point which decides whether the matches are added sorted or
unsorted (often indirectly via <b>_wanted</b> or
<b>_requested</b>). This style can be set explicitly to one
of the usual true or false values as an override. If it is
not set for the context, the standard behaviour of the
calling widget is used.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The style is
tested first against the full context including the tag, and
if that fails to produce a value against the context without
the tag.</p>

<p style="margin-left:22%; margin-top: 1em">If the calling
widget explicitly requests unsorted matches, this is usually
honoured. However, the default (unsorted) behaviour of
completion for the command history may be overridden by
setting the style to <b>true</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In the
<b>_expand</b> completer, if it is set to
&lsquo;true&rsquo;, the expansions generated will always be
sorted. If it is set to &lsquo;<b>menu</b>&rsquo;, then the
expansions are only sorted when they are offered as single
strings but not in the string containing all possible
expansions.</p>

<p style="margin-left:11%;"><b>special&minus;dirs</b></p>

<p style="margin-left:22%;">Normally, the completion code
will not produce the directory names &lsquo;<b>.</b>&rsquo;
and &lsquo;<b>..</b>&rsquo; as possible completions. If this
style is set to &lsquo;true&rsquo;, it will add both
&lsquo;<b>.</b>&rsquo; and &lsquo;<b>..</b>&rsquo; as
possible completions; if it is set to
&lsquo;<b>..</b>&rsquo;, only &lsquo;<b>..</b>&rsquo; will
be added.</p>

<p style="margin-left:22%; margin-top: 1em">The following
example sets <b>special&minus;dirs</b> to
&lsquo;<b>..</b>&rsquo; when the current prefix is empty, is
a single &lsquo;<b>.</b>&rsquo;, or consists only of a path
beginning with &lsquo;<b>../</b>&rsquo;. Otherwise the value
is &lsquo;false&rsquo;.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; special&minus;dirs \
<br>
&rsquo;[[ $PREFIX = (../)#(|.|..) ]] &amp;&amp;
reply=(..)&rsquo;</b></p>


<p style="margin-left:11%;"><b>squeeze&minus;slashes</b></p>

<p style="margin-left:22%;">If set to &lsquo;true&rsquo;,
sequences of slashes in filename paths (for example in
&lsquo;<b>foo//bar</b>&rsquo;) will be treated as a single
slash. This is the usual behaviour of UNIX paths. However,
by default the file completion function behaves as if there
were a &lsquo;<b>*</b>&rsquo; between the slashes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>stop</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If set to &lsquo;true&rsquo;, the
<b>_history_complete_word</b> bindable command will stop
once when reaching the beginning or end of the history.
Invoking <b>_history_complete_word</b> will then wrap around
to the opposite end of the history. If this style is set to
&lsquo;false&rsquo; (the default),
<b>_history_complete_word</b> will loop immediately as in a
menu completion.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>strip&minus;comments</b></p>

<p style="margin-left:22%;">If set to &lsquo;true&rsquo;,
this style causes non&minus;essential comment text to be
removed from completion matches. Currently it is only used
when completing e&minus;mail addresses where it removes any
display name from the addresses, cutting them down to plain
<i>user@host</i> form.</p>


<p style="margin-left:11%;"><b>subst&minus;globs&minus;only</b></p>

<p style="margin-left:22%;">This is used by the
<b>_expand</b> completer. If it is set to
&lsquo;true&rsquo;, the expansion will only be used if it
resulted from globbing; hence, if expansions resulted from
the use of the <b>substitute</b> style described below, but
these were not further changed by globbing, the expansions
will be rejected.</p>

<p style="margin-left:22%; margin-top: 1em">The default for
this style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>substitute</b></p>

<p style="margin-left:22%;">This boolean style controls
whether the <b>_expand</b> completer will first try to
expand all substitutions in the string (such as
&lsquo;<b>$(...)</b>&rsquo; and
&lsquo;<b>${...}</b>&rsquo;).</p>

<p style="margin-left:22%; margin-top: 1em">The default is
&lsquo;true&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>suffix</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is used by the <b>_expand</b> completer if the word
starts with a tilde or contains a parameter expansion. If it
is set to &lsquo;true&rsquo;, the word will only be expanded
if it doesn&rsquo;t have a suffix, i.e. if it is something
like &lsquo;<b>~foo</b>&rsquo; or &lsquo;<b>$foo</b>&rsquo;
rather than &lsquo;<b>~foo/</b>&rsquo; or
&lsquo;<b>$foo/bar</b>&rsquo;, unless that suffix itself
contains characters eligible for expansion. The default for
this style is &lsquo;true&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>tag&minus;order</b></p>

<p style="margin-left:22%;">This provides a mechanism for
sorting how the tags available in a particular context will
be used.</p>

<p style="margin-left:22%; margin-top: 1em">The values for
the style are sets of space&minus;separated lists of tags.
The tags in each value will be tried at the same time; if no
match is found, the next value is used. (See the
<b>file&minus;patterns</b> style for an exception to this
behavior.)</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:complete:&minus;command&minus;:*&rsquo;
tag&minus;order \ <br>
&rsquo;commands functions&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
completion in command position first offers external
commands and shell functions. Remaining tags will be tried
if no completions are found.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
tag names, each string in the value may take one of the
following forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&minus;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>If any value consists of only a hyphen, then <i>only</i>
the tags specified in the other values are generated.
Normally all tags not explicitly selected are tried last if
the specified tags fail to generate any matches. This means
that a single value consisting only of a single hyphen turns
off completion.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>!</b> <i>tags</i>...</p>

<p style="margin-left:32%;">A string starting with an
exclamation mark specifies names of tags that are <i>not</i>
to be used. The effect is the same as if all other possible
tags for the context had been listed.</p>

<p style="margin-left:22%;"><i>tag</i><b>:</b><i>label</i>
...</p>

<p style="margin-left:32%;">Here, <i>tag</i> is one of the
standard tags and <i>label</i> is an arbitrary name. Matches
are generated as normal but the name <i>label</i> is used in
contexts instead of <i>tag</i>. This is not useful in words
starting with <b>!</b>.</p>

<p style="margin-left:32%; margin-top: 1em">If the
<i>label</i> starts with a hyphen, the <i>tag</i> is
prepended to the <i>label</i> to form the name used for
lookup. This can be used to make the completion system try a
certain tag more than once, supplying different style
settings for each attempt; see below for an example.</p>


<p style="margin-left:22%;"><i>tag</i><b>:</b><i>label</i><b>:</b><i>description</i></p>

<p style="margin-left:32%;">As before, but
<b>description</b> will replace the &lsquo;<b>%d</b>&rsquo;
in the value of the <b>format</b> style instead of the
default description supplied by the completion function.
Spaces in the description must be quoted with a backslash. A
&lsquo;<b>%d</b>&rsquo; appearing in <i>description</i> is
replaced with the description given by the completion
function.</p>

<p style="margin-left:22%; margin-top: 1em">In any of the
forms above the tag may be a pattern or several patterns in
the form
&lsquo;<b>{</b><i>pat1</i><b>,</b><i>pat2...</i><b>}</b>&rsquo;.
In this case all matching tags will be used except for any
given explicitly in the same string.</p>

<p style="margin-left:22%; margin-top: 1em">One use of
these features is to try one tag more than once, setting
other styles differently on each attempt, but still to use
all the other tags without having to repeat them all. For
example, to make completion of function names in command
position ignore all the completion functions starting with
an underscore the first time completion is tried:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*&rsquo;
tag&minus;order \ <br>
&rsquo;functions:&minus;non&minus;comp *&rsquo; functions
<br>
zstyle
&rsquo;:completion:*:functions&minus;non&minus;comp&rsquo;
ignored&minus;patterns &rsquo;_*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">On the first
attempt, all tags will be offered but the <b>functions</b>
tag will be replaced by
<b>functions&minus;non&minus;comp</b>. The
<b>ignored&minus;patterns</b> style is set for this tag to
exclude functions starting with an underscore. If there are
no matches, the second value of the <b>tag&minus;order</b>
style is used which completes functions using the default
tag, this time presumably including all function names.</p>

<p style="margin-left:22%; margin-top: 1em">The matches for
one tag can be split into different groups. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; tag&minus;order \ <br>
&rsquo;options:&minus;long:long\ options <br>
options:&minus;short:short\ options <br>
options:&minus;single&minus;letter:single\ letter\
options&rsquo;</b></p>

<p style="margin-left:32%; margin-top: 1em">zstyle
&rsquo;:completion:*:options&minus;long&rsquo;
ignored&minus;patterns
&rsquo;[&minus;+](|&minus;|[^&minus;]*)&rsquo; <br>
zstyle &rsquo;:completion:*:options&minus;short&rsquo;
ignored&minus;patterns &rsquo;&minus;&minus;*&rsquo;
&rsquo;[&minus;+]?&rsquo; <br>
zstyle
&rsquo;:completion:*:options&minus;single&minus;letter&rsquo;
ignored&minus;patterns &rsquo;???*&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>group&minus;names</b> style set, options beginning with
&lsquo;<b>&minus;&minus;</b>&rsquo;, options beginning with
a single &lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; but containing multiple characters,
and single&minus;letter options will be displayed in
separate groups with different descriptions.</p>

<p style="margin-left:22%; margin-top: 1em">Another use of
patterns is to try multiple match specifications one after
another. The <b>matcher&minus;list</b> style offers
something similar, but it is tested very early in the
completion system and hence can&rsquo;t be set for single
commands nor for more specific contexts. Here is how to try
normal completion without any match specification and, if
that generates no matches, try again with
case&minus;insensitive matching, restricting the effect to
arguments of the command <b>foo</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:foo:*&rsquo; tag&minus;order
&rsquo;*&rsquo; &rsquo;*:&minus;case&rsquo; <br>
zstyle &rsquo;:completion:*&minus;case&rsquo; matcher
&rsquo;m:{a&minus;z}={A&minus;Z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">First, all the
tags offered when completing after <b>foo</b> are tried
using the normal tag name. If that generates no matches, the
second value of <b>tag&minus;order</b> is used, which tries
all tags again except that this time each has
<b>&minus;case</b> appended to its name for lookup of
styles. Hence this time the value for the <b>matcher</b>
style from the second call to <b>zstyle</b> in the example
is used to make completion case&minus;insensitive.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use the <b>&minus;e</b> option of the <b>zstyle</b>
builtin command to specify conditions for the use of
particular tags. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;*:&minus;command&minus;:*&rsquo;
tag&minus;order &rsquo; <br>
if [[ &minus;n $PREFIX$SUFFIX ]]; then <br>
reply=( ) <br>
else <br>
reply=( &minus; ) <br>
fi&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">Completion in
command position will be attempted only if the string typed
so far is not empty. This is tested using the <b>PREFIX</b>
special parameter; see zshcompwid for a description of
parameters which are special inside completion widgets.
Setting <b>reply</b> to an empty array provides the default
behaviour of trying all tags at once; setting it to an array
containing only a hyphen disables the use of all tags and
hence of all completions.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<b>tag&minus;order</b> style has been defined for a context,
the strings &lsquo;<b>(|*&minus;)argument&minus;*
(|*&minus;)option&minus;* values</b>&rsquo; and
&lsquo;<b>options</b>&rsquo; plus all tags offered by the
completion function will be used to provide a sensible
default behavior that causes arguments (whether normal
command arguments or arguments of options) to be completed
before option names for most commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>urls</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This is used together with the <b>urls</b> tag by
functions completing URLs.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the value
consists of more than one string, or if the only string does
not name a file or directory, the strings are used as the
URLs to complete.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains only one string which is the name of a normal file
the URLs are taken from that file (where the URLs may be
separated by white space or newlines).</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if the
only string in the value names a directory, the directory
hierarchy rooted at this directory gives the completions.
The top level directory should be the file access method,
such as &lsquo;<b>http</b>&rsquo;, &lsquo;<b>ftp</b>&rsquo;,
&lsquo;<b>bookmark</b>&rsquo; and so on. In many cases the
next level of directories will be a filename. The directory
hierarchy can descend as deep as necessary.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; urls ~/.urls <br>
mkdir &minus;p ~/.urls/ftp/ftp.zsh.org/pub</b></p>

<p style="margin-left:22%; margin-top: 1em">allows
completion of all the components of the URL
<b>ftp://ftp.zsh.org/pub</b> after suitable commands such as
&lsquo;<b>netscape</b>&rsquo; or &lsquo;<b>lynx</b>&rsquo;.
Note, however, that access methods and files are completed
separately, so if the <b>hosts</b> style is set hosts can be
completed without reference to the <b>urls</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">See the
description in the function <b>_urls</b> itself for more
information (e.g. &lsquo;<b>more
$^fpath/_urls(N)</b>&rsquo;).</p>

<p style="margin-left:11%;"><b>use&minus;cache</b></p>

<p style="margin-left:22%;">If this is set, the completion
caching layer is activated for any completions which use it
(via the <b>_store_cache</b>, <b>_retrieve_cache</b>, and
<b>_cache_invalid</b> functions). The directory containing
the cache files can be changed with the
<b>cache&minus;path</b> style.</p>

<p style="margin-left:11%;"><b>use&minus;compctl</b></p>

<p style="margin-left:22%;">If this style is set to a
string <i>not</i> equal to <b>false</b>, <b>0</b>,
<b>no</b>, and <b>off</b>, the completion system may use any
completion specifications defined with the <b>compctl</b>
builtin command. If the style is unset, this is done only if
the <b>zsh/compctl</b> module is loaded. The string may also
contain the substring &lsquo;<b>first</b>&rsquo; to use
completions defined with &lsquo;<b>compctl
&minus;T</b>&rsquo;, and the substring
&lsquo;<b>default</b>&rsquo; to use the completion defined
with &lsquo;<b>compctl &minus;D</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
is only intended to smooth the transition from
<b>compctl</b> to the new completion system and may
disappear in the future.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
the definitions from <b>compctl</b> will only be used if
there is no specific completion function for the command in
question. For example, if there is a function <b>_foo</b> to
complete arguments to the command <b>foo</b>, <b>compctl</b>
will never be invoked for <b>foo</b>. However, the
<b>compctl</b> version will be tried if <b>foo</b> only uses
default completion.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>use&minus;ip</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>By default, the function <b>_hosts</b> that completes
host names strips IP addresses from entries read from host
databases such as NIS and ssh files. If this style is true,
the corresponding IP addresses can be completed as well.
This style is not use in any context where the <b>hosts</b>
style is set; note also it must be set before the cache of
host names is generated (typically the first completion
attempt).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>users</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This may be set to a list of usernames to be completed.
If it is not set all usernames will be completed. Note that
if it is set only that list of users will be completed; this
is because on some systems querying all users can take a
prohibitive amount of time.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>users&minus;hosts</b></p>

<p style="margin-left:22%;">The values of this style should
be of the form &lsquo;<i>user</i><b>@</b><i>host</i>&rsquo;
or &lsquo;<i>user</i><b>:</b><i>host</i>&rsquo;. It is used
for commands that need pairs of user&minus; and hostnames.
These commands will complete usernames from this style
(only), and will restrict subsequent hostname completion to
hosts paired with that user in one of the values of the
style.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to group values for sets of commands which allow a remote
login, such as <b>rlogin</b> and <b>ssh</b>, by using the
<b>my&minus;accounts</b> tag. Similarly, values for sets of
commands which usually refer to the accounts of other
people, such as <b>talk</b> and <b>finger</b>, can be
grouped by using the <b>other&minus;accounts</b> tag. More
ambivalent commands may use the <b>accounts</b> tag.</p>


<p style="margin-left:11%;"><b>users&minus;hosts&minus;ports</b></p>

<p style="margin-left:22%;">Like <b>users&minus;hosts</b>
but used for commands like <b>telnet</b> and containing
strings of the form
&lsquo;<i>user</i><b>@</b><i>host</i><b>:</b><i>port</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>verbose</b></p>

<p style="margin-left:22%;">If set, as it is by default,
the completion listing is more verbose. In particular many
commands show descriptions for options if this style is
&lsquo;true&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>word</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This is used by the <b>_list</b> completer, which
prevents the insertion of completions until a second
completion attempt when the line has not changed. The normal
way of finding out if the line has changed is to compare its
entire contents between the two occasions. If this style is
true, the comparison is instead performed only on the
current word. Hence if completion is performed on another
word with the same contents, completion will not be
delayed.</p> </td></tr>
</table>

<h2>CONTROL FUNCTIONS
<a name="CONTROL FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
initialization script <b>compinit</b> redefines all the
widgets which perform completion to call the supplied widget
function <b>_main_complete</b>. This function acts as a
wrapper calling the so&minus;called &lsquo;completer&rsquo;
functions that generate matches. If <b>_main_complete</b> is
called with arguments, these are taken as the names of
completer functions to be called in the order given. If no
arguments are given, the set of functions to try is taken
from the <b>completer</b> style. For example, to use normal
completion and correction if that doesn&rsquo;t generate any
matches:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_correct</b></p>

<p style="margin-left:11%; margin-top: 1em">after calling
<b>compinit</b>. The default value for this style is
&lsquo;<b>_complete _ignored</b>&rsquo;, i.e. normally only
ordinary completion is tried, first with the effect of the
<b>ignored&minus;patterns</b> style and then without it. The
<b>_main_complete</b> function uses the return status of the
completer functions to decide if other completers should be
called. If the return status is zero, no other completers
are tried and the <b>_main_complete</b> function
returns.</p>

<p style="margin-left:11%; margin-top: 1em">If the first
argument to <b>_main_complete</b> is a single hyphen, the
arguments will not be taken as names of completers. Instead,
the second argument gives a name to use in the
<i>completer</i> field of the context and the other
arguments give a command name and arguments to call to
generate the matches.</p>

<p style="margin-left:11%; margin-top: 1em">The following
completer functions are contained in the distribution,
although users may write their own. Note that in contexts
the leading underscore is stripped, for example basic
completion is performed in the context
&lsquo;<b>:completion::complete:</b><i>...</i>&rsquo;.
<b><br>
_all_matches</b></p>

<p style="margin-left:22%;">This completer can be used to
add a string consisting of all other matches. As it
influences later completers it must appear as the first
completer in the list. The list of all matches is affected
by the <b>avoid&minus;completer</b> and
<b>old&minus;matches</b> styles described above.</p>

<p style="margin-left:22%; margin-top: 1em">It may be
useful to use the <b>_generic</b> function described below
to bind <b>_all_matches</b> to its own keystroke, for
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;C
all&minus;matches complete&minus;word _generic <br>
bindkey &rsquo;^Xa&rsquo; all&minus;matches <br>
zstyle &rsquo;:completion:all&minus;matches:*&rsquo;
old&minus;matches only <br>
zstyle &rsquo;:completion:all&minus;matches::::&rsquo;
completer _all_matches</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that this
does not generate completions by itself: first use any of
the standard ways of generating a list of completions, then
use <b>^Xa</b> to show all matches. It is possible instead
to add a standard completer to the list and request that the
list of all matches should be directly inserted:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:all&minus;matches::::&rsquo; completer
_all_matches _complete <br>
zstyle &rsquo;:completion:all&minus;matches:*&rsquo; insert
true</b></p>

<p style="margin-left:22%; margin-top: 1em">In this case
the <b>old&minus;matches</b> style should not be set.</p>

<p style="margin-left:11%;"><b>_approximate</b></p>

<p style="margin-left:22%;">This is similar to the basic
<b>_complete</b> completer but allows the completions to
undergo corrections. The maximum number of errors can be
specified by the <b>max&minus;errors</b> style; see the
description of approximate matching in <i>zshexpn</i>(1) for
how errors are counted. Normally this completer will only be
tried after the normal <b>_complete</b> completer:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_approximate</b></p>

<p style="margin-left:22%; margin-top: 1em">This will give
correcting completion if and only if normal completion
yields no possible completions. When corrected completions
are found, the completer will normally start menu completion
allowing you to cycle through these strings.</p>

<p style="margin-left:22%; margin-top: 1em">This completer
uses the tags <b>corrections</b> and <b>original</b> when
generating the possible corrections and the original string.
The <b>format</b> style for the former may contain the
additional sequences &lsquo;<b>%e</b>&rsquo; and
&lsquo;<b>%o</b>&rsquo; which will be replaced by the number
of errors accepted to generate the corrections and the
original string, respectively.</p>

<p style="margin-left:22%; margin-top: 1em">The completer
progressively increases the number of errors allowed up to
the limit by the <b>max&minus;errors</b> style, hence if a
completion is found with one error, no completions with two
errors will be shown, and so on. It modifies the completer
name in the context to indicate the number of errors being
tried: on the first try the completer field contains
&lsquo;<b>approximate&minus;1</b>&rsquo;, on the second try
&lsquo;<b>approximate&minus;2</b>&rsquo;, and so on.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>_approximate</b> is called from another function, the
number of errors to accept may be passed with the
<b>&minus;a</b> option. The argument is in the same format
as the <b>max&minus;errors</b> style, all in one string.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
completer (and the <b>_correct</b> completer mentioned
below) can be quite expensive to call, especially when a
large number of errors are allowed. One way to avoid this is
to set up the <b>completer</b> style using the
<b>&minus;e</b> option to zstyle so that some completers are
only used when completion is attempted a second time on the
same string, e.g.:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; completer &rsquo; <br>
if [[ $_last_try != &quot;$HISTNO$BUFFER$CURSOR&quot; ]];
then <br>
_last_try=&quot;$HISTNO$BUFFER$CURSOR&quot; <br>
reply=(_complete _match _prefix) <br>
else <br>
reply=(_ignored _correct _approximate) <br>
fi&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This uses the
<b>HISTNO</b> parameter and the <b>BUFFER</b> and
<b>CURSOR</b> special parameters that are available inside
zle and completion widgets to find out if the command line
hasn&rsquo;t changed since the last time completion was
tried. Only then are the <b>_ignored</b>, <b>_correct</b>
and <b>_approximate</b> completers called.</p>

<p style="margin-left:11%;"><b>_complete</b></p>

<p style="margin-left:22%;">This completer generates all
possible completions in a context&minus;sensitive manner,
i.e. using the settings defined with the <b>compdef</b>
function explained above and the current settings of all
special parameters. This gives the normal completion
behaviour.</p>

<p style="margin-left:22%; margin-top: 1em">To complete
arguments of commands, <b>_complete</b> uses the utility
function <b>_normal</b>, which is in turn responsible for
finding the particular function; it is described below.
Various contexts of the form
<b>&minus;</b><i>context</i><b>&minus;</b> are handled
specifically. These are all mentioned above as possible
arguments to the <b>#compdef</b> tag.</p>

<p style="margin-left:22%; margin-top: 1em">Before trying
to find a function for a specific context, <b>_complete</b>
checks if the parameter &lsquo;<b>compcontext</b>&rsquo; is
set. Setting &lsquo;<b>compcontext</b>&rsquo; allows the
usual completion dispatching to be overridden which is
useful in places such as a function that uses <b>vared</b>
for input. If it is set to an array, the elements are taken
to be the possible matches which will be completed using the
tag &lsquo;<b>values</b>&rsquo; and the description
&lsquo;<b>value</b>&rsquo;. If it is set to an associative
array, the keys are used as the possible completions and the
values (if non&minus;empty) are used as descriptions for the
matches. If &lsquo;<b>compcontext</b>&rsquo; is set to a
string containing colons, it should be of the form
&lsquo;<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>&rsquo;.
In this case the <i>tag</i> and <i>descr</i> give the tag
and description to use and the <i>action</i> indicates what
should be completed in one of the forms accepted by the
<b>_arguments</b> utility function described below.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if
&lsquo;<b>compcontext</b>&rsquo; is set to a string without
colons, the value is taken as the name of the context to use
and the function defined for that context will be called.
For this purpose, there is a special context named
<b>&minus;command&minus;line&minus;</b> that completes whole
command lines (commands and their arguments). This is not
used by the completion system itself but is nonetheless
handled when explicitly called.</p>

<p style="margin-left:11%;"><b>_correct</b></p>

<p style="margin-left:22%;">Generate corrections, but not
completions, for the current word; this is similar to
<b>_approximate</b> but will not allow any number of extra
characters at the cursor as that completer does. The effect
is similar to spell&minus;checking. It is based on
<b>_approximate</b>, but the completer field in the context
name is <b>correct</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
with:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:::::&rsquo; completer _complete _correct
_approximate <br>
zstyle &rsquo;:completion:*:correct:::&rsquo;
max&minus;errors 2 not&minus;numeric <br>
zstyle &rsquo;:completion:*:approximate:::&rsquo;
max&minus;errors 3 numeric</b></p>

<p style="margin-left:22%; margin-top: 1em">correction will
accept up to two errors. If a numeric argument is given,
correction will not be performed, but correcting completion
will be, and will accept as many errors as given by the
numeric argument. Without a numeric argument, first
correction and then correcting completion will be tried,
with the first one accepting two errors and the second one
accepting three errors.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>_correct</b> is called as a function, the number of
errors to accept may be given following the <b>&minus;a</b>
option. The argument is in the same form a values to the
<b>accept</b> style, all in one string.</p>

<p style="margin-left:22%; margin-top: 1em">This completer
function is intended to be used without the
<b>_approximate</b> completer or, as in the example, just
before it. Using it after the <b>_approximate</b> completer
is useless since <b>_approximate</b> will at least generate
the corrected strings generated by the <b>_correct</b>
completer &minus;&minus; and probably more.</p>

<p style="margin-left:11%;"><b>_expand</b></p>

<p style="margin-left:22%;">This completer function does
not really perform completion, but instead checks if the
word on the command line is eligible for expansion and, if
it is, gives detailed control over how this expansion is
done. For this to happen, the completion system needs to be
invoked with <b>complete&minus;word</b>, not
<b>expand&minus;or&minus;complete</b> (the default binding
for <b>TAB</b>), as otherwise the string will be expanded by
the shell&rsquo;s internal mechanism before the completion
system is started. Note also this completer should be called
before the <b>_complete</b> completer function.</p>

<p style="margin-left:22%; margin-top: 1em">The tags used
when generating expansions are <b>all&minus;expansions</b>
for the string containing all possible expansions,
<b>expansions</b> when adding the possible expansions as
single matches and <b>original</b> when adding the original
string from the line. The order in which these strings are
generated, if at all, can be controlled by the
<b>group&minus;order</b> and <b>tag&minus;order</b> styles,
as usual.</p>

<p style="margin-left:22%; margin-top: 1em">The format
string for <b>all&minus;expansions</b> and for
<b>expansions</b> may contain the sequence
&lsquo;<b>%o</b>&rsquo; which will be replaced by the
original string from the line.</p>

<p style="margin-left:22%; margin-top: 1em">The kind of
expansion to be tried is controlled by the
<b>substitute</b>, <b>glob</b> and
<b>subst&minus;globs&minus;only</b> styles.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to call <b>_expand</b> as a function, in which case
the different modes may be selected with options:
<b>&minus;s</b> for <b>substitute</b>, <b>&minus;g</b> for
<b>glob</b> and <b>&minus;o</b> for
<b>subst&minus;globs&minus;only</b>.</p>

<p style="margin-left:11%;"><b>_expand_alias</b></p>

<p style="margin-left:22%;">If the word the cursor is on is
an alias, it is expanded and no other completers are called.
The types of aliases which are to be expanded can be
controlled with the styles <b>regular</b>, <b>global</b> and
<b>disabled</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This function
is also a bindable command, see the section &lsquo;Bindable
Commands&rsquo; below.</p>

<p style="margin-left:11%;"><b>_history</b></p>

<p style="margin-left:22%;">Complete words from the
shell&rsquo;s command history. This completer can be
controlled by the <b>remove&minus;all&minus;dups</b>, and
<b>sort</b> styles as for the <b>_history_complete_word</b>
bindable command, see the section &lsquo;Bindable
Commands&rsquo; below and the section &lsquo;Completion
System Configuration&rsquo; above.</p>

<p style="margin-left:11%;"><b>_ignored</b></p>

<p style="margin-left:22%;">The
<b>ignored&minus;patterns</b> style can be set to a list of
patterns which are compared against possible completions;
matching ones are removed. With this completer those matches
can be reinstated, as if no <b>ignored&minus;patterns</b>
style were set. The completer actually generates its own
list of matches; which completers are invoked is determined
in the same way as for the <b>_prefix</b> completer. The
<b>single&minus;ignored</b> style is also available as
described above.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_list</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This completer allows the insertion of matches to be
delayed until completion is attempted a second time without
the word on the line being changed. On the first attempt,
only the list of matches will be shown. It is affected by
the styles <b>condition</b> and <b>word</b>, see the section
&lsquo;Completion System Configuration&rsquo; above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_match</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This completer is intended to be used after the
<b>_complete</b> completer. It behaves similarly but the
string on the command line may be a pattern to match against
trial completions. This gives the effect of the
<b>GLOB_COMPLETE</b> option.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Normally
completion will be performed by taking the pattern from the
line, inserting a &lsquo;<b>*</b>&rsquo; at the cursor
position and comparing the resulting pattern with the
possible completions generated. This can be modified with
the <b>match&minus;original</b> style described above.</p>

<p style="margin-left:22%; margin-top: 1em">The generated
matches will be offered in a menu completion unless the
<b>insert&minus;unambiguous</b> style is set to
&lsquo;true&rsquo;; see the description above for other
options for this style.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
matcher specifications defined globally or used by the
completion functions (the styles <b>matcher&minus;list</b>
and <b>matcher</b>) will not be used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>_menu</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">This completer was written as
simple example function to show how menu completion can be
enabled in shell code. However, it has the notable effect of
disabling menu selection which can be useful with
<b>_generic</b> based widgets. It should be used as the
first completer in the list. Note that this is independent
of the setting of the <b>MENU_COMPLETE</b> option and does
not work with the other menu completion widgets such as
<b>reverse&minus;menu&minus;complete</b>, or
<b>accept&minus;and&minus;menu&minus;complete</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>_oldlist</b></p>

<p style="margin-left:22%;">This completer controls how the
standard completion widgets behave when there is an existing
list of completions which may have been generated by a
special completion (i.e. a separately&minus;bound completion
command). It allows the ordinary completion keys to continue
to use the list of completions thus generated, instead of
producing a new list of ordinary contextual completions. It
should appear in the list of completers before any of the
widgets which generate matches. It uses two styles:
<b>old&minus;list</b> and <b>old&minus;menu</b>, see the
section &lsquo;Completion System Configuration&rsquo;
above.</p>

<p style="margin-left:11%;"><b>_prefix</b></p>

<p style="margin-left:22%;">This completer can be used to
try completion with the suffix (everything after the cursor)
ignored. In other words, the suffix will not be considered
to be part of the word to complete. The effect is similar to
the <b>expand&minus;or&minus;complete&minus;prefix</b>
command.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>completer</b> style is used to decide which other
completers are to be called to generate matches. If this
style is unset, the list of completers set for the current
context is used &minus;&minus; except, of course, the
<b>_prefix</b> completer itself. Furthermore, if this
completer appears more than once in the list of completers
only those completers not already tried by the last
invocation of <b>_prefix</b> will be called.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
consider this global <b>completer</b> style:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer \ <br>
_complete _prefix _correct _prefix:foo</b></p>

<p style="margin-left:22%; margin-top: 1em">Here, the
<b>_prefix</b> completer tries normal completion but
ignoring the suffix. If that doesn&rsquo;t generate any
matches, and neither does the call to the <b>_correct</b>
completer after it, <b>_prefix</b> will be called a second
time and, now only trying correction with the suffix
ignored. On the second invocation the completer part of the
context appears as &lsquo;<b>foo</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">To use
<b>_prefix</b> as the last resort and try only normal
completion when it is invoked:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete ... _prefix
<br>
zstyle &rsquo;:completion::prefix:*&rsquo; completer
_complete</b></p>

<p style="margin-left:22%; margin-top: 1em">The
<b>add&minus;space</b> style is also respected. If it is set
to &lsquo;true&rsquo; then <b>_prefix</b> will insert a
space between the matches generated (if any) and the
suffix.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
completer is only useful if the <b>COMPLETE_IN_WORD</b>
option is set; otherwise, the cursor will be moved to the
end of the current word before the completion code is called
and hence there will be no suffix.</p>

<p style="margin-left:11%;"><b>_user_expand</b></p>

<p style="margin-left:22%;">This completer behaves
similarly to the <b>_expand</b> completer but instead
performs expansions defined by users. The styles
<b>add&minus;space</b> and <b>sort</b> styles specific to
the <b>_expand</b> completer are usable with
<b>_user_expand</b> in addition to other styles handled more
generally by the completion system. The tag
<b>all&minus;expansions</b> is also available.</p>

<p style="margin-left:22%; margin-top: 1em">The expansion
depends on the array style <b>user&minus;expand</b> being
defined for the current context; remember that the context
for completers is less specific than that for contextual
completion as the full context has not yet been determined.
Elements of the array may have one of the following
forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>$</b><i>hash</i></p></td>
<td width="3%"></td>
<td width="68%">


<p><i>hash</i> is the name of an associative array. Note
this is not a full parameter expression, merely a <b>$</b>,
suitably quoted to prevent immediate expansion, followed by
the name of an associative array. If the trial expansion
word matches a key in <i>hash</i>, the resulting expansion
is the corresponding value.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>_func</i></p></td>
<td width="3%"></td>
<td width="68%">


<p><i>_func</i> is the name of a shell function whose name
must begin with <b>_</b> but is not otherwise special to the
completion system. The function is called with the trial
word as an argument. If the word is to be expanded, the
function should set the array <b>reply</b> to a list of
expansions. Optionally, it can set <b>REPLY</b> to a word
that will be used as a description for the set of
expansions. The return status of the function is
irrelevant.</p> </td></tr>
</table>

<h2>BINDABLE COMMANDS
<a name="BINDABLE COMMANDS"></a>
</h2>


<p style="margin-left:11%;">In addition to the
context&minus;dependent completions provided, which are
expected to work in an intuitively obvious way, there are a
few widgets implementing special behaviour which can be
bound separately to keys. The following is a list of these
and their default bindings. <b><br>
_bash_completions</b></p>

<p style="margin-left:22%;">This function is used by two
widgets, <b>_bash_complete&minus;word</b> and
<b>_bash_list&minus;choices</b>. It exists to provide
compatibility with completion bindings in bash. The last
character of the binding determines what is completed:
&lsquo;<b>!</b>&rsquo;, command names;
&lsquo;<b>$</b>&rsquo;, environment variables;
&lsquo;<b>@</b>&rsquo;, host names; &lsquo;<b>/</b>&rsquo;,
file names; &lsquo;<b>~</b>&rsquo; user names. In bash, the
binding preceded by &lsquo;<b>\e</b>&rsquo; gives
completion, and preceded by &lsquo;<b>^X</b>&rsquo; lists
options. As some of these bindings clash with standard zsh
bindings, only &lsquo;<b>\e~</b>&rsquo; and
&lsquo;<b>^X~</b>&rsquo; are bound by default. To add the
rest, the following should be added to <b>.zshrc</b> after
<b>compinit</b> has been run:</p>

<p style="margin-left:32%; margin-top: 1em"><b>for key in
&rsquo;!&rsquo; &rsquo;$&rsquo; &rsquo;@&rsquo;
&rsquo;/&rsquo; &rsquo;~&rsquo;; do <br>
bindkey &quot;\e$key&quot; _bash_complete&minus;word <br>
bindkey &quot;^X$key&quot; _bash_list&minus;choices <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">This includes
the bindings for &lsquo;<b>~</b>&rsquo; in case they were
already bound to something else; the completion code does
not override user bindings.</p>

<p style="margin-left:11%;"><b>_correct_filename
(^XC)</b></p>

<p style="margin-left:22%;">Correct the filename path at
the cursor position. Allows up to six errors in the name.
Can also be called with an argument to correct a filename
path, independently of zle; the correction is printed on
standard output.</p>

<p style="margin-left:11%;"><b>_correct_word</b> (^Xc)</p>

<p style="margin-left:22%;">Performs correction of the
current argument using the usual contextual completions as
possible choices. This stores the string
&lsquo;<b>correct&minus;word</b>&rsquo; in the
<i>function</i> field of the context name and then calls the
<b>_correct</b> completer.</p>

<p style="margin-left:11%;"><b>_expand_alias (^Xa)</b></p>

<p style="margin-left:22%;">This function can be used as a
completer and as a bindable command. It expands the word the
cursor is on if it is an alias. The types of alias expanded
can be controlled with the styles <b>regular</b>,
<b>global</b> and <b>disabled</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When used as a
bindable command there is one additional feature that can be
selected by setting the <b>complete</b> style to
&lsquo;true&rsquo;. In this case, if the word is not the
name of an alias, <b>_expand_alias</b> tries to complete the
word to a full alias name without expanding it. It leaves
the cursor directly after the completed word so that
invoking <b>_expand_alias</b> once more will expand the
now&minus;complete alias name.</p>

<p style="margin-left:11%;"><b>_expand_word (^Xe)</b></p>

<p style="margin-left:22%;">Performs expansion on the
current word: equivalent to the standard
<b>expand&minus;word</b> command, but using the
<b>_expand</b> completer. Before calling it, the
<i>function</i> field of the context is set to
&lsquo;<b>expand&minus;word</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>_generic</b></p>

<p style="margin-left:22%;">This function is not defined as
a widget and not bound by default. However, it can be used
to define a widget and will then store the name of the
widget in the <i>function</i> field of the context and call
the completion system. This allows custom completion widgets
with their own set of style settings to be defined easily.
For example, to define a widget that performs normal
completion and starts menu selection:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;C
foo complete&minus;word _generic <br>
bindkey &rsquo;...&rsquo; foo <br>
zstyle &rsquo;:completion:foo:*&rsquo; menu yes
select=1</b></p>

<p style="margin-left:22%; margin-top: 1em">Note in
particular that the <b>completer</b> style may be set for
the context in order to change the set of functions used to
generate possible matches. If <b>_generic</b> is called with
arguments, those are passed through to <b>_main_complete</b>
as the list of completers in place of those defined by the
<b>completer</b> style.</p>

<p style="margin-left:11%;"><b>_history_complete_word</b>
(\e/)</p>

<p style="margin-left:22%;">Complete words from the
shell&rsquo;s command history. This uses the <b>list</b>,
<b>remove&minus;all&minus;dups</b>, <b>sort</b>, and
<b>stop</b> styles.</p>

<p style="margin-left:11%;"><b>_most_recent_file
(^Xm)</b></p>

<p style="margin-left:22%;">Complete the name of the most
recently modified file matching the pattern on the command
line (which may be blank). If given a numeric argument
<i>N</i>, complete the <i>N</i>th most recently modified
file. Note the completion, if any, is always unique.</p>

<p style="margin-left:11%;"><b>_next_tags</b> (^Xn)</p>

<p style="margin-left:22%;">This command alters the set of
matches used to that for the next tag, or set of tags,
either as given by the <b>tag&minus;order</b> style or as
set by default; these matches would otherwise not be
available. Successive invocations of the command cycle
through all possible sets of tags.</p>

<p style="margin-left:11%;"><b>_read_comp (^X^R)</b></p>

<p style="margin-left:22%;">Prompt the user for a string,
and use that to perform completion on the current word.
There are two possibilities for the string. First, it can be
a set of words beginning &lsquo;<b>_</b>&rsquo;, for example
&lsquo;<b>_files &minus;/</b>&rsquo;, in which case the
function with any arguments will be called to generate the
completions. Unambiguous parts of the function name will be
completed automatically (normal completion is not available
at this point) until a space is typed.</p>

<p style="margin-left:22%; margin-top: 1em">Second, any
other string will be passed as a set of arguments to
<b>compadd</b> and should hence be an expression specifying
what should be completed.</p>

<p style="margin-left:22%; margin-top: 1em">A very
restricted set of editing commands is available when reading
the string: &lsquo;<b>DEL</b>&rsquo; and
&lsquo;<b>^H</b>&rsquo; delete the last character;
&lsquo;<b>^U</b>&rsquo; deletes the line, and
&lsquo;<b>^C</b>&rsquo; and &lsquo;<b>^G</b>&rsquo; abort
the function, while &lsquo;<b>RET</b>&rsquo; accepts the
completion. Note the string is used verbatim as a command
line, so arguments must be quoted in accordance with
standard shell rules.</p>

<p style="margin-left:22%; margin-top: 1em">Once a string
has been read, the next call to <b>_read_comp</b> will use
the existing string instead of reading a new one. To force a
new string to be read, call <b>_read_comp</b> with a numeric
argument.</p>

<p style="margin-left:11%;"><b>_complete_debug
(^X?)</b></p>

<p style="margin-left:22%;">This widget performs ordinary
completion, but captures in a temporary file a trace of the
shell commands executed by the completion system. Each
completion attempt gets its own file. A command to view each
of these files is pushed onto the editor buffer stack.</p>

<p style="margin-left:11%;"><b>_complete_help (^Xh)</b></p>

<p style="margin-left:22%;">This widget displays
information about the context names, the tags, and the
completion functions used when completing at the current
cursor position. If given a numeric argument other than
<b>1</b> (as in &lsquo;<b>ESC&minus;2 ^Xh</b>&rsquo;), then
the styles used and the contexts for which they are used
will be shown, too.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
information about styles may be incomplete; it depends on
the information available from the completion functions
called, which in turn is determined by the user&rsquo;s own
styles and other settings.</p>


<p style="margin-left:11%;"><b>_complete_help_generic</b></p>

<p style="margin-left:22%;">Unlike other commands listed
here, this must be created as a normal ZLE widget rather
than a completion widget (i.e. with <b>zle &minus;N</b>). It
is used for generating help with a widget bound to the
<b>_generic</b> widget that is described above.</p>

<p style="margin-left:22%; margin-top: 1em">If this widget
is created using the name of the function, as it is by
default, then when executed it will read a key sequence.
This is expected to be bound to a call to a completion
function that uses the <b>_generic</b> widget. That widget
will be executed, and information provided in the same
format that the <b>_complete_help</b> widget displays for
contextual completion.</p>

<p style="margin-left:22%; margin-top: 1em">If the
widget&rsquo;s name contains <b>debug</b>, for example if it
is created as &lsquo;<b>zle &minus;N _complete_debug_generic
_complete_help_generic</b>&rsquo;, it will read and execute
the keystring for a generic widget as before, but then
generate debugging information as done by
<b>_complete_debug</b> for contextual completion.</p>

<p style="margin-left:22%; margin-top: 1em">If the
widget&rsquo;s name contains <b>noread</b>, it will not read
a keystring but instead arrange that the next use of a
generic widget run in the same shell will have the effect as
described above.</p>

<p style="margin-left:22%; margin-top: 1em">The widget
works by setting the shell parameter
<b>ZSH_TRACE_GENERIC_WIDGET</b> which is read by
<b>_generic</b>. Unsetting the parameter cancels any pending
effect of the <b>noread</b> form.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
after executing the following:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
_complete_debug_generic _complete_help_generic <br>
bindkey &rsquo;^x:&rsquo; _complete_debug_generic</b></p>

<p style="margin-left:22%; margin-top: 1em">typing
&lsquo;<b>C&minus;x :</b>&rsquo; followed by the key
sequence for a generic widget will cause trace output for
that widget to be saved to a file.</p>

<p style="margin-left:11%;"><b>_complete_tag (^Xt)</b></p>

<p style="margin-left:22%;">This widget completes symbol
tags created by the <b>etags</b> or <b>ctags</b> programmes
(note there is no connection with the completion
system&rsquo;s tags) stored in a file <b>TAGS</b>, in the
format used by <b>etags</b>, or <b>tags</b>, in the format
created by <b>ctags</b>. It will look back up the path
hierarchy for the first occurrence of either file; if both
exist, the file <b>TAGS</b> is preferred. You can specify
the full path to a <b>TAGS</b> or <b>tags</b> file by
setting the parameter <b>$TAGSFILE</b> or <b>$tagsfile</b>
respectively. The corresponding completion tags used are
<b>etags</b> and <b>vtags</b>, after emacs and vi
respectively.</p>

<h2>UTILITY FUNCTIONS
<a name="UTILITY FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Descriptions
follow for utility functions that may be useful when writing
completion functions. If functions are installed in
subdirectories, most of these reside in the <b>Base</b>
subdirectory. Like the example functions for commands in the
distribution, the utility functions generating matches all
follow the convention of returning status zero if they
generated completions and non&minus;zero if no matching
completions could be added.</p>

<p style="margin-left:11%; margin-top: 1em">Two more
features are offered by the <b>_main_complete</b> function.
The arrays <b>compprefuncs</b> and <b>comppostfuncs</b> may
contain names of functions that are to be called immediately
before or after completion has been tried. A function will
only be called once unless it explicitly reinserts itself
into the array. <b><br>
_all_labels</b> [ <b>&minus;x</b> ] [ <b>&minus;12VJ</b> ]
<i>tag name descr</i> [ <i>command args</i> ... ]</p>

<p style="margin-left:22%;">This is a convenient interface
to the <b>_next_label</b> function below, implementing the
loop shown in the <b>_next_label</b> example. The
<i>command</i> and its arguments are called to generate the
matches. The options stored in the parameter <i>name</i>
will automatically be inserted into the <i>args</i> passed
to the <i>command</i>. Normally, they are put directly after
the <i>command</i>, but if one of the <i>args</i> is a
single hyphen, they are inserted directly before that. If
the hyphen is the last argument, it will be removed from the
argument list before the <i>command</i> is called. This
allows <b>_all_labels</b> to be used in almost all cases
where the matches can be generated by a single call to the
<b>compadd</b> builtin command or by a call to one of the
utility functions.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
... <br>
if _requested foo; then <br>
... <br>
_all_labels foo expl &rsquo;...&rsquo; compadd ... &minus;
$matches <br>
fi</b></p>

<p style="margin-left:22%; margin-top: 1em">Will complete
the strings from the <b>matches</b> parameter, using
<b>compadd</b> with additional options which will take
precedence over those generated by <b>_all_labels</b>.</p>

<p style="margin-left:11%;"><b>_alternative</b> [
<b>&minus;O</b> <i>name</i> ] [ <b>&minus;C</b> <i>name</i>
] <i>spec</i> ...</p>

<p style="margin-left:22%;">This function is useful in
simple cases where multiple tags are available. Essentially
it implements a loop like the one described for the
<b>_tags</b> function below.</p>

<p style="margin-left:22%; margin-top: 1em">The tags to use
and the action to perform if a tag is requested are
described using the <i>spec</i>s which are of the form:
&lsquo;<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>&rsquo;.
The <i>tag</i>s are offered using <b>_tags</b> and if the
tag is requested, the <i>action</i> is executed with the
given description <i>descr</i>. The <i>action</i>s are those
accepted by the <b>_arguments</b> function (described
below), excluding the
&lsquo;<b>&minus;&gt;</b><i>state</i>&rsquo; and
&lsquo;<b>=</b><i>...</i>&rsquo; forms.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the <i>action</i> may be a simple function call:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_alternative
\ <br>
&rsquo;users:user:_users&rsquo; \ <br>
&rsquo;hosts:host:_hosts&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">offers
usernames and hostnames as possible matches, generated by
the <b>_users</b> and <b>_hosts</b> functions
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_arguments</b>, this function uses <b>_all_labels</b> to
execute the actions, which will loop over all sets of tags.
Special handling is only required if there is an additional
valid tag, for example inside a function called from
<b>_alternative</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;O</b> <i>name</i>&rsquo; is used in the
same way as by the <b>_arguments</b> function. In other
words, the elements of the <i>name</i> array will be passed
to <b>compadd</b> when executing an action.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_tags</b> this function supports the <b>&minus;C</b>
option to give a different name for the argument context
field.</p>

<p style="margin-left:11%;"><b>_arguments</b> [
<b>&minus;nswWACRS</b> ] [ <b>&minus;O</b> <i>name</i> ] [
<b>&minus;M</b> <i>matchspec</i> ] [ <b>:</b> ] <i>spec</i>
...</p>

<p style="margin-left:22%;">This function can be used to
give a complete specification for completion for a command
whose arguments follow standard UNIX option and argument
conventions. The following forms specify individual sets of
options and arguments; to avoid ambiguity, these may be
separated from the options to <b>_arguments</b> itself by a
single colon. Options to <b>_arguments</b> itself must be in
separate words, i.e. <b>&minus;s &minus;w</b>, not
<b>&minus;sw</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;n</b>, <b>_arguments</b> sets the parameter
<b>NORMARG</b> to the position of the first normal argument
in the <b>$words</b> array, i.e. the position after the end
of the options. If that argument has not been reached,
<b>NORMARG</b> is set to <b>&minus;1</b>. The caller should
declare &lsquo;<b>integer NORMARG</b>&rsquo; if the
<b>&minus;n</b> option is passed; otherwise the parameter is
not used. <i><br>
n</i><b>:</b><i>message</i><b>:</b><i>action <br>
n</i><b>::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes the
<i>n</i>&rsquo;th normal argument. The <i>message</i> will
be printed above the matches generated and the <i>action</i>
indicates what can be completed in this position (see
below). If there are two colons before the <i>message</i>
the argument is optional. If the <i>message</i> contains
only white space, nothing will be printed above the matches
unless the action adds an explanation string itself.</p>


<p style="margin-left:22%;"><b>:</b><i>message</i><b>:</b><i>action</i>
<b><br>
::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">Similar, but describes the
<i>next</i> argument, whatever number that happens to be. If
all arguments are specified in this form in the correct
order the numbers are unnecessary.</p>


<p style="margin-left:22%;"><b>*:</b><i>message</i><b>:</b><i>action</i>
<b><br>
*::</b><i>message</i><b>:</b><i>action</i> <b><br>
*:::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes how arguments
(usually non&minus;option arguments, those not beginning
with <b>&minus;</b> or <b>+</b>) are to be completed when
neither of the first two forms was provided. Any number of
arguments can be completed in this fashion.</p>

<p style="margin-left:32%; margin-top: 1em">With two colons
before the <i>message</i>, the <b>words</b> special array
and the <b>CURRENT</b> special parameter are modified to
refer only to the normal arguments when the <i>action</i> is
executed or evaluated. With three colons before the
<i>message</i> they are modified to refer only to the normal
arguments covered by this description.</p>

<p style="margin-left:22%;"><i>optspec <br>
optspec</i>:<i>...</i></p>

<p style="margin-left:32%;">This describes an option. The
colon indicates handling for one or more arguments to the
option; if it is not present, the option is assumed to take
no arguments.</p>

<p style="margin-left:32%; margin-top: 1em">By default,
options are multi&minus;character name, one
&lsquo;<b>&minus;</b><i>word</i>&rsquo; per option. With
<b>&minus;s</b>, options may be single characters, with more
than one option per word, although words starting with two
hyphens, such as &lsquo;<b>&minus;&minus;prefix</b>&rsquo;,
are still considered complete option names. This is suitable
for standard GNU options.</p>

<p style="margin-left:32%; margin-top: 1em">The combination
of <b>&minus;s</b> with <b>&minus;w</b> allows
single&minus;letter options to be combined in a single word
even if one or more of the options take arguments. For
example, if <b>&minus;a</b> takes an argument, with no
<b>&minus;s</b> &lsquo;<b>&minus;ab</b>&rsquo; is considered
as a single (unhandled) option; with <b>&minus;s
&minus;ab</b> is an option with the argument
&lsquo;<b>b</b>&rsquo;; with both <b>&minus;s</b> and
<b>&minus;w</b>, <b>&minus;ab</b> may be the option
<b>&minus;a</b> and the option <b>&minus;b</b> with
arguments still to come.</p>

<p style="margin-left:32%; margin-top: 1em">The option
<b>&minus;W</b> takes this a stage further: it is possible
to complete single&minus;letter options even after an
argument that occurs in the same word. However, it depends
on the action performed whether options will really be
completed at this point. For more control, use a utility
function like <b>_guard</b> as part of the action.</p>

<p style="margin-left:32%; margin-top: 1em">The following
forms are available for the initial <i>optspec</i>, whether
or not the option has arguments. <b><br>
*</b><i>optspec</i></p>

<p style="margin-left:43%;">Here <i>optspec</i> is one of
the remaining forms below. This indicates the following
<i>optspec</i> may be repeated. Otherwise if the
corresponding option is already present on the command line
to the left of the cursor it will not be offered again.</p>

<p style="margin-left:32%;"><b>&minus;</b><i>optname</i>
<b><br>
+</b><i>optname</i></p>

<p style="margin-left:43%;">In the simplest form the
<i>optspec</i> is just the option name beginning with a
minus or a plus sign, such as
&lsquo;<b>&minus;foo</b>&rsquo;. The first argument for the
option (if any) must follow as a <i>separate</i> word
directly after the option.</p>

<p style="margin-left:43%; margin-top: 1em">Either of
&lsquo;<b>&minus;+</b><i>optname</i>&rsquo; and
&lsquo;<b>+&minus;</b><i>optname</i>&rsquo; can be used to
specify that <b>&minus;</b><i>optname</i> and
<b>+</b><i>optname</i> are both valid.</p>

<p style="margin-left:43%; margin-top: 1em">In all the
remaining forms, the leading &lsquo;<b>&minus;</b>&rsquo;
may be replaced by or paired with &lsquo;<b>+</b>&rsquo; in
this way.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>&minus;</b></p>

<p style="margin-left:43%;">The first argument of the
option must come directly after the option name <i>in the
same word</i>. For example,
&lsquo;<b>&minus;foo&minus;:</b><i>...</i>&rsquo; specifies
that the completed option and argument will look like
&lsquo;<b>&minus;foo</b><i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>+</b></p>

<p style="margin-left:43%;">The first argument may appear
immediately after <i>optname</i> in the same word, or may
appear as a separate word after the option. For example,
&lsquo;<b>&minus;foo+:</b><i>...</i>&rsquo; specifies that
the completed option and argument will look like either
&lsquo;<b>&minus;foo</b><i>arg</i>&rsquo; or
&lsquo;<b>&minus;foo</b> <i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>=</b></p>

<p style="margin-left:43%;">The argument may appear as the
next word, or in same word as the option name provided that
it is separated from it by an equals sign, for example
&lsquo;<b>&minus;foo=</b><i>arg</i>&rsquo; or
&lsquo;<b>&minus;foo</b> <i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>=&minus;</b></p>

<p style="margin-left:43%;">The argument to the option must
appear after an equals sign in the same word, and may not be
given in the next argument.</p>


<p style="margin-left:32%;"><i>optspec</i><b>[</b><i>explanation</i><b>]</b></p>

<p style="margin-left:43%;">An explanation string may be
appended to any of the preceding forms of <i>optspec</i> by
enclosing it in brackets, as in &lsquo;<b>&minus;q[query
operation]</b>&rsquo;.</p>

<p style="margin-left:43%; margin-top: 1em">The
<b>verbose</b> style is used to decide whether the
explanation strings are displayed with the option in a
completion listing.</p>

<p style="margin-left:43%; margin-top: 1em">If no bracketed
explanation string is given but the
<b>auto&minus;description</b> style is set and only one
argument is described for this <i>optspec</i>, the value of
the style is displayed, with any appearance of the sequence
&lsquo;<b>%d</b>&rsquo; in it replaced by the <i>message</i>
of the first <i>optarg</i> that follows the <i>optspec</i>;
see below.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
for options with a literal &lsquo;+&rsquo; or
&lsquo;<b>=</b>&rsquo; to appear, but that character must be
quoted, for example &lsquo;<b>&minus;\+</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>optarg</i> following an <i>optspec</i> must take one of
the following forms: <b><br>
:</b><i>message</i><b>:</b><i>action</i> <b><br>
::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">An argument to the option;
<i>message</i> and <i>action</i> are treated as for ordinary
arguments. In the first form, the argument is mandatory, and
in the second form it is optional.</p>

<p style="margin-left:32%; margin-top: 1em">This group may
be repeated for options which take multiple arguments. In
other words,
<b>:</b><i>message1</i><b>:</b><i>action1</i><b>:</b><i>message2</i><b>:</b><i>action2</i>
specifies that the option takes two arguments.</p>


<p style="margin-left:22%;"><b>:*</b><i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i>
<b><br>

:*</b><i>pattern</i><b>::</b><i>message</i><b>:</b><i>action</i>
<b><br>

:*</b><i>pattern</i><b>:::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes multiple
arguments. Only the last <i>optarg</i> for an option taking
multiple arguments may be given in this form. If the
<i>pattern</i> is empty (i.e., <b>:*:</b>), all the
remaining words on the line are to be completed as described
by the <i>action</i>; otherwise, all the words up to and
including a word matching the <i>pattern</i> are to be
completed using the <i>action</i>.</p>

<p style="margin-left:32%; margin-top: 1em">Multiple colons
are treated as for the &lsquo;<b>*:</b><i>...</i>&rsquo;
forms for ordinary arguments: when the <i>message</i> is
preceded by two colons, the <b>words</b> special array and
the <b>CURRENT</b> special parameter are modified during the
execution or evaluation of the <i>action</i> to refer only
to the words after the option. When preceded by three
colons, they are modified to refer only to the words covered
by this description.</p>

<p style="margin-left:11%; margin-top: 1em">Any literal
colon in an <i>optname</i>, <i>message</i>, or <i>action</i>
must be preceded by a backslash,
&lsquo;<b>\:</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Each of the
forms above may be preceded by a list in parentheses of
option names and argument numbers. If the given option is on
the command line, the options and arguments indicated in
parentheses will not be offered. For example,
&lsquo;<b>(&minus;two &minus;three
1)&minus;one:...</b>&rsquo; completes the option
&lsquo;<b>&minus;one</b>&rsquo;; if this appears on the
command line, the options <b>&minus;two</b> and
<b>&minus;three</b> and the first ordinary argument will not
be completed after it.
&lsquo;<b>(&minus;foo):</b><i>...</i>&rsquo; specifies an
ordinary argument completion; <b>&minus;foo</b> will not be
completed if that argument is already present.</p>

<p style="margin-left:11%; margin-top: 1em">Other items may
appear in the list of excluded options to indicate various
other items that should not be applied when the current
specification is matched: a single star (<b>*</b>) for the
rest arguments (i.e. a specification of the form
&lsquo;<b>*:...</b>&rsquo;); a colon (<b>:</b>) for all
normal (non&minus;option&minus;) arguments; and a hyphen
(<b>&minus;</b>) for all options. For example, if
&lsquo;<b>(*)</b>&rsquo; appears before an option and the
option appears on the command line, the list of remaining
arguments (those shown in the above table beginning with
&lsquo;<b>*:</b>&rsquo;) will not be completed.</p>

<p style="margin-left:11%; margin-top: 1em">To aid in reuse
of specifications, it is possible to precede any of the
forms above with &lsquo;<b>!</b>&rsquo;; then the form will
no longer be completed, although if the option or argument
appears on the command line they will be skipped as normal.
The main use for this is when the arguments are given by an
array, and <b>_arguments</b> is called repeatedly for more
specific contexts: on the first call &lsquo;<b>_arguments
$global_options</b>&rsquo; is used, and on subsequent calls
&lsquo;<b>_arguments !$^global_options</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">In each of the
forms above the <i>action</i> determines how completions
should be generated. Except for the
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; form below,
the <i>action</i> will be executed by calling the
<b>_all_labels</b> function to process all tag labels. No
special handling of tags is needed unless a function call
introduces a new one.</p>

<p style="margin-left:11%; margin-top: 1em">The forms for
<i>action</i> are as follows. <br>
(single unquoted space)</p>

<p style="margin-left:22%;">This is useful where an
argument is required but it is not possible or desirable to
generate matches for it. The <i>message</i> will be
displayed but no completions listed. Note that even in this
case the colon at the end of the <i>message</i> is needed;
it may only be omitted when neither a <i>message</i> nor an
<i>action</i> is given.</p>

<p style="margin-left:11%;"><b>(</b><i>item1 item2
...</i><b>)</b></p>

<p style="margin-left:22%;">One of a list of possible
matches, for example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>:foo:(foo
bar baz)</b></p>


<p style="margin-left:11%;"><b>((</b><i>item1</i><b>\:</b><i>desc1
...</i><b>))</b></p>

<p style="margin-left:22%;">Similar to the above, but with
descriptions for each possible match. Note the backslash
before the colon. For example,</p>


<p style="margin-left:32%; margin-top: 1em"><b>:foo:((a\:bar
b\:baz))</b></p>

<p style="margin-left:22%; margin-top: 1em">The matches
will be listed together with their descriptions if the
<b>description</b> style is set with the <b>values</b> tag
in the context.</p>


<p style="margin-left:11%;"><b>&minus;&gt;</b><i>string</i></p>

<p style="margin-left:22%;">In this form, <b>_arguments</b>
processes the arguments and options and then returns control
to the calling function with parameters set to indicate the
state of processing; the calling function then makes its own
arrangements for generating completions. For example,
functions that implement a state machine can use this type
of action.</p>

<p style="margin-left:22%; margin-top: 1em">Where
<b>_arguments</b> encounters <i>action</i> in the
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; format, it
will strip all leading and trailing whitespace from
<i>string</i> and set the array <b>state</b> to the set of
all <i>string</i>s for which an action is to be performed.
The elements of the array <b>state_descr</b> are assigned
the corresponding <i>message</i> field from each
<i>optarg</i> containing such an <i>action</i>.</p>

<p style="margin-left:22%; margin-top: 1em">By default and
in common with all other well behaved completion functions,
_arguments returns status zero if it was able to add matches
and non&minus;zero otherwise. However, if the
<b>&minus;R</b> option is given, <b>_arguments</b> will
instead return a status of 300 to indicate that
<b>$state</b> is to be handled.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
<b>$state</b> and <b>$state_descr</b>, <b>_arguments</b>
also sets the global parameters
&lsquo;<b>context</b>&rsquo;, &lsquo;<b>line</b>&rsquo; and
&lsquo;<b>opt_args</b>&rsquo; as described below, and does
not reset any changes made to the special parameters such as
<b>PREFIX</b> and <b>words</b>. This gives the calling
function the choice of resetting these parameters or
propagating changes in them.</p>

<p style="margin-left:22%; margin-top: 1em">A function
calling <b>_arguments</b> with at least one action
containing a &lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;
must therefore declare appropriate local parameters:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
context state state_descr line <br>
typeset &minus;A opt_args</b></p>

<p style="margin-left:22%; margin-top: 1em">to prevent
<b>_arguments</b> from altering the global environment.</p>


<p style="margin-left:11%;"><b>{</b><i>eval&minus;string</i><b>}</b></p>

<p style="margin-left:22%;">A string in braces is evaluated
as shell code to generate matches. If the
<i>eval&minus;string</i> itself does not begin with an
opening parenthesis or brace it is split into separate words
before execution.</p>

<p style="margin-left:11%;"><b>=</b> <i>action</i></p>

<p style="margin-left:22%;">If the <i>action</i> starts
with &lsquo;<b>=</b> &rsquo; (an equals sign followed by a
space), <b>_arguments</b> will insert the contents of the
<i>argument</i> field of the current context as the new
first element in the <b>words</b> special array and
increment the value of the <b>CURRENT</b> special parameter.
This has the effect of inserting a dummy word onto the
completion command line while not changing the point at
which completion is taking place.</p>

<p style="margin-left:22%; margin-top: 1em">This is most
useful with one of the specifiers that restrict the words on
the command line on which the <i>action</i> is to operate
(the two&minus; and three&minus;colon forms above). One
particular use is when an <i>action</i> itself causes
<b>_arguments</b> on a restricted range; it is necessary to
use this trick to insert an appropriate command name into
the range for the second call to <b>_arguments</b> to be
able to parse the line.</p>

<p style="margin-left:11%;"><i>word... <br>
word...</i></p>

<p style="margin-left:22%;">This covers all forms other
than those above. If the <i>action</i> starts with a space,
the remaining list of words will be invoked unchanged.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise it
will be invoked with some extra strings placed after the
first word; these are to be passed down as options to the
<b>compadd</b> builtin. They ensure that the state specified
by <b>_arguments</b>, in particular the descriptions of
options and arguments, is correctly passed to the completion
command. These additional arguments are taken from the array
parameter &lsquo;<b>expl</b>&rsquo;; this will be set up
before executing the <i>action</i> and hence may be referred
to inside it, typically in an expansion of the form
&lsquo;<b>$expl[@]</b>&rsquo; which preserves empty elements
of the array.</p>

<p style="margin-left:11%; margin-top: 1em">During the
performance of the action the array
&lsquo;<b>line</b>&rsquo; will be set to the command name
and normal arguments from the command line, i.e. the words
from the command line excluding all options and their
arguments. Options are stored in the associative array
&lsquo;<b>opt_args</b>&rsquo; with option names as keys and
their arguments as the values. For options that have more
than one argument these are given as one string, separated
by colons. All colons in the original arguments are preceded
with backslashes.</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
&lsquo;<b>context</b>&rsquo; is set when returning to the
calling function to perform an action of the form
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;. It is set to
an array of elements corresponding to the elements of
<b>$state</b>. Each element is a suitable name for the
argument field of the context: either a string of the form
&lsquo;<b>option</b><i>&minus;opt</i><b>&minus;</b><i>n</i>&rsquo;
for the <i>n</i>&rsquo;th argument of the option
<i>&minus;opt</i>, or a string of the form
&lsquo;<b>argument&minus;</b><i>n</i>&rsquo; for the
<i>n</i>&rsquo;th argument. For &lsquo;rest&rsquo;
arguments, that is those in the list at the end not handled
by position, <i>n</i> is the string
&lsquo;<b>rest</b>&rsquo;. For example, when completing the
argument of the <b>&minus;o</b> option, the name is
&lsquo;<b>option&minus;o&minus;1</b>&rsquo;, while for the
second normal (non&minus;option&minus;) argument it is
&lsquo;<b>argument&minus;2</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Furthermore,
during the evaluation of the <i>action</i> the context name
in the <b>curcontext</b> parameter is altered to append the
same string that is stored in the <b>context</b>
parameter.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
to specify multiple sets of options and arguments with the
sets separated by single hyphens. The specifications before
the first hyphen (if any) are shared by all the remaining
sets. The first word in every other set provides a name for
the set which may appear in exclusion lists in
specifications, either alone or before one of the possible
values described above. In the second case a
&lsquo;<b>&minus;</b>&rsquo; should appear between this name
and the remainder.</p>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments \
<br>
&minus;a \ <br>
&minus; set1 \ <br>
&minus;c \ <br>
&minus; set2 \ <br>
&minus;d \ <br>
&rsquo;:arg:(x2 y2)&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This defines
two sets. When the command line contains the option
&lsquo;<b>&minus;c</b>&rsquo;, the
&lsquo;<b>&minus;d</b>&rsquo; option and the argument will
not be considered possible completions. When it contains
&lsquo;<b>&minus;d</b>&rsquo; or an argument, the option
&lsquo;<b>&minus;c</b>&rsquo; will not be considered.
However, after &lsquo;<b>&minus;a</b>&rsquo; both sets will
still be considered valid.</p>

<p style="margin-left:11%; margin-top: 1em">If the name
given for one of the mutually exclusive sets is of the form
&lsquo;<b>(</b><i>name</i><b>)</b>&rsquo; then only one
value from each set will ever be completed; more formally,
all specifications are mutually exclusive to all other
specifications in the same set. This is useful for defining
multiple sets of options which are mutually exclusive and in
which the options are aliases for each other. For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments \
<br>
&minus;a &minus;b \ <br>
&minus; &rsquo;(compress)&rsquo; \ <br>
{&minus;c,&minus;&minus;compress}&rsquo;[compress]&rsquo; \
<br>
&minus; &rsquo;(uncompress)&rsquo; \ <br>

{&minus;d,&minus;&minus;decompress}&rsquo;[decompress]&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">As the
completion code has to parse the command line separately for
each set this form of argument is slow and should only be
used when necessary. A useful alternative is often an option
specification with rest&minus;arguments (as in
&lsquo;<b>&minus;foo:*:...</b>&rsquo;); here the option
<b>&minus;foo</b> swallows up all remaining arguments as
described by the <i>optarg</i> definitions.</p>

<p style="margin-left:11%; margin-top: 1em">The options
<b>&minus;S</b> and <b>&minus;A</b> are available to
simplify the specifications for commands with standard
option parsing. With <b>&minus;S</b>, no option will be
completed after a &lsquo;<b>&minus;&minus;</b>&rsquo;
appearing on its own on the line; this argument will
otherwise be ignored; hence in the line</p>

<p style="margin-left:22%; margin-top: 1em"><b>foobar
&minus;a &minus;&minus; &minus;b</b></p>

<p style="margin-left:11%; margin-top: 1em">the
&lsquo;<b>&minus;a</b>&rsquo; is considered an option but
the &lsquo;<b>&minus;b</b>&rsquo; is considered an argument,
while the &lsquo;<b>&minus;&minus;</b>&rsquo; is considered
to be neither.</p>

<p style="margin-left:11%; margin-top: 1em">With
<b>&minus;A</b>, no options will be completed after the
first non&minus;option argument on the line. The
<b>&minus;A</b> must be followed by a pattern matching all
strings which are not to be taken as arguments. For example,
to make <b>_arguments</b> stop completing options after the
first normal argument, but ignoring all strings starting
with a hyphen even if they are not described by one of the
<i>optspec</i>s, the form is &lsquo;<b>&minus;A
&quot;&minus;*&quot;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;O</b> <i>name</i>&rsquo; specifies the name
of an array whose elements will be passed as arguments to
functions called to execute <i>actions</i>. For example,
this can be used to pass the same set of options for the
<b>compadd</b> builtin to all <i>action</i>s.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;M</b> <i>spec</i>&rsquo; sets a match
specification to use to completion option names and values.
It must appear before the first argument specification. The
default is &lsquo;<b>r:|[_&minus;]=* r:|=*</b>&rsquo;: this
allows partial word completion after &lsquo;<b>_</b>&rsquo;
and &lsquo;<b>&minus;</b>&rsquo;, for example
&lsquo;&minus;f&minus;b&rsquo; can be completed to
&lsquo;<b>&minus;foo&minus;bar</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The option
<b>&minus;C</b> tells <b>_arguments</b> to modify the
<b>curcontext</b> parameter for an action of the form
&lsquo;<b>&minus;&gt;</b><i>state</i>&rsquo;. This is the
standard parameter used to keep track of the current
context. Here it (and not the <b>context</b> array) should
be made local to the calling function to avoid passing back
the modified value and should be initialised to the current
value at the start of the function:</p>

<p style="margin-left:22%; margin-top: 1em"><b>local
curcontext=&quot;$curcontext&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">This is useful
where it is not possible for multiple states to be valid
together.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;&minus;</b>&rsquo; allows <b>_arguments</b>
to work out the names of long options that support the
&lsquo;<b>&minus;&minus;help</b>&rsquo; option which is
standard in many GNU commands. The command word is called
with the argument &lsquo;<b>&minus;&minus;help</b>&rsquo;
and the output examined for option names. Clearly, it can be
dangerous to pass this to commands which may not support
this option as the behaviour of the command is
unspecified.</p>

<p style="margin-left:11%; margin-top: 1em">In addition to
options, &lsquo;<b>_arguments &minus;&minus;</b>&rsquo; will
try to deduce the types of arguments available for options
when the form
&lsquo;<b>&minus;&minus;</b><i>opt</i>=<i>val</i>&rsquo; is
valid. It is also possible to provide hints by examining the
help text of the command and adding specifiers of the form
&lsquo;<i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i>&rsquo;;
note that normal <b>_arguments</b> specifiers are not used.
The <i>pattern</i> is matched against the help text for an
option, and if it matches the <i>message</i> and
<i>action</i> are used as for other argument specifiers. For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &rsquo;*\*:toggle:(yes no)&rsquo; \ <br>
&rsquo;*=FILE*:file:_files&rsquo; \ <br>
&rsquo;*=DIR*:directory:_files &minus;/&rsquo; \ <br>
&rsquo;*=PATH*:directory:_files &minus;/&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">Here,
&lsquo;<b>yes</b>&rsquo; and &lsquo;<b>no</b>&rsquo; will be
completed as the argument of options whose description ends
in a star; file names will be completed for options that
contain the substring &lsquo;<b>=FILE</b>&rsquo; in the
description; and directories will be completed for options
whose description contains &lsquo;<b>=DIR</b>&rsquo; or
&lsquo;<b>=PATH</b>&rsquo;. The last three are in fact the
default and so need not be given explicitly, although it is
possible to override the use of these patterns. A typical
help text which uses this feature is:</p>

<p style="margin-left:22%; margin-top: 1em"><b>&minus;C,
&minus;&minus;directory=DIR change to directory DIR</b></p>

<p style="margin-left:11%; margin-top: 1em">so that the
above specifications will cause directories to be completed
after &lsquo;<b>&minus;&minus;directory</b>&rsquo;, though
not after &lsquo;<b>&minus;C</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
<b>_arguments</b> tries to find out automatically if the
argument for an option is optional. This can be specified
explicitly by doubling the colon before the
<i>message</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>pattern</i> ends in &lsquo;<b>(&minus;)</b>&rsquo;, this
will be removed from the pattern and the <i>action</i> will
be used only directly after the &lsquo;<b>=</b>&rsquo;, not
in the next word. This is the behaviour of a normal
specification defined with the form
&lsquo;<b>=&minus;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>_arguments &minus;&minus;</b>&rsquo; can be
followed by the option &lsquo;<b>&minus;i</b>
<i>patterns</i>&rsquo; to give patterns for options which
are not to be completed. The patterns can be given as the
name of an array parameter or as a literal list in
parentheses. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &minus;i \ <br>

&quot;(&minus;&minus;(en|dis)able&minus;FEATURE*)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">will cause
completion to ignore the options
&lsquo;<b>&minus;&minus;enable&minus;FEATURE</b>&rsquo; and
&lsquo;<b>&minus;&minus;disable&minus;FEATURE</b>&rsquo;
(this example is useful with GNU <b>configure</b>).</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>_arguments &minus;&minus;</b>&rsquo; form can also
be followed by the option &lsquo;<b>&minus;s</b>
<i>pair</i>&rsquo; to describe option aliases. Each
<i>pair</i> consists of a pattern and a replacement. For
example, some <b>configure</b>&minus;scripts describe
options only as
&lsquo;<b>&minus;&minus;enable&minus;foo</b>&rsquo;, but
also accept
&lsquo;<b>&minus;&minus;disable&minus;foo</b>&rsquo;. To
allow completion of the second form:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &minus;s &quot;(#&minus;&minus;enable&minus;
&minus;&minus;disable&minus;)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">Here is a more
general example of the use of <b>_arguments</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&rsquo;&minus;l+:left border:&rsquo; \ <br>
&rsquo;&minus;format:paper size:(letter A4)&rsquo; \ <br>
&rsquo;*&minus;copy:output file:_files::resolution:(300
600)&rsquo; \ <br>
&rsquo;:postscript file:_files &minus;g
\*.\(ps\|eps\)&rsquo; \ <br>
&rsquo;*:page number:&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This describes
three options: &lsquo;<b>&minus;l</b>&rsquo;,
&lsquo;<b>&minus;format</b>&rsquo;, and
&lsquo;<b>&minus;copy</b>&rsquo;. The first takes one
argument described as &lsquo;<i>left border</i>&rsquo; for
which no completion will be offered because of the empty
action. Its argument may come directly after the
&lsquo;<b>&minus;l</b>&rsquo; or it may be given as the next
word on the line.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>&minus;format</b>&rsquo; option takes one argument
in the next word, described as &lsquo;<i>paper
size</i>&rsquo; for which only the strings
&lsquo;<b>letter</b>&rsquo; and &lsquo;<b>A4</b>&rsquo; will
be completed.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>&minus;copy</b>&rsquo; option may appear more than
once on the command line and takes two arguments. The first
is mandatory and will be completed as a filename. The second
is optional (because of the second colon before the
description &lsquo;<i>resolution</i>&rsquo;) and will be
completed from the strings &lsquo;<b>300</b>&rsquo; and
&lsquo;<b>600</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The last two
descriptions say what should be completed as arguments. The
first describes the first argument as a &lsquo;<i>postscript
file</i>&rsquo; and makes files ending in
&lsquo;<b>ps</b>&rsquo; or &lsquo;<b>eps</b>&rsquo; be
completed. The last description gives all other arguments
the description &lsquo;<i>page numbers</i>&rsquo; but does
not offer completions. <b><br>
_cache_invalid</b> <i>cache_identifier</i></p>

<p style="margin-left:22%;">This function returns status
zero if the completions cache corresponding to the given
cache identifier needs rebuilding. It determines this by
looking up the <b>cache&minus;policy</b> style for the
current context. This should provide a function name which
is run with the full path to the relevant cache file as the
only argument.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_example_caching_policy
() { <br>
# rebuild if cache is more than a week old <br>
local &minus;a oldp <br>
oldp=( &quot;$1&quot;(Nm+7) ) <br>
(( $#oldp )) <br>
}</b></p>

<p style="margin-left:11%;"><b>_call_function</b> <i>return
name</i> [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">If a function <i>name</i>
exists, it is called with the arguments <i>args</i>. The
<i>return</i> argument gives the name of a parameter in
which the return status from the function <i>name</i> should
be stored; if <i>return</i> is empty or a single hyphen it
is ignored.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status of <b>_call_function</b> itself is zero if the
function <i>name</i> exists and was called and
non&minus;zero otherwise.</p>

<p style="margin-left:11%;"><b>_call_program</b> <i>tag
string</i> ...</p>

<p style="margin-left:22%;">This function provides a
mechanism for the user to override the use of an external
command. It looks up the <b>command</b> style with the
supplied <i>tag</i>. If the style is set, its value is used
as the command to execute. The <i>string</i>s from the call
to <b>_call_program</b>, or from the style if set, are
concatenated with spaces between them and the resulting
string is evaluated. The return status is the return status
of the command called.</p>

<p style="margin-left:11%;"><b>_combination</b> [
<b>&minus;s</b> <i>pattern</i> ] <i>tag style spec</i> ...
<i>field opts</i> ...</p>

<p style="margin-left:22%;">This function is used to
complete combinations of values, for example pairs of
hostnames and usernames. The <i>style</i> argument gives the
style which defines the pairs; it is looked up in a context
with the <i>tag</i> specified.</p>

<p style="margin-left:22%; margin-top: 1em">The style name
consists of field names separated by hyphens, for example
&lsquo;<b>users&minus;hosts&minus;ports</b>&rsquo;. For each
field for a value is already known, a <i>spec</i> of the
form &lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo; is
given. For example, if the command line so far specifies a
user &lsquo;<b>pws</b>&rsquo;, the argument
&lsquo;<b>users=pws</b>&rsquo; should appear.</p>

<p style="margin-left:22%; margin-top: 1em">The next
argument with no equals sign is taken as the name of the
field for which completions should be generated (presumably
not one of the <i>field</i>s for which the value is
known).</p>

<p style="margin-left:22%; margin-top: 1em">The matches
generated will be taken from the value of the style. These
should contain the possible values for the combinations in
the appropriate order (users, hosts, ports in the example
above). The different fields the values for the different
fields are separated by colons. This can be altered with the
option <b>&minus;s</b> to <b>_combination</b> which
specifies a pattern. Typically this is a character class, as
for example &lsquo;<b>&minus;s &quot;[:@]&quot;</b>&rsquo;
in the case of the <b>users&minus;hosts</b> style. Each
&lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo;
specification restricts the completions which apply to
elements of the style with appropriately matching
fields.</p>

<p style="margin-left:22%; margin-top: 1em">If no style
with the given name is defined for the given tag, or if none
of the strings in style&rsquo;s value match, but a function
name of the required field preceded by an underscore is
defined, that function will be called to generate the
matches. For example, if there is no
&lsquo;<b>users&minus;hosts&minus;ports</b>&rsquo; or no
matching hostname when a host is required, the function
&lsquo;<b>_hosts</b>&rsquo; will automatically be
called.</p>

<p style="margin-left:22%; margin-top: 1em">If the same
name is used for more than one field, in both the
&lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo; and the
argument that gives the name of the field to be completed,
the number of the field (starting with one) may be given
after the fieldname, separated from it by a colon.</p>

<p style="margin-left:22%; margin-top: 1em">All arguments
after the required field name are passed to <b>compadd</b>
when generating matches from the style value, or to the
functions for the fields if they are called.</p>

<p style="margin-left:11%;"><b>_describe</b> [
<b>&minus;oO</b> | <b>&minus;t</b> <i>tag</i> ] <i>descr
name1</i> [ <i>name2</i> ] <i>opts</i> ...
<b>&minus;&minus;</b> ...</p>

<p style="margin-left:22%;">This function associates
completions with descriptions. Multiple groups separated by
<b>&minus;&minus;</b> can be supplied, potentially with
different completion options <i>opts</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>descr</i> is taken as a string to display above the
matches if the <b>format</b> style for the
<b>descriptions</b> tag is set. This is followed by one or
two names of arrays followed by options to pass to
<b>compadd</b>. The first array contains the possible
completions with their descriptions in the form
&lsquo;<i>completion</i><b>:</b><i>description</i>&rsquo;.
Any literal colons in <i>completion</i> must be quoted with
a backslash. If a second array is given, it should have the
same number of elements as the first; in this case the
corresponding elements are added as possible completions
instead of the <i>completion</i> strings from the first
array. The completion list will retain the descriptions from
the first array. Finally, a set of completion options can
appear.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
&lsquo;<b>&minus;o</b>&rsquo; appears before the first
argument, the matches added will be treated as names of
command options (N.B. not shell options), typically
following a &lsquo;<b>&minus;</b>&rsquo;,
&lsquo;<b>&minus;&minus;</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; on the command line. In this case
<b>_describe</b> uses the <b>prefix&minus;hidden</b>,
<b>prefix&minus;needed</b> and <b>verbose</b> styles to find
out if the strings should be added as completions and if the
descriptions should be shown. Without the
&lsquo;<b>&minus;o</b>&rsquo; option, only the
<b>verbose</b> style is used to decide how descriptions are
shown. If &lsquo;<b>&minus;O</b>&rsquo; is used instead of
&lsquo;<b>&minus;o</b>&rsquo;, command options are completed
as above but <b>_describe</b> will not handle the
<b>prefix&minus;needed</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;t</b> option a <i>tag</i> can be specified. The
default is &lsquo;<b>values</b>&rsquo; or, if the
<b>&minus;o</b> option is given,
&lsquo;<b>options</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If selected by
the <b>list&minus;grouped</b> style, strings with the same
description will appear together in the list.</p>


<p style="margin-left:22%; margin-top: 1em"><b>_describe</b>
uses the <b>_all_labels</b> function to generate the
matches, so it does not need to appear inside a loop over
tag labels.</p>

<p style="margin-left:11%;"><b>_description</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag name
descr</i> [ <i>spec</i> ... ]</p>

<p style="margin-left:22%;">This function is not to be
confused with the previous one; it is used as a helper
function for creating options to <b>compadd</b>. It is
buried inside many of the higher level completion functions
and so often does not need to be called directly.</p>

<p style="margin-left:22%; margin-top: 1em">The styles
listed below are tested in the current context using the
given <i>tag</i>. The resulting options for <b>compadd</b>
are put into the array named <i>name</i> (this is
traditionally &lsquo;<b>expl</b>&rsquo;, but this convention
is not enforced). The description for the corresponding set
of matches is passed to the function in <i>descr</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The styles
tested are: <b>format</b>, <b>hidden</b>, <b>matcher</b>,
<b>ignored&minus;patterns</b> and <b>group&minus;name</b>.
The <b>format</b> style is first tested for the given
<i>tag</i> and then for the <b>descriptions</b> tag if no
value was found, while the remainder are only tested for the
tag given as the first argument. The function also calls
<b>_setup</b> which tests some more styles.</p>

<p style="margin-left:22%; margin-top: 1em">The string
returned by the <b>format</b> style (if any) will be
modified so that the sequence &lsquo;<b>%d</b>&rsquo; is
replaced by the <i>descr</i> given as the third argument
without any leading or trailing white space. If, after
removing the white space, the <i>descr</i> is the empty
string, the format style will not be used and the options
put into the <i>name</i> array will not contain an
explanation string to be displayed above the matches.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>_description</b> is called with more than three
arguments, the additional <i>spec</i>s should be of the form
&lsquo;<i>char</i><b>:</b><i>str</i>&rsquo;. These supply
escape sequence replacements for the <b>format</b> style:
every appearance of &lsquo;<b>%</b><i>char</i>&rsquo; will
be replaced by <i>string</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;x</b> option is given, the description will be
passed to <b>compadd</b> using the <b>&minus;x</b> option
instead of the default <b>&minus;X</b>. This means that the
description will be displayed even if there are no
corresponding matches.</p>

<p style="margin-left:22%; margin-top: 1em">The options
placed in the array <i>name</i> take account of the
<b>group&minus;name</b> style, so matches are placed in a
separate group where necessary. The group normally has its
elements sorted (by passing the option <b>&minus;J</b> to
<b>compadd</b>), but if an option starting with
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;, or
&lsquo;<b>&minus;2</b>&rsquo; is passed to
<b>_description</b>, that option will be included in the
array. Hence it is possible for the completion group to be
unsorted by giving the option &lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;1V</b>&rsquo;, or
&lsquo;<b>&minus;2V</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">In most cases,
the function will be used like this:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
_description files expl file <br>
compadd &quot;$expl[@]&quot; &minus;
&quot;$files[@]&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">Note the use of
the parameter <b>expl</b>, the hyphen, and the list of
matches. Almost all calls to <b>compadd</b> within the
completion system use a similar format; this ensures that
user&minus;specified styles are correctly passed down to the
builtins which implement the internals of completion.</p>

<p style="margin-left:11%;"><b>_dispatch</b> <i>context
string ...</i></p>

<p style="margin-left:22%;">This sets the current context
to <i>context</i> and looks for completion functions to
handle this context by hunting through the list of command
names or special contexts (as described above for
<b>compdef</b>) given as <i>string ...</i>. The first
completion function to be defined for one of the contexts in
the list is used to generate matches. Typically, the last
<i>string</i> is <b>&minus;default&minus;</b> to cause the
function for default completion to be used as a
fallback.</p>

<p style="margin-left:22%; margin-top: 1em">The function
sets the parameter <b>$service</b> to the <i>string</i>
being tried, and sets the <i>context/command</i> field (the
fourth) of the <b>$curcontext</b> parameter to the
<i>context</i> given as the first argument.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_files</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The function <b>_files</b> calls <b>_path_files</b> with
all the arguments it was passed except for <b>&minus;g</b>
and <b>&minus;/</b>. The use of these two options depends on
the setting of the <b>file&minus;patterns</b> style.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This function
accepts the full set of options allowed by
<b>_path_files</b>, described below.</p>

<p style="margin-left:11%;"><b>_gnu_generic</b></p>

<p style="margin-left:22%;">This function is a simple
wrapper around the <b>_arguments</b> function described
above. It can be used to determine automatically the long
options understood by commands that produce a list when
passed the option &lsquo;<b>&minus;&minus;help</b>&rsquo;.
It is intended to be used as a top&minus;level completion
function in its own right. For example, to enable option
completion for the commands <b>foo</b> and <b>bar</b>,
use</p>

<p style="margin-left:32%; margin-top: 1em"><b>compdef
_gnu_generic foo bar</b></p>

<p style="margin-left:22%; margin-top: 1em">after the call
to <b>compinit</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The completion
system as supplied is conservative in its use of this
function, since it is important to be sure the command
understands the option
&lsquo;<b>&minus;&minus;help</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>_guard</b> [ <i>options</i>
] <i>pattern descr</i></p>

<p style="margin-left:22%;">This function is intended to be
used in the <i>action</i> for the specifications passed to
<b>_arguments</b> and similar functions. It returns
immediately with a non&minus;zero return status if the
string to be completed does not match the <i>pattern</i>. If
the pattern matches, the <i>descr</i> is displayed; the
function then returns status zero if the word to complete is
not empty, non&minus;zero otherwise.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>pattern</i> may be preceded by any of the options
understood by <b>compadd</b> that are passed down from
<b>_description</b>, namely <b>&minus;M</b>,
<b>&minus;J</b>, <b>&minus;V</b>, <b>&minus;1</b>,
<b>&minus;2</b>, <b>&minus;n</b>, <b>&minus;F</b> and
<b>&minus;X</b>. All of these options will be ignored. This
fits in conveniently with the argument&minus;passing
conventions of actions for <b>_arguments</b>.</p>

<p style="margin-left:22%; margin-top: 1em">As an example,
consider a command taking the options <b>&minus;n</b> and
<b>&minus;none</b>, where <b>&minus;n</b> must be followed
by a numeric value in the same word. By using:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_arguments
&rsquo;&minus;n&minus;: :_guard &quot;[0&minus;9]#&quot;
&quot;numeric value&quot;&rsquo;
&rsquo;&minus;none&rsquo;</b></p>


<p style="margin-left:22%; margin-top: 1em"><b>_arguments</b>
can be made to both display the message &lsquo;<b>numeric
value</b>&rsquo; and complete options after
&lsquo;<b>&minus;n&lt;TAB&gt;</b>&rsquo;. If the
&lsquo;<b>&minus;n</b>&rsquo; is already followed by one or
more digits (the pattern passed to <b>_guard</b>) only the
message will be displayed; if the
&lsquo;<b>&minus;n</b>&rsquo; is followed by another
character, only options are completed.</p>

<p style="margin-left:11%;"><b>_message</b> [
<b>&minus;r12</b> ] [ <b>&minus;VJ</b> <i>group</i> ]
<i>descr</i> <b><br>
_message &minus;e</b> [ <i>tag</i> ] <i>descr</i></p>

<p style="margin-left:22%;">The <i>descr</i> is used in the
same way as the third argument to the <b>_description</b>
function, except that the resulting string will always be
shown whether or not matches were generated. This is useful
for displaying a help message in places where no completions
can be generated.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>format</b> style is examined with the <b>messages</b> tag
to find a message; the usual tag, <b>descriptions</b>, is
used only if the style is not set with the former.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;r</b> option is given, no style is used; the
<i>descr</i> is taken literally as the string to display.
This is most useful when the <i>descr</i> comes from a
pre&minus;processed argument list which already contains an
expanded description.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;12VJ</b> options and the <i>group</i> are passed
to <b>compadd</b> and hence determine the group the message
string is added to.</p>

<p style="margin-left:22%; margin-top: 1em">The second form
gives a description for completions with the tag <i>tag</i>
to be shown even if there are no matches for that tag. The
tag can be omitted and if so the tag is taken from the
parameter <b>$curtag</b>; this is maintained by the
completion system and so is usually correct.</p>

<p style="margin-left:11%;"><b>_multi_parts</b> <i>sep
array</i></p>

<p style="margin-left:22%;">The argument <i>sep</i> is a
separator character. The <i>array</i> may be either the name
of an array parameter or a literal array in the form
&lsquo;<b>(foo bar)</b>&rsquo;, a parenthesised list of
words separated by whitespace. The possible completions are
the strings from the array. However, each chunk delimited by
<i>sep</i> will be completed separately. For example, the
<b>_tar</b> function uses &lsquo;<b>_multi_parts /</b>
<i>patharray</i>&rsquo; to complete partial file paths from
the given array of complete file paths.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;i</b> option causes <b>_multi_parts</b> to insert
a unique match even if that requires multiple separators to
be inserted. This is not usually the expected behaviour with
filenames, but certain other types of completion, for
example those with a fixed set of possibilities, may be more
suited to this form.</p>

<p style="margin-left:22%; margin-top: 1em">Like other
utility functions, this function accepts the
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;f</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;,
&lsquo;<b>&minus;R</b>&rsquo;, and
&lsquo;<b>&minus;q</b>&rsquo; options and passes them to the
<b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_next_label</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag name
descr</i> [ <i>options</i> ... ]</p>

<p style="margin-left:22%;">This function is used to
implement the loop over different tag labels for a
particular tag as described above for the
<b>tag&minus;order</b> style. On each call it checks to see
if there are any more tag labels; if there is it returns
status zero, otherwise non&minus;zero. As this function
requires a current tag to be set, it must always follow a
call to <b>_tags</b> or <b>_requested</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;x12VJ</b> options and the first three arguments
are passed to the <b>_description</b> function. Where
appropriate the <i>tag</i> will be replaced by a tag label
in this call. Any description given in the
<b>tag&minus;order</b> style is preferred to the
<i>descr</i> passed to <b>_next_label</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>options</i> given after the <i>descr</i> are set in the
parameter given by <i>name</i>, and hence are to be passed
to <b>compadd</b> or whatever function is called to add the
matches.</p>

<p style="margin-left:22%; margin-top: 1em">Here is a
typical use of this function for the tag <b>foo</b>. The
call to <b>_requested</b> determines if tag <b>foo</b> is
required at all; the loop over <b>_next_label</b> handles
any labels defined for the tag in the <b>tag&minus;order</b>
style.</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
ret=1 <br>
... <br>
if _requested foo; then <br>
... <br>
while _next_label foo expl &rsquo;...&rsquo;; do <br>
compadd &quot;$expl[@]&quot; ... &amp;&amp; ret=0 <br>
done <br>
... <br>
fi <br>
return ret</b></p>

<p style="margin-left:11%;"><b>_normal</b></p>

<p style="margin-left:22%;">This is the standard function
called to handle completion outside any special
<i>&minus;context&minus;</i>. It is called both to complete
the command word and also the arguments for a command. In
the second case, <b>_normal</b> looks for a special
completion for that command, and if there is none it uses
the completion for the <b>&minus;default&minus;</b>
context.</p>

<p style="margin-left:22%; margin-top: 1em">A second use is
to reexamine the command line specified by the <b>$words</b>
array and the <b>$CURRENT</b> parameter after those have
been modified. For example, the function <b>_precommand</b>,
which completes after pre&minus;command specifiers such as
<b>nohup</b>, removes the first word from the <b>words</b>
array, decrements the <b>CURRENT</b> parameter, then calls
<b>_normal</b> again. The effect is that &lsquo;<b>nohup</b>
<i>cmd ...</i>&rsquo; is treated in the same way as
&lsquo;<i>cmd ...</i>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the command
name matches one of the patterns given by one of the options
<b>&minus;p</b> or <b>&minus;P</b> to <b>compdef</b>, the
corresponding completion function is called and then the
parameter <b>_compskip</b> is checked. If it is set
completion is terminated at that point even if no matches
have been found. This is the same effect as in the
<b>&minus;first&minus;</b> context.</p>

<p style="margin-left:11%;"><b>_options</b></p>

<p style="margin-left:22%;">This can be used to complete
the names of shell options. It provides a matcher
specification that ignores a leading
&lsquo;<b>no</b>&rsquo;, ignores underscores and allows
upper&minus;case letters to match their lower&minus;case
counterparts (for example, &lsquo;<b>glob</b>&rsquo;,
&lsquo;<b>noglob</b>&rsquo;, &lsquo;<b>NO_GLOB</b>&rsquo;
are all completed). Any arguments are propagated to the
<b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_options_set</b> and
<b>_options_unset</b></p>

<p style="margin-left:22%;">These functions complete only
set or unset options, with the same matching specification
used in the <b>_options</b> function.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
need to uncomment a few lines in the <b>_main_complete</b>
function for these functions to work properly. The lines in
question are used to store the option settings in effect
before the completion widget locally sets the options it
needs. Hence these functions are not generally used by the
completion system.</p>

<p style="margin-left:11%;"><b>_parameters</b></p>

<p style="margin-left:22%;">This is used to complete the
names of shell parameters.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;g</b> <i>pattern</i>&rsquo; limits the
completion to parameters whose type matches the
<i>pattern</i>. The type of a parameter is that shown by
&lsquo;<b>print ${(t)</b><i>param</i><b>}</b>&rsquo;, hence
judicious use of &lsquo;<b>*</b>&rsquo; in <i>pattern</i> is
probably necessary.</p>

<p style="margin-left:22%; margin-top: 1em">All other
arguments are passed to the <b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_path_files</b></p>

<p style="margin-left:22%;">This function is used
throughout the completion system to complete filenames. It
allows completion of partial paths. For example, the string
&lsquo;<b>/u/i/s/sig</b>&rsquo; may be completed to
&lsquo;<b>/usr/include/sys/signal.h</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The options
accepted by both <b>_path_files</b> and <b>_files</b>
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Complete all filenames. This is the default.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;/</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Specifies that only directories should be completed.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;g</b>
<i>pattern</i></p>

<p style="margin-left:32%;">Specifies that only files
matching the <i>pattern</i> should be completed.</p>

<p style="margin-left:22%;"><b>&minus;W</b>
<i>paths</i></p>

<p style="margin-left:32%;">Specifies path prefixes that
are to be prepended to the string from the command line to
generate the filenames but that should not be inserted as
completions nor shown in completion listings. Here,
<i>paths</i> may be the name of an array parameter, a
literal list of paths enclosed in parentheses or an absolute
pathname.</p>

<p style="margin-left:22%;"><b>&minus;F</b>
<i>ignored&minus;files</i></p>

<p style="margin-left:32%;">This behaves as for the
corresponding option to the <b>compadd</b> builtin. It gives
direct control over which filenames should be ignored. If
the option is not present, the <b>ignored&minus;patterns</b>
style is used.</p>

<p style="margin-left:22%; margin-top: 1em">Both
<b>_path_files</b> and <b>_files</b> also accept the
following options which are passed to <b>compadd</b>:
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;q</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;, and
&lsquo;<b>&minus;R</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, the
<b>_path_files</b> function uses the styles <b>expand</b>,
<b>ambiguous</b>, <b>special&minus;dirs</b>,
<b>list&minus;suffixes</b> and <b>file&minus;sort</b>
described above.</p>

<p style="margin-left:11%;"><b>_pick_variant</b> [
<b>&minus;b</b> <i>builtin&minus;label</i> ] [
<b>&minus;c</b></p>

<p style="margin-left:22%;"><i>command</i> ] [
<b>&minus;r</b> <i>name</i> ]</p>


<p style="margin-left:11%;"><i>label</i><b>=</b><i>pattern</i>
... <i>label</i> [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">This function is used to
resolve situations where a single command name requires more
than one type of handling, either because it has more than
one variant or because there is a name clash between two
different commands.</p>

<p style="margin-left:22%; margin-top: 1em">The command to
run is taken from the first element of the array
<b>words</b> unless this is overridden by the option
<b>&minus;c</b>. This command is run and its output is
compared with a series of patterns. Arguments to be passed
to the command can be specified at the end after all the
other arguments. The patterns to try in order are given by
the arguments <i>label</i><b>=</b><i>pattern</i>; if the
output of &lsquo;<i>command args</i> <b>...</b>&rsquo;
contains <i>pattern</i>, then <b>label</b> is selected as
the label for the command variant. If none of the patterns
match, the final command label is selected and status 1 is
returned.</p>

<p style="margin-left:22%; margin-top: 1em">If the
&lsquo;<b>&minus;b</b> <i>builtin&minus;label</i>&rsquo; is
given, the command is tested to see if it is provided as a
shell builtin, possibly autoloaded; if so, the label
<i>builtin&minus;label</i> is selected as the label for the
variant.</p>

<p style="margin-left:22%; margin-top: 1em">If the
&lsquo;<b>&minus;r</b> <i>name</i>&rsquo; is given, the
<i>label</i> picked is stored in the parameter named
<i>name</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The results are
also cached in the <i>_cmd_variant</i> associative array
indexed by the name of the command run.</p>

<p style="margin-left:11%;"><b>_regex_arguments</b> <i>name
spec</i> ...</p>

<p style="margin-left:22%;">This function generates a
completion function <i>name</i> which matches the
specifications <i>spec</i> <b>...</b>, a set of regular
expressions as described below. After running
<b>_regex_arguments</b>, the function <i>name</i> should be
called as a normal completion function. The pattern to be
matched is given by the contents of the <b>words</b> array
up to the current cursor position joined together with null
characters; no quotation is applied.</p>

<p style="margin-left:22%; margin-top: 1em">The arguments
are grouped as sets of alternatives separated by
&lsquo;<b>|</b>&rsquo;, which are tried one after the other
until one matches. Each alternative consists of a one or
more specifications which are tried left to right, with each
pattern matched being stripped in turn from the command line
being tested, until all of the group succeeds or until one
fails; in the latter case, the next alternative is tried.
This structure can be repeated to arbitrary depth by using
parentheses; matching proceeds from inside to outside.</p>

<p style="margin-left:22%; margin-top: 1em">A special
procedure is applied if no test succeeds but the remaining
command line string contains no null character (implying the
remaining word is the one for which completions are to be
generated). The completion target is restricted to the
remaining word and any <i>action</i>s for the corresponding
patterns are executed. In this case, nothing is stripped
from the command line string. The order of evaluation of the
<i>action</i>s can be determined by the
<b>tag&minus;order</b> style; the various formats supported
by <b>_alternative</b> can be used in <i>action</i>. The
<i>descr</i> is used for setting up the array parameter
<b>expl</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Specification
arguments take one of following forms, in which
metacharacters such as &lsquo;<b>(</b>&rsquo;,
&lsquo;<b>)</b>&rsquo;, &lsquo;<b>#</b>&rsquo; and
&lsquo;<b>|</b>&rsquo; should be quoted. <b><br>
/</b><i>pattern</i><b>/</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is a single primitive
component. The function tests whether the combined pattern
&lsquo;<b>(#b)((#B)</b><i>pattern</i><b>)</b><i>lookahead</i><b>*</b>&rsquo;
matches the command line string. If so,
&lsquo;<i>guard</i>&rsquo; is evaluated and its return
status is examined to determine if the test has succeeded.
The <i>pattern</i> string &lsquo;<b>[]</b>&rsquo; is
guaranteed never to match. The <i>lookahead</i> is not
stripped from the command line before the next pattern is
examined.</p>

<p style="margin-left:32%; margin-top: 1em">The argument
starting with <b>:</b> is used in the same manner as an
argument to <b>_alternative</b>.</p>

<p style="margin-left:32%; margin-top: 1em">A component is
used as follows: <i>pattern</i> is tested to see if the
component already exists on the command line. If it does,
any following specifications are examined to find something
to complete. If a component is reached but no such pattern
exists yet on the command line, the string containing the
<i>action</i> is used to generate matches to insert at that
point.</p>


<p style="margin-left:22%;"><b>/</b><i>pattern</i><b>/+</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is similar to
&lsquo;<b>/</b><i>pattern</i><b>/</b> ...&rsquo; but the
left part of the command line string (i.e. the part already
matched by previous patterns) is also considered part of the
completion target.</p>


<p style="margin-left:22%;"><b>/</b><i>pattern</i><b>/&minus;</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is similar to
&lsquo;<b>/</b><i>pattern</i><b>/</b> ...&rsquo; but the
<i>action</i>s of the current and previously matched
patterns are ignored even if the following
&lsquo;<i>pattern</i>&rsquo; matches the empty string.</p>

<p style="margin-left:22%;"><b>(</b> <i>spec</i>
<b>)</b></p>

<p style="margin-left:32%;">Parentheses may be used to
groups <i>spec</i>s; note each parenthesis is a single
argument to <b>_regex_arguments</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>spec</i> <b>#</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>This allows any number of repetitions of
<i>spec</i>.</p> </td></tr>
</table>

<p style="margin-left:22%;"><i>spec spec</i></p>

<p style="margin-left:32%;">The two <i>spec</i>s are to be
matched one after the other as described above.</p>

<p style="margin-left:22%;"><i>spec</i> <b>|</b>
<i>spec</i></p>

<p style="margin-left:32%;">Either of the two <i>spec</i>s
can be matched.</p>

<p style="margin-left:22%; margin-top: 1em">The function
<b>_regex_words</b> can be used as a helper function to
generate matches for a set of alternative words possibly
with their own arguments as a command line argument.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
/$&rsquo;[^\0]#\0&rsquo;/ :&rsquo;compadd aaa&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This generates
a function <b>_tst</b> that completes <b>aaa</b> as its only
argument. The <i>tag</i> and <i>description</i> for the
action have been omitted for brevity (this works but is not
recommended in normal use). The first component matches the
command word, which is arbitrary; the second matches any
argument. As the argument is also arbitrary, any following
component would not depend on <b>aaa</b> being present.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
/$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This is a more
typical use; it is similar, but any following patterns would
only match if <b>aaa</b> was present as the first
argument.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \( \ <br>
/$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo; \ <br>
/$&rsquo;bbb\0&rsquo;/ :&rsquo;compadd bbb&rsquo; \)
\#</b></p>

<p style="margin-left:22%; margin-top: 1em">In this
example, an indefinite number of command arguments may be
completed. Odd arguments are completed as <b>aaa</b> and
even arguments as <b>bbb</b>. Completion fails unless the
set of <b>aaa</b> and <b>bbb</b> arguments before the
current one is matched correctly.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
\( /$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo; \| \
<br>
/$&rsquo;bbb\0&rsquo;/ :&rsquo;compadd bbb&rsquo; \)
\#</b></p>

<p style="margin-left:22%; margin-top: 1em">This is
similar, but either <b>aaa</b> or <b>bbb</b> may be
completed for any argument. In this case <b>_regex_words</b>
could be used to generate a suitable expression for the
arguments.</p>

<p style="margin-left:11%;"><b>_regex_words</b> <i>tag
description spec</i> ...</p>

<p style="margin-left:22%;">This function can be used to
generate arguments for the <b>_regex_arguments</b> command
which may be inserted at any point where a set of rules is
expected. The <i>tag</i> and <i>description</i> give a
standard tag and description pertaining to the current
context. Each <i>spec</i> contains two or three arguments
separated by a colon: note that there is no leading colon in
this case.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>spec</i> gives one of a set of words that may be
completed at this point, together with arguments. It is thus
roughly equivalent to the <b>_arguments</b> function when
used in normal (non&minus;regex) completion.</p>

<p style="margin-left:22%; margin-top: 1em">The part of the
<i>spec</i> before the first colon is the word to be
completed. This may contain a <b>*</b>; the entire word,
before and after the <b>*</b> is completed, but only the
text before the <b>*</b> is required for the context to be
matched, so that further arguments may be completed after
the abbreviated form.</p>

<p style="margin-left:22%; margin-top: 1em">The second part
of <i>spec</i> is a description for the word being
completed.</p>

<p style="margin-left:22%; margin-top: 1em">The optional
third part of the <i>spec</i> describes how words following
the one being completed are themselves to be completed. It
will be evaluated in order to avoid problems with quoting.
This means that typically it contains a reference to an
array containing previously generated regex arguments.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;t</b> <i>term</i> specifies a terminator for the
word instead of the usual space. This is handled as an
auto&minus;removable suffix in the manner of the option
<b>&minus;s</b> <i>sep</i> to <b>_values</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The result of
the processing by <b>_regex_words</b> is placed in the array
<b>reply</b>, which should be made local to the calling
function. If the set of words and arguments may be matched
repeatedly, a <b>#</b> should be appended to the generated
array at that point.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
&minus;a reply <br>
_regex_words mydb&minus;commands &rsquo;mydb commands&rsquo;
\ <br>
&rsquo;add:add an entry to mydb:$mydb_add_cmds&rsquo; \ <br>
&rsquo;show:show entries in mydb&rsquo; <br>
_regex_arguments _mydb &quot;$reply[@]&quot; <br>
_mydb &quot;$@&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">This shows a
completion function for a command <b>mydb</b> which takes
two command arguments, <b>add</b> and <b>show</b>.
<b>show</b> takes no arguments, while the arguments for
<b>add</b> have already been prepared in an array
<b>mydb_add_cmds</b>, quite possibly by a previous call to
<b>_regex_words</b>.</p>

<p style="margin-left:11%;"><b>_requested</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag</i> [
<i>name descr</i> [ <i>command args</i> ... ] ]</p>

<p style="margin-left:22%;">This function is called to
decide whether a tag already registered by a call to
<b>_tags</b> (see below) has been requested by the user and
hence completion should be performed for it. It returns
status zero if the tag is requested and non&minus;zero
otherwise. The function is typically used as part of a loop
over different tags as follows:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_tags foo
bar baz <br>
while _tags; do <br>
if _requested foo; then <br>
... # perform completion for foo <br>
fi <br>
... # test the tags bar and baz in the same way <br>
... # exit loop if matches were generated <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that the
test for whether matches were generated is not performed
until the end of the <b>_tags</b> loop. This is so that the
user can set the <b>tag&minus;order</b> style to specify a
set of tags to be completed at the same time.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>name</i>
and <i>descr</i> are given, <b>_requested</b> calls the
<b>_description</b> function with these arguments together
with the options passed to <b>_requested</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>command</i> is given, the <b>_all_labels</b> function
will be called immediately with the same arguments. In
simple cases this makes it possible to perform the test for
the tag and the matching in one go. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
ret=1 <br>
_tags foo bar baz <br>
while _tags; do <br>
_requested foo expl &rsquo;description&rsquo; \ <br>
compadd foobar foobaz &amp;&amp; ret=0 <br>
... <br>
(( ret )) || break <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>command</i> is not <b>compadd</b>, it must nevertheless
be prepared to handle the same options.</p>

<p style="margin-left:11%;"><b>_retrieve_cache</b>
<i>cache_identifier</i></p>

<p style="margin-left:22%;">This function retrieves
completion information from the file given by
<i>cache_identifier</i>, stored in a directory specified by
the <b>cache&minus;path</b> style which defaults to
<b>~/.zcompcache</b>. The return status is zero if retrieval
was successful. It will only attempt retrieval if the
<b>use&minus;cache</b> style is set, so you can call this
function without worrying about whether the user wanted to
use the caching layer.</p>

<p style="margin-left:22%; margin-top: 1em">See
<b>_store_cache</b> below for more details.</p>

<p style="margin-left:11%;"><b>_sep_parts</b></p>

<p style="margin-left:22%;">This function is passed
alternating arrays and separators as arguments. The arrays
specify completions for parts of strings to be separated by
the separators. The arrays may be the names of array
parameters or a quoted list of words in parentheses. For
example, with the array &lsquo;<b>hosts=(ftp
news)</b>&rsquo; the call &lsquo;<b>_sep_parts &rsquo;(foo
bar)&rsquo; @ hosts</b>&rsquo; will complete the string
&lsquo;<b>f</b>&rsquo; to &lsquo;<b>foo</b>&rsquo; and the
string &lsquo;<b>b@n</b>&rsquo; to
&lsquo;<b>bar@news</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">This function
accepts the <b>compadd</b> options
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;,
&lsquo;<b>&minus;R</b>&rsquo;, and
&lsquo;<b>&minus;q</b>&rsquo; and passes them on to the
<b>compadd</b> builtin used to add the matches.</p>

<p style="margin-left:11%;"><b>_setup</b> <i>tag</i> [
<i>group</i> ]</p>

<p style="margin-left:22%;">This function sets up the
special parameters used by the completion system
appropriately for the <i>tag</i> given as the first
argument. It uses the styles <b>list&minus;colors</b>,
<b>list&minus;packed</b>,
<b>list&minus;rows&minus;first</b>,
<b>last&minus;prompt</b>, <b>accept&minus;exact</b>,
<b>menu</b> and <b>force&minus;list</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The optional
<i>group</i> supplies the name of the group in which the
matches will be placed. If it is not given, the <i>tag</i>
is used as the group name.</p>

<p style="margin-left:22%; margin-top: 1em">This function
is called automatically from <b>_description</b> and hence
is not normally called explicitly.</p>

<p style="margin-left:11%;"><b>_store_cache</b>
<i>cache_identifier params</i> ...</p>

<p style="margin-left:22%;">This function, together with
<b>_retrieve_cache</b> and <b>_cache_invalid</b>, implements
a caching layer which can be used in any completion
function. Data obtained by costly operations are stored in
parameters; this function then dumps the values of those
parameters to a file. The data can then be retrieved quickly
from that file via <b>_retrieve_cache</b>, even in different
instances of the shell.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>cache_identifier</i> specifies the file which the data
should be dumped to. The file is stored in a directory
specified by the <b>cache&minus;path</b> style which
defaults to <b>~/.zcompcache</b>. The remaining
<i>params</i> arguments are the parameters to dump to the
file.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status is zero if storage was successful. The function will
only attempt storage if the <b>use&minus;cache</b> style is
set, so you can call this function without worrying about
whether the user wanted to use the caching layer.</p>

<p style="margin-left:22%; margin-top: 1em">The completion
function may avoid calling <b>_retrieve_cache</b> when it
already has the completion data available as parameters.
However, in that case it should call <b>_cache_invalid</b>
to check whether the data in the parameters and in the cache
are still valid.</p>

<p style="margin-left:22%; margin-top: 1em">See the
_perl_modules completion function for a simple example of
the usage of the caching layer.</p>

<p style="margin-left:11%;"><b>_tags</b> [ [
<b>&minus;C</b> <i>name</i> ] <i>tags</i> ... ]</p>

<p style="margin-left:22%;">If called with arguments, these
are taken to be the names of tags valid for completions in
the current context. These tags are stored internally and
sorted by using the <b>tag&minus;order</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">Next,
<b>_tags</b> is called repeatedly without arguments from the
same completion function. This successively selects the
first, second, etc. set of tags requested by the user. The
return status is zero if at least one of the tags is
requested and non&minus;zero otherwise. To test if a
particular tag is to be tried, the <b>_requested</b>
function should be called (see above).</p>

<p style="margin-left:22%; margin-top: 1em">If
&lsquo;<b>&minus;C</b> <i>name</i>&rsquo; is given,
<i>name</i> is temporarily stored in the argument field (the
fifth) of the context in the <b>curcontext</b> parameter
during the call to <b>_tags</b>; the field is restored on
exit. This allows <b>_tags</b> to use a more specific
context without having to change and reset the
<b>curcontext</b> parameter (which has the same effect).</p>

<p style="margin-left:11%;"><b>_values</b> [
<b>&minus;O</b> <i>name</i> ] [ <b>&minus;s</b> <i>sep</i> ]
[ <b>&minus;S</b> <i>sep</i> ] [ <b>&minus;wC</b> ] <i>desc
spec</i> ...</p>

<p style="margin-left:22%;">This is used to complete
arbitrary keywords (values) and their arguments, or lists of
such combinations.</p>

<p style="margin-left:22%; margin-top: 1em">If the first
argument is the option &lsquo;<b>&minus;O</b>
<i>name</i>&rsquo;, it will be used in the same way as by
the <b>_arguments</b> function. In other words, the elements
of the <i>name</i> array will be passed to <b>compadd</b>
when executing an action.</p>

<p style="margin-left:22%; margin-top: 1em">If the first
argument (or the first argument after &lsquo;<b>&minus;O</b>
<i>name</i>&rsquo;) is &lsquo;<b>&minus;s</b>&rsquo;, the
next argument is used as the character that separates
multiple values. This character is automatically added after
each value in an auto&minus;removable fashion (see below);
all values completed by &lsquo;<b>_values
&minus;s</b>&rsquo; appear in the same word on the command
line, unlike completion using <b>_arguments</b>. If this
option is not present, only a single value will be completed
per word.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>_values</b> will only use the current word to determine
which values are already present on the command line and
hence are not to be completed again. If the <b>&minus;w</b>
option is given, other arguments are examined as well.</p>

<p style="margin-left:22%; margin-top: 1em">The first
non&minus;option argument is used as a string to print as a
description before listing the values.</p>

<p style="margin-left:22%; margin-top: 1em">All other
arguments describe the possible values and their arguments
in the same format used for the description of options by
the <b>_arguments</b> function (see above). The only
differences are that no minus or plus sign is required at
the beginning, values can have only one argument, and the
forms of action beginning with an equal sign are not
supported.</p>

<p style="margin-left:22%; margin-top: 1em">The character
separating a value from its argument can be set using the
option <b>&minus;S</b> (like <b>&minus;s</b>, followed by
the character to use as the separator in the next argument).
By default the equals sign will be used as the separator
between values and arguments.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_values
&minus;s , &rsquo;description&rsquo; \ <br>
&rsquo;*foo[bar]&rsquo; \ <br>
&rsquo;(two)*one[number]:first count:&rsquo; \ <br>
&rsquo;two[another number]::second count:(1 2
3)&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This describes
three possible values: &lsquo;<b>foo</b>&rsquo;,
&lsquo;<b>one</b>&rsquo;, and &lsquo;<b>two</b>&rsquo;. The
first is described as &lsquo;<b>bar</b>&rsquo;, takes no
argument and may appear more than once. The second is
described as &lsquo;<b>number</b>&rsquo;, may appear more
than once, and takes one mandatory argument described as
&lsquo;<b>first count</b>&rsquo;; no action is specified, so
it will not be completed. The &lsquo;<b>(two)</b>&rsquo; at
the beginning says that if the value
&lsquo;<b>one</b>&rsquo; is on the line, the value
&lsquo;<b>two</b>&rsquo; will no longer be considered a
possible completion. Finally, the last value
(&lsquo;<b>two</b>&rsquo;) is described as &lsquo;<b>another
number</b>&rsquo; and takes an optional argument described
as &lsquo;<b>second count</b>&rsquo; for which the
completions (to appear after an &lsquo;<b>=</b>&rsquo;) are
&lsquo;<b>1</b>&rsquo;, &lsquo;<b>2</b>&rsquo;, and
&lsquo;<b>3</b>&rsquo;. The <b>_values</b> function will
complete lists of these values separated by commas.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_arguments</b>, this function temporarily adds another
context name component to the arguments element (the fifth)
of the current context while executing the <i>action</i>.
Here this name is just the name of the value for which the
argument is completed.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>verbose</b> is used to decide if the descriptions for the
values (but not those for the arguments) should be
printed.</p>

<p style="margin-left:22%; margin-top: 1em">The associative
array <b>val_args</b> is used to report values and their
arguments; this works similarly to the <b>opt_args</b>
associative array used by <b>_arguments</b>. Hence the
function calling <b>_values</b> should declare the local
parameters <b>state</b>, <b>state_descr</b>, <b>line</b>,
<b>context</b> and <b>val_args</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
context state state_descr line <br>
typeset &minus;A val_args</b></p>

<p style="margin-left:22%; margin-top: 1em">when using an
action of the form
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;. With this
function the <b>context</b> parameter will be set to the
name of the value whose argument is to be completed. Note
that for <b>_values</b>, the <b>state</b> and
<b>state_descr</b> are scalars rather than arrays. Only a
single matching state is returned.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
<b>_values</b> normally adds the character used as the
separator between values as an auto&minus;removable suffix
(similar to a &lsquo;<b>/</b>&rsquo; after a directory).
However, this is not possible for a
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; action as the
matches for the argument are generated by the calling
function. To get the usual behaviour, the calling function
can add the separator <i>x</i> as a suffix by passing the
options &lsquo;<b>&minus;qS</b> <i>x</i>&rsquo; either
directly or indirectly to <b>compadd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;C</b> is treated in the same way as it is by
<b>_arguments</b>. In that case the parameter
<b>curcontext</b> should be made local instead of
<b>context</b> (as described above).</p>

<p style="margin-left:11%;"><b>_wanted</b> [
<b>&minus;x</b> ] [ <b>&minus;C</b> <i>name</i> ] [
<b>&minus;12VJ</b> ] <i>tag name descr command args</i>
...</p>

<p style="margin-left:22%;">In many contexts, completion
can only generate one particular set of matches, usually
corresponding to a single tag. However, it is still
necessary to decide whether the user requires matches of
this type. This function is useful in such a case.</p>

<p style="margin-left:22%; margin-top: 1em">The arguments
to <b>_wanted</b> are the same as those to
<b>_requested</b>, i.e. arguments to be passed to
<b>_description</b>. However, in this case the
<i>command</i> is not optional; all the processing of tags,
including the loop over both tags and tag labels and the
generation of matches, is carried out automatically by
<b>_wanted</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Hence to offer
only one tag and immediately add the corresponding matches
with the given description:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
_wanted tag expl &rsquo;description&rsquo; \ <br>
compadd matches...</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that, as
for <b>_requested</b>, the <i>command</i> must be able to
accept options to be passed down to <b>compadd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_tags</b> this function supports the <b>&minus;C</b>
option to give a different name for the argument context
field. The <b>&minus;x</b> option has the same meaning as
for <b>_description</b>.</p>

<h2>COMPLETION DIRECTORIES
<a name="COMPLETION DIRECTORIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In the source
distribution, the files are contained in various
subdirectories of the <b>Completion</b> directory. They may
have been installed in the same structure, or into one
single function directory. The following is a description of
the files found in the original directory structure. If you
wish to alter an installed file, you will need to copy it to
some directory which appears earlier in your <b>fpath</b>
than the standard directory where it appears.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Base</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The core functions and special completion widgets
automatically bound to keys. You will certainly need most of
these, though will probably not need to alter them. Many of
these are documented above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Zsh</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Functions for completing arguments of shell builtin
commands and utility functions for this. Some of these are
also used by functions from the <b>Unix</b> directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Unix</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Functions for completing arguments of external commands
and suites of commands. They may need modifying for your
system, although in many cases some attempt is made to
decide which version of a command is present. For example,
completion for the <b>mount</b> command tries to determine
the system it is running on, while completion for many other
utilities try to decide whether the GNU version of the
command is in use, and hence whether the
<b>&minus;&minus;help</b> option is supported.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>X</b>, <b>AIX</b>,
<b>BSD</b>, ...</p>

<p style="margin-left:22%;">Completion and utility function
for commands available only on some systems. These are not
arranged hierarchically, so, for example, both the
<b>Linux</b> and <b>Debian</b> directories, as well as the
<b>X</b> directory, may be useful on your system.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshcompctl &minus; zsh
programmable completion</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This version of
zsh has two ways of performing completion of words on the
command line. New users of the shell may prefer to use the
newer and more powerful system based on shell functions;
this is described in <i>zshcompsys</i>(1), and the basic
shell mechanisms which support it are described in
<i>zshcompwid</i>(1). This manual entry describes the older
<b>compctl</b> command. <b><br>
compctl</b> [ <b>&minus;CDT</b> ] <i>options</i> [
<i>command</i> ... ] <b><br>
compctl</b> [ <b>&minus;CDT</b> ] <i>options</i> [
<b>&minus;x</b> <i>pattern options</i> <b>&minus;</b> ...
<b>&minus;&minus;</b> ] [ <b>+</b> <i>options</i> [ <b><br>
&minus;x</b> ... <b>&minus;&minus;</b> ] ... [<b>+</b>] ] [
<i>command</i> ... ] <b><br>
compctl &minus;M</b> <i>match&minus;specs</i> ... <b><br>
compctl &minus;L</b> [ <b>&minus;CDTM</b> ] [ <i>command</i>
... ] <b><br>
compctl +</b> <i>command</i> ...</p>

<p style="margin-left:11%; margin-top: 1em">Control the
editor&rsquo;s completion behavior according to the supplied
set of <i>options</i>. Various editing commands, notably
<b>expand&minus;or&minus;complete&minus;word</b>, usually
bound to tab, will attempt to complete a word typed by the
user, while others, notably
<b>delete&minus;char&minus;or&minus;list</b>, usually bound
to ^D in EMACS editing mode, list the possibilities;
<b>compctl</b> controls what those possibilities are. They
may for example be filenames (the most common case, and
hence the default), shell variables, or words from a
user&minus;specified list.</p>

<h2>COMMAND FLAGS
<a name="COMMAND FLAGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Completion of
the arguments of a command may be different for each command
or may use the default. The behavior when completing the
command word itself may also be separately specified. These
correspond to the following flags and arguments, all of
which (except for <b>&minus;L</b>) may be combined with any
combination of the <i>options</i> described subsequently in
the section &lsquo;Option Flags&rsquo;: <i><br>
command</i> ...</p>

<p style="margin-left:22%;">controls completion for the
named commands, which must be listed last on the command
line. If completion is attempted for a command with a
pathname containing slashes and no completion definition is
found, the search is retried with the last pathname
component. If the command starts with a <b>=</b>, completion
is tried with the pathname of the command.</p>

<p style="margin-left:22%; margin-top: 1em">Any of the
<i>command</i> strings may be patterns of the form normally
used for filename generation. These should be quoted to
protect them from immediate expansion; for example the
command string <b>&rsquo;foo*&rsquo;</b> arranges for
completion of the words of any command beginning with
<b>foo</b>. When completion is attempted, all pattern
completions are tried in the reverse order of their
definition until one matches. By default, completion then
proceeds as normal, i.e. the shell will try to generate more
matches for the specific command on the command line; this
can be overridden by including <b>&minus;tn</b> in the flags
for the pattern completion.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
aliases are expanded before the command name is determined
unless the <b>COMPLETE_ALIASES</b> option is set. Commands
may not be combined with the <b>&minus;C</b>,
<b>&minus;D</b> or <b>&minus;T</b> flags.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>controls completion when the command word itself is
being completed. If no <b>compctl &minus;C</b> command has
been issued, the names of any executable command (whether in
the path or specific to the shell, such as aliases or
functions) are completed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>controls default completion behavior for the arguments
of commands not assigned any special behavior. If no
<b>compctl &minus;D</b> command has been issued, filenames
are completed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>supplies completion flags to be used before any other
processing is done, even before processing for
<b>compctl</b>s defined for specific commands. This is
especially useful when combined with extended completion
(the <b>&minus;x</b> flag, see the section &lsquo;Extended
Completion&rsquo; below). Using this flag you can define
default behavior which will apply to all commands without
exception, or you can alter the standard behavior for all
commands. For example, if your access to the user database
is too slow and/or it contains too many users (so that
completion after &lsquo;<b>~</b>&rsquo; is too slow to be
usable), you can use</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;T &minus;x &rsquo;s[~] C[0,[^/]#]&rsquo; &minus;k
friends &minus;S/ &minus;tn</b></p>

<p style="margin-left:22%; margin-top: 1em">to complete the
strings in the array <b>friends</b> after a
&lsquo;<b>~</b>&rsquo;. The <b>C[...]</b> argument is
necessary so that this form of ~&minus;completion is not
tried after the directory name is finished.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;L</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">lists the existing completion
behavior in a manner suitable for putting into a
start&minus;up script; the existing behavior is not changed.
Any combination of the above forms, or the <b>&minus;M</b>
flag (which must follow the <b>&minus;L</b> flag), may be
specified, otherwise all defined completions are listed. Any
other flags supplied are ignored.</p></td></tr>
</table>

<p style="margin-left:11%;"><i>no argument</i></p>

<p style="margin-left:22%;">If no argument is given,
<b>compctl</b> lists all defined completions in an
abbreviated form; with a list of <i>options</i>, all
completions with those flags set (not counting extended
completion) are listed.</p>

<p style="margin-left:11%; margin-top: 1em">If the <b>+</b>
flag is alone and followed immediately by the <i>command</i>
list, the completion behavior for all the commands in the
list is reset to the default. In other words, completion
will subsequently use the options specified by the
<b>&minus;D</b> flag.</p>

<p style="margin-left:11%; margin-top: 1em">The form with
<b>&minus;M</b> as the first and only option defines global
matching specifications (see zshcompwid). The match
specifications given will be used for every completion
attempt (only when using <b>compctl</b>, not with the new
completion system) and are tried in the order in which they
are defined until one generates at least one match.
E.g.:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compctl
&minus;M &rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This will first
try completion without any global match specifications (the
empty string) and, if that generates no matches, will try
case insensitive completion.</p>

<h2>OPTION FLAGS
<a name="OPTION FLAGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">[
<b>&minus;fcFBdeaRGovNAIOPZEnbjrzu/12</b> ] <br>
[ <b>&minus;k</b> <i>array</i> ] [ <b>&minus;g</b>
<i>globstring</i> ] [ <b>&minus;s</b> <i>subststring</i> ]
<br>
[ <b>&minus;K</b> <i>function</i> ] <br>
[ <b>&minus;Q</b> ] [ <b>&minus;P</b> <i>prefix</i> ] [
<b>&minus;S</b> <i>suffix</i> ] <br>
[ <b>&minus;W</b> <i>file&minus;prefix</i> ] [
<b>&minus;H</b> <i>num pattern</i> ] <br>
[ <b>&minus;q</b> ] [ <b>&minus;X</b> <i>explanation</i> ] [
<b>&minus;Y</b> <i>explanation</i> ] <br>
[ <b>&minus;y</b> <i>func&minus;or&minus;var</i> ] [
<b>&minus;l</b> <i>cmd</i> ] [ <b>&minus;h</b> <i>cmd</i> ]
[ <b>&minus;U</b> ] <br>
[ <b>&minus;t</b> <i>continue</i> ] [ <b>&minus;J</b>
<i>name</i> ] [ <b>&minus;V</b> <i>name</i> ] <br>
[ <b>&minus;M</b> <i>match&minus;spec</i> ]</p>

<p style="margin-left:11%; margin-top: 1em">The remaining
<i>options</i> specify the type of command arguments to look
for during completion. Any combination of these flags may be
specified; the result is a sorted list of all the
possibilities. The options are as follows.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Simple
Flags</b> <br>
These produce completion lists made up by the shell
itself:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Filenames and file system paths.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;/</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Just file system paths.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Command names, including aliases, shell functions,
builtins and reserved words.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Function names.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;B</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of builtin commands.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of external commands.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Reserved words.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Alias names.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of regular (non&minus;global) aliases.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;G</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of global aliases.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This can be combined with <b>&minus;F</b>,
<b>&minus;B</b>, <b>&minus;w</b>, <b>&minus;a</b>,
<b>&minus;R</b> and <b>&minus;G</b> to get names of disabled
functions, builtins, reserved words or aliases.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This option (to show enabled commands) is in effect by
default, but may be combined with <b>&minus;d</b>;
<b>&minus;de</b> in combination with <b>&minus;F</b>,
<b>&minus;B</b>, <b>&minus;w</b>, <b>&minus;a</b>,
<b>&minus;R</b> and <b>&minus;G</b> will complete names of
functions, builtins, reserved words or aliases whether or
not they are disabled.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of shell options (see <i>zshoptions</i>(1)).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of any variable defined in the shell.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of scalar (non&minus;array) parameters.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;A</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Array names.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;I</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of integer variables.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;O</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of read&minus;only variables.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of parameters used by the shell (including special
parameters).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;Z</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of shell special parameters.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of environment variables.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Named directories.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Key binding names.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;j</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Job names: the first word of the job leader&rsquo;s
command line. This is useful with the <b>kill</b>
builtin.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of running jobs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;z</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Names of suspended jobs.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>User names.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Flags with
Arguments</b> <br>
These have user supplied arguments to determine how the list
of completions is to be made up: <b><br>
&minus;k</b> <i>array</i></p>

<p style="margin-left:22%;">Names taken from the elements
of <b>$</b><i>array</i> (note that the
&lsquo;<b>$</b>&rsquo; does not appear on the command line).
Alternatively, the argument <i>array</i> itself may be a set
of space&minus; or comma&minus;separated values in
parentheses, in which any delimiter may be escaped with a
backslash; in this case the argument should be quoted. For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;k &quot;(cputime filesize datasize stacksize</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p><b>coredumpsize resident descriptors)&quot;
limit</b></p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;g</b>
<i>globstring</i></p>

<p style="margin-left:22%;">The <i>globstring</i> is
expanded using filename globbing; it should be quoted to
protect it from immediate expansion. The resulting filenames
are taken as the possible completions. Use
&lsquo;<b>*(/)</b>&rsquo; instead of &lsquo;<b>*/</b>&rsquo;
for directories. The <b>fignore</b> special parameter is not
applied to the resulting files. More than one pattern may be
given separated by blanks. (Note that brace expansion is
<i>not</i> part of globbing. Use the syntax
&lsquo;<b>(either|or)</b>&rsquo; to match alternatives.)</p>

<p style="margin-left:11%;"><b>&minus;s</b>
<i>subststring</i></p>

<p style="margin-left:22%;">The <i>subststring</i> is split
into words and these words are than expanded using all shell
expansion mechanisms (see <i>zshexpn</i>(1)). The resulting
words are taken as possible completions. The <b>fignore</b>
special parameter is not applied to the resulting files.
Note that <b>&minus;g</b> is faster for filenames.</p>

<p style="margin-left:11%;"><b>&minus;K</b>
<i>function</i></p>

<p style="margin-left:22%;">Call the given function to get
the completions. Unless the name starts with an underscore,
the function is passed two arguments: the prefix and the
suffix of the word on which completion is to be attempted,
in other words those characters before the cursor position,
and those from the cursor position onwards. The whole
command line can be accessed with the <b>&minus;c</b> and
<b>&minus;l</b> flags of the <b>read</b> builtin. The
function should set the variable <b>reply</b> to an array
containing the completions (one completion per element);
note that <b>reply</b> should not be made local to the
function. From such a function the command line can be
accessed with the <b>&minus;c</b> and <b>&minus;l</b> flags
to the <b>read</b> builtin. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>function
whoson { reply=(&lsquo;users&lsquo;); } <br>
compctl &minus;K whoson talk</b></p>

<p style="margin-left:22%; margin-top: 1em">completes only
logged&minus;on users after &lsquo;<b>talk</b>&rsquo;. Note
that &lsquo;<b>whoson</b>&rsquo; must return an array, so
&lsquo;<b>reply=&lsquo;users&lsquo;</b>&rsquo; would be
incorrect.</p>

<p style="margin-left:11%;"><b>&minus;H</b> <i>num
pattern</i></p>

<p style="margin-left:22%;">The possible completions are
taken from the last <i>num</i> history lines. Only words
matching <i>pattern</i> are taken. If <i>num</i> is zero or
negative the whole history is searched and if <i>pattern</i>
is the empty string all words are taken (as with
&lsquo;<b>*</b>&rsquo;). A typical use is</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;D &minus;f + &minus;H 0 &rsquo;&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">which forces
completion to look back in the history list for a word if no
filename matches.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Control
Flags</b> <br>
These do not directly specify types of name to be completed,
but manipulate the options that do:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;Q</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This instructs the shell not to quote any metacharacters
in the possible completions. Normally the results of a
completion are inserted into the command line with any
metacharacters quoted so that they are interpreted as normal
characters. This is appropriate for filenames and ordinary
strings. However, for special effects, such as inserting a
backquoted expression from a completion array
(<b>&minus;k</b>) so that the expression will not be
evaluated until the complete line is executed, this option
must be used.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;P</b>
<i>prefix</i></p>

<p style="margin-left:22%;">The <i>prefix</i> is inserted
just before the completed string; any initial part already
typed will be completed and the whole <i>prefix</i> ignored
for completion purposes. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;j &minus;P &quot;%&quot; kill</b></p>

<p style="margin-left:22%; margin-top: 1em">inserts a
&lsquo;%&rsquo; after the kill command and then completes
job names.</p>

<p style="margin-left:11%;"><b>&minus;S</b>
<i>suffix</i></p>

<p style="margin-left:22%;">When a completion is found the
<i>suffix</i> is inserted after the completed string. In the
case of menu completion the suffix is inserted immediately,
but it is still possible to cycle through the list of
completions by repeatedly hitting the same key.</p>

<p style="margin-left:11%;"><b>&minus;W</b>
<i>file&minus;prefix</i></p>

<p style="margin-left:22%;">With directory
<i>file&minus;prefix</i>: for command, file, directory and
globbing completion (options <b>&minus;c</b>,
<b>&minus;f</b>, <b>&minus;/</b>, <b>&minus;g</b>), the file
prefix is implicitly added in front of the completion. For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;/ &minus;W ~/Mail maildirs</b></p>

<p style="margin-left:22%; margin-top: 1em">completes any
subdirectories to any depth beneath the directory
<b>~/Mail</b>, although that prefix does not appear on the
command line. The <i>file&minus;prefix</i> may also be of
the form accepted by the <b>&minus;k</b> flag, i.e. the name
of an array or a literal list in parenthesis. In this case
all the directories in the list will be searched for
possible completions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;q</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If used with a suffix as specified by the
<b>&minus;S</b> option, this causes the suffix to be removed
if the next character typed is a blank or does not insert
anything or if the suffix consists of only one character and
the next character typed is the same character; this the
same rule used for the <b>AUTO_REMOVE_SLASH</b> option. The
option is most useful for list separators (comma, colon,
etc.).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;l</b> <i>cmd</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>This option restricts the range of command line words
that are considered to be arguments. If combined with one of
the extended completion patterns
&lsquo;<b>p[</b>...<b>]</b>&rsquo;,
&lsquo;<b>r[</b>...<b>]</b>&rsquo;, or
&lsquo;<b>R[</b>...<b>]</b>&rsquo; (see the section
&lsquo;Extended Completion&rsquo; below) the range is
restricted to the range of arguments specified in the
brackets. Completion is then performed as if these had been
given as arguments to the <i>cmd</i> supplied with the
option. If the <i>cmd</i> string is empty the first word in
the range is instead taken as the command name, and command
name completion performed on the first word in the range.
For example,</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;x &rsquo;r[&minus;exec,;]&rsquo; &minus;l
&rsquo;&rsquo; &minus;&minus; find</b></p>

<p style="margin-left:22%; margin-top: 1em">completes
arguments between &lsquo;<b>&minus;exec</b>&rsquo; and the
following &lsquo;<b>;</b>&rsquo; (or the end of the command
line if there is no such string) as if they were a separate
command line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>&minus;h</b> <i>cmd</i></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Normally zsh completes quoted
strings as a whole. With this option, completion can be done
separately on different parts of such strings. It works like
the <b>&minus;l</b> option but makes the completion code
work on the parts of the current word that are separated by
spaces. These parts are completed as if they were arguments
to the given <i>cmd</i>. If <i>cmd</i> is the empty string,
the first part is completed as a command name, as with
<b>&minus;l</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;U</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Use the whole list of possible completions, whether or
not they actually match the word on the command line. The
word typed so far will be deleted. This is most useful with
a function (given by the <b>&minus;K</b> option) which can
examine the word components passed to it (or via the
<b>read</b> builtin&rsquo;s <b>&minus;c</b> and
<b>&minus;l</b> flags) and use its own criteria to decide
what matches. If there is no completion, the original word
is retained. Since the produced possible completions seldom
have interesting common prefixes and suffixes, menu
completion is started immediately if <b>AUTO_MENU</b> is set
and this flag is used.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;y</b>
<i>func&minus;or&minus;var</i></p>

<p style="margin-left:22%;">The list provided by
<i>func&minus;or&minus;var</i> is displayed instead of the
list of completions whenever a listing is required; the
actual completions to be inserted are not affected. It can
be provided in two ways. Firstly, if
<i>func&minus;or&minus;var</i> begins with a <b>$</b> it
defines a variable, or if it begins with a left parenthesis
a literal array, which contains the list. A variable may
have been set by a call to a function using the
<b>&minus;K</b> option. Otherwise it contains the name of a
function which will be executed to create the list. The
function will be passed as an argument list all matching
completions, including prefixes and suffixes expanded in
full, and should set the array <b>reply</b> to the result.
In both cases, the display list will only be retrieved after
a complete list of matches has been created.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
returned list does not have to correspond, even in length,
to the original set of matches, and may be passed as a
scalar instead of an array. No special formatting of
characters is performed on the output in this case; in
particular, newlines are printed literally and if they
appear output in columns is suppressed.</p>

<p style="margin-left:11%;"><b>&minus;X</b>
<i>explanation</i></p>

<p style="margin-left:22%;">Print <i>explanation</i> when
trying completion on the current set of options. A
&lsquo;<b>%n</b>&rsquo; in this string is replaced by the
number of matches that were added for this explanation
string. The explanation only appears if completion was tried
and there was no unique match, or when listing completions.
Explanation strings will be listed together with the matches
of the group specified together with the <b>&minus;X</b>
option (using the <b>&minus;J</b> or <b>&minus;V</b>
option). If the same explanation string is given to multiple
<b>&minus;X</b> options, the string appears only once (for
each group) and the number of matches shown for the
&lsquo;<b>%n</b>&rsquo; is the total number of all matches
for each of these uses. In any case, the explanation string
will only be shown if there was at least one match added for
the explanation string.</p>

<p style="margin-left:22%; margin-top: 1em">The sequences
<b>%B</b>, <b>%b</b>, <b>%S</b>, <b>%s</b>, <b>%U</b>, and
<b>%u</b> specify output attributes (bold, standout, and
underline), <b>%F</b>, <b>%f</b>, <b>%K</b>, <b>%k</b>
specify foreground and background colours, and
<b>%{...%}</b> can be used to include literal escape
sequences as in prompts.</p>

<p style="margin-left:11%;"><b>&minus;Y</b>
<i>explanation</i></p>

<p style="margin-left:22%;">Identical to <b>&minus;X</b>,
except that the <i>explanation</i> first undergoes expansion
following the usual rules for strings in double quotes. The
expansion will be carried out after any functions are called
for the <b>&minus;K</b> or <b>&minus;y</b> options, allowing
them to set variables.</p>

<p style="margin-left:11%;"><b>&minus;t</b>
<i>continue</i></p>

<p style="margin-left:22%;">The
<i>continue</i>&minus;string contains a character that
specifies which set of completion flags should be used next.
It is useful:</p>

<p style="margin-left:22%; margin-top: 1em">(i) With
<b>&minus;T</b>, or when trying a list of pattern
completions, when <b>compctl</b> would usually continue with
ordinary processing after finding matches; this can be
suppressed with &lsquo;<b>&minus;tn</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">(ii) With a
list of alternatives separated by <b>+</b>, when
<b>compctl</b> would normally stop when one of the
alternatives generates matches. It can be forced to consider
the next set of completions by adding
&lsquo;<b>&minus;t+</b>&rsquo; to the flags of the
alternative before the &lsquo;<b>+</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">(iii) In an
extended completion list (see below), when <b>compctl</b>
would normally continue until a set of conditions succeeded,
then use only the immediately following flags. With
&lsquo;<b>&minus;t&minus;</b>&rsquo;, <b>compctl</b> will
continue trying extended completions after the next
&lsquo;<b>&minus;</b>&rsquo;; with
&lsquo;<b>&minus;tx</b>&rsquo; it will attempt completion
with the default flags, in other words those before the
&lsquo;<b>&minus;x</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>&minus;J</b> <i>name</i></p>

<p style="margin-left:22%;">This gives the name of the
group the matches should be placed in. Groups are listed and
sorted separately; likewise, menu completion will offer the
matches in the groups in the order in which the groups were
defined. If no group name is explicitly given, the matches
are stored in a group named <i>default</i>. The first time a
group name is encountered, a group with that name is
created. After that all matches with the same group name are
stored in that group.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
useful with non&minus;exclusive alternative completions. For
example, in</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;f &minus;J files &minus;t+ + &minus;v &minus;J
variables foo</b></p>

<p style="margin-left:22%; margin-top: 1em">both files and
variables are possible completions, as the <b>&minus;t+</b>
forces both sets of alternatives before and after the
<b>+</b> to be considered at once. Because of the
<b>&minus;J</b> options, however, all files are listed
before all variables.</p>

<p style="margin-left:11%;"><b>&minus;V</b> <i>name</i></p>

<p style="margin-left:22%;">Like <b>&minus;J</b>, but
matches within the group will not be sorted in listings nor
in menu completion. These unsorted groups are in a different
name space from the sorted ones, so groups defined as
<b>&minus;J files</b> and <b>&minus;V files</b> are
distinct.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;1</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If given together with the <b>&minus;V</b> option, makes
only consecutive duplicates in the group be removed. Note
that groups with and without this flag are in different name
spaces.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;2</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If given together with the <b>&minus;J</b> or
<b>&minus;V</b> option, makes all duplicates be kept. Again,
groups with and without this flag are in different name
spaces.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;M</b>
<i>match&minus;spec</i></p>

<p style="margin-left:22%;">This defines additional
matching control specifications that should be used only
when testing words for the list of flags this flag appears
in. The format of the <i>match&minus;spec</i> string is
described in zshcompwid.</p>

<h2>ALTERNATIVE COMPLETION
<a name="ALTERNATIVE COMPLETION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>compctl</b>
[ <b>&minus;CDT</b> ] <i>options</i> <b>+</b> <i>options</i>
[ <b>+</b> ... ] [ <b>+</b> ] <i>command</i> ...</p>

<p style="margin-left:11%; margin-top: 1em">The form with
&lsquo;<b>+</b>&rsquo; specifies alternative options.
Completion is tried with the options before the first
&lsquo;<b>+</b>&rsquo;. If this produces no matches
completion is tried with the flags after the
&lsquo;<b>+</b>&rsquo; and so on. If there are no flags
after the last &lsquo;<b>+</b>&rsquo; and a match has not
been found up to that point, default completion is tried. If
the list of flags contains a <b>&minus;t</b> with a <b>+</b>
character, the next list of flags is used even if the
current list produced matches.</p>

<p style="margin-left:11%; margin-top: 1em">Additional
options are available that restrict completion to some part
of the command line; this is referred to as &lsquo;extended
completion&rsquo;.</p>

<h2>EXTENDED COMPLETION
<a name="EXTENDED COMPLETION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>compctl</b>
[ <b>&minus;CDT</b> ] <i>options</i> <b>&minus;x</b>
<i>pattern options</i> <b>&minus;</b> ...
<b>&minus;&minus;</b> <br>
[ <i>command</i> ... ] <b><br>
compctl</b> [ <b>&minus;CDT</b> ] <i>options</i> [
<b>&minus;x</b> <i>pattern options</i> <b>&minus;</b> ...
<b>&minus;&minus;</b> ] <br>
[ <b>+</b> <i>options</i> [ <b>&minus;x</b> ...
<b>&minus;&minus;</b> ] ... [<b>+</b>] ] [ <i>command</i>
... ]</p>

<p style="margin-left:11%; margin-top: 1em">The form with
&lsquo;<b>&minus;x</b>&rsquo; specifies extended completion
for the commands given; as shown, it may be combined with
alternative completion using &lsquo;<b>+</b>&rsquo;. Each
<i>pattern</i> is examined in turn; when a match is found,
the corresponding <i>options</i>, as described in the
section &lsquo;Option Flags&rsquo; above, are used to
generate possible completions. If no <i>pattern</i> matches,
the <i>options</i> given before the <b>&minus;x</b> are
used.</p>

<p style="margin-left:11%; margin-top: 1em">Note that each
pattern should be supplied as a single argument and should
be quoted to prevent expansion of metacharacters by the
shell.</p>

<p style="margin-left:11%; margin-top: 1em">A
<i>pattern</i> is built of sub&minus;patterns separated by
commas; it matches if at least one of these
sub&minus;patterns matches (they are &lsquo;or&rsquo;ed).
These sub&minus;patterns are in turn composed of other
sub&minus;patterns separated by white spaces which match if
all of the sub&minus;patterns match (they are
&lsquo;and&rsquo;ed). An element of the sub&minus;patterns
is of the form
&lsquo;<i>c</i><b>[</b>...<b>][</b>...<b>]</b>&rsquo;, where
the pairs of brackets may be repeated as often as necessary,
and matches if any of the sets of brackets match (an
&lsquo;or&rsquo;). The example below makes this clearer.</p>

<p style="margin-left:11%; margin-top: 1em">The elements
may be any of the following: <b><br>
s[</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the current word on
the command line starts with one of the strings given in
brackets. The <i>string</i> is not removed and is not part
of the completion.</p>


<p style="margin-left:11%;"><b>S[</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Like
<b>s[</b><i>string</i><b>]</b> except that the <i>string</i>
is part of the completion.</p>


<p style="margin-left:11%;"><b>p[</b><i>from</i><b>,</b><i>to</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the number of the
current word is between one of the <i>from</i> and <i>to</i>
pairs inclusive. The comma and <i>to</i> are optional;
<i>to</i> defaults to the same value as <i>from</i>. The
numbers may be negative: <b>&minus;</b><i>n</i> refers to
the <i>n</i>&rsquo;th last word on the line.</p>


<p style="margin-left:11%;"><b>c[</b><i>offset</i><b>,</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the <i>string</i>
matches the word offset by <i>offset</i> from the current
word position. Usually <i>offset</i> will be negative.</p>


<p style="margin-left:11%;"><b>C[</b><i>offset</i><b>,</b><i>pattern</i><b>]</b>...</p>

<p style="margin-left:22%;">Like <b>c</b> but using pattern
matching instead.</p>


<p style="margin-left:11%;"><b>w[</b><i>index</i><b>,</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the word in position
<i>index</i> is equal to the corresponding <i>string</i>.
Note that the word count is made after any alias
expansion.</p>


<p style="margin-left:11%;"><b>W[</b><i>index</i><b>,</b><i>pattern</i><b>]</b>...</p>

<p style="margin-left:22%;">Like <b>w</b> but using pattern
matching instead.</p>


<p style="margin-left:11%;"><b>n[</b><i>index</i><b>,</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the current word
contains <i>string</i>. Anything up to and including the
<i>index</i>th occurrence of this string will not be
considered part of the completion, but the rest will.
<i>index</i> may be negative to count from the end: in most
cases, <i>index</i> will be 1 or &minus;1. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>compctl
&minus;s &rsquo;&lsquo;users&lsquo;&rsquo; &minus;x
&rsquo;n[1,@]&rsquo; &minus;k hosts &minus;&minus;
talk</b></p>

<p style="margin-left:22%; margin-top: 1em">will usually
complete usernames, but if you insert an <b>@</b> after the
name, names from the array <i>hosts</i> (assumed to contain
hostnames, though you must make the array yourself) will be
completed. Other commands such as <b>rcp</b> can be handled
similarly.</p>


<p style="margin-left:11%;"><b>N[</b><i>index</i><b>,</b><i>string</i><b>]</b>...</p>

<p style="margin-left:22%;">Like <b>n</b> except that the
string will be taken as a character class. Anything up to
and including the <i>index</i>th occurrence of any of the
characters in <i>string</i> will not be considered part of
the completion.</p>


<p style="margin-left:11%;"><b>m[</b><i>min</i><b>,</b><i>max</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the total number of
words lies between <i>min</i> and <i>max</i> inclusive.</p>


<p style="margin-left:11%;"><b>r[</b><i>str1</i><b>,</b><i>str2</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches if the cursor is after
a word with prefix <i>str1</i>. If there is also a word with
prefix <i>str2</i> on the command line after the one matched
by <i>str1</i> it matches only if the cursor is before this
word. If the comma and <i>str2</i> are omitted, it matches
if the cursor is after a word with prefix <i>str1</i>.</p>


<p style="margin-left:11%;"><b>R[</b><i>str1</i><b>,</b><i>str2</i><b>]</b>...</p>

<p style="margin-left:22%;">Like <b>r</b> but using pattern
matching instead.</p>


<p style="margin-left:11%;"><b>q[</b><i>str</i><b>]</b>...</p>

<p style="margin-left:22%;">Matches the word currently
being completed is in single quotes and the <i>str</i>
begins with the letter &lsquo;s&rsquo;, or if completion is
done in double quotes and <i>str</i> starts with the letter
&lsquo;d&rsquo;, or if completion is done in backticks and
<i>str</i> starts with a &lsquo;b&rsquo;.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:22%; margin-top: 1em"><b>compctl
&minus;u &minus;x &rsquo;s[+]
c[&minus;1,&minus;f],s[&minus;f+]&rsquo; \ <br>
&minus;g &rsquo;~/Mail/*(:t)&rsquo; &minus;
&rsquo;s[&minus;f],c[&minus;1,&minus;f]&rsquo; &minus;f
&minus;&minus; mail</b></p>

<p style="margin-left:11%; margin-top: 1em">This is to be
interpreted as follows:</p>

<p style="margin-left:11%; margin-top: 1em">If the current
command is <b>mail</b>, then</p>

<p style="margin-left:22%; margin-top: 1em">if ((the
current word begins with <b>+</b> and the previous word is
<b>&minus;f</b>) <br>
or (the current word begins with <b>&minus;f+</b>)), then
complete the <br>
non&minus;directory part (the &lsquo;<b>:t</b>&rsquo; glob
modifier) of files in the directory <b><br>
~/Mail</b>; else</p>

<p style="margin-left:22%; margin-top: 1em">if the current
word begins with <b>&minus;f</b> or the previous word was
<b>&minus;f</b>, then <br>
complete any file; else</p>

<p style="margin-left:22%; margin-top: 1em">complete user
names.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshmodules
&minus; zsh loadable modules</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Some optional
parts of zsh are in modules, separate from the core of the
shell. Each of these modules may be linked in to the shell
at build time, or can be dynamically linked while the shell
is running if the installation supports this feature.
Modules are linked at runtime with the <b>zmodload</b>
command, see <i>zshbuiltins</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The modules
that are bundled with the zsh distribution are: <b><br>
zsh/attr</b></p>

<p style="margin-left:22%;">Builtins for manipulating
extended attributes (xattr).</p>

<p style="margin-left:11%;"><b>zsh/cap</b></p>

<p style="margin-left:22%;">Builtins for manipulating
POSIX.1e (POSIX.6) capability (privilege) sets.</p>

<p style="margin-left:11%;"><b>zsh/clone</b></p>

<p style="margin-left:22%;">A builtin that can clone a
running shell onto another terminal.</p>

<p style="margin-left:11%;"><b>zsh/compctl</b></p>

<p style="margin-left:22%;">The <b>compctl</b> builtin for
controlling completion.</p>

<p style="margin-left:11%;"><b>zsh/complete</b></p>

<p style="margin-left:22%;">The basic completion code.</p>

<p style="margin-left:11%;"><b>zsh/complist</b></p>

<p style="margin-left:22%;">Completion listing
extensions.</p>

<p style="margin-left:11%;"><b>zsh/computil</b></p>

<p style="margin-left:22%;">A module with utility builtins
needed for the shell function based completion system.</p>

<p style="margin-left:11%;"><b>zsh/curses</b></p>

<p style="margin-left:22%;">curses windowing commands</p>

<p style="margin-left:11%;"><b>zsh/datetime</b></p>

<p style="margin-left:22%;">Some date/time commands and
parameters.</p>

<p style="margin-left:11%;"><b>zsh/deltochar</b></p>

<p style="margin-left:22%;">A ZLE function duplicating
EMACS&rsquo; <b>zap&minus;to&minus;char</b>.</p>

<p style="margin-left:11%;"><b>zsh/example</b></p>

<p style="margin-left:22%;">An example of how to write a
module.</p>

<p style="margin-left:11%;"><b>zsh/files</b></p>

<p style="margin-left:22%;">Some basic file manipulation
commands as builtins.</p>

<p style="margin-left:11%;"><b>zsh/langinfo</b></p>

<p style="margin-left:22%;">Interface to locale
information.</p>

<p style="margin-left:11%;"><b>zsh/mapfile</b></p>

<p style="margin-left:22%;">Access to external files via a
special associative array.</p>

<p style="margin-left:11%;"><b>zsh/mathfunc</b></p>

<p style="margin-left:22%;">Standard scientific functions
for use in mathematical evaluations.</p>

<p style="margin-left:11%;"><b>zsh/newuser</b></p>

<p style="margin-left:22%;">Arrange for files for new users
to be installed.</p>

<p style="margin-left:11%;"><b>zsh/parameter</b></p>

<p style="margin-left:22%;">Access to internal hash tables
via special associative arrays.</p>

<p style="margin-left:11%;"><b>zsh/pcre</b></p>

<p style="margin-left:22%;">Interface to the PCRE
library.</p>

<p style="margin-left:11%;"><b>zsh/regex</b></p>

<p style="margin-left:22%;">Interface to the POSIX regex
library.</p>

<p style="margin-left:11%;"><b>zsh/sched</b></p>

<p style="margin-left:22%;">A builtin that provides a timed
execution facility within the shell.</p>

<p style="margin-left:11%;"><b>zsh/net/socket</b></p>

<p style="margin-left:22%;">Manipulation of Unix domain
sockets</p>

<p style="margin-left:11%;"><b>zsh/stat</b></p>

<p style="margin-left:22%;">A builtin command interface to
the <b>stat</b> system call.</p>

<p style="margin-left:11%;"><b>zsh/system</b></p>

<p style="margin-left:22%;">A builtin interface to various
low&minus;level system features.</p>

<p style="margin-left:11%;"><b>zsh/net/tcp</b></p>

<p style="margin-left:22%;">Manipulation of TCP sockets</p>

<p style="margin-left:11%;"><b>zsh/termcap</b></p>

<p style="margin-left:22%;">Interface to the termcap
database.</p>

<p style="margin-left:11%;"><b>zsh/terminfo</b></p>

<p style="margin-left:22%;">Interface to the terminfo
database.</p>

<p style="margin-left:11%;"><b>zsh/zftp</b></p>

<p style="margin-left:22%;">A builtin FTP client.</p>

<p style="margin-left:11%;"><b>zsh/zle</b></p>

<p style="margin-left:22%;">The Zsh Line Editor, including
the <b>bindkey</b> and <b>vared</b> builtins.</p>

<p style="margin-left:11%;"><b>zsh/zleparameter</b></p>

<p style="margin-left:22%;">Access to internals of the Zsh
Line Editor via parameters.</p>

<p style="margin-left:11%;"><b>zsh/zprof</b></p>

<p style="margin-left:22%;">A module allowing profiling for
shell functions.</p>

<p style="margin-left:11%;"><b>zsh/zpty</b></p>

<p style="margin-left:22%;">A builtin for starting a
command in a pseudo&minus;terminal.</p>

<p style="margin-left:11%;"><b>zsh/zselect</b></p>

<p style="margin-left:22%;">Block and return when file
descriptors are ready.</p>

<p style="margin-left:11%;"><b>zsh/zutil</b></p>

<p style="margin-left:22%;">Some utility builtins, e.g. the
one for supporting configuration via styles.</p>

<h2>THE ZSH/ATTR MODULE
<a name="THE ZSH/ATTR MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/attr</b> module is used for manipulating extended
attributes. The <b>&minus;h</b> option causes all commands
to operate on symbolic links instead of their targets. The
builtins in this module are: <b><br>
zgetattr</b> [ <b>&minus;h</b> ] <i>filename attribute</i> [
<i>parameter</i> ]</p>

<p style="margin-left:22%;">Get the extended attribute
<i>attribute</i> from the specified <i>filename</i>. If the
optional argument <i>parameter</i> is given, the attribute
is set on that parameter instead of being printed to
stdout.</p>

<p style="margin-left:11%;"><b>zsetattr</b> [
<b>&minus;h</b> ] <i>filename attribute value</i></p>

<p style="margin-left:22%;">Set the extended attribute
<i>attribute</i> on the specified <i>filename</i> to
<i>value</i>.</p>

<p style="margin-left:11%;"><b>zdelattr</b> [
<b>&minus;h</b> ] <i>filename attribute</i></p>

<p style="margin-left:22%;">Remove the extended attribute
<i>attribute</i> from the specified <i>filename</i>.</p>

<p style="margin-left:11%;"><b>zlistattr</b> [
<b>&minus;h</b> ] <i>filename</i> [ <i>parameter</i> ]</p>

<p style="margin-left:22%;">List the extended attributes
currently set on the specified <i>filename</i>. If the
optional argument <i>parameter</i> is given, the list of
attributes is set on that parameter instead of being printed
to stdout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>zgetattr</b>
and <b>zlistattr</b> allocate memory dynamically. If the
attribute or list of attributes grows between the allocation
and the call to get them, they return 2. On all other
errors, 1 is returned. This allows the calling function to
check for this case and retry.</p>

<h2>THE ZSH/CAP MODULE
<a name="THE ZSH/CAP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/cap</b> module is used for manipulating POSIX.1e
(POSIX.6) capability sets. If the operating system does not
support this interface, the builtins defined by this module
will do nothing. The builtins in this module are: <b><br>
cap</b> [ <i>capabilities</i> ]</p>

<p style="margin-left:22%;">Change the shell&rsquo;s
process capability sets to the specified
<i>capabilities</i>, otherwise display the shell&rsquo;s
current capabilities.</p>

<p style="margin-left:11%;"><b>getcap</b> <i>filename</i>
...</p>

<p style="margin-left:22%;">This is a built&minus;in
implementation of the POSIX standard utility. It displays
the capability sets on each specified <i>filename</i>.</p>

<p style="margin-left:11%;"><b>setcap</b> <i>capabilities
filename</i> ...</p>

<p style="margin-left:22%;">This is a built&minus;in
implementation of the POSIX standard utility. It sets the
capability sets on each specified <i>filename</i> to the
specified <i>capabilities</i>.</p>

<h2>THE ZSH/CLONE MODULE
<a name="THE ZSH/CLONE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/clone</b> module makes available one builtin command:
<b><br>
clone</b> <i>tty</i></p>

<p style="margin-left:22%;">Creates a forked instance of
the current shell, attached to the specified <i>tty</i>. In
the new shell, the <b>PID</b>, <b>PPID</b> and <b>TTY</b>
special parameters are changed appropriately. <b>$!</b> is
set to zero in the new shell, and to the new shell&rsquo;s
PID in the original shell.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status of the builtin is zero in both shells if successful,
and non&minus;zero on error.</p>

<p style="margin-left:22%; margin-top: 1em">The target of
<b>clone</b> should be an unused terminal, such as an unused
virtual console or a virtual terminal created by</p>

<p style="margin-left:22%; margin-top: 1em">xterm &minus;e
sh &minus;c &rsquo;trap : INT QUIT TSTP; tty; while :; do
sleep 100000000; done&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">Some words of
explanation are warranted about this long xterm command
line: when doing clone on a pseudo&minus;terminal, some
other session (&quot;session&quot; meant as a unix session
group, or SID) is already owning the terminal. Hence the
cloned zsh cannot acquire the pseudo&minus;terminal as a
controlling tty. That means two things:</p>

<p style="margin-left:22%; margin-top: 1em">the job control
signals will go to the sh&minus;started&minus;by&minus;xterm
process <br>
group (that&rsquo;s why we disable INT QUIT and TSTP with
trap; otherwise <br>
the while loop could get suspended or killed)</p>

<p style="margin-left:22%; margin-top: 1em">the cloned
shell will have job control disabled, and the job <br>
control keys (control&minus;C, control&minus;\ and
control&minus;Z) will not work.</p>

<p style="margin-left:22%; margin-top: 1em">This does not
apply when cloning to an <b>unused</b> vc.</p>

<p style="margin-left:22%; margin-top: 1em">Cloning to a
used (and unprepared) terminal will result in two processes
reading simultaneously from the same terminal, with input
bytes going randomly to either process.</p>

<p style="margin-left:22%; margin-top: 1em"><b>clone</b> is
mostly useful as a shell built&minus;in replacement for
openvt.</p>

<h2>THE ZSH/COMPCTL MODULE
<a name="THE ZSH/COMPCTL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/compctl</b> module makes available two builtin
commands. <b>compctl</b>, is the old, deprecated way to
control completions for ZLE. See <i>zshcompctl</i>(1). The
other builtin command, <b>compcall</b> can be used in
user&minus;defined completion widgets, see
<i>zshcompwid</i>(1).</p>

<h2>THE ZSH/COMPLETE MODULE
<a name="THE ZSH/COMPLETE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/complete</b> module makes available several builtin
commands which can be used in user&minus;defined completion
widgets, see <i>zshcompwid</i>(1).</p>

<h2>THE ZSH/COMPLIST MODULE
<a name="THE ZSH/COMPLIST MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/complist</b> module offers three extensions to
completion listings: the ability to highlight matches in
such a list, the ability to scroll through long lists and a
different style of menu completion.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Colored
completion listings</b> <br>
Whenever one of the parameters <b>ZLS_COLORS</b> or
<b>ZLS_COLOURS</b> is set and the <b>zsh/complist</b> module
is loaded or linked into the shell, completion lists will be
colored. Note, however, that <b>complist</b> will not
automatically be loaded if it is not linked in: on systems
with dynamic loading, &lsquo;<b>zmodload
zsh/complist</b>&rsquo; is required.</p>

<p style="margin-left:11%; margin-top: 1em">The parameters
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> describe how
matches are highlighted. To turn on highlighting an empty
value suffices, in which case all the default values given
below will be used. The format of the value of these
parameters is the same as used by the GNU version of the
<b>ls</b> command: a colon&minus;separated list of
specifications of the form
&lsquo;<i>name</i>=<i>value</i>&rsquo;. The <i>name</i> may
be one of the following strings, most of which specify file
types for which the <i>value</i> will be used. The strings
and their default values are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>no 0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for normal text (i.e. when displaying something other
than a matched file)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fi 0</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for regular files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>di 32</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for directories</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ln 36</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for symbolic links. If this has the special value
<b>target</b>, symbolic links are dereferenced and the
target file used to determine the display format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>pi 31</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for named pipes (FIFOs)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>so 33</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for sockets</p></td></tr>
</table>

<p style="margin-left:11%;"><b>bd 44;37</b></p>

<p style="margin-left:22%;">for block devices</p>

<p style="margin-left:11%;"><b>cd 44;37</b></p>

<p style="margin-left:22%;">for character devices</p>

<p style="margin-left:11%;"><b>or</b> <i>none</i></p>

<p style="margin-left:22%;">for a symlink to nonexistent
file (default is the value defined for <b>ln</b>)</p>

<p style="margin-left:11%;"><b>mi</b> <i>none</i></p>

<p style="margin-left:22%;">for a non&minus;existent file
(default is the value defined for <b>fi</b>); this code is
currently not used</p>

<p style="margin-left:11%;"><b>su 37;41</b></p>

<p style="margin-left:22%;">for files with setuid bit
set</p>

<p style="margin-left:11%;"><b>sg 30;43</b></p>

<p style="margin-left:22%;">for files with setgid bit
set</p>

<p style="margin-left:11%;"><b>tw 30;42</b></p>

<p style="margin-left:22%;">for world writable directories
with sticky bit set</p>

<p style="margin-left:11%;"><b>ow 34;43</b></p>

<p style="margin-left:22%;">for world writable directories
without sticky bit set</p>

<p style="margin-left:11%;"><b>sa</b> <i>none</i></p>

<p style="margin-left:22%;">for files with an associated
suffix alias; this is only tested after specific suffixes,
as described below</p>

<p style="margin-left:11%;"><b>st 37;44</b></p>

<p style="margin-left:22%;">for directories with sticky bit
set but not world writable</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ex 35</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for executable files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>lc \e[</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the left code (see below)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>rc m</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the right code</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>tc 0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the character indicating the file type printed after
filenames if the <b>LIST_TYPES</b> option is set</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>sp 0</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for the spaces printed after matches to align the next
column</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>ec</b> <i>none</i></p>

<p style="margin-left:22%;">for the end code</p>

<p style="margin-left:11%; margin-top: 1em">Apart from
these strings, the <i>name</i> may also be an asterisk
(&lsquo;<b>*</b>&rsquo;) followed by any string. The
<i>value</i> given for such a string will be used for all
files whose name ends with the string. The <i>name</i> may
also be an equals sign (&lsquo;<b>=</b>&rsquo;) followed by
a pattern; the <b>EXTENDED_GLOB</b> option will be turned on
for evaluation of the pattern. The <i>value</i> given for
this pattern will be used for all matches (not just
filenames) whose display string are matched by the pattern.
Definitions for the form with the leading equal sign take
precedence over the values defined for file types, which in
turn take precedence over the form with the leading asterisk
(file extensions).</p>

<p style="margin-left:11%; margin-top: 1em">The
leading&minus;equals form also allows different parts of the
displayed strings to be colored differently. For this, the
pattern has to use the &lsquo;<b>(#b)</b>&rsquo; globbing
flag and pairs of parentheses surrounding the parts of the
strings that are to be colored differently. In this case the
<i>value</i> may consist of more than one color code
separated by equal signs. The first code will be used for
all parts for which no explicit code is specified and the
following codes will be used for the parts matched by the
sub&minus;patterns in parentheses. For example, the
specification &lsquo;<b>=(#b)(?)*(?)=0=3=7</b>&rsquo; will
be used for all matches which are at least two characters
long and will use the code &lsquo;<b>3</b>&rsquo; for the
first character, &lsquo;<b>7</b>&rsquo; for the last
character and &lsquo;<b>0</b>&rsquo; for the rest.</p>

<p style="margin-left:11%; margin-top: 1em">All three forms
of <i>name</i> may be preceded by a pattern in parentheses.
If this is given, the <i>value</i> will be used only for
matches in groups whose names are matched by the pattern
given in the parentheses. For example,
&lsquo;<b>(g*)m*=43</b>&rsquo; highlights all matches
beginning with &lsquo;<b>m</b>&rsquo; in groups whose names
begin with &lsquo;<b>g</b>&rsquo; using the color code
&lsquo;<b>43</b>&rsquo;. In case of the
&lsquo;<b>lc</b>&rsquo;, &lsquo;<b>rc</b>&rsquo;, and
&lsquo;<b>ec</b>&rsquo; codes, the group pattern is
ignored.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
all patterns are tried in the order in which they appear in
the parameter value until the first one matches which is
then used.</p>

<p style="margin-left:11%; margin-top: 1em">When printing a
match, the code prints the value of <b>lc</b>, the value for
the file&minus;type or the last matching specification with
a &lsquo;<b>*</b>&rsquo;, the value of <b>rc</b>, the string
to display for the match itself, and then the value of
<b>ec</b> if that is defined or the values of <b>lc</b>,
<b>no</b>, and <b>rc</b> if <b>ec</b> is not defined.</p>

<p style="margin-left:11%; margin-top: 1em">The default
values are ISO 6429 (ANSI) compliant and can be used on
vt100 compatible terminals such as <b>xterm</b>s. On
monochrome terminals the default values will have no visible
effect. The <b>colors</b> function from the contribution can
be used to get associative arrays containing the codes for
ANSI terminals (see the section &lsquo;Other
Functions&rsquo; in <i>zshcontrib</i>(1)). For example,
after loading <b>colors</b>, one could use
&lsquo;<b>$colors[red]</b>&rsquo; to get the code for
foreground color red and
&lsquo;<b>$colors[bg&minus;green]</b>&rsquo; for the code
for background color green.</p>

<p style="margin-left:11%; margin-top: 1em">If the
completion system invoked by compinit is used, these
parameters should not be set directly because the system
controls them itself. Instead, the <b>list&minus;colors</b>
style should be used (see the section &lsquo;Completion
System Configuration&rsquo; in <i>zshcompsys</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Scrolling in
completion listings</b> <br>
To enable scrolling through a completion list, the
<b>LISTPROMPT</b> parameter must be set. Its value will be
used as the prompt; if it is the empty string, a default
prompt will be used. The value may contain escapes of the
form &lsquo;<b>%x</b>&rsquo;. It supports the escapes
&lsquo;<b>%B</b>&rsquo;, &lsquo;<b>%b</b>&rsquo;,
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%s</b>&rsquo;,
&lsquo;<b>%U</b>&rsquo;, &lsquo;<b>%u</b>&rsquo;,
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%f</b>&rsquo;,
&lsquo;<b>%K</b>&rsquo;, &lsquo;<b>%k</b>&rsquo; and
&lsquo;<b>%{...%}</b>&rsquo; used also in shell prompts as
well as three pairs of additional sequences: a
&lsquo;<b>%l</b>&rsquo; or &lsquo;<b>%L</b>&rsquo; is
replaced by the number of the last line shown and the total
number of lines in the form
&lsquo;<i>number</i><b>/</b><i>total</i>&rsquo;; a
&lsquo;<b>%m</b>&rsquo; or &lsquo;<b>%M</b>&rsquo; is
replaced with the number of the last match shown and the
total number of matches; and &lsquo;<b>%p</b>&rsquo; or
&lsquo;<b>%P</b>&rsquo; is replaced with
&lsquo;<b>Top</b>&rsquo;, &lsquo;<b>Bottom</b>&rsquo; or the
position of the first line shown in percent of the total
number of lines, respectively. In each of these cases the
form with the uppercase letter will be replaced with a
string of fixed width, padded to the right with spaces,
while the lowercase form will not be padded.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>LISTPROMPT</b> is set, the completion code will
not ask if the list should be shown. Instead it immediately
starts displaying the list, stopping after the first
screenful, showing the prompt at the bottom, waiting for a
keypress after temporarily switching to the
<b>listscroll</b> keymap. Some of the zle functions have a
special meaning while scrolling lists: <b><br>
send&minus;break</b></p>

<p style="margin-left:22%;">stops listing discarding the
key pressed</p>

<p style="margin-left:11%;"><b>accept&minus;line</b>,
<b>down&minus;history</b>,
<b>down&minus;line&minus;or&minus;history <br>
down&minus;line&minus;or&minus;search</b>,
<b>vi&minus;down&minus;line&minus;or&minus;history</b></p>

<p style="margin-left:22%;">scrolls forward one line</p>

<p style="margin-left:11%;"><b>complete&minus;word</b>,
<b>menu&minus;complete</b>,
<b>expand&minus;or&minus;complete <br>
expand&minus;or&minus;complete&minus;prefix</b>,
<b>menu&minus;complete&minus;or&minus;expand</b></p>

<p style="margin-left:22%;">scrolls forward one
screenful</p>

<p style="margin-left:11%;"><b>accept&minus;search</b></p>

<p style="margin-left:22%;">stop listing but take no other
action</p>

<p style="margin-left:11%; margin-top: 1em">Every other
character stops listing and immediately processes the key as
usual. Any key that is not bound in the <b>listscroll</b>
keymap or that is bound to <b>undefined&minus;key</b> is
looked up in the keymap currently selected.</p>

<p style="margin-left:11%; margin-top: 1em">As for the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters,
<b>LISTPROMPT</b> should not be set directly when using the
shell function based completion system. Instead, the
<b>list&minus;prompt</b> style should be used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Menu
selection</b> <br>
The <b>zsh/complist</b> module also offers an alternative
style of selecting matches from a list, called menu
selection, which can be used if the shell is set up to
return to the last prompt after showing a completion list
(see the <b>ALWAYS_LAST_PROMPT</b> option in
<i>zshoptions</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">Menu selection
can be invoked directly by the widget
<b>menu&minus;select</b> defined by this module. This is a
standard ZLE widget that can be bound to a key in the usual
way as described in <i>zshzle</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">Alternatively,
the parameter <b>MENUSELECT</b> can be set to an integer,
which gives the minimum number of matches that must be
present before menu selection is automatically turned on.
This second method requires that menu completion be started,
either directly from a widget such as
<b>menu&minus;complete</b>, or due to one of the options
<b>MENU_COMPLETE</b> or <b>AUTO_MENU</b> being set. If
<b>MENUSELECT</b> is set, but is 0, 1 or empty, menu
selection will always be started during an ambiguous menu
completion.</p>

<p style="margin-left:11%; margin-top: 1em">When using the
completion system based on shell functions, the
<b>MENUSELECT</b> parameter should not be used (like the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters
described above). Instead, the <b>menu</b> style should be
used with the <b>select=</b><i>...</i> keyword.</p>

<p style="margin-left:11%; margin-top: 1em">After menu
selection is started, the matches will be listed. If there
are more matches than fit on the screen, only the first
screenful is shown. The matches to insert into the command
line can be selected from this list. In the list one match
is highlighted using the value for <b>ma</b> from the
<b>ZLS_COLORS</b> or <b>ZLS_COLOURS</b> parameter. The
default value for this is &lsquo;<b>7</b>&rsquo; which
forces the selected match to be highlighted using standout
mode on a vt100&minus;compatible terminal. If neither
<b>ZLS_COLORS</b> nor <b>ZLS_COLOURS</b> is set, the same
terminal control sequence as for the &lsquo;<b>%S</b>&rsquo;
escape in prompts is used.</p>

<p style="margin-left:11%; margin-top: 1em">If there are
more matches than fit on the screen and the parameter
<b>MENUPROMPT</b> is set, its value will be shown below the
matches. It supports the same escape sequences as
<b>LISTPROMPT</b>, but the number of the match or line shown
will be that of the one where the mark is placed. If its
value is the empty string, a default prompt will be
used.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>MENUSCROLL</b> parameter can be used to specify how the
list is scrolled. If the parameter is unset, this is done
line by line, if it is set to &lsquo;<b>0</b>&rsquo; (zero),
the list will scroll half the number of lines of the screen.
If the value is positive, it gives the number of lines to
scroll and if it is negative, the list will be scrolled the
number of lines of the screen minus the (absolute)
value.</p>

<p style="margin-left:11%; margin-top: 1em">As for the
<b>ZLS_COLORS</b>, <b>ZLS_COLOURS</b> and <b>LISTPROMPT</b>
parameters, neither <b>MENUPROMPT</b> nor <b>MENUSCROLL</b>
should be set directly when using the shell function based
completion system. Instead, the <b>select&minus;prompt</b>
and <b>select&minus;scroll</b> styles should be used.</p>

<p style="margin-left:11%; margin-top: 1em">The completion
code sometimes decides not to show all of the matches in the
list. These hidden matches are either matches for which the
completion function which added them explicitly requested
that they not appear in the list (using the <b>&minus;n</b>
option of the <b>compadd</b> builtin command) or they are
matches which duplicate a string already in the list
(because they differ only in things like prefixes or
suffixes that are not displayed). In the list used for menu
selection, however, even these matches are shown so that it
is possible to select them. To highlight such matches the
<b>hi</b> and <b>du</b> capabilities in the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters are
supported for hidden matches of the first and second kind,
respectively.</p>

<p style="margin-left:11%; margin-top: 1em">Selecting
matches is done by moving the mark around using the zle
movement functions. When not all matches can be shown on the
screen at the same time, the list will scroll up and down
when crossing the top or bottom line. The following zle
functions have special meaning during menu selection. Note
that the following always perform the same task within the
menu selection map and cannot be replaced by user defined
widgets, nor can the set of functions be extended: <b><br>
accept&minus;line</b>, <b>accept&minus;search</b></p>

<p style="margin-left:22%;">accept the current match and
leave menu selection (but do not cause the command line to
be accepted)</p>

<p style="margin-left:11%;"><b>send&minus;break</b></p>

<p style="margin-left:22%;">leaves menu selection and
restores the previous contents of the command line</p>

<p style="margin-left:11%;"><b>redisplay</b>,
<b>clear&minus;screen</b></p>

<p style="margin-left:22%;">execute their normal function
without leaving menu selection</p>


<p style="margin-left:11%;"><b>accept&minus;and&minus;hold</b>,
<b>accept&minus;and&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">accept the currently inserted
match and continue selection allowing to select the next
match to insert into the line</p>


<p style="margin-left:11%;"><b>accept&minus;and&minus;infer&minus;next&minus;history</b></p>

<p style="margin-left:22%;">accepts the current match and
then tries completion with menu selection again; in the case
of files this allows one to select a directory and
immediately attempt to complete files in it; if there are no
matches, a message is shown and one can use <b>undo</b> to
go back to completion on the previous level, every other key
leaves menu selection (including the other zle functions
which are otherwise special during menu selection)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>undo</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>removes matches inserted during the menu selection by
one of the three functions before</p></td></tr>
</table>

<p style="margin-left:11%;"><b>down&minus;history</b>,
<b>down&minus;line&minus;or&minus;history <br>
vi&minus;down&minus;line&minus;or&minus;history</b>,
<b>down&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">moves the mark one line
down</p>

<p style="margin-left:11%;"><b>up&minus;history</b>,
<b>up&minus;line&minus;or&minus;history <br>
vi&minus;up&minus;line&minus;or&minus;history</b>,
<b>up&minus;line&minus;or&minus;search</b></p>

<p style="margin-left:22%;">moves the mark one line up</p>

<p style="margin-left:11%;"><b>forward&minus;char</b>,
<b>vi&minus;forward&minus;char</b></p>

<p style="margin-left:22%;">moves the mark one column
right</p>

<p style="margin-left:11%;"><b>backward&minus;char</b>,
<b>vi&minus;backward&minus;char</b></p>

<p style="margin-left:22%;">moves the mark one column
left</p>

<p style="margin-left:11%;"><b>forward&minus;word</b>,
<b>vi&minus;forward&minus;word <br>
vi&minus;forward&minus;word&minus;end</b>,
<b>emacs&minus;forward&minus;word</b></p>

<p style="margin-left:22%;">moves the mark one screenful
down</p>

<p style="margin-left:11%;"><b>backward&minus;word</b>,
<b>vi&minus;backward&minus;word</b>,
<b>emacs&minus;backward&minus;word</b></p>

<p style="margin-left:22%;">moves the mark one screenful
up</p>


<p style="margin-left:11%;"><b>vi&minus;forward&minus;blank&minus;word</b>,
<b>vi&minus;forward&minus;blank&minus;word&minus;end</b></p>

<p style="margin-left:22%;">moves the mark to the first
line of the next group of matches</p>


<p style="margin-left:11%;"><b>vi&minus;backward&minus;blank&minus;word</b></p>

<p style="margin-left:22%;">moves the mark to the last line
of the previous group of matches</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;history</b></p>

<p style="margin-left:22%;">moves the mark to the first
line</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;history</b></p>

<p style="margin-left:22%;">moves the mark to the last
line</p>


<p style="margin-left:11%;"><b>beginning&minus;of&minus;buffer&minus;or&minus;history</b>,
<b>beginning&minus;of&minus;line <br>
beginning&minus;of&minus;line&minus;hist</b>,
<b>vi&minus;beginning&minus;of&minus;line</b></p>

<p style="margin-left:22%;">moves the mark to the leftmost
column</p>


<p style="margin-left:11%;"><b>end&minus;of&minus;buffer&minus;or&minus;history</b>,
<b>end&minus;of&minus;line <br>
end&minus;of&minus;line&minus;hist</b>,
<b>vi&minus;end&minus;of&minus;line</b></p>

<p style="margin-left:22%;">moves the mark to the rightmost
column</p>

<p style="margin-left:11%;"><b>complete&minus;word</b>,
<b>menu&minus;complete</b>,
<b>expand&minus;or&minus;complete <br>
expand&minus;or&minus;complete&minus;prefix</b>,
<b>menu&minus;expand&minus;or&minus;complete</b></p>

<p style="margin-left:22%;">moves the mark to the next
match</p>


<p style="margin-left:11%;"><b>reverse&minus;menu&minus;complete</b></p>

<p style="margin-left:22%;">moves the mark to the previous
match</p>

<p style="margin-left:11%;"><b>vi&minus;insert</b></p>

<p style="margin-left:22%;">this toggles between normal and
interactive mode; in interactive mode the keys bound to
<b>self&minus;insert</b> and
<b>self&minus;insert&minus;unmeta</b> insert into the
command line as in normal editing mode but without leaving
menu selection; after each character completion is tried
again and the list changes to contain only the new matches;
the completion widgets make the longest unambiguous string
be inserted in the command line and <b>undo</b> and
<b>backward&minus;delete&minus;char</b> go back to the
previous set of matches</p>


<p style="margin-left:11%;"><b>history&minus;incremental&minus;search&minus;forward
<br>

history&minus;incremental&minus;search&minus;backward</b></p>

<p style="margin-left:22%;">this starts incremental
searches in the list of completions displayed; in this mode,
<b>accept&minus;line</b> only leaves incremental search,
going back to the normal menu selection mode</p>

<p style="margin-left:11%; margin-top: 1em">All movement
functions wrap around at the edges; any other zle function
not listed leaves menu selection and executes that function.
It is possible to make widgets in the above list do the same
by using the form of the widget with a
&lsquo;<b>.</b>&rsquo; in front. For example, the widget
&lsquo;<b>.accept&minus;line</b>&rsquo; has the effect of
leaving menu selection and accepting the entire command
line.</p>

<p style="margin-left:11%; margin-top: 1em">During this
selection the widget uses the keymap <b>menuselect</b>. Any
key that is not defined in this keymap or that is bound to
<b>undefined&minus;key</b> is looked up in the keymap
currently selected. This is used to ensure that the most
important keys used during selection (namely the cursor
keys, return, and TAB) have sensible defaults. However, keys
in the <b>menuselect</b> keymap can be modified directly
using the <b>bindkey</b> builtin command (see
<i>zshmodules</i>(1)). For example, to make the return key
leave menu selection without accepting the match currently
selected one could call</p>

<p style="margin-left:22%; margin-top: 1em"><b>bindkey
&minus;M menuselect &rsquo;^M&rsquo;
send&minus;break</b></p>

<p style="margin-left:11%; margin-top: 1em">after loading
the <b>zsh/complist</b> module.</p>

<h2>THE ZSH/COMPUTIL MODULE
<a name="THE ZSH/COMPUTIL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/computil</b> module adds several builtin commands
that are used by some of the completion functions in the
completion system based on shell functions (see
<i>zshcompsys</i>(1) ). Except for <b>compquote</b> these
builtin commands are very specialised and thus not very
interesting when writing your own completion functions. In
summary, these builtin commands are: <b><br>
comparguments</b></p>

<p style="margin-left:22%;">This is used by the
<b>_arguments</b> function to do the argument and command
line parsing. Like <b>compdescribe</b> it has an option
<b>&minus;i</b> to do the parsing and initialize some
internal state and various options to access the state
information to decide what should be completed.</p>

<p style="margin-left:11%;"><b>compdescribe</b></p>

<p style="margin-left:22%;">This is used by the
<b>_describe</b> function to build the displays for the
matches and to get the strings to add as matches with their
options. On the first call one of the options
<b>&minus;i</b> or <b>&minus;I</b> should be supplied as the
first argument. In the first case, display strings without
the descriptions will be generated, in the second case, the
string used to separate the matches from their descriptions
must be given as the second argument and the descriptions
(if any) will be shown. All other arguments are like the
definition arguments to <b>_describe</b> itself.</p>

<p style="margin-left:22%; margin-top: 1em">Once
<b>compdescribe</b> has been called with either the
<b>&minus;i</b> or the <b>&minus;I</b> option, it can be
repeatedly called with the <b>&minus;g</b> option and the
names of five arrays as its arguments. This will step
through the different sets of matches and store the options
in the first array, the strings with descriptions in the
second, the matches for these in the third, the strings
without descriptions in the fourth, and the matches for them
in the fifth array. These are then directly given to
<b>compadd</b> to register the matches with the completion
code.</p>

<p style="margin-left:11%;"><b>compfiles</b></p>

<p style="margin-left:22%;">Used by the <b>_path_files</b>
function to optimize complex recursive filename generation
(globbing). It does three things. With the <b>&minus;p</b>
and <b>&minus;P</b> options it builds the glob patterns to
use, including the paths already handled and trying to
optimize the patterns with respect to the prefix and suffix
from the line and the match specification currently used.
The <b>&minus;i</b> option does the directory tests for the
<b>ignore&minus;parents</b> style and the <b>&minus;r</b>
option tests if a component for some of the matches are
equal to the string on the line and removes all other
matches if that is true.</p>

<p style="margin-left:11%;"><b>compgroups</b></p>

<p style="margin-left:22%;">Used by the <b>_tags</b>
function to implement the internals of the
<b>group&minus;order</b> style. This only takes its
arguments as names of completion groups and creates the
groups for it (all six types: sorted and unsorted, both
without removing duplicates, with removing all duplicates
and with removing consecutive duplicates).</p>

<p style="margin-left:11%;"><b>compquote</b> [
<b>&minus;p</b> ] <i>names</i> ...</p>

<p style="margin-left:22%;">There may be reasons to write
completion functions that have to add the matches using the
<b>&minus;Q</b> option to <b>compadd</b> and perform quoting
themselves. Instead of interpreting the first character of
the <b>all_quotes</b> key of the <b>compstate</b> special
association and using the <b>q</b> flag for parameter
expansions, one can use this builtin command. The arguments
are the names of scalar or array parameters and the values
of these parameters are quoted as needed for the innermost
quoting level. If the <b>&minus;p</b> option is given,
quoting is done as if there is some prefix before the values
of the parameters, so that a leading equal sign will not be
quoted.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status is non&minus;zero in case of an error and zero
otherwise.</p>

<p style="margin-left:11%;"><b>comptags <br>
comptry</b></p>

<p style="margin-left:22%;">These implement the internals
of the tags mechanism.</p>

<p style="margin-left:11%;"><b>compvalues</b></p>

<p style="margin-left:22%;">Like <b>comparguments</b>, but
for the <b>_values</b> function.</p>

<h2>THE ZSH/CURSES MODULE
<a name="THE ZSH/CURSES MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/curses</b> module makes available one builtin command
and various parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Builtin <br>
zcurses init <br>
zcurses end <br>
zcurses addwin</b> <i>targetwin nlines ncols begin_y
begin_x</i> [ <i>parentwin</i> ] <b><br>
zcurses delwin</b> <i>targetwin</i> <b><br>
zcurses refresh</b> [ <i>targetwin</i> ... ] <b><br>
zcurses touch</b> <i>targetwin</i> ... <b><br>
zcurses move</b> <i>targetwin new_y new_x</i> <b><br>
zcurses clear</b> <i>targetwin</i> [ <b>redraw</b> |
<b>eol</b> | <b>bot</b> ] <b><br>
zcurses position</b> <i>targetwin array</i> <b><br>
zcurses char</b> <i>targetwin character</i> <b><br>
zcurses string</b> <i>targetwin string</i> <b><br>
zcurses border</b> <i>targetwin border</i> <b><br>
zcurses attr</b> <i>targetwin</i> [
<i>{+/&minus;}attribute</i> |
<i>fg_col</i><b>/</b><i>bg_col</i> ] [...] <b><br>
zcurses bg</b> <i>targetwin</i> [
<i>{+/&minus;}attribute</i> |
<i>fg_col</i><b>/</b><i>bg_col</i> | <b>@</b><i>char</i> ]
[...] <b><br>
zcurses scroll</b> <i>targetwin</i> [ <b>on</b> | <b>off</b>
| {+/&minus;}<i>lines</i> ] <b><br>
zcurses input</b> <i>targetwin</i> [ <i>param</i> [
<i>kparam</i> [ <i>mparam</i> ] ] ] <b><br>
zcurses mouse</b> [ <b>delay</b> <i>num</i> |
{+/&minus;}<b>motion</b> ] <b><br>
zcurses timeout</b> <i>targetwin intval</i> <b><br>
zcurses querychar</b> <i>targetwin</i> [ <i>param</i> ]</p>

<p style="margin-left:22%;">Manipulate curses windows. All
uses of this command should be bracketed by
&lsquo;<b>zcurses init</b>&rsquo; to initialise use of
curses, and &lsquo;<b>zcurses end</b>&rsquo; to end it;
omitting &lsquo;<b>zcurses end</b>&rsquo; can cause the
terminal to be in an unwanted state.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>addwin</b> creates a window with <i>nlines</i> lines and
<i>ncols</i> columns. Its upper left corner will be placed
at row <i>begin_y</i> and column <i>begin_x</i> of the
screen. <i>targetwin</i> is a string and refers to the name
of a window that is not currently assigned. Note in
particular the curses convention that vertical values appear
before horizontal values.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>addwin</b> is given an existing window as the final
argument, the new window is created as a subwindow of
<i>parentwin</i>. This differs from an ordinary new window
in that the memory of the window contents is shared with the
parent&rsquo;s memory. Subwindows must be deleted before
their parent. Note that the coordinates of subwindows are
relative to the screen, not the parent, as with other
windows.</p>

<p style="margin-left:22%; margin-top: 1em">Use the
subcommand <b>delwin</b> to delete a window created with
<b>addwin</b>. Note that <b>end</b> does <i>not</i>
implicitly delete windows, and that <b>delwin</b> does not
erase the screen image of the window.</p>

<p style="margin-left:22%; margin-top: 1em">The window
corresponding to the full visible screen is called
<b>stdscr</b>; it always exists after &lsquo;<b>zcurses
init</b>&rsquo; and cannot be delete with <b>delwin</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>refresh</b> will refresh window <i>targetwin</i>; this is
necessary to make any pending changes (such as characters
you have prepared for output with <b>char</b>) visible on
the screen. <b>refresh</b> without an argument causes the
screen to be cleared and redrawn. If multiple windows are
given, the screen is updated once at the end.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>touch</b> marks the <i>targetwin</i>s listed as changed.
This is necessary before <b>refresh</b>ing windows if a
window that was in front of another window (which may be
<b>stdscr</b>) is deleted.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>move</b> moves the cursor position in <i>targetwin</i> to
new coordinates <i>new_y</i> and <i>new_x</i>. Note that the
subcommand <b>string</b> (but not the subcommand
<b>char</b>) advances the cursor position over the
characters added.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>clear</b> erases the contents of <i>targetwin</i>. One
(and no more than one) of three options may be specified.
With the option <b>redraw</b>, in addition the next
<b>refresh</b> of <i>targetwin</i> will cause the screen to
be cleared and repainted. With the option <b>eol</b>,
<i>targetwin</i> is only cleared to the end of the current
cursor line. With the option <b>bot</b>, <i>targetwin</i> is
cleared to the end of the window, i.e everything to the
right and below the cursor is cleared.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>position</b> writes various positions associated with
<i>targetwin</i> into the array named <i>array</i>. These
are, in order:</p>

<p style="margin-left:22%; margin-top: 1em">The y and x
coordinates of the cursor relative to the top left</p>

<p style="margin-left:32%;">of <i>targetwin</i></p>

<p style="margin-left:22%; margin-top: 1em">The y and x
coordinates of the top left of <i>targetwin</i> on the</p>

<p style="margin-left:32%;">screen</p>

<p style="margin-left:22%; margin-top: 1em">The size of
<i>targetwin</i> in y and x dimensions.</p>

<p style="margin-left:22%; margin-top: 1em">Outputting
characters and strings are achieved by <b>char</b> and
<b>string</b> respectively.</p>

<p style="margin-left:22%; margin-top: 1em">To draw a
border around window <i>targetwin</i>, use <b>border</b>.
Note that the border is not subsequently handled specially:
in other words, the border is simply a set of characters
output at the edge of the window. Hence it can be
overwritten, can scroll off the window, etc.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>attr</b> will set <i>targetwin</i>&rsquo;s attributes or
foreground/background color pair for any successive
character output. Each <i>attribute</i> given on the line
may be prepended by a <b>+</b> to set or a <b>&minus;</b> to
unset that attribute; <b>+</b> is assumed if absent. The
attributes supported are <b>blink</b>, <b>bold</b>,
<b>dim</b>, <b>reverse</b>, <b>standout</b>, and
<b>underline</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>fg_col</i><b>/</b><i>bg_col</i> attribute (to be read as
&lsquo;<i>fg_col</i> on <i>bg_col</i>&rsquo;) sets the
foreground and background color for character output. The
color <b>default</b> is sometimes available (in particular
if the library is ncurses), specifying the foreground or
background color with which the terminal started. The color
pair <b>default/default</b> is always available.</p>

<p style="margin-left:22%; margin-top: 1em"><b>bg</b>
overrides the color and other attributes of all characters
in the window. Its usual use is to set the background
initially, but it will overwrite the attributes of any
characters at the time when it is called. In addition to the
arguments allowed with <b>attr</b>, an argument
<b>@</b><i>char</i> specifies a character to be shown in
otherwise blank areas of the window. Owing to limitations of
curses this cannot be a multibyte character (use of ASCII
characters only is recommended). As the specified set of
attributes override the existing background, turning
attributes off in the arguments is not useful, though this
does not cause an error.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>scroll</b> can be used with <b>on</b> or <b>off</b> to
enabled or disable scrolling of a window when the cursor
would otherwise move below the window due to typing or
output. It can also be used with a positive or negative
integer to scroll the window up or down the given number of
lines without changing the current cursor position (which
therefore appears to move in the opposite direction relative
to the window). In the second case, if scrolling is
<b>off</b> it is temporarily turned <b>on</b> to allow the
window to be scrolled.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>input</b> reads a single character from the window
without echoing it back. If <i>param</i> is supplied the
character is assigned to the parameter <i>param</i>, else it
is assigned to the parameter <i>REPLY</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If both
<i>param</i> and <i>kparam</i> are supplied, the key is read
in &lsquo;keypad&rsquo; mode. In this mode special keys such
as function keys and arrow keys return the name of the key
in the parameter <i>kparam</i>. The key names are the macros
defined in the <b>curses.h</b> or <b>ncurses.h</b> with the
prefix &lsquo;<b>KEY_</b>&rsquo; removed; see also the
description of the parameter <b>zcurses_keycodes</b> below.
Other keys cause a value to be set in <i>param</i> as
before. On a successful return only one of <i>param</i> or
<i>kparam</i> contains a non&minus;empty string; the other
is set to an empty string.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>mparam</i> is also supplied, <b>input</b> attempts to
handle mouse input. This is only available with the ncurses
library; mouse handling can be detected by checking for the
exit status of &lsquo;<b>zcurses mouse</b>&rsquo; with no
arguments. If a mouse button is clicked (or double&minus; or
triple&minus;clicked, or pressed or released with a
configurable delay from being clicked) then <b>kparam</b> is
set to the string <b>MOUSE</b>, and <i>mparam</i> is set to
an array consisting of the following elements:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>An identifier to discriminate different input devices;
this is only rarely useful.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>The x, y and z coordinates of the mouse click relative
to the full screen, as three elements in that order (i.e.
the y coordinate is, unusually, after the x coordinate). The
z coordinate is only available for a few unusual input
devices and is otherwise set to zero.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>Any events that occurred as separate items; usually
there will be just one. An event consists of <b>PRESSED</b>,
<b>RELEASED</b>, <b>CLICKED</b>, <b>DOUBLE_CLICKED</b> or
<b>TRIPLE_CLICKED</b> followed immediately (in the same
element) by the number of the button.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the shift key was pressed, the string
<b>SHIFT</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the control key was pressed, the string
<b>CTRL</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the alt key was pressed, the string <b>ALT</b>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Not all mouse
events may be passed through to the terminal window; most
terminal emulators handle some mouse events themselves. Note
that the ncurses manual implies that using input both with
and without mouse handling may cause the mouse cursor to
appear and disappear.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>mouse</b> can be used to configure the use of the mouse.
There is no window argument; mouse options are global.
&lsquo;<b>zcurses mouse</b>&rsquo; with no arguments returns
status 0 if mouse handling is possible, else status 1.
Otherwise, the possible arguments (which may be combined on
the same command line) are as follows. <b>delay</b>
<i>num</i> sets the maximum delay in milliseconds between
press and release events to be considered as a click; the
value 0 disables click resolution, and the default is one
sixth of a second. <b>motion</b> proceeded by an optional
&lsquo;<b>+</b>&rsquo; (the default) or <b>&minus;</b> turns
on or off reporting of mouse motion in addition to clicks,
presses and releases, which are always reported. However, it
appears reports for mouse motion are not currently
implemented.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>timeout</b> specifies a timeout value for input from
<i>targetwin</i>. If <i>intval</i> is negative,
&lsquo;<b>zcurses input</b>&rsquo; waits indefinitely for a
character to be typed; this is the default. If <i>intval</i>
is zero, &lsquo;<b>zcurses input</b>&rsquo; returns
immediately; if there is typeahead it is returned, else no
input is done and status 1 is returned. If <i>intval</i> is
positive, &lsquo;<b>zcurses input</b>&rsquo; waits
<i>intval</i> milliseconds for input and if there is none at
the end of that period returns status 1.</p>

<p style="margin-left:22%; margin-top: 1em">The subcommand
<b>querychar</b> queries the character at the current cursor
position. The return values are stored in the array named
<i>param</i> if supplied, else in the array <b>reply</b>.
The first value is the character (which may be a multibyte
character if the system supports them); the second is the
color pair in the usual <i>fg_col</i><b>/</b><i>bg_col</i>
notation, or <b>0</b> if color is not supported. Any
attributes other than color that apply to the character, as
set with the subcommand <b>attr</b>, appear as additional
elements.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Parameters
<br>
ZCURSES_COLORS</b></p>

<p style="margin-left:22%;">Readonly integer. The maximum
number of colors the terminal supports. This value is
initialised by the curses library and is not available until
the first time <b>zcurses init</b> is run.</p>

<p style="margin-left:11%;"><b>ZCURSES_COLOR_PAIRS</b></p>

<p style="margin-left:22%;">Readonly integer. The maximum
number of color pairs <i>fg_col</i><b>/</b><i>bg_col</i>
that may be defined in &lsquo;<b>zcurses attr</b>&rsquo;
commands; note this limit applies to all color pairs that
have been used whether or not they are currently active.
This value is initialised by the curses library and is not
available until the first time <b>zcurses init</b> is
run.</p>

<p style="margin-left:11%;"><b>zcurses_attrs</b></p>

<p style="margin-left:22%;">Readonly array. The attributes
supported by <b>zsh/curses</b>; available as soon as the
module is loaded.</p>

<p style="margin-left:11%;"><b>zcurses_colors</b></p>

<p style="margin-left:22%;">Readonly array. The colors
supported by <b>zsh/curses</b>; available as soon as the
module is loaded.</p>

<p style="margin-left:11%;"><b>zcurses_keycodes</b></p>

<p style="margin-left:22%;">Readonly array. The values that
may be returned in the second parameter supplied to
&lsquo;<b>zcurses input</b>&rsquo; in the order in which
they are defined internally by curses. Not all function keys
are listed, only <b>F0</b>; curses reserves space for
<b>F0</b> up to <b>F63</b>.</p>

<p style="margin-left:11%;"><b>zcurses_windows</b></p>

<p style="margin-left:22%;">Readonly array. The current
list of windows, i.e. all windows that have been created
with &lsquo;<b>zcurses addwin</b>&rsquo; and not removed
with &lsquo;<b>zcurses delwin</b>&rsquo;.</p>

<h2>THE ZSH/DATETIME MODULE
<a name="THE ZSH/DATETIME MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/datetime</b> module makes available one builtin
command: <b><br>
strftime</b> [ <b>&minus;s</b> <i>scalar</i> ] <i>format
epochtime</i> <b><br>
strftime &minus;r</b> [ <b>&minus;q</b> ] [ <b>&minus;s</b>
<i>scalar</i> ] <i>format timestring</i></p>

<p style="margin-left:22%;">Output the date denoted by
<i>epochtime</i> in the <i>format</i> specified.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;r</b> (reverse), use the format <i>format</i> to
parse the input string <i>timestring</i> and output the
number of seconds since the epoch at which the time
occurred. If no timezone is parsed, the current timezone is
used; other parameters are set to zero if not present. If
<i>timestring</i> does not match <i>format</i> the command
returns status 1; it will additionally print an error
message unless the option <b>&minus;q</b> (quiet) is given.
If <i>timestring</i> matches <i>format</i> but not all
characters in <i>timestring</i> were used, the conversion
succeeds; however, a warning is issued unless the option
<b>&minus;q</b> is given. The matching is implemented by the
system function <b>strptime</b>; see <i>strptime</i>(3).
This means that zsh format extensions are not available,
however for reverse lookup they are not required. If the
function is not implemented, the command returns status 2
and (unless <b>&minus;q</b> is given) prints a message.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;s</b> <i>scalar</i> is given, assign the date
string (or epoch time in seconds if <b>&minus;r</b> is
given) to <i>scalar</i> instead of printing it.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/datetime</b> module makes available several
parameters; all are readonly: <b><br>
EPOCHREALTIME</b></p>

<p style="margin-left:22%;">A floating point value
representing the number of seconds since the epoch. The
notional accuracy is to nanoseconds if the
<b>clock_gettime</b> call is available and to microseconds
otherwise, but in practice the range of double precision
floating point and shell scheduling latencies may be
significant effects.</p>

<p style="margin-left:11%;"><b>EPOCHSECONDS</b></p>

<p style="margin-left:22%;">An integer value representing
the number of seconds since the epoch.</p>

<p style="margin-left:11%;"><b>epochtime</b></p>

<p style="margin-left:22%;">An array value containing the
number of seconds since the epoch in the first element and
the remainder of the time since the epoch in nanoseconds in
the second element. To ensure the two elements are
consistent the array should be copied or otherwise
referenced as a single substitution before the values are
used. The following idiom may be used:</p>

<p style="margin-left:32%; margin-top: 1em"><b>for secs
nsecs in $epochtime; do <br>
... <br>
done</b></p>

<h2>THE ZSH/DELTOCHAR MODULE
<a name="THE ZSH/DELTOCHAR MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/deltochar</b> module makes available two ZLE
functions: <b><br>
delete&minus;to&minus;char</b></p>

<p style="margin-left:22%;">Read a character from the
keyboard, and delete from the cursor position up to and
including the next (or, with repeat count <i>n</i>, the
<i>n</i>th) instance of that character. Negative repeat
counts mean delete backwards.</p>


<p style="margin-left:11%;"><b>zap&minus;to&minus;char</b></p>

<p style="margin-left:22%;">This behaves like
<b>delete&minus;to&minus;char</b>, except that the final
occurrence of the character itself is not deleted.</p>

<h2>THE ZSH/EXAMPLE MODULE
<a name="THE ZSH/EXAMPLE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/example</b> module makes available one builtin
command: <b><br>
example</b> [ <b>&minus;flags</b> ] [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">Displays the flags and
arguments it is invoked with.</p>

<p style="margin-left:11%; margin-top: 1em">The purpose of
the module is to serve as an example of how to write a
module.</p>

<h2>THE ZSH/FILES MODULE
<a name="THE ZSH/FILES MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/files</b> module makes available some common commands
for file manipulation as builtins; these commands are
probably not needed for many normal situations but can be
useful in emergency recovery situations with constrained
resources. The commands do not implement all features now
required by relevant standards committees.</p>

<p style="margin-left:11%; margin-top: 1em">For all
commands, a variant beginning <b>zf_</b> is also available
and loaded automatically. Using the features capability of
zmodload will let you load only those names you want.</p>

<p style="margin-left:11%; margin-top: 1em">The commands
loaded by default are: <b><br>
chgrp</b> [ <b>&minus;hRs</b> ] <i>group filename</i>
...</p>

<p style="margin-left:22%;">Changes group of files
specified. This is equivalent to <b>chown</b> with a
<i>user&minus;spec</i> argument of
&lsquo;<b>:</b><i>group</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>chown</b> [
<b>&minus;hRs</b> ] <i>user&minus;spec filename</i> ...</p>

<p style="margin-left:22%;">Changes ownership and group of
files specified.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>user&minus;spec</i> can be in four forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; do not change group</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i><b>::</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; do not change group</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>user</i><b>:</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>change owner to <i>user</i>; change group to
<i>user</i>&rsquo;s primary group</p></td></tr>
</table>


<p style="margin-left:22%;"><i>user</i><b>:</b><i>group</i></p>

<p style="margin-left:32%;">change owner to <i>user</i>;
change group to <i>group</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>:</b><i>group</i></p></td>
<td width="1%"></td>
<td width="65%">


<p>do not change owner; change group to <i>group</i></p></td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In each case,
the &lsquo;<b>:</b>&rsquo; may instead be a
&lsquo;<b>.</b>&rsquo;. The rule is that if there is a
&lsquo;<b>:</b>&rsquo; then the separator is
&lsquo;<b>:</b>&rsquo;, otherwise if there is a
&lsquo;<b>.</b>&rsquo; then the separator is
&lsquo;<b>.</b>&rsquo;, otherwise there is no separator.</p>

<p style="margin-left:22%; margin-top: 1em">Each of
<i>user</i> and <i>group</i> may be either a username (or
group name, as appropriate) or a decimal user ID (group ID).
Interpretation as a name takes precedence, if there is an
all&minus;numeric username (or group name).</p>

<p style="margin-left:22%; margin-top: 1em">If the target
is a symbolic link, the <b>&minus;h</b> option causes
<b>chown</b> to set the ownership of the link instead of its
target.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;R</b> option causes <b>chown</b> to recursively
descend into directories, changing the ownership of all
files in the directory after changing the ownership of the
directory itself.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;s</b> option is a zsh extension to <b>chown</b>
functionality. It enables paranoid behaviour, intended to
avoid security problems involving a <b>chown</b> being
tricked into affecting files other than the ones intended.
It will refuse to follow symbolic links, so that (for
example) &lsquo;&lsquo;<b>chown luser
/tmp/foo/passwd</b>&rsquo;&rsquo; can&rsquo;t accidentally
chown <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a
link to <b>/etc</b>. It will also check where it is after
leaving directories, so that a recursive chown of a deep
directory tree can&rsquo;t end up recursively chowning
<b>/usr</b> as a result of directories being moved up the
tree.</p>

<p style="margin-left:11%;"><b>ln</b> [
<b>&minus;dfhins</b> ] <i>filename dest</i> <b><br>
ln</b> [ <b>&minus;dfhins</b> ] <i>filename</i> ...
<i>dir</i></p>

<p style="margin-left:22%;">Creates hard (or, with
<b>&minus;s</b>, symbolic) links. In the first form, the
specified <i>dest</i>ination is created, as a link to the
specified <i>filename</i>. In the second form, each of the
<i>filename</i>s is taken in turn, and linked to a pathname
in the specified <i>dir</i>ectory that has the same last
pathname component.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>ln</b> will not attempt to create hard links to
directories. This check can be overridden using the
<b>&minus;d</b> option. Typically only the super&minus;user
can actually succeed in creating hard links to directories.
This does not apply to symbolic links in any case.</p>

<p style="margin-left:22%; margin-top: 1em">By default,
existing files cannot be replaced by links. The
<b>&minus;i</b> option causes the user to be queried about
replacing existing files. The <b>&minus;f</b> option causes
existing files to be silently deleted, without querying.
<b>&minus;f</b> takes precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;h</b> and <b>&minus;n</b> options are identical
and both exist for compatibility; either one indicates that
if the target is a symlink then it should not be
dereferenced. Typically this is used in combination with
<b>&minus;sf</b> so that if an existing link points to a
directory then it will be removed, instead of followed. If
this option is used with multiple filenames and the target
is a symbolic link pointing to a directory then the result
is an error.</p>

<p style="margin-left:11%;"><b>mkdir</b> [ <b>&minus;p</b>
] [ <b>&minus;m</b> <i>mode</i> ] <i>dir</i> ...</p>

<p style="margin-left:22%;">Creates directories. With the
<b>&minus;p</b> option, non&minus;existing parent
directories are first created if necessary, and there will
be no complaint if the directory already exists. The
<b>&minus;m</b> option can be used to specify (in octal) a
set of file permissions for the created directories,
otherwise mode 777 modified by the current <b>umask</b> (see
<i>umask</i>(2)) is used.</p>

<p style="margin-left:11%;"><b>mv</b> [ <b>&minus;fi</b> ]
<i>filename dest</i> <b><br>
mv</b> [ <b>&minus;fi</b> ] <i>filename</i> ...
<i>dir</i></p>

<p style="margin-left:22%;">Moves files. In the first form,
the specified <i>filename</i> is moved to the specified
<i>dest</i>ination. In the second form, each of the
<i>filename</i>s is taken in turn, and moved to a pathname
in the specified <i>dir</i>ectory that has the same last
pathname component.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
user will be queried before replacing any file that the user
cannot write to, but writable files will be silently
removed. The <b>&minus;i</b> option causes the user to be
queried about replacing any existing files. The
<b>&minus;f</b> option causes any existing files to be
silently deleted, without querying. <b>&minus;f</b> takes
precedence.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
<b>mv</b> will not move files across devices. Historical
versions of <b>mv</b>, when actual renaming is impossible,
fall back on copying and removing files; if this behaviour
is desired, use <b>cp</b> and <b>rm</b> manually. This may
change in a future version.</p>

<p style="margin-left:11%;"><b>rm</b> [ <b>&minus;dfirs</b>
] <i>filename</i> ...</p>

<p style="margin-left:22%;">Removes files and directories
specified.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>rm</b> will not remove directories (except with the
<b>&minus;r</b> option). The <b>&minus;d</b> option causes
<b>rm</b> to try removing directories with <b>unlink</b>
(see <i>unlink</i>(2)), the same method used for files.
Typically only the super&minus;user can actually succeed in
unlinking directories in this way. <b>&minus;d</b> takes
precedence over <b>&minus;r</b>.</p>

<p style="margin-left:22%; margin-top: 1em">By default, the
user will be queried before removing any file that the user
cannot write to, but writable files will be silently
removed. The <b>&minus;i</b> option causes the user to be
queried about removing any files. The <b>&minus;f</b> option
causes files to be silently deleted, without querying, and
suppresses all error indications. <b>&minus;f</b> takes
precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;r</b> option causes <b>rm</b> to recursively
descend into directories, deleting all files in the
directory before removing the directory with the
<b>rmdir</b> system call (see <i>rmdir</i>(2)).</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;s</b> option is a zsh extension to <b>rm</b>
functionality. It enables paranoid behaviour, intended to
avoid common security problems involving a root&minus;run
<b>rm</b> being tricked into removing files other than the
ones intended. It will refuse to follow symbolic links, so
that (for example) &lsquo;&lsquo;<b>rm
/tmp/foo/passwd</b>&rsquo;&rsquo; can&rsquo;t accidentally
remove <b>/etc/passwd</b> if <b>/tmp/foo</b> happens to be a
link to <b>/etc</b>. It will also check where it is after
leaving directories, so that a recursive removal of a deep
directory tree can&rsquo;t end up recursively removing
<b>/usr</b> as a result of directories being moved up the
tree.</p>

<p style="margin-left:11%;"><b>rmdir</b> <i>dir</i> ...</p>

<p style="margin-left:22%;">Removes empty directories
specified.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>sync</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Calls the system call of the same name (see
<i>sync</i>(2)), which flushes dirty buffers to disk. It
might return before the I/O has actually been completed.</p></td></tr>
</table>

<h2>THE ZSH/LANGINFO MODULE
<a name="THE ZSH/LANGINFO MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/langinfo</b> module makes available one parameter:
<b><br>
langinfo</b></p>

<p style="margin-left:22%;">An associative array that maps
langinfo elements to their values.</p>

<p style="margin-left:22%; margin-top: 1em">Your
implementation may support a number of the following
keys:</p>


<p style="margin-left:22%; margin-top: 1em"><b>CODESET</b>,
<b>D_T_FMT</b>, <b>D_FMT</b>, <b>T_FMT</b>,
<b>RADIXCHAR</b>, <b>THOUSEP</b>, <b>YESEXPR</b>,
<b>NOEXPR</b>, <b>CRNCYSTR</b>, <b>ABDAY_{1..7}</b>,
<b>DAY_{1..7}</b>, <b>ABMON_{1..12}</b>, <b>MON_{1..12}</b>,
<b>T_FMT_AMPM</b>, <b>AM_STR</b>, <b>PM_STR</b>, <b>ERA</b>,
<b>ERA_D_FMT</b>, <b>ERA_D_T_FMT</b>, <b>ERA_T_FMT</b>,
<b>ALT_DIGITS</b></p>

<h2>THE ZSH/MAPFILE MODULE
<a name="THE ZSH/MAPFILE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/mapfile</b> module provides one special associative
array parameter of the same name. <b><br>
mapfile</b></p>

<p style="margin-left:22%;">This associative array takes as
keys the names of files; the resulting value is the content
of the file. The value is treated identically to any other
text coming from a parameter. The value may also be assigned
to, in which case the file in question is written (whether
or not it originally existed); or an element may be unset,
which will delete the file in question. For example,
&lsquo;<b>vared mapfile[myfile]</b>&rsquo; works as
expected, editing the file &lsquo;<b>myfile</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">When the array
is accessed as a whole, the keys are the names of files in
the current directory, and the values are empty (to save a
huge overhead in memory). Thus <b>${(k)mapfile}</b> has the
same affect as the glob operator <b>*(D)</b>, since files
beginning with a dot are not special. Care must be taken
with expressions such as <b>rm ${(k)mapfile}</b>, which will
delete every file in the current directory without the usual
&lsquo;<b>rm *</b>&rsquo; test.</p>

<p style="margin-left:22%; margin-top: 1em">The parameter
<b>mapfile</b> may be made read&minus;only; in that case,
files referenced may not be written or deleted.</p>

<p style="margin-left:22%; margin-top: 1em">A file may
conveniently be read into an array as one line per element
with the form
&lsquo;<i>array</i><b>=(&quot;${(f)mapfile[</b><i>filename</i><b>]}&quot;)</b>&rsquo;.
The double quotes are necessary to prevent empty lines from
being removed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Limitations</b>
<br>
Although reading and writing of the file in question is
efficiently handled, zsh&rsquo;s internal memory management
may be arbitrarily baroque; however, <b>mapfile</b> is
usually very much more efficient than anything involving a
loop. Note in particular that the whole contents of the file
will always reside physically in memory when accessed
(possibly multiple times, due to standard parameter
substitution operations). In particular, this means handling
of sufficiently long files (greater than the machine&rsquo;s
swap space, or than the range of the pointer type) will be
incorrect.</p>

<p style="margin-left:11%; margin-top: 1em">No errors are
printed or flagged for non&minus;existent, unreadable, or
unwritable files, as the parameter mechanism is too low in
the shell execution hierarchy to make this convenient.</p>

<p style="margin-left:11%; margin-top: 1em">It is
unfortunate that the mechanism for loading modules does not
yet allow the user to specify the name of the shell
parameter to be given the special behaviour.</p>

<h2>THE ZSH/MATHFUNC MODULE
<a name="THE ZSH/MATHFUNC MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/mathfunc</b> module provides standard mathematical
functions for use when evaluating mathematical formulae. The
syntax agrees with normal C and FORTRAN conventions, for
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>(( f =
sin(0.3) ))</b></p>

<p style="margin-left:11%; margin-top: 1em">assigns the
sine of 0.3 to the parameter f.</p>

<p style="margin-left:11%; margin-top: 1em">Most functions
take floating point arguments and return a floating point
value. However, any necessary conversions from or to integer
type will be performed automatically by the shell. Apart
from <b>atan</b> with a second argument and the <b>abs</b>,
<b>int</b> and <b>float</b> functions, all functions behave
as noted in the manual page for the corresponding C
function, except that any arguments out of range for the
function in question will be detected by the shell and an
error reported.</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions take a single floating point argument:
<b>acos</b>, <b>acosh</b>, <b>asin</b>, <b>asinh</b>,
<b>atan</b>, <b>atanh</b>, <b>cbrt</b>, <b>ceil</b>,
<b>cos</b>, <b>cosh</b>, <b>erf</b>, <b>erfc</b>,
<b>exp</b>, <b>expm1</b>, <b>fabs</b>, <b>floor</b>,
<b>gamma</b>, <b>j0</b>, <b>j1</b>, <b>lgamma</b>,
<b>log</b>, <b>log10</b>, <b>log1p</b>, <b>logb</b>,
<b>sin</b>, <b>sinh</b>, <b>sqrt</b>, <b>tan</b>,
<b>tanh</b>, <b>y0</b>, <b>y1</b>. The <b>atan</b> function
can optionally take a second argument, in which case it
behaves like the C function <b>atan2</b>. The <b>ilogb</b>
function takes a single floating point argument, but returns
an integer.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>signgam</b> takes no arguments, and returns an integer,
which is the C variable of the same name, as described in
<i>gamma</i>(3). Note that it is therefore only useful
immediately after a call to <b>gamma</b> or <b>lgamma</b>.
Note also that &lsquo;<b>signgam(RPAR</b>&rsquo; and
&lsquo;<b>signgam</b>&rsquo; are distinct expressions.</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions take two floating point arguments:
<b>copysign</b>, <b>fmod</b>, <b>hypot</b>,
<b>nextafter</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
take an integer first argument and a floating point second
argument: <b>jn</b>, <b>yn</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
take a floating point first argument and an integer second
argument: <b>ldexp</b>, <b>scalb</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>abs</b> does not convert the type of its single argument;
it returns the absolute value of either a floating point
number or an integer. The functions <b>float</b> and
<b>int</b> convert their arguments into a floating point or
integer value (by truncation) respectively.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the C
<b>pow</b> function is available in ordinary math evaluation
as the &lsquo;<b>**</b>&rsquo; operator and is not provided
here.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>rand48</b> is available if your system&rsquo;s
mathematical library has the function <b>erand48(3)</b>. It
returns a pseudo&minus;random floating point number between
0 and 1. It takes a single string optional argument.</p>

<p style="margin-left:11%; margin-top: 1em">If the argument
is not present, the random number seed is initialised by
three calls to the <b>rand(3)</b> function
&minus;&minus;&minus; this produces the same random numbers
as the next three values of <b>$RANDOM</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the argument
is present, it gives the name of a scalar parameter where
the current random number seed will be stored. On the first
call, the value must contain at least twelve hexadecimal
digits (the remainder of the string is ignored), or the seed
will be initialised in the same manner as for a call to
<b>rand48</b> with no argument. Subsequent calls to
<b>rand48</b>(<i>param</i>) will then maintain the seed in
the parameter <i>param</i> as a string of twelve hexadecimal
digits, with no base signifier. The random number sequences
for different parameters are completely independent, and are
also independent from that used by calls to <b>rand48</b>
with no argument.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
consider</p>

<p style="margin-left:22%; margin-top: 1em"><b>print $((
rand48(seed) )) <br>
print $(( rand48() )) <br>
print $(( rand48(seed) ))</b></p>

<p style="margin-left:11%; margin-top: 1em">Assuming
<b>$seed</b> does not exist, it will be initialised by the
first call. In the second call, the default seed is
initialised; note, however, that because of the properties
of <b>rand()</b> there is a correlation between the seeds
used for the two initialisations, so for more secure uses,
you should generate your own 12&minus;byte seed. The third
call returns to the same sequence of random numbers used in
the first call, unaffected by the intervening
<b>rand48()</b>.</p>

<h2>THE ZSH/NEWUSER MODULE
<a name="THE ZSH/NEWUSER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/newuser</b> module is loaded at boot if it is
available, the <b>RCS</b> option is set, and the
<b>PRIVILEGED</b> option is not set (all three are true by
default). This takes place immediately after commands in the
global <b>zshenv</b> file (typically <b>/etc/zshenv</b>), if
any, have been executed. If the module is not available it
is silently ignored by the shell; the module may safely be
removed from <b>$MODULE_PATH</b> by the administrator if it
is not required.</p>

<p style="margin-left:11%; margin-top: 1em">On loading, the
module tests if any of the start&minus;up files
<b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b> or
<b>.zlogin</b> exist in the directory given by the
environment variable <b>ZDOTDIR</b>, or the user&rsquo;s
home directory if that is not set. The test is not performed
and the module halts processing if the shell was in an
emulation mode (i.e. had been invoked as some other shell
than zsh).</p>

<p style="margin-left:11%; margin-top: 1em">If none of the
start&minus;up files were found, the module then looks for
the file <b>newuser</b> first in a sitewide directory,
usually the parent directory of the
<b>site&minus;functions</b> directory, and if that is not
found the module searches in a version&minus;specific
directory, usually the parent of the <b>functions</b>
directory containing version&minus;specific functions.
(These directories can be configured when zsh is built using
the
<b>&minus;&minus;enable&minus;site&minus;scriptdir=</b><i>dir</i>
and <b>&minus;&minus;enable&minus;scriptdir=</b><i>dir</i>
flags to <b>configure</b>, respectively; the defaults are
<i>prefix</i><b>/share/zsh</b> and
<i>prefix</i><b>/share/zsh/$ZSH_VERSION</b> where the
default <i>prefix</i> is <b>/usr/local</b>.)</p>

<p style="margin-left:11%; margin-top: 1em">If the file
<b>newuser</b> is found, it is then sourced in the same
manner as a start&minus;up file. The file is expected to
contain code to install start&minus;up files for the user,
however any valid shell code will be executed.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/newuser</b> module is then unconditionally
unloaded.</p>

<p style="margin-left:11%; margin-top: 1em">Note that it is
possible to achieve exactly the same effect as the
<b>zsh/newuser</b> module by adding code to
<b>/etc/zshenv</b>. The module exists simply to allow the
shell to make arrangements for new users without the need
for intervention by package maintainers and system
administrators.</p>

<p style="margin-left:11%; margin-top: 1em">The script
supplied with the module invokes the shell function
<b>zsh&minus;newuser&minus;install</b>. This may be invoked
directly by the user even if the <b>zsh/newuser</b> module
is disabled. Note, however, that if the module is not
installed the function will not be installed either. The
function is documented in the section User Configuration
Functions in <i>zshcontrib</i>(1).</p>

<h2>THE ZSH/PARAMETER MODULE
<a name="THE ZSH/PARAMETER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/parameter</b> module gives access to some of the
internal hash tables used by the shell by defining some
special parameters. <b><br>
options</b></p>

<p style="margin-left:22%;">The keys for this associative
array are the names of the options that can be set and unset
using the <b>setopt</b> and <b>unsetopt</b> builtins. The
value of each key is either the string <b>on</b> if the
option is currently set, or the string <b>off</b> if the
option is unset. Setting a key to one of these strings is
like setting or unsetting the option, respectively.
Unsetting a key in this array is like setting it to the
value <b>off</b>.</p>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">This array gives access to the
command hash table. The keys are the names of external
commands, the values are the pathnames of the files that
would be executed when the command would be invoked. Setting
a key in this array defines a new entry in this table in the
same way as with the <b>hash</b> builtin. Unsetting a key as
in &lsquo;<b>unset &quot;commands[foo]&quot;</b>&rsquo;
removes the entry for the given key from the command hash
table.</p>

<p style="margin-left:11%;"><b>functions</b></p>

<p style="margin-left:22%;">This associative array maps
names of enabled functions to their definitions. Setting a
key in it is like defining a function with the name given by
the key and the body given by the value. Unsetting a key
removes the definition for the function named by the
key.</p>

<p style="margin-left:11%;"><b>dis_functions</b></p>

<p style="margin-left:22%;">Like <b>functions</b> but for
disabled functions.</p>

<p style="margin-left:11%;"><b>builtins</b></p>

<p style="margin-left:22%;">This associative array gives
information about the builtin commands currently enabled.
The keys are the names of the builtin commands and the
values are either &lsquo;<b>undefined</b>&rsquo; for builtin
commands that will automatically be loaded from a module if
invoked or &lsquo;<b>defined</b>&rsquo; for builtin commands
that are already loaded.</p>

<p style="margin-left:11%;"><b>dis_builtins</b></p>

<p style="margin-left:22%;">Like <b>builtins</b> but for
disabled builtin commands.</p>

<p style="margin-left:11%;"><b>reswords</b></p>

<p style="margin-left:22%;">This array contains the enabled
reserved words.</p>

<p style="margin-left:11%;"><b>dis_reswords</b></p>

<p style="margin-left:22%;">Like <b>reswords</b> but for
disabled reserved words.</p>

<p style="margin-left:11%;"><b>aliases</b></p>

<p style="margin-left:22%;">This maps the names of the
regular aliases currently enabled to their expansions.</p>

<p style="margin-left:11%;"><b>dis_aliases</b></p>

<p style="margin-left:22%;">Like <b>aliases</b> but for
disabled regular aliases.</p>

<p style="margin-left:11%;"><b>galiases</b></p>

<p style="margin-left:22%;">Like <b>aliases</b>, but for
global aliases.</p>

<p style="margin-left:11%;"><b>dis_galiases</b></p>

<p style="margin-left:22%;">Like <b>galiases</b> but for
disabled global aliases.</p>

<p style="margin-left:11%;"><b>saliases</b></p>

<p style="margin-left:22%;">Like <b>raliases</b>, but for
suffix aliases.</p>

<p style="margin-left:11%;"><b>dis_saliases</b></p>

<p style="margin-left:22%;">Like <b>saliases</b> but for
disabled suffix aliases.</p>

<p style="margin-left:11%;"><b>parameters</b></p>

<p style="margin-left:22%;">The keys in this associative
array are the names of the parameters currently defined. The
values are strings describing the type of the parameter, in
the same format used by the <b>t</b> parameter flag, see
<i>zshexpn</i>(1) . Setting or unsetting keys in this array
is not possible.</p>

<p style="margin-left:11%;"><b>modules</b></p>

<p style="margin-left:22%;">An associative array giving
information about modules. The keys are the names of the
modules loaded, registered to be autoloaded, or aliased. The
value says which state the named module is in and is one of
the strings &lsquo;<b>loaded</b>&rsquo;,
&lsquo;<b>autoloaded</b>&rsquo;, or
&lsquo;<b>alias:</b><i>name</i>&rsquo;, where <i>name</i> is
the name the module is aliased to.</p>

<p style="margin-left:22%; margin-top: 1em">Setting or
unsetting keys in this array is not possible.</p>

<p style="margin-left:11%;"><b>dirstack</b></p>

<p style="margin-left:22%;">A normal array holding the
elements of the directory stack. Note that the output of the
<b>dirs</b> builtin command includes one more directory, the
current working directory.</p>

<p style="margin-left:11%;"><b>history</b></p>

<p style="margin-left:22%;">This associative array maps
history event numbers to the full history lines.</p>

<p style="margin-left:11%;"><b>historywords</b></p>

<p style="margin-left:22%;">A special array containing the
words stored in the history.</p>

<p style="margin-left:11%;"><b>jobdirs</b></p>

<p style="margin-left:22%;">This associative array maps job
numbers to the directories from which the job was started
(which may not be the current directory of the job).</p>

<p style="margin-left:22%; margin-top: 1em">The keys of the
associative arrays are usually valid job numbers, and these
are the values output with, for example,
<b>${(k)jobdirs}</b>. Non&minus;numeric job references may
be used when looking up a value; for example,
<b>${jobdirs[%+]}</b> refers to the current job.</p>

<p style="margin-left:11%;"><b>jobtexts</b></p>

<p style="margin-left:22%;">This associative array maps job
numbers to the texts of the command lines that were used to
start the jobs.</p>

<p style="margin-left:22%; margin-top: 1em">Handling of the
keys of the associative array is as described for
<b>jobdirs</b> above.</p>

<p style="margin-left:11%;"><b>jobstates</b></p>

<p style="margin-left:22%;">This associative array gives
information about the states of the jobs currently known.
The keys are the job numbers and the values are strings of
the form
&lsquo;<i>job&minus;state</i>:<i>mark</i>:<i>pid</i><b>=</b><i>state</i><b>...</b>&rsquo;.
The <i>job&minus;state</i> gives the state the whole job is
currently in, one of &lsquo;<b>running</b>&rsquo;,
&lsquo;<b>suspended</b>&rsquo;, or
&lsquo;<b>done</b>&rsquo;. The <i>mark</i> is
&lsquo;<b>+</b>&rsquo; for the current job,
&lsquo;<b>&minus;</b>&rsquo; for the previous job and empty
otherwise. This is followed by one
&lsquo;<i>pid</i><b>=</b><i>state</i>&rsquo; for every
process in the job. The <i>pid</i>s are, of course, the
process IDs and the <i>state</i> describes the state of that
process.</p>

<p style="margin-left:22%; margin-top: 1em">Handling of the
keys of the associative array is as described for
<b>jobdirs</b> above.</p>

<p style="margin-left:11%;"><b>nameddirs</b></p>

<p style="margin-left:22%;">This associative array maps the
names of named directories to the pathnames they stand
for.</p>

<p style="margin-left:11%;"><b>userdirs</b></p>

<p style="margin-left:22%;">This associative array maps
user names to the pathnames of their home directories.</p>

<p style="margin-left:11%;"><b>usergroups</b></p>

<p style="margin-left:22%;">This associative array maps
names of system groups of which the current user is a member
to the corresponding group identifiers. The contents are the
same as the groups output by the <b>id</b> command.</p>

<p style="margin-left:11%;"><b>funcfiletrace</b></p>

<p style="margin-left:22%;">This array contains the
absolute line numbers and corresponding file names for the
point where the current function, sourced file, or (if
<b>EVAL_LINENO</b> is set) <b>eval</b> command was called.
The array is of the same length as <b>funcsourcetrace</b>
and <b>functrace</b>, but differs from
<b>funcsourcetrace</b> in that the line and file are the
point of call, not the point of definition, and differs from
<b>functrace</b> in that all values are absolute line
numbers in files, rather than relative to the start of a
function, if any.</p>

<p style="margin-left:11%;"><b>funcsourcetrace</b></p>

<p style="margin-left:22%;">This array contains the file
names and line numbers of the points where the functions,
sourced files, and (if <b>EVAL_LINENO</b> is set)
<b>eval</b> commands currently being executed were defined.
The line number is the line where the &lsquo;<b>function</b>
<i>name</i>&rsquo; or &lsquo;<i>name</i> <b>()</b>&rsquo;
started. In the case of an autoloaded function the line
number is reported as zero. The format of each element is
<i>filename</i><b>:</b><i>lineno</i>. For functions
autoloaded from a file in native zsh format, where only the
body of the function occurs in the file, or for files that
have been executed by the <b>source</b> or
&lsquo;<b>.</b>&rsquo; builtins, the trace information is
shown as <i>filename</i><b>:</b><i>0</i>, since the entire
file is the definition.</p>

<p style="margin-left:22%; margin-top: 1em">Most users will
be interested in the information in the <b>funcfiletrace</b>
array instead.</p>

<p style="margin-left:11%;"><b>funcstack</b></p>

<p style="margin-left:22%;">This array contains the names
of the functions, sourced files, and (if <b>EVAL_LINENO</b>
is set) <b>eval</b> commands. currently being executed. The
first element is the name of the function using the
parameter.</p>

<p style="margin-left:11%;"><b>functrace</b></p>

<p style="margin-left:22%;">This array contains the names
and line numbers of the callers corresponding to the
functions currently being executed. The format of each
element is <i>name</i><b>:</b><i>lineno</i>. Callers are
also shown for sourced files; the caller is the point where
the <b>source</b> or &lsquo;<b>.</b>&rsquo; command was
executed.</p>

<h2>THE ZSH/PCRE MODULE
<a name="THE ZSH/PCRE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/pcre</b> module makes some commands available as
builtins: <b><br>
pcre_compile</b> [ <b>&minus;aimxs</b> ] <i>PCRE</i></p>

<p style="margin-left:22%;">Compiles a
perl&minus;compatible regular expression.</p>

<p style="margin-left:22%; margin-top: 1em">Option
<b>&minus;a</b> will force the pattern to be anchored.
Option <b>&minus;i</b> will compile a case&minus;insensitive
pattern. Option <b>&minus;m</b> will compile a
multi&minus;line pattern; that is, <b>^</b> and <b>$</b>
will match newlines within the pattern. Option
<b>&minus;x</b> will compile an extended pattern, wherein
whitespace and <b>#</b> comments are ignored. Option
<b>&minus;s</b> makes the dot metacharacter match all
characters, including those that indicate newline.</p>

<p style="margin-left:11%;"><b>pcre_study</b></p>

<p style="margin-left:22%;">Studies the
previously&minus;compiled PCRE which may result in faster
matching.</p>

<p style="margin-left:11%;"><b>pcre_match</b> [
<b>&minus;v</b> <i>var</i> ] [ <b>&minus;a</b> <i>arr</i> ]
[ <b>&minus;n</b> <i>offset</i> ] [ <b>&minus;b</b> ]
<i>string</i></p>

<p style="margin-left:22%;">Returns successfully if
<b>string</b> matches the previously&minus;compiled
PCRE.</p>

<p style="margin-left:22%; margin-top: 1em">Upon successful
match, if the expression captures substrings within
parentheses, <b>pcre_match</b> will set the array
<i>$match</i> to those substrings, unless the
<b>&minus;a</b> option is given, in which case it will set
the array <i>arr</i>. Similarly, the variable <i>MATCH</i>
will be set to the entire matched portion of the string,
unless the <b>&minus;v</b> option is given, in which case
the variable <i>var</i> will be set. No variables are
altered if there is no successful match. A <b>&minus;n</b>
option starts searching for a match from the byte
<i>offset</i> position in <i>string</i>. If the
<b>&minus;b</b> option is given, the variable
<i>ZPCRE_OP</i> will be set to an offset pair string,
representing the byte offset positions of the entire matched
portion within the <i>string</i>. For example, a
<i>ZPCRE_OP</i> set to &quot;32 45&quot; indicates that the
matched portion began on byte offset 32 and ended on byte
offset 44. Here, byte offset position 45 is the position
directly after the matched portion. Keep in mind that the
byte position isn&rsquo;t necessarily the same as the
character position when UTF&minus;8 characters are involved.
Consequently, the byte offset positions are only to be
relied on in the context of using them for subsequent
searches on <i>string</i>, using an offset position as an
argument to the <b>&minus;n</b> option. This is mostly used
to implement the &quot;find all non&minus;overlapping
matches&quot; functionality.</p>

<p style="margin-left:22%; margin-top: 1em">A simple
example of &quot;find all non&minus;overlapping
matches&quot;:</p>


<p style="margin-left:32%; margin-top: 1em"><b>string=&quot;The
following zip codes: 78884 90210 99513&quot; <br>
pcre_compile &minus;m &quot;\d{5}&quot; <br>
accum=() <br>
pcre_match &minus;b &minus;&minus; $string <br>
while [[ $? &minus;eq 0 ]] do <br>
b=($=ZPCRE_OP) <br>
accum+=$MATCH <br>
pcre_match &minus;b &minus;n $b[2] &minus;&minus; $string
<br>
done <br>
print &minus;l $accum</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/pcre</b> module makes available the following test
condition: <br>
expr <b>&minus;pcre&minus;match</b> pcre</p>

<p style="margin-left:22%;">Matches a string against a
perl&minus;compatible regular expression.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:22%; margin-top: 1em">[[
&quot;$text&quot; &minus;pcre&minus;match ^d+$ ]] &amp;&amp;
print text variable contains only &quot;d&rsquo;s&quot;.</p>

<h2>THE ZSH/REGEX MODULE
<a name="THE ZSH/REGEX MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/regex</b> module makes available the following test
condition: <i><br>
expr</i> <b>&minus;regex&minus;match</b> <i>regex</i></p>

<p style="margin-left:22%;">Matches a string against a
POSIX extended regular expression. On successful match,
matched portion of the string will normally be placed in the
<b>MATCH</b> variable. If there are any capturing
parentheses within the regex, then the <b>match</b> array
variable will contain those. If the match is not successful,
then the variables will not be altered.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>[[
alphabetical &minus;regex&minus;match ^a([^a]+)a([^a]+)a ]]
&amp;&amp; <br>
print &minus;l $MATCH X $match</b></p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>REMATCH_PCRE</b> is not set, then the <b>=~</b> operator
will automatically load this module as needed and will
invoke the <b>&minus;regex&minus;match</b> operator.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>BASH_REMATCH</b> is set, then the array
<b>BASH_REMATCH</b> will be set instead of <b>MATCH</b> and
<b>match</b>.</p>

<h2>THE ZSH/SCHED MODULE
<a name="THE ZSH/SCHED MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/sched</b> module makes available one builtin command
and one parameter. <b><br>
sched</b> [<b>&minus;o</b>]
[<b>+</b>]<i>hh</i><b>:</b><i>mm</i>[:<i>ss</i>]
<i>command</i> ... <b><br>
sched</b> [<b>&minus;o</b>] [<b>+</b>]<i>seconds command</i>
... <b><br>
sched</b> [ <b>&minus;</b><i>item</i> ]</p>

<p style="margin-left:22%;">Make an entry in the scheduled
list of commands to execute. The time may be specified in
either absolute or relative time, and either as hours,
minutes and (optionally) seconds separated by a colon, or
seconds alone. An absolute number of seconds indicates the
time since the epoch (1970/01/01 00:00); this is useful in
combination with the features in the <b>zsh/datetime</b>
module, see the zsh/datetime module entry in
<i>zshmodules</i>(1).</p>

<p style="margin-left:22%; margin-top: 1em">With no
arguments, prints the list of scheduled commands. If the
scheduled command has the <b>&minus;o</b> flag set, this is
shown at the start of the command.</p>

<p style="margin-left:22%; margin-top: 1em">With the
argument &lsquo;<b>&minus;</b><i>item</i>&rsquo;, removes
the given item from the list. The numbering of the list is
continuous and entries are in time order, so the numbering
can change when entries are added or deleted.</p>

<p style="margin-left:22%; margin-top: 1em">Commands are
executed either immediately before a prompt, or while the
shell&rsquo;s line editor is waiting for input. In the
latter case it is useful to be able to produce output that
does not interfere with the line being edited. Providing the
option <b>&minus;o</b> causes the shell to clear the command
line before the event and redraw it afterwards. This should
be used with any scheduled event that produces visible
output to the terminal; it is not needed, for example, with
output that updates a terminal emulator&rsquo;s title
bar.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>sched</b> builtin is not made available by default when
the shell starts in a mode emulating another shell. It can
be made available with the command &lsquo;<b>zmodload
&minus;F zsh/sched b:sched</b>&rsquo;.</p>

<p style="margin-left:11%;">zsh_scheduled_events</p>

<p style="margin-left:22%;">A readonly array corresponding
to the events scheduled by the <b>sched</b> builtin. The
indices of the array correspond to the numbers shown when
<b>sched</b> is run with no arguments (provided that the
<b>KSH_ARRAYS</b> option is not set). The value of the array
consists of the scheduled time in seconds since the epoch
(see the section &lsquo;The zsh/datetime Module&rsquo; for
facilities for using this number), followed by a colon,
followed by any options (which may be empty but will be
preceded by a &lsquo;<b>&minus;</b>&rsquo; otherwise),
followed by a colon, followed by the command to be
executed.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>sched</b> builtin should be used for manipulating the
events. Note that this will have an immediate effect on the
contents of the array, so that indices may become
invalid.</p>

<h2>THE ZSH/NET/SOCKET MODULE
<a name="THE ZSH/NET/SOCKET MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/net/socket</b> module makes available one builtin
command: <b><br>
zsocket</b> [ <b>&minus;altv</b> ] [ <b>&minus;d</b>
<i>fd</i> ] [ <i>args</i> ]</p>

<p style="margin-left:22%;"><b>zsocket</b> is implemented
as a builtin to allow full use of shell command line
editing, file I/O, and job control mechanisms.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Outbound
Connections <br>
zsocket</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b> <i>fd</i>
] <i>filename</i></p>

<p style="margin-left:22%;">Open a new Unix domain
connection to <i>filename</i>. The shell parameter
<b>REPLY</b> will be set to the file descriptor associated
with that connection. Currently, only stream connections are
supported.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Inbound
Connections <br>
zsocket &minus;l</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b>
<i>fd</i> ] <i>filename</i></p>

<p style="margin-left:22%;"><b>zsocket &minus;l</b> will
open a socket listening on <i>filename</i>. The shell
parameter <b>REPLY</b> will be set to the file descriptor
associated with that listener.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%;"><b>zsocket &minus;a</b> [
<b>&minus;tv</b> ] [ <b>&minus;d</b> <i>targetfd</i> ]
<i>listenfd</i></p>

<p style="margin-left:22%;"><b>zsocket &minus;a</b> will
accept an incoming connection to the socket associated with
<i>listenfd</i>. The shell parameter <b>REPLY</b> will be
set to the file descriptor associated with the inbound
connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;t</b> is specified, <b>zsocket</b> will return if
no incoming connection is pending. Otherwise it will wait
for one.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<h2>THE ZSH/STAT MODULE
<a name="THE ZSH/STAT MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/stat</b> module makes available one builtin command
under two possible names: <b><br>
zstat</b> [ <b>&minus;gnNolLtTrs</b> ] [ <b>&minus;f</b>
<i>fd</i> ] [ <b>&minus;H</b> <i>hash</i> ] [
<b>&minus;A</b> <i>array</i> ] [ <b>&minus;F</b> <i>fmt</i>
] [ <b><br>
+</b><i>element</i> ] [ <i>file</i> ... ] <b><br>
stat</b> <i>...</i></p>

<p style="margin-left:22%;">The command acts as a front end
to the <b>stat</b> system call (see <i>stat</i>(2)). The
same command is provided with two names; as the name
<b>stat</b> is often used by an external command it is
recommended that only the <b>zstat</b> form of the command
is used. This can be arranged by loading the module with the
command &lsquo;<b>zmodload &minus;F zsh/stat
b:zstat</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>stat</b> call fails, the appropriate system error message
printed and status 1 is returned. The fields of <b>struct
stat</b> give information about the files provided as
arguments to the command. In addition to those available
from the <b>stat</b> call, an extra element
&lsquo;<b>link</b>&rsquo; is provided. These elements
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>device</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The number of the device on which the file resides.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>inode</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The unique number of the file on this device
(&lsquo;<i>inode</i>&rsquo; number).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>mode</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The mode of the file; that is, the file&rsquo;s type and
access permissions. With the <b>&minus;s</b> option, this
will be returned as a string corresponding to the first
column in the display of the <b>ls &minus;l</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>nlink</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The number of hard links to the file.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>uid</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The user ID of the owner of the file. With the
<b>&minus;s</b> option, this is displayed as a user
name.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>gid</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The group ID of the file. With the <b>&minus;s</b>
option, this is displayed as a group name.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>rdev</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The raw device number. This is only useful for special
devices.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>size</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The size of the file in bytes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>atime</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>mtime</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>ctime</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The last access, modification and inode change times of
the file, respectively, as the number of seconds since
midnight GMT on 1st January, 1970. With the <b>&minus;s</b>
option, these are printed as strings for the local time
zone; the format can be altered with the <b>&minus;F</b>
option, and with the <b>&minus;g</b> option the times are in
GMT.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>blksize</b></p>

<p style="margin-left:32%;">The number of bytes in one
allocation block on the device on which the file
resides.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>block</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The number of disk blocks used by the file.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>link</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>If the file is a link and the <b>&minus;L</b> option is
in effect, this contains the name of the file linked to,
otherwise it is empty. Note that if this element is selected
(&lsquo;&lsquo;<b>zstat +link</b>&rsquo;&rsquo;) then the
<b>&minus;L</b> option is automatically used.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">A particular
element may be selected by including its name preceded by a
&lsquo;<b>+</b>&rsquo; in the option list; only one element
is allowed. The element may be shortened to any unique set
of leading characters. Otherwise, all elements will be shown
for all files.</p>

<p style="margin-left:22%; margin-top: 1em">Options:
<b><br>
&minus;A</b> <i>array</i></p>

<p style="margin-left:32%;">Instead of displaying the
results on standard output, assign them to an <i>array</i>,
one <b>struct stat</b> element per array element for each
file in order. In this case neither the name of the element
nor the name of the files appears in <i>array</i> unless the
<b>&minus;t</b> or <b>&minus;n</b> options were given,
respectively. If <b>&minus;t</b> is given, the element name
appears as a prefix to the appropriate array element; if
<b>&minus;n</b> is given, the file name appears as a
separate array element preceding all the others. Other
formatting options are respected.</p>

<p style="margin-left:22%;"><b>&minus;H</b> <i>hash</i></p>

<p style="margin-left:32%;">Similar to <b>&minus;A</b>, but
instead assign the values to <i>hash</i>. The keys are the
elements listed above. If the <b>&minus;n</b> option is
provided then the name of the file is included in the hash
with key <b>name</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;f</b> <i>fd</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>Use the file on file descriptor <i>fd</i> instead of
named files; no list of file names is allowed in this
case.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;F</b> <i>fmt</i></p></td>
<td width="1%"></td>
<td width="68%">


<p>Supplies a <b>strftime</b> (see <i>strftime</i>(3))
string for the formatting of the time elements. The
<b>&minus;s</b> option is implied.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;g</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Show the time elements in the GMT time zone. The
<b>&minus;s</b> option is implied.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;l</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>List the names of the type elements (to standard output
or an array as appropriate) and return immediately; options
other than <b>&minus;A</b> and arguments are ignored.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;L</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Perform an <b>lstat</b> (see <i>lstat</i>(2)) rather
than a <b>stat</b> system call. In this case, if the file is
a link, information about the link itself rather than the
target file is returned. This option is required to make the
<b>link</b> element useful. It&rsquo;s important to note
that this is the exact opposite from <i>ls</i>(1), etc.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;n</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Always show the names of files. Usually these are only
shown when output is to standard output and there is more
than one file in the list.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;N</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Never show the names of files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;o</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>If a raw file mode is printed, show it in octal, which
is more useful for human consumption than the default of
decimal. A leading zero will be printed in this case. Note
that this does not affect whether a raw or formatted file
mode is shown, which is controlled by the <b>&minus;r</b>
and <b>&minus;s</b> options, nor whether a mode is shown at
all.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;r</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Print raw data (the default format) alongside string
data (the <b>&minus;s</b> format); the string data appears
in parentheses after the raw data.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;s</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Print <b>mode</b>, <b>uid</b>, <b>gid</b> and the three
time elements as strings instead of numbers. In each case
the format is like that of <b>ls &minus;l</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;t</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Always show the type names for the elements of <b>struct
stat</b>. Usually these are only shown when output is to
standard output and no individual element has been
selected.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&minus;T</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Never show the type names of the <b>struct stat</b>
elements.</p> </td></tr>
</table>

<h2>THE ZSH/SYSTEM MODULE
<a name="THE ZSH/SYSTEM MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/system</b> module makes available various builtin
commands and parameters.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Builtins
<br>
syserror [ &minus;e</b> <i>errvar</i> <b>] [ &minus;p</b>
<i>prefix</i> <b>] [</b> <i>errno</i> <b>|</b>
<i>errname</i> <b>]</b></p>

<p style="margin-left:22%;">This command prints out the
error message associated with <i>errno</i>, a system error
number, followed by a newline to standard error.</p>

<p style="margin-left:22%; margin-top: 1em">Instead of the
error number, a name <i>errname</i>, for example
<b>ENOENT</b>, may be used. The set of names is the same as
the contents of the array <b>errnos</b>, see below.</p>

<p style="margin-left:22%; margin-top: 1em">If the string
<i>prefix</i> is given, it is printed in front of the error
message, with no intervening space.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>errvar</i> is supplied, the entire message, without a
newline, is assigned to the parameter names <i>errvar</i>
and nothing is output.</p>

<p style="margin-left:22%; margin-top: 1em">A return status
of 0 indicates the message was successfully printed
(although it may not be useful if the error number was out
of the system&rsquo;s range), a return status of 1 indicates
an error in the parameters, and a return status of 2
indicates the error name was not recognised (no message is
printed for this).</p>

<p style="margin-left:11%;"><b>sysread [ &minus;c</b>
<i>countvar</i> <b>] [ &minus;i</b> <i>infd</i> <b>] [
&minus;o</b> <i>outfd</i> <b>] <br>
[ &minus;s</b> <i>bufsize</i> <b>] [ &minus;t</b>
<i>timeout</i> <b>] [</b> <i>param</i> <b>]</b></p>

<p style="margin-left:22%;">Perform a single system read
from file descriptor <i>infd</i>, or zero if that is not
given. The result of the read is stored in <i>param</i> or
<i>REPLY</i> if that is not given. If <i>countvar</i> is
given, the number of bytes read is assigned to the parameter
named by <i>countvar</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The maximum
number of bytes read is <i>bufsize</i> or 8192 if that is
not given, however the command returns as soon as any number
of bytes was successfully read.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>timeout</i> is given, it specifies a timeout in seconds,
which may be zero to poll the file descriptor. This is
handled by the <b>poll</b> system call if available,
otherwise the <b>select</b> system call if available.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>outfd</i>
is given, an attempt is made to write all the bytes just
read to the file descriptor <i>outfd</i>. If this fails,
because of a system error other than <b>EINTR</b> or because
of an internal zsh error during an interrupt, the bytes read
but not written are stored in the parameter named by
<i>param</i> if supplied (no default is used in this case),
and the number of bytes read but not written is stored in
the parameter named by <i>countvar</i> if that is supplied.
If it was successful, <i>countvar</i> contains the full
number of bytes transferred, as usual, and <i>param</i> is
not set.</p>

<p style="margin-left:22%; margin-top: 1em">The error
<b>EINTR</b> (interrupted system call) is handled internally
so that shell interrupts are transparent to the caller. Any
other error causes a return.</p>

<p style="margin-left:22%; margin-top: 1em">The possible
return statuses are</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>0</p></td>
<td width="9%"></td>
<td width="68%">


<p>At least one byte of data was successfully read and, if
appropriate, written.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="68%">


<p>There was an error in the parameters to the command.
This is the only error for which a message is printed to
standard error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>2</p></td>
<td width="9%"></td>
<td width="68%">


<p>There was an error on the read, or on polling the input
file descriptor for a timeout. The parameter <b>ERRNO</b>
gives the error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>3</p></td>
<td width="9%"></td>
<td width="68%">


<p>Data were successfully read, but there was an error
writing them to <i>outfd</i>. The parameter <b>ERRNO</b>
gives the error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>4</p></td>
<td width="9%"></td>
<td width="68%">


<p>The attempt to read timed out. Note this does not set
<b>ERRNO</b> as this is not a system error.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>5</p></td>
<td width="9%"></td>
<td width="68%">


<p>No system error occurred, but zero bytes were read. This
usually indicates end of file. The parameters are set
according to the usual rules; no write to <i>outfd</i> is
attempted.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>syswrite [ &minus;c</b>
<i>countvar</i> <b>] [ &minus;o</b> <i>outfd</i> <b>]</b>
<i>data</i></p>

<p style="margin-left:22%;">The data (a single string of
bytes) are written to the file descriptor <i>outfd</i>, or 1
if that is not given, using the <b>write</b> system call.
Multiple write operations may be used if the first does not
write all the data.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>countvar</i> is given, the number of byte written is
stored in the parameter named by <i>countvar</i>; this may
not be the full length of <i>data</i> if an error
occurred.</p>

<p style="margin-left:22%; margin-top: 1em">The error
<b>EINTR</b> (interrupted system call) is handled internally
by retrying; otherwise an error causes the command to
return. For example, if the file descriptor is set to
non&minus;blocking output, an error <b>EAGAIN</b> (on some
systems, <b>EWOULDBLOCK</b>) may result in the command
returning early.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status may be 0 for success, 1 for an error in the
parameters to the command, or 2 for an error on the write;
no error message is printed in the last case, but the
parameter <b>ERRNO</b> will reflect the error that
occurred.</p>

<p style="margin-left:11%;"><b>zsystem flock [ &minus;t</b>
<i>timeout</i> <b>] [ &minus;f</b> <i>var</i> <b>]
[&minus;er]</b> <i>file</i> <b><br>
zsystem flock &minus;u</b> <i>fd_expr</i></p>

<p style="margin-left:22%;">The builtin
<b>zsystem</b>&rsquo;s subcommand <b>flock</b> performs
advisory file locking (via the <i>fcntl</i>(2) system call)
over the entire contents of the given file. This form of
locking requires the processes accessing the file to
cooperate; its most obvious use is between two instances of
the shell itself.</p>

<p style="margin-left:22%; margin-top: 1em">In the first
form the named <i>file</i>, which must already exist, is
locked by opening a file descriptor to the file and applying
a lock to the file descriptor. The lock terminates when the
shell process that created the lock exits; it is therefore
often convenient to create file locks within subshells,
since the lock is automatically released when the subshell
exits. Status 0 is returned if the lock succeeds, else
status 1.</p>

<p style="margin-left:22%; margin-top: 1em">In the second
form the file descriptor given by the arithmetic expression
<b>fd_expr</b> is closed, releasing a lock. The file
descriptor can be queried by using the
&lsquo;<b>&minus;f</b> <i>var</i>&rsquo; form during the
lock; on a successful lock, the shell variable <i>var</i> is
set to the file descriptor used for locking. The lock will
be released if the file descriptor is closed by any other
means, for example using &lsquo;<b>exec
{</b><i>var</i><b>}&gt;&amp;&minus;</b>&rsquo;; however, the
form described here performs a safety check that the file
descriptor is in use for file locking.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
shell waits indefinitely for the lock to succeed. The option
<b>&minus;t</b> <i>timeout</i> specifies a timeout for the
lock in seconds; currently this must be an integer. The
shell will attempt to lock the file once a second during
this period. If the attempt times out, status 2 is
returned.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;e</b> is given, the file descriptor for the lock
is preserved when the shell uses <b>exec</b> to start a new
process; otherwise it is closed at that point and the lock
released.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;r</b> is given, the lock is only for reading,
otherwise it is for reading and writing. The file descriptor
is opened accordingly.</p>

<p style="margin-left:11%;"><b>zsystem supports</b>
<i>subcommand</i></p>

<p style="margin-left:22%;">The builtin
<b>zsystem</b>&rsquo;s subcommand <b>supports</b> tests
whether a given subcommand is supported. It returns status 0
if so, else status 1. It operates silently unless there was
a syntax error (i.e. the wrong number of arguments), in
which case status 255 is returned. Status 1 can indicate one
of two things: <i>subcommand</i> is known but not supported
by the current operating system, or <i>subcommand</i> is not
known (possibly because this is an older version of the
shell before it was implemented).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>errnos</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A readonly array of the names of errors defined on the
system. These are typically macros defined in C by including
the system header file <b>errno.h</b>. The index of each
name (assuming the option <b>KSH_ARRAYS</b> is unset)
corresponds to the error number. Error numbers <i>num</i>
before the last known error which have no name are given the
name <b>E</b><i>num</i> in the array.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that
aliases for errors are not handled; only the canonical name
is used.</p>

<p style="margin-left:11%;"><b>sysparams</b></p>

<p style="margin-left:22%;">A readonly associative array.
The keys are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>pid</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Returns the process ID of the current process, even in
subshells. Compare <b>$$</b>, which returns the process ID
of the main shell process.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>ppid</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Returns the process ID of the parent of the current
process, even in subshells. Compare <b>$PPID</b>, which
returns the process ID of the parent of the main shell
process.</p> </td></tr>
</table>

<h2>THE ZSH/NET/TCP MODULE
<a name="THE ZSH/NET/TCP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/net/tcp</b> module makes available one builtin
command: <b><br>
ztcp</b> [ <b>&minus;acflLtv</b> ] [ <b>&minus;d</b>
<i>fd</i> ] [ <i>args</i> ]</p>

<p style="margin-left:22%;"><b>ztcp</b> is implemented as a
builtin to allow full use of shell command line editing,
file I/O, and job control mechanisms.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>ztcp</b>
is run with no options, it will output the contents of its
session table.</p>

<p style="margin-left:22%; margin-top: 1em">If it is run
with only the option <b>&minus;L</b>, it will output the
contents of the session table in a format suitable for
automatic parsing. The option is ignored if given with a
command to open or close a session. The output consists of a
set of lines, one per session, each containing the following
elements separated by spaces: <br>
File descriptor</p>

<p style="margin-left:32%;">The file descriptor in use for
the connection. For normal inbound (<b>I</b>) and outbound
(<b>O</b>) connections this may be read and written by the
usual shell mechanisms. However, it should only be close
with &lsquo;<b>ztcp &minus;c</b>&rsquo;.</p>

<p style="margin-left:22%;">Connection type</p>

<p style="margin-left:32%;">A letter indicating how the
session was created:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>Z</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>A session created with the <b>zftp</b> command.</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>L</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>A connection opened for listening with &lsquo;<b>ztcp
&minus;l</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>I</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>An inbound connection accepted with &lsquo;<b>ztcp
&minus;a</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p><b>O</b></p></td>
<td width="9%"></td>
<td width="57%">


<p>An outbound connection created with &lsquo;<b>ztcp</b>
<i>host ...</i>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:22%;">The local host</p>

<p style="margin-left:32%;">This is usually set to an
all&minus;zero IP address as the address of the localhost is
irrelevant.</p>

<p style="margin-left:22%;">The local port</p>

<p style="margin-left:32%;">This is likely to be zero
unless the connection is for listening.</p>

<p style="margin-left:22%;">The remote host</p>

<p style="margin-left:32%;">This is the fully qualified
domain name of the peer, if available, else an IP address.
It is an all&minus;zero IP address for a session opened for
listening.</p>

<p style="margin-left:22%;">The remote port</p>

<p style="margin-left:32%;">This is zero for a connection
opened for listening.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Outbound
Connections <br>
ztcp</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b> <i>fd</i> ]
<i>host</i> [ <i>port</i> ]</p>

<p style="margin-left:22%;">Open a new TCP connection to
<i>host</i>. If the <i>port</i> is omitted, it will default
to port 23. The connection will be added to the session
table and the shell parameter <b>REPLY</b> will be set to
the file descriptor associated with that connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Inbound
Connections <br>
ztcp &minus;l</b> [ <b>&minus;v</b> ] [ <b>&minus;d</b>
<i>fd</i> ] <i>port</i></p>

<p style="margin-left:22%;"><b>ztcp &minus;l</b> will open
a socket listening on TCP <i>port</i>. The socket will be
added to the session table and the shell parameter
<b>REPLY</b> will be set to the file descriptor associated
with that listener.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%;"><b>ztcp &minus;a</b> [
<b>&minus;tv</b> ] [ <b>&minus;d</b> <i>targetfd</i> ]
<i>listenfd</i></p>

<p style="margin-left:22%;"><b>ztcp &minus;a</b> will
accept an incoming connection to the port associated with
<i>listenfd</i>. The connection will be added to the session
table and the shell parameter <b>REPLY</b> will be set to
the file descriptor associated with the inbound
connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;d</b> is specified, its argument will be taken as
the target file descriptor for the connection.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;t</b> is specified, <b>ztcp</b> will return if no
incoming connection is pending. Otherwise it will wait for
one.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Closing
Connections <br>
ztcp &minus;cf</b> [ <b>&minus;v</b> ] [ <i>fd</i> ] <b><br>
ztcp &minus;c</b> [ <b>&minus;v</b> ] [ <i>fd</i> ]</p>

<p style="margin-left:22%;"><b>ztcp &minus;c</b> will close
the socket associated with <i>fd</i>. The socket will be
removed from the session table. If <i>fd</i> is not
specified, <b>ztcp</b> will close everything in the session
table.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
sockets registered by zftp (see <i>zshmodules</i>(1) )
cannot be closed this way. In order to force such a socket
closed, use <b>&minus;f</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
elicit more verbose output, use <b>&minus;v</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Example</b>
<br>
Here is how to create a TCP connection between two instances
of zsh. We need to pick an unassigned port; here we use the
randomly chosen 5123.</p>

<p style="margin-left:11%; margin-top: 1em">On
<b>host1</b>,</p>

<p style="margin-left:22%;"><b>zmodload zsh/net/tcp <br>
ztcp &minus;l 5123 <br>
listenfd=$REPLY <br>
ztcp &minus;a $listenfd <br>
fd=$REPLY</b></p>

<p style="margin-left:11%;">The second from last command
blocks until there is an incoming connection.</p>

<p style="margin-left:11%; margin-top: 1em">Now create a
connection from <b>host2</b> (which may, of course, be the
same machine):</p>

<p style="margin-left:22%;"><b>zmodload zsh/net/tcp <br>
ztcp host1 5123 <br>
fd=$REPLY</b></p>

<p style="margin-left:11%; margin-top: 1em">Now on each
host, <b>$fd</b> contains a file descriptor for talking to
the other. For example, on <b>host1</b>:</p>

<p style="margin-left:22%;"><b>print This is a message
&gt;&amp;$fd</b></p>

<p style="margin-left:11%;">and on <b>host2</b>:</p>

<p style="margin-left:22%;"><b>read &minus;r line
&lt;&amp;$fd; print &minus;r &minus; $line</b></p>

<p style="margin-left:11%;">prints &lsquo;<b>This is a
message</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">To tidy up, on
<b>host1</b>:</p>

<p style="margin-left:22%;"><b>ztcp &minus;c $listenfd <br>
ztcp &minus;c $fd</b></p>

<p style="margin-left:11%;">and on <b>host2</b></p>

<p style="margin-left:22%;"><b>ztcp &minus;c $fd</b></p>

<h2>THE ZSH/TERMCAP MODULE
<a name="THE ZSH/TERMCAP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/termcap</b> module makes available one builtin
command: <b><br>
echotc</b> <i>cap</i> [ <i>arg</i> ... ]</p>

<p style="margin-left:22%;">Output the termcap value
corresponding to the capability <i>cap</i>, with optional
arguments.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/termcap</b> module makes available one parameter:
<b><br>
termcap</b></p>

<p style="margin-left:22%;">An associative array that maps
termcap capability codes to their values.</p>

<h2>THE ZSH/TERMINFO MODULE
<a name="THE ZSH/TERMINFO MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/terminfo</b> module makes available one builtin
command: <b><br>
echoti</b> <i>cap</i> [ <i>arg</i> ]</p>

<p style="margin-left:22%;">Output the terminfo value
corresponding to the capability <i>cap</i>, instantiated
with <i>arg</i> if applicable.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/terminfo</b> module makes available one parameter:
<b><br>
terminfo</b></p>

<p style="margin-left:22%;">An associative array that maps
terminfo capability names to their values.</p>

<h2>THE ZSH/ZFTP MODULE
<a name="THE ZSH/ZFTP MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zftp</b> module makes available one builtin command:
<b><br>
zftp</b> <i>subcommand</i> [ <i>args</i> ]</p>

<p style="margin-left:22%;">The <b>zsh/zftp</b> module is a
client for FTP (file transfer protocol). It is implemented
as a builtin to allow full use of shell command line
editing, file I/O, and job control mechanisms. Often, users
will access it via shell functions providing a more powerful
interface; a set is provided with the <b>zsh</b>
distribution and is described in <i>zshzftpsys</i>(1).
However, the <b>zftp</b> command is entirely usable in its
own right.</p>

<p style="margin-left:22%; margin-top: 1em">All commands
consist of the command name <b>zftp</b> followed by the name
of a subcommand. These are listed below. The return status
of each subcommand is supposed to reflect the success or
failure of the remote operation. See a description of the
variable <b>ZFTP_VERBOSE</b> for more information on how
responses from the server may be printed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Subcommands
<br>
open</b> <i>host</i>[<b>:</b><i>port</i>] [ <i>user</i> [
<i>password</i> [ <i>account</i> ] ] ]</p>

<p style="margin-left:22%;">Open a new FTP session to
<i>host</i>, which may be the name of a TCP/IP connected
host or an IP number in the standard dot notation. If the
argument is in the form <i>host</i><b>:</b><i>port</i>, open
a connection to TCP port <i>port</i> instead of the standard
FTP port 21. This may be the name of a TCP service or a
number: see the description of <b>ZFTP_PORT</b> below for
more information.</p>

<p style="margin-left:22%; margin-top: 1em">If IPv6
addresses in colon format are used, the <i>host</i> should
be surrounded by quoted square brackets to distinguish it
from the <i>port</i>, for example
<b>&rsquo;[fe80::203:baff:fe02:8b56]&rsquo;</b>. For
consistency this is allowed with all forms of
<i>host</i>.</p>

<p style="margin-left:22%; margin-top: 1em">Remaining
arguments are passed to the <b>login</b> subcommand. Note
that if no arguments beyond <i>host</i> are supplied,
<b>open</b> will <i>not</i> automatically call <b>login</b>.
If no arguments at all are supplied, <b>open</b> will use
the parameters set by the <b>params</b> subcommand.</p>

<p style="margin-left:22%; margin-top: 1em">After a
successful open, the shell variables <b>ZFTP_HOST</b>,
<b>ZFTP_PORT</b>, <b>ZFTP_IP</b> and <b>ZFTP_SYSTEM</b> are
available; see &lsquo;Variables&rsquo; below.</p>

<p style="margin-left:11%;"><b>login</b> [ <i>name</i> [
<i>password</i> [ <i>account</i> ] ] ] <b><br>
user</b> [ <i>name</i> [ <i>password</i> [ <i>account</i> ]
] ]</p>

<p style="margin-left:22%;">Login the user <i>name</i> with
parameters <i>password</i> and <i>account</i>. Any of the
parameters can be omitted, and will be read from standard
input if needed (<i>name</i> is always needed). If standard
input is a terminal, a prompt for each one will be printed
on standard error and <i>password</i> will not be echoed. If
any of the parameters are not used, a warning message is
printed.</p>

<p style="margin-left:22%; margin-top: 1em">After a
successful login, the shell variables <b>ZFTP_USER</b>,
<b>ZFTP_ACCOUNT</b> and <b>ZFTP_PWD</b> are available; see
&lsquo;Variables&rsquo; below.</p>

<p style="margin-left:22%; margin-top: 1em">This command
may be re&minus;issued when a user is already logged in, and
the server will first be reinitialized for a new user.</p>

<p style="margin-left:11%;"><b>params</b> [ <i>host</i> [
<i>user</i> [ <i>password</i> [ <i>account</i> ] ] ] ]
<b><br>
params &minus;</b></p>

<p style="margin-left:22%;">Store the given parameters for
a later <b>open</b> command with no arguments. Only those
given on the command line will be remembered. If no
arguments are given, the parameters currently set are
printed, although the password will appear as a line of
stars; the return status is one if no parameters were set,
zero otherwise.</p>

<p style="margin-left:22%; margin-top: 1em">Any of the
parameters may be specified as a &lsquo;<b>?</b>&rsquo;,
which may need to be quoted to protect it from shell
expansion. In this case, the appropriate parameter will be
read from stdin as with the <b>login</b> subcommand,
including special handling of <i>password</i>. If the
&lsquo;<b>?</b>&rsquo; is followed by a string, that is used
as the prompt for reading the parameter instead of the
default message (any necessary punctuation and whitespace
should be included at the end of the prompt). The first
letter of the parameter (only) may be quoted with a
&lsquo;<b>\</b>&rsquo;; hence an argument
<b>&quot;\\$word&quot;</b> guarantees that the string from
the shell parameter <b>$word</b> will be treated literally,
whether or not it begins with a &lsquo;<b>?</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If instead a
single &lsquo;<b>&minus;</b>&rsquo; is given, the existing
parameters, if any, are deleted. In that case, calling
<b>open</b> with no arguments will cause an error.</p>

<p style="margin-left:22%; margin-top: 1em">The list of
parameters is not deleted after a <b>close</b>, however it
will be deleted if the <b>zsh/zftp</b> module is
unloaded.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zftp params
ftp.elsewhere.xx juser &rsquo;?Password for juser:
&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">will store the
host <b>ftp.elsewhere.xx</b> and the user <b>juser</b> and
then prompt the user for the corresponding password with the
given prompt.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>test</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Test the connection; if the server has reported that it
has closed the connection (maybe due to a timeout), return
status 2; if no connection was open anyway, return status 1;
else return status 0. The <b>test</b> subcommand is silent,
apart from messages printed by the <b>$ZFTP_VERBOSE</b>
mechanism, or error messages if the connection closes. There
is no network overhead for this test.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The test is
only supported on systems with either the <b>select(2)</b>
or <b>poll(2)</b> system calls; otherwise the message
&lsquo;<b>not supported on this system</b>&rsquo; is printed
instead.</p>

<p style="margin-left:22%; margin-top: 1em">The <b>test</b>
subcommand will automatically be called at the start of any
other subcommand for the current session when a connection
is open.</p>

<p style="margin-left:11%;"><b>cd</b> <i>directory</i></p>

<p style="margin-left:22%;">Change the remote directory to
<i>directory</i>. Also alters the shell variable
<b>ZFTP_PWD</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>cdup</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Change the remote directory to the one higher in the
directory tree. Note that <b>cd ..</b> will also work
correctly on non&minus;UNIX systems.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>dir</b> [ <i>args...</i>
]</p>

<p style="margin-left:22%;">Give a (verbose) listing of the
remote directory. The <i>args</i> are passed directly to the
server. The command&rsquo;s behaviour is implementation
dependent, but a UNIX server will typically interpret
<i>args</i> as arguments to the <b>ls</b> command and with
no arguments return the result of &lsquo;<b>ls
&minus;l</b>&rsquo;. The directory is listed to standard
output.</p>

<p style="margin-left:11%;"><b>ls</b> [ <i>args</i> ]</p>

<p style="margin-left:22%;">Give a (short) listing of the
remote directory. With no <i>args</i>, produces a raw list
of the files in the directory, one per line. Otherwise, up
to vagaries of the server implementation, behaves similar to
<b>dir</b>.</p>

<p style="margin-left:11%;"><b>type</b> [ <i>type</i> ]</p>

<p style="margin-left:22%;">Change the type for the
transfer to <i>type</i>, or print the current type if
<i>type</i> is absent. The allowed values are
&lsquo;<b>A</b>&rsquo; (ASCII), &lsquo;<b>I</b>&rsquo;
(Image, i.e. binary), or &lsquo;<b>B</b>&rsquo; (a synonym
for &lsquo;<b>I</b>&rsquo;).</p>

<p style="margin-left:22%; margin-top: 1em">The FTP default
for a transfer is ASCII. However, if <b>zftp</b> finds that
the remote host is a UNIX machine with 8&minus;bit byes, it
will automatically switch to using binary for file transfers
upon <b>open</b>. This can subsequently be overridden.</p>

<p style="margin-left:22%; margin-top: 1em">The transfer
type is only passed to the remote host when a data
connection is established; this command involves no network
overhead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ascii</b></p></td>
<td width="2%"></td>
<td width="29%">


<p>The same as <b>type A</b>.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>binary</b></p></td>
<td width="2%"></td>
<td width="29%">


<p>The same as <b>type I</b>.</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>mode</b> [ <b>S</b> |
<b>B</b> ]</p>

<p style="margin-left:22%;">Set the mode type to stream
(<b>S</b>) or block (<b>B</b>). Stream mode is the default;
block mode is not widely supported.</p>

<p style="margin-left:11%;"><b>remote</b> <i>files...</i>
<b><br>
local</b> [ <i>files...</i> ]</p>

<p style="margin-left:22%;">Print the size and last
modification time of the remote or local files. If there is
more than one item on the list, the name of the file is
printed first. The first number is the file size, the second
is the last modification time of the file in the format
<b>CCYYMMDDhhmmSS</b> consisting of year, month, date, hour,
minutes and seconds in GMT. Note that this format, including
the length, is guaranteed, so that time strings can be
directly compared via the <b>[[</b> builtin&rsquo;s
<b>&lt;</b> and <b>&gt;</b> operators, even if they are too
long to be represented as integers.</p>

<p style="margin-left:22%; margin-top: 1em">Not all servers
support the commands for retrieving this information. In
that case, the <b>remote</b> command will print nothing and
return status 2, compared with status 1 for a file not
found.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>local</b> command (but not <b>remote</b>) may be used
with no arguments, in which case the information comes from
examining file descriptor zero. This is the same file as
seen by a <b>put</b> command with no further
redirection.</p>

<p style="margin-left:11%;"><b>get</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">Retrieve all <i>file</i>s from
the server, concatenating them and sending them to standard
output.</p>

<p style="margin-left:11%;"><b>put</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">For each <i>file</i>, read a
file from standard input and send that to the remote host
with the given name.</p>

<p style="margin-left:11%;"><b>append</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">As <b>put</b>, but if the
remote <i>file</i> already exists, data is appended to it
instead of overwriting it.</p>

<p style="margin-left:11%;"><b>getat</b> <i>file point</i>
<b><br>
putat</b> <i>file point</i> <b><br>
appendat</b> <i>file point</i></p>

<p style="margin-left:22%;">Versions of <b>get</b>,
<b>put</b> and <b>append</b> which will start the transfer
at the given <i>point</i> in the remote <i>file</i>. This is
useful for appending to an incomplete local file. However,
note that this ability is not universally supported by
servers (and is not quite the behaviour specified by the
standard).</p>

<p style="margin-left:11%;"><b>delete</b> <i>file</i>
[...]</p>

<p style="margin-left:22%;">Delete the list of files on the
server.</p>

<p style="margin-left:11%;"><b>mkdir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Create a new directory
<i>directory</i> on the server.</p>

<p style="margin-left:11%;"><b>rmdir</b>
<i>directory</i></p>

<p style="margin-left:22%;">Delete the directory
<i>directory</i> on the server.</p>

<p style="margin-left:11%;"><b>rename</b> <i>old&minus;name
new&minus;name</i></p>

<p style="margin-left:22%;">Rename file
<i>old&minus;name</i> to <i>new&minus;name</i> on the
server.</p>

<p style="margin-left:11%;"><b>site</b> <i>args...</i></p>

<p style="margin-left:22%;">Send a host&minus;specific
command to the server. You will probably only need this if
instructed by the server to use it.</p>

<p style="margin-left:11%;"><b>quote</b> <i>args...</i></p>

<p style="margin-left:22%;">Send the raw FTP command
sequence to the server. You should be familiar with the FTP
command set as defined in RFC959 before doing this. Useful
commands may include <b>STAT</b> and <b>HELP</b>. Note also
the mechanism for returning messages as described for the
variable <b>ZFTP_VERBOSE</b> below, in particular that all
messages from the control connection are sent to standard
error.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>close</b></p></td>
<td width="4%"></td>
<td width="78%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>quit</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Close the current data connection. This unsets the shell
parameters <b>ZFTP_HOST</b>, <b>ZFTP_PORT</b>,
<b>ZFTP_IP</b>, <b>ZFTP_SYSTEM</b>, <b>ZFTP_USER</b>,
<b>ZFTP_ACCOUNT</b>, <b>ZFTP_PWD</b>, <b>ZFTP_TYPE</b> and
<b>ZFTP_MODE</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>session</b> [
<i>sessname</i> ]</p>

<p style="margin-left:22%;">Allows multiple FTP sessions to
be used at once. The name of the session is an arbitrary
string of characters; the default session is called
&lsquo;<b>default</b>&rsquo;. If this command is called
without an argument, it will list all the current sessions;
with an argument, it will either switch to the existing
session called <i>sessname</i>, or create a new session of
that name.</p>

<p style="margin-left:22%; margin-top: 1em">Each session
remembers the status of the connection, the set of
connection&minus;specific shell parameters (the same set as
are unset when a connection closes, as given in the
description of <b>close</b>), and any user parameters
specified with the <b>params</b> subcommand. Changing to a
previous session restores those values; changing to a new
session initialises them in the same way as if <b>zftp</b>
had just been loaded. The name of the current session is
given by the parameter <b>ZFTP_SESSION</b>.</p>

<p style="margin-left:11%;"><b>rmsession</b> [
<i>sessname</i> ]</p>

<p style="margin-left:22%;">Delete a session; if a name is
not given, the current session is deleted. If the current
session is deleted, the earliest existing session becomes
the new current session, otherwise the current session is
not changed. If the session being deleted is the only one, a
new session called &lsquo;<b>default</b>&rsquo; is created
and becomes the current session; note that this is a new
session even if the session being deleted is also called
&lsquo;<b>default</b>&rsquo;. It is recommended that
sessions not be deleted while background commands which use
<b>zftp</b> are still active.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b>
<br>
The following shell parameters are used by <b>zftp</b>.
Currently none of them are special. <b><br>
ZFTP_TMOUT</b></p>

<p style="margin-left:22%;">Integer. The time in seconds to
wait for a network operation to complete before returning an
error. If this is not set when the module is loaded, it will
be given the default value 60. A value of zero turns off
timeouts. If a timeout occurs on the control connection it
will be closed. Use a larger value if this occurs too
frequently.</p>

<p style="margin-left:11%;"><b>ZFTP_IP</b></p>

<p style="margin-left:22%;">Readonly. The IP address of the
current connection in dot notation.</p>

<p style="margin-left:11%;"><b>ZFTP_HOST</b></p>

<p style="margin-left:22%;">Readonly. The hostname of the
current remote server. If the host was opened as an IP
number, <b>ZFTP_HOST</b> contains that instead; this saves
the overhead for a name lookup, as IP numbers are most
commonly used when a nameserver is unavailable.</p>

<p style="margin-left:11%;"><b>ZFTP_PORT</b></p>

<p style="margin-left:22%;">Readonly. The number of the
remote TCP port to which the connection is open (even if the
port was originally specified as a named service). Usually
this is the standard FTP port, 21.</p>

<p style="margin-left:22%; margin-top: 1em">In the unlikely
event that your system does not have the appropriate
conversion functions, this appears in network byte order. If
your system is little&minus;endian, the port then consists
of two swapped bytes and the standard port will be reported
as 5376. In that case, numeric ports passed to <b>zftp
open</b> will also need to be in this format.</p>

<p style="margin-left:11%;"><b>ZFTP_SYSTEM</b></p>

<p style="margin-left:22%;">Readonly. The system type
string returned by the server in response to an FTP
<b>SYST</b> request. The most interesting case is a string
beginning <b>&quot;UNIX Type: L8&quot;</b>, which ensures
maximum compatibility with a local UNIX host.</p>

<p style="margin-left:11%;"><b>ZFTP_TYPE</b></p>

<p style="margin-left:22%;">Readonly. The type to be used
for data transfers , either &lsquo;<b>A</b>&rsquo; or
&lsquo;<b>I</b>&rsquo;. Use the <b>type</b> subcommand to
change this.</p>

<p style="margin-left:11%;"><b>ZFTP_USER</b></p>

<p style="margin-left:22%;">Readonly. The username
currently logged in, if any.</p>

<p style="margin-left:11%;"><b>ZFTP_ACCOUNT</b></p>

<p style="margin-left:22%;">Readonly. The account name of
the current user, if any. Most servers do not require an
account name.</p>

<p style="margin-left:11%;"><b>ZFTP_PWD</b></p>

<p style="margin-left:22%;">Readonly. The current directory
on the server.</p>

<p style="margin-left:11%;"><b>ZFTP_CODE</b></p>

<p style="margin-left:22%;">Readonly. The three digit code
of the last FTP reply from the server as a string. This can
still be read after the connection is closed, and is not
changed when the current session changes.</p>

<p style="margin-left:11%;"><b>ZFTP_REPLY</b></p>

<p style="margin-left:22%;">Readonly. The last line of the
last reply sent by the server. This can still be read after
the connection is closed, and is not changed when the
current session changes.</p>

<p style="margin-left:11%;"><b>ZFTP_SESSION</b></p>

<p style="margin-left:22%;">Readonly. The name of the
current FTP session; see the description of the
<b>session</b> subcommand.</p>

<p style="margin-left:11%;"><b>ZFTP_PREFS</b></p>

<p style="margin-left:22%;">A string of preferences for
altering aspects of <b>zftp</b>&rsquo;s behaviour. Each
preference is a single character. The following are
defined:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>P</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Passive: attempt to make the remote server initiate data
transfers. This is slightly more efficient than sendport
mode. If the letter <b>S</b> occurs later in the string,
<b>zftp</b> will use sendport mode if passive mode is not
available.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Sendport: initiate transfers by the FTP <b>PORT</b>
command. If this occurs before any <b>P</b> in the string,
passive mode will never be attempted.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>D</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Dumb: use only the bare minimum of FTP commands. This
prevents the variables <b>ZFTP_SYSTEM</b> and
<b>ZFTP_PWD</b> from being set, and will mean all
connections default to ASCII type. It may prevent
<b>ZFTP_SIZE</b> from being set during a transfer if the
server does not send it anyway (many servers do).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZFTP_PREFS</b> is not set when <b>zftp</b> is loaded, it
will be set to a default of &lsquo;<b>PS</b>&rsquo;, i.e.
use passive mode if available, otherwise fall back to
sendport mode.</p>

<p style="margin-left:11%;"><b>ZFTP_VERBOSE</b></p>

<p style="margin-left:22%;">A string of digits between 0
and 5 inclusive, specifying which responses from the server
should be printed. All responses go to standard error. If
any of the numbers 1 to 5 appear in the string, raw
responses from the server with reply codes beginning with
that digit will be printed to standard error. The first
digit of the three digit reply code is defined by RFC959 to
correspond to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>1.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive preliminary reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>2.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive completion reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>3.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A positive intermediate reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>4.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A transient negative completion reply.</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>5.</p></td>
<td width="7%"></td>
<td width="59%">


<p>A permanent negative completion reply.</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">It should be
noted that, for unknown reasons, the reply &lsquo;Service
not available&rsquo;, which forces termination of a
connection, is classified as 421, i.e. &lsquo;transient
negative&rsquo;, an interesting interpretation of the word
&lsquo;transient&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The code 0 is
special: it indicates that all but the last line of
multiline replies read from the server will be printed to
standard error in a processed format. By convention, servers
use this mechanism for sending information for the user to
read. The appropriate reply code, if it matches the same
response, takes priority.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>ZFTP_VERBOSE</b> is not set when <b>zftp</b> is loaded,
it will be set to the default value <b>450</b>, i.e.,
messages destined for the user and all errors will be
printed. A null string is valid and specifies that no
messages should be printed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Functions
<br>
zftp_chpwd</b></p>

<p style="margin-left:22%;">If this function is set by the
user, it is called every time the directory changes on the
server, including when a user is logged in, or when a
connection is closed. In the last case, <b>$ZFTP_PWD</b>
will be unset; otherwise it will reflect the new
directory.</p>

<p style="margin-left:11%;"><b>zftp_progress</b></p>

<p style="margin-left:22%;">If this function is set by the
user, it will be called during a <b>get</b>, <b>put</b> or
<b>append</b> operation each time sufficient data has been
received from the host. During a <b>get</b>, the data is
sent to standard output, so it is vital that this function
should write to standard error or directly to the terminal,
<i>not</i> to standard output.</p>

<p style="margin-left:22%; margin-top: 1em">When it is
called with a transfer in progress, the following additional
shell parameters are set: <b><br>
ZFTP_FILE</b></p>

<p style="margin-left:32%;">The name of the remote file
being transferred from or to.</p>

<p style="margin-left:22%;"><b>ZFTP_TRANSFER</b></p>

<p style="margin-left:32%;">A <b>G</b> for a <b>get</b>
operation and a <b>P</b> for a <b>put</b> operation.</p>

<p style="margin-left:22%;"><b>ZFTP_SIZE</b></p>

<p style="margin-left:32%;">The total size of the complete
file being transferred: the same as the first value provided
by the <b>remote</b> and <b>local</b> subcommands for a
particular file. If the server cannot supply this value for
a remote file being retrieved, it will not be set. If input
is from a pipe the value may be incorrect and correspond
simply to a full pipe buffer.</p>

<p style="margin-left:22%;"><b>ZFTP_COUNT</b></p>

<p style="margin-left:32%;">The amount of data so far
transferred; a number between zero and <b>$ZFTP_SIZE</b>, if
that is set. This number is always available.</p>

<p style="margin-left:22%; margin-top: 1em">The function is
initially called with <b>ZFTP_TRANSFER</b> set appropriately
and <b>ZFTP_COUNT</b> set to zero. After the transfer is
finished, the function will be called one more time with
<b>ZFTP_TRANSFER</b> set to <b>GF</b> or <b>PF</b>, in case
it wishes to tidy up. It is otherwise never called twice
with the same value of <b>ZFTP_COUNT</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Sometimes the
progress meter may cause disruption. It is up to the user to
decide whether the function should be defined and to use
<b>unfunction</b> when necessary.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Problems</b>
<br>
A connection may not be opened in the left hand side of a
pipe as this occurs in a subshell and the file information
is not updated in the main shell. In the case of type or
mode changes or closing the connection in a subshell, the
information is returned but variables are not updated until
the next call to <b>zftp</b>. Other status changes in
subshells will not be reflected by changes to the variables
(but should be otherwise harmless).</p>

<p style="margin-left:11%; margin-top: 1em">Deleting
sessions while a <b>zftp</b> command is active in the
background can have unexpected effects, even if it does not
use the session being deleted. This is because all shell
subprocesses share information on the state of all
connections, and deleting a session changes the ordering of
that information.</p>

<p style="margin-left:11%; margin-top: 1em">On some
operating systems, the control connection is not valid after
a fork(), so that operations in subshells, on the left hand
side of a pipeline, or in the background are not possible,
as they should be. This is presumably a bug in the operating
system.</p>

<h2>THE ZSH/ZLE MODULE
<a name="THE ZSH/ZLE MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zle</b> module contains the Zsh Line Editor. See
<i>zshzle</i>(1).</p>

<h2>THE ZSH/ZLEPARAMETER MODULE
<a name="THE ZSH/ZLEPARAMETER MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zleparameter</b> module defines two special
parameters that can be used to access internal information
of the Zsh Line Editor (see <i>zshzle</i>(1)). <b><br>
keymaps</b></p>

<p style="margin-left:22%;">This array contains the names
of the keymaps currently defined.</p>

<p style="margin-left:11%;"><b>widgets</b></p>

<p style="margin-left:22%;">This associative array contains
one entry per widget defined. The name of the widget is the
key and the value gives information about the widget. It is
either the string &lsquo;<b>builtin</b>&rsquo; for builtin
widgets, a string of the form
&lsquo;<b>user:</b><i>name</i>&rsquo; for user&minus;defined
widgets, where <i>name</i> is the name of the shell function
implementing the widget, or it is a string of the form
&lsquo;<b>completion:</b><i>type</i><b>:</b><i>name</i>&rsquo;,
for completion widgets. In the last case <i>type</i> is the
name of the builtin widgets the completion widget imitates
in its behavior and <i>name</i> is the name of the shell
function implementing the completion widget.</p>

<h2>THE ZSH/ZPROF MODULE
<a name="THE ZSH/ZPROF MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When loaded,
the <b>zsh/zprof</b> causes shell functions to be profiled.
The profiling results can be obtained with the <b>zprof</b>
builtin command made available by this module. There is no
way to turn profiling off other than unloading the module.
<b><br>
zprof</b> [ <b>&minus;c</b> ]</p>

<p style="margin-left:22%;">Without the <b>&minus;c</b>
option, <b>zprof</b> lists profiling results to standard
output. The format is comparable to that of commands like
<b>gprof</b>.</p>

<p style="margin-left:22%; margin-top: 1em">At the top
there is a summary listing all functions that were called at
least once. This summary is sorted in decreasing order of
the amount of time spent in each. The lines contain the
number of the function in order, which is used in other
parts of the list in suffixes of the form
&lsquo;<b>[</b><i>num</i><b>]</b>&rsquo;, then the number of
calls made to the function. The next three columns list the
time in milliseconds spent in the function and its
descendants, the average time in milliseconds spent in the
function and its descendants per call and the percentage of
time spent in all shell functions used in this function and
its descendants. The following three columns give the same
information, but counting only the time spent in the
function itself. The final column shows the name of the
function.</p>

<p style="margin-left:22%; margin-top: 1em">After the
summary, detailed information about every function that was
invoked is listed, sorted in decreasing order of the amount
of time spent in each function and its descendants. Each of
these entries consists of descriptions for the functions
that called the function described, the function itself, and
the functions that were called from it. The description for
the function itself has the same format as in the summary
(and shows the same information). The other lines
don&rsquo;t show the number of the function at the beginning
and have their function named indented to make it easier to
distinguish the line showing the function described in the
section from the surrounding lines.</p>

<p style="margin-left:22%; margin-top: 1em">The information
shown in this case is almost the same as in the summary, but
only refers to the call hierarchy being displayed. For
example, for a calling function the column showing the total
running time lists the time spent in the described function
and its descendants only for the times when it was called
from that particular calling function. Likewise, for a
called function, this columns lists the total time spent in
the called function and its descendants only for the times
when it was called from the function described.</p>

<p style="margin-left:22%; margin-top: 1em">Also in this
case, the column showing the number of calls to a function
also shows a slash and then the total number of invocations
made to the called function.</p>

<p style="margin-left:22%; margin-top: 1em">As long as the
<b>zsh/zprof</b> module is loaded, profiling will be done
and multiple invocations of the <b>zprof</b> builtin command
will show the times and numbers of calls since the module
was loaded. With the <b>&minus;c</b> option, the
<b>zprof</b> builtin command will reset its internal
counters and will not show the listing.</p>

<h2>THE ZSH/ZPTY MODULE
<a name="THE ZSH/ZPTY MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zpty</b> module offers one builtin: <b><br>
zpty</b> [ <b>&minus;e</b> ] [ <b>&minus;b</b> ] <i>name</i>
[ <i>arg ...</i> ]</p>

<p style="margin-left:22%;">The arguments following
<i>name</i> are concatenated with spaces between, then
executed as a command, as if passed to the <b>eval</b>
builtin. The command runs under a newly assigned
pseudo&minus;terminal; this is useful for running commands
non&minus;interactively which expect an interactive
environment. The <i>name</i> is not part of the command, but
is used to refer to this command in later calls to
<b>zpty</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;e</b> option, the pseudo&minus;terminal is set up
so that input characters are echoed.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;b</b> option, input to and output from the
pseudo&minus;terminal are made non&minus;blocking.</p>

<p style="margin-left:11%;"><b>zpty &minus;d</b> [
<i>names</i> ... ]</p>

<p style="margin-left:22%;">The second form, with the
<b>&minus;d</b> option, is used to delete commands
previously started, by supplying a list of their
<i>name</i>s. If no <i>names</i> are given, all commands are
deleted. Deleting a command causes the HUP signal to be sent
to the corresponding process.</p>

<p style="margin-left:11%;"><b>zpty &minus;w</b> [
<b>&minus;n</b> ] <i>name</i> [ <i>strings ...</i> ]</p>

<p style="margin-left:22%;">The <b>&minus;w</b> option can
be used to send the to command <i>name</i> the given
<i>strings</i> as input (separated by spaces). If the
<b>&minus;n</b> option is <i>not</i> given, a newline is
added at the end.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<i>strings</i> are provided, the standard input is copied to
the pseudo&minus;terminal; this may stop before copying the
full input if the pseudo&minus;terminal is
non&minus;blocking.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
command under the pseudo&minus;terminal sees this input as
if it were typed, so beware when sending special tty driver
characters such as word&minus;erase, line&minus;kill, and
end&minus;of&minus;file.</p>

<p style="margin-left:11%;"><b>zpty &minus;r</b> [
<b>&minus;mt</b> ] <i>name</i> [ <i>param</i> [
<i>pattern</i> ] ]</p>

<p style="margin-left:22%;">The <b>&minus;r</b> option can
be used to read the output of the command <i>name</i>. With
only a <i>name</i> argument, the output read is copied to
the standard output. Unless the pseudo&minus;terminal is
non&minus;blocking, copying continues until the command
under the pseudo&minus;terminal exits; when
non&minus;blocking, only as much output as is immediately
available is copied. The return status is zero if any output
is copied.</p>

<p style="margin-left:22%; margin-top: 1em">When also given
a <i>param</i> argument, at most one line is read and stored
in the parameter named <i>param</i>. Less than a full line
may be read if the pseudo&minus;terminal is
non&minus;blocking. The return status is zero if at least
one character is stored in <i>param</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If a
<i>pattern</i> is given as well, output is read until the
whole string read matches the <i>pattern</i>, even in the
non&minus;blocking case. The return status is zero if the
string read matches the pattern, or if the command has
exited but at least one character could still be read. If
the option <b>&minus;m</b> is present, the return status is
zero only if the pattern matches. As of this writing, a
maximum of one megabyte of output can be consumed this way;
if a full megabyte is read without matching the pattern, the
return status is non&minus;zero.</p>

<p style="margin-left:22%; margin-top: 1em">In all cases,
the return status is non&minus;zero if nothing could be
read, and is <b>2</b> if this is because the command has
finished.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;r</b> option is combined with the <b>&minus;t</b>
option, <b>zpty</b> tests whether output is available before
trying to read. If no output is available, <b>zpty</b>
immediately returns the status <b>1</b>. When used with a
<i>pattern</i>, the behaviour on a failed poll is similar to
when the command has exited: the return value is zero if at
least one character could still be read even if the pattern
failed to match.</p>

<p style="margin-left:11%;"><b>zpty &minus;t</b>
<i>name</i></p>

<p style="margin-left:22%;">The <b>&minus;t</b> option
without the <b>&minus;r</b> option can be used to test
whether the command <i>name</i> is still running. It returns
a zero status if the command is running and a non&minus;zero
value otherwise.</p>

<p style="margin-left:11%;"><b>zpty</b> [ <b>&minus;L</b>
]</p>

<p style="margin-left:22%;">The last form, without any
arguments, is used to list the commands currently defined.
If the <b>&minus;L</b> option is given, this is done in the
form of calls to the <b>zpty</b> builtin.</p>

<h2>THE ZSH/ZSELECT MODULE
<a name="THE ZSH/ZSELECT MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zselect</b> module makes available one builtin
command: <b><br>
zselect</b> [ <b>&minus;rwe &minus;t</b> <i>timeout</i>
<b>&minus;a</b> <i>array</i> ] [ <i>fd</i> ... ]</p>

<p style="margin-left:22%;">The <b>zselect</b> builtin is a
front&minus;end to the &lsquo;select&rsquo; system call,
which blocks until a file descriptor is ready for reading or
writing, or has an error condition, with an optional
timeout. If this is not available on your system, the
command prints an error message and returns status 2 (normal
errors return status 1). For more information, see your
systems documentation for <i>select</i>(3). Note there is no
connection with the shell builtin of the same name.</p>

<p style="margin-left:22%; margin-top: 1em">Arguments and
options may be intermingled in any order. Non&minus;option
arguments are file descriptors, which must be decimal
integers. By default, file descriptors are to be tested for
reading, i.e. <b>zselect</b> will return when data is
available to be read from the file descriptor, or more
precisely, when a read operation from the file descriptor
will not block. After a <b>&minus;r</b>, <b>&minus;w</b> and
<b>&minus;e</b>, the given file descriptors are to be tested
for reading, writing, or error conditions. These options and
an arbitrary list of file descriptors may be given in any
order.</p>

<p style="margin-left:22%; margin-top: 1em">(The presence
of an &lsquo;error condition&rsquo; is not well defined in
the documentation for many implementations of the select
system call. According to recent versions of the POSIX
specification, it is really an <i>exception</i> condition,
of which the only standard example is
out&minus;of&minus;band data received on a socket. So zsh
users are unlikely to find the <b>&minus;e</b> option
useful.)</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;t</b> <i>timeout</i>&rsquo; specifies a
timeout in hundredths of a second. This may be zero, in
which case the file descriptors will simply be polled and
<b>zselect</b> will return immediately. It is possible to
call zselect with no file descriptors and a non&minus;zero
timeout for use as a finer&minus;grained replacement for
&lsquo;sleep&rsquo;; note, however, the return status is
always 1 for a timeout.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;a</b> <i>array</i>&rsquo; indicates that
<b>array</b> should be set to indicate the file
descriptor(s) which are ready. If the option is not given,
the array <b>reply</b> will be used for this purpose. The
array will contain a string similar to the arguments for
<b>zselect</b>. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zselect
&minus;t 0 &minus;r 0 &minus;w 1</b></p>

<p style="margin-left:22%; margin-top: 1em">might return
immediately with status 0 and <b>$reply</b> containing
&lsquo;<b>&minus;r 0 &minus;w 1</b>&rsquo; to show that both
file descriptors are ready for the requested operations.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;A</b> <i>assoc</i>&rsquo; indicates that
the associative array <b>assoc</b> should be set to indicate
the file descriptor(s( which are ready. This option
overrides the option <b>&minus;a</b>, nor will <b>reply</b>
be modified. The keys of <b>assoc</b> are the file
descriptors, and the corresponding values are any of the
characters &lsquo;<b>rwe</b>&rsquo; to indicate the
condition.</p>

<p style="margin-left:22%; margin-top: 1em">The command
returns status 0 if some file descriptors are ready for
reading. If the operation timed out, or a timeout of 0 was
given and no file descriptors were ready, or there was an
error, it returns status 1 and the array will not be set
(nor modified in any way). If there was an error in the
select operation the appropriate error message is
printed.</p>

<h2>THE ZSH/ZUTIL MODULE
<a name="THE ZSH/ZUTIL MODULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/zutil</b> module only adds some builtins: <b><br>
zstyle</b> [ <b>&minus;L</b> [ <i>pattern</i> [ <i>style</i>
] ] ] <b><br>
zstyle</b> [ <b>&minus;e</b> | <b>&minus;</b> |
<b>&minus;&minus;</b> ] <i>pattern style strings</i> ...
<b><br>
zstyle &minus;d</b> [ <i>pattern</i> [ <i>styles</i> ... ] ]
<b><br>
zstyle &minus;g</b> <i>name</i> [ <i>pattern</i> [
<i>style</i> ] ] <b><br>
zstyle &minus;abs</b> <i>context style name</i> [ <i>sep</i>
] <b><br>
zstyle &minus;Tt</b> <i>context style</i> [ <i>strings</i>
...] <b><br>
zstyle &minus;m</b> <i>context style pattern</i></p>

<p style="margin-left:22%;">This builtin command is used to
define and lookup styles. Styles are pairs of names and
values, where the values consist of any number of strings.
They are stored together with patterns and lookup is done by
giving a string, called the &lsquo;context&rsquo;, which is
compared to the patterns. The definition stored for the
first matching pattern will be returned.</p>

<p style="margin-left:22%; margin-top: 1em">For ordering of
comparisons, patterns are searched from most specific to
least specific, and patterns that are equally specific keep
the order in which they were defined. A pattern is
considered to be more specific than another if it contains
more components (substrings separated by colons) or if the
patterns for the components are more specific, where simple
strings are considered to be more specific than patterns and
complex patterns are considered to be more specific than the
pattern &lsquo;<b>*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The first form
(without arguments) lists the definitions. Styles are shown
in alphabetic order and patterns are shown in the order
<b>zstyle</b> will test them.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;L</b> option is given, listing is done in the form
of calls to <b>zstyle</b>. The optional first argument is a
pattern which will be matched against the string supplied as
the pattern for the context; note that this means, for
example, &lsquo;<b>zstyle &minus;L
&quot;:completion:*&quot;</b>&rsquo; will match any supplied
pattern beginning &lsquo;<b>:completion:</b>&rsquo;, not
just <b>&quot;:completion:*&quot;</b>: use
<b>&quot;:completion:\*&quot;</b> to match that. The
optional second argument limits the output to a specific
style (not a pattern). <b>&minus;L</b> is not compatible
with any other options.</p>

<p style="margin-left:22%; margin-top: 1em">The other forms
are the following: <b><br>
zstyle</b> [ <b>&minus;</b> | <b>&minus;&minus;</b> |
<b>&minus;e</b> ] <i>pattern style strings</i> ...</p>

<p style="margin-left:32%;">Defines the given <i>style</i>
for the <i>pattern</i> with the <i>strings</i> as the value.
If the <b>&minus;e</b> option is given, the <i>strings</i>
will be concatenated (separated by spaces) and the resulting
string will be evaluated (in the same way as it is done by
the <b>eval</b> builtin command) when the style is looked
up. In this case the parameter &lsquo;<b>reply</b>&rsquo;
must be assigned to set the strings returned after the
evaluation. Before evaluating the value, <b>reply</b> is
unset, and if it is still unset after the evaluation, the
style is treated as if it were not set.</p>

<p style="margin-left:22%;"><b>zstyle &minus;d</b> [
<i>pattern</i> [ <i>styles</i> ... ] ]</p>

<p style="margin-left:32%;">Delete style definitions.
Without arguments all definitions are deleted, with a
<i>pattern</i> all definitions for that pattern are deleted
and if any <i>styles</i> are given, then only those styles
are deleted for the <i>pattern</i>.</p>

<p style="margin-left:22%;"><b>zstyle &minus;g</b>
<i>name</i> [ <i>pattern</i> [ <i>style</i> ] ]</p>

<p style="margin-left:32%;">Retrieve a style definition.
The <i>name</i> is used as the name of an array in which the
results are stored. Without any further arguments, all
<i>patterns</i> defined are returned. With a <i>pattern</i>
the styles defined for that pattern are returned and with
both a <i>pattern</i> and a <i>style</i>, the value strings
of that combination is returned.</p>

<p style="margin-left:22%; margin-top: 1em">The other forms
can be used to look up or test patterns. <b><br>
zstyle &minus;s</b> <i>context style name</i> [ <i>sep</i>
]</p>

<p style="margin-left:32%;">The parameter <i>name</i> is
set to the value of the style interpreted as a string. If
the value contains several strings they are concatenated
with spaces (or with the <i>sep</i> string if that is given)
between them.</p>

<p style="margin-left:22%;"><b>zstyle &minus;b</b>
<i>context style name</i></p>

<p style="margin-left:32%;">The value is stored in
<i>name</i> as a boolean, i.e. as the string
&lsquo;<b>yes</b>&rsquo; if the value has only one string
and that string is equal to one of &lsquo;<b>yes</b>&rsquo;,
&lsquo;<b>true</b>&rsquo;, &lsquo;<b>on</b>&rsquo;, or
&lsquo;<b>1</b>&rsquo;. If the value is any other string or
has more than one string, the parameter is set to
&lsquo;<b>no</b>&rsquo;.</p>

<p style="margin-left:22%;"><b>zstyle &minus;a</b>
<i>context style name</i></p>

<p style="margin-left:32%;">The value is stored in
<i>name</i> as an array. If <i>name</i> is declared as an
associative array, the first, third, etc. strings are used
as the keys and the other strings are used as the
values.</p>

<p style="margin-left:22%;"><b>zstyle &minus;t</b>
<i>context style</i> [ <i>strings</i> ...] <b><br>
zstyle &minus;T</b> <i>context style</i> [ <i>strings</i>
...]</p>

<p style="margin-left:32%;">Test the value of a style, i.e.
the <b>&minus;t</b> option only returns a status (sets
<b>$?</b>). Without any <i>strings</i> the return status is
zero if the style is defined for at least one matching
pattern, has only one string in its value, and that is equal
to one of &lsquo;<b>true</b>&rsquo;,
&lsquo;<b>yes</b>&rsquo;, &lsquo;<b>on</b>&rsquo; or
&lsquo;<b>1</b>&rsquo;. If any <i>strings</i> are given the
status is zero if and only if at least one of the
<i>strings</i> is equal to at least one of the strings in
the value. If the style is defined but doesn&rsquo;t match,
the return status is <b>1</b>. If the style is not defined,
the status is <b>2</b>.</p>

<p style="margin-left:32%; margin-top: 1em">The
<b>&minus;T</b> option tests the values of the style like
<b>&minus;t</b>, but it returns status zero (rather than
<b>2</b>) if the style is not defined for any matching
pattern.</p>

<p style="margin-left:22%;"><b>zstyle &minus;m</b>
<i>context style pattern</i></p>

<p style="margin-left:32%;">Match a value. Returns status
zero if the <i>pattern</i> matches at least one of the
strings in the value.</p>

<p style="margin-left:11%;"><b>zformat &minus;f</b>
<i>param format specs</i> ... <b><br>
zformat &minus;a</b> <i>array sep specs</i> ...</p>

<p style="margin-left:22%;">This builtin provides two
different forms of formatting. The first form is selected
with the <b>&minus;f</b> option. In this case the
<i>format</i> string will be modified by replacing sequences
starting with a percent sign in it with strings from the
<i>specs</i>. Each <i>spec</i> should be of the form
&lsquo;<i>char</i><b>:</b><i>string</i>&rsquo; which will
cause every appearance of the sequence
&lsquo;<b>%</b><i>char</i>&rsquo; in <i>format</i> to be
replaced by the <i>string</i>. The &lsquo;<b>%</b>&rsquo;
sequence may also contain optional minimum and maximum field
width specifications between the &lsquo;<b>%</b>&rsquo; and
the &lsquo;<i>char</i>&rsquo; in the form
&lsquo;<b>%</b><i>min</i><b>.</b><i>max</i><b>c</b>&rsquo;,
i.e. the minimum field width is given first and if the
maximum field width is used, it has to be preceded by a dot.
Specifying a minimum field width makes the result be padded
with spaces to the right if the <i>string</i> is shorter
than the requested width. Padding to the left can be
achieved by giving a negative minimum field width. If a
maximum field width is specified, the <i>string</i> will be
truncated after that many characters. After all
&lsquo;<b>%</b>&rsquo; sequences for the given <i>specs</i>
have been processed, the resulting string is stored in the
parameter <i>param</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>%</b>&minus;escapes also understand ternary expressions
in the form used by prompts. The <b>%</b> is followed by a
&lsquo;<b>(</b>&rsquo; and then an ordinary format specifier
character as described above. There may be a set of digits
either before or after the &lsquo;<b>(</b>&rsquo;; these
specify a test number, which defaults to zero. Negative
numbers are also allowed. An arbitrary delimiter character
follows the format specifier, which is followed by a piece
of &lsquo;true&rsquo; text, the delimiter character again, a
piece of &lsquo;false&rsquo; text, and a closing
parenthesis. The complete expression (without the digits)
thus looks like
&lsquo;<b>%(</b><i>X</i><b>.</b><i>text1</i><b>.</b><i>text2</i><b>)</b>&rsquo;,
except that the &lsquo;<b>.</b>&rsquo; character is
arbitrary. The value given for the format specifier in the
<i>char</i><b>:</b><i>string</i> expressions is evaluated as
a mathematical expression, and compared with the test
number. If they are the same, <i>text1</i> is output, else
<i>text2</i> is output. A parenthesis may be escaped in
<i>text2</i> as <b>%)</b>. Either of <i>text1</i> or
<i>text2</i> may contain nested <b>%</b>&minus;escapes.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zformat
&minus;f REPLY &quot;The answer is
&rsquo;%3(c.yes.no)&rsquo;.&quot; c:3</b></p>

<p style="margin-left:22%; margin-top: 1em">outputs
&quot;The answer is &rsquo;yes&rsquo;.&quot; to <b>REPLY</b>
since the value for the format specifier <b>c</b> is 3,
agreeing with the digit argument to the ternary
expression.</p>

<p style="margin-left:22%; margin-top: 1em">The second
form, using the <b>&minus;a</b> option, can be used for
aligning strings. Here, the <i>specs</i> are of the form
&lsquo;<i>left</i><b>:</b><i>right</i>&rsquo; where
&lsquo;<i>left</i>&rsquo; and &lsquo;<i>right</i>&rsquo; are
arbitrary strings. These strings are modified by replacing
the colons by the <i>sep</i> string and padding the
<i>left</i> strings with spaces to the right so that the
<i>sep</i> strings in the result (and hence the <i>right</i>
strings after them) are all aligned if the strings are
printed below each other. All strings without a colon are
left unchanged and all strings with an empty <i>right</i>
string have the trailing colon removed. In both cases the
lengths of the strings are not used to determine how the
other strings are to be aligned. The resulting strings are
stored in the <i>array</i>.</p>

<p style="margin-left:11%;"><b>zregexparse</b></p>

<p style="margin-left:22%;">This implements some internals
of the <b>_regex_arguments</b> function.</p>

<p style="margin-left:11%;"><b>zparseopts</b> [
<b>&minus;D</b> ] [ <b>&minus;K</b> ] [ <b>&minus;M</b> ] [
<b>&minus;E</b> ] [ <b>&minus;a</b> <i>array</i> ] [
<b>&minus;A</b> <i>assoc</i> ] <i>specs</i></p>

<p style="margin-left:22%;">This builtin simplifies the
parsing of options in positional parameters, i.e. the set of
arguments given by <b>$*</b>. Each <i>spec</i> describes one
option and must be of the form
&lsquo;<i>opt</i>[<b>=</b><i>array</i>]&rsquo;. If an option
described by <i>opt</i> is found in the positional
parameters it is copied into the <i>array</i> specified with
the <b>&minus;a</b> option; if the optional
&lsquo;<b>=</b><i>array</i>&rsquo; is given, it is instead
copied into that array.</p>

<p style="margin-left:22%; margin-top: 1em">Note that it is
an error to give any <i>spec</i> without an
&lsquo;<b>=</b><i>array</i>&rsquo; unless one of the
<b>&minus;a</b> or <b>&minus;A</b> options is used.</p>

<p style="margin-left:22%; margin-top: 1em">Unless the
<b>&minus;E</b> option is given, parsing stops at the first
string that isn&rsquo;t described by one of the
<i>specs</i>. Even with <b>&minus;E</b>, parsing always
stops at a positional parameter equal to
&lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>&minus;&minus;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>opt</i>
description must be one of the following. Any of the special
characters can appear in the option name provided it is
preceded by a backslash.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>name</i></p></td>
<td width="3%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>name</i><b>+</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The <i>name</i> is the name of the option without the
leading &lsquo;<b>&minus;</b>&rsquo;. To specify a
GNU&minus;style long option, one of the usual two leading
&lsquo;<b>&minus;</b>&rsquo; must be included in
<i>name</i>; for example, a
&lsquo;<b>&minus;&minus;file</b>&rsquo; option is
represented by a <i>name</i> of
&lsquo;<b>&minus;file</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">If a
&lsquo;<b>+</b>&rsquo; appears after <i>name</i>, the option
is appended to <i>array</i> each time it is found in the
positional parameters; without the &lsquo;<b>+</b>&rsquo;
only the <i>last</i> occurrence of the option is
preserved.</p>

<p style="margin-left:32%; margin-top: 1em">If one of these
forms is used, the option takes no argument, so parsing
stops if the next positional parameter does not also begin
with &lsquo;<b>&minus;</b>&rsquo; (unless the
<b>&minus;E</b> option is used).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>name</i><b>:</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>name</i><b>:&minus;</b></p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>name</i><b>::</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>If one or two colons are given, the option takes an
argument; with one colon, the argument is mandatory and with
two colons it is optional. The argument is appended to the
<i>array</i> after the option itself.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">An optional
argument is put into the same array element as the option
name (note that this makes empty strings as arguments
indistinguishable). A mandatory argument is added as a
separate element unless the &lsquo;<b>:&minus;</b>&rsquo;
form is used, in which case the argument is put into the
same element.</p>

<p style="margin-left:32%; margin-top: 1em">A
&lsquo;<b>+</b>&rsquo; as described above may appear between
the <i>name</i> and the first colon.</p>

<p style="margin-left:11%; margin-top: 1em">The options of
<b>zparseopts</b> itself are: <b><br>
&minus;a</b> <i>array</i></p>

<p style="margin-left:22%;">As described above, this names
the default array in which to store the recognised
options.</p>

<p style="margin-left:11%;"><b>&minus;A</b>
<i>assoc</i></p>

<p style="margin-left:22%;">If this is given, the options
and their values are also put into an associative array with
the option names as keys and the arguments (if any) as the
values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>If this option is given, all options found are removed
from the positional parameters of the calling shell or shell
function, up to but not including any not described by the
<i>specs</i>. This is similar to using the <b>shift</b>
builtin.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;K</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>With this option, the arrays specified with the
<b>&minus;a</b> and <b>&minus;A</b> options and with the
&lsquo;<b>=</b><i>array</i>&rsquo; forms are kept unchanged
when none of the <i>specs</i> for them is used. This allows
assignment of default values to them before calling
<b>zparseopts</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This changes the assignment rules to implement a map
among equivalent option names. If any <i>spec</i> uses the
&lsquo;<b>=</b><i>array</i>&rsquo; form, the string
<i>array</i> is interpreted as the name of another
<i>spec</i>, which is used to choose where to store the
values. If no other <i>spec</i> is found, the values are
stored as usual. This changes only the way the values are
stored, not the way <b>$*</b> is parsed, so results may be
unpredicable if the &lsquo;<i>name</i><b>+</b>&rsquo;
specifier is used inconsistently.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;E</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This changes the parsing rules to <i>not</i> stop at the
first string that isn&rsquo;t described by one of the
<i>spec</i>s. It can be used to test for or (if used
together with <b>&minus;D</b>) extract options and their
arguments, ignoring all other options and arguments that may
be in the positional parameters.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a &minus;bx &minus;c y &minus;cz baz
&minus;cend <br>
zparseopts a=foo b:=bar c+:=bar</b></p>

<p style="margin-left:11%; margin-top: 1em">will have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>foo=(&minus;a)
<br>
bar=(&minus;b x &minus;c y &minus;c z)</b></p>

<p style="margin-left:11%; margin-top: 1em">The arguments
from &lsquo;<b>baz</b>&rsquo; on will not be used.</p>

<p style="margin-left:11%; margin-top: 1em">As an example
for the <b>&minus;E</b> option, consider:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a x &minus;b y &minus;c z arg1 arg2
<br>
zparseopts &minus;E &minus;D b:=bar</b></p>

<p style="margin-left:11%; margin-top: 1em">will have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>bar=(&minus;b
y) <br>
set &minus;&minus; &minus;a x &minus;c z arg1 arg2</b></p>

<p style="margin-left:11%; margin-top: 1em">I.e., the
option <b>&minus;b</b> and its arguments are taken from the
positional parameters and put into the array <b>bar</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;M</b> option can be used like this:</p>

<p style="margin-left:22%; margin-top: 1em"><b>set
&minus;&minus; &minus;a &minus;bx &minus;c y &minus;cz baz
&minus;cend <br>
zparseopts &minus;A bar &minus;M a=foo b+: c:=b</b></p>

<p style="margin-left:11%; margin-top: 1em">to have the
effect of</p>


<p style="margin-left:22%; margin-top: 1em"><b>foo=(&minus;a)
<br>
bar=(&minus;a &rsquo;&rsquo; &minus;b xyz)</b></p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshcalsys &minus; zsh calendar
system</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The shell is
supplied with a series of functions to replace and enhance
the traditional Unix <b>calendar</b> programme, which warns
the user of imminent or future events, details of which are
stored in a text file (typically <b>calendar</b> in the
user&rsquo;s home directory). The version provided here
includes a mechanism for alerting the user when an event is
due.</p>

<p style="margin-left:11%; margin-top: 1em">In addition a
function <b>age</b> is provided that can be used in a glob
qualifier; it allows files to be selected based on their
modification times.</p>

<p style="margin-left:11%; margin-top: 1em">The format of
the <b>calendar</b> file and the dates used there in and in
the <b>age</b> function are described first, then the
functions that can be called to examine and modify the
<b>calendar</b> file.</p>

<p style="margin-left:11%; margin-top: 1em">The functions
here depend on the availability of the <b>zsh/datetime</b>
module which is usually installed with the shell. The
library function <b>strptime()</b> must be available; it is
present on most recent operating systems.</p>

<h2>FILE AND DATE FORMATS
<a name="FILE AND DATE FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Calendar
File Format</b> <br>
The calendar file is by default <b>~/calendar</b>. This can
be configured by the <b>calendar&minus;file</b> style, see
the section STYLES below. The basic format consists of a
series of separate lines, with no indentation, each
including a date and time specification followed by a
description of the event.</p>

<p style="margin-left:11%; margin-top: 1em">Various
enhancements to this format are supported, based on the
syntax of Emacs calendar mode. An indented line indicates a
continuation line that continues the description of the
event from the preceding line (note the date may not be
continued in this way). An initial ampersand (<b>&amp;</b>)
is ignored for compatibility.</p>

<p style="margin-left:11%; margin-top: 1em">An indented
line on which the first non&minus;whitespace character is
<b>#</b> is not displayed with the calendar entry, but is
still scanned for information. This can be used to hide
information useful to the calendar system but not to the
user, such as the unique identifier used by
<b>calendar_add</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The Emacs
extension that a date with no description may refer to a
number of succeeding events at different times is not
supported.</p>

<p style="margin-left:11%; margin-top: 1em">Unless the
<b>done&minus;file</b> style has been altered, any events
which have been processed are appended to the file with the
same name as the calendar file with the suffix <b>.done</b>,
hence <b>~/calendar.done</b> by default.</p>

<p style="margin-left:11%; margin-top: 1em">An example is
shown below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Date
Format</b> <br>
The format of the date and time is designed to allow
flexibility without admitting ambiguity. (The words
&lsquo;date&rsquo; and &lsquo;time&rsquo; are both used in
the documentation below; except where specifically noted
this implies a string that may include both a date and a
time specification.) Note that there is no localization
support; month and day names must be in English and
separator characters are fixed. Matching is case
insensitive, and only the first three letters of the names
are significant, although as a special case a form beginning
&quot;month&quot; does not match &quot;Monday&quot;.
Furthermore, time zones are not handled; all times are
assumed to be local.</p>

<p style="margin-left:11%; margin-top: 1em">It is
recommended that, rather than exploring the intricacies of
the system, users find a date format that is natural to them
and stick to it. This will avoid unexpected effects. Various
key facts should be noted.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">In particular, note the
confusion between
<i>month</i><b>/</b><i>day</i><b>/</b><i>year</i> and
<i>day</i><b>/</b><i>month</i><b>/</b><i>year</i> when the
month is numeric; these formats should be avoided if at all
possible. Many alternatives are available.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The year must be given in full to avoid confusion, and
only years from 1900 to 2099 inclusive are matched.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The following
give some obvious examples; users finding here a format they
like and not subject to vagaries of style may skip the full
description. As dates and times are matched separately (even
though the time may be embedded in the date), any date
format may be mixed with any format for the time of day
provide the separators are clear (whitespace, colons,
commas).</p>

<p style="margin-left:22%; margin-top: 1em"><b>2007/04/03
13:13 <br>
2007/04/03:13:13 <br>
2007/04/03 1:13 pm <br>
3rd April 2007, 13:13 <br>
April 3rd 2007 1:13 p.m. <br>
Apr 3, 2007 13:13 <br>
Tue Apr 03 13:13:00 2007 <br>
13:13 2007/apr/3</b></p>

<p style="margin-left:11%; margin-top: 1em">More detailed
rules follow.</p>

<p style="margin-left:11%; margin-top: 1em">Times are
parsed and extracted before dates. They must use colons to
separate hours and minutes, though a dot is allowed before
seconds if they are present. This limits time formats to the
following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="55%">



<p style="margin-top: 1em"><i>HH</i><b>:</b><i>MM</i>[<b>:</b><i>SS</i>[<b>.</b><i>FFFFF</i>]]
[<b>am</b>|<b>pm</b>|<b>a.m.</b>|<b>p.m.</b>]</p> </td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="55%">



<p><i>HH</i><b>:</b><i>MM</i><b>.</b><i>SS</i>[<b>.</b><i>FFFFF</i>]
[<b>am</b>|<b>pm</b>|<b>a.m.</b>|<b>p.m.</b>]</p> </td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Here, square
brackets indicate optional elements, possibly with
alternatives. Fractions of a second are recognised but
ignored. For absolute times (the normal format require by
the <b>calendar</b> file and the <b>age</b> function) a date
is mandatory but a time of day is not; the time returned is
at the start of the date. One variation is allowed: if
<b>a.m.</b> or <b>p.m.</b> or one of their variants is
present, an hour without a minute is allowed, e.g. <b>3
p.m.</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Time zones are
not handled, though if one is matched following a time
specification it will be removed to allow a surrounding date
to be parsed. This only happens if the format of the
timezone is not too unusual. The following are examples of
forms that are understood:</p>

<p style="margin-left:22%; margin-top: 1em"><b>+0100 <br>
GMT <br>
GMT&minus;7 <br>
CET+1CDT</b></p>

<p style="margin-left:11%; margin-top: 1em">Any part of the
timezone that is not numeric must have exactly three capital
letters in the name.</p>

<p style="margin-left:11%; margin-top: 1em">Dates suffer
from the ambiguity between
<i>DD</i><b>/</b><i>MM</i><b>/</b><i>YYYY</i> and
<i>MM</i><b>/</b><i>DD</i><b>/</b><i>YYYY</i>. It is
recommended this form is avoided with purely numeric dates,
but use of ordinals, eg. <b>3rd/04/2007</b>, will resolve
the ambiguity as the ordinal is always parsed as the day of
the month. Years must be four digits (and the first two must
be <b>19</b> or <b>20</b>); <b>03/04/08</b> is not
recognised. Other numbers may have leading zeroes, but they
are not required. The following are handled:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p style="margin-top: 1em"><i>YYYY</i><b>/</b><i>MM</i><b>/</b><i>DD</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>YYYY</i><b>&minus;</b><i>MM</i><b>&minus;</b><i>DD</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">


<p><i>YYYY</i><b>/</b><i>MNM</i><b>/</b><i>DD</i></p></td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>YYYY</i><b>&minus;</b><i>MNM</i><b>&minus;</b><i>DD</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">


<p><i>DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>]
<i>MNM</i>[<b>,</b>] [ <i>YYYY</i> ]</p></td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">


<p><i>MNM DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>][<b>,</b>] [
<i>YYYY</i> ]</p></td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>]<b>/</b><i>MM</i>[<b>,</b>]
<i>YYYY</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>]<b>/</b><i>MM</i><b>/</b><i>YYYY</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>MM</i><b>/</b><i>DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>][<b>,</b>]
<i>YYYY</i></p> </td>
<td width="35%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="43%">



<p><i>MM</i><b>/</b><i>DD</i>[<b>th</b>|<b>st</b>|<b>rd</b>]<b>/</b><i>YYYY</i></p> </td>
<td width="35%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Here,
<i>MNM</i> is at least the first three letters of a month
name, matched case&minus;insensitively. The remainder of the
month name may appear but its contents are irrelevant, so
janissary, febrile, martial, apricot, maybe, junta, etc. are
happily handled.</p>

<p style="margin-left:11%; margin-top: 1em">Where the year
is shown as optional, the current year is assumed. There are
only two such cases, the form <b>Jun 20</b> or <b>14
September</b> (the only two commonly occurring forms, apart
from a &quot;the&quot; in some forms of English, which
isn&rsquo;t currently supported). Such dates will of course
become ambiguous in the future, so should ideally be
avoided.</p>

<p style="margin-left:11%; margin-top: 1em">Times may
follow dates with a colon, e.g. <b>1965/07/12:09:45</b>;
this is in order to provide a format with no whitespace. A
comma and whitespace are allowed, e.g. <b>1965/07/12,
09:45</b>. Currently the order of these separators is not
checked, so illogical formats such as <b>1965/07/12, :
,09:45</b> will also be matched. For simplicity such
variations are not shown in the list above. Otherwise, a
time is only recognised as being associated with a date if
there is only whitespace in between, or if the time was
embedded in the date.</p>

<p style="margin-left:11%; margin-top: 1em">Days of the
week are not normally scanned, but will be ignored if they
occur at the start of the date pattern only. However, in
contexts where it is useful to specify dates relative to
today, days of the week with no other date specification may
be given. The day is assumed to be either today or within
the past week. Likewise, the words <b>yesterday</b>,
<b>today</b> and <b>tomorrow</b> are handled. All matches
are case&minus;insensitive. Hence if today is Monday, then
<b>Sunday</b> is equivalent to <b>yesterday</b>,
<b>Monday</b> is equivalent to <b>today</b>, but
<b>Tuesday</b> gives a date six days ago. This is not
generally useful within the calendar file. Dates in this
format may be combined with a time specification; for
example <b>Tomorrow, 8 p.m.</b>.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the standard date format:</p>

<p style="margin-left:22%; margin-top: 1em"><b>Fri Aug 18
17:00:48 BST 2006</b></p>

<p style="margin-left:11%; margin-top: 1em">is handled by
matching <i>HH</i><b>:</b><i>MM</i><b>:</b><i>SS</i> and
removing it together with the matched (but unused) time
zone. This leaves the following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>Fri Aug 18
2006</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Fri</b> is
ignored and the rest is matched according to the standard
rules.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Relative
Time Format</b> <br>
In certain places relative times are handled. Here, a date
is not allowed; instead a combination of various supported
periods are allowed, together with an optional time. The
periods must be in order from most to least significant.</p>

<p style="margin-left:11%; margin-top: 1em">In some cases,
a more accurate calculation is possible when there is an
anchor date: offsets of months or years pick the correct
day, rather than being rounded, and it is possible to pick a
particular day in a month as &lsquo;(1st Friday)&rsquo;,
etc., as described in more detail below.</p>

<p style="margin-left:11%; margin-top: 1em">Anchors are
available in the following cases. If one or two times are
passed to the function <b>calendar</b>, the start time acts
an anchor for the end time when the end time is relative
(even if the start time is implicit). When examining
calendar files, the scheduled event being examined anchors
the warning time when it is given explicitly by means of the
<b>WARN</b> keyword; likewise, the scheduled event anchors a
repetition period when given by the <b>RPT</b> keyword, so
that specifications such as <b>RPT 2 months, 3rd
Thursday</b> are handled properly. Finally, the
<b>&minus;R</b> argument to <b>calendar_scandate</b>
directly provides an anchor for relative calculations.</p>

<p style="margin-left:11%; margin-top: 1em">The periods
handled, with possible abbreviations are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">Years</p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em"><b>years</b>, <b>yrs</b>,
<b>ys</b>, <b>year</b>, <b>yr</b>, <b>y</b>, <b>yearly</b>.
A year is 365.25 days unless there is an anchor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>Months</p></td>
<td width="2%"></td>
<td width="78%">


<p><b>months</b>, <b>mons</b>, <b>mnths</b>, <b>mths</b>,
<b>month</b>, <b>mon</b>, <b>mnth</b>, <b>mth</b>,
<b>monthly</b>. Note that <b>m</b>, <b>ms</b>, <b>mn</b>,
<b>mns</b> are ambiguous and are <i>not</i> handled. A month
is a period of 30 days rather than a calendar month unless
there is an anchor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>Weeks</p></td>
<td width="2%"></td>
<td width="78%">


<p><b>weeks</b>, <b>wks</b>, <b>ws</b>, <b>week</b>,
<b>wk</b>, <b>w</b>, <b>weekly</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>Days</p></td>
<td width="2%"></td>
<td width="78%">


<p><b>days</b>, <b>dys</b>, <b>ds</b>, <b>day</b>,
<b>dy</b>, <b>d</b>, <b>daily</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>Hours</p></td>
<td width="2%"></td>
<td width="78%">


<p><b>hours</b>, <b>hrs</b>, <b>hs</b>, <b>hour</b>,
<b>hr</b>, <b>h</b>, <b>hourly</b></p></td></tr>
</table>

<p style="margin-left:11%;">Minutes</p>

<p style="margin-left:22%;"><b>minutes</b>, <b>mins</b>,
<b>minute</b>, <b>min</b>, but <i>not</i> <b>m</b>,
<b>ms</b>, <b>mn</b> or <b>mns</b></p>

<p style="margin-left:11%;">Seconds</p>

<p style="margin-left:22%;"><b>seconds</b>, <b>secs</b>,
<b>ss</b>, <b>second</b>, <b>sec</b>, <b>s</b></p>

<p style="margin-left:11%; margin-top: 1em">Spaces between
the numbers are optional, but are required between items,
although a comma may be used (with or without spaces).</p>

<p style="margin-left:11%; margin-top: 1em">The forms
<b>yearly</b> to <b>hourly</b> allow the number to be
omitted; it is assumed to be 1. For example, <b>1 d</b> and
<b>daily</b> are equivalent. Note that using those forms
with plurals is confusing; <b>2 yearly</b> is the same as
<b>2 years</b>, <i>not</i> twice yearly, so it is
recommended they only be used without numbers.</p>

<p style="margin-left:11%; margin-top: 1em">When an anchor
time is present, there is an extension to handle regular
events in the form of the <i>n</i>th <i>some</i>day of the
month. Such a specification must occur immediately after any
year and month specification, but before any time of day,
and must be in the form <i>n</i><b>(th|st|rd)</b>
<i>day</i>, for example <b>1st Tuesday</b> or <b>3rd
Monday</b>. As in other places, days are matched case
insensitively, must be in English, and only the first three
letters are significant except that a form beginning
&lsquo;month&rsquo; does not match &lsquo;Monday&rsquo;. No
attempt is made to sanitize the resulting date; attempts to
squeeze too many occurrences into a month will push the day
into the next month (but in the obvious fashion, retaining
the correct day of the week).</p>

<p style="margin-left:11%; margin-top: 1em">Here are some
examples:</p>

<p style="margin-left:22%; margin-top: 1em"><b>30 years 3
months 4 days 3:42:41 <br>
14 days 5 hours <br>
Monthly, 3rd Thursday <br>
4d,10hr</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Example</b>
<br>
Here is an example calendar file. It uses a consistent date
format, as recommended above.</p>

<p style="margin-left:22%; margin-top: 1em"><b>Feb 1, 2006
14:30 Pointless bureaucratic meeting <br>
Mar 27, 2006 11:00 Mutual recrimination and finger pointing
<br>
Bring water pistol and waterproofs <br>
Mar 31, 2006 14:00 Very serious managerial pontification
<br>
# UID 12C7878A9A50 <br>
Apr 10, 2006 13:30 Even more pointless blame assignment
exercise WARN 30 mins <br>
May 18, 2006 16:00 Regular moaning session RPT monthly, 3rd
Thursday</b></p>

<p style="margin-left:11%; margin-top: 1em">The second
entry has a continuation line. The third entry has a
continuation line that will not be shown when the entry is
displayed, but the unique identifier will be used by the
<b>calendar_add</b> function when updating the event. The
fourth entry will produce a warning 30 minutes before the
event (to allow you to equip yourself appropriately). The
fifth entry repeats after a month on the 3rd Thursday, i.e.
June 15, 2006, at the same time.</p>

<h2>USER FUNCTIONS
<a name="USER FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
describes functions that are designed to be called directly
by the user. The first part describes those functions
associated with the user&rsquo;s calendar; the second part
describes the use in glob qualifiers.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Calendar
system functions <br>
calendar</b> [ <b>&minus;abdDsv</b> ] [ <b>&minus;C</b>
<i>calfile</i> ] [ &minus;n <i>num</i> ] [ <b>&minus;S</b>
<i>showprog</i> ] [ [ <i><br>
start</i> ] <i>end</i> ]( <b><br>
calendar &minus;r</b> [ <b>&minus;abdDrsv</b> ] [
<b>&minus;C</b> <i>calfile</i> ] [ &minus;n <i>num</i> ] [
<b>&minus;S</b> <i>showprog</i> ] [ <i><br>
start</i> ]</p>

<p style="margin-left:22%;">Show events in the
calendar.</p>

<p style="margin-left:22%; margin-top: 1em">With no
arguments, show events from the start of today until the end
of the next working day after today. In other words, if
today is Friday, Saturday, or Sunday, show up to the end of
the following Monday, otherwise show today and tomorrow.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>end</i>
is given, show events from the start of today up to the time
and date given, which is in the format described in the
previous section. Note that if this is a date the time is
assumed to be midnight at the start of the date, so that
effectively this shows all events before the given date.</p>

<p style="margin-left:22%; margin-top: 1em"><i>end</i> may
start with a <b>+</b>, in which case the remainder of the
specification is a relative time format as described in the
previous section indicating the range of time from the start
time that is to be included.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>start</i>
is also given, show events starting from that time and date.
The word <b>now</b> can be used to indicate the current
time.</p>

<p style="margin-left:22%; margin-top: 1em">To implement an
alert when events are due, include <b>calendar &minus;s</b>
in your <b>~/.zshrc</b> file.</p>

<p style="margin-left:22%; margin-top: 1em">Options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Show all items in the calendar, regardless of the
<b>start</b> and <b>end</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Brief: don&rsquo;t display continuation lines (i.e.
indented lines following the line with the date/time), just
the first line.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;B</b>
<i>lines</i></p>

<p style="margin-left:32%;">Brief: display at most the
first <i>lines</i> lines of the calendar entry.
&lsquo;<b>&minus;B 1</b>&rsquo; is equivalent to
&lsquo;<b>&minus;b</b>&rsquo;.</p>

<p style="margin-left:22%;"><b>&minus;C</b>
<i>calfile</i></p>

<p style="margin-left:32%;">Explicitly specify a calendar
file instead of the value of the <b>calendar&minus;file</b>
style or the default <b>~/calendar</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Move any events that have passed from the calendar file
to the &quot;done&quot; file, as given by the
<b>done&minus;file</b> style or the default which is the
calendar file with <b>.done</b> appended. This option is
implied by the <b>&minus;s</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Turns off the option <b>&minus;d</b>, even if the
<b>&minus;s</b> option is also present.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;n</b> <i>num</i>,
<b>&minus;</b><i>num</i></p>

<p style="margin-left:32%;">Show at least <i>num</i>
events, if present in the calendar file, regardless of the
<b>start</b> and <b>end</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Show all the remaining options in the calendar, ignoring
the given <b>end</b> time. The <b>start</b> time is
respected; any argument given is treated as a <b>start</b>
time.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Use the shell&rsquo;s <b>sched</b> command to schedule a
timed event that will warn the user when an event is due.
Note that the <b>sched</b> command only runs if the shell is
at an interactive prompt; a foreground task blocks the
scheduled task from running until it is finished.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">The timed event
usually runs the programme <b>calendar_show</b> to show the
event, as described in the section UTILITY FUNCTIONS
below.</p>

<p style="margin-left:32%; margin-top: 1em">By default, a
warning of the event is shown five minutes before it is due.
The warning period can be configured by the style
<b>warn&minus;time</b> or for a single calendar entry by
including <b>WARN</b> <i>reltime</i> in the first line of
the entry, where <i>reltime</i> is one of the usual relative
time formats.</p>

<p style="margin-left:32%; margin-top: 1em">A repeated
event may be indicated by including <b>RPT</b>
<i>reldate</i> in the first line of the entry. After the
scheduled event has been displayed it will be
re&minus;entered into the calendar file at a time
<i>reldate</i> after the existing event. Note that this is
currently the only use made of the repeat count, so that it
is not possible to query the schedule for a recurrence of an
event in the calendar until the previous event has
passed.</p>

<p style="margin-left:32%; margin-top: 1em">If <b>RPT</b>
is used, it is also possible to specify that certain
recurrences of an event are rescheduled or cancelled. This
is done with the <b>OCCURRENCE</b> keyword, followed by
whitespace and the date and time of the occurrence in the
regular sequence, followed by whitespace and either the date
and time of the rescheduled event or the exact string
<b>CANCELLED</b>. In this case the date and time must be in
exactly the &quot;date with local time&quot; format used by
the <b>text/calendar</b> MIME type (RFC 2445),
<i>&lt;YYYY&gt;&lt;MM&gt;&lt;DD&gt;</i><b>T</b><i>&lt;hh&gt;&lt;mm&gt;&lt;ss&gt;</i>
(note the presence of the literal character <b>T</b>). The
first word (the regular recurrence) may be something other
than a proper date/time to indicate that the event is
additional to the normal sequence; a convention that retains
the formatting appearance is <b>XXXXXXXXTXXXXXX</b>.</p>

<p style="margin-left:32%; margin-top: 1em">Furthermore, it
is useful to record the next regular recurrence (as then the
displayed date may be for a rescheduled event so cannot be
used for calculating the regular sequence). This is
specified by <b>RECURRENCE</b> and a time or date in the
same format. <b>calendar_add</b> adds such an indication
when it encounters a recurring event that does not include
one, based on the headline date/time.</p>

<p style="margin-left:32%; margin-top: 1em">If
<b>calendar_add</b> is used to update occurrences the
<b>UID</b> keyword described there should be present in both
the existing entry and the added occurrence in order to
identify recurring event sequences.</p>

<p style="margin-left:32%; margin-top: 1em">For
example,</p>

<p style="margin-left:43%; margin-top: 1em"><b>Thu May 6,
2010 11:00 Informal chat RPT 1 week <br>
# RECURRENCE 20100506T110000 <br>
# OCCURRENCE 20100513T110000 20100513T120000 <br>
# OCCURRENCE 20100520T110000 CANCELLED</b></p>

<p style="margin-left:32%; margin-top: 1em">The event that
occurs at 11:00 on 13th May 2010 is rescheduled an hour
later. The event that occurs a week later is cancelled. The
occurrences are given on a continuation line starting with a
<b>#</b> character so will not usually be displayed as part
of the event. As elsewhere, no account of time zones is
taken with the times. After the next event occurs the
headline date/time will be &lsquo;<b>Thu May 13, 2010
12:00</b>&rsquo; while the <b>RECURRENCE</b> date/time will
be &lsquo;<b>20100513T110000</b>&rsquo; (note that cancelled
and moved events are not taken account of in the
<b>RECURRENCE</b>, which records what the next regular
recurrence is, but they are accounted for in the headline
date/time).</p>

<p style="margin-left:32%; margin-top: 1em">It is safe to
run <b>calendar &minus;s</b> to reschedule an existing event
(if the calendar file has changed, for example), and also to
have it running in multiples instances of the shell since
the calendar file is locked when in use.</p>

<p style="margin-left:32%; margin-top: 1em">By default,
expired events are moved to the &quot;done&quot; file; see
the <b>&minus;d</b> option. Use <b>&minus;D</b> to prevent
this.</p>

<p style="margin-left:22%;"><b>&minus;S</b>
<i>showprog</i></p>

<p style="margin-left:32%;">Explicitly specify a programme
to be used for showing events instead of the value of the
<b>show&minus;prog</b> style or the default
<b>calendar_show</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Verbose: show more information about stages of
processing. This is useful for confirming that the function
has successfully parsed the dates in the calendar file.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>calendar_add</b> [
<b>&minus;BL</b> ] <i>event ...</i></p>

<p style="margin-left:22%;">Adds a single event to the
calendar in the appropriate location. The event can contain
multiple lines, as described in the section Calendar File
Format above. Using this function ensures that the calendar
file is sorted in date and time order. It also makes special
arrangements for locking the file while it is altered. The
old calendar is left in a file with the suffix
<b>.old</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;B</b> indicates that backing up the calendar file
will be handled by the caller and should not be performed by
<b>calendar_add</b>. The option <b>&minus;L</b> indicates
that <b>calendar_add</b> does not need to lock the calendar
file as it is already locked. These options will not usually
be needed by users.</p>

<p style="margin-left:22%; margin-top: 1em">If the style
<b>reformat&minus;date</b> is true, the date and time of the
new entry will be rewritten into the standard date format:
see the descriptions of this style and the style
<b>date&minus;format</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The function
can use a unique identifier stored with each event to ensure
that updates to existing events are treated correctly. The
entry should contain the word <b>UID</b>, followed by
whitespace, followed by a word consisting entirely of
hexadecimal digits of arbitrary length (all digits are
significant, including leading zeroes). As the UID is not
directly useful to the user, it is convenient to hide it on
an indented continuation line starting with a <b>#</b>, for
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>Aug 31, 2007
09:30 Celebrate the end of the holidays <br>
# UID 045B78A0</b></p>

<p style="margin-left:22%; margin-top: 1em">The second line
will not be shown by the <b>calendar</b> function.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to specify the <b>RPT</b> keyword followed by
<b>CANCELLED</b> instead of a relative time. This causes any
matched event or series of events to be cancelled (the
original event does not have to be marked as recurring in
order to be cancelled by this method). A <b>UID</b> is
required in order to match an existing event in the
calendar.</p>


<p style="margin-left:22%; margin-top: 1em"><b>calendar_add</b>
will attempt to manage recurrences and occurrences of
repeating events as described for event scheduling by
<b>calendar &minus;s</b> above. To reschedule or cancel a
single event <b>calendar_add</b> should be called with an
entry that includes the correct <b>UID</b> but does
<i>not</i> include the <b>RPT</b> keyword as this is taken
to mean the entry applies to a series of repeating events
and hence replaces all existing information. Each
rescheduled or cancelled occurrence must have an
<b>OCCURRENCE</b> keyword in the entry passed to
<b>calendar_add</b> which will be merged into the calendar
file. Any existing reference to the occurrence is replaced.
An occurrence that does not refer to a valid existing event
is added as a one&minus;off occurrence to the same calendar
entry.</p>

<p style="margin-left:11%;"><b>calendar_edit</b></p>

<p style="margin-left:22%;">This calls the user&rsquo;s
editor to edit the calendar file. If there are arguments,
they are taken as the editor to use (the file name is
appended to the commands); otherwise, the editor is given by
the variable <b>VISUAL</b>, if set, else the variable
<b>EDITOR</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the calendar
scheduler was running, then after editing the file
<b>calendar &minus;s</b> is called to update it.</p>

<p style="margin-left:22%; margin-top: 1em">This function
locks out the calendar system during the edit. Hence it
should be used to edit the calendar file if there is any
possibility of a calendar event occurring meanwhile. Note
this can lead to another shell with calendar functions
enabled hanging waiting for a lock, so it is necessary to
quit the editor as soon as possible.</p>

<p style="margin-left:11%;"><b>calendar_parse</b>
<i>calendar&minus;entry</i></p>

<p style="margin-left:22%;">This is the internal function
that analyses the parts of a calendar entry, which is passed
as the only argument. The function returns status 1 if the
argument could not be parsed as a calendar entry and status
2 if the wrong number of arguments were passed; it also sets
the parameter <b>reply</b> to an empty associative array.
Otherwise, it returns status 0 and sets elements of the
associative array <b>reply</b> as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p>time</p></td>
<td width="5%"></td>
<td width="78%">


<p>The time as a string of digits in the same units as
<b>$EPOCHSECONDS</b></p> </td></tr>
</table>

<p style="margin-left:11%;">schedtime</p>

<p style="margin-left:22%;">The regularly scheduled time.
This may differ from the actual event time <b>time</b> if
this is a recurring event and the next occurrence has been
rescheduled. Then <b>time</b> gives the actual time and
<b>schedtime</b> the time of the regular recurrence before
modification.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>text1</p></td>
<td width="4%"></td>
<td width="78%">


<p>The text from the line not including the date and time
of the event, but including any <b>WARN</b> or <b>RPT</b>
keywords and values.</p></td></tr>
</table>

<p style="margin-left:11%;">warntime</p>

<p style="margin-left:22%;">Any warning time given by the
<b>WARN</b> keyword as a string of digits containing the
time at which to warn in the same units as
<b>$EPOCHSECONDS</b>. (Note this is an absolute time, not
the relative time passed down.) Not set no <b>WARN</b>
keyword and value were matched.</p>

<p style="margin-left:11%;">warnstr</p>

<p style="margin-left:22%;">The raw string matched after
the <b>WARN</b> keyword, else unset.</p>

<p style="margin-left:11%;">rpttime</p>

<p style="margin-left:22%;">Any recurrence time given by
the <b>RPT</b> keyword as a string of digits containing the
time of the recurrence in the same units as
<b>$EPOCHSECONDS</b>. (Note this is an absolute time.) Not
set if no <b>RPT</b> keyword and value were matched.</p>

<p style="margin-left:11%;">schedrpttime</p>

<p style="margin-left:22%;">The next regularly scheduled
occurrence of a recurring event before modification. This
may differ from <b>rpttime</b>, which is the actual time of
the event that may have been rescheduled from the regular
time.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>rptstr</p></td>
<td width="2%"></td>
<td width="78%">


<p>The raw string matched after the <b>RPT</b> keyword,
else unset.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>text2</p></td>
<td width="2%"></td>
<td width="78%">


<p>The text from the line after removal of the date and any
keywords and values. )</p></td></tr>
</table>

<p style="margin-left:11%;"><b>calendar_showdate</b> [
<b>&minus;r</b> ] [ <b>&minus;f</b> <i>fmt</i> ]
<i>date&minus;spec ...</i></p>

<p style="margin-left:22%;">The given
<i>date&minus;spec</i> is interpreted and the corresponding
date and time printed. If the initial <i>date&minus;spec</i>
begins with a <b>+</b> or <b>&minus;</b> it is treated as
relative to the current time; <i>date&minus;spec</i>s after
the first are treated as relative to the date calculated so
far and a leading <b>+</b> is optional in that case. This
allows one to use the system as a date calculator. For
example, <b>calendar_showdate &rsquo;+1 month, 1st
Friday&rsquo;</b> shows the date of the first Friday of next
month.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;r</b> nothing is printed but the value of the date
and time in seconds since the epoch is stored in the
parameter <b>REPLY</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;f</b> <i>fmt</i> the given date/time conversion
format is passed to <b>strftime</b>; see notes on the
<b>date&minus;format</b> style below.</p>

<p style="margin-left:22%; margin-top: 1em">In order to
avoid ambiguity with negative relative date specifications,
options must occur in separate words; in other words,
<b>&minus;r</b> and <b>&minus;f</b> should not be combined
in the same word.</p>

<p style="margin-left:11%;"><b>calendar_sort</b></p>

<p style="margin-left:22%;">Sorts the calendar file into
date and time order. The old calendar is left in a file with
the suffix <b>.old</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Glob
qualifiers</b> <br>
The function <b>age</b> can be autoloaded and use separately
from the calendar system, although it uses the function
<b>calendar_scandate</b> for date formatting. It requires
the <b>zsh/stat</b> builtin, but uses only the builtin
<b>zstat</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>age</b>
selects files having a given modification time for use as a
glob qualifier. The format of the date is the same as that
understood by the calendar system, described in the section
FILE AND DATE FORMATS above.</p>

<p style="margin-left:11%; margin-top: 1em">The function
can take one or two arguments, which can be supplied either
directly as command or arguments, or separately as shell
parameters.</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*(e:age 2006/10/04 2006/10/09:)</b></p>

<p style="margin-left:11%; margin-top: 1em">The example
above matches all files modified between the start of those
dates. The second argument may alternatively be a relative
time introduced by a <b>+</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*(e:age 2006/10/04 +5d:)</b></p>

<p style="margin-left:11%; margin-top: 1em">The example
above is equivalent to the previous example.</p>

<p style="margin-left:11%; margin-top: 1em">In addition to
the special use of days of the week, <b>today</b> and
<b>yesterday</b>, times with no date may be specified; these
apply to today. Obviously such uses become problematic
around midnight.</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*(e&minus;age 12:00 13:30&minus;)</b></p>

<p style="margin-left:11%; margin-top: 1em">The example
above shows files modified between 12:00 and 13:00
today.</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*(e:age 2006/10/04:)</b></p>

<p style="margin-left:11%; margin-top: 1em">The example
above matches all files modified on that date. If the second
argument is omitted it is taken to be exactly 24 hours after
the first argument (even if the first argument contains a
time).</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
*(e&minus;age 2006/10/04:10:15
2006/10/04:10:45&minus;)</b></p>

<p style="margin-left:11%; margin-top: 1em">The example
above supplies times. Note that whitespace within the time
and date specification must be quoted to ensure <b>age</b>
receives the correct arguments, hence the use of the
additional colon to separate the date and time.</p>


<p style="margin-left:22%; margin-top: 1em"><b>AGEREF1=2006/10/04:10:15
<br>
AGEREF2=2006/10/04:10:45 <br>
print *(+age)</b></p>

<p style="margin-left:11%; margin-top: 1em">This shows the
same example before using another form of argument passing.
The dates and times in the parameters <b>AGEREF1</b> and
<b>AGEREF2</b> stay in effect until unset, but will be
overridden if any argument is passed as an explicit argument
to age. Any explicit argument causes both parameters to be
ignored.</p>

<h2>STYLES
<a name="STYLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The zsh style
mechanism using the <b>zstyle</b> command is describe in
<i>zshmodules</i>(1). This is the same mechanism used in the
completion system.</p>

<p style="margin-left:11%; margin-top: 1em">The styles
below are all examined in the context
<b>:datetime:</b><i>function</i><b>:</b>, for example
<b>:datetime:calendar:</b>. <b><br>
calendar&minus;file</b></p>

<p style="margin-left:22%;">The location of the main
calendar. The default is <b>~/calendar</b>.</p>

<p style="margin-left:11%;"><b>date&minus;format</b></p>

<p style="margin-left:22%;">A <b>strftime</b> format string
(see <i>strftime</i>(3)) with the zsh extensions providing
various numbers with no leading zero or space if the number
is a single digit as described for the
<b>%D{</b><i>string</i><b>}</b> prompt format in the section
EXPANSION OF PROMPT SEQUENCES in <i>zshmisc</i>(1).</p>

<p style="margin-left:22%; margin-top: 1em">This is used
for outputting dates in <b>calendar</b>, both to support the
<b>&minus;v</b> option and when adding recurring events back
to the calendar file, and in <b>calendar_showdate</b> as the
final output format.</p>

<p style="margin-left:22%; margin-top: 1em">If the style is
not set, the default used is similar the standard system
format as output by the <b>date</b> command (also known as
&lsquo;ctime format&rsquo;): &lsquo;<b>%a %b %d %H:%M:%S %Z
%Y</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>done&minus;file</b></p>

<p style="margin-left:22%;">The location of the file to
which events which have passed are appended. The default is
the calendar file location with the suffix <b>.done</b>. The
style may be set to an empty string in which case a
&quot;done&quot; file will not be maintained.</p>

<p style="margin-left:11%;"><b>reformat&minus;date</b></p>

<p style="margin-left:22%;">Boolean, used by
<b>calendar_add</b>. If it is true, the date and time of new
entries added to the calendar will be reformatted to the
format given by the style <b>date&minus;format</b> or its
default. Only the date and time of the event itself is
reformatted; any subsidiary dates and times such as those
associated with repeat and warning times are left alone.</p>

<p style="margin-left:11%;"><b>show&minus;prog</b></p>

<p style="margin-left:22%;">The programme run by
<b>calendar</b> for showing events. It will be passed the
start time and stop time of the events requested in seconds
since the epoch followed by the event text. Note that
<b>calendar &minus;s</b> uses a start time and stop time
equal to one another to indicate alerts for specific
events.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
the function <b>calendar_show</b>.</p>

<p style="margin-left:11%;"><b>warn&minus;time</b></p>

<p style="margin-left:22%;">The time before an event at
which a warning will be displayed, if the first line of the
event does not include the text <b>EVENT</b> <i>reltime</i>.
The default is 5 minutes.</p>

<h2>UTILITY FUNCTIONS
<a name="UTILITY FUNCTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>calendar_lockfiles</b></p>

<p style="margin-left:22%;">Attempt to lock the files given
in the argument. To prevent problems with network file
locking this is done in an ad hoc fashion by attempting to
create a symbolic link to the file with the name
<i>file</i><b>.lockfile</b>. No other system level functions
are used for locking, i.e. the file can be accessed and
modified by any utility that does not use this mechanism. In
particular, the user is not prevented from editing the
calendar file at the same time unless <b>calendar_edit</b>
is used.</p>

<p style="margin-left:22%; margin-top: 1em">Three attempts
are made to lock the file before giving up. If the module
<b>zsh/zselect</b> is available, the times of the attempts
are jittered so that multiple instances of the calling
function are unlikely to retry at the same time.</p>

<p style="margin-left:22%; margin-top: 1em">The files
locked are appended to the array <b>lockfiles</b>, which
should be local to the caller.</p>

<p style="margin-left:22%; margin-top: 1em">If all files
were successfully locked, status zero is returned, else
status one.</p>

<p style="margin-left:22%; margin-top: 1em">This function
may be used as a general file locking function, although
this will only work if only this mechanism is used to lock
files.</p>

<p style="margin-left:11%;"><b>calendar_read</b></p>

<p style="margin-left:22%;">This is a backend used by
various other functions to parse the calendar file, which is
passed as the only argument. The array
<b>calendar_entries</b> is set to the list of events in the
file; no pruning is done except that ampersands are removed
from the start of the line. Each entry may contain multiple
lines.</p>

<p style="margin-left:11%;"><b>calendar_scandate</b></p>

<p style="margin-left:22%;">This is a generic function to
parse dates and times that may be used separately from the
calendar system. The argument is a date or time
specification as described in the section FILE AND DATE
FORMATS above. The parameter <b>REPLY</b> is set to the
number of seconds since the epoch corresponding to that date
or time. By default, the date and time may occur anywhere
within the given argument.</p>

<p style="margin-left:22%; margin-top: 1em">Returns status
zero if the date and time were successfully parsed, else
one.</p>

<p style="margin-left:22%; margin-top: 1em">Options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The date and time are anchored to the start of the
argument; they will not be matched if there is preceding
text.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;A</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The date and time are anchored to both the start and end
of the argument; they will not be matched if the is any
other text in the argument.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Enable additional debugging output.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;m</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Minus. When <b>&minus;R</b> <i>anchor_time</i> is also
given the relative time is calculated backwards from
<i>anchor_time</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>The argument passed is to be parsed as a relative
time.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;R</b>
<i>anchor_time</i></p>

<p style="margin-left:32%;">The argument passed is to be
parsed as a relative time. The time is relative to
<i>anchor_time</i>, a time in seconds since the epoch, and
the returned value is the absolute time corresponding to
advancing <i>anchor_time</i> by the relative time given.
This allows lengths of months to be correctly taken into
account. If the final day does not exist in the given month,
the last day of the final month is given. For example, if
the anchor time is during 31st January 2007 and the relative
time is 1 month, the final time is the same time of day
during 28th February 2007.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>In addition to setting <b>REPLY</b>, set <b>REPLY2</b>
to the remainder of the argument after the date and time
have been stripped. This is empty if the option
<b>&minus;A</b> was given.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;t</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Allow a time with no date specification. The date is
assumed to be today. The behaviour is unspecified if the
iron tongue of midnight is tolling twelve.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>calendar_show</b></p>

<p style="margin-left:22%;">The function used by default to
display events. It accepts a start time and end time for
events, both in epoch seconds, and an event description.</p>

<p style="margin-left:22%; margin-top: 1em">The event is
always printed to standard output. If the command line
editor is active (which will usually be the case) the
command line will be redisplayed after the output.</p>

<p style="margin-left:22%; margin-top: 1em">If the
parameter <b>DISPLAY</b> is set and the start and end times
are the same (indicating a scheduled event), the function
uses the command <b>xmessage</b> to display a window with
the event details.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As the system
is based entirely on shell functions (with a little support
from the <b>zsh/datetime</b> module) the mechanisms used are
not as robust as those provided by a dedicated calendar
utility. Consequently the user should not rely on the shell
for vital alerts.</p>

<p style="margin-left:11%; margin-top: 1em">There is no
<b>calendar_delete</b> function.</p>

<p style="margin-left:11%; margin-top: 1em">There is no
localization support for dates and times, nor any support
for the use of time zones.</p>

<p style="margin-left:11%; margin-top: 1em">Relative
periods of months and years do not take into account the
variable number of days.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>calendar_show</b> function is currently hardwired to use
<b>xmessage</b> for displaying alerts on X Window System
displays. This should be configurable and ideally integrate
better with the desktop.</p>


<p style="margin-left:11%; margin-top: 1em"><b>calendar_lockfiles</b>
hangs the shell while waiting for a lock on a file. If
called from a scheduled task, it should instead reschedule
the event that caused it.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshtcpsys &minus; zsh tcp
system</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A module
<b>zsh/net/tcp</b> is provided to provide network I/O over
TCP/IP from within the shell; see its description in
<i>zshmodules</i>(1) . This manual page describes a function
suite based on the module. If the module is installed, the
functions are usually installed at the same time, in which
case they will be available for autoloading in the default
function search path. In addition to the <b>zsh/net/tcp</b>
module, the <b>zsh/zselect</b> module is used to implement
timeouts on read operations. For troubleshooting tips,
consult the corresponding advice for the <b>zftp</b>
functions described in <i>zshzftpsys</i>(1) .</p>

<p style="margin-left:11%; margin-top: 1em">There are
functions corresponding to the basic I/O operations open,
close, read and send, named <b>tcp_open</b> etc., as well as
a function <b>tcp_expect</b> for pattern match analysis of
data read as input. The system makes it easy to receive data
from and send data to multiple named sessions at once. In
addition, it can be linked with the shell&rsquo;s line
editor in such a way that input data is automatically shown
at the terminal. Other facilities available including
logging, filtering and configurable output prompts.</p>

<p style="margin-left:11%; margin-top: 1em">To use the
system where it is available, it should be enough to
&lsquo;<b>autoload &minus;U tcp_open</b>&rsquo; and run
<b>tcp_open</b> as documented below to start a session. The
<b>tcp_open</b> function will autoload the remaining
functions.</p>

<h2>TCP USER FUNCTIONS
<a name="TCP USER FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Basic I/O
<br>
tcp_open [&minus;qz]</b> <i>host port</i> <b>[</b>
<i>sess</i> <b>] <br>
tcp_open [&minus;qz] [ &minus;s</b> <i>sess</i> <b>|
&minus;l</b> <i>sess</i><b>,... ] ... <br>
tcp_open [&minus;qz] [&minus;a</b> <i>fd</i> <b>|
&minus;f</b> <i>fd</i> <b>] [</b> <i>sess</i> <b>]</b></p>

<p style="margin-left:22%;">Open a new session. In the
first and simplest form, open a TCP connection to host
<i>host</i> at port <i>port</i>; numeric and symbolic forms
are understood for both.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>sess</i>
is given, this becomes the name of the session which can be
used to refer to multiple different TCP connections. If
<i>sess</i> is not given, the function will invent a numeric
name value (note this is <i>not</i> the same as the file
descriptor to which the session is attached). It is
recommended that session names not include
&lsquo;funny&rsquo; characters, where funny characters are
not well&minus;defined but certainly do not include
alphanumerics or underscores, and certainly do include
whitespace.</p>

<p style="margin-left:22%; margin-top: 1em">In the second
case, one or more sessions to be opened are given by name. A
single session name is given after <b>&minus;s</b> and a
comma&minus;separated list after <b>&minus;l</b>; both
options may be repeated as many times as necessary. A
failure to open any session causes <b>tcp_open</b> to abort.
The host and port are read from the file
<b>.ztcp_sessions</b> in the same directory as the
user&rsquo;s zsh initialisation files, i.e. usually the home
directory, but <b>$ZDOTDIR</b> if that is set. The file
consists of lines each giving a session name and the
corresponding host and port, in that order (note the session
name comes first, not last), separated by whitespace.</p>

<p style="margin-left:22%; margin-top: 1em">The third form
allows passive and fake TCP connections. If the option
<b>&minus;a</b> is used, its argument is a file descriptor
open for listening for connections. No function
front&minus;end is provided to open such a file descriptor,
but a call to &lsquo;<b>ztcp &minus;l</b> <i>port</i>&rsquo;
will create one with the file descriptor stored in the
parameter <b>$REPLY</b>. The listening port can be closed
with &lsquo;<b>ztcp &minus;c</b> <i>fd</i>&rsquo;. A call to
&lsquo;<b>tcp_open &minus;a</b> <i>fd</i>&rsquo; will block
until a remote TCP connection is made to <i>port</i> on the
local machine. At this point, a session is created in the
usual way and is largely indistinguishable from an active
connection created with one of the first two forms.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;f</b> is used, its argument is a file descriptor
which is used directly as if it were a TCP session. How well
the remainder of the TCP function system copes with this
depends on what actually underlies this file descriptor. A
regular file is likely to be unusable; a FIFO (pipe) of some
sort will work better, but note that it is not a good idea
for two different sessions to attempt to read from the same
FIFO at once.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;q</b> is given with any of the three forms,
<b>tcp_open</b> will not print informational messages,
although it will in any case exit with an appropriate
status.</p>

<p style="margin-left:22%; margin-top: 1em">If the line
editor (zle) is in use, which is typically the case if the
shell is interactive, <b>tcp_open</b> installs a handler
inside <b>zle</b> which will check for new data at the same
time as it checks for keyboard input. This is convenient as
the shell consumes no CPU time while waiting; the test is
performed by the operating system. Giving the option
<b>&minus;z</b> to any of the forms of <b>tcp_open</b>
prevents the handler from being installed, so data must be
read explicitly. Note, however, this is not necessary for
executing complete sets of send and read commands from a
function, as zle is not active at this point. Generally
speaking, the handler is only active when the shell is
waiting for input at a command prompt or in the <b>vared</b>
builtin. The option has no effect if zle is not active;
&lsquo;<b>[[ &minus;o zle]]</b>&rsquo; will test for
this.</p>

<p style="margin-left:22%; margin-top: 1em">The first
session to be opened becomes the current session and
subsequent calls to <b>tcp_open</b> do not change it. The
current session is stored in the parameter <b>$TCP_SESS</b>;
see below for more detail about the parameters used by the
system.</p>

<p style="margin-left:22%; margin-top: 1em">The function
<b>tcp_on_open</b>, if defined, is called when a session is
opened. See the description below.</p>

<p style="margin-left:11%;"><b>tcp_close [&minus;qn] [
&minus;a | &minus;l</b> <i>sess</i><b>,... |</b> <i>sess</i>
<b>... ]</b></p>

<p style="margin-left:22%;">Close the named sessions, or
the current session if none is given, or all open sessions
if <b>&minus;a</b> is given. The options <b>&minus;l</b> and
<b>&minus;s</b> are both handled for consistency with
<b>tcp_open</b>, although the latter is redundant.</p>

<p style="margin-left:22%; margin-top: 1em">If the session
being closed is the current one, <b>$TCP_SESS</b> is unset,
leaving no current session, even if there are other sessions
still open.</p>

<p style="margin-left:22%; margin-top: 1em">If the session
was opened with <b>tcp_open &minus;f</b>, the file
descriptor is closed so long as it is in the range 0 to 9
accessible directly from the command line. If the option
<b>&minus;n</b> is given, no attempt will be made to close
file descriptors in this case. The <b>&minus;n</b> option is
not used for genuine <b>ztcp</b> session; the file
descriptors are always closed with the session.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;q</b> is given, no informational messages will be
printed.</p>

<p style="margin-left:11%;"><b>tcp_read [&minus;bdq] [
&minus;t</b> <i>TO</i> <b>] [ &minus;T</b> <i>TO</i> <b>]
<br>
[ &minus;a | &minus;u</b> <i>fd</i> <b>... | &minus;l</b>
<i>sess</i><b>,... | &minus;s</b> <i>sess</i>
<b>...]</b></p>

<p style="margin-left:22%;">Perform a read operation on the
current session, or on a list of sessions if any are given
with <b>&minus;u</b>, <b>&minus;l</b> or <b>&minus;s</b>, or
all open sessions if the option <b>&minus;a</b> is given.
Any of the <b>&minus;u</b>, <b>&minus;l</b> or
<b>&minus;s</b> options may be repeated or mixed together.
The <b>&minus;u</b> option specifies a file descriptor
directly (only those managed by this system are useful), the
other two specify sessions as described for <b>tcp_open</b>
above.</p>

<p style="margin-left:22%; margin-top: 1em">The function
checks for new data available on all the sessions listed.
Unless the <b>&minus;b</b> option is given, it will not
block waiting for new data. Any one line of data from any of
the available sessions will be read, stored in the parameter
<b>$TCP_LINE</b>, and displayed to standard output unless
<b>$TCP_SILENT</b> contains a non&minus;empty string. When
printed to standard output the string <b>$TCP_PROMPT</b>
will be shown at the start of the line; the default form for
this includes the name of the session being read. See below
for more information on these parameters. In this mode,
<b>tcp_read</b> can be called repeatedly until it returns
status 2 which indicates all pending input from all
specified sessions has been handled.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;b</b>, equivalent to an infinite timeout, the
function will block until a line is available to read from
one of the specified sessions. However, only a single line
is returned.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;d</b> indicates that all pending input should be
drained. In this case <b>tcp_read</b> may process multiple
lines in the manner given above; only the last is stored in
<b>$TCP_LINE</b>, but the complete set is stored in the
array <b>$tcp_lines</b>. This is cleared at the start of
each call to <b>tcp_read</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;t</b> and <b>&minus;T</b> specify a timeout in
seconds, which may be a floating point number for increased
accuracy. With <b>&minus;t</b> the timeout is applied before
each line read. With <b>&minus;T</b>, the timeout applies to
the overall operation, possibly including multiple read
operations if the option <b>&minus;d</b> is present; without
this option, there is no distinction between <b>&minus;t</b>
and <b>&minus;T</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The function
does not print informational messages, but if the option
<b>&minus;q</b> is given, no error message is printed for a
non&minus;existent session.</p>

<p style="margin-left:22%; margin-top: 1em">A return status
of 2 indicates a timeout or no data to read. Any other
non&minus;zero return status indicates some error
condition.</p>

<p style="margin-left:22%; margin-top: 1em">See
<b>tcp_log</b> for how to control where data is sent by
<b>tcp_read</b>.</p>

<p style="margin-left:11%;"><b>tcp_send [&minus;cnq] [
&minus;s</b> <i>sess</i> <b>| &minus;l</b>
<i>sess</i><b>,... ]</b> <i>data</i> <b>... <br>
tcp_send [&minus;cnq] &minus;a</b> <i>data</i>
<b>...</b></p>

<p style="margin-left:22%;">Send the supplied data strings
to all the specified sessions in turn. The underlying
operation differs little from a &lsquo;<b>print
&minus;r</b>&rsquo; to the session&rsquo;s file descriptor,
although it attempts to prevent the shell from dying owing
to a <b>SIGPIPE</b> caused by an attempt to write to a
defunct session.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;c</b> causes <b>tcp_send</b> to behave like
<b>cat</b>. It reads lines from standard input until end of
input and sends them in turn to the specified session(s)
exactly as if they were given as <i>data</i> arguments to
individual <b>tcp_send</b> commands.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;n</b> prevents <b>tcp_send</b> from putting a
newline at the end of the data strings.</p>

<p style="margin-left:22%; margin-top: 1em">The remaining
options all behave as for <b>tcp_read</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The data
arguments are not further processed once they have been
passed to <b>tcp_send</b>; they are simply passed down to
<b>print &minus;r</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
parameter <b>$TCP_OUTPUT</b> is a non&minus;empty string and
logging is enabled then the data sent to each session will
be echoed to the log file(s) with <b>$TCP_OUTPUT</b> in
front where appropriate, much in the manner of
<b>$TCP_PROMPT</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Session
Management <br>
tcp_alias [&minus;q]</b> <i>alias</i><b>=</b><i>sess</i>
<b>... <br>
tcp_alias [&minus;q] [</b> <i>alias</i> <b>] ... <br>
tcp_alias &minus;d [&minus;q]</b> <i>alias</i>
<b>...</b></p>

<p style="margin-left:22%;">This function is not
particularly well tested.</p>

<p style="margin-left:22%; margin-top: 1em">The first form
creates an alias for a session name; <i>alias</i> can then
be used to refer to the existing session <i>sess</i>. As
many aliases may be listed as required.</p>

<p style="margin-left:22%; margin-top: 1em">The second form
lists any aliases specified, or all aliases if none.</p>

<p style="margin-left:22%; margin-top: 1em">The third form
deletes all the aliases listed. The underlying sessions are
not affected.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;q</b> suppresses an inconsistently chosen subset
of error messages.</p>

<p style="margin-left:11%;"><b>tcp_log [&minus;asc] [
&minus;n | &minus;N ] [</b> <i>logfile</i> <b>]</b></p>

<p style="margin-left:22%;">With an argument
<i>logfile</i>, all future input from <b>tcp_read</b> will
be logged to the named file. Unless <b>&minus;a</b> (append)
is given, this file will first be truncated or created
empty. With no arguments, show the current status of
logging.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;s</b>, per&minus;session logging is enabled. Input
from <b>tcp_read</b> is output to the file
<i>logfile</i>.<i>sess</i>. As the session is automatically
discriminated by the filename, the contents are raw (no
<b>$TCP_PROMPT</b>). The option <b>&minus;a</b> applies as
above. Per&minus;session logging and logging of all data in
one file are not mutually exclusive.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;c</b> closes all logging, both complete and
per&minus;session logs.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;n</b> and <b>&minus;N</b> respectively turn off or
restore output of data read by <b>tcp_read</b> to standard
output; hence &lsquo;<b>tcp_log &minus;cn</b>&rsquo; turns
off all output by <b>tcp_read</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The function is
purely a convenient front end to setting the parameters
<b>$TCP_LOG</b>, <b>$TCP_LOG_SESS</b>, <b>$TCP_SILENT</b>,
which are described below.</p>

<p style="margin-left:11%;"><b>tcp_rename</b> <i>old
new</i></p>

<p style="margin-left:22%;">Rename session <i>old</i> to
session <i>new</i>. The old name becomes invalid.</p>

<p style="margin-left:11%;"><b>tcp_sess [</b> <i>sess</i>
<b>[</b> <i>command</i> <b>... ] ]</b></p>

<p style="margin-left:22%;">With no arguments, list all the
open sessions and associated file descriptors. The current
session is marked with a star. For use in functions, direct
access to the parameters <b>$tcp_by_name</b>,
<b>$tcp_by_fd</b> and <b>$TCP_SESS</b> is probably more
convenient; see below.</p>

<p style="margin-left:22%; margin-top: 1em">With a
<i>sess</i> argument, set the current session to
<i>sess</i>. This is equivalent to changing <b>$TCP_SESS</b>
directly.</p>

<p style="margin-left:22%; margin-top: 1em">With additional
arguments, temporarily set the current session while
executing the string <b>command ...</b>. The first argument
is re&minus;evaluated so as to expand aliases etc., but the
remaining arguments are passed through as the appear to
<b>tcp_sess</b>. The original session is restored when
<b>tcp_sess</b> exits.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Advanced I/O
<br>
tcp_command</b> <i>send&minus;options</i> <b>...</b>
<i>send&minus;arguments</i> <b>...</b></p>

<p style="margin-left:22%;">This is a convenient
front&minus;end to <b>tcp_send</b>. All arguments are passed
to <b>tcp_send</b>, then the function pauses waiting for
data. While data is arriving at least every
<b>$TCP_TIMEOUT</b> (default 0.3) seconds, data is handled
and printed out according to the current settings. Status 0
is always returned.</p>

<p style="margin-left:22%; margin-top: 1em">This is
generally only useful for interactive use, to prevent the
display becoming fragmented by output returned from the
connection. Within a programme or function it is generally
better to handle reading data by a more explicit method.</p>

<p style="margin-left:11%;"><b>tcp_expect [ &minus;q ] [
&minus;p</b> <i>var</i> <b>] [ &minus;t</b> <i>to</i> <b>|
&minus;T</b> <i>TO</i><b>] <br>
[ &minus;a | &minus;s</b> <i>sess</i> <b>... | &minus;l</b>
<i>sess</i><b>,... ]</b> <i>pattern</i> ...</p>

<p style="margin-left:22%;">Wait for input matching any of
the given <i>pattern</i>s from any of the specified
sessions. Input is ignored until an input line matches one
of the given patterns; at this point status zero is
returned, the matching line is stored in <b>$TCP_LINE</b>,
and the full set of lines read during the call to
<b>tcp_expect</b> is stored in the array
<b>$tcp_expect_lines</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Sessions are
specified in the same way as <b>tcp_read</b>: the default is
to use the current session, otherwise the sessions specified
by <b>&minus;a</b>, <b>&minus;s</b>, or <b>&minus;l</b> are
used.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>pattern</i> is a standard zsh extended&minus;globbing
pattern; note that it needs to be quoted to avoid it being
expanded immediately by filename generation. It must match
the full line, so to match a substring there must be a
&lsquo;<b>*</b>&rsquo; at the start and end. The line
matched against includes the <b>$TCP_PROMPT</b> added by
<b>tcp_read</b>. It is possible to include the globbing
flags &lsquo;<b>#b</b>&rsquo; or &lsquo;<b>#m</b>&rsquo; in
the patterns to make backreferences available in the
parameters <b>$MATCH</b>, <b>$match</b>, etc., as described
in the base zsh documentation on pattern matching.</p>

<p style="margin-left:22%; margin-top: 1em">Unlike
<b>tcp_read</b>, the default behaviour of <b>tcp_expect</b>
is to block indefinitely until the required input is found.
This can be modified by specifying a timeout with
<b>&minus;t</b> or <b>&minus;T</b>; these function as in
<b>tcp_read</b>, specifying a per&minus;read or overall
timeout, respectively, in seconds, as an integer or
floating&minus;point number. As <b>tcp_read</b>, the
function returns status 2 if a timeout occurs.</p>

<p style="margin-left:22%; margin-top: 1em">The function
returns as soon as any one of the patterns given match. If
the caller needs to know which of the patterns matched, the
option <b>&minus;p</b> <i>var</i> can be used; on return,
<b>$var</b> is set to the number of the pattern using
ordinary zsh indexing, i.e. the first is 1, and so on. Note
the absence of a &lsquo;<b>$</b>&rsquo; in front of
<i>var</i>. To avoid clashes, the parameter cannot begin
with &lsquo;<b>_expect</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;q</b> is passed directly down to
<b>tcp_read</b>.</p>

<p style="margin-left:22%; margin-top: 1em">As all input is
done via <b>tcp_read</b>, all the usual rules about output
of lines read apply. One exception is that the parameter
<b>$tcp_lines</b> will only reflect the line actually
matched by <b>tcp_expect</b>; use <b>$tcp_expect_lines</b>
for the full set of lines read during the function call.</p>

<p style="margin-left:11%;"><b>tcp_proxy</b></p>

<p style="margin-left:22%;">This is a simple&minus;minded
function to accept a TCP connection and execute a command
with I/O redirected to the connection. Extreme caution
should be taken as there is no security whatsoever and this
can leave your computer open to the world. Ideally, it
should only be used behind a firewall.</p>

<p style="margin-left:22%; margin-top: 1em">The first
argument is a TCP port on which the function will
listen.</p>

<p style="margin-left:22%; margin-top: 1em">The remaining
arguments give a command and its arguments to execute with
standard input, standard output and standard error
redirected to the file descriptor on which the TCP session
has been accepted. If no command is given, a new zsh is
started. This gives everyone on your network direct access
to your account, which in many cases will be a bad
thing.</p>

<p style="margin-left:22%; margin-top: 1em">The command is
run in the background, so <b>tcp_proxy</b> can then accept
new connections. It continues to accept new connections
until interrupted.</p>

<p style="margin-left:11%;"><b>tcp_spam [&minus;ertv] [
&minus;a | &minus;s</b> <i>sess</i> <b>| &minus;l</b>
<i>sess</i><b>,... ]</b> <i>cmd</i> <b>...</b></p>

<p style="margin-left:22%;">Execute &lsquo;<i>cmd</i>
<b>...</b>&rsquo; for each session in turn. Note this
executes the command and arguments; it does not send the
command line as data unless the <b>&minus;t</b> (transmit)
option is given.</p>

<p style="margin-left:22%; margin-top: 1em">The sessions
may be selected explicitly with the standard
<b>&minus;a</b>, <b>&minus;s</b> or <b>&minus;l</b> options,
or may be chosen implicitly. If none of the three options is
given the rules are: first, if the array
<b>$tcp_spam_list</b> is set, this is taken as the list of
sessions, otherwise all sessions are taken. Second, any
sessions given in the array <b>$tcp_no_spam_list</b> are
removed from the list of sessions.</p>

<p style="margin-left:22%; margin-top: 1em">Normally, any
sessions added by the &lsquo;<b>&minus;a</b>&rsquo; flag or
when all sessions are chosen implicitly are spammed in
alphabetic order; sessions given by the
<b>$tcp_spam_list</b> array or on the command line are
spammed in the order given. The <b>&minus;r</b> flag
reverses the order however it was arrived it.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;v</b> flag specifies that a <b>$TCP_PROMPT</b>
will be output before each session. This is output after any
modification to TCP_SESS by the user&minus;defined
<b>tcp_on_spam</b> function described below. (Obviously that
function is able to generate its own output.)</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;e</b> is present, the line given as <i>cmd ...</i>
is executed using <b>eval</b>, otherwise it is executed
without any further processing.</p>

<p style="margin-left:11%;"><b>tcp_talk</b></p>

<p style="margin-left:22%;">This is a fairly
simple&minus;minded attempt to force input to the line
editor to go straight to the default TCP_SESSION.</p>

<p style="margin-left:22%; margin-top: 1em">An escape
string, <b>$TCP_TALK_ESCAPE</b>, default &lsquo;:&rsquo;, is
used to allow access to normal shell operation. If it is on
its own at the start of the line, or followed only by
whitespace, the line editor returns to normal operation.
Otherwise, the string and any following whitespace are
skipped and the remainder of the line executed as shell
input without any change of the line editor&rsquo;s
operating mode.</p>

<p style="margin-left:22%; margin-top: 1em">The current
implementation is somewhat deficient in terms of use of the
command history. For this reason, many users will prefer to
use some form of alternative approach for sending data
easily to the current session. One simple approach is to
alias some special character (such as
&lsquo;<b>%</b>&rsquo;) to &lsquo;<b>tcp_command
&minus;&minus;</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>tcp_wait</b></p>

<p style="margin-left:22%;">The sole argument is an integer
or floating point number which gives the seconds to delay.
The shell will do nothing for that period except wait for
input on all TCP sessions by calling <b>tcp_read
&minus;a</b>. This is similar to the interactive behaviour
at the command prompt when zle handlers are installed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&lsquo;One&minus;shot&rsquo;
file transfer <br>
tcp_point</b> <i>port</i> <b><br>
tcp_shoot</b> <i>host port</i></p>

<p style="margin-left:22%;">This pair of functions provide
a simple way to transfer a file between two hosts within the
shell. Note, however, that bulk data transfer is currently
done using <b>cat</b>. <b>tcp_point</b> reads any data
arriving at <i>port</i> and sends it to standard output;
<b>tcp_shoot</b> connects to <i>port</i> on <i>host</i> and
sends its standard input. Any unused <i>port</i> may be
used; the standard mechanism for picking a port is to think
of a random four&minus;digit number above 1024 until one
works.</p>

<p style="margin-left:22%; margin-top: 1em">To transfer a
file from host <b>woodcock</b> to host <b>springes</b>, on
<b>springes</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>tcp_point
8091 &gt;output_file</b></p>

<p style="margin-left:22%; margin-top: 1em">and on
<b>woodcock</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>tcp_shoot
springes 8091 &lt;input_file</b></p>

<p style="margin-left:22%; margin-top: 1em">As these two
functions do not require <b>tcp_open</b> to set up a TCP
connection first, they may need to be autoloaded
separately.</p>

<h2>TCP USER&minus;DEFINED FUNCTIONS
<a name="TCP USER&minus;DEFINED FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Certain
functions, if defined by the user, will be called by the
function system in certain contexts. This facility depends
on the module <b>zsh/parameter</b>, which is usually
available in interactive shells as the completion system
depends on it. None of the functions need be defined; they
simply provide convenient hooks when necessary.</p>

<p style="margin-left:11%; margin-top: 1em">Typically,
these are called after the requested action has been taken,
so that the various parameters will reflect the new state.
<b><br>
tcp_on_alias</b> <i>alias fd</i></p>

<p style="margin-left:22%;">When an alias is defined, this
function will be called with two arguments: the name of the
alias, and the file descriptor of the corresponding
session.</p>

<p style="margin-left:11%;"><b>tcp_on_awol</b> <i>sess
fd</i></p>

<p style="margin-left:22%;">If the function
<b>tcp_fd_handler</b> is handling input from the line editor
and detects that the file descriptor is no longer reusable,
by default it removes it from the list of file descriptors
handled by this method and prints a message. If the function
<b>tcp_on_awol</b> is defined it is called immediately
before this point. It may return status 100, which indicates
that the normal handling should still be performed; any
other return status indicates that no further action should
be taken and the <b>tcp_fd_handler</b> should return
immediately with the given status. Typically the action of
<b>tcp_on_awol</b> will be to close the session.</p>

<p style="margin-left:22%; margin-top: 1em">The variable
<b>TCP_INVALIDATE_ZLE</b> will be a non&minus;empty string
if it is necessary to invalidate the line editor display
using &lsquo;<b>zle &minus;I</b>&rsquo; before printing
output from the function.</p>


<p style="margin-left:22%; margin-top: 1em">(&lsquo;AWOL&rsquo;
is military jargon for &lsquo;absent without leave&rsquo; or
some variation. It has no pre&minus;existing technical
meaning known to the author.)</p>

<p style="margin-left:11%;"><b>tcp_on_close</b> <i>sess
fd</i></p>

<p style="margin-left:22%;">This is called with the name of
a session being closed and the file descriptor which
corresponded to that session. Both will be invalid by the
time the function is called.</p>

<p style="margin-left:11%;"><b>tcp_on_open</b> <i>sess
fd</i></p>

<p style="margin-left:22%;">This is called after a new
session has been defined with the session name and file
descriptor as arguments. If it returns a non&minus;zero
status, opening the session is assumed to fail and the
session is closed again; however, <b>tcp_open</b> will
continue to attempt to open any remaining sessions given on
the command line.</p>

<p style="margin-left:11%;"><b>tcp_on_rename</b> <i>oldsess
fd newsess</i></p>

<p style="margin-left:22%;">This is called after a session
has been renamed with the three arguments old session name,
file descriptor, new session name.</p>

<p style="margin-left:11%;"><b>tcp_on_spam</b> <i>sess
command</i> <b>...</b></p>

<p style="margin-left:22%;">This is called once for each
session spammed, just <i>before</i> a command is executed
for a session by <b>tcp_spam</b>. The arguments are the
session name followed by the command list to be executed. If
<b>tcp_spam</b> was called with the option <b>&minus;t</b>,
the first command will be <b>tcp_send</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This function
is called after <b>$TCP_SESS</b> is set to reflect the
session to be spammed, but before any use of it is made.
Hence it is possible to alter the value of <b>$TCP_SESS</b>
within this function. For example, the session arguments to
<b>tcp_spam</b> could include extra information to be
stripped off and processed in <b>tcp_on_spam</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the function
sets the parameter <b>$REPLY</b> to
&lsquo;<b>done</b>&rsquo;, the command line is not executed;
in addition, no prompt is printed for the <b>&minus;v</b>
option to <b>tcp_spam</b>.</p>

<p style="margin-left:11%;"><b>tcp_on_unalias</b> <i>alias
fd</i></p>

<p style="margin-left:22%;">This is called with the name of
an alias and the corresponding session&rsquo;s file
descriptor after an alias has been deleted.</p>

<h2>TCP UTILITY FUNCTIONS
<a name="TCP UTILITY FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
functions are used by the TCP function system but will
rarely if ever need to be called directly. <b><br>
tcp_fd_handler</b></p>

<p style="margin-left:22%;">This is the function installed
by <b>tcp_open</b> for handling input from within the line
editor, if that is required. It is in the format documented
for the builtin &lsquo;<b>zle &minus;F</b>&rsquo; in
<i>zshzle</i>(1) .</p>

<p style="margin-left:22%; margin-top: 1em">While active,
the function sets the parameter <b>TCP_HANDLER_ACTIVE</b> to
1. This allows shell code called internally (for example, by
setting <b>tcp_on_read</b>) to tell if is being called when
the shell is otherwise idle at the editor prompt.</p>

<p style="margin-left:11%;"><b>tcp_output [ &minus;q ]
&minus;P</b> <i>prompt</i> <b>&minus;F</b> <i>fd</i>
<b>&minus;S</b> <i>sess</i></p>

<p style="margin-left:22%;">This function is used for both
logging and handling output to standard output, from within
<b>tcp_read</b> and (if <b>$TCP_OUTPUT</b> is set)
<b>tcp_send</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>prompt</i> to use is specified by <b>&minus;P</b>; the
default is the empty string. It can contain:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Expands to 1 if the session is the current session,
otherwise 0. Used with ternary expressions such as
&lsquo;<b>%(c.&minus;.+)</b>&rsquo; to output
&lsquo;<b>+</b>&rsquo; for the current session and
&lsquo;<b>&minus;</b>&rsquo; otherwise.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by the session&rsquo;s file descriptor.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by the session name.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by a single &lsquo;<b>%</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;q</b> suppresses output to standard output, but
not to any log files which are configured.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;S</b> and <b>&minus;F</b> options are used to pass
in the session name and file descriptor for possible
replacement in the prompt.</p>

<h2>TCP USER PARAMETERS
<a name="TCP USER PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Parameters
follow the usual convention that uppercase is used for
scalars and integers, while lowercase is used for normal and
associative array. It is always safe for user code to read
these parameters. Some parameters may also be set; these are
noted explicitly. Others are included in this group as they
are set by the function system for the user&rsquo;s benefit,
i.e. setting them is typically not useful but is benign.</p>

<p style="margin-left:11%; margin-top: 1em">It is often
also useful to make settable parameters local to a function.
For example, &lsquo;<b>local TCP_SILENT=1</b>&rsquo;
specifies that data read during the function call will not
be printed to standard output, regardless of the setting
outside the function. Likewise, &lsquo;<b>local
TCP_SESS=</b><i>sess</i>&rsquo; sets a session for the
duration of a function, and &lsquo;<b>local
TCP_PROMPT=</b>&rsquo; specifies that no prompt is used for
input during the function. <b><br>
tcp_expect_lines</b></p>

<p style="margin-left:22%;">Array. The set of lines read
during the last call to <b>tcp_expect</b>, including the
last (<b>$TCP_LINE</b>).</p>

<p style="margin-left:11%;"><b>tcp_filter</b></p>

<p style="margin-left:22%;">Array. May be set directly. A
set of extended globbing patterns which, if matched in
<b>tcp_output</b>, will cause the line not to be printed to
standard output. The patterns should be defined as described
for the arguments to <b>tcp_expect</b>. Output of line to
log files is not affected.</p>

<p style="margin-left:11%;"><b>TCP_HANDLER_ACTIVE</b></p>

<p style="margin-left:22%;">Scalar. Set to 1 within
<b>tcp_fd_handler</b> to indicate to functions called
recursively that they have been called during an editor
session. Otherwise unset.</p>

<p style="margin-left:11%;"><b>TCP_LINE</b></p>

<p style="margin-left:22%;">The last line read by
<b>tcp_read</b>, and hence also <b>tcp_expect</b>.</p>

<p style="margin-left:11%;"><b>TCP_LINE_FD</b></p>

<p style="margin-left:22%;">The file descriptor from which
<b>$TCP_LINE</b> was read. <b>${tcp_by_fd[$TCP_LINE_FD]}</b>
will give the corresponding session name.</p>

<p style="margin-left:11%;"><b>tcp_lines</b></p>

<p style="margin-left:22%;">Array. The set of lines read
during the last call to <b>tcp_read</b>, including the last
(<b>$TCP_LINE</b>).</p>

<p style="margin-left:11%;"><b>TCP_LOG</b></p>

<p style="margin-left:22%;">May be set directly, although
it is also controlled by <b>tcp_log</b>. The name of a file
to which output from all sessions will be sent. The output
is proceeded by the usual <b>$TCP_PROMPT</b>. If it is not
an absolute path name, it will follow the user&rsquo;s
current directory.</p>

<p style="margin-left:11%;"><b>TCP_LOG_SESS</b></p>

<p style="margin-left:22%;">May be set directly, although
it is also controlled by <b>tcp_log</b>. The prefix for a
set of files to which output from each session separately
will be sent; the full filename is
<b>${TCP_LOG_SESS}.</b><i>sess</i>. Output to each file is
raw; no prompt is added. If it is not an absolute path name,
it will follow the user&rsquo;s current directory.</p>

<p style="margin-left:11%;"><b>tcp_no_spam_list</b></p>

<p style="margin-left:22%;">Array. May be set directly. See
<b>tcp_spam</b> for how this is used.</p>

<p style="margin-left:11%;"><b>TCP_OUTPUT</b></p>

<p style="margin-left:22%;">May be set directly. If a
non&minus;empty string, any data sent to a session by
<b>tcp_send</b> will be logged. This parameter gives the
prompt to be used in a file specified by <b>$TCP_LOG</b> but
not in a file generated from <b>$TCP_LOG_SESS</b>. The
prompt string has the same format as <b>TCP_PROMPT</b> and
the same rules for its use apply.</p>

<p style="margin-left:11%;"><b>TCP_PROMPT</b></p>

<p style="margin-left:22%;">May be set directly. Used as
the prefix for data read by <b>tcp_read</b> which is printed
to standard output or to the log file given by
<b>$TCP_LOG</b>, if any. Any &lsquo;<b>%s</b>&rsquo;,
&lsquo;<b>%f</b>&rsquo; or &lsquo;<b>%%</b>&rsquo; occurring
in the string will be replaced by the name of the session,
the session&rsquo;s underlying file descriptor, or a single
&lsquo;<b>%</b>&rsquo;, respectively. The expression
&lsquo;<b>%c</b>&rsquo; expands to 1 if the session being
read is the current session, else 0; this is most useful in
ternary expressions such as
&lsquo;<b>%(c.&minus;.+)</b>&rsquo; which outputs
&lsquo;<b>+</b>&rsquo; if the session is the current one,
else &lsquo;<b>&minus;</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>TCP_READ_DEBUG</b></p>

<p style="margin-left:22%;">May be set directly. If this
has non&minus;zero length, <b>tcp_read</b> will give some
limited diagnostics about data being read.</p>

<p style="margin-left:11%;"><b>TCP_SECONDS_START</b></p>

<p style="margin-left:22%;">This value is created and
initialised to zero by tcp_open.</p>

<p style="margin-left:22%; margin-top: 1em">The functions
<b>tcp_read</b> and <b>tcp_expect</b> use the shell&rsquo;s
<b>SECONDS</b> parameter for their own timing purposes. If
that parameter is not of floating point type on entry to one
of the functions, it will create a local parameter
<b>SECONDS</b> which is floating point and set the parameter
<b>TCP_SECONDS_START</b> to the previous value of
<b>$SECONDS</b>. If the parameter is already floating point,
it is used without a local copy being created and
<b>TCP_SECONDS_START</b> is not set. As the global value is
zero, the shell elapsed time is guaranteed to be the sum of
<b>$SECONDS</b> and <b>$TCP_SECONDS_START</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
avoided by setting <b>SECONDS</b> globally to a floating
point value using &lsquo;<b>typeset &minus;F
SECONDS</b>&rsquo;; then the TCP functions will never make a
local copy and never set <b>TCP_SECONDS_START</b> to a
non&minus;zero value.</p>

<p style="margin-left:11%;"><b>TCP_SESS</b></p>

<p style="margin-left:22%;">May be set directly. The
current session; must refer to one of the sessions
established by <b>tcp_open</b>.</p>

<p style="margin-left:11%;"><b>TCP_SILENT</b></p>

<p style="margin-left:22%;">May be set directly, although
it is also controlled by <b>tcp_log</b>. If of
non&minus;zero length, data read by <b>tcp_read</b> will not
be written to standard output, though may still be written
to a log file.</p>

<p style="margin-left:11%;"><b>tcp_spam_list</b></p>

<p style="margin-left:22%;">Array. May be set directly. See
the description of the function <b>tcp_spam</b> for how this
is used.</p>

<p style="margin-left:11%;"><b>TCP_TALK_ESCAPE</b></p>

<p style="margin-left:22%;">May be set directly. See the
description of the function <b>tcp_talk</b> for how this is
used.</p>

<p style="margin-left:11%;"><b>TCP_TIMEOUT</b></p>

<p style="margin-left:22%;">May be set directly. Currently
this is only used by the function <b>tcp_command</b>, see
above.</p>

<h2>TCP USER&minus;DEFINED PARAMETERS
<a name="TCP USER&minus;DEFINED PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
parameters are not set by the function system, but have a
special effect if set by the user. <b><br>
tcp_on_read</b></p>

<p style="margin-left:22%;">This should be an associative
array; if it is not, the behaviour is undefined. Each key is
the name of a shell function or other command, and the
corresponding value is a shell pattern (using
<b>EXTENDED_GLOB</b>). Every line read from a TCP session
directly or indirectly using <b>tcp_read</b> (which includes
lines read by <b>tcp_expect</b>) is compared against the
pattern. If the line matches, the command given in the key
is called with two arguments: the name of the session from
which the line was read, and the line itself.</p>

<p style="margin-left:22%; margin-top: 1em">If any function
called to handle a line returns a non&minus;zero status, the
line is not output. Thus a <b>tcp_on_read</b> handler
containing only the instruction &lsquo;<b>return
1</b>&rsquo; can be used to suppress output of particular
lines (see, however, <b>tcp_filter</b> above). However, the
line is still stored in <b>TCP_LINE</b> and
<b>tcp_lines</b>; this occurs after all <b>tcp_on_read</b>
processing.</p>

<h2>TCP UTILITY PARAMETERS
<a name="TCP UTILITY PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
parameters are controlled by the function system; they may
be read directly, but should not usually be set by user
code. <b><br>
tcp_aliases</b></p>

<p style="margin-left:22%;">Associative array. The keys are
the names of sessions established with <b>tcp_open</b>; each
value is a space&minus;separated list of aliases which refer
to that session.</p>

<p style="margin-left:11%;"><b>tcp_by_fd</b></p>

<p style="margin-left:22%;">Associative array. The keys are
session file descriptors; each value is the name of that
session.</p>

<p style="margin-left:11%;"><b>tcp_by_name</b></p>

<p style="margin-left:22%;">Associative array. The keys are
the names of sessions; each value is the file descriptor
associated with that session.</p>

<h2>TCP EXAMPLES
<a name="TCP EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is a
trivial example using a remote calculator.</p>

<p style="margin-left:11%; margin-top: 1em">TO create a
calculator server on port 7337 (see the <b>dc</b> manual
page for quite how infuriating the underlying command
is):</p>

<p style="margin-left:22%; margin-top: 1em"><b>tcp_proxy
7337 dc</b></p>

<p style="margin-left:11%; margin-top: 1em">To connect to
this from the same host with a session also named
&lsquo;<b>dc</b>&rsquo;:</p>

<p style="margin-left:22%; margin-top: 1em"><b>tcp_open
localhost 7337 dc</b></p>

<p style="margin-left:11%; margin-top: 1em">To send a
command to the remote session and wait a short while for
output (assuming <b>dc</b> is the current session):</p>

<p style="margin-left:22%; margin-top: 1em"><b>tcp_command
2 4 + p</b></p>

<p style="margin-left:11%; margin-top: 1em">To close the
session:</p>


<p style="margin-left:22%; margin-top: 1em"><b>tcp_close</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>tcp_proxy</b> needs to be killed to be stopped. Note this
will not usually kill any connections which have already
been accepted, and also that the port is not immediately
available for reuse.</p>

<p style="margin-left:11%; margin-top: 1em">The following
chunk of code puts a list of sessions into an xterm header,
with the current session followed by a star.</p>

<p style="margin-left:22%; margin-top: 1em"><b>print
&minus;n &quot;\033]2;TCP:&quot;
${(k)tcp_by_name:/$TCP_SESS/$TCP_SESS\*}
&quot;\a&quot;</b></p>

<h2>TCP BUGS
<a name="TCP BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The function
<b>tcp_read</b> uses the shell&rsquo;s normal <b>read</b>
builtin. As this reads a complete line at once, data
arriving without a terminating newline can cause the
function to block indefinitely.</p>

<p style="margin-left:11%; margin-top: 1em">Though the
function suite works well for interactive use and for data
arriving in small amounts, the performance when large
amounts of data are being exchanged is likely to be
extremely poor.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshzftpsys &minus; zftp
function front&minus;end</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This describes
the set of shell functions supplied with the source
distribution as an interface to the <b>zftp</b> builtin
command, allowing you to perform FTP operations from the
shell command line or within functions or scripts. The
interface is similar to a traditional FTP client (e.g. the
<b>ftp</b> command itself, see <i>ftp</i>(1)), but as it is
entirely done within the shell all the familiar completion,
editing and globbing features, and so on, are present, and
macros are particularly simple to write as they are just
ordinary shell functions.</p>

<p style="margin-left:11%; margin-top: 1em">The
prerequisite is that the <b>zftp</b> command, as described
in <i>zshmodules</i>(1) , must be available in the version
of <b>zsh</b> installed at your site. If the shell is
configured to load new commands at run time, it probably is:
typing &lsquo;<b>zmodload zsh/zftp</b>&rsquo; will make sure
(if that runs silently, it has worked). If this is not the
case, it is possible <b>zftp</b> was linked into the shell
anyway: to test this, type &lsquo;<b>which zftp</b>&rsquo;
and if <b>zftp</b> is available you will get the message
&lsquo;<b>zftp: shell built&minus;in command</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Commands given
directly with <b>zftp</b> builtin may be interspersed
between the functions in this suite; in a few cases, using
<b>zftp</b> directly may cause some of the status
information stored in shell parameters to become invalid.
Note in particular the description of the variables
<b>$ZFTP_TMOUT</b>, <b>$ZFTP_PREFS</b> and
<b>$ZFTP_VERBOSE</b> for <b>zftp</b>.</p>

<h2>INSTALLATION
<a name="INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You should make
sure all the functions from the <b>Functions/Zftp</b>
directory of the source distribution are available; they all
begin with the two letters &lsquo;<b>zf</b>&rsquo;. They may
already have been installed on your system; otherwise, you
will need to find them and copy them. The directory should
appear as one of the elements of the <b>$fpath</b> array
(this should already be the case if they were installed),
and at least the function <b>zfinit</b> should be
autoloaded; it will autoload the rest. Finally, to
initialize the use of the system you need to call the
<b>zfinit</b> function. The following code in your
<b>.zshrc</b> will arrange for this; assume the functions
are stored in the directory <b>~/myfns</b>:</p>


<p style="margin-left:22%; margin-top: 1em"><b>fpath=(~/myfns
$fpath) <br>
autoload &minus;U zfinit <br>
zfinit</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that
<b>zfinit</b> assumes you are using the <b>zmodload</b>
method to load the <b>zftp</b> command. If it is already
built into the shell, change <b>zfinit</b> to <b>zfinit
&minus;n</b>. It is helpful (though not essential) if the
call to <b>zfinit</b> appears after any code to initialize
the new completion system, else unnecessary <b>compctl</b>
commands will be given.</p>

<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The sequence of
operations in performing a file transfer is essentially the
same as that in a standard FTP client. Note that, due to a
quirk of the shell&rsquo;s <b>getopts</b> builtin, for those
functions that handle options you must use
&lsquo;<b>&minus;&minus;</b>&rsquo; rather than
&lsquo;<b>&minus;</b>&rsquo; to ensure the remaining
arguments are treated literally (a single
&lsquo;<b>&minus;</b>&rsquo; is treated as an argument).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Opening a
connection <br>
zfparams [</b> <i>host</i> <b>[</b> <i>user</i> <b>[</b>
<i>password</i> <b>... ] ] ]</b></p>

<p style="margin-left:22%;">Set or show the parameters for
a future <b>zfopen</b> with no arguments. If no arguments
are given, the current parameters are displayed (the
password will be shown as a line of asterisks). If a host is
given, and either the <i>user</i> or <i>password</i> is not,
they will be prompted for; also, any parameter given as
&lsquo;<b>?</b>&rsquo; will be prompted for, and if the
&lsquo;<b>?</b>&rsquo; is followed by a string, that will be
used as the prompt. As <b>zfopen</b> calls <b>zfparams</b>
to store the parameters, this usually need not be called
directly.</p>

<p style="margin-left:22%; margin-top: 1em">A single
argument &lsquo;<b>&minus;</b>&rsquo; will delete the stored
parameters. This will also cause the memory of the last
directory (and so on) on the other host to be deleted.</p>

<p style="margin-left:11%;"><b>zfopen [ &minus;1 ] [</b>
<i>host</i> <b>[</b> <i>user</i> <b>[</b> <i>password</i>
<b>[</b> <i>account</i> <b>] ] ] ]</b></p>

<p style="margin-left:22%;">If <i>host</i> is present, open
a connection to that host under username <i>user</i> with
password <i>password</i> (and, on the rare occasions when it
is necessary, account <i>account</i>). If a necessary
parameter is missing or given as &lsquo;<b>?</b>&rsquo; it
will be prompted for. If <i>host</i> is not present, use a
previously stored set of parameters.</p>

<p style="margin-left:22%; margin-top: 1em">If the command
was successful, and the terminal is compatible with
<b>xterm</b> or is <b>sun&minus;cmd</b>, a summary will
appear in the title bar, giving the local
<b>host:directory</b> and the remote <b>host:directory</b>;
this is handled by the function <b>zftp_chpwd</b>, described
below.</p>

<p style="margin-left:22%; margin-top: 1em">Normally, the
<i>host</i>, <i>user</i> and <i>password</i> are internally
recorded for later re&minus;opening, either by a
<b>zfopen</b> with no arguments, or automatically (see
below). With the option &lsquo;<b>&minus;1</b>&rsquo;, no
information is stored. Also, if an open command with
arguments failed, the parameters will not be retained (and
any previous parameters will also be deleted). A
<b>zfopen</b> on its own, or a <b>zfopen &minus;1</b>, never
alters the stored parameters.</p>

<p style="margin-left:22%; margin-top: 1em">Both
<b>zfopen</b> and <b>zfanon</b> (but not <b>zfparams</b>)
understand URLs of the form
<b>ftp://</b><i>host</i>/<i>path...</i> as meaning to
connect to the <i>host</i>, then change directory to
<i>path</i> (which must be a directory, not a file). The
&lsquo;<b>ftp://</b>&rsquo; can be omitted; the trailing
&lsquo;<b>/</b>&rsquo; is enough to trigger recognition of
the <i>path</i>. Note prefixes other than
&lsquo;<b>ftp:</b>&rsquo; are not recognized, and that all
characters after the first slash beyond <i>host</i> are
significant in <i>path</i>.</p>

<p style="margin-left:11%;"><b>zfanon [ &minus;1 ]</b>
<i>host</i></p>

<p style="margin-left:22%;">Open a connection <i>host</i>
for anonymous FTP. The username used is
&lsquo;<b>anonymous</b>&rsquo;. The password (which will be
reported the first time) is generated as
<i>user</i><b>@</b><i>host</i>; this is then stored in the
shell parameter <b>$EMAIL_ADDR</b> which can alternatively
be set manually to a suitable string.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Directory
management <br>
zfcd [</b> <i>dir</i> <b>]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>zfcd &minus;</b></p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>zfcd</b> <i>old new</i></p>

<p style="margin-left:22%;">Change the current directory on
the remote server: this is implemented to have many of the
features of the shell builtin <b>cd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In the first
form with <i>dir</i> present, change to the directory
<i>dir</i>. The command &lsquo;<b>zfcd ..</b>&rsquo; is
treated specially, so is guaranteed to work on
non&minus;UNIX servers (note this is handled internally by
<b>zftp</b>). If <i>dir</i> is omitted, has the effect of
&lsquo;<b>zfcd ~</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The second form
changes to the directory previously current.</p>

<p style="margin-left:22%; margin-top: 1em">The third form
attempts to change the current directory by replacing the
first occurrence of the string <i>old</i> with the string
<i>new</i> in the current directory.</p>

<p style="margin-left:22%; margin-top: 1em">Note that in
this command, and indeed anywhere a remote filename is
expected, the string which on the local host corresponds to
&lsquo;<b>~</b>&rsquo; is converted back to a
&lsquo;<b>~</b>&rsquo; before being passed to the remote
machine. This is convenient because of the way expansion is
performed on the command line before <b>zfcd</b> receives a
string. For example, suppose the command is &lsquo;<b>zfcd
~/foo</b>&rsquo;. The shell will expand this to a full path
such as &lsquo;<b>zfcd /home/user2/pws/foo</b>&rsquo;. At
this stage, <b>zfcd</b> recognises the initial path as
corresponding to &lsquo;<b>~</b>&rsquo; and will send the
directory to the remote host as <b>~/foo</b>, so that the
&lsquo;<b>~</b>&rsquo; will be expanded by the server to the
correct remote host directory. Other named directories of
the form &lsquo;<b>~name</b>&rsquo; are not treated in this
fashion.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>zfhere</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Change directory on the remote server to the one
corresponding to the current local directory, with special
handling of &lsquo;<b>~</b>&rsquo; as in <b>zfcd</b>. For
example, if the current local directory is <b>~/foo/bar</b>,
then <b>zfhere</b> performs the effect of &lsquo;<b>zfcd
~/foo/bar</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>zfdir [ &minus;rfd ] [
&minus; ] [</b> <i>dir&minus;options</i> <b>] [</b>
<i>dir</i> <b>]</b></p>

<p style="margin-left:22%;">Produce a long directory
listing. The arguments <i>dir&minus;options</i> and
<i>dir</i> are passed directly to the server and their
effect is implementation dependent, but specifying a
particular remote directory <i>dir</i> is usually possible.
The output is passed through a pager given by the
environment variable <b>$PAGER</b>, or
&lsquo;<b>more</b>&rsquo; if that is not set.</p>

<p style="margin-left:22%; margin-top: 1em">The directory
is usually cached for re&minus;use. In fact, two caches are
maintained. One is for use when there is no
<i>dir&minus;options</i> or <i>dir</i>, i.e. a full listing
of the current remote directory; it is flushed when the
current remote directory changes. The other is kept for
repeated use of <b>zfdir</b> with the same arguments; for
example, repeated use of &lsquo;<b>zfdir /pub/gnu</b>&rsquo;
will only require the directory to be retrieved on the first
call. Alternatively, this cache can be re&minus;viewed with
the <b>&minus;r</b> option. As relative directories will
confuse <b>zfdir</b>, the <b>&minus;f</b> option can be used
to force the cache to be flushed before the directory is
listed. The option <b>&minus;d</b> will delete both caches
without showing a directory listing; it will also delete the
cache of file names in the current remote directory, if
any.</p>

<p style="margin-left:11%;"><b>zfls</b> [
<i>ls&minus;options</i> ] [ <i>dir</i> ]</p>

<p style="margin-left:22%;">List files on the remote
server. With no arguments, this will produce a simple list
of file names for the current remote directory. Any
arguments are passed directly to the server. No pager and no
caching is used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Status
commands <br>
zftype</b> [ <i>type</i> ]</p>

<p style="margin-left:22%;">With no arguments, show the
type of data to be transferred, usually ASCII or binary.
With an argument, change the type: the types
&lsquo;<b>A</b>&rsquo; or &lsquo;<b>ASCII</b>&rsquo; for
ASCII data and &lsquo;<b>B</b>&rsquo; or
&lsquo;<b>BINARY</b>&rsquo;, &lsquo;<b>I</b>&rsquo; or
&lsquo;<b>IMAGE</b>&rsquo; for binary data are understood
case&minus;insensitively.</p>

<p style="margin-left:11%;"><b>zfstat</b> [ &minus;v ]</p>

<p style="margin-left:22%;">Show the status of the current
or last connection, as well as the status of some of
<b>zftp</b>&rsquo;s status variables. With the
<b>&minus;v</b> option, a more verbose listing is produced
by querying the server for its version of events, too.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Retrieving
files</b> <br>
The commands for retrieving files all take at least two
options. <b>&minus;G</b> suppresses remote filename
expansion which would otherwise be performed (see below for
a more detailed description of that). <b>&minus;t</b>
attempts to set the modification time of the local file to
that of the remote file: see the description of the function
<b>zfrtime</b> below for more information. <b><br>
zfget [ &minus;Gtc ]</b> <i>file1</i> <b>...</b></p>

<p style="margin-left:22%;">Retrieve all the listed files
<i>file1</i> ... one at a time from the remote server. If a
file contains a &lsquo;<b>/</b>&rsquo;, the full name is
passed to the remote server, but the file is stored locally
under the name given by the part after the final
&lsquo;<b>/</b>&rsquo;. The option <b>&minus;c</b> (cat)
forces all files to be sent as a single stream to standard
output; in this case the <b>&minus;t</b> option has no
effect.</p>

<p style="margin-left:11%;"><b>zfuget [ &minus;Gvst ]</b>
<i>file1</i> <b>...</b></p>

<p style="margin-left:22%;">As <b>zfget</b>, but only
retrieve files where the version on the remote server is
newer (has a later modification time), or where the local
file does not exist. If the remote file is older but the
files have different sizes, or if the sizes are the same but
the remote file is newer, the user will usually be queried.
With the option <b>&minus;s</b>, the command runs silently
and will always retrieve the file in either of those two
cases. With the option <b>&minus;v</b>, the command prints
more information about the files while it is working out
whether or not to transfer them.</p>

<p style="margin-left:11%;"><b>zfcget [ &minus;Gt ]</b>
<i>file1</i> <b>...</b></p>

<p style="margin-left:22%;">As <b>zfget</b>, but if any of
the local files exists, and is shorter than the
corresponding remote file, the command assumes that it is
the result of a partially completed transfer and attempts to
transfer the rest of the file. This is useful on a poor
connection which keeps failing.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
requires a commonly implemented, but non&minus;standard,
version of the FTP protocol, so is not guaranteed to work on
all servers.</p>

<p style="margin-left:11%;"><b>zfgcp [ &minus;Gt ]</b>
<i>remote&minus;file local&minus;file</i> <b><br>
zfgcp [ &minus;Gt ]</b> <i>rfile1</i> <b>...</b>
<i>ldir</i></p>

<p style="margin-left:22%;">This retrieves files from the
remote server with arguments behaving similarly to the
<b>cp</b> command.</p>

<p style="margin-left:22%; margin-top: 1em">In the first
form, copy <i>remote&minus;file</i> from the server to the
local file <i>local&minus;file</i>.</p>

<p style="margin-left:22%; margin-top: 1em">In the second
form, copy all the remote files <i>rfile1</i> ... into the
local directory <i>ldir</i> retaining the same basenames.
This assumes UNIX directory semantics.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Sending
files <br>
zfput [ &minus;r ]</b> <i>file1</i> <b>...</b></p>

<p style="margin-left:22%;">Send all the <i>file1</i> ...
given separately to the remote server. If a filename
contains a &lsquo;<b>/</b>&rsquo;, the full filename is used
locally to find the file, but only the basename is used for
the remote file name.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;r</b>, if any of the <i>files</i> are directories
they are sent recursively with all their subdirectories,
including files beginning with &lsquo;<b>.</b>&rsquo;. This
requires that the remote machine understand UNIX file
semantics, since &lsquo;<b>/</b>&rsquo; is used as a
directory separator.</p>

<p style="margin-left:11%;"><b>zfuput [ &minus;vs ]</b>
<i>file1</i> <b>...</b></p>

<p style="margin-left:22%;">As <b>zfput</b>, but only send
files which are newer than their local equivalents, or if
the remote file does not exist. The logic is the same as for
<b>zfuget</b>, but reversed between local and remote
files.</p>

<p style="margin-left:11%;"><b>zfcput</b> <i>file1</i>
<b>...</b></p>

<p style="margin-left:22%;">As <b>zfput</b>, but if any
remote file already exists and is shorter than the local
equivalent, assume it is the result of an incomplete
transfer and send the rest of the file to append to the
existing part. As the FTP append command is part of the
standard set, this is in principle more likely to work than
<b>zfcget</b>.</p>

<p style="margin-left:11%;"><b>zfpcp</b>
<i>local&minus;file remote&minus;file</i> <b><br>
zfpcp</b> <i>lfile1</i> <b>...</b> <i>rdir</i></p>

<p style="margin-left:22%;">This sends files to the remote
server with arguments behaving similarly to the <b>cp</b>
command.</p>

<p style="margin-left:22%; margin-top: 1em">With two
arguments, copy <i>local&minus;file</i> to the server as
<i>remote&minus;file</i>.</p>

<p style="margin-left:22%; margin-top: 1em">With more than
two arguments, copy all the local files <i>lfile1</i> ...
into the existing remote directory <i>rdir</i> retaining the
same basenames. This assumes UNIX directory semantics.</p>

<p style="margin-left:22%; margin-top: 1em">A problem
arises if you attempt to use <b>zfpcp</b> <i>lfile1
rdir</i>, i.e. the second form of copying but with two
arguments, as the command has no simple way of knowing if
<i>rdir</i> corresponds to a directory or a filename. It
attempts to resolve this in various ways. First, if the
<i>rdir</i> argument is &lsquo;<b>.</b>&rsquo; or
&lsquo;<b>..</b>&rsquo; or ends in a slash, it is assumed to
be a directory. Secondly, if the operation of copying to a
remote file in the first form failed, and the remote server
sends back the expected failure code 553 and a reply
including the string &lsquo;<b>Is a directory</b>&rsquo;,
then <b>zfpcp</b> will retry using the second form.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Closing the
connection <br>
zfclose</b></p>

<p style="margin-left:22%;">Close the connection.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Session
management <br>
zfsession</b> [ <b>&minus;lvod</b> ] [ <i>sessname</i> ]</p>

<p style="margin-left:22%;">Allows you to manage multiple
FTP sessions at once. By default, connections take place in
a session called &lsquo;<b>default</b>&rsquo;; by giving the
command &lsquo;<b>zfsession</b> <i>sessname</i>&rsquo; you
can change to a new or existing session with a name of your
choice. The new session remembers its own connection, as
well as associated shell parameters, and also the host/user
parameters set by <b>zfparams</b>. Hence you can have
different sessions set up to connect to different hosts,
each remembering the appropriate host, user and
password.</p>

<p style="margin-left:22%; margin-top: 1em">With no
arguments, <b>zfsession</b> prints the name of the current
session; with the option <b>&minus;l</b> it lists all
sessions which currently exist, and with the option
<b>&minus;v</b> it gives a verbose list showing the host and
directory for each session, where the current session is
marked with an asterisk. With <b>&minus;o</b>, it will
switch to the most recent previous session.</p>

<p style="margin-left:22%; margin-top: 1em">With
<b>&minus;d</b>, the given session (or else the current one)
is removed; everything to do with it is completely
forgotten. If it was the only session, a new session called
&lsquo;<b>default</b>&rsquo; is created and made current. It
is safest not to delete sessions while background commands
using <b>zftp</b> are active.</p>

<p style="margin-left:11%;"><b>zftransfer</b>
<i>sess1</i><b>:</b><i>file1
sess2</i><b>:</b><i>file2</i></p>

<p style="margin-left:22%;">Transfer files between two
sessions; no local copy is made. The file is read from the
session <i>sess1</i> as <i>file1</i> and written to session
<i>sess2</i> as file <i>file2</i>; <i>file1</i> and
<i>file2</i> may be relative to the current directories of
the session. Either <i>sess1</i> or <i>sess2</i> may be
omitted (though the colon should be retained if there is a
possibility of a colon appearing in the file name) and
defaults to the current session; <i>file2</i> may be omitted
or may end with a slash, in which case the basename of
<i>file1</i> will be added. The sessions <i>sess1</i> and
<i>sess2</i> must be distinct.</p>

<p style="margin-left:22%; margin-top: 1em">The operation
is performed using pipes, so it is required that the
connections still be valid in a subshell, which is not the
case under versions of some operating systems, presumably
due to a system bug.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Bookmarks</b>
<br>
The two functions <b>zfmark</b> and <b>zfgoto</b> allow you
to &lsquo;bookmark&rsquo; the present location (host, user
and directory) of the current FTP connection for later use.
The file to be used for storing and retrieving bookmarks is
given by the parameter <b>$ZFTP_BMFILE</b>; if not set when
one of the two functions is called, it will be set to the
file <b>.zfbkmarks</b> in the directory where your zsh
startup files live (usually <b>~</b>). <b><br>
zfmark [</b> <i>bookmark</i> <b>]</b></p>

<p style="margin-left:22%;">If given an argument, mark the
current host, user and directory under the name
<i>bookmark</i> for later use by <b>zfgoto</b>. If there is
no connection open, use the values for the last connection
immediately before it was closed; it is an error if there
was none. Any existing bookmark under the same name will be
silently replaced.</p>

<p style="margin-left:22%; margin-top: 1em">If not given an
argument, list the existing bookmarks and the points to
which they refer in the form
<i>user</i><b>@</b><i>host</i><b>:</b><i>directory</i>; this
is the format in which they are stored, and the file may be
edited directly.</p>

<p style="margin-left:11%;"><b>zfgoto [ &minus;n ]</b>
<i>bookmark</i></p>

<p style="margin-left:22%;">Return to the location given by
<i>bookmark</i>, as previously set by <b>zfmark</b>. If the
location has user &lsquo;<b>ftp</b>&rsquo; or
&lsquo;<b>anonymous</b>&rsquo;, open the connection with
<b>zfanon</b>, so that no password is required. If the user
and host parameters match those stored for the current
session, if any, those will be used, and again no password
is required. Otherwise a password will be prompted for.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;n</b>, the bookmark is taken to be a nickname
stored by the <b>ncftp</b> program in its bookmark file,
which is assumed to be <b>~/.ncftp/bookmarks</b>. The
function works identically in other ways. Note that there is
no mechanism for adding or modifying <b>ncftp</b> bookmarks
from the zftp functions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Other
functions</b> <br>
Mostly, these functions will not be called directly (apart
from <b>zfinit</b>), but are described here for
completeness. You may wish to alter <b>zftp_chpwd</b> and
<b>zftp_progress</b>, in particular. <b><br>
zfinit [ &minus;n ]</b></p>

<p style="margin-left:22%;">As described above, this is
used to initialize the zftp function system. The
<b>&minus;n</b> option should be used if the zftp command is
already built into the shell.</p>

<p style="margin-left:11%;"><b>zfautocheck [ &minus;dn
]</b></p>

<p style="margin-left:22%;">This function is called to
implement automatic reopening behaviour, as described in
more detail below. The options must appear in the first
argument; <b>&minus;n</b> prevents the command from changing
to the old directory, while <b>&minus;d</b> prevents it from
setting the variable <b>do_close</b>, which it otherwise
does as a flag for automatically closing the connection
after a transfer. The host and directory for the last
session are stored in the variable <b>$zflastsession</b>,
but the internal host/user/password parameters must also be
correctly set.</p>

<p style="margin-left:11%;"><b>zfcd_match</b> <i>prefix
suffix</i></p>

<p style="margin-left:22%;">This performs matching for
completion of remote directory names. If the remote server
is UNIX, it will attempt to persuade the server to list the
remote directory with subdirectories marked, which usually
works but is not guaranteed. On other hosts it simply calls
<b>zfget_match</b> and hence completes all files, not just
directories. On some systems, directories may not even look
like filenames.</p>

<p style="margin-left:11%;"><b>zfget_match</b> <i>prefix
suffix</i></p>

<p style="margin-left:22%;">This performs matching for
completion of remote filenames. It caches files for the
current directory (only) in the shell parameter
<b>$zftp_fcache</b>. It is in the form to be called by the
<b>&minus;K</b> option of <b>compctl</b>, but also works
when called from a widget&minus;style completion function
with <i>prefix</i> and <i>suffix</i> set appropriately.</p>

<p style="margin-left:11%;"><b>zfrglob</b>
<i>varname</i></p>

<p style="margin-left:22%;">Perform remote globbing, as
describes in more detail below. <i>varname</i> is the name
of a variable containing the pattern to be expanded; if
there were any matches, the same variable will be set to the
expanded set of filenames on return.</p>

<p style="margin-left:11%;"><b>zfrtime</b> <i>lfile
rfile</i> <b>[</b> <i>time</i> <b>]</b></p>

<p style="margin-left:22%;">Set the local file <i>lfile</i>
to have the same modification time as the remote file
<i>rfile</i>, or the explicit time <i>time</i> in FTP format
<b>CCYYMMDDhhmmSS</b> for the GMT timezone. This uses the
shell&rsquo;s <b>zsh/datetime</b> module to perform the
conversion from GMT to local time.</p>

<p style="margin-left:11%;"><b>zftp_chpwd</b></p>

<p style="margin-left:22%;">This function is called every
time a connection is opened, or closed, or the remote
directory changes. This version alters the title bar of an
<b>xterm</b>&minus;compatible or <b>sun&minus;cmd</b>
terminal emulator to reflect the local and remote hostnames
and current directories. It works best when combined with
the function <b>chpwd</b>. In particular, a function of the
form</p>

<p style="margin-left:32%; margin-top: 1em"><b>chpwd() {
<br>
if [[ &minus;n $ZFTP_USER ]]; then <br>
zftp_chpwd <br>
else <br>
# usual chpwd e.g put host:directory in title bar <br>
fi <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">fits in
well.</p>

<p style="margin-left:11%;"><b>zftp_progress</b></p>

<p style="margin-left:22%;">This function shows the status
of the transfer. It will not write anything unless the
output is going to a terminal; however, if you transfer
files in the background, you should turn off progress
reports by hand using &lsquo;<b>zstyle &rsquo;:zftp:*&rsquo;
progress none</b>&rsquo;. Note also that if you alter it,
any output <i>must</i> be to standard error, as standard
output may be a file being received. The form of the
progress meter, or whether it is used at all, can be
configured without altering the function, as described in
the next section.</p>

<p style="margin-left:11%;"><b>zffcache</b></p>

<p style="margin-left:22%;">This is used to implement
caching of files in the current directory for each session
separately. It is used by <b>zfget_match</b> and
<b>zfrglob</b>.</p>

<h2>MISCELLANEOUS FEATURES
<a name="MISCELLANEOUS FEATURES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
Various styles are available using the standard shell style
mechanism, described in <i>zshmodules</i>(1). Briefly, the
command &lsquo;<b>zstyle &rsquo;:zftp:*&rsquo;</b> <i>style
value</i> ...&rsquo;. defines the <i>style</i> to have value
<i>value</i>; more than one value may be given, although
that is not useful in the cases described here. These values
will then be used throughout the zftp function system. For
more precise control, the first argument, which gives a
context in which the style applies, can be modified to
include a particular function, as for example
&lsquo;<b>:zftp:zfget</b>&rsquo;: the style will then have
the given value only in the <b>zfget</b> function. Values
for the same style in different contexts may be set; the
most specific function will be used, where strings are held
to be more specific than patterns, and longer patterns and
shorter patterns. Note that only the top level function
name, as called by the user, is used; calling of lower level
functions is transparent to the user. Hence modifications to
the title bar in <b>zftp_chpwd</b> use the contexts
<b>:zftp:zfopen</b>, <b>:zftp:zfcd</b>, etc., depending
where it was called from. The following styles are
understood: <b><br>
progress</b></p>

<p style="margin-left:22%;">Controls the way that
<b>zftp_progress</b> reports on the progress of a transfer.
If empty, unset, or &lsquo;<b>none</b>&rsquo;, no progress
report is made; if &lsquo;<b>bar</b>&rsquo; a growing bar of
inverse video is shown; if &lsquo;<b>percent</b>&rsquo; (or
any other string, though this may change in future), the
percentage of the file transferred is shown. The bar meter
requires that the width of the terminal be available via the
<b>$COLUMNS</b> parameter (normally this is set
automatically). If the size of the file being transferred is
not available, <b>bar</b> and <b>percent</b> meters will
simply show the number of bytes transferred so far.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>zfinit</b> is run, if this style is not defined for the
context <b>:zftp:*</b>, it will be set to
&lsquo;bar&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>update</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Specifies the minimum time interval between updates of
the progress meter in seconds. No update is made unless new
data has been received, so the actual time interval is
limited only by <b>$ZFTP_TIMEOUT</b>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">As described
for <b>progress</b>, <b>zfinit</b> will force this to
default to 1.</p>

<p style="margin-left:11%;"><b>remote&minus;glob</b></p>

<p style="margin-left:22%;">If set to &lsquo;1&rsquo;,
&lsquo;yes&rsquo; or &lsquo;true&rsquo;, filename generation
(globbing) is performed on the remote machine instead of by
zsh itself; see below.</p>

<p style="margin-left:11%;"><b>titlebar</b></p>

<p style="margin-left:22%;">If set to &lsquo;1&rsquo;,
&lsquo;yes&rsquo; or &lsquo;true&rsquo;, <b>zftp_chpwd</b>
will put the remote host and remote directory into the
titlebar of terminal emulators such as xterm or
sun&minus;cmd that allow this.</p>

<p style="margin-left:22%; margin-top: 1em">As described
for <b>progress</b>, <b>zfinit</b> will force this to
default to 1.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>chpwd</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>If set to &lsquo;1&rsquo; &lsquo;yes&rsquo; or
&lsquo;true&rsquo;, <b>zftp_chpwd</b> will call the function
<b>chpwd</b> when a connection is closed. This is useful if
the remote host details were put into the terminal title bar
by <b>zftp_chpwd</b> and your usual <b>chpwd</b> also
modifies the title bar.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">When
<b>zfinit</b> is run, it will determine whether <b>chpwd</b>
exists and if so it will set the default value for the style
to 1 if none exists already.</p>

<p style="margin-left:11%; margin-top: 1em">Note that there
is also an associative array <b>zfconfig</b> which contains
values used by the function system. This should not be
modified or overwritten.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Remote
globbing</b> <br>
The commands for retrieving files usually perform filename
generation (globbing) on their arguments; this can be turned
off by passing the option <b>&minus;G</b> to each of the
commands. Normally this operates by retrieving a complete
list of files for the directory in question, then matching
these locally against the pattern supplied. This has the
advantage that the full range of zsh patterns (respecting
the setting of the option <b>EXTENDED_GLOB</b>) can be used.
However, it means that the directory part of a filename will
not be expanded and must be given exactly. If the remote
server does not support the UNIX directory semantics,
directory handling is problematic and it is recommended that
globbing only be used within the current directory. The list
of files in the current directory, if retrieved, will be
cached, so that subsequent globs in the same directory
without an intervening <b>zfcd</b> are much faster.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>remote&minus;glob</b> style (see above) is set, globbing
is instead performed on the remote host: the server is asked
for a list of matching files. This is highly dependent on
how the server is implemented, though typically UNIX servers
will provide support for basic glob patterns. This may in
some cases be faster, as it avoids retrieving the entire
list of directory contents.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Automatic
and temporary reopening</b> <br>
As described for the <b>zfopen</b> command, a subsequent
<b>zfopen</b> with no parameters will reopen the connection
to the last host (this includes connections made with the
<b>zfanon</b> command). Opened in this fashion, the
connection starts in the default remote directory and will
remain open until explicitly closed.</p>

<p style="margin-left:11%; margin-top: 1em">Automatic
re&minus;opening is also available. If a connection is not
currently open and a command requiring a connection is
given, the last connection is implicitly reopened. In this
case the directory which was current when the connection was
closed again becomes the current directory (unless, of
course, the command given changes it). Automatic reopening
will also take place if the connection was close by the
remote server for whatever reason (e.g. a timeout). It is
not available if the <b>&minus;1</b> option to <b>zfopen</b>
or <b>zfanon</b> was used.</p>

<p style="margin-left:11%; margin-top: 1em">Furthermore, if
the command issued is a file transfer, the connection will
be closed after the transfer is finished, hence providing a
one&minus;shot mode for transfers. This does not apply to
directory changing or listing commands; for example a
<b>zfdir</b> may reopen a connection but will leave it open.
Also, automatic closure will only ever happen in the same
command as automatic opening, i.e a <b>zfdir</b> directly
followed by a <b>zfget</b> will never close the connection
automatically.</p>

<p style="margin-left:11%; margin-top: 1em">Information
about the previous connection is given by the <b>zfstat</b>
function. So, for example, if that reports:</p>

<p style="margin-left:22%; margin-top: 1em"><b>Session:
default <br>
Not connected. <br>
Last session: ftp.bar.com:/pub/textfiles</b></p>

<p style="margin-left:11%; margin-top: 1em">then the
command <b>zfget file.txt</b> will attempt to reopen a
connection to <b>ftp.bar.com</b>, retrieve the file
<b>/pub/textfiles/file.txt</b>, and immediately close the
connection again. On the other hand, <b>zfcd ..</b> will
open the connection in the directory <b>/pub</b> and leave
it open.</p>

<p style="margin-left:11%; margin-top: 1em">Note that all
the above is local to each session; if you return to a
previous session, the connection for that session is the one
which will be reopened.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Completion</b>
<br>
Completion of local and remote files, directories, sessions
and bookmarks is supported. The older,
<b>compctl</b>&minus;style completion is defined when
<b>zfinit</b> is called; support for the new
widget&minus;based completion system is provided in the
function <b>Completion/Zsh/Command/_zftp</b>, which should
be installed with the other functions of the completion
system and hence should automatically be available.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%;">zshcontrib &minus; user
contributions to zsh</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Zsh source
distribution includes a number of items contributed by the
user community. These are not inherently a part of the
shell, and some may not be available in every zsh
installation. The most significant of these are documented
here. For documentation on other contributed items such as
shell functions, look for comments in the function source
files.</p>

<h2>UTILITIES
<a name="UTILITIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Accessing
On&minus;Line Help</b> <br>
The key sequence <b>ESC h</b> is normally bound by ZLE to
execute the <b>run&minus;help</b> widget (see
<i>zshzle</i>(1)). This invokes the <b>run&minus;help</b>
command with the command word from the current input line as
its argument. By default, <b>run&minus;help</b> is an alias
for the <b>man</b> command, so this often fails when the
command word is a shell builtin or a user&minus;defined
function. By redefining the <b>run&minus;help</b> alias, one
can improve the on&minus;line help provided by the
shell.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>helpfiles</b> utility, found in the <b>Util</b> directory
of the distribution, is a Perl program that can be used to
process the zsh manual to produce a separate help file for
each shell builtin and for many other shell features as
well. The autoloadable <b>run&minus;help</b> function, found
in <b>Functions/Misc</b>, searches for these helpfiles and
performs several other tests to produce the most complete
help possible for the command.</p>

<p style="margin-left:11%; margin-top: 1em">There may
already be a directory of help files on your system; look in
<b>/usr/share/zsh</b> or <b>/usr/local/share/zsh</b> and
subdirectories below those, or ask your system
administrator.</p>

<p style="margin-left:11%; margin-top: 1em">To create your
own help files with <b>helpfiles</b>, choose or create a
directory where the individual command help files will
reside. For example, you might choose <b>~/zsh_help</b>. If
you unpacked the zsh distribution in your home directory,
you would use the commands:</p>

<p style="margin-left:22%; margin-top: 1em"><b>mkdir
~/zsh_help <br>
cd ~/zsh_help <br>
man zshall | colcrt &minus; | \ <br>
perl ~/zsh&minus;5.0.2/Util/helpfiles</b></p>

<p style="margin-left:11%; margin-top: 1em">Next, to use
the <b>run&minus;help</b> function, you need to add lines
something like the following to your <b>.zshrc</b> or
equivalent startup file:</p>

<p style="margin-left:22%; margin-top: 1em"><b>unalias
run&minus;help <br>
autoload run&minus;help <br>
HELPDIR=~/zsh_help</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>HELPDIR</b> parameter tells <b>run&minus;help</b> where
to look for the help files. If your system already has a
help file directory installed, set <b>HELPDIR</b> to the
path of that directory instead.</p>

<p style="margin-left:11%; margin-top: 1em">Note that in
order for &lsquo;<b>autoload run&minus;help</b>&rsquo; to
work, the <b>run&minus;help</b> file must be in one of the
directories named in your <b>fpath</b> array (see
<i>zshparam</i>(1)). This should already be the case if you
have a standard zsh installation; if it is not, copy
<b>Functions/Misc/run&minus;help</b> to an appropriate
directory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Recompiling
Functions</b> <br>
If you frequently edit your zsh functions, or periodically
update your zsh installation to track the latest
developments, you may find that function digests compiled
with the <b>zcompile</b> builtin are frequently out of date
with respect to the function source files. This is not
usually a problem, because zsh always looks for the newest
file when loading a function, but it may cause slower shell
startup and function loading. Also, if a digest file is
explicitly used as an element of <b>fpath</b>, zsh
won&rsquo;t check whether any of its source files has
changed.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>zrecompile</b> autoloadable function, found in
<b>Functions/Misc</b>, can be used to keep function digests
up to date. <b><br>
zrecompile</b> [ <b>&minus;qt</b> ] [ <i>name</i> ... ]
<b><br>
zrecompile</b> [ <b>&minus;qt</b> ] <b>&minus;p</b>
<i>args</i> [ <b>&minus;&minus;</b> <i>args</i> ... ]</p>

<p style="margin-left:22%;">This tries to find <b>*.zwc</b>
files and automatically re&minus;compile them if at least
one of the original files is newer than the compiled file.
This works only if the names stored in the compiled files
are full paths or are relative to the directory that
contains the <b>.zwc</b> file.</p>

<p style="margin-left:22%; margin-top: 1em">In the first
form, each <i>name</i> is the name of a compiled file or a
directory containing <b>*.zwc</b> files that should be
checked. If no arguments are given, the directories and
<b>*.zwc</b> files in <b>fpath</b> are used.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>&minus;t</b> is given, no compilation is performed, but a
return status of zero (true) is set if there are files that
need to be re&minus;compiled and non&minus;zero (false)
otherwise. The <b>&minus;q</b> option quiets the chatty
output that describes what <b>zrecompile</b> is doing.</p>

<p style="margin-left:22%; margin-top: 1em">Without the
<b>&minus;t</b> option, the return status is zero if all
files that needed re&minus;compilation could be compiled and
non&minus;zero if compilation for at least one of the files
failed.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;p</b> option is given, the <i>args</i> are
interpreted as one or more sets of arguments for
<b>zcompile</b>, separated by
&lsquo;<b>&minus;&minus;</b>&rsquo;. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zrecompile
&minus;p \ <br>
&minus;R ~/.zshrc &minus;&minus; \ <br>
&minus;M ~/.zcompdump &minus;&minus; \ <br>
~/zsh/comp.zwc ~/zsh/Completion/*/_*</b></p>

<p style="margin-left:22%; margin-top: 1em">This compiles
<b>~/.zshrc</b> into <b>~/.zshrc.zwc</b> if that
doesn&rsquo;t exist or if it is older than <b>~/.zshrc</b>.
The compiled file will be marked for reading instead of
mapping. The same is done for <b>~/.zcompdump</b> and
<b>~/.zcompdump.zwc</b>, but this compiled file is marked
for mapping. The last line re&minus;creates the file
<b>~/zsh/comp.zwc</b> if any of the files matching the given
pattern is newer than it.</p>

<p style="margin-left:22%; margin-top: 1em">Without the
<b>&minus;p</b> option, <b>zrecompile</b> does not create
function digests that do not already exist, nor does it add
new functions to the digest.</p>

<p style="margin-left:11%; margin-top: 1em">The following
shell loop is an example of a method for creating function
digests for all functions in your <b>fpath</b>, assuming
that you have write permission to the directories:</p>

<p style="margin-left:22%; margin-top: 1em"><b>for ((i=1; i
&lt;= $#fpath; ++i)); do <br>
dir=$fpath[i] <br>
zwc=${dir:t}.zwc <br>
if [[ $dir == (.|..) || $dir == (.|..)/* ]]; then <br>
continue <br>
fi <br>
files=($dir/*(N&minus;.)) <br>
if [[ &minus;w $dir:h &amp;&amp; &minus;n $files ]]; then
<br>
files=(${${(M)files%/*/*}#/}) <br>
if ( cd $dir:h &amp;&amp; <br>
zrecompile &minus;p &minus;U &minus;z $zwc $files ); then
<br>
fpath[i]=$fpath[i].zwc <br>
fi <br>
fi <br>
done</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;U</b> and <b>&minus;z</b> options are appropriate
for functions in the default zsh installation <b>fpath</b>;
you may need to use different options for your personal
function directories.</p>

<p style="margin-left:11%; margin-top: 1em">Once the
digests have been created and your <b>fpath</b> modified to
refer to them, you can keep them up to date by running
<b>zrecompile</b> with no arguments.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Keyboard
Definition</b> <br>
The large number of possible combinations of keyboards,
workstations, terminals, emulators, and window systems makes
it impossible for zsh to have built&minus;in key bindings
for every situation. The <b>zkbd</b> utility, found in
Functions/Misc, can help you quickly create key bindings for
your configuration.</p>

<p style="margin-left:11%; margin-top: 1em">Run <b>zkbd</b>
either as an autoloaded function, or as a shell script:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zsh &minus;f
~/zsh&minus;5.0.2/Functions/Misc/zkbd</b></p>

<p style="margin-left:11%; margin-top: 1em">When you run
<b>zkbd</b>, it first asks you to enter your terminal type;
if the default it offers is correct, just press return. It
then asks you to press a number of different keys to
determine characteristics of your keyboard and terminal;
<b>zkbd</b> warns you if it finds anything out of the
ordinary, such as a Delete key that sends neither <b>^H</b>
nor <b>^?</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The keystrokes
read by <b>zkbd</b> are recorded as a definition for an
associative array named <b>key</b>, written to a file in the
subdirectory <b>.zkbd</b> within either your <b>HOME</b> or
<b>ZDOTDIR</b> directory. The name of the file is composed
from the <b>TERM</b>, <b>VENDOR</b> and <b>OSTYPE</b>
parameters, joined by hyphens.</p>

<p style="margin-left:11%; margin-top: 1em">You may read
this file into your <b>.zshrc</b> or another startup file
with the &lsquo;<b>source</b>&rsquo; or
&lsquo;<b>.</b>&rsquo; commands, then reference the
<b>key</b> parameter in bindkey commands, like this:</p>

<p style="margin-left:22%; margin-top: 1em"><b>source
${ZDOTDIR:&minus;$HOME}/.zkbd/$TERM&minus;$VENDOR&minus;$OSTYPE
<br>
[[ &minus;n ${key[Left]} ]] &amp;&amp; bindkey
&quot;${key[Left]}&quot; backward&minus;char <br>
[[ &minus;n ${key[Right]} ]] &amp;&amp; bindkey
&quot;${key[Right]}&quot; forward&minus;char <br>
# etc.</b></p>

<p style="margin-left:11%; margin-top: 1em">Note that in
order for &lsquo;<b>autoload zkbd</b>&rsquo; to work, the
<b>zkdb</b> file must be in one of the directories named in
your <b>fpath</b> array (see <i>zshparam</i>(1)). This
should already be the case if you have a standard zsh
installation; if it is not, copy <b>Functions/Misc/zkbd</b>
to an appropriate directory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Dumping
Shell State</b> <br>
Occasionally you may encounter what appears to be a bug in
the shell, particularly if you are using a beta version of
zsh or a development release. Usually it is sufficient to
send a description of the problem to one of the zsh mailing
lists (see <i>zsh</i>(1)), but sometimes one of the zsh
developers will need to recreate your environment in order
to track the problem down.</p>

<p style="margin-left:11%; margin-top: 1em">The script
named <b>reporter</b>, found in the <b>Util</b> directory of
the distribution, is provided for this purpose. (It is also
possible to <b>autoload reporter</b>, but <b>reporter</b> is
not installed in <b>fpath</b> by default.) This script
outputs a detailed dump of the shell state, in the form of
another script that can be read with &lsquo;<b>zsh
&minus;f</b>&rsquo; to recreate that state.</p>

<p style="margin-left:11%; margin-top: 1em">To use
<b>reporter</b>, read the script into your shell with the
&lsquo;<b>.</b>&rsquo; command and redirect the output into
a file:</p>

<p style="margin-left:22%; margin-top: 1em"><b>.
~/zsh&minus;5.0.2/Util/reporter &gt; zsh.report</b></p>

<p style="margin-left:11%; margin-top: 1em">You should
check the <b>zsh.report</b> file for any sensitive
information such as passwords and delete them by hand before
sending the script to the developers. Also, as the output
can be voluminous, it&rsquo;s best to wait for the
developers to ask for this information before sending
it.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
use <b>reporter</b> to dump only a subset of the shell
state. This is sometimes useful for creating startup files
for the first time. Most of the output from reporter is far
more detailed than usually is necessary for a startup file,
but the <b>aliases</b>, <b>options</b>, and <b>zstyles</b>
states may be useful because they include only changes from
the defaults. The <b>bindings</b> state may be useful if you
have created any of your own keymaps, because
<b>reporter</b> arranges to dump the keymap creation
commands as well as the bindings for every keymap.</p>

<p style="margin-left:11%; margin-top: 1em">As is usual
with automated tools, if you create a startup file with
<b>reporter</b>, you should edit the results to remove
unnecessary commands. Note that if you&rsquo;re using the
new completion system, you should <i>not</i> dump the
<b>functions</b> state to your startup files with
<b>reporter</b>; use the <b>compdump</b> function instead
(see <i>zshcompsys</i>(1)). <b><br>
reporter</b> [ <i>state</i> ... ]</p>

<p style="margin-left:22%;">Print to standard output the
indicated subset of the current shell state. The
<i>state</i> arguments may be one or more of:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>all</b></p></td>
<td width="6%"></td>
<td width="48%">


<p>Output everything listed below.</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>aliases</b></p>

<p style="margin-left:32%;">Output alias definitions.</p>

<p style="margin-left:22%;"><b>bindings</b></p>

<p style="margin-left:32%;">Output ZLE key maps and
bindings.</p>

<p style="margin-left:22%;"><b>completion</b></p>

<p style="margin-left:32%;">Output old&minus;style
<b>compctl</b> commands. New completion is covered by
<b>functions</b> and <b>zstyles</b>.</p>

<p style="margin-left:22%;"><b>functions</b></p>

<p style="margin-left:32%;">Output autoloads and function
definitions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>limits</b></p></td>
<td width="1%"></td>
<td width="34%">


<p>Output <b>limit</b> commands.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>options</b></p>

<p style="margin-left:32%;">Output <b>setopt</b>
commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>styles</b></p></td>
<td width="1%"></td>
<td width="25%">


<p>Same as <b>zstyles</b>.</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>variables</b></p>

<p style="margin-left:32%;">Output shell parameter
assignments, plus <b>export</b> commands for any environment
variables.</p>

<p style="margin-left:22%;"><b>zstyles</b></p>

<p style="margin-left:32%;">Output <b>zstyle</b>
commands.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>state</i> is omitted, <b>all</b> is assumed.</p>

<p style="margin-left:11%; margin-top: 1em">With the
exception of &lsquo;<b>all</b>&rsquo;, every <i>state</i>
can be abbreviated by any prefix, even a single letter; thus
<b>a</b> is the same as <b>aliases</b>, <b>z</b> is the same
as <b>zstyles</b>, etc.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Manipulating
Hook Functions <br>
add&minus;zsh&minus;hook</b> [&minus;dD] <i>hook
function</i></p>

<p style="margin-left:22%;">Several functions are special
to the shell, as described in the section SPECIAL FUNCTIONS,
see <i>zshmisc</i>(1), in that they are automatic called at
a specific point during shell execution. Each has an
associated array consisting of names of functions to be
called at the same point; these are so&minus;called
&lsquo;hook functions&rsquo;. The shell function
<b>add&minus;zsh&minus;hook</b> provides a simple way of
adding or removing functions from the array.</p>

<p style="margin-left:22%; margin-top: 1em"><i>hook</i> is
one of <b>chpwd</b>, <b>periodic</b>, <b>precmd</b>,
<b>preexec</b>, <b>zshaddhistory</b>, <b>zshexit</b>, or
<b>zsh_directory_name</b>, the special functions in
question. Note that <b>zsh_directory_name</b> is called in a
different way from the other functions, but may still be
manipulated as a hook.</p>


<p style="margin-left:22%; margin-top: 1em"><i>function</i>
is name of an ordinary shell function. If no options are
given this will be added to the array of functions to be
executed in the given context.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;d</b> is given, the <i>function</i> is removed
from the array of functions to be executed.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;D</b> is given, the <i>function</i> is treated as
a pattern and any matching names of functions are removed
from the array of functions to be executed.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;U</b>, <b>&minus;z</b> and <b>&minus;k</b> are
passed as arguments to <b>autoload</b> for <i>function</i>.
For functions contributed with zsh, the options
<b>&minus;Uz</b> are appropriate.</p>

<h2>REMEMBERING RECENT DIRECTORIES
<a name="REMEMBERING RECENT DIRECTORIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The function
<b>cdr</b> allows you to change the working directory to a
previous working directory from a list maintained
automatically. It is similar in concept to the directory
stack controlled by the <b>pushd</b>, <b>popd</b> and
<b>dirs</b> builtins, but is more configurable, and as it
stores all entries in files it is maintained across sessions
and (by default) between terminal emulators in the current
session. (The <b>pushd</b> directory stack is not actually
modified or used by <b>cdr</b> unless you configure it to do
so as described in the configuration section below.)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Installation</b>
<br>
The system works by means of a hook function that is called
every time the directory changes. To install the system,
autoload the required functions and use the
<b>add&minus;zsh&minus;hook</b> function described
above:</p>

<p style="margin-left:22%; margin-top: 1em"><b>autoload
&minus;Uz chpwd_recent_dirs cdr add&minus;zsh&minus;hook
<br>
add&minus;zsh&minus;hook chpwd chpwd_recent_dirs</b></p>

<p style="margin-left:11%; margin-top: 1em">Now every time
you change directly interactively, no matter which command
you use, the directory to which you change will be
remembered in most&minus;recent&minus;first order.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Use</b> <br>
All direct user interaction is via the <b>cdr</b>
function.</p>

<p style="margin-left:11%; margin-top: 1em">The argument to
cdr is a number <i>N</i> corresponding to the <i>N</i>th
most recently changed&minus;to directory. 1 is the
immediately preceding directory; the current directory is
remembered but is not offered as a destination. Note that if
you have multiple windows open 1 may refer to a directory
changed to in another window; you can avoid this by having
per&minus;terminal files for storing directory as described
for the <b>recent&minus;dirs&minus;file</b> style below.</p>

<p style="margin-left:11%; margin-top: 1em">If you set the
<b>recent&minus;dirs&minus;default</b> style described below
<b>cdr</b> will behave the same as <b>cd</b> if given a
non&minus;numeric argument, or more than one argument. The
recent directory list is updated just the same however you
change directory.</p>

<p style="margin-left:11%; margin-top: 1em">If the argument
is omitted, 1 is assumed. This is similar to
<b>pushd</b>&rsquo;s behaviour of swapping the two most
recent directories on the stack.</p>

<p style="margin-left:11%; margin-top: 1em">Completion for
the argument to <b>cdr</b> is available if compinit has been
run; menu selection is recommended, using:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:cdr:*:*&rsquo; menu selection</b></p>

<p style="margin-left:11%; margin-top: 1em">to allow you to
cycle through recent directories; the order is preserved, so
the first choice is the most recent directory before the
current one. The verbose style is also recommended to ensure
the directory is shown; this style is on by default so no
action is required unless you have changed it.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Options</b>
<br>
The behaviour of <b>cdr</b> may be modified by the following
options.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>lists the numbers and the corresponding directories in
abbreviated form (i.e. with <b>~</b> substitution
reapplied), one per line. The directories here are not
quoted (this would only be an issue if a directory name
contained a newline). This is used by the completion
system.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>sets the variable <b>reply</b> to the current set of
directories. Nothing is printed and the directory is not
changed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>allows you to edit the list of directories, one per
line. The list can be edited to any extent you like; no
sanity checking is performed. Completion is available. No
quoting is necessary (except for newlines, where I have in
any case no sympathy); directories are in unabbreviated from
and contain an absolute path, i.e. they start with <b>/</b>.
Usually the first entry should be left as the current
directory.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
Configuration is by means of the styles mechanism that
should be familiar from completion; if not, see the
description of the <b>zstyle</b> command in see
<i>zshmodules</i>(1). The context for setting styles should
be <b>&rsquo;:chpwd:*&rsquo;</b> in case the meaning of the
context is extended in future, for example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:chpwd:*&rsquo; recent&minus;dirs&minus;max 0</b></p>

<p style="margin-left:11%; margin-top: 1em">sets the value
of the <b>recent&minus;dirs&minus;max</b> style to 0. In
practice the style name is specific enough that a context of
&rsquo;*&rsquo; should be fine.</p>

<p style="margin-left:11%; margin-top: 1em">An exception is
<b>recent&minus;dirs&minus;insert</b>, which is used
exclusively by the completion system and so has the usual
completion system context
(<b>&rsquo;:completion:*&rsquo;</b> if nothing more specific
is needed), though again <b>&rsquo;*&rsquo;</b> should be
fine in practice. <b><br>
recent&minus;dirs&minus;default</b></p>

<p style="margin-left:22%;">If true, and the command is
expecting a recent directory index, and either there is more
than one argument or the argument is not an integer, then
fall through to &quot;cd&quot;. This allows the lazy to use
only one command for directory changing. Completion
recognises this, too; see recent&minus;dirs&minus;insert for
how to control completion when this option is in use.</p>


<p style="margin-left:11%;"><b>recent&minus;dirs&minus;file</b></p>

<p style="margin-left:22%;">The file where the list of
directories is saved. The default is
<b>${ZDOTDIR:&minus;$HOME}/.chpwd&minus;recent&minus;dirs</b>,
i.e. this is in your home directory unless you have set the
variable <b>ZDOTDIR</b> to point somewhere else. Directory
names are saved in <b>$&rsquo;</b><i>...</i><b>&rsquo;</b>
quoted form, so each line in the file can be supplied
directly to the shell as an argument.</p>

<p style="margin-left:22%; margin-top: 1em">The value of
this style may be an array. In this case, the first file in
the list will always be used for saving directories while
any other files are left untouched. When reading the recent
directory list, if there are fewer than the maximum number
of entries in the first file, the contents of later files in
the array will be appended with duplicates removed from the
list shown. The contents of the two files are not sorted
together, i.e. all the entries in the first file are shown
first. The special value <b>+</b> can appear in the list to
indicate the default file should be read at that point. This
allows effects like the following:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:chpwd:*&rsquo; recent&minus;dirs&minus;file \ <br>
~/.chpwd&minus;recent&minus;dirs&minus;${TTY##*/} +</b></p>

<p style="margin-left:22%; margin-top: 1em">Recent
directories are read from a file numbered according to the
terminal. If there are insufficient entries the list is
supplemented from the default file.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use <b>zstyle &minus;e</b> to make the directory
configurable at run time:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:chpwd:*&rsquo; recent&minus;dirs&minus;file
pick&minus;recent&minus;dirs&minus;file <br>
pick&minus;recent&minus;dirs&minus;file() { <br>
if [[ $PWD = ~/text/writing(|/*) ]]; then <br>
reply=(~/.chpwd&minus;recent&minus;dirs&minus;writing) <br>
else <br>
reply=(+) <br>
fi <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">In this
example, if the current directory is <b>~/text/writing</b>
or a directory under it, then use a special file for saving
recent directories, else use the default.</p>


<p style="margin-left:11%;"><b>recent&minus;dirs&minus;insert</b></p>

<p style="margin-left:22%;">Used by completion. If
<b>recent&minus;dirs&minus;default</b> is true, then setting
this to <b>true</b> causes the actual directory, rather than
its index, to be inserted on the command line; this has the
same effect as using the corresponding index, but makes the
history clearer and the line easier to edit. With this
setting, if part of an argument was already typed, normal
directory completion rather than recent directory completion
is done; this is because recent directory completion is
expected to be done by cycling through entries menu
fashion.</p>

<p style="margin-left:22%; margin-top: 1em">If the value of
the style is <b>always</b>, then only recent directories
will be completed; in that case, use the <b>cd</b> command
when you want to complete other directories.</p>

<p style="margin-left:22%; margin-top: 1em">If the value is
<b>fallback</b>, recent directories will be tried first,
then normal directory completion is performed if recent
directory completion failed to find a match.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if the
value is <b>both</b> then both sets of completions are
presented; the usual tag mechanism can be used to
distinguish results, with recent directories tagged as
<b>recent&minus;dirs</b>. Note that the recent directories
inserted are abbreviated with directory names where
appropriate.</p>


<p style="margin-left:11%;"><b>recent&minus;dirs&minus;max</b></p>

<p style="margin-left:22%;">The maximum number of
directories to save to the file. If this is zero or negative
there is no maximum. The default is 20. Note this includes
the current directory, which isn&rsquo;t offered, so the
highest number of directories you will be offered is one
less than the maximum.</p>


<p style="margin-left:11%;"><b>recent&minus;dirs&minus;prune</b></p>

<p style="margin-left:22%;">This style is an array
determining what directories should (or should not) be added
to the recent list. Elements of the array can include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>parent</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Prune parents (more accurately, ancestors) from the
recent list. If present, changing directly down by any
number of directories causes the current directory to be
overwritten. For example, changing from ~pws to
~pws/some/other/dir causes ~pws not to be left on the recent
directory stack. This only applies to direct changes to
descendant directories; earlier directories on the list are
not pruned. For example, changing from ~pws/yet/another to
~pws/some/other/dir does not cause ~pws to be pruned.</p></td></tr>
</table>


<p style="margin-left:22%;"><b>pattern:</b><i>pattern</i></p>

<p style="margin-left:32%;">Gives a zsh pattern for
directories that should not be added to the recent list (if
not already there). This element can be repeated to add
different patterns. For example,
<b>&rsquo;pattern:/tmp(|/*)&rsquo;</b> stops <b>/tmp</b> or
its descendants from being added. The <b>EXTENDED_GLOB</b>
option is always turned on for these patterns.</p>


<p style="margin-left:11%;"><b>recent&minus;dirs&minus;pushd</b></p>

<p style="margin-left:22%;">If set to true, <b>cdr</b> will
use <b>pushd</b> instead of <b>cd</b> to change the
directory, so the directory is saved on the directory stack.
As the directory stack is completely separate from the list
of files saved by the mechanism used in this file there is
no obvious reason to do this.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Use with
dynamic directory naming</b> <br>
It is possible to refer to recent directories using the
dynamic directory name syntax by using the supplied function
<b>zsh_directory_name_cdr</b> a hook:</p>

<p style="margin-left:22%; margin-top: 1em"><b>autoload
&minus;Uz add&minus;zsh&minus;hook <br>
add&minus;zsh&minus;hook &minus;Uz zsh_directory_name
zsh_directory_name_cdr</b></p>

<p style="margin-left:11%; margin-top: 1em">When this is
done, <b>~[1]</b> will refer to the most recent directory
other than $PWD, and so on. Completion after
<b>~[</b><i>...</i> also works.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Details of
directory handling</b> <br>
This section is for the curious or confused; most users will
not need to know this information.</p>

<p style="margin-left:11%; margin-top: 1em">Recent
directories are saved to a file immediately and hence are
preserved across sessions. Note currently no file locking is
applied: the list is updated immediately on interactive
commands and nowhere else (unlike history), and it is
assumed you are only going to change directory in one window
at once. This is not safe on shared accounts, but in any
case the system has limited utility when someone else is
changing to a different set of directories behind your
back.</p>

<p style="margin-left:11%; margin-top: 1em">To make this a
little safer, only directory changes instituted from the
command line, either directly or indirectly through shell
function calls (but not through subshells, evals, traps,
completion functions and the like) are saved. Shell
functions should use <b>cd &minus;q</b> or <b>pushd
&minus;q</b> to avoid side effects if the change to the
directory is to be invisible at the command line. See the
contents of the function <b>chpwd_recent_dirs</b> for more
details.</p>

<h2>GATHERING INFORMATION FROM VERSION CONTROL SYSTEMS
<a name="GATHERING INFORMATION FROM VERSION CONTROL SYSTEMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In a lot of
cases, it is nice to automatically retrieve information from
version control systems (VCSs), such as subversion, CVS or
git, to be able to provide it to the user; possibly in the
user&rsquo;s prompt. So that you can instantly tell which
branch you are currently on, for example.</p>

<p style="margin-left:11%; margin-top: 1em">In order to do
that, you may use the <b>vcs_info</b> function.</p>

<p style="margin-left:11%; margin-top: 1em">The following
VCSs are supported, showing the abbreviated name by which
they are referred to within the system: <br>
Bazaar (<b>bzr</b>)</p>


<p style="margin-left:22%;">http://bazaar&minus;vcs.org/</p>

<p style="margin-left:11%;">Codeville (<b>cdv</b>)</p>

<p style="margin-left:22%;">http://codeville.org/</p>

<p style="margin-left:11%;">Concurrent Versioning System
(<b>cvs</b>)</p>

<p style="margin-left:22%;">http://www.nongnu.org/cvs/</p>

<p style="margin-left:11%;">Darcs (<b>darcs</b>)</p>

<p style="margin-left:22%;">http://darcs.net/</p>

<p style="margin-left:11%;">Fossil (<b>fossil</b>)</p>


<p style="margin-left:22%;">http://fossil&minus;scm.org/</p>

<p style="margin-left:11%;">Git (<b>git</b>)</p>

<p style="margin-left:22%;">http://git&minus;scm.com/</p>

<p style="margin-left:11%;">GNU arch (<b>tla</b>)</p>


<p style="margin-left:22%;">http://www.gnu.org/software/gnu&minus;arch/</p>

<p style="margin-left:11%;">Mercurial (<b>hg</b>)</p>


<p style="margin-left:22%;">http://mercurial.selenic.com/</p>

<p style="margin-left:11%;">Monotone (<b>mtn</b>)</p>

<p style="margin-left:22%;">http://monotone.ca/</p>

<p style="margin-left:11%;">Perforce (<b>p4</b>)</p>

<p style="margin-left:22%;">http://www.perforce.com/</p>

<p style="margin-left:11%;">Subversion (<b>svn</b>)</p>


<p style="margin-left:22%;">http://subversion.tigris.org/</p>

<p style="margin-left:11%;">SVK (<b>svk</b>)</p>


<p style="margin-left:22%;">http://svk.bestpractical.com/</p>

<p style="margin-left:11%; margin-top: 1em">There is also
support for the patch management system <b>quilt</b>
(http://savannah.nongnu.org/projects/quilt). See <b>Quilt
Support</b> below for details.</p>

<p style="margin-left:11%; margin-top: 1em">To load
<b>vcs_info</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>autoload
&minus;Uz vcs_info</b></p>

<p style="margin-left:11%; margin-top: 1em">It can be used
in any existing prompt, because it does not require any
<b>$psvar</b> entries to be left available.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Quickstart</b>
<br>
To get this feature working quickly (including colors), you
can do the following (assuming, you loaded <b>vcs_info</b>
properly &minus; see above):</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:vcs_info:*&rsquo; actionformats \ <br>

&rsquo;%F{5}(%f%s%F{5})%F{3}&minus;%F{5}[%F{2}%b%F{3}|%F{1}%a%F{5}]%f
&rsquo; <br>
zstyle &rsquo;:vcs_info:*&rsquo; formats \ <br>
&rsquo;%F{5}(%f%s%F{5})%F{3}&minus;%F{5}[%F{2}%b%F{5}]%f
&rsquo; <br>
zstyle &rsquo;:vcs_info:(sv[nk]|bzr):*&rsquo; branchformat
&rsquo;%b%F{1}:%F{3}%r&rsquo; <br>
precmd () { vcs_info } <br>
PS1=&rsquo;%F{5}[%F{2}%n%F{5}] %F{3}%3~
${vcs_info_msg_0_}%f%# &rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">Obviously, the
last two lines are there for demonstration. You need to call
<b>vcs_info</b> from your <b>precmd</b> function. Once that
is done you need a <b>single quoted
&rsquo;${vcs_info_msg_0_}&rsquo;</b> in your prompt.</p>

<p style="margin-left:11%; margin-top: 1em">To be able to
use <b>&rsquo;${vcs_info_msg_0_}&rsquo;</b> directly in your
prompt like this, you will need to have the
<b>PROMPT_SUBST</b> option enabled.</p>

<p style="margin-left:11%; margin-top: 1em">Now call the
<b>vcs_info_printsys</b> utility from the command line:</p>

<p style="margin-left:22%; margin-top: 1em"><b>%
vcs_info_printsys <br>
## list of supported version control backends: <br>
## disabled systems are prefixed by a hash sign (#) <br>
bzr <br>
cdv <br>
cvs <br>
darcs <br>
fossil <br>
git <br>
hg <br>
mtn <br>
p4 <br>
svk <br>
svn <br>
tla <br>
## flavours (cannot be used in the enable or disable styles;
they <br>
## are enabled and disabled with their master [git&minus;svn
&minus;&gt; git]) <br>
## they *can* be used in contexts:
&rsquo;:vcs_info:git&minus;svn:*&rsquo;. <br>
git&minus;p4 <br>
git&minus;svn <br>
hg&minus;git <br>
hg&minus;hgsubversion <br>
hg&minus;hgsvn</b></p>

<p style="margin-left:11%; margin-top: 1em">You may not
want all of these because there is no point in running the
code to detect systems you do not use. So there is a way to
disable some backends altogether:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:vcs_info:*&rsquo; disable bzr cdv darcs mtn svk
tla</b></p>

<p style="margin-left:11%; margin-top: 1em">You may also
pick a few from that list and enable only those:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:vcs_info:*&rsquo; enable git cvs svn</b></p>

<p style="margin-left:11%; margin-top: 1em">If you rerun
<b>vcs_info_printsys</b> after one of these commands, you
will see the backends listed in the <b>disable</b> style (or
backends not in the <b>enable</b> style &minus; if you used
that) marked as disabled by a hash sign. That means the
detection of these systems is skipped <i>completely</i>. No
wasted time there.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration</b>
<br>
The <b>vcs_info</b> feature can be configured via
<b>zstyle</b>.</p>

<p style="margin-left:11%; margin-top: 1em">First, the
context in which we are working:</p>


<p style="margin-left:22%;"><b>:vcs_info:</b><i>vcs&minus;string</i><b>:</b><i>user&minus;context</i><b>:</b><i>repo&minus;root&minus;name</i></p>

<p style="margin-left:11%;"><i>vcs&minus;string</i></p>

<p style="margin-left:22%;">is one of: <b>git</b>,
<b>git&minus;svn</b>, <b>git&minus;p4</b>, <b>hg</b>,
<b>hg&minus;git</b>, <b>hg&minus;hgsubversion</b>,
<b>hg&minus;hgsvn</b>, <b>darcs</b>, <b>bzr</b>, <b>cdv</b>,
<b>mtn</b>, <b>svn</b>, <b>cvs</b>, <b>svk</b>, <b>tla</b>,
<b>p4</b> or <b>fossil</b>. When hooks are active the hooks
name is added after a &lsquo;+&rsquo;. (See <b>Hooks in
vcs_info</b> below.)</p>

<p style="margin-left:11%;"><i>user&minus;context</i></p>

<p style="margin-left:22%;">is a freely configurable
string, assignable by the user as the first argument to
<b>vcs_info</b> (see its description below).</p>


<p style="margin-left:11%;"><i>repo&minus;root&minus;name</i></p>

<p style="margin-left:22%;">is the name of a repository in
which you want a style to match. So, if you want a setting
specific to <b>/usr/src/zsh</b>, with that being a CVS
checkout, you can set <i>repo&minus;root&minus;name</i> to
<b>zsh</b> to make it so.</p>

<p style="margin-left:11%; margin-top: 1em">There are three
special values for <i>vcs&minus;string</i>: The first is
named <b>&minus;init&minus;</b>, that is in effect as long
as there was no decision what VCS backend to use. The second
is <b>&minus;preinit&minus;</b>; it is used <i>before</i>
<b>vcs_info</b> is run, when initializing the data exporting
variables. The third special value is <b>formats</b> and is
used by the <b>vcs_info_lastmsg</b> for looking up its
styles.</p>

<p style="margin-left:11%; margin-top: 1em">The initial
value of <i>repo&minus;root&minus;name</i> is
<b>&minus;all&minus;</b> and it is replaced with the actual
name, as soon as it is known. Only use this part of the
context for defining the <b>formats</b>,
<b>actionformats</b> or <b>branchformat</b> styles, as it is
guaranteed that <i>repo&minus;root&minus;name</i> is set up
correctly for these only. For all other styles, just use
<b>&rsquo;*&rsquo;</b> instead.</p>

<p style="margin-left:11%; margin-top: 1em">There are two
pre&minus;defined values for <i>user&minus;context</i>:
<b><br>
default</b></p>

<p style="margin-left:22%;">the one used if none is
specified</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">used by vcs_info_lastmsg to
lookup its styles</p>

<p style="margin-left:11%; margin-top: 1em">You can of
course use <b>&rsquo;:vcs_info:*&rsquo;</b> to match all
VCSs in all user&minus;contexts at once.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
description of all styles that are looked up. <b><br>
formats</b></p>

<p style="margin-left:22%;">A list of formats, used when
actionformats is not used (which is most of the time).</p>

<p style="margin-left:11%;"><b>actionformats</b></p>

<p style="margin-left:22%;">A list of formats, used if
there is a special action going on in your current
repository; like an interactive rebase or a merge
conflict.</p>

<p style="margin-left:11%;"><b>branchformat</b></p>

<p style="margin-left:22%;">Some backends replace <b>%b</b>
in the formats and actionformats styles above, not only by a
branch name but also by a revision number. This style lets
you modify how that string should look.</p>

<p style="margin-left:11%;"><b>nvcsformats</b></p>

<p style="margin-left:22%;">These &quot;formats&quot; are
exported when we didn&rsquo;t detect a version control
system for the current directory or <b>vcs_info</b> was
disabled. This is useful if you want <b>vcs_info</b> to
completely take over the generation of your prompt. You
would do something like
<b>PS1=&rsquo;${vcs_info_msg_0_}&rsquo;</b> to accomplish
that.</p>

<p style="margin-left:11%;"><b>hgrevformat</b></p>

<p style="margin-left:22%;"><b>hg</b> uses both a hash and
a revision number to reference a specific changeset in a
repository. With this style you can format the revision
string (see <b>branchformat</b>) to include either or both.
It&rsquo;s only useful when <b>get&minus;revision</b> is
true. Note, the full 40&minus;character revision id is not
available (except when using the <b>use&minus;simple</b>
option) because executing hg more than once per prompt is
too slow; you may customize this behavior using hooks.</p>

<p style="margin-left:11%;"><b>max&minus;exports</b></p>

<p style="margin-left:22%;">Defines the maximum number of
<b>vcs_info_msg_*_</b> variables <b>vcs_info</b> will
export.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>enable</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A list of backends you want to use. Checked in the
<b>&minus;init&minus;</b> context. If this list contains an
item called <b>NONE</b> no backend is used at all and
<b>vcs_info</b> will do nothing. If this list contains
<b>ALL</b>, <b>vcs_info</b> will use all known backends.
Only with <b>ALL</b> in <b>enable</b> will the
<b>disable</b> style have any effect. <b>ALL</b> and
<b>NONE</b> are case insensitive.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>disable</b></p>

<p style="margin-left:22%;">A list of VCSs you don&rsquo;t
want <b>vcs_info</b> to test for repositories (checked in
the <b>&minus;init&minus;</b> context, too). Only used if
<b>enable</b> contains <b>ALL</b>.</p>


<p style="margin-left:11%;"><b>disable&minus;patterns</b></p>

<p style="margin-left:22%;">A list of patterns that are
checked against <b>$PWD</b>. If a pattern matches,
<b>vcs_info</b> will be disabled. This style is checked in
the <b>:vcs_info:&minus;init&minus;:*:&minus;all&minus;</b>
context.</p>

<p style="margin-left:22%; margin-top: 1em">Say,
<b>~/.zsh</b> is a directory under version control, in which
you do not want <b>vcs_info</b> to be active, do:</p>

<p style="margin-left:32%;"><b>zstyle
&rsquo;:vcs_info:*&rsquo; disable&minus;patterns
&quot;$HOME/.zsh(|/*)&quot;</b></p>

<p style="margin-left:11%;"><b>use&minus;quilt</b></p>

<p style="margin-left:22%;">If enabled, the <b>quilt</b>
support code is active in &lsquo;addon&rsquo; mode. See
<b>Quilt Support</b> for details.</p>


<p style="margin-left:11%;"><b>quilt&minus;standalone</b></p>

<p style="margin-left:22%;">If enabled,
&lsquo;standalone&rsquo; mode detection is attempted if no
VCS is active in a given directory. See <b>Quilt Support</b>
for details.</p>


<p style="margin-left:11%;"><b>quilt&minus;patch&minus;dir</b></p>

<p style="margin-left:22%;">Overwrite the value of the
<b>$QUILT_PATCHES</b> environment variable. See <b>Quilt
Support</b> for details.</p>

<p style="margin-left:11%;"><b>quiltcommand</b></p>

<p style="margin-left:22%;">When <b>quilt</b> itself is
called in quilt support the value of this style is used as
the command name.</p>


<p style="margin-left:11%;"><b>check&minus;for&minus;changes</b></p>

<p style="margin-left:22%;">If enabled, this style causes
the <b>%c</b> and <b>%u</b> format escapes to show when the
working directory has uncommitted changes. The strings
displayed by these escapes can be controlled via the
<b>stagedstr</b> and <b>unstagedstr</b> styles. The only
backends that currently support this option are <b>git</b>
and <b>hg</b> (<b>hg</b> only supports unstaged).</p>

<p style="margin-left:22%; margin-top: 1em">For this style
to be evaluated with the <b>hg</b> backend, the
<b>get&minus;revision</b> style needs to be set and the
<b>use&minus;simple</b> style needs to be unset. The latter
is the default; the former is not.</p>

<p style="margin-left:22%; margin-top: 1em">Note, the
actions taken if this style is enabled are potentially
expensive (read: they may be slow, depending on how big the
current repository is). Therefore, it is disabled by
default.</p>

<p style="margin-left:11%;"><b>stagedstr</b></p>

<p style="margin-left:22%;">This string will be used in the
<b>%c</b> escape if there are staged changes in the
repository.</p>

<p style="margin-left:11%;"><b>unstagedstr</b></p>

<p style="margin-left:22%;">This string will be used in the
<b>%u</b> escape if there are unstaged changes in the
repository.</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">This style causes
<b>vcs_info</b> to use the supplied string as the command to
use as the VCS&rsquo;s binary. Note, that setting this in
&rsquo;:vcs_info:*&rsquo; is not a good idea.</p>

<p style="margin-left:22%; margin-top: 1em">If the value of
this style is empty (which is the default), the used binary
name is the name of the backend in use (e.g. <b>svn</b> is
used in an <b>svn</b> repository).</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>repo&minus;root&minus;name</b> part in the context is
always the default <b>&minus;all&minus;</b> when this style
is looked up.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
this style can be used to use binaries from
non&minus;default installation directories. Assume,
<b>git</b> is installed in /usr/bin but your sysadmin
installed a newer version in /usr/bin/local. Instead of
changing the order of your <b>$PATH</b> parameter, you can
do this:</p>

<p style="margin-left:32%;"><b>zstyle
&rsquo;:vcs_info:git:*:&minus;all&minus;&rsquo; command
/usr/local/bin/git</b></p>

<p style="margin-left:11%;"><b>use&minus;server</b></p>

<p style="margin-left:22%;">This is used by the Perforce
backend (<b>p4</b>) to decide if it should contact the
Perforce server to find out if a directory is managed by
Perforce. This is the only reliable way of doing this, but
runs the risk of a delay if the server name cannot be found.
If the server (more specifically, the <b>host:port</b> pair
describing the server) cannot be contacted, its name is put
into the associative array <b>vcs_info_p4_dead_servers</b>
and is not contacted again during the session until it is
removed by hand. If you do not set this style, the <b>p4</b>
backend is only usable if you have set the environment
variable <b>P4CONFIG</b> to a file name and have
corresponding files in the root directories of each Perforce
client. See comments in the function
<b>VCS_INFO_detect_p4</b> for more detail.</p>

<p style="margin-left:11%;"><b>use&minus;simple</b></p>

<p style="margin-left:22%;">If there are two different ways
of gathering information, you can select the simpler one by
setting this style to true; the default is to use the
not&minus;that&minus;simple code, which is potentially a lot
slower but might be more accurate in all possible cases.
This style is used by the <b>bzr</b> and <b>hg</b> backends.
In the case of <b>hg</b> it will invoke the external hexdump
program to parse the binary dirstate cache file; this method
will not return the local revision number.</p>

<p style="margin-left:11%;"><b>get&minus;revision</b></p>

<p style="margin-left:22%;">If set to true, vcs_info goes
the extra mile to figure out the revision of a
repository&rsquo;s work tree (currently for the <b>git</b>
and <b>hg</b> backends, where this kind of information is
not always vital). For <b>git</b>, the hash value of the
currently checked out commit is available via the <b>%i</b>
expansion. With <b>hg</b>, the local revision number and the
corresponding global hash are available via <b>%i</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>get&minus;mq</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If set to true, the <b>hg</b> backend will look for a
Mercurial Queue (<b>mq</b>) patch directory. Information
will be available via the &lsquo;<b>%m</b>&rsquo;
replacement.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>get&minus;bookmarks</b></p>

<p style="margin-left:22%;">If set to true, the <b>hg</b>
backend will try to get a list of current bookmarks. They
will be available via the &lsquo;<b>%m</b>&rsquo;
replacement.</p>


<p style="margin-left:11%;"><b>use&minus;prompt&minus;escapes</b></p>

<p style="margin-left:22%;">Determines if we assume that
the assembled string from <b>vcs_info</b> includes prompt
escapes. (Used by <b>vcs_info_lastmsg</b>.)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>debug</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Enable debugging output to track possible problems.
Currently this style is only used by <b>vcs_info</b>&rsquo;s
hooks system.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>hooks</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>A list style that defines hook&minus;function names. See
<b>Hooks in vcs_info</b> below for details.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The default
values for these styles in all contexts are: <b><br>
formats</b></p>

<p style="margin-left:22%;">&quot;
(%s)&minus;[%b]%u%c&minus;&quot;</p>

<p style="margin-left:11%;"><b>actionformats</b></p>

<p style="margin-left:22%;">&quot;
(%s)&minus;[%b|%a]%u%c&minus;&quot;</p>

<p style="margin-left:11%;"><b>branchformat</b></p>

<p style="margin-left:22%;">&quot;%b:%r&quot; (for bzr,
svn, svk and hg)</p>

<p style="margin-left:11%;"><b>nvcsformats</b></p>

<p style="margin-left:22%;">&quot;&quot;</p>

<p style="margin-left:11%;"><b>hgrevformat</b></p>

<p style="margin-left:22%;">&quot;%r:%h&quot;</p>

<p style="margin-left:11%;"><b>max&minus;exports</b></p>

<p style="margin-left:22%;">2</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>enable</b></p></td>
<td width="2%"></td>
<td width="4%">


<p>ALL</p></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>disable</b></p>

<p style="margin-left:22%;">(empty list)</p>


<p style="margin-left:11%;"><b>disable&minus;patterns</b></p>

<p style="margin-left:22%;">(empty list)</p>


<p style="margin-left:11%;"><b>check&minus;for&minus;changes</b></p>

<p style="margin-left:22%;">false</p>

<p style="margin-left:11%;"><b>stagedstr</b></p>

<p style="margin-left:22%;">(string: &quot;S&quot;)</p>

<p style="margin-left:11%;"><b>unstagedstr</b></p>

<p style="margin-left:22%;">(string: &quot;U&quot;)</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">(empty string)</p>

<p style="margin-left:11%;"><b>use&minus;server</b></p>

<p style="margin-left:22%;">false</p>

<p style="margin-left:11%;"><b>use&minus;simple</b></p>

<p style="margin-left:22%;">false</p>

<p style="margin-left:11%;"><b>get&minus;revision</b></p>

<p style="margin-left:22%;">false</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>get&minus;mq</b></p></td>
<td width="2%"></td>
<td width="6%">


<p>true</p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>get&minus;bookmarks</b></p>

<p style="margin-left:22%;">false</p>


<p style="margin-left:11%;"><b>use&minus;prompt&minus;escapes</b></p>

<p style="margin-left:22%;">true</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>debug</b></p></td>
<td width="4%"></td>
<td width="18%">


<p>false</p></td>
<td width="60%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>hooks</b></p></td>
<td width="4%"></td>
<td width="18%">


<p>(empty list)</p></td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>use&minus;quilt</b></p>

<p style="margin-left:22%;">false</p>


<p style="margin-left:11%;"><b>quilt&minus;standalone</b></p>

<p style="margin-left:22%;">false</p>


<p style="margin-left:11%;"><b>quilt&minus;patch&minus;dir</b></p>

<p style="margin-left:22%;">empty &minus; use
<b>$QUILT_PATCHES</b></p>

<p style="margin-left:11%;"><b>quiltcommand</b></p>

<p style="margin-left:22%;">quilt</p>

<p style="margin-left:11%; margin-top: 1em">In normal
<b>formats</b> and <b>actionformats</b> the following
replacements are done:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The VCS in use (git, hg, svn, etc.).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Information about the current branch.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>An identifier that describes the action. Only makes
sense in <b>actionformats</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current revision number or identifier. For <b>hg</b>
the <b>hgrevformat</b> style may be used to customize the
output.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The string from the <b>stagedstr</b> style if there are
staged changes in the repository.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The string from the <b>unstagedstr</b> style if there
are unstaged changes in the repository.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The base directory of the repository.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The repository name. If <b>%R</b> is
<b>/foo/bar/repoXY</b>, <b>%r</b> is <b>repoXY</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%S</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>A subdirectory within a repository. If <b>$PWD</b> is
<b>/foo/bar/repoXY/beer/tasty</b>, <b>%S</b> is
<b>beer/tasty</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>A &quot;misc&quot; replacement. It is at the discretion
of the backend to decide what this replacement expands to.
It is currently used by the <b>hg</b> and <b>git</b>
backends to display patch information from the <b>mq</b> and
<b>stgit</b> extensions.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In
<b>branchformat</b> these replacements are done:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The branch name.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current revision number or the <b>hgrevformat</b>
style for <b>hg</b>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In
<b>hgrevformat</b> these replacements are done:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%r</b></p></td>
<td width="8%"></td>
<td width="60%">


<p style="margin-top: 1em">The current local revision
number.</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%h</b></p></td>
<td width="8%"></td>
<td width="60%">


<p>The current global revision identifier.</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In
<b>patch&minus;format</b> and <b>nopatch&minus;format</b>
these replacements are done:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The name of the top&minus;most
applied patch (<b>applied&minus;string</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of unapplied patches
(<b>unapplied&minus;string</b>).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of applied patches.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%c</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of unapplied patches.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of all patches.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%g</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The names of active <b>mq</b> guards (<b>hg</b>
backend).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%G</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The number of active <b>mq</b> guards (<b>hg</b>
backend).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Not all VCS
backends have to support all replacements. For
<b>nvcsformats</b> no replacements are performed at all, it
is just a string.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Oddities</b>
<br>
If you want to use the <b>%b</b> (bold off) prompt expansion
in <b>formats</b>, which expands <b>%b</b> itself, use
<b>%%b</b>. That will cause the <b>vcs_info</b> expansion to
replace <b>%%b</b> with <b>%b</b>, so that zsh&rsquo;s
prompt expansion mechanism can handle it. Similarly, to hand
down <b>%b</b> from <b>branchformat</b>, use <b>%%%%b</b>.
Sorry for this inconvenience, but it cannot be easily
avoided. Luckily we do not clash with a lot of prompt
expansions and this only needs to be done for those.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Quilt
Support <br>
Quilt</b> is not a version control system, therefore this is
not implemented as a backend. It can help keeping track of a
series of patches. People use it to keep a set of changes
they want to use on top of software packages (which is
tightly integrated into the package build process &minus;
the Debian project does this for a large number of
packages). Quilt can also help individual developers keep
track of their own patches on top of real version control
systems.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>vcs_info</b> integration tries to support both ways of
using quilt by having two slightly different modes of
operation: &lsquo;addon&rsquo; mode and
&lsquo;standalone&rsquo; mode).</p>

<p style="margin-left:11%; margin-top: 1em">For
&lsquo;addon&rsquo; mode to become active <b>vcs_info</b>
must have already detected a real version control system
controlling the directory. If that is the case, a directory
that holds quilt&rsquo;s patches needs to be found. That
directory is configurable via the
&lsquo;<b>QUILT_PATCHES</b>&rsquo; environment variable. If
that variable exists its value is used, otherwise the value
&lsquo;<b>patches</b>&rsquo; is assumed. The value from
<b>$QUILT_PATCHES</b> can be overwritten using the
<b>&lsquo;quilt&minus;patches&rsquo;</b> style. (Note: you
can use <b>vcs_info</b> to keep the value of
<b>$QUILT_PATCHES</b> correct all the time via the
<b>post&minus;quilt</b> hook).</p>

<p style="margin-left:11%; margin-top: 1em">When the
directory in question is found, quilt is assumed to be
active. To gather more information, <b>vcs_info</b> looks
for a directory called &lsquo;.pc&rsquo;; Quilt uses that
directory to track its current state. If this directory does
not exist we know that quilt has not done anything to the
working directory (read: no patches have been applied
yet).</p>

<p style="margin-left:11%; margin-top: 1em">If patches are
applied, <b>vcs_info</b> will try to find out which. If you
want to know which patches of a series are not yet applied,
you need to activate the <b>get&minus;unapplied</b> style in
the appropriate context.</p>


<p style="margin-left:11%; margin-top: 1em"><b>vcs_info</b>
allows for very detailed control over how the gathered
information is presented (see the below sections,
<b>Styles</b> and <b>Hooks in vcs_info</b>), all of which
are documented below. Note there are a number of other patch
tracking systems that work on top of a certain version
control system (like <b>stgit</b> for <b>git</b>, or
<b>mq</b> for <b>hg</b>); the configuration for systems like
that are generally configured the same way as the
<b>quilt</b> support.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>quilt</b> support is working in &lsquo;addon&rsquo; mode,
the produced string is available as a simple format
replacement (<b>%Q</b> to be precise), which can be used in
<b>formats</b> and <b>actionformats</b>; see below for
details).</p>

<p style="margin-left:11%; margin-top: 1em">If, on the
other hand, the support code is working in
&lsquo;standalone&rsquo; mode, <b>vcs_info</b> will pretend
as if <b>quilt</b> were an actual version control system.
That means that the version control system identifier (which
otherwise would be something like &lsquo;svn&rsquo; or
&lsquo;cvs&rsquo;) will be set to
&lsquo;<b>&minus;quilt&minus;</b>&rsquo;. This has
implications on the used style context where this identifier
is the second element. <b>vcs_info</b> will have filled in a
proper value for the &quot;repository&rsquo;s&quot; root
directory and the string containing the information about
quilt&rsquo;s state will be available as the
&lsquo;misc&rsquo; replacement (and <b>%Q</b> for
compatibility with &lsquo;addon&rsquo; mode.</p>

<p style="margin-left:11%; margin-top: 1em">What is left to
discuss is how &lsquo;standalone&rsquo; mode is detected.
The detection itself is a series of searches for
directories. You can have this detection enabled all the
time in every directory that is not otherwise under version
control. If you know there is only a limited set of trees
where you would like <b>vcs_info</b> to try and look for
Quilt in &lsquo;standalone&rsquo; mode to minimise the
amount of searching on every call to <b>vcs_info</b>, there
are a number of ways to do that:</p>

<p style="margin-left:11%; margin-top: 1em">Essentially,
&lsquo;standalone&rsquo; mode detection is controlled by a
style called &lsquo;<b>quilt&minus;standalone</b>&rsquo;. It
is a string style and its value can have different effects.
The simplest values are: &lsquo;<b>always</b>&rsquo; to run
detection every time <b>vcs_info</b> is run, and
&lsquo;<b>never</b>&rsquo; to turn the detection off
entirely.</p>

<p style="margin-left:11%; margin-top: 1em">If the value of
<b>quilt&minus;standalone</b> is something else, it is
interpreted differently. If the value is the name of a
scalar variable the value of that variable is checked and
that value is used in the same
&lsquo;always&rsquo;/&lsquo;never&rsquo; way as described
above.</p>

<p style="margin-left:11%; margin-top: 1em">If the value of
<b>quilt&minus;standalone</b> is an array, the elements of
that array are used as directory names under which you want
the detection to be active.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>quilt&minus;standalone</b> is an associative array, the
keys are taken as directory names under which you want the
detection to be active, but only if the corresponding value
is the string &lsquo;<b>true</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Last, but not
least, if the value of <b>quilt&minus;standalone</b> is the
name of a function, the function is called without arguments
and the return value decides whether detection should be
active. A &lsquo;0&rsquo; return value is true; a
non&minus;zero return value is interpreted as false.</p>

<p style="margin-left:11%; margin-top: 1em">Note, if there
is both a function and a variable by the name of
<b>quilt&minus;standalone</b>, the function will take
precedence.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Function
Descriptions (Public API) <br>
vcs_info</b> [<i>user&minus;context</i>]</p>

<p style="margin-left:22%;">The main function, that runs
all backends and assembles all data into
<b>${vcs_info_msg_*_}</b>. This is the function you want to
call from <b>precmd</b> if you want to include
up&minus;to&minus;date information in your prompt (see
<b>Variable description</b> below). If an argument is given,
that string will be used instead of <b>default</b> in the
<i>user&minus;context</i> field of the style context.</p>

<p style="margin-left:11%;"><b>vcs_info_hookadd</b></p>

<p style="margin-left:22%;">Statically registers a number
of functions to a given hook. The hook needs to be given as
the first argument; what follows is a list of
hook&minus;function names to register to the hook. The
&lsquo;<b>+vi&minus;</b>&rsquo; prefix needs to be left out
here. See <b>Hooks in vcs_info</b> below for details.</p>

<p style="margin-left:11%;"><b>vcs_info_hookdel</b></p>

<p style="margin-left:22%;">Remove hook&minus;functions
from a given hook. The hook needs to be given as the first
non&minus;option argument; what follows is a list of
hook&minus;function names to un&minus;register from the
hook. If &lsquo;<b>&minus;a</b>&rsquo; is used as the first
argument, <b>all</b> occurances of the functions are
unregistered. Otherwise only the last occurance is removed
(if a function was registered to a hook more than once) .
The &lsquo;<b>+vi&minus;</b>&rsquo; prefix needs to be left
out here. See <b>Hooks in vcs_info</b> below for
details.</p>

<p style="margin-left:11%;"><b>vcs_info_lastmsg</b></p>

<p style="margin-left:22%;">Outputs the last
<b>${vcs_info_msg_*_}</b> value. Takes into account the
value of the <b>use&minus;prompt&minus;escapes</b> style in
<b>&rsquo;:vcs_info:formats:command:&minus;all&minus;&rsquo;</b>.
It also only prints <b>max&minus;exports</b> values.</p>

<p style="margin-left:11%;"><b>vcs_info_printsys</b>
[<i>user&minus;context</i>]</p>

<p style="margin-left:22%;">Prints a list of all supported
version control systems. Useful to find out possible
contexts (and which of them are enabled) or values for the
<b>disable</b> style.</p>

<p style="margin-left:11%;"><b>vcs_info_setsys</b></p>

<p style="margin-left:22%;">Initializes
<b>vcs_info</b>&rsquo;s internal list of available backends.
With this function, you can add support for new VCSs without
restarting the shell.</p>

<p style="margin-left:11%; margin-top: 1em">All functions
named VCS_INFO_* are for internal use only.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Variable
Description <br>
${vcs_info_msg_</b><i>N</i><b>_}</b> (Note the trailing
underscore)</p>

<p style="margin-left:22%;">Where <i>N</i> is an integer,
e.g., <b>vcs_info_msg_0_</b>. These variables are the
storage for the informational message the last
<b>vcs_info</b> call has assembled. These are strongly
connected to the <b>formats</b>, <b>actionformats</b> and
<b>nvcsformats</b> styles described above. Those styles are
lists. The first member of that list gets expanded into
<b>${vcs_info_msg_0_}</b>, the second into
<b>${vcs_info_msg_1_}</b> and the Nth into
<b>${vcs_info_msg_N&minus;1_}</b>. These parameters are
exported into the environment. (See the
<b>max&minus;exports</b> style above.)</p>

<p style="margin-left:11%; margin-top: 1em">All variables
named VCS_INFO_* are for internal use only.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Hooks in
vcs_info</b> <br>
Hooks are places in <b>vcs_info</b> where you can run your
own code. That code can communicate with the code that
called it and through that, change the system&rsquo;s
behaviour.</p>

<p style="margin-left:11%; margin-top: 1em">For
configuration, hooks change the style context:</p>


<p style="margin-left:22%;"><b>:vcs_info:</b><i>vcs&minus;string</i><b>+</b><i>hook&minus;name</i><b>:</b><i>user&minus;context</i><b>:</b><i>repo&minus;root&minus;name</i></p>

<p style="margin-left:11%; margin-top: 1em">To register
functions to a hook, you need to list them in the
<b>hooks</b> style in the appropriate context.</p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*+foo:*&rsquo; hooks bar baz</b></p>

<p style="margin-left:11%; margin-top: 1em">This registers
functions to the hook &lsquo;foo&rsquo; for all backends. In
order to avoid namespace problems, all registered function
names are prepended by a &lsquo;+vi&minus;&rsquo;, so the
actual functions called for the &lsquo;foo&rsquo; hook are
&lsquo;<b>+vi&minus;bar</b>&rsquo; and
&lsquo;<b>+vi&minus;baz</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If you would
like to register a function to a hook regardless of the
current context, you may use the <b>vcs_info_hookadd</b>
function. To remove a function that was added like that, the
<b>vcs_info_hookdel</b> function can be used.</p>

<p style="margin-left:11%; margin-top: 1em">If something
seems weird, you can enable the &lsquo;debug&rsquo; boolean
style in the proper context and the hook&minus;calling code
will print what it tried to execute and whether the function
in question existed.</p>

<p style="margin-left:11%; margin-top: 1em">When you
register more than one function to a hook, all functions are
executed one after another until one function returns
non&minus;zero or until all functions have been called.
Context&minus;sensitive hook functions are executed
<b>before</b> statically registered ones (the ones added by
<b>vcs_info_hookadd</b>).</p>

<p style="margin-left:11%; margin-top: 1em">You may pass
data between functions via an associative array,
<b>user_data</b>. For example:</p>


<p style="margin-left:22%;"><b>+vi&minus;git&minus;myfirsthook(){
<br>
user_data[myval]=$myval <br>
} <br>
+vi&minus;git&minus;mysecondhook(){ <br>
# do something with ${user_data[myval]} <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">There are a
number of variables that are special in hook contexts:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>ret</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The return value that the hooks system will return to
the caller. The default is an integer &lsquo;zero&rsquo;. If
and how a changed <b>ret</b> value changes the execution of
the caller depends on the specific hook. See the hook
documentation below for details.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>hook_com</b></p>

<p style="margin-left:22%;">An associated array which is
used for bidirectional communication from the caller to hook
functions. The used keys depend on the specific hook.</p>

<p style="margin-left:11%;"><b>context</b></p>

<p style="margin-left:22%;">The active context of the hook.
Functions that wish to change this variable should make it
local scope first.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>vcs</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The current VCS after it was detected. The same values
as in the enable/disable style are used. Available in all
hooks except <b>start&minus;up</b>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Finally, the
full list of currently available hooks: <b><br>
start&minus;up</b></p>

<p style="margin-left:22%;">Called after starting
<b>vcs_info</b> but before the VCS in this directory is
determined. It can be used to deactivate <b>vcs_info</b>
temporarily if necessary. When <b>ret</b> is set to
<b>1</b>, <b>vcs_info</b> aborts and does nothing; when set
to <b>2</b>, <b>vcs_info</b> sets up everything as if no
version control were active and exits.</p>


<p style="margin-left:11%;"><b>pre&minus;get&minus;data</b></p>

<p style="margin-left:22%;">Same as <b>start&minus;up</b>
but after the VCS was detected.</p>


<p style="margin-left:11%;"><b>gen&minus;hg&minus;bookmark&minus;string</b></p>

<p style="margin-left:22%;">Called in the Mercurial backend
when a bookmark string is generated; the
<b>get&minus;revision</b> and <b>get&minus;bookmarks</b>
styles must be true.</p>

<p style="margin-left:22%; margin-top: 1em">This hook gets
the names of the Mercurial bookmarks that <b>vcs_info</b>
collected from &lsquo;hg&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">When setting
<b>ret</b> to non&minus;zero, the string in
<b>${hook_com[hg&minus;bookmark&minus;string]}</b> will be
used in the <b>%m</b> escape in <b>formats</b> and
<b>actionformats</b> and will be availabe in the global
<b>backend_misc</b> array as
<b>${backend_misc[bookmarks]}</b>.</p>


<p style="margin-left:11%;"><b>gen&minus;applied&minus;string</b></p>

<p style="margin-left:22%;">Called in the <b>git</b> (with
<b>stgit</b>), and <b>hg</b> (with <b>mq</b>) backends and
in <b>quilt</b> support when the <b>applied&minus;string</b>
is generated; the <b>use&minus;quilt</b> zstyle must be true
for <b>quilt</b> (the <b>mq</b> and <b>stgit</b> backends
are active by default).</p>

<p style="margin-left:22%; margin-top: 1em">This hook gets
the names of all applied patches which <b>vcs_info</b>
collected so far in the opposite order, which means that the
first argument is the top&minus;most patch and so forth.</p>

<p style="margin-left:22%; margin-top: 1em">When setting
<b>ret</b> to non&minus;zero, the string in
<b>${hook_com[applied&minus;string]}</b> will be used in the
<b>%m</b> escape in <b>formats</b> and <b>actionformats</b>;
it will be available in the global <b>backend_misc</b> array
as <b>$backend_misc[patches]}</b>; and it will be available
as <b>%p</b> in the <b>patch&minus;format</b> and
<b>nopatch&minus;format</b> styles.</p>


<p style="margin-left:11%;"><b>gen&minus;unapplied&minus;string</b></p>

<p style="margin-left:22%;">Called in the <b>git</b> (with
<b>stgit</b>), and <b>hg</b> (with <b>mq</b>) backend and in
<b>quilt</b> support when the <b>unapplied&minus;string</b>
is generated; the <b>get&minus;unapplied</b> style must be
true.</p>

<p style="margin-left:22%; margin-top: 1em">This hook gets
the names of all unapplied patches which <b>vcs_info</b>
collected so far in the opposite order, which mean that the
first argument is the patch next&minus;in&minus;line to be
applied and so forth.</p>

<p style="margin-left:22%; margin-top: 1em">When setting
<b>ret</b> to non&minus;zero, the string in
<b>${hook_com[unapplied&minus;string]}</b> will be available
as <b>%u</b> in the <b>patch&minus;format</b> and
<b>nopatch&minus;format</b> styles.</p>


<p style="margin-left:11%;"><b>gen&minus;mqguards&minus;string</b></p>

<p style="margin-left:22%;">Called in the <b>hg</b> backend
when <b>guards&minus;string</b> is generated; the
<b>get&minus;mq</b> style must be true (default).</p>

<p style="margin-left:22%; margin-top: 1em">This hook gets
the names of any active <b>mq</b> guards.</p>

<p style="margin-left:22%; margin-top: 1em">When setting
<b>ret</b> to non&minus;zero, the string in
<b>${hook_com[guards&minus;string]}</b> will be used in the
<b>%g</b> escape in the <b>patch&minus;format</b> and
<b>nopatch&minus;format</b> styles.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>no&minus;vcs</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This hooks is called when no version control system was
detected.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The
&lsquo;hook_com&rsquo; parameter is not used.</p>

<p style="margin-left:11%;"><b>post&minus;quilt</b></p>

<p style="margin-left:22%;">Called after the <b>quilt</b>
support is done. The following information is passed as
arguments to the hook: 1. the quilt&minus;support mode
(&lsquo;addon&rsquo; or &lsquo;standalone&rsquo;); 2. the
directory that contains the patch series; 3. the directory
that holds quilt&rsquo;s status information (the
&lsquo;.pc&rsquo; directory) or the string
<b>&quot;&minus;nopc&minus;&quot;</b> if that directory
wasn&rsquo;t found.</p>

<p style="margin-left:22%; margin-top: 1em">The
&lsquo;hook_com&rsquo; parameter is not used.</p>


<p style="margin-left:11%;"><b>set&minus;branch&minus;format</b></p>

<p style="margin-left:22%;">Called before
&lsquo;<b>branchformat</b>&rsquo; is set. The only argument
to the hook is the format that is configured at this
point.</p>

<p style="margin-left:22%; margin-top: 1em">The
&lsquo;<b>hook_com</b>&rsquo; keys considered are
&lsquo;<b>branch</b>&rsquo; and
&lsquo;<b>revision</b>&rsquo;. They are set to the values
figured out so far by <b>vcs_info</b> and any change will be
used directly when the actual replacement is done.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>ret</b>
is set to non&minus;zero, the string in
<b>${hook_com[branch&minus;replace]}</b> will be used
unchanged as the &lsquo;<b>%b</b>&rsquo; replacement in the
variables set by <b>vcs_info</b>.</p>


<p style="margin-left:11%;"><b>set&minus;hgrev&minus;format</b></p>

<p style="margin-left:22%;">Called before a
&lsquo;<b>hgrevformat</b>&rsquo; is set. The only argument
to the hook is the format that is configured at this
point.</p>

<p style="margin-left:22%; margin-top: 1em">The
&lsquo;<b>hook_com</b>&rsquo; keys considered are
&lsquo;<b>hash</b>&rsquo; and &lsquo;<b>localrev</b>&rsquo;.
They are set to the values figured out so far by
<b>vcs_info</b> and any change will be used directly when
the actual replacement is done.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>ret</b>
is set to non&minus;zero, the string in
<b>${hook_com[rev&minus;replace]}</b> will be used unchanged
as the &lsquo;<b>%i</b>&rsquo; replacement in the variables
set by <b>vcs_info</b>.</p>

<p style="margin-left:11%;"><b>set&minus;message</b></p>

<p style="margin-left:22%;">Called each time before a
&lsquo;<b>vcs_info_msg_N_</b>&rsquo; message is set. It
takes two arguments; the first being the &lsquo;N&rsquo; in
the message variable name, the second is the currently
configured <b>formats</b> or <b>actionformats</b>.</p>

<p style="margin-left:22%; margin-top: 1em">There are a
number of &lsquo;<b>hook_com</b>&rsquo; keys, that are used
here: &lsquo;<b>action</b>&rsquo;,
&lsquo;<b>branch</b>&rsquo;, &lsquo;<b>base</b>&rsquo;,
&lsquo;<b>base&minus;name</b>&rsquo;,
&lsquo;<b>subdir</b>&rsquo;, &lsquo;<b>staged</b>&rsquo;,
&lsquo;<b>unstaged</b>&rsquo;,
&lsquo;<b>revision</b>&rsquo;, &lsquo;<b>misc</b>&rsquo;,
&lsquo;<b>vcs</b>&rsquo; and one &lsquo;<b>miscN</b>&rsquo;
entry for each backend&minus;specific data field (<b>N</b>
starting at zero). They are set to the values figured out so
far by <b>vcs_info</b> and any change will be used directly
when the actual replacement is done.</p>

<p style="margin-left:22%; margin-top: 1em">Since this hook
is triggered multiple times (once for each configured
<b>formats</b> or <b>actionformats</b>), each of the
&lsquo;<b>hook_com</b>&rsquo; keys mentioned above (except
for the <b>miscN</b> entries) has an
&lsquo;<b>_orig</b>&rsquo; counterpart, so even if you
changed a value to your liking you can still get the
original value in the next run. Changing the
&lsquo;<b>_orig</b>&rsquo; values is probably not a good
idea.</p>

<p style="margin-left:22%; margin-top: 1em">If <b>ret</b>
is set to non&minus;zero, the string in
<b>${hook_com[message]}</b> will be used unchanged as the
message by <b>vcs_info</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If all of this
sounds rather confusing, take a look at the <b>Examples</b>
section below and also in the Misc/vcs_info&minus;examples
file in the Zsh source. They contain some explanatory
code.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Examples</b>
<br>
Don&rsquo;t use <b>vcs_info</b> at all (even though
it&rsquo;s in your prompt):</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*&rsquo; enable NONE</b></p>

<p style="margin-left:11%; margin-top: 1em">Disable the
backends for <b>bzr</b> and <b>svk</b>:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*&rsquo; disable bzr svk</b></p>

<p style="margin-left:11%; margin-top: 1em">Disable
everything <i>but</i> <b>bzr</b> and <b>svk</b>:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*&rsquo; enable bzr svk</b></p>

<p style="margin-left:11%; margin-top: 1em">Provide a
special formats for <b>git</b>:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:git:*&rsquo; formats &rsquo; GIT, BABY!
[%b]&rsquo; <br>
zstyle &rsquo;:vcs_info:git:*&rsquo; actionformats &rsquo;
GIT ACTION! [%b|%a]&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">All <b>%x</b>
expansion in all sorts of formats (&quot;formats&quot;,
&quot;actionformats&quot;, branchformat, you name it) are
done using the &lsquo;<b>zformat</b>&rsquo; builtin from the
&lsquo;<b>zsh/zutil</b>&rsquo; module. That means you can do
everything with these <b>%x</b> items what zformat supports.
In particular, if you want something that is really long to
have a fixed width, like a hash in a mercurial branchformat,
you can do this: <b>%12.12i</b>. That&rsquo;ll shrink the 40
character hash to its 12 leading characters. The form is
actually
&lsquo;<b>%</b><i>min</i><b>.</b><i>max</i><b>x</b>&rsquo;.
More is possible. See the section &lsquo;The zsh/zutil
Module&rsquo; in <i>zshmodules</i>(1) for details.</p>

<p style="margin-left:11%; margin-top: 1em">Use the quicker
<b>bzr</b> backend</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:bzr:*&rsquo; use&minus;simple true</b></p>

<p style="margin-left:11%; margin-top: 1em">If you do use
<b>use&minus;simple</b>, please report if it does
&lsquo;the&minus;right&minus;thing[tm]&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Display the
revision number in yellow for <b>bzr</b> and <b>svn</b>:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:(svn|bzr):*&rsquo; branchformat
&rsquo;%b%{&rsquo;${fg[yellow]}&rsquo;%}:%r&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">If you want
colors, make sure you enclose the color codes in
<b>%{...%}</b> if you want to use the string provided by
<b>vcs_info</b> in prompts.</p>

<p style="margin-left:11%; margin-top: 1em">Here is how to
print the VCS information as a command (not in a
prompt):</p>

<p style="margin-left:22%;"><b>alias vcsi=&rsquo;vcs_info
command; vcs_info_lastmsg&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This way, you
can even define different formats for output via
<b>vcs_info_lastmsg</b> in the
&rsquo;:vcs_info:*:command:*&rsquo; namespace.</p>

<p style="margin-left:11%; margin-top: 1em">Now as
promised, some code that uses hooks: say, you&rsquo;d like
to replace the string &lsquo;svn&rsquo; by
&lsquo;subversion&rsquo; in <b>vcs_info</b>&rsquo;s <b>%s
formats</b> replacement.</p>

<p style="margin-left:11%; margin-top: 1em">First, we will
tell <b>vcs_info</b> to call a function when populating the
message variables with the gathered information:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*+set&minus;message:*&rsquo; hooks
svn2subversion</b></p>

<p style="margin-left:11%; margin-top: 1em">Nothing
happens. Which is reasonable, since we didn&rsquo;t define
the actual function yet. To see what the hooks subsystem is
trying to do, enable the &lsquo;<b>debug</b>&rsquo;
style:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*+*:*&rsquo; debug true</b></p>

<p style="margin-left:11%; margin-top: 1em">That should
give you an idea what is going on. Specifically, the
function that we are looking for is
&lsquo;<b>+vi&minus;svn2subversion</b>&rsquo;. Note, the
&lsquo;<b>+vi&minus;</b>&rsquo; prefix. So, everything is in
order, just as documented. When you are done checking out
the debugging output, disable it again:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:*+*:*&rsquo; debug false</b></p>

<p style="margin-left:11%; margin-top: 1em">Now,
let&rsquo;s define the function:</p>

<p style="margin-left:22%;"><b>function
+vi&minus;svn2subversion() { <br>
[[ ${hook_com[vcs_orig]} == svn ]] &amp;&amp;
hook_com[vcs]=subversion <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">Simple enough.
And it could have even been simpler, if only we had
registered our function in a less generic context. If we do
it only in the &lsquo;<b>svn</b>&rsquo; backend&rsquo;s
context, we don&rsquo;t need to test which the active
backend is:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:svn+set&minus;message:*&rsquo; hooks
svn2subversion <br>
function +vi&minus;svn2subversion() { <br>
hook_com[vcs]=subversion <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">And finally a
little more elaborate example, that uses a hook to create a
customised bookmark string for the <b>hg</b> backend.</p>

<p style="margin-left:11%; margin-top: 1em">Again, we start
off by registering a function:</p>

<p style="margin-left:22%;"><b>zstyle
&rsquo;:vcs_info:hg+gen&minus;hg&minus;bookmark&minus;string:*&rsquo;
hooks hgbookmarks</b></p>

<p style="margin-left:11%; margin-top: 1em">And then we
define the &lsquo;<b>+vi&minus;hgbookmarks</b> function:</p>

<p style="margin-left:22%;"><b>function
+vi&minus;hgbookmarks() { <br>
# The default is to connect all bookmark names by <br>
# commas. This mixes things up a little. <br>
# Imagine, there&rsquo;s one type of bookmarks that is <br>
# special to you. Say, because it&rsquo;s *your* work. <br>
# Those bookmarks look always like this: &quot;sh/*&quot;
<br>
# (because your initials are sh, for example). <br>
# This makes the bookmarks string use only those <br>
# bookmarks. If there&rsquo;s more than one, it <br>
# concatenates them using commas. <br>
local s i <br>
# The bookmarks returned by &lsquo;hg&rsquo; are available
in <br>
# the functions positional parameters. <br>
(( $# == 0 )) &amp;&amp; return 0 <br>
for i in &quot;$@&quot;; do <br>
if [[ $i == sh/* ]]; then <br>
[[ &minus;n $s ]] &amp;&amp; s=$s, <br>
s=${s}$i <br>
fi <br>
done <br>
# Now, the communication with the code that calls <br>
# the hook functions is done via the hook_com[] <br>
# hash. The key, at which the
&lsquo;gen&minus;hg&minus;bookmark&minus;string&rsquo; <br>
# hook looks at is
&lsquo;hg&minus;bookmark&minus;string&rsquo;. So: <br>
hook_com[hg&minus;bookmark&minus;string]=$s <br>
# And to signal, that we want to use the sting we <br>
# just generated, set the special variable &lsquo;ret&rsquo;
to <br>
# something other than the default zero: <br>
ret=1 <br>
return 0 <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">Some longer
examples and code snippets which might be useful are
available in the examples file located at
Misc/vcs_info&minus;examples in the Zsh source
directory.</p>

<p style="margin-left:11%; margin-top: 1em">This concludes
our guided tour through zsh&rsquo;s <b>vcs_info</b>.</p>

<h2>PROMPT THEMES
<a name="PROMPT THEMES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Installation</b>
<br>
You should make sure all the functions from the
<b>Functions/Prompts</b> directory of the source
distribution are available; they all begin with the string
&lsquo;<b>prompt_</b>&rsquo; except for the special
function&lsquo;<b>promptinit</b>&rsquo;. You also need the
&lsquo;<b>colors</b>&rsquo; function from
<b>Functions/Misc</b>. All of these functions may already
have been installed on your system; if not, you will need to
find them and copy them. The directory should appear as one
of the elements of the <b>fpath</b> array (this should
already be the case if they were installed), and at least
the function <b>promptinit</b> should be autoloaded; it will
autoload the rest. Finally, to initialize the use of the
system you need to call the <b>promptinit</b> function. The
following code in your <b>.zshrc</b> will arrange for this;
assume the functions are stored in the directory
<b>~/myfns</b>:</p>


<p style="margin-left:22%; margin-top: 1em"><b>fpath=(~/myfns
$fpath) <br>
autoload &minus;U promptinit <br>
promptinit</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Theme
Selection</b> <br>
Use the <b>prompt</b> command to select your preferred
theme. This command may be added to your <b>.zshrc</b>
following the call to <b>promptinit</b> in order to start
zsh with a theme already selected. <b><br>
prompt</b> [ <b>&minus;c</b> | <b>&minus;l</b> ] <b><br>
prompt</b> [ <b>&minus;p</b> | <b>&minus;h</b> ] [
<i>theme</i> ... ] <b><br>
prompt</b> [ <b>&minus;s</b> ] <i>theme</i> [ <i>arg</i> ...
]</p>

<p style="margin-left:22%;">Set or examine the prompt
theme. With no options and a <i>theme</i> argument, the
theme with that name is set as the current theme. The
available themes are determined at run time; use the
<b>&minus;l</b> option to see a list. The special
<i>theme</i> &lsquo;<b>random</b>&rsquo; selects at random
one of the available themes and sets your prompt to
that.</p>

<p style="margin-left:22%; margin-top: 1em">In some cases
the <i>theme</i> may be modified by one or more arguments,
which should be given after the theme name. See the help for
each theme for descriptions of these arguments.</p>

<p style="margin-left:22%; margin-top: 1em">Options
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Show the currently selected theme and its parameters, if
any.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>List all available prompt themes.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;p</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Preview the theme named by <i>theme</i>, or all themes
if no <i>theme</i> is given.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;h</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Show help for the theme named by <i>theme</i>, or for
the <b>prompt</b> function if no <i>theme</i> is given.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Set <i>theme</i> as the current theme and save
state.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>prompt_</b><i>theme</i><b>_setup</b></p>

<p style="margin-left:22%;">Each available <i>theme</i> has
a setup function which is called by the <b>prompt</b>
function to install that theme. This function may define
other functions as necessary to maintain the prompt,
including functions used to preview the prompt or provide
help for its use. You should not normally call a
theme&rsquo;s setup function directly.</p>

<h2>ZLE FUNCTIONS
<a name="ZLE FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Widgets</b>
<br>
These functions all implement user&minus;defined ZLE widgets
(see <i>zshzle</i>(1)) which can be bound to keystrokes in
interactive shells. To use them, your <b>.zshrc</b> should
contain lines of the form</p>


<p style="margin-left:22%; margin-top: 1em"><b>autoload</b>
<i>function</i> <b><br>
zle &minus;N</b> <i>function</i></p>

<p style="margin-left:11%; margin-top: 1em">followed by an
appropriate <b>bindkey</b> command to associate the function
with a key sequence. Suggested bindings are described below.
<br>
bash&minus;style word functions</p>

<p style="margin-left:22%;">If you are looking for
functions to implement moving over and editing words in the
manner of bash, where only alphanumeric characters are
considered word characters, you can use the functions
described in the next section. The following is
sufficient:</p>

<p style="margin-left:32%; margin-top: 1em"><b>autoload
&minus;U select&minus;word&minus;style <br>
select&minus;word&minus;style bash</b></p>


<p style="margin-left:11%;"><b>forward&minus;word&minus;match</b>,
<b>backward&minus;word&minus;match <br>
kill&minus;word&minus;match</b>,
<b>backward&minus;kill&minus;word&minus;match <br>
transpose&minus;words&minus;match</b>,
<b>capitalize&minus;word&minus;match <br>
up&minus;case&minus;word&minus;match</b>,
<b>down&minus;case&minus;word&minus;match <br>
select&minus;word&minus;style</b>,
<b>match&minus;word&minus;context</b>,
<b>match&minus;words&minus;by&minus;style</b></p>

<p style="margin-left:22%;">The eight
&lsquo;<b>&minus;match</b>&rsquo; functions are
drop&minus;in replacements for the builtin widgets without
the suffix. By default they behave in a similar way.
However, by the use of styles and the function
<b>select&minus;word&minus;style</b>, the way words are
matched can be altered.</p>

<p style="margin-left:22%; margin-top: 1em">The simplest
way of configuring the functions is to use
<b>select&minus;word&minus;style</b>, which can either be
called as a normal function with the appropriate argument,
or invoked as a user&minus;defined widget that will prompt
for the first character of the word style to be used. The
first time it is invoked, the eight <b>&minus;match</b>
functions will automatically replace the builtin versions,
so they do not need to be loaded explicitly.</p>

<p style="margin-left:22%; margin-top: 1em">The word styles
available are as follows. Only the first character is
examined.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>bash</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Word characters are alphanumeric characters only.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>normal</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>As in normal shell operation: word characters are
alphanumeric characters plus any characters present in the
string given by the parameter <b>$WORDCHARS</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>shell</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Words are complete shell command arguments, possibly
including complete quoted strings, or any tokens special to
the shell.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>whitespace</b></p>

<p style="margin-left:32%;">Words are any set of characters
delimited by whitespace.</p>

<p style="margin-left:22%;"><b>default</b></p>

<p style="margin-left:32%;">Restore the default settings;
this is usually the same as &lsquo;<b>normal</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">All but
&lsquo;<b>default</b>&rsquo; can be input as an upper case
character, which has the same effect but with subword
matching turned on. In this case, words with upper case
characters are treated specially: each separate run of upper
case characters, or an upper case character followed by any
number of other characters, is considered a word. The style
<b>subword&minus;range</b> can supply an alternative
character range to the default
&lsquo;<b>[:upper:]</b>&rsquo;; the value of the style is
treated as the contents of a
&lsquo;<b>[</b><i>...</i><b>]</b>&rsquo; pattern (note that
the outer brackets should not be supplied, only those
surrounding named ranges).</p>

<p style="margin-left:22%; margin-top: 1em">More control
can be obtained using the <b>zstyle</b> command, as
described in <i>zshmodules</i>(1). Each style is looked up
in the context <b>:zle:</b><i>widget</i> where <i>widget</i>
is the name of the user&minus;defined widget, not the name
of the function implementing it, so in the case of the
definitions supplied by <b>select&minus;word&minus;style</b>
the appropriate contexts are <b>:zle:forward&minus;word</b>,
and so on. The function <b>select&minus;word&minus;style</b>
itself always defines styles for the context
&lsquo;<b>:zle:*</b>&rsquo; which can be overridden by more
specific (longer) patterns as well as explicit contexts.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>word&minus;style</b> specifies the rules to use. This may
have the following values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>normal</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Use the standard shell rules, i.e. alphanumerics and
<b>$WORDCHARS</b>, unless overridden by the styles
<b>word&minus;chars</b> or <b>word&minus;class</b>.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>specified</b></p>

<p style="margin-left:32%;">Similar to <b>normal</b>, but
<i>only</i> the specified characters, and not also
alphanumerics, are considered word characters.</p>

<p style="margin-left:22%;"><b>unspecified</b></p>

<p style="margin-left:32%;">The negation of specified. The
given characters are those which will <i>not</i> be
considered part of a word.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>shell</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Words are obtained by using the syntactic rules for
generating shell command arguments. In addition, special
tokens which are never command arguments such as
&lsquo;<b>()</b>&rsquo; are also treated as words.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>whitespace</b></p>

<p style="margin-left:32%;">Words are
whitespace&minus;delimited strings of characters.</p>

<p style="margin-left:22%; margin-top: 1em">The first three
of those rules usually use <b>$WORDCHARS</b>, but the value
in the parameter can be overridden by the style
<b>word&minus;chars</b>, which works in exactly the same way
as <b>$WORDCHARS</b>. In addition, the style
<b>word&minus;class</b> uses character class syntax to group
characters and takes precedence over <b>word&minus;chars</b>
if both are set. The <b>word&minus;class</b> style does not
include the surrounding brackets of the character class; for
example, &lsquo;<b>&minus;:[:alnum:]</b>&rsquo; is a valid
<b>word&minus;class</b> to include all alphanumerics plus
the characters &lsquo;<b>&minus;</b>&rsquo; and
&lsquo;<b>:</b>&rsquo;. Be careful including
&lsquo;<b>]</b>&rsquo;, &lsquo;<b>^</b>&rsquo; and
&lsquo;<b>&minus;</b>&rsquo; as these are special inside
character classes.</p>


<p style="margin-left:22%; margin-top: 1em"><b>word&minus;style</b>
may also have &lsquo;<b>&minus;subword</b>&rsquo; appended
to its value to turn on subword matching, as described
above.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>skip&minus;chars</b> is mostly useful for
<b>transpose&minus;words</b> and similar functions. If set,
it gives a count of characters starting at the cursor
position which will not be considered part of the word and
are treated as space, regardless of what they actually are.
For example, if</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:zle:transpose&minus;words&rsquo; skip&minus;chars
1</b></p>

<p style="margin-left:22%; margin-top: 1em">has been set,
and <b>transpose&minus;words&minus;match</b> is called with
the cursor on the <i>X</i> of <b>foo</b><i>X</i><b>bar</b>,
where <i>X</i> can be any character, then the resulting
expression is <b>bar</b><i>X</i><b>foo</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Finer grained
control can be obtained by setting the style
<b>word&minus;context</b> to an array of pairs of entries.
Each pair of entries consists of a <i>pattern</i> and a
<i>subcontext</i>. The shell argument the cursor is on is
matched against each <i>pattern</i> in turn until one
matches; if it does, the context is extended by a colon and
the corresponding <i>subcontext</i>. Note that the test is
made against the original word on the line, with no
stripping of quotes. Special handling is done between words:
the current context is examined and if it contains the
string <b>back</b>, the word before the cursor is
considered, else the word after cursor is considered. Some
examples are given below.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>skip&minus;whitespace&minus;first</b> is only used with
the <b>forward&minus;word</b> widget. If it is set to true,
then <b>forward&minus;word</b> skips any
non&minus;word&minus;characters, followed by any
non&minus;word&minus;characters: this is similar to the
behaviour of other word&minus;orientated widgets, and also
that used by other editors, however it differs from the
standard zsh behaviour. When using
<b>select&minus;word&minus;style</b> the widget is set in
the context <b>:zle:*</b> to <b>true</b> if the word style
is <b>bash</b> and <b>false</b> otherwise. It may be
overridden by setting it in the more specific context
<b>:zle:forward&minus;word*</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Here are some
examples of use of the styles, actually taken from the
simplified interface in
<b>select&minus;word&minus;style</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:zle:*&rsquo; word&minus;style standard <br>
zstyle &rsquo;:zle:*&rsquo; word&minus;chars
&rsquo;&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">Implements
bash&minus;style word handling for all widgets, i.e. only
alphanumerics are word characters; equivalent to setting the
parameter <b>WORDCHARS</b> empty for the given context.</p>

<p style="margin-left:32%; margin-top: 1em"><b>style
&rsquo;:zle:*kill*&rsquo; word&minus;style space</b></p>

<p style="margin-left:22%; margin-top: 1em">Uses
space&minus;delimited words for widgets with the word
&lsquo;kill&rsquo; in the name. Neither of the styles
<b>word&minus;chars</b> nor <b>word&minus;class</b> is used
in this case.</p>

<p style="margin-left:22%; margin-top: 1em">Here are some
examples of use of the <b>word&minus;context</b> style to
extend the context.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:zle:*&rsquo; word&minus;context &quot;*/*&quot; file
&quot;[[:space:]]&quot; whitespace <br>
zstyle &rsquo;:zle:transpose&minus;words:whitespace&rsquo;
word&minus;style shell <br>
zstyle &rsquo;:zle:transpose&minus;words:filename&rsquo;
word&minus;style normal <br>
zstyle &rsquo;:zle:transpose&minus;words:filename&rsquo;
word&minus;chars &rsquo;&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This provides
two different ways of using <b>transpose&minus;words</b>
depending on whether the cursor is on whitespace between
words or on a filename, here any word containing a <b>/</b>.
On whitespace, complete arguments as defined by standard
shell rules will be transposed. In a filename, only
alphanumerics will be transposed. Elsewhere, words will be
transposed using the default style for
<b>:zle:transpose&minus;words</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The word
matching and all the handling of <b>zstyle</b> settings is
actually implemented by the function
<b>match&minus;words&minus;by&minus;style</b>. This can be
used to create new user&minus;defined widgets. The calling
function should set the local parameter <b>curcontext</b> to
<b>:zle:</b><i>widget</i>, create the local parameter
<b>matched_words</b> and call
<b>match&minus;words&minus;by&minus;style</b> with no
arguments. On return, <b>matched_words</b> will be set to an
array with the elements: (1) the start of the line (2) the
word before the cursor (3) any non&minus;word characters
between that word and the cursor (4) any non&minus;word
character at the cursor position plus any remaining
non&minus;word characters before the next word, including
all characters specified by the <b>skip&minus;chars</b>
style, (5) the word at or following the cursor (6) any
non&minus;word characters following that word (7) the
remainder of the line. Any of the elements may be an empty
string; the calling function should test for this to decide
whether it can perform its function.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to pass options with arguments to
<b>match&minus;words&minus;by&minus;style</b> to override
the use of styles. The options are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="7%"></td>
<td width="20%">


<p><i>word&minus;style</i></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="20%">


<p><i>skip&minus;chars</i></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;c</b></p></td>
<td width="7%"></td>
<td width="20%">


<p><i>word&minus;class</i></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="7%"></td>
<td width="20%">


<p><i>word&minus;chars</i></p></td>
<td width="48%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="7%"></td>
<td width="20%">


<p><i>subword&minus;range</i></p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For example,
<b>match&minus;words&minus;by&minus;style &minus;w shell
&minus;c 0</b> may be used to extract the command argument
around the cursor.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>word&minus;context</b> style is implemented by the
function <b>match&minus;word&minus;context</b>. This should
not usually need to be called directly.</p>


<p style="margin-left:11%;"><b>copy&minus;earlier&minus;word</b></p>

<p style="margin-left:22%;">This widget works like a
combination of <b>insert&minus;last&minus;word</b> and
<b>copy&minus;prev&minus;shell&minus;word</b>. Repeated
invocations of the widget retrieve earlier words on the
relevant history line. With a numeric argument <i>N</i>,
insert the <i>N</i>th word from the history line; <i>N</i>
may be negative to count from the end of the line.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>insert&minus;last&minus;word</b> has been used to
retrieve the last word on a previous history line, repeated
invocations will replace that word with earlier words from
the same line.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise, the
widget applies to words on the line currently being edited.
The <b>widget</b> style can be set to the name of another
widget that should be called to retrieve words. This widget
must accept the same three arguments as
<b>insert&minus;last&minus;word</b>.</p>


<p style="margin-left:11%;"><b>cycle&minus;completion&minus;positions</b></p>

<p style="margin-left:22%;">After inserting an unambiguous
string into the command line, the new function based
completion system may know about multiple places in this
string where characters are missing or differ from at least
one of the possible matches. It will then place the cursor
on the position it considers to be the most interesting one,
i.e. the one where one can disambiguate between as many
matches as possible with as little typing as possible.</p>

<p style="margin-left:22%; margin-top: 1em">This widget
allows the cursor to be easily moved to the other
interesting spots. It can be invoked repeatedly to cycle
between all positions reported by the completion system.</p>


<p style="margin-left:11%;"><b>delete&minus;whole&minus;word&minus;match</b></p>

<p style="margin-left:22%;">This is another function which
works like the <b>&minus;match</b> functions described
immediately above, i.e. using styles to decide the word
boundaries. However, it is not a replacement for any
existing function.</p>

<p style="margin-left:22%; margin-top: 1em">The basic
behaviour is to delete the word around the cursor. There is
no numeric prefix handling; only the single word around the
cursor is considered. If the widget contains the string
<b>kill</b>, the removed text will be placed in the
cutbuffer for future yanking. This can be obtained by
defining <b>kill&minus;whole&minus;word&minus;match</b> as
follows:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
kill&minus;whole&minus;word&minus;match
delete&minus;whole&minus;word&minus;match</b></p>

<p style="margin-left:22%; margin-top: 1em">and then
binding the widget
<b>kill&minus;whole&minus;word&minus;match</b>.</p>


<p style="margin-left:11%;"><b>up&minus;line&minus;or&minus;beginning&minus;search</b>,
<b>down&minus;line&minus;or&minus;beginning&minus;search</b></p>

<p style="margin-left:22%;">These widgets are similar to
the builtin functions
<b>up&minus;line&minus;or&minus;search</b> and
<b>down&minus;line&minus;or&minus;search</b>: if in a
multiline buffer they move up or down within the buffer,
otherwise they search for a history line matching the start
of the current line. In this case, however, they search for
a line which matches the current line up to the current
cursor position, in the manner of
<b>history&minus;beginning&minus;search&minus;backward</b>
and <b>&minus;forward</b>, rather than the first word on the
line.</p>


<p style="margin-left:11%;"><b>edit&minus;command&minus;line</b></p>

<p style="margin-left:22%;">Edit the command line using
your visual editor, as in <b>ksh</b>.</p>

<p style="margin-left:32%; margin-top: 1em"><b>bindkey
&minus;M vicmd v edit&minus;command&minus;line</b></p>


<p style="margin-left:11%;"><b>history&minus;search&minus;end</b></p>

<p style="margin-left:22%;">This function implements the
widgets
<b>history&minus;beginning&minus;search&minus;backward&minus;end</b>
and
<b>history&minus;beginning&minus;search&minus;forward&minus;end</b>.
These commands work by first calling the corresponding
builtin widget (see &lsquo;History Control&rsquo; in
<i>zshzle</i>(1)) and then moving the cursor to the end of
the line. The original cursor position is remembered and
restored before calling the builtin widget a second time, so
that the same search is repeated to look farther through the
history.</p>

<p style="margin-left:22%; margin-top: 1em">Although you
<b>autoload</b> only one function, the commands to use it
are slightly different because it implements two
widgets.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
history&minus;beginning&minus;search&minus;backward&minus;end
\ <br>
history&minus;search&minus;end <br>
zle &minus;N
history&minus;beginning&minus;search&minus;forward&minus;end
\ <br>
history&minus;search&minus;end <br>
bindkey &rsquo;\e^P&rsquo;
history&minus;beginning&minus;search&minus;backward&minus;end
<br>
bindkey &rsquo;\e^N&rsquo;
history&minus;beginning&minus;search&minus;forward&minus;end</b></p>


<p style="margin-left:11%;"><b>history&minus;beginning&minus;search&minus;menu</b></p>

<p style="margin-left:22%;">This function implements yet
another form of history searching. The text before the
cursor is used to select lines from the history, as for
<b>history&minus;beginning&minus;search&minus;backward</b>
except that all matches are shown in a numbered menu. Typing
the appropriate digits inserts the full history line. Note
that leading zeroes must be typed (they are only shown when
necessary for removing ambiguity). The entire history is
searched; there is no distinction between forwards and
backwards.</p>

<p style="margin-left:22%; margin-top: 1em">With a prefix
argument, the search is not anchored to the start of the
line; the string typed by the use may appear anywhere in the
line in the history.</p>

<p style="margin-left:22%; margin-top: 1em">If the widget
name contains &lsquo;<b>&minus;end</b>&rsquo; the cursor is
moved to the end of the line inserted. If the widget name
contains &lsquo;<b>&minus;space</b>&rsquo; any space in the
text typed is treated as a wildcard and can match anything
(hence a leading space is equivalent to giving a prefix
argument). Both forms can be combined, for example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
history&minus;beginning&minus;search&minus;menu&minus;space&minus;end
\ <br>
history&minus;beginning&minus;search&minus;menu</b></p>


<p style="margin-left:11%;"><b>history&minus;pattern&minus;search</b></p>

<p style="margin-left:22%;">The function
<b>history&minus;pattern&minus;search</b> implements widgets
which prompt for a pattern with which to search the history
backwards or forwards. The pattern is in the usual zsh
format, however the first character may be <b>^</b> to
anchor the search to the start of the line, and the last
character may be <b>$</b> to anchor the search to the end of
the line. If the search was not anchored to the end of the
line the cursor is positioned just after the pattern
found.</p>

<p style="margin-left:22%; margin-top: 1em">The commands to
create bindable widgets are similar to those in the example
immediately above:</p>

<p style="margin-left:32%; margin-top: 1em"><b>autoload
&minus;U history&minus;pattern&minus;search <br>
zle &minus;N
history&minus;pattern&minus;search&minus;backward
history&minus;pattern&minus;search <br>
zle &minus;N
history&minus;pattern&minus;search&minus;forward
history&minus;pattern&minus;search</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>incarg</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Typing the keystrokes for this widget with the cursor
placed on or to the left of an integer causes that integer
to be incremented by one. With a numeric prefix argument,
the number is incremented by the amount of the argument
(decremented if the prefix argument is negative). The shell
parameter <b>incarg</b> may be set to change the default
increment to something other than one.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>bindkey
&rsquo;^X+&rsquo; incarg</b></p>


<p style="margin-left:11%;"><b>incremental&minus;complete&minus;word</b></p>

<p style="margin-left:22%;">This allows incremental
completion of a word. After starting this command, a list of
completion choices can be shown after every character you
type, which you can delete with <b>^H</b> or <b>DEL</b>.
Pressing return accepts the completion so far and returns
you to normal editing (that is, the command line is
<i>not</i> immediately executed). You can hit <b>TAB</b> to
do normal completion, <b>^G</b> to abort back to the state
when you started, and <b>^D</b> to list the matches.</p>

<p style="margin-left:22%; margin-top: 1em">This works only
with the new function based completion system.</p>

<p style="margin-left:32%; margin-top: 1em"><b>bindkey
&rsquo;^Xi&rsquo;
incremental&minus;complete&minus;word</b></p>


<p style="margin-left:11%;"><b>insert&minus;composed&minus;char</b></p>

<p style="margin-left:22%;">This function allows you to
compose characters that don&rsquo;t appear on the keyboard
to be inserted into the command line. The command is
followed by two keys corresponding to ASCII characters
(there is no prompt). For accented characters, the two keys
are a base character followed by a code for the accent,
while for other special characters the two characters
together form a mnemonic for the character to be inserted.
The two&minus;character codes are a subset of those given by
RFC 1345 (see for example
<b>http://www.faqs.org/rfcs/rfc1345.html</b>).</p>

<p style="margin-left:22%; margin-top: 1em">The function
may optionally be followed by up to two characters which
replace one or both of the characters read from the
keyboard; if both characters are supplied, no input is read.
For example, <b>insert&minus;composed&minus;char a:</b> can
be used within a widget to insert an a with umlaut into the
command line. This has the advantages over use of a literal
character that it is more portable.</p>

<p style="margin-left:22%; margin-top: 1em">For best
results zsh should have been built with support for
multibyte characters (configured with
<b>&minus;&minus;enable&minus;multibyte</b>); however, the
function works for the limited range of characters available
in single&minus;byte character sets such as
ISO&minus;8859&minus;1.</p>

<p style="margin-left:22%; margin-top: 1em">The character
is converted into the local representation and inserted into
the command line at the cursor position. (The conversion is
done within the shell, using whatever facilities the C
library provides.) With a numeric argument, the character
and its code are previewed in the status line</p>

<p style="margin-left:22%; margin-top: 1em">The function
may be run outside zle in which case it prints the character
(together with a newline) to standard output. Input is still
read from keystrokes.</p>

<p style="margin-left:22%; margin-top: 1em">See
<b>insert&minus;unicode&minus;char</b> for an alternative
way of inserting Unicode characters using their hexadecimal
character number.</p>

<p style="margin-left:22%; margin-top: 1em">The set of
accented characters is reasonably complete up to Unicode
character U+0180, the set of special characters less so.
However, it is very sporadic from that point. Adding new
characters is easy, however; see the function
<b>define&minus;composed&minus;chars</b>. Please send any
additions to <b>zsh&minus;workers@zsh.org</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The codes for
the second character when used to accent the first are as
follows. Note that not every character can take every
accent.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>!</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Grave.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&rsquo;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Acute.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&gt;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Circumflex.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>?</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Tilde. (This is not <b>~</b> as RFC 1345 does not assume
that character is present on the keyboard.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&minus;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Macron. (A horizontal bar over the base character.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>(</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Breve. (A shallow dish shape over the base
character.)</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>.</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Dot above the base character, or in the case of <b>i</b>
no dot, or in the case of <b>L</b> and <b>l</b> a centered
dot.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>:</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Diaeresis (Umlaut).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>c</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Cedilla.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>_</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Underline, however there are currently no underlined
characters.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>/</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Stroke through the base character.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&quot;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Double acute (only supported on a few letters).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Ogonek. (A little forward facing hook at the bottom
right of the character.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&lt;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Caron. (A little v over the letter.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>0</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Circle over the base character.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>2</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Hook over the base character.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>9</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>Horn over the base character.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The most common
characters from the Arabic, Cyrillic, Greek and Hebrew
alphabets are available; consult RFC 1345 for the
appropriate sequences. In addition, a set of two letter
codes not in RFC 1345 are available for the
double&minus;width characters corresponding to ASCII
characters from <b>!</b> to <b>~</b> (0x21 to 0x7e) by
preceding the character with <b>^</b>, for example <b>^A</b>
for a double&minus;width <b>A</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The following
other two&minus;character sequences are understood. <br>
ASCII characters</p>

<p style="margin-left:32%;">These are already present on
most keyboards:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&lt;(</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Left square bracket</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>//</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Backslash (solidus)</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>)&gt;</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Right square bracket</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>(!</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Left brace (curly bracket)</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>!!</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Vertical bar (pipe symbol)</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>!)</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Right brace (curly bracket)</p></td>
<td width="26%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;?</b></p></td>
<td width="7%"></td>
<td width="42%">


<p>Tilde</p></td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:22%;">Special letters</p>

<p style="margin-left:32%;">Characters found in various
variants of the Latin alphabet:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>ss</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Eszett (scharfes S)</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>D&minus;</b>, <b>d&minus;</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Eth</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>TH</b>, <b>th</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Thorn</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>kk</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Kra</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>&rsquo;n</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>&rsquo;n</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>NG</b>, <b>ng</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Ng</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>OI</b>, <b>oi</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>Oi</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>yr</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>yr</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>ED</b></p></td>
<td width="1%"></td>
<td width="30%">


<p>ezh</p></td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:22%;">Currency symbols</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Ct</b></p></td>
<td width="7%"></td>
<td width="57%">


<p>Cent</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Pd</b></p></td>
<td width="7%"></td>
<td width="57%">


<p>Pound sterling (also lira and others)</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Cu</b></p></td>
<td width="7%"></td>
<td width="57%">


<p>Currency</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Ye</b></p></td>
<td width="7%"></td>
<td width="57%">


<p>Yen</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Eu</b></p></td>
<td width="7%"></td>
<td width="57%">


<p>Euro (N.B. not in RFC 1345)</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:22%;">Punctuation characters</p>

<p style="margin-left:32%;">References to &quot;right&quot;
quotes indicate the shape (like a 9 rather than 6) rather
than their grammatical use. (For example, a
&quot;right&quot; low double quote is used to open
quotations in German.)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>!I</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Inverted exclamation mark</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>BB</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Broken vertical bar</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>SE</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Section</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Co</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Copyright</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Spanish feminine ordinal indicator</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&lt;&lt;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Left guillemet</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;&minus;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Soft hyphen</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>Rg</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Registered trade mark</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>PI</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Pilcrow (paragraph)</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Spanish masculine ordinal indicator</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&gt;&gt;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Right guillemet</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>?I</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Inverted question mark</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;1</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Hyphen</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>En dash</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Em dash</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;3</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Horizontal bar</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>:3</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Vertical ellipsis</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>.3</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Horizontal midline ellipsis</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>!2</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Double vertical line</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>=2</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Double low line</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;6</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Left single quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;9</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Right single quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>.9</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>&quot;Right&quot; low quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>9&rsquo;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Reversed &quot;right&quot; quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&quot;6</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Left double quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&quot;9</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Right double quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>:9</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>&quot;Right&quot; low double quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>9&quot;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Reversed &quot;right&quot; double quote</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>/&minus;</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Dagger</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>/=</b></p></td>
<td width="7%"></td>
<td width="54%">


<p>Double dagger</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:22%;">Mathematical symbols</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>DG</b></p></td>
<td width="7%"></td>
<td width="10%">


<p>Degree</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;2</b>,
<b>+&minus;</b>, <b>&minus;+</b></p>

<p style="margin-left:32%;">&minus; sign, +/&minus; sign,
&minus;/+ sign</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>2S</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Superscript 2</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>3S</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Superscript 3</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>1S</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Superscript 1</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>My</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Micro</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>.M</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Middle dot</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>14</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Quarter</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>12</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Half</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>34</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Three quarters</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>*X</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Multiplication</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;:</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Division</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%0</b></p></td>
<td width="7%"></td>
<td width="22%">


<p>Per mille</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>FA</b>, <b>TE</b>,
<b>/0</b></p>

<p style="margin-left:32%;">For all, there exists, empty
set</p>

<p style="margin-left:22%;"><b>dP</b>, <b>DE</b>,
<b>NB</b></p>

<p style="margin-left:32%;">Partial derivative, delta
(increment), del (nabla)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>(&minus;</b>, <b>&minus;)</b></p></td>
<td width="1%"></td>
<td width="31%">


<p>Element of, contains</p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>*P</b>, <b>+Z</b></p></td>
<td width="1%"></td>
<td width="31%">


<p>Product, sum</p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:22%;"><b>*&minus;</b>, <b>Ob</b>,
<b>Sb</b></p>

<p style="margin-left:32%;">Asterisk, ring, bullet</p>

<p style="margin-left:22%;"><b>RT</b>, <b>0(</b>,
<b>00</b></p>

<p style="margin-left:32%;">Root sign, proportional to,
infinity</p>

<p style="margin-left:22%;">Other symbols <b><br>
cS</b>, <b>cH</b>, <b>cD</b>, <b>cC</b></p>

<p style="margin-left:32%;">Card suits: spades, hearts,
diamonds, clubs</p>

<p style="margin-left:22%;"><b>Md</b>, <b>M8</b>,
<b>M2</b>, <b>Mb</b>, <b>Mx</b>, <b>MX</b></p>

<p style="margin-left:32%;">Musical notation: crotchet
(quarter note), quaver (eighth note), semiquavers (sixteenth
notes), flag sign, natural sign, sharp sign</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>Fm</b>, <b>Ml</b></p></td>
<td width="1%"></td>
<td width="19%">


<p>Female, male</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:22%;">Accents on their own</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;&gt;</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Circumflex (same as caret, <b>^</b>)</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;!</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Grave (same as backtick, <b>&lsquo;</b>)</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;,</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Cedilla</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;:</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Diaeresis (Umlaut)</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;m</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Macron</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&rsquo;&rsquo;</b></p></td>
<td width="7%"></td>
<td width="45%">


<p>Acute</p></td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>insert&minus;files</b></p>

<p style="margin-left:22%;">This function allows you type a
file pattern, and see the results of the expansion at each
step. When you hit return, all expansions are inserted into
the command line.</p>

<p style="margin-left:32%; margin-top: 1em"><b>bindkey
&rsquo;^Xf&rsquo; insert&minus;files</b></p>


<p style="margin-left:11%;"><b>insert&minus;unicode&minus;char</b></p>

<p style="margin-left:22%;">When first executed, the user
inputs a set of hexadecimal digits. This is terminated with
another call to <b>insert&minus;unicode&minus;char</b>. The
digits are then turned into the corresponding Unicode
character. For example, if the widget is bound to
<b>^XU</b>, the character sequence &lsquo;<b>^XU 4 c
^XU</b>&rsquo; inserts <b>L</b> (Unicode U+004c).</p>

<p style="margin-left:22%; margin-top: 1em">See
<b>insert&minus;composed&minus;char</b> for a way of
inserting characters using a two&minus;character
mnemonic.</p>


<p style="margin-left:11%;"><b>narrow&minus;to&minus;region
[ &minus;p</b> <i>pre</i> <b>] [ &minus;P</b> <i>post</i>
<b>] <br>
[ &minus;S</b> <i>statepm</i> <b>| &minus;R</b>
<i>statepm</i> <b>] [ &minus;n ] [</b> <i>start end</i>
<b>]</b>) <b><br>
narrow&minus;to&minus;region&minus;invisible</b></p>

<p style="margin-left:22%;">Narrow the editable portion of
the buffer to the region between the cursor and the mark,
which may be in either order. The region may not be
empty.</p>


<p style="margin-left:22%; margin-top: 1em"><b>narrow&minus;to&minus;region</b>
may be used as a widget or called as a function from a
user&minus;defined widget; by default, the text outside the
editable area remains visible. A <b>recursive&minus;edit</b>
is performed and the original widening status is then
restored. Various options and arguments are available when
it is called as a function.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;p</b> <i>pretext</i> and <b>&minus;P</b>
<i>posttext</i> may be used to replace the text before and
after the display for the duration of the function; either
or both may be an empty string.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
<b>&minus;n</b> is also given, <i>pretext</i> or
<i>posttext</i> will only be inserted if there is text
before or after the region respectively which will be made
invisible.</p>

<p style="margin-left:22%; margin-top: 1em">Two numeric
arguments may be given which will be used instead of the
cursor and mark positions.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;S</b> <i>statepm</i> is used to narrow according
to the other options while saving the original state in the
parameter with name <i>statepm</i>, while the option
<b>&minus;R</b> <i>statepm</i> is used to restore the state
from the parameter; note in both cases the <i>name</i> of
the parameter is required. In the second case, other options
and arguments are irrelevant. When this method is used, no
<b>recursive&minus;edit</b> is performed; the calling widget
should call this function with the option <b>&minus;S</b>,
perform its own editing on the command line or pass control
to the user via &lsquo;<b>zle
recursive&minus;edit</b>&rsquo;, then call this function
with the option <b>&minus;R</b>. The argument <i>statepm</i>
must be a suitable name for an ordinary parameter, except
that parameters beginning with the prefix <b>_ntr_</b> are
reserved for use within <b>narrow&minus;to&minus;region</b>.
Typically the parameter will be local to the calling
function.</p>


<p style="margin-left:22%; margin-top: 1em"><b>narrow&minus;to&minus;region&minus;invisible</b>
is a simple widget which calls
<b>narrow&minus;to&minus;region</b> with arguments which
replace any text outside the region with
&lsquo;<b>...</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The display is
restored (and the widget returns) upon any zle command which
would usually cause the line to be accepted or aborted.
Hence an additional such command is required to accept or
abort the current line.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status of both widgets is zero if the line was accepted,
else non&minus;zero.</p>

<p style="margin-left:22%; margin-top: 1em">Here is a
trivial example of a widget using this feature.</p>

<p style="margin-left:32%;"><b>local state <br>
narrow&minus;to&minus;region &minus;p $&rsquo;Editing
restricted region\n&rsquo; \ <br>
&minus;P &rsquo;&rsquo; &minus;S state <br>
zle recursive&minus;edit <br>
narrow&minus;to&minus;region &minus;R state</b></p>

<p style="margin-left:11%;"><b>predict&minus;on</b></p>

<p style="margin-left:22%;">This set of functions
implements predictive typing using history search. After
<b>predict&minus;on</b>, typing characters causes the editor
to look backward in the history for the first line beginning
with what you have typed so far. After
<b>predict&minus;off</b>, editing returns to normal for the
line found. In fact, you often don&rsquo;t even need to use
<b>predict&minus;off</b>, because if the line doesn&rsquo;t
match something in the history, adding a key performs
standard completion, and then inserts itself if no
completions were found. However, editing in the middle of a
line is liable to confuse prediction; see the <b>toggle</b>
style below.</p>

<p style="margin-left:22%; margin-top: 1em">With the
function based completion system (which is needed for this),
you should be able to type <b>TAB</b> at almost any point to
advance the cursor to the next
&lsquo;&lsquo;interesting&rsquo;&rsquo; character position
(usually the end of the current word, but sometimes
somewhere in the middle of the word). And of course as soon
as the entire line is what you want, you can accept with
return, without needing to move the cursor to the end
first.</p>

<p style="margin-left:22%; margin-top: 1em">The first time
<b>predict&minus;on</b> is used, it creates several
additional widget functions: <b><br>
delete&minus;backward&minus;and&minus;predict</b></p>

<p style="margin-left:32%;">Replaces the
<b>backward&minus;delete&minus;char</b> widget. You do not
need to bind this yourself.</p>


<p style="margin-left:22%;"><b>insert&minus;and&minus;predict</b></p>

<p style="margin-left:32%;">Implements predictive typing by
replacing the <b>self&minus;insert</b> widget. You do not
need to bind this yourself.</p>

<p style="margin-left:22%;"><b>predict&minus;off</b></p>

<p style="margin-left:32%;">Turns off predictive
typing.</p>

<p style="margin-left:22%; margin-top: 1em">Although you
<b>autoload</b> only the <b>predict&minus;on</b> function,
it is necessary to create a keybinding for
<b>predict&minus;off</b> as well.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
predict&minus;on <br>
zle &minus;N predict&minus;off <br>
bindkey &rsquo;^X^Z&rsquo; predict&minus;on <br>
bindkey &rsquo;^Z&rsquo; predict&minus;off</b></p>


<p style="margin-left:11%;"><b>read&minus;from&minus;minibuffer</b></p>

<p style="margin-left:22%;">This is most useful when called
as a function from inside a widget, but will work correctly
as a widget in its own right. It prompts for a value below
the current command line; a value may be input using all of
the standard zle operations (and not merely the restricted
set available when executing, for example,
<b>execute&minus;named&minus;cmd</b>). The value is then
returned to the calling function in the parameter
<b>$REPLY</b> and the editing buffer restored to its
previous state. If the read was aborted by a keyboard break
(typically <b>^G</b>), the function returns status 1 and
<b>$REPLY</b> is not set.</p>

<p style="margin-left:22%; margin-top: 1em">If one argument
is supplied to the function it is taken as a prompt,
otherwise &lsquo;<b>?</b> &rsquo; is used. If two arguments
are supplied, they are the prompt and the initial value of
<b>$LBUFFER</b>, and if a third argument is given it is the
initial value of <b>$RBUFFER</b>. This provides a default
value and starting cursor placement. Upon return the entire
buffer is the value of <b>$REPLY</b>.</p>

<p style="margin-left:22%; margin-top: 1em">One option is
available: &lsquo;<b>&minus;k</b> <i>num</i>&rsquo;
specifies that <i>num</i> characters are to be read instead
of a whole line. The line editor is not invoked recursively
in this case, so depending on the terminal settings the
input may not be visible, and only the input keys are placed
in <b>$REPLY</b>, not the entire buffer. Note that unlike
the <b>read</b> builtin <i>num</i> must be given; there is
no default.</p>

<p style="margin-left:22%; margin-top: 1em">The name is a
slight misnomer, as in fact the shell&rsquo;s own minibuffer
is not used. Hence it is still possible to call
<b>executed&minus;named&minus;cmd</b> and similar functions
while reading a value.</p>

<p style="margin-left:11%;"><b>replace&minus;string</b>,
<b>replace&minus;pattern <br>
replace&minus;string&minus;again</b>,
<b>replace&minus;pattern&minus;again</b></p>

<p style="margin-left:22%;">The function
<b>replace&minus;string</b> implements three widgets. If
defined under the same name as the function, it prompts for
two strings; the first (source) string will be replaced by
the second everywhere it occurs in the line editing
buffer.</p>

<p style="margin-left:22%; margin-top: 1em">If the widget
name contains the word &lsquo;<b>pattern</b>&rsquo;, for
example by defining the widget using the command
&lsquo;<b>zle &minus;N replace&minus;pattern
replace&minus;string</b>&rsquo;, then the matching is
performed using zsh patterns. All zsh extended globbing
patterns can be used in the source string; note that unlike
filename generation the pattern does not need to match an
entire word, nor do glob qualifiers have any effect. In
addition, the replacement string can contain parameter or
command substitutions. Furthermore, a
&lsquo;<b>&amp;</b>&rsquo; in the replacement string will be
replaced with the matched source string, and a backquoted
digit &lsquo;<b>\</b><i>N</i>&rsquo; will be replaced by the
<i>N</i>th parenthesised expression matched. The form
&lsquo;<b>\{</b><i>N</i><b>}</b>&rsquo; may be used to
protect the digit from following digits.</p>

<p style="margin-left:22%; margin-top: 1em">If the widget
instead contains the word &lsquo;<b>regex</b>&rsquo; (or
&lsquo;<b>regexp</b>&rsquo;), then the matching is performed
using regular expressions, respecting the setting of the
option <b>RE_MATCH_PCRE</b> (see the description of the
function <b>regexp&minus;replace</b> below). The special
replacement facilities described above for pattern matching
are available.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
previous source or replacement string will not be offered
for editing. However, this feature can be activated by
setting the style <b>edit&minus;previous</b> in the context
<b>:zle:</b><i>widget</i> (for example,
<b>:zle:replace&minus;string</b>) to <b>true</b>. In
addition, a positive numeric argument forces the previous
values to be offered, a negative or zero argument forces
them not to be.</p>

<p style="margin-left:22%; margin-top: 1em">The function
<b>replace&minus;string&minus;again</b> can be used to
repeat the previous replacement; no prompting is done. As
with <b>replace&minus;string</b>, if the name of the widget
contains the word &lsquo;<b>pattern</b>&rsquo; or
&lsquo;<b>regex</b>&rsquo;, pattern or regular expression
matching is performed, else a literal string replacement.
Note that the previous source and replacement text are the
same whether pattern, regular expression or string matching
is used.</p>

<p style="margin-left:22%; margin-top: 1em">In addition,
<b>replace&minus;string</b> shows the previous replacement
above the prompt, so long as there was one during the
current session; if the source string is empty, that
replacement will be repeated without the widget prompting
for a replacement string.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
starting from the line:</p>

<p style="margin-left:32%; margin-top: 1em"><b>print This
line contains fan and fond</b></p>

<p style="margin-left:22%; margin-top: 1em">and invoking
<b>replace&minus;pattern</b> with the source string
&lsquo;<b>f(?)n</b>&rsquo; and the replacement string
&lsquo;<b>c\1r</b>&rsquo; produces the not very useful
line:</p>

<p style="margin-left:32%; margin-top: 1em"><b>print This
line contains car and cord</b></p>

<p style="margin-left:22%; margin-top: 1em">The range of
the replacement string can be limited by using the
<b>narrow&minus;to&minus;region&minus;invisible</b> widget.
One limitation of the current version is that <b>undo</b>
will cycle through changes to the replacement and source
strings before undoing the replacement itself.</p>


<p style="margin-left:11%;"><b>send&minus;invisible</b></p>

<p style="margin-left:22%;">This is similar to
read&minus;from&minus;minibuffer in that it may be called as
a function from a widget or as a widget of its own, and
interactively reads input from the keyboard. However, the
input being typed is concealed and a string of asterisks
(&lsquo;<b>*</b>&rsquo;) is shown instead. The value is
saved in the parameter <b>$INVISIBLE</b> to which a
reference is inserted into the editing buffer at the
restored cursor position. If the read was aborted by a
keyboard break (typically <b>^G</b>) or another escape from
editing such as <b>push&minus;line</b>, <b>$INVISIBLE</b> is
set to empty and the original buffer is restored
unchanged.</p>

<p style="margin-left:22%; margin-top: 1em">If one argument
is supplied to the function it is taken as a prompt,
otherwise &lsquo;<b>Non&minus;echoed text:</b> &rsquo; is
used (as in emacs). If a second and third argument are
supplied they are used to begin and end the reference to
<b>$INVISIBLE</b> that is inserted into the buffer. The
default is to open with <b>${</b>, then <b>INVISIBLE</b>,
and close with <b>}</b>, but many other effects are
possible.</p>


<p style="margin-left:11%;"><b>smart&minus;insert&minus;last&minus;word</b></p>

<p style="margin-left:22%;">This function may replace the
<b>insert&minus;last&minus;word</b> widget, like so:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
insert&minus;last&minus;word
smart&minus;insert&minus;last&minus;word</b></p>

<p style="margin-left:22%; margin-top: 1em">With a numeric
prefix, or when passed command line arguments in a call from
another widget, it behaves like
<b>insert&minus;last&minus;word</b>, except that words in
comments are ignored when <b>INTERACTIVE_COMMENTS</b> is
set.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise, the
rightmost &lsquo;&lsquo;interesting&rsquo;&rsquo; word from
the previous command is found and inserted. The default
definition of &lsquo;&lsquo;interesting&rsquo;&rsquo; is
that the word contains at least one alphabetic character,
slash, or backslash. This definition may be overridden by
use of the <b>match</b> style. The context used to look up
the style is the widget name, so usually the context is
<b>:insert&minus;last&minus;word</b>. However, you can bind
this function to different widgets to use different
patterns:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
insert&minus;last&minus;assignment
smart&minus;insert&minus;last&minus;word <br>
zstyle :insert&minus;last&minus;assignment match
&rsquo;[[:alpha:]][][[:alnum:]]#=*&rsquo; <br>
bindkey &rsquo;\e=&rsquo;
insert&minus;last&minus;assignment</b></p>

<p style="margin-left:22%; margin-top: 1em">If no
interesting word is found and the <b>auto&minus;previous</b>
style is set to a true value, the search continues upward
through the history. When <b>auto&minus;previous</b> is
unset or false (the default), the widget must be invoked
repeatedly in order to search earlier history lines.</p>


<p style="margin-left:11%;"><b>transpose&minus;lines</b></p>

<p style="margin-left:22%;">Only useful with a
multi&minus;line editing buffer; the lines here are lines
within the current on&minus;screen buffer, not history
lines. The effect is similar to the function of the same
name in Emacs.</p>

<p style="margin-left:22%; margin-top: 1em">Transpose the
current line with the previous line and move the cursor to
the start of the next line. Repeating this (which can be
done by providing a positive numeric prefix argument) has
the effect of moving the line above the cursor down by a
number of lines.</p>

<p style="margin-left:22%; margin-top: 1em">With a negative
numeric prefix argument, requires two lines above the
cursor. These two lines are transposed and the cursor moved
to the start of the previous line. Using a numeric prefix
less than &minus;1 has the effect of moving the line above
the cursor up by minus that number of lines.</p>

<p style="margin-left:11%;"><b>which&minus;command</b></p>

<p style="margin-left:22%;">This function is a
drop&minus;in replacement for the builtin widget
<b>which&minus;command</b>. It has enhanced behaviour, in
that it correctly detects whether or not the command word
needs to be expanded as an alias; if so, it continues
tracing the command word from the expanded alias until it
reaches the command that will be executed.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>whence</b> is available in the context
<b>:zle:$WIDGET</b>; this may be set to an array to give the
command and options that will be used to investigate the
command word found. The default is <b>whence
&minus;c</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Utility
Functions</b> <br>
These functions are useful in constructing widgets. They
should be loaded with &lsquo;<b>autoload &minus;U</b>
<i>function</i>&rsquo; and called as indicated from
user&minus;defined widgets. <b><br>
split&minus;shell&minus;arguments</b></p>

<p style="margin-left:22%;">This function splits the line
currently being edited into shell arguments and whitespace.
The result is stored in the array <b>reply</b>. The array
contains all the parts of the line in order, starting with
any whitespace before the first argument, and finishing with
any whitespace after the last argument. Hence (so long as
the option <b>KSH_ARRAYS</b> is not set) whitespace is given
by odd indices in the array and arguments by even indices.
Note that no stripping of quotes is done; joining together
all the elements of <b>reply</b> in order is guaranteed to
produce the original line.</p>

<p style="margin-left:22%; margin-top: 1em">The parameter
<b>REPLY</b> is set to the index of the word in <b>reply</b>
which contains the character after the cursor, where the
first element has index 1. The parameter <b>REPLY2</b> is
set to the index of the character under the cursor in that
word, where the first character has index 1.</p>

<p style="margin-left:22%; margin-top: 1em">Hence
<b>reply</b>, <b>REPLY</b> and <b>REPLY2</b> should all be
made local to the enclosing function.</p>

<p style="margin-left:22%; margin-top: 1em">See the
function <b>modify&minus;current&minus;argument</b>,
described below, for an example of how to call this
function.</p>


<p style="margin-left:11%;"><b>modify&minus;current&minus;argument</b>
<i>expr&minus;using&minus;</i><b>$ARG</b></p>

<p style="margin-left:22%;">This function provides a simple
method of allowing user&minus;defined widgets to modify the
command line argument under the cursor (or immediately to
the left of the cursor if the cursor is between arguments).
The argument should be an expression which when evaluated
operates on the shell parameter <b>ARG</b>, which will have
been set to the command line argument under the cursor. The
expression should be suitably quoted to prevent it being
evaluated too early.</p>

<p style="margin-left:22%; margin-top: 1em">For example, a
user&minus;defined widget containing the following code
converts the characters in the argument under the cursor
into all upper case:</p>


<p style="margin-left:32%; margin-top: 1em"><b>modify&minus;current&minus;argument
&rsquo;${(U)ARG}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">The following
strips any quoting from the current word (whether
backslashes or one of the styles of quotes), and replaces it
with single quoting throughout:</p>


<p style="margin-left:32%; margin-top: 1em"><b>modify&minus;current&minus;argument
&rsquo;${(qq)${(Q)ARG}}&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Styles</b>
<br>
The behavior of several of the above widgets can be
controlled by the use of the <b>zstyle</b> mechanism. In
particular, widgets that interact with the completion system
pass along their context to any completions that they
invoke. <b><br>
break&minus;keys</b></p>

<p style="margin-left:22%;">This style is used by the
<b>incremental&minus;complete&minus;word</b> widget. Its
value should be a pattern, and all keys matching this
pattern will cause the widget to stop incremental completion
without the key having any further effect. Like all styles
used directly by
<b>incremental&minus;complete&minus;word</b>, this style is
looked up using the context
&lsquo;<b>:incremental</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>completer</b></p>

<p style="margin-left:22%;">The
<b>incremental&minus;complete&minus;word</b> and
<b>insert&minus;and&minus;predict</b> widgets set up their
top&minus;level context name before calling completion. This
allows one to define different sets of completer functions
for normal completion and for these widgets. For example, to
use completion, approximation and correction for normal
completion, completion and correction for incremental
completion and only completion for prediction one could
use:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer \ <br>
_complete _correct _approximate <br>
zstyle &rsquo;:completion:incremental:*&rsquo; completer \
<br>
_complete _correct <br>
zstyle &rsquo;:completion:predict:*&rsquo; completer \ <br>
_complete</b></p>

<p style="margin-left:22%; margin-top: 1em">It is a good
idea to restrict the completers used in prediction, because
they may be automatically invoked as you type. The
<b>_list</b> and <b>_menu</b> completers should never be
used with prediction. The <b>_approximate</b>,
<b>_correct</b>, <b>_expand</b>, and <b>_match</b>
completers may be used, but be aware that they may change
characters anywhere in the word behind the cursor, so you
need to watch carefully that the result is what you
intended.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>cursor</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The <b>insert&minus;and&minus;predict</b> widget uses
this style, in the context &lsquo;<b>:predict</b>&rsquo;, to
decide where to place the cursor after completion has been
tried. Values are:</p></td></tr>
</table>

<p style="margin-left:22%;"><b>complete</b></p>

<p style="margin-left:32%;">The cursor is left where it was
when completion finished, but only if it is after a
character equal to the one just inserted by the user. If it
is after another character, this value is the same as
&lsquo;<b>key</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p><b>key</b></p></td>
<td width="6%"></td>
<td width="68%">


<p>The cursor is left after the <i>n</i>th occurrence of
the character just inserted, where <i>n</i> is the number of
times that character appeared in the word before completion
was attempted. In short, this has the effect of leaving the
cursor after the character just typed even if the completion
code found out that no other characters need to be inserted
at that position.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Any other value
for this style unconditionally leaves the cursor at the
position where the completion code left it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>list</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">When using the
<b>incremental&minus;complete&minus;word</b> widget, this
style says if the matches should be listed on every key
press (if they fit on the screen). Use the context prefix
&lsquo;<b>:completion:incremental</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The
<b>insert&minus;and&minus;predict</b> widget uses this style
to decide if the completion should be shown even if there is
only one possible completion. This is done if the value of
this style is the string <b>always</b>. In this case the
context is &lsquo;<b>:predict</b>&rsquo; (<i>not</i>
&lsquo;<b>:completion:predict</b>&rsquo;).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>match</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">This style is used by
<b>smart&minus;insert&minus;last&minus;word</b> to provide a
pattern (using full <b>EXTENDED_GLOB</b> syntax) that
matches an interesting word. The context is the name of the
widget to which
<b>smart&minus;insert&minus;last&minus;word</b> is bound
(see above). The default behavior of
<b>smart&minus;insert&minus;last&minus;word</b> is
equivalent to:</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
:insert&minus;last&minus;word match
&rsquo;*[[:alpha:]/\\]*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">However, you
might want to include words that contain spaces:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
:insert&minus;last&minus;word match
&rsquo;*[[:alpha:][:space:]/\\]*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">Or include
numbers as long as the word is at least two characters
long:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
:insert&minus;last&minus;word match
&rsquo;*([[:digit:]]?|[[:alpha:]/\\])*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">The above
example causes redirections like &quot;2&gt;&quot; to be
included.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>prompt</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">The
<b>incremental&minus;complete&minus;word</b> widget shows
the value of this style in the status line during
incremental completion. The string value may contain any of
the following substrings in the manner of the <b>PS1</b> and
other prompt parameters:</p></td></tr>
</table>

<p style="margin-left:22%;"><b>%c</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%"></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Replaced by the name of the
completer function that generated the matches (without the
leading underscore).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%l</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>When the <b>list</b> style is set, replaced by
&lsquo;<b>...</b>&rsquo; if the list of matches is too long
to fit on the screen and with an empty string otherwise. If
the <b>list</b> style is &lsquo;false&rsquo; or not set,
&lsquo;<b>%l</b>&rsquo; is always removed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%n</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by the number of matches generated.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by &lsquo;<b>&minus;no match&minus;</b>&rsquo;,
&lsquo;<b>&minus;no prefix&minus;</b>&rsquo;, or an empty
string if there is no completion matching the word on the
line, if the matches have no common prefix different from
the word on the line, or if there is such a common prefix,
respectively.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>%u</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Replaced by the unambiguous part of all matches, if
there is any, and if it is different from the word on the
line.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Like
&lsquo;<b>break&minus;keys</b>&rsquo;, this uses the
&lsquo;<b>:incremental</b>&rsquo; context.</p>

<p style="margin-left:11%;"><b>stop&minus;keys</b></p>

<p style="margin-left:22%;">This style is used by the
<b>incremental&minus;complete&minus;word</b> widget. Its
value is treated similarly to the one for the
<b>break&minus;keys</b> style (and uses the same context:
&lsquo;<b>:incremental</b>&rsquo;). However, in this case
all keys matching the pattern given as its value will stop
incremental completion and will then execute their usual
function.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>toggle</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This boolean style is used by <b>predict&minus;on</b>
and its related widgets in the context
&lsquo;<b>:predict</b>&rsquo;. If set to one of the standard
&lsquo;true&rsquo; values, predictive typing is
automatically toggled off in situations where it is unlikely
to be useful, such as when editing a multi&minus;line buffer
or after moving into the middle of a line and then deleting
a character. The default is to leave prediction turned on
until an explicit call to <b>predict&minus;off</b>.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>verbose</b></p>

<p style="margin-left:22%;">This boolean style is used by
<b>predict&minus;on</b> and its related widgets in the
context &lsquo;<b>:predict</b>&rsquo;. If set to one of the
standard &lsquo;true&rsquo; values, these widgets display a
message below the prompt when the predictive state is
toggled. This is most useful in combination with the
<b>toggle</b> style. The default does not display these
messages.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>widget</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This style is similar to the <b>command</b> style: For
widget functions that use <b>zle</b> to call other widgets,
this style can sometimes be used to override the widget
which is called. The context for this style is the name of
the calling widget (<i>not</i> the name of the calling
function, because one function may be bound to multiple
widget names).</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
:copy&minus;earlier&minus;word widget
smart&minus;insert&minus;last&minus;word</b></p>

<p style="margin-left:22%; margin-top: 1em">Check the
documentation for the calling widget or function to
determine whether the <b>widget</b> style is used.</p>

<h2>EXCEPTION HANDLING
<a name="EXCEPTION HANDLING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Two functions
are provided to enable zsh to provide exception handling in
a form that should be familiar from other languages. <b><br>
throw</b> <i>exception</i></p>

<p style="margin-left:22%;">The function <b>throw</b>
throws the named <i>exception</i>. The name is an arbitrary
string and is only used by the <b>throw</b> and <b>catch</b>
functions. An exception is for the most part treated the
same as a shell error, i.e. an unhandled exception will
cause the shell to abort all processing in a function or
script and to return to the top level in an interactive
shell.</p>

<p style="margin-left:11%;"><b>catch</b>
<i>exception&minus;pattern</i></p>

<p style="margin-left:22%;">The function <b>catch</b>
returns status zero if an exception was thrown and the
pattern <i>exception&minus;pattern</i> matches its name.
Otherwise it returns status 1.
<i>exception&minus;pattern</i> is a standard shell pattern,
respecting the current setting of the <b>EXTENDED_GLOB</b>
option. An alias <b>catch</b> is also defined to prevent the
argument to the function from matching filenames, so
patterns may be used unquoted. Note that as exceptions are
not fundamentally different from other shell errors it is
possible to catch shell errors by using an empty string as
the exception name. The shell variable <b>CAUGHT</b> is set
by <b>catch</b> to the name of the exception caught. It is
possible to rethrow an exception by calling the <b>throw</b>
function again once an exception has been caught.</p>

<p style="margin-left:11%; margin-top: 1em">The functions
are designed to be used together with the <b>always</b>
construct described in <i>zshmisc</i>(1). This is important
as only this construct provides the required support for
exceptions. A typical example is as follows.</p>

<p style="margin-left:22%; margin-top: 1em"><b>{ <br>
# &quot;try&quot; block <br>
# ... nested code here calls &quot;throw MyExcept&quot; <br>
} always { <br>
# &quot;always&quot; block <br>
if catch MyExcept; then <br>
print &quot;Caught exception MyExcept&quot; <br>
elif catch &rsquo;&rsquo;; then <br>
print &quot;Caught a shell error. Propagating...&quot; <br>
throw &rsquo;&rsquo; <br>
fi <br>
# Other exceptions are not handled but may be caught further
<br>
# up the call stack. <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">If all
exceptions should be caught, the following idiom might be
preferable.</p>

<p style="margin-left:22%; margin-top: 1em"><b>{ <br>
# ... nested code here throws an exception <br>
} always { <br>
if catch *; then <br>
case $CAUGHT in <br>
(MyExcept) <br>
print &quot;Caught my own exception&quot; <br>
;; <br>
(*) <br>
print &quot;Caught some other exception&quot; <br>
;; <br>
esac <br>
fi <br>
}</b></p>

<p style="margin-left:11%; margin-top: 1em">In common with
exception handling in other languages, the exception may be
thrown by code deeply nested inside the &lsquo;try&rsquo;
block. However, note that it must be thrown inside the
current shell, not in a subshell forked for a pipeline,
parenthesised current&minus;shell construct, or some form of
command or process substitution.</p>

<p style="margin-left:11%; margin-top: 1em">The system
internally uses the shell variable <b>EXCEPTION</b> to
record the name of the exception between throwing and
catching. One drawback of this scheme is that if the
exception is not handled the variable <b>EXCEPTION</b>
remains set and may be incorrectly recognised as the name of
an exception if a shell error subsequently occurs. Adding
<b>unset EXCEPTION</b> at the start of the outermost layer
of any code that uses exception handling will eliminate this
problem.</p>

<h2>MIME FUNCTIONS
<a name="MIME FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Three functions
are available to provide handling of files recognised by
extension, for example to dispatch a file <b>text.ps</b>
when executed as a command to an appropriate viewer. <b><br>
zsh&minus;mime&minus;setup</b> [ <b>&minus;fv</b> ] [
<b>&minus;l</b> [ <i>suffix ...</i> ] ] <b><br>
zsh&minus;mime&minus;handler [&minus;l]</b> <i>command
arguments ...</i></p>

<p style="margin-left:22%;">These two functions use the
files <b>~/.mime.types</b> and <b>/etc/mime.types</b>, which
associate types and extensions, as well as <b>~/.mailcap</b>
and <b>/etc/mailcap</b> files, which associate types and the
programs that handle them. These are provided on many
systems with the Multimedia Internet Mail Extensions.</p>

<p style="margin-left:22%; margin-top: 1em">To enable the
system, the function <b>zsh&minus;mime&minus;setup</b>
should be autoloaded and run. This allows files with
extensions to be treated as executable; such files be
completed by the function completion system. The function
<b>zsh&minus;mime&minus;handler</b> should not need to be
called by the user.</p>

<p style="margin-left:22%; margin-top: 1em">The system
works by setting up suffix aliases with &lsquo;<b>alias
&minus;s</b>&rsquo;. Suffix aliases already installed by the
user will not be overwritten.</p>

<p style="margin-left:22%; margin-top: 1em">For suffixes
defined in lower case, upper case variants will also
automatically be handled (e.g. <b>PDF</b> is automatically
handled if handling for the suffix <b>pdf</b> is defined),
but not vice versa.</p>

<p style="margin-left:22%; margin-top: 1em">Repeated calls
to <b>zsh&minus;mime&minus;setup</b> do not override the
existing mapping between suffixes and executable files
unless the option <b>&minus;f</b> is given. Note, however,
that this does not override existing suffix aliases assigned
to handlers other than
<b>zsh&minus;mime&minus;handler</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Calling
<b>zsh&minus;mime&minus;setup</b> with the option
<b>&minus;l</b> lists the existing mappings without altering
them. Suffixes to list (which may contain pattern characters
that should be quoted from immediate interpretation on the
command line) may be given as additional arguments,
otherwise all suffixes are listed.</p>

<p style="margin-left:22%; margin-top: 1em">Calling
<b>zsh&minus;mime&minus;setup</b> with the option
<b>&minus;v</b> causes verbose output to be shown during the
setup operation.</p>

<p style="margin-left:22%; margin-top: 1em">The system
respects the <b>mailcap</b> flags <b>needsterminal</b> and
<b>copiousoutput</b>, see <i>mailcap</i>(4).</p>

<p style="margin-left:22%; margin-top: 1em">The functions
use the following styles, which are defined with the
<b>zstyle</b> builtin command (see <i>zshmodules</i>(1)).
They should be defined before
<b>zsh&minus;mime&minus;setup</b> is run. The contexts used
all start with <b>:mime:</b>, with additional components in
some cases. It is recommended that a trailing <b>*</b>
(suitably quoted) be appended to style patterns in case the
system is extended in future. Some examples are given
below.</p>

<p style="margin-left:22%; margin-top: 1em">For files that
have multiple suffixes, e.g. <b>.pdf.gz</b>, where the
context includes the suffix it will be looked up starting
with the longest possible suffix until a match for the style
is found. For example, if <b>.pdf.gz</b> produces a match
for the handler, that will be used; otherwise the handler
for <b>.gz</b> will be used. Note that, owing to the way
suffix aliases work, it is always required that there be a
handler for the shortest possible suffix, so in this example
<b>.pdf.gz</b> can only be handled if <b>.gz</b> is also
handled (though not necessarily in the same way).
Alternatively, if no handling for <b>.gz</b> on its own is
needed, simply adding the command</p>

<p style="margin-left:32%; margin-top: 1em"><b>alias
&minus;s gz=zsh&minus;mime&minus;handler</b></p>

<p style="margin-left:22%; margin-top: 1em">to the
initialisation code is sufficient; <b>.gz</b> will not be
handled on its own, but may be in combination with other
suffixes. <b><br>
current&minus;shell</b></p>

<p style="margin-left:32%;">If this boolean style is true,
the mailcap handler for the context in question is run using
the <b>eval</b> builtin instead of by starting a new
<b>sh</b> process. This is more efficient, but may not work
in the occasional cases where the mailcap handler uses
strict POSIX syntax.</p>


<p style="margin-left:22%;"><b>execute&minus;as&minus;is</b></p>

<p style="margin-left:32%;">This style gives a list of
patterns to be matched against files passed for execution
with a handler program. If the file matches the pattern, the
entire command line is executed in its current form, with no
handler. This is useful for files which might have suffixes
but nonetheless be executable in their own right. If the
style is not set, the pattern <b>*(*) *(/)</b> is used;
hence executable files are executed directly and not passed
to a handler, and the option <b>AUTO_CD</b> may be used to
change to directories that happen to have MIME suffixes.</p>

<p style="margin-left:22%;"><b>file&minus;path</b></p>

<p style="margin-left:32%;">Used if the style
<b>find&minus;file&minus;in&minus;path</b> is true for the
same context. Set to an array of directories that are used
for searching for the file to be handled; the default is the
command path given by the special parameter <b>path</b>. The
shell option <b>PATH_DIRS</b> is respected; if that is set,
the appropriate path will be searched even if the name of
the file to be handled as it appears on the command line
contains a &lsquo;<b>/</b>&rsquo;. The full context is
<b>:mime:.</b><i>suffix</i><b>:</b>, as described for the
style <b>handler</b>.</p>


<p style="margin-left:22%;"><b>find&minus;file&minus;in&minus;path</b></p>

<p style="margin-left:32%;">If set, allows files whose
names do not contain absolute paths to be searched for in
the command path or the path specified by the
<b>file&minus;path</b> style. If the file is not found in
the path, it is looked for locally (whether or not the
current directory is in the path); if it is not found
locally, the handler will abort unless the
<b>handle&minus;nonexistent</b> style is set. Files found in
the path are tested as described for the style
<b>execute&minus;as&minus;is</b>. The full context is
<b>:mime:.</b><i>suffix</i><b>:</b>, as described for the
style <b>handler</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>flags</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Defines flags to go with a handler; the context is as
for the <b>handler</b> style, and the format is as for the
flags in <b>mailcap</b>.</p></td></tr>
</table>


<p style="margin-left:22%;"><b>handle&minus;nonexistent</b></p>

<p style="margin-left:32%;">By default, arguments that
don&rsquo;t correspond to files are not passed to the MIME
handler in order to prevent it from intercepting commands
found in the path that happen to have suffixes. This style
may be set to an array of extended glob patterns for
arguments that will be passed to the handler even if they
don&rsquo;t exist. If it is not explicitly set it defaults
to <b>[[:alpha:]]#:/*</b> which allows URLs to be passed to
the MIME handler even though they don&rsquo;t exist in that
format in the file system. The full context is
<b>:mime:.</b><i>suffix</i><b>:</b>, as described for the
style <b>handler</b>.</p>

<p style="margin-left:22%;"><b>handler</b></p>

<p style="margin-left:32%;">Specifies a handler for a
suffix; the suffix is given by the context as
<b>:mime:.</b><i>suffix</i><b>:</b>, and the format of the
handler is exactly that in <b>mailcap</b>. Note in
particular the &lsquo;<b>.</b>&rsquo; and trailing colon to
distinguish this use of the context. This overrides any
handler specified by the <b>mailcap</b> files. If the
handler requires a terminal, the <b>flags</b> style should
be set to include the word <b>needsterminal</b>, or if the
output is to be displayed through a pager (but not if the
handler is itself a pager), it should include
<b>copiousoutput</b>.</p>

<p style="margin-left:22%;"><b>mailcap</b></p>

<p style="margin-left:32%;">A list of files in the format
of <b>~/.mailcap</b> and <b>/etc/mailcap</b> to be read
during setup, replacing the default list which consists of
those two files. The context is <b>:mime:</b>. A <b>+</b> in
the list will be replaced by the default files.</p>


<p style="margin-left:22%;"><b>mailcap&minus;priorities</b></p>

<p style="margin-left:32%;">This style is used to resolve
multiple mailcap entries for the same MIME type. It consists
of an array of the following elements, in descending order
of priority; later entries will be used if earlier entries
are unable to resolve the entries being compared. If none of
the tests resolve the entries, the first entry encountered
is retained.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>files</b></p></td>
<td width="3%"></td>
<td width="57%">


<p>The order of files (entries in the <b>mailcap</b> style)
read. Earlier files are preferred. (Note this does not
resolve entries in the same file.)</p></td></tr>
</table>

<p style="margin-left:32%;"><b>priority</b></p>

<p style="margin-left:43%;">The priority flag from the
mailcap entry. The priority is an integer from 0 to 9 with
the default value being 5.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>flags</b></p></td>
<td width="3%"></td>
<td width="57%">


<p>The test given by the
<b>mailcap&minus;prio&minus;flags</b> option is used to
resolve entries.</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="8%">


<p><b>place</b></p></td>
<td width="3%"></td>
<td width="57%">


<p>Later entries are preferred; as the entries are strictly
ordered, this test always succeeds.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">Note that as
this style is handled during initialisation, the context is
always <b>:mime:</b>, with no discrimination by suffix.</p>


<p style="margin-left:22%;"><b>mailcap&minus;prio&minus;flags</b></p>

<p style="margin-left:32%;">This style is used when the
keyword <b>flags</b> is encountered in the list of tests
specified by the <b>mailcap&minus;priorities</b> style. It
should be set to a list of patterns, each of which is tested
against the flags specified in the mailcap entry (in other
words, the sets of assignments found with some entries in
the mailcap file). Earlier patterns in the list are
preferred to later ones, and matched patterns are preferred
to unmatched ones.</p>

<p style="margin-left:22%;"><b>mime&minus;types</b></p>

<p style="margin-left:32%;">A list of files in the format
of <b>~/.mime.types</b> and <b>/etc/mime.types</b> to be
read during setup, replacing the default list which consists
of those two files. The context is <b>:mime:</b>. A <b>+</b>
in the list will be replaced by the default files.</p>


<p style="margin-left:22%;"><b>never&minus;background</b></p>

<p style="margin-left:32%;">If this boolean style is set,
the handler for the given context is always run in the
foreground, even if the flags provided in the mailcap entry
suggest it need not be (for example, it doesn&rsquo;t
require a terminal).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>pager</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>If set, will be used instead of <b>$PAGER</b> or
<b>more</b> to handle suffixes where the
<b>copiousoutput</b> flag is set. The context is as for
<b>handler</b>, i.e. <b>:mime:.</b><i>suffix</i><b>:</b> for
handling a file with the given <i>suffix</i>.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:mime:*&rsquo; mailcap ~/.mailcap
/usr/local/etc/mailcap <br>
zstyle &rsquo;:mime:.txt:&rsquo; handler less %s <br>
zstyle &rsquo;:mime:.txt:&rsquo; flags needsterminal</b></p>

<p style="margin-left:22%; margin-top: 1em">When
<b>zsh&minus;mime&minus;setup</b> is subsequently run, it
will look for <b>mailcap</b> entries in the two files given.
Files of suffix <b>.txt</b> will be handled by running
&lsquo;<b>less</b> <i>file.txt</i>&rsquo;. The flag
<b>needsterminal</b> is set to show that this program must
run attached to a terminal.</p>

<p style="margin-left:22%; margin-top: 1em">As there are
several steps to dispatching a command, the following should
be checked if attempting to execute a file by extension
<b>.</b><i>ext</i> does not have the expected effect.</p>

<p style="margin-left:22%; margin-top: 1em">The command
&lsquo;<b>alias &minus;s</b> <i>ext</i>&rsquo; should show
&lsquo;<b>ps=zsh&minus;mime&minus;handler</b>&rsquo;. If it
shows something else, another suffix alias was already
installed and was not overwritten. If it shows nothing, no
handler was installed: this is most likely because no
handler was found in the <b>.mime.types</b> and
<b>mailcap</b> combination for <b>.ext</b> files. In that
case, appropriate handling should be added to
<b>~/.mime.types</b> and <b>mailcap</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
extension is handled by <b>zsh&minus;mime&minus;handler</b>
but the file is not opened correctly, either the handler
defined for the type is incorrect, or the flags associated
with it are in appropriate. Running
<b>zsh&minus;mime&minus;setup &minus;l</b> will show the
handler and, if there are any, the flags. A <b>%s</b> in the
handler is replaced by the file (suitably quoted if
necessary). Check that the handler program listed lists and
can be run in the way shown. Also check that the flags
<b>needsterminal</b> or <b>copiousoutput</b> are set if the
handler needs to be run under a terminal; the second flag is
used if the output should be sent to a pager. An example of
a suitable <b>mailcap</b> entry for such a program is:</p>

<p style="margin-left:32%; margin-top: 1em"><b>text/html;
/usr/bin/lynx &rsquo;%s&rsquo;; needsterminal</b></p>

<p style="margin-left:22%; margin-top: 1em">Running
&lsquo;<b>zsh&minus;mime&minus;handler &minus;l</b>
<i>command line</i>&rsquo; prints the command line that
would be executed, simplified to remove the effect of any
flags, and quoted so that the output can be run as a
complete zsh command line. This is used by the completion
system to decide how to complete after a file handled by
<b>zsh&minus;mime&minus;setup</b>.</p>


<p style="margin-left:11%;"><b>pick&minus;web&minus;browser</b></p>

<p style="margin-left:22%;">This function is separate from
the two MIME functions described above and can be assigned
directly to a suffix:</p>

<p style="margin-left:32%; margin-top: 1em"><b>autoload
&minus;U pick&minus;web&minus;browser <br>
alias &minus;s html=pick&minus;web&minus;browser</b></p>

<p style="margin-left:22%; margin-top: 1em">It is provided
as an intelligent front end to dispatch a web browser. It
may be run as either a function or a shell script. The
status 255 is returned if no browser could be started.</p>

<p style="margin-left:22%; margin-top: 1em">Various styles
are available to customize the choice of browsers: <b><br>
browser&minus;style</b></p>

<p style="margin-left:32%;">The value of the style is an
array giving preferences in decreasing order for the type of
browser to use. The values of elements may be <b><br>
running</b></p>

<p style="margin-left:43%;">Use a GUI browser that is
already running when an X Window display is available. The
browsers listed in the <b>x&minus;browsers</b> style are
tried in order until one is found; if it is, the file will
be displayed in that browser, so the user may need to check
whether it has appeared. If no running browser is found, one
is not started. Browsers other than Firefox, Opera and
Konqueror are assumed to understand the Mozilla syntax for
opening a URL remotely.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="5%">


<p><b>x</b></p></td>
<td width="6%"></td>
<td width="57%">


<p>Start a new GUI browser when an X Window display is
available. Search for the availability of one of the
browsers listed in the <b>x&minus;browsers</b> style and
start the first one that is found. No check is made for an
already running browser.</p></td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="5%">


<p><b>tty</b></p></td>
<td width="6%"></td>
<td width="57%">


<p>Start a terminal&minus;based browser. Search for the
availability of one of the browsers listed in the
<b>tty&minus;browsers</b> style and start the first one that
is found.</p></td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">If the style is
not set the default <b>running x tty</b> is used.</p>

<p style="margin-left:22%;"><b>x&minus;browsers</b></p>

<p style="margin-left:32%;">An array in decreasing order of
preference of browsers to use when running under the X
Window System. The array consists of the command name under
which to start the browser. They are looked up in the
context <b>:mime:</b> (which may be extended in future, so
appending &lsquo;<b>*</b>&rsquo; is recommended). For
example,</p>

<p style="margin-left:43%; margin-top: 1em"><b>zstyle
&rsquo;:mime:*&rsquo; x&minus;browsers opera konqueror
firefox</b></p>

<p style="margin-left:32%; margin-top: 1em">specifies that
<b>pick&minus;web&minus;browser</b> should first look for a
running instance of Opera, Konqueror or Firefox, in that
order, and if it fails to find any should attempt to start
Opera. The default is <b>firefox mozilla netscape opera
konqueror</b>.</p>

<p style="margin-left:22%;"><b>tty&minus;browsers</b></p>

<p style="margin-left:32%;">An array similar to
<b>x&minus;browsers</b>, except that it gives browsers to
use when no X Window display is available. The default is
<b>elinks links lynx</b>.</p>

<p style="margin-left:22%;"><b>command</b></p>

<p style="margin-left:32%;">If it is set this style is used
to pick the command used to open a page for a browser. The
context is <b>:mime:browser:new:$browser:</b> to start a new
browser or <b>:mime:browser:running:$browser:</b> to open a
URL in a browser already running on the current X display,
where <b>$browser</b> is the value matched in the
<b>x&minus;browsers</b> or <b>tty&minus;browsers</b> style.
The escape sequence <b>%b</b> in the style&rsquo;s value
will be replaced by the browser, while <b>%u</b> will be
replaced by the URL. If the style is not set, the default
for all new instances is equivalent to <b>%b %u</b> and the
defaults for using running browsers are equivalent to the
values <b>kfmclient openURL %u</b> for Konqueror, <b>firefox
&minus;new&minus;tab %u</b> for Firefox, <b>opera
&minus;newpage %u</b> for Opera, and <b>%b &minus;remote
&quot;openUrl(%u)&quot;</b> for all others.</p>

<h2>MATHEMATICAL FUNCTIONS
<a name="MATHEMATICAL FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>zcalc</b> [
<i>expression</i> ... ]</p>

<p style="margin-left:22%;">A reasonably powerful
calculator based on zsh&rsquo;s arithmetic evaluation
facility. The syntax is similar to that of formulae in most
programming languages; see the section &lsquo;Arithmetic
Evaluation&rsquo; in <i>zshmisc</i>(1) for details. The
mathematical library <b>zsh/mathfunc</b> will be loaded if
it is available; see the section &lsquo;The zsh/mathfunc
Module&rsquo; in <i>zshmodules</i>(1). The mathematical
functions correspond to the raw system libraries, so
trigonometric functions are evaluated using radians, and so
on.</p>

<p style="margin-left:22%; margin-top: 1em">Each line typed
is evaluated as an expression. The prompt shows a number,
which corresponds to a positional parameter where the result
of that calculation is stored. For example, the result of
the calculation on the line preceded by &lsquo;<b>4&gt;</b>
&rsquo; is available as <b>$4</b>. The last value calculated
is available as <b>ans</b>. Full command line editing,
including the history of previous calculations, is
available; the history is saved in the file
<b>~/.zcalc_history</b>. To exit, enter a blank line or type
&lsquo;<b>:q</b>&rsquo; on its own (&lsquo;<b>q</b>&rsquo;
is allowed for historical compatibility).</p>

<p style="margin-left:22%; margin-top: 1em">If arguments
are given to <b>zcalc</b> on start up, they are used to
prime the first few positional parameters. A visual
indication of this is given when the calculator starts.</p>

<p style="margin-left:22%; margin-top: 1em">The constants
<b>PI</b> (3.14159...) and <b>E</b> (2.71828...) are
provided. Parameter assignment is possible, but note that
all parameters will be put into the global namespace.</p>

<p style="margin-left:22%; margin-top: 1em">The output base
can be initialised by passing the option
&lsquo;<b>&minus;#</b><i>base</i>&rsquo;, for example
&lsquo;<b>zcalc &minus;#16</b>&rsquo; (the
&lsquo;<b>#</b>&rsquo; may have to be quoted, depending on
the globbing options set).</p>

<p style="margin-left:22%; margin-top: 1em">The prompt is
configurable via the parameter <b>ZCALCPROMPT</b>, which
undergoes standard prompt expansion. The index of the
current entry is stored locally in the first element of the
array <b>psvar</b>, which can be referred to in
<b>ZCALCPROMPT</b> as &lsquo;<b>%1v</b>&rsquo;. The default
prompt is &lsquo;<b>%1v&gt;</b> &rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">A few special
commands are available; these are introduced by a colon. For
backward compatibility, the colon may be omitted for certain
commands. Completion is available if <b>compinit</b> has
been run.</p>

<p style="margin-left:22%; margin-top: 1em">The output
precision may be specified within zcalc by special commands
familiar from many calculators.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>:norm</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>The default output format. It corresponds to the printf
<b>%g</b> specification. Typically this shows six decimal
digits.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>:sci</b> <i>digits</i></p>

<p style="margin-left:32%;">Scientific notation,
corresponding to the printf <b>%g</b> output format with the
precision given by <i>digits</i>. This produces either fixed
point or exponential notation depending on the value
output.</p>

<p style="margin-left:22%;"><b>:fix</b> <i>digits</i></p>

<p style="margin-left:32%;">Fixed point notation,
corresponding to the printf <b>%f</b> output format with the
precision given by <i>digits</i>.</p>

<p style="margin-left:22%;"><b>:eng</b> <i>digits</i></p>

<p style="margin-left:32%;">Exponential notation,
corresponding to the printf <b>%E</b> output format with the
precision given by <i>digits</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>:raw</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Raw output: this is the default form of the output from
a math evaluation. This may show more precision than the
number actually possesses.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Other special
commands: <b><br>
:!</b><i>line...</i></p>

<p style="margin-left:32%;">Execute <i>line...</i> as a
normal shell command line. Note that it is executed in the
context of the function, i.e. with local variables. Space is
optional after <b>:!</b>.</p>

<p style="margin-left:22%;"><b>:local</b> <i>arg</i>
...</p>

<p style="margin-left:32%;">Declare variables local to the
function. Note that certain variables are used by the
function for its own purposes. Other variables may be used,
too, but they will be taken from or put into the global
scope.</p>

<p style="margin-left:22%;"><b>:function</b> <i>name</i> [
<i>body</i> ]</p>

<p style="margin-left:32%;">Define a mathematical function
or (with no <i>body</i>) delete it. The function is defined
using <b>zmathfuncdef</b>, see below.</p>

<p style="margin-left:32%; margin-top: 1em">Note that
<b>zcalc</b> takes care of all quoting. Hence for
example:</p>

<p style="margin-left:43%; margin-top: 1em"><b>function
cube $1 * $1 * $1</b></p>

<p style="margin-left:32%; margin-top: 1em">defines a
function to cube the sole argument.</p>


<p style="margin-left:22%;"><b>[#</b><i>base</i><b>]</b></p>

<p style="margin-left:32%;">This is not a special command,
rather part of normal arithmetic syntax; however, when this
form appears on a line by itself the default output radix is
set to <i>base</i>. Use, for example,
&lsquo;<b>[#16]</b>&rsquo; to display hexadecimal output
preceded by an indication of the base, or
&lsquo;<b>[##16]</b>&rsquo; just to display the raw number
in the given base. Bases themselves are always specified in
decimal. &lsquo;<b>[#]</b>&rsquo; restores the normal output
format. Note that setting an output base suppresses floating
point output; use &lsquo;<b>[#]</b>&rsquo; to return to
normal operation.</p>

<p style="margin-left:22%; margin-top: 1em">See the
comments in the function for a few extra tips.</p>

<p style="margin-left:11%;"><b>zmathfuncdef</b> [
<i>mathfunc</i> [ <i>body</i> ] ]</p>

<p style="margin-left:22%;">A convenient front end to
<b>functions &minus;M</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With two
arguments, define a mathematical function named
<i>mathfunc</i> which can be used in any form of arithmetic
evaluation. <i>body</i> is a mathematical expression to
implement the function. It may contain references to
position parameters <b>$1</b>, <b>$2</b>, ... to refer to
mandatory parameters and
<b>${1:&minus;</b><i>defvalue</i><b>}</b> ... to refer to
optional parameters. Note that the forms must be strictly
adhered to for the function to calculate the correct number
of arguments. The implementation is held in a shell function
named <b>zsh_math_func_</b><i>mathfunc</i>; usually the user
will not need to refer to the shell function directly. Any
existing function of the same name is silently replaced.</p>

<p style="margin-left:22%; margin-top: 1em">With one
argument, remove the mathematical function <i>mathfunc</i>
as well as the shell function implementation.</p>

<p style="margin-left:22%; margin-top: 1em">With no
arguments, list all <i>mathfunc</i> functions in a form
suitable for restoring the definition. The functions have
not necessarily been defined by <b>zmathfuncdef</b>.</p>

<h2>USER CONFIGURATION FUNCTIONS
<a name="USER CONFIGURATION FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>zsh/newuser</b> module comes with a function to aid in
configuring shell options for new users. If the module is
installed, this function can also be run by hand. It is
available even if the module&rsquo;s default behaviour,
namely running the function for a new user logging in
without startup files, is inhibited. <b><br>
zsh&minus;newuser&minus;install</b> [ <b>&minus;f</b> ]</p>

<p style="margin-left:22%;">The function presents the user
with various options for customizing their initialization
scripts. Currently only <b>~/.zshrc</b> is handled.
<b>$ZDOTDIR/.zshrc</b> is used instead if the parameter
<b>ZDOTDIR</b> is set; this provides a way for the user to
configure a file without altering an existing
<b>.zshrc</b>.</p>

<p style="margin-left:22%; margin-top: 1em">By default the
function exits immediately if it finds any of the files
<b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b>, or
<b>.zlogin</b> in the appropriate directory. The option
<b>&minus;f</b> is required in order to force the function
to continue. Note this may happen even if <b>.zshrc</b>
itself does not exist.</p>

<p style="margin-left:22%; margin-top: 1em">As currently
configured, the function will exit immediately if the user
has root privileges; this behaviour cannot be
overridden.</p>

<p style="margin-left:22%; margin-top: 1em">Once activated,
the function&rsquo;s behaviour is supposed to be
self&minus;explanatory. Menus are present allowing the user
to alter the value of options and parameters. Suggestions
for improvements are always welcome.</p>

<p style="margin-left:22%; margin-top: 1em">When the script
exits, the user is given the opportunity to save the new
file or not; changes are not irreversible until this point.
However, the script is careful to restrict changes to the
file only to a group marked by the lines &lsquo;<b># Lines
configured by zsh&minus;newuser&minus;install</b>&rsquo; and
&lsquo;<b># End of lines configured by
zsh&minus;newuser&minus;install</b>&rsquo;. In addition, the
old version of <b>.zshrc</b> is saved to a file with the
suffix <b>.zni</b> appended.</p>

<p style="margin-left:22%; margin-top: 1em">If the function
edits an existing <b>.zshrc</b>, it is up to the user to
ensure that the changes made will take effect. For example,
if control usually returns early from the existing
<b>.zshrc</b> the lines will not be executed; or a later
initialization file may override options or parameters, and
so on. The function itself does not attempt to detect any
such conflicts.</p>

<h2>OTHER FUNCTIONS
<a name="OTHER FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are a
large number of helpful functions in the
<b>Functions/Misc</b> directory of the zsh distribution.
Most are very simple and do not require documentation here,
but a few are worthy of special mention.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Descriptions</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>colors</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This function initializes several associative arrays to
map color names to (and from) the ANSI standard
eight&minus;color terminal codes. These are used by the
prompt theme system (see above). You seldom should need to
run <b>colors</b> more than once.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The eight base
colors are: black, red, green, yellow, blue, magenta, cyan,
and white. Each of these has codes for foreground and
background. In addition there are eight intensity
attributes: bold, faint, standout, underline, blink,
reverse, and conceal. Finally, there are six codes used to
negate attributes: none (reset all attributes to the
defaults), normal (neither bold nor faint),
no&minus;standout, no&minus;underline, no&minus;blink, and
no&minus;reverse.</p>

<p style="margin-left:22%; margin-top: 1em">Some terminals
do not support all combinations of colors and
intensities.</p>

<p style="margin-left:22%; margin-top: 1em">The associative
arrays are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p style="margin-top: 1em">color</p></td>
<td width="1%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>colour</p></td>
<td width="1%"></td>
<td width="68%">


<p>Map all the color names to their integer codes, and
integer codes to the color names. The eight base names map
to the foreground color codes, as do names prefixed with
&lsquo;<b>fg&minus;</b>&rsquo;, such as
&lsquo;<b>fg&minus;red</b>&rsquo;. Names prefixed with
&lsquo;<b>bg&minus;</b>&rsquo;, such as
&lsquo;<b>bg&minus;blue</b>&rsquo;, refer to the background
codes. The reverse mapping from code to color yields base
name for foreground codes and the <b>bg&minus;</b> form for
backgrounds.</p> </td></tr>
</table>

<p style="margin-left:32%; margin-top: 1em">Although it is
a misnomer to call them &lsquo;colors&rsquo;, these arrays
also map the other fourteen attributes from names to codes
and codes to names.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em">fg</p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">fg_bold <br>
fg_no_bold</p>

<p style="margin-left:32%;">Map the eight basic color names
to ANSI terminal escape sequences that set the corresponding
foreground text properties. The <b>fg</b> sequences change
the color without changing the eight intensity
attributes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p>bg</p></td>
<td width="75%">
</td></tr>
</table>

<p style="margin-left:22%;">bg_bold <br>
bg_no_bold</p>

<p style="margin-left:32%;">Map the eight basic color names
to ANSI terminal escape sequences that set the corresponding
background properties. The <b>bg</b> sequences change the
color without changing the eight intensity attributes.</p>

<p style="margin-left:22%; margin-top: 1em">In addition,
the scalar parameters <b>reset_color</b> and
<b>bold_color</b> are set to the ANSI terminal escapes that
turn off all attributes and turn on bold intensity,
respectively.</p>

<p style="margin-left:11%;"><b>fned</b> <i>name</i></p>

<p style="margin-left:22%;">Same as <b>zed &minus;f</b>.
This function does not appear in the zsh distribution, but
can be created by linking <b>zed</b> to the name <b>fned</b>
in some directory in your <b>fpath</b>.</p>

<p style="margin-left:11%;"><b>is&minus;at&minus;least</b>
<i>needed</i> [ <i>present</i> ]</p>

<p style="margin-left:22%;">Perform a
greater&minus;than&minus;or&minus;equal&minus;to comparison
of two strings having the format of a zsh version number;
that is, a string of numbers and text with segments
separated by dots or dashes. If the <i>present</i> string is
not provided, <b>$ZSH_VERSION</b> is used. Segments are
paired left&minus;to&minus;right in the two strings with
leading non&minus;number parts ignored. If one string has
fewer segments than the other, the missing segments are
considered zero.</p>

<p style="margin-left:22%; margin-top: 1em">This is useful
in startup files to set options and other state that are not
available in all versions of zsh.</p>


<p style="margin-left:32%; margin-top: 1em"><b>is&minus;at&minus;least
3.1.6&minus;15 &amp;&amp; setopt NO_GLOBAL_RCS <br>
is&minus;at&minus;least 3.1.0 &amp;&amp; setopt
HIST_REDUCE_BLANKS <br>
is&minus;at&minus;least 2.6&minus;17 || print &quot;You
can&rsquo;t use is&minus;at&minus;least here.&quot;</b></p>

<p style="margin-left:11%;"><b>nslookup</b> [ <i>arg</i>
... ]</p>

<p style="margin-left:22%;">This wrapper function for the
<b>nslookup</b> command requires the <b>zsh/zpty</b> module
(see <i>zshmodules</i>(1)). It behaves exactly like the
standard <b>nslookup</b> except that it provides
customizable prompts (including a right&minus;side prompt)
and completion of nslookup commands, host names, etc. (if
you use the function&minus;based completion system).
Completion styles may be set with the context prefix
&lsquo;<b>:completion:nslookup</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
<b>pager</b>, <b>prompt</b> and <b>rprompt</b> styles
below.</p>

<p style="margin-left:11%;"><b>regexp&minus;replace</b>
<i>var regexp replace</i></p>

<p style="margin-left:22%;">Use regular expressions to
perform a global search and replace operation on a variable.
If the option <b>RE_MATCH_PCRE</b> is not set, POSIX
extended regular expressions are used, else
Perl&minus;compatible regular expressions (this requires the
shell to be linked against the <b>pcre</b> library).</p>

<p style="margin-left:22%; margin-top: 1em"><i>var</i> is
the name of the variable containing the string to be
matched. The variable will be modified directly by the
function. The variables <b>MATCH</b>, <b>MBEGIN</b>,
<b>MEND</b>, <b>match</b>, <b>mbegin</b>, <b>mend</b> should
be avoided as these are used by the regular expression
code.</p>

<p style="margin-left:22%; margin-top: 1em"><i>regexp</i>
is the regular expression to match against the string.</p>

<p style="margin-left:22%; margin-top: 1em"><i>replace</i>
is the replacement text. This can contain parameter, command
and arithmetic expressions which will be replaced: in
particular, a reference to <b>$MATCH</b> will be replaced by
the text matched by the pattern.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status is 0 if at least one match was performed, else 1.</p>

<p style="margin-left:11%;"><b>run&minus;help</b>
<i>cmd</i></p>

<p style="margin-left:22%;">This function is designed to be
invoked by the <b>run&minus;help</b> ZLE widget, in place of
the default alias. See &lsquo;Accessing On&minus;Line
Help&rsquo; above for setup instructions.</p>

<p style="margin-left:22%; margin-top: 1em">In the
discussion which follows, if <i>cmd</i> is a file system
path, it is first reduced to its rightmost component (the
file name).</p>

<p style="margin-left:22%; margin-top: 1em">Help is first
sought by looking for a file named <i>cmd</i> in the
directory named by the <b>HELPDIR</b> parameter. If no file
is found, an assistant function, alias, or command named
<b>run&minus;help&minus;</b><i>cmd is sought. If found, the
assistant is executed with the rest of the current command
line (everything after the command name cmd) as its
arguments. When neither file nor assistant is found, the
external command &lsquo;</i><b>man</b> <i>cmd&rsquo; is
run.</i></p>

<p style="margin-left:22%; margin-top: 1em">An example
assistant for the &quot;ssh&quot; command:</p>


<p style="margin-left:32%; margin-top: 1em"><b>run&minus;help&minus;ssh()
{ <br>
emulate &minus;LR zsh <br>
local &minus;a args <br>
# Delete the &quot;&minus;l username&quot; option <br>
zparseopts &minus;D &minus;E &minus;a args l: <br>
# Delete other options, leaving: host command <br>
args=(${@:#&minus;*}) <br>
if [[ ${#args} &minus;lt 2 ]]; then <br>
man ssh <br>
else <br>
run&minus;help $args[2] <br>
fi <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em">Several of
these assistants are provided in the <b>Functions/Misc</b>
directory. These must be autoloaded, or placed as executable
scripts in your search path, in order to be found and used
by <b>run&minus;help</b>. <b><br>
run&minus;help&minus;git <br>
run&minus;help&minus;svk <br>
run&minus;help&minus;svn</b></p>

<p style="margin-left:32%;">Assistant functions for the
<b>git</b>, <b>svk</b>, and <b>svn</b> commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>tetris</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Zsh was once accused of not being as complete as Emacs,
because it lacked a Tetris game. This function was written
to refute this vicious slander.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This function
must be used as a ZLE widget:</p>

<p style="margin-left:32%; margin-top: 1em"><b>autoload
&minus;U tetris <br>
zle &minus;N tetris <br>
bindkey</b> <i>keys</i> <b>tetris</b></p>

<p style="margin-left:22%; margin-top: 1em">To start a
game, execute the widget by typing the <i>keys</i>. Whatever
command line you were editing disappears temporarily, and
your keymap is also temporarily replaced by the Tetris
control keys. The previous editor state is restored when you
quit the game (by pressing &lsquo;<b>q</b>&rsquo;) or when
you lose.</p>

<p style="margin-left:22%; margin-top: 1em">If you quit in
the middle of a game, the next invocation of the
<b>tetris</b> widget will continue where you left off. If
you lost, it will start a new game.</p>

<p style="margin-left:11%;"><b>zargs</b> [ <i>option</i>
... <b>&minus;&minus;</b> ] [ <i>input</i> ... ] [
<b>&minus;&minus;</b> <i>command</i> [ <i>arg</i> ... ]
]</p>

<p style="margin-left:22%;">This function has a similar
purpose to GNU xargs. Instead of reading lines of arguments
from the standard input, it takes them from the command
line. This is useful because zsh, especially with recursive
glob operators, often can construct a command line for a
shell function that is longer than can be accepted by an
external command.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>option</i> list represents options of the <b>zargs</b>
command itself, which are the same as those of <b>xargs</b>.
The <i>input</i> list is the collection of strings (often
file names) that become the arguments of the <b>command</b>,
analogous to the standard input of <b>xargs</b>. Finally,
the <i>arg</i> list consists of those arguments (usually
options) that are passed to the <i>command</i> each time it
runs. The <i>arg</i> list precedes the elements from the
<b>input</b> list in each run. If no <i>command</i> is
provided, then no <i>arg</i> list may be provided, and in
that event the default command is &lsquo;<b>print</b>&rsquo;
with arguments &lsquo;<b>&minus;r
&minus;&minus;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
get a long <b>ls</b> listing of all plain files in the
current directory or its subdirectories:</p>

<p style="margin-left:32%; margin-top: 1em"><b>autoload
&minus;U zargs <br>
zargs &minus;&minus; **/*(.) &minus;&minus; ls
&minus;l</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that
&lsquo;<b>&minus;&minus;</b>&rsquo; is used both to mark the
end of the <i>option</i> list and to mark the end of the
<i>input</i> list, so it must appear twice whenever the
<i>input</i> list may be empty. If there is guaranteed to be
at least one <i>input</i> and the first <i>input</i> does
not begin with a &lsquo;<b>&minus;</b>&rsquo;, then the
first &lsquo;<b>&minus;&minus;</b>&rsquo; may be
omitted.</p>

<p style="margin-left:22%; margin-top: 1em">In the event
that the string &lsquo;<b>&minus;&minus;</b>&rsquo; is or
may be an <i>input</i>, the <b>&minus;e</b> option may be
used to change the end&minus;of&minus;inputs marker. Note
that this does <i>not</i> change the
end&minus;of&minus;options marker. For example, to use
&lsquo;<b>..</b>&rsquo; as the marker:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zargs
&minus;e.. &minus;&minus; **/*(.) .. ls &minus;l</b></p>

<p style="margin-left:22%; margin-top: 1em">This is a good
choice in that example because no plain file can be named
&lsquo;<b>..</b>&rsquo;, but the best end&minus;marker
depends on the circumstances.</p>

<p style="margin-left:22%; margin-top: 1em">The options
<b>&minus;i</b>, <b>&minus;I</b>, <b>&minus;l</b>,
<b>&minus;L</b>, and <b>&minus;n</b> differ slightly from
their usage in <b>xargs</b>. There are no input lines for
<b>zargs</b> to count, so <b>&minus;l</b> and
<b>&minus;L</b> count through the <i>input</i> list, and
<b>&minus;n</b> counts the number of arguments passed to
each execution of <i>command</i>, <i>including</i> any
<i>arg</i> list. Also, any time <b>&minus;i</b> or
<b>&minus;I</b> is used, each <i>input</i> is processed
separately as if by &lsquo;<b>&minus;L 1</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">For details of
the other <b>zargs</b> options, see <i>xargs</i>(1) (but
note the difference in function between <b>zargs</b> and
<b>xargs</b>) or run <b>zargs</b> with the
<b>&minus;&minus;help</b> option.</p>

<p style="margin-left:11%;"><b>zed</b> [ <b>&minus;f</b> ]
<i>name</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>zed &minus;b</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This function uses the ZLE editor to edit a file or
function.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Only one
<i>name</i> argument is allowed. If the <b>&minus;f</b>
option is given, the name is taken to be that of a function;
if the function is marked for autoloading, <b>zed</b>
searches for it in the <b>fpath</b> and loads it. Note that
functions edited this way are installed into the current
shell, but <i>not</i> written back to the autoload file.</p>

<p style="margin-left:22%; margin-top: 1em">Without
<b>&minus;f</b>, <i>name</i> is the path name of the file to
edit, which need not exist; it is created on write, if
necessary.</p>

<p style="margin-left:22%; margin-top: 1em">While editing,
the function sets the main keymap to <b>zed</b> and the vi
command keymap to <b>zed&minus;vicmd</b>. These will be
copied from the existing <b>main</b> and <b>vicmd</b>
keymaps if they do not exist the first time <b>zed</b> is
run. They can be used to provide special key bindings used
only in zed.</p>

<p style="margin-left:22%; margin-top: 1em">If it creates
the keymap, <b>zed</b> rebinds the return key to insert a
line break and &lsquo;<b>^X^W</b>&rsquo; to accept the edit
in the <b>zed</b> keymap, and binds &lsquo;<b>ZZ</b>&rsquo;
to accept the edit in the <b>zed&minus;vicmd</b> keymap.</p>

<p style="margin-left:22%; margin-top: 1em">The bindings
alone can be installed by running &lsquo;<b>zed
&minus;b</b>&rsquo;. This is suitable for putting into a
startup file. Note that, if rerun, this will overwrite the
existing <b>zed</b> and <b>zed&minus;vicmd</b> keymaps.</p>

<p style="margin-left:22%; margin-top: 1em">Completion is
available, and styles may be set with the context prefix
&lsquo;<b>:completion:zed</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">A zle widget
<b>zed&minus;set&minus;file&minus;name</b> is available.
This can be called by name from within zed using
&lsquo;<b>\ex zed&minus;set&minus;file&minus;name</b>&rsquo;
(note, however, that because of zed&rsquo;s rebindings you
will have to type <b>^j</b> at the end instead of the return
key), or can be bound to a key in either of the <b>zed</b>
or <b>zed&minus;vicmd</b> keymaps after &lsquo;<b>zed
&minus;b</b>&rsquo; has been run. When the widget is called,
it prompts for a new name for the file being edited. When
zed exits the file will be written under that name and the
original file will be left alone. The widget has no effect
with &lsquo;<b>zed &minus;f</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">While
<b>zed&minus;set&minus;file&minus;name</b> is running, zed
uses the keymap <b>zed&minus;normal&minus;keymap</b>, which
is linked from the main keymap in effect at the time zed
initialised its bindings. (This is to make the return key
operate normally.) The result is that if the main keymap has
been changed, the widget won&rsquo;t notice. This is not a
concern for most users.</p>

<p style="margin-left:11%;"><b>zcp</b> [
<b>&minus;finqQvwW</b> ] <i>srcpat dest</i> <b><br>
zln</b> [ <b>&minus;finqQsvwW</b> ] <i>srcpat dest</i></p>

<p style="margin-left:22%;">Same as <b>zmv &minus;C</b> and
<b>zmv &minus;L</b>, respectively. These functions do not
appear in the zsh distribution, but can be created by
linking <b>zmv</b> to the names <b>zcp</b> and <b>zln</b> in
some directory in your <b>fpath</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>zkbd</b></p></td>
<td width="5%"></td>
<td width="49%">


<p>See &lsquo;Keyboard Definition&rsquo; above.</p></td>
<td width="29%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>zmv</b> [
<b>&minus;finqQsvwW</b> ] [ &minus;C | &minus;L | &minus;M |
&minus;p <i>program</i> ] [ &minus;o <i>optstring</i> ]
<i><br>
srcpat dest</i></p>

<p style="margin-left:22%;">Move (usually, rename) files
matching the pattern <i>srcpat</i> to corresponding files
having names of the form given by <i>dest</i>, where
<i>srcpat</i> contains parentheses surrounding patterns
which will be replaced in turn by $1, $2, ... in
<i>dest</i>. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zmv
&rsquo;(*).lis&rsquo; &rsquo;$1.txt&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">renames
&lsquo;<b>foo.lis</b>&rsquo; to
&lsquo;<b>foo.txt</b>&rsquo;,
&lsquo;<b>my.old.stuff.lis</b>&rsquo; to
&lsquo;<b>my.old.stuff.txt</b>&rsquo;, and so on.</p>

<p style="margin-left:22%; margin-top: 1em">The pattern is
always treated as an <b>EXTENDED_GLOB</b> pattern. Any file
whose name is not changed by the substitution is simply
ignored. Any error (a substitution resulted in an empty
string, two substitutions gave the same result, the
destination was an existing regular file and <b>&minus;f</b>
was not given) causes the entire function to abort without
doing anything.</p>

<p style="margin-left:22%; margin-top: 1em">Options:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Force overwriting of destination files. Not currently
passed down to the <b>mv</b>/<b>cp</b>/<b>ln</b> command due
to vagaries of implementations (but you can use
<b>&minus;o&minus;f</b> to do that).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Interactive: show each line to be executed and ask the
user whether to execute it. &lsquo;Y&rsquo; or
&lsquo;y&rsquo; will execute it, anything else will skip it.
Note that you just need to type one character.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;n</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>No execution: print what would happen, but don&rsquo;t
do it.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Turn bare glob qualifiers off: now assumed by default,
so this has no effect.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;Q</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Force bare glob qualifiers on. Don&rsquo;t turn this on
unless you are actually using glob qualifiers in a
pattern.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Symbolic, passed down to <b>ln</b>; only works with
<b>&minus;L</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Verbose: print each command as it&rsquo;s being
executed.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;w</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Pick out wildcard parts of the pattern, as described
above, and implicitly add parentheses for referring to
them.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;W</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Just like <b>&minus;w</b>, with the addition of turning
wildcards in the replacement pattern into sequential ${1} ..
${N} references.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;C</b></p></td>
<td width="7%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;L</b></p></td>
<td width="7%"></td>
<td width="68%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;M</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Force <b>cp</b>, <b>ln</b> or <b>mv</b>, respectively,
regardless of the name of the function.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;p</b>
<i>program</i></p>

<p style="margin-left:32%;">Call <i>program</i> instead of
<b>cp</b>, <b>ln</b> or <b>mv</b>. Whatever it does, it
should at least understand the form &lsquo;<i>program</i>
<b>&minus;&minus;</b> <i>oldname newname</i>&rsquo; where
<i>oldname</i> and <i>newname</i> are filenames generated by
<b>zmv</b>.</p>

<p style="margin-left:22%;"><b>&minus;o</b>
<i>optstring</i></p>

<p style="margin-left:32%;">The <i>optstring</i> is split
into words and passed down verbatim to the <b>cp</b>,
<b>ln</b> or <b>mv</b> command called to perform the work.
It should probably begin with a
&lsquo;<b>&minus;</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Further
examples:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zmv &minus;v
&rsquo;(* *)&rsquo; &rsquo;${1// /_}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">For any file in
the current directory with at least one space in the name,
replace every space by an underscore and display the
commands executed.</p>

<p style="margin-left:22%; margin-top: 1em">For more
complete examples and other implementation details, see the
<b>zmv</b> source file, usually located in one of the
directories named in your <b>fpath</b>, or in
<b>Functions/Misc/zmv</b> in the zsh distribution.</p>

<p style="margin-left:11%;"><b>zrecompile</b></p>

<p style="margin-left:22%;">See &lsquo;Recompiling
Functions&rsquo; above.</p>

<p style="margin-left:11%;"><b>zstyle+</b> <i>context style
value</i> [ + <i>subcontext style value</i> ... ]</p>

<p style="margin-left:22%;">This makes defining styles a
bit simpler by using a single &lsquo;<b>+</b>&rsquo; as a
special token that allows you to append a context name to
the previously used context name. Like this:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle+
&rsquo;:foo:bar&rsquo; style1 value1 \ <br>
+ &rsquo;:baz&rsquo; style2 value2 \ <br>
+ &rsquo;:frob&rsquo; style3 value3</b></p>

<p style="margin-left:22%; margin-top: 1em">This defines
&lsquo;style1&rsquo; with &lsquo;value1&rsquo; for the
context <b>:foo:bar</b> as usual, but it also defines
&lsquo;style2&rsquo; with &lsquo;value2&rsquo; for the
context <b>:foo:bar:baz</b> and &lsquo;style3&rsquo; with
&lsquo;value3&rsquo; for <b>:foo:bar:frob</b>. Any
<i>subcontext</i> may be the empty string to re&minus;use
the first context unchanged.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Styles <br>
insert&minus;tab</b></p>

<p style="margin-left:22%;">The <b>zed</b> function
<i>sets</i> this style in context
&lsquo;<b>:completion:zed:*</b>&rsquo; to turn off
completion when <b>TAB</b> is typed at the beginning of a
line. You may override this by setting your own value for
this context and style.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>pager</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The <b>nslookup</b> function looks up this style in the
context &lsquo;<b>:nslookup</b>&rsquo; to determine the
program used to display output that does not fit on a single
screen.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>prompt</b></p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>rprompt</b></p>

<p style="margin-left:22%;">The <b>nslookup</b> function
looks up this style in the context
&lsquo;<b>:nslookup</b>&rsquo; to set the prompt and the
right&minus;side prompt, respectively. The usual expansions
for the <b>PS1</b> and <b>RPS1</b> parameters may be used
(see EXPANSION OF PROMPT SEQUENCES in
<i>zshmisc</i>(1)).</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%;"><b>$ZDOTDIR/.zshenv <br>
$ZDOTDIR/.zprofile <br>
$ZDOTDIR/.zshrc <br>
$ZDOTDIR/.zlogin <br>
$ZDOTDIR/.zlogout <br>
${TMPPREFIX}*</b> (default is /tmp/zsh*) <b><br>
/etc/zshenv <br>
/etc/zprofile <br>
/etc/zshrc <br>
/etc/zlogin <br>
/etc/zlogout</b> (installation&minus;specific &minus;
<b>/etc</b> is the default)</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>sh</i>(1),
<i>csh</i>(1), <i>tcsh</i>(1), <i>rc</i>(1), <i>bash</i>(1),
<i>ksh</i>(1)</p>

<p style="margin-left:11%; margin-top: 1em"><b>IEEE
Standard for information Technology &minus; Portable
Operating System Interface (POSIX) &minus; Part 2: Shell and
Utilities</b>, IEEE Inc, 1993, ISBN
1&minus;55937&minus;255&minus;9.</p>
<hr>
</body>
</html>
