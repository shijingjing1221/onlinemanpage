<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:48:42 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ZSHCOMPSYS</title>

</head>
<body>

<h1 align="center">ZSHCOMPSYS</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#INITIALIZATION">INITIALIZATION</a><br>
<a href="#COMPLETION SYSTEM CONFIGURATION">COMPLETION SYSTEM CONFIGURATION</a><br>
<a href="#CONTROL FUNCTIONS">CONTROL FUNCTIONS</a><br>
<a href="#BINDABLE COMMANDS">BINDABLE COMMANDS</a><br>
<a href="#UTILITY FUNCTIONS">UTILITY FUNCTIONS</a><br>
<a href="#COMPLETION DIRECTORIES">COMPLETION DIRECTORIES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">zshcompsys
&minus; zsh completion system</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This describes
the shell code for the &lsquo;new&rsquo; completion system,
referred to as <b>compsys</b>. It is written in shell
functions based on the features described in
<i>zshcompwid</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The features
are contextual, sensitive to the point at which completion
is started. Many completions are already provided. For this
reason, a user can perform a great many tasks without
knowing any details beyond how to initialize the system,
which is described below in INITIALIZATION.</p>

<p style="margin-left:11%; margin-top: 1em">The context
that decides what completion is to be performed may be</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>an argument or option position: these describe the
position on the command line at which completion is
requested. For example &lsquo;first argument to rmdir, the
word being completed names a directory&rsquo;;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>a special context, denoting an element in the
shell&rsquo;s syntax. For example &lsquo;a word in command
position&rsquo; or &lsquo;an array subscript&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">A full context
specification contains other elements, as we shall
describe.</p>

<p style="margin-left:11%; margin-top: 1em">Besides
commands names and contexts, the system employs two more
concepts, <i>styles</i> and <i>tags</i>. These provide ways
for the user to configure the system&rsquo;s behaviour.</p>

<p style="margin-left:11%; margin-top: 1em">Tags play a
dual role. They serve as a classification system for the
matches, typically indicating a class of object that the
user may need to distinguish. For example, when completing
arguments of the <b>ls</b> command the user may prefer to
try <b>files</b> before <b>directories</b>, so both of these
are tags. They also appear as the rightmost element in a
context specification.</p>

<p style="margin-left:11%; margin-top: 1em">Styles modify
various operations of the completion system, such as output
formatting, but also what kinds of completers are used (and
in what order), or which tags are examined. Styles may
accept arguments and are manipulated using the <b>zstyle</b>
command described in see <i>zshmodules</i>(1).</p>

<p style="margin-left:11%; margin-top: 1em">In summary,
tags describe <i>what</i> the completion objects are, and
style <b>how</b> they are to be completed. At various points
of execution, the completion system checks what styles
and/or tags are defined for the current context, and uses
that to modify its behavior. The full description of context
handling, which determines how tags and other elements of
the context influence the behaviour of styles, is described
below in COMPLETION SYSTEM CONFIGURATION.</p>

<p style="margin-left:11%; margin-top: 1em">When a
completion is requested, a dispatcher function is called;
see the description of <b>_main_complete</b> in the list of
control functions below. This dispatcher decides which
function should be called to produce the completions, and
calls it. The result is passed to one or more
<i>completers</i>, functions that implement individual
completion strategies: simple completion, error correction,
completion with error correction, menu selection, etc.</p>

<p style="margin-left:11%; margin-top: 1em">More generally,
the shell functions contained in the completion system are
of two types:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">those beginning
&lsquo;<b>comp</b>&rsquo; are to be called directly; there
are only a few of these;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>those beginning &lsquo;<b>_</b>&rsquo; are called by the
completion code. The shell functions of this set, which
implement completion behaviour and may be bound to
keystrokes, are referred to as &lsquo;widgets&rsquo;. These
proliferate as new completions are required.</p></td></tr>
</table>

<h2>INITIALIZATION
<a name="INITIALIZATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the system
was installed completely, it should be enough to call the
shell function <b>compinit</b> from your initialization
file; see the next section. However, the function
<b>compinstall</b> can be run by a user to configure various
aspects of the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">Usually,
<b>compinstall</b> will insert code into <b>.zshrc</b>,
although if that is not writable it will save it in another
file and tell you that file&rsquo;s location. Note that it
is up to you to make sure that the lines added to
<b>.zshrc</b> are actually run; you may, for example, need
to move them to an earlier place in the file if
<b>.zshrc</b> usually returns early. So long as you keep
them all together (including the comment lines at the start
and finish), you can rerun <b>compinstall</b> and it will
correctly locate and modify these lines. Note, however, that
any code you add to this section by hand is likely to be
lost if you rerun <b>compinstall</b>, although lines using
the command &lsquo;<b>zstyle</b>&rsquo; should be gracefully
handled.</p>

<p style="margin-left:11%; margin-top: 1em">The new code
will take effect next time you start the shell, or run
<b>.zshrc</b> by hand; there is also an option to make them
take effect immediately. However, if <b>compinstall</b> has
removed definitions, you will need to restart the shell to
see the changes.</p>

<p style="margin-left:11%; margin-top: 1em">To run
<b>compinstall</b> you will need to make sure it is in a
directory mentioned in your <b>fpath</b> parameter, which
should already be the case if zsh was properly configured as
long as your startup files do not remove the appropriate
directories from <b>fpath</b>. Then it must be autoloaded
(&lsquo;<b>autoload &minus;U compinstall</b>&rsquo; is
recommended). You can abort the installation any time you
are being prompted for information, and your <b>.zshrc</b>
will not be altered at all; changes only take place right at
the end, where you are specifically asked for
confirmation.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Use of
compinit</b> <br>
This section describes the use of <b>compinit</b> to
initialize completion for the current session when called
directly; if you have run <b>compinstall</b> it will be
called automatically from your <b>.zshrc</b>.</p>

<p style="margin-left:11%; margin-top: 1em">To initialize
the system, the function <b>compinit</b> should be in a
directory mentioned in the <b>fpath</b> parameter, and
should be autoloaded (&lsquo;<b>autoload &minus;U
compinit</b>&rsquo; is recommended), and then run simply as
&lsquo;<b>compinit</b>&rsquo;. This will define a few
utility functions, arrange for all the necessary shell
functions to be autoloaded, and will then re&minus;define
all widgets that do completion to use the new system. If you
use the <b>menu&minus;select</b> widget, which is part of
the <b>zsh/complist</b> module, you should make sure that
that module is loaded before the call to <b>compinit</b> so
that that widget is also re&minus;defined. If completion
styles (see below) are set up to perform expansion as well
as completion by default, and the TAB key is bound to
<b>expand&minus;or&minus;complete</b>, <b>compinit</b> will
rebind it to <b>complete&minus;word</b>; this is necessary
to use the correct form of expansion.</p>

<p style="margin-left:11%; margin-top: 1em">Should you need
to use the original completion commands, you can still bind
keys to the old widgets by putting a &lsquo;<b>.</b>&rsquo;
in front of the widget name, e.g.
&lsquo;<b>.expand&minus;or&minus;complete</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">To speed up the
running of <b>compinit</b>, it can be made to produce a
dumped configuration that will be read in on future
invocations; this is the default, but can be turned off by
calling <b>compinit</b> with the option <b>&minus;D</b>. The
dumped file is <b>.zcompdump</b> in the same directory as
the startup files (i.e. <b>$ZDOTDIR</b> or <b>$HOME</b>);
alternatively, an explicit file name can be given by
&lsquo;<b>compinit &minus;d</b> <i>dumpfile</i>&rsquo;. The
next invocation of <b>compinit</b> will read the dumped file
instead of performing a full initialization.</p>

<p style="margin-left:11%; margin-top: 1em">If the number
of completion files changes, <b>compinit</b> will recognise
this and produce a new dump file. However, if the name of a
function or the arguments in the first line of a
<b>#compdef</b> function (as described below) change, it is
easiest to delete the dump file by hand so that
<b>compinit</b> will re&minus;create it the next time it is
run. The check performed to see if there are new functions
can be omitted by giving the option <b>&minus;C</b>. In this
case the dump file will only be created if there isn&rsquo;t
one already.</p>

<p style="margin-left:11%; margin-top: 1em">The dumping is
actually done by another function, <b>compdump</b>, but you
will only need to run this yourself if you change the
configuration (e.g. using <b>compdef</b>) and then want to
dump the new one. The name of the old dumped file will be
remembered for this purpose.</p>

<p style="margin-left:11%; margin-top: 1em">If the
parameter <b>_compdir</b> is set, <b>compinit</b> uses it as
a directory where completion functions can be found; this is
only necessary if they are not already in the function
search path.</p>

<p style="margin-left:11%; margin-top: 1em">For security
reasons <b>compinit</b> also checks if the completion system
would use files not owned by root or by the current user, or
files in directories that are world&minus; or
group&minus;writable or that are not owned by root or by the
current user. If such files or directories are found,
<b>compinit</b> will ask if the completion system should
really be used. To avoid these tests and make all files
found be used without asking, use the option
<b>&minus;u</b>, and to make <b>compinit</b> silently ignore
all insecure files and directories use the option
<b>&minus;i</b>. This security check is skipped entirely
when the <b>&minus;C</b> option is given.</p>

<p style="margin-left:11%; margin-top: 1em">The security
check can be retried at any time by running the function
<b>compaudit</b>. This is the same check used by
<b>compinit</b>, but when it is executed directly any
changes to <b>fpath</b> are made local to the function so
they do not persist. The directories to be checked may be
passed as arguments; if none are given, <b>compaudit</b>
uses <b>fpath</b> and <b>_compdir</b> to find completion
system directories, adding missing ones to <b>fpath</b> as
necessary. To force a check of exactly the directories
currently named in <b>fpath</b>, set <b>_compdir</b> to an
empty string before calling <b>compaudit</b> or
<b>compinit</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>bashcompinit</b> provides compatibility with bash&rsquo;s
programmable completion system. When run it will define the
functions, <b>compgen</b> and <b>complete</b> which
correspond to the bash builtins with the same names. It will
then be possible to use completion specifications and
functions written for bash.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Autoloaded
files</b> <br>
The convention for autoloaded functions used in completion
is that they start with an underscore; as already mentioned,
the <b>fpath/FPATH</b> parameter must contain the directory
in which they are stored. If <b>zsh</b> was properly
installed on your system, then <b>fpath/FPATH</b>
automatically contains the required directories for the
standard functions.</p>

<p style="margin-left:11%; margin-top: 1em">For incomplete
installations, if <b>compinit</b> does not find enough files
beginning with an underscore (fewer than twenty) in the
search path, it will try to find more by adding the
directory <b>_compdir</b> to the search path. If that
directory has a subdirectory named <b>Base</b>, all
subdirectories will be added to the path. Furthermore, if
the subdirectory <b>Base</b> has a subdirectory named
<b>Core</b>, <b>compinit</b> will add all subdirectories of
the subdirectories is to the path: this allows the functions
to be in the same format as in the <b>zsh</b> source
distribution.</p>

<p style="margin-left:11%; margin-top: 1em">When
<b>compinit</b> is run, it searches all such files
accessible via <b>fpath/FPATH</b> and reads the first line
of each of them. This line should contain one of the tags
described below. Files whose first line does not start with
one of these tags are not considered to be part of the
completion system and will not be treated specially.</p>

<p style="margin-left:11%; margin-top: 1em">The tags are:
<b><br>
#compdef</b> <i>names...</i> [ <b>&minus;[pP]</b>
<i>patterns...</i> [ <b>&minus;N</b> <i>names...</i> ] ]</p>

<p style="margin-left:22%;">The file will be made
autoloadable and the function defined in it will be called
when completing <i>names</i>, each of which is either the
name of a command whose arguments are to be completed or one
of a number of special contexts in the form
<b>&minus;</b><i>context</i><b>&minus;</b> described
below.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>name</i> may also be of the form
&lsquo;<i>cmd</i><b>=</b><i>service</i>&rsquo;. When
completing the command <i>cmd</i>, the function typically
behaves as if the command (or special context)
<i>service</i> was being completed instead. This provides a
way of altering the behaviour of functions that can perform
many different completions. It is implemented by setting the
parameter <b>$service</b> when calling the function; the
function may choose to interpret this how it wishes, and
simpler functions will probably ignore it.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>#compdef</b> line contains one of the options
<b>&minus;p</b> or <b>&minus;P</b>, the words following are
taken to be patterns. The function will be called when
completion is attempted for a command or context that
matches one of the patterns. The options <b>&minus;p</b> and
<b>&minus;P</b> are used to specify patterns to be tried
before or after other completions respectively. Hence
<b>&minus;P</b> may be used to specify default actions.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;N</b> is used after a list following
<b>&minus;p</b> or <b>&minus;P</b>; it specifies that
remaining words no longer define patterns. It is possible to
toggle between the three options as many times as
necessary.</p>

<p style="margin-left:11%;"><b>#compdef &minus;k</b>
<i>style key&minus;sequences...</i></p>

<p style="margin-left:22%;">This option creates a widget
behaving like the builtin widget <i>style</i> and binds it
to the given <i>key&minus;sequences</i>, if any. The
<i>style</i> must be one of the builtin widgets that perform
completion, namely <b>complete&minus;word</b>,
<b>delete&minus;char&minus;or&minus;list</b>,
<b>expand&minus;or&minus;complete</b>,
<b>expand&minus;or&minus;complete&minus;prefix</b>,
<b>list&minus;choices</b>, <b>menu&minus;complete</b>,
<b>menu&minus;expand&minus;or&minus;complete</b>, or
<b>reverse&minus;menu&minus;complete</b>. If the
<b>zsh/complist</b> module is loaded (see
<i>zshmodules</i>(1)) the widget <b>menu&minus;select</b> is
also available.</p>

<p style="margin-left:22%; margin-top: 1em">When one of the
<i>key&minus;sequences</i> is typed, the function in the
file will be invoked to generate the matches. Note that a
key will not be re&minus;bound if it already was (that is,
was bound to something other than
<b>undefined&minus;key</b>). The widget created has the same
name as the file and can be bound to any other keys using
<b>bindkey</b> as usual.</p>

<p style="margin-left:11%;"><b>#compdef &minus;K</b>
<i>widget&minus;name style key&minus;sequences</i> ...</p>

<p style="margin-left:22%;">This is similar to
<b>&minus;k</b> except that only one
<i>key&minus;sequences</i> argument may be given for each
<i>widget&minus;name style</i> pair. However, the entire set
of three arguments may be repeated with a different set of
arguments. Note in particular that the
<i>widget&minus;name</i> must be distinct in each set. If it
does not begin with &lsquo;<b>_</b>&rsquo; this will be
added. The <i>widget&minus;name</i> should not clash with
the name of any existing widget: names based on the name of
the function are most useful. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>#compdef
&minus;K _foo_complete complete&minus;word &quot;^X^C&quot;
\ <br>
_foo_list list&minus;choices &quot;^X^D&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">(all on one
line) defines a widget <b>_foo_complete</b> for completion,
bound to &lsquo;<b>^X^C</b>&rsquo;, and a widget
<b>_foo_list</b> for listing, bound to
&lsquo;<b>^X^D</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>#autoload</b> [
<i>options</i> ]</p>

<p style="margin-left:22%;">Functions with the
<b>#autoload</b> tag are marked for autoloading but are not
otherwise treated specially. Typically they are to be called
from within one of the completion functions. Any
<i>options</i> supplied will be passed to the
<b>autoload</b> builtin; a typical use is <b>+X</b> to force
the function to be loaded immediately. Note that the
<b>&minus;U</b> and <b>&minus;z</b> flags are always added
implicitly.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>#</b> is
part of the tag name and no white space is allowed after it.
The <b>#compdef</b> tags use the <b>compdef</b> function
described below; the main difference is that the name of the
function is supplied implicitly.</p>

<p style="margin-left:11%; margin-top: 1em">The special
contexts for which completion functions can be defined are:
<b><br>
&minus;array&minus;value&minus;</b></p>

<p style="margin-left:22%;">The right hand side of an
array&minus;assignment (&lsquo;<b>foo=(...)</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;brace&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter
expansion within braces (&lsquo;<b>${...}</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;assign&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter in an
assignment, i.e. on the left hand side of an
&lsquo;<b>=</b>&rsquo;</p>


<p style="margin-left:11%;"><b>&minus;command&minus;</b></p>

<p style="margin-left:22%;">A word in command position</p>


<p style="margin-left:11%;"><b>&minus;condition&minus;</b></p>

<p style="margin-left:22%;">A word inside a condition
(&lsquo;<b>[[...]]</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;default&minus;</b></p>

<p style="margin-left:22%;">Any word for which no other
completion is defined</p>

<p style="margin-left:11%;"><b>&minus;equal&minus;</b></p>

<p style="margin-left:22%;">A word beginning with an equals
sign</p>

<p style="margin-left:11%;"><b>&minus;first&minus;</b></p>

<p style="margin-left:22%;">This is tried before any other
completion function. The function called may set the
<b>_compskip</b> parameter to one of various values:
<b>all</b>: no further completion is attempted; a string
containing the substring <b>patterns</b>: no pattern
completion functions will be called; a string containing
<b>default</b>: the function for the
&lsquo;<b>&minus;default&minus;</b>&rsquo; context will not
be called, but functions defined for commands will</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;math&minus;</b></p></td>
<td width="2%"></td>
<td width="72%">


<p>Inside mathematical contexts, such as
&lsquo;<b>((</b>...<b>))</b>&rsquo;</p> </td>
<td width="6%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;parameter&minus;</b></p>

<p style="margin-left:22%;">The name of a parameter
expansion (&lsquo;<b>$...</b>&rsquo;)</p>


<p style="margin-left:11%;"><b>&minus;redirect&minus;</b></p>

<p style="margin-left:22%;">The word after a redirection
operator.</p>


<p style="margin-left:11%;"><b>&minus;subscript&minus;</b></p>

<p style="margin-left:22%;">The contents of a parameter
subscript.</p>

<p style="margin-left:11%;"><b>&minus;tilde&minus;</b></p>

<p style="margin-left:22%;">After an initial tilde
(&lsquo;<b>~</b>&rsquo;), but before the first slash in the
word.</p>

<p style="margin-left:11%;"><b>&minus;value&minus;</b></p>

<p style="margin-left:22%;">On the right hand side of an
assignment.</p>

<p style="margin-left:11%; margin-top: 1em">Default
implementations are supplied for each of these contexts. In
most cases the context
<b>&minus;</b><i>context</i><b>&minus;</b> is implemented by
a corresponding function <b>_</b><i>context</i>, for example
the context &lsquo;<b>&minus;tilde&minus;</b>&rsquo; and the
function &lsquo;<b>_tilde</b>&rsquo;).</p>

<p style="margin-left:11%; margin-top: 1em">The contexts
<b>&minus;redirect&minus;</b> and <b>&minus;value&minus;</b>
allow extra context&minus;specific information. (Internally,
this is handled by the functions for each context calling
the function <b>_dispatch</b>.) The extra information is
added separated by commas.</p>

<p style="margin-left:11%; margin-top: 1em">For the
<b>&minus;redirect&minus;</b> context, the extra information
is in the form
&lsquo;<b>&minus;redirect&minus;,</b><i>op</i><b>,</b><i>command</i>&rsquo;,
where <i>op</i> is the redirection operator and
<i>command</i> is the name of the command on the line. If
there is no command on the line yet, the <i>command</i>
field will be empty.</p>

<p style="margin-left:11%; margin-top: 1em">For the
<b>&minus;value&minus;</b> context, the form is
&lsquo;<b>&minus;value&minus;,</b><i>name</i><b>,</b><i>command</i>&rsquo;,
where <i>name</i> is the name of the parameter. In the case
of elements of an associative array, for example
&lsquo;<b>assoc=(key &lt;TAB&gt;</b>&rsquo;, <i>name</i> is
expanded to
&lsquo;<i>name</i><b>&minus;</b><i>key</i>&rsquo;. In
certain special contexts, such as completing after
&lsquo;<b>make CFLAGS=</b>&rsquo;, the <i>command</i> part
gives the name of the command, here <b>make</b>; otherwise
it is empty.</p>

<p style="margin-left:11%; margin-top: 1em">It is not
necessary to define fully specific completions as the
functions provided will try to generate completions by
progressively replacing the elements with
&lsquo;<b>&minus;default&minus;</b>&rsquo;. For example,
when completing after &lsquo;<b>foo=&lt;TAB&gt;</b>&rsquo;,
<b>_value</b> will try the names
&lsquo;<b>&minus;value&minus;,foo,</b>&rsquo; (note the
empty <i>command</i> part),
&lsquo;<b>&minus;value&minus;,foo,&minus;default&minus;</b>&rsquo;
and&lsquo;<b>&minus;value&minus;,&minus;default&minus;,&minus;default&minus;</b>&rsquo;,
in that order, until it finds a function to handle the
context.</p>

<p style="margin-left:11%; margin-top: 1em">As an
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef
&rsquo;_files &minus;g &quot;*.log&quot;&rsquo;
&rsquo;&minus;redirect&minus;,2&gt;,&minus;default&minus;&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">completes files
matching &lsquo;<b>*.log</b>&rsquo; after &lsquo;<b>2&gt;
&lt;TAB&gt;</b>&rsquo; for any command with no more specific
handler defined.</p>

<p style="margin-left:11%; margin-top: 1em">Also:</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef _foo
&minus;value&minus;,&minus;default&minus;,&minus;default&minus;</b></p>

<p style="margin-left:11%; margin-top: 1em">specifies that
<b>_foo</b> provides completions for the values of
parameters for which no special function has been defined.
This is usually handled by the function <b>_value</b>
itself.</p>

<p style="margin-left:11%; margin-top: 1em">The same lookup
rules are used when looking up styles (as described below);
for example</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;redirect&minus;,2&gt;,*:*&rsquo;
file&minus;patterns &rsquo;*.log&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">is another way
to make completion after &lsquo;<b>2&gt;
&lt;TAB&gt;</b>&rsquo; complete files matching
&lsquo;<b>*.log</b>&rsquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Functions</b>
<br>
The following function is defined by <b>compinit</b> and may
be called directly. <b><br>
compdef</b> [ <b>&minus;ane</b> ] <i>function names...</i> [
<b>&minus;[pP]</b> <i>patterns...</i> [ <b>&minus;N</b>
<i>names...</i> ] <br>
] <b><br>
compdef &minus;d</b> <i>names...</i> <b><br>
compdef &minus;k</b> [ <b>&minus;an</b> ] <i>function style
key&minus;sequences...</i> <b><br>
compdef &minus;K</b> [ <b>&minus;an</b> ] <i>function name
style key&minus;sequences ...</i></p>

<p style="margin-left:22%;">The first form defines the
<i>function</i> to call for completion in the given contexts
as described for the <b>#compdef</b> tag above.</p>

<p style="margin-left:22%; margin-top: 1em">Alternatively,
all the arguments may have the form
&lsquo;<i>cmd</i><b>=</b><i>service</i>&rsquo;. Here
<i>service</i> should already have been defined by
&lsquo;<i>cmd1</i><b>=</b><i>service</i>&rsquo; lines in
<b>#compdef</b> files, as described above. The argument for
<i>cmd</i> will be completed in the same way as
<i>service</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>function</i> argument may alternatively be a string
containing almost any shell code. If the string contains an
equal sign, the above will take precedence. The option
<b>&minus;e</b> may be used to specify the first argument is
to be evaluated as shell code even if it contains an equal
sign. The string will be executed using the <b>eval</b>
builtin command to generate completions. This provides a way
of avoiding having to define a new completion function. For
example, to complete files ending in &lsquo;<b>.h</b>&rsquo;
as arguments to the command <b>foo</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>compdef
&rsquo;_files &minus;g &quot;*.h&quot;&rsquo; foo</b></p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;n</b> prevents any completions already defined for
the command or context from being overwritten.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;d</b> deletes any completion defined for the
command or contexts listed.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>names</i> may also contain <b>&minus;p</b>,
<b>&minus;P</b> and <b>&minus;N</b> options as described for
the <b>#compdef</b> tag. The effect on the argument list is
identical, switching between definitions of patterns tried
initially, patterns tried finally, and normal commands and
contexts.</p>

<p style="margin-left:22%; margin-top: 1em">The parameter
<b>$_compskip</b> may be set by any function defined for a
pattern context. If it is set to a value containing the
substring &lsquo;<b>patterns</b>&rsquo; none of the
pattern&minus;functions will be called; if it is set to a
value containing the substring &lsquo;<b>all</b>&rsquo;, no
other function will be called.</p>

<p style="margin-left:22%; margin-top: 1em">The form with
<b>&minus;k</b> defines a widget with the same name as the
<i>function</i> that will be called for each of the
<i>key&minus;sequences</i>; this is like the <b>#compdef
&minus;k</b> tag. The function should generate the
completions needed and will otherwise behave like the
builtin widget whose name is given as the <i>style</i>
argument. The widgets usable for this are:
<b>complete&minus;word</b>,
<b>delete&minus;char&minus;or&minus;list</b>,
<b>expand&minus;or&minus;complete</b>,
<b>expand&minus;or&minus;complete&minus;prefix</b>,
<b>list&minus;choices</b>, <b>menu&minus;complete</b>,
<b>menu&minus;expand&minus;or&minus;complete</b>, and
<b>reverse&minus;menu&minus;complete</b>, as well as
<b>menu&minus;select</b> if the <b>zsh/complist</b> module
is loaded. The option <b>&minus;n</b> prevents the key being
bound if it is already to bound to something other than
<b>undefined&minus;key</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The form with
<b>&minus;K</b> is similar and defines multiple widgets
based on the same <i>function</i>, each of which requires
the set of three arguments <i>name</i>, <i>style</i> and
<i>key&minus;sequences</i>, where the latter two are as for
<b>&minus;k</b> and the first must be a unique widget name
beginning with an underscore.</p>

<p style="margin-left:22%; margin-top: 1em">Wherever
applicable, the <b>&minus;a</b> option makes the
<i>function</i> autoloadable, equivalent to <b>autoload
&minus;U</b> <i>function</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>compdef</b> can be used to associate existing completion
functions with new commands. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>compdef
_pids foo</b></p>

<p style="margin-left:11%; margin-top: 1em">uses the
function <b>_pids</b> to complete process IDs for the
command <b>foo</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note also the
<b>_gnu_generic</b> function described below, which can be
used to complete options for commands that understand the
&lsquo;<b>&minus;&minus;help</b>&rsquo; option.</p>

<h2>COMPLETION SYSTEM CONFIGURATION
<a name="COMPLETION SYSTEM CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
gives a short overview of how the completion system works,
and then more detail on how users can configure how and when
matches are generated.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Overview</b>
<br>
When completion is attempted somewhere on the command line
the completion system first works out the context. This
takes account of a number of things including the command
word (such as &lsquo;<b>grep</b>&rsquo; or
&lsquo;<b>zsh</b>&rsquo;) and options to which the current
word may be an argument (such as the
&lsquo;<b>&minus;o</b>&rsquo; option to <b>zsh</b> which
takes a shell option as an argument).</p>

<p style="margin-left:11%; margin-top: 1em">This context
information is condensed into a string consisting of
multiple fields separated by colons, referred to simply as
&lsquo;the context&rsquo; in the remainder of the
documentation. This is used to look up <i>styles</i>,
context&minus;sensitive options that can be used to
configure the completion system. The context used for lookup
may vary during the same call to the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">The context
string always consists of a fixed set of fields, separated
by colons and with a leading colon before the first, in the
form
<b>:completion:</b><i>function</i><b>:</b><i>completer</i><b>:</b><i>command</i><b>:</b><i>argument</i><b>:tag</b>.
These have the following meaning:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The literal string <b>completion</b>, saying that this
style is used by the completion system. This distinguishes
the context from those used by, for example, zle widgets and
ZFTP functions.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>function</i>, if completion is called from a
named widget rather than through the normal completion
system. Typically this is blank, but it is set by special
widgets such as <b>predict&minus;on</b> and the various
functions in the <b>Widget</b> directory of the distribution
to the name of that function, often in an abbreviated
form.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>completer</i> currently active, the name of the
function without the leading underscore and with other
underscores converted to hyphens. A &lsquo;completer&rsquo;
is in overall control of how completion is to be performed;
&lsquo;<b>complete</b>&rsquo; is the simplest, but other
completers exist to perform related tasks such as
correction, or to modify the behaviour of a later completer.
See the section &lsquo;Control Functions&rsquo; below for
more information.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>command</i> or a special
<b>&minus;</b><i>context</i><b>&minus;</b>, just at it
appears following the <b>#compdef</b> tag or the
<b>compdef</b> function. Completion functions for commands
that have sub&minus;commands usually modify this field to
contain the name of the command followed by a minus sign and
the sub&minus;command. For example, the completion function
for the <b>cvs</b> command sets this field to
<b>cvs&minus;add</b> when completing arguments to the
<b>add</b> subcommand.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>argument</i>; this indicates which command line
or option argument we are completing. For command arguments
this generally takes the form
<b>argument&minus;</b><i>n</i>, where <i>n</i> is the number
of the argument, and for arguments to options the form
<b>option&minus;</b><i>opt</i><b>&minus;</b><i>n</i> where
<i>n</i> is the number of the argument to option <i>opt</i>.
However, this is only the case if the command line is parsed
with standard UNIX&minus;style options and arguments, so
many completions do not set this.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="10%"></td>
<td width="78%">


<p>The <i>tag</i>. As described previously, tags are used
to discriminate between the types of matches a completion
function can generate in a certain context. Any completion
function may use any tag name it likes, but a list of the
more common ones is given below.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The context is
gradually put together as the functions are executed,
starting with the main entry point, which adds
<b>:completion:</b> and the <i>function</i> element if
necessary. The completer then adds the <i>completer</i>
element. The contextual completion adds the <i>command</i>
and <i>argument</i> options. Finally, the <i>tag</i> is
added when the types of completion are known. For example,
the context name</p>


<p style="margin-left:22%; margin-top: 1em"><b>:completion::complete:dvips:option&minus;o&minus;1:files</b></p>

<p style="margin-left:11%; margin-top: 1em">says that
normal completion was attempted as the first argument to the
option <b>&minus;o</b> of the command <b>dvips</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>dvips
&minus;o ...</b></p>

<p style="margin-left:11%; margin-top: 1em">and the
completion function will generate filenames.</p>

<p style="margin-left:11%; margin-top: 1em">Usually
completion will be tried for all possible tags in an order
given by the completion function. However, this can be
altered by using the <b>tag&minus;order</b> style.
Completion is then restricted to the list of given tags in
the given order.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>_complete_help</b> bindable command shows all the
contexts and tags available for completion at a particular
point. This provides an easy way of finding information for
<b>tag&minus;order</b> and other styles. It is described in
the section &lsquo;Bindable Commands&rsquo; below.</p>

<p style="margin-left:11%; margin-top: 1em">Styles
determine such things as how the matches are generated,
similarly to shell options but with much more control. They
can have any number of strings as their value. They are
defined with the <b>zstyle</b> builtin command (see
<i>zshmodules</i>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">When looking up
styles the completion system uses full context names,
including the tag. Looking up the value of a style therefore
consists of two things: the context, which may be matched as
a pattern, and the name of the style itself, which must be
given exactly.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
many completion functions can generate matches in a simple
and a verbose form and use the <b>verbose</b> style to
decide which form should be used. To make all such functions
use the verbose form, put</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; verbose yes</b></p>

<p style="margin-left:11%; margin-top: 1em">in a startup
file (probably <b>.zshrc</b>). This gives the <b>verbose</b>
style the value <b>yes</b> in every context inside the
completion system, unless that context has a more specific
definition. It is best to avoid giving the context as
&lsquo;<b>*</b>&rsquo; in case the style has some meaning
outside the completion system.</p>

<p style="margin-left:11%; margin-top: 1em">Many such
general purpose styles can be configured simply by using the
<b>compinstall</b> function.</p>

<p style="margin-left:11%; margin-top: 1em">A more specific
example of the use of the <b>verbose</b> style is by the
completion for the <b>kill</b> builtin. If the style is set,
the builtin lists full job texts and process command lines;
otherwise it shows the bare job numbers and PIDs. To turn
the style off for this use only:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:kill:*&rsquo; verbose no</b></p>

<p style="margin-left:11%; margin-top: 1em">For even more
control, the style can use one of the tags
&lsquo;<b>jobs</b>&rsquo; or &lsquo;<b>processes</b>&rsquo;.
To turn off verbose display only for jobs:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:kill:*:jobs&rsquo; verbose no</b></p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;e</b> option to <b>zstyle</b> even allows
completion function code to appear as the argument to a
style; this requires some understanding of the internals of
completion functions (see see <i>zshcompwid</i>(1))). For
example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; hosts
&rsquo;reply=($myhosts)&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This forces the
value of the <b>hosts</b> style to be read from the variable
<b>myhosts</b> each time a host name is needed; this is
useful if the value of <b>myhosts</b> can change
dynamically. For another useful example, see the example in
the description of the <b>file&minus;list</b> style below.
This form can be slow and should be avoided for commonly
examined styles such as <b>menu</b> and
<b>list&minus;rows&minus;first</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
order in which styles are <i>defined</i> does not matter;
the style mechanism uses the most specific possible match
for a particular style to determine the set of values. More
precisely, strings are preferred over patterns (for example,
&lsquo;<b>:completion::complete:foo</b>&rsquo; is more
specific than &lsquo;<b>:completion::complete:*&rsquo;</b>),
and longer patterns are preferred over shorter patterns.</p>

<p style="margin-left:11%; margin-top: 1em">Style names
like those of tags are arbitrary and depend on the
completion function. However, the following two sections
list some of the most common tags and styles.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Standard
Tags</b> <br>
Some of the following are only used when looking up
particular styles and do not refer to a type of match.
<b><br>
accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>


<p style="margin-left:11%;"><b>all&minus;expansions</b></p>

<p style="margin-left:22%;">used by the <b>_expand</b>
completer when adding the single string containing all
possible expansions</p>

<p style="margin-left:11%;"><b>all&minus;files</b></p>

<p style="margin-left:22%;">for the names of all files (as
distinct from a particular subset, see the
<b>globbed&minus;files</b> tag).</p>

<p style="margin-left:11%;"><b>arguments</b></p>

<p style="margin-left:22%;">for arguments to a command</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>arrays</b></p></td>
<td width="2%"></td>
<td width="44%">


<p>for names of array parameters</p></td>
<td width="34%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>association&minus;keys</b></p>

<p style="margin-left:22%;">for keys of associative arrays;
used when completing inside a subscript to a parameter of
this type</p>

<p style="margin-left:11%;"><b>bookmarks</b></p>

<p style="margin-left:22%;">when completing bookmarks (e.g.
for URLs and the <b>zftp</b> function suite)</p>

<p style="margin-left:11%;"><b>builtins</b></p>

<p style="margin-left:22%;">for names of builtin
commands</p>

<p style="margin-left:11%;"><b>characters</b></p>

<p style="margin-left:22%;">for single characters in
arguments of commands such as <b>stty</b>. Also used when
completing character classes after an opening bracket</p>

<p style="margin-left:11%;"><b>colormapids</b></p>

<p style="margin-left:22%;">for X colormap ids</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>colors</b></p></td>
<td width="2%"></td>
<td width="23%">


<p>for color names</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">for names of external commands.
Also used by complex commands such as <b>cvs</b> when
completing names subcommands.</p>

<p style="margin-left:11%;"><b>contexts</b></p>

<p style="margin-left:22%;">for contexts in arguments to
the <b>zstyle</b> builtin command</p>

<p style="margin-left:11%;"><b>corrections</b></p>

<p style="margin-left:22%;">used by the <b>_approximate</b>
and <b>_correct</b> completers for possible corrections</p>

<p style="margin-left:11%;"><b>cursors</b></p>

<p style="margin-left:22%;">for cursor names used by X
programs</p>

<p style="margin-left:11%;"><b>default</b></p>

<p style="margin-left:22%;">used in some contexts to
provide a way of supplying a default when more specific tags
are also valid. Note that this tag is used when only the
<i>function</i> field of the context name is set</p>

<p style="margin-left:11%;"><b>descriptions</b></p>

<p style="margin-left:22%;">used when looking up the value
of the <b>format</b> style to generate descriptions for
types of matches</p>

<p style="margin-left:11%;"><b>devices</b></p>

<p style="margin-left:22%;">for names of device special
files</p>

<p style="margin-left:11%;"><b>directories</b></p>

<p style="margin-left:22%;">for names of directories
&minus;&minus; <b>local&minus;directories</b> is used
instead when completing arguments of <b>cd</b> and related
builtin commands when the <b>cdpath</b> array is set</p>


<p style="margin-left:11%;"><b>directory&minus;stack</b></p>

<p style="margin-left:22%;">for entries in the directory
stack</p>

<p style="margin-left:11%;"><b>displays</b></p>

<p style="margin-left:22%;">for X display names</p>

<p style="margin-left:11%;"><b>domains</b></p>

<p style="margin-left:22%;">for network domains</p>

<p style="margin-left:11%;"><b>expansions</b></p>

<p style="margin-left:22%;">used by the <b>_expand</b>
completer for individual words (as opposed to the complete
set of expansions) resulting from the expansion of a word on
the command line</p>

<p style="margin-left:11%;"><b>extensions</b></p>

<p style="margin-left:22%;">for X server extensions</p>


<p style="margin-left:11%;"><b>file&minus;descriptors</b></p>

<p style="margin-left:22%;">for numbers of open file
descriptors</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>files</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>the generic file&minus;matching tag used by functions
completing filenames</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>fonts</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for X font names</p></td></tr>
</table>

<p style="margin-left:11%;"><b>fstypes</b></p>

<p style="margin-left:22%;">for file system types (e.g. for
the <b>mount</b> command)</p>

<p style="margin-left:11%;"><b>functions</b></p>

<p style="margin-left:22%;">names of functions
&minus;&minus; normally shell functions, although certain
commands may understand other kinds of function</p>

<p style="margin-left:11%;"><b>globbed&minus;files</b></p>

<p style="margin-left:22%;">for filenames when the name has
been generated by pattern matching</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>groups</b></p></td>
<td width="2%"></td>
<td width="36%">


<p>for names of user groups</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>history&minus;words</b></p>

<p style="margin-left:22%;">for words from the history</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>hosts</b></p></td>
<td width="4%"></td>
<td width="20%">


<p>for hostnames</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>indexes</b></p>

<p style="margin-left:22%;">for array indexes</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>jobs</b></p></td>
<td width="5%"></td>
<td width="64%">


<p>for jobs (as listed by the &lsquo;<b>jobs</b>&rsquo;
builtin)</p> </td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>interfaces</b></p>

<p style="margin-left:22%;">for network interfaces</p>

<p style="margin-left:11%;"><b>keymaps</b></p>

<p style="margin-left:22%;">for names of zsh keymaps</p>

<p style="margin-left:11%;"><b>keysyms</b></p>

<p style="margin-left:22%;">for names of X keysyms</p>

<p style="margin-left:11%;"><b>libraries</b></p>

<p style="margin-left:22%;">for names of system
libraries</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>limits</b></p></td>
<td width="2%"></td>
<td width="26%">


<p>for system limits</p></td>
<td width="52%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>local&minus;directories</b></p>

<p style="margin-left:22%;">for names of directories that
are subdirectories of the current working directory when
completing arguments of <b>cd</b> and related builtin
commands (compare <b>path&minus;directories</b>)
&minus;&minus; when the <b>cdpath</b> array is unset,
<b>directories</b> is used instead</p>

<p style="margin-left:11%;"><b>manuals</b></p>

<p style="margin-left:22%;">for names of manual pages</p>

<p style="margin-left:11%;"><b>mailboxes</b></p>

<p style="margin-left:22%;">for e&minus;mail folders</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>maps</b></p></td>
<td width="5%"></td>
<td width="44%">


<p>for map names (e.g. NIS maps)</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>messages</b></p>

<p style="margin-left:22%;">used to look up the
<b>format</b> style for messages</p>

<p style="margin-left:11%;"><b>modifiers</b></p>

<p style="margin-left:22%;">for names of X modifiers</p>

<p style="margin-left:11%;"><b>modules</b></p>

<p style="margin-left:22%;">for modules (e.g. <b>zsh</b>
modules)</p>

<p style="margin-left:11%;"><b>my&minus;accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>


<p style="margin-left:11%;"><b>named&minus;directories</b></p>

<p style="margin-left:22%;">for named directories (you
wouldn&rsquo;t have guessed that, would you?)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>names</b></p></td>
<td width="4%"></td>
<td width="33%">


<p>for all kinds of names</p></td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>newsgroups</b></p>

<p style="margin-left:22%;">for USENET groups</p>

<p style="margin-left:11%;"><b>nicknames</b></p>

<p style="margin-left:22%;">for nicknames of NIS maps</p>

<p style="margin-left:11%;"><b>options</b></p>

<p style="margin-left:22%;">for command options</p>

<p style="margin-left:11%;"><b>original</b></p>

<p style="margin-left:22%;">used by the
<b>_approximate</b>, <b>_correct</b> and <b>_expand</b>
completers when offering the original string as a match</p>


<p style="margin-left:11%;"><b>other&minus;accounts</b></p>

<p style="margin-left:22%;">used to look up the
<b>users&minus;hosts</b> style</p>

<p style="margin-left:11%;"><b>other&minus;files</b></p>

<p style="margin-left:22%;">for the names of any
non&minus;directory files. This is used instead of
<b>all&minus;files</b> when the
<b>list&minus;dirs&minus;first</b> style is in effect.</p>

<p style="margin-left:11%;"><b>packages</b></p>

<p style="margin-left:22%;">for packages (e.g. <b>rpm</b>
or installed <b>Debian</b> packages)</p>

<p style="margin-left:11%;"><b>parameters</b></p>

<p style="margin-left:22%;">for names of parameters</p>


<p style="margin-left:11%;"><b>path&minus;directories</b></p>

<p style="margin-left:22%;">for names of directories found
by searching the <b>cdpath</b> array when completing
arguments of <b>cd</b> and related builtin commands (compare
<b>local&minus;directories</b>)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>paths</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>used to look up the values of the <b>expand</b>,
<b>ambiguous</b> and <b>special&minus;dirs</b> styles</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>pods</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for perl pods (documentation files)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ports</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>for communication ports</p></td></tr>
</table>

<p style="margin-left:11%;"><b>prefixes</b></p>

<p style="margin-left:22%;">for prefixes (like those of a
URL)</p>

<p style="margin-left:11%;"><b>printers</b></p>

<p style="margin-left:22%;">for print queue names</p>

<p style="margin-left:11%;"><b>processes</b></p>

<p style="margin-left:22%;">for process identifiers</p>


<p style="margin-left:11%;"><b>processes&minus;names</b></p>

<p style="margin-left:22%;">used to look up the
<b>command</b> style when generating the names of processes
for <b>killall</b></p>

<p style="margin-left:11%;"><b>sequences</b></p>

<p style="margin-left:22%;">for sequences (e.g. <b>mh</b>
sequences)</p>

<p style="margin-left:11%;"><b>sessions</b></p>

<p style="margin-left:22%;">for sessions in the <b>zftp</b>
function suite</p>

<p style="margin-left:11%;"><b>signals</b></p>

<p style="margin-left:22%;">for signal names</p>

<p style="margin-left:11%;"><b>strings</b></p>

<p style="margin-left:22%;">for strings (e.g. the
replacement strings for the <b>cd</b> builtin command)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>styles</b></p></td>
<td width="2%"></td>
<td width="69%">


<p>for styles used by the zstyle builtin command</p></td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>suffixes</b></p>

<p style="margin-left:22%;">for filename extensions</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>tags</b></p></td>
<td width="5%"></td>
<td width="36%">


<p>for tags (e.g. <b>rpm</b> tags)</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>targets</b></p>

<p style="margin-left:22%;">for makefile targets</p>

<p style="margin-left:11%;"><b>time&minus;zones</b></p>

<p style="margin-left:22%;">for time zones (e.g. when
setting the <b>TZ</b> parameter)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>types</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for types of whatever (e.g. address types for the
<b>xhost</b> command)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>urls</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>used to look up the <b>urls</b> and <b>local</b> styles
when completing URLs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>users</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for usernames</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>values</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>for one of a set of values in certain lists</p></td></tr>
</table>

<p style="margin-left:11%;"><b>variant</b></p>

<p style="margin-left:22%;">used by <b>_pick_variant</b> to
look up the command to run when determining what program is
installed for a particular command name.</p>

<p style="margin-left:11%;"><b>visuals</b></p>

<p style="margin-left:22%;">for X visuals</p>

<p style="margin-left:11%;"><b>warnings</b></p>

<p style="margin-left:22%;">used to look up the
<b>format</b> style for warnings</p>

<p style="margin-left:11%;"><b>widgets</b></p>

<p style="margin-left:22%;">for zsh widget names</p>

<p style="margin-left:11%;"><b>windows</b></p>

<p style="margin-left:22%;">for IDs of X windows</p>

<p style="margin-left:11%;"><b>zsh&minus;options</b></p>

<p style="margin-left:22%;">for shell options</p>

<p style="margin-left:11%; margin-top: 1em"><b>Standard
Styles</b> <br>
Note that the values of several of these styles represent
boolean values. Any of the strings
&lsquo;<b>true</b>&rsquo;, &lsquo;<b>on</b>&rsquo;,
&lsquo;<b>yes</b>&rsquo;, and &lsquo;<b>1</b>&rsquo; can be
used for the value &lsquo;true&rsquo; and any of the strings
&lsquo;<b>false</b>&rsquo;, &lsquo;<b>off</b>&rsquo;,
&lsquo;<b>no</b>&rsquo;, and &lsquo;<b>0</b>&rsquo; for the
value &lsquo;false&rsquo;. The behavior for any other value
is undefined except where explicitly mentioned. The default
value may be either true or false if the style is not
set.</p>

<p style="margin-left:11%; margin-top: 1em">Some of these
styles are tested first for every possible tag corresponding
to a type of match, and if no style was found, for the
<b>default</b> tag. The most notable styles of this type are
<b>menu</b>, <b>list&minus;colors</b> and styles controlling
completion listing such as <b>list&minus;packed</b> and
<b>last&minus;prompt</b>. When tested for the <b>default</b>
tag, only the <i>function</i> field of the context will be
set so that a style using the default tag will normally be
defined along the lines of:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:default&rsquo; menu ...</b></p>

<p style="margin-left:11%;"><b>accept&minus;exact</b></p>

<p style="margin-left:22%;">This is tested for the default
tag in addition to the tags valid for the current context.
If it is set to &lsquo;true&rsquo; and any of the trial
matches is the same as the string on the command line, this
match will immediately be accepted (even if it would
otherwise be considered ambiguous).</p>

<p style="margin-left:22%; margin-top: 1em">When completing
pathnames (where the tag used is &lsquo;<b>paths</b>&rsquo;)
this style accepts any number of patterns as the value in
addition to the boolean values. Pathnames matching one of
these patterns will be accepted immediately even if the
command line contains some more partially typed pathname
components and these match no file under the directory
accepted.</p>

<p style="margin-left:22%; margin-top: 1em">This style is
also used by the <b>_expand</b> completer to decide if words
beginning with a tilde or parameter expansion should be
expanded. For example, if there are parameters <b>foo</b>
and <b>foobar</b>, the string &lsquo;<b>$foo</b>&rsquo; will
only be expanded if <b>accept&minus;exact</b> is set to
&lsquo;true&rsquo;; otherwise the completion system will be
allowed to complete <b>$foo</b> to <b>$foobar</b>. If the
style is set to &lsquo;continue&rsquo;, _expand will add the
expansion as a match and the completion system will also be
allowed to continue.</p>


<p style="margin-left:11%;"><b>accept&minus;exact&minus;dirs</b></p>

<p style="margin-left:22%;">This is used by filename
completion. Unlike <b>accept&minus;exact</b> it is a
boolean. By default, filename completion examines all
components of a path to see if there are completions of that
component, even if the component matches an existing
directory. For example, when completion after
<b>/usr/bin/</b>, the function examines possible completions
to <b>/usr</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When this style
is true, any prefix of a path that matches an existing
directory is accepted without any attempt to complete it
further. Hence, in the given example, the path
<b>/usr/bin/</b> is accepted immediately and completion
tried in that directory.</p>

<p style="margin-left:22%; margin-top: 1em">If you wish to
inhibit this behaviour entirely, set the
<b>path&minus;completion</b> style (see below) to
<b>false</b>.</p>

<p style="margin-left:11%;"><b>add&minus;space</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand</b> completer. If it is true (the default), a
space will be inserted after all words resulting from the
expansion, or a slash in the case of directory names. If the
value is &lsquo;<b>file</b>&rsquo;, the completer will only
add a space to names of existing files. Either a boolean
true or the value &lsquo;<b>file</b>&rsquo; may be combined
with &lsquo;<b>subst</b>&rsquo;, in which case the completer
will not add a space to words generated from the expansion
of a substitution of the form &lsquo;<b>$(...)</b>&rsquo; or
&lsquo;<b>${...}</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>_prefix</b> completer uses this style as a simple boolean
value to decide if a space should be inserted before the
suffix.</p>

<p style="margin-left:11%;"><b>ambiguous</b></p>

<p style="margin-left:22%;">This applies when completing
non&minus;final components of filename paths, in other words
those with a trailing slash. If it is set, the cursor is
left after the first ambiguous component, even if menu
completion is in use. The style is always tested with the
<b>paths</b> tag.</p>

<p style="margin-left:11%;"><b>assign&minus;list</b></p>

<p style="margin-left:22%;">When completing after an equals
sign that is being treated as an assignment, the completion
system normally completes only one filename. In some cases
the value may be a list of filenames separated by colons, as
with <b>PATH</b> and similar parameters. This style can be
set to a list of patterns matching the names of such
parameters.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
to complete lists when the word on the line already contains
a colon.</p>


<p style="margin-left:11%;"><b>auto&minus;description</b></p>

<p style="margin-left:22%;">If set, this style&rsquo;s
value will be used as the description for options that are
not described by the completion functions, but that have
exactly one argument. The sequence &lsquo;<b>%d</b>&rsquo;
in the value will be replaced by the description for this
argument. Depending on personal preferences, it may be
useful to set this style to something like
&lsquo;<b>specify: %d</b>&rsquo;. Note that this may not
work for some commands.</p>


<p style="margin-left:11%;"><b>avoid&minus;completer</b></p>

<p style="margin-left:22%;">This is used by the
<b>_all_matches</b> completer to decide if the string
consisting of all matches should be added to the list
currently being generated. Its value is a list of names of
completers. If any of these is the name of the completer
that generated the matches in this completion, the string
will not be added.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>_expand _old_list _correct
_approximate</b>&rsquo;, i.e. it contains the completers for
which a string with all matches will almost never be
wanted.</p>

<p style="margin-left:11%;"><b>cache&minus;path</b></p>

<p style="margin-left:22%;">This style defines the path
where any cache files containing dumped completion data are
stored. It defaults to
&lsquo;<b>$ZDOTDIR/.zcompcache</b>&rsquo;, or
&lsquo;<b>$HOME/.zcompcache</b>&rsquo; if <b>$ZDOTDIR</b> is
not defined. The completion cache will not be used unless
the <b>use&minus;cache</b> style is set.</p>

<p style="margin-left:11%;"><b>cache&minus;policy</b></p>

<p style="margin-left:22%;">This style defines the function
that will be used to determine whether a cache needs
rebuilding. See the section on the <b>_cache_invalid</b>
function below.</p>

<p style="margin-left:11%;"><b>call&minus;command</b></p>

<p style="margin-left:22%;">This style is used in the
function for commands such as <b>make</b> and <b>ant</b>
where calling the command directly to generate matches
suffers problems such as being slow or, as in the case of
<b>make</b> can potentially cause actions in the makefile to
be executed. If it is set to &lsquo;true&rsquo; the command
is called to generate matches. The default value of this
style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>command</b></p>

<p style="margin-left:22%;">In many places, completion
functions need to call external commands to generate the
list of completions. This style can be used to override the
command that is called in some such cases. The elements of
the value are joined with spaces to form a command line to
execute. The value can also start with a hyphen, in which
case the usual command will be added to the end; this is
most useful for putting &lsquo;<b>builtin</b>&rsquo; or
&lsquo;<b>command</b>&rsquo; in front to make sure the
appropriate version of a command is called, for example to
avoid calling a shell function with the same name as an
external command.</p>

<p style="margin-left:22%; margin-top: 1em">As an example,
the completion function for process IDs uses this style with
the <b>processes</b> tag to generate the IDs to complete and
the list of processes to display (if the <b>verbose</b>
style is &lsquo;true&rsquo;). The list produced by the
command should look like the output of the <b>ps</b>
command. The first line is not displayed, but is searched
for the string &lsquo;<b>PID</b>&rsquo; (or
&lsquo;<b>pid</b>&rsquo;) to find the position of the
process IDs in the following lines. If the line does not
contain &lsquo;<b>PID</b>&rsquo;, the first numbers in each
of the other lines are taken as the process IDs to
complete.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
completion function generally has to call the specified
command for each attempt to generate the completion list.
Hence care should be taken to specify only commands that
take a short time to run, and in particular to avoid any
that may never terminate.</p>

<p style="margin-left:11%;"><b>command&minus;path</b></p>

<p style="margin-left:22%;">This is a list of directories
to search for commands to complete. The default for this
style is the value of the special parameter <b>path</b>.</p>

<p style="margin-left:11%;"><b>commands</b></p>

<p style="margin-left:22%;">This is used by the function
completing sub&minus;commands for the system initialisation
scripts (residing in <b>/etc/init.d</b> or somewhere not too
far away from that). Its values give the default commands to
complete for those commands for which the completion
function isn&rsquo;t able to find them out automatically.
The default for this style are the two strings
&lsquo;<b>start</b>&rsquo; and
&lsquo;<b>stop</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>complete</b></p>

<p style="margin-left:22%;">This is used by the
<b>_expand_alias</b> function when invoked as a bindable
command. If set to &lsquo;true&rsquo; and the word on the
command line is not the name of an alias, matching alias
names will be completed.</p>


<p style="margin-left:11%;"><b>complete&minus;options</b></p>

<p style="margin-left:22%;">This is used by the completer
for <b>cd</b>, <b>chdir</b> and <b>pushd</b>. For these
commands a <b>&minus;</b> is used to introduce a directory
stack entry and completion of these is far more common than
completing options. Hence unless the value of this style is
true options will not be completed, even after an initial
<b>&minus;</b>. If it is true, options will be completed
after an initial <b>&minus;</b> unless there is a preceding
<b>&minus;&minus;</b> on the command line.</p>

<p style="margin-left:11%;"><b>completer</b></p>

<p style="margin-left:22%;">The strings given as the value
of this style provide the names of the completer functions
to use. The available completer functions are described in
the section &lsquo;Control Functions&rsquo; below.</p>

<p style="margin-left:22%; margin-top: 1em">Each string may
be either the name of a completer function or a string of
the form &lsquo;<i>function</i><b>:</b><i>name</i>&rsquo;.
In the first case the <i>completer</i> field of the context
will contain the name of the completer without the leading
underscore and with all other underscores replaced by
hyphens. In the second case the <i>function</i> is the name
of the completer to call, but the context will contain the
user&minus;defined <i>name</i> in the <i>completer</i> field
of the context. If the <i>name</i> starts with a hyphen, the
string for the context will be build from the name of the
completer function as in the first case with the <i>name</i>
appended to it. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_complete:&minus;foo</b></p>

<p style="margin-left:22%; margin-top: 1em">Here,
completion will call the <b>_complete</b> completer twice,
once using &lsquo;<b>complete</b>&rsquo; and once using
&lsquo;<b>complete&minus;foo</b>&rsquo; in the
<i>completer</i> field of the context. Normally, using the
same completer more than once only makes sense when used
with the &lsquo;<i>functions</i><b>:</b><i>name</i>&rsquo;
form, because otherwise the context name will be the same in
all calls to the completer; possible exceptions to this rule
are the <b>_ignored</b> and <b>_prefix</b> completers.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>_complete
_ignored</b>&rsquo;: only completion will be done, first
using the <b>ignored&minus;patterns</b> style and the
<b>$fignore</b> array and then without ignoring matches.</p>

<p style="margin-left:11%;"><b>condition</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_list</b> completer function to decide if insertion of
matches should be delayed unconditionally. The default is
&lsquo;true&rsquo;.</p>

<p style="margin-left:11%;"><b>delimiters</b></p>

<p style="margin-left:22%;">This style is used when adding
a delimiter for use with history modifiers or glob
qualifiers that have delimited arguments. It is an array of
preferred delimiters to add. Non&minus;special characters
are preferred as the completion system may otherwise become
confused. The default list is <b>:</b>, <b>+</b>, <b>/</b>,
<b>&minus;</b>, <b>%</b>. The list may be empty to force a
delimiter to be typed.</p>

<p style="margin-left:11%;"><b>disabled</b></p>

<p style="margin-left:22%;">If this is set to
&lsquo;true&rsquo;, the <b>_expand_alias</b> completer and
bindable command will try to expand disabled aliases, too.
The default is &lsquo;<b>false</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>domains</b></p>

<p style="margin-left:22%;">A list of names of network
domains for completion. If this is not set, domain names
will be taken from the file <b>/etc/resolv.conf</b>.</p>

<p style="margin-left:11%;"><b>environ</b></p>

<p style="margin-left:22%;">The environ style is used when
completing for &lsquo;<b>sudo</b>&rsquo;. It is set to an
array of &lsquo;<i>VAR</i><b>=</b><i>value</i>&rsquo;
assignments to be exported into the local environment before
the completion for the target command is invoked. <b><br>
zstyle &rsquo;:completion:*:sudo::&rsquo; environ \ <br>
PATH=&quot;/sbin:/usr/sbin:$PATH&quot;
HOME=&quot;/root&quot;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>expand</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This style is used when completing strings consisting of
multiple parts, such as path names.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If one of its
values is the string &lsquo;<b>prefix</b>&rsquo;, the
partially typed word from the line will be expanded as far
as possible even if trailing parts cannot be completed.</p>

<p style="margin-left:22%; margin-top: 1em">If one of its
values is the string &lsquo;<b>suffix</b>&rsquo;, matching
names for components after the first ambiguous one will also
be added. This means that the resulting string is the
longest unambiguous string possible. However, menu
completion can be used to cycle through all matches.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>fake</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">This style may be set for any
completion context. It specifies additional strings that
will always be completed in that context. The form of each
string is
&lsquo;<i>value</i><b>:</b><i>description</i>&rsquo;; the
colon and description may be omitted, but any literal colons
in <i>value</i> must be quoted with a backslash. Any
<i>description</i> provided is shown alongside the value in
completion listings.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">It is important
to use a sufficiently restrictive context when specifying
fake strings. Note that the styles <b>fake&minus;files</b>
and <b>fake&minus;parameters</b> provide additional features
when completing files or parameters.</p>

<p style="margin-left:11%;"><b>fake&minus;always</b></p>

<p style="margin-left:22%;">This works identically to the
<b>fake</b> style except that the
<b>ignored&minus;patterns</b> style is not applied to it.
This makes it possible to override a set of matches
completely by setting the ignored patterns to
&lsquo;<b>*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The following
shows a way of supplementing any tag with arbitrary data,
but having it behave for display purposes like a separate
tag. In this example we use the features of the
<b>tag&minus;order</b> style to divide the
<b>named&minus;directories</b> tag into two when performing
completion with the standard completer <b>complete</b> for
arguments of <b>cd</b>. The tag
<b>named&minus;directories&minus;normal</b> behaves as
normal, but the tag
<b>named&minus;directories&minus;mine</b> contains a fixed
set of directories. This has the effect of adding the match
group &lsquo;<b>extra directories</b>&rsquo; with the given
completions.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion::complete:cd:*&rsquo; tag&minus;order \
<br>
&rsquo;named&minus;directories:&minus;mine:extra\
directories <br>
named&minus;directories:&minus;normal:named\ directories
*&rsquo; <br>
zstyle
&rsquo;:completion::complete:cd:*:named&minus;directories&minus;mine&rsquo;
\ <br>
fake&minus;always mydir1 mydir2 <br>
zstyle
&rsquo;:completion::complete:cd:*:named&minus;directories&minus;mine&rsquo;
\ <br>
ignored&minus;patterns &rsquo;*&rsquo;</b></p>

<p style="margin-left:11%;"><b>fake&minus;files</b></p>

<p style="margin-left:22%;">This style is used when
completing files and looked up without a tag. Its values are
of the form &lsquo;<i>dir</i><b>:</b><i>names...</i>&rsquo;.
This will add the <i>names</i> (strings separated by spaces)
as possible matches when completing in the directory
<i>dir</i>, even if no such files really exist. The dir may
be a pattern; pattern characters or colons in <i>dir</i>
should be quoted with a backslash to be treated
literally.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
useful on systems that support special file systems whose
top&minus;level pathnames can not be listed or generated
with glob patterns. It can also be used for directories for
which one does not have read permission.</p>

<p style="margin-left:22%; margin-top: 1em">The pattern
form can be used to add a certain &lsquo;magic&rsquo; entry
to all directories on a particular file system.</p>


<p style="margin-left:11%;"><b>fake&minus;parameters</b></p>

<p style="margin-left:22%;">This is used by the completion
function for parameter names. Its values are names of
parameters that might not yet be set but should be completed
nonetheless. Each name may also be followed by a colon and a
string specifying the type of the parameter (like
&lsquo;<b>scalar</b>&rsquo;, &lsquo;<b>array</b>&rsquo; or
&lsquo;<b>integer</b>&rsquo;). If the type is given, the
name will only be completed if parameters of that type are
required in the particular context. Names for which no type
is specified will always be completed.</p>

<p style="margin-left:11%;"><b>file&minus;list</b></p>

<p style="margin-left:22%;">This style controls whether
files completed using the standard builtin mechanism are to
be listed with a long list similar to <b>ls &minus;l</b>.
Note that this feature uses the shell module <b>zsh/stat</b>
for file information; this loads the builtin <b>stat</b>
which will replace any external <b>stat</b> executable. To
avoid this the following code can be included in an
initialization file:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zmodload
&minus;i zsh/stat <br>
disable stat</b></p>

<p style="margin-left:22%; margin-top: 1em">The style may
either be set to a true value (or &lsquo;<b>all</b>&rsquo;),
or one of the values &lsquo;<b>insert</b>&rsquo; or
&lsquo;<b>list</b>&rsquo;, indicating that files are to be
listed in long format in all circumstances, or when
attempting to insert a file name, or when listing file names
without attempting to insert one.</p>

<p style="margin-left:22%; margin-top: 1em">More generally,
the value may be an array of any of the above values,
optionally followed by <b>=</b><i>num</i>. If <i>num</i> is
present it gives the maximum number of matches for which
long listing style will be used. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; file&minus;list list=20
insert=10</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
long format will be used when listing up to 20 files or
inserting a file with up to 10 matches (assuming a listing
is to be shown at all, for example on an ambiguous
completion), else short format will be used.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; file&minus;list
&rsquo;(( ${+NUMERIC} )) &amp;&amp;
reply=(true)&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
long format will be used any time a numeric argument is
supplied, else short format.</p>

<p style="margin-left:11%;"><b>file&minus;patterns</b></p>

<p style="margin-left:22%;">This is used by the standard
function for completing filenames, <b>_files</b>. If the
style is unset up to three tags are offered,
&lsquo;<b>globbed&minus;files</b>&rsquo;,&lsquo;<b>directories</b>&rsquo;
and &lsquo;<b>all&minus;files</b>&rsquo;, depending on the
types of files expected by the caller of <b>_files</b>. The
first two (&lsquo;<b>globbed&minus;files</b>&rsquo; and
&lsquo;<b>directories</b>&rsquo;) are normally offered
together to make it easier to complete files in
sub&minus;directories.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>file&minus;patterns</b> style provides alternatives to
the default tags, which are not used. Its value consists of
elements of the form
&lsquo;<i>pattern</i><b>:</b><i>tag</i>&rsquo;; each string
may contain any number of such specifications separated by
spaces.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>pattern</i> is a pattern that is to be used to generate
filenames. Any occurrence of the sequence
&lsquo;<b>%p</b>&rsquo; is replaced by any pattern(s) passed
by the function calling <b>_files</b>. Colons in the pattern
must be preceded by a backslash to make them distinguishable
from the colon before the <i>tag</i>. If more than one
pattern is needed, the patterns can be given inside braces,
separated by commas.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>tag</i>s
of all strings in the value will be offered by <b>_files</b>
and used when looking up other styles. Any <i>tag</i>s in
the same word will be offered at the same time and before
later words. If no &lsquo;<b>:</b><i>tag</i>&rsquo; is given
the &lsquo;<b>files</b>&rsquo; tag will be used.</p>

<p style="margin-left:22%; margin-top: 1em">The <i>tag</i>
may also be followed by an optional second colon and a
description, which will be used for the
&lsquo;<b>%d</b>&rsquo; in the value of the <b>format</b>
style (if that is set) instead of the default description
supplied by the completion function. If the description
given here contains itself a &lsquo;<b>%d</b>&rsquo;, that
is replaced with the description supplied by the completion
function.</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
make the <b>rm</b> command first complete only names of
object files and then the names of all files if there is no
matching object file:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:rm:*&rsquo; file&minus;patterns \
<br>
&rsquo;*.o:object&minus;files&rsquo;
&rsquo;%p:all&minus;files&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">To alter the
default behaviour of file completion &minus;&minus; offer
files matching a pattern and directories on the first
attempt, then all files &minus;&minus; to offer only
matching files on the first attempt, then directories, and
finally all files:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; file&minus;patterns \ <br>
&rsquo;%p:globbed&minus;files&rsquo;
&rsquo;*(&minus;/):directories&rsquo;
&rsquo;*:all&minus;files&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This works even
where there is no special pattern: <b>_files</b> matches all
files using the pattern &lsquo;<b>*</b>&rsquo; at the first
step and stops when it sees this pattern. Note also it will
never try a pattern more than once for a single completion
attempt.</p>

<p style="margin-left:22%; margin-top: 1em">During the
execution of completion functions, the <b>EXTENDED_GLOB</b>
option is in effect, so the characters
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>~</b>&rsquo; and
&lsquo;<b>^</b>&rsquo; have special meanings in the
patterns.</p>

<p style="margin-left:11%;"><b>file&minus;sort</b></p>

<p style="margin-left:22%;">The standard filename
completion function uses this style without a tag to
determine in which order the names should be listed; menu
completion will cycle through them in the same order. The
possible values are: &lsquo;<b>size</b>&rsquo; to sort by
the size of the file; &lsquo;<b>links</b>&rsquo; to sort by
the number of links to the file;
&lsquo;<b>modification</b>&rsquo; (or
&lsquo;<b>time</b>&rsquo; or &lsquo;<b>date</b>&rsquo;) to
sort by the last modification time;
&lsquo;<b>access</b>&rsquo; to sort by the last access time;
and &lsquo;<b>inode</b>&rsquo; (or
&lsquo;<b>change</b>&rsquo;) to sort by the last inode
change time. If the style is set to any other value, or is
unset, files will be sorted alphabetically by name. If the
value contains the string &lsquo;<b>reverse</b>&rsquo;,
sorting is done in the opposite order. If the value contains
the string &lsquo;<b>follow</b>&rsquo;, timestamps are
associated with the targets of symbolic links; the default
is to use the timestamps of the links themselves.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>filter</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is used by the LDAP plugin for e&minus;mail address
completion to specify the attributes to match against when
filtering entries. So for example, if the style is set to
&lsquo;<b>sn</b>&rsquo;, matching is done against surnames.
Standard LDAP filtering is used so normal completion
matching is bypassed. If this style is not set, the LDAP
plugin is skipped. You may also need to set the
<b>command</b> style to specify how to connect to your LDAP
server.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>force&minus;list</b></p>

<p style="margin-left:22%;">This forces a list of
completions to be shown at any point where listing is done,
even in cases where the list would usually be suppressed.
For example, normally the list is only shown if there are at
least two different matches. By setting this style to
&lsquo;<b>always</b>&rsquo;, the list will always be shown,
even if there is only a single match that will immediately
be accepted. The style may also be set to a number. In this
case the list will be shown if there are at least that many
matches, even if they would all insert the same string.</p>

<p style="margin-left:22%; margin-top: 1em">This style is
tested for the default tag as well as for each tag valid for
the current completion. Hence the listing can be forced only
for certain types of match.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>format</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set for the <b>descriptions</b> tag, its
value is used as a string to display above matches in
completion lists. The sequence &lsquo;<b>%d</b>&rsquo; in
this string will be replaced with a short description of
what these matches are. This string may also contain the
following sequences to specify output attributes, as
described in the section EXPANSION OF PROMPT SEQUENCES in
<i>zshmisc</i>(1): &lsquo;<b>%B</b>&rsquo;,
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%U</b>&rsquo;,
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%K</b>&rsquo; and their
lower case counterparts, as well as
&lsquo;<b>%{</b>...<b>%}</b>&rsquo;.
&lsquo;<b>%F</b>&rsquo;, &lsquo;<b>%K</b>&rsquo; and
&lsquo;<b>%{</b>...<b>%}</b>&rsquo; take arguments in the
same form as prompt expansion. Note that the <b>%G</b>
sequence is not available; an argument to
&lsquo;<b>%{</b>&rsquo; should be used instead.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The style is
tested with each tag valid for the current completion before
it is tested for the <b>descriptions</b> tag. Hence
different format strings can be defined for different types
of match.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
some completer functions define additional
&lsquo;<b>%</b>&rsquo;&minus;sequences. These are described
for the completer functions that make use of them.</p>

<p style="margin-left:22%; margin-top: 1em">Some completion
functions display messages that may be customised by setting
this style for the <b>messages</b> tag. Here, the
&lsquo;<b>%d</b>&rsquo; is replaced with a message given by
the completion function.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, the
format string is looked up with the <b>warnings</b> tag, for
use when no matches could be generated at all. In this case
the &lsquo;<b>%d</b>&rsquo; is replaced with the
descriptions for the matches that were expected separated by
spaces. The sequence &lsquo;<b>%D</b>&rsquo; is replaced
with the same descriptions separated by newlines.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use printf&minus;style field width specifiers with
&lsquo;<b>%d</b>&rsquo; and similar escape sequences. This
is handled by the <b>zformat</b> builtin command from the
<b>zsh/zutil</b> module, see <i>zshmodules</i>(1).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>glob</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">This is used by the
<b>_expand</b> completer. If it is set to &lsquo;true&rsquo;
(the default), globbing will be attempted on the words
resulting from a previous substitution (see the
<b>substitute</b> style) or else the original string from
the line.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>global</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set to &lsquo;true&rsquo; (the default), the
<b>_expand_alias</b> completer and bindable command will try
to expand global aliases.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>group&minus;name</b></p>

<p style="margin-left:22%;">The completion system can group
different types of matches, which appear in separate lists.
This style can be used to give the names of groups for
particular tags. For example, in command position the
completion system generates names of builtin and external
commands, names of aliases, shell functions and parameters
and reserved words as possible completions. To have the
external commands and shell functions listed separately:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*:commands&rsquo;
group&minus;name commands <br>
zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*:functions&rsquo;
group&minus;name functions</b></p>

<p style="margin-left:22%; margin-top: 1em">As a
consequence, any match with the same tag will be displayed
in the same group.</p>

<p style="margin-left:22%; margin-top: 1em">If the name
given is the empty string the name of the tag for the
matches will be used as the name of the group. So, to have
all different types of matches displayed separately, one can
just set:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; group&minus;name
&rsquo;&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">All matches for
which no group name is defined will be put in a group named
<b>&minus;default&minus;</b>.</p>

<p style="margin-left:11%;"><b>group&minus;order</b></p>

<p style="margin-left:22%;">This style is additional to the
<b>group&minus;name</b> style to specify the order for
display of the groups defined by that style (compare
<b>tag&minus;order</b>, which determines which completions
appear at all). The groups named are shown in the given
order; any other groups are shown in the order defined by
the completion function.</p>

<p style="margin-left:22%; margin-top: 1em">For example, to
have names of builtin commands, shell functions and external
commands appear in that order when completing in command
position:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*&rsquo;
group&minus;order \ <br>
builtins functions commands</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>groups</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A list of names of UNIX groups. If this is not set,
group names are taken from the YP database or the file
&lsquo;<b>/etc/group</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>hidden</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set to true, matches for the given context
will not be listed, although any description for the matches
set with the <b>format</b> style will be shown. If it is set
to &lsquo;<b>all</b>&rsquo;, not even the description will
be displayed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that the
matches will still be completed; they are just not shown in
the list. To avoid having matches considered as possible
completions at all, the <b>tag&minus;order</b> style can be
modified as described below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>hosts</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">A list of names of hosts that
should be completed. If this is not set, hostnames are taken
from the file &lsquo;<b>/etc/hosts</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>hosts&minus;ports</b></p>

<p style="margin-left:22%;">This style is used by commands
that need or accept hostnames and network ports. The strings
in the value should be of the form
&lsquo;<i>host</i><b>:</b><i>port</i>&rsquo;. Valid ports
are determined by the presence of hostnames; multiple ports
for the same host may appear.</p>

<p style="margin-left:11%;"><b>ignore&minus;line</b></p>

<p style="margin-left:22%;">This is tested for each tag
valid for the current completion. If it is set to
&lsquo;<b>true</b>&rsquo;, none of the words that are
already on the line will be considered as possible
completions. If it is set to &lsquo;<b>current</b>&rsquo;,
the word the cursor is on will not be considered as a
possible completion. The value
&lsquo;<b>current&minus;shown</b>&rsquo; is similar but only
applies if the list of completions is currently shown on the
screen. Finally, if the style is set to
&lsquo;<b>other</b>&rsquo;, all words on the line except for
the current one will be excluded from the possible
completions.</p>

<p style="margin-left:22%; margin-top: 1em">The values
&lsquo;<b>current</b>&rsquo; and
&lsquo;<b>current&minus;shown</b>&rsquo; are a bit like the
opposite of the <b>accept&minus;exact</b> style: only
strings with missing characters will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
almost certainly don&rsquo;t want to set this to
&lsquo;true&rsquo; or &lsquo;<b>other</b>&rsquo; for a
general context such as &lsquo;<b>:completion:*</b>&rsquo;.
This is because it would disallow completion of, for
example, options multiple times even if the command in
question accepts the option more than once.</p>


<p style="margin-left:11%;"><b>ignore&minus;parents</b></p>

<p style="margin-left:22%;">The style is tested without a
tag by the function completing pathnames in order to
determine whether to ignore the names of directories already
mentioned in the current word, or the name of the current
working directory. The value must include one or both of the
following strings:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>parent</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The name of any directory whose path is already
contained in the word on the line is ignored. For example,
when completing after <b>foo/../</b>, the directory
<b>foo</b> will not be considered a valid completion.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>pwd</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>The name of the current working directory will not be
completed; hence, for example, completion after <b>../</b>
will not use the name of the current directory.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In addition,
the value may include one or both of:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>..</b></p></td>
<td width="7%"></td>
<td width="68%">


<p style="margin-top: 1em">Ignore the specified directories
only when the word on the line contains the substring
&lsquo;<b>../</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>directory</b></p>

<p style="margin-left:32%;">Ignore the specified
directories only when names of directories are completed,
not when completing names of files.</p>

<p style="margin-left:22%; margin-top: 1em">Excluded values
act in a similar fashion to values of the
<b>ignored&minus;patterns</b> style, so they can be restored
to consideration by the <b>_ignored</b> completer.</p>

<p style="margin-left:11%;"><b>extra&minus;verbose</b></p>

<p style="margin-left:22%;">If set, the completion listing
is more verbose at the cost of a probable decrease in
completion speed. Completion performance will suffer if this
style is set to &lsquo;true&rsquo;.</p>


<p style="margin-left:11%;"><b>ignored&minus;patterns</b></p>

<p style="margin-left:22%;">A list of patterns; any trial
completion matching one of the patterns will be excluded
from consideration. The <b>_ignored</b> completer can appear
in the list of completers to restore the ignored matches.
This is a more configurable version of the shell parameter
<b>$fignore</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
<b>EXTENDED_GLOB</b> option is set during the execution of
completion functions, so the characters
&lsquo;<b>#</b>&rsquo;, &lsquo;<b>~</b>&rsquo; and
&lsquo;<b>^</b>&rsquo; have special meanings in the
patterns.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>insert</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This style is used by the <b>_all_matches</b> completer
to decide whether to insert the list of all matches
unconditionally instead of adding the list as another
match.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>insert&minus;ids</b></p>

<p style="margin-left:22%;">When completing process IDs,
for example as arguments to the <b>kill</b> and <b>wait</b>
builtins the name of a command may be converted to the
appropriate process ID. A problem arises when the process
name typed is not unique. By default (or if this style is
set explicitly to &lsquo;<b>menu</b>&rsquo;) the name will
be converted immediately to a set of possible IDs, and menu
completion will be started to cycle through them.</p>

<p style="margin-left:22%; margin-top: 1em">If the value of
the style is &lsquo;<b>single</b>&rsquo;, the shell will
wait until the user has typed enough to make the command
unique before converting the name to an ID; attempts at
completion will be unsuccessful until that point. If the
value is any other string, menu completion will be started
when the string typed by the user is longer than the common
prefix to the corresponding IDs.</p>

<p style="margin-left:11%;"><b>insert&minus;tab</b></p>

<p style="margin-left:22%;">If this is set to
&lsquo;true&rsquo;, the completion system will insert a TAB
character (assuming that was used to start completion)
instead of performing completion when there is no
non&minus;blank character to the left of the cursor. If it
is set to &lsquo;false&rsquo;, completion will be done even
there.</p>

<p style="margin-left:22%; margin-top: 1em">The value may
also contain the substrings &lsquo;<b>pending</b>&rsquo; or
&lsquo;<b>pending=</b><i>val</i>&rsquo;. In this case, the
typed character will be inserted instead of starting
completion when there is unprocessed input pending. If a
<i>val</i> is given, completion will not be done if there
are at least that many characters of unprocessed input. This
is often useful when pasting characters into a terminal.
Note however, that it relies on the <b>$PENDING</b> special
parameter from the <b>zsh/zle</b> module being set properly
which is not guaranteed on all platforms.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value of this style is &lsquo;true&rsquo; except for
completion within <b>vared</b> builtin command where it is
&lsquo;false&rsquo;.</p>


<p style="margin-left:11%;"><b>insert&minus;unambiguous</b></p>

<p style="margin-left:22%;">This is used by the
<b>_match</b> and <b>_approximate</b> completers. These
completers are often used with menu completion since the
word typed may bear little resemblance to the final
completion. However, if this style is &lsquo;true&rsquo;,
the completer will start menu completion only if it could
find no unambiguous initial string at least as long as the
original string typed by the user.</p>

<p style="margin-left:22%; margin-top: 1em">In the case of
the <b>_approximate</b> completer, the completer field in
the context will already have been set to one of
<b>correct&minus;</b><i>num</i> or
<b>approximate&minus;</b><i>num</i>, where <i>num</i> is the
number of errors that were accepted.</p>

<p style="margin-left:22%; margin-top: 1em">In the case of
the <b>_match</b> completer, the style may also be set to
the string &lsquo;<b>pattern</b>&rsquo;. Then the pattern on
the line is left unchanged if it does not match
unambiguously.</p>

<p style="margin-left:11%;"><b>keep&minus;prefix</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand</b> completer. If it is &lsquo;true&rsquo;, the
completer will try to keep a prefix containing a tilde or
parameter expansion. Hence, for example, the string
&lsquo;<b>~/f*</b>&rsquo; would be expanded to
&lsquo;<b>~/foo</b>&rsquo; instead of
&lsquo;<b>/home/user/foo</b>&rsquo;. If the style is set to
&lsquo;<b>changed</b>&rsquo; (the default), the prefix will
only be left unchanged if there were other changes between
the expanded words and the original word from the command
line. Any other value forces the prefix to be expanded
unconditionally.</p>

<p style="margin-left:22%; margin-top: 1em">The behaviour
of expand when this style is true is to cause <b>_expand</b>
to give up when a single expansion with the restored prefix
is the same as the original; hence any remaining completers
may be called.</p>

<p style="margin-left:11%;"><b>last&minus;prompt</b></p>

<p style="margin-left:22%;">This is a more flexible form of
the <b>ALWAYS_LAST_PROMPT</b> option. If it is true, the
completion system will try to return the cursor to the
previous command line after displaying a completion list. It
is tested for all tags valid for the current completion,
then the <b>default</b> tag. The cursor will be moved back
to the previous line if this style is &lsquo;true&rsquo; for
all types of match. Note that unlike the
<b>ALWAYS_LAST_PROMPT</b> option this is independent of the
numeric prefix argument.</p>


<p style="margin-left:11%;"><b>known&minus;hosts&minus;files</b></p>

<p style="margin-left:22%;">This style should contain a
list of files to search for host names and (if the
<b>use&minus;ip</b> style is set) IP addresses in a format
compatible with ssh <b>known_hosts</b> files. If it is not
set, the files <b>/etc/ssh/ssh_known_hosts</b> and
<b>~/.ssh/known_hosts</b> are used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>list</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This style is used by the <b>_history_complete_word</b>
bindable command. If it is set to &lsquo;true&rsquo; it has
no effect. If it is set to &lsquo;false&rsquo; matches will
not be listed. This overrides the setting of the options
controlling listing behaviour, in particular
<b>AUTO_LIST</b>. The context always starts with
&lsquo;<b>:completion:history&minus;words</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>list&minus;colors</b></p>

<p style="margin-left:22%;">If the <b>zsh/complist</b>
module is loaded, this style can be used to set color
specifications. This mechanism replaces the use of the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters
described in the section &lsquo;The zsh/complist
Module&rsquo; in <i>zshmodules</i>(1), but the syntax is the
same.</p>

<p style="margin-left:22%; margin-top: 1em">If this style
is set for the <b>default</b> tag, the strings in the value
are taken as specifications that are to be used everywhere.
If it is set for other tags, the specifications are used
only for matches of the type described by the tag. For this
to work best, the <b>group&minus;name</b> style must be set
to an empty string.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
setting styles for specific tags, it is also possible to use
group names specified explicitly by the
<b>group&minus;name</b> tag together with the
&lsquo;<b>(group)</b>&rsquo; syntax allowed by the
<b>ZLS_COLORS</b> and <b>ZLS_COLOURS</b> parameters and
simply using the <b>default</b> tag.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use any color specifications already set up for the GNU
version of the <b>ls</b> command:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:default&rsquo; list&minus;colors
${(s.:.)LS_COLORS}</b></p>

<p style="margin-left:22%; margin-top: 1em">The default
colors are the same as for the GNU <b>ls</b> command and can
be obtained by setting the style to an empty string (i.e.
<b>&rsquo;&rsquo;</b>).</p>


<p style="margin-left:11%;"><b>list&minus;dirs&minus;first</b></p>

<p style="margin-left:22%;">This is used by file
completion. If set, directories to be completed are listed
separately from and before completion for other files,
regardless of tag ordering. In addition, the tag
<b>other&minus;files</b> is used in place of
<b>all&minus;files</b> for the remaining files, to indicate
that no directories are presented with that tag.</p>

<p style="margin-left:11%;"><b>list&minus;grouped</b></p>

<p style="margin-left:22%;">If this style is
&lsquo;true&rsquo; (the default), the completion system will
try to make certain completion listings more compact by
grouping matches. For example, options for commands that
have the same description (shown when the <b>verbose</b>
style is set to &lsquo;true&rsquo;) will appear as a single
entry. However, menu selection can be used to cycle through
all the matches.</p>

<p style="margin-left:11%;"><b>list&minus;packed</b></p>

<p style="margin-left:22%;">This is tested for each tag
valid in the current context as well as the <b>default</b>
tag. If it is set to &lsquo;true&rsquo;, the corresponding
matches appear in listings as if the <b>LIST_PACKED</b>
option were set. If it is set to &lsquo;false&rsquo;, they
are listed normally.</p>

<p style="margin-left:11%;"><b>list&minus;prompt</b></p>

<p style="margin-left:22%;">If this style is set for the
<b>default</b> tag, completion lists that don&rsquo;t fit on
the screen can be scrolled (see the description of the
<b>zsh/complist</b> module in <i>zshmodules</i>(1)). The
value, if not the empty string, will be displayed after
every screenful and the shell will prompt for a key press;
if the style is set to the empty string, a default prompt
will be used.</p>

<p style="margin-left:22%; margin-top: 1em">The value may
contain the escape sequences: &lsquo;<b>%l</b>&rsquo; or
&lsquo;<b>%L</b>&rsquo;, which will be replaced by the
number of the last line displayed and the total number of
lines; &lsquo;<b>%m</b>&rsquo; or &lsquo;<b>%M</b>&rsquo;,
the number of the last match shown and the total number of
matches; and &lsquo;<b>%p</b>&rsquo; and
&lsquo;<b>%P</b>&rsquo;, &lsquo;<b>Top</b>&rsquo; when at
the beginning of the list, &lsquo;<b>Bottom</b>&rsquo; when
at the end and the position shown as a percentage of the
total length otherwise. In each case the form with the
uppercase letter will be replaced by a string of fixed
width, padded to the right with spaces, while the lowercase
form will be replaced by a variable width string. As in
other prompt strings, the escape sequences
&lsquo;<b>%S</b>&rsquo;, &lsquo;<b>%s</b>&rsquo;,
&lsquo;<b>%B</b>&rsquo;, &lsquo;<b>%b</b>&rsquo;,
&lsquo;<b>%U</b>&rsquo;, &lsquo;<b>%u</b>&rsquo; for
entering and leaving the display modes standout, bold and
underline, and &lsquo;<b>%F</b>&rsquo;,
&lsquo;<b>%f</b>&rsquo;, &lsquo;<b>%K</b>&rsquo;,
&lsquo;<b>%k</b>&rsquo; for changing the foreground
background colour, are also available, as is the form
&lsquo;<b>%{</b>...<b>%}</b>&rsquo; for enclosing escape
sequences which display with zero (or, with a numeric
argument, some other) width.</p>

<p style="margin-left:22%; margin-top: 1em">After deleting
this prompt the variable <b>LISTPROMPT</b> should be unset
for the removal to take effect.</p>


<p style="margin-left:11%;"><b>list&minus;rows&minus;first</b></p>

<p style="margin-left:22%;">This style is tested in the
same way as the <b>list&minus;packed</b> style and
determines whether matches are to be listed in a
rows&minus;first fashion as if the <b>LIST_ROWS_FIRST</b>
option were set.</p>

<p style="margin-left:11%;"><b>list&minus;suffixes</b></p>

<p style="margin-left:22%;">This style is used by the
function that completes filenames. If it is true, and
completion is attempted on a string containing multiple
partially typed pathname components, all ambiguous
components will be shown. Otherwise, completion stops at the
first ambiguous component.</p>


<p style="margin-left:11%;"><b>list&minus;separator</b></p>

<p style="margin-left:22%;">The value of this style is used
in completion listing to separate the string to complete
from a description when possible (e.g. when completing
options). It defaults to &lsquo;<b>&minus;&minus;</b>&rsquo;
(two hyphens).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>local</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This is for use with functions that complete URLs for
which the corresponding files are available directly from
the file system. Its value should consist of three strings:
a hostname, the path to the default web pages for the
server, and the directory name used by a user placing web
pages within their home area.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; local toast \ <br>
/var/http/public/toast public_html</b></p>

<p style="margin-left:22%; margin-top: 1em">Completion
after &lsquo;<b>http://toast/stuff/</b>&rsquo; will look for
files in the directory <b>/var/http/public/toast/stuff</b>,
while completion after
&lsquo;<b>http://toast/~yousir/</b>&rsquo; will look for
files in the directory <b>~yousir/public_html</b>.</p>


<p style="margin-left:11%;"><b>mail&minus;directory</b></p>

<p style="margin-left:22%;">If set, zsh will assume that
mailbox files can be found in the directory specified. It
defaults to &lsquo;<b>~/Mail</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>match&minus;original</b></p>

<p style="margin-left:22%;">This is used by the
<b>_match</b> completer. If it is set to <b>only</b>,
<b>_match</b> will try to generate matches without inserting
a &lsquo;<b>*</b>&rsquo; at the cursor position. If set to
any other non&minus;empty value, it will first try to
generate matches without inserting the
&lsquo;<b>*</b>&rsquo; and if that yields no matches, it
will try again with the &lsquo;<b>*</b>&rsquo; inserted. If
it is unset or set to the empty string, matching will only
be performed with the &lsquo;<b>*</b>&rsquo; inserted.</p>

<p style="margin-left:11%;"><b>matcher</b></p>

<p style="margin-left:22%;">This style is tested separately
for each tag valid in the current context. Its value is
added to any match specifications given by the
<b>matcher&minus;list</b> style. It should be in the form
described in the section &lsquo;Completion Matching
Control&rsquo; in <i>zshcompwid</i>(1).</p>

<p style="margin-left:11%;"><b>matcher&minus;list</b></p>

<p style="margin-left:22%;">This style can be set to a list
of match specifications that are to be applied everywhere.
Match specifications are described in the section
&lsquo;Completion Matching Control&rsquo; in
<i>zshcompwid</i>(1). The completion system will try them
one after another for each completer selected. For example,
to try first simple completion and, if that generates no
matches, case&minus;insensitive completion:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; matcher&minus;list
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">By default each
specification replaces the previous one; however, if a
specification is prefixed with <b>+</b>, it is added to the
existing list. Hence it is possible to create increasingly
general specifications without repetition:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; matcher&minus;list
&rsquo;&rsquo; &rsquo;+m{a&minus;z}={A&minus;Z}&rsquo;
&rsquo;+m{A&minus;Z}={a&minus;z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to create match specifications valid for particular
completers by using the third field of the context. For
example, to use the completers <b>_complete</b> and
<b>_prefix</b> but only allow case&minus;insensitive
completion with <b>_complete</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete _prefix <br>
zstyle &rsquo;:completion:*:complete:*&rsquo;
matcher&minus;list \ <br>
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;</b></p>


<p style="margin-left:22%; margin-top: 1em">User&minus;defined
names, as explained for the <b>completer</b> style, are
available. This makes it possible to try the same completer
more than once with different match specifications each
time. For example, to try normal completion without a match
specification, then normal completion with
case&minus;insensitive matching, then correction, and
finally partial&minus;word completion:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete _correct
_complete:foo <br>
zstyle &rsquo;:completion:*:complete:*&rsquo;
matcher&minus;list \ <br>
&rsquo;&rsquo;
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}&rsquo;
<br>
zstyle &rsquo;:completion:*:foo:*&rsquo; matcher&minus;list
\ <br>
&rsquo;m:{a&minus;zA&minus;Z}={A&minus;Za&minus;z}
r:|[&minus;_./]=* r:|=*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">If the style is
unset in any context no match specification is applied. Note
also that some completers such as <b>_correct</b> and
<b>_approximate</b> do not use the match specifications at
all, though these completers will only ever be called once
even if the <b>matcher&minus;list</b> contains more than one
element.</p>

<p style="margin-left:22%; margin-top: 1em">Where multiple
specifications are useful, note that the <i>entire</i>
completion is done for each element of
<b>matcher&minus;list</b>, which can quickly reduce the
shell&rsquo;s performance. As a rough rule of thumb, one to
three strings will give acceptable performance. On the other
hand, putting multiple space&minus;separated values into the
same string does not have an appreciable impact on
performance.</p>

<p style="margin-left:22%; margin-top: 1em">If there is no
current matcher or it is empty, and the option
<b>NO_CASE_GLOB</b> is in effect, the matching for files is
performed case&minus;insensitively in any case. However, any
matcher must explicitly specify case&minus;insensitive
matching if that is required.</p>

<p style="margin-left:11%;"><b>max&minus;errors</b></p>

<p style="margin-left:22%;">This is used by the
<b>_approximate</b> and <b>_correct</b> completer functions
to determine the maximum number of errors to allow. The
completer will try to generate completions by first allowing
one error, then two errors, and so on, until either a match
or matches were found or the maximum number of errors given
by this style has been reached.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
for this style contains the string
&lsquo;<b>numeric</b>&rsquo;, the completer function will
take any numeric argument as the maximum number of errors
allowed. For example, with</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:approximate:::&rsquo; max&minus;errors
2 numeric</b></p>

<p style="margin-left:22%; margin-top: 1em">two errors are
allowed if no numeric argument is given, but with a numeric
argument of six (as in &lsquo;<b>ESC&minus;6
TAB</b>&rsquo;), up to six errors are accepted. Hence with a
value of &lsquo;<b>0 numeric</b>&rsquo;, no correcting
completion will be attempted unless a numeric argument is
given.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains the string &lsquo;<b>not&minus;numeric</b>&rsquo;,
the completer will <i>not</i> try to generate corrected
completions when given a numeric argument, so in this case
the number given should be greater than zero. For example,
&lsquo;<b>2 not&minus;numeric</b>&rsquo; specifies that
correcting completion with two errors will usually be
performed, but if a numeric argument is given, correcting
completion will not be performed.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;<b>2 numeric</b>&rsquo;.</p>


<p style="margin-left:11%;"><b>max&minus;matches&minus;width</b></p>

<p style="margin-left:22%;">This style is used to determine
the trade off between the width of the display used for
matches and the width used for their descriptions when the
<b>verbose</b> style is in effect. The value gives the
number of display columns to reserve for the matches. The
default is half the width of the screen.</p>

<p style="margin-left:22%; margin-top: 1em">This has the
most impact when several matches have the same description
and so will be grouped together. Increasing the style will
allow more matches to be grouped together; decreasing it
will allow more of the description to be visible.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>menu</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If this is true in the context of any of the tags
defined for the current completion menu completion will be
used. The value for a specific tag will take precedence over
that for the &lsquo;<b>default</b>&rsquo; tag.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If none of the
values found in this way is true but at least one is set to
&lsquo;<b>auto</b>&rsquo;, the shell behaves as if the
<b>AUTO_MENU</b> option is set.</p>

<p style="margin-left:22%; margin-top: 1em">If one of the
values is explicitly set to false, menu completion will be
explicitly turned off, overriding the <b>MENU_COMPLETE</b>
option and other settings.</p>

<p style="margin-left:22%; margin-top: 1em">In the form
&lsquo;<b>yes=</b><i>num</i>&rsquo;, where
&lsquo;<b>yes</b>&rsquo; may be any of the true values
(&lsquo;<b>yes</b>&rsquo;, &lsquo;<b>true</b>&rsquo;,
&lsquo;<b>on</b>&rsquo; and &lsquo;<b>1</b>&rsquo;), menu
completion will be turned on if there are at least
<i>num</i> matches. In the form
&lsquo;<b>yes=long</b>&rsquo;, menu completion will be
turned on if the list does not fit on the screen. This does
not activate menu completion if the widget normally only
lists completions, but menu completion can be activated in
that case with the value
&lsquo;<b>yes=long&minus;list</b>&rsquo; (Typically, the
value &lsquo;<b>select=long&minus;list</b>&rsquo; described
later is more useful as it provides control over
scrolling.)</p>

<p style="margin-left:22%; margin-top: 1em">Similarly, with
any of the &lsquo;false&rsquo; values (as in
&lsquo;<b>no=10</b>&rsquo;), menu completion will <i>not</i>
be used if there are <i>num</i> or more matches.</p>

<p style="margin-left:22%; margin-top: 1em">The value of
this widget also controls menu selection, as implemented by
the <b>zsh/complist</b> module. The following values may
appear either alongside or instead of the values above.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains the string &lsquo;<b>select</b>&rsquo;, menu
selection will be started unconditionally.</p>

<p style="margin-left:22%; margin-top: 1em">In the form
&lsquo;<b>select=</b><i>num</i>&rsquo;, menu selection will
only be started if there are at least <i>num</i> matches. If
the values for more than one tag provide a number, the
smallest number is taken.</p>

<p style="margin-left:22%; margin-top: 1em">Menu selection
can be turned off explicitly by defining a value containing
the string&lsquo;<b>no&minus;select</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to start menu selection only if the list of matches
does not fit on the screen by using the value
&lsquo;<b>select=long</b>&rsquo;. To start menu selection
even if the current widget only performs listing, use the
value &lsquo;<b>select=long&minus;list</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">To turn on menu
completion or menu selection when a there are a certain
number of matches <i>or</i> the list of matches does not fit
on the screen, both of &lsquo;<b>yes=</b>&rsquo; and
&lsquo;<b>select=</b>&rsquo; may be given twice, once with a
number and once with &lsquo;<b>long</b>&rsquo; or
&lsquo;<b>long&minus;list</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, it is
possible to activate two special modes of menu selection.
The word &lsquo;<b>interactive</b>&rsquo; in the value
causes interactive mode to be entered immediately when menu
selection is started; see the description of the
<b>zsh/complist</b> module in <i>zshmodules</i>(1) for a
description of interactive mode. Including the string
&lsquo;<b>search</b>&rsquo; does the same for incremental
search mode. To select backward incremental search, include
the string &lsquo;<b>search&minus;backward</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>muttrc</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">If set, gives the location of
the mutt configuration file. It defaults to
&lsquo;<b>~/.muttrc</b>&rsquo;.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>numbers</b></p>

<p style="margin-left:22%;">This is used with the
<b>jobs</b> tag. If it is &lsquo;true&rsquo;, the shell will
complete job numbers instead of the shortest unambiguous
prefix of the job command text. If the value is a number,
job numbers will only be used if that many words from the
job descriptions are required to resolve ambiguities. For
example, if the value is &lsquo;<b>1</b>&rsquo;, strings
will only be used if all jobs differ in the first word on
their command lines.</p>

<p style="margin-left:11%;"><b>old&minus;list</b></p>

<p style="margin-left:22%;">This is used by the
<b>_oldlist</b> completer. If it is set to
&lsquo;<b>always</b>&rsquo;, then standard widgets which
perform listing will retain the current list of matches,
however they were generated; this can be turned off
explicitly with the value &lsquo;<b>never</b>&rsquo;, giving
the behaviour without the <b>_oldlist</b> completer. If the
style is unset, or any other value, then the existing list
of completions is displayed if it is not already; otherwise,
the standard completion list is generated; this is the
default behaviour of <b>_oldlist</b>. However, if there is
an old list and this style contains the name of the
completer function that generated the list, then the old
list will be used even if it was generated by a widget which
does not do listing.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you type <b>^Xc</b> to use the <b>_correct_word</b>
widget, which generates a list of corrections for the word
under the cursor. Usually, typing <b>^D</b> would generate a
standard list of completions for the word on the command
line, and show that. With <b>_oldlist</b>, it will instead
show the list of corrections already generated.</p>

<p style="margin-left:22%; margin-top: 1em">As another
example consider the <b>_match</b> completer: with the
<b>insert&minus;unambiguous</b> style set to
&lsquo;true&rsquo; it inserts only a common prefix string,
if there is any. However, this may remove parts of the
original pattern, so that further completion could produce
more matches than on the first attempt. By using the
<b>_oldlist</b> completer and setting this style to
<b>_match</b>, the list of matches generated on the first
attempt will be used again.</p>

<p style="margin-left:11%;"><b>old&minus;matches</b></p>

<p style="margin-left:22%;">This is used by the
<b>_all_matches</b> completer to decide if an old list of
matches should be used if one exists. This is selected by
one of the &lsquo;true&rsquo; values or by the string
&lsquo;<b>only</b>&rsquo;. If the value is
&lsquo;<b>only</b>&rsquo;, <b>_all_matches</b> will only use
an old list and won&rsquo;t have any effect on the list of
matches currently being generated.</p>

<p style="margin-left:22%; margin-top: 1em">If this style
is set it is generally unwise to call the
<b>_all_matches</b> completer unconditionally. One possible
use is for either this style or the <b>completer</b> style
to be defined with the <b>&minus;e</b> option to
<b>zstyle</b> to make the style conditional.</p>

<p style="margin-left:11%;"><b>old&minus;menu</b></p>

<p style="margin-left:22%;">This is used by the
<b>_oldlist</b> completer. It controls how menu completion
behaves when a completion has already been inserted and the
user types a standard completion key such as <b>TAB</b>. The
default behaviour of <b>_oldlist</b> is that menu completion
always continues with the existing list of completions. If
this style is set to &lsquo;false&rsquo;, however, a new
completion is started if the old list was generated by a
different completion command; this is the behaviour without
the <b>_oldlist</b> completer.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you type <b>^Xc</b> to generate a list of
corrections, and menu completion is started in one of the
usual ways. Usually, or with this style set to <b>false</b>,
typing <b>TAB</b> at this point would start trying to
complete the line as it now appears. With <b>_oldlist</b>,
it instead continues to cycle through the list of
corrections.</p>

<p style="margin-left:11%;"><b>original</b></p>

<p style="margin-left:22%;">This is used by the
<b>_approximate</b> and <b>_correct</b> completers to decide
if the original string should be added as a possible
completion. Normally, this is done only if there are at
least two possible corrections, but if this style is set to
&lsquo;true&rsquo;, it is always added. Note that the style
will be examined with the completer field in the context
name set to <b>correct&minus;</b><i>num</i> or
<b>approximate&minus;</b><i>num</i>, where <i>num</i> is the
number of errors that were accepted.</p>

<p style="margin-left:11%;"><b>packageset</b></p>

<p style="margin-left:22%;">This style is used when
completing arguments of the Debian &lsquo;<b>dpkg</b>&rsquo;
program. It contains an override for the default package set
for a given context. For example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:complete:dpkg:option&minus;&minus;status&minus;1:*&rsquo;
\ <br>
packageset avail</b></p>

<p style="margin-left:22%; margin-top: 1em">causes
available packages, rather than only installed packages, to
be completed for &lsquo;<b>dpkg
&minus;&minus;status</b>&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>path</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The function that completes color names uses this style
with the <b>colors</b> tag. The value should be the pathname
of a file containing color names in the format of an X11
<b>rgb.txt</b> file. If the style is not set but this file
is found in one of various standard locations it will be
used as the default.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>path&minus;completion</b></p>

<p style="margin-left:22%;">This is used by filename
completion. By default, filename completion examines all
components of a path to see if there are completions of that
component. For example, <b>/u/b/z</b> can be completed to
<b>/usr/bin/zsh</b>. Explicitly setting this style to
<b>false</b> inhibits this behaviour for path components up
to the <b>/</b> before the cursor; this overrides the
setting of <b>accept&minus;exact&minus;dirs</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Even with the
style set to <b>false</b>, it is still possible to complete
multiple paths by setting the option <b>COMPLETE_IN_WORD</b>
and moving the cursor back to the first component in the
path to be completed. For example, <b>/u/b/z</b> can be
completed to <b>/usr/bin/zsh</b> if the cursor is after the
<b>/u</b>.</p>


<p style="margin-left:11%;"><b>pine&minus;directory</b></p>

<p style="margin-left:22%;">If set, specifies the directory
containing PINE mailbox files. There is no default, since
recursively searching this directory is inconvenient for
anyone who doesn&rsquo;t use PINE.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ports</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>A list of Internet service names (network ports) to
complete. If this is not set, service names are taken from
the file &lsquo;<b>/etc/services</b>&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>prefix&minus;hidden</b></p>

<p style="margin-left:22%;">This is used for certain
completions which share a common prefix, for example command
options beginning with dashes. If it is &lsquo;true&rsquo;,
the prefix will not be shown in the list of matches.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>prefix&minus;needed</b></p>

<p style="margin-left:22%;">This style is also relevant for
matches with a common prefix. If it is set to
&lsquo;true&rsquo; this common prefix must be typed by the
user to generate the matches.</p>

<p style="margin-left:22%; margin-top: 1em">The style is
applicable to the <b>options</b>, <b>signals</b>,
<b>jobs</b>, <b>functions</b>, and <b>parameters</b>
completion tags.</p>

<p style="margin-left:22%; margin-top: 1em">For command
options, this means that the initial
&lsquo;<b>&minus;</b>&rsquo;, &lsquo;<b>+</b>&rsquo;, or
&lsquo;<b>&minus;&minus;</b>&rsquo; must be typed explicitly
before option names will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For signals, an
initial &lsquo;<b>&minus;</b>&rsquo; is required before
signal names will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For jobs, an
initial &lsquo;<b>%</b>&rsquo; is required before job names
will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">For function
and parameter names, an initial &lsquo;<b>_</b>&rsquo; or
&lsquo;<b>.</b>&rsquo; is required before function or
parameter names starting with those characters will be
completed.</p>

<p style="margin-left:22%; margin-top: 1em">The default
value for this style is &lsquo;false&rsquo; for
<b>function</b> and <b>parameter</b> completions, and
&lsquo;true&rsquo; otherwise.</p>


<p style="margin-left:11%;"><b>preserve&minus;prefix</b></p>

<p style="margin-left:22%;">This style is used when
completing path names. Its value should be a pattern
matching an initial prefix of the word to complete that
should be left unchanged under all circumstances. For
example, on some Unices an initial &lsquo;<b>//</b>&rsquo;
(double slash) has a special meaning; setting this style to
the string &lsquo;<b>//</b>&rsquo; will preserve it. As
another example, setting this style to
&lsquo;<b>?:/</b>&rsquo; under Cygwin would allow completion
after &lsquo;<b>a:/...</b>&rsquo; and so on.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>range</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This is used by the <b>_history</b> completer and the
<b>_history_complete_word</b> bindable command to decide
which words should be completed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If it is a
singe number, only the last <i>N</i> words from the history
will be completed.</p>

<p style="margin-left:22%; margin-top: 1em">If it is a
range of the form
&lsquo;<i>max</i><b>:</b><i>slice</i>&rsquo;, the last
<i>slice</i> words will be completed; then if that yields no
matches, the <i>slice</i> words before those will be tried
and so on. This process stops either when at least one match
was been found, or <i>max</i> words have been tried.</p>

<p style="margin-left:22%; margin-top: 1em">The default is
to complete all words from the history at once.</p>


<p style="margin-left:11%;"><b>recursive&minus;files</b></p>

<p style="margin-left:22%;">If this style is set, its value
is an array of patterns to be tested against
&lsquo;<b>$PWD/</b>&rsquo;: note the trailing slash, which
allows directories in the pattern to be delimited
unambiguously by including slashes on both sides. If an
ordinary file completion fails and the word on the command
line does not yet have a directory part to its name, the
style is retrieved using the same tag as for the completion
just attempted, then the elements tested against
<b>$PWD/</b> in turn. If one matches, then the shell
reattempts completion by prepending the word on the command
line with each directory in the expansion of <b>**/*(/)</b>
in turn. Typically the elements of the style will be set to
restrict the number of directories beneath the current one
to a manageable number, for example
&lsquo;<b>*/.git/*</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; recursive&minus;files
&rsquo;*/zsh/*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">If the current
directory is <b>/home/pws/zsh/Src</b>, then
<b>zle_tr</b><i>TAB</i> can be completed to
<b>Zle/zle_tricky.c</b>.</p>

<p style="margin-left:11%;"><b>regular</b></p>

<p style="margin-left:22%;">This style is used by the
<b>_expand_alias</b> completer and bindable command. If set
to &lsquo;<b>true</b>&rsquo; (the default), regular aliases
will be expanded but only in command position. If it is set
to &lsquo;<b>false</b>&rsquo;, regular aliases will never be
expanded. If it is set to &lsquo;<b>always</b>&rsquo;,
regular aliases will be expanded even if not in command
position.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>rehash</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>If this is set when completing external commands, the
internal list (hash) of commands will be updated for each
search by issuing the <b>rehash</b> command. There is a
speed penalty for this which is only likely to be noticeable
when directories in the path have slow file access.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>remote&minus;access</b></p>

<p style="margin-left:22%;">If set to <b>false</b>, certain
commands will be prevented from making Internet connections
to retrieve remote information. This includes the completion
for the <b>CVS</b> command.</p>

<p style="margin-left:22%; margin-top: 1em">It is not
always possible to know if connections are in fact to a
remote site, so some may be prevented unnecessarily.</p>


<p style="margin-left:11%;"><b>remove&minus;all&minus;dups</b></p>

<p style="margin-left:22%;">The
<b>_history_complete_word</b> bindable command and the
<b>_history</b> completer use this to decide if all
duplicate matches should be removed, rather than just
consecutive duplicates.</p>

<p style="margin-left:11%;"><b>select&minus;prompt</b></p>

<p style="margin-left:22%;">If this is set for the
<b>default</b> tag, its value will be displayed during menu
selection (see the <b>menu</b> style above) when the
completion list does not fit on the screen as a whole. The
same escapes as for the <b>list&minus;prompt</b> style are
understood, except that the numbers refer to the match or
line the mark is on. A default prompt is used when the value
is the empty string.</p>

<p style="margin-left:11%;"><b>select&minus;scroll</b></p>

<p style="margin-left:22%;">This style is tested for the
<b>default</b> tag and determines how a completion list is
scrolled during a menu selection (see the <b>menu</b> style
above) when the completion list does not fit on the screen
as a whole. If the value is &lsquo;<b>0</b>&rsquo; (zero),
the list is scrolled by half&minus;screenfuls; if it is a
positive integer, the list is scrolled by the given number
of lines; if it is a negative number, the list is scrolled
by a screenful minus the absolute value of the given number
of lines. The default is to scroll by single lines.</p>


<p style="margin-left:11%;"><b>separate&minus;sections</b></p>

<p style="margin-left:22%;">This style is used with the
<b>manuals</b> tag when completing names of manual pages. If
it is &lsquo;true&rsquo;, entries for different sections are
added separately using tag names of the form
&lsquo;<b>manual.</b><i>X</i>&rsquo;, where <i>X</i> is the
section number. When the <b>group&minus;name</b> style is
also in effect, pages from different sections will appear
separately. This style is also used similarly with the
<b>words</b> style when completing words for the dict
command. It allows words from different dictionary databases
to be added separately. The default for this style is
&lsquo;false&rsquo;.</p>


<p style="margin-left:11%;"><b>show&minus;completer</b></p>

<p style="margin-left:22%;">Tested whenever a new completer
is tried. If it is true, the completion system outputs a
progress message in the listing area showing what completer
is being tried. The message will be overwritten by any
output when completions are found and is removed after
completion is finished.</p>


<p style="margin-left:11%;"><b>single&minus;ignored</b></p>

<p style="margin-left:22%;">This is used by the
<b>_ignored</b> completer when there is only one match. If
its value is &lsquo;<b>show</b>&rsquo;, the single match
will be displayed but not inserted. If the value is
&lsquo;<b>menu</b>&rsquo;, then the single match and the
original string are both added as matches and menu
completion is started, making it easy to select either of
them.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>sort</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Many completion widgets call <b>_description</b> at some
point which decides whether the matches are added sorted or
unsorted (often indirectly via <b>_wanted</b> or
<b>_requested</b>). This style can be set explicitly to one
of the usual true or false values as an override. If it is
not set for the context, the standard behaviour of the
calling widget is used.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The style is
tested first against the full context including the tag, and
if that fails to produce a value against the context without
the tag.</p>

<p style="margin-left:22%; margin-top: 1em">If the calling
widget explicitly requests unsorted matches, this is usually
honoured. However, the default (unsorted) behaviour of
completion for the command history may be overridden by
setting the style to <b>true</b>.</p>

<p style="margin-left:22%; margin-top: 1em">In the
<b>_expand</b> completer, if it is set to
&lsquo;true&rsquo;, the expansions generated will always be
sorted. If it is set to &lsquo;<b>menu</b>&rsquo;, then the
expansions are only sorted when they are offered as single
strings but not in the string containing all possible
expansions.</p>

<p style="margin-left:11%;"><b>special&minus;dirs</b></p>

<p style="margin-left:22%;">Normally, the completion code
will not produce the directory names &lsquo;<b>.</b>&rsquo;
and &lsquo;<b>..</b>&rsquo; as possible completions. If this
style is set to &lsquo;true&rsquo;, it will add both
&lsquo;<b>.</b>&rsquo; and &lsquo;<b>..</b>&rsquo; as
possible completions; if it is set to
&lsquo;<b>..</b>&rsquo;, only &lsquo;<b>..</b>&rsquo; will
be added.</p>

<p style="margin-left:22%; margin-top: 1em">The following
example sets <b>special&minus;dirs</b> to
&lsquo;<b>..</b>&rsquo; when the current prefix is empty, is
a single &lsquo;<b>.</b>&rsquo;, or consists only of a path
beginning with &lsquo;<b>../</b>&rsquo;. Otherwise the value
is &lsquo;false&rsquo;.</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; special&minus;dirs \
<br>
&rsquo;[[ $PREFIX = (../)#(|.|..) ]] &amp;&amp;
reply=(..)&rsquo;</b></p>


<p style="margin-left:11%;"><b>squeeze&minus;slashes</b></p>

<p style="margin-left:22%;">If set to &lsquo;true&rsquo;,
sequences of slashes in filename paths (for example in
&lsquo;<b>foo//bar</b>&rsquo;) will be treated as a single
slash. This is the usual behaviour of UNIX paths. However,
by default the file completion function behaves as if there
were a &lsquo;<b>*</b>&rsquo; between the slashes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>stop</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If set to &lsquo;true&rsquo;, the
<b>_history_complete_word</b> bindable command will stop
once when reaching the beginning or end of the history.
Invoking <b>_history_complete_word</b> will then wrap around
to the opposite end of the history. If this style is set to
&lsquo;false&rsquo; (the default),
<b>_history_complete_word</b> will loop immediately as in a
menu completion.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>strip&minus;comments</b></p>

<p style="margin-left:22%;">If set to &lsquo;true&rsquo;,
this style causes non&minus;essential comment text to be
removed from completion matches. Currently it is only used
when completing e&minus;mail addresses where it removes any
display name from the addresses, cutting them down to plain
<i>user@host</i> form.</p>


<p style="margin-left:11%;"><b>subst&minus;globs&minus;only</b></p>

<p style="margin-left:22%;">This is used by the
<b>_expand</b> completer. If it is set to
&lsquo;true&rsquo;, the expansion will only be used if it
resulted from globbing; hence, if expansions resulted from
the use of the <b>substitute</b> style described below, but
these were not further changed by globbing, the expansions
will be rejected.</p>

<p style="margin-left:22%; margin-top: 1em">The default for
this style is &lsquo;false&rsquo;.</p>

<p style="margin-left:11%;"><b>substitute</b></p>

<p style="margin-left:22%;">This boolean style controls
whether the <b>_expand</b> completer will first try to
expand all substitutions in the string (such as
&lsquo;<b>$(...)</b>&rsquo; and
&lsquo;<b>${...}</b>&rsquo;).</p>

<p style="margin-left:22%; margin-top: 1em">The default is
&lsquo;true&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>suffix</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is used by the <b>_expand</b> completer if the word
starts with a tilde or contains a parameter expansion. If it
is set to &lsquo;true&rsquo;, the word will only be expanded
if it doesn&rsquo;t have a suffix, i.e. if it is something
like &lsquo;<b>~foo</b>&rsquo; or &lsquo;<b>$foo</b>&rsquo;
rather than &lsquo;<b>~foo/</b>&rsquo; or
&lsquo;<b>$foo/bar</b>&rsquo;, unless that suffix itself
contains characters eligible for expansion. The default for
this style is &lsquo;true&rsquo;.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>tag&minus;order</b></p>

<p style="margin-left:22%;">This provides a mechanism for
sorting how the tags available in a particular context will
be used.</p>

<p style="margin-left:22%; margin-top: 1em">The values for
the style are sets of space&minus;separated lists of tags.
The tags in each value will be tried at the same time; if no
match is found, the next value is used. (See the
<b>file&minus;patterns</b> style for an exception to this
behavior.)</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:complete:&minus;command&minus;:*&rsquo;
tag&minus;order \ <br>
&rsquo;commands functions&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">specifies that
completion in command position first offers external
commands and shell functions. Remaining tags will be tried
if no completions are found.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
tag names, each string in the value may take one of the
following forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p><b>&minus;</b></p></td>
<td width="9%"></td>
<td width="68%">


<p>If any value consists of only a hyphen, then <i>only</i>
the tags specified in the other values are generated.
Normally all tags not explicitly selected are tried last if
the specified tags fail to generate any matches. This means
that a single value consisting only of a single hyphen turns
off completion.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>!</b> <i>tags</i>...</p>

<p style="margin-left:32%;">A string starting with an
exclamation mark specifies names of tags that are <i>not</i>
to be used. The effect is the same as if all other possible
tags for the context had been listed.</p>

<p style="margin-left:22%;"><i>tag</i><b>:</b><i>label</i>
...</p>

<p style="margin-left:32%;">Here, <i>tag</i> is one of the
standard tags and <i>label</i> is an arbitrary name. Matches
are generated as normal but the name <i>label</i> is used in
contexts instead of <i>tag</i>. This is not useful in words
starting with <b>!</b>.</p>

<p style="margin-left:32%; margin-top: 1em">If the
<i>label</i> starts with a hyphen, the <i>tag</i> is
prepended to the <i>label</i> to form the name used for
lookup. This can be used to make the completion system try a
certain tag more than once, supplying different style
settings for each attempt; see below for an example.</p>


<p style="margin-left:22%;"><i>tag</i><b>:</b><i>label</i><b>:</b><i>description</i></p>

<p style="margin-left:32%;">As before, but
<b>description</b> will replace the &lsquo;<b>%d</b>&rsquo;
in the value of the <b>format</b> style instead of the
default description supplied by the completion function.
Spaces in the description must be quoted with a backslash. A
&lsquo;<b>%d</b>&rsquo; appearing in <i>description</i> is
replaced with the description given by the completion
function.</p>

<p style="margin-left:22%; margin-top: 1em">In any of the
forms above the tag may be a pattern or several patterns in
the form
&lsquo;<b>{</b><i>pat1</i><b>,</b><i>pat2...</i><b>}</b>&rsquo;.
In this case all matching tags will be used except for any
given explicitly in the same string.</p>

<p style="margin-left:22%; margin-top: 1em">One use of
these features is to try one tag more than once, setting
other styles differently on each attempt, but still to use
all the other tags without having to repeat them all. For
example, to make completion of function names in command
position ignore all the completion functions starting with
an underscore the first time completion is tried:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:&minus;command&minus;:*&rsquo;
tag&minus;order \ <br>
&rsquo;functions:&minus;non&minus;comp *&rsquo; functions
<br>
zstyle
&rsquo;:completion:*:functions&minus;non&minus;comp&rsquo;
ignored&minus;patterns &rsquo;_*&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">On the first
attempt, all tags will be offered but the <b>functions</b>
tag will be replaced by
<b>functions&minus;non&minus;comp</b>. The
<b>ignored&minus;patterns</b> style is set for this tag to
exclude functions starting with an underscore. If there are
no matches, the second value of the <b>tag&minus;order</b>
style is used which completes functions using the default
tag, this time presumably including all function names.</p>

<p style="margin-left:22%; margin-top: 1em">The matches for
one tag can be split into different groups. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; tag&minus;order \ <br>
&rsquo;options:&minus;long:long\ options <br>
options:&minus;short:short\ options <br>
options:&minus;single&minus;letter:single\ letter\
options&rsquo;</b></p>

<p style="margin-left:32%; margin-top: 1em">zstyle
&rsquo;:completion:*:options&minus;long&rsquo;
ignored&minus;patterns
&rsquo;[&minus;+](|&minus;|[^&minus;]*)&rsquo; <br>
zstyle &rsquo;:completion:*:options&minus;short&rsquo;
ignored&minus;patterns &rsquo;&minus;&minus;*&rsquo;
&rsquo;[&minus;+]?&rsquo; <br>
zstyle
&rsquo;:completion:*:options&minus;single&minus;letter&rsquo;
ignored&minus;patterns &rsquo;???*&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>group&minus;names</b> style set, options beginning with
&lsquo;<b>&minus;&minus;</b>&rsquo;, options beginning with
a single &lsquo;<b>&minus;</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; but containing multiple characters,
and single&minus;letter options will be displayed in
separate groups with different descriptions.</p>

<p style="margin-left:22%; margin-top: 1em">Another use of
patterns is to try multiple match specifications one after
another. The <b>matcher&minus;list</b> style offers
something similar, but it is tested very early in the
completion system and hence can&rsquo;t be set for single
commands nor for more specific contexts. Here is how to try
normal completion without any match specification and, if
that generates no matches, try again with
case&minus;insensitive matching, restricting the effect to
arguments of the command <b>foo</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*:*:foo:*&rsquo; tag&minus;order
&rsquo;*&rsquo; &rsquo;*:&minus;case&rsquo; <br>
zstyle &rsquo;:completion:*&minus;case&rsquo; matcher
&rsquo;m:{a&minus;z}={A&minus;Z}&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">First, all the
tags offered when completing after <b>foo</b> are tried
using the normal tag name. If that generates no matches, the
second value of <b>tag&minus;order</b> is used, which tries
all tags again except that this time each has
<b>&minus;case</b> appended to its name for lookup of
styles. Hence this time the value for the <b>matcher</b>
style from the second call to <b>zstyle</b> in the example
is used to make completion case&minus;insensitive.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to use the <b>&minus;e</b> option of the <b>zstyle</b>
builtin command to specify conditions for the use of
particular tags. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;*:&minus;command&minus;:*&rsquo;
tag&minus;order &rsquo; <br>
if [[ &minus;n $PREFIX$SUFFIX ]]; then <br>
reply=( ) <br>
else <br>
reply=( &minus; ) <br>
fi&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">Completion in
command position will be attempted only if the string typed
so far is not empty. This is tested using the <b>PREFIX</b>
special parameter; see zshcompwid for a description of
parameters which are special inside completion widgets.
Setting <b>reply</b> to an empty array provides the default
behaviour of trying all tags at once; setting it to an array
containing only a hyphen disables the use of all tags and
hence of all completions.</p>

<p style="margin-left:22%; margin-top: 1em">If no
<b>tag&minus;order</b> style has been defined for a context,
the strings &lsquo;<b>(|*&minus;)argument&minus;*
(|*&minus;)option&minus;* values</b>&rsquo; and
&lsquo;<b>options</b>&rsquo; plus all tags offered by the
completion function will be used to provide a sensible
default behavior that causes arguments (whether normal
command arguments or arguments of options) to be completed
before option names for most commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>urls</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This is used together with the <b>urls</b> tag by
functions completing URLs.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If the value
consists of more than one string, or if the only string does
not name a file or directory, the strings are used as the
URLs to complete.</p>

<p style="margin-left:22%; margin-top: 1em">If the value
contains only one string which is the name of a normal file
the URLs are taken from that file (where the URLs may be
separated by white space or newlines).</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if the
only string in the value names a directory, the directory
hierarchy rooted at this directory gives the completions.
The top level directory should be the file access method,
such as &lsquo;<b>http</b>&rsquo;, &lsquo;<b>ftp</b>&rsquo;,
&lsquo;<b>bookmark</b>&rsquo; and so on. In many cases the
next level of directories will be a filename. The directory
hierarchy can descend as deep as necessary.</p>

<p style="margin-left:22%; margin-top: 1em">For
example,</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; urls ~/.urls <br>
mkdir &minus;p ~/.urls/ftp/ftp.zsh.org/pub</b></p>

<p style="margin-left:22%; margin-top: 1em">allows
completion of all the components of the URL
<b>ftp://ftp.zsh.org/pub</b> after suitable commands such as
&lsquo;<b>netscape</b>&rsquo; or &lsquo;<b>lynx</b>&rsquo;.
Note, however, that access methods and files are completed
separately, so if the <b>hosts</b> style is set hosts can be
completed without reference to the <b>urls</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">See the
description in the function <b>_urls</b> itself for more
information (e.g. &lsquo;<b>more
$^fpath/_urls(N)</b>&rsquo;).</p>

<p style="margin-left:11%;"><b>use&minus;cache</b></p>

<p style="margin-left:22%;">If this is set, the completion
caching layer is activated for any completions which use it
(via the <b>_store_cache</b>, <b>_retrieve_cache</b>, and
<b>_cache_invalid</b> functions). The directory containing
the cache files can be changed with the
<b>cache&minus;path</b> style.</p>

<p style="margin-left:11%;"><b>use&minus;compctl</b></p>

<p style="margin-left:22%;">If this style is set to a
string <i>not</i> equal to <b>false</b>, <b>0</b>,
<b>no</b>, and <b>off</b>, the completion system may use any
completion specifications defined with the <b>compctl</b>
builtin command. If the style is unset, this is done only if
the <b>zsh/compctl</b> module is loaded. The string may also
contain the substring &lsquo;<b>first</b>&rsquo; to use
completions defined with &lsquo;<b>compctl
&minus;T</b>&rsquo;, and the substring
&lsquo;<b>default</b>&rsquo; to use the completion defined
with &lsquo;<b>compctl &minus;D</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
is only intended to smooth the transition from
<b>compctl</b> to the new completion system and may
disappear in the future.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
the definitions from <b>compctl</b> will only be used if
there is no specific completion function for the command in
question. For example, if there is a function <b>_foo</b> to
complete arguments to the command <b>foo</b>, <b>compctl</b>
will never be invoked for <b>foo</b>. However, the
<b>compctl</b> version will be tried if <b>foo</b> only uses
default completion.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>use&minus;ip</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>By default, the function <b>_hosts</b> that completes
host names strips IP addresses from entries read from host
databases such as NIS and ssh files. If this style is true,
the corresponding IP addresses can be completed as well.
This style is not use in any context where the <b>hosts</b>
style is set; note also it must be set before the cache of
host names is generated (typically the first completion
attempt).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>users</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This may be set to a list of usernames to be completed.
If it is not set all usernames will be completed. Note that
if it is set only that list of users will be completed; this
is because on some systems querying all users can take a
prohibitive amount of time.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>users&minus;hosts</b></p>

<p style="margin-left:22%;">The values of this style should
be of the form &lsquo;<i>user</i><b>@</b><i>host</i>&rsquo;
or &lsquo;<i>user</i><b>:</b><i>host</i>&rsquo;. It is used
for commands that need pairs of user&minus; and hostnames.
These commands will complete usernames from this style
(only), and will restrict subsequent hostname completion to
hosts paired with that user in one of the values of the
style.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
to group values for sets of commands which allow a remote
login, such as <b>rlogin</b> and <b>ssh</b>, by using the
<b>my&minus;accounts</b> tag. Similarly, values for sets of
commands which usually refer to the accounts of other
people, such as <b>talk</b> and <b>finger</b>, can be
grouped by using the <b>other&minus;accounts</b> tag. More
ambivalent commands may use the <b>accounts</b> tag.</p>


<p style="margin-left:11%;"><b>users&minus;hosts&minus;ports</b></p>

<p style="margin-left:22%;">Like <b>users&minus;hosts</b>
but used for commands like <b>telnet</b> and containing
strings of the form
&lsquo;<i>user</i><b>@</b><i>host</i><b>:</b><i>port</i>&rsquo;.</p>

<p style="margin-left:11%;"><b>verbose</b></p>

<p style="margin-left:22%;">If set, as it is by default,
the completion listing is more verbose. In particular many
commands show descriptions for options if this style is
&lsquo;true&rsquo;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>word</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>This is used by the <b>_list</b> completer, which
prevents the insertion of completions until a second
completion attempt when the line has not changed. The normal
way of finding out if the line has changed is to compare its
entire contents between the two occasions. If this style is
true, the comparison is instead performed only on the
current word. Hence if completion is performed on another
word with the same contents, completion will not be
delayed.</p> </td></tr>
</table>

<h2>CONTROL FUNCTIONS
<a name="CONTROL FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
initialization script <b>compinit</b> redefines all the
widgets which perform completion to call the supplied widget
function <b>_main_complete</b>. This function acts as a
wrapper calling the so&minus;called &lsquo;completer&rsquo;
functions that generate matches. If <b>_main_complete</b> is
called with arguments, these are taken as the names of
completer functions to be called in the order given. If no
arguments are given, the set of functions to try is taken
from the <b>completer</b> style. For example, to use normal
completion and correction if that doesn&rsquo;t generate any
matches:</p>

<p style="margin-left:22%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_correct</b></p>

<p style="margin-left:11%; margin-top: 1em">after calling
<b>compinit</b>. The default value for this style is
&lsquo;<b>_complete _ignored</b>&rsquo;, i.e. normally only
ordinary completion is tried, first with the effect of the
<b>ignored&minus;patterns</b> style and then without it. The
<b>_main_complete</b> function uses the return status of the
completer functions to decide if other completers should be
called. If the return status is zero, no other completers
are tried and the <b>_main_complete</b> function
returns.</p>

<p style="margin-left:11%; margin-top: 1em">If the first
argument to <b>_main_complete</b> is a single hyphen, the
arguments will not be taken as names of completers. Instead,
the second argument gives a name to use in the
<i>completer</i> field of the context and the other
arguments give a command name and arguments to call to
generate the matches.</p>

<p style="margin-left:11%; margin-top: 1em">The following
completer functions are contained in the distribution,
although users may write their own. Note that in contexts
the leading underscore is stripped, for example basic
completion is performed in the context
&lsquo;<b>:completion::complete:</b><i>...</i>&rsquo;.
<b><br>
_all_matches</b></p>

<p style="margin-left:22%;">This completer can be used to
add a string consisting of all other matches. As it
influences later completers it must appear as the first
completer in the list. The list of all matches is affected
by the <b>avoid&minus;completer</b> and
<b>old&minus;matches</b> styles described above.</p>

<p style="margin-left:22%; margin-top: 1em">It may be
useful to use the <b>_generic</b> function described below
to bind <b>_all_matches</b> to its own keystroke, for
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;C
all&minus;matches complete&minus;word _generic <br>
bindkey &rsquo;^Xa&rsquo; all&minus;matches <br>
zstyle &rsquo;:completion:all&minus;matches:*&rsquo;
old&minus;matches only <br>
zstyle &rsquo;:completion:all&minus;matches::::&rsquo;
completer _all_matches</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that this
does not generate completions by itself: first use any of
the standard ways of generating a list of completions, then
use <b>^Xa</b> to show all matches. It is possible instead
to add a standard completer to the list and request that the
list of all matches should be directly inserted:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:all&minus;matches::::&rsquo; completer
_all_matches _complete <br>
zstyle &rsquo;:completion:all&minus;matches:*&rsquo; insert
true</b></p>

<p style="margin-left:22%; margin-top: 1em">In this case
the <b>old&minus;matches</b> style should not be set.</p>

<p style="margin-left:11%;"><b>_approximate</b></p>

<p style="margin-left:22%;">This is similar to the basic
<b>_complete</b> completer but allows the completions to
undergo corrections. The maximum number of errors can be
specified by the <b>max&minus;errors</b> style; see the
description of approximate matching in <i>zshexpn</i>(1) for
how errors are counted. Normally this completer will only be
tried after the normal <b>_complete</b> completer:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete
_approximate</b></p>

<p style="margin-left:22%; margin-top: 1em">This will give
correcting completion if and only if normal completion
yields no possible completions. When corrected completions
are found, the completer will normally start menu completion
allowing you to cycle through these strings.</p>

<p style="margin-left:22%; margin-top: 1em">This completer
uses the tags <b>corrections</b> and <b>original</b> when
generating the possible corrections and the original string.
The <b>format</b> style for the former may contain the
additional sequences &lsquo;<b>%e</b>&rsquo; and
&lsquo;<b>%o</b>&rsquo; which will be replaced by the number
of errors accepted to generate the corrections and the
original string, respectively.</p>

<p style="margin-left:22%; margin-top: 1em">The completer
progressively increases the number of errors allowed up to
the limit by the <b>max&minus;errors</b> style, hence if a
completion is found with one error, no completions with two
errors will be shown, and so on. It modifies the completer
name in the context to indicate the number of errors being
tried: on the first try the completer field contains
&lsquo;<b>approximate&minus;1</b>&rsquo;, on the second try
&lsquo;<b>approximate&minus;2</b>&rsquo;, and so on.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>_approximate</b> is called from another function, the
number of errors to accept may be passed with the
<b>&minus;a</b> option. The argument is in the same format
as the <b>max&minus;errors</b> style, all in one string.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
completer (and the <b>_correct</b> completer mentioned
below) can be quite expensive to call, especially when a
large number of errors are allowed. One way to avoid this is
to set up the <b>completer</b> style using the
<b>&minus;e</b> option to zstyle so that some completers are
only used when completion is attempted a second time on the
same string, e.g.:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&minus;e &rsquo;:completion:*&rsquo; completer &rsquo; <br>
if [[ $_last_try != &quot;$HISTNO$BUFFER$CURSOR&quot; ]];
then <br>
_last_try=&quot;$HISTNO$BUFFER$CURSOR&quot; <br>
reply=(_complete _match _prefix) <br>
else <br>
reply=(_ignored _correct _approximate) <br>
fi&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This uses the
<b>HISTNO</b> parameter and the <b>BUFFER</b> and
<b>CURSOR</b> special parameters that are available inside
zle and completion widgets to find out if the command line
hasn&rsquo;t changed since the last time completion was
tried. Only then are the <b>_ignored</b>, <b>_correct</b>
and <b>_approximate</b> completers called.</p>

<p style="margin-left:11%;"><b>_complete</b></p>

<p style="margin-left:22%;">This completer generates all
possible completions in a context&minus;sensitive manner,
i.e. using the settings defined with the <b>compdef</b>
function explained above and the current settings of all
special parameters. This gives the normal completion
behaviour.</p>

<p style="margin-left:22%; margin-top: 1em">To complete
arguments of commands, <b>_complete</b> uses the utility
function <b>_normal</b>, which is in turn responsible for
finding the particular function; it is described below.
Various contexts of the form
<b>&minus;</b><i>context</i><b>&minus;</b> are handled
specifically. These are all mentioned above as possible
arguments to the <b>#compdef</b> tag.</p>

<p style="margin-left:22%; margin-top: 1em">Before trying
to find a function for a specific context, <b>_complete</b>
checks if the parameter &lsquo;<b>compcontext</b>&rsquo; is
set. Setting &lsquo;<b>compcontext</b>&rsquo; allows the
usual completion dispatching to be overridden which is
useful in places such as a function that uses <b>vared</b>
for input. If it is set to an array, the elements are taken
to be the possible matches which will be completed using the
tag &lsquo;<b>values</b>&rsquo; and the description
&lsquo;<b>value</b>&rsquo;. If it is set to an associative
array, the keys are used as the possible completions and the
values (if non&minus;empty) are used as descriptions for the
matches. If &lsquo;<b>compcontext</b>&rsquo; is set to a
string containing colons, it should be of the form
&lsquo;<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>&rsquo;.
In this case the <i>tag</i> and <i>descr</i> give the tag
and description to use and the <i>action</i> indicates what
should be completed in one of the forms accepted by the
<b>_arguments</b> utility function described below.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, if
&lsquo;<b>compcontext</b>&rsquo; is set to a string without
colons, the value is taken as the name of the context to use
and the function defined for that context will be called.
For this purpose, there is a special context named
<b>&minus;command&minus;line&minus;</b> that completes whole
command lines (commands and their arguments). This is not
used by the completion system itself but is nonetheless
handled when explicitly called.</p>

<p style="margin-left:11%;"><b>_correct</b></p>

<p style="margin-left:22%;">Generate corrections, but not
completions, for the current word; this is similar to
<b>_approximate</b> but will not allow any number of extra
characters at the cursor as that completer does. The effect
is similar to spell&minus;checking. It is based on
<b>_approximate</b>, but the completer field in the context
name is <b>correct</b>.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
with:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:::::&rsquo; completer _complete _correct
_approximate <br>
zstyle &rsquo;:completion:*:correct:::&rsquo;
max&minus;errors 2 not&minus;numeric <br>
zstyle &rsquo;:completion:*:approximate:::&rsquo;
max&minus;errors 3 numeric</b></p>

<p style="margin-left:22%; margin-top: 1em">correction will
accept up to two errors. If a numeric argument is given,
correction will not be performed, but correcting completion
will be, and will accept as many errors as given by the
numeric argument. Without a numeric argument, first
correction and then correcting completion will be tried,
with the first one accepting two errors and the second one
accepting three errors.</p>

<p style="margin-left:22%; margin-top: 1em">When
<b>_correct</b> is called as a function, the number of
errors to accept may be given following the <b>&minus;a</b>
option. The argument is in the same form a values to the
<b>accept</b> style, all in one string.</p>

<p style="margin-left:22%; margin-top: 1em">This completer
function is intended to be used without the
<b>_approximate</b> completer or, as in the example, just
before it. Using it after the <b>_approximate</b> completer
is useless since <b>_approximate</b> will at least generate
the corrected strings generated by the <b>_correct</b>
completer &minus;&minus; and probably more.</p>

<p style="margin-left:11%;"><b>_expand</b></p>

<p style="margin-left:22%;">This completer function does
not really perform completion, but instead checks if the
word on the command line is eligible for expansion and, if
it is, gives detailed control over how this expansion is
done. For this to happen, the completion system needs to be
invoked with <b>complete&minus;word</b>, not
<b>expand&minus;or&minus;complete</b> (the default binding
for <b>TAB</b>), as otherwise the string will be expanded by
the shell&rsquo;s internal mechanism before the completion
system is started. Note also this completer should be called
before the <b>_complete</b> completer function.</p>

<p style="margin-left:22%; margin-top: 1em">The tags used
when generating expansions are <b>all&minus;expansions</b>
for the string containing all possible expansions,
<b>expansions</b> when adding the possible expansions as
single matches and <b>original</b> when adding the original
string from the line. The order in which these strings are
generated, if at all, can be controlled by the
<b>group&minus;order</b> and <b>tag&minus;order</b> styles,
as usual.</p>

<p style="margin-left:22%; margin-top: 1em">The format
string for <b>all&minus;expansions</b> and for
<b>expansions</b> may contain the sequence
&lsquo;<b>%o</b>&rsquo; which will be replaced by the
original string from the line.</p>

<p style="margin-left:22%; margin-top: 1em">The kind of
expansion to be tried is controlled by the
<b>substitute</b>, <b>glob</b> and
<b>subst&minus;globs&minus;only</b> styles.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to call <b>_expand</b> as a function, in which case
the different modes may be selected with options:
<b>&minus;s</b> for <b>substitute</b>, <b>&minus;g</b> for
<b>glob</b> and <b>&minus;o</b> for
<b>subst&minus;globs&minus;only</b>.</p>

<p style="margin-left:11%;"><b>_expand_alias</b></p>

<p style="margin-left:22%;">If the word the cursor is on is
an alias, it is expanded and no other completers are called.
The types of aliases which are to be expanded can be
controlled with the styles <b>regular</b>, <b>global</b> and
<b>disabled</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This function
is also a bindable command, see the section &lsquo;Bindable
Commands&rsquo; below.</p>

<p style="margin-left:11%;"><b>_history</b></p>

<p style="margin-left:22%;">Complete words from the
shell&rsquo;s command history. This completer can be
controlled by the <b>remove&minus;all&minus;dups</b>, and
<b>sort</b> styles as for the <b>_history_complete_word</b>
bindable command, see the section &lsquo;Bindable
Commands&rsquo; below and the section &lsquo;Completion
System Configuration&rsquo; above.</p>

<p style="margin-left:11%;"><b>_ignored</b></p>

<p style="margin-left:22%;">The
<b>ignored&minus;patterns</b> style can be set to a list of
patterns which are compared against possible completions;
matching ones are removed. With this completer those matches
can be reinstated, as if no <b>ignored&minus;patterns</b>
style were set. The completer actually generates its own
list of matches; which completers are invoked is determined
in the same way as for the <b>_prefix</b> completer. The
<b>single&minus;ignored</b> style is also available as
described above.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_list</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This completer allows the insertion of matches to be
delayed until completion is attempted a second time without
the word on the line being changed. On the first attempt,
only the list of matches will be shown. It is affected by
the styles <b>condition</b> and <b>word</b>, see the section
&lsquo;Completion System Configuration&rsquo; above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_match</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This completer is intended to be used after the
<b>_complete</b> completer. It behaves similarly but the
string on the command line may be a pattern to match against
trial completions. This gives the effect of the
<b>GLOB_COMPLETE</b> option.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Normally
completion will be performed by taking the pattern from the
line, inserting a &lsquo;<b>*</b>&rsquo; at the cursor
position and comparing the resulting pattern with the
possible completions generated. This can be modified with
the <b>match&minus;original</b> style described above.</p>

<p style="margin-left:22%; margin-top: 1em">The generated
matches will be offered in a menu completion unless the
<b>insert&minus;unambiguous</b> style is set to
&lsquo;true&rsquo;; see the description above for other
options for this style.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
matcher specifications defined globally or used by the
completion functions (the styles <b>matcher&minus;list</b>
and <b>matcher</b>) will not be used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b>_menu</b></p></td>
<td width="4%"></td>
<td width="78%">


<p style="margin-top: 1em">This completer was written as
simple example function to show how menu completion can be
enabled in shell code. However, it has the notable effect of
disabling menu selection which can be useful with
<b>_generic</b> based widgets. It should be used as the
first completer in the list. Note that this is independent
of the setting of the <b>MENU_COMPLETE</b> option and does
not work with the other menu completion widgets such as
<b>reverse&minus;menu&minus;complete</b>, or
<b>accept&minus;and&minus;menu&minus;complete</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>_oldlist</b></p>

<p style="margin-left:22%;">This completer controls how the
standard completion widgets behave when there is an existing
list of completions which may have been generated by a
special completion (i.e. a separately&minus;bound completion
command). It allows the ordinary completion keys to continue
to use the list of completions thus generated, instead of
producing a new list of ordinary contextual completions. It
should appear in the list of completers before any of the
widgets which generate matches. It uses two styles:
<b>old&minus;list</b> and <b>old&minus;menu</b>, see the
section &lsquo;Completion System Configuration&rsquo;
above.</p>

<p style="margin-left:11%;"><b>_prefix</b></p>

<p style="margin-left:22%;">This completer can be used to
try completion with the suffix (everything after the cursor)
ignored. In other words, the suffix will not be considered
to be part of the word to complete. The effect is similar to
the <b>expand&minus;or&minus;complete&minus;prefix</b>
command.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>completer</b> style is used to decide which other
completers are to be called to generate matches. If this
style is unset, the list of completers set for the current
context is used &minus;&minus; except, of course, the
<b>_prefix</b> completer itself. Furthermore, if this
completer appears more than once in the list of completers
only those completers not already tried by the last
invocation of <b>_prefix</b> will be called.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
consider this global <b>completer</b> style:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer \ <br>
_complete _prefix _correct _prefix:foo</b></p>

<p style="margin-left:22%; margin-top: 1em">Here, the
<b>_prefix</b> completer tries normal completion but
ignoring the suffix. If that doesn&rsquo;t generate any
matches, and neither does the call to the <b>_correct</b>
completer after it, <b>_prefix</b> will be called a second
time and, now only trying correction with the suffix
ignored. On the second invocation the completer part of the
context appears as &lsquo;<b>foo</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">To use
<b>_prefix</b> as the last resort and try only normal
completion when it is invoked:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zstyle
&rsquo;:completion:*&rsquo; completer _complete ... _prefix
<br>
zstyle &rsquo;:completion::prefix:*&rsquo; completer
_complete</b></p>

<p style="margin-left:22%; margin-top: 1em">The
<b>add&minus;space</b> style is also respected. If it is set
to &lsquo;true&rsquo; then <b>_prefix</b> will insert a
space between the matches generated (if any) and the
suffix.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
completer is only useful if the <b>COMPLETE_IN_WORD</b>
option is set; otherwise, the cursor will be moved to the
end of the current word before the completion code is called
and hence there will be no suffix.</p>

<p style="margin-left:11%;"><b>_user_expand</b></p>

<p style="margin-left:22%;">This completer behaves
similarly to the <b>_expand</b> completer but instead
performs expansions defined by users. The styles
<b>add&minus;space</b> and <b>sort</b> styles specific to
the <b>_expand</b> completer are usable with
<b>_user_expand</b> in addition to other styles handled more
generally by the completion system. The tag
<b>all&minus;expansions</b> is also available.</p>

<p style="margin-left:22%; margin-top: 1em">The expansion
depends on the array style <b>user&minus;expand</b> being
defined for the current context; remember that the context
for completers is less specific than that for contextual
completion as the full context has not yet been determined.
Elements of the array may have one of the following
forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>$</b><i>hash</i></p></td>
<td width="3%"></td>
<td width="68%">


<p><i>hash</i> is the name of an associative array. Note
this is not a full parameter expression, merely a <b>$</b>,
suitably quoted to prevent immediate expansion, followed by
the name of an associative array. If the trial expansion
word matches a key in <i>hash</i>, the resulting expansion
is the corresponding value.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><i>_func</i></p></td>
<td width="3%"></td>
<td width="68%">


<p><i>_func</i> is the name of a shell function whose name
must begin with <b>_</b> but is not otherwise special to the
completion system. The function is called with the trial
word as an argument. If the word is to be expanded, the
function should set the array <b>reply</b> to a list of
expansions. Optionally, it can set <b>REPLY</b> to a word
that will be used as a description for the set of
expansions. The return status of the function is
irrelevant.</p> </td></tr>
</table>

<h2>BINDABLE COMMANDS
<a name="BINDABLE COMMANDS"></a>
</h2>


<p style="margin-left:11%;">In addition to the
context&minus;dependent completions provided, which are
expected to work in an intuitively obvious way, there are a
few widgets implementing special behaviour which can be
bound separately to keys. The following is a list of these
and their default bindings. <b><br>
_bash_completions</b></p>

<p style="margin-left:22%;">This function is used by two
widgets, <b>_bash_complete&minus;word</b> and
<b>_bash_list&minus;choices</b>. It exists to provide
compatibility with completion bindings in bash. The last
character of the binding determines what is completed:
&lsquo;<b>!</b>&rsquo;, command names;
&lsquo;<b>$</b>&rsquo;, environment variables;
&lsquo;<b>@</b>&rsquo;, host names; &lsquo;<b>/</b>&rsquo;,
file names; &lsquo;<b>~</b>&rsquo; user names. In bash, the
binding preceded by &lsquo;<b>\e</b>&rsquo; gives
completion, and preceded by &lsquo;<b>^X</b>&rsquo; lists
options. As some of these bindings clash with standard zsh
bindings, only &lsquo;<b>\e~</b>&rsquo; and
&lsquo;<b>^X~</b>&rsquo; are bound by default. To add the
rest, the following should be added to <b>.zshrc</b> after
<b>compinit</b> has been run:</p>

<p style="margin-left:32%; margin-top: 1em"><b>for key in
&rsquo;!&rsquo; &rsquo;$&rsquo; &rsquo;@&rsquo;
&rsquo;/&rsquo; &rsquo;~&rsquo;; do <br>
bindkey &quot;\e$key&quot; _bash_complete&minus;word <br>
bindkey &quot;^X$key&quot; _bash_list&minus;choices <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">This includes
the bindings for &lsquo;<b>~</b>&rsquo; in case they were
already bound to something else; the completion code does
not override user bindings.</p>

<p style="margin-left:11%;"><b>_correct_filename
(^XC)</b></p>

<p style="margin-left:22%;">Correct the filename path at
the cursor position. Allows up to six errors in the name.
Can also be called with an argument to correct a filename
path, independently of zle; the correction is printed on
standard output.</p>

<p style="margin-left:11%;"><b>_correct_word</b> (^Xc)</p>

<p style="margin-left:22%;">Performs correction of the
current argument using the usual contextual completions as
possible choices. This stores the string
&lsquo;<b>correct&minus;word</b>&rsquo; in the
<i>function</i> field of the context name and then calls the
<b>_correct</b> completer.</p>

<p style="margin-left:11%;"><b>_expand_alias (^Xa)</b></p>

<p style="margin-left:22%;">This function can be used as a
completer and as a bindable command. It expands the word the
cursor is on if it is an alias. The types of alias expanded
can be controlled with the styles <b>regular</b>,
<b>global</b> and <b>disabled</b>.</p>

<p style="margin-left:22%; margin-top: 1em">When used as a
bindable command there is one additional feature that can be
selected by setting the <b>complete</b> style to
&lsquo;true&rsquo;. In this case, if the word is not the
name of an alias, <b>_expand_alias</b> tries to complete the
word to a full alias name without expanding it. It leaves
the cursor directly after the completed word so that
invoking <b>_expand_alias</b> once more will expand the
now&minus;complete alias name.</p>

<p style="margin-left:11%;"><b>_expand_word (^Xe)</b></p>

<p style="margin-left:22%;">Performs expansion on the
current word: equivalent to the standard
<b>expand&minus;word</b> command, but using the
<b>_expand</b> completer. Before calling it, the
<i>function</i> field of the context is set to
&lsquo;<b>expand&minus;word</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>_generic</b></p>

<p style="margin-left:22%;">This function is not defined as
a widget and not bound by default. However, it can be used
to define a widget and will then store the name of the
widget in the <i>function</i> field of the context and call
the completion system. This allows custom completion widgets
with their own set of style settings to be defined easily.
For example, to define a widget that performs normal
completion and starts menu selection:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;C
foo complete&minus;word _generic <br>
bindkey &rsquo;...&rsquo; foo <br>
zstyle &rsquo;:completion:foo:*&rsquo; menu yes
select=1</b></p>

<p style="margin-left:22%; margin-top: 1em">Note in
particular that the <b>completer</b> style may be set for
the context in order to change the set of functions used to
generate possible matches. If <b>_generic</b> is called with
arguments, those are passed through to <b>_main_complete</b>
as the list of completers in place of those defined by the
<b>completer</b> style.</p>

<p style="margin-left:11%;"><b>_history_complete_word</b>
(\e/)</p>

<p style="margin-left:22%;">Complete words from the
shell&rsquo;s command history. This uses the <b>list</b>,
<b>remove&minus;all&minus;dups</b>, <b>sort</b>, and
<b>stop</b> styles.</p>

<p style="margin-left:11%;"><b>_most_recent_file
(^Xm)</b></p>

<p style="margin-left:22%;">Complete the name of the most
recently modified file matching the pattern on the command
line (which may be blank). If given a numeric argument
<i>N</i>, complete the <i>N</i>th most recently modified
file. Note the completion, if any, is always unique.</p>

<p style="margin-left:11%;"><b>_next_tags</b> (^Xn)</p>

<p style="margin-left:22%;">This command alters the set of
matches used to that for the next tag, or set of tags,
either as given by the <b>tag&minus;order</b> style or as
set by default; these matches would otherwise not be
available. Successive invocations of the command cycle
through all possible sets of tags.</p>

<p style="margin-left:11%;"><b>_read_comp (^X^R)</b></p>

<p style="margin-left:22%;">Prompt the user for a string,
and use that to perform completion on the current word.
There are two possibilities for the string. First, it can be
a set of words beginning &lsquo;<b>_</b>&rsquo;, for example
&lsquo;<b>_files &minus;/</b>&rsquo;, in which case the
function with any arguments will be called to generate the
completions. Unambiguous parts of the function name will be
completed automatically (normal completion is not available
at this point) until a space is typed.</p>

<p style="margin-left:22%; margin-top: 1em">Second, any
other string will be passed as a set of arguments to
<b>compadd</b> and should hence be an expression specifying
what should be completed.</p>

<p style="margin-left:22%; margin-top: 1em">A very
restricted set of editing commands is available when reading
the string: &lsquo;<b>DEL</b>&rsquo; and
&lsquo;<b>^H</b>&rsquo; delete the last character;
&lsquo;<b>^U</b>&rsquo; deletes the line, and
&lsquo;<b>^C</b>&rsquo; and &lsquo;<b>^G</b>&rsquo; abort
the function, while &lsquo;<b>RET</b>&rsquo; accepts the
completion. Note the string is used verbatim as a command
line, so arguments must be quoted in accordance with
standard shell rules.</p>

<p style="margin-left:22%; margin-top: 1em">Once a string
has been read, the next call to <b>_read_comp</b> will use
the existing string instead of reading a new one. To force a
new string to be read, call <b>_read_comp</b> with a numeric
argument.</p>

<p style="margin-left:11%;"><b>_complete_debug
(^X?)</b></p>

<p style="margin-left:22%;">This widget performs ordinary
completion, but captures in a temporary file a trace of the
shell commands executed by the completion system. Each
completion attempt gets its own file. A command to view each
of these files is pushed onto the editor buffer stack.</p>

<p style="margin-left:11%;"><b>_complete_help (^Xh)</b></p>

<p style="margin-left:22%;">This widget displays
information about the context names, the tags, and the
completion functions used when completing at the current
cursor position. If given a numeric argument other than
<b>1</b> (as in &lsquo;<b>ESC&minus;2 ^Xh</b>&rsquo;), then
the styles used and the contexts for which they are used
will be shown, too.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
information about styles may be incomplete; it depends on
the information available from the completion functions
called, which in turn is determined by the user&rsquo;s own
styles and other settings.</p>


<p style="margin-left:11%;"><b>_complete_help_generic</b></p>

<p style="margin-left:22%;">Unlike other commands listed
here, this must be created as a normal ZLE widget rather
than a completion widget (i.e. with <b>zle &minus;N</b>). It
is used for generating help with a widget bound to the
<b>_generic</b> widget that is described above.</p>

<p style="margin-left:22%; margin-top: 1em">If this widget
is created using the name of the function, as it is by
default, then when executed it will read a key sequence.
This is expected to be bound to a call to a completion
function that uses the <b>_generic</b> widget. That widget
will be executed, and information provided in the same
format that the <b>_complete_help</b> widget displays for
contextual completion.</p>

<p style="margin-left:22%; margin-top: 1em">If the
widget&rsquo;s name contains <b>debug</b>, for example if it
is created as &lsquo;<b>zle &minus;N _complete_debug_generic
_complete_help_generic</b>&rsquo;, it will read and execute
the keystring for a generic widget as before, but then
generate debugging information as done by
<b>_complete_debug</b> for contextual completion.</p>

<p style="margin-left:22%; margin-top: 1em">If the
widget&rsquo;s name contains <b>noread</b>, it will not read
a keystring but instead arrange that the next use of a
generic widget run in the same shell will have the effect as
described above.</p>

<p style="margin-left:22%; margin-top: 1em">The widget
works by setting the shell parameter
<b>ZSH_TRACE_GENERIC_WIDGET</b> which is read by
<b>_generic</b>. Unsetting the parameter cancels any pending
effect of the <b>noread</b> form.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
after executing the following:</p>

<p style="margin-left:32%; margin-top: 1em"><b>zle &minus;N
_complete_debug_generic _complete_help_generic <br>
bindkey &rsquo;^x:&rsquo; _complete_debug_generic</b></p>

<p style="margin-left:22%; margin-top: 1em">typing
&lsquo;<b>C&minus;x :</b>&rsquo; followed by the key
sequence for a generic widget will cause trace output for
that widget to be saved to a file.</p>

<p style="margin-left:11%;"><b>_complete_tag (^Xt)</b></p>

<p style="margin-left:22%;">This widget completes symbol
tags created by the <b>etags</b> or <b>ctags</b> programmes
(note there is no connection with the completion
system&rsquo;s tags) stored in a file <b>TAGS</b>, in the
format used by <b>etags</b>, or <b>tags</b>, in the format
created by <b>ctags</b>. It will look back up the path
hierarchy for the first occurrence of either file; if both
exist, the file <b>TAGS</b> is preferred. You can specify
the full path to a <b>TAGS</b> or <b>tags</b> file by
setting the parameter <b>$TAGSFILE</b> or <b>$tagsfile</b>
respectively. The corresponding completion tags used are
<b>etags</b> and <b>vtags</b>, after emacs and vi
respectively.</p>

<h2>UTILITY FUNCTIONS
<a name="UTILITY FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Descriptions
follow for utility functions that may be useful when writing
completion functions. If functions are installed in
subdirectories, most of these reside in the <b>Base</b>
subdirectory. Like the example functions for commands in the
distribution, the utility functions generating matches all
follow the convention of returning status zero if they
generated completions and non&minus;zero if no matching
completions could be added.</p>

<p style="margin-left:11%; margin-top: 1em">Two more
features are offered by the <b>_main_complete</b> function.
The arrays <b>compprefuncs</b> and <b>comppostfuncs</b> may
contain names of functions that are to be called immediately
before or after completion has been tried. A function will
only be called once unless it explicitly reinserts itself
into the array. <b><br>
_all_labels</b> [ <b>&minus;x</b> ] [ <b>&minus;12VJ</b> ]
<i>tag name descr</i> [ <i>command args</i> ... ]</p>

<p style="margin-left:22%;">This is a convenient interface
to the <b>_next_label</b> function below, implementing the
loop shown in the <b>_next_label</b> example. The
<i>command</i> and its arguments are called to generate the
matches. The options stored in the parameter <i>name</i>
will automatically be inserted into the <i>args</i> passed
to the <i>command</i>. Normally, they are put directly after
the <i>command</i>, but if one of the <i>args</i> is a
single hyphen, they are inserted directly before that. If
the hyphen is the last argument, it will be removed from the
argument list before the <i>command</i> is called. This
allows <b>_all_labels</b> to be used in almost all cases
where the matches can be generated by a single call to the
<b>compadd</b> builtin command or by a call to one of the
utility functions.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
... <br>
if _requested foo; then <br>
... <br>
_all_labels foo expl &rsquo;...&rsquo; compadd ... &minus;
$matches <br>
fi</b></p>

<p style="margin-left:22%; margin-top: 1em">Will complete
the strings from the <b>matches</b> parameter, using
<b>compadd</b> with additional options which will take
precedence over those generated by <b>_all_labels</b>.</p>

<p style="margin-left:11%;"><b>_alternative</b> [
<b>&minus;O</b> <i>name</i> ] [ <b>&minus;C</b> <i>name</i>
] <i>spec</i> ...</p>

<p style="margin-left:22%;">This function is useful in
simple cases where multiple tags are available. Essentially
it implements a loop like the one described for the
<b>_tags</b> function below.</p>

<p style="margin-left:22%; margin-top: 1em">The tags to use
and the action to perform if a tag is requested are
described using the <i>spec</i>s which are of the form:
&lsquo;<i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>&rsquo;.
The <i>tag</i>s are offered using <b>_tags</b> and if the
tag is requested, the <i>action</i> is executed with the
given description <i>descr</i>. The <i>action</i>s are those
accepted by the <b>_arguments</b> function (described
below), excluding the
&lsquo;<b>&minus;&gt;</b><i>state</i>&rsquo; and
&lsquo;<b>=</b><i>...</i>&rsquo; forms.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
the <i>action</i> may be a simple function call:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_alternative
\ <br>
&rsquo;users:user:_users&rsquo; \ <br>
&rsquo;hosts:host:_hosts&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">offers
usernames and hostnames as possible matches, generated by
the <b>_users</b> and <b>_hosts</b> functions
respectively.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_arguments</b>, this function uses <b>_all_labels</b> to
execute the actions, which will loop over all sets of tags.
Special handling is only required if there is an additional
valid tag, for example inside a function called from
<b>_alternative</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;O</b> <i>name</i>&rsquo; is used in the
same way as by the <b>_arguments</b> function. In other
words, the elements of the <i>name</i> array will be passed
to <b>compadd</b> when executing an action.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_tags</b> this function supports the <b>&minus;C</b>
option to give a different name for the argument context
field.</p>

<p style="margin-left:11%;"><b>_arguments</b> [
<b>&minus;nswWACRS</b> ] [ <b>&minus;O</b> <i>name</i> ] [
<b>&minus;M</b> <i>matchspec</i> ] [ <b>:</b> ] <i>spec</i>
...</p>

<p style="margin-left:22%;">This function can be used to
give a complete specification for completion for a command
whose arguments follow standard UNIX option and argument
conventions. The following forms specify individual sets of
options and arguments; to avoid ambiguity, these may be
separated from the options to <b>_arguments</b> itself by a
single colon. Options to <b>_arguments</b> itself must be in
separate words, i.e. <b>&minus;s &minus;w</b>, not
<b>&minus;sw</b>.</p>

<p style="margin-left:22%; margin-top: 1em">With the option
<b>&minus;n</b>, <b>_arguments</b> sets the parameter
<b>NORMARG</b> to the position of the first normal argument
in the <b>$words</b> array, i.e. the position after the end
of the options. If that argument has not been reached,
<b>NORMARG</b> is set to <b>&minus;1</b>. The caller should
declare &lsquo;<b>integer NORMARG</b>&rsquo; if the
<b>&minus;n</b> option is passed; otherwise the parameter is
not used. <i><br>
n</i><b>:</b><i>message</i><b>:</b><i>action <br>
n</i><b>::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes the
<i>n</i>&rsquo;th normal argument. The <i>message</i> will
be printed above the matches generated and the <i>action</i>
indicates what can be completed in this position (see
below). If there are two colons before the <i>message</i>
the argument is optional. If the <i>message</i> contains
only white space, nothing will be printed above the matches
unless the action adds an explanation string itself.</p>


<p style="margin-left:22%;"><b>:</b><i>message</i><b>:</b><i>action</i>
<b><br>
::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">Similar, but describes the
<i>next</i> argument, whatever number that happens to be. If
all arguments are specified in this form in the correct
order the numbers are unnecessary.</p>


<p style="margin-left:22%;"><b>*:</b><i>message</i><b>:</b><i>action</i>
<b><br>
*::</b><i>message</i><b>:</b><i>action</i> <b><br>
*:::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes how arguments
(usually non&minus;option arguments, those not beginning
with <b>&minus;</b> or <b>+</b>) are to be completed when
neither of the first two forms was provided. Any number of
arguments can be completed in this fashion.</p>

<p style="margin-left:32%; margin-top: 1em">With two colons
before the <i>message</i>, the <b>words</b> special array
and the <b>CURRENT</b> special parameter are modified to
refer only to the normal arguments when the <i>action</i> is
executed or evaluated. With three colons before the
<i>message</i> they are modified to refer only to the normal
arguments covered by this description.</p>

<p style="margin-left:22%;"><i>optspec <br>
optspec</i>:<i>...</i></p>

<p style="margin-left:32%;">This describes an option. The
colon indicates handling for one or more arguments to the
option; if it is not present, the option is assumed to take
no arguments.</p>

<p style="margin-left:32%; margin-top: 1em">By default,
options are multi&minus;character name, one
&lsquo;<b>&minus;</b><i>word</i>&rsquo; per option. With
<b>&minus;s</b>, options may be single characters, with more
than one option per word, although words starting with two
hyphens, such as &lsquo;<b>&minus;&minus;prefix</b>&rsquo;,
are still considered complete option names. This is suitable
for standard GNU options.</p>

<p style="margin-left:32%; margin-top: 1em">The combination
of <b>&minus;s</b> with <b>&minus;w</b> allows
single&minus;letter options to be combined in a single word
even if one or more of the options take arguments. For
example, if <b>&minus;a</b> takes an argument, with no
<b>&minus;s</b> &lsquo;<b>&minus;ab</b>&rsquo; is considered
as a single (unhandled) option; with <b>&minus;s
&minus;ab</b> is an option with the argument
&lsquo;<b>b</b>&rsquo;; with both <b>&minus;s</b> and
<b>&minus;w</b>, <b>&minus;ab</b> may be the option
<b>&minus;a</b> and the option <b>&minus;b</b> with
arguments still to come.</p>

<p style="margin-left:32%; margin-top: 1em">The option
<b>&minus;W</b> takes this a stage further: it is possible
to complete single&minus;letter options even after an
argument that occurs in the same word. However, it depends
on the action performed whether options will really be
completed at this point. For more control, use a utility
function like <b>_guard</b> as part of the action.</p>

<p style="margin-left:32%; margin-top: 1em">The following
forms are available for the initial <i>optspec</i>, whether
or not the option has arguments. <b><br>
*</b><i>optspec</i></p>

<p style="margin-left:43%;">Here <i>optspec</i> is one of
the remaining forms below. This indicates the following
<i>optspec</i> may be repeated. Otherwise if the
corresponding option is already present on the command line
to the left of the cursor it will not be offered again.</p>

<p style="margin-left:32%;"><b>&minus;</b><i>optname</i>
<b><br>
+</b><i>optname</i></p>

<p style="margin-left:43%;">In the simplest form the
<i>optspec</i> is just the option name beginning with a
minus or a plus sign, such as
&lsquo;<b>&minus;foo</b>&rsquo;. The first argument for the
option (if any) must follow as a <i>separate</i> word
directly after the option.</p>

<p style="margin-left:43%; margin-top: 1em">Either of
&lsquo;<b>&minus;+</b><i>optname</i>&rsquo; and
&lsquo;<b>+&minus;</b><i>optname</i>&rsquo; can be used to
specify that <b>&minus;</b><i>optname</i> and
<b>+</b><i>optname</i> are both valid.</p>

<p style="margin-left:43%; margin-top: 1em">In all the
remaining forms, the leading &lsquo;<b>&minus;</b>&rsquo;
may be replaced by or paired with &lsquo;<b>+</b>&rsquo; in
this way.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>&minus;</b></p>

<p style="margin-left:43%;">The first argument of the
option must come directly after the option name <i>in the
same word</i>. For example,
&lsquo;<b>&minus;foo&minus;:</b><i>...</i>&rsquo; specifies
that the completed option and argument will look like
&lsquo;<b>&minus;foo</b><i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>+</b></p>

<p style="margin-left:43%;">The first argument may appear
immediately after <i>optname</i> in the same word, or may
appear as a separate word after the option. For example,
&lsquo;<b>&minus;foo+:</b><i>...</i>&rsquo; specifies that
the completed option and argument will look like either
&lsquo;<b>&minus;foo</b><i>arg</i>&rsquo; or
&lsquo;<b>&minus;foo</b> <i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>=</b></p>

<p style="margin-left:43%;">The argument may appear as the
next word, or in same word as the option name provided that
it is separated from it by an equals sign, for example
&lsquo;<b>&minus;foo=</b><i>arg</i>&rsquo; or
&lsquo;<b>&minus;foo</b> <i>arg</i>&rsquo;.</p>


<p style="margin-left:32%;"><b>&minus;</b><i>optname</i><b>=&minus;</b></p>

<p style="margin-left:43%;">The argument to the option must
appear after an equals sign in the same word, and may not be
given in the next argument.</p>


<p style="margin-left:32%;"><i>optspec</i><b>[</b><i>explanation</i><b>]</b></p>

<p style="margin-left:43%;">An explanation string may be
appended to any of the preceding forms of <i>optspec</i> by
enclosing it in brackets, as in &lsquo;<b>&minus;q[query
operation]</b>&rsquo;.</p>

<p style="margin-left:43%; margin-top: 1em">The
<b>verbose</b> style is used to decide whether the
explanation strings are displayed with the option in a
completion listing.</p>

<p style="margin-left:43%; margin-top: 1em">If no bracketed
explanation string is given but the
<b>auto&minus;description</b> style is set and only one
argument is described for this <i>optspec</i>, the value of
the style is displayed, with any appearance of the sequence
&lsquo;<b>%d</b>&rsquo; in it replaced by the <i>message</i>
of the first <i>optarg</i> that follows the <i>optspec</i>;
see below.</p>

<p style="margin-left:22%; margin-top: 1em">It is possible
for options with a literal &lsquo;+&rsquo; or
&lsquo;<b>=</b>&rsquo; to appear, but that character must be
quoted, for example &lsquo;<b>&minus;\+</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>optarg</i> following an <i>optspec</i> must take one of
the following forms: <b><br>
:</b><i>message</i><b>:</b><i>action</i> <b><br>
::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">An argument to the option;
<i>message</i> and <i>action</i> are treated as for ordinary
arguments. In the first form, the argument is mandatory, and
in the second form it is optional.</p>

<p style="margin-left:32%; margin-top: 1em">This group may
be repeated for options which take multiple arguments. In
other words,
<b>:</b><i>message1</i><b>:</b><i>action1</i><b>:</b><i>message2</i><b>:</b><i>action2</i>
specifies that the option takes two arguments.</p>


<p style="margin-left:22%;"><b>:*</b><i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i>
<b><br>

:*</b><i>pattern</i><b>::</b><i>message</i><b>:</b><i>action</i>
<b><br>

:*</b><i>pattern</i><b>:::</b><i>message</i><b>:</b><i>action</i></p>

<p style="margin-left:32%;">This describes multiple
arguments. Only the last <i>optarg</i> for an option taking
multiple arguments may be given in this form. If the
<i>pattern</i> is empty (i.e., <b>:*:</b>), all the
remaining words on the line are to be completed as described
by the <i>action</i>; otherwise, all the words up to and
including a word matching the <i>pattern</i> are to be
completed using the <i>action</i>.</p>

<p style="margin-left:32%; margin-top: 1em">Multiple colons
are treated as for the &lsquo;<b>*:</b><i>...</i>&rsquo;
forms for ordinary arguments: when the <i>message</i> is
preceded by two colons, the <b>words</b> special array and
the <b>CURRENT</b> special parameter are modified during the
execution or evaluation of the <i>action</i> to refer only
to the words after the option. When preceded by three
colons, they are modified to refer only to the words covered
by this description.</p>

<p style="margin-left:11%; margin-top: 1em">Any literal
colon in an <i>optname</i>, <i>message</i>, or <i>action</i>
must be preceded by a backslash,
&lsquo;<b>\:</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Each of the
forms above may be preceded by a list in parentheses of
option names and argument numbers. If the given option is on
the command line, the options and arguments indicated in
parentheses will not be offered. For example,
&lsquo;<b>(&minus;two &minus;three
1)&minus;one:...</b>&rsquo; completes the option
&lsquo;<b>&minus;one</b>&rsquo;; if this appears on the
command line, the options <b>&minus;two</b> and
<b>&minus;three</b> and the first ordinary argument will not
be completed after it.
&lsquo;<b>(&minus;foo):</b><i>...</i>&rsquo; specifies an
ordinary argument completion; <b>&minus;foo</b> will not be
completed if that argument is already present.</p>

<p style="margin-left:11%; margin-top: 1em">Other items may
appear in the list of excluded options to indicate various
other items that should not be applied when the current
specification is matched: a single star (<b>*</b>) for the
rest arguments (i.e. a specification of the form
&lsquo;<b>*:...</b>&rsquo;); a colon (<b>:</b>) for all
normal (non&minus;option&minus;) arguments; and a hyphen
(<b>&minus;</b>) for all options. For example, if
&lsquo;<b>(*)</b>&rsquo; appears before an option and the
option appears on the command line, the list of remaining
arguments (those shown in the above table beginning with
&lsquo;<b>*:</b>&rsquo;) will not be completed.</p>

<p style="margin-left:11%; margin-top: 1em">To aid in reuse
of specifications, it is possible to precede any of the
forms above with &lsquo;<b>!</b>&rsquo;; then the form will
no longer be completed, although if the option or argument
appears on the command line they will be skipped as normal.
The main use for this is when the arguments are given by an
array, and <b>_arguments</b> is called repeatedly for more
specific contexts: on the first call &lsquo;<b>_arguments
$global_options</b>&rsquo; is used, and on subsequent calls
&lsquo;<b>_arguments !$^global_options</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">In each of the
forms above the <i>action</i> determines how completions
should be generated. Except for the
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; form below,
the <i>action</i> will be executed by calling the
<b>_all_labels</b> function to process all tag labels. No
special handling of tags is needed unless a function call
introduces a new one.</p>

<p style="margin-left:11%; margin-top: 1em">The forms for
<i>action</i> are as follows. <br>
(single unquoted space)</p>

<p style="margin-left:22%;">This is useful where an
argument is required but it is not possible or desirable to
generate matches for it. The <i>message</i> will be
displayed but no completions listed. Note that even in this
case the colon at the end of the <i>message</i> is needed;
it may only be omitted when neither a <i>message</i> nor an
<i>action</i> is given.</p>

<p style="margin-left:11%;"><b>(</b><i>item1 item2
...</i><b>)</b></p>

<p style="margin-left:22%;">One of a list of possible
matches, for example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>:foo:(foo
bar baz)</b></p>


<p style="margin-left:11%;"><b>((</b><i>item1</i><b>\:</b><i>desc1
...</i><b>))</b></p>

<p style="margin-left:22%;">Similar to the above, but with
descriptions for each possible match. Note the backslash
before the colon. For example,</p>


<p style="margin-left:32%; margin-top: 1em"><b>:foo:((a\:bar
b\:baz))</b></p>

<p style="margin-left:22%; margin-top: 1em">The matches
will be listed together with their descriptions if the
<b>description</b> style is set with the <b>values</b> tag
in the context.</p>


<p style="margin-left:11%;"><b>&minus;&gt;</b><i>string</i></p>

<p style="margin-left:22%;">In this form, <b>_arguments</b>
processes the arguments and options and then returns control
to the calling function with parameters set to indicate the
state of processing; the calling function then makes its own
arrangements for generating completions. For example,
functions that implement a state machine can use this type
of action.</p>

<p style="margin-left:22%; margin-top: 1em">Where
<b>_arguments</b> encounters <i>action</i> in the
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; format, it
will strip all leading and trailing whitespace from
<i>string</i> and set the array <b>state</b> to the set of
all <i>string</i>s for which an action is to be performed.
The elements of the array <b>state_descr</b> are assigned
the corresponding <i>message</i> field from each
<i>optarg</i> containing such an <i>action</i>.</p>

<p style="margin-left:22%; margin-top: 1em">By default and
in common with all other well behaved completion functions,
_arguments returns status zero if it was able to add matches
and non&minus;zero otherwise. However, if the
<b>&minus;R</b> option is given, <b>_arguments</b> will
instead return a status of 300 to indicate that
<b>$state</b> is to be handled.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
<b>$state</b> and <b>$state_descr</b>, <b>_arguments</b>
also sets the global parameters
&lsquo;<b>context</b>&rsquo;, &lsquo;<b>line</b>&rsquo; and
&lsquo;<b>opt_args</b>&rsquo; as described below, and does
not reset any changes made to the special parameters such as
<b>PREFIX</b> and <b>words</b>. This gives the calling
function the choice of resetting these parameters or
propagating changes in them.</p>

<p style="margin-left:22%; margin-top: 1em">A function
calling <b>_arguments</b> with at least one action
containing a &lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;
must therefore declare appropriate local parameters:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
context state state_descr line <br>
typeset &minus;A opt_args</b></p>

<p style="margin-left:22%; margin-top: 1em">to prevent
<b>_arguments</b> from altering the global environment.</p>


<p style="margin-left:11%;"><b>{</b><i>eval&minus;string</i><b>}</b></p>

<p style="margin-left:22%;">A string in braces is evaluated
as shell code to generate matches. If the
<i>eval&minus;string</i> itself does not begin with an
opening parenthesis or brace it is split into separate words
before execution.</p>

<p style="margin-left:11%;"><b>=</b> <i>action</i></p>

<p style="margin-left:22%;">If the <i>action</i> starts
with &lsquo;<b>=</b> &rsquo; (an equals sign followed by a
space), <b>_arguments</b> will insert the contents of the
<i>argument</i> field of the current context as the new
first element in the <b>words</b> special array and
increment the value of the <b>CURRENT</b> special parameter.
This has the effect of inserting a dummy word onto the
completion command line while not changing the point at
which completion is taking place.</p>

<p style="margin-left:22%; margin-top: 1em">This is most
useful with one of the specifiers that restrict the words on
the command line on which the <i>action</i> is to operate
(the two&minus; and three&minus;colon forms above). One
particular use is when an <i>action</i> itself causes
<b>_arguments</b> on a restricted range; it is necessary to
use this trick to insert an appropriate command name into
the range for the second call to <b>_arguments</b> to be
able to parse the line.</p>

<p style="margin-left:11%;"><i>word... <br>
word...</i></p>

<p style="margin-left:22%;">This covers all forms other
than those above. If the <i>action</i> starts with a space,
the remaining list of words will be invoked unchanged.</p>

<p style="margin-left:22%; margin-top: 1em">Otherwise it
will be invoked with some extra strings placed after the
first word; these are to be passed down as options to the
<b>compadd</b> builtin. They ensure that the state specified
by <b>_arguments</b>, in particular the descriptions of
options and arguments, is correctly passed to the completion
command. These additional arguments are taken from the array
parameter &lsquo;<b>expl</b>&rsquo;; this will be set up
before executing the <i>action</i> and hence may be referred
to inside it, typically in an expansion of the form
&lsquo;<b>$expl[@]</b>&rsquo; which preserves empty elements
of the array.</p>

<p style="margin-left:11%; margin-top: 1em">During the
performance of the action the array
&lsquo;<b>line</b>&rsquo; will be set to the command name
and normal arguments from the command line, i.e. the words
from the command line excluding all options and their
arguments. Options are stored in the associative array
&lsquo;<b>opt_args</b>&rsquo; with option names as keys and
their arguments as the values. For options that have more
than one argument these are given as one string, separated
by colons. All colons in the original arguments are preceded
with backslashes.</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
&lsquo;<b>context</b>&rsquo; is set when returning to the
calling function to perform an action of the form
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;. It is set to
an array of elements corresponding to the elements of
<b>$state</b>. Each element is a suitable name for the
argument field of the context: either a string of the form
&lsquo;<b>option</b><i>&minus;opt</i><b>&minus;</b><i>n</i>&rsquo;
for the <i>n</i>&rsquo;th argument of the option
<i>&minus;opt</i>, or a string of the form
&lsquo;<b>argument&minus;</b><i>n</i>&rsquo; for the
<i>n</i>&rsquo;th argument. For &lsquo;rest&rsquo;
arguments, that is those in the list at the end not handled
by position, <i>n</i> is the string
&lsquo;<b>rest</b>&rsquo;. For example, when completing the
argument of the <b>&minus;o</b> option, the name is
&lsquo;<b>option&minus;o&minus;1</b>&rsquo;, while for the
second normal (non&minus;option&minus;) argument it is
&lsquo;<b>argument&minus;2</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Furthermore,
during the evaluation of the <i>action</i> the context name
in the <b>curcontext</b> parameter is altered to append the
same string that is stored in the <b>context</b>
parameter.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
to specify multiple sets of options and arguments with the
sets separated by single hyphens. The specifications before
the first hyphen (if any) are shared by all the remaining
sets. The first word in every other set provides a name for
the set which may appear in exclusion lists in
specifications, either alone or before one of the possible
values described above. In the second case a
&lsquo;<b>&minus;</b>&rsquo; should appear between this name
and the remainder.</p>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments \
<br>
&minus;a \ <br>
&minus; set1 \ <br>
&minus;c \ <br>
&minus; set2 \ <br>
&minus;d \ <br>
&rsquo;:arg:(x2 y2)&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This defines
two sets. When the command line contains the option
&lsquo;<b>&minus;c</b>&rsquo;, the
&lsquo;<b>&minus;d</b>&rsquo; option and the argument will
not be considered possible completions. When it contains
&lsquo;<b>&minus;d</b>&rsquo; or an argument, the option
&lsquo;<b>&minus;c</b>&rsquo; will not be considered.
However, after &lsquo;<b>&minus;a</b>&rsquo; both sets will
still be considered valid.</p>

<p style="margin-left:11%; margin-top: 1em">If the name
given for one of the mutually exclusive sets is of the form
&lsquo;<b>(</b><i>name</i><b>)</b>&rsquo; then only one
value from each set will ever be completed; more formally,
all specifications are mutually exclusive to all other
specifications in the same set. This is useful for defining
multiple sets of options which are mutually exclusive and in
which the options are aliases for each other. For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments \
<br>
&minus;a &minus;b \ <br>
&minus; &rsquo;(compress)&rsquo; \ <br>
{&minus;c,&minus;&minus;compress}&rsquo;[compress]&rsquo; \
<br>
&minus; &rsquo;(uncompress)&rsquo; \ <br>

{&minus;d,&minus;&minus;decompress}&rsquo;[decompress]&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">As the
completion code has to parse the command line separately for
each set this form of argument is slow and should only be
used when necessary. A useful alternative is often an option
specification with rest&minus;arguments (as in
&lsquo;<b>&minus;foo:*:...</b>&rsquo;); here the option
<b>&minus;foo</b> swallows up all remaining arguments as
described by the <i>optarg</i> definitions.</p>

<p style="margin-left:11%; margin-top: 1em">The options
<b>&minus;S</b> and <b>&minus;A</b> are available to
simplify the specifications for commands with standard
option parsing. With <b>&minus;S</b>, no option will be
completed after a &lsquo;<b>&minus;&minus;</b>&rsquo;
appearing on its own on the line; this argument will
otherwise be ignored; hence in the line</p>

<p style="margin-left:22%; margin-top: 1em"><b>foobar
&minus;a &minus;&minus; &minus;b</b></p>

<p style="margin-left:11%; margin-top: 1em">the
&lsquo;<b>&minus;a</b>&rsquo; is considered an option but
the &lsquo;<b>&minus;b</b>&rsquo; is considered an argument,
while the &lsquo;<b>&minus;&minus;</b>&rsquo; is considered
to be neither.</p>

<p style="margin-left:11%; margin-top: 1em">With
<b>&minus;A</b>, no options will be completed after the
first non&minus;option argument on the line. The
<b>&minus;A</b> must be followed by a pattern matching all
strings which are not to be taken as arguments. For example,
to make <b>_arguments</b> stop completing options after the
first normal argument, but ignoring all strings starting
with a hyphen even if they are not described by one of the
<i>optspec</i>s, the form is &lsquo;<b>&minus;A
&quot;&minus;*&quot;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;O</b> <i>name</i>&rsquo; specifies the name
of an array whose elements will be passed as arguments to
functions called to execute <i>actions</i>. For example,
this can be used to pass the same set of options for the
<b>compadd</b> builtin to all <i>action</i>s.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;M</b> <i>spec</i>&rsquo; sets a match
specification to use to completion option names and values.
It must appear before the first argument specification. The
default is &lsquo;<b>r:|[_&minus;]=* r:|=*</b>&rsquo;: this
allows partial word completion after &lsquo;<b>_</b>&rsquo;
and &lsquo;<b>&minus;</b>&rsquo;, for example
&lsquo;&minus;f&minus;b&rsquo; can be completed to
&lsquo;<b>&minus;foo&minus;bar</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The option
<b>&minus;C</b> tells <b>_arguments</b> to modify the
<b>curcontext</b> parameter for an action of the form
&lsquo;<b>&minus;&gt;</b><i>state</i>&rsquo;. This is the
standard parameter used to keep track of the current
context. Here it (and not the <b>context</b> array) should
be made local to the calling function to avoid passing back
the modified value and should be initialised to the current
value at the start of the function:</p>

<p style="margin-left:22%; margin-top: 1em"><b>local
curcontext=&quot;$curcontext&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">This is useful
where it is not possible for multiple states to be valid
together.</p>

<p style="margin-left:11%; margin-top: 1em">The option
&lsquo;<b>&minus;&minus;</b>&rsquo; allows <b>_arguments</b>
to work out the names of long options that support the
&lsquo;<b>&minus;&minus;help</b>&rsquo; option which is
standard in many GNU commands. The command word is called
with the argument &lsquo;<b>&minus;&minus;help</b>&rsquo;
and the output examined for option names. Clearly, it can be
dangerous to pass this to commands which may not support
this option as the behaviour of the command is
unspecified.</p>

<p style="margin-left:11%; margin-top: 1em">In addition to
options, &lsquo;<b>_arguments &minus;&minus;</b>&rsquo; will
try to deduce the types of arguments available for options
when the form
&lsquo;<b>&minus;&minus;</b><i>opt</i>=<i>val</i>&rsquo; is
valid. It is also possible to provide hints by examining the
help text of the command and adding specifiers of the form
&lsquo;<i>pattern</i><b>:</b><i>message</i><b>:</b><i>action</i>&rsquo;;
note that normal <b>_arguments</b> specifiers are not used.
The <i>pattern</i> is matched against the help text for an
option, and if it matches the <i>message</i> and
<i>action</i> are used as for other argument specifiers. For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &rsquo;*\*:toggle:(yes no)&rsquo; \ <br>
&rsquo;*=FILE*:file:_files&rsquo; \ <br>
&rsquo;*=DIR*:directory:_files &minus;/&rsquo; \ <br>
&rsquo;*=PATH*:directory:_files &minus;/&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">Here,
&lsquo;<b>yes</b>&rsquo; and &lsquo;<b>no</b>&rsquo; will be
completed as the argument of options whose description ends
in a star; file names will be completed for options that
contain the substring &lsquo;<b>=FILE</b>&rsquo; in the
description; and directories will be completed for options
whose description contains &lsquo;<b>=DIR</b>&rsquo; or
&lsquo;<b>=PATH</b>&rsquo;. The last three are in fact the
default and so need not be given explicitly, although it is
possible to override the use of these patterns. A typical
help text which uses this feature is:</p>

<p style="margin-left:22%; margin-top: 1em"><b>&minus;C,
&minus;&minus;directory=DIR change to directory DIR</b></p>

<p style="margin-left:11%; margin-top: 1em">so that the
above specifications will cause directories to be completed
after &lsquo;<b>&minus;&minus;directory</b>&rsquo;, though
not after &lsquo;<b>&minus;C</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
<b>_arguments</b> tries to find out automatically if the
argument for an option is optional. This can be specified
explicitly by doubling the colon before the
<i>message</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>pattern</i> ends in &lsquo;<b>(&minus;)</b>&rsquo;, this
will be removed from the pattern and the <i>action</i> will
be used only directly after the &lsquo;<b>=</b>&rsquo;, not
in the next word. This is the behaviour of a normal
specification defined with the form
&lsquo;<b>=&minus;</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>_arguments &minus;&minus;</b>&rsquo; can be
followed by the option &lsquo;<b>&minus;i</b>
<i>patterns</i>&rsquo; to give patterns for options which
are not to be completed. The patterns can be given as the
name of an array parameter or as a literal list in
parentheses. For example,</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &minus;i \ <br>

&quot;(&minus;&minus;(en|dis)able&minus;FEATURE*)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">will cause
completion to ignore the options
&lsquo;<b>&minus;&minus;enable&minus;FEATURE</b>&rsquo; and
&lsquo;<b>&minus;&minus;disable&minus;FEATURE</b>&rsquo;
(this example is useful with GNU <b>configure</b>).</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>_arguments &minus;&minus;</b>&rsquo; form can also
be followed by the option &lsquo;<b>&minus;s</b>
<i>pair</i>&rsquo; to describe option aliases. Each
<i>pair</i> consists of a pattern and a replacement. For
example, some <b>configure</b>&minus;scripts describe
options only as
&lsquo;<b>&minus;&minus;enable&minus;foo</b>&rsquo;, but
also accept
&lsquo;<b>&minus;&minus;disable&minus;foo</b>&rsquo;. To
allow completion of the second form:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&minus;&minus; &minus;s &quot;(#&minus;&minus;enable&minus;
&minus;&minus;disable&minus;)&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">Here is a more
general example of the use of <b>_arguments</b>:</p>

<p style="margin-left:22%; margin-top: 1em"><b>_arguments
&rsquo;&minus;l+:left border:&rsquo; \ <br>
&rsquo;&minus;format:paper size:(letter A4)&rsquo; \ <br>
&rsquo;*&minus;copy:output file:_files::resolution:(300
600)&rsquo; \ <br>
&rsquo;:postscript file:_files &minus;g
\*.\(ps\|eps\)&rsquo; \ <br>
&rsquo;*:page number:&rsquo;</b></p>

<p style="margin-left:11%; margin-top: 1em">This describes
three options: &lsquo;<b>&minus;l</b>&rsquo;,
&lsquo;<b>&minus;format</b>&rsquo;, and
&lsquo;<b>&minus;copy</b>&rsquo;. The first takes one
argument described as &lsquo;<i>left border</i>&rsquo; for
which no completion will be offered because of the empty
action. Its argument may come directly after the
&lsquo;<b>&minus;l</b>&rsquo; or it may be given as the next
word on the line.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>&minus;format</b>&rsquo; option takes one argument
in the next word, described as &lsquo;<i>paper
size</i>&rsquo; for which only the strings
&lsquo;<b>letter</b>&rsquo; and &lsquo;<b>A4</b>&rsquo; will
be completed.</p>

<p style="margin-left:11%; margin-top: 1em">The
&lsquo;<b>&minus;copy</b>&rsquo; option may appear more than
once on the command line and takes two arguments. The first
is mandatory and will be completed as a filename. The second
is optional (because of the second colon before the
description &lsquo;<i>resolution</i>&rsquo;) and will be
completed from the strings &lsquo;<b>300</b>&rsquo; and
&lsquo;<b>600</b>&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The last two
descriptions say what should be completed as arguments. The
first describes the first argument as a &lsquo;<i>postscript
file</i>&rsquo; and makes files ending in
&lsquo;<b>ps</b>&rsquo; or &lsquo;<b>eps</b>&rsquo; be
completed. The last description gives all other arguments
the description &lsquo;<i>page numbers</i>&rsquo; but does
not offer completions. <b><br>
_cache_invalid</b> <i>cache_identifier</i></p>

<p style="margin-left:22%;">This function returns status
zero if the completions cache corresponding to the given
cache identifier needs rebuilding. It determines this by
looking up the <b>cache&minus;policy</b> style for the
current context. This should provide a function name which
is run with the full path to the relevant cache file as the
only argument.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_example_caching_policy
() { <br>
# rebuild if cache is more than a week old <br>
local &minus;a oldp <br>
oldp=( &quot;$1&quot;(Nm+7) ) <br>
(( $#oldp )) <br>
}</b></p>

<p style="margin-left:11%;"><b>_call_function</b> <i>return
name</i> [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">If a function <i>name</i>
exists, it is called with the arguments <i>args</i>. The
<i>return</i> argument gives the name of a parameter in
which the return status from the function <i>name</i> should
be stored; if <i>return</i> is empty or a single hyphen it
is ignored.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status of <b>_call_function</b> itself is zero if the
function <i>name</i> exists and was called and
non&minus;zero otherwise.</p>

<p style="margin-left:11%;"><b>_call_program</b> <i>tag
string</i> ...</p>

<p style="margin-left:22%;">This function provides a
mechanism for the user to override the use of an external
command. It looks up the <b>command</b> style with the
supplied <i>tag</i>. If the style is set, its value is used
as the command to execute. The <i>string</i>s from the call
to <b>_call_program</b>, or from the style if set, are
concatenated with spaces between them and the resulting
string is evaluated. The return status is the return status
of the command called.</p>

<p style="margin-left:11%;"><b>_combination</b> [
<b>&minus;s</b> <i>pattern</i> ] <i>tag style spec</i> ...
<i>field opts</i> ...</p>

<p style="margin-left:22%;">This function is used to
complete combinations of values, for example pairs of
hostnames and usernames. The <i>style</i> argument gives the
style which defines the pairs; it is looked up in a context
with the <i>tag</i> specified.</p>

<p style="margin-left:22%; margin-top: 1em">The style name
consists of field names separated by hyphens, for example
&lsquo;<b>users&minus;hosts&minus;ports</b>&rsquo;. For each
field for a value is already known, a <i>spec</i> of the
form &lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo; is
given. For example, if the command line so far specifies a
user &lsquo;<b>pws</b>&rsquo;, the argument
&lsquo;<b>users=pws</b>&rsquo; should appear.</p>

<p style="margin-left:22%; margin-top: 1em">The next
argument with no equals sign is taken as the name of the
field for which completions should be generated (presumably
not one of the <i>field</i>s for which the value is
known).</p>

<p style="margin-left:22%; margin-top: 1em">The matches
generated will be taken from the value of the style. These
should contain the possible values for the combinations in
the appropriate order (users, hosts, ports in the example
above). The different fields the values for the different
fields are separated by colons. This can be altered with the
option <b>&minus;s</b> to <b>_combination</b> which
specifies a pattern. Typically this is a character class, as
for example &lsquo;<b>&minus;s &quot;[:@]&quot;</b>&rsquo;
in the case of the <b>users&minus;hosts</b> style. Each
&lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo;
specification restricts the completions which apply to
elements of the style with appropriately matching
fields.</p>

<p style="margin-left:22%; margin-top: 1em">If no style
with the given name is defined for the given tag, or if none
of the strings in style&rsquo;s value match, but a function
name of the required field preceded by an underscore is
defined, that function will be called to generate the
matches. For example, if there is no
&lsquo;<b>users&minus;hosts&minus;ports</b>&rsquo; or no
matching hostname when a host is required, the function
&lsquo;<b>_hosts</b>&rsquo; will automatically be
called.</p>

<p style="margin-left:22%; margin-top: 1em">If the same
name is used for more than one field, in both the
&lsquo;<i>field</i><b>=</b><i>pattern</i>&rsquo; and the
argument that gives the name of the field to be completed,
the number of the field (starting with one) may be given
after the fieldname, separated from it by a colon.</p>

<p style="margin-left:22%; margin-top: 1em">All arguments
after the required field name are passed to <b>compadd</b>
when generating matches from the style value, or to the
functions for the fields if they are called.</p>

<p style="margin-left:11%;"><b>_describe</b> [
<b>&minus;oO</b> | <b>&minus;t</b> <i>tag</i> ] <i>descr
name1</i> [ <i>name2</i> ] <i>opts</i> ...
<b>&minus;&minus;</b> ...</p>

<p style="margin-left:22%;">This function associates
completions with descriptions. Multiple groups separated by
<b>&minus;&minus;</b> can be supplied, potentially with
different completion options <i>opts</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>descr</i> is taken as a string to display above the
matches if the <b>format</b> style for the
<b>descriptions</b> tag is set. This is followed by one or
two names of arrays followed by options to pass to
<b>compadd</b>. The first array contains the possible
completions with their descriptions in the form
&lsquo;<i>completion</i><b>:</b><i>description</i>&rsquo;.
Any literal colons in <i>completion</i> must be quoted with
a backslash. If a second array is given, it should have the
same number of elements as the first; in this case the
corresponding elements are added as possible completions
instead of the <i>completion</i> strings from the first
array. The completion list will retain the descriptions from
the first array. Finally, a set of completion options can
appear.</p>

<p style="margin-left:22%; margin-top: 1em">If the option
&lsquo;<b>&minus;o</b>&rsquo; appears before the first
argument, the matches added will be treated as names of
command options (N.B. not shell options), typically
following a &lsquo;<b>&minus;</b>&rsquo;,
&lsquo;<b>&minus;&minus;</b>&rsquo; or
&lsquo;<b>+</b>&rsquo; on the command line. In this case
<b>_describe</b> uses the <b>prefix&minus;hidden</b>,
<b>prefix&minus;needed</b> and <b>verbose</b> styles to find
out if the strings should be added as completions and if the
descriptions should be shown. Without the
&lsquo;<b>&minus;o</b>&rsquo; option, only the
<b>verbose</b> style is used to decide how descriptions are
shown. If &lsquo;<b>&minus;O</b>&rsquo; is used instead of
&lsquo;<b>&minus;o</b>&rsquo;, command options are completed
as above but <b>_describe</b> will not handle the
<b>prefix&minus;needed</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">With the
<b>&minus;t</b> option a <i>tag</i> can be specified. The
default is &lsquo;<b>values</b>&rsquo; or, if the
<b>&minus;o</b> option is given,
&lsquo;<b>options</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If selected by
the <b>list&minus;grouped</b> style, strings with the same
description will appear together in the list.</p>


<p style="margin-left:22%; margin-top: 1em"><b>_describe</b>
uses the <b>_all_labels</b> function to generate the
matches, so it does not need to appear inside a loop over
tag labels.</p>

<p style="margin-left:11%;"><b>_description</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag name
descr</i> [ <i>spec</i> ... ]</p>

<p style="margin-left:22%;">This function is not to be
confused with the previous one; it is used as a helper
function for creating options to <b>compadd</b>. It is
buried inside many of the higher level completion functions
and so often does not need to be called directly.</p>

<p style="margin-left:22%; margin-top: 1em">The styles
listed below are tested in the current context using the
given <i>tag</i>. The resulting options for <b>compadd</b>
are put into the array named <i>name</i> (this is
traditionally &lsquo;<b>expl</b>&rsquo;, but this convention
is not enforced). The description for the corresponding set
of matches is passed to the function in <i>descr</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The styles
tested are: <b>format</b>, <b>hidden</b>, <b>matcher</b>,
<b>ignored&minus;patterns</b> and <b>group&minus;name</b>.
The <b>format</b> style is first tested for the given
<i>tag</i> and then for the <b>descriptions</b> tag if no
value was found, while the remainder are only tested for the
tag given as the first argument. The function also calls
<b>_setup</b> which tests some more styles.</p>

<p style="margin-left:22%; margin-top: 1em">The string
returned by the <b>format</b> style (if any) will be
modified so that the sequence &lsquo;<b>%d</b>&rsquo; is
replaced by the <i>descr</i> given as the third argument
without any leading or trailing white space. If, after
removing the white space, the <i>descr</i> is the empty
string, the format style will not be used and the options
put into the <i>name</i> array will not contain an
explanation string to be displayed above the matches.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>_description</b> is called with more than three
arguments, the additional <i>spec</i>s should be of the form
&lsquo;<i>char</i><b>:</b><i>str</i>&rsquo;. These supply
escape sequence replacements for the <b>format</b> style:
every appearance of &lsquo;<b>%</b><i>char</i>&rsquo; will
be replaced by <i>string</i>.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;x</b> option is given, the description will be
passed to <b>compadd</b> using the <b>&minus;x</b> option
instead of the default <b>&minus;X</b>. This means that the
description will be displayed even if there are no
corresponding matches.</p>

<p style="margin-left:22%; margin-top: 1em">The options
placed in the array <i>name</i> take account of the
<b>group&minus;name</b> style, so matches are placed in a
separate group where necessary. The group normally has its
elements sorted (by passing the option <b>&minus;J</b> to
<b>compadd</b>), but if an option starting with
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;, or
&lsquo;<b>&minus;2</b>&rsquo; is passed to
<b>_description</b>, that option will be included in the
array. Hence it is possible for the completion group to be
unsorted by giving the option &lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;1V</b>&rsquo;, or
&lsquo;<b>&minus;2V</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">In most cases,
the function will be used like this:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
_description files expl file <br>
compadd &quot;$expl[@]&quot; &minus;
&quot;$files[@]&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">Note the use of
the parameter <b>expl</b>, the hyphen, and the list of
matches. Almost all calls to <b>compadd</b> within the
completion system use a similar format; this ensures that
user&minus;specified styles are correctly passed down to the
builtins which implement the internals of completion.</p>

<p style="margin-left:11%;"><b>_dispatch</b> <i>context
string ...</i></p>

<p style="margin-left:22%;">This sets the current context
to <i>context</i> and looks for completion functions to
handle this context by hunting through the list of command
names or special contexts (as described above for
<b>compdef</b>) given as <i>string ...</i>. The first
completion function to be defined for one of the contexts in
the list is used to generate matches. Typically, the last
<i>string</i> is <b>&minus;default&minus;</b> to cause the
function for default completion to be used as a
fallback.</p>

<p style="margin-left:22%; margin-top: 1em">The function
sets the parameter <b>$service</b> to the <i>string</i>
being tried, and sets the <i>context/command</i> field (the
fourth) of the <b>$curcontext</b> parameter to the
<i>context</i> given as the first argument.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>_files</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The function <b>_files</b> calls <b>_path_files</b> with
all the arguments it was passed except for <b>&minus;g</b>
and <b>&minus;/</b>. The use of these two options depends on
the setting of the <b>file&minus;patterns</b> style.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This function
accepts the full set of options allowed by
<b>_path_files</b>, described below.</p>

<p style="margin-left:11%;"><b>_gnu_generic</b></p>

<p style="margin-left:22%;">This function is a simple
wrapper around the <b>_arguments</b> function described
above. It can be used to determine automatically the long
options understood by commands that produce a list when
passed the option &lsquo;<b>&minus;&minus;help</b>&rsquo;.
It is intended to be used as a top&minus;level completion
function in its own right. For example, to enable option
completion for the commands <b>foo</b> and <b>bar</b>,
use</p>

<p style="margin-left:32%; margin-top: 1em"><b>compdef
_gnu_generic foo bar</b></p>

<p style="margin-left:22%; margin-top: 1em">after the call
to <b>compinit</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The completion
system as supplied is conservative in its use of this
function, since it is important to be sure the command
understands the option
&lsquo;<b>&minus;&minus;help</b>&rsquo;.</p>

<p style="margin-left:11%;"><b>_guard</b> [ <i>options</i>
] <i>pattern descr</i></p>

<p style="margin-left:22%;">This function is intended to be
used in the <i>action</i> for the specifications passed to
<b>_arguments</b> and similar functions. It returns
immediately with a non&minus;zero return status if the
string to be completed does not match the <i>pattern</i>. If
the pattern matches, the <i>descr</i> is displayed; the
function then returns status zero if the word to complete is
not empty, non&minus;zero otherwise.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>pattern</i> may be preceded by any of the options
understood by <b>compadd</b> that are passed down from
<b>_description</b>, namely <b>&minus;M</b>,
<b>&minus;J</b>, <b>&minus;V</b>, <b>&minus;1</b>,
<b>&minus;2</b>, <b>&minus;n</b>, <b>&minus;F</b> and
<b>&minus;X</b>. All of these options will be ignored. This
fits in conveniently with the argument&minus;passing
conventions of actions for <b>_arguments</b>.</p>

<p style="margin-left:22%; margin-top: 1em">As an example,
consider a command taking the options <b>&minus;n</b> and
<b>&minus;none</b>, where <b>&minus;n</b> must be followed
by a numeric value in the same word. By using:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_arguments
&rsquo;&minus;n&minus;: :_guard &quot;[0&minus;9]#&quot;
&quot;numeric value&quot;&rsquo;
&rsquo;&minus;none&rsquo;</b></p>


<p style="margin-left:22%; margin-top: 1em"><b>_arguments</b>
can be made to both display the message &lsquo;<b>numeric
value</b>&rsquo; and complete options after
&lsquo;<b>&minus;n&lt;TAB&gt;</b>&rsquo;. If the
&lsquo;<b>&minus;n</b>&rsquo; is already followed by one or
more digits (the pattern passed to <b>_guard</b>) only the
message will be displayed; if the
&lsquo;<b>&minus;n</b>&rsquo; is followed by another
character, only options are completed.</p>

<p style="margin-left:11%;"><b>_message</b> [
<b>&minus;r12</b> ] [ <b>&minus;VJ</b> <i>group</i> ]
<i>descr</i> <b><br>
_message &minus;e</b> [ <i>tag</i> ] <i>descr</i></p>

<p style="margin-left:22%;">The <i>descr</i> is used in the
same way as the third argument to the <b>_description</b>
function, except that the resulting string will always be
shown whether or not matches were generated. This is useful
for displaying a help message in places where no completions
can be generated.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>format</b> style is examined with the <b>messages</b> tag
to find a message; the usual tag, <b>descriptions</b>, is
used only if the style is not set with the former.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;r</b> option is given, no style is used; the
<i>descr</i> is taken literally as the string to display.
This is most useful when the <i>descr</i> comes from a
pre&minus;processed argument list which already contains an
expanded description.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;12VJ</b> options and the <i>group</i> are passed
to <b>compadd</b> and hence determine the group the message
string is added to.</p>

<p style="margin-left:22%; margin-top: 1em">The second form
gives a description for completions with the tag <i>tag</i>
to be shown even if there are no matches for that tag. The
tag can be omitted and if so the tag is taken from the
parameter <b>$curtag</b>; this is maintained by the
completion system and so is usually correct.</p>

<p style="margin-left:11%;"><b>_multi_parts</b> <i>sep
array</i></p>

<p style="margin-left:22%;">The argument <i>sep</i> is a
separator character. The <i>array</i> may be either the name
of an array parameter or a literal array in the form
&lsquo;<b>(foo bar)</b>&rsquo;, a parenthesised list of
words separated by whitespace. The possible completions are
the strings from the array. However, each chunk delimited by
<i>sep</i> will be completed separately. For example, the
<b>_tar</b> function uses &lsquo;<b>_multi_parts /</b>
<i>patharray</i>&rsquo; to complete partial file paths from
the given array of complete file paths.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;i</b> option causes <b>_multi_parts</b> to insert
a unique match even if that requires multiple separators to
be inserted. This is not usually the expected behaviour with
filenames, but certain other types of completion, for
example those with a fixed set of possibilities, may be more
suited to this form.</p>

<p style="margin-left:22%; margin-top: 1em">Like other
utility functions, this function accepts the
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;f</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;,
&lsquo;<b>&minus;R</b>&rsquo;, and
&lsquo;<b>&minus;q</b>&rsquo; options and passes them to the
<b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_next_label</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag name
descr</i> [ <i>options</i> ... ]</p>

<p style="margin-left:22%;">This function is used to
implement the loop over different tag labels for a
particular tag as described above for the
<b>tag&minus;order</b> style. On each call it checks to see
if there are any more tag labels; if there is it returns
status zero, otherwise non&minus;zero. As this function
requires a current tag to be set, it must always follow a
call to <b>_tags</b> or <b>_requested</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;x12VJ</b> options and the first three arguments
are passed to the <b>_description</b> function. Where
appropriate the <i>tag</i> will be replaced by a tag label
in this call. Any description given in the
<b>tag&minus;order</b> style is preferred to the
<i>descr</i> passed to <b>_next_label</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>options</i> given after the <i>descr</i> are set in the
parameter given by <i>name</i>, and hence are to be passed
to <b>compadd</b> or whatever function is called to add the
matches.</p>

<p style="margin-left:22%; margin-top: 1em">Here is a
typical use of this function for the tag <b>foo</b>. The
call to <b>_requested</b> determines if tag <b>foo</b> is
required at all; the loop over <b>_next_label</b> handles
any labels defined for the tag in the <b>tag&minus;order</b>
style.</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
ret=1 <br>
... <br>
if _requested foo; then <br>
... <br>
while _next_label foo expl &rsquo;...&rsquo;; do <br>
compadd &quot;$expl[@]&quot; ... &amp;&amp; ret=0 <br>
done <br>
... <br>
fi <br>
return ret</b></p>

<p style="margin-left:11%;"><b>_normal</b></p>

<p style="margin-left:22%;">This is the standard function
called to handle completion outside any special
<i>&minus;context&minus;</i>. It is called both to complete
the command word and also the arguments for a command. In
the second case, <b>_normal</b> looks for a special
completion for that command, and if there is none it uses
the completion for the <b>&minus;default&minus;</b>
context.</p>

<p style="margin-left:22%; margin-top: 1em">A second use is
to reexamine the command line specified by the <b>$words</b>
array and the <b>$CURRENT</b> parameter after those have
been modified. For example, the function <b>_precommand</b>,
which completes after pre&minus;command specifiers such as
<b>nohup</b>, removes the first word from the <b>words</b>
array, decrements the <b>CURRENT</b> parameter, then calls
<b>_normal</b> again. The effect is that &lsquo;<b>nohup</b>
<i>cmd ...</i>&rsquo; is treated in the same way as
&lsquo;<i>cmd ...</i>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">If the command
name matches one of the patterns given by one of the options
<b>&minus;p</b> or <b>&minus;P</b> to <b>compdef</b>, the
corresponding completion function is called and then the
parameter <b>_compskip</b> is checked. If it is set
completion is terminated at that point even if no matches
have been found. This is the same effect as in the
<b>&minus;first&minus;</b> context.</p>

<p style="margin-left:11%;"><b>_options</b></p>

<p style="margin-left:22%;">This can be used to complete
the names of shell options. It provides a matcher
specification that ignores a leading
&lsquo;<b>no</b>&rsquo;, ignores underscores and allows
upper&minus;case letters to match their lower&minus;case
counterparts (for example, &lsquo;<b>glob</b>&rsquo;,
&lsquo;<b>noglob</b>&rsquo;, &lsquo;<b>NO_GLOB</b>&rsquo;
are all completed). Any arguments are propagated to the
<b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_options_set</b> and
<b>_options_unset</b></p>

<p style="margin-left:22%;">These functions complete only
set or unset options, with the same matching specification
used in the <b>_options</b> function.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
need to uncomment a few lines in the <b>_main_complete</b>
function for these functions to work properly. The lines in
question are used to store the option settings in effect
before the completion widget locally sets the options it
needs. Hence these functions are not generally used by the
completion system.</p>

<p style="margin-left:11%;"><b>_parameters</b></p>

<p style="margin-left:22%;">This is used to complete the
names of shell parameters.</p>

<p style="margin-left:22%; margin-top: 1em">The option
&lsquo;<b>&minus;g</b> <i>pattern</i>&rsquo; limits the
completion to parameters whose type matches the
<i>pattern</i>. The type of a parameter is that shown by
&lsquo;<b>print ${(t)</b><i>param</i><b>}</b>&rsquo;, hence
judicious use of &lsquo;<b>*</b>&rsquo; in <i>pattern</i> is
probably necessary.</p>

<p style="margin-left:22%; margin-top: 1em">All other
arguments are passed to the <b>compadd</b> builtin.</p>

<p style="margin-left:11%;"><b>_path_files</b></p>

<p style="margin-left:22%;">This function is used
throughout the completion system to complete filenames. It
allows completion of partial paths. For example, the string
&lsquo;<b>/u/i/s/sig</b>&rsquo; may be completed to
&lsquo;<b>/usr/include/sys/signal.h</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">The options
accepted by both <b>_path_files</b> and <b>_files</b>
are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Complete all filenames. This is the default.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="3%">


<p><b>&minus;/</b></p></td>
<td width="7%"></td>
<td width="68%">


<p>Specifies that only directories should be completed.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>&minus;g</b>
<i>pattern</i></p>

<p style="margin-left:32%;">Specifies that only files
matching the <i>pattern</i> should be completed.</p>

<p style="margin-left:22%;"><b>&minus;W</b>
<i>paths</i></p>

<p style="margin-left:32%;">Specifies path prefixes that
are to be prepended to the string from the command line to
generate the filenames but that should not be inserted as
completions nor shown in completion listings. Here,
<i>paths</i> may be the name of an array parameter, a
literal list of paths enclosed in parentheses or an absolute
pathname.</p>

<p style="margin-left:22%;"><b>&minus;F</b>
<i>ignored&minus;files</i></p>

<p style="margin-left:32%;">This behaves as for the
corresponding option to the <b>compadd</b> builtin. It gives
direct control over which filenames should be ignored. If
the option is not present, the <b>ignored&minus;patterns</b>
style is used.</p>

<p style="margin-left:22%; margin-top: 1em">Both
<b>_path_files</b> and <b>_files</b> also accept the
following options which are passed to <b>compadd</b>:
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;q</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;, and
&lsquo;<b>&minus;R</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, the
<b>_path_files</b> function uses the styles <b>expand</b>,
<b>ambiguous</b>, <b>special&minus;dirs</b>,
<b>list&minus;suffixes</b> and <b>file&minus;sort</b>
described above.</p>

<p style="margin-left:11%;"><b>_pick_variant</b> [
<b>&minus;b</b> <i>builtin&minus;label</i> ] [
<b>&minus;c</b></p>

<p style="margin-left:22%;"><i>command</i> ] [
<b>&minus;r</b> <i>name</i> ]</p>


<p style="margin-left:11%;"><i>label</i><b>=</b><i>pattern</i>
... <i>label</i> [ <i>args</i> ... ]</p>

<p style="margin-left:22%;">This function is used to
resolve situations where a single command name requires more
than one type of handling, either because it has more than
one variant or because there is a name clash between two
different commands.</p>

<p style="margin-left:22%; margin-top: 1em">The command to
run is taken from the first element of the array
<b>words</b> unless this is overridden by the option
<b>&minus;c</b>. This command is run and its output is
compared with a series of patterns. Arguments to be passed
to the command can be specified at the end after all the
other arguments. The patterns to try in order are given by
the arguments <i>label</i><b>=</b><i>pattern</i>; if the
output of &lsquo;<i>command args</i> <b>...</b>&rsquo;
contains <i>pattern</i>, then <b>label</b> is selected as
the label for the command variant. If none of the patterns
match, the final command label is selected and status 1 is
returned.</p>

<p style="margin-left:22%; margin-top: 1em">If the
&lsquo;<b>&minus;b</b> <i>builtin&minus;label</i>&rsquo; is
given, the command is tested to see if it is provided as a
shell builtin, possibly autoloaded; if so, the label
<i>builtin&minus;label</i> is selected as the label for the
variant.</p>

<p style="margin-left:22%; margin-top: 1em">If the
&lsquo;<b>&minus;r</b> <i>name</i>&rsquo; is given, the
<i>label</i> picked is stored in the parameter named
<i>name</i>.</p>

<p style="margin-left:22%; margin-top: 1em">The results are
also cached in the <i>_cmd_variant</i> associative array
indexed by the name of the command run.</p>

<p style="margin-left:11%;"><b>_regex_arguments</b> <i>name
spec</i> ...</p>

<p style="margin-left:22%;">This function generates a
completion function <i>name</i> which matches the
specifications <i>spec</i> <b>...</b>, a set of regular
expressions as described below. After running
<b>_regex_arguments</b>, the function <i>name</i> should be
called as a normal completion function. The pattern to be
matched is given by the contents of the <b>words</b> array
up to the current cursor position joined together with null
characters; no quotation is applied.</p>

<p style="margin-left:22%; margin-top: 1em">The arguments
are grouped as sets of alternatives separated by
&lsquo;<b>|</b>&rsquo;, which are tried one after the other
until one matches. Each alternative consists of a one or
more specifications which are tried left to right, with each
pattern matched being stripped in turn from the command line
being tested, until all of the group succeeds or until one
fails; in the latter case, the next alternative is tried.
This structure can be repeated to arbitrary depth by using
parentheses; matching proceeds from inside to outside.</p>

<p style="margin-left:22%; margin-top: 1em">A special
procedure is applied if no test succeeds but the remaining
command line string contains no null character (implying the
remaining word is the one for which completions are to be
generated). The completion target is restricted to the
remaining word and any <i>action</i>s for the corresponding
patterns are executed. In this case, nothing is stripped
from the command line string. The order of evaluation of the
<i>action</i>s can be determined by the
<b>tag&minus;order</b> style; the various formats supported
by <b>_alternative</b> can be used in <i>action</i>. The
<i>descr</i> is used for setting up the array parameter
<b>expl</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Specification
arguments take one of following forms, in which
metacharacters such as &lsquo;<b>(</b>&rsquo;,
&lsquo;<b>)</b>&rsquo;, &lsquo;<b>#</b>&rsquo; and
&lsquo;<b>|</b>&rsquo; should be quoted. <b><br>
/</b><i>pattern</i><b>/</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is a single primitive
component. The function tests whether the combined pattern
&lsquo;<b>(#b)((#B)</b><i>pattern</i><b>)</b><i>lookahead</i><b>*</b>&rsquo;
matches the command line string. If so,
&lsquo;<i>guard</i>&rsquo; is evaluated and its return
status is examined to determine if the test has succeeded.
The <i>pattern</i> string &lsquo;<b>[]</b>&rsquo; is
guaranteed never to match. The <i>lookahead</i> is not
stripped from the command line before the next pattern is
examined.</p>

<p style="margin-left:32%; margin-top: 1em">The argument
starting with <b>:</b> is used in the same manner as an
argument to <b>_alternative</b>.</p>

<p style="margin-left:32%; margin-top: 1em">A component is
used as follows: <i>pattern</i> is tested to see if the
component already exists on the command line. If it does,
any following specifications are examined to find something
to complete. If a component is reached but no such pattern
exists yet on the command line, the string containing the
<i>action</i> is used to generate matches to insert at that
point.</p>


<p style="margin-left:22%;"><b>/</b><i>pattern</i><b>/+</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is similar to
&lsquo;<b>/</b><i>pattern</i><b>/</b> ...&rsquo; but the
left part of the command line string (i.e. the part already
matched by previous patterns) is also considered part of the
completion target.</p>


<p style="margin-left:22%;"><b>/</b><i>pattern</i><b>/&minus;</b>
[<b>%</b><i>lookahead</i><b>%</b>]
[<b>&minus;</b><i>guard</i>]
[<b>:</b><i>tag</i><b>:</b><i>descr</i><b>:</b><i>action</i>]</p>

<p style="margin-left:32%;">This is similar to
&lsquo;<b>/</b><i>pattern</i><b>/</b> ...&rsquo; but the
<i>action</i>s of the current and previously matched
patterns are ignored even if the following
&lsquo;<i>pattern</i>&rsquo; matches the empty string.</p>

<p style="margin-left:22%;"><b>(</b> <i>spec</i>
<b>)</b></p>

<p style="margin-left:32%;">Parentheses may be used to
groups <i>spec</i>s; note each parenthesis is a single
argument to <b>_regex_arguments</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><i>spec</i> <b>#</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>This allows any number of repetitions of
<i>spec</i>.</p> </td></tr>
</table>

<p style="margin-left:22%;"><i>spec spec</i></p>

<p style="margin-left:32%;">The two <i>spec</i>s are to be
matched one after the other as described above.</p>

<p style="margin-left:22%;"><i>spec</i> <b>|</b>
<i>spec</i></p>

<p style="margin-left:32%;">Either of the two <i>spec</i>s
can be matched.</p>

<p style="margin-left:22%; margin-top: 1em">The function
<b>_regex_words</b> can be used as a helper function to
generate matches for a set of alternative words possibly
with their own arguments as a command line argument.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
/$&rsquo;[^\0]#\0&rsquo;/ :&rsquo;compadd aaa&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This generates
a function <b>_tst</b> that completes <b>aaa</b> as its only
argument. The <i>tag</i> and <i>description</i> for the
action have been omitted for brevity (this works but is not
recommended in normal use). The first component matches the
command word, which is arbitrary; the second matches any
argument. As the argument is also arbitrary, any following
component would not depend on <b>aaa</b> being present.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
/$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This is a more
typical use; it is similar, but any following patterns would
only match if <b>aaa</b> was present as the first
argument.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \( \ <br>
/$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo; \ <br>
/$&rsquo;bbb\0&rsquo;/ :&rsquo;compadd bbb&rsquo; \)
\#</b></p>

<p style="margin-left:22%; margin-top: 1em">In this
example, an indefinite number of command arguments may be
completed. Odd arguments are completed as <b>aaa</b> and
even arguments as <b>bbb</b>. Completion fails unless the
set of <b>aaa</b> and <b>bbb</b> arguments before the
current one is matched correctly.</p>


<p style="margin-left:32%; margin-top: 1em"><b>_regex_arguments
_tst /$&rsquo;[^\0]#\0&rsquo;/ \ <br>
\( /$&rsquo;aaa\0&rsquo;/ :&rsquo;compadd aaa&rsquo; \| \
<br>
/$&rsquo;bbb\0&rsquo;/ :&rsquo;compadd bbb&rsquo; \)
\#</b></p>

<p style="margin-left:22%; margin-top: 1em">This is
similar, but either <b>aaa</b> or <b>bbb</b> may be
completed for any argument. In this case <b>_regex_words</b>
could be used to generate a suitable expression for the
arguments.</p>

<p style="margin-left:11%;"><b>_regex_words</b> <i>tag
description spec</i> ...</p>

<p style="margin-left:22%;">This function can be used to
generate arguments for the <b>_regex_arguments</b> command
which may be inserted at any point where a set of rules is
expected. The <i>tag</i> and <i>description</i> give a
standard tag and description pertaining to the current
context. Each <i>spec</i> contains two or three arguments
separated by a colon: note that there is no leading colon in
this case.</p>

<p style="margin-left:22%; margin-top: 1em">Each
<i>spec</i> gives one of a set of words that may be
completed at this point, together with arguments. It is thus
roughly equivalent to the <b>_arguments</b> function when
used in normal (non&minus;regex) completion.</p>

<p style="margin-left:22%; margin-top: 1em">The part of the
<i>spec</i> before the first colon is the word to be
completed. This may contain a <b>*</b>; the entire word,
before and after the <b>*</b> is completed, but only the
text before the <b>*</b> is required for the context to be
matched, so that further arguments may be completed after
the abbreviated form.</p>

<p style="margin-left:22%; margin-top: 1em">The second part
of <i>spec</i> is a description for the word being
completed.</p>

<p style="margin-left:22%; margin-top: 1em">The optional
third part of the <i>spec</i> describes how words following
the one being completed are themselves to be completed. It
will be evaluated in order to avoid problems with quoting.
This means that typically it contains a reference to an
array containing previously generated regex arguments.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;t</b> <i>term</i> specifies a terminator for the
word instead of the usual space. This is handled as an
auto&minus;removable suffix in the manner of the option
<b>&minus;s</b> <i>sep</i> to <b>_values</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The result of
the processing by <b>_regex_words</b> is placed in the array
<b>reply</b>, which should be made local to the calling
function. If the set of words and arguments may be matched
repeatedly, a <b>#</b> should be appended to the generated
array at that point.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
&minus;a reply <br>
_regex_words mydb&minus;commands &rsquo;mydb commands&rsquo;
\ <br>
&rsquo;add:add an entry to mydb:$mydb_add_cmds&rsquo; \ <br>
&rsquo;show:show entries in mydb&rsquo; <br>
_regex_arguments _mydb &quot;$reply[@]&quot; <br>
_mydb &quot;$@&quot;</b></p>

<p style="margin-left:22%; margin-top: 1em">This shows a
completion function for a command <b>mydb</b> which takes
two command arguments, <b>add</b> and <b>show</b>.
<b>show</b> takes no arguments, while the arguments for
<b>add</b> have already been prepared in an array
<b>mydb_add_cmds</b>, quite possibly by a previous call to
<b>_regex_words</b>.</p>

<p style="margin-left:11%;"><b>_requested</b> [
<b>&minus;x</b> ] [ <b>&minus;12VJ</b> ] <i>tag</i> [
<i>name descr</i> [ <i>command args</i> ... ] ]</p>

<p style="margin-left:22%;">This function is called to
decide whether a tag already registered by a call to
<b>_tags</b> (see below) has been requested by the user and
hence completion should be performed for it. It returns
status zero if the tag is requested and non&minus;zero
otherwise. The function is typically used as part of a loop
over different tags as follows:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_tags foo
bar baz <br>
while _tags; do <br>
if _requested foo; then <br>
... # perform completion for foo <br>
fi <br>
... # test the tags bar and baz in the same way <br>
... # exit loop if matches were generated <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that the
test for whether matches were generated is not performed
until the end of the <b>_tags</b> loop. This is so that the
user can set the <b>tag&minus;order</b> style to specify a
set of tags to be completed at the same time.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>name</i>
and <i>descr</i> are given, <b>_requested</b> calls the
<b>_description</b> function with these arguments together
with the options passed to <b>_requested</b>.</p>

<p style="margin-left:22%; margin-top: 1em">If
<i>command</i> is given, the <b>_all_labels</b> function
will be called immediately with the same arguments. In
simple cases this makes it possible to perform the test for
the tag and the matching in one go. For example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
ret=1 <br>
_tags foo bar baz <br>
while _tags; do <br>
_requested foo expl &rsquo;description&rsquo; \ <br>
compadd foobar foobaz &amp;&amp; ret=0 <br>
... <br>
(( ret )) || break <br>
done</b></p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>command</i> is not <b>compadd</b>, it must nevertheless
be prepared to handle the same options.</p>

<p style="margin-left:11%;"><b>_retrieve_cache</b>
<i>cache_identifier</i></p>

<p style="margin-left:22%;">This function retrieves
completion information from the file given by
<i>cache_identifier</i>, stored in a directory specified by
the <b>cache&minus;path</b> style which defaults to
<b>~/.zcompcache</b>. The return status is zero if retrieval
was successful. It will only attempt retrieval if the
<b>use&minus;cache</b> style is set, so you can call this
function without worrying about whether the user wanted to
use the caching layer.</p>

<p style="margin-left:22%; margin-top: 1em">See
<b>_store_cache</b> below for more details.</p>

<p style="margin-left:11%;"><b>_sep_parts</b></p>

<p style="margin-left:22%;">This function is passed
alternating arrays and separators as arguments. The arrays
specify completions for parts of strings to be separated by
the separators. The arrays may be the names of array
parameters or a quoted list of words in parentheses. For
example, with the array &lsquo;<b>hosts=(ftp
news)</b>&rsquo; the call &lsquo;<b>_sep_parts &rsquo;(foo
bar)&rsquo; @ hosts</b>&rsquo; will complete the string
&lsquo;<b>f</b>&rsquo; to &lsquo;<b>foo</b>&rsquo; and the
string &lsquo;<b>b@n</b>&rsquo; to
&lsquo;<b>bar@news</b>&rsquo;.</p>

<p style="margin-left:22%; margin-top: 1em">This function
accepts the <b>compadd</b> options
&lsquo;<b>&minus;V</b>&rsquo;,
&lsquo;<b>&minus;J</b>&rsquo;,
&lsquo;<b>&minus;1</b>&rsquo;,
&lsquo;<b>&minus;2</b>&rsquo;,
&lsquo;<b>&minus;n</b>&rsquo;,
&lsquo;<b>&minus;X</b>&rsquo;,
&lsquo;<b>&minus;M</b>&rsquo;,
&lsquo;<b>&minus;P</b>&rsquo;,
&lsquo;<b>&minus;S</b>&rsquo;,
&lsquo;<b>&minus;r</b>&rsquo;,
&lsquo;<b>&minus;R</b>&rsquo;, and
&lsquo;<b>&minus;q</b>&rsquo; and passes them on to the
<b>compadd</b> builtin used to add the matches.</p>

<p style="margin-left:11%;"><b>_setup</b> <i>tag</i> [
<i>group</i> ]</p>

<p style="margin-left:22%;">This function sets up the
special parameters used by the completion system
appropriately for the <i>tag</i> given as the first
argument. It uses the styles <b>list&minus;colors</b>,
<b>list&minus;packed</b>,
<b>list&minus;rows&minus;first</b>,
<b>last&minus;prompt</b>, <b>accept&minus;exact</b>,
<b>menu</b> and <b>force&minus;list</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The optional
<i>group</i> supplies the name of the group in which the
matches will be placed. If it is not given, the <i>tag</i>
is used as the group name.</p>

<p style="margin-left:22%; margin-top: 1em">This function
is called automatically from <b>_description</b> and hence
is not normally called explicitly.</p>

<p style="margin-left:11%;"><b>_store_cache</b>
<i>cache_identifier params</i> ...</p>

<p style="margin-left:22%;">This function, together with
<b>_retrieve_cache</b> and <b>_cache_invalid</b>, implements
a caching layer which can be used in any completion
function. Data obtained by costly operations are stored in
parameters; this function then dumps the values of those
parameters to a file. The data can then be retrieved quickly
from that file via <b>_retrieve_cache</b>, even in different
instances of the shell.</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>cache_identifier</i> specifies the file which the data
should be dumped to. The file is stored in a directory
specified by the <b>cache&minus;path</b> style which
defaults to <b>~/.zcompcache</b>. The remaining
<i>params</i> arguments are the parameters to dump to the
file.</p>

<p style="margin-left:22%; margin-top: 1em">The return
status is zero if storage was successful. The function will
only attempt storage if the <b>use&minus;cache</b> style is
set, so you can call this function without worrying about
whether the user wanted to use the caching layer.</p>

<p style="margin-left:22%; margin-top: 1em">The completion
function may avoid calling <b>_retrieve_cache</b> when it
already has the completion data available as parameters.
However, in that case it should call <b>_cache_invalid</b>
to check whether the data in the parameters and in the cache
are still valid.</p>

<p style="margin-left:22%; margin-top: 1em">See the
_perl_modules completion function for a simple example of
the usage of the caching layer.</p>

<p style="margin-left:11%;"><b>_tags</b> [ [
<b>&minus;C</b> <i>name</i> ] <i>tags</i> ... ]</p>

<p style="margin-left:22%;">If called with arguments, these
are taken to be the names of tags valid for completions in
the current context. These tags are stored internally and
sorted by using the <b>tag&minus;order</b> style.</p>

<p style="margin-left:22%; margin-top: 1em">Next,
<b>_tags</b> is called repeatedly without arguments from the
same completion function. This successively selects the
first, second, etc. set of tags requested by the user. The
return status is zero if at least one of the tags is
requested and non&minus;zero otherwise. To test if a
particular tag is to be tried, the <b>_requested</b>
function should be called (see above).</p>

<p style="margin-left:22%; margin-top: 1em">If
&lsquo;<b>&minus;C</b> <i>name</i>&rsquo; is given,
<i>name</i> is temporarily stored in the argument field (the
fifth) of the context in the <b>curcontext</b> parameter
during the call to <b>_tags</b>; the field is restored on
exit. This allows <b>_tags</b> to use a more specific
context without having to change and reset the
<b>curcontext</b> parameter (which has the same effect).</p>

<p style="margin-left:11%;"><b>_values</b> [
<b>&minus;O</b> <i>name</i> ] [ <b>&minus;s</b> <i>sep</i> ]
[ <b>&minus;S</b> <i>sep</i> ] [ <b>&minus;wC</b> ] <i>desc
spec</i> ...</p>

<p style="margin-left:22%;">This is used to complete
arbitrary keywords (values) and their arguments, or lists of
such combinations.</p>

<p style="margin-left:22%; margin-top: 1em">If the first
argument is the option &lsquo;<b>&minus;O</b>
<i>name</i>&rsquo;, it will be used in the same way as by
the <b>_arguments</b> function. In other words, the elements
of the <i>name</i> array will be passed to <b>compadd</b>
when executing an action.</p>

<p style="margin-left:22%; margin-top: 1em">If the first
argument (or the first argument after &lsquo;<b>&minus;O</b>
<i>name</i>&rsquo;) is &lsquo;<b>&minus;s</b>&rsquo;, the
next argument is used as the character that separates
multiple values. This character is automatically added after
each value in an auto&minus;removable fashion (see below);
all values completed by &lsquo;<b>_values
&minus;s</b>&rsquo; appear in the same word on the command
line, unlike completion using <b>_arguments</b>. If this
option is not present, only a single value will be completed
per word.</p>

<p style="margin-left:22%; margin-top: 1em">Normally,
<b>_values</b> will only use the current word to determine
which values are already present on the command line and
hence are not to be completed again. If the <b>&minus;w</b>
option is given, other arguments are examined as well.</p>

<p style="margin-left:22%; margin-top: 1em">The first
non&minus;option argument is used as a string to print as a
description before listing the values.</p>

<p style="margin-left:22%; margin-top: 1em">All other
arguments describe the possible values and their arguments
in the same format used for the description of options by
the <b>_arguments</b> function (see above). The only
differences are that no minus or plus sign is required at
the beginning, values can have only one argument, and the
forms of action beginning with an equal sign are not
supported.</p>

<p style="margin-left:22%; margin-top: 1em">The character
separating a value from its argument can be set using the
option <b>&minus;S</b> (like <b>&minus;s</b>, followed by
the character to use as the separator in the next argument).
By default the equals sign will be used as the separator
between values and arguments.</p>

<p style="margin-left:22%; margin-top: 1em">Example:</p>

<p style="margin-left:32%; margin-top: 1em"><b>_values
&minus;s , &rsquo;description&rsquo; \ <br>
&rsquo;*foo[bar]&rsquo; \ <br>
&rsquo;(two)*one[number]:first count:&rsquo; \ <br>
&rsquo;two[another number]::second count:(1 2
3)&rsquo;</b></p>

<p style="margin-left:22%; margin-top: 1em">This describes
three possible values: &lsquo;<b>foo</b>&rsquo;,
&lsquo;<b>one</b>&rsquo;, and &lsquo;<b>two</b>&rsquo;. The
first is described as &lsquo;<b>bar</b>&rsquo;, takes no
argument and may appear more than once. The second is
described as &lsquo;<b>number</b>&rsquo;, may appear more
than once, and takes one mandatory argument described as
&lsquo;<b>first count</b>&rsquo;; no action is specified, so
it will not be completed. The &lsquo;<b>(two)</b>&rsquo; at
the beginning says that if the value
&lsquo;<b>one</b>&rsquo; is on the line, the value
&lsquo;<b>two</b>&rsquo; will no longer be considered a
possible completion. Finally, the last value
(&lsquo;<b>two</b>&rsquo;) is described as &lsquo;<b>another
number</b>&rsquo; and takes an optional argument described
as &lsquo;<b>second count</b>&rsquo; for which the
completions (to appear after an &lsquo;<b>=</b>&rsquo;) are
&lsquo;<b>1</b>&rsquo;, &lsquo;<b>2</b>&rsquo;, and
&lsquo;<b>3</b>&rsquo;. The <b>_values</b> function will
complete lists of these values separated by commas.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_arguments</b>, this function temporarily adds another
context name component to the arguments element (the fifth)
of the current context while executing the <i>action</i>.
Here this name is just the name of the value for which the
argument is completed.</p>

<p style="margin-left:22%; margin-top: 1em">The style
<b>verbose</b> is used to decide if the descriptions for the
values (but not those for the arguments) should be
printed.</p>

<p style="margin-left:22%; margin-top: 1em">The associative
array <b>val_args</b> is used to report values and their
arguments; this works similarly to the <b>opt_args</b>
associative array used by <b>_arguments</b>. Hence the
function calling <b>_values</b> should declare the local
parameters <b>state</b>, <b>state_descr</b>, <b>line</b>,
<b>context</b> and <b>val_args</b>:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local
context state state_descr line <br>
typeset &minus;A val_args</b></p>

<p style="margin-left:22%; margin-top: 1em">when using an
action of the form
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo;. With this
function the <b>context</b> parameter will be set to the
name of the value whose argument is to be completed. Note
that for <b>_values</b>, the <b>state</b> and
<b>state_descr</b> are scalars rather than arrays. Only a
single matching state is returned.</p>

<p style="margin-left:22%; margin-top: 1em">Note also that
<b>_values</b> normally adds the character used as the
separator between values as an auto&minus;removable suffix
(similar to a &lsquo;<b>/</b>&rsquo; after a directory).
However, this is not possible for a
&lsquo;<b>&minus;&gt;</b><i>string</i>&rsquo; action as the
matches for the argument are generated by the calling
function. To get the usual behaviour, the calling function
can add the separator <i>x</i> as a suffix by passing the
options &lsquo;<b>&minus;qS</b> <i>x</i>&rsquo; either
directly or indirectly to <b>compadd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The option
<b>&minus;C</b> is treated in the same way as it is by
<b>_arguments</b>. In that case the parameter
<b>curcontext</b> should be made local instead of
<b>context</b> (as described above).</p>

<p style="margin-left:11%;"><b>_wanted</b> [
<b>&minus;x</b> ] [ <b>&minus;C</b> <i>name</i> ] [
<b>&minus;12VJ</b> ] <i>tag name descr command args</i>
...</p>

<p style="margin-left:22%;">In many contexts, completion
can only generate one particular set of matches, usually
corresponding to a single tag. However, it is still
necessary to decide whether the user requires matches of
this type. This function is useful in such a case.</p>

<p style="margin-left:22%; margin-top: 1em">The arguments
to <b>_wanted</b> are the same as those to
<b>_requested</b>, i.e. arguments to be passed to
<b>_description</b>. However, in this case the
<i>command</i> is not optional; all the processing of tags,
including the loop over both tags and tag labels and the
generation of matches, is carried out automatically by
<b>_wanted</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Hence to offer
only one tag and immediately add the corresponding matches
with the given description:</p>

<p style="margin-left:32%; margin-top: 1em"><b>local expl
<br>
_wanted tag expl &rsquo;description&rsquo; \ <br>
compadd matches...</b></p>

<p style="margin-left:22%; margin-top: 1em">Note that, as
for <b>_requested</b>, the <i>command</i> must be able to
accept options to be passed down to <b>compadd</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Like
<b>_tags</b> this function supports the <b>&minus;C</b>
option to give a different name for the argument context
field. The <b>&minus;x</b> option has the same meaning as
for <b>_description</b>.</p>

<h2>COMPLETION DIRECTORIES
<a name="COMPLETION DIRECTORIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In the source
distribution, the files are contained in various
subdirectories of the <b>Completion</b> directory. They may
have been installed in the same structure, or into one
single function directory. The following is a description of
the files found in the original directory structure. If you
wish to alter an installed file, you will need to copy it to
some directory which appears earlier in your <b>fpath</b>
than the standard directory where it appears.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Base</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The core functions and special completion widgets
automatically bound to keys. You will certainly need most of
these, though will probably not need to alter them. Many of
these are documented above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Zsh</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Functions for completing arguments of shell builtin
commands and utility functions for this. Some of these are
also used by functions from the <b>Unix</b> directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>Unix</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Functions for completing arguments of external commands
and suites of commands. They may need modifying for your
system, although in many cases some attempt is made to
decide which version of a command is present. For example,
completion for the <b>mount</b> command tries to determine
the system it is running on, while completion for many other
utilities try to decide whether the GNU version of the
command is in use, and hence whether the
<b>&minus;&minus;help</b> option is supported.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>X</b>, <b>AIX</b>,
<b>BSD</b>, ...</p>

<p style="margin-left:22%;">Completion and utility function
for commands available only on some systems. These are not
arranged hierarchically, so, for example, both the
<b>Linux</b> and <b>Debian</b> directories, as well as the
<b>X</b> directory, may be useful on your system.</p>
<hr>
</body>
</html>
