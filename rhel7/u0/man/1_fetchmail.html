<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 01:47:53 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>fetchmail</title>

</head>
<body>

<h1 align="center">fetchmail</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL OPERATION">GENERAL OPERATION</a><br>
<a href="#USER AUTHENTICATION AND ENCRYPTION">USER AUTHENTICATION AND ENCRYPTION</a><br>
<a href="#POP3 VARIANTS">POP3 VARIANTS</a><br>
<a href="#ALTERNATE AUTHENTICATION FORMS">ALTERNATE AUTHENTICATION FORMS</a><br>
<a href="#DAEMON MODE">DAEMON MODE</a><br>
<a href="#ADMINISTRATIVE OPTIONS">ADMINISTRATIVE OPTIONS</a><br>
<a href="#RETRIEVAL FAILURE MODES">RETRIEVAL FAILURE MODES</a><br>
<a href="#SPAM FILTERING">SPAM FILTERING</a><br>
<a href="#SMTP/ESMTP ERROR HANDLING">SMTP/ESMTP ERROR HANDLING</a><br>
<a href="#THE RUN CONTROL FILE">THE RUN CONTROL FILE</a><br>
<a href="#DEBUGGING FETCHMAIL">DEBUGGING FETCHMAIL</a><br>
<a href="#INTERACTION WITH RFC 822">INTERACTION WITH RFC 822</a><br>
<a href="#CONFIGURATION EXAMPLES">CONFIGURATION EXAMPLES</a><br>
<a href="#THE USE AND ABUSE OF MULTIDROP MAILBOXES">THE USE AND ABUSE OF MULTIDROP MAILBOXES</a><br>
<a href="#SOCKS">SOCKS</a><br>
<a href="#EXIT CODES">EXIT CODES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br>
<a href="#SIGNALS">SIGNALS</a><br>
<a href="#BUGS, LIMITATIONS, AND KNOWN PROBLEMS">BUGS, LIMITATIONS, AND KNOWN PROBLEMS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#APPLICABLE STANDARDS">APPLICABLE STANDARDS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">fetchmail
&minus; fetch mail from a POP, IMAP, ETRN, or ODMR-capable
server</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>fetchmail</b>
[<i>option...</i>] [<i>mailserver...</i>] <b><br>
fetchmailconf</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>fetchmail</b>
is a mail-retrieval and forwarding utility; it fetches mail
from remote mailservers and forwards it to your local
(client) machine&rsquo;s delivery system. You can then
handle the retrieved mail using normal mail user agents such
as <b>mutt</b>(1), <b>elm</b>(1) or <b>Mail</b>(1). The
<b>fetchmail</b> utility can be run in a daemon mode to
repeatedly poll one or more systems at a specified
interval.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>fetchmail</b> program can gather mail from servers
supporting any of the common mail-retrieval protocols: POP2
(legacy, to be removed from future release), POP3, IMAP2bis,
IMAP4, and IMAP4rev1. It can also use the ESMTP ETRN
extension and ODMR. (The RFCs describing all these protocols
are listed at the end of this manual page.)</p>

<p style="margin-left:11%; margin-top: 1em">While
<b>fetchmail</b> is primarily intended to be used over
on-demand TCP/IP links (such as SLIP or PPP connections), it
may also be useful as a message transfer agent for sites
which refuse for security reasons to permit
(sender-initiated) SMTP transactions with sendmail.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SUPPORT,
TROUBLESHOOTING</b> <br>
For troubleshooting, tracing and debugging, you need to
increase fetchmail&rsquo;s verbosity to actually see what
happens. To do that, please run <b>both of the two following
commands, adding all of the options you&rsquo;d normally
use.</b></p>

<p style="margin-left:22%; margin-top: 1em">env LC_ALL=C
fetchmail &minus;V &minus;v &minus;&minus;nodetach
&minus;&minus;nosyslog</p>

<p style="margin-left:22%; margin-top: 1em">(This command
line prints in English how fetchmail understands your
configuration.)</p>

<p style="margin-left:22%; margin-top: 1em">env LC_ALL=C
fetchmail &minus;vvv &minus;&minus;nodetach
&minus;&minus;nosyslog</p>

<p style="margin-left:22%; margin-top: 1em">(This command
line actually runs fetchmail with verbose English
output.)</p>

<p style="margin-left:11%; margin-top: 1em">Also see
<a href="http://fetchmail.berlios.de/fetchmail-FAQ.html#G3">item #G3 in fetchmail's FAQ</a></p>

<p style="margin-left:11%; margin-top: 1em">You can omit
the LC_ALL=C part above if you want output in the local
language (if supported). However if you are posting to
mailing lists, please leave it in. The maintainers do not
necessarily understand your language, please use
English.</p>


<p style="margin-left:11%; margin-top: 1em"><b>CONCEPTS</b>
<br>
If <b>fetchmail</b> is used with a POP or an IMAP server
(but not with ETRN or ODMR), it has two fundamental modes of
operation for each user account from which it retrieves
mail: <i>singledrop</i>- and <i>multidrop</i>-mode. <br>
In singledrop-mode,</p>

<p style="margin-left:22%;"><b>fetchmail</b> assumes that
all messages in the user&rsquo;s account (mailbox) are
intended for a single recipient. The identity of the
recipient will either default to the local user currently
executing <b>fetchmail</b>, or will need to be explicitly
specified in the configuration file.</p>


<p style="margin-left:22%; margin-top: 1em"><b>fetchmail</b>
uses singledrop-mode when the fetchmailrc configuration
contains at most a single local user specification for a
given server account.</p>

<p style="margin-left:11%;">In multidrop-mode,</p>

<p style="margin-left:22%;"><b>fetchmail</b> assumes that
the mail server account actually contains mail intended for
any number of different recipients. Therefore,
<b>fetchmail</b> must attempt to deduce the proper
&quot;envelope recipient&quot; from the mail headers of each
message. In this mode of operation, <b>fetchmail</b> almost
resembles a mail transfer agent (MTA).</p>

<p style="margin-left:22%; margin-top: 1em">Note that
neither the POP nor IMAP protocols were intended for use in
this fashion, and hence envelope information is often not
directly available. The ISP must stores the envelope
information in some message header <b>and</b>. The ISP must
also store one copy of the message per recipient. If either
of the conditions is not fulfilled, this process is
unreliable, because <b>fetchmail</b> must then resort to
guessing the true envelope recipient(s) of a message. This
usually fails for mailing list messages and Bcc:d mail, or
mail for multiple recipients in your domain.</p>


<p style="margin-left:22%; margin-top: 1em"><b>fetchmail</b>
uses multidrop-mode when more than one local user and/or a
wildcard is specified for a particular server account in the
configuration file.</p>

<p style="margin-left:11%;">In ETRN and ODMR modes,</p>

<p style="margin-left:22%;">these considerations do not
apply, as these protocols are based on SMTP, which provides
explicit envelope recipient information. These protocols
always support multiple recipients.</p>

<p style="margin-left:11%; margin-top: 1em">As each message
is retrieved, <b>fetchmail</b> normally delivers it via SMTP
to port 25 on the machine it is running on (localhost), just
as though it were being passed in over a normal TCP/IP link.
<b>fetchmail</b> provides the SMTP server with an envelope
recipient derived in the manner described previously. The
mail will then be delivered according to your MTA&rsquo;s
rules (the Mail Transfer Agent is usually
<b>sendmail</b>(8), <b>exim</b>(8), or <b>postfix</b>(8)).
Invoking your system&rsquo;s MDA (Mail Delivery Agent) is
the duty of your MTA. All the delivery-control mechanisms
(such as <i>.forward</i> files) normally available through
your system MTA and local delivery agents will therefore be
applied as usual.</p>

<p style="margin-left:11%; margin-top: 1em">If your
fetchmail configuration sets a local MDA (see the
&minus;&minus;mda option), it will be used directly instead
of talking SMTP to port 25.</p>

<p style="margin-left:11%; margin-top: 1em">If the program
<b>fetchmailconf</b> is available, it will assist you in
setting up and editing a fetchmailrc configuration. It runs
under the X window system and requires that the language
Python and the Tk toolkit (with Python bindings) be present
on your system. If you are first setting up fetchmail for
single-user mode, it is recommended that you use Novice
mode. Expert mode provides complete control of fetchmail
configuration, including the multidrop features. In either
case, the &rsquo;Autoprobe&rsquo; button will tell you the
most capable protocol a given mailserver supports, and warn
you of potential problems with that server.</p>

<h2>GENERAL OPERATION
<a name="GENERAL OPERATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The behavior of
<b>fetchmail</b> is controlled by command-line options and a
run control file, <i>~/.fetchmailrc</i>, the syntax of which
we describe in a later section (this file is what the
<b>fetchmailconf</b> program edits). Command-line options
override <i>~/.fetchmailrc</i> declarations.</p>

<p style="margin-left:11%; margin-top: 1em">Each server
name that you specify following the options on the command
line will be queried. If you don&rsquo;t specify any servers
on the command line, each &rsquo;poll&rsquo; entry in your
<i>~/.fetchmailrc</i> file will be queried.</p>

<p style="margin-left:11%; margin-top: 1em">To facilitate
the use of <b>fetchmail</b> in scripts and pipelines, it
returns an appropriate exit code upon termination -- see
EXIT CODES below.</p>

<p style="margin-left:11%; margin-top: 1em">The following
options modify the behavior of <b>fetchmail</b>. It is
seldom necessary to specify any of these once you have a
working <i>.fetchmailrc</i> file set up.</p>

<p style="margin-left:11%; margin-top: 1em">Almost all
options have a corresponding keyword which can be used to
declare them in a <i>.fetchmailrc</i> file.</p>

<p style="margin-left:11%; margin-top: 1em">Some special
options are not covered here, but are documented instead in
sections on AUTHENTICATION and DAEMON MODE which follow.</p>

<p style="margin-left:11%; margin-top: 1em"><b>General
Options <br>
&minus;V | &minus;&minus;version</b></p>

<p style="margin-left:22%;">Displays the version
information for your copy of <b>fetchmail</b>. No mail fetch
is performed. Instead, for each server specified, all the
option information that would be computed if
<b>fetchmail</b> were connecting to that server is
displayed. Any non-printables in passwords or other string
names are shown as backslashed C-like escape sequences. This
option is useful for verifying that your options are set the
way you want them.</p>

<p style="margin-left:11%;"><b>&minus;c |
&minus;&minus;check</b></p>

<p style="margin-left:22%;">Return a status code to
indicate whether there is mail waiting, without actually
fetching or deleting mail (see EXIT CODES below). This
option turns off daemon mode (in which it would be useless).
It doesn&rsquo;t play well with queries to multiple sites,
and doesn&rsquo;t work with ETRN or ODMR. It will return a
false positive if you leave read but undeleted mail in your
server mailbox and your fetch protocol can&rsquo;t tell kept
messages from new ones. This means it will work with IMAP,
not work with POP2, and may occasionally flake out under
POP3.</p>

<p style="margin-left:11%;"><b>&minus;s |
&minus;&minus;silent</b></p>

<p style="margin-left:22%;">Silent mode. Suppresses all
progress/status messages that are normally echoed to
standard output during a fetch (but does not suppress actual
error messages). The &minus;&minus;verbose option overrides
this.</p>

<p style="margin-left:11%;"><b>&minus;v |
&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">Verbose mode. All control
messages passed between <b>fetchmail</b> and the mailserver
are echoed to stdout. Overrides &minus;&minus;silent.
Doubling this option (&minus;v &minus;v) causes extra
diagnostic information to be printed.</p>


<p style="margin-left:11%;"><b>&minus;&minus;nosoftbounce</b></p>

<p style="margin-left:22%;">(since v6.3.10, Keyword: set no
softbounce, since v6.3.10) <br>
Hard bounce mode. All permanent delivery errors cause
messages to be deleted from the upstream server, see
&quot;no softbounce&quot; below.</p>


<p style="margin-left:11%;"><b>&minus;&minus;softbounce</b></p>

<p style="margin-left:22%;">(since v6.3.10, Keyword: set
softbounce, since v6.3.10) <br>
Soft bounce mode. All permanent delivery errors cause
messages to be left on the upstream server if the protocol
supports that. Default to match historic fetchmail
documentation, to be changed to hard bounce mode in the next
fetchmail release.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Disposal
Options <br>
&minus;a | &minus;&minus;all | (since v6.3.3)
&minus;&minus;fetchall</b></p>

<p style="margin-left:22%;">(Keyword: fetchall, since v3.0)
<br>
Retrieve both old (seen) and new messages from the
mailserver. The default is to fetch only messages the server
has not marked seen. Under POP3, this option also forces the
use of RETR rather than TOP. Note that POP2 retrieval
behaves as though &minus;&minus;all is always on (see
RETRIEVAL FAILURE MODES below) and this option does not work
with ETRN or ODMR. While the &minus;a and &minus;&minus;all
command-line and fetchall rcfile options have been supported
for a long time, the &minus;&minus;fetchall command-line
option was added in v6.3.3.</p>

<p style="margin-left:11%;"><b>&minus;k |
&minus;&minus;keep</b></p>

<p style="margin-left:22%;">(Keyword: keep) <br>
Keep retrieved messages on the remote mailserver. Normally,
messages are deleted from the folder on the mailserver after
they have been retrieved. Specifying the <b>keep</b> option
causes retrieved messages to remain in your folder on the
mailserver. This option does not work with ETRN or ODMR. If
used with POP3, it is recommended to also specify the
&minus;&minus;uidl option or uidl keyword.</p>

<p style="margin-left:11%;"><b>&minus;K |
&minus;&minus;nokeep</b></p>

<p style="margin-left:22%;">(Keyword: nokeep) <br>
Delete retrieved messages from the remote mailserver. This
option forces retrieved mail to be deleted. It may be useful
if you have specified a default of <b>keep</b> in your
<i>.fetchmailrc</i>. This option is forced on with ETRN and
ODMR.</p>

<p style="margin-left:11%;"><b>&minus;F |
&minus;&minus;flush</b></p>

<p style="margin-left:22%;">(Keyword: flush) <br>
POP3/IMAP only. This is a dangerous option and can cause
mail loss when used improperly. It deletes old (seen)
messages from the mailserver before retrieving new messages.
<b>Warning:</b> This can cause mail loss if you check your
mail with other clients than fetchmail, and cause fetchmail
to delete a message it had never fetched before. It can also
cause mail loss if the mail server marks the message seen
after retrieval (IMAP2 servers). You should probably not use
this option in your configuration file. If you use it with
POP3, you must use the &rsquo;uidl&rsquo; option. What you
probably want is the default setting: if you don&rsquo;t
specify &rsquo;&minus;k&rsquo;, then fetchmail will
automatically delete messages after successful delivery.</p>


<p style="margin-left:11%;"><b>&minus;&minus;limitflush</b></p>

<p style="margin-left:22%;">POP3/IMAP only, since version
6.3.0. Delete oversized messages from the mailserver before
retrieving new messages. The size limit should be separately
specified with the &minus;&minus;limit option. This option
does not work with ETRN or ODMR.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Protocol and
Query Options <br>
&minus;p &lt;proto&gt; | &minus;&minus;proto &lt;proto&gt; |
&minus;&minus;protocol &lt;proto&gt;</b></p>

<p style="margin-left:22%;">(Keyword: proto[col]) <br>
Specify the protocol to use when communicating with the
remote mailserver. If no protocol is specified, the default
is AUTO. <b>proto</b> may be one of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>AUTO</p></td>
<td width="4%"></td>
<td width="68%">


<p>Tries IMAP, POP3, and POP2 (skipping any of these for
which support has not been compiled in).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>POP2</p></td>
<td width="4%"></td>
<td width="68%">


<p>Post Office Protocol 2 (legacy, to be removed from
future release)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>POP3</p></td>
<td width="4%"></td>
<td width="68%">


<p>Post Office Protocol 3</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>APOP</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use POP3 with old-fashioned MD5-challenge
authentication. Considered not resistant to
man-in-the-middle attacks.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>RPOP</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use POP3 with RPOP authentication.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>KPOP</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use POP3 with Kerberos V4 authentication on port
1109.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>SDPS</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use POP3 with Demon Internet&rsquo;s SDPS
extensions.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>IMAP</p></td>
<td width="4%"></td>
<td width="68%">


<p>IMAP2bis, IMAP4, or IMAP4rev1 (<b>fetchmail</b>
automatically detects their capabilities).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>ETRN</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use the ESMTP ETRN option.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p>ODMR</p></td>
<td width="4%"></td>
<td width="68%">


<p>Use the the On-Demand Mail Relay ESMTP profile.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">All these
alternatives work in basically the same way (communicating
with standard server daemons to fetch mail already delivered
to a mailbox on the server) except ETRN and ODMR. The ETRN
mode allows you to ask a compliant ESMTP server (such as BSD
sendmail at release 8.8.0 or higher) to immediately open a
sender-SMTP connection to your client machine and begin
forwarding any items addressed to your client machine in the
server&rsquo;s queue of undelivered mail. The ODMR mode
requires an ODMR-capable server and works similarly to ETRN,
except that it does not require the client machine to have a
static DNS. <b><br>
&minus;U | &minus;&minus;uidl</b></p>

<p style="margin-left:22%;">(Keyword: uidl) <br>
Force UIDL use (effective only with POP3). Force client-side
tracking of &rsquo;newness&rsquo; of messages (UIDL stands
for &quot;unique ID listing&quot; and is described in
RFC1939). Use with &rsquo;keep&rsquo; to use a mailbox as a
baby news drop for a group of users. The fact that seen
messages are skipped is logged, unless error logging is done
through syslog while running in daemon mode. Note that
fetchmail may automatically enable this option depending on
upstream server capabilities. Note also that this option may
be removed and forced enabled in a future fetchmail version.
See also: &minus;&minus;idfile.</p>

<p style="margin-left:11%;"><b>&minus;&minus;idle (since
6.3.3)</b></p>

<p style="margin-left:22%;">(Keyword: idle, since before
6.0.0) <br>
Enable IDLE use (effective only with IMAP). Note that this
works with only one folder at a given time. While the idle
rcfile keyword had been supported for a long time, the
&minus;&minus;idle command-line option was added in version
6.3.3. IDLE use means that fetchmail tells the IMAP server
to send notice of new messages, so they can be retrieved
sooner than would be possible with regular polls.</p>

<p style="margin-left:11%;"><b>&minus;P &lt;portnumber&gt;
| &minus;&minus;service &lt;servicename&gt;</b></p>

<p style="margin-left:22%;">(Keyword: service) Since
version 6.3.0. <br>
The service option permits you to specify a service name to
connect to. You can specify a decimal port number here, if
your services database lacks the required service-port
assignments. See the FAQ item R12 and the &minus;&minus;ssl
documentation for details. This replaces the older
&minus;&minus;port option.</p>

<p style="margin-left:11%;"><b>&minus;&minus;port
&lt;portnumber&gt;</b></p>

<p style="margin-left:22%;">(Keyword: port) <br>
Obsolete version of &minus;&minus;service that does not take
service names. <b>Note:</b> this option may be removed from
a future version.</p>

<p style="margin-left:11%;"><b>&minus;&minus;principal
&lt;principal&gt;</b></p>

<p style="margin-left:22%;">(Keyword: principal) <br>
The principal option permits you to specify a service
principal for mutual authentication. This is applicable to
POP3 or IMAP with Kerberos 4 authentication only. It does
not apply to Kerberos 5 or GSSAPI. This option may be
removed in a future fetchmail version.</p>

<p style="margin-left:11%;"><b>&minus;t &lt;seconds&gt; |
&minus;&minus;timeout &lt;seconds&gt;</b></p>

<p style="margin-left:22%;">(Keyword: timeout) <br>
The timeout option allows you to set a server-nonresponse
timeout in seconds. If a mailserver does not send a greeting
message or respond to commands for the given number of
seconds, <b>fetchmail</b> will drop the connection to it.
Without such a timeout <b>fetchmail</b> might hang until the
TCP connection times out, trying to fetch mail from a down
host, which may be very long. This would be particularly
annoying for a <b>fetchmail</b> running in the background.
There is a default timeout which fetchmail&nbsp;&minus;V
will report. If a given connection receives too many
timeouts in succession, fetchmail will consider it wedged
and stop retrying. The calling user will be notified by
email if this happens.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
fetchmail 6.3.10, the SMTP client uses the recommended
minimum timeouts from RFC-5321 while waiting for the
SMTP/LMTP server it is talking to. You can raise the
timeouts even more, but you cannot shorten them. This is to
avoid a painful situation where fetchmail has been
configured with a short timeout (a minute or less), ships a
long message (many MBytes) to the local MTA, which then
takes longer than timeout to respond &quot;OK&quot;, which
it eventually will; that would mean the mail gets delivered
properly, but fetchmail cannot notice it and will thus
refetch this big message over and over again.</p>

<p style="margin-left:11%;"><b>&minus;&minus;plugin
&lt;command&gt;</b></p>

<p style="margin-left:22%;">(Keyword: plugin) <br>
The plugin option allows you to use an external program to
establish the TCP connection. This is useful if you want to
use ssh, or need some special firewalling setup. The program
will be looked up in $PATH and can optionally be passed the
hostname and port as arguments using &quot;%h&quot; and
&quot;%p&quot; respectively (note that the interpolation
logic is rather primitive, and these tokens must be bounded
by whitespace or beginning of string or end of string).
Fetchmail will write to the plugin&rsquo;s stdin and read
from the plugin&rsquo;s stdout.</p>

<p style="margin-left:11%;"><b>&minus;&minus;plugout
&lt;command&gt;</b></p>

<p style="margin-left:22%;">(Keyword: plugout) <br>
Identical to the plugin option above, but this one is used
for the SMTP connections.</p>

<p style="margin-left:11%;"><b>&minus;r &lt;name&gt; |
&minus;&minus;folder &lt;name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: folder[s]) <br>
Causes a specified non-default mail folder on the mailserver
(or comma-separated list of folders) to be retrieved. The
syntax of the folder name is server-dependent. This option
is not available under POP3, ETRN, or ODMR.</p>


<p style="margin-left:11%;"><b>&minus;&minus;tracepolls</b></p>

<p style="margin-left:22%;">(Keyword: tracepolls) <br>
Tell fetchmail to poll trace information in the form
&rsquo;polling account %s&rsquo; and &rsquo;folder %s&rsquo;
to the Received line it generates, where the %s parts are
replaced by the user&rsquo;s remote name, the poll label,
and the folder (mailbox) where available (the Received
header also normally includes the server&rsquo;s true name).
This can be used to facilitate mail filtering based on the
account it is being received from. The folder information is
written only since version 6.3.4.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>&minus;&minus;ssl</b></p></td>
<td width="4%"></td>
<td width="21%">


<p>(Keyword: ssl)</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:22%;">Causes the connection to the
mail server to be encrypted via SSL. Connect to the server
using the specified base protocol over a connection secured
by SSL. This option defeats opportunistic starttls
negotiation. It is highly recommended to use
&minus;&minus;sslproto &rsquo;SSL3&rsquo;
&minus;&minus;sslcertck to validate the certificates
presented by the server and defeat the obsolete SSLv2
negotiation. More information is available in the
<i>README.SSL</i> file that ships with fetchmail.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
fetchmail may still try to negotiate SSL through starttls
even if this option is omitted. You can use the
&minus;&minus;sslproto option to defeat this behavior or
tell fetchmail to negotiate a particular SSL protocol.</p>

<p style="margin-left:22%; margin-top: 1em">If no port is
specified, the connection is attempted to the well known
port of the SSL version of the base protocol. This is
generally a different port than the port used by the base
protocol. For IMAP, this is port 143 for the clear protocol
and port 993 for the SSL secured protocol, for POP3, it is
port 110 for the clear text and port 995 for the encrypted
variant.</p>

<p style="margin-left:22%; margin-top: 1em">If your system
lacks the corresponding entries from /etc/services, see the
&minus;&minus;service option and specify the numeric port
number as given in the previous paragraph (unless your ISP
had directed you to different ports, which is uncommon
however).</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslcert
&lt;name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslcert) <br>
For certificate-based client authentication. Some SSL
encrypted servers require client side keys and certificates
for authentication. In most cases, this is optional. This
specifies the location of the public key certificate to be
presented to the server at the time the SSL session is
established. It is not required (but may be provided) if the
server does not require it. It may be the same file as the
private key (combined key and certificate file) but this is
not recommended. Also see &minus;&minus;sslkey below.</p>

<p style="margin-left:22%; margin-top: 1em"><b>NOTE:</b> If
you use client authentication, the user name is fetched from
the certificate&rsquo;s CommonName and overrides the name
set with &minus;&minus;user.</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslkey
&lt;name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslkey) <br>
Specifies the file name of the client side private SSL key.
Some SSL encrypted servers require client side keys and
certificates for authentication. In most cases, this is
optional. This specifies the location of the private key
used to sign transactions with the server at the time the
SSL session is established. It is not required (but may be
provided) if the server does not require it. It may be the
same file as the public key (combined key and certificate
file) but this is not recommended.</p>

<p style="margin-left:22%; margin-top: 1em">If a password
is required to unlock the key, it will be prompted for at
the time just prior to establishing the session to the
server. This can cause some complications in daemon
mode.</p>

<p style="margin-left:22%; margin-top: 1em">Also see
&minus;&minus;sslcert above.</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslproto
&lt;name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslproto) <br>
Forces an SSL/TLS protocol. Possible values are
<b>&rsquo;&rsquo;</b>, &rsquo;<b>SSL2</b>&rsquo; (not
supported on all systems), &rsquo;<b>SSL23</b>&rsquo;, (use
of these two values is discouraged and should only be used
as a last resort) &rsquo;<b>SSL3</b>&rsquo;, and
&rsquo;<b>TLS1</b>&rsquo;. The default behaviour if this
option is unset is: for connections without
&minus;&minus;ssl, use &rsquo;<b>TLS1</b>&rsquo; so that
fetchmail will opportunistically try STARTTLS negotiation
with TLS1. You can configure this option explicitly if the
default handshake (TLS1 if &minus;&minus;ssl is not used)
does not work for your server.</p>

<p style="margin-left:22%; margin-top: 1em">Use this option
with &rsquo;<b>TLS1</b>&rsquo; value to enforce a STARTTLS
connection. In this mode, it is highly recommended to also
use &minus;&minus;sslcertck (see below). Note that this will
then cause fetchmail v6.3.19 to force STARTTLS negotiation
even if it is not advertised by the server.</p>

<p style="margin-left:22%; margin-top: 1em">To defeat
opportunistic TLSv1 negotiation when the server advertises
STARTTLS or STLS, and use a cleartext connection use
<b>&rsquo;&rsquo;</b>. This option, even if the argument is
the empty string, will also suppress the diagnostic
&rsquo;SERVER: opportunistic upgrade to TLS.&rsquo; message
in verbose mode. The default is to try appropriate protocols
depending on context.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sslcertck</b></p>

<p style="margin-left:22%;">(Keyword: sslcertck) <br>
Causes fetchmail to strictly check the server certificate
against a set of local trusted certificates (see the
<b>sslcertfile</b> and <b>sslcertpath</b> options). If the
server certificate cannot be obtained or is not signed by
one of the trusted ones (directly or indirectly), the SSL
connection will fail, regardless of the
<b>sslfingerprint</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that CRL
(certificate revocation lists) are only supported in OpenSSL
0.9.7 and newer! Your system clock should also be reasonably
accurate when using this option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
optional behavior may become default behavior in future
fetchmail versions.</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslcertfile
&lt;file&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslcertfile, since
v6.3.17) <br>
Sets the file fetchmail uses to look up local certificates.
The default is empty. This can be given in addition to
<b>&minus;&minus;sslcertpath</b> below, and certificates
specified in <b>&minus;&minus;sslcertfile</b> will be
processed before those in <b>&minus;&minus;sslcertpath</b>.
The option can be used in addition to
<b>&minus;&minus;sslcertpath</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The file is a
text file. It contains the concatenation of trusted CA
certificates in PEM format.</p>

<p style="margin-left:22%; margin-top: 1em">Note that using
this option will suppress loading the default SSL trusted CA
certificates file unless you set the environment variable
<b>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</b> to a
non-empty value.</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslcertpath
&lt;directory&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslcertpath) <br>
Sets the directory fetchmail uses to look up local
certificates. The default is your OpenSSL default directory.
The directory must be hashed the way OpenSSL expects it -
every time you add or modify a certificate in the directory,
you need to use the <b>c_rehash</b> tool (which comes with
OpenSSL in the tools/ subdirectory). Also, after OpenSSL
upgrades, you may need to run <b>c_rehash</b>; particularly
when upgrading from 0.9.X to 1.0.0.</p>

<p style="margin-left:22%; margin-top: 1em">This can be
given in addition to <b>&minus;&minus;sslcertfile</b> above,
which see for precedence rules.</p>

<p style="margin-left:22%; margin-top: 1em">Note that using
this option will suppress adding the default SSL trusted CA
certificates directory unless you set the environment
variable <b>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</b> to a
non-empty value.</p>

<p style="margin-left:11%;"><b>&minus;&minus;sslcommonname
&lt;common name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslcommonname; since
v6.3.9) <br>
Use of this option is discouraged. Before using it, contact
the administrator of your upstream server and ask for a
proper SSL certificate to be used. If that cannot be
attained, this option can be used to specify the name
(CommonName) that fetchmail expects on the server
certificate. A correctly configured server will have this
set to the hostname by which it is reached, and by default
fetchmail will expect as much. Use this option when the
CommonName is set to some other value, to avoid the
&quot;Server CommonName mismatch&quot; warning, and only if
the upstream server can&rsquo;t be made to use proper
certificates.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sslfingerprint
&lt;fingerprint&gt;</b></p>

<p style="margin-left:22%;">(Keyword: sslfingerprint) <br>
Specify the fingerprint of the server key (an MD5 hash of
the key) in hexadecimal notation with colons separating
groups of two digits. The letter hex digits must be in upper
case. This is the default format OpenSSL uses, and the one
fetchmail uses to report the fingerprint when an SSL
connection is established. When this is specified, fetchmail
will compare the server key fingerprint with the given one,
and the connection will fail if they do not match regardless
of the <b>sslcertck</b> setting. The connection will also
fail if fetchmail cannot obtain an SSL certificate from the
server. This can be used to prevent man-in-the-middle
attacks, but the finger print from the server needs to be
obtained or verified over a secure channel, and certainly
not over the same Internet connection that fetchmail would
use.</p>

<p style="margin-left:22%; margin-top: 1em">Using this
option will prevent printing certificate verification errors
as long as &minus;&minus;sslcertck is unset.</p>

<p style="margin-left:22%; margin-top: 1em">To obtain the
fingerprint of a certificate stored in the file cert.pem,
try:</p>

<p style="margin-left:22%; margin-top: 1em">openssl x509
&minus;in cert.pem &minus;noout &minus;md5
&minus;fingerprint</p>

<p style="margin-left:22%; margin-top: 1em">For details,
see <b>x509</b>(1ssl).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Delivery
Control Options <br>
&minus;S &lt;hosts&gt; | &minus;&minus;smtphost
&lt;hosts&gt;</b></p>

<p style="margin-left:22%;">(Keyword: smtp[host]) <br>
Specify a hunt list of hosts to forward mail to (one or more
hostnames, comma-separated). Hosts are tried in list order;
the first one that is up becomes the forwarding target for
the current run. If this option is not specified,
&rsquo;localhost&rsquo; is used as the default. Each
hostname may have a port number following the host name. The
port number is separated from the host name by a slash; the
default port is &quot;smtp&quot;. If you specify an absolute
path name (beginning with a /), it will be interpreted as
the name of a UNIX socket accepting LMTP connections (such
as is supported by the Cyrus IMAP daemon) Example:</p>


<p style="margin-left:22%; margin-top: 1em">&minus;&minus;smtphost
server1,server2/2525,server3,/var/imap/socket/lmtp</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be used with ODMR, and will make fetchmail a relay between
the ODMR server and SMTP or LMTP receiver.</p>

<p style="margin-left:11%;"><b>&minus;&minus;fetchdomains
&lt;hosts&gt;</b></p>

<p style="margin-left:22%;">(Keyword: fetchdomains) <br>
In ETRN or ODMR mode, this option specifies the list of
domains the server should ship mail for once the connection
is turned around. The default is the FQDN of the machine
running <b>fetchmail</b>.</p>

<p style="margin-left:11%;"><b>&minus;D &lt;domain&gt; |
&minus;&minus;smtpaddress &lt;domain&gt;</b></p>

<p style="margin-left:22%;">(Keyword: smtpaddress) <br>
Specify the domain to be appended to addresses in RCPT TO
lines shipped to SMTP. When this is not specified, the name
of the SMTP server (as specified by &minus;&minus;smtphost)
is used for SMTP/LMTP and &rsquo;localhost&rsquo; is used
for UNIX socket/BSMTP.</p>

<p style="margin-left:11%;"><b>&minus;&minus;smtpname
&lt;user@domain&gt;</b></p>

<p style="margin-left:22%;">(Keyword: smtpname) <br>
Specify the domain and user to be put in RCPT TO lines
shipped to SMTP. The default user is the current local
user.</p>

<p style="margin-left:11%;"><b>&minus;Z &lt;nnn&gt; |
&minus;&minus;antispam &lt;nnn[, nnn]...&gt;</b></p>

<p style="margin-left:22%;">(Keyword: antispam) <br>
Specifies the list of numeric SMTP errors that are to be
interpreted as a spam-block response from the listener. A
value of &minus;1 disables this option. For the command-line
option, the list values should be comma-separated.</p>

<p style="margin-left:11%;"><b>&minus;m &lt;command&gt; |
&minus;&minus;mda &lt;command&gt;</b></p>

<p style="margin-left:22%;">(Keyword: mda) <br>
This option lets <b>fetchmail</b> use a Message or Local
Delivery Agent (MDA or LDA) directly, rather than forward
via SMTP or LMTP.</p>

<p style="margin-left:22%; margin-top: 1em">To avoid losing
mail, use this option only with MDAs like maildrop or MTAs
like sendmail that exit with a nonzero status on disk-full
and other delivery errors; the nonzero status tells
fetchmail that delivery failed and prevents the message from
being deleted on the server.</p>

<p style="margin-left:22%; margin-top: 1em">If
<b>fetchmail</b> is running as root, it sets its user id
while delivering mail through an MDA as follows: First, the
FETCHMAILUSER, LOGNAME, and USER environment variables are
checked in this order. The value of the first variable from
his list that is defined (even if it is empty!) is looked up
in the system user database. If none of the variables is
defined, fetchmail will use the real user id it was started
with. If one of the variables was defined, but the user
stated there isn&rsquo;t found, fetchmail continues running
as root, without checking remaining variables on the list.
Practically, this means that if you run fetchmail as root
(not recommended), it is most useful to define the
FETCHMAILUSER environment variable to set the user that the
MDA should run as. Some MDAs (such as maildrop) are designed
to be setuid root and setuid to the recipient&rsquo;s user
id, so you don&rsquo;t lose functionality this way even when
running fetchmail as unprivileged user. Check the
MDA&rsquo;s manual for details.</p>

<p style="margin-left:22%; margin-top: 1em">Some possible
MDAs are &quot;/usr/sbin/sendmail &minus;i &minus;f %F
&minus;&minus; %T&quot; (<b>Note:</b> some several older or
vendor sendmail versions mistake &minus;&minus; for an
address, rather than an indicator to mark the end of the
option arguments), &quot;/usr/bin/deliver&quot; and
&quot;/usr/bin/maildrop &minus;d %T&quot;. Local delivery
addresses will be inserted into the MDA command wherever you
place a %T; the mail message&rsquo;s From address will be
inserted where you place an %F.</p>

<p style="margin-left:22%; margin-top: 1em"><b>Do NOT
enclose the %F or %T string in single quotes!</b> For both
%T and %F, fetchmail encloses the addresses in single quotes
(&rsquo;), after removing any single quotes they may
contain, before the MDA command is passed to the shell.</p>

<p style="margin-left:22%; margin-top: 1em"><b>Do NOT use
an MDA invocation that dispatches on the contents of
To/Cc/Bcc,</b> like &quot;sendmail &minus;i &minus;t&quot;
or &quot;qmail-inject&quot;, it will create mail loops and
bring the just wrath of many postmasters down upon your
head. This is one of the most frequent configuration
errors!</p>

<p style="margin-left:22%; margin-top: 1em">Also, do
<i>not</i> try to combine multidrop mode with an MDA such as
maildrop that can only accept one address, unless your
upstream stores one copy of the message per recipient and
transports the envelope recipient in a header; you will lose
mail.</p>

<p style="margin-left:22%; margin-top: 1em">The well-known
<b>procmail</b>(1) package is very hard to configure
properly, it has a very nasty &quot;fall through to the next
rule&quot; behavior on delivery errors (even temporary ones,
such as out of disk space if another user&rsquo;s mail
daemon copies the mailbox around to purge old messages), so
your mail will end up in the wrong mailbox sooner or later.
The proper procmail configuration is outside the scope of
this document. Using <b>maildrop</b>(1) is usually much
easier, and many users find the filter syntax used by
maildrop easier to understand.</p>

<p style="margin-left:22%; margin-top: 1em">Finally, we
strongly advise that you do <b>not</b> use qmail-inject. The
command line interface is non-standard without providing
benefits for typical use, and fetchmail makes no attempts to
accommodate qmail-inject&rsquo;s deviations from the
standard. Some of qmail-inject&rsquo;s command-line and
environment options are actually dangerous and can cause
broken threads, non-detected duplicate messages and
forwarding loops.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;lmtp</b></p></td>
<td width="2%"></td>
<td width="23%">


<p>(Keyword: lmtp)</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:22%;">Cause delivery via LMTP (Local
Mail Transfer Protocol). A service host and port <b>must</b>
be explicitly specified on each host in the smtphost hunt
list (see above) if this option is selected; the default
port 25 will (in accordance with RFC 2033) not be
accepted.</p>

<p style="margin-left:11%;"><b>&minus;&minus;bsmtp
&lt;filename&gt;</b></p>

<p style="margin-left:22%;">(Keyword: bsmtp) <br>
Append fetched mail to a BSMTP file. This simply contains
the SMTP commands that would normally be generated by
fetchmail when passing mail to an SMTP listener daemon.</p>

<p style="margin-left:22%; margin-top: 1em">An argument of
&rsquo;&minus;&rsquo; causes the SMTP batch to be written to
standard output, which is of limited use: this only makes
sense for debugging, because fetchmail&rsquo;s regular
output is interspersed on the same channel, so this
isn&rsquo;t suitable for mail delivery. This special mode
may be removed in a later release.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
fetchmail&rsquo;s reconstruction of MAIL FROM and RCPT TO
lines is not guaranteed correct; the caveats discussed under
THE USE AND ABUSE OF MULTIDROP MAILBOXES below apply. This
mode has precedence before &minus;&minus;mda and
SMTP/LMTP.</p>


<p style="margin-left:11%;"><b>&minus;&minus;bad&minus;header
{reject|accept}</b></p>

<p style="margin-left:22%;">(Keyword: bad&minus;header;
since v6.3.15) <br>
Specify how fetchmail is supposed to treat messages with bad
headers, i. e. headers with bad syntax. Traditionally,
fetchmail has rejected such messages, but some distributors
modified fetchmail to accept them. You can now configure
fetchmail&rsquo;s behaviour per server.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Resource
Limit Control Options <br>
&minus;l &lt;maxbytes&gt; | &minus;&minus;limit
&lt;maxbytes&gt;</b></p>

<p style="margin-left:22%;">(Keyword: limit) <br>
Takes a maximum octet size argument, where 0 is the default
and also the special value designating &quot;no limit&quot;.
If nonzero, messages larger than this size will not be
fetched and will be left on the server (in foreground
sessions, the progress messages will note that they are
&quot;oversized&quot;). If the fetch protocol permits (in
particular, under IMAP or POP3 without the fetchall option)
the message will not be marked seen.</p>

<p style="margin-left:22%; margin-top: 1em">An explicit
&minus;&minus;limit of 0 overrides any limits set in your
run control file. This option is intended for those needing
to strictly control fetch time due to expensive and variable
phone rates.</p>

<p style="margin-left:22%; margin-top: 1em">Combined with
&minus;&minus;limitflush, it can be used to delete oversized
messages waiting on a server. In daemon mode, oversize
notifications are mailed to the calling user (see the
&minus;&minus;warnings option). This option does not work
with ETRN or ODMR.</p>

<p style="margin-left:11%;"><b>&minus;w &lt;interval&gt; |
&minus;&minus;warnings &lt;interval&gt;</b></p>

<p style="margin-left:22%;">(Keyword: warnings) <br>
Takes an interval in seconds. When you call <b>fetchmail</b>
with a &rsquo;limit&rsquo; option in daemon mode, this
controls the interval at which warnings about oversized
messages are mailed to the calling user (or the user
specified by the &rsquo;postmaster&rsquo; option). One such
notification is always mailed at the end of the the first
poll that the oversized message is detected. Thereafter,
re-notification is suppressed until after the warning
interval elapses (it will take place at the end of the first
following poll).</p>

<p style="margin-left:11%;"><b>&minus;b &lt;count&gt; |
&minus;&minus;batchlimit &lt;count&gt;</b></p>

<p style="margin-left:22%;">(Keyword: batchlimit) <br>
Specify the maximum number of messages that will be shipped
to an SMTP listener before the connection is deliberately
torn down and rebuilt (defaults to 0, meaning no limit). An
explicit &minus;&minus;batchlimit of 0 overrides any limits
set in your run control file. While <b>sendmail</b>(8)
normally initiates delivery of a message immediately after
receiving the message terminator, some SMTP listeners are
not so prompt. MTAs like <b>smail</b>(8) may wait till the
delivery socket is shut down to deliver. This may produce
annoying delays when <b>fetchmail</b> is processing very
large batches. Setting the batch limit to some nonzero size
will prevent these delays. This option does not work with
ETRN or ODMR.</p>

<p style="margin-left:11%;"><b>&minus;B &lt;number&gt; |
&minus;&minus;fetchlimit &lt;number&gt;</b></p>

<p style="margin-left:22%;">(Keyword: fetchlimit) <br>
Limit the number of messages accepted from a given server in
a single poll. By default there is no limit. An explicit
&minus;&minus;fetchlimit of 0 overrides any limits set in
your run control file. This option does not work with ETRN
or ODMR.</p>


<p style="margin-left:11%;"><b>&minus;&minus;fetchsizelimit
&lt;number&gt;</b></p>

<p style="margin-left:22%;">(Keyword: fetchsizelimit) <br>
Limit the number of sizes of messages accepted from a given
server in a single transaction. This option is useful in
reducing the delay in downloading the first mail when there
are too many mails in the mailbox. By default, the limit is
100. If set to 0, sizes of all messages are downloaded at
the start. This option does not work with ETRN or ODMR. For
POP3, the only valid non-zero value is 1.</p>

<p style="margin-left:11%;"><b>&minus;&minus;fastuidl
&lt;number&gt;</b></p>

<p style="margin-left:22%;">(Keyword: fastuidl) <br>
Do a binary instead of linear search for the first unseen
UID. Binary search avoids downloading the UIDs of all mails.
This saves time (especially in daemon mode) where
downloading the same set of UIDs in each poll is a waste of
bandwidth. The number &rsquo;n&rsquo; indicates how rarely a
linear search should be done. In daemon mode, linear search
is used once followed by binary searches in
&rsquo;n-1&rsquo; polls if &rsquo;n&rsquo; is greater than
1; binary search is always used if &rsquo;n&rsquo; is 1;
linear search is always used if &rsquo;n&rsquo; is 0. In
non-daemon mode, binary search is used if &rsquo;n&rsquo; is
1; otherwise linear search is used. The default value of
&rsquo;n&rsquo; is 4. This option works with POP3 only.</p>

<p style="margin-left:11%;"><b>&minus;e &lt;count&gt; |
&minus;&minus;expunge &lt;count&gt;</b></p>

<p style="margin-left:22%;">(Keyword: expunge) <br>
Arrange for deletions to be made final after a given number
of messages. Under POP2 or POP3, fetchmail cannot make
deletions final without sending QUIT and ending the session
-- with this option on, fetchmail will break a long mail
retrieval session into multiple sub-sessions, sending QUIT
after each sub-session. This is a good defense against line
drops on POP3 servers. Under IMAP, <b>fetchmail</b> normally
issues an EXPUNGE command after each deletion in order to
force the deletion to be done immediately. This is safest
when your connection to the server is flaky and expensive,
as it avoids resending duplicate mail after a line hit.
However, on large mailboxes the overhead of re-indexing
after every message can slam the server pretty hard, so if
your connection is reliable it is good to do expunges less
frequently. Also note that some servers enforce a delay of a
few seconds after each quit, so fetchmail may not be able to
get back in immediately after an expunge -- you may see
&quot;lock busy&quot; errors if this happens. If you specify
this option to an integer N, it tells <b>fetchmail</b> to
only issue expunges on every Nth delete. An argument of zero
suppresses expunges entirely (so no expunges at all will be
done until the end of run). This option does not work with
ETRN or ODMR.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Authentication
Options <br>
&minus;u &lt;name&gt; | &minus;&minus;user &lt;name&gt; |
&minus;&minus;username &lt;name&gt;</b></p>

<p style="margin-left:22%;">(Keyword: user[name]) <br>
Specifies the user identification to be used when logging in
to the mailserver. The appropriate user identification is
both server and user-dependent. The default is your login
name on the client machine that is running <b>fetchmail</b>.
See USER AUTHENTICATION below for a complete
description.</p>

<p style="margin-left:11%;"><b>&minus;I
&lt;specification&gt; | &minus;&minus;interface
&lt;specification&gt;</b></p>

<p style="margin-left:22%;">(Keyword: interface) <br>
Require that a specific interface device be up and have a
specific local or remote IPv4 (IPv6 is not supported by this
option yet) address (or range) before polling. Frequently
<b>fetchmail</b> is used over a transient point-to-point
TCP/IP link established directly to a mailserver via SLIP or
PPP. That is a relatively secure channel. But when other
TCP/IP routes to the mailserver exist (e.g. when the link is
connected to an alternate ISP), your username and password
may be vulnerable to snooping (especially when daemon mode
automatically polls for mail, shipping a clear password over
the net at predictable intervals). The
&minus;&minus;interface option may be used to prevent this.
When the specified link is not up or is not connected to a
matching IP address, polling will be skipped. The format
is:</p>


<p style="margin-left:22%; margin-top: 1em">interface/iii.iii.iii.iii[/mmm.mmm.mmm.mmm]</p>

<p style="margin-left:22%; margin-top: 1em">The field
before the first slash is the interface name (i.e. sl0, ppp0
etc.). The field before the second slash is the acceptable
IP address. The field after the second slash is a mask which
specifies a range of IP addresses to accept. If no mask is
present 255.255.255.255 is assumed (i.e. an exact match).
This option is currently only supported under Linux and
FreeBSD. Please see the <b>monitor</b> section for below for
FreeBSD specific information.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
option may be removed from a future fetchmail version.</p>

<p style="margin-left:11%;"><b>&minus;M &lt;interface&gt; |
&minus;&minus;monitor &lt;interface&gt;</b></p>

<p style="margin-left:22%;">(Keyword: monitor) <br>
Daemon mode can cause transient links which are
automatically taken down after a period of inactivity (e.g.
PPP links) to remain up indefinitely. This option identifies
a system TCP/IP interface to be monitored for activity.
After each poll interval, if the link is up but no other
activity has occurred on the link, then the poll will be
skipped. However, when fetchmail is woken up by a signal,
the monitor check is skipped and the poll goes through
unconditionally. This option is currently only supported
under Linux and FreeBSD. For the <b>monitor</b> and
<b>interface</b> options to work for non root users under
FreeBSD, the fetchmail binary must be installed SGID kmem.
This would be a security hole, but fetchmail runs with the
effective GID set to that of the kmem group <i>only</i> when
interface data is being collected.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
option may be removed from a future fetchmail version.</p>

<p style="margin-left:11%;"><b>&minus;&minus;auth
&lt;type&gt;</b></p>

<p style="margin-left:22%;">(Keyword: auth[enticate]) <br>
This option permits you to specify an authentication type
(see USER AUTHENTICATION below for details). The possible
values are <b>any</b>, <b>password</b>, <b>kerberos_v5</b>,
<b>kerberos</b> (or, for excruciating exactness,
<b>kerberos_v4</b>), <b>gssapi</b>, <b>cram&minus;md5</b>,
<b>otp</b>, <b>ntlm</b>, <b>msn</b> (only for POP3),
<b>external</b> (only IMAP) and <b>ssh</b>. When <b>any</b>
(the default) is specified, fetchmail tries first methods
that don&rsquo;t require a password (EXTERNAL, GSSAPI,
KERBEROS&nbsp;IV, KERBEROS&nbsp;5); then it looks for
methods that mask your password (CRAM-MD5, NTLM, X&minus;OTP
- note that MSN is only supported for POP3, but not
autoprobed); and only if the server doesn&rsquo;t support
any of those will it ship your password en clair. Other
values may be used to force various authentication methods
(<b>ssh</b> suppresses authentication and is thus useful for
IMAP PREAUTH). (<b>external</b> suppresses authentication
and is thus useful for IMAP EXTERNAL). Any value other than
<b>password</b>, <b>cram&minus;md5</b>, <b>ntlm</b>,
<b>msn</b> or <b>otp</b> suppresses fetchmail&rsquo;s normal
inquiry for a password. Specify <b>ssh</b> when you are
using an end-to-end secure connection such as an ssh tunnel;
specify <b>external</b> when you use TLS with client
authentication and specify <b>gssapi</b> or
<b>kerberos_v4</b> if you are using a protocol variant that
employs GSSAPI or K4. Choosing KPOP protocol automatically
selects Kerberos authentication. This option does not work
with ETRN. GSSAPI service names are in line with RFC-2743
and IANA registrations, see
<a href="http://www.iana.org/assignments/gssapi-service-names/">Generic Security Service Application Program Interface (GSSAPI)/Kerberos/Simple Authentication and Security Layer (SASL) Service Names</a>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
Options <br>
&minus;f &lt;pathname&gt; | &minus;&minus;fetchmailrc
&lt;pathname&gt;</b></p>

<p style="margin-left:22%;">Specify a non-default name for
the <i>~/.fetchmailrc</i> run control file. The pathname
argument must be either &quot;-&quot; (a single dash,
meaning to read the configuration from standard input) or a
filename. Unless the &minus;&minus;version option is also
on, a named file argument must have permissions no more open
than 0700 (u=rwx,g=,o=) or else be /dev/null.</p>

<p style="margin-left:11%;"><b>&minus;i &lt;pathname&gt; |
&minus;&minus;idfile &lt;pathname&gt;</b></p>

<p style="margin-left:22%;">(Keyword: idfile) <br>
Specify an alternate name for the .fetchids file used to
save message UIDs. NOTE: since fetchmail 6.3.0, write access
to the directory containing the idfile is required, as
fetchmail writes a temporary file and renames it into the
place of the real idfile only if the temporary file has been
written successfully. This avoids the truncation of idfiles
when running out of disk space.</p>

<p style="margin-left:11%;"><b>&minus;-pidfile
&lt;pathname&gt;</b></p>

<p style="margin-left:22%;">(Keyword: pidfile; since
fetchmail v6.3.4) <br>
Override the default location of the PID file. Default: see
&quot;ENVIRONMENT&quot; below.</p>

<p style="margin-left:11%;"><b>&minus;n |
&minus;&minus;norewrite</b></p>

<p style="margin-left:22%;">(Keyword: no rewrite) <br>
Normally, <b>fetchmail</b> edits RFC-822 address headers
(To, From, Cc, Bcc, and Reply&minus;To) in fetched mail so
that any mail IDs local to the server are expanded to full
addresses (@ and the mailserver hostname are appended). This
enables replies on the client to get addressed correctly
(otherwise your mailer might think they should be addressed
to local users on the client machine!). This option disables
the rewrite. (This option is provided to pacify people who
are paranoid about having an MTA edit mail headers and want
to know they can prevent it, but it is generally not a good
idea to actually turn off rewrite.) When using ETRN or ODMR,
the rewrite option is ineffective.</p>

<p style="margin-left:11%;"><b>&minus;E &lt;line&gt; |
&minus;&minus;envelope &lt;line&gt;</b></p>

<p style="margin-left:22%;">(Keyword: envelope; Multidrop
only) <br>
In the configuration file, an enhanced syntax is used:
<b><br>
envelope [&lt;count&gt;] &lt;line&gt;</b></p>

<p style="margin-left:22%; margin-top: 1em">This option
changes the header <b>fetchmail</b> assumes will carry a
copy of the mail&rsquo;s envelope address. Normally this is
&rsquo;X&minus;Envelope&minus;To&rsquo;. Other typically
found headers to carry envelope information are
&rsquo;X&minus;Original&minus;To&rsquo; and
&rsquo;Delivered&minus;To&rsquo;. Now, since these headers
are not standardized, practice varies. See the discussion of
multidrop address handling below. As a special case,
&rsquo;envelope &quot;Received&quot;&rsquo; enables parsing
of sendmail-style Received lines. This is the default, but
discouraged because it is not fully reliable.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
fetchmail expects the Received-line to be in a specific
format: It must contain &quot;by <i>host</i> for
<i>address</i>&quot;, where <i>host</i> must match one of
the mailserver names that fetchmail recognizes for the
account in question.</p>

<p style="margin-left:22%; margin-top: 1em">The optional
count argument (only available in the configuration file)
determines how many header lines of this kind are skipped. A
count of 1 means: skip the first, take the second. A count
of 2 means: skip the first and second, take the third, and
so on.</p>

<p style="margin-left:11%;"><b>&minus;Q &lt;prefix&gt; |
&minus;&minus;qvirtual &lt;prefix&gt;</b></p>

<p style="margin-left:22%;">(Keyword: qvirtual; Multidrop
only) <br>
The string prefix assigned to this option will be removed
from the user name found in the header specified with the
<i>envelope</i> option (<i>before</i> doing multidrop name
mapping or localdomain checking, if either is applicable).
This option is useful if you are using <b>fetchmail</b> to
collect the mail for an entire domain and your ISP (or your
mail redirection provider) is using qmail. One of the basic
features of qmail is the <i>Delivered&minus;To:</i> message
header. Whenever qmail delivers a message to a local mailbox
it puts the username and hostname of the envelope recipient
on this line. The major reason for this is to prevent mail
loops. To set up qmail to batch mail for a disconnected site
the ISP-mailhost will have normally put that site in its
&rsquo;Virtualhosts&rsquo; control file so it will add a
prefix to all mail addresses for this site. This results in
mail sent to &rsquo;username@userhost.userdom.dom.com&rsquo;
having a <i>Delivered&minus;To:</i> line of the form:</p>


<p style="margin-left:22%; margin-top: 1em">Delivered&minus;To:
mbox&minus;userstr&minus;username@userhost.example.com</p>

<p style="margin-left:11%; margin-top: 1em">The ISP can
make the &rsquo;mbox&minus;userstr&minus;&rsquo; prefix
anything they choose but a string matching the user host
name is likely. By using the option &rsquo;envelope
Delivered&minus;To:&rsquo; you can make fetchmail reliably
identify the original envelope recipient, but you have to
strip the &rsquo;mbox&minus;userstr&minus;&rsquo; prefix to
deliver to the correct user. This is what this option is
for. <b><br>
&minus;&minus;configdump</b></p>

<p style="margin-left:22%;">Parse the <i>~/.fetchmailrc</i>
file, interpret any command-line options specified, and dump
a configuration report to standard output. The configuration
report is a data structure assignment in the language
Python. This option is meant to be used with an interactive
<i>~/.fetchmailrc</i> editor like <b>fetchmailconf</b>,
written in Python.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Removed
Options <br>
&minus;T | &minus;&minus;netsec</b></p>

<p style="margin-left:22%;">Removed before version 6.3.0,
the required underlying inet6_apps library had been
discontinued and is no longer available.</p>

<h2>USER AUTHENTICATION AND ENCRYPTION
<a name="USER AUTHENTICATION AND ENCRYPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All modes
except ETRN require authentication of the client to the
server. Normal user authentication in <b>fetchmail</b> is
very much like the authentication mechanism of
<b>ftp</b>(1). The correct user-id and password depend upon
the underlying security system at the mailserver.</p>

<p style="margin-left:11%; margin-top: 1em">If the
mailserver is a Unix machine on which you have an ordinary
user account, your regular login name and password are used
with <b>fetchmail</b>. If you use the same login name on
both the server and the client machines, you needn&rsquo;t
worry about specifying a user-id with the <b>&minus;u</b>
option -- the default behavior is to use your login name on
the client machine as the user-id on the server machine. If
you use a different login name on the server machine,
specify that login name with the <b>&minus;u</b> option.
e.g. if your login name is &rsquo;jsmith&rsquo; on a machine
named &rsquo;mailgrunt&rsquo;, you would start
<b>fetchmail</b> as follows:</p>

<p style="margin-left:22%; margin-top: 1em">fetchmail
&minus;u jsmith mailgrunt</p>

<p style="margin-left:11%; margin-top: 1em">The default
behavior of <b>fetchmail</b> is to prompt you for your
mailserver password before the connection is established.
This is the safest way to use <b>fetchmail</b> and ensures
that your password will not be compromised. You may also
specify your password in your <i>~/.fetchmailrc</i> file.
This is convenient when using <b>fetchmail</b> in daemon
mode or with scripts.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Using netrc
files</b> <br>
If you do not specify a password, and <b>fetchmail</b>
cannot extract one from your <i>~/.fetchmailrc</i> file, it
will look for a <i>~/.netrc</i> file in your home directory
before requesting one interactively; if an entry matching
the mailserver is found in that file, the password will be
used. Fetchmail first looks for a match on poll name; if it
finds none, it checks for a match on via name. See the
<b>ftp</b>(1) man page for details of the syntax of the
<i>~/.netrc</i> file. To show a practical example, a .netrc
might look like this:</p>

<p style="margin-left:22%; margin-top: 1em">machine
hermes.example.org <br>
login joe <br>
password topsecret</p>

<p style="margin-left:11%; margin-top: 1em">You can repeat
this block with different user information if you need to
provide more than one password.</p>

<p style="margin-left:11%; margin-top: 1em">This feature
may allow you to avoid duplicating password information in
more than one file.</p>

<p style="margin-left:11%; margin-top: 1em">On mailservers
that do not provide ordinary user accounts, your user-id and
password are usually assigned by the server administrator
when you apply for a mailbox on the server. Contact your
server administrator if you don&rsquo;t know the correct
user-id and password for your mailbox account.</p>

<h2>POP3 VARIANTS
<a name="POP3 VARIANTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Early versions
of POP3 (RFC1081, RFC1225) supported a crude form of
independent authentication using the <i>.rhosts</i> file on
the mailserver side. Under this RPOP variant, a fixed
per-user ID equivalent to a password was sent in clear over
a link to a reserved port, with the command RPOP rather than
PASS to alert the server that it should do special checking.
RPOP is supported by <b>fetchmail</b> (you can specify
&rsquo;protocol RPOP&rsquo; to have the program send
&rsquo;RPOP&rsquo; rather than &rsquo;PASS&rsquo;) but its
use is strongly discouraged, and support will be removed
from a future fetchmail version. This facility was
vulnerable to spoofing and was withdrawn in RFC1460.</p>

<p style="margin-left:11%; margin-top: 1em">RFC1460
introduced APOP authentication. In this variant of POP3, you
register an APOP password on your server host (on some
servers, the program to do this is called
<b>popauth</b>(8)). You put the same password in your
<i>~/.fetchmailrc</i> file. Each time <b>fetchmail</b> logs
in, it sends an MD5 hash of your password and the server
greeting time to the server, which can verify it by checking
its authorization database.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note that
APOP is no longer considered resistant against
man-in-the-middle attacks.</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>RETR or TOP
<br>
fetchmail</b> makes some efforts to make the server believe
messages had not been retrieved, by using the TOP command
with a large number of lines when possible. TOP is a command
that retrieves the full header and a
<b>fetchmail</b>-specified amount of body lines. It is
optional and therefore not implemented by all servers, and
some are known to implement it improperly. On many servers
however, the RETR command which retrieves the full message
with header and body, sets the &quot;seen&quot; flag (for
instance, in a web interface), whereas the TOP command does
not do that.</p>


<p style="margin-left:11%; margin-top: 1em"><b>fetchmail</b>
will always use the RETR command if &quot;fetchall&quot; is
set. <b>fetchmail</b> will also use the RETR command if
&quot;keep&quot; is set and &quot;uidl&quot; is unset.
Finally, <b>fetchmail</b> will use the RETR command on
Maillennium POP3/PROXY servers (used by Comcast) to avoid a
deliberate TOP misinterpretation in this server that causes
message corruption.</p>

<p style="margin-left:11%; margin-top: 1em">In all other
cases, <b>fetchmail</b> will use the TOP command. This
implies that in &quot;keep&quot; setups, &quot;uidl&quot;
must be set if &quot;TOP&quot; is desired.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b>
that this description is true for the current version of
fetchmail, but the behavior may change in future versions.
In particular, fetchmail may prefer the RETR command because
the TOP command causes much grief on some servers and is
only optional.</p>

<h2>ALTERNATE AUTHENTICATION FORMS
<a name="ALTERNATE AUTHENTICATION FORMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If your
<b>fetchmail</b> was built with Kerberos support and you
specify Kerberos authentication (either with
&minus;&minus;auth or the <i>.fetchmailrc</i> option
<b>authenticate kerberos_v4</b>) it will try to get a
Kerberos ticket from the mailserver at the start of each
query. Note: if either the pollname or via name is
&rsquo;hesiod&rsquo;, fetchmail will try to use Hesiod to
look up the mailserver.</p>

<p style="margin-left:11%; margin-top: 1em">If you use POP3
or IMAP with GSSAPI authentication, <b>fetchmail</b> will
expect the server to have RFC1731- or RFC1734-conforming
GSSAPI capability, and will use it. Currently this has only
been tested over Kerberos V, so you&rsquo;re expected to
already have a ticket-granting ticket. You may pass a
username different from your principal name using the
standard <b>&minus;&minus;user</b> command or by the
<i>.fetchmailrc</i> option <b>user</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If your IMAP
daemon returns the PREAUTH response in its greeting line,
fetchmail will notice this and skip the normal
authentication step. This can be useful, e.g. if you start
imapd explicitly using ssh. In this case you can declare the
authentication value &rsquo;ssh&rsquo; on that site entry to
stop <i>.fetchmail</i> from asking you for a password when
it starts up.</p>

<p style="margin-left:11%; margin-top: 1em">If you use
client authentication with <i>TLS1</i> and your IMAP daemon
returns the <i>AUTH=EXTERNAL</i> response, fetchmail will
notice this and will use the authentication shortcut and
will not send the passphrase. In this case you can declare
the authentication value &rsquo;external&rsquo; <br>
on that site to stop <b>fetchmail</b> from asking you for a
password when it starts up.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
using POP3, and the server issues a one-time-password
challenge conforming to RFC1938, <b>fetchmail</b> will use
your password as a pass phrase to generate the required
response. This avoids sending secrets over the net
unencrypted.</p>


<p style="margin-left:11%; margin-top: 1em">Compuserve&rsquo;s
RPA authentication is supported. If you compile in the
support, <b>fetchmail</b> will try to perform an RPA
pass-phrase authentication instead of sending over the
password en clair if it detects &quot;@compuserve.com&quot;
in the hostname.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
using IMAP, Microsoft&rsquo;s NTLM authentication (used by
Microsoft Exchange) is supported. If you compile in the
support, <b>fetchmail</b> will try to perform an NTLM
authentication (instead of sending over the password en
clair) whenever the server returns AUTH=NTLM in its
capability response. Specify a user option value that looks
like &rsquo;user@domain&rsquo;: the part to the left of the
@ will be passed as the username and the part to the right
as the NTLM domain.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Secure
Socket Layers (SSL) and Transport Layer Security (TLS)</b>
<br>
Note that fetchmail currently uses the OpenSSL library,
which is severely underdocumented, so failures may occur
just because the programmers are not aware of
OpenSSL&rsquo;s requirement of the day. For instance, since
v6.3.16, fetchmail calls OpenSSL_add_all_algorithms(), which
is necessary to support certificates with SHA256 on OpenSSL
0.9.8 -- this information is deeply hidden in the
documentation and not at all obvious. Please do not hesitate
to report subtle SSL failures.</p>

<p style="margin-left:11%; margin-top: 1em">You can access
SSL encrypted services by specifying the &minus;&minus;ssl
option. You can also do this using the &quot;ssl&quot; user
option in the .fetchmailrc file. With SSL encryption
enabled, queries are initiated over a connection after
negotiating an SSL session, and the connection fails if SSL
cannot be negotiated. Some services, such as POP3 and IMAP,
have different well known ports defined for the SSL
encrypted services. The encrypted ports will be selected
automatically when SSL is enabled and no explicit port is
specified. The &minus;&minus;sslproto &rsquo;SSL3&rsquo;
option should be used to select the SSLv3 protocol (default
if unset: v2 or v3). Also, the &minus;&minus;sslcertck
command line or sslcertck run control file option should be
used to force strict certificate checking - see below.</p>

<p style="margin-left:11%; margin-top: 1em">If SSL is not
configured, fetchmail will usually opportunistically try to
use STARTTLS. STARTTLS can be enforced by using
&minus;&minus;sslproto &quot;TLS1&quot;. TLS connections use
the same port as the unencrypted version of the protocol and
negotiate TLS via special command. The
&minus;&minus;sslcertck command line or sslcertck run
control file option should be used to force strict
certificate checking - see below.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;&minus;sslcertck
is recommended:</b> When connecting to an SSL or TLS
encrypted server, the server presents a certificate to the
client for validation. The certificate is checked to verify
that the common name in the certificate matches the name of
the server being contacted and that the effective and
expiration dates in the certificate indicate that it is
currently valid. If any of these checks fail, a warning
message is printed, but the connection continues. The server
certificate does not need to be signed by any specific
Certifying Authority and may be a &quot;self-signed&quot;
certificate. If the &minus;&minus;sslcertck command line
option or sslcertck run control file option is used,
fetchmail will instead abort if any of these checks fail,
because it must assume that there is a man-in-the-middle
attack in this scenario, hence fetchmail must not expose
cleartext passwords. Use of the sslcertck or
&minus;&minus;sslcertck option is therefore advised.</p>

<p style="margin-left:11%; margin-top: 1em">Some SSL
encrypted servers may request a client side certificate. A
client side public SSL certificate and private SSL key may
be specified. If requested by the server, the client
certificate is sent to the server for validation. Some
servers may require a valid client certificate and may
refuse connections if a certificate is not provided or if
the certificate is not valid. Some servers may require
client side certificates be signed by a recognized
Certifying Authority. The format for the key files and the
certificate files is that required by the underlying SSL
libraries (OpenSSL in the general case).</p>

<p style="margin-left:11%; margin-top: 1em">A word of care
about the use of SSL: While above mentioned setup with
self-signed server certificates retrieved over the wires can
protect you from a passive eavesdropper, it doesn&rsquo;t
help against an active attacker. It&rsquo;s clearly an
improvement over sending the passwords in clear, but you
should be aware that a man-in-the-middle attack is trivially
possible (in particular with tools such as
<a href="http://monkey.org/~dugsong/dsniff/">dsniff</a>, ).
Use of strict certificate checking with a certification
authority recognized by server and client, or perhaps of an
SSH tunnel (see below for some examples) is preferable if
you care seriously about the security of your mailbox and
passwords.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ESMTP AUTH
<br>
fetchmail</b> also supports authentication to the ESMTP
server on the client side according to RFC 2554. You can
specify a name/password pair to be used with the keywords
&rsquo;esmtpname&rsquo; and &rsquo;esmtppassword&rsquo;; the
former defaults to the username of the calling user.</p>

<h2>DAEMON MODE
<a name="DAEMON MODE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Introducing
the daemon mode</b> <br>
In daemon mode, <b>fetchmail</b> puts itself into the
background and runs forever, querying each specified host
and then sleeping for a given polling interval.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Starting the
daemon mode</b> <br>
There are several ways to make fetchmail work in daemon
mode. On the command line,
<b>&minus;&minus;daemon&nbsp;&lt;interval&gt;</b> or
<b>&minus;d&nbsp;&lt;interval&gt;</b> option runs
<b>fetchmail</b> in daemon mode. You must specify a numeric
argument which is a polling interval (time to wait after
completing a whole poll cycle with the last server and
before starting the next poll cycle with the first server)
in seconds.</p>

<p style="margin-left:11%; margin-top: 1em">Example: simply
invoking</p>

<p style="margin-left:22%; margin-top: 1em">fetchmail
&minus;d 900</p>

<p style="margin-left:11%; margin-top: 1em">will,
therefore, poll all the hosts described in your
<i>~/.fetchmailrc</i> file (except those explicitly excluded
with the &rsquo;skip&rsquo; verb) a bit less often than once
every 15 minutes (exactly: 15 minutes + time that the poll
takes).</p>

<p style="margin-left:11%; margin-top: 1em">It is also
possible to set a polling interval in your
<i>~/.fetchmailrc</i> file by saying
&rsquo;set&nbsp;daemon&nbsp;&lt;interval&gt;&rsquo;, where
&lt;interval&gt; is an integer number of seconds. If you do
this, fetchmail will always start in daemon mode unless you
override it with the command-line option
&minus;&minus;daemon 0 or &minus;d0.</p>

<p style="margin-left:11%; margin-top: 1em">Only one daemon
process is permitted per user; in daemon mode,
<b>fetchmail</b> sets up a per-user lockfile to guarantee
this. (You can however cheat and set the FETCHMAILHOME
environment variable to overcome this setting, but in that
case, it is your responsibility to make sure you
aren&rsquo;t polling the same server with two processes at
the same time.)</p>

<p style="margin-left:11%; margin-top: 1em"><b>Awakening
the background daemon</b> <br>
Normally, calling fetchmail with a daemon in the background
sends a wake-up signal to the daemon and quits without
output. The background daemon then starts its next poll
cycle immediately. The wake-up signal, SIGUSR1, can also be
sent manually. The wake-up action also clears any
&rsquo;wedged&rsquo; flags indicating that connections have
wedged due to failed authentication or multiple
timeouts.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Terminating
the background daemon</b> <br>
The option <b>&minus;&minus;quit</b> will kill a running
daemon process instead of waking it up (if there is no such
process, <b>fetchmail</b> will notify you). If the
&minus;&minus;quit option appears last on the command line,
<b>fetchmail</b> will kill the running daemon process and
then quit. Otherwise, <b>fetchmail</b> will first kill a
running daemon process and then continue running with the
other options.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Useful
options for daemon mode</b> <br>
The <b>&minus;L &lt;filename&gt;</b> or
<b>&minus;&minus;logfile &lt;filename&gt;</b> option
(keyword: set logfile) is only effective when fetchmail is
detached and in daemon mode. Note that <b>the logfile must
exist before</b> fetchmail is run, you can use the
<b>touch</b>(1) command with the filename as its sole
argument to create it. <br>
This option allows you to redirect status messages into a
specified logfile (follow the option with the logfile name).
The logfile is opened for append, so previous messages
aren&rsquo;t deleted. This is primarily useful for debugging
configurations. Note that fetchmail does not detect if the
logfile is rotated, the logfile is only opened once when
fetchmail starts. You need to restart fetchmail after
rotating the logfile and before compressing it (if
applicable).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;&minus;syslog</b> option (keyword: set syslog)
allows you to redirect status and error messages emitted to
the <b>syslog</b>(3) system daemon if available. Messages
are logged with an id of <b>fetchmail</b>, the facility
<b>LOG_MAIL</b>, and priorities <b>LOG_ERR</b>,
<b>LOG_ALERT</b> or <b>LOG_INFO</b>. This option is intended
for logging status and error messages which indicate the
status of the daemon and the results while fetching mail
from the server(s). Error messages for command line options
and parsing the <i>.fetchmailrc</i> file are still written
to stderr, or to the specified log file. The
<b>&minus;&minus;nosyslog</b> option turns off use of
<b>syslog</b>(3), assuming it&rsquo;s turned on in the
<i>~/.fetchmailrc</i> file. This option is overridden, in
certain situations, by <b>&minus;&minus;logfile</b> (which
see).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;N</b> or <b>&minus;&minus;nodetach</b> option
suppresses backgrounding and detachment of the daemon
process from its control terminal. This is useful for
debugging or when fetchmail runs as the child of a
supervisor process such as <b>init</b>(8) or Gerrit
Pape&rsquo;s <b>runit</b>(8). Note that this also causes the
logfile option to be ignored.</p>

<p style="margin-left:11%; margin-top: 1em">Note that while
running in daemon mode polling a POP2 or IMAP2bis server,
transient errors (such as DNS failures or sendmail delivery
refusals) may force the fetchall option on for the duration
of the next polling cycle. This is a robustness feature. It
means that if a message is fetched (and thus marked seen by
the mailserver) but not delivered locally due to some
transient error, it will be re-fetched during the next poll
cycle. (The IMAP logic doesn&rsquo;t delete messages until
they&rsquo;re delivered, so this problem does not
arise.)</p>

<p style="margin-left:11%; margin-top: 1em">If you touch or
change the <i>~/.fetchmailrc</i> file while fetchmail is
running in daemon mode, this will be detected at the
beginning of the next poll cycle. When a changed
<i>~/.fetchmailrc</i> is detected, fetchmail rereads it and
restarts from scratch (using exec(2); no state information
is retained in the new instance). Note that if fetchmail
needs to query for passwords, of that if you break the
<i>~/.fetchmailrc</i> file&rsquo;s syntax, the new instance
will softly and silently vanish away on startup.</p>

<h2>ADMINISTRATIVE OPTIONS
<a name="ADMINISTRATIVE OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;&minus;postmaster &lt;name&gt;</b> option
(keyword: set postmaster) specifies the last-resort username
to which multidrop mail is to be forwarded if no matching
local recipient can be found. It is also used as destination
of undeliverable mail if the &rsquo;bouncemail&rsquo; global
option is off and additionally for spam-blocked mail if the
&rsquo;bouncemail&rsquo; global option is off and the
&rsquo;spambounce&rsquo; global option is on. This option
defaults to the user who invoked <b>fetchmail</b>. If the
invoking user is root, then the default of this option is
the user &rsquo;postmaster&rsquo;. Setting postmaster to the
empty string causes such mail as described above to be
discarded - this however is usually a bad idea. See also the
description of the &rsquo;FETCHMAILUSER&rsquo; environment
variable in the ENVIRONMENT section below.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;&minus;nobounce</b> behaves like the &quot;set no
bouncemail&quot; global option, which see.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;&minus;invisible</b> option (keyword: set
invisible) tries to make fetchmail invisible. Normally,
fetchmail behaves like any other MTA would -- it generates a
Received header into each message describing its place in
the chain of transmission, and tells the MTA it forwards to
that the mail came from the machine fetchmail itself is
running on. If the invisible option is on, the Received
header is suppressed and fetchmail tries to spoof the MTA it
forwards to into thinking it came directly from the
mailserver host.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;&minus;showdots</b> option (keyword: set showdots)
forces fetchmail to show progress dots even if the output
goes to a file or fetchmail is not in verbose mode.
Fetchmail shows the dots by default when run in
&minus;&minus;verbose mode <i>and</i> output goes to
console. This option is ignored in &minus;&minus;silent
mode.</p>

<p style="margin-left:11%; margin-top: 1em">By specifying
the <b>&minus;&minus;tracepolls</b> option, you can ask
fetchmail to add information to the Received header on the
form &quot;polling {label} account {user}&quot;, where
{label} is the account label (from the specified rcfile,
normally ~/.fetchmailrc) and {user} is the username which is
used to log on to the mail server. This header can be used
to make filtering email where no useful header information
is available and you want mail from different accounts
sorted into different mailboxes (this could, for example,
occur if you have an account on the same server running a
mailing list, and are subscribed to the list using that
account). The default is not adding any such header. In
<i>.fetchmailrc</i>, this is called
&rsquo;tracepolls&rsquo;.</p>

<h2>RETRIEVAL FAILURE MODES
<a name="RETRIEVAL FAILURE MODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The protocols
<b>fetchmail</b> uses to talk to mailservers are next to
bulletproof. In normal operation forwarding to port 25, no
message is ever deleted (or even marked for deletion) on the
host until the SMTP listener on the client side has
acknowledged to <b>fetchmail</b> that the message has been
either accepted for delivery or rejected due to a spam
block.</p>

<p style="margin-left:11%; margin-top: 1em">When forwarding
to an MDA, however, there is more possibility of error. Some
MDAs are &rsquo;safe&rsquo; and reliably return a nonzero
status on any delivery error, even one due to temporary
resource limits. The <b>maildrop</b>(1) program is like
this; so are most programs designed as mail transport
agents, such as <b>sendmail</b>(1), including the sendmail
wrapper of Postfix and <b>exim</b>(1). These programs give
back a reliable positive acknowledgement and can be used
with the mda option with no risk of mail loss. Unsafe MDAs,
though, may return 0 even on delivery failure. If this
happens, you will lose mail.</p>

<p style="margin-left:11%; margin-top: 1em">The normal mode
of <b>fetchmail</b> is to try to download only
&rsquo;new&rsquo; messages, leaving untouched (and
undeleted) messages you have already read directly on the
server (or fetched with a previous <i>fetchmail
&minus;&minus;keep</i>). But you may find that messages
you&rsquo;ve already read on the server are being fetched
(and deleted) even when you don&rsquo;t specify
&minus;&minus;all. There are several reasons this can
happen.</p>

<p style="margin-left:11%; margin-top: 1em">One could be
that you&rsquo;re using POP2. The POP2 protocol includes no
representation of &rsquo;new&rsquo; or &rsquo;old&rsquo;
state in messages, so <b>fetchmail</b> must treat all
messages as new all the time. But POP2 is obsolete, so this
is unlikely.</p>

<p style="margin-left:11%; margin-top: 1em">A potential
POP3 problem might be servers that insert messages in the
middle of mailboxes (some VMS implementations of mail are
rumored to do this). The <b>fetchmail</b> code assumes that
new messages are appended to the end of the mailbox; when
this is not true it may treat some old messages as new and
vice versa. Using UIDL whilst setting fastuidl 0 might fix
this, otherwise, consider switching to IMAP.</p>

<p style="margin-left:11%; margin-top: 1em">Yet another
POP3 problem is that if they can&rsquo;t make tempfiles in
the user&rsquo;s home directory, some POP3 servers will hand
back an undocumented response that causes fetchmail to
spuriously report &quot;No mail&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The IMAP code
uses the presence or absence of the server flag \Seen to
decide whether or not a message is new. This isn&rsquo;t the
right thing to do, fetchmail should check the UIDVALIDITY
and use UID, but it doesn&rsquo;t do that yet. Under Unix,
it counts on your IMAP server to notice the BSD-style Status
flags set by mail user agents and set the \Seen flag from
them when appropriate. All Unix IMAP servers we know of do
this, though it&rsquo;s not specified by the IMAP RFCs. If
you ever trip over a server that doesn&rsquo;t, the symptom
will be that messages you have already read on your host
will look new to the server. In this (unlikely) case, only
messages you fetched with <i>fetchmail
&minus;&minus;keep</i> will be both undeleted and marked
old.</p>

<p style="margin-left:11%; margin-top: 1em">In ETRN and
ODMR modes, <b>fetchmail</b> does not actually retrieve
messages; instead, it asks the server&rsquo;s SMTP listener
to start a queue flush to the client via SMTP. Therefore it
sends only undelivered messages.</p>

<h2>SPAM FILTERING
<a name="SPAM FILTERING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Many SMTP
listeners allow administrators to set up &rsquo;spam
filters&rsquo; that block unsolicited email from specified
domains. A MAIL FROM or DATA line that triggers this feature
will elicit an SMTP response which (unfortunately) varies
according to the listener.</p>

<p style="margin-left:11%; margin-top: 1em">Newer versions
of <b>sendmail</b> return an error code of 571.</p>

<p style="margin-left:11%; margin-top: 1em">According to
RFC2821, the correct thing to return in this situation is
550 &quot;Requested action not taken: mailbox
unavailable&quot; (the draft adds &quot;[E.g., mailbox not
found, no access, or command rejected for policy
reasons].&quot;).</p>

<p style="margin-left:11%; margin-top: 1em">Older versions
of the <b>exim</b> MTA return 501 &quot;Syntax error in
parameters or arguments&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>postfix</b> MTA runs 554 as an antispam response.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Zmailer</b>
may reject code with a 500 response (followed by an enhanced
status code that contains more information).</p>

<p style="margin-left:11%; margin-top: 1em">Return codes
which <b>fetchmail</b> treats as antispam responses and
discards the message can be set with the
&rsquo;antispam&rsquo; option. This is one of the
<i>only</i> three circumstance under which fetchmail ever
discards mail (the others are the 552 and 553 errors
described below, and the suppression of multidropped
messages with a message-ID already seen).</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>fetchmail</b> is fetching from an IMAP server, the
antispam response will be detected and the message rejected
immediately after the headers have been fetched, without
reading the message body. Thus, you won&rsquo;t pay for
downloading spam message bodies.</p>

<p style="margin-left:11%; margin-top: 1em">By default, the
list of antispam responses is empty.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>spambounce</i> global option is on, mail that is
spam-blocked triggers an RFC1892/RFC1894 bounce message
informing the originator that we do not accept mail from it.
See also BUGS.</p>

<h2>SMTP/ESMTP ERROR HANDLING
<a name="SMTP/ESMTP ERROR HANDLING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Besides the
spam-blocking described above, fetchmail takes special
actions on the following SMTP/ESMTP error responses <br>
452 (insufficient system storage)</p>

<p style="margin-left:18%;">Leave the message in the server
mailbox for later retrieval.</p>

<p style="margin-left:11%;">552 (message exceeds fixed
maximum message size)</p>

<p style="margin-left:18%;">Delete the message from the
server. Send bounce-mail to the originator.</p>

<p style="margin-left:11%;">553 (invalid sending
domain)</p>

<p style="margin-left:18%;">Delete the message from the
server. Don&rsquo;t even try to send bounce-mail to the
originator.</p>

<p style="margin-left:11%; margin-top: 1em">Other errors
trigger bounce mail back to the originator. See also
BUGS.</p>

<h2>THE RUN CONTROL FILE
<a name="THE RUN CONTROL FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The preferred
way to set up fetchmail is to write a <i>.fetchmailrc</i>
file in your home directory (you may do this directly, with
a text editor, or indirectly via <b>fetchmailconf</b>). When
there is a conflict between the command-line arguments and
the arguments in this file, the command-line arguments take
precedence.</p>

<p style="margin-left:11%; margin-top: 1em">To protect the
security of your passwords, your <i>~/.fetchmailrc</i> may
not normally have more than 0700 (u=rwx,g=,o=) permissions;
<b>fetchmail</b> will complain and exit otherwise (this
check is suppressed when &minus;&minus;version is on).</p>

<p style="margin-left:11%; margin-top: 1em">You may read
the <i>.fetchmailrc</i> file as a list of commands to be
executed when <b>fetchmail</b> is called with no
arguments.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Run Control
Syntax</b> <br>
Comments begin with a &rsquo;#&rsquo; and extend through the
end of the line. Otherwise the file consists of a series of
server entries or global option statements in a free-format,
token-oriented syntax.</p>

<p style="margin-left:11%; margin-top: 1em">There are four
kinds of tokens: grammar keywords, numbers (i.e. decimal
digit sequences), unquoted strings, and quoted strings. A
quoted string is bounded by double quotes and may contain
whitespace (and quoted digits are treated as a string). Note
that quoted strings will also contain line feed characters
if they run across two or more lines, unless you use a
backslash to join lines (see below). An unquoted string is
any whitespace-delimited token that is neither numeric,
string quoted nor contains the special characters
&rsquo;,&rsquo;, &rsquo;;&rsquo;, &rsquo;:&rsquo;, or
&rsquo;=&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Any amount of
whitespace separates tokens in server entries, but is
otherwise ignored. You may use backslash escape sequences
(\n for LF, \t for HT, \b for BS, \r for CR, \<i>nnn</i> for
decimal (where nnn cannot start with a 0), \0<i>ooo</i> for
octal, and \x<i>hh</i> for hex) to embed non-printable
characters or string delimiters in strings. In quoted
strings, a backslash at the very end of a line will cause
the backslash itself and the line feed (LF or NL, new line)
character to be ignored, so that you can wrap long strings.
Without the backslash at the line end, the line feed
character would become part of the string.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Warning:</b>
while these resemble C-style escape sequences, they are not
the same. fetchmail only supports these eight styles. C
supports more escape sequences that consist of backslash (\)
and a single character, but does not support decimal codes
and does not require the leading 0 in octal notation.
Example: fetchmail interprets \233 the same as \xE9 (Latin
small letter e with acute), where C would interpret \233 as
octal 0233 = \x9B (CSI, control sequence introducer).</p>

<p style="margin-left:11%; margin-top: 1em">Each server
entry consists of one of the keywords &rsquo;poll&rsquo; or
&rsquo;skip&rsquo;, followed by a server name, followed by
server options, followed by any number of user (or username)
descriptions, followed by user options. Note: the most
common cause of syntax errors is mixing up user and server
options or putting user options before the user
descriptions.</p>

<p style="margin-left:11%; margin-top: 1em">For backward
compatibility, the word &rsquo;server&rsquo; is a synonym
for &rsquo;poll&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">You can use the
noise keywords &rsquo;and&rsquo;, &rsquo;with&rsquo;,
&rsquo;has&rsquo;, &rsquo;wants&rsquo;, and
&rsquo;options&rsquo; anywhere in an entry to make it
resemble English. They&rsquo;re ignored, but but can make
entries much easier to read at a glance. The punctuation
characters &rsquo;:&rsquo;, &rsquo;;&rsquo; and
&rsquo;,&rsquo; are also ignored.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Poll vs.
Skip</b> <br>
The &rsquo;poll&rsquo; verb tells fetchmail to query this
host when it is run with no arguments. The
&rsquo;skip&rsquo; verb tells <b>fetchmail</b> not to poll
this host unless it is explicitly named on the command line.
(The &rsquo;skip&rsquo; verb allows you to experiment with
test entries safely, or easily disable entries for hosts
that are temporarily down.)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Keyword/Option
Summary</b> <br>
Here are the legal options. Keyword suffixes enclosed in
square brackets are optional. Those corresponding to short
command-line options are followed by &rsquo;&minus;&rsquo;
and the appropriate option letter. If option is only
relevant to a single mode of operation, it is noted as
&rsquo;s&rsquo; or &rsquo;m&rsquo; for singledrop- or
multidrop-mode, respectively.</p>

<p style="margin-left:11%; margin-top: 1em">Here are the
legal global options:</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-33661.png" alt="Image grohtml-33661.png"></p>

<p style="margin-left:11%; margin-top: 1em">Here are the
legal server options:</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-33662.png" alt="Image grohtml-33662.png"></p>

<p style="margin-left:11%; margin-top: 1em">Here are the
legal user descriptions and options:</p>


<p align="center" style="margin-top: 1em"><img src="grohtml-33663.png" alt="Image grohtml-33663.png"></p>

<p style="margin-left:11%; margin-top: 1em">All user
options must begin with a user description (user or username
option) and <i>follow</i> all server descriptions and
options.</p>

<p style="margin-left:11%; margin-top: 1em">In the
.fetchmailrc file, the &rsquo;envelope&rsquo; string
argument may be preceded by a whitespace-separated number.
This number, if specified, is the number of such headers to
skip over (that is, an argument of 1 selects the second
header of the given type). This is sometime useful for
ignoring bogus envelope headers created by an ISP&rsquo;s
local delivery agent or internal forwards (through mail
inspection systems, for instance).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Keywords Not
Corresponding To Option Switches</b> <br>
The &rsquo;folder&rsquo; and &rsquo;smtphost&rsquo; options
(unlike their command-line equivalents) can take a space- or
comma-separated list of names following them.</p>

<p style="margin-left:11%; margin-top: 1em">All options
correspond to the obvious command-line arguments, except the
following: &rsquo;via&rsquo;, &rsquo;interval&rsquo;,
&rsquo;aka&rsquo;, &rsquo;is&rsquo;, &rsquo;to&rsquo;,
&rsquo;dns&rsquo;/&rsquo;no dns&rsquo;,
&rsquo;checkalias&rsquo;/&rsquo;no checkalias&rsquo;,
&rsquo;password&rsquo;, &rsquo;preconnect&rsquo;,
&rsquo;postconnect&rsquo;, &rsquo;localdomains&rsquo;,
&rsquo;stripcr&rsquo;/&rsquo;no stripcr&rsquo;,
&rsquo;forcecr&rsquo;/&rsquo;no forcecr&rsquo;,
&rsquo;pass8bits&rsquo;/&rsquo;no pass8bits&rsquo;
&rsquo;dropstatus/no dropstatus&rsquo;,
&rsquo;dropdelivered/no dropdelivered&rsquo;,
&rsquo;mimedecode/no mimedecode&rsquo;, &rsquo;no
idle&rsquo;, and &rsquo;no envelope&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;via&rsquo; option is for if you want to have more
than one configuration pointing at the same site. If it is
present, the string argument will be taken as the actual DNS
name of the mailserver host to query. This will override the
argument of poll, which can then simply be a distinct label
for the configuration (e.g. what you would give on the
command line to explicitly query this host).</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;interval&rsquo; option (which takes a numeric
argument) allows you to poll a server less frequently than
the basic poll interval. If you say &rsquo;interval N&rsquo;
the server this option is attached to will only be queried
every N poll intervals.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Singledrop
vs. Multidrop options</b> <br>
Please ensure you read the section titled <b>THE USE AND
ABUSE OF MULTIDROP MAILBOXES</b> if you intend to use
multidrop mode.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;is&rsquo; or &rsquo;to&rsquo; keywords associate the
following local (client) name(s) (or server-name to
client-name mappings separated by =) with the mailserver
user name in the entry. If an is/to list has &rsquo;*&rsquo;
as its last name, unrecognized names are simply passed
through. Note that until <b>fetchmail</b> version 6.3.4
inclusively, these lists could only contain local parts of
user names (fetchmail would only look at the part before the
@ sign). <b>fetchmail</b> versions 6.3.5 and newer support
full addresses on the left hand side of these mappings, and
they take precedence over any &rsquo;localdomains&rsquo;,
&rsquo;aka&rsquo;, &rsquo;via&rsquo; or similar
mappings.</p>

<p style="margin-left:11%; margin-top: 1em">A single local
name can be used to support redirecting your mail when your
username on the client machine is different from your name
on the mailserver. When there is only a single local name,
mail is forwarded to that local username regardless of the
message&rsquo;s Received, To, Cc, and Bcc headers. In this
case, <b>fetchmail</b> never does DNS lookups.</p>

<p style="margin-left:11%; margin-top: 1em">When there is
more than one local name (or name mapping), <b>fetchmail</b>
looks at the envelope header, if configured, and otherwise
at the Received, To, Cc, and Bcc headers of retrieved mail
(this is &rsquo;multidrop mode&rsquo;). It looks for
addresses with hostname parts that match your poll name or
your &rsquo;via&rsquo;, &rsquo;aka&rsquo; or
&rsquo;localdomains&rsquo; options, and usually also for
hostname parts which DNS tells it are aliases of the
mailserver. See the discussion of &rsquo;dns&rsquo;,
&rsquo;checkalias&rsquo;, &rsquo;localdomains&rsquo;, and
&rsquo;aka&rsquo; for details on how matching addresses are
handled.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>fetchmail</b> cannot match any mailserver usernames or
localdomain addresses, the mail will be bounced. Normally it
will be bounced to the sender, but if the
&rsquo;bouncemail&rsquo; global option is off, the mail will
go to the local postmaster instead. (see the
&rsquo;postmaster&rsquo; global option). See also BUGS.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;dns&rsquo; option (normally on) controls the way
addresses from multidrop mailboxes are checked. On, it
enables logic to check each host address that does not match
an &rsquo;aka&rsquo; or &rsquo;localdomains&rsquo;
declaration by looking it up with DNS. When a mailserver
username is recognized attached to a matching hostname part,
its local mapping is added to the list of local
recipients.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;checkalias&rsquo; option (normally off) extends the
lookups performed by the &rsquo;dns&rsquo; keyword in
multidrop mode, providing a way to cope with remote MTAs
that identify themselves using their canonical name, while
they&rsquo;re polled using an alias. When such a server is
polled, checks to extract the envelope address fail, and
<b>fetchmail</b> reverts to delivery using the To/Cc/Bcc
headers (See below &rsquo;Header vs. Envelope
addresses&rsquo;). Specifying this option instructs
<b>fetchmail</b> to retrieve all the IP addresses associated
with both the poll name and the name used by the remote MTA
and to do a comparison of the IP addresses. This comes in
handy in situations where the remote server undergoes
frequent canonical name changes, that would otherwise
require modifications to the rcfile.
&rsquo;checkalias&rsquo; has no effect if &rsquo;no
dns&rsquo; is specified in the rcfile.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;aka&rsquo; option is for use with multidrop
mailboxes. It allows you to pre-declare a list of DNS
aliases for a server. This is an optimization hack that
allows you to trade space for speed. When <b>fetchmail</b>,
while processing a multidrop mailbox, grovels through
message headers looking for names of the mailserver,
pre-declaring common ones can save it from having to do DNS
lookups. Note: the names you give as arguments to
&rsquo;aka&rsquo; are matched as suffixes -- if you specify
(say) &rsquo;aka netaxs.com&rsquo;, this will match not just
a hostname netaxs.com, but any hostname that ends with
&rsquo;.netaxs.com&rsquo;; such as (say) pop3.netaxs.com and
mail.netaxs.com.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;localdomains&rsquo; option allows you to declare a
list of domains which fetchmail should consider local. When
fetchmail is parsing address lines in multidrop modes, and a
trailing segment of a host name matches a declared local
domain, that address is passed through to the listener or
MDA unaltered (local-name mappings are <i>not</i>
applied).</p>

<p style="margin-left:11%; margin-top: 1em">If you are
using &rsquo;localdomains&rsquo;, you may also need to
specify &rsquo;no envelope&rsquo;, which disables
<b>fetchmail</b>&rsquo;s normal attempt to deduce an
envelope address from the Received line or X-Envelope-To
header or whatever header has been previously set by
&rsquo;envelope&rsquo;. If you set &rsquo;no envelope&rsquo;
in the defaults entry it is possible to undo that in
individual entries by using &rsquo;envelope
&lt;string&gt;&rsquo;. As a special case, &rsquo;envelope
&quot;Received&quot;&rsquo; restores the default parsing of
Received lines.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>password</b> option requires a string argument, which is
the password to be used with the entry&rsquo;s server.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;preconnect&rsquo; keyword allows you to specify a
shell command to be executed just before each time
<b>fetchmail</b> establishes a mailserver connection. This
may be useful if you are attempting to set up secure POP
connections with the aid of <b>ssh</b>(1). If the command
returns a nonzero status, the poll of that mailserver will
be aborted.</p>

<p style="margin-left:11%; margin-top: 1em">Similarly, the
&rsquo;postconnect&rsquo; keyword similarly allows you to
specify a shell command to be executed just after each time
a mailserver connection is taken down.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;forcecr&rsquo; option controls whether lines
terminated by LF only are given CRLF termination before
forwarding. Strictly speaking RFC821 requires this, but few
MTAs enforce the requirement it so this option is normally
off (only one such MTA, qmail, is in significant use at time
of writing).</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;stripcr&rsquo; option controls whether carriage
returns are stripped out of retrieved mail before it is
forwarded. It is normally not necessary to set this, because
it defaults to &rsquo;on&rsquo; (CR stripping enabled) when
there is an MDA declared but &rsquo;off&rsquo; (CR stripping
disabled) when forwarding is via SMTP. If
&rsquo;stripcr&rsquo; and &rsquo;forcecr&rsquo; are both on,
&rsquo;stripcr&rsquo; will override.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;pass8bits&rsquo; option exists to cope with Microsoft
mail programs that stupidly slap a
&quot;Content-Transfer-Encoding: 7bit&quot; on everything.
With this option off (the default) and such a header
present, <b>fetchmail</b> declares BODY=7BIT to an
ESMTP-capable listener; this causes problems for messages
actually using 8-bit ISO or KOI-8 character sets, which will
be garbled by having the high bits of all characters
stripped. If &rsquo;pass8bits&rsquo; is on, <b>fetchmail</b>
is forced to declare BODY=8BITMIME to any ESMTP-capable
listener. If the listener is 8-bit-clean (as all the major
ones now are) the right thing will probably result.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;dropstatus&rsquo; option controls whether nonempty
Status and X-Mozilla-Status lines are retained in fetched
mail (the default) or discarded. Retaining them allows your
MUA to see what messages (if any) were marked seen on the
server. On the other hand, it can confuse some new-mail
notifiers, which assume that anything with a Status line in
it has been seen. (Note: the empty Status lines inserted by
some buggy POP servers are unconditionally discarded.)</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;dropdelivered&rsquo; option controls whether
Delivered&minus;To headers will be kept in fetched mail (the
default) or discarded. These headers are added by Qmail and
Postfix mailservers in order to avoid mail loops but may get
in your way if you try to &quot;mirror&quot; a mailserver
within the same domain. Use with caution.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;mimedecode&rsquo; option controls whether MIME
messages using the quoted-printable encoding are
automatically converted into pure 8-bit data. If you are
delivering mail to an ESMTP-capable, 8-bit-clean listener
(that includes all of the major MTAs like sendmail), then
this will automatically convert quoted-printable message
headers and data into 8-bit data, making it easier to
understand when reading mail. If your e-mail programs know
how to deal with MIME messages, then this option is not
needed. The mimedecode option is off by default, because
doing RFC2047 conversion on headers throws away
character-set information and can lead to bad results if the
encoding of the headers differs from the body encoding.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;idle&rsquo; option is intended to be used with IMAP
servers supporting the RFC2177 IDLE command extension, but
does not strictly require it. If it is enabled, and
fetchmail detects that IDLE is supported, an IDLE will be
issued at the end of each poll. This will tell the IMAP
server to hold the connection open and notify the client
when new mail is available. If IDLE is not supported,
fetchmail will simulate it by periodically issuing NOOP. If
you need to poll a link frequently, IDLE can save bandwidth
by eliminating TCP/IP connects and LOGIN/LOGOUT sequences.
On the other hand, an IDLE connection will eat almost all of
your fetchmail&rsquo;s time, because it will never drop the
connection and allow other polls to occur unless the server
times out the IDLE. It also doesn&rsquo;t work with multiple
folders; only the first folder will ever be polled.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;properties&rsquo; option is an extension mechanism.
It takes a string argument, which is ignored by fetchmail
itself. The string argument may be used to store
configuration information for scripts which require it. In
particular, the output of
&rsquo;&minus;&minus;configdump&rsquo; option will make
properties associated with a user entry readily available to
a Python script.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
Run Control Options</b> <br>
The words &rsquo;here&rsquo; and &rsquo;there&rsquo; have
useful English-like significance. Normally &rsquo;user eric
is esr&rsquo; would mean that mail for the remote user
&rsquo;eric&rsquo; is to be delivered to &rsquo;esr&rsquo;,
but you can make this clearer by saying &rsquo;user eric
there is esr here&rsquo;, or reverse it by saying
&rsquo;user esr here is eric there&rsquo;</p>

<p style="margin-left:11%; margin-top: 1em">Legal protocol
identifiers for use with the &rsquo;protocol&rsquo; keyword
are:</p>

<p style="margin-left:11%; margin-top: 1em">auto (or AUTO)
(legacy, to be removed from future release) <br>
pop2 (or POP2) (legacy, to be removed from future release)
<br>
pop3 (or POP3) <br>
sdps (or SDPS) <br>
imap (or IMAP) <br>
apop (or APOP) <br>
kpop (or KPOP)</p>

<p style="margin-left:11%; margin-top: 1em">Legal
authentication types are &rsquo;any&rsquo;,
&rsquo;password&rsquo;, &rsquo;kerberos&rsquo;,
&rsquo;kerberos_v4&rsquo;, &rsquo;kerberos_v5&rsquo; and
&rsquo;gssapi&rsquo;, &rsquo;cram&minus;md5&rsquo;,
&rsquo;otp&rsquo;, &rsquo;msn&rsquo; (only for POP3),
&rsquo;ntlm&rsquo;, &rsquo;ssh&rsquo;,
&rsquo;external&rsquo; (only IMAP). The
&rsquo;password&rsquo; type specifies authentication by
normal transmission of a password (the password may be plain
text or subject to protocol-specific encryption as in
CRAM-MD5); &rsquo;kerberos&rsquo; tells <b>fetchmail</b> to
try to get a Kerberos ticket at the start of each query
instead, and send an arbitrary string as the password; and
&rsquo;gssapi&rsquo; tells fetchmail to use GSSAPI
authentication. See the description of the
&rsquo;auth&rsquo; keyword for more.</p>

<p style="margin-left:11%; margin-top: 1em">Specifying
&rsquo;kpop&rsquo; sets POP3 protocol over port 1109 with
Kerberos V4 authentication. These defaults may be overridden
by later options.</p>

<p style="margin-left:11%; margin-top: 1em">There are some
global option statements: &rsquo;set logfile&rsquo; followed
by a string sets the same global specified by
&minus;&minus;logfile. A command-line &minus;&minus;logfile
option will override this. Note that &minus;&minus;logfile
is only effective if fetchmail detaches itself from the
terminal and the logfile already exists before fetchmail is
run, and it overrides &minus;&minus;syslog in this case.
Also, &rsquo;set daemon&rsquo; sets the poll interval as
&minus;&minus;daemon does. This can be overridden by a
command-line &minus;&minus;daemon option; in particular
&minus;&minus;daemon&nbsp;0 can be used to force foreground
operation. The &rsquo;set postmaster&rsquo; statement sets
the address to which multidrop mail defaults if there are no
local matches. Finally, &rsquo;set syslog&rsquo; sends log
messages to syslogd(8).</p>

<h2>DEBUGGING FETCHMAIL
<a name="DEBUGGING FETCHMAIL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Fetchmail
crashing</b> <br>
There are various ways in that fetchmail may
&quot;crash&quot;, i. e. stop operation suddenly and
unexpectedly. A &quot;crash&quot; usually refers to an error
condition that the software did not handle by itself. A
well-known failure mode is the &quot;segmentation
fault&quot; or &quot;signal 11&quot; or &quot;SIGSEGV&quot;
or just &quot;segfault&quot; for short. These can be caused
by hardware or by software problems. Software-induced
segfaults can usually be reproduced easily and in the same
place, whereas hardware-induced segfaults can go away if the
computer is rebooted, or powered off for a few hours, and
can happen in random locations even if you use the software
the same way.</p>

<p style="margin-left:11%; margin-top: 1em">For solving
hardware-induced segfaults, find the faulty component and
repair or replace it.
<a href="http://www.bitwizard.nl/sig11/">The Sig11 FAQ</a>
may help you with details.</p>

<p style="margin-left:11%; margin-top: 1em">For solving
software-induced segfaults, the developers may need a
&quot;stack backtrace&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Enabling
fetchmail core dumps</b> <br>
By default, fetchmail suppresses core dumps as these might
contain passwords and other sensitive information. For
debugging fetchmail crashes, obtaining a &quot;stack
backtrace&quot; from a core dump is often the quickest way
to solve the problem, and when posting your problem on a
mailing list, the developers may ask you for a
&quot;backtrace&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">1. To get
useful backtraces, fetchmail needs to be installed without
getting stripped of its compilation symbols. Unfortunately,
most binary packages that are installed are stripped, and
core files from symbol-stripped programs are worthless. So
you may need to recompile fetchmail. On many systems, you
can type</p>

<p style="margin-left:11%; margin-top: 1em">file
&lsquo;which fetchmail&lsquo;</p>

<p style="margin-left:11%; margin-top: 1em">to find out if
fetchmail was symbol-stripped or not. If yours was
unstripped, fine, proceed, if it was stripped, you need to
recompile the source code first. You do not usually need to
install fetchmail in order to debug it.</p>

<p style="margin-left:11%; margin-top: 1em">2. The shell
environment that starts fetchmail needs to enable core
dumps. The key is the &quot;maximum core (file) size&quot;
that can usually be configured with a tool named
&quot;limit&quot; or &quot;ulimit&quot;. See the
documentation for your shell for details. In the popular
bash shell, &quot;ulimit &minus;Sc unlimited&quot; will
allow the core dump.</p>

<p style="margin-left:11%; margin-top: 1em">3. You need to
tell fetchmail, too, to allow core dumps. To do this, run
fetchmail with the <b>&minus;d0 &minus;v</b> options. It is
often easier to also add <b>&minus;&minus;nosyslog
&minus;N</b> as well.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, you
need to reproduce the crash. You can just start fetchmail
from the directory where you compiled it by typing
<b>./fetchmail</b>, so the complete command line will start
with <b>./fetchmail &minus;Nvd0 &minus;&minus;nosyslog</b>
and perhaps list your other options.</p>

<p style="margin-left:11%; margin-top: 1em">After the
crash, run your debugger to obtain the core dump. The
debugger will often be GNU GDB, you can then type (adjust
paths as necessary) <b>gdb ./fetchmail fetchmail.core</b>
and then, after GDB has started up and read all its files,
type <b>backtrace full</b>, save the output (copy &amp;
paste will do, the backtrace will be read by a human) and
then type <b>quit</b> to leave gdb. <b>Note:</b> on some
systems, the core files have different names, they might
contain a number instead of the program name, or number and
name, but it will usually have &quot;core&quot; as part of
their name.</p>

<h2>INTERACTION WITH RFC 822
<a name="INTERACTION WITH RFC 822"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When trying to
determine the originating address of a message, fetchmail
looks through headers in the following order:</p>

<p style="margin-left:11%; margin-top: 1em">Return-Path:
<br>
Resent-Sender: (ignored if it doesn&rsquo;t contain an @ or
!) <br>
Sender: (ignored if it doesn&rsquo;t contain an @ or !) <br>
Resent-From: <br>
From: <br>
Reply-To: <br>
Apparently-From:</p>

<p style="margin-left:11%; margin-top: 1em">The originating
address is used for logging, and to set the MAIL FROM
address when forwarding to SMTP. This order is intended to
cope gracefully with receiving mailing list messages in
multidrop mode. The intent is that if a local address
doesn&rsquo;t exist, the bounce message won&rsquo;t be
returned blindly to the author or to the list itself, but
rather to the list manager (which is less annoying).</p>

<p style="margin-left:11%; margin-top: 1em">In multidrop
mode, destination headers are processed as follows: First,
fetchmail looks for the header specified by the
&rsquo;envelope&rsquo; option in order to determine the
local recipient address. If the mail is addressed to more
than one recipient, the Received line won&rsquo;t contain
any information regarding recipient addresses.</p>

<p style="margin-left:11%; margin-top: 1em">Then fetchmail
looks for the Resent-To:, Resent-Cc:, and Resent-Bcc: lines.
If they exist, they should contain the final recipients and
have precedence over their To:/Cc:/Bcc: counterparts. If the
Resent&minus;* lines don&rsquo;t exist, the To:, Cc:, Bcc:
and Apparently-To: lines are looked for. (The presence of a
Resent&minus;To: is taken to imply that the person referred
by the To: address has already received the original copy of
the mail.)</p>

<h2>CONFIGURATION EXAMPLES
<a name="CONFIGURATION EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Note that
although there are password declarations in a good many of
the examples below, this is mainly for illustrative
purposes. We recommend stashing account/password pairs in
your $HOME/.netrc file, where they can be used not just by
fetchmail but by ftp(1) and other programs.</p>

<p style="margin-left:11%; margin-top: 1em">The basic
format is:</p>

<p style="margin-left:22%; margin-top: 1em">poll
<i>SERVERNAME</i> protocol <i>PROTOCOL</i> username
<i>NAME</i> password <i>PASSWORD</i></p>

<p style="margin-left:11%; margin-top: 1em">Example:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net protocol pop3 username &quot;jsmith&quot;
password &quot;secret1&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Or, using some
abbreviations:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net proto pop3 user &quot;jsmith&quot; password
&quot;secret1&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Multiple
servers may be listed:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net proto pop3 user &quot;jsmith&quot; pass
&quot;secret1&quot; <br>
poll other.provider.net proto pop2 user
&quot;John.Smith&quot; pass &quot;My^Hat&quot;</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s
the same version with more whitespace and some noise
words:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net proto pop3 <br>
user &quot;jsmith&quot;, with password secret1, is
&quot;jsmith&quot; here; <br>
poll other.provider.net proto pop2: <br>
user &quot;John.Smith&quot;, with password
&quot;My^Hat&quot;, is &quot;John.Smith&quot; here;</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
include whitespace in a parameter string or start the latter
with a number, enclose the string in double quotes.
Thus:</p>

<p style="margin-left:22%; margin-top: 1em">poll
mail.provider.net with proto pop3: <br>
user &quot;jsmith&quot; there has password &quot;4u but u
can&rsquo;t krak this&quot; <br>
is jws here and wants mda &quot;/bin/mail&quot;</p>

<p style="margin-left:11%; margin-top: 1em">You may have an
initial server description headed by the keyword
&rsquo;defaults&rsquo; instead of &rsquo;poll&rsquo;
followed by a name. Such a record is interpreted as defaults
for all queries to use. It may be overwritten by individual
server descriptions. So, you could write:</p>

<p style="margin-left:22%; margin-top: 1em">defaults proto
pop3 <br>
user &quot;jsmith&quot; <br>
poll pop.provider.net <br>
pass &quot;secret1&quot; <br>
poll mail.provider.net <br>
user &quot;jjsmith&quot; there has password
&quot;secret2&quot;</p>

<p style="margin-left:11%; margin-top: 1em">It&rsquo;s
possible to specify more than one user per server. The
&rsquo;user&rsquo; keyword leads off a user description, and
every user specification in a multi-user entry must include
it. Here&rsquo;s an example:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net proto pop3 port 3111 <br>
user &quot;jsmith&quot; with pass &quot;secret1&quot; is
&quot;smith&quot; here <br>
user jones with pass &quot;secret2&quot; is
&quot;jjones&quot; here keep</p>

<p style="margin-left:11%; margin-top: 1em">This associates
the local username &rsquo;smith&rsquo; with the
pop.provider.net username &rsquo;jsmith&rsquo; and the local
username &rsquo;jjones&rsquo; with the pop.provider.net
username &rsquo;jones&rsquo;. Mail for &rsquo;jones&rsquo;
is kept on the server after download.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s
what a simple retrieval configuration for a multidrop
mailbox looks like:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net: <br>
user maildrop with pass secret1 to golux
&rsquo;hurkle&rsquo;=&rsquo;happy&rsquo; snark here</p>

<p style="margin-left:11%; margin-top: 1em">This says that
the mailbox of account &rsquo;maildrop&rsquo; on the server
is a multidrop box, and that messages in it should be parsed
for the server user names &rsquo;golux&rsquo;,
&rsquo;hurkle&rsquo;, and &rsquo;snark&rsquo;. It further
specifies that &rsquo;golux&rsquo; and &rsquo;snark&rsquo;
have the same name on the client as on the server, but mail
for server user &rsquo;hurkle&rsquo; should be delivered to
client user &rsquo;happy&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b>
that <b>fetchmail,</b> until version 6.3.4, did NOT allow
full user@domain specifications here, these would never
match. <i>Fetchmail</i> 6.3.5 and newer support user@domain
specifications on the left-hand side of a user mapping.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s an
example of another kind of multidrop connection:</p>

<p style="margin-left:22%; margin-top: 1em">poll
pop.provider.net localdomains loonytoons.org toons.org <br>
envelope X-Envelope-To <br>
user maildrop with pass secret1 to * here</p>

<p style="margin-left:11%; margin-top: 1em">This also says
that the mailbox of account &rsquo;maildrop&rsquo; on the
server is a multidrop box. It tells fetchmail that any
address in the loonytoons.org or toons.org domains
(including sub-domain addresses like
&rsquo;joe@daffy.loonytoons.org&rsquo;) should be passed
through to the local SMTP listener without modification. Be
careful of mail loops if you do this!</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s an
example configuration using ssh and the plugin option. The
queries are made directly on the stdin and stdout of imapd
via ssh. Note that in this setup, IMAP authentication can be
skipped.</p>

<p style="margin-left:22%; margin-top: 1em">poll
mailhost.net with proto imap: <br>
plugin &quot;ssh %h /usr/sbin/imapd&quot; auth ssh; <br>
user esr is esr here</p>

<h2>THE USE AND ABUSE OF MULTIDROP MAILBOXES
<a name="THE USE AND ABUSE OF MULTIDROP MAILBOXES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use the
multiple-local-recipients feature with caution -- it can
bite. All multidrop features are ineffective in ETRN and
ODMR modes.</p>

<p style="margin-left:11%; margin-top: 1em">Also, note that
in multidrop mode duplicate mails are suppressed. A piece of
mail is considered duplicate if it has the same message-ID
as the message immediately preceding and more than one
addressee. Such runs of messages may be generated when
copies of a message addressed to multiple users are
delivered to a multidrop box.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Header vs.
Envelope addresses</b> <br>
The fundamental problem is that by having your mailserver
toss several peoples&rsquo; mail in a single maildrop box,
you may have thrown away potentially vital information about
who each piece of mail was actually addressed to (the
&rsquo;envelope address&rsquo;, as opposed to the header
addresses in the RFC822 To/Cc headers - the Bcc is not
available at the receiving end). This &rsquo;envelope
address&rsquo; is the address you need in order to reroute
mail properly.</p>

<p style="margin-left:11%; margin-top: 1em">Sometimes
<b>fetchmail</b> can deduce the envelope address. If the
mailserver MTA is <b>sendmail</b> and the item of mail had
just one recipient, the MTA will have written a
&rsquo;by/for&rsquo; clause that gives the envelope
addressee into its Received header. But this doesn&rsquo;t
work reliably for other MTAs, nor if there is more than one
recipient. By default, <b>fetchmail</b> looks for envelope
addresses in these lines; you can restore this default with
&minus;E &quot;Received&quot; or &rsquo;envelope
Received&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>As a better
alternative,</b> some SMTP listeners and/or mail servers
insert a header in each message containing a copy of the
envelope addresses. This header (when it exists) is often
&rsquo;X&minus;Original&minus;To&rsquo;,
&rsquo;Delivered&minus;To&rsquo; or
&rsquo;X&minus;Envelope&minus;To&rsquo;. Fetchmail&rsquo;s
assumption about this can be changed with the &minus;E or
&rsquo;envelope&rsquo; option. Note that writing an envelope
header of this kind exposes the names of recipients
(including blind-copy recipients) to all receivers of the
messages, so the upstream must store one copy of the message
per recipient to avoid becoming a privacy problem.</p>

<p style="margin-left:11%; margin-top: 1em">Postfix, since
version 2.0, writes an X&minus;Original&minus;To: header
which contains a copy of the envelope as it was
received.</p>

<p style="margin-left:11%; margin-top: 1em">Qmail and
Postfix generally write a &rsquo;Delivered&minus;To&rsquo;
header upon delivering the message to the mail spool and use
it to avoid mail loops. Qmail virtual domains however will
prefix the user name with a string that normally matches the
user&rsquo;s domain. To remove this prefix you can use the
&minus;Q or &rsquo;qvirtual&rsquo; option.</p>

<p style="margin-left:11%; margin-top: 1em">Sometimes,
unfortunately, neither of these methods works. That is the
point when you should contact your ISP and ask them to
provide such an envelope header, and you should not use
multidrop in this situation. When they all fail, fetchmail
must fall back on the contents of To/Cc headers (Bcc headers
are not available - see below) to try to determine recipient
addressees -- and these are unreliable. In particular,
mailing-list software often ships mail with only the list
broadcast address in the To header.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note that a
future version of fetchmail may remove To/Cc
parsing!</b></p>

<p style="margin-left:11%; margin-top: 1em">When
<b>fetchmail</b> cannot deduce a recipient address that is
local, and the intended recipient address was anyone other
than fetchmail&rsquo;s invoking user, <b>mail will get
lost.</b> This is what makes the multidrop feature risky
without proper envelope information.</p>

<p style="margin-left:11%; margin-top: 1em">A related
problem is that when you blind-copy a mail message, the Bcc
information is carried <i>only</i> as envelope address
(it&rsquo;s removed from the headers by the sending mail
server, so fetchmail can see it only if there is an
X&minus;Envelope&minus;To header). Thus, blind-copying to
someone who gets mail over a fetchmail multidrop link will
fail unless the the mailserver host routinely writes
X&minus;Envelope&minus;To or an equivalent header into
messages in your maildrop.</p>

<p style="margin-left:11%; margin-top: 1em"><b>In
conclusion, mailing lists and Bcc&rsquo;d mail can only work
if the server you&rsquo;re fetching from</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>(1)</p></td>
<td width="7%"></td>
<td width="78%">


<p><b>stores one copy of the message per recipient in your
domain and</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>(2)</p></td>
<td width="7%"></td>
<td width="78%">


<p><b>records the envelope information in a special header
(X&minus;Original&minus;To, Delivered&minus;To,
X&minus;Envelope&minus;To).</b></p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Good Ways To
Use Multidrop Mailboxes</b> <br>
Multiple local names can be used to administer a mailing
list from the client side of a <b>fetchmail</b> collection.
Suppose your name is &rsquo;esr&rsquo;, and you want to both
pick up your own mail and maintain a mailing list called
(say) &quot;fetchmail-friends&quot;, and you want to keep
the alias list on your client machine.</p>

<p style="margin-left:11%; margin-top: 1em">On your server,
you can alias &rsquo;fetchmail&minus;friends&rsquo; to
&rsquo;esr&rsquo;; then, in your <i>.fetchmailrc</i>,
declare &rsquo;to esr fetchmail&minus;friends here&rsquo;.
Then, when mail including
&rsquo;fetchmail&minus;friends&rsquo; as a local address
gets fetched, the list name will be appended to the list of
recipients your SMTP listener sees. Therefore it will
undergo alias expansion locally. Be sure to include
&rsquo;esr&rsquo; in the local alias expansion of
fetchmail&minus;friends, or you&rsquo;ll never see mail sent
only to the list. Also be sure that your listener has the
&quot;me-too&quot; option set (sendmail&rsquo;s &minus;oXm
command-line option or OXm declaration) so your name
isn&rsquo;t removed from alias expansions in messages you
send.</p>

<p style="margin-left:11%; margin-top: 1em">This trick is
not without its problems, however. You&rsquo;ll begin to see
this when a message comes in that is addressed only to a
mailing list you do <i>not</i> have declared as a local
name. Each such message will feature an
&rsquo;X&minus;Fetchmail&minus;Warning&rsquo; header which
is generated because fetchmail cannot find a valid local
name in the recipient addresses. Such messages default (as
was described above) to being sent to the local user running
<b>fetchmail</b>, but the program has no way to know that
that&rsquo;s actually the right thing.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Bad Ways To
Abuse Multidrop Mailboxes</b> <br>
Multidrop mailboxes and <b>fetchmail</b> serving multiple
users in daemon mode do not mix. The problem, again, is mail
from mailing lists, which typically does not have an
individual recipient address on it. Unless <b>fetchmail</b>
can deduce an envelope address, such mail will only go to
the account running fetchmail (probably root). Also,
blind-copied users are very likely never to see their mail
at all.</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
tempted to use <b>fetchmail</b> to retrieve mail for
multiple users from a single mail drop via POP or IMAP,
think again (and reread the section on header and envelope
addresses above). It would be smarter to just let the mail
sit in the mailserver&rsquo;s queue and use
fetchmail&rsquo;s ETRN or ODMR modes to trigger SMTP sends
periodically (of course, this means you have to poll more
frequently than the mailserver&rsquo;s expiry period). If
you can&rsquo;t arrange this, try setting up a UUCP
feed.</p>

<p style="margin-left:11%; margin-top: 1em">If you
absolutely <i>must</i> use multidrop for this purpose, make
sure your mailserver writes an envelope-address header that
fetchmail can see. Otherwise you <i>will</i> lose mail and
it <i>will</i> come back to haunt you.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Speeding Up
Multidrop Checking</b> <br>
Normally, when multiple users are declared <b>fetchmail</b>
extracts recipient addresses as described above and checks
each host part with DNS to see if it&rsquo;s an alias of the
mailserver. If so, the name mappings described in the
&quot;to ... here&quot; declaration are done and the mail
locally delivered.</p>

<p style="margin-left:11%; margin-top: 1em">This is a
convenient but also slow method. To speed it up, pre-declare
mailserver aliases with &rsquo;aka&rsquo;; these are checked
before DNS lookups are done. If you&rsquo;re certain your
aka list contains <b>all</b> DNS aliases of the mailserver
(and all MX names pointing at it - note this may change in a
future version) you can declare &rsquo;no dns&rsquo; to
suppress DNS lookups entirely and <i>only</i> match against
the aka list.</p>

<h2>SOCKS
<a name="SOCKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Support for
socks4/5 is a <b>compile time</b> configuration option. Once
compiled in, fetchmail will always use the socks libraries
and configuration on your system, there are no run-time
switches in fetchmail - but you can still configure SOCKS:
you can specify which SOCKS configuration file is used in
the <b>SOCKS_CONF</b> environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">For instance,
if you wanted to bypass the SOCKS proxy altogether and have
fetchmail connect directly, you could just pass
SOCKS_CONF=/dev/null in the environment, for example (add
your usual command line options - if any - to the end of
this line):</p>

<p style="margin-left:11%; margin-top: 1em">env
SOCKS_CONF=/dev/null fetchmail</p>

<h2>EXIT CODES
<a name="EXIT CODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To facilitate
the use of <b>fetchmail</b> in shell scripts, an
exit&nbsp;status code is returned to give an indication of
what occurred during a given connection.</p>

<p style="margin-left:11%; margin-top: 1em">The exit codes
returned by <b>fetchmail</b> are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">0</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">One or more messages were
successfully retrieved (or, if the &minus;c option was
selected, were found waiting but not retrieved).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>1</p></td>
<td width="10%"></td>
<td width="78%">


<p>There was no mail awaiting retrieval. (There may have
been old mail still on the server but not selected for
retrieval.) If you do not want &quot;no mail&quot; to be an
error condition (for instance, for cron jobs), use a
POSIX-compliant shell and add</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">|| [ $?
&minus;eq 1 ]</p>

<p style="margin-left:22%; margin-top: 1em">to the end of
the fetchmail command line, note that this leaves 0
untouched, maps 1 to 0, and maps all other codes to 1. See
also item #C8 in the FAQ.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2</p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">An error was encountered when
attempting to open a socket to retrieve mail. If you
don&rsquo;t know what a socket is, don&rsquo;t worry about
it -- just treat this as an &rsquo;unrecoverable
error&rsquo;. This error can also be because a protocol
fetchmail wants to use is not listed in /etc/services.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3</p></td>
<td width="8%"></td>
<td width="78%">


<p>The user authentication step failed. This usually means
that a bad user-id, password, or APOP id was specified. Or
it may mean that you tried to run fetchmail under
circumstances where it did not have standard input attached
to a terminal and could not prompt for a missing
password.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>4</p></td>
<td width="8%"></td>
<td width="78%">


<p>Some sort of fatal protocol error was detected.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>5</p></td>
<td width="8%"></td>
<td width="78%">


<p>There was a syntax error in the arguments to
<b>fetchmail</b>, or a pre- or post-connect command
failed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>6</p></td>
<td width="8%"></td>
<td width="78%">


<p>The run control file had bad permissions.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>7</p></td>
<td width="8%"></td>
<td width="78%">


<p>There was an error condition reported by the server. Can
also fire if <b>fetchmail</b> timed out while waiting for
the server.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>8</p></td>
<td width="8%"></td>
<td width="78%">


<p>Client-side exclusion error. This means <b>fetchmail</b>
either found another copy of itself already running, or
failed in such a way that it isn&rsquo;t sure whether
another copy is running.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>9</p></td>
<td width="8%"></td>
<td width="78%">


<p>The user authentication step failed because the server
responded &quot;lock busy&quot;. Try again after a brief
pause! This error is not implemented for all protocols, nor
for all servers. If not implemented for your server,
&quot;3&quot; will be returned instead, see above. May be
returned when talking to qpopper or other servers that can
respond with &quot;lock busy&quot; or some similar text
containing the word &quot;lock&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>10</p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>fetchmail</b> run failed while trying to do an
SMTP port open or transaction.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>11</p></td>
<td width="8%"></td>
<td width="78%">


<p>Fatal DNS error. Fetchmail encountered an error while
performing a DNS lookup at startup and could not
proceed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>12</p></td>
<td width="8%"></td>
<td width="78%">


<p>BSMTP batch file could not be opened.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>13</p></td>
<td width="8%"></td>
<td width="78%">


<p>Poll terminated by a fetch limit (see the
&minus;&minus;fetchlimit option).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>14</p></td>
<td width="8%"></td>
<td width="78%">


<p>Server busy indication.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>23</p></td>
<td width="8%"></td>
<td width="78%">


<p>Internal error. You should see a message on standard
error with details.</p></td></tr>
</table>

<p style="margin-left:11%;">24 - 26, 28, 29</p>

<p style="margin-left:22%;">These are internal codes and
should not appear externally.</p>

<p style="margin-left:11%; margin-top: 1em">When
<b>fetchmail</b> queries more than one host, return status
is 0 if <i>any</i> query successfully retrieved mail.
Otherwise the returned error status is that of the last host
queried.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">~/.fetchmailrc</p>

<p style="margin-left:18%;">default run control file</p>

<p style="margin-left:11%;">~/.fetchids</p>

<p style="margin-left:18%;">default location of file
recording last message UIDs seen per host.</p>

<p style="margin-left:11%;">~/.fetchmail.pid</p>

<p style="margin-left:18%;">lock file to help prevent
concurrent runs (non-root mode).</p>

<p style="margin-left:11%;">~/.netrc</p>

<p style="margin-left:18%;">your FTP run control file,
which (if present) will be searched for passwords as a last
resort before prompting for one interactively.</p>

<p style="margin-left:11%;">/var/run/fetchmail.pid</p>

<p style="margin-left:18%;">lock file to help prevent
concurrent runs (root mode, Linux systems).</p>

<p style="margin-left:11%;">/etc/fetchmail.pid</p>

<p style="margin-left:18%;">lock file to help prevent
concurrent runs (root mode, systems without /var/run).</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>FETCHMAILHOME</b></p>

<p style="margin-left:22%;">If this environment variable is
set to a valid and existing directory name, fetchmail will
read $FETCHMAILHOME/fetchmailrc (the dot is missing in this
case), $FETCHMAILHOME/.fetchids and
$FETCHMAILHOME/.fetchmail.pid rather than from the
user&rsquo;s home directory. The .netrc file is always
looked for in the the invoking user&rsquo;s home directory
regardless of FETCHMAILHOME&rsquo;s setting.</p>

<p style="margin-left:11%;"><b>FETCHMAILUSER</b></p>

<p style="margin-left:22%;">If this environment variable is
set, it is used as the name of the calling user (default
local name) for purposes such as mailing error
notifications. Otherwise, if either the LOGNAME or USER
variable is correctly set (e.g. the corresponding UID
matches the session user ID) then that name is used as the
default local name. Otherwise <b>getpwuid</b>(3) must be
able to retrieve a password entry for the session ID (this
elaborate logic is designed to handle the case of multiple
names per userid gracefully).</p>


<p style="margin-left:11%;"><b>FETCHMAIL_DISABLE_CBC_IV_COUNTERMEASURE</b></p>

<p style="margin-left:22%;">(since v6.3.22): If this
environment variable is set and not empty, fetchmail will
disable a countermeasure against an SSL CBC IV attack (by
setting SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS). This is a
security risk, but may be necessary for connecting to
certain non-standards-conforming servers. See
fetchmail&rsquo;s NEWS file and fetchmail-SA-2012-01.txt for
details. Earlier fetchmail versions (v6.3.21 and older) used
to disable this countermeasure, but v6.3.22 no longer does
that as a safety precaution.</p>


<p style="margin-left:11%;"><b>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</b></p>

<p style="margin-left:22%;">(since v6.3.17): If this
environment variable is set and not empty, fetchmail will
always load the default X.509 trusted certificate locations
for SSL/TLS CA certificates, even if
<b>&minus;&minus;sslcertfile</b> and
<b>&minus;&minus;sslcertpath</b> are given. The latter
locations take precedence over the system default locations.
This is useful in case there are broken certificates in the
system directories and the user has no administrator
privileges to remedy the problem.</p>

<p style="margin-left:11%;"><b>HOME_ETC</b></p>

<p style="margin-left:22%;">If the HOME_ETC variable is
set, fetchmail will read $HOME_ETC/.fetchmailrc instead of
~/.fetchmailrc.</p>

<p style="margin-left:22%; margin-top: 1em">If HOME_ETC and
FETCHMAILHOME are both set, HOME_ETC will be ignored.</p>

<p style="margin-left:11%;"><b>SOCKS_CONF</b></p>

<p style="margin-left:22%;">(only if SOCKS support is
compiled in) this variable is used by the socks library to
find out which configuration file it should read. Set this
to /dev/null to bypass the SOCKS proxy.</p>

<h2>SIGNALS
<a name="SIGNALS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a
<b>fetchmail</b> daemon is running as root, SIGUSR1 wakes it
up from its sleep phase and forces a poll of all non-skipped
servers. For compatibility reasons, SIGHUP can also be used
in 6.3.X but may not be available in future fetchmail
versions.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>fetchmail</b> is running in daemon mode as non-root, use
SIGUSR1 to wake it (this is so SIGHUP due to logout can
retain the default action of killing it).</p>

<p style="margin-left:11%; margin-top: 1em">Running
<b>fetchmail</b> in foreground while a background fetchmail
is running will do whichever of these is appropriate to wake
it up.</p>

<h2>BUGS, LIMITATIONS, AND KNOWN PROBLEMS
<a name="BUGS, LIMITATIONS, AND KNOWN PROBLEMS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please check
the <b>NEWS</b> file that shipped with fetchmail for more
known bugs than those listed here.</p>

<p style="margin-left:11%; margin-top: 1em">Fetchmail
cannot handle user names that contain blanks after a
&quot;@&quot; character, for instance &quot;demonstr@ti
on&quot;. These are rather uncommon and only hurt when using
UID-based &minus;&minus;keep setups, so the 6.3.X versions
of fetchmail won&rsquo;t be fixed.</p>

<p style="margin-left:11%; margin-top: 1em">Fetchmail
cannot handle configurations where you have multiple
accounts that use the same server name and the same login.
Any user@server combination must be unique.</p>

<p style="margin-left:11%; margin-top: 1em">The assumptions
that the DNS and in particular the checkalias options make
are not often sustainable. For instance, it has become
uncommon for an MX server to be a POP3 or IMAP server at the
same time. Therefore the MX lookups may go away in a future
release.</p>

<p style="margin-left:11%; margin-top: 1em">The mda and
plugin options interact badly. In order to collect error
status from the MDA, fetchmail has to change its normal
signal handling so that dead plugin processes don&rsquo;t
get reaped until the end of the poll cycle. This can cause
resource starvation if too many zombies accumulate. So
either don&rsquo;t deliver to a MDA using plugins or risk
being overrun by an army of undead.</p>

<p style="margin-left:11%; margin-top: 1em">The
&minus;&minus;interface option does not support IPv6 and it
is doubtful if it ever will, since there is no portable way
to query interface IPv6 addresses.</p>

<p style="margin-left:11%; margin-top: 1em">The RFC822
address parser used in multidrop mode chokes on some
@-addresses that are technically legal but bizarre. Strange
uses of quoting and embedded comments are likely to confuse
it.</p>

<p style="margin-left:11%; margin-top: 1em">In a message
with multiple envelope headers, only the last one processed
will be visible to fetchmail.</p>

<p style="margin-left:11%; margin-top: 1em">Use of some of
these protocols requires that the program send unencrypted
passwords over the TCP/IP connection to the mailserver. This
creates a risk that name/password pairs might be snaffled
with a packet sniffer or more sophisticated monitoring
software. Under Linux and FreeBSD, the
&minus;&minus;interface option can be used to restrict
polling to availability of a specific interface device with
a specific local or remote IP address, but snooping is still
possible if (a) either host has a network device that can be
opened in promiscuous mode, or (b) the intervening network
link can be tapped. We recommend the use of <b>ssh</b>(1)
tunnelling to not only shroud your passwords but encrypt the
entire conversation.</p>

<p style="margin-left:11%; margin-top: 1em">Use of the %F
or %T escapes in an mda option could open a security hole,
because they pass text manipulable by an attacker to a shell
command. Potential shell characters are replaced by
&rsquo;_&rsquo; before execution. The hole is further
reduced by the fact that fetchmail temporarily discards any
suid privileges it may have while running the MDA. For
maximum safety, however, don&rsquo;t use an mda command
containing %F or %T when fetchmail is run from the root
account itself.</p>


<p style="margin-left:11%; margin-top: 1em">Fetchmail&rsquo;s
method of sending bounces due to errors or spam-blocking and
spam bounces requires that port 25 of localhost be available
for sending mail via SMTP.</p>

<p style="margin-left:11%; margin-top: 1em">If you modify
<i>~/.fetchmailrc</i> while a background instance is running
and break the syntax, the background instance will die
silently. Unfortunately, it can&rsquo;t die noisily because
we don&rsquo;t yet know whether syslog should be enabled. On
some systems, fetchmail dies quietly even if there is no
syntax error; this seems to have something to do with buggy
terminal ioctl code in the kernel.</p>

<p style="margin-left:11%; margin-top: 1em">The
&minus;f&nbsp;&minus; option (reading a configuration from
stdin) is incompatible with the plugin option.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;principal&rsquo; option only handles Kerberos IV, not
V.</p>

<p style="margin-left:11%; margin-top: 1em">Interactively
entered passwords are truncated after 63 characters. If you
really need to use a longer password, you will have to use a
configuration file.</p>

<p style="margin-left:11%; margin-top: 1em">A backslash as
the last character of a configuration file will be flagged
as a syntax error rather than ignored.</p>

<p style="margin-left:11%; margin-top: 1em">The BSMTP error
handling is virtually nonexistent and may leave broken
messages behind.</p>

<p style="margin-left:11%; margin-top: 1em">Send comments,
bug reports, gripes, and the like to the
<a href="mailto:fetchmail-devel@lists.berlios.de">fetchmail-devel list</a></p>

<p style="margin-left:11%; margin-top: 1em">An
<a href="http://fetchmail.berlios.de/fetchmail-FAQ.html">HTML FAQ</a>
is available at the fetchmail home page, it should also
accompany your installation.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fetchmail is
currently maintained by Matthias Andree and Rob Funk with
major assistance from Sunil Shetye (for code) and Rob
MacGregor (for the mailing lists).</p>

<p style="margin-left:11%; margin-top: 1em">Most of the
code is from
<a href="mailto:esr@snark.thyrsus.com">Eric S. Raymond</a> .
Too many other people to name here have contributed code and
patches.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
descended from and replaces <b>popclient</b>, by
<a href="mailto:ceharris@mal.com">Carl Harris</a> ; the
internals have become quite different, but some of its
interface design is directly traceable to that ancestral
program.</p>

<p style="margin-left:11%; margin-top: 1em">This manual
page has been improved by Matthias Andree, R.&nbsp;Hannes
Beinert, and H&eacute;ctor Garc&iacute;a.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>README</b>,
<b>README.SSL</b>, <b>README.SSL-SERVER</b>,
<a href="http://www.fetchmail.info/fetchmail-FAQ.html">The Fetchmail FAQ</a>,
<b>mutt</b>(1), <b>elm</b>(1), <b>mail</b>(1),
<b>sendmail</b>(8), <b>popd</b>(8), <b>imapd</b>(8),
<b>netrc</b>(5).</p>


<p style="margin-left:11%; margin-top: 1em"><a href="http://fetchmail.berlios.de/">The fetchmail home page.</a></p>


<p style="margin-left:11%; margin-top: 1em"><a href="http://www.courier-mta.org/maildrop/">The maildrop home page.</a></p>

<h2>APPLICABLE STANDARDS
<a name="APPLICABLE STANDARDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Note that this
list is just a collection of references and not a statement
as to the actual protocol conformance or requirements in
fetchmail. <br>
SMTP/ESMTP:</p>

<p style="margin-left:18%;">RFC 821, RFC 2821, RFC 1869,
RFC 1652, RFC 1870, RFC 1983, RFC 1985, RFC 2554.</p>

<p style="margin-left:11%;">mail:</p>

<p style="margin-left:18%;">RFC 822, RFC 2822, RFC 1123,
RFC 1892, RFC 1894.</p>

<p style="margin-left:11%;">POP2:</p>

<p style="margin-left:18%;">RFC 937</p>

<p style="margin-left:11%;">POP3:</p>

<p style="margin-left:18%;">RFC 1081, RFC 1225, RFC 1460,
RFC 1725, RFC 1734, RFC 1939, RFC 1957, RFC 2195, RFC
2449.</p>

<p style="margin-left:11%;">APOP:</p>

<p style="margin-left:18%;">RFC 1939.</p>

<p style="margin-left:11%;">RPOP:</p>

<p style="margin-left:18%;">RFC 1081, RFC 1225.</p>

<p style="margin-left:11%;">IMAP2/IMAP2BIS:</p>

<p style="margin-left:18%;">RFC 1176, RFC 1732.</p>

<p style="margin-left:11%;">IMAP4/IMAP4rev1:</p>

<p style="margin-left:18%;">RFC 1730, RFC 1731, RFC 1732,
RFC 2060, RFC 2061, RFC 2195, RFC 2177, RFC 2683.</p>

<p style="margin-left:11%;">ETRN:</p>

<p style="margin-left:18%;">RFC 1985.</p>

<p style="margin-left:11%;">ODMR/ATRN:</p>

<p style="margin-left:18%;">RFC 2645.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p>OTP:</p></td>
<td width="1%"></td>
<td width="14%">


<p>RFC 1938.</p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:11%;">LMTP:</p>

<p style="margin-left:18%;">RFC 2033.</p>

<p style="margin-left:11%;">GSSAPI:</p>

<p style="margin-left:18%;">RFC 1508, RFC 1734,
<a href="http://www.iana.org/assignments/gssapi-service-names/">Generic Security Service Application Program Interface (GSSAPI)/Kerberos/Simple Authentication and Security Layer (SASL) Service Names</a>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p>TLS:</p></td>
<td width="1%"></td>
<td width="14%">


<p>RFC 2595.</p></td>
<td width="68%">
</td></tr>
 </table>
<hr>
</body>
</html>
