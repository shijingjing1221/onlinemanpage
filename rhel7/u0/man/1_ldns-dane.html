<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Sat Nov 12 02:02:39 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ldns-dane</title>

</head>
<body>

<h1 align="center">ldns-dane</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ldns-dane
&minus; verify or create TLS authentication with DANE
(RFC6698)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ldns-dane</b>
<i>[OPTIONS] verify name port</i> <b><br>
ldns-dane</b> <i>[OPTIONS] -t tlsafile verify</i></p>


<p style="margin-left:11%; margin-top: 1em"><b>ldns-dane</b>
<i>[OPTIONS] name port create</i> <br>
[ <i>Certificate-usage</i> [ <i>Selector</i> [
<i>Matching-type</i> ] ] ]</p>


<p style="margin-left:11%; margin-top: 1em"><b>ldns-dane</b>
<i>-h</i> <b><br>
ldns-dane</b> <i>-v</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In the first
form: A TLS connection to <i>name</i>:<i>port</i> is
established. The TLSA resource record(s) for <i>name</i> are
used to authenticate the connection.</p>

<p style="margin-left:11%; margin-top: 1em">In the second
form: The TLSA record(s) are read from <i>tlsafile</i> and
used to authenticate the TLS service they reference.</p>

<p style="margin-left:11%; margin-top: 1em">In the third
form: A TLS connection to <i>name</i>:<i>port</i> is
established and used to create the TLSA resource record(s)
that would authenticate the connection. The parameters for
TLSA rr creation are:</p>


<p style="margin-left:11%; margin-top: 1em"><i>Certificate-usage</i>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>0</p></td>
<td width="9%"></td>
<td width="54%">


<p>CA constraint</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="54%">


<p>Service certificate constraint</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>2</p></td>
<td width="9%"></td>
<td width="54%">


<p>Trust anchor assertion</p></td>
<td width="14%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>3</p></td>
<td width="9%"></td>
<td width="54%">


<p>Domain-issued certificate (default)</p></td>
<td width="14%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>Selector</i>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p style="margin-top: 1em">0</p></td>
<td width="9%"></td>
<td width="40%">


<p style="margin-top: 1em">Full certificate (default)</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="40%">


<p>SubjectPublicKeyInfo</p></td>
<td width="28%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>Matching-type</i>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p style="margin-top: 1em">0</p></td>
<td width="9%"></td>
<td width="26%">


<p style="margin-top: 1em">No hash used</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>1</p></td>
<td width="9%"></td>
<td width="26%">


<p>SHA-256 (default)</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>2</p></td>
<td width="9%"></td>
<td width="26%">


<p>SHA-512</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In stead of
numbers the first few letters of the value may be used.
Except for the hash algorithm name, where the full name must
be specified.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">-4</p></td>
<td width="8%"></td>
<td width="32%">


<p style="margin-top: 1em">TLS connect IPv4 only</p></td>
<td width="46%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-6</p></td>
<td width="8%"></td>
<td width="32%">


<p>TLS connect IPv6 only</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:11%;">-a <i>address</i></p>

<p style="margin-left:22%;">Don&rsquo;t try to resolve
<i>name</i>, but connect to <i>address</i> instead.</p>

<p style="margin-left:22%; margin-top: 1em">This option may
be given more than once.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-b</p></td>
<td width="8%"></td>
<td width="78%">


<p>print &quot;<i>name</i>. TYPE52 \# <i>size
hexdata</i>&quot; form instead of TLSA presentation
format.</p> </td></tr>
</table>

<p style="margin-left:11%;">-c <i>certfile</i></p>

<p style="margin-left:22%;">Do not TLS connect to
<i>name</i>:<i>port</i>, but authenticate (or make TLSA
records) for the certificate (chain) in <i>certfile</i>
instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-d</p></td>
<td width="8%"></td>
<td width="78%">


<p>Assume DNSSEC validity even when the TLSA records were
acquired insecure or were bogus.</p></td></tr>
</table>

<p style="margin-left:11%;">-f <i>CAfile</i></p>

<p style="margin-left:22%;">Use CAfile to validate. Default
is /etc/pki/tls/certs/ca-bundle.trust.crt</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-h</p></td>
<td width="8%"></td>
<td width="40%">


<p>Print short usage help</p></td>
<td width="38%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-i</p></td>
<td width="8%"></td>
<td width="40%">


<p>Interact after connecting.</p></td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:11%;">-k <i>keyfile</i></p>

<p style="margin-left:22%;">Specify a file that contains a
trusted DNSKEY or DS rr. Key(s) are used when chasing
signatures (i.e. <i>-S</i> is given).</p>

<p style="margin-left:22%; margin-top: 1em">This option may
be given more than once.</p>

<p style="margin-left:22%; margin-top: 1em">Alternatively,
if <b>-k</b> is not specified, and a default trust anchor
(/var/lib/unbound/root.key) exists and contains a valid
DNSKEY or DS record, it will be used as the trust
anchor.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-n</p></td>
<td width="8%"></td>
<td width="63%">


<p>Do <b>not</b> verify server name in certificate.</p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:11%;">-o <i>offset</i></p>

<p style="margin-left:22%;">When creating a &quot;Trust
anchor assertion&quot; TLSA resource record, select the
<i>offset</i>th certificate offset from the end of the
validation chain. 0 means the last certificate, 1 the one
but last, 2 the second but last, etc.</p>

<p style="margin-left:22%; margin-top: 1em">When
<i>offset</i> is -1 (the default), the last certificate is
used (like with 0) that MUST be self-signed. This can help
to make sure that the intended (self signed) trust anchor is
actually present in the server certificate chain (which is a
DANE requirement).</p>

<p style="margin-left:11%;">-p <i>CApath</i></p>

<p style="margin-left:22%;">Use certificates in the
<i>CApath</i> directory to validate. Default is
/etc/pki/tls/certs/</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-s</p></td>
<td width="8%"></td>
<td width="78%">


<p>When creating TLSA resource records with the &quot;CA
Constraint&quot; and the &quot;Service Certificate
Constraint&quot; certificate usage, do not validate and
assume PKIX is valid.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">For &quot;CA
Constraint&quot; this means that verification should end
with a self-signed certificate.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">-S</p></td>
<td width="8%"></td>
<td width="52%">


<p style="margin-top: 1em">Chase signature(s) to a known
key.</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Without this
option, the local network is trusted to provide a DNSSEC
resolver (i.e. AD bit is checked).</p>

<p style="margin-left:11%;">-t <i>tlsafile</i></p>

<p style="margin-left:22%;">Read TLSA record(s) from
<i>tlsafile</i>. When <i>name</i> and <i>port</i> are also
given, only TLSA records that match the <i>name</i>,
<i>port</i> and <i>transport</i> are used. Otherwise the
owner name of the TLSA record(s) will be used to determine
<i>name</i>, <i>port</i> and <i>transport</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-u</p></td>
<td width="8%"></td>
<td width="50%">


<p>Use UDP transport instead of TCP.</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>-v</p></td>
<td width="8%"></td>
<td width="50%">


<p>Show version and exit.</p></td>
<td width="28%">
</td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/var/lib/unbound/root.key</p>

<p style="margin-left:22%;">The file from which trusted
keys are loaded for signature chasing, when no <b>-k</b>
option is given.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">unbound-anchor(8)</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by the
ldns team as an example for ldns usage.</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report bugs to
<i>ldns-team@nlnetlabs.nl</i>.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2012 NLnet Labs. This is free software. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.</p>
<hr>
</body>
</html>
