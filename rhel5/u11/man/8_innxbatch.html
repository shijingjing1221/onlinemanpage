<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:13:36 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>INNXBATCH(8) INNXBATCH(8)</p>

<p>NAME innxbatch - send xbatched Usenet articles to a
remote NNTP server</p>

<p>SYNOPSIS innxbatch [ -D ] [ -t timeout ] [ -T timeout ]
[ -v ] host file ...</p>

<p>DESCRIPTION Innxbatch connects to the NNTP server at the
specified host and sends it the specified xbatch files,
using the XBATCH extension to the NNTP protocol. It is
normally invoked by a script run out of cron(8) that uses
shlock(1) to lock the host name, followed by a ctlinnd(8)
command to flush the batchfile.</p>

<p>Each file is removed after it has been successfully
transferred.</p>

<p>If a communication error such as a write(2) failure, or
an unexpected reply from the remote server occurs, innxbatch
will stop sending and leave all remaining files untouched
for later retry.</p>

<p>OPTIONS -t seconds Innxbatch normally blocks until the
connection is made. To specify a timeout on how long to try
to make the connection, use the -t flag.</p>

<p>-T seconds To specify the total amount of time that
should be allowed for article transfers, use the -T flag.
The default is to wait until an I/O error occurs, or all the
articles have been transferred. If the -T flag is used, the
time is checked just before each article is started; it will
not abort a transfer that is in progress.</p>

<p>-v Upon exit, innxbatch reports transfer and CPU usage
statistics via syslog(3). If the -v flag is used, they will
also be printed on the standard output.</p>

<p>-D Use the -D flag to print debugging information on
standard error. This will show the protocol transactions
between innx- batch and the NNTP server on the remote
host.</p>

<p>EXAMPLES A sample newsfeeds(5) entry to produce
appropriate xbatch files (thanks to Karsten Leipold
&lt;poldi@dfn.de&gt;):</p>

<p>nase :* :Tc,Wnb :&lt;pathbin in inn.conf&gt;/batcher -p
&quot;(&lt;$ac_cv_path_COMPRESS in config.cache&gt; &gt;
&lt;pathoutgoing in inn.conf&gt;/nase. nase.do.main</p>

<p>A sample script to invoke innxbatch(8) is:</p>

<p>#!/bin/sh ## SH script to send xbatches for a site,
wrapped around innxbatch ## Invocation: ## sendxbatches.sh
&lt;sitename&gt; &lt;hostname&gt; &lt;xbatch file name&gt;
...</p>

<p>if [ $# -le 3 ] then echo &quot;usage: $0
&lt;sitename&gt; &lt;hostname&gt; &lt;xbatch file
name&gt;&quot; exit 1 fi</p>

<p>. &lt;pathbin in inn.conf&gt;/innshellvars</p>

<p>site=&quot;$1&quot;; host=&quot;$2&quot;; shift;
shift</p>

<p>ctlinnd flush &quot;$site&quot; &amp;&amp; sleep 5
&amp;&amp; exec $NEWSBIN/innxbatch -v -D &quot;$host&quot;
$*</p>

<p>HISTORY Written by Stefan Petri
&lt;petri@ibr.cs.tu-bs.de&gt;, modelled after innxmit(8) and
the XBATCH patch for the nntp reference implementation.</p>

<p>SEE ALSO ctlinnd(8), inn.conf(5), innd(8), innxmit(8),
newsfeeds(5), nntpsend(8), shlock(1).</p>

<p>INNXBATCH(8)</p>
<hr>
</body>
</html>
