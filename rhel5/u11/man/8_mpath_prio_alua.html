<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:28 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MPATH_PRIO_ALUA(8) Linux Administrator s Manual
MPATH_PRIO_ALUA(8)</p>

<p>NAME mpath_prio_alua - Path priority tool based on
Asymmetric LUn Access</p>

<p>SYNOPSIS mpath_prio_alua [-d directory] [-h] [-v] [-V]
device [ device [ ... ]]</p>

<p>DESCRIPTION mpath_prio_alua is used as a priority
callout for the multipath com- mand. It returns a number
that is used by multipath to group devices with the same
priority together.</p>

<p>OPTIONS -d directory target directory for devices given
as relative device names or devices given as major:minor
number. Default is &quot;/dev&quot;.</p>

<p>-h displays the command line help.</p>

<p>-v turns on verbose output. This shows all results in
human read- able format. This includes information about the
port group the device is in and its current state.</p>

<p>-V shows the version number and exits.</p>

<p>device specifies the device to query (the device must be
a SCSI device that supports the Report Target Port Groups
command). One of the following three formats may be
used:</p>

<p>&middot; The full path name that starts with / (e.g.
/dev/sda).</p>

<p>&middot; The device name only. This will prefix the
directory name given by the -d option (e.g. sda).</p>

<p>&middot; The major and minor number of the device
separated by :. This will create a temporary device node in
the device direc- tory (e.g. 8:0). The temporary name will
be tmpdev-&lt;major&gt;:&lt;minor&gt;-&lt;pid&gt;.</p>

<p>RETURN VALUE The mpath_prio_alua command returns the
following values:</p>

<p>0 on success. In this case the priority for the device
is printed to stdout. The priority value is:</p>

<p>50 for devices that are in the active, optimized
group</p>

<p>10 for devices that are in an active but non-optimized
group</p>

<p>1 for devices that are in the standby group</p>

<p>0 for all other groups</p>

<p>The reason for the widely spaced priority values is the
way mul- tipath handles them. It will multiply the number of
paths in a group with the priority value and select the
group with the highest result. Thus, if there are six paths
in the active, non- optimized group and only one in the
active, optimized one, the non-optimized group would be
used.</p>

<p>1 Indicates an error parsing the command line.</p>

<p>2 The given devices could not be opened for reading.</p>

<p>3 The device does not support target port groups.</p>

<p>4 The inquiry command did not return a target port group
for the given device.</p>

<p>5 The report target port group command failed or did not
return a target port group that was obtained from the
inquiry command.</p>

<p>EXAMPLES This example queries a device directly and
returns the priority string:</p>

<p>#&gt; mpath_prio_alua /dev/sda 50</p>

<p>Now the major and minor number is used to specify the
device and ver- bose output is selected:</p>

<p>#&gt; mpath_prio_alua -v 8:0 Target port groups are
implicitly supported. Reported target port group is 0
[active/optimized] 50</p>

<p>The following example shows the entries in the devices
section of the multipath-tool configuration file
(/etc/multipath.conf) to support an IBM DS6000 storage
system:</p>

<p>device { vendor &quot;IBM &quot; product &quot;1750500
&quot; path_grouping_policy group_by_prio prio_callout
&quot;/sbin/mpath_prio_alua /dev/%n&quot; features &quot;1
queue_if_no_path&quot; path_checker tur }</p>

<p>Notes:</p>

<p>&middot; Depending on your default configuration not all
keywords are required (e.g. if your path_checker is set to
tur you dont have to use the path_checker statement in the
device section).</p>

<p>&middot; The entries for vendor and product must be
strings that are 8 charac- ters long (for vendor) and 16
characters long (for product). The strings have to be padded
with blanks if necessary.</p>

<p>&middot; If under certain circumstances your storage
subsystem temporarily reports failures on all paths, you
should use the features statement showed in the example.
This will configure the multipath volume to requeue I/O
until a path becomes available again, instead of report- ing
failures in that case.</p>

<p>SEE ALSO multipath(8),</p>

<p>AUTHORS mpath_prio_alua was developed by Jan Kunigk and
adapted by Stefan Bader &lt;shbader@de.ibm.com&gt;</p>

<p>multipath-tools July 2006 MPATH_PRIO_ALUA(8)</p>
<hr>
</body>
</html>
