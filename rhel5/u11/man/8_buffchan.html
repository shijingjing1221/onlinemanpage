<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:07:17 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>BUFFCHAN(8) BUFFCHAN(8)</p>

<p>NAME buffchan - buffered file-writing backend for
InterNetNews</p>

<p>SYNOPSIS buffchan [ -b ] [ -c lines ] [ -C seconds ] [
-d directory ] [ -f num_fields ] [ -m map ] [ -p pidfile ] [
-l lines ] [ -L seconds ] [ -r ] [ -s filename_format ] [ -u
]</p>

<p>DESCRIPTION Buffchan reads lines from standard input and
copies certain fields in each line into files named by other
fields within the line. Buffchan is intended to be called by
innd(8) as an exploder feed.</p>

<p>OPTIONS -b Once buffchan opens a file it keeps it open.
The input must therefore never specify more files than the
number of available descriptors can keep open. If the -b
flag is used, the pro- gram will allocate a buffer and
attach it to the file using set- buf(3).</p>

<p>-c lines If the -c flag is used, buffchan will close,
and re-open, a file after every lines lines are written to a
file.</p>

<p>-C seconds Similarly, the -C flag may be used to specify
that all files should be closed and re-opened every seconds
seconds.</p>

<p>-d directory The -d flag may be used to specify a
directory the program should change to before starting. If
this flag is used, then the default for the -s flag is
changed to be a simple %s.</p>

<p>-f num_fields Buffchan input is interpreted as a
sequence of lines. Each line contains a fixed number of
initial fields, followed by a vari- able number of filename
fields. All fields in a line are sepa- rated by whitespace.
The default number of initial fields is one; the -f flag may
be used to specify a different number of fields.</p>

<p>-m map Map files specify short names as aliases for
domain names; see filechan(8) for details and an
example.</p>

<p>-p pidfile If the -p flag is used, the program will
write a line con- taining its process ID (in text) to the
specified file.</p>

<p>-l lines If the -l flag is used, buffchan will call
fflush(3) after every lines lines are written to a file.</p>

<p>-L seconds If the -L flag is used, all files will be
flushed every n seconds.</p>

<p>-r By default, the program sends its error messages to
&lt;pathlog in inn.conf&gt;/errlog. To suppress this
redirection and send error messages to standard error, use
the -r flag.</p>

<p>-s filename_format After the initial fields, each
remaining field names a file to write. The -s flag may be
used to specify a format string that maps the field to a
file name. This is a sprintf(3) format string which should
have a single %s parameter which will be given the contents
of a non-initial field. The default value is
&lt;pathoutgoing in inn.conf&gt;/%s. See the description of
this flag in filechan(8).</p>

<p>-u If the -u flag is used, the program will request
unbuffered output.</p>

<p>Buffchan can be invoked as an exploder feed (see
newsfeeds(5)). As such, if a line starts with an exclamation
point it will be treated as a command. There are three
commands, described below:</p>

<p>flush The flush command closes and re-opens all open
files; flush xxx which flushes only the specified site.
These are analogous to the ctlinnd(8) flush command, and can
be achieved by doing a send &quot;flush xxx&quot; command.
Applications can tell that the flush has completed by
renaming the file before issuing the command; buffchan has
completed the command when the original filename re-appears.
If &lt;$ac_cv_func_fchmod in config.cache&gt; is yes, then
buffchan also changes the access permissions of the file
from read-only for everyone to read-write for owner and
group as it flushes or closes each out- put file. It will
change the modes back to read-only if it re- opens the same
file.</p>

<p>drop The drop command is similar to the flush command
except that no files are re-opened. If given an argument,
then the specified site is dropped, otherwise all sites are
dropped. (Note that the site will be restarted if the input
stream men- tions the site.) When a ctlinnd drop site
command is sent, innd will automatically forward the command
to buffchan for sites listed as funnels feeding into this
exploder. To drop all sites, use the ctlinnd send
buffchan-site drop command.</p>

<p>readmap The map file (specified with the -m flag) is
reloaded.</p>

<p>HISTORY Written by Rich $alz &lt;rsalz@uunet.uu.net&gt;
for InterNetNews. This is revision 5909, dated
2002-12-03.</p>

<p>SEE ALSO ctlinnd(8), filechan(8), inn.conf(5), innd(8),
newsfeeds(5).</p>

<p>BUFFCHAN(8)</p>
<hr>
</body>
</html>
