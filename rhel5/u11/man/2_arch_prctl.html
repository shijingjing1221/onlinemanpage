<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:06:14 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ARCH_PRCTL(2) Linux Programmer s Manual
ARCH_PRCTL(2)</p>

<p>NAME arch_prctl - set architecture specific thread
state</p>

<p>SYNOPSIS #include &lt;asm/prctl.h&gt;</p>

<p>#include &lt;sys/prctl.h&gt;</p>

<p>int arch_prctl(int code, unsigned long addr)</p>

<p>DESCRIPTION The arch_prctl() function sets architecture
specific process or thread state. code selects a subfunction
and passes argument addr to it.</p>

<p>Sub functions for x86-64 are:</p>

<p>ARCH_SET_FS Set the 64bit base for the FS register to
addr.</p>

<p>ARCH_GET_FS Return the 64bit base value for the FS
register of the current thread in the unsigned long pointed
to by the address parameter</p>

<p>ARCH_SET_GS Set the 64bit base for the GS register to
addr.</p>

<p>ARCH_GET_GS Return the 64bit base value for the GS
register of the current thread in the unsigned long pointed
to by the address parameter.</p>

<p>NOTES arch_prctl() is only supported on Linux/x86-64 for
64bit programs cur- rently.</p>

<p>The 64bit base changes when a new 32bit segment selector
is loaded.</p>

<p>ARCH_SET_GS is disabled in some kernels.</p>

<p>Context switches for 64bit segment bases are rather
expensive. It may be a faster alternative to set a 32bit
base using a segment selector by setting up an LDT with
modify_ldt(2) or using the set_thread_area(2) system call in
a 2.5 kernel. arch_prctl() is only needed when you want to
set bases that are larger than 4GB. Memory in the first 2GB
of address space can be allocated by using mmap(2) with the
MAP_32BIT flag.</p>

<p>As of version 2.3.5, glibc provides no prototype for
arch_prctl(). You have to declare it yourself for now. This
may be fixed in future glibc versions.</p>

<p>FS may be already used by the threading library.</p>

<p>ERRORS EFAULT addr points to an unmapped address or is
outside the process address space.</p>

<p>EINVAL code is not a valid subcommand.</p>

<p>EPERM addr is outside the process address space.</p>

<p>AUTHOR Man page written by Andi Kleen.</p>

<p>CONFORMING TO arch_prctl() is a Linux/x86-64 extension
and should not be used in pro- grams intended to be
portable.</p>

<p>SEE ALSO mmap(2), modify_ldt(2), prctl(2),
set_thread_area(2)</p>

<p>AMD X86-64 Programmers manual</p>

<p>Linux 2.4.20 2003-02-02 ARCH_PRCTL(2)</p>
<hr>
</body>
</html>
