<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:09:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>EXPIRE.CTL(5) InterNetNews Documentation
EXPIRE.CTL(5)</p>

<p>NAME expire.ctl - Configuration file for article
expiration</p>

<p>DESCRIPTION The file pathetc/expire.ctl is the default
configuration file for expire and expireover, which read it
at start-up. It serves two pur- poses: it defines how long
history entries for expired or rejected articles are
remembered, and it determines how long articles stored on
the server are retained.</p>

<p>Normally, if all of the storage methods used by the
server are self- expiring (such as CNFS), all lines except
the &quot;/remember/&quot; setting (described below) are
ignored. This can be changed with the -N option to expire or
expireover.</p>

<p>Black lines and lines beginning with a number sign
(&quot;#&quot;) are ignored. All other lines should be in
one of two formats. The order of the file is significant,
and the last matching entry will be used.</p>

<p>The first format specifies how long to keep history
entries for arti- cles that aren t present in the news
spool. These are articles that have either already expired,
or articles which the server rejected (when remembertrash is
set to true in inn.conf). There should be one and only one
line in this format, which looks like:</p>

<p>/remember/:&lt;days&gt;</p>

<p>where &lt;days&gt; is a decimal number that specifies
the minimum number of days a history record for a given
message ID is retained, regardless of whether the article is
present in the spool. (History entries for articles still
present in the spool are always retained.)</p>

<p>The primary reason to retain a record of old articles is
in case a peer offers old articles that were previously
accepted but have already expired. Without a history record
for such articles, the server would accept the article again
and readers would see duplicate articles. Articles older
than a certain number of days won t be accepted by the
server at all (see artcutoff in inn.conf(5) and the -c flag
in innd(8)), and this setting should probably match that
time period (10 days by default) to ensure that the server
never accepts duplicates.</p>

<p>Most of the lines in this file will be in the second
format, which con- sists of either four or five
colon-separated fields:</p>


<p>&lt;pattern&gt;:&lt;flag&gt;:&lt;min&gt;:&lt;default&gt;:&lt;max&gt;</p>

<p>if groupbaseexpiry is true in inn.conf (the default),
and otherwise:</p>


<p>&lt;classnum&gt;:&lt;min&gt;:&lt;default&gt;:&lt;max&gt;</p>

<p>All lines must be in the correct format given the
current setting of groupbaseexpiry, and therefore the two
formats cannot co-exist in the same file.</p>

<p>Normally, a rule matches a newsgroup through the
combination of the &lt;pattern&gt; and &lt;flag&gt; fields.
&lt;pattern&gt; is a uwildmat(3)-style pattern, specifying
the newsgroups to which the line is applied. Note that the
last matching entry will be used, so general patterns (such
as defaults for all groups where &lt;pattern&gt; is
&quot;*&quot;) should appear at the beginning of the file
before more specific settings.</p>

<p>The &lt;flag&gt; field can be used to further limit
newsgroups to which the line applies, and should be chosen
from the following set:</p>

<p>M Only moderated groups U Only unmoderated groups A All
groups X Remove the article from all groups it appears
in</p>

<p>One of M, U, or A must be specified. X should be used in
combination with one of the other letters, not by
itself.</p>

<p>An expiration policy is applied to every article in a
newsgroup it matches. There is no way to set an expiration
policy for articles crossposted to groups you dont carry
thats different than other arti- cles in the same group.
Normally, articles are not completely deleted until they
expire out of every group to which they were posted, but if
an article is expired following a rule where &lt;flag&gt;
contains X, it is deleted out of all newsgroups to which it
was posted immediately.</p>

<p>If groupbaseexpiry is instead set to false, there is no
&lt;pattern&gt; and &lt;flag&gt; field and the above does
not apply. Instead, there is a single &lt;classnum&gt;
field, which is either a number matching the storage class
number specified in storage.conf or &quot;*&quot; to specify
a default for all storage classes. All articles stored in a
storage class will be expired following the instructions in
the line with a matching &lt;class- num&gt;, and when
articles are expired, theyre always removed from all groups
to which they were posted.</p>

<p>The remaining three fields are the same in either
format, and are used to determine how long an article should
be kept. Each field should be either a decimal number of
days (fractions like 8.5 are allowed, but remember that
articles are only removed when expire or expireover is run,
normally once a day by news.daily) or the word
&quot;never&quot;.</p>

<p>The middle field, &lt;default&gt;, will be used as the
expiration period for most articles. The other two fields,
&lt;min&gt; and &lt;max&gt;, only come into play if the
article requests a particular expiration date with an
Expires header. Articles with an Expires header will be
expired at the date given in that header, subject to the
constraints that they will be retained at least &lt;min&gt;
days and no longer than &lt;max&gt; days.</p>

<p>If &lt;min&gt; is set to &quot;never&quot;, no article
matching that line will ever be expired. If &lt;default&gt;
is set to &quot;never&quot;, no article matching that line
without an explicit Expires header will ever be expired. If
&lt;max&gt; is set to &quot;never&quot;, Expires headers
will be honored no matter how far into the future they
are.</p>

<p>One should think of the fields as a lower bound, the
default, and an upper bound. Since most articles do not have
an Expires header, the second field is the most important
and most commonly applied.</p>

<p>Articles that do not match any expiration rule will not
be expired, but this is considered an error and will result
in a warning. There should always be a default line (a line
with a &lt;pattern&gt; of &quot;*&quot; and &lt;flag&gt; of
&quot;A&quot;, or a line with a &lt;classnum&gt; of
&quot;*&quot;), which can explicitly state that articles
should never expire by default if thats the desired con-
figuration. The default line should generally be the first
line of the file (except for &quot;/remember/&quot;) so that
other expiration rules can over- ride it.</p>

<p>It is often useful to honor the Expires header in
articles, especially those in moderated groups. To do this,
set &lt;min&gt; to zero, &lt;default&gt; to whatever normal
expiration you wish, and &lt;max&gt; to &quot;never&quot; or
some large number, like 365 days for a maximum article life
of a year.</p>

<p>To ignore any Expires header, set all three fields to
the same value.</p>

<p>EXAMPLES When groupbaseexpiry is true (the default):</p>

<p># Keep expired article history for 10 days, matching
artcutoff. /remember/:10</p>

<p># Most articles stay for two weeks, ignoring Expires.
*:A:14:14:14</p>

<p># Accept Expires headers in moderated groups for up to a
year and # retain moderated groups for a bit longer.
*:M:1:30:365</p>

<p># Keep local groups for a long time and local project
groups forever. example.*:A:90:90:90
example.project.*:A:never:never:never</p>

<p>When groupbaseexpiry is false, for class-based
expiration:</p>

<p># Keep expired article history for 10 days, matching
artcutoff. /remember/:10</p>

<p># Set a default expiration of seven days. *:7:7:7</p>

<p># Class 0 is retained for two weeks. 0:14:14:14</p>

<p>HISTORY Written by Rich $alz &lt;rsalz@uunet.uu.net&gt;
for InterNetNews. Converted to POD by Russ Allbery
&lt;rra@stanford.edu&gt;.</p>

<p>$Id: expire.ctl.5 7207 2005-04-11 18:18:40Z rra $</p>

<p>SEE ALSO expire(8), expireover(8), inn.conf(5), innd(8),
news.daily(8), stor- age.conf(5), uwildmat(3)</p>

<p>INN 2.4.3 2005-04-11 EXPIRE.CTL(5)</p>
<hr>
</body>
</html>
