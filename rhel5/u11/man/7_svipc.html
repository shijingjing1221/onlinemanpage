<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:24:33 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>SVIPC(7) Linux Programmer s Manual SVIPC(7)</p>

<p>NAME svipc - System V interprocess communication
mechanisms</p>

<p>SYNOPSIS # include &lt;sys/types.h&gt; # include
&lt;sys/ipc.h&gt; # include &lt;sys/msg.h&gt; # include
&lt;sys/sem.h&gt; # include &lt;sys/shm.h&gt;</p>

<p>DESCRIPTION This manual page refers to the Linux
implementation of the System V interprocess communication
mechanisms: message queues, semaphore sets, and shared
memory segments. In the following, the word resource means
an instantiation of one among such mechanisms.</p>

<p>Resource Access Permissions For each resource, the
system uses a common structure of type struct ipc_perm to
store information needed in determining permissions to per-
form an ipc operation. The ipc_perm structure, defined by
the &lt;sys/ipc.h&gt; system header file, includes the
following members:</p>

<p>ushort cuid; /* creator user ID */ ushort cgid; /*
creator group ID */ ushort uid; /* owner user ID */ ushort
gid; /* owner group ID */ ushort mode; /* r/w permissions
*/</p>

<p>The mode member of the ipc_perm structure defines, with
its lower 9 bits, the access permissions to the resource for
a process executing an ipc system call. The permissions are
interpreted as follows:</p>

<p>0400 Read by user. 0200 Write by user. 0040 Read by
group. 0020 Write by group. 0004 Read by others. 0002 Write
by others.</p>

<p>Bits 0100, 0010, and 0001 (the execute bits) are unused
by the system. Furthermore, &quot;write&quot; effectively
means &quot;alter&quot; for a semaphore set.</p>

<p>The same system header file also defines the following
symbolic con- stants:</p>

<p>IPC_CREAT Create entry if key doesnt exist.</p>

<p>IPC_EXCL Fail if key exists.</p>

<p>IPC_NOWAIT Error if request must wait.</p>

<p>IPC_PRIVATE Private key.</p>

<p>IPC_RMID Remove resource.</p>

<p>IPC_SET Set resource options.</p>

<p>IPC_STAT Get resource options.</p>

<p>Note that IPC_PRIVATE is a key_t type, while all the
other symbolic constants are flag fields and can be ORed
into an int type variable.</p>

<p>Message Queues A message queue is uniquely identified by
a positive integer (its msqid) and has an associated data
structure of type struct msqid_ds, defined in
&lt;sys/msg.h&gt;, containing the following members:</p>

<p>struct ipc_perm msg_perm; ushort msg_qnum; /* no of
messages on queue */ ushort msg_qbytes; /* bytes max on a
queue */ ushort msg_lspid; /* PID of last msgsnd() call */
ushort msg_lrpid; /* PID of last msgrcv() call */ time_t
msg_stime; /* last msgsnd() time */ time_t msg_rtime; /*
last msgrcv() time */ time_t msg_ctime; /* last change time
*/</p>

<p>msg_perm ipc_perm structure that specifies the access
permissions on the message queue.</p>

<p>msg_qnum Number of messages currently on the message
queue.</p>

<p>msg_qbytes Maximum number of bytes of message text
allowed on the mes- sage queue.</p>

<p>msg_lspid ID of the process that performed the last
msgsnd() system call.</p>

<p>msg_lrpid ID of the process that performed the last
msgrcv() system call.</p>

<p>msg_stime Time of the last msgsnd() system call.</p>

<p>msg_rtime Time of the last msgcv() system call.</p>

<p>msg_ctime Time of the last system call that changed a
member of the msqid_ds structure.</p>

<p>Semaphore Sets A semaphore set is uniquely identified by
a positive integer (its semid) and has an associated data
structure of type struct semid_ds, defined in
&lt;sys/sem.h&gt;, containing the following members:</p>

<p>struct ipc_perm sem_perm; time_t sem_otime; /* last
operation time */ time_t sem_ctime; /* last change time */
ushort sem_nsems; /* count of sems in set */</p>

<p>sem_perm ipc_perm structure that specifies the access
permissions on the semaphore set.</p>

<p>sem_otime Time of last semop() system call.</p>

<p>sem_ctime Time of last semctl() system call that changed
a member of the above structure or of one semaphore
belonging to the set.</p>

<p>sem_nsems Number of semaphores in the set. Each
semaphore of the set is referenced by a non-negative integer
ranging from 0 to sem_nsems-1.</p>

<p>A semaphore is a data structure of type struct sem
containing the fol- lowing members:</p>

<p>ushort semval; /* semaphore value */ short sempid; /*
PID for last operation */ ushort semncnt; /* nr awaiting
semval to increase */ ushort semzcnt; /* nr awaiting semval
= 0 */</p>

<p>semval Semaphore value: a non-negative integer.</p>

<p>sempid ID of the last process that performed a semaphore
operation on this semaphore.</p>

<p>semncnt Number of processes suspended awaiting for
semval to increase.</p>

<p>semznt Number of processes suspended awaiting for semval
to become zero.</p>

<p>Shared Memory Segments A shared memory segment is
uniquely identified by a positive integer (its shmid) and
has an associated data structure of type struct shmid_ds,
defined in &lt;sys/shm.h&gt;, containing the following
members:</p>

<p>struct ipc_perm shm_perm; int shm_segsz; /* size of
segment */ ushort shm_cpid; /* PID of creator */ ushort
shm_lpid; /* PID, last operation */ short shm_nattch; /* no.
of current attaches */ time_t shm_atime; /* time of last
attach */ time_t shm_dtime; /* time of last detach */ time_t
shm_ctime; /* time of last change */</p>

<p>shm_perm ipc_perm structure that specifies the access
permissions on the shared memory segment.</p>

<p>shm_segsz Size in bytes of the shared memory
segment.</p>

<p>shm_cpid ID of the process that created the shared
memory segment.</p>

<p>shm_lpid ID of the last process that executed a shmat()
or shmdt() system call.</p>

<p>shm_nattch Number of current alive attaches for this
shared memory seg- ment.</p>

<p>shm_atime Time of the last shmat() system call.</p>

<p>shm_dtime Time of the last shmdt() system call.</p>

<p>shm_ctime Time of the last shmctl() system call that
changed shmid_ds.</p>

<p>SEE ALSO msgctl(2), msgget(2), msgrcv(2), msgsnd(2),
semctl(2), semget(2), semop(2), shmat(2), shmctl(2),
shmdt(2), shmget(2), ftok(3)</p>

<p>Linux 0.99.13 1993-11-01 SVIPC(7)</p>
<hr>
</body>
</html>
