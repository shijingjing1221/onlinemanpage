<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:15:42 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>LVM(8) LVM(8)</p>

<p>NAME lvm - LVM2 tools</p>

<p>SYNOPSIS lvm [command | file]</p>

<p>DESCRIPTION lvm provides the command-line tools for
LVM2. A separate manual page describes each command in
detail.</p>

<p>If lvm is invoked with no arguments it presents a
readline prompt (assuming it was compiled with readline
support). LVM commands may be entered interactively at this
prompt with readline facilities including history and
command name and option completion. Refer to readline(3) for
details.</p>

<p>If lvm is invoked with argv[0] set to the name of a
specific LVM com- mand (for example by using a hard or soft
link) it acts as that com- mand.</p>

<p>On invocation, lvm requires that only the standard file
descriptors stdin, stdout and stderr are available. If
others are found, they get closed and messages are issued
warning about the leak.</p>

<p>Where commands take VG or LV names as arguments, the
full path name is optional. An LV called &quot;lvol0&quot;
in a VG called &quot;vg0&quot; can be specified as
&quot;vg0/lvol0&quot;. Where a list of VGs is required but
is left empty, a list of all VGs will be substituted. Where
a list of LVs is required but a VG is given, a list of all
the LVs in that VG will be substi- tuted. So lvdisplay vg0
will display all the LVs in &quot;vg0&quot;. Tags can also
be used - see --addtag below.</p>

<p>One advantage of using the built-in shell is that
configuration infor- mation gets cached internally between
commands.</p>

<p>A file containing a simple script with one command per
line can also be given on the command line. The script can
also be executed directly if the first line is #! followed
by the absolute path of lvm.</p>

<p>BUILT-IN COMMANDS The following commands are built into
lvm without links normally being created in the filesystem
for them.</p>

<p>dumpconfig Display the configuration information after
loading lvm.conf(5) and any other configuration files.</p>

<p>formats Display recognised metadata formats.</p>

<p>help Display the help text.</p>

<p>pvdata Not implemented in LVM2.</p>

<p>segtypes Display recognised Logical Volume segment
types.</p>

<p>tags Display any tags defined on this host.</p>

<p>version Display version information.</p>

<p>COMMANDS The following commands implement the core LVM
functionality.</p>

<p>pvchange Change attributes of a Physical Volume.</p>

<p>pvck Check Physical Volume metadata.</p>

<p>pvcreate Initialize a disk or partition for use by
LVM.</p>

<p>pvdisplay Display attributes of a Physical Volume.</p>

<p>pvmove Move Physical Extents.</p>

<p>pvremove Remove a Physical Volume.</p>

<p>pvresize Resize a disk or partition in use by LVM2.</p>

<p>pvs Report information about Physical Volumes.</p>

<p>pvscan Scan all disks for Physical Volumes.</p>

<p>vgcfgbackup Backup Volume Group descriptor area.</p>

<p>vgcfgrestore Restore Volume Group descriptor area.</p>

<p>vgchange Change attributes of a Volume Group.</p>

<p>vgck Check Volume Group metadata.</p>

<p>vgconvert Convert Volume Group metadata format.</p>

<p>vgcreate Create a Volume Group.</p>

<p>vgdisplay Display attributes of Volume Groups.</p>

<p>vgexport Make volume Groups unknown to the system.</p>

<p>vgextend Add Physical Volumes to a Volume Group.</p>

<p>vgimport Make exported Volume Groups known to the
system.</p>

<p>vgimportclone Import and rename duplicated Volume Group
(e.g. a hard- ware snapshot).</p>

<p>vgmerge Merge two Volume Groups.</p>

<p>vgmknodes Recreate Volume Group directory and Logical
Volume special files</p>

<p>vgreduce Reduce a Volume Group by removing one or more
Physical Volumes.</p>

<p>vgremove Remove a Volume Group.</p>

<p>vgrename Rename a Volume Group.</p>

<p>vgs Report information about Volume Groups.</p>

<p>vgscan Scan all disks for Volume Groups and rebuild
caches.</p>

<p>vgsplit Split a Volume Group into two, moving any
logical volumes from one Volume Group to another by moving
entire Physi- cal Volumes.</p>

<p>lvchange Change attributes of a Logical Volume.</p>

<p>lvconvert Convert a Logical Volume from linear to mirror
or snapshot.</p>

<p>lvcreate Create a Logical Volume in an existing Volume
Group.</p>

<p>lvdisplay Display attributes of a Logical Volume.</p>

<p>lvextend Extend the size of a Logical Volume.</p>

<p>lvmchange Change attributes of the Logical Volume
Manager.</p>

<p>lvmdiskscan Scan for all devices visible to LVM2.</p>

<p>lvmdump Create lvm2 information dumps for diagnostic
purposes.</p>

<p>lvreduce Reduce the size of a Logical Volume.</p>

<p>lvremove Remove a Logical Volume.</p>

<p>lvrename Rename a Logical Volume.</p>

<p>lvresize Resize a Logical Volume.</p>

<p>lvs Report information about Logical Volumes.</p>

<p>lvscan Scan (all disks) for Logical Volumes.</p>

<p>The following commands are not implemented in LVM2 but
might be in the future: lvmsadc, lvmsar, pvdata.</p>

<p>OPTIONS The following options are available for many of
the commands. They are implemented generically and
documented here rather than repeated on individual manual
pages.</p>

<p>-h, --help Display the help text.</p>

<p>--version Display version information.</p>

<p>-v, --verbose Set verbose level. Repeat from 1 to 3
times to increase the detail of messages sent to stdout and
stderr. Overrides config file setting.</p>

<p>-d, --debug Set debug level. Repeat from 1 to 6 times to
increase the detail of messages sent to the log file and/or
syslog (if configured). Overrides config file setting.</p>

<p>-q, --quiet Suppress output and log messages. Overrides
-d and -v.</p>

<p>-t, --test Run in test mode. Commands will not update
metadata. This is implemented by disabling all metadata
writing but nevertheless returning success to the calling
function. This may lead to unusual error messages in
multi-stage operations if a tool relies on reading back
metadata it believes has changed but hasnt.</p>

<p>--driverloaded {y|n} Whether or not the device-mapper
kernel driver is loaded. If you set this to n, no attempt
will be made to contact the driver.</p>

<p>-A, --autobackup {y|n} Whether or not to metadata should
be backed up automatically after a change. You are strongly
advised not to disable this! See vgcfgbackup(8).</p>

<p>-P, --partial When set, the tools will do their best to
provide access to Vol- ume Groups that are only partially
available (one or more Physi- cal Volumes belonging to the
Volume Group are missing from the system). Where part of a
logical volume is missing, /dev/ioer- ror will be
substituted, and you could use dmsetup(8) to set this up to
return I/O errors when accessed, or create it as a large
block device of nulls. Metadata may not be changed with this
option. To insert a replacement Physical Volume of the same
or large size use pvcreate -u to set the uuid to match the
orig- inal followed by vgcfgrestore(8).</p>

<p>-M, --metadatatype Type Specifies which type of on-disk
metadata to use, such as lvm1 or lvm2, which can be
abbreviated to 1 or 2 respectively. The default (lvm2) can
be changed by setting format in the global section of the
config file.</p>

<p>--ignorelockingfailure This lets you proceed with
read-only metadata operations such as lvchange -ay and
vgchange -ay even if the locking module fails. One use for
this is in a system init script if the lock direc- tory is
mounted read-only when the script runs.</p>

<p>--addtag Tag Add the tag Tag to a PV, VG or LV. Supply
this argument multi- ple times to add more than one tag at
once. A tag is a word that can be used to group LVM2 objects
of the same type together. Tags can be given on the command
line in place of PV, VG or LV arguments. Tags should be
prefixed with @ to avoid ambiguity. Each tag is expanded by
replacing it with all objects possessing that tag which are
of the type expected by its position on the command line.
PVs can only possess tags while they are part of a Volume
Group: PV tags are discarded if the PV is removed from the
VG. As an example, you could tag some LVs as database and
others as userdata and then activate the database ones with
lvchange -ay @database. Objects can pos- sess multiple tags
simultaneously. Only the new LVM2 metadata format supports
tagging: objects using the LVM1 metadata format cannot be
tagged because the on-disk format does not support it.
Characters allowed in tags are: A-Z a-z 0-9 _ + . - and as
of version 2.02.78 the following characters are also
accepted: / = ! : # &amp;</p>

<p>--deltag Tag Delete the tag Tag from a PV, VG or LV, if
it s present. Supply this argument multiple times to remove
more than one tag at once.</p>

<p>--alloc AllocationPolicy The allocation policy to use:
contiguous, cling, normal, any- where or inherit. When a
command needs to allocate Physical Extents from the Volume
Group, the allocation policy controls how they are chosen.
Each Volume Group and Logical Volume has an allocation
policy defined. The default for a Volume Group is normal
which applies common-sense rules such as not placing par-
allel stripes on the same Physical Volume. The default for a
Logical Volume is inherit which applies the same policy as
for the Volume Group. These policies can be changed using
lvchange(8) and vgchange(8) or overridden on the command
line of any command that performs allocation. The contiguous
policy requires that new Physical Extents be placed adjacent
to exist- ing Physical Extents. The cling policy places new
Physical Extents on the same Physical Volume as existing
Physical Extents in the same stripe of the Logical Volume.
If there are suffi- cient free Physical Extents to satisfy
an allocation request but normal doesnt use them, anywhere
will - even if that reduces performance by placing two
stripes on the same Physical Volume.</p>

<p>ENVIRONMENT VARIABLES HOME Directory containing
.lvm_history if the internal readline shell is invoked.</p>

<p>LVM_SYSTEM_DIR Directory containing lvm.conf(5) and
other LVM system files. Defaults to
&quot;/etc/lvm&quot;.</p>

<p>LVM_VG_NAME The Volume Group name that is assumed for
any reference to a Logical Volume that doesnt specify a
path. Not set by default.</p>

<p>VALID NAMES The following characters are valid for VG
and LV names: a-z A-Z 0-9 + _ . -</p>

<p>VG and LV names cannot begin with a hyphen. There are
also various reserved names that are used internally by lvm
that can not be used as LV or VG names. A VG cannot be
called anything that exists in /dev/ at the time of
creation, nor can it be called . or ... A LV cannot be
called . .. snapshot or pvmove. The LV name may also not
con- tain the strings _mlog, _mimage, _rimage, _tdata,
_tmeta .</p>

<p>ALLOCATION When an operation needs to allocate Physical
Extents for one or more Logical Volumes, the tools proceed
as follows:</p>

<p>First of all, they generate the complete set of
unallocated Physical Extents in the Volume Group. If any
ranges of Physical Extents are supplied at the end of the
command line, only unallocated Physical Extents within those
ranges on the specified Physical Volumes are con-
sidered.</p>

<p>Then they try each allocation policy in turn, starting
with the strictest policy (contiguous) and ending with the
allocation policy specified using --alloc or set as the
default for the particular Logi- cal Volume or Volume Group
concerned. For each policy, working from the lowest-numbered
Logical Extent of the empty Logical Volume space that needs
to be filled, they allocate as much space as possible
according to the restrictions imposed by the policy. If more
space is needed, they move on to the next policy.</p>

<p>The restrictions are as follows:</p>

<p>Contiguous requires that the physical location of any
Logical Extent that is not the first Logical Extent of a
Logical Volume is adjacent to the physical location of the
Logical Extent immediately preceding it.</p>

<p>Cling requires that the Physical Volume used for any
Logical Extent to be added to an existing Logical Volume is
already in use by at least one Logical Extent earlier in
that Logical Volume. If the configura- tion parameter
allocation/cling_tag_list is defined, then two Physical
Volumes are considered to match if any of the listed tags is
present on both Physical Volumes. This allows groups of
Physical Volumes with similar properties (such as their
physical location) to be tagged and treated as equivalent
for allocation purposes.</p>

<p>When a Logical Volume is striped or mirrored, the above
restrictions are applied independently to each stripe or
mirror image (leg) that needs space.</p>

<p>Normal will not choose a Physical Extent that shares the
same Physical Volume as a Logical Extent already allocated
to a parallel Logical Vol- ume (i.e. a different stripe or
mirror image/leg) at the same offset within that parallel
Logical Volume.</p>

<p>When allocating a mirror log at the same time as Logical
Volumes to hold the mirror data, Normal will first try to
select different Physi- cal Volumes for the log and the
data. If that s not possible and the
allocation/mirror_logs_require_separate_pvs configuration
parameter is set to 0, it will then allow the log to share
Physical Volume(s) with part of the data.</p>

<p>When allocating thin pool metadata, similar
considerations to those of a mirror log in the last
paragraph apply based on the value of the
allocation/thin_pool_metadata_require_separate_pvs
configuration param- eter.</p>

<p>If you rely upon any layout behaviour beyond that
documented here, be aware that it might change in future
versions of the code.</p>

<p>For example, if you supply on the command line two empty
Physical Vol- umes that have an identical number of free
Physical Extents available for allocation, the current code
considers using each of them in the order they are listed,
but there is no guarantee that future releases will maintain
that property. If it is important to obtain a specific
layout for a particular Logical Volume, then you should
build it up through a sequence of lvcreate(8) and
lvconvert(8) steps such that the restrictions described
above applied to each step leave the tools no discretion
over the layout.</p>

<p>To view the way the allocation process currently works
in any specific case, read the debug logging output, for
example by adding -vvvv to a command.</p>

<p>DIAGNOSTICS All tools return a status code of zero on
success or non-zero on fail- ure.</p>

<p>FILES /etc/lvm/lvm.conf $HOME/.lvm_history</p>

<p>SEE ALSO clvmd(8), lvchange(8), lvcreate(8),
lvdisplay(8), lvextend(8), lvm- change(8), lvmdiskscan(8),
lvreduce(8), lvremove(8), lvrename(8), lvre- size(8),
lvs(8), lvscan(8), pvchange(8), pvck(8), pvcreate(8), pvdis-
play(8), pvmove(8), pvremove(8), pvs(8), pvscan(8),
vgcfgbackup(8), vgchange(8), vgck(8), vgconvert(8),
vgcreate(8), vgdisplay(8), vgex- tend(8), vgimport(8),
vgimportclone(8), vgmerge(8), vgmknodes(8), vgre- duce(8),
vgremove(8), vgrename(8), vgs(8), vgscan(8), vgsplit(8),
read- line(3), lvm.conf(5)</p>

<p>Sistina Software UK LVM TOOLS 2.02.88(2)-RHEL5
(2014-04-04) LVM(8)</p>
<hr>
</body>
</html>
