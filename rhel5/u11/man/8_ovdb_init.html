<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:17:36 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OVDB_INIT(8) InterNetNews Documentation OVDB_INIT(8)</p>

<p>NAME ovdb_init - Prepare ovdb database for use</p>

<p>SYNOPSYS ovdb_init [&quot;-u&quot;&quot;-r&quot;]</p>

<p>DESCRIPTION This command must be run before any other
process can access the overview database. It performs the
following steps:</p>

<p>1 Creates the database environment, if necessary</p>

<p>2 If the database is idle (and if the &quot;-u&quot;
option is not specified), it performs a normal recovery. The
recovery will remove stale locks, recreate the memory pool
cache, and repair any damage caused by a system crash or
improper shutdown.</p>

<p>3 If the &quot;-u&quot; option is specified, it performs
any necessary upgrades to the database. See the UPGRADING
section below.</p>

<p>4 Starts the DB housekeeping processes (ovdb_monitor) if
theyre not already running. (Unless the &quot;-r&quot;
option is specified).</p>

<p>5 Starts the ovdb readserver (ovdb_server) processes if
&quot;readserver&quot; in ovdb.conf is &quot;true&quot;, and
if they re not already running. (Unless the &quot;-r&quot;
option is specified).</p>

<p>Returns exit status of 0 if all steps were completed
successfully. In the event of an error, messages are written
to syslog and/or stderr.</p>

<p>If a recovery was attempted but it failed, the database
may be damaged beyond repair, requiring a rebuild with
makehistory(8).</p>

<p>This command is normally invoked automatically by
rc.news(8).</p>

<p>It is OK to run this command multiple times.</p>

<p>OPTIONS &quot;-r&quot; Perform recovery only.
&quot;ovdb_monitor&quot; is not started.</p>

<p>&quot;-u&quot; Perform any needed upgrades. Recovery is
not attempted. &quot;ovdb_monitor&quot; is started if the
upgrade succeeded.</p>

<p>UPGRADING There are two situations in which the database
will need to be upgraded:</p>

<p>&middot; You upgrade the BerkeleyDB library to a newer
version, for example from 2.7.7 to 3.1.17. In this case, the
BerkeleyDB db-&gt;upgrade() method is used.</p>

<p>&middot; You upgrade ovdb to a newer major version;
i.e., ovdb-1.0 to ovdb-2.0.</p>

<p>In both of these cases, the database is upgraded
in-place; and the upgrade can not be undone. Do not
interrupt the upgrade process once it has started, because
there is a risk of irrepairable corruption. The upgrade may
take several minutes to complete. If an upgrade does get
interrupted, try running the upgrade again.</p>

<p>Here s an example procedure to upgrade a database
created with Berke- leyDB 2.7.7 to use BerkeleyDB
3.1.17:</p>

<p>1 Build and install the BerkeleyDB 3.1.17</p>

<p>2 Run configure in the INN source tree and make sure it
picks up the right BerkeleyDB directory (e.g.,
/usr/local/BerkeleyDB.3.1)</p>

<p>3 Do a &quot;make&quot;</p>

<p>4 Shut down INN (e.g., with &quot;rc.news stop&quot;).
Be sure to kill all nnrpds as well.</p>

<p>5 Do a &quot;make update&quot; to install the new
binaries.</p>

<p>6 Run &quot;ovdb_init -u&quot; as the news user.</p>

<p>7 Start INN with &quot;rc.news&quot;</p>

<p>It is OK to specify &quot;-u&quot; even if no upgrades
are needed.</p>

<p>HISTORY Written by Heath Kehoe
&lt;hakehoe@avalon.net&gt; for InterNetNews.</p>

<p>SEE ALSO ovdb(5), makehistory(8)</p>

<p>INN 2.4.0 2002-02-02 OVDB_INIT(8)</p>
<hr>
</body>
</html>
