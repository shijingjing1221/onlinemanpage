<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:13:05 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RPM(8) Red Hat Linux RPM(8)</p>

<p>NAME rpm - RPM Package Manager</p>

<p>SYNOPSIS QUERYING AND VERIFYING PACKAGES: rpm
{-q|--query} [select-options] [query-options]</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {-K|--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>INSTALLING, UPGRADING, AND REMOVING PACKAGES: rpm
{-i|--install} [install-options] PACKAGE_FILE ...</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>MISCELLANEOUS: rpm {--initdb|--rebuilddb}</p>

<p>rpm {--addsign|--resign} PACKAGE_FILE ...</p>

<p>rpm {--querytags|--showrc}</p>

<p>rpm {--setperms|--setugids} PACKAGE_NAME ...</p>

<p>select-options [PACKAGE_NAME] [-a,--all] [-f,--file
FILE] [-g,--group GROUP] {-p,--package PACKAGE_FILE]
[--fileid MD5] [--hdrid SHA1] [--pkgid MD5] [--tid TID]
[--querybynumber HDRNUM] [--triggeredby PACKAGE_NAME]
[--whatprovides CAPABILITY] [--whatrequires CAPABILITY]</p>

<p>query-options [--changelog] [-c,--configfiles]
[-d,--docfiles] [--dump] [--filesbypkg] [-i,--info] [--last]
[-l,--list] [--provides] [--qf,--queryformat QUERYFMT]
[-R,--requires] [--scripts] [-s,--state]
[--triggers,--triggerscripts]</p>

<p>verify-options [--nodeps] [--nofiles] [--noscripts]
[--nodigest] [--nosignature] [--nolinkto] [--nomd5]
[--nosize] [--nouser] [--nogroup] [--nomtime] [--nomode]
[--nordev]</p>

<p>install-options [--aid] [--allfiles] [--badreloc]
[--excludepath OLDPATH] [--excludedocs] [--force]
[-h,--hash] [--ignoresize] [--ignorearch] [--ignoreos]
[--includedocs] [--justdb] [--nodeps] [--nodigest]
[--nosignature] [--nosuggest] [--noorder] [--noscripts]
[--notriggers] [--oldpackage] [--percent] [--prefix NEWPATH]
[--relocate OLDPATH=NEWPATH] [--repackage] [--replacefiles]
[--replacepkgs] [--test]</p>

<p>DESCRIPTION rpm is a powerful Package Manager, which can
be used to build, install, query, verify, update, and erase
individual software packages. A pack- age consists of an
archive of files and meta-data used to install and erase the
archive files. The meta-data includes helper scripts, file
attributes, and descriptive information about the package.
Packages come in two varieties: binary packages, used to
encapsulate software to be installed, and source packages,
containing the source code and recipe necessary to produce
binary packages.</p>

<p>One of the following basic modes must be selected:
Query, Verify, Sig- nature Check, Install/Upgrade/Freshen,
Uninstall, Initialize Database, Rebuild Database, Resign,
Add Signature, Set Owners/Groups, Show Query- tags, and Show
Configuration.</p>

<p>GENERAL OPTIONS These options can be used in all the
different modes.</p>

<p>-?, --help Print a longer usage message then normal.</p>

<p>--version Print a single line containing the version
number of rpm being used.</p>

<p>--quiet Print as little as possible - normally only
error messages will be displayed.</p>

<p>-v Print verbose information - normally routine progress
messages will be displayed.</p>

<p>-vv Print lots of ugly debugging information.</p>

<p>--rcfile FILELIST Each of the files in the colon
separated FILELIST is read sequentially by rpm for
configuration information. Only the first file in the list
must exist, and tildes will be expanded to the value of
$HOME. The default FILELIST is
/usr/lib/rpm/rpmrc:/usr/lib/rpm/red-
hat/rpmrc:/etc/rpmrc:~/.rpmrc.</p>

<p>--pipe CMD Pipes the output of rpm to the command
CMD.</p>

<p>--dbpath DIRECTORY Use the database in DIRECTORY rather
than the default path /var/lib/rpm</p>

<p>--root DIRECTORY Use the file system tree rooted at
DIRECTORY for all operations. Note that this means the
database within DIRECTORY will be used for dependency checks
and any scriptlet(s) (e.g. %post if installing, or %prep if
building, a package) will be run after a chroot(2) to
DIRECTORY.</p>

<p>-D, --defineMACRO EXPR Defines MACRO with value
EXPR.</p>

<p>-E, --evalEXPR Prints macro expansion of EXPR.</p>

<p>INSTALL AND UPGRADE OPTIONS The general form of an rpm
install command is</p>

<p>rpm {-i|--install} [install-options] PACKAGE_FILE
...</p>

<p>This installs a new package.</p>

<p>The general form of an rpm upgrade command is</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>This upgrades or installs the package currently
installed to a newer version. This is the same as install,
except all other version(s) of the package are removed after
the new package is installed.</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>This will upgrade packages, but only if an earlier
version currently exists. The PACKAGE_FILE may be specified
as an ftp or http URL, in which case the package will be
downloaded before being installed. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client
support.</p>

<p>--aid Add suggested packages to the transaction set when
needed.</p>

<p>--allfiles Installs or upgrades all the missingok files
in the package, regardless if they exist.</p>

<p>--badreloc Used with --relocate, permit relocations on
all file paths, not just those OLDPATHs included in the
binary package relocation hint(s).</p>

<p>--excludepath OLDPATH Dont install files whose name
begins with OLDPATH.</p>

<p>--excludedocs Don t install any files which are marked
as documentation (which includes man pages and texinfo
documents).</p>

<p>--force Same as using --replacepkgs, --replacefiles, and
--oldpackage.</p>

<p>-h, --hash Print 50 hash marks as the package archive is
unpacked. Use with -v|--verbose for a nicer display.</p>

<p>--ignoresize Dont check mount file systems for
sufficient disk space before installing this package.</p>

<p>--ignorearch Allow installation or upgrading even if the
architectures of the binary package and host dont match.</p>

<p>--ignoreos Allow installation or upgrading even if the
operating systems of the binary package and host dont
match.</p>

<p>--includedocs Install documentation files. This is the
default behavior.</p>

<p>--justdb Update only the database, not the
filesystem.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nosignature Don t verify package or header signatures
when reading.</p>

<p>--nodeps Dont do a dependency check before installing or
upgrading a package.</p>

<p>--nosuggest Don t suggest package(s) that provide a
missing dependency.</p>

<p>--noorder Dont reorder the packages for an install. The
list of packages would normally be reordered to satisfy
dependencies.</p>

<p>--noscripts</p>

<p>--nopre</p>

<p>--nopost</p>

<p>--nopreun</p>

<p>--nopostun Dont execute the scriptlet of the same name.
The --noscripts option is equivalent to</p>

<p>--nopre --nopost --nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %pre,
%post, %preun, and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerin</p>

<p>--notriggerun</p>

<p>--notriggerpostun Dont execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerin --notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerin,
%trig- gerun, and %triggerpostun scriptlet(s).</p>

<p>--oldpackage Allow an upgrade to replace a newer package
with an older one.</p>

<p>--percent Print percentages as files are unpacked from
the package archive. This is intended to make rpm easy to
run from other tools.</p>

<p>--prefix NEWPATH For relocatable binary packages,
translate all file paths that start with the installation
prefix in the package relocation hint(s) to NEWPATH.</p>

<p>--relocate OLDPATH=NEWPATH For relocatable binary
packages, translate all file paths that start with OLDPATH
in the package relocation hint(s) to NEWPATH. This option
can be used repeatedly if several OLDPATHs in the package
are to be relocated.</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--replacefiles Install the packages even if they replace
files from other, already installed, packages.</p>

<p>--replacepkgs Install the packages even if some of them
are already installed on this system.</p>

<p>--test Do not install the package, simply check for and
report poten- tial conflicts.</p>

<p>ERASE OPTIONS The general form of an rpm erase command
is</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>The following options may also be used:</p>

<p>--allmatches Remove all versions of the package which
match PACKAGE_NAME. Normally an error is issued if
PACKAGE_NAME matches multiple packages.</p>

<p>--nodeps Dont check dependencies before uninstalling the
packages.</p>

<p>--noscripts</p>

<p>--nopreun</p>

<p>--nopostun Don t execute the scriptlet of the same name.
The --noscripts option during package erase is equivalent
to</p>

<p>--nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %preun,
and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerun</p>

<p>--notriggerpostun Don t execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerun,
and %triggerpostun scriptlet(s).</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--test Dont really uninstall anything, just go through
the motions. Useful in conjunction with the -vv option for
debugging.</p>

<p>QUERY OPTIONS The general form of an rpm query command
is</p>

<p>rpm {-q|--query} [select-options] [query-options]</p>

<p>You may specify the format that package information
should be printed in. To do this, you use the</p>

<p>--qf|--queryformat QUERYFMT</p>

<p>option, followed by the QUERYFMT format string. Query
formats are mod- ified versions of the standard printf(3)
formatting. The format is made up of static strings (which
may include standard C character escapes for newlines, tabs,
and other special characters) and printf(3) type formatters.
As rpm already knows the type to print, the type specifier
must be omitted however, and replaced by the name of the
header tag to be printed, enclosed by {} characters. Tag
names are case insensitive, and the leading RPMTAG_ portion
of the tag name may be omitted as well.</p>

<p>Alternate output formats may be requested by following
the tag with :typetag. Currently, the following types are
supported:</p>

<p>:armor Wrap a public key in ASCII armor.</p>

<p>:base64 Encode binary data using base64.</p>

<p>:date Use strftime(3) &quot;%c&quot; format.</p>

<p>:day Use strftime(3) &quot;%a %b %d %Y&quot; format.</p>

<p>:depflags Format dependency flags.</p>

<p>:fflags Format file flags.</p>

<p>:hex Format in hexadecimal.</p>

<p>:octal Format in octal.</p>

<p>:perms Format file permissions.</p>

<p>:shescape Escape single quotes for use in a script.</p>

<p>:triggertype Display trigger suffix.</p>

<p>For example, to print only the names of the packages
queried, you could use %{NAME} as the format string. To
print the packages name and dis- tribution information in
two columns, you could use %-30{NAME}%{DISTRI- BUTION}. rpm
will print a list of all of the tags it knows about when it
is invoked with the --querytags argument.</p>

<p>There are two subsets of options for querying: package
selection, and information selection.</p>

<p>PACKAGE SELECTION OPTIONS: PACKAGE_NAME Query installed
package named PACKAGE_NAME.</p>

<p>-a, --all Query all installed packages.</p>

<p>-f, --file FILE Query package owning FILE.</p>

<p>--fileid MD5 Query package that contains a given file
identifier, i.e. the MD5 digest of the file contents.</p>

<p>-g, --group GROUP Query packages with the group of
GROUP.</p>

<p>--hdrid SHA1 Query package that contains a given header
identifier, i.e. the SHA1 digest of the immutable header
region.</p>

<p>-p, --package PACKAGE_FILE Query an (uninstalled)
package PACKAGE_FILE. The PACKAGE_FILE may be specified as
an ftp or http style URL, in which case the package header
will be downloaded and queried. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client support.
The PACKAGE_FILE argument(s), if not a binary package, will
be interpreted as an ASCII package manifest. Comments are
permitted, starting with a #, and each line of a package
mani- fest file may include white space separated glob
expressions, including URLs with remote glob expressions,
that will be expanded to paths that are substituted in place
of the package manifest as additional PACKAGE_FILE arguments
to the query.</p>

<p>--pkgid MD5 Query package that contains a given package
identifier, i.e. the MD5 digest of the combined header and
payload contents.</p>

<p>--querybynumber HDRNUM Query the HDRNUMth database entry
directly; this is useful only for debugging.</p>

<p>--specfile SPECFILE Parse and query SPECFILE as if it
were a package. Although not all the information (e.g. file
lists) is available, this type of query permits rpm to be
used to extract information from spec files without having
to write a specfile parser.</p>

<p>--tid TID Query package(s) that have a given TID
transaction identifier. A unix time stamp is currently used
as a transaction identifier. All package(s) installed or
erased within a single transaction have a common
identifier.</p>

<p>--triggeredby PACKAGE_NAME Query packages that are
triggered by package(s) PACKAGE_NAME.</p>

<p>--whatprovides CAPABILITY Query all packages that
provide the CAPABILITY capability.</p>

<p>--whatrequires CAPABILITY Query all packages that
requires CAPABILITY for proper function- ing.</p>

<p>PACKAGE QUERY OPTIONS: --changelog Display change
information for the package.</p>

<p>-c, --configfiles List only configuration files (implies
-l).</p>

<p>-d, --docfiles List only documentation files (implies
-l).</p>

<p>--dump Dump file information as follows (implies
-l):</p>

<p>path size mtime md5sum mode owner group isconfig isdoc
rdev symlink</p>

<p>--filesbypkg List all the files in each selected
package.</p>

<p>-i, --info Display package information, including name,
version, and description. This uses the --queryformat if one
was specified.</p>

<p>--last Orders the package listing by install time such
that the latest packages are at the top.</p>

<p>-l, --list List files in package.</p>

<p>--provides List capabilities this package provides.</p>

<p>-R, --requires List packages on which this package
depends.</p>

<p>--scripts List the package specific scriptlet(s) that
are used as part of the installation and uninstallation
processes.</p>

<p>-s, --state Display the states of files in the package
(implies -l). The state of each file is one of normal, not
installed, or replaced.</p>

<p>--triggers, --triggerscripts Display the trigger
scripts, if any, which are contained in the package.</p>

<p>VERIFY OPTIONS The general form of an rpm verify command
is</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>Verifying a package compares information about the
installed files in the package with information about the
files taken from the package metadata stored in the rpm
database. Among other things, verifying compares the size,
MD5 sum, permissions, type, owner and group of each file.
Any discrepancies are displayed. Files that were not
installed from the package, for example, documentation files
excluded on instal- lation using the
&quot;--excludedocs&quot; option, will be silently
ignored.</p>

<p>The package selection options are the same as for
package querying (including package manifest files as
arguments). Other options unique to verify mode are:</p>

<p>--nodeps Dont verify dependencies of packages.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nofiles Dont verify any attributes of package
files.</p>

<p>--noscripts Don t execute the %verifyscript scriptlet
(if any).</p>

<p>--nosignature Dont verify package or header signatures
when reading.</p>

<p>--nolinkto</p>

<p>--nomd5</p>

<p>--nosize</p>

<p>--nouser</p>

<p>--nogroup</p>

<p>--nomtime</p>

<p>--nomode</p>

<p>--nordev Dont verify the corresponding file
attribute.</p>

<p>The format of the output is a string of 8 characters, a
possible attribute marker:</p>

<p>c %config configuration file. d %doc documentation file.
g %ghost file (i.e. the file contents are not included in
the package payload). l %license license file. r %readme
readme file.</p>

<p>from the package header, followed by the file name. Each
of the 8 characters denotes the result of a comparison of
attribute(s) of the file to the value of those attribute(s)
recorded in the database. A single &quot;.&quot; (period)
means the test passed, while a single &quot;?&quot;
(question mark) indicates the test could not be performed
(e.g. file permissions prevent reading). Otherwise, the
(mnemonically emBoldened) character denotes failure of the
corresponding --verify test:</p>

<p>S file Size differs M Mode differs (includes permissions
and file type) 5 MD5 sum differs D Device major/minor number
mismatch L readLink(2) path mismatch U User ownership
differs G Group ownership differs T mTime differs</p>

<p>DIGITAL SIGNATURE AND DIGEST VERIFICATION The general
forms of rpm digital signature commands are</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>The --checksig option checks all the digests and
signatures contained in PACKAGE_FILE to ensure the integrity
and origin of the package. Note that signatures are now
verified whenever a package is read, and --checksig is
useful to verify all of the digests and signatures asso-
ciated with a package.</p>

<p>Digital signatures cannot be verified without a public
key. An ASCII armored public key can be added to the rpm
database using --import. An imported public key is carried
in a header, and key ring management is performed exactly
like package management. For example, all currently imported
public keys can be displayed by:</p>

<p>rpm -qa gpg-pubkey*</p>

<p>Details about a specific public key, when imported, can
be displayed by querying. Heres information about the Red
Hat GPG/DSA key:</p>

<p>rpm -qi gpg-pubkey-db42a60e</p>

<p>Finally, public keys can be erased after importing just
like packages. Heres how to remove the Red Hat GPG/DSA
key</p>

<p>rpm -e gpg-pubkey-db42a60e</p>

<p>SIGNING A PACKAGE rpm --addsign|--resign PACKAGE_FILE
...</p>

<p>Both of the --addsign and --resign options generate and
insert new sig- natures for each package PACKAGE_FILE given,
replacing any existing signatures. There are two options for
historical reasons, there is no difference in behavior
currently.</p>

<p>USING GPG TO SIGN PACKAGES In order to sign packages
using GPG, rpm must be configured to run GPG and be able to
find a key ring with the appropriate keys. By default, rpm
uses the same conventions as GPG to find key rings, namely
the $GNUPGHOME environment variable. If your key rings are
not located where GPG expects them to be, you will need to
configure the macro %_gpg_path to be the location of the GPG
key rings to use.</p>

<p>For compatibility with older versions of GPG, PGP, and
rpm, only V3 OpenPGP signature packets should be configured.
Either DSA or RSA ver- ification algorithms can be used, but
DSA is preferred.</p>

<p>If you want to be able to sign packages you create
yourself, you also need to create your own public and secret
key pair (see the GPG man- ual). You will also need to
configure the rpm macros</p>

<p>%_signature The signature type. Right now only gpg and
pgp are supported.</p>

<p>%_gpg_name The name of the &quot;user&quot; whose key
you wish to use to sign your packages.</p>

<p>For example, to be able to use GPG to sign packages as
the user &quot;John Doe &lt;jdoe@foo.com&gt;&quot; from the
key rings located in /etc/rpm/.gpg using the executable
/usr/bin/gpg you would include</p>

<p>%_signature gpg %_gpg_path /etc/rpm/.gpg %_gpg_name John
Doe &lt;jdoe@foo.com&gt; %_gpgbin /usr/bin/gpg</p>

<p>in a macro configuration file. Use /etc/rpm/macros for
per-system con- figuration and ~/.rpmmacros for per-user
configuration.</p>

<p>REBUILD DATABASE OPTIONS The general form of an rpm
rebuild database command is</p>

<p>rpm {--initdb|--rebuilddb} [-v] [--dbpath DIRECTORY]
[--root DIRECTORY]</p>

<p>Use --initdb to create a new database if one doesnt
already exist (existing database is not overwritten), use
--rebuilddb to rebuild the database indices from the
installed package headers.</p>

<p>SHOWRC The command</p>

<p>rpm --showrc</p>

<p>shows the values rpm will use for all of the options are
currently set in rpmrc and macros configuration file(s).</p>

<p>FTP/HTTP OPTIONS rpm can act as an FTP and/or HTTP
client so that packages can be queried or installed from the
internet. Package files for install, upgrade, and query
operations may be specified as an ftp or http style URL:</p>

<p>ftp://USER:PASSWORD@HOST:PORT/path/to/package.rpm</p>

<p>If the :PASSWORD portion is omitted, the password will
be prompted for (once per user/hostname pair). If both the
user and password are omit- ted, anonymous ftp is used. In
all cases, passive (PASV) ftp transfers are performed.</p>

<p>rpm allows the following options to be used with ftp
URLs:</p>

<p>--ftpproxy HOST The host HOST will be used as a proxy
server for all ftp trans- fers, which allows users to ftp
through firewall machines which use proxy systems. This
option may also be specified by config- uring the macro
%_ftpproxy.</p>

<p>--ftpport PORT The TCP PORT number to use for the ftp
connection on the proxy ftp server instead of the default
port. This option may also be specified by configuring the
macro %_ftpport.</p>

<p>rpm allows the following options to be used with http
URLs:</p>

<p>--httpproxy HOST The host HOST will be used as a proxy
server for all http trans- fers. This option may also be
specified by configuring the macro %_httpproxy.</p>

<p>--httpport PORT The TCP PORT number to use for the http
connection on the proxy http server instead of the default
port. This option may also be specified by configuring the
macro %_httpport.</p>

<p>LEGACY ISSUES Executing rpmbuild The build modes of rpm
are now resident in the /usr/bin/rpmbuild exe- cutable.
Although legacy compatibility provided by the popt aliases
below has been adequate, the compatibility is not perfect;
hence build mode compatibility through popt aliases is being
removed from rpm. Install the package containing rpmbuild
(usually rpm-build) and see rpmbuild(8) for documentation of
all the rpm build modes previously documented here in
rpm(8).</p>

<p>Add the following lines to /etc/popt if you wish to
continue invoking rpmbuild from the rpm command line:</p>

<p>rpm exec --bp rpmb -bp rpm exec --bc rpmb -bc rpm exec
--bi rpmb -bi rpm exec --bl rpmb -bl rpm exec --ba rpmb -ba
rpm exec --bb rpmb -bb rpm exec --bs rpmb -bs rpm exec --tp
rpmb -tp rpm exec --tc rpmb -tc rpm exec --ti rpmb -ti rpm
exec --tl rpmb -tl rpm exec --ta rpmb -ta rpm exec --tb rpmb
-tb rpm exec --ts rpmb -ts rpm exec --rebuild rpmb --rebuild
rpm exec --recompile rpmb --recompile rpm exec --clean rpmb
--clean rpm exec --rmsource rpmb --rmsource rpm exec
--rmspec rpmb --rmspec rpm exec --target rpmb --target rpm
exec --short-circuit rpmb --short-circuit</p>

<p>FILES rpmrc Configuration /usr/lib/rpm/rpmrc
/usr/lib/rpm/redhat/rpmrc /etc/rpmrc ~/.rpmrc</p>

<p>Macro Configuration /usr/lib/rpm/macros
/usr/lib/rpm/redhat/macros /etc/rpm/macros ~/.rpmmacros</p>

<p>Database /var/lib/rpm/Basenames
/var/lib/rpm/Conflictname /var/lib/rpm/Dirnames
/var/lib/rpm/Filemd5s /var/lib/rpm/Group
/var/lib/rpm/Installtid /var/lib/rpm/Name
/var/lib/rpm/Packages /var/lib/rpm/Providename
/var/lib/rpm/Provideversion /var/lib/rpm/Pubkeys
/var/lib/rpm/Removed /var/lib/rpm/Requirename
/var/lib/rpm/Requireversion /var/lib/rpm/Sha1header
/var/lib/rpm/Sigmd5 /var/lib/rpm/Triggername</p>

<p>Temporary /var/tmp/rpm*</p>

<p>SEE ALSO popt(3), rpm2cpio(8), rpmbuild(8),</p>

<p>rpm --help - as rpm supports customizing the options via
popt aliases its impossible to guarantee that whats
described in the manual matches whats available.</p>

<p>http://www.rpm.org/ &lt;URL:http://www.rpm.org/&gt;</p>

<p>AUTHORS Marc Ewing &lt;marc@redhat.com&gt; Jeff Johnson
&lt;jbj@redhat.com&gt; Erik Troan &lt;ewt@redhat.com&gt;</p>

<p>Red Hat, Inc. 09 June 2002 RPM(8) HDPARM(8)
HDPARM(8)</p>

<p>NAME hdparm - get/set hard disk parameters</p>

<p>SYNOPSIS hdparm [ flags ] [device] ..</p>

<p>DESCRIPTION hdparm provides a command line interface to
various hard disk ioctls supported by the stock Linux
ATA/IDE device driver subsystem. Some options may work
correctly only with the latest kernels. For best results,
compile hdparm with the include files from the latest kernel
source code.</p>

<p>OPTIONS When no flags are given, -acdgkmnru is
assumed.</p>

<p>-a Get/set sector count for filesystem read-ahead. This
is used to improve performance in sequential reads of large
files, by prefetching additional blocks in anticipation of
them being needed by the running task. In the current kernel
version (2.0.10) this has a default setting of 8 sectors
(4KB). This value seems good for most purposes, but in a
system where most file accesses are random seeks, a smaller
setting might provide better performance. Also, many IDE
drives also have a separate built-in read-ahead function,
which alleviates the need for a filesystem read-ahead in
many situations.</p>

<p>-A Disable/enable the IDE drive&acute;s read-lookahead
feature (usually ON by default). Usage: -A0 (disable) or -A1
(enable).</p>

<p>-b Get/set bus state.</p>

<p>-B Set Advanced Power Management feature, if the drive
supports it. A low value means aggressive power management
and a high value means better performance. A value of 255
will disable apm on the drive.</p>

<p>-c Query/enable (E)IDE 32-bit I/O support. A numeric
parameter can be used to enable/disable 32-bit I/O support:
Currently sup- ported values include 0 to disable 32-bit I/O
support, 1 to enable 32-bit data transfers, and 3 to enable
32-bit data trans- fers with a special sync sequence
required by many chipsets. The value 3 works with nearly all
32-bit IDE chipsets, but incurs slightly more overhead. Note
that &quot;32-bit&quot; refers to data transfers across a
PCI or VLB bus to the interface card only; all (E)IDE drives
still have only a 16-bit connection over the ribbon cable
from the interface card.</p>

<p>-C Check the current IDE power mode status, which will
always be one of unknown (drive does not support this
command), active/idle (normal operation), standby (low power
mode, drive has spun down), or sleeping (lowest power mode,
drive is com- pletely shut down). The -S, -y, -Y, and -Z
flags can be used to manipulate the IDE power modes.</p>

<p>-d Disable/enable the &quot;using_dma&quot; flag for
this drive. This option now works with most combinations of
drives and PCI interfaces which support DMA and which are
known to the kernel IDE driver. It is also a good idea to
use the appropriate -X option in com- bination with -d1 to
ensure that the drive itself is programmed for the correct
DMA mode, although most BIOSs should do this for you at boot
time. Using DMA nearly always gives the best performance,
with fast I/O throughput and low CPU usage. But there are at
least a few configurations of chipsets and drives for which
DMA does not make much of a difference, or may even slow
things down (on really messed up hardware!). Your mileage
may vary.</p>

<p>--direct Use the kernel O_DIRECT flag when performing a
-t timing test. This bypasses the page cache, causing the
reads to go directly from the drive into hdparm s buffers,
using so-called &quot;raw&quot; I/O. In many cases, this can
produce results that appear much faster than the usual page
cache method, giving a better indication of raw device and
driver performance.</p>

<p>-D Enable/disable the on-drive defect management
feature, whereby the drive firmware tries to automatically
manage defective sec- tors by relocating them to
&quot;spare&quot; sectors reserved by the fac- tory for
such.</p>

<p>-E Set cdrom speed. This is NOT necessary for regular
operation, as the drive will automatically switch speeds on
its own. But if you want to play with it, just supply a
speed number after the option, usually a number like 2 or
4.</p>

<p>-f Sync and flush the buffer cache for the device on
exit. This operation is also performed as part of the -t and
-T timings.</p>

<p>-g Display the drive geometry (cylinders, heads,
sectors), the size (in sectors) of the device, and the
starting offset (in sectors) of the device from the
beginning of the drive.</p>

<p>-h Display terse usage information (help).</p>

<p>-i Display the identification info that was obtained
from the drive at boot time, if available. This is a feature
of modern IDE drives, and may not be supported by older
devices. The data returned may or may not be current,
depending on activity since booting the system. However, the
current multiple sector mode count is always shown. For a
more detailed interpretation of the identification info,
refer to AT Attachment Interface for Disk Drives (ANSI ASC
X3T9.2 working draft, revision 4a, April 19/93).</p>

<p>-I Request identification info directly from the drive,
which is displayed in a new expanded format with
considerably more detail than with the older -i flag.</p>

<p>--Istdin This is a special &quot;no seatbelts&quot;
variation on the -I option, which accepts a drive
identification block as standard input instead of using a
/dev/hd* parameter. The format of this block must be exactly
the same as that found in the /proc/ide/*/hd*/identify
&quot;files&quot;, or that produced by the --Istdout option
described below. This variation is designed for use with
collected &quot;libraries&quot; of drive identification
information, and can also be used on ATAPI drives which may
give media errors with the standard mechanism.</p>

<p>--Istdout This option simply dumps the identify data in
hex to stdout, in a format similar to that from /proc/, and
suitable for later use with the --Istdin option.</p>

<p>-k Get/set the keep_settings_over_reset flag for the
drive. When this flag is set, the driver will preserve the
-dmu options over a soft reset, (as done during the error
recovery sequence). This flag defaults to off, to prevent
drive reset loops which could be caused by combinations of
-dmu settings. The -k flag should therefore only be set
after one has achieved confidence in correct system
operation with a chosen set of configuration settings. In
practice, all that is typically necessary to test a
configuration (prior to using -k) is to verify that the
drive can be read/written, and that no error logs (kernel
messages) are generated in the process (look in
/var/adm/messages on most systems).</p>

<p>-K Set the drive&acute;s keep_features_over_reset flag.
Setting this enables the drive to retain the settings for
-APSWXZ over a soft reset (as done during the error recovery
sequence). Not all drives support this feature.</p>

<p>-L Set the drive&acute;s doorlock flag. Setting this to
1 will lock the door mechanism of some removable hard drives
(eg. Syquest, ZIP, Jazz..), and setting it to 0 will unlock
the door mechanism. Normally, Linux maintains the door
locking mechanism automati- cally, depending on drive usage
(locked whenever a filesystem is mounted). But on system
shutdown, this can be a nuisance if the root partition is on
a removeable disk, since the root partition is left mounted
(read-only) after shutdown. So, by using this command to
unlock the door after the root filesystem is remounted
read-only, one can then remove the cartridge from the drive
after shutdown.</p>

<p>-m Get/set sector count for multiple sector I/O on the
drive. A setting of 0 disables this feature. Multiple sector
mode (aka IDE Block Mode), is a feature of most modern IDE
hard drives, permitting the transfer of multiple sectors per
I/O interrupt, rather than the usual one sector per
interrupt. When this fea- ture is enabled, it typically
reduces operating system overhead for disk I/O by 30-50%. On
many systems, it also provides increased data throughput of
anywhere from 5% to 50%. Some drives, however (most notably
the WD Caviar series), seem to run slower with multiple mode
enabled. Your mileage may vary. Most drives support the
minimum settings of 2, 4, 8, or 16 (sectors). Larger
settings may also be possible, depending on the drive. A
setting of 16 or 32 seems optimal on many systems. Western
Dig- ital recommends lower settings of 4 to 8 on many of
their drives, due tiny (32kB) drive buffers and
non-optimized buffer- ing algorithms. The -i flag can be
used to find the maximum setting supported by an installed
drive (look for MaxMultSect in the output). Some drives
claim to support multiple mode, but lose data at some
settings. Under rare circumstances, such failures can result
in massive filesystem corruption.</p>

<p>-M Get/set Automatic Acoustic Management (AAM) setting.
Most modern harddisk drives have the ability to speed down
the head move- ments to reduce their noise output. The
possible values are between 0 and 254. 128 is the most quiet
(and therefore slowest) setting and 254 the fastest (and
loudest). Some drives have only two levels (quiet / fast),
while others may have different lev- els between 128 and
254. At the moment, most drives only sup- port 3 options,
off, quiet, and fast. These have been assigned the values 0,
128, and 254 at present, respectively, but integer space has
been incorporated for future expansion, should this
change.</p>

<p>-n Get or set the &quot;ignore write errors&quot; flag
in the driver. Do NOT play with this without grokking the
driver source code first.</p>

<p>-p Attempt to reprogram the IDE interface chipset for
the specified PIO mode, or attempt to auto-tune for the
&quot;best&quot; PIO mode sup- ported by the drive. This
feature is supported in the kernel for only a few
&quot;known&quot; chipsets, and even then the support is
iffy at best. Some IDE chipsets are unable to alter the PIO
mode for a single drive, in which case this flag may cause
the PIO mode for both drives to be set. Many IDE chipsets
support either fewer or more than the standard six (0 to 5)
PIO modes, so the exact speed setting that is actually
implemented will vary by chipset/driver sophistication. Use
with extreme cau- tion! This feature includes zero
protection for the unwary, and an unsuccessful outcome may
result in severe filesystem corrup- tion!</p>

<p>-P Set the maximum sector count for the drive&acute;s
internal prefetch mechanism. Not all drives support this
feature.</p>

<p>-q Handle the next flag quietly, suppressing normal
output. This is useful for reducing screen clutter when
running from system startup scripts. Not applicable to the
-i or -v or -t or -T flags.</p>

<p>-Q Set tagged queue depth (1 or greater), or turn tagged
queuing off (0). This only works with the newer 2.5.xx (or
later) ker- nels, and only with the few drives that
currently support it.</p>

<p>-r Get/set read-only flag for the device. When set,
Linux disal- lows write operations on the device.</p>

<p>-R Register an IDE interface. Dangerous. See the -U
option for more information.</p>

<p>-S Set the standby (spindown) timeout for the drive.
This value is used by the drive to determine how long to
wait (with no disk activity) before turning off the spindle
motor to save power. Under such circumstances, the drive may
take as long as 30 sec- onds to respond to a subsequent disk
access, though most drives are much quicker. The encoding of
the timeout value is somewhat peculiar. A value of zero
means &quot;timeouts are disabled&quot;: the device will not
automatically enter standby mode. Values from 1 to 240
specify multiples of 5 seconds, yielding timeouts from 5
seconds to 20 minutes. Values from 241 to 251 specify from 1
to 11 units of 30 minutes, yielding timeouts from 30 minutes
to 5.5 hours. A value of 252 signifies a timeout of 21
minutes. A value of 253 sets a vendor-defined timeout period
between 8 and 12 hours, and the value 254 is reserved. 255
is interpreted as 21 minutes plus 15 seconds. Note that some
older drives may have very different interpretations of
these values.</p>

<p>-T Perform timings of cache reads for benchmark and
comparison pur- poses. For meaningful results, this
operation should be repeated 2-3 times on an otherwise
inactive system (no other active processes) with at least a
couple of megabytes of free memory. This displays the speed
of reading directly from the Linux buffer cache without disk
access. This measurement is essentially an indication of the
throughput of the processor, cache, and memory of the system
under test. If the -t flag is also specified, then a
correction factor based on the outcome of -T will be
incorporated into the result reported for the -t
operation.</p>

<p>-t Perform timings of device reads for benchmark and
comparison purposes. For meaningful results, this operation
should be repeated 2-3 times on an otherwise inactive system
(no other active processes) with at least a couple of
megabytes of free memory. This displays the speed of reading
through the buffer cache to the disk without any prior
caching of data. This mea- surement is an indication of how
fast the drive can sustain sequential data reads under
Linux, without any filesystem overhead. To ensure accurate
measurements, the buffer cache is flushed during the
processing of -t using the BLKFLSBUF ioctl. If the -T flag
is also specified, then a correction factor based on the
outcome of -T will be incorporated into the result reported
for the -t operation.</p>

<p>-u Get/set interrupt-unmask flag for the drive. A
setting of 1 permits the driver to unmask other interrupts
during processing of a disk interrupt, which greatly
improves Linux&acute;s responsive- ness and eliminates
&quot;serial port overrun&quot; errors. Use this fea- ture
with caution: some drive/controller combinations do not
tolerate the increased I/O latencies possible when this
feature is enabled, resulting in massive filesystem
corruption. In par- ticular, CMD-640B and RZ1000 (E)IDE
interfaces can be unreliable (due to a hardware flaw) when
this option is used with kernel versions earlier than
2.0.13. Disabling the IDE prefetch fea- ture of these
interfaces (usually a BIOS/CMOS setting) provides a safe fix
for the problem for use with earlier kernels.</p>

<p>-U Un-register an IDE interface. Dangerous. The
companion for the -R option. Intended for use with hardware
made specifically for hot-swapping (very rare!). Use with
knowledge and extreme cau- tion as this can easily hang or
damage your system. The hdparm source distribution includes
a &acute;contrib&acute; directory with some user-donated
scripts for hot-swapping on the UltraBay of a ThinkPad 600E.
Use at your own risk.</p>

<p>-v Display all settings, except -i (same as -acdgkmnru
for IDE, -gr for SCSI or -adgr for XT). This is also the
default behaviour when no flags are specified.</p>

<p>-w Perform a device reset (DANGEROUS). Do NOT use this
option. It exists for unlikely situations where a reboot
might otherwise be required to get a confused drive back
into a useable state.</p>

<p>-W Disable/enable the IDE drive&acute;s write-caching
feature (default state is undeterminable; manufacturer/model
specific).</p>

<p>-x Tristate device for hotswap (DANGEROUS).</p>

<p>-X Set the IDE transfer mode for newer (E)IDE/ATA
drives. This is typically used in combination with -d1 when
enabling DMA to/from a drive on a supported interface
chipset, where -X mdma2 is used to select multiword DMA
mode2 transfers and -X sdma1 is used to select simple mode 1
DMA transfers. With systems which support UltraDMA burst
timings, -X udma2 is used to select UltraDMA mode2 transfers
(you&acute;ll need to prepare the chipset for UltraDMA
beforehand). Apart from that, use of this flag is seldom
neces- sary since most/all modern IDE drives default to
their fastest PIO transfer mode at power-on. Fiddling with
this can be both needless and risky. On drives which support
alternate transfer modes, -X can be used to switch the mode
of the drive only. Prior to changing the transfer mode, the
IDE interface should be jumpered or programmed (see -p flag)
for the new mode setting to prevent loss and/or corruption
of data. Use this with extreme caution! For the PIO
(Programmed Input/Output) transfer modes used by Linux, this
value is simply the desired PIO mode number plus 8. Thus, a
value of 09 sets PIO mode1, 10 enables PIO mode2, and 11
selects PIO mode3. Setting 00 restores the drive&acute;s
&quot;default&quot; PIO mode, and 01 disables IORDY. For
multi- word DMA, the value used is the desired DMA mode
number plus 32. for UltraDMA, the value is the desired
UltraDMA mode number plus 64.</p>

<p>-y Force an IDE drive to immediately enter the low power
consump- tion standby mode, usually causing it to spin down.
The current power mode status can be checked using the -C
flag.</p>

<p>-Y Force an IDE drive to immediately enter the lowest
power con- sumption sleep mode, causing it to shut down
completely. A hard or soft reset is required before the
drive can be accessed again (the Linux IDE driver will
automatically handle issuing a reset if/when needed). The
current power mode status can be checked using the -C
flag.</p>

<p>-z Force a kernel re-read of the partition table of the
specified device(s).</p>

<p>-Z Disable the automatic power-saving function of
certain Seagate drives (ST3xxx models?), to prevent them
from idling/spinning- down at inconvenient times.</p>

<p>ATA Security Feature Set</p>

<p>These switches are DANGEROUS to experiment with, and
might not work with every kernel. USE AT YOUR OWN RISK.</p>

<p>--security-help Display terse usage info for all of the
--security-* flags.</p>

<p>--security-freeze Freeze the drive&acute;s security
settings. The drive does not accept any security commands
until next power-on reset. Use this func- tion in
combination with --security-unlock to protect drive from any
attempt to set a new password. Can be used standalone,
too.</p>

<p>--security-unlock PWD Unlock the drive, using password
PWD. Password is given as an ASCII string and is padded with
NULs to reach 32 bytes. The applicable drive password is
selected with the --user-master switch. THIS FEATURE IS
EXPERIMENTAL AND NOT WELL TESTED. USE AT YOUR OWN RISK.</p>

<p>--security-set-pass PWD Lock the drive, using password
PWD (Set Password) (DANGEROUS). Password is given as an
ASCII string and is padded with NULs to reach 32 bytes. The
applicable drive password is selected with the --user-master
switch and the applicable security mode with the
--security-mode switch. THIS FEATURE IS EXPERIMENTAL AND NOT
WELL TESTED. USE AT YOUR OWN RISK.</p>

<p>--security-disable PWD Disable drive locking, using
password PWD. Password is given as an ASCII string and is
padded with NULs to reach 32 bytes. The applicable drive
password is selected with the --user-master switch. THIS
FEATURE IS EXPERIMENTAL AND NOT WELL TESTED. USE AT YOUR OWN
RISK.</p>

<p>--security-erase PWD Erase (locked) drive, using
password PWD (DANGEROUS). Password is given as an ASCII
string and is padded with NULs to reach 32 bytes. The
applicable drive password is selected with the --user-master
switch. THIS FEATURE IS EXPERIMENTAL AND NOT WELL TESTED.
USE AT YOUR OWN RISK.</p>

<p>--security-erase-enhanced PWD Enhanced erase (locked)
drive, using password PWD (DANGEROUS). Password is given as
an ASCII string and is padded with NULs to reach 32 bytes.
The applicable drive password is selected with the
--user-master switch. THIS FEATURE IS EXPERIMENTAL AND NOT
WELL TESTED. USE AT YOUR OWN RISK.</p>

<p>--user-master USER Specifies which password
(user/master) to select. Defaults to master. Only useful in
combination with --security-unlock, --security-set-pass,
--security-disable, --security-erase or
--security-erase-enhanced. u user password m master
password</p>

<p>THIS FEATURE IS EXPERIMENTAL AND NOT WELL TESTED. USE AT
YOUR OWN RISK.</p>

<p>--security-mode MODE Specifies which security mode
(high/maximum) to set. Defaults to high. Only useful in
combination with --security-set-pass. h high security m
maximum security</p>

<p>THIS FEATURE IS EXPERIMENTAL AND NOT WELL TESTED. USE AT
YOUR OWN RISK.</p>

<p>BUGS As noted above, the -m sectcount and -u 1 options
should be used with caution at first, preferably on a
read-only filesystem. Most drives work well with these
features, but a few drive/controller combinations are not
100% compatible. Filesystem corruption may result. Backup
everything before experimenting!</p>

<p>Some options (eg. -r for SCSI) may not work with old
kernels as neces- sary ioctl()&acute;s were not
supported.</p>

<p>Although this utility is intended primarily for use with
(E)IDE hard disk devices, several of the options are also
valid (and permitted) for use with SCSI hard disk devices
and MFM/RLL hard disks with XT inter- faces.</p>

<p>The Linux kernel up until 2.6.12 (and probably later)
doesn&acute;t handle the security unlock and disable
commands gracefully and will segfault and in some cases even
panic. The security commands however might indeed have been
executed by the drive. This poor kernel behaviour makes the
PIO data security commands rather useless at the moment.</p>

<p>Note that the &quot;security erase&quot; and
&quot;security disable&quot; commands have been implemented
as two consecutive PIO data commands and will not suc- ceed
on a locked drive because the second command will not be
issued after the segfault. See the code for hints how patch
it to work around this problem. Despite the segfault it is
often still possible to run two instances of hdparm
consecutively and issue the two necessary com- mands that
way.</p>

<p>AUTHOR hdparm has been written by Mark Lord
&lt;mlord@pobox.com&gt;, the original primary developer and
maintainer of the (E)IDE driver for Linux, with suggestions
from many netfolk.</p>

<p>The disable Seagate auto-powersaving code is courtesy of
Tomi Leppikan- gas(tomilepp@paju.oulu.fi).</p>

<p>Security freeze command by Benjamin Benz
&lt;bbe@heise.de&gt;, 2005.</p>

<p>PIO data out security commands by Leonard den Ottolander
&lt;leonard den ottolander nl&gt;, 2005. Parts by Benjamin
Benz &lt;bbe@heise.de&gt; and oth- ers.</p>

<p>SEE ALSO http://www.t13.org/ Technical Committee T13 ATA
Attachment.</p>

<p>http://www.serialata.org/ Serial ATA International
Organization.</p>

<p>Version 6.6 March 2006 HDPARM(8)</p>
<hr>
</body>
</html>
