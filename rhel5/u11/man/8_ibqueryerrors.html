<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:13:20 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>IBQUERYERRORS(8) OpenIB Diagnostics IBQUERYERRORS(8)</p>

<p>NAME ibqueryerrors - query and report non-zero IB port
counters</p>

<p>SYNOPSIS ibqueryerrors [options]</p>

<p>DESCRIPTION The default behavior is to report the port
error counters which exceed a threshold for each port in the
fabric. The default threshold is zero (0). Error fields can
also be suppressed entirely.</p>

<p>In addition to reporting errors on every port.
ibqueryerrors can report the port transmit and receive data
as well as report full link information to the remote port
if available.</p>

<p>OPTIONS -s &lt;err1,err2,...&gt; Suppress the errors
listed in the comma separated list provided.</p>

<p>-c Suppress some of the common &quot;side effect&quot;
counters. These coun- ters usually do not indicate an error
condition and can be usu- ally be safely ignored.</p>

<p>-G &lt;port_guid&gt; -S &lt;port_guid&gt; --port-guid
Report results for the port specified. For switches results
are printed for all ports not just switch port 0.</p>

<p>-S same as &quot;-G&quot;. (provided only for backward
compatibility)</p>

<p>-D &lt;direct_route&gt; Report results for the port
specified. For switches results are printed for all ports
not just switch port 0.</p>

<p>-r Report the port information. This includes LID, port,
external port (if applicable), link speed setting, remote
GUID, remote port, remote external port (if applicable), and
remote node description information.</p>

<p>--data Include the optional transmit and receive data
counters.</p>

<p>--threshold-file Specify an alternate threshold file.
The default is /etc/infiniband-diags/error_thresholds</p>

<p>--switch print data for switches only</p>

<p>--ca print data for CAs only</p>

<p>--router print data for routers only</p>

<p>--clear-errors -k Clear error counters after read. -k
and -K can be used together to clear both errors and coun-
ters.</p>

<p>--clear-counts -K Clear data counters after read.
CAUTION clearing data counters will occur regardless of if
they are printed or not. This is because data counters are
only printed on ports which have errors. This means if a
port has 0 errors and the -K option is specified the data
counters will be cleared without any printed output.</p>

<p>--details include receive error and transmit discard
details</p>

<p>--load-cache &lt;filename&gt; Load and use the cached
ibnetdiscover data stored in the speci- fied filename. May
be useful for outputting and learning about other fabrics or
a previous state of a fabric. Cannot be used if user
specifies a direct route path. See ibnetdiscover for
information on caching ibnetdiscover output.</p>

<p>-R (This option is obsolete and does nothing)</p>

<p>COMMON OPTIONS -d raise the IB debugging level. May be
used several times (-ddd or -d -d -d).</p>

<p>-e show send and receive errors (timeouts and
others)</p>

<p>-h show the usage message</p>

<p>-v increase the application verbosity level. May be used
several times (-vv or -v -v -v)</p>

<p>-V show the version info.</p>

<p># Other common flags:</p>

<p>-C &lt;ca_name&gt; use the specified ca_name.</p>

<p>-P &lt;ca_port&gt; use the specified ca_port.</p>

<p>-t &lt;timeout_ms&gt; override the default timeout for
the solicited mads.</p>

<p>EXIT STATUS If a failure to scan the fabric occurs
return -1. If the scan succeeds without errors beyond
thresholds return 0. If errors are found on ports beyond
thresholds return 1.</p>

<p>FILES /etc/infiniband-diags/error_thresholds</p>

<p>Define threshold values for errors. File format is
simple &quot;name=val&quot;. Comments begin with #</p>

<p>Example:</p>

<p># Define thresholds for error counters
SymbolErrorCounter=10 LinkErrorRecoveryCounter=10
VL15Dropped=100</p>

<p>AUTHOR Ira Weiny &lt;weiny2@llnl.gov&gt;</p>

<p>OpenIB Dec 31, 2009 IBQUERYERRORS(8)</p>
<hr>
</body>
</html>
