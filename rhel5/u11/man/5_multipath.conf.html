<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:38 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MULTIPATH.CONF(5) MULTIPATH.CONF(5)</p>

<p>NAME multipath.conf - multipath daemon configuration
file</p>

<p>DESCRIPTION multipath.conf is the configuration file for
the multipath daemon. It is used to overwrite the built-in
configuration table of multipathd. Any line whose first
non-white-space character is a # is considered a comment
line. Empty lines are ignored.</p>

<p>SYNTAX The configuration file contains entries of the
form:</p>

<p>&lt;section&gt; { &lt;attribute&gt; &lt;value&gt; ...
&lt;subsection&gt; { &lt;attribute&gt; &lt;value&gt; ... }
}</p>

<p>Each section contains one or more attributes or
subsections. The recog- nized keywords for attributes or
subsections depend on the section in which they occor.</p>

<p>The following section keywords are recognized:</p>

<p>defaults This section defines default values for
attributes which are used whenever no values are given in
the appropriate device or multipath sections.</p>

<p>blacklist This section defines which devices should be
excluded from the multipath topology discovery.</p>

<p>blacklist_exceptions This section defines which devices
should be included in the multipath topology discovery,
despite being listed in the blacklist section.</p>

<p>multipaths This section defines the multipath
topologies. They are indexed by a World Wide
Identifier(wwid), which is the result of the getuid_callout
program.</p>

<p>devices This section defines the device-specific
settings.</p>

<p>defaults section The defaults section recognizes the
following keywords:</p>

<p>polling_interval interval between two path checks in
seconds; default is 5</p>

<p>udev_dir directory where udev creates its device nodes;
default is /dev</p>

<p>selector The default path selector algorithm to use;
they are offered by the kernel multipath target. The only
cur- rently implemented is round-robin 0</p>

<p>path_grouping_policy The default path grouping policy to
apply to unspeci- fied multipaths. Possible values are</p>

<p>failover 1 path per priority group</p>

<p>multibus all paths in 1 priority group</p>

<p>group_by_serial 1 priority group per serial number</p>

<p>group_by_prio 1 priority group per priority value. Pri-
orities are determined by callout programs specified as a
global, per-controller or per-multipath option in the
configuration file.</p>

<p>group_by_node_name 1 priority group per target node
name. Target node names are fetched in
/sys/class/fc_transport/target*/node_name.</p>

<p>Default value is multibus.</p>

<p>getuid_callout The default program and args to callout
to obtain a unique path identifier. Should be specified with
an absolute path. Default value is /sbin/scsi_id -g -u
-s</p>

<p>prio_callout The default program and args to callout to
obtain a path priority value. The specified program will be
executed and should return a numeric value specifying the
relative priority of this path. Higher number have a higher
priority. A %n in the command line will be expanded to the
device name, a %b will be expanded to the device number in
major:minor format. none is a valid value. Currently the
following path priority programs are implemented:</p>

<p>mpath_prio_emc /dev/%n Generate the path priority for
EMC arrays</p>

<p>mpath_prio_alua /dev/%n Generate the path priority based
on the SCSI-3 ALUA settings.</p>

<p>mpath_prio_netapp /dev/%n Generate the path priority for
NetApp arrays.</p>

<p>mpath_prio_tpc /dev/%n Generate the path priority for
LSI/Engenio RDAC controller.</p>

<p>mpath_prio_hp_sw /dev/%n Generate the path priority for
Compaq/HP controller in active/standby mode.</p>

<p>mpath_prio_hds_modular %b Generate the path priority for
Hitachi HDS Modular storage arrays.</p>

<p>mpath_prio_weighted %n|%h &lt;regex1&gt; &lt;prio1&gt;
[&lt;regex2&gt; &lt;prio2&gt;] ... Generate a path priority
based on the matching either the device name %n or the
H:B:T:L %h of the devices against a series of regular
expressions. WARNING: Both the device name and the H:B:T:L
of a device can change when the node is rebooted, or the
device driver is reloaded. If you use this callout it may be
necessary to manu- ally edit your regular expressions when-
ever either of these events occurs. NOTE: The regular
expression must match the com- plete device name or H:B:T:L.
For instance a regular expression of sda will only match a
device named sda, not sdaa, sdab, etc. To match all of them,
you would need to use the regular expression sda.*</p>

<p>Default value is none.</p>

<p>features Specify any device-mapper features to be used.
The most common of these features is 1 queue_if_no_path Note
that this can also be set via the no_path_retry keyword.</p>

<p>path_checker The default method used to determine the
paths state. Possible values are</p>

<p>readsector0 Read the first sector of the device</p>

<p>tur Issue a TEST UNIT READY command to the device.</p>

<p>emc_clariion Query the EMC Clariion specific EVPD page
0xC0 to determine the path state.</p>

<p>hp_sw Check the path state for HP storage arrays with
Active/Standby firmware.</p>

<p>rdac Check the path state for LSI/Engenio RDAC storage
controller.</p>

<p>directio Read the first sector with direct I/O.</p>

<p>Default value is readsector0.</p>

<p>failback Tell the daemon to manage path group failback,
or not to. 0 or immediate means immediate failback, values
&gt;0 means deferred failback (in seconds). manual means no
failback. Default value is manual</p>

<p>rr_min_io The number of IO to route to a path before
switching to the next in the same path group. Default is
1000</p>

<p>rr_weight If set to priorities the multipath
configurator will assign path weights as &quot;path prio *
rr_min_io&quot;. Possi- ble values are priorities or uniform
uniform</p>

<p>no_path_retry Specify the number of retries until
disable queueing, or fail for immediate failure (no
queueing), queue for never stop queueing. Default is 0.</p>

<p>max_fds Sets the maximum number of open file descriptors
for the multipathd process. Setting this to max will cause
multipathd to use the maximum number of open file
descriptors allowed by the system.</p>

<p>verbosity Sets the verbosity level for the multipath and
multi- pathd commands. It is overridden by the -v command
line option. Valid values are from 0 to 6. Default is 2.</p>

<p>flush_on_last_del Setting this to yes will cause
multipathd to disable queueing on a multipath device when
the last path to the device has been deleted. Default is
no</p>

<p>queue_without_daemon Setting this to no will cause
multipathd to disable queueing for all multipath devices
when it is shut- down. Default is yes</p>

<p>bindings_file Sets the location for the multipath
bindings file that is used with the user_friendly_names
option. Default is /etc/multipath_bindings</p>

<p>mode The mode to use for the multipath device nodes, in
octal.</p>

<p>uid The numeric uid to use for the multipath device
nodes.</p>

<p>gid The numeric gid to use for the multipath device
nodes.</p>

<p>user_friendly_names If set to yes , using the bindings
file /var/lib/mul- tipath/bindings to assign a persistent
and unique alias to the multipath, in the form of
mpath&lt;n&gt;. If set to no use the WWID as the alias. In
either case this be will be overriden by any specific
aliases in the multipaths section. Default is no</p>

<p>blacklist section The blacklist section is used to
exclude specific device from inclusion in the multipath
topology. It is most commonly used to exclude local disks or
LUNs for the array controller.</p>

<p>The following keywords are recognized:</p>

<p>wwid The World Wide Identification of a device.</p>

<p>devnode Regular expression of the device nodes to be
excluded.</p>

<p>device Subsection for the device description. This
subsection recognizes the vendor and product keywords. For a
full description of these keywords please see the devices
section description.</p>

<p>blacklist_exceptions section The blacklist_exceptions
section is used to revert the actions of the blacklist
section, ie to include specific device in the multipath
topology. This allows to selectively include devices which
would nor- mally be excluded via the blacklist section.</p>

<p>The following keywords are recognized:</p>

<p>wwid The World Wide Identification of a device.</p>

<p>devnode Regular expression of the device nodes to be
excluded.</p>

<p>device Subsection for the device description. This
subsection recognizes the vendor and product keywords. For a
full description of these keywords please see the devices
section description.</p>

<p>multipaths section The only recognized attribute for the
multipaths section is the multi- path subsection.</p>

<p>The multipath subsection recognizes the following
attributes:</p>

<p>wwid Index of the container. Mandatory for this
subsection.</p>

<p>alias (Optional) symbolic name for the multipath
map.</p>

<p>The following attributes are optional; if not set the
default values are taken from the defaults section:</p>

<p>path_grouping_policy prio_callout path_selector failback
no_path_retry rr_min_io rr_weight flush_on_last_del mode uid
gid</p>

<p>devices section The only recognized attribute for the
devices section is the device subsection.</p>

<p>The device subsection recognizes the following
attributes:</p>

<p>vendor (Mandatory) Vendor identifier</p>

<p>product (Mandatory) Product identifier</p>

<p>product_blacklist Product strings to blacklist for this
vendor</p>

<p>hardware_handler (Optional) The hardware handler to use
for this device type. The following hardware handler are
implemented:</p>

<p>1 emc Hardware handler for EMC storage arrays.</p>

<p>The following attributes are optional; if not set the
default values are taken from the defaults section:</p>

<p>path_grouping_policy getuid_callout path_selector
path_checker features prio_callout failback rr_weight
no_path_retry rr_min_io flush_on_last_del</p>

<p>SEE ALSO udev(8), dmsetup(8) multipath(8)
multipathd(8)</p>

<p>AUTHORS multipath was developed by Christophe Varoqui,
&lt;christophe.varo- qui@free.fr&gt; and others.</p>

<p>30 November 2006 MULTIPATH.CONF(5)</p>
<hr>
</body>
</html>
