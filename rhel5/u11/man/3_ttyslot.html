<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:26:00 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TTYSLOT(3) Linux Programmer s Manual TTYSLOT(3)</p>

<p>NAME ttyslot - find the slot of the current users
terminal in some file</p>

<p>SYNOPSIS #include &lt;unistd.h&gt; /* on BSD-like
systems */ #include &lt;stdlib.h&gt; /* on System V-like
systems */</p>

<p>int ttyslot(void);</p>

<p>DESCRIPTION The legacy function ttyslot() returns the
index of the current users entry in some file.</p>

<p>Now &quot;What file?&quot; you ask. Well, lets first
look at some history.</p>

<p>Ancient History There used to be a file /etc/ttys in
Unix V6, that was read by the init(8) program to find out
what to do with each terminal line. Each line consisted of
three characters. The first character was either 0 or 1,
where 0 meant &quot;ignore&quot;. The second character
denoted the terminal: 8 stood for &quot;/dev/tty8&quot;. The
third character was an argu- ment to getty(8) indicating the
sequence of line speeds to try (- was: start trying 110
baud). Thus a typical line was &quot;18-&quot;. A hang on
some line was solved by changing the 1 to a 0 , signalling
init, changing back again, and signalling init again.</p>

<p>In Unix V7 the format was changed: here the second
character was the argument to getty(8) indicating the
sequence of line speeds to try (0 was: cycle through
300-1200-150-110 baud; 4 was for the on-line con- sole
DECwriter) while the rest of the line contained the name of
the tty. Thus a typical line was &quot;14console&quot;.</p>

<p>Later systems have more elaborate syntax. System V-like
systems have /etc/inittab instead.</p>

<p>Ancient History (2) On the other hand, there is the file
/etc/utmp listing the people cur- rently logged in. It is
maintained by login(8). It has a fixed size, and the
appropriate index in the file was determined by login(8)
using the ttyslot() call to find the number of the line in
/etc/ttys (count- ing from 1).</p>

<p>The semantics of ttyslot Thus, the function ttyslot()
returns the index of the controlling ter- minal of the
current process in the file /etc/ttys, and that is (usu-
ally) the same as the index of the entry for the current
user in the file /etc/utmp. BSD still has the /etc/ttys
file, but System V-like systems do not, and hence cannot
refer to it. Thus, on such systems the documentation says
that ttyslot() returns the current users index in the user
accounting data base.</p>

<p>RETURN VALUE If successful, this function returns the
slot number. On error (e.g., if none of the file descriptors
0, 1 or 2 is associated with a terminal that occurs in this
data base) it returns 0 on Unix V6 and V7 and BSD- like
systems, but -1 on System V-like systems.</p>

<p>NOTES The utmp file is found various places on various
systems, such as /etc/utmp, /var/adm/utmp,
/var/run/utmp.</p>

<p>The glibc2 implementation of this function reads the
file _PATH_TTYS, defined in &lt;ttyent.h&gt; as
&quot;/etc/ttys&quot;. It returns 0 on error. Since Linux
systems do not usually have &quot;/etc/ttys&quot;, it will
always return 0.</p>

<p>Minix also has fttyslot(fd).</p>

<p>HISTORY ttyslot() appeared in Unix V7.</p>

<p>CONFORMING TO SUSv1; marked as LECACY in SUSv2; removed
in POSIX.1-2001. SUSv2 requires -1 on error.</p>

<p>SEE ALSO getttyent(3), ttyname(3), utmp(5)</p>

<p>GNU 2002-07-20 TTYSLOT(3)</p>
<hr>
</body>
</html>
