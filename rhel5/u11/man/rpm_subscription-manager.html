<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:24:30 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RPM(8) Red Hat Linux RPM(8)</p>

<p>NAME rpm - RPM Package Manager</p>

<p>SYNOPSIS QUERYING AND VERIFYING PACKAGES: rpm
{-q|--query} [select-options] [query-options]</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {-K|--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>INSTALLING, UPGRADING, AND REMOVING PACKAGES: rpm
{-i|--install} [install-options] PACKAGE_FILE ...</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>MISCELLANEOUS: rpm {--initdb|--rebuilddb}</p>

<p>rpm {--addsign|--resign} PACKAGE_FILE ...</p>

<p>rpm {--querytags|--showrc}</p>

<p>rpm {--setperms|--setugids} PACKAGE_NAME ...</p>

<p>select-options [PACKAGE_NAME] [-a,--all] [-f,--file
FILE] [-g,--group GROUP] {-p,--package PACKAGE_FILE]
[--fileid MD5] [--hdrid SHA1] [--pkgid MD5] [--tid TID]
[--querybynumber HDRNUM] [--triggeredby PACKAGE_NAME]
[--whatprovides CAPABILITY] [--whatrequires CAPABILITY]</p>

<p>query-options [--changelog] [-c,--configfiles]
[-d,--docfiles] [--dump] [--filesbypkg] [-i,--info] [--last]
[-l,--list] [--provides] [--qf,--queryformat QUERYFMT]
[-R,--requires] [--scripts] [-s,--state]
[--triggers,--triggerscripts]</p>

<p>verify-options [--nodeps] [--nofiles] [--noscripts]
[--nodigest] [--nosignature] [--nolinkto] [--nomd5]
[--nosize] [--nouser] [--nogroup] [--nomtime] [--nomode]
[--nordev]</p>

<p>install-options [--aid] [--allfiles] [--badreloc]
[--excludepath OLDPATH] [--excludedocs] [--force]
[-h,--hash] [--ignoresize] [--ignorearch] [--ignoreos]
[--includedocs] [--justdb] [--nodeps] [--nodigest]
[--nosignature] [--nosuggest] [--noorder] [--noscripts]
[--notriggers] [--oldpackage] [--percent] [--prefix NEWPATH]
[--relocate OLDPATH=NEWPATH] [--repackage] [--replacefiles]
[--replacepkgs] [--test]</p>

<p>DESCRIPTION rpm is a powerful Package Manager, which can
be used to build, install, query, verify, update, and erase
individual software packages. A pack- age consists of an
archive of files and meta-data used to install and erase the
archive files. The meta-data includes helper scripts, file
attributes, and descriptive information about the package.
Packages come in two varieties: binary packages, used to
encapsulate software to be installed, and source packages,
containing the source code and recipe necessary to produce
binary packages.</p>

<p>One of the following basic modes must be selected:
Query, Verify, Sig- nature Check, Install/Upgrade/Freshen,
Uninstall, Initialize Database, Rebuild Database, Resign,
Add Signature, Set Owners/Groups, Show Query- tags, and Show
Configuration.</p>

<p>GENERAL OPTIONS These options can be used in all the
different modes.</p>

<p>-?, --help Print a longer usage message then normal.</p>

<p>--version Print a single line containing the version
number of rpm being used.</p>

<p>--quiet Print as little as possible - normally only
error messages will be displayed.</p>

<p>-v Print verbose information - normally routine progress
messages will be displayed.</p>

<p>-vv Print lots of ugly debugging information.</p>

<p>--rcfile FILELIST Each of the files in the colon
separated FILELIST is read sequentially by rpm for
configuration information. Only the first file in the list
must exist, and tildes will be expanded to the value of
$HOME. The default FILELIST is
/usr/lib/rpm/rpmrc:/usr/lib/rpm/red-
hat/rpmrc:/etc/rpmrc:~/.rpmrc.</p>

<p>--pipe CMD Pipes the output of rpm to the command
CMD.</p>

<p>--dbpath DIRECTORY Use the database in DIRECTORY rather
than the default path /var/lib/rpm</p>

<p>--root DIRECTORY Use the file system tree rooted at
DIRECTORY for all operations. Note that this means the
database within DIRECTORY will be used for dependency checks
and any scriptlet(s) (e.g. %post if installing, or %prep if
building, a package) will be run after a chroot(2) to
DIRECTORY.</p>

<p>-D, --defineMACRO EXPR Defines MACRO with value
EXPR.</p>

<p>-E, --evalEXPR Prints macro expansion of EXPR.</p>

<p>INSTALL AND UPGRADE OPTIONS The general form of an rpm
install command is</p>

<p>rpm {-i|--install} [install-options] PACKAGE_FILE
...</p>

<p>This installs a new package.</p>

<p>The general form of an rpm upgrade command is</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>This upgrades or installs the package currently
installed to a newer version. This is the same as install,
except all other version(s) of the package are removed after
the new package is installed.</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>This will upgrade packages, but only if an earlier
version currently exists. The PACKAGE_FILE may be specified
as an ftp or http URL, in which case the package will be
downloaded before being installed. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client
support.</p>

<p>--aid Add suggested packages to the transaction set when
needed.</p>

<p>--allfiles Installs or upgrades all the missingok files
in the package, regardless if they exist.</p>

<p>--badreloc Used with --relocate, permit relocations on
all file paths, not just those OLDPATHs included in the
binary package relocation hint(s).</p>

<p>--excludepath OLDPATH Dont install files whose name
begins with OLDPATH.</p>

<p>--excludedocs Don t install any files which are marked
as documentation (which includes man pages and texinfo
documents).</p>

<p>--force Same as using --replacepkgs, --replacefiles, and
--oldpackage.</p>

<p>-h, --hash Print 50 hash marks as the package archive is
unpacked. Use with -v|--verbose for a nicer display.</p>

<p>--ignoresize Dont check mount file systems for
sufficient disk space before installing this package.</p>

<p>--ignorearch Allow installation or upgrading even if the
architectures of the binary package and host dont match.</p>

<p>--ignoreos Allow installation or upgrading even if the
operating systems of the binary package and host dont
match.</p>

<p>--includedocs Install documentation files. This is the
default behavior.</p>

<p>--justdb Update only the database, not the
filesystem.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nosignature Don t verify package or header signatures
when reading.</p>

<p>--nodeps Dont do a dependency check before installing or
upgrading a package.</p>

<p>--nosuggest Don t suggest package(s) that provide a
missing dependency.</p>

<p>--noorder Dont reorder the packages for an install. The
list of packages would normally be reordered to satisfy
dependencies.</p>

<p>--noscripts</p>

<p>--nopre</p>

<p>--nopost</p>

<p>--nopreun</p>

<p>--nopostun Dont execute the scriptlet of the same name.
The --noscripts option is equivalent to</p>

<p>--nopre --nopost --nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %pre,
%post, %preun, and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerin</p>

<p>--notriggerun</p>

<p>--notriggerpostun Dont execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerin --notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerin,
%trig- gerun, and %triggerpostun scriptlet(s).</p>

<p>--oldpackage Allow an upgrade to replace a newer package
with an older one.</p>

<p>--percent Print percentages as files are unpacked from
the package archive. This is intended to make rpm easy to
run from other tools.</p>

<p>--prefix NEWPATH For relocatable binary packages,
translate all file paths that start with the installation
prefix in the package relocation hint(s) to NEWPATH.</p>

<p>--relocate OLDPATH=NEWPATH For relocatable binary
packages, translate all file paths that start with OLDPATH
in the package relocation hint(s) to NEWPATH. This option
can be used repeatedly if several OLDPATHs in the package
are to be relocated.</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--replacefiles Install the packages even if they replace
files from other, already installed, packages.</p>

<p>--replacepkgs Install the packages even if some of them
are already installed on this system.</p>

<p>--test Do not install the package, simply check for and
report poten- tial conflicts.</p>

<p>ERASE OPTIONS The general form of an rpm erase command
is</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>The following options may also be used:</p>

<p>--allmatches Remove all versions of the package which
match PACKAGE_NAME. Normally an error is issued if
PACKAGE_NAME matches multiple packages.</p>

<p>--nodeps Dont check dependencies before uninstalling the
packages.</p>

<p>--noscripts</p>

<p>--nopreun</p>

<p>--nopostun Don t execute the scriptlet of the same name.
The --noscripts option during package erase is equivalent
to</p>

<p>--nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %preun,
and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerun</p>

<p>--notriggerpostun Don t execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerun,
and %triggerpostun scriptlet(s).</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--test Dont really uninstall anything, just go through
the motions. Useful in conjunction with the -vv option for
debugging.</p>

<p>QUERY OPTIONS The general form of an rpm query command
is</p>

<p>rpm {-q|--query} [select-options] [query-options]</p>

<p>You may specify the format that package information
should be printed in. To do this, you use the</p>

<p>--qf|--queryformat QUERYFMT</p>

<p>option, followed by the QUERYFMT format string. Query
formats are mod- ified versions of the standard printf(3)
formatting. The format is made up of static strings (which
may include standard C character escapes for newlines, tabs,
and other special characters) and printf(3) type formatters.
As rpm already knows the type to print, the type specifier
must be omitted however, and replaced by the name of the
header tag to be printed, enclosed by {} characters. Tag
names are case insensitive, and the leading RPMTAG_ portion
of the tag name may be omitted as well.</p>

<p>Alternate output formats may be requested by following
the tag with :typetag. Currently, the following types are
supported:</p>

<p>:armor Wrap a public key in ASCII armor.</p>

<p>:base64 Encode binary data using base64.</p>

<p>:date Use strftime(3) &quot;%c&quot; format.</p>

<p>:day Use strftime(3) &quot;%a %b %d %Y&quot; format.</p>

<p>:depflags Format dependency flags.</p>

<p>:fflags Format file flags.</p>

<p>:hex Format in hexadecimal.</p>

<p>:octal Format in octal.</p>

<p>:perms Format file permissions.</p>

<p>:shescape Escape single quotes for use in a script.</p>

<p>:triggertype Display trigger suffix.</p>

<p>For example, to print only the names of the packages
queried, you could use %{NAME} as the format string. To
print the packages name and dis- tribution information in
two columns, you could use %-30{NAME}%{DISTRI- BUTION}. rpm
will print a list of all of the tags it knows about when it
is invoked with the --querytags argument.</p>

<p>There are two subsets of options for querying: package
selection, and information selection.</p>

<p>PACKAGE SELECTION OPTIONS: PACKAGE_NAME Query installed
package named PACKAGE_NAME.</p>

<p>-a, --all Query all installed packages.</p>

<p>-f, --file FILE Query package owning FILE.</p>

<p>--fileid MD5 Query package that contains a given file
identifier, i.e. the MD5 digest of the file contents.</p>

<p>-g, --group GROUP Query packages with the group of
GROUP.</p>

<p>--hdrid SHA1 Query package that contains a given header
identifier, i.e. the SHA1 digest of the immutable header
region.</p>

<p>-p, --package PACKAGE_FILE Query an (uninstalled)
package PACKAGE_FILE. The PACKAGE_FILE may be specified as
an ftp or http style URL, in which case the package header
will be downloaded and queried. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client support.
The PACKAGE_FILE argument(s), if not a binary package, will
be interpreted as an ASCII package manifest. Comments are
permitted, starting with a #, and each line of a package
mani- fest file may include white space separated glob
expressions, including URLs with remote glob expressions,
that will be expanded to paths that are substituted in place
of the package manifest as additional PACKAGE_FILE arguments
to the query.</p>

<p>--pkgid MD5 Query package that contains a given package
identifier, i.e. the MD5 digest of the combined header and
payload contents.</p>

<p>--querybynumber HDRNUM Query the HDRNUMth database entry
directly; this is useful only for debugging.</p>

<p>--specfile SPECFILE Parse and query SPECFILE as if it
were a package. Although not all the information (e.g. file
lists) is available, this type of query permits rpm to be
used to extract information from spec files without having
to write a specfile parser.</p>

<p>--tid TID Query package(s) that have a given TID
transaction identifier. A unix time stamp is currently used
as a transaction identifier. All package(s) installed or
erased within a single transaction have a common
identifier.</p>

<p>--triggeredby PACKAGE_NAME Query packages that are
triggered by package(s) PACKAGE_NAME.</p>

<p>--whatprovides CAPABILITY Query all packages that
provide the CAPABILITY capability.</p>

<p>--whatrequires CAPABILITY Query all packages that
requires CAPABILITY for proper function- ing.</p>

<p>PACKAGE QUERY OPTIONS: --changelog Display change
information for the package.</p>

<p>-c, --configfiles List only configuration files (implies
-l).</p>

<p>-d, --docfiles List only documentation files (implies
-l).</p>

<p>--dump Dump file information as follows (implies
-l):</p>

<p>path size mtime md5sum mode owner group isconfig isdoc
rdev symlink</p>

<p>--filesbypkg List all the files in each selected
package.</p>

<p>-i, --info Display package information, including name,
version, and description. This uses the --queryformat if one
was specified.</p>

<p>--last Orders the package listing by install time such
that the latest packages are at the top.</p>

<p>-l, --list List files in package.</p>

<p>--provides List capabilities this package provides.</p>

<p>-R, --requires List packages on which this package
depends.</p>

<p>--scripts List the package specific scriptlet(s) that
are used as part of the installation and uninstallation
processes.</p>

<p>-s, --state Display the states of files in the package
(implies -l). The state of each file is one of normal, not
installed, or replaced.</p>

<p>--triggers, --triggerscripts Display the trigger
scripts, if any, which are contained in the package.</p>

<p>VERIFY OPTIONS The general form of an rpm verify command
is</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>Verifying a package compares information about the
installed files in the package with information about the
files taken from the package metadata stored in the rpm
database. Among other things, verifying compares the size,
MD5 sum, permissions, type, owner and group of each file.
Any discrepancies are displayed. Files that were not
installed from the package, for example, documentation files
excluded on instal- lation using the
&quot;--excludedocs&quot; option, will be silently
ignored.</p>

<p>The package selection options are the same as for
package querying (including package manifest files as
arguments). Other options unique to verify mode are:</p>

<p>--nodeps Dont verify dependencies of packages.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nofiles Dont verify any attributes of package
files.</p>

<p>--noscripts Don t execute the %verifyscript scriptlet
(if any).</p>

<p>--nosignature Dont verify package or header signatures
when reading.</p>

<p>--nolinkto</p>

<p>--nomd5</p>

<p>--nosize</p>

<p>--nouser</p>

<p>--nogroup</p>

<p>--nomtime</p>

<p>--nomode</p>

<p>--nordev Dont verify the corresponding file
attribute.</p>

<p>The format of the output is a string of 8 characters, a
possible attribute marker:</p>

<p>c %config configuration file. d %doc documentation file.
g %ghost file (i.e. the file contents are not included in
the package payload). l %license license file. r %readme
readme file.</p>

<p>from the package header, followed by the file name. Each
of the 8 characters denotes the result of a comparison of
attribute(s) of the file to the value of those attribute(s)
recorded in the database. A single &quot;.&quot; (period)
means the test passed, while a single &quot;?&quot;
(question mark) indicates the test could not be performed
(e.g. file permissions prevent reading). Otherwise, the
(mnemonically emBoldened) character denotes failure of the
corresponding --verify test:</p>

<p>S file Size differs M Mode differs (includes permissions
and file type) 5 MD5 sum differs D Device major/minor number
mismatch L readLink(2) path mismatch U User ownership
differs G Group ownership differs T mTime differs</p>

<p>DIGITAL SIGNATURE AND DIGEST VERIFICATION The general
forms of rpm digital signature commands are</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>The --checksig option checks all the digests and
signatures contained in PACKAGE_FILE to ensure the integrity
and origin of the package. Note that signatures are now
verified whenever a package is read, and --checksig is
useful to verify all of the digests and signatures asso-
ciated with a package.</p>

<p>Digital signatures cannot be verified without a public
key. An ASCII armored public key can be added to the rpm
database using --import. An imported public key is carried
in a header, and key ring management is performed exactly
like package management. For example, all currently imported
public keys can be displayed by:</p>

<p>rpm -qa gpg-pubkey*</p>

<p>Details about a specific public key, when imported, can
be displayed by querying. Heres information about the Red
Hat GPG/DSA key:</p>

<p>rpm -qi gpg-pubkey-db42a60e</p>

<p>Finally, public keys can be erased after importing just
like packages. Heres how to remove the Red Hat GPG/DSA
key</p>

<p>rpm -e gpg-pubkey-db42a60e</p>

<p>SIGNING A PACKAGE rpm --addsign|--resign PACKAGE_FILE
...</p>

<p>Both of the --addsign and --resign options generate and
insert new sig- natures for each package PACKAGE_FILE given,
replacing any existing signatures. There are two options for
historical reasons, there is no difference in behavior
currently.</p>

<p>USING GPG TO SIGN PACKAGES In order to sign packages
using GPG, rpm must be configured to run GPG and be able to
find a key ring with the appropriate keys. By default, rpm
uses the same conventions as GPG to find key rings, namely
the $GNUPGHOME environment variable. If your key rings are
not located where GPG expects them to be, you will need to
configure the macro %_gpg_path to be the location of the GPG
key rings to use.</p>

<p>For compatibility with older versions of GPG, PGP, and
rpm, only V3 OpenPGP signature packets should be configured.
Either DSA or RSA ver- ification algorithms can be used, but
DSA is preferred.</p>

<p>If you want to be able to sign packages you create
yourself, you also need to create your own public and secret
key pair (see the GPG man- ual). You will also need to
configure the rpm macros</p>

<p>%_signature The signature type. Right now only gpg and
pgp are supported.</p>

<p>%_gpg_name The name of the &quot;user&quot; whose key
you wish to use to sign your packages.</p>

<p>For example, to be able to use GPG to sign packages as
the user &quot;John Doe &lt;jdoe@foo.com&gt;&quot; from the
key rings located in /etc/rpm/.gpg using the executable
/usr/bin/gpg you would include</p>

<p>%_signature gpg %_gpg_path /etc/rpm/.gpg %_gpg_name John
Doe &lt;jdoe@foo.com&gt; %_gpgbin /usr/bin/gpg</p>

<p>in a macro configuration file. Use /etc/rpm/macros for
per-system con- figuration and ~/.rpmmacros for per-user
configuration.</p>

<p>REBUILD DATABASE OPTIONS The general form of an rpm
rebuild database command is</p>

<p>rpm {--initdb|--rebuilddb} [-v] [--dbpath DIRECTORY]
[--root DIRECTORY]</p>

<p>Use --initdb to create a new database if one doesnt
already exist (existing database is not overwritten), use
--rebuilddb to rebuild the database indices from the
installed package headers.</p>

<p>SHOWRC The command</p>

<p>rpm --showrc</p>

<p>shows the values rpm will use for all of the options are
currently set in rpmrc and macros configuration file(s).</p>

<p>FTP/HTTP OPTIONS rpm can act as an FTP and/or HTTP
client so that packages can be queried or installed from the
internet. Package files for install, upgrade, and query
operations may be specified as an ftp or http style URL:</p>

<p>ftp://USER:PASSWORD@HOST:PORT/path/to/package.rpm</p>

<p>If the :PASSWORD portion is omitted, the password will
be prompted for (once per user/hostname pair). If both the
user and password are omit- ted, anonymous ftp is used. In
all cases, passive (PASV) ftp transfers are performed.</p>

<p>rpm allows the following options to be used with ftp
URLs:</p>

<p>--ftpproxy HOST The host HOST will be used as a proxy
server for all ftp trans- fers, which allows users to ftp
through firewall machines which use proxy systems. This
option may also be specified by config- uring the macro
%_ftpproxy.</p>

<p>--ftpport PORT The TCP PORT number to use for the ftp
connection on the proxy ftp server instead of the default
port. This option may also be specified by configuring the
macro %_ftpport.</p>

<p>rpm allows the following options to be used with http
URLs:</p>

<p>--httpproxy HOST The host HOST will be used as a proxy
server for all http trans- fers. This option may also be
specified by configuring the macro %_httpproxy.</p>

<p>--httpport PORT The TCP PORT number to use for the http
connection on the proxy http server instead of the default
port. This option may also be specified by configuring the
macro %_httpport.</p>

<p>LEGACY ISSUES Executing rpmbuild The build modes of rpm
are now resident in the /usr/bin/rpmbuild exe- cutable.
Although legacy compatibility provided by the popt aliases
below has been adequate, the compatibility is not perfect;
hence build mode compatibility through popt aliases is being
removed from rpm. Install the package containing rpmbuild
(usually rpm-build) and see rpmbuild(8) for documentation of
all the rpm build modes previously documented here in
rpm(8).</p>

<p>Add the following lines to /etc/popt if you wish to
continue invoking rpmbuild from the rpm command line:</p>

<p>rpm exec --bp rpmb -bp rpm exec --bc rpmb -bc rpm exec
--bi rpmb -bi rpm exec --bl rpmb -bl rpm exec --ba rpmb -ba
rpm exec --bb rpmb -bb rpm exec --bs rpmb -bs rpm exec --tp
rpmb -tp rpm exec --tc rpmb -tc rpm exec --ti rpmb -ti rpm
exec --tl rpmb -tl rpm exec --ta rpmb -ta rpm exec --tb rpmb
-tb rpm exec --ts rpmb -ts rpm exec --rebuild rpmb --rebuild
rpm exec --recompile rpmb --recompile rpm exec --clean rpmb
--clean rpm exec --rmsource rpmb --rmsource rpm exec
--rmspec rpmb --rmspec rpm exec --target rpmb --target rpm
exec --short-circuit rpmb --short-circuit</p>

<p>FILES rpmrc Configuration /usr/lib/rpm/rpmrc
/usr/lib/rpm/redhat/rpmrc /etc/rpmrc ~/.rpmrc</p>

<p>Macro Configuration /usr/lib/rpm/macros
/usr/lib/rpm/redhat/macros /etc/rpm/macros ~/.rpmmacros</p>

<p>Database /var/lib/rpm/Basenames
/var/lib/rpm/Conflictname /var/lib/rpm/Dirnames
/var/lib/rpm/Filemd5s /var/lib/rpm/Group
/var/lib/rpm/Installtid /var/lib/rpm/Name
/var/lib/rpm/Packages /var/lib/rpm/Providename
/var/lib/rpm/Provideversion /var/lib/rpm/Pubkeys
/var/lib/rpm/Removed /var/lib/rpm/Requirename
/var/lib/rpm/Requireversion /var/lib/rpm/Sha1header
/var/lib/rpm/Sigmd5 /var/lib/rpm/Triggername</p>

<p>Temporary /var/tmp/rpm*</p>

<p>SEE ALSO popt(3), rpm2cpio(8), rpmbuild(8),</p>

<p>rpm --help - as rpm supports customizing the options via
popt aliases its impossible to guarantee that whats
described in the manual matches whats available.</p>

<p>http://www.rpm.org/ &lt;URL:http://www.rpm.org/&gt;</p>

<p>AUTHORS Marc Ewing &lt;marc@redhat.com&gt; Jeff Johnson
&lt;jbj@redhat.com&gt; Erik Troan &lt;ewt@redhat.com&gt;</p>

<p>Red Hat, Inc. 09 June 2002 RPM(8)
subscription-manager(8) Subscription Management
subscription-manager(8)</p>

<p>NAME subscription-manager - Registers systems to a
subscription management service and then attaches and
manages subscriptions for software prod- ucts.</p>

<p>SYNOPSIS subscription-manager command [options]</p>

<p>DESCRIPTION subscription-manager is a client program
that registers a system with a subscription management
service such as the Customer Portal Subscrip- tion
Management service or on-premise Subscription Asset
Manager.</p>

<p>Red Hat provides content updates and support by issuing
subscriptions for its products. These subscriptions are
applied to systems; once a subscription for a product is
attached to a system, that system allowed to install,
update, and receive support for that software product. IT
administrators need to track these subscriptions and how
they are attached. This subscription management is a feature
available for Red Hat platforms version 5.7 (and later) and
version 6.1 (and later).</p>

<p>For RHEL systems, content is delivered through the Red
Hat Customer Portal. Subscriptions and systems are managed
globally through the Red Hat subscription management
service, which is integrated with the Cus- tomer Portal.
Subscriptions are managed for the local system by using the
Red Hat Subscription Manager tool. Subscription Manager is a
local client which connects a system with the subscription
management ser- vice.</p>

<p>subscription-manager is the command-line based client
for the Red Hat Subscription Manager tool.</p>

<p>Subscription Manager performs several key
operations:</p>

<p>* It registers systems to the Red Hat subscription
management service and adds the system to the inventory.
Once a system is registered, it can receive updates based on
its subscriptions to any kind of software products.</p>

<p>* It lists both available and used subscriptions.</p>

<p>* It allows administrators to both attach specific
subscriptions to a system and remove those
subscriptions.</p>

<p>Subscription Manager can be used to auto-attach
subscriptions to a sys- tem, as well. The
subscription-manager command can even be invoked as part of
a kickstart process.</p>

<p>Available subscriptions are based on the specific
information about the systems architecture. A subscription
is only considered available if the platform and hardware
can support that specific product.</p>

<p>Subscription Manager also collects and summarizes system
facts related to its hardware, operating system, and other
characteristics. These facts can be edited in the
Subscription Manager configuration and dis- played through
Subscription Manager.</p>

<p>There is also a Subscription Manager GUI, which can be
invoked simply by running subscription-manager-gui from the
command line.</p>

<p>Subscription management is only available for RHEL
5.7/6.1 and later systems. Older systems should register to
Red Hat Network Classic using the rhn_register command.</p>

<p>COMMANDS AND OPTIONS subscription-manager has specific
options available for each command, depending on what
operation is being performed. Subscription Manager commands
are related to the different subscription operations:</p>

<p>1. register</p>

<p>2. unregister</p>

<p>3. attach</p>

<p>4. auto-attach</p>

<p>5. remove</p>

<p>6. release</p>

<p>7. service-level</p>

<p>8. import</p>

<p>9. redeem</p>

<p>10. list</p>

<p>11. refresh</p>

<p>12. environments</p>

<p>13. repos</p>

<p>14. orgs</p>

<p>15. plugins</p>

<p>16. identity</p>

<p>17. facts</p>

<p>18. clean</p>

<p>19. config</p>

<p>20. version</p>

<p>21. status</p>

<p>22. deprecated commands: subscribe, unsubscribe, and
activate</p>

<p>23. repo-override</p>

<p>COMMON OPTIONS -h, --help Prints the specific help
information for the given command.</p>

<p>--proxy=PROXY Uses an HTTP proxy. The PROXY name has the
format hostname:port.</p>

<p>--proxyuser=PROXYUSERNAME Gives the username to use to
authenticate to the HTTP proxy.</p>

<p>--proxypass=PROXYPASSWORD Gives the password to use to
authenticate to the HTTP proxy.</p>

<p>REGISTER OPTIONS The register command registers a new
system to the subscription manage- ment service.</p>

<p>--username=USERNAME Gives the username for the account
which is registering the sys- tem; this user account is
usually tied to the user account for the content delivery
system which supplies the content. Optional, for user-based
authentication.</p>

<p>--password=PASSWORD Gives the user account password.</p>

<p>--serverurl=SERVER_HOSTNAME Passes the name of the
subscription service to register the sys- tem with. The
default value, if this is not given, is the Cus- tomer
Portal Subscription Management service, subscrip-
tion.rhn.redhat.com. If there is an on-premise subscription
service such as Subscription Asset Manager, this parameter
can be used to submit the hostname of the subscription
service. For Subscription Asset Manager, if the Subscription
Manager tool is configured with the Subscription Asset
Manager RPM, then the default value for the --serverurl
parameter is for the on- premise Subscription Asset Manager
server.</p>

<p>--baseurl=https://CONTENT_SERVICE:PORT/PREFIX Passes the
name of the content delivery service to configure the yum
service to use to pull down packages. If there is an on-
premise subscription service such as Subscription Asset
Manager or CloudForms System Engine, this parameter can be
used to sub- mit the URL of the content repository, in the
form https://server_name:port/prefix. For example,
https://sam.exam- ple.com:8088/sam.</p>

<p>--name=SYSTEM_NAME Sets the name of the system to
register. This defaults to the hostname.</p>

<p>--consumerid=CONSUMERID References an existing system
inventory ID to reregister a sys- tem. The ID is used as an
inventory number for the system in the subscription
management service database. If the subscriptions data are
lost or corrupted, reregistering the system restores it.</p>

<p>--activationkey=KEYS Gives a comma-separated list of
product keys to use to redeem or apply specific
subscriptions to the system. This is used for preconfigured
systems which may already have products installed.
Activation keys are issued by an on-premise subscription
manage- ment service, such as Subscription Asset
Manager.</p>

<p>When the --activationkey option is used, it is not
necessary to use the --username and --password options,
because the authenti- cation information is implicit in the
activation key.</p>

<p>For example: subscription-manager register
--org=&quot;IT Dept&quot; --activationkey=1234abcd</p>

<p>--auto-attach Automatically attaches compatible
subscriptions to this system.</p>

<p>--servicelevel=LEVEL Sets the preferred service level to
use with subscriptions added to the system. Service levels
are commonly premium, standard, and none, though other
levels may be available depending on the product and the
contract. This preference can only be used in conjunction
with the --auto-attach option, and then it is used as one of
the factors for matching subscriptions.</p>

<p>--force Registers the system even if it is already
registered. Normally, any register operations will fail if
the system is already reg- istered. With --force, the
existing system entry is unregistered first, all of its
subscriptions are returned to the pool, and then the system
is registered as a new entry.</p>

<p>--org=ORG Assigns the system to an organization.
Infrastructures which are managed on-site may be
multi-tenant, meaning that there are mul- tiple
organizations within one customer unit. A system may be
assigned manually to one of these suborganizations. When a
sys- tem is registered with the Customer Portal, this is not
required. When a system is registered with an on-premise
appli- cation such as Subscription Asset Manager, this
argument is required, even if there is only a single
organization config- ured.</p>

<p>--environment=ENV Registers the system to an environment
within an organization.</p>

<p>--type=CONSUMERTYPE Sets the type of unit to register.
Most units in the inventory will use the default value of
system. For development or test systems, this can be person
, which indicates a personal (rather than organizational)
subscription. Other systems can be can- dlepin for a local
content service or domain for an IP domain.</p>

<p>UNREGISTER OPTIONS The unregister command removes a
systems subscriptions and removes it from the subscription
management service.</p>

<p>This command has no options.</p>

<p>ATTACH OPTIONS The attach command applies a specific
subscription to the system.</p>

<p>--pool=POOLID Gives the ID for the subscriptions pool
(collection of products) to attach to the system. This
option is required, unless --auto is used.</p>

<p>--quantity=NUMBER Attaches a specified number of
subscriptions to the system. Sub- scriptions may have
certain limits on them, like the number of sockets on the
system or the number of allowed virtual guests. It is
possible to attach multiple subscriptions (or stacking
subscriptions) to cover the number of sockets, guests, or
other characteristics.</p>

<p>--auto Automatically attaches the best-matched
compatible subscription or subscriptions to the system.</p>

<p>--servicelevel=LEVEL Sets the preferred service level to
use with subscriptions attached to the system. Service
levels are commonly premium, standard, and none, though
other levels may be available depend- ing on the product and
the contract. This preference can only be used in
conjunction with the --auto option, and then it is used as
one of the factors for matching subscriptions.</p>

<p>AUTO-ATTACH OPTIONS The auto-attach command sets whether
the ability to check, attach, and update subscriptions
occurs automatically on the system. Auto-attaching
subscriptions checks the currently-installed products,
attached sub- scriptions, and any changes in available
subscriptions every four hours using the rhsmcertd
daemon.</p>

<p>--enable Enables the auto-attach option for the system.
If there is any change in the subscriptions for the system,
any subscriptions expire, or any new products are installed,
then subscription- manager detects the changes and
automatically attaches the appropriate subscriptions so that
the system remains covered.</p>

<p>--disable Disables the auto-attach option for the
system. If auto-attach is disabled, then any changes in
installed products or subscrip- tions for the system
(including expirations) must be addressed manually by the
administrator.</p>

<p>--show Shows whether auto-attach is enabled on the
systems.</p>

<p>REMOVE OPTIONS The remove command removes a subscription
from the system. (This does not uninstall the associated
products.)</p>

<p>--serial=SERIALNUMBER Gives the serial number of the
subscription certificate for the specific product to remove
from the system. Subscription cer- tificates attached to a
system are in a certificate, in
/etc/pki/entitlement/&lt;serial_number&gt;.pem. To remove
multiple subscriptions, use the --serial option multiple
times.</p>

<p>--all Removes all of the subscriptions attached to a
system.</p>

<p>RELEASE OPTIONS The release command sets a sticky OS
version to use when installing or updating packages. This
sets a preference for the minor version of the OS, such as
6.2 or 6.3. This can prevent unplanned or unsupported oper-
ating system version upgrades when an IT environment must
maintain a certified configuration.</p>

<p>--list Lists the available OS versions. If a release
preference is not set, then there is a message saying it is
not set.</p>

<p>--set=RELEASE Sets the minor (Y-stream) release version
to use, such as 6.3.</p>

<p>--unset Removes any previously set release version
preference.</p>

<p>SERVICE-LEVEL OPTIONS The service-level command displays
the current configured service level preference for products
installed on the system. For example, if the service level
preference is standard, then a subscription with a stan-
dard service level is selected when auto-attaching
subscriptions to the system.</p>

<p>The service-level command does not set the service level
for the system; it only shows its current setting or
available settings. The service level preference must be set
in the Subscription Manager GUI.</p>

<p>--list Lists the available service levels.</p>

<p>--show Shows the system s current service-level
preference. If a ser- vice level is not set, then there is a
message saying it is not set.</p>

<p>--unset Removes any previously set service level
preference.</p>

<p>IMPORT OPTIONS The import command imports and applies a
subscription certificate for the system which was generated
externally, such as in the Customer Por- tal, and then
copied over to the system. Importing can be necessary if a
system is preconfigured in the subscription management
service or if it is offline or unable to access the
subscription management service but it has the proper,
relevant subscriptions attached to the system.</p>

<p>--certificate=CERTIFICATE_FILE Points to a certificate
PEM file which contains the subscription certificate. This
can be used multiple times to import multiple subscription
certificates.</p>

<p>REDEEM OPTIONS The redeem command is used for systems
that are purchased from third- party vendors that include a
subscription. The redemption process essentially
auto-attaches the preselected subscription that the vendor
supplied to the system.</p>

<p>--email=EMAIL Gives the email account to send the
redemption notification mes- sage to.</p>

<p>--locale=LOCALE Sets the locale to use for the message.
If none is given, then it defaults to the local systems
locale.</p>

<p>--org=ORG Identifies the organization which issued the
subscription being redeemed.</p>

<p>LIST OPTIONS The list command lists all of the
subscriptions that are compatible with a system. The options
allow the list to be filtered by subscrip- tions that are
used by the system or unused subscriptions that are
available to the system.</p>

<p>--all Lists all possible subscriptions that have been
purchased, even if they dont match the architecture of the
system. This is used with the --available option.</p>

<p>--available Lists available subscriptions which are not
yet attached to the system.</p>

<p>--consumed Lists all of the subscriptions currently
attached to the system.</p>

<p>--installed Lists products which are currently installed
on the system which may (or may not) have subscriptions
associated with them, as well as products with attached
subscriptions which may (or may not) be installed.</p>

<p>--ondate=YYYY-MM-DD Sets the date to use to search for
active and available sub- scriptions. The default (if not
explicitly passed) is todays date; using a later date looks
for subscriptions which will be active then. This is only
used with the --available option.</p>

<p>--no-overlap Shows pools which provide products that are
not already covered; only used with --available option.</p>

<p>--match-installed Shows only subscriptions matching
products that are currently installed; only used with
--available option.</p>

<p>REFRESH OPTIONS The refresh command pulls the latest
subscription data from the server. Normally, the system
polls the subscription management service at a set interval
(4 hours by default) to check for any changes in the
available subscriptions. The refresh command checks with the
subscription manage- ment service right then, outside the
normal interval.</p>

<p>This command has no options.</p>

<p>ENVIRONMENTS OPTIONS The environments command lists all
of the environments that have been configured for an
organization. This command is only used for organiza- tions
which have a locally-hosted subscription or content service
of some kind, like Subscription Asset Manager. The concept
of environments -- and therefore this command -- have no
meaning for environments which use the Customer Portal
Subscription Management services.</p>

<p>--username=USERNAME Gives the username for the account
to use to connect to the organization account.</p>

<p>--password=PASSWORD Gives the user account password.</p>

<p>--org=ORG Identifies the organization for which to list
the configured environments.</p>

<p>REPOS OPTIONS The repos command lists all of the
repositories that are available to a system. This command is
only used for organizations which have a locally-hosted
content service of some kind, like Subscription Asset
Manager. With Red Hats hosted content service, there is only
one cen- tral repository.</p>

<p>--list Lists all of the repositories that are provided
by the content service used by the system.</p>

<p>--enable=REPO_ID Enables the specified repository, which
is made available by the content sources identified in the
system subscriptions. To enable multiple repositories, use
this argument multiple times.</p>

<p>--disable=REPO_ID Disables the specified repository,
which is made available by the content sources identified in
the system subscriptions. To disable multiple repositories,
use this argument multiple times.</p>

<p>ORGS OPTIONS The orgs command lists all of the
organizations which are available to the specified user
account. A multi-tenant infrastructure may have mul- tiple
organizations within a single customer, and users may be
restricted to access only a subset of the total number of
organiza- tions.</p>

<p>--username=USERNAME Gives the username for the account
to use to connect to the organization account.</p>

<p>--password=PASSWORD Gives the user account password.</p>

<p>--serverurl=SERVER_HOSTNAME Passes the name of the
subscription service to use to list all available
organizations. The orgs command will list all organi-
zations for the specified service for which the user account
is granted access. The default value, if this is not given,
is the Customer Portal Subscription Management service,
https://sub- scription.rhn.redhat.com:443. If there is an
on-premise sub- scription service such as Subscription Asset
Manager, this parameter can be used to submit the hostname
of the subscription service, in the form
[protocol://]servername[:port][/prefix]. For Subscription
Asset Manager, if the Subscription Manager tool is
configured with the Subscription Asset Manager RPM, then the
default value for the --serverurl parameter is for the on-
premise Subscription Asset Manager server.</p>

<p>PLUGIN OPTIONS The plugins command lists the available
subscription-manager plugins.</p>

<p>--list List the available subscription-manager
plugins.</p>

<p>--listslots List the available plugin slots</p>

<p>--listhooks List the available plugin slots and the
hooks that handle them.</p>

<p>--verbose Show additional info about the plugins, such
as the plugin con- figuration values.</p>

<p>REPO-OVERRIDE OPTIONS The repo-override command allows
the user to manage custom content repository settings</p>

<p>--repo The repository to modify (can be specified more
than once)</p>

<p>--add=NAME:VALUE Adds a named override with the provided
value to repos specified with the --repo option</p>

<p>--remove=NAME Removes a named override from the repos
specified with the --repo option</p>

<p>--remove-alll Removes all overrides from repos specified
with the --repo option</p>

<p>--list Lists all overrides from repos specified with the
--repo option</p>

<p>IDENTITY OPTIONS The identity command handles the UUID
of a system, which identifies the system to the subscription
management service after registration. This command can
simply return the UUID or it can be used to restore the
registration of a previously-registered system to the
subscription man- agement service.</p>

<p>--regenerate Requests that the subscription management
service issue a new identity certificate for the system,
using an existing UUID in the original identity certificate.
If this is used alone, then the identity command also uses
the original identity certificate to bind to the
subscription management service, using certifi- cate-based
authentication.</p>

<p>--username=USERNAME Gives the username for the account
which is registering the sys- tem; this user account is
usually tied to the user account for the content delivery
system which supplies the content. Optional, for user-based
authentication.</p>

<p>--password=PASSWORD Gives the user account password.
Optional, for user-based authentication.</p>

<p>--force Regenerates the identity certificate for the
system using user- name/password authentication. This is
used with the --regenerate option. --regenerate alone will
use an existing identity cer- tificate to authenticate to
the subscription management service. If the certificate is
missing or corrupted or in other circum- stances, then it
may be better to use user authentication rather than
certificate-based authentication. In that case, the --force
option requires the username or password to be given either
as an argument or in response to a prompt.</p>

<p>FACTS OPTIONS The facts command lists the system
information, like the release ver- sion, number of CPUs, and
other architecture information.</p>

<p>--list Lists the system information. These are simple
attribute: value pairs that reflect much of the information
in the /etc/sysconfig directory cpu.architecture: x86_64
cpu.core(s)_per_socket: 1 cpu.cpu(s): 2 cpu.cpu_family: 6
cpu.cpu_mhz: 1861.776 cpu.cpu_op-mode(s): 64-bit
cpu.cpu_socket(s): 2 cpu.hypervisor_vendor: KVM cpu.model: 2
cpu.numa_node(s): 1 cpu.numa_node0_cpu(s): 0,1 cpu.stepping:
3 cpu.thread(s)_per_core: 1 cpu.vendor_id: GenuineIntel
cpu.virtualization_type: full distribution.id: Santiago
distribution.name: Red Hat Enterprise Linux Workstation
distribution.version: 6.1 ----</p>

<p>--update Updates the system information. This is
particularly important whenever there is a hardware change
(such as adding a CPU) or a system upgrade because these
changes can affect the subscrip- tions that are compatible
with the system.</p>

<p>CLEAN OPTIONS The clean command removes all of the
subscription and identity data from the local system without
affecting the system information in the subscription
management service. This means that any of the subscrip-
tions applied to the system are not available for other
systems to use. The clean command is useful in cases where
the local subscription information is corrupted or lost
somehow, and the system will be rereg- istered using the
register --consumerid=EXISTING_ID command.</p>

<p>This command has no options.</p>

<p>CONFIG OPTIONS The config command changes the rhsm.conf
configuration file used by Subscription Manager. Almost all
of the connection information used by Subscription Manager
to access the subscription management service, content
server, and any proxies is set in the configuration file, as
well as general configuration parameters like the frequency
Subscription Manager checks for subscriptions updates. There
are major divisions in the rhsm.conf file, such as [server]
which is used to con- figure the subscription management
service. When changing the Subscrip- tion Manager
configuration, the settings are identified with the format
section.name and then the new value. For example:
server.hostname=newsubscription.example.com</p>

<p>--list Prints the current configuration for Subscription
Manager.</p>

<p>--remove=section.name Deletes the current value for the
parameter without supplying a new parameter. A blank value
tells Subscription Manager to use service default values for
that parameter. If there are no defaults, then the feature
is ignored.</p>

<p>--section.name=VALUE Sets a parameter to a new,
specified value. This is commonly used for connection
settings:</p>

<p>* server.hostname (subscription management service)</p>

<p>* server.proxy</p>

<p>* server.proxy_port</p>

<p>* server.proxy_user</p>

<p>* server.proxy_password</p>

<p>* rhsm.baseurl (content server)</p>

<p>* rhsm.certFrequency</p>

<p>VERSION OPTIONS The version command displays information
about the current Subscription Manager package, the
subscription service the system is registered to (if it is
currently registered), and the subscription management
server that the system is configured to use. For example:
[root@server ~]# subscription-manager version registered to:
subscription.rhn.redhat.com server type: subscription
management service subscription-manager: 1.1.2-1.el6
python-rhsm: 1.1.3-1.el6</p>

<p>This command has no options.</p>

<p>STATUS OPTIONS The status command shows the current
status of the products and attached subscriptions for the
system. If some products are not fully covered or
subscriptions have expired, then the status command shows
why subscriptions are not current.</p>

<p>[root@server ~]# subscription-manager status
+-------------------------------------------+ System Status
Details +-------------------------------------------+
Overall Status: Current</p>

<p>--ondate=DATE Shows the system status for a specific
date in the future. The format of the date is
YYYY-MM-DD.</p>

<p>[root@server ~]# subscription-manager status
--ondate=2014-01-01
+-------------------------------------------+ System Status
Details +-------------------------------------------+
Overall Status: Insufficient</p>

<p>DEPRECATED COMMANDS As the structures of subscription
configuration have changed, some of the original management
commands have become obsolete. These commands have been
replaced with updated commands.</p>

<p>subscribe This has been replaced with attach. A similar
registration option, --subscribe, has also be replaced with
--auto-attach.</p>

<p>unsubscribe This has been replaced with remove.</p>

<p>activate This has been replaced with redeem.</p>

<p>USAGE subscription-manager has two major tasks:</p>

<p>1. Handling the registration for a given system to a
subscrip- tion management service</p>

<p>2. Handling the product subscriptions for installed
products on a system</p>

<p>subscription-manager makes it easier for network
administrators to maintain parity between software
subscriptions and updates and their installed products by
tracking and managing what subscriptions are attached to a
system and when those subscriptions expire or are
exceeded.</p>

<p>REGISTERING AND UNREGISTERING MACHINES A system is
either registered to a subscription management service --
which makes all of the subscriptions available to the system
-- or it is not registered. Unregistered systems necessarily
lack valid software subscriptions because there is no way to
record that the subscriptions have been used or to renew
them.</p>

<p>The default subscription management service in the
Subscription Manager configuration is the Customer Portal
Subscription Management service. The configuration file can
be edited before the system is registered to point to an
on-premise subscription management service like Subscrip-
tion Asset Manager.</p>

<p>Systems are usually registered to a subscription
management service as part of their initial configuration,
such as the firstboot or kickstart process. However, systems
can be registered manually after they are configured, can be
removed from a content service, or reregistered.</p>

<p>If a system has never been registered (not even during
firstboot), then the register command will register the
system with whatever subscrip- tion management service is
configured in the /etc/rhsm/rhsm.conf file. This command
requires, at a minimum, the username and password for an
account to connect to the subscription management service.
If the cre- dentials aren t passed with the command, then
subscription-manager prompts for the username and password
interactively.</p>

<p>When there is a single organization or when using the
Customer Portal Subscription Management service, all that is
required is the user- name/password set. For example:</p>

<p>subscription-manager register --username=admin
--password=secret</p>

<p>With on-premise subscription services, such as
Subscription Asset Man- ager, the infrastructure is more
complex. The local administrator can define independent
groups called organizations which represent physical or
organizational divisions (--org). Those organizations can be
subdi- vided into environments (--environment). Optionally,
the information about what subscription service
(--serverurl) and content delivery net- work (--baseurl) to
use for the system registration can also be passed (which
overrides the Red Hat Subscription Manager settings). The
server and content URLs are usually configured in the
Subscription Manager configuration before registering a
system.</p>

<p>subscription-manager register --username=admin
--password=secret --org=&quot;IT Dept&quot;
--environment=&quot;local dev&quot;
--serverurl=local-cloudforms.example.com
--baseurl=https://local-cloudforms.example.com:8088/cfse</p>

<p>If a system is in a multi-tenant environment and the
organization is not provided with the registration request,
registration fails with a remote server error. In the
rhsm.log, there will be errors about being unable to load
the owners interface.</p>

<p>Some information is assigned automatically. Subscription
Manager auto- matically generates a unique ID for the system
which is used by the subscription management service and it
assigns a unit type, which indi- cates what kinds of
software are available for the system. The name for the
entry can be manually assigned (for use within an on-premise
sub- scription service, for instance). A handful of
subscriptions (such as specialized servers for content or
identity management) have their own specific unit type. For
example:</p>

<p>subscription-manager register --username=admin
--password=secret --type=system --name=server1
--org=&quot;IT Dept&quot;</p>

<p>If a system is registered and then somehow its
subscription information is lost -- a drive crashes or the
certificates are deleted or corrupted -- the system can be
reregistered, with all of its subscriptions restored, by
registering with the existing ID.</p>

<p>subscription-manager register --username=admin
--password=secret --consumerid=1234abcd</p>

<p>A system uses an SSL client certificate (its identity
certificate) to authenticate to the subscriptions system to
check for updates or changes to subscriptions. If the
identity certificate is lost or cor- rupted, it can be
regenerated using the identity command. subscription-manager
identity --regenerate</p>

<p>Using the --force option will prompt for the username
and password for the account, if one isnt given, and then
return the new inventory ID and the hostname of the
registered system.</p>

<p>subscription-manager identity --force Username: jsmith
Password: eff9a4c9-3579-49e5-a52f-83f2db29ab52
server.example.com</p>

<p>A system is unregistered and removed from the
subscription management service simply by running the
unregister command. Unregistering a sys- tem and removing
its attached subscriptions can free up subscriptions when a
system is taken offline or moved to a different department.
subscription-manager unregister</p>

<p>An option with registration, --auto-attach, will
automatically attach the subscriptions pool which best
matches the system architecture and configuration to the
newly-registered system. This option attaches sub-
scriptions as part of the registration process, rather than
separately managing subscriptions. subscription-manager
register --username=admin --password=secret
--auto-attach</p>

<p>Auto-attach also supports an option to set a preferred
service level with the selected subscriptions, the
--servicelevel option. In this case, the --servicelevel
option sets a preference that helps the auto- attach process
select appropriate subscriptions. For example, if the
preferred service level for a production server is premium,
and there are three matching subscriptions with different
service levels (none, standard, and premium), the
auto-attach process selects the subscrip- tion which offers
a premium service level.</p>

<p>subscription-manager register --username=admin
--password=secret --auto-attach --servicelevel=premium</p>

<p>LISTING, ATTACHING, AND REMOVING SUBSCRIPTIONS FOR
PRODUCTS A subscription is essentially the right to install,
use, and receive updates for a Red Hat product. (Sometimes
multiple individual software products are bundled together
into a single subscription.) When a sys- tem is registered,
the subscription management service is aware of the system
and has a list of all of the possible product subscriptions
that the system can install and use. A subscription is
applied to a system when the system is attached to the
subscription pool that makes that product available. A
system releases or removes that subscription (meaning, it
removes that subscription so that another system can use
that subscription count).</p>

<p>list command shows you what subscriptions are available
specifically to the system (meaning subscriptions which are
active, have available quantities, and match the hardware
and architecture) or all subscrip- tions for the
organization. Using the --ondate option shows subscrip-
tions that are or will be active at a specific time
(otherwise, it shows subscriptions which are active
today).</p>

<p>subscription-manager list --available
--ondate=2012-01-31
+-------------------------------------------+ Available
Subscriptions +-------------------------------------------+
Subscription Name: Red Hat Enterprise Linux SKU: SYS0395
Pool Id: 8a85f981302cbaf201302d899adf05a9 Quantity: 249237
Service Level: None Service Type: None Multi-Entitlement: No
Ends: 01/01/2022 Machine Type: physical</p>

<p>The list command can also be used to show what products
you currently have installed, as a way of tracking what
products you have versus what subscriptions you have on the
system. subscription-manager list --installed</p>

<p>+-------------------------------------------+ Installed
Product Status
+-------------------------------------------+</p>

<p>ProductName: Red Hat Enterprise Linux Server Product ID:
69 Version: 6.3 Arch: x86_64 Status: Subscribed Started:
07/26/2012 Ends: 08/31/2015</p>

<p>Attaching a subscription requires the ID for the
subscription pool (the --pool option). For example:
subscription-manager attach
--pool=ff8080812bc382e3012bc3845da100d2</p>

<p>As with the register command, the system can be
auto-attached to the best-fitting subscriptions using the
--auto option: subscription-manager attach --auto</p>

<p>Auto-attach also supports an option to set a preferred
service level with the selected subscriptions, the
--servicelevel option. In this case, the --servicelevel
option sets a preference that helps the auto- attach process
select appropriate subscriptions. For example, if the
preferred service level for a production server is premium,
and there are three matching subscriptions with different
service levels (none, standard, and premium), the
auto-attach process selects the subscrip- tion which offers
a premium subscription.</p>

<p>subscription-manager attach --auto
--servicelevel=premium</p>

<p>Some subscriptions define a count based on attributes of
the system itself, like the number of sockets or the number
of virtual guests on a host. You can combine multiple
subscriptions together to cover the count. For example, if
there is a four socket server, you can use two subscriptions
for &quot;RHEL Server for Two Sockets&quot; to cover the
socket count. To specify the number of subscriptions to use,
use the --quan- tity option. For example:
subscription-manager attach
--pool=ff8080812bc382e3012bc3845da100d2 --quantity=2</p>

<p>Removing subscription from a system releases the
subscription back into the pool. The system remains
registered with the subscription manage- ment service. Each
product has an identifying X.509 certificate installed with
it. To remove a subscription for a specific product, specify
the serial number (or numbers, in multiple --serial options)
of the certificate: subscription-manager remove
--serial=1128750306742160</p>

<p>Giving the remove command with the --all option removes
every subscrip- tion the system has used.</p>

<p>REDEEMING EXISTING SUBSCRIPTIONS Sometimes, a system may
come preconfigured with products and subscrip- tions. Rather
than attaching a pool and claiming a subscription, this
system simply needs to redeem its existing
subscriptions.</p>

<p>After registration, subscriptions on preconfigured
systems can be claimed using the redeem command, which
essentially auto-attaches the system to its preexisting
subscriptions. subscription-manager redeem
--email=admin@example.com --org=&quot;IT Dept&quot;</p>

<p>VIEWING LOCAL SUBSCRIPTION &amp; CONTENT PROVIDER
INFORMATION Red Hat has a hosted environment, through the
Customer Portal, that provides centralized access to
subscription management and content repositories. However,
organizations can use other tools -- like Sub- scription
Manager -- for content hosting and subscription management.
With a local content provider, the organization,
environments, reposi- tories, and other structural
configuration is performed in the content provider. Red Hat
Subscription Manager can be used to display this
information, using the environments, orgs, and repos
commands.</p>

<p>subscription-manager repos --list</p>

<p>subscription-manager environments --username=jsmith
--password=secret --org=prod</p>

<p>subscription-manager orgs --username=jsmith
--password=secret</p>

<p>CHANGING SUBSCRIPTION MANAGER CONFIGURATION The
Subscription Manager CLI and GUI both use the
/etc/rhsm/rhsm.conf file for configuration, including what
content and subscription manage- ment services to use and
management settings like auto-attaching. This configuration
file can be edited directly, or it can be edited using the
config command. Parameters and values are passed as
arguments with the config command in the format
--section.parameter=value , where sec- tion is the
configuration section in the file: server, rhsm, or rhsm-
certd.</p>

<p>For example, to change the hostname of the subscription
management ser- vice host: subscription-manager config
--server.hostname=myserver.example.com</p>

<p>UPDATING FACTS The information about a system, such as
its hardware and CPU, its oper- ating system versions, and
memory, are collected by Subscription Man- ager in a list of
facts. Subscription Manager uses these facts to determine
what purchased subscriptions are compatible with the system.
Whenever these facts change (such as installing an
additional CPU), the facts can be updated immediately using
the facts command.</p>

<p>subscription-manager facts --update</p>

<p>The collected facts can also be overridden by creating a
JSON file in the /etc/rhsm/facts/ directory. These have
simple formats that define a fact and value:
{&quot;fact1&quot;: &quot;value1&quot;,&quot;fact2&quot;:
&quot;value2&quot;}</p>

<p>Any fact override file must have a .facts extension.</p>

<p>When these fact files are added, running the facts
command will update the collected facts with the new, manual
facts or values.</p>

<p>SUBSCRIPTIONS AND KICKSTART The subscription-manager
tool can be run as a post-install script as part of the
kickstart installation process. This allows subscription
management (registering and applying subscriptions) to be
automated along with installation. For example: %post
--log=/root/ks-post.log /usr/sbin/subscription-manager
register --username admin --password secret --org east colo
--auto-attach --servicelevel=premium --force</p>

<p>NETWORK INFORMATION The subscription-manager tool uses
outgoing HTTPS requests. In the default configuration it
will use HTTPS on port 443 to the subscription servers
subscription.rhn.redhat.com and to the content delivery
service cdn.redhat.com.</p>

<p>For information about the network addresses that
subscription-manager and the subscription-manager yum plugin
use see https://access.red- hat.com/site/articles/414963</p>

<p>FILES * /etc/pki/consumer/*.pem</p>

<p>* /etc/pki/entitlement/&lt;serial&gt;.pem</p>

<p>* /etc/pki/product/*.pem</p>

<p>* /etc/rhsm/rhsm.conf</p>

<p>* /etc/rhsm/facts/*.facts</p>

<p>AUTHORS Deon Lackey, &lt;dlackey@redhat.com&gt;, and
Pradeep Kilambi, &lt;pkilambi@red- hat.com&gt;</p>

<p>version 2.8 January 29, 2014 subscription-manager(8)</p>
<hr>
</body>
</html>
