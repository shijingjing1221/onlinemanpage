<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:09:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>EXPIRE(8) EXPIRE(8)</p>

<p>NAME expire - Usenet article and history expiration
program</p>

<p>SYNOPSIS expire [ -d dir ] [ -f file ] [ -g file ] [ -h
file ] [ -i ] [ -N ] [ -n ] [ -p ] [ -r reason ] [ -s size ]
[ -t ] [ -v level ] [ -w number ] [ -x ] [ -z file ] [
expire.ctl ]</p>

<p>DESCRIPTION Expire scans the history(5)-format text file
&lt;pathdb in inn.conf&gt;/his- tory and uses the
information recorded in it to purge itself of old news
articles. Articles stored using a storage method that has
self- expire functionality are by default not affected by
expires primary behavior (but see the -N flag to disable
this). In this case, expire.ctl is ignored except /remember/
line for that article; expire does still probe to see if the
article still exists and purges the relevant history and
overview entries if appropriate. However, if groupbaseexpiry
in inn.conf is true, expire acts on all articles as
specified by expire.ctl regardless of whether their storage
methods have self-expire functionality. In this case, the -e
, -k, -N, -p, -q, -w and -z flags are ignored.</p>

<p>Note that expire never purges articles which do not
match any entry in expire.ctl.</p>

<p>OPTIONS -d dir If the -d flag is used, then the new
history file and database is created in the specified
directory, dir. This is useful when the filesystem does not
have sufficient space to hold both the old and new history
files. When this flag is used, expire leaves the server
paused and creates a zero-length file named after the new
history file, with an extension of .done to indicate that it
has successfully completed the expiration. The calling
script should install the new history file and un-pause the
server. The -r flag should be used with this flag.</p>

<p>-f file To specify an alternate history file, use the -f
flag. This flag is valid when used with the -d , and the
output will be written to the specified file. The default
without -f flag is history.</p>

<p>-g file If the -g flag is given, then a one-line summary
equivalent to the output of -v 1, except preceded by the
current time, will be appended to the specified file.</p>

<p>-h file To specify an alternate input text history file,
use the -h flag. Expire uses the old dbz(3) database to
determine the size of the new one. (If -d flag is not used,
the output file- name will be the same as the input filename
with an extension of .n.) The default without -h flag is
&lt;pathdb in inn.conf&gt;/history.</p>

<p>-i To ignore the old database, use the -i flag.</p>

<p>-N The control file is normally ignored for articles in
storage methods which have self-expire functionality. If the
-N flag is used, expire still uses the control file for
these arti- cles.</p>

<p>-n If innd is not running, use the -n flag and expire
will not send the pause or go commands. (For more details on
the commands, see ctlinnd(8)). Note that expire only needs
exclu- sive access for a very short time long enough to see
if any new articles arrived since it first hit the end of
the file, and to rename the new files to the working
files.</p>

<p>-p Expire makes its decisions on the time the article
arrived, as found in the history file. This means articles
are often kept a little longer than with other expiration
programs that base their decisions on the articles posting
date. To use the arti- cles posting date, use the -p
flag.</p>

<p>-r reason Expire normally sends a pause command to the
local innd(8) daemon when it needs exclusive access to the
history file, using the string Expiring as the reason. To
give a different rea- son, use the -r flag. The process ID
will be appended to the reason. When expire is finished and
the new history file is ready, it sends a go command. See
also the -n flag.</p>

<p>-s size Optimize the new history database for
approximately size pairs (lines in history). Accurately
specifying the size will create a more efficient database.
(The size should be the estimated eventual size of the file,
typically the size of the old file.)</p>

<p>-t If the -t flag is used, then expire will generate a
list of the tokens that should be removed on its standard
output, and the new history file will be left in history.n,
history.n.dir, history.n.index and history.n.hash. This flag
be useful for debugging when used with the -n flags. Note
that if the -f flag is used, then the name specified with
that flag will be used instead of history.</p>

<p>-v level The -v flag is used to increase the verbosity
of the pro- gram, generating messages to standard output.
The level should be a number, where higher numbers result in
more output. Level one will print totals of the various
actions done (not valid if a new history file is not
written), level two will print a report on each individual
file, while level five results in mul- tiple lines of output
for every history line processed.</p>

<p>-w number Use the -w flag to warp time so that expire
thinks it is running at some time other then the current
time. The value should be a signed floating point number
indicating the number of days to use as the offset.</p>

<p>-x If the -x flag is used, then expire will not create
any new history files. This is most useful when combined
with the -n and -t flags to see how different expiration
policies would change the amount of disk space used.</p>

<p>-z file If the -z flag is used, then articles are not
removed, but their names are appended to the specified file.
See the description of delayrm in news.daily(8).</p>

<p>If a filename is specified, it is taken as the control
file and parsed according to the rules in expire.ctl. A
single dash (-) may be used to read the file from standard
input. If no file is specified, the file &lt;pathetc in
inn.conf&gt;/expire.ctl is read.</p>

<p>HISTORY Written by Rich $alz &lt;rsalz@uunet.uu.net&gt;
for InterNetNews. This is revision 5909, dated
2002-12-03.</p>

<p>SEE ALSO ctlinnd(8), dbz(3), expire.ctl(5), history(5),
inn.conf(5), innd(8), inndcomm(3).</p>

<p>EXPIRE(8)</p>
<hr>
</body>
</html>
