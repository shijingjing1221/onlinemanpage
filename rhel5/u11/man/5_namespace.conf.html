<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:56 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>NAMESPACE.CONF(5) Linux-PAM Manual NAMESPACE.CONF(5)</p>

<p>NAME namespace.conf - the namespace configuration
file</p>

<p>DESCRIPTION This module allows setup of private
namespaces with polyinstantiated directories. Directories
can be polyinstantiated based on user name or, in the case
of SELinux, user name, sensitivity level or complete
security context. If an executable script
/etc/security/namespace.init exists, it is used to
initialize the namespace every time a new instance directory
is setup. The script receives the polyinstantiated directory
path and the instance directory path as its arguments.</p>

<p>The /etc/security/namespace.conf file specifies which
directories are polyinstantiated, how they are
polyinstantiated, how instance directories would be named,
and any users for whom polyinstantiation would not be
performed.</p>

<p>When someone logs in, the file namespace.conf is scanned
where each non comment line represents one polyinstantiated
directory with space separated fields as follows:</p>

<p>polydir instance_prefix method list_of_uids</p>

<p>The first field, polydir, is the absolute pathname of
the directory to polyinstantiate. The special string $HOME
in entry is replaced with users home directory. This field
cannot be blank.</p>

<p>The second field, instance_prefix is the string prefix
used to build the pathname for the instantiation of
&lt;polydir&gt;. The directory security context, or
optionally its md5sum string (32 hex characters), is
appended to the prefix to generate the final instance
directory path. This directory is created if it did not
exist already, and is then bind mounted on the
&lt;polydir&gt; to provide an instance of &lt;polydir&gt;
based on the &lt;method&gt; column. The special string $HOME
is replaced with the user s home directory, and $USER with
the username. This field cannot be blank. The directory
where polyinstantiated instances are to be created, must
exist and must have, by default, the mode of 000. The
requirement that the instance parent be of mode 000 can be
overridden with the command line option
&lt;ignore_instance_parent_mode&gt;</p>

<p>The third field, method, is the method used for
polyinstantiation. It can take 3 different values;
&quot;user&quot; for polyinstantiation based on user name,
&quot;level&quot; for polyinstantiation based on process MLS
level and user name, and &quot;context&quot; for
polyinstantiation based on process security context and user
name Methods &quot;context&quot; and &quot;level&quot; are
only available with SELinux. This field cannot be blank.</p>

<p>The fourth field, list_of_uids, is a comma separated
list of user names for whom the polyinstantiation is not
performed. If left blank, polyinstantiation will be
performed for all users.</p>

<p>In case of context or level polyinstantiation the
SELinux context which is used for polyinstantiation is the
context used for executing a new process as obtained by
getexeccon. This context must be set by the calling
application or pam_selinux.so module. If this context is not
set the polyinstatiation will be based just on user
name.</p>

<p>EXAMPLES These are some example lines which might be
specified in /etc/security/namespace.conf.</p>

<p># The following three lines will polyinstantiate /tmp, #
/var/tmp and user s home directories. /tmp and /var/tmp #
will be polyinstantiated based on the security level # as
well as user name, whereas home directory will be #
polyinstantiated based on the full security context and user
name. # Polyinstantiation will not be performed for user
root # and adm for directories /tmp and /var/tmp, whereas
home # directories will be polyinstantiated for all users. #
# Note that instance directories do not have to reside
inside # the polyinstantiated directory. In the examples
below, # instances of /tmp will be created in /tmp-inst
directory, # where as instances of /var/tmp and users home
directories # will reside within the directories that are
being # polyinstantiated. # /tmp /tmp-inst/ level root,adm
/var/tmp /var/tmp/tmp-inst/ level root,adm $HOME
$HOME/$USER.inst/inst- context</p>

<p>For the &lt;service&gt;s you need polyinstantiation
(login for example) put the following line in
/etc/pam.d/&lt;service&gt; as the last line for session
group:</p>

<p>session required pam_namespace.so [arguments]</p>

<p>This module also depends on pam_selinux.so setting the
context.</p>

<p>SEE ALSO pam_namespace(8), pam.d(5), pam(8)</p>

<p>AUTHORS The namespace.conf manual page was written by
Janak Desai &lt;janak@us.ibm.com&gt;.</p>

<p>Linux-PAM Manual 07/18/2012 NAMESPACE.CONF(5)</p>
<hr>
</body>
</html>
