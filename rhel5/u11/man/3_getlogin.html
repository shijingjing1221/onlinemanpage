<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:11:42 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>GETLOGIN(3) Linux Programmer s Manual GETLOGIN(3)</p>

<p>NAME getlogin, getlogin_r, cuserid - get user name</p>

<p>SYNOPSIS #include &lt;unistd.h&gt;</p>

<p>char *getlogin(void); int getlogin_r(char *buf, size_t
bufsize);</p>

<p>#include &lt;stdio.h&gt;</p>

<p>char *cuserid(char *string);</p>

<p>DESCRIPTION getlogin() returns a pointer to a string
containing the name of the user logged in on the controlling
terminal of the process, or a null pointer if this
information cannot be determined. The string is stati- cally
allocated and might be overwritten on subsequent calls to
this function or to cuserid().</p>

<p>getlogin_r() returns this same user name in the array
buf of size buf- size.</p>

<p>cuserid() returns a pointer to a string containing a
user name associ- ated with the effective user ID of the
process. If string is not a null pointer, it should be an
array that can hold at least L_cuserid characters; the
string is returned in this array. Otherwise, a pointer to a
string in a static area is returned. This string is
statically allocated and might be overwritten on subsequent
calls to this function or to getlogin().</p>

<p>The macro L_cuserid is an integer constant that
indicates how long an array you might need to store a user
name. L_cuserid is declared in stdio.h.</p>

<p>These functions let your program identify positively the
user who is running (cuserid()) or the user who logged in
this session (getlo- gin()). (These can differ when
set-user-ID programs are involved.)</p>

<p>For most purposes, it is more useful to use the
environment variable LOGNAME to find out who the user is.
This is more flexible precisely because the user can set
LOGNAME arbitrarily.</p>

<p>RETURN VALUE getlogin() returns a pointer to the user
name when successful, and NULL on failure. getlogin_r()
returns 0 when successful, and non-zero on failure.</p>

<p>ERRORS POSIX specifies</p>

<p>EMFILE The calling process already has the maximum
allowed number of open files.</p>

<p>ENFILE The system already has the maximum allowed number
of open files.</p>

<p>ENXIO The calling process has no controlling tty.</p>

<p>ERANGE (getlogin_r) The length of the user name,
including the termi- nating null byte, is larger than
bufsize.</p>

<p>Linux/glibc also has</p>

<p>ENOENT There was no corresponding entry in the
utmp-file.</p>

<p>ENOMEM Insufficient memory to allocate passwd
structure.</p>

<p>FILES /etc/passwd password database file /var/run/utmp
(traditionally /etc/utmp; some libc versions used
/var/adm/utmp)</p>

<p>CONFORMING TO getlogin() and getlogin_r() specified in
POSIX.1-2001.</p>

<p>System V has a cuserid() function which uses the real
user ID rather than the effective user ID. The cuserid()
function was included in the 1988 version of POSIX, but
removed from the 1990 version. It was present in SUSv2, but
removed in POSIX.1-2001.</p>

<p>OpenBSD has getlogin() and setlogin(), and a username
associated with a session, even if it has no controlling
tty.</p>

<p>BUGS Unfortunately, it is often rather easy to fool
getlogin(). Sometimes it does not work at all, because some
program messed up the utmp file. Often, it gives only the
first 8 characters of the login name. The user currently
logged in on the controlling tty of our program need not be
the user who started it. Avoid getlogin() for
security-related pur- poses.</p>

<p>Note that glibc does not follow the POSIX spec and uses
stdin instead of /dev/tty. A bug. (Other recent systems,
like SunOS 5.8 and HP-UX 11.11 and FreeBSD 4.8 all return
the login name also when stdin is redirected.)</p>

<p>Nobody knows precisely what cuserid() does; avoid it in
portable pro- grams. Or avoid it altogether: use
getpwuid(geteuid()) instead, if that is what you meant. DO
NOT USE cuserid().</p>

<p>SEE ALSO geteuid(2), getuid(2)</p>

<p>Linux 2.4 2003-08-24 GETLOGIN(3)</p>
<hr>
</body>
</html>
