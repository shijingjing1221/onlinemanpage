<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:26:05 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>UDEV(7) udev UDEV(7)</p>

<p>NAME udev - dynamic device management</p>

<p>DESCRIPTION udev provides a dynamic device directory
containing only the files for actually present devices. It
creates or removes device node files in the /dev directory,
or it renames network interfaces.</p>

<p>Usually udev runs as udevd(8) and receives uevents
directly from the kernel if a device is added or removed
form the system.</p>

<p>If udev receives a device event, it matches its
configured rules against the available device attributes
provided in sysfs to identify the device. Rules that match,
may provide additional device information or specify a
device node name and multiple symlink names and instruct
udev to run additional programs as part of the device event
handling.</p>

<p>CONFIGURATION All udev configuration files are placed in
/etc/udev/*. Every file consists of a set of lines of text.
All empty lines or lines beginning with # will be
ignored.</p>

<p>Configuration file udev expects its main configuration
file at /etc/udev/udev.conf. It consists of a set of
variables allowing the user to override default udev values.
The following variables can be set:</p>

<p>udev_root Specifies where to place the device nodes in
the filesystem. The default value is /dev.</p>

<p>udev_rules The name of the udev rules file or directory
to look for files with the suffix .rules. Multiple rule
files are read in lexical order. The default value is
/etc/udev/rules.d.</p>

<p>udev_log The logging priority. Valid values are the
numerical syslog priorities or their textual
representations: err, info and debug.</p>

<p>Rules files The udev rules are read from the files
located in the /etc/udev/rules.d directory or at the
location specified value in the configuraton file. Every
line in the rules file contains at least one key value pair.
There are two kind of keys, match and assignement keys. If
all match keys are matching against its value, the rule gets
applied and the assign keys get the specified value
assigned. A matching rule may specify the name of the device
node, add a symlink pointing to the node, or run a specified
program as part of the event handling. If no matching rule
is found, the default device node name is used.</p>

<p>A rule consists of a list of one or more key value pairs
separated by a comma. Each key has a distinct operation,
depending on the used operator. Valid operators are:</p>

<p>== Compare for equality.</p>

<p>!= Compare for inequality.</p>

<p>= Asign a value to a key. Keys that represent a list,
are reset and only this single value is assigned.</p>

<p>+= Add the value to a key that holds a list of
entries.</p>

<p>:= Assign a value to a key finally; disallow any later
changes, which may be used to prevent changes by any later
rules.</p>

<p>The following key names can be used to match against
device properties:</p>

<p>ACTION Match the name of the event action.</p>

<p>KERNEL Match the name of the device.</p>

<p>DEVPATH Match the devpath of the device.</p>

<p>SUBSYSTEM Match the subsystem of the device.</p>

<p>BUS Search the devpath upwards for a matching device
subsystem name.</p>

<p>DRIVER Search the devpath upwards for a matching device
driver name.</p>

<p>ID Search the devpath upwards for a matching device
name.</p>

<p>SYSFS{filename} Search the devpath upwards for a device
with matching sysfs attribute values. Up to five SYSFS keys
can be specified per rule. All attributes must match on the
same device. Trailing whitespace in the attribute values is
ignored, if the specified match value does not contain
trailing whitespace itself.</p>

<p>ENV{key} Match against the value of an environment
variable. Up to five ENV keys can be specified per rule.
This key can also be used to export a variable to the
environment.</p>

<p>PROGRAM Execute external program. The key is true, if
the program returns without exit code zero. The whole event
environment is available to the executed program. The
programs output printed to stdout is available for the
RESULT key.</p>

<p>RESULT Match the returned string of the last PROGRAM
call. This key can be used in the same or in any later rule
after a PROGRAM call.</p>

<p>Most of the fields support a shell style pattern
matching. The following pattern characters are
supported:</p>

<p>* Matches zero, or any number of characters.</p>

<p>? Matches any single character.</p>

<p>[] Matches any single character specified within the
brackets. example, the pattern string tty[SR] would match
either ttyS or ttyR . Ranges are also supported within this
match with the - character. For example, to match on the
range of all digits, the pattern [0-9] would be used. If the
first character following the [ is a !, any characters not
enclosed are matched.</p>

<p>The following keys can get values assigned:</p>

<p>NAME The name of the node to be created, or the name the
network interface should be renamed to. Only one rule can
set the node name, all later rules with a NAME key will be
ignored.</p>

<p>SYMLINK The name of a symlink targeting the node. Every
matching rule can add this value to the list of symlinks to
be created along with the device node. Multiple symlinks may
be specified by separating the names by the space
character.</p>

<p>OWNER, GROUP, MODE The permissions for the device node.
Every specified value overwrites the compiled-in default
value.</p>

<p>ENV{key} Export a variable to the environment. This key
can also be used to match against an environment
variable.</p>

<p>RUN Add a program to the list of programs to be executed
for a specific device. This can only be used for very short
running tasks. Running an event process for a long period of
time may block all further events for this or a dependent
device. Long running tasks need to be immediately detached
from the event process itself.</p>

<p>LABEL Named label where a GOTO can jump to.</p>

<p>GOTO Jumps to the next LABEL with a matching name</p>

<p>IMPORT{type} Import the printed result or the value of a
file in environment key format into the event environment.
program will execute an external program and read its
output. file will inport a text file. If no option is given,
udev will determine it from the executable bit of of the
file permissions.</p>

<p>WAIT_FOR_SYSFS Wait for the specified sysfs file of the
device to be created. Can be used to fight against kernel
sysfs timing issues.</p>

<p>OPTIONS last_rule stops further rules application. No
later rules will have any effect. ignore_device will ignore
this event completely. ignore_remove will ignore any later
remove event for this device. This may be useful as a
workaround for broken device drivers. all_partitions will
create device nodes for all available partitions of a block
device. This may be useful for removable media.</p>

<p>The NAME, SYMLINK, PROGRAM, OWNER, GROUP and RUN fields
support simple printf-like string substitutions. The RUN
format chars gets applied after all rules have been
processed, right before the program is executed. It allows
the use of the complete environment set by earlier matching
rules. For all other fields, substitutions are applied while
the individual rule is being processed. The available
substitutions are:</p>

<p>$kernel, %k The kernel name for this device.</p>

<p>$number, %n The kernel number for this device. For
example, sda3 has kernel number of 3</p>

<p>$devpath, %p The devpath of the device.</p>

<p>$id, %b The name of the device matched while searching
the devpath upwards for BUS, IDDRIVER and SYSFS.</p>

<p>$sysfs{file}, %s{file} The value of a sysfs attribute
found at the current or a parent device.</p>

<p>$env{key}, %E{key} The value of an environment
variable.</p>

<p>$major, %M The kernel major number for the device.</p>

<p>$minor %m The kernel minor number for the device.</p>

<p>$result, %c The string returned by the external program
requested with PROGRAM. A single part of the string,
separated by a space character may be selected by specifying
the part number as an attribute: %c{N}. If the number is
followed by the + char this part plus all remaining parts of
the result string are substituted: %c{N+}</p>

<p>$parent, %P The node name of the parent device.</p>

<p>$root, %r The udev_root value.</p>

<p>$tempnode, %N The name of a created temporary device
node to provide access to the device from a external program
before the real node is created.</p>

<p>%% The % character itself.</p>

<p>$$ The $ character itself.</p>

<p>The count of characters to be substituted may be limited
by specifying the format length value. For example,
%3s{file} will only insert the first three characters of the
sysfs attribute</p>

<p>AUTHOR Written by Greg Kroah-Hartman
&lt;greg@kroah.com&gt; and Kay Sievers
&lt;kay.sievers@vrfy.org&gt;. With much help from Dan
Stekloff &lt;dsteklof@us.ibm.com&gt; and many others.</p>

<p>SEE ALSO udevd(8), udevinfo(8), udevmonitor(8)</p>

<p>udev August 2005 UDEV(7)</p>
<hr>
</body>
</html>
