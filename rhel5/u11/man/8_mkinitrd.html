<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:16 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MKINITRD(8) MKINITRD(8)</p>

<p>NAME mkinitrd - creates initial ramdisk images for
preloading modules</p>

<p>SYNOPSIS mkinitrd [--version] [-v] [-f]
[--preload=module] [--omit-scsi-modules]
[--omit-raid-modules] [--omit-lvm-modules] [--with=module]
[--image-version] [--fstab=fstab] [--nocompress]
[--builtin=module] [--nopivot] [--with-fips] image
kernel-version</p>

<p>DESCRIPTION mkinitrd creates an initial image used by
the kernel for preloading the block device modules (such as
IDE, SCSI or RAID) which are needed to access the root
filesystem. mkinitrd automatically loads filesystem modules
(such as ext3 and jbd), IDE modules, all scsi_hostadapter
entries in /etc/modprobe.conf, and raid modules if the
systems root partition is on raid, which makes it simple to
build and use kernels using modular device drivers.</p>

<p>Any module options specified in /etc/modprobe.conf are
passed to the modules as they are loaded by the initial
ramdisk.</p>

<p>The root filesystem used by the kernel is specified in
the boot config- uration file, as always. The traditional
root=/dev/hda1 style device specification is allowed. If a
label is used, as in root=LABEL=rootPart the initrd will
search all available devices for an ext2 or ext3 filesystem
with the appropriate label, and mount that device as the
root filesystem.</p>

<p>FIPS mkinitrd will add a number of checks to the created
initrd if the sys- tem is running in fips mode. First the
kernel gets integrity checked by running &quot;sha512hmac -c
/boot/.vmlinuz-kernel-version.hmac&quot; from the initrd.
Then all the crypto algorithm modules get loaded using the
embedded signature to integrity check them, and last the
tcrypt module gets loaded which runs self tests on all
approved crypto algorithms. You can force mkinitrd to add
these checks to a created initrd with the --with-fips
commandline option.</p>

<p>There are a number of limitations to mkinitrd s fips
support:</p>

<p>/boot Must be on a separate partition</p>

<p>/boot Must not be on multipath, nfs, dmraid or
mdraid</p>

<p>OPTIONS --builtin=module Act as if module is built into
the kernel being used. mkinitrd will not look for this
module, and will not emit an error if it does not exist.
This option may be used multiple times.</p>

<p>-f Allows mkinitrd to overwrite an existing image
file.</p>

<p>--fstab=fstab Use fstab to automatically determine what
type of filesystem the root device is on. Normally,
/etc/fstab is used.</p>

<p>--image-version The kernel version number is appended to
the initrd image path before the image is created.</p>

<p>--nocompress Normally the created initrd image is
compressed with gzip. If this option is specified, the
compression is skipped.</p>

<p>--nopivot Do not use the pivot_root system call as part
of the initrd. This lets mkinitrd build proper images for
Linux 2.2 kernels at the expense of some features. In
particular, some filesystems (such as ext3) will not work
properly and filesystem options will not be used to mount
root. This option is not recommended, and will be removed in
future versions.</p>

<p>--omit-lvm-modules Do not load any lvm modules, even if
/etc/fstab expects them.</p>

<p>--omit-raid-modules Do not load any raid modules, even
if /etc/fstab and /etc/raidtab expect them.</p>

<p>--omit-scsi-modules Do not load any scsi modules,
including scsi_mod and sd_mod modules, even if they are
present. If the root partition is on a scsi device, mkinitrd
will still include the necessary scsi modules to support
that device.</p>

<p>--preload=module Load the module module in the initial
ramdisk image. The module gets loaded before any SCSI
modules which are specified in /etc/modprobe.conf. This
option may be used as many times as necessary.</p>

<p>-v Prints out verbose information while creating the
image (nor- mally the mkinitrd runs silently).</p>

<p>--version Prints the version of mkinitrd thats being
used and then exits.</p>

<p>--with=module Load the modules module in the initial
ramdisk image. The module gets loaded after any SCSI modules
which are specified in /etc/modprobe.conf. This option may
be used as many times as necessary.</p>

<p>---with-fips Force adding kernel integrity checking to
the created initrd.</p>

<p>FILES /dev/loop* A block loopback device is used to
create the image, which makes this script useless on systems
without block loopback support available (only used on
kernels &lt; 2.6)</p>

<p>/etc/modprobe.conf Specifies SCSI modules to be loaded
and module options to be used.</p>

<p>/etc/modules.conf Specifies SCSI modules to be loaded
and module options to be used. (only used on kernels &lt;
2.6)</p>

<p>SEE ALSO fstab(5), insmod(1)</p>

<p>Tue Aug 10 2004 MKINITRD(8)</p>
<hr>
</body>
</html>
