<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:27 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>MOUNT(2) Linux Programmer s Manual MOUNT(2)</p>

<p>NAME mount, umount - mount and unmount filesystems</p>

<p>SYNOPSIS #include &lt;sys/mount.h&gt;</p>

<p>int mount(const char *source, const char *target, const
char *filesystemtype, unsigned long mountflags, const void
*data);</p>

<p>int umount(const char *target);</p>

<p>int umount2(const char *target, int flags);</p>

<p>DESCRIPTION mount() attaches the filesystem specified by
source (which is often a device name, but can also be a
directory name or a dummy) to the direc- tory specified by
target.</p>

<p>umount() and umount2() remove the attachment of the
(topmost) filesys- tem mounted on target.</p>

<p>Appropriate privilege (Linux: the CAP_SYS_ADMIN
capability) is required to mount and unmount
filesystems.</p>

<p>Since Linux 2.4 a single filesystem can be visible at
multiple mount points, and multiple mounts can be stacked on
the same mount point.</p>

<p>Values for the filesystemtype argument supported by the
kernel are listed in /proc/filesystems (like
&quot;minix&quot;, &quot;ext2&quot;, &quot;msdos&quot;,
&quot;proc&quot;, &quot;nfs&quot;, &quot;iso9660&quot;
etc.). Further types may become available when the
appropriate modules are loaded.</p>

<p>The mountflags argument may have the magic number 0xC0ED
(MS_MGC_VAL) in the top 16 bits (this was required in kernel
versions prior to 2.4, but is no longer required and ignored
if specified), and various mount flags (as defined in
&lt;linux/fs.h&gt; for libc4 and libc5 and in
&lt;sys/mount.h&gt; for glibc2) in the low order 16
bits:</p>

<p>MS_BIND (Linux 2.4 onwards) Perform a bind mount, making
a file or a directory subtree visible at another point
within a file system. Bind mounts may cross file system
boundaries and span chroot(2) jails. The filesystemtype,
mountflags, and data arguments are ignored.</p>

<p>MS_DIRSYNC (since Linux 2.5.19) Make directory changes
on this file system synchronous. (This property can be
obtained for individual directories or subtrees using
chattr(8).)</p>

<p>MS_MANDLOCK Permit mandatory locking on files in this
file system. (Manda- tory locking must still be enabled on a
per-file basis, as described in fcntl(2).)</p>

<p>MS_MOVE Move a subtree. source specifies an existing
mount point and target specifies the new location. The move
is atomic: at no point is the subtree unmounted. The
filesystemtype, mountflags, and data arguments are
ignored.</p>

<p>MS_NOATIME Do not update access times for (all types of)
files on this file system.</p>

<p>MS_NODEV Do not allow access to devices (special files)
on this file sys- tem.</p>

<p>MS_NODIRATIME Do not update access times for directories
on this file system.</p>

<p>MS_NOEXEC Do not allow programs to be executed from this
file system.</p>

<p>MS_NOSUID Do not honour set-user-ID and set-group-ID
bits when executing programs from this file system.</p>

<p>MS_RDONLY Mount file system read-only.</p>

<p>MS_REMOUNT Remount an existing mount. This is allows you
to change the mountflags and data of an existing mount
without having to unmount and remount the file system.
source and target should be the same values specified in the
initial mount() call; filesystemtype is ignored.</p>

<p>The following mountflags can be changed: MS_RDONLY,
MS_SYN- CHRONOUS, MS_MANDLOCK; before kernel 2.6.16, the
following could also be changed: MS_NOATIME and
MS_NODIRATIME; and, addition- ally, before kernel 2.4, the
following could also be changed: MS_NOSUID, MS_NODEV,
MS_NOEXEC.</p>

<p>MS_SYNCHRONOUS Make writes on this file system
synchronous (as though the O_SYNC flag to open(2) was
specified for all file opens to this file system).</p>

<p>From Linux 2.4 onwards, the MS_NODEV, MS_NOEXEC, and
MS_NOSUID flags are settable on a per-mount-point basis.
From kernel 2.6.16 onwards, MS_NOATIME and MS_NODIRATIME are
also settable on a per-mount-point basis.</p>

<p>The data argument is interpreted by the different file
systems. Typi- cally it is a string of comma-separated
options understood by this file system. See mount(8) for
details of the options available for each filesystem
type.</p>

<p>Linux 2.1.116 added the umount2() system call, which,
like umount(), unmounts a target, but allows additional
flags controlling the behaviour of the operation:</p>

<p>MNT_FORCE (since Linux 2.1.116) Force unmount even if
busy. (Only for NFS mounts.)</p>

<p>MNT_DETACH (since Linux 2.4.11) Perform a lazy unmount:
make the mount point unavailable for new accesses, and
actually perform the unmount when the mount point ceases to
be busy.</p>

<p>MNT_EXPIRE (since Linux 2.6.8) Mark the mount point as
expired. If a mount point is not cur- rently in use, then an
initial call to umount2() with this flag fails with the
error EAGAIN, but marks the mount point as expired. The
mount point remains expired as long as it isnt accessed by
any process. A second umount2() call specifying MNT_EXPIRE
unmounts an expired mount point. This flag cannot be
specified with either MNT_FORCE or MNT_DETACH.</p>

<p>RETURN VALUE On success, zero is returned. On error, -1
is returned, and errno is set appropriately.</p>

<p>ERRORS The error values given below result from
filesystem type independent errors. Each filesystem type may
have its own special errors and its own special behavior.
See the kernel source code for details.</p>

<p>EACCES A component of a path was not searchable. (See
also path_resolu- tion(2).) Or, mounting a read-only
filesystem was attempted without giving the MS_RDONLY flag.
Or, the block device source is located on a filesystem
mounted with the MS_NODEV option.</p>

<p>EAGAIN A call to umount2() specifying MNT_EXPIRE
successfully marked an unbusy file system as expired.</p>

<p>EBUSY source is already mounted. Or, it cannot be
remounted read-only, because it still holds files open for
writing. Or, it cannot be mounted on target because target
is still busy (it is the work- ing directory of some task,
the mount point of another device, has open files, etc.).
Or, it could not be unmounted because it is busy.</p>

<p>EFAULT One of the pointer arguments points outside the
user address space.</p>

<p>EINVAL source had an invalid superblock. Or, a remount
(MS_REMOUNT) was attempted, but source was not already
mounted on target. Or, a move (MS_MOVE) was attempted, but
source was not a mount point, or was /. Or, an unmount was
attempted, but target was not a mount point. Or, umount2()
was called with MNT_EXPIRE and either MNT_DETACH or
MNT_FORCE.</p>

<p>ELOOP Too many link encountered during pathname
resolution. Or, a move was attempted, while target is a
descendant of source.</p>

<p>EMFILE (In case no block device is required:) Table of
dummy devices is full.</p>

<p>ENAMETOOLONG A pathname was longer than MAXPATHLEN.</p>

<p>ENODEV filesystemtype not configured in the kernel.</p>

<p>ENOENT A pathname was empty or had a nonexistent
component.</p>

<p>ENOMEM The kernel could not allocate a free page to copy
filenames or data into.</p>

<p>ENOTBLK source is not a block device (and a device was
required).</p>

<p>ENOTDIR The second argument, or a prefix of the first
argument, is not a directory.</p>

<p>ENXIO The major number of the block device source is out
of range.</p>

<p>EPERM The caller does not have the required
privileges.</p>

<p>CONFORMING TO These functions are Linux-specific and
should not be used in programs intended to be portable.</p>

<p>HISTORY The original umount() function was called as
umount(device) and would return ENOTBLK when called with
something other than a block device. In Linux 0.98p4 a call
umount(dir) was added, in order to support anonymous
devices. In Linux 2.3.99-pre7 the call umount(device) was
removed, leaving only umount(dir) (since now devices can be
mounted in more than one place, so specifying the device
does not suffice).</p>

<p>The original MS_SYNC flag was renamed MS_SYNCHRONOUS in
1.1.69 when a different MS_SYNC was added to
&lt;mman.h&gt;.</p>

<p>Before Linux 2.4 an attempt to execute a set-user-ID or
set-group-ID program on a filesystem mounted with MS_NOSUID
would fail with EPERM. Since Linux 2.4 the set-user-ID and
set-group-ID bits are just silently ignored in this
case.</p>

<p>SEE ALSO path_resolution(2), mount(8), umount(8)</p>

<p>Linux 2.6.12 2004-05-18 MOUNT(2)</p>
<hr>
</body>
</html>
