<!-- Creator     : groff version 1.18.1.1 -->
<!-- CreationDate: Sat Nov 12 05:16:37 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>RPM(8) Red Hat Linux RPM(8)</p>

<p>NAME rpm - RPM Package Manager</p>

<p>SYNOPSIS QUERYING AND VERIFYING PACKAGES: rpm
{-q|--query} [select-options] [query-options]</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {-K|--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>INSTALLING, UPGRADING, AND REMOVING PACKAGES: rpm
{-i|--install} [install-options] PACKAGE_FILE ...</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>MISCELLANEOUS: rpm {--initdb|--rebuilddb}</p>

<p>rpm {--addsign|--resign} PACKAGE_FILE ...</p>

<p>rpm {--querytags|--showrc}</p>

<p>rpm {--setperms|--setugids} PACKAGE_NAME ...</p>

<p>select-options [PACKAGE_NAME] [-a,--all] [-f,--file
FILE] [-g,--group GROUP] {-p,--package PACKAGE_FILE]
[--fileid MD5] [--hdrid SHA1] [--pkgid MD5] [--tid TID]
[--querybynumber HDRNUM] [--triggeredby PACKAGE_NAME]
[--whatprovides CAPABILITY] [--whatrequires CAPABILITY]</p>

<p>query-options [--changelog] [-c,--configfiles]
[-d,--docfiles] [--dump] [--filesbypkg] [-i,--info] [--last]
[-l,--list] [--provides] [--qf,--queryformat QUERYFMT]
[-R,--requires] [--scripts] [-s,--state]
[--triggers,--triggerscripts]</p>

<p>verify-options [--nodeps] [--nofiles] [--noscripts]
[--nodigest] [--nosignature] [--nolinkto] [--nomd5]
[--nosize] [--nouser] [--nogroup] [--nomtime] [--nomode]
[--nordev]</p>

<p>install-options [--aid] [--allfiles] [--badreloc]
[--excludepath OLDPATH] [--excludedocs] [--force]
[-h,--hash] [--ignoresize] [--ignorearch] [--ignoreos]
[--includedocs] [--justdb] [--nodeps] [--nodigest]
[--nosignature] [--nosuggest] [--noorder] [--noscripts]
[--notriggers] [--oldpackage] [--percent] [--prefix NEWPATH]
[--relocate OLDPATH=NEWPATH] [--repackage] [--replacefiles]
[--replacepkgs] [--test]</p>

<p>DESCRIPTION rpm is a powerful Package Manager, which can
be used to build, install, query, verify, update, and erase
individual software packages. A pack- age consists of an
archive of files and meta-data used to install and erase the
archive files. The meta-data includes helper scripts, file
attributes, and descriptive information about the package.
Packages come in two varieties: binary packages, used to
encapsulate software to be installed, and source packages,
containing the source code and recipe necessary to produce
binary packages.</p>

<p>One of the following basic modes must be selected:
Query, Verify, Sig- nature Check, Install/Upgrade/Freshen,
Uninstall, Initialize Database, Rebuild Database, Resign,
Add Signature, Set Owners/Groups, Show Query- tags, and Show
Configuration.</p>

<p>GENERAL OPTIONS These options can be used in all the
different modes.</p>

<p>-?, --help Print a longer usage message then normal.</p>

<p>--version Print a single line containing the version
number of rpm being used.</p>

<p>--quiet Print as little as possible - normally only
error messages will be displayed.</p>

<p>-v Print verbose information - normally routine progress
messages will be displayed.</p>

<p>-vv Print lots of ugly debugging information.</p>

<p>--rcfile FILELIST Each of the files in the colon
separated FILELIST is read sequentially by rpm for
configuration information. Only the first file in the list
must exist, and tildes will be expanded to the value of
$HOME. The default FILELIST is
/usr/lib/rpm/rpmrc:/usr/lib/rpm/red-
hat/rpmrc:/etc/rpmrc:~/.rpmrc.</p>

<p>--pipe CMD Pipes the output of rpm to the command
CMD.</p>

<p>--dbpath DIRECTORY Use the database in DIRECTORY rather
than the default path /var/lib/rpm</p>

<p>--root DIRECTORY Use the file system tree rooted at
DIRECTORY for all operations. Note that this means the
database within DIRECTORY will be used for dependency checks
and any scriptlet(s) (e.g. %post if installing, or %prep if
building, a package) will be run after a chroot(2) to
DIRECTORY.</p>

<p>-D, --defineMACRO EXPR Defines MACRO with value
EXPR.</p>

<p>-E, --evalEXPR Prints macro expansion of EXPR.</p>

<p>INSTALL AND UPGRADE OPTIONS The general form of an rpm
install command is</p>

<p>rpm {-i|--install} [install-options] PACKAGE_FILE
...</p>

<p>This installs a new package.</p>

<p>The general form of an rpm upgrade command is</p>

<p>rpm {-U|--upgrade} [install-options] PACKAGE_FILE
...</p>

<p>This upgrades or installs the package currently
installed to a newer version. This is the same as install,
except all other version(s) of the package are removed after
the new package is installed.</p>

<p>rpm {-F|--freshen} [install-options] PACKAGE_FILE
...</p>

<p>This will upgrade packages, but only if an earlier
version currently exists. The PACKAGE_FILE may be specified
as an ftp or http URL, in which case the package will be
downloaded before being installed. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client
support.</p>

<p>--aid Add suggested packages to the transaction set when
needed.</p>

<p>--allfiles Installs or upgrades all the missingok files
in the package, regardless if they exist.</p>

<p>--badreloc Used with --relocate, permit relocations on
all file paths, not just those OLDPATHs included in the
binary package relocation hint(s).</p>

<p>--excludepath OLDPATH Dont install files whose name
begins with OLDPATH.</p>

<p>--excludedocs Don t install any files which are marked
as documentation (which includes man pages and texinfo
documents).</p>

<p>--force Same as using --replacepkgs, --replacefiles, and
--oldpackage.</p>

<p>-h, --hash Print 50 hash marks as the package archive is
unpacked. Use with -v|--verbose for a nicer display.</p>

<p>--ignoresize Dont check mount file systems for
sufficient disk space before installing this package.</p>

<p>--ignorearch Allow installation or upgrading even if the
architectures of the binary package and host dont match.</p>

<p>--ignoreos Allow installation or upgrading even if the
operating systems of the binary package and host dont
match.</p>

<p>--includedocs Install documentation files. This is the
default behavior.</p>

<p>--justdb Update only the database, not the
filesystem.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nosignature Don t verify package or header signatures
when reading.</p>

<p>--nodeps Dont do a dependency check before installing or
upgrading a package.</p>

<p>--nosuggest Don t suggest package(s) that provide a
missing dependency.</p>

<p>--noorder Dont reorder the packages for an install. The
list of packages would normally be reordered to satisfy
dependencies.</p>

<p>--noscripts</p>

<p>--nopre</p>

<p>--nopost</p>

<p>--nopreun</p>

<p>--nopostun Dont execute the scriptlet of the same name.
The --noscripts option is equivalent to</p>

<p>--nopre --nopost --nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %pre,
%post, %preun, and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerin</p>

<p>--notriggerun</p>

<p>--notriggerpostun Dont execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerin --notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerin,
%trig- gerun, and %triggerpostun scriptlet(s).</p>

<p>--oldpackage Allow an upgrade to replace a newer package
with an older one.</p>

<p>--percent Print percentages as files are unpacked from
the package archive. This is intended to make rpm easy to
run from other tools.</p>

<p>--prefix NEWPATH For relocatable binary packages,
translate all file paths that start with the installation
prefix in the package relocation hint(s) to NEWPATH.</p>

<p>--relocate OLDPATH=NEWPATH For relocatable binary
packages, translate all file paths that start with OLDPATH
in the package relocation hint(s) to NEWPATH. This option
can be used repeatedly if several OLDPATHs in the package
are to be relocated.</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--replacefiles Install the packages even if they replace
files from other, already installed, packages.</p>

<p>--replacepkgs Install the packages even if some of them
are already installed on this system.</p>

<p>--test Do not install the package, simply check for and
report poten- tial conflicts.</p>

<p>ERASE OPTIONS The general form of an rpm erase command
is</p>

<p>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts]
[--notriggers] [--repackage] [--test] PACKAGE_NAME ...</p>

<p>The following options may also be used:</p>

<p>--allmatches Remove all versions of the package which
match PACKAGE_NAME. Normally an error is issued if
PACKAGE_NAME matches multiple packages.</p>

<p>--nodeps Dont check dependencies before uninstalling the
packages.</p>

<p>--noscripts</p>

<p>--nopreun</p>

<p>--nopostun Don t execute the scriptlet of the same name.
The --noscripts option during package erase is equivalent
to</p>

<p>--nopreun --nopostun</p>

<p>and turns off the execution of the corresponding %preun,
and %postun scriptlet(s).</p>

<p>--notriggers</p>

<p>--notriggerun</p>

<p>--notriggerpostun Don t execute any trigger scriptlet of
the named type. The --notriggers option is equivalent to</p>

<p>--notriggerun --notriggerpostun</p>

<p>and turns off execution of the corresponding %triggerun,
and %triggerpostun scriptlet(s).</p>

<p>--repackage Re-package the files before erasing. The
previously installed package will be named according to the
macro %_repack- age_name_fmt and will be created in the
directory named by the macro %_repackage_dir (default value
is /var/spool/repackage).</p>

<p>--test Dont really uninstall anything, just go through
the motions. Useful in conjunction with the -vv option for
debugging.</p>

<p>QUERY OPTIONS The general form of an rpm query command
is</p>

<p>rpm {-q|--query} [select-options] [query-options]</p>

<p>You may specify the format that package information
should be printed in. To do this, you use the</p>

<p>--qf|--queryformat QUERYFMT</p>

<p>option, followed by the QUERYFMT format string. Query
formats are mod- ified versions of the standard printf(3)
formatting. The format is made up of static strings (which
may include standard C character escapes for newlines, tabs,
and other special characters) and printf(3) type formatters.
As rpm already knows the type to print, the type specifier
must be omitted however, and replaced by the name of the
header tag to be printed, enclosed by {} characters. Tag
names are case insensitive, and the leading RPMTAG_ portion
of the tag name may be omitted as well.</p>

<p>Alternate output formats may be requested by following
the tag with :typetag. Currently, the following types are
supported:</p>

<p>:armor Wrap a public key in ASCII armor.</p>

<p>:base64 Encode binary data using base64.</p>

<p>:date Use strftime(3) &quot;%c&quot; format.</p>

<p>:day Use strftime(3) &quot;%a %b %d %Y&quot; format.</p>

<p>:depflags Format dependency flags.</p>

<p>:fflags Format file flags.</p>

<p>:hex Format in hexadecimal.</p>

<p>:octal Format in octal.</p>

<p>:perms Format file permissions.</p>

<p>:shescape Escape single quotes for use in a script.</p>

<p>:triggertype Display trigger suffix.</p>

<p>For example, to print only the names of the packages
queried, you could use %{NAME} as the format string. To
print the packages name and dis- tribution information in
two columns, you could use %-30{NAME}%{DISTRI- BUTION}. rpm
will print a list of all of the tags it knows about when it
is invoked with the --querytags argument.</p>

<p>There are two subsets of options for querying: package
selection, and information selection.</p>

<p>PACKAGE SELECTION OPTIONS: PACKAGE_NAME Query installed
package named PACKAGE_NAME.</p>

<p>-a, --all Query all installed packages.</p>

<p>-f, --file FILE Query package owning FILE.</p>

<p>--fileid MD5 Query package that contains a given file
identifier, i.e. the MD5 digest of the file contents.</p>

<p>-g, --group GROUP Query packages with the group of
GROUP.</p>

<p>--hdrid SHA1 Query package that contains a given header
identifier, i.e. the SHA1 digest of the immutable header
region.</p>

<p>-p, --package PACKAGE_FILE Query an (uninstalled)
package PACKAGE_FILE. The PACKAGE_FILE may be specified as
an ftp or http style URL, in which case the package header
will be downloaded and queried. See FTP/HTTP OPTIONS for
information on rpms internal ftp and http client support.
The PACKAGE_FILE argument(s), if not a binary package, will
be interpreted as an ASCII package manifest. Comments are
permitted, starting with a #, and each line of a package
mani- fest file may include white space separated glob
expressions, including URLs with remote glob expressions,
that will be expanded to paths that are substituted in place
of the package manifest as additional PACKAGE_FILE arguments
to the query.</p>

<p>--pkgid MD5 Query package that contains a given package
identifier, i.e. the MD5 digest of the combined header and
payload contents.</p>

<p>--querybynumber HDRNUM Query the HDRNUMth database entry
directly; this is useful only for debugging.</p>

<p>--specfile SPECFILE Parse and query SPECFILE as if it
were a package. Although not all the information (e.g. file
lists) is available, this type of query permits rpm to be
used to extract information from spec files without having
to write a specfile parser.</p>

<p>--tid TID Query package(s) that have a given TID
transaction identifier. A unix time stamp is currently used
as a transaction identifier. All package(s) installed or
erased within a single transaction have a common
identifier.</p>

<p>--triggeredby PACKAGE_NAME Query packages that are
triggered by package(s) PACKAGE_NAME.</p>

<p>--whatprovides CAPABILITY Query all packages that
provide the CAPABILITY capability.</p>

<p>--whatrequires CAPABILITY Query all packages that
requires CAPABILITY for proper function- ing.</p>

<p>PACKAGE QUERY OPTIONS: --changelog Display change
information for the package.</p>

<p>-c, --configfiles List only configuration files (implies
-l).</p>

<p>-d, --docfiles List only documentation files (implies
-l).</p>

<p>--dump Dump file information as follows (implies
-l):</p>

<p>path size mtime md5sum mode owner group isconfig isdoc
rdev symlink</p>

<p>--filesbypkg List all the files in each selected
package.</p>

<p>-i, --info Display package information, including name,
version, and description. This uses the --queryformat if one
was specified.</p>

<p>--last Orders the package listing by install time such
that the latest packages are at the top.</p>

<p>-l, --list List files in package.</p>

<p>--provides List capabilities this package provides.</p>

<p>-R, --requires List packages on which this package
depends.</p>

<p>--scripts List the package specific scriptlet(s) that
are used as part of the installation and uninstallation
processes.</p>

<p>-s, --state Display the states of files in the package
(implies -l). The state of each file is one of normal, not
installed, or replaced.</p>

<p>--triggers, --triggerscripts Display the trigger
scripts, if any, which are contained in the package.</p>

<p>VERIFY OPTIONS The general form of an rpm verify command
is</p>

<p>rpm {-V|--verify} [select-options] [verify-options]</p>

<p>Verifying a package compares information about the
installed files in the package with information about the
files taken from the package metadata stored in the rpm
database. Among other things, verifying compares the size,
MD5 sum, permissions, type, owner and group of each file.
Any discrepancies are displayed. Files that were not
installed from the package, for example, documentation files
excluded on instal- lation using the
&quot;--excludedocs&quot; option, will be silently
ignored.</p>

<p>The package selection options are the same as for
package querying (including package manifest files as
arguments). Other options unique to verify mode are:</p>

<p>--nodeps Dont verify dependencies of packages.</p>

<p>--nodigest Dont verify package or header digests when
reading.</p>

<p>--nofiles Dont verify any attributes of package
files.</p>

<p>--noscripts Don t execute the %verifyscript scriptlet
(if any).</p>

<p>--nosignature Dont verify package or header signatures
when reading.</p>

<p>--nolinkto</p>

<p>--nomd5</p>

<p>--nosize</p>

<p>--nouser</p>

<p>--nogroup</p>

<p>--nomtime</p>

<p>--nomode</p>

<p>--nordev Dont verify the corresponding file
attribute.</p>

<p>The format of the output is a string of 8 characters, a
possible attribute marker:</p>

<p>c %config configuration file. d %doc documentation file.
g %ghost file (i.e. the file contents are not included in
the package payload). l %license license file. r %readme
readme file.</p>

<p>from the package header, followed by the file name. Each
of the 8 characters denotes the result of a comparison of
attribute(s) of the file to the value of those attribute(s)
recorded in the database. A single &quot;.&quot; (period)
means the test passed, while a single &quot;?&quot;
(question mark) indicates the test could not be performed
(e.g. file permissions prevent reading). Otherwise, the
(mnemonically emBoldened) character denotes failure of the
corresponding --verify test:</p>

<p>S file Size differs M Mode differs (includes permissions
and file type) 5 MD5 sum differs D Device major/minor number
mismatch L readLink(2) path mismatch U User ownership
differs G Group ownership differs T mTime differs</p>

<p>DIGITAL SIGNATURE AND DIGEST VERIFICATION The general
forms of rpm digital signature commands are</p>

<p>rpm --import PUBKEY ...</p>

<p>rpm {--checksig} [--nosignature] [--nodigest]
PACKAGE_FILE ...</p>

<p>The --checksig option checks all the digests and
signatures contained in PACKAGE_FILE to ensure the integrity
and origin of the package. Note that signatures are now
verified whenever a package is read, and --checksig is
useful to verify all of the digests and signatures asso-
ciated with a package.</p>

<p>Digital signatures cannot be verified without a public
key. An ASCII armored public key can be added to the rpm
database using --import. An imported public key is carried
in a header, and key ring management is performed exactly
like package management. For example, all currently imported
public keys can be displayed by:</p>

<p>rpm -qa gpg-pubkey*</p>

<p>Details about a specific public key, when imported, can
be displayed by querying. Heres information about the Red
Hat GPG/DSA key:</p>

<p>rpm -qi gpg-pubkey-db42a60e</p>

<p>Finally, public keys can be erased after importing just
like packages. Heres how to remove the Red Hat GPG/DSA
key</p>

<p>rpm -e gpg-pubkey-db42a60e</p>

<p>SIGNING A PACKAGE rpm --addsign|--resign PACKAGE_FILE
...</p>

<p>Both of the --addsign and --resign options generate and
insert new sig- natures for each package PACKAGE_FILE given,
replacing any existing signatures. There are two options for
historical reasons, there is no difference in behavior
currently.</p>

<p>USING GPG TO SIGN PACKAGES In order to sign packages
using GPG, rpm must be configured to run GPG and be able to
find a key ring with the appropriate keys. By default, rpm
uses the same conventions as GPG to find key rings, namely
the $GNUPGHOME environment variable. If your key rings are
not located where GPG expects them to be, you will need to
configure the macro %_gpg_path to be the location of the GPG
key rings to use.</p>

<p>For compatibility with older versions of GPG, PGP, and
rpm, only V3 OpenPGP signature packets should be configured.
Either DSA or RSA ver- ification algorithms can be used, but
DSA is preferred.</p>

<p>If you want to be able to sign packages you create
yourself, you also need to create your own public and secret
key pair (see the GPG man- ual). You will also need to
configure the rpm macros</p>

<p>%_signature The signature type. Right now only gpg and
pgp are supported.</p>

<p>%_gpg_name The name of the &quot;user&quot; whose key
you wish to use to sign your packages.</p>

<p>For example, to be able to use GPG to sign packages as
the user &quot;John Doe &lt;jdoe@foo.com&gt;&quot; from the
key rings located in /etc/rpm/.gpg using the executable
/usr/bin/gpg you would include</p>

<p>%_signature gpg %_gpg_path /etc/rpm/.gpg %_gpg_name John
Doe &lt;jdoe@foo.com&gt; %_gpgbin /usr/bin/gpg</p>

<p>in a macro configuration file. Use /etc/rpm/macros for
per-system con- figuration and ~/.rpmmacros for per-user
configuration.</p>

<p>REBUILD DATABASE OPTIONS The general form of an rpm
rebuild database command is</p>

<p>rpm {--initdb|--rebuilddb} [-v] [--dbpath DIRECTORY]
[--root DIRECTORY]</p>

<p>Use --initdb to create a new database if one doesnt
already exist (existing database is not overwritten), use
--rebuilddb to rebuild the database indices from the
installed package headers.</p>

<p>SHOWRC The command</p>

<p>rpm --showrc</p>

<p>shows the values rpm will use for all of the options are
currently set in rpmrc and macros configuration file(s).</p>

<p>FTP/HTTP OPTIONS rpm can act as an FTP and/or HTTP
client so that packages can be queried or installed from the
internet. Package files for install, upgrade, and query
operations may be specified as an ftp or http style URL:</p>

<p>ftp://USER:PASSWORD@HOST:PORT/path/to/package.rpm</p>

<p>If the :PASSWORD portion is omitted, the password will
be prompted for (once per user/hostname pair). If both the
user and password are omit- ted, anonymous ftp is used. In
all cases, passive (PASV) ftp transfers are performed.</p>

<p>rpm allows the following options to be used with ftp
URLs:</p>

<p>--ftpproxy HOST The host HOST will be used as a proxy
server for all ftp trans- fers, which allows users to ftp
through firewall machines which use proxy systems. This
option may also be specified by config- uring the macro
%_ftpproxy.</p>

<p>--ftpport PORT The TCP PORT number to use for the ftp
connection on the proxy ftp server instead of the default
port. This option may also be specified by configuring the
macro %_ftpport.</p>

<p>rpm allows the following options to be used with http
URLs:</p>

<p>--httpproxy HOST The host HOST will be used as a proxy
server for all http trans- fers. This option may also be
specified by configuring the macro %_httpproxy.</p>

<p>--httpport PORT The TCP PORT number to use for the http
connection on the proxy http server instead of the default
port. This option may also be specified by configuring the
macro %_httpport.</p>

<p>LEGACY ISSUES Executing rpmbuild The build modes of rpm
are now resident in the /usr/bin/rpmbuild exe- cutable.
Although legacy compatibility provided by the popt aliases
below has been adequate, the compatibility is not perfect;
hence build mode compatibility through popt aliases is being
removed from rpm. Install the package containing rpmbuild
(usually rpm-build) and see rpmbuild(8) for documentation of
all the rpm build modes previously documented here in
rpm(8).</p>

<p>Add the following lines to /etc/popt if you wish to
continue invoking rpmbuild from the rpm command line:</p>

<p>rpm exec --bp rpmb -bp rpm exec --bc rpmb -bc rpm exec
--bi rpmb -bi rpm exec --bl rpmb -bl rpm exec --ba rpmb -ba
rpm exec --bb rpmb -bb rpm exec --bs rpmb -bs rpm exec --tp
rpmb -tp rpm exec --tc rpmb -tc rpm exec --ti rpmb -ti rpm
exec --tl rpmb -tl rpm exec --ta rpmb -ta rpm exec --tb rpmb
-tb rpm exec --ts rpmb -ts rpm exec --rebuild rpmb --rebuild
rpm exec --recompile rpmb --recompile rpm exec --clean rpmb
--clean rpm exec --rmsource rpmb --rmsource rpm exec
--rmspec rpmb --rmspec rpm exec --target rpmb --target rpm
exec --short-circuit rpmb --short-circuit</p>

<p>FILES rpmrc Configuration /usr/lib/rpm/rpmrc
/usr/lib/rpm/redhat/rpmrc /etc/rpmrc ~/.rpmrc</p>

<p>Macro Configuration /usr/lib/rpm/macros
/usr/lib/rpm/redhat/macros /etc/rpm/macros ~/.rpmmacros</p>

<p>Database /var/lib/rpm/Basenames
/var/lib/rpm/Conflictname /var/lib/rpm/Dirnames
/var/lib/rpm/Filemd5s /var/lib/rpm/Group
/var/lib/rpm/Installtid /var/lib/rpm/Name
/var/lib/rpm/Packages /var/lib/rpm/Providename
/var/lib/rpm/Provideversion /var/lib/rpm/Pubkeys
/var/lib/rpm/Removed /var/lib/rpm/Requirename
/var/lib/rpm/Requireversion /var/lib/rpm/Sha1header
/var/lib/rpm/Sigmd5 /var/lib/rpm/Triggername</p>

<p>Temporary /var/tmp/rpm*</p>

<p>SEE ALSO popt(3), rpm2cpio(8), rpmbuild(8),</p>

<p>rpm --help - as rpm supports customizing the options via
popt aliases its impossible to guarantee that whats
described in the manual matches whats available.</p>

<p>http://www.rpm.org/ &lt;URL:http://www.rpm.org/&gt;</p>

<p>AUTHORS Marc Ewing &lt;marc@redhat.com&gt; Jeff Johnson
&lt;jbj@redhat.com&gt; Erik Troan &lt;ewt@redhat.com&gt;</p>

<p>Red Hat, Inc. 09 June 2002 RPM(8) mtools.1(3)
mtools.1(3)</p>

<p>Name mtools - utilities to access DOS disks in Unix.</p>

<p>Introduction Mtools is a public domain collection of
tools to allow Unix systems to manipulate MS-DOS files:
read, write, and move around files on an MS- DOS filesystem
(typically a floppy disk). Where reasonable, each pro- gram
attempts to emulate the MS-DOS equivalent command. However,
unnec- essary restrictions and oddities of DOS are not
emulated. For instance, it is possible to move
subdirectories from one subdirectory to another.</p>

<p>Mtools is sufficient to give access to MS-DOS
filesystems. For instance, commands such as mdir a: work on
the a: floppy without any preliminary mounting or
initialization (assuming the default /etc/mtools.conf works
on your machine). With mtools, one can change floppies too
without unmounting and mounting.</p>

<p>Where to get mtools Mtools can be found at the following
places (and their mirrors):</p>

<p>http://mtools.linux.lu/mtools-3.9.10.tar.gz
ftp://www.tux.org/pub/knaff/mtools/mtools-3.9.10.tar.gz
ftp://ibiblio.unc.edu/pub/Linux/utils/disk-management/mtools-3.9.10.tar.gz</p>

<p>Before reporting a bug, make sure that it has not yet
been fixed in the Alpha patches which can be found at:</p>

<p>http://mtools.linux.lu/
ftp://www.tux.org/pub/knaff/mtools</p>

<p>These patches are named mtools-version-ddmm.taz, where
version stands for the base version, dd for the day and mm
for the month. Due to a lack of space, I usually leave only
the most recent patch.</p>

<p>There is an mtools mailing list at mtools @ tux.org .
Please send all bug reports to this list. You may subscribe
to the list by sending a message with subscribe mtools @
tux.org in its body to majordomo @ tux.org . (N.B. Please
remove the spaces around the &quot;@&quot; both times. I
left them there in order to fool spambots.) Announcements of
new mtools versions will also be sent to the list, in
addition to the linux announce newsgroups. The mailing list
is archived at
http://www.tux.org/hypermail/mtools/latest</p>

<p>Common features of all mtools commands Options and
filenames MS-DOS filenames are composed of a drive letter
followed by a colon, a subdirectory, and a filename. Only
the filename part is mandatory, the drive letter and the
subdirectory are optional. Filenames without a drive letter
refer to Unix files. Subdirectory names can use either the /
or separator. The use of the separator or wildcards requires
the names to be enclosed in quotes to protect them from the
shell. However, wildcards in Unix filenames should not be
enclosed in quotes, because here we want the shell to expand
them.</p>

<p>The regular expression &quot;pattern matching&quot;
routines follow the Unix- style rules. For example, *
matches all MS-DOS files in lieu of *.*. The archive,
hidden, read-only and system attribute bits are ignored
during pattern matching.</p>

<p>All options use the - (minus) as their first character,
not / as youd expect in MS-DOS.</p>

<p>Most mtools commands allow multiple filename parameters,
which doesnt follow MS-DOS conventions, but which is more
user-friendly.</p>

<p>Most mtools commands allow options that instruct them
how to handle file name clashes. See section name clashes,
for more details on these. All commands accept the -V flags
which prints the version, and most accept the -v flag, which
switches on verbose mode. In verbose mode, these commands
print out the name of the MS-DOS files upon which they act,
unless stated otherwise. See section Commands, for a
description of the options which are specific to each
command.</p>

<p>Drive letters The meaning of the drive letters depends
on the target architectures. However, on most target
architectures, drive A is the first floppy drive, drive B is
the second floppy drive (if available), drive J is a Jaz
drive (if available), and drive Z is a Zip drive (if
available). On those systems where the device name is
derived from the SCSI id, the Jaz drive is assumed to be at
Scsi target 4, and the Zip at Scsi target 5 (factory default
settings). On Linux, both drives are assumed to be the
second drive on the Scsi bus (/dev/sdb). The default
settings can be changes using a configuration file (see
section Configuration).</p>

<p>The drive letter : (colon) has a special meaning. It is
used to access image files which are directly specified on
the command line using the -i options.</p>

<p>Example:</p>

<p>mcopy -i my-image-file.bin ::file1 ::file2 .</p>

<p>This copies file1 and file2 from the image file
(my-image-file.bin) to the /tmp directory.</p>

<p>Current working directory The mcd command (mcd) is used
to establish the device and the current working directory
(relative to the MS-DOS filesystem), otherwise the default
is assumed to be A:/. However, unlike MS-DOS, there is only
one working directory for all drives, and not one per
drive.</p>

<p>VFAT-style long file names This version of mtools
supports VFAT style long filenames. If a Unix filename is
too long to fit in a short DOS name, it is stored as a VFAT
long name, and a companion short name is generated. This
short name is what you see when you examine the disk with a
pre-7.0 version of DOS. The following table shows some
examples of short names:</p>

<p>Long name MS-DOS name Reason for the change ---------
---------- --------------------- thisisatest THISIS~1
filename too long alain.knaff ALAIN~1.KNA extension too long
prn.txt PRN~1.TXT PRN is a device name .abc ABC~1 null
filename hot+cold HOT_CO~1 illegal character</p>

<p>As you see, the following transformations happen to
derive a short name:</p>

<p>* Illegal characters are replaced by underscores. The
illegal characters are ;+=[],</p>

<p>* Extra dots, which cannot be interpreted as a main
name/extension separator are removed</p>

<p>* A ~n number is generated,</p>

<p>* The name is shortened so as to fit in the 8+3
limitation</p>

<p>The initial Unix-style file name (whether long or short)
is also called the primary name, and the derived short name
is also called the secondary name.</p>

<p>Example:</p>

<p>mcopy /etc/motd a:Reallylongname</p>

<p>Mtools creates a VFAT entry for Reallylongname, and uses
REALLYLO as a short name. Reallylongname is the primary
name, and REALLYLO is the secondary name.</p>

<p>mcopy /etc/motd a:motd</p>

<p>Motd fits into the DOS filename limits. Mtools doesnt
need to derivate another name. Motd is the primary name, and
there is no sec- ondary name.</p>

<p>In a nutshell: The primary name is the long name, if one
exists, or the short name if there is no long name.</p>

<p>Although VFAT is much more flexible than FAT, there are
still names that are not acceptable, even in VFAT. There are
still some illegal characters left (</p>

<p>Unix name Long name Reason for the change ---------
---------- --------------------- prn prn-1 PRN is a device
name ab:c ab_c-1 illegal character</p>

<p>As you see, the following transformations happen if a
long name is illegal:</p>

<p>* Illegal characters are replaces by underscores,</p>

<p>* A -n number is generated,</p>

<p>Name clashes When writing a file to disk, its long name
or short name may collide with an already existing file or
directory. This may happen for all commands which create new
directory entries, such as mcopy, mmd, mren, mmove. When a
name clash happens, mtools asks you what it should do. It
offers several choices:</p>

<p>overwrite Overwrites the existing file. It is not
possible to overwrite a directory with a file.</p>

<p>rename Renames the newly created file. Mtools prompts
for the new file- name</p>

<p>autorename Renames the newly created file. Mtools
chooses a name by itself, without prompting</p>

<p>skip Gives up on this file, and moves on to the next (if
any)</p>

<p>To chose one of these actions, type its first letter at
the prompt. If you use a lower case letter, the action only
applies for this file only, if you use an upper case letter,
the action applies to all files, and you wont be prompted
again.</p>

<p>You may also chose actions (for all files) on the
command line, when invoking mtools:</p>

<p>-D o Overwrites primary names by default.</p>

<p>-D O Overwrites secondary names by default.</p>

<p>-D r Renames primary name by default.</p>

<p>-D R Renames secondary name by default.</p>

<p>-D a Autorenames primary name by default.</p>

<p>-D A Autorenames secondary name by default.</p>

<p>-D s Skip primary name by default.</p>

<p>-D S Skip secondary name by default.</p>

<p>-D m Ask user what to do with primary name.</p>

<p>-D M Ask user what to do with secondary name.</p>

<p>Note that for command line switches lower/upper
differentiates between primary/secondary name whereas for
interactive choices, lower/upper differentiates between
just-this-time/always.</p>

<p>The primary name is the name as displayed in Windows 95
or Windows NT: i.e. the long name if it exists, and the
short name otherwise. The secondary name is the
&quot;hidden&quot; name, i.e. the short name if a long name
exists.</p>

<p>By default, the user is prompted if the primary name
clashes, and the secondary name is autorenamed.</p>

<p>If a name clash occurs in a Unix directory, mtools only
asks whether to overwrite the file, or to skip it.</p>

<p>Case sensitivity of the VFAT filesystem The VFAT
filesystem is able to remember the case of the filenames.
How- ever, filenames which differ only in case are not
allowed to coexist in the same directory. For example if you
store a file called LongFileName on a VFAT filesystem, mdir
shows this file as LongFileName, and not as Longfilename.
However, if you then try to add LongFilename to the same
directory, it is refused, because case is ignored for clash
checks.</p>

<p>The VFAT filesystem allows to store the case of a
filename in the attribute byte, if all letters of the
filename are the same case, and if all letters of the
extension are the same case too. Mtools uses this
information when displaying the files, and also to generate
the Unix filename when mcopying to a Unix directory. This
may have unexpected results when applied to files written
using an pre-7.0 version of DOS: Indeed, the old style
filenames map to all upper case. This is differ- ent from
the behavior of the old version of mtools which used to
gener- ate lower case Unix filenames.</p>

<p>high capacity formats Mtools supports a number of
formats which allow to store more data on disk as usual. Due
to different operating system abilities, these for- mats are
not supported on all OSes. Mtools recognizes these formats
transparently where supported.</p>

<p>In order to format these disks, you need to use an
operating system specific tool. For Linux, suitable floppy
tools can be found in the fdutils package at the following
locations~:</p>

<p>ftp://www.tux.org/pub/knaff/fdutils/.
ftp://ibiblio.unc.edu/pub/Linux/utils/disk-management/fdutils-*</p>

<p>See the manpages included in that package for further
detail: Use superformat to format all formats except XDF,
and use xdfcopy to format XDF.</p>

<p>More sectors The oldest method of fitting more data on a
disk is to use more sectors and more cylinders. Although the
standard format uses 80 cylinders and 18 sectors (on a 3 1/2
high density disk), it is possible to use up to 83 cylinders
(on most drives) and up to 21 sectors. This method allows to
store up to 1743K on a 3 1/2 HD disk. However, 21 sector
disks are twice as slow as the standard 18 sector disks
because the sectors are packed so close together that we
need to interleave them. This problem doesnt exist for 20
sector formats.</p>

<p>These formats are supported by numerous DOS shareware
utilities such as fdformat and vgacopy. In his infinite
hybris, Bill Gate$ believed that he invented this, and
called it DMF disks, or Windows formatted disks . But in
reality, it has already existed years before! Mtools
supports these formats on Linux, on SunOs and on the DELL
Unix PC.</p>

<p>Bigger sectors By using bigger sectors it is possible to
go beyond the capacity which can be obtained by the standard
512-byte sectors. This is because of the sector header. The
sector header has the same size, regardless of how many data
bytes are in the sector. Thus, we save some space by using
fewer, but bigger sectors. For example, 1 sector of 4K only
takes up header space once, whereas 8 sectors of 512 bytes
have also 8 head- ers, for the same amount of useful
data.</p>

<p>This method allows to store up to 1992K on a 3 1/2 HD
disk.</p>

<p>Mtools supports these formats only on Linux.</p>

<p>2m The 2m format was originally invented by Ciriaco
Garcia de Celis. It also uses bigger sectors than usual in
order to fit more data on the disk. However, it uses the
standard format (18 sectors of 512 bytes each) on the first
cylinder, in order to make these disks easyer to handle by
DOS. Indeed this method allows to have a standard sized
boot- sector, which contains a description of how the rest
of the disk should be read.</p>

<p>However, the drawback of this is that the first cylinder
can hold less data than the others. Unfortunately, DOS can
only handle disks where each track contains the same amount
of data. Thus 2m hides the fact that the first track
contains less data by using a shadow FAT. (Usu- ally, DOS
stores the FAT in two identical copies, for additional
safety. XDF stores only one copy, and it tells DOS that it
stores two. Thus the same that would be taken up by the
second FAT copy is saved.) This also means that your should
never use a 2m disk to store anything else than a DOS
fs.</p>

<p>Mtools supports these format only on Linux.</p>

<p>XDF XDF is a high capacity format used by OS/2. It can
hold 1840 K per disk. Thats lower than the best 2m formats,
but its main advantage is that it is fast: 600 milliseconds
per track. Thats faster than the 21 sector format, and
almost as fast as the standard 18 sector format. In order to
access these disks, make sure mtools has been compiled with
XDF support, and set the use_xdf variable for the drive in
the configu- ration file. See section Compiling mtools, and
misc variables, for details on how to do this. Fast XDF
access is only available for Linux kernels which are more
recent than 1.1.34.</p>

<p>Mtools supports this format only on Linux.</p>

<p>Caution / Attention distributors: If mtools is compiled
on a Linux ker- nel more recent than 1.3.34, it wont run on
an older kernel. However, if it has been compiled on an
older kernel, it still runs on a newer kernel, except that
XDF access is slower. It is recommended that dis- tribution
authors only include mtools binaries compiled on kernels
older than 1.3.34 until 2.0 comes out. When 2.0 will be out,
mtools binaries compiled on newer kernels may (and should)
be distributed. Mtools binaries compiled on kernels older
than 1.3.34 won t run on any 2.1 kernel or later.</p>

<p>Exit codes All the Mtools commands return 0 on success,
1 on utter failure, or 2 on partial failure. All the Mtools
commands perform a few sanity checks before going ahead, to
make sure that the disk is indeed an MS- DOS disk (as
opposed to, say an ext2 or minix disk). These checks may
reject partially corrupted disks, which might otherwise
still be read- able. To avoid these checks, set the
MTOOLS_SKIP_CHECK environmental variable or the
corresponding configuration file variable (see section
global variables)</p>

<p>Bugs An unfortunate side effect of not guessing the
proper device (when mul- tiple disk capacities are
supported) is an occasional error message from the device
driver. These can be safely ignored.</p>

<p>The fat checking code chokes on 1.72 Mb disks mformatted
with pre-2.0.7 mtools. Set the environmental variable
MTOOLS_FAT_COMPATIBILITY (or the corresponding configuration
file variable, global variables) to bypass the fat
checking.</p>

<p>See also floppyd_installtest mattrib mbadblocks mcd
mcopy mdel mdeltree mdir mdu mformat minfo mkmanifest mlabel
mmd mmount mmove mrd mren mtoolstest mtype</p>

<p>mtools-3.9.10 28Feb05 mtools.1(3)</p>
<hr>
</body>
</html>
